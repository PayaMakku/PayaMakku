//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../sniff ../../urlUtils ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/layers/support/TileInfo ../vectorTiles/views/2d/tiling/TileInfoView ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b,l,t){function w(K){Object.defineProperty(K,"width",{get:function(){return this.size[0]}});Object.defineProperty(K,"height",{get:function(){return this.size[1]}});Object.defineProperty(K,"center",{get:function(){var O=this.viewpoint.targetGeometry;return[O.x,O.y]}})}var C=q["default"],D=u.SymbolProcessor,E=v["default"],F=f("esri-will-change"),G=void 0===f("ie")&&7<=f("trident"),H=f("safari"),M=G||f("edge"),X=function(){var K=window.performance||{},
O=K.now||K.webkitNow||K.msNow||K.oNow||K.mozNow;if(void 0!==O)return function(){return O.call(K)};var N=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-N}}();q=f("ff");u=f("ie");v=f("webkit");f=f("opera");var W=(new Date).getTime(),T=window.requestAnimationFrame;T||(T=window[(v&&"webkit"||q&&"moz"||f&&"o"||u&&"ms")+"RequestAnimationFrame"])||(T=function(K){var O=
X(),N=Math.max(0,16-(O-W)),Y=window.setTimeout(function(){K(X())},N);W=O+N;return Y});B=B(null,{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_defaultTileSize:512,_tileInfo:null,_tileInfoView:null,_wglContainer:null,_wglView:null,_tileRenderer:null,_tileRendererProps:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_returnCentroid:null,
_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,_viewState:null,_renderParameters:null,_updateParameters:null,_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",_panDx:0,_panDy:0,_clipRect:null,constructor:function(K){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;m.mixin(this,K);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},
getEventSource:function(){return this.getNode()},setClip:function(K){this._clipRect=null;var O=M&&G?"rect(auto,auto,auto,auto)":null;if(K){O=K.x;var N=K.y,Y=K.width;K=K.height;this._clipRect={x:O,y:N,width:Y,height:K};var P=this.layer.getNavigationTransform();O+=P.dx;N+=P.dy;O=M?this._getClipRect(O,N,Y,K):this._getClipPath(O,N,Y,K)}d.set(this.getNode(),M?"clip":"clip-path",O);H&&d.set(this.getNode(),"-webkit-clip-path",O)},start:function(){this._started=!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(K,O){return this.layer.suspended?e.resolve(null):this._wglView.hitTest(K,O).then(function(N){return 0===N.length?null:this.layer._mode._featureMap[N[0]]}.bind(this))},syncHitTest:function(K,O){var N=this._wglContainer.prepareChildrenRenderParameters(this._renderParameters);N=this._wglView.prepareChildrenRenderParameters(N);
N=this._wglView._hitTest(N,K,O);this._scheduleRender();return this.layer._mode._featureMap[N[0]]},_setup:function(){this._initState();this._createWGLContainer();this._createTileRenderer();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyTileRenderer();this._destroyWGLContainer();this.stop();this.surface.getEventSource().removeChild(this.getNode())},
_createWGLContainer:function(){this._wglContainer=new r;this._canvas=this._wglContainer.createElement();F&&d.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);this._wglContainer=null},_createTileRenderer:function(){var K=
this.layer;this._tileRendererProps={layerView:{requestUpdate:function(){this._scheduleUpdate()}.bind(this)},highlightOptions:new x,layer:{objectIdField:K.objectIdField,geometryType:this._getNormalizedGeometryType(K),spatialReference:new y(K.spatialReference.toJson()),fields:K.fields,typeIdField:K.typeIdField,types:a.map(K.types,function(O){return O.toJson()}),outFields:K.getOutFields(),definitionExpression:null,renderer:this._getRenderer4(),gdbVersion:null,historicMoment:null},tileInfoView:this._tileInfoView};
this._tileRenderer=new E(this._tileRendererProps);this._installTileRenderer(this._tileRenderer)},_installTileRenderer:function(K){this._wglView=new C({highlightOptions:K.highlightOptions,tileInfoView:K.tileInfoView,layer:this.layer});K._featuresView=this._wglView;this._wglContainer.addChild(this._wglView);this._wglView._container=this._wglContainer},_getNormalizedGeometryType:function(K){return K.hasXYFootprint()?"esriGeometryPolygon":K.geometryType},_destroyTileRenderer:function(){this._wglContainer.removeChild(this._wglView);
this._wglView.dispose();this._tileRendererProps=this._tileRenderer=this._wglView=this._wglView._container=null},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var K=this.layer;this._layerListenerHandles=[K.on("opacity-change",function(){this._wglContainer.opacity=this.layer.opacity}.bind(this)),K.on("suspend",function(){this._wglContainer.visible=
!1}.bind(this)),K.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),K.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){a.forEach(this._layerListenerHandles,function(K){K.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();var K=this.map;this._mapListenerHandles=[K.on("pan-start",function(O){this._panning=!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),
K.on("pan",function(O){this._applyPanEvent(O)}.bind(this)),K.on("pan-end",function(O){this._panning=!1;this._applyPanEvent(O)}.bind(this)),K.on("extent-change",function(O){d.set(this.getNode(),n._css.names.transition,"none");this._updateMapView(O.extent)}.bind(this)),K.on("zoom-start",function(O){this._zooming=!0;this._stopFrame()}.bind(this)),K.on("zoom-end",function(O){this._zooming=!1}.bind(this)),K.on("scale",function(O){if(!this.renderOnNav){d.set(this.getNode(),n._css.names.transition,O.immediate?
"none":this._defaultTransition);var N=this.map.__visibleDelta;N=g.translate(-N.x,-N.y);this._scaleMatrix=O=g.multiply(g.invert(N),O.matrix,N);this._applyTransform(O)}}.bind(this))]},_destroyMapListeners:function(){a.forEach(this._mapListenerHandles,function(K){K.remove()});this._mapListenerHandles=null},_getRenderer4:function(K){if(K=K||this.layer._getRenderer()){K=this._fixImageUrl(K.toJson());var O;"simple"===K.type?O=b.fromJSON(K):"classBreaks"===K.type?O=l.fromJSON(K):"uniqueValue"===K.type&&
(O=t.fromJSON(K));return O}},_fixImageUrl:function(K){var O=[];switch(K.type){case "simple":O.push(K.symbol);break;case "uniqueValue":O.push(K.defaultSymbol);O=O.concat(a.map(K.uniqueValueInfos,function(L){return L.symbol}));break;case "classBreaks":O.push(K.defaultSymbol),O=O.concat(a.map(K.classBreakInfos,function(L){return L.symbol}))}O=a.filter(O,function(L){return!!L});var N=this.layer,Y=N._url.path+"/images/",P=N._getToken();a.forEach(O,function(L){var Q=L.url;Q&&(-1===Q.search(/https?:/)&&
-1===Q.indexOf("data:")&&(L.url=Y+Q),P&&-1!==L.url.search(/https?:/)&&h.hasSameOrigin(L.url,N._url.path)&&(L.url+="?token\x3d"+P))});return K},_setRenderer:function(K){this._tileRendererProps.layer.renderer=K;K=this._tileRenderer.getProcessorConfiguration();var O=this._symbolProcessor;O.setConfiguration(K);this._returnCentroid=O._getReturnCentroid(O.getRendererInfo().renderer);return K},_handleRendererChange:function(){this._rendererEvalTimer||(this._rendererEvalTimer=setTimeout(this._evalRendererChange,
0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var K=this._returnCentroid,O=this._setRenderer(this._getRenderer4());this._cancelRedraw();this._tileRenderer.needsProcessorReconfiguration(O)?(this._tileRenderer.applyConfiguration(O,!0),K!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):(this._tileRenderer.applyConfiguration(O,!1),this._scheduleUpdate())},
_redrawView:function(){this._wglView.children.slice(0).forEach(function(K,O){var N=K.key.id,Y=this.layer._mode._tileRequests.get(N);Y&&(Y=this._redrawTile(Y.tsTile,K,Y.featureSet),Y.isFulfilled()||this._redrawPromises.set(N,Y))}.bind(this))},_redrawTile:function(K,O,N){return this._symbolProcessor.getMeshData(K,N).then(function(Y){var P=O.key.id;this._redrawPromises["delete"](P);this.layer._mode._tileRequests.get(P)&&this._repaintTile(O,Y.data)}.bind(this)).otherwise(function(Y){this._redrawPromises["delete"](O.key.id)}.bind(this))},
_repaintTile:function(K,O){this._wglView.removeChild(K);K.attached=!1;this._tileRenderer.onTileData({tileKey:K.key.id,data:O});this._wglView.addChild(K)},_cancelRedraw:function(K){K?(K=this._redrawPromises.get(K))&&K.cancel():this._redrawPromises.forEach(function(O,N){O.cancel()})},_initState:function(){this._mapSR4=new y(this.map.spatialReference.toJson());var K={};w(K);this._viewState=m.mixin(K,{scale:0,size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,
scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var O=m.mixin({},this);O.targetGeometry&&(O.targetGeometry=m.mixin({},O.targetGeometry));return O}},toScreen:function(O,N){var Y=this.center[1]+this.resolution*this.height*.5;O[0]=(N[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;O[1]=(Y-N[1])/this.resolution;return O},toMap:function(O,N){var Y=this.center[1]+this.resolution*this.height*.5;O[0]=this.center[0]-this.resolution*this.width*.5+N[0]*this.resolution;O[1]=Y-
N[1]*this.resolution;return O},clone:function(){var O=m.mixin({},this);w(O);O.size&&(O.size=O.size.slice(0));O.viewpoint&&(O.viewpoint=O.viewpoint.clone());return O}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._tileInfo=z.create({spatialReference:this._mapSR4,size:this._defaultTileSize});this._tileInfoView=new A(this._tileInfo)},_initRendering:function(){var K=
this._tileRendererProps.layer;this._symbolProcessor=new D({configuration:null,service:{fields:K.fields,geometryType:K.geometryType,objectIdField:K.objectIdField,typeIdField:K.typeIdField,types:K.types},spatialReference:this._mapSR4,tileRenderer:this._tileRenderer});K=this._setRenderer(this._getRenderer4());this._tileRenderer.applyConfiguration(K,!0)},_destroyRendering:function(){this._symbolProcessor&&this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(K){this._setViewState(K);
this._scheduleUpdate();this._scheduleRender()},_setViewState:function(K){var O=this.map;if(O.loaded){K=K?K.getCenter():O.extent.getCenter();var N=this._viewState;N.viewpoint.targetGeometry=K.toJson();N.scale=N.viewpoint.scale=O.getScale();N.size=[O.width,O.height]}},_updateViewState:function(){var K=this._viewState;K.resolution=K.scale/(39.37*k.getUnitValueForSR(this.map.spatialReference)*96);var O=0;K.spatialReference.isWrappable&&(O=c.getInfo(K.spatialReference),O=O.valid[1]-O.valid[0]);K.worldScreenWidth=
Math.round(O/K.resolution)},_getClipPath:function(K,O,N,Y){return"inset("+(O?O-this._panDy:O)+"px "+(this.map.width-(K+N)+this._panDx)+"px "+(this.map.height-(O+Y)+this._panDy)+"px "+(K?K-this._panDx:K)+"px)"},_getClipRect:function(K,O,N,Y){O-=this._panDy;K-=this._panDx;return"rect("+O+"px, "+(K+N)+"px, "+(O+Y)+"px, "+K+"px)"},_stopFrame:function(){this._frameRequested=this._updateRequested=this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||
!this._zooming&&!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},
_scheduleUpdate:function(){this._started&&this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=T(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=
!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,d.set(this._canvas,n._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},_applyPanEvent:function(K){if(!this.renderOnNav){this._panDx=K.delta.x;this._panDy=K.delta.y;var O=g.translate(K.delta.x,K.delta.y);O=this._scaleMatrix?
g.multiply(O,this._scaleMatrix):O;this._applyTransform(O)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(K.extent)},_applyTransform:function(K){K=K?n._css.matrix(K):"";d.set(this._canvas,n._css.names.transform,K);K||(this._panDx=this._panDy=0,this.setClip(this._clipRect))}});p.setObject("layers.support.WebGLRenderer",B,n);return B})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(B,p){var a=B.matrix={},d={};a._degToRad=function(g){return d[g]||(d[g]=Math.PI*
g/180)};a._radToDeg=function(g){return g/Math.PI*180};a.Matrix2D=function(g){if(g)if("number"==typeof g)this.xx=this.yy=g;else if(g instanceof Array){if(0<g.length){for(var n=a.normalize(g[0]),m=1;m<g.length;++m){var f=n,h=a.normalize(g[m]);n=new a.Matrix2D;n.xx=f.xx*h.xx+f.xy*h.yx;n.xy=f.xx*h.xy+f.xy*h.yy;n.yx=f.yx*h.xx+f.yy*h.yx;n.yy=f.yx*h.xy+f.yy*h.yy;n.dx=f.xx*h.dx+f.xy*h.dy+f.dx;n.dy=f.yx*h.dx+f.yy*h.dy+f.dy}p.mixin(this,n)}}else p.mixin(this,g)};p.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,
dy:0});p.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(g,n){return 1<arguments.length?new a.Matrix2D({dx:g,dy:n}):new a.Matrix2D({dx:g.x,dy:g.y})},scale:function(g,n){return 1<arguments.length?new a.Matrix2D({xx:g,yy:n}):"number"==typeof g?new a.Matrix2D({xx:g,yy:g}):new a.Matrix2D({xx:g.x,yy:g.y})},rotate:function(g){var n=Math.cos(g);g=Math.sin(g);return new a.Matrix2D({xx:n,xy:-g,yx:g,yy:n})},
rotateg:function(g){return a.rotate(a._degToRad(g))},skewX:function(g){return new a.Matrix2D({xy:Math.tan(g)})},skewXg:function(g){return a.skewX(a._degToRad(g))},skewY:function(g){return new a.Matrix2D({yx:Math.tan(g)})},skewYg:function(g){return a.skewY(a._degToRad(g))},reflect:function(g,n){1==arguments.length&&(n=g.y,g=g.x);var m=g*g,f=n*n,h=m+f,k=2*g*n/h;return new a.Matrix2D({xx:2*m/h-1,xy:k,yx:k,yy:2*f/h-1})},project:function(g,n){1==arguments.length&&(n=g.y,g=g.x);var m=g*g,f=n*n,h=m+f,k=
g*n/h;return new a.Matrix2D({xx:m/h,xy:k,yx:k,yy:f/h})},normalize:function(g){return g instanceof a.Matrix2D?g:new a.Matrix2D(g)},isIdentity:function(g){return 1==g.xx&&0==g.xy&&0==g.yx&&1==g.yy&&0==g.dx&&0==g.dy},clone:function(g){var n=new a.Matrix2D,m;for(m in g)"number"==typeof g[m]&&"number"==typeof n[m]&&n[m]!=g[m]&&(n[m]=g[m]);return n},invert:function(g){g=a.normalize(g);var n=g.xx*g.yy-g.xy*g.yx;return g=new a.Matrix2D({xx:g.yy/n,xy:-g.xy/n,yx:-g.yx/n,yy:g.xx/n,dx:(g.xy*g.dy-g.yy*g.dx)/n,
dy:(g.yx*g.dx-g.xx*g.dy)/n})},_multiplyPoint:function(g,n,m){return{x:g.xx*n+g.xy*m+g.dx,y:g.yx*n+g.yy*m+g.dy}},multiplyPoint:function(g,n,m){g=a.normalize(g);return"number"==typeof n&&"number"==typeof m?a._multiplyPoint(g,n,m):a._multiplyPoint(g,n.x,n.y)},multiplyRectangle:function(g,n){var m=a.normalize(g);n=n||{x:0,y:0,width:0,height:0};if(a.isIdentity(m))return{x:n.x,y:n.y,width:n.width,height:n.height};var f=a.multiplyPoint(m,n.x,n.y),h=a.multiplyPoint(m,n.x,n.y+n.height),k=a.multiplyPoint(m,
n.x+n.width,n.y);m=a.multiplyPoint(m,n.x+n.width,n.y+n.height);var e=Math.min(f.x,h.x,k.x,m.x),r=Math.min(f.y,h.y,k.y,m.y);return{x:e,y:r,width:Math.max(f.x,h.x,k.x,m.x)-e,height:Math.max(f.y,h.y,k.y,m.y)-r}},multiply:function(g){for(var n=a.normalize(g),m=1;m<arguments.length;++m){var f=n,h=a.normalize(arguments[m]);n=new a.Matrix2D;n.xx=f.xx*h.xx+f.xy*h.yx;n.xy=f.xx*h.xy+f.xy*h.yy;n.yx=f.yx*h.xx+f.yy*h.yx;n.yy=f.yx*h.xy+f.yy*h.yy;n.dx=f.xx*h.dx+f.xy*h.dy+f.dx;n.dy=f.yx*h.dx+f.yy*h.dy+f.dy}return n},
_sandwich:function(g,n,m){return a.multiply(a.translate(n,m),g,a.translate(-n,-m))},scaleAt:function(g,n,m,f){switch(arguments.length){case 4:return a._sandwich(a.scale(g,n),m,f);case 3:return"number"==typeof m?a._sandwich(a.scale(g),n,m):a._sandwich(a.scale(g,n),m.x,m.y)}return a._sandwich(a.scale(g),n.x,n.y)},rotateAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.rotate(g),n,m):a._sandwich(a.rotate(g),n.x,n.y)},rotategAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.rotateg(g),
n,m):a._sandwich(a.rotateg(g),n.x,n.y)},skewXAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.skewX(g),n,m):a._sandwich(a.skewX(g),n.x,n.y)},skewXgAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.skewXg(g),n,m):a._sandwich(a.skewXg(g),n.x,n.y)},skewYAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.skewY(g),n,m):a._sandwich(a.skewY(g),n.x,n.y)},skewYgAt:function(g,n,m){return 2<arguments.length?a._sandwich(a.skewYg(g),n,m):a._sandwich(a.skewYg(g),n.x,n.y)}});B.Matrix2D=
a.Matrix2D;return a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(B,p,a,d,g,n,m,f,h){var k=p.getObject("dojox.gfx",!0),e=k._base={};k._hasClass=function(z,A){var y=z.getAttribute("className");return y&&0<=(" "+y+" ").indexOf(" "+A+" ")};k._addClass=function(z,A){var y=z.getAttribute("className")||"";(!y||0>(" "+y+" ").indexOf(" "+A+" "))&&
z.setAttribute("className",y+(y?" ":"")+A)};k._removeClass=function(z,A){var y=z.getAttribute("className");y&&z.setAttribute("className",y.replace(new RegExp("(^|\\s+)"+A+"(\\s+|$)"),"$1$2"))};e._getFontMeasurements=function(){var z={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},A;if(d("ie")){var y=g.doc.documentElement.style.fontSize||"";y||(g.doc.documentElement.style.fontSize="100%")}var c=f.create("div",{style:{position:"absolute",
left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},g.body());for(A in z)c.style.fontSize=A,z[A]=16*Math.round(12*c.offsetHeight/16)/12/1E3;d("ie")&&(g.doc.documentElement.style.fontSize=y);g.body().removeChild(c);return z};var r=null;e._getCachedFontMeasurements=function(z){if(z||!r)r=e._getFontMeasurements();return r};var q=null,u={};e._getTextBox=function(z,A,y){var c=arguments.length,b;q||(q=f.create("div",
{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},g.body()));var l=q;l.className="";var t=l.style;t.borderWidth="0";t.margin="0";t.padding="0";t.outline="0";if(1<c&&A)for(b in A)b in u||(t[b]=A[b]);2<c&&y&&(l.className=y);l.innerHTML=z;l.getBoundingClientRect?(t=l.getBoundingClientRect(),t={l:t.left,t:t.top,w:t.width||t.right-t.left,h:t.height||t.bottom-t.top}):t=h.getMarginBox(l);l.innerHTML="";return t};e._computeTextLocation=function(z,A,y,c){var b={};switch(z.align){case "end":b.x=
z.x-A;break;case "middle":b.x=z.x-A/2;break;default:b.x=z.x}b.y=z.y-y*(c?.75:1);return b};e._computeTextBoundingBox=function(z){if(!k._base._isRendered(z))return{x:0,y:0,width:0,height:0};var A=z.getShape();var y=z.getFont()||k.defaultFont;z=z.getTextWidth();y=k.normalizedLength(y.size);A=e._computeTextLocation(A,z,y,!0);return{x:A.x,y:A.y,width:z,height:y}};e._isRendered=function(z){for(z=z.parent;z&&z.getParent;)z=z.parent;return null!==z};var v=0;e._getUniqueId=function(){do var z=B._scopeName+
"xUnique"+ ++v;while(m.byId(z));return z};var x=d("pointer-events")?"touchAction":d("MSPointer")?"msTouchAction":null;e._fixMsTouchAction=x?function(z){z.rawNode.style[x]="none"}:function(){};p.mixin(k,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",
x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,
color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var z={};return function(A){var y=z[A];if(y)return new y;y=z[A]=function(){};y.prototype=k["default"+A];return new y}}(),normalizeColor:function(z){return z instanceof a?z:new a(z)},normalizeParameters:function(z,A){var y;if(A){var c={};for(y in z)y in A&&!(y in c)&&(z[y]=
A[y])}return z},makeParameters:function(z,A){var y=null;if(!A)return p.delegate(z);var c={};for(y in z)y in c||(c[y]=p.clone(y in A?A[y]:z[y]));return c},formatNumber:function(z,A){var y=z.toString();if(0<=y.indexOf("e"))y=z.toFixed(4);else{var c=y.indexOf(".");0<=c&&5<y.length-c&&(y=z.toFixed(4))}return 0>z?y:A?" "+y:y},makeFontString:function(z){return z.style+" "+z.variant+" "+z.weight+" "+z.size+" "+z.family},splitFontString:function(z){var A=k.getDefault("Font");z=z.split(/\s+/);if(!(5>z.length)){A.style=
z[0];A.variant=z[1];A.weight=z[2];var y=z[3].indexOf("/");A.size=0>y?z[3]:z[3].substring(0,y);var c=4;0>y&&("/"==z[4]?c=6:"/"==z[4].charAt(0)&&(c=5));c<z.length&&(A.family=z.slice(c).join(" "))}return A},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return k._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(z){return z*k.px_in_pt()},px2pt:function(z){return z/k.px_in_pt()},normalizedLength:function(z){if(0===z.length)return 0;if(2<z.length){var A=k.px_in_pt(),y=parseFloat(z);
switch(z.slice(-2)){case "px":return y;case "pt":return y*A;case "in":return 72*y*A;case "pc":return 12*y*A;case "mm":return y*k.mm_in_pt*A;case "cm":return y*k.cm_in_pt*A}}return parseFloat(z)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(z,A){return z&&A&&z===A},switchTo:function(z){var A="string"==typeof z?k[z]:z;A&&(n.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(y){k[y]=A[y]}),"string"==typeof z?k.renderer=z:n.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(y){return k.renderer=k[y]&&k[y].Surface===k.Surface?y:null}))}});return k})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(B,p,a){p.switchTo(a);return p})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(B,p,a,d,g){var n=null;a.add("vml",function(m,
f,h){h.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';m="adj"in h.firstChild;h.innerHTML="";return m});return{load:function(m,f,h){function k(){f(["dojox/gfx/"+e],function(u){B.renderer=e;n=u;h(u)})}if(n&&"force"!=m)h(n);else{var e=g.forceGfxRenderer;m=!e&&(p.isString(g.gfxRenderer)?g.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var r,q;!e&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in d.global&&(e="svg");break;case "vml":a("vml")&&(e="vml");break;case "silverlight":try{a("ie")?(r=new ActiveXObject("AgControl.AgControl"),
r.IsVersionSupported("1.0"))&&(q=!0):navigator.plugins["Silverlight Plug-In"]&&(q=!0)}catch(u){q=!1}finally{r=null}q&&(e="silverlight");break;case "canvas":d.global.CanvasRenderingContext2D&&(e="canvas")}"canvas"===e&&!1!==g.canvasEvents&&(e="canvasWithEvents");"svg"==e&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(k):k()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r){function q(w,C){return a.doc.createElementNS?a.doc.createElementNS(w,C):a.doc.createElement(C)}function u(w,C,D,E){return w.setAttributeNS?w.setAttributeNS(C,D,E):w.setAttribute(D,E)}function v(w){return x.useSvgWeb?a.doc.createTextNode(w,!0):a.doc.createTextNode(w)}var x=k.svg={};x.useSvgWeb="undefined"!=typeof window.svgweb;var z=navigator.userAgent,A=p("ios"),y=p("android"),c=p("chrome")||y&&4<=y?"auto":"optimizeLegibility";x.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};x.getRef=function(w){return w&&"none"!=w?w.match(/^url\(#.+\)$/)?d.byId(w.slice(5,-1)):w.match(/^#dojoUnique\d+$/)?d.byId(w.slice(1)):null:null};x.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var b=0;x.Shape=g("dojox.gfx.svg.Shape",e.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var w=
this.rawNode.getAttribute("fill");(w=x.getRef(w))&&w.parentNode.removeChild(w)}this.clip&&(w=this.rawNode.getAttribute("clip-path"))&&(w=d.byId(w.match(/gfx_clip[\d]+/)[0]))&&w.parentNode.removeChild(w);e.Shape.prototype.destroy.apply(this,arguments)},setFill:function(w){if(!w)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var C=function(E){this.setAttribute(E,D[E].toFixed(8))};if("object"==typeof w&&"type"in w){switch(w.type){case "linear":var D=
k.makeParameters(k.defaultLinearGradient,w);w=this._setFillObject(D,"linearGradient");n.forEach(["x1","y1","x2","y2"],C,w);break;case "radial":D=k.makeParameters(k.defaultRadialGradient,w);w=this._setFillObject(D,"radialGradient");n.forEach(["cx","cy","r"],C,w);break;case "pattern":D=k.makeParameters(k.defaultPattern,w),w=this._setFillObject(D,"pattern"),n.forEach(["x","y","width","height"],C,w)}this.fillStyle=D;return this}this.fillStyle=D=k.normalizeColor(w);this.rawNode.setAttribute("fill",D.toCss());
this.rawNode.setAttribute("fill-opacity",D.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(w){var C=this.rawNode;if(!w)return this.strokeStyle=null,C.setAttribute("stroke","none"),C.setAttribute("stroke-opacity",0),this;if("string"==typeof w||B.isArray(w)||w instanceof h)w={color:w};w=this.strokeStyle=k.makeParameters(k.defaultStroke,w);w.color=k.normalizeColor(w.color);if(w){var D=0>w.width?0:w.width;C.setAttribute("stroke",w.color.toCss());C.setAttribute("stroke-opacity",
w.color.a);C.setAttribute("stroke-width",D);C.setAttribute("stroke-linecap",w.cap);"number"==typeof w.join?(C.setAttribute("stroke-linejoin","miter"),C.setAttribute("stroke-miterlimit",w.join)):C.setAttribute("stroke-linejoin",w.join);var E=w.style.toLowerCase();E in x.dasharray&&(E=x.dasharray[E]);if(E instanceof Array){E=B._toArray(E);var F;for(F=0;F<E.length;++F)E[F]*=D;if("butt"!=w.cap){for(F=0;F<E.length;F+=2)E[F]-=D,1>E[F]&&(E[F]=1);for(F=1;F<E.length;F+=2)E[F]+=D}E=E.join(",")}C.setAttribute("stroke-dasharray",
E);C.setAttribute("dojoGfxStrokeStyle",w.style)}return this},_getParentSurface:function(){for(var w=this.parent;w&&!(w instanceof k.Surface);w=w.parent);return w},_setFillObject:function(w,C){var D=x.xmlns.svg;this.fillStyle=w;var E=this._getParentSurface().defNode,F=this.rawNode.getAttribute("fill");if(F=x.getRef(F))if(F.tagName.toLowerCase()!=C.toLowerCase()){var G=F.id;F.parentNode.removeChild(F);F=q(D,C);F.setAttribute("id",G);E.appendChild(F)}else for(;F.childNodes.length;)F.removeChild(F.lastChild);
else F=q(D,C),F.setAttribute("id",k._base._getUniqueId()),E.appendChild(F);if("pattern"==C)F.setAttribute("patternUnits","userSpaceOnUse"),D=q(D,"image"),D.setAttribute("x",0),D.setAttribute("y",0),D.setAttribute("width",(0>w.width?0:w.width).toFixed(8)),D.setAttribute("height",(0>w.height?0:w.height).toFixed(8)),u(D,x.xmlns.xlink,"xlink:href",w.src),F.appendChild(D);else for(F.setAttribute("gradientUnits","userSpaceOnUse"),E=0;E<w.colors.length;++E){G=w.colors[E];var H=q(D,"stop"),M=G.color=k.normalizeColor(G.color);
H.setAttribute("offset",G.offset.toFixed(8));H.setAttribute("stop-color",M.toCss());H.setAttribute("stop-opacity",M.a);F.appendChild(H)}this.rawNode.setAttribute("fill","url(#"+F.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return F},_applyTransform:function(){if(this.matrix){var w=this.matrix;this.rawNode.setAttribute("transform","matrix("+w.xx.toFixed(8)+","+w.yx.toFixed(8)+","+w.xy.toFixed(8)+","+w.yy.toFixed(8)+","+w.dx.toFixed(8)+
","+w.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(w){w=this.rawNode=w;"image"!=this.shape.type&&w.setAttribute("fill","none");w.setAttribute("fill-opacity",0);w.setAttribute("stroke","none");w.setAttribute("stroke-opacity",0);w.setAttribute("stroke-width",1);w.setAttribute("stroke-linecap","butt");w.setAttribute("stroke-linejoin","miter");w.setAttribute("stroke-miterlimit",4);w.__gfxObject__=this},setShape:function(w){this.shape=k.makeParameters(this.shape,
w);for(var C in this.shape)if("type"!=C){w=this.shape[C];if("width"===C||"height"===C)w=0>w?0:w;this.rawNode.setAttribute(C,w)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(w){this.inherited(arguments);var C=w?"width"in w?"rect":"cx"in w?"ellipse":"points"in w?"polyline":"d"in w?"path":null:null;
if(w&&!C)return this;"polyline"===C&&(w=B.clone(w),w.points=w.points.join(","));var D,E=f.get(this.rawNode,"clip-path");E&&(D=d.byId(E.match(/gfx_clip[\d]+/)[0]))&&D.removeChild(D.childNodes[0]);w?(D?(C=q(x.xmlns.svg,C),D.appendChild(C)):(E="gfx_clip"+ ++b,this.rawNode.setAttribute("clip-path","url(#"+E+")"),D=q(x.xmlns.svg,"clipPath"),C=q(x.xmlns.svg,C),D.appendChild(C),this.rawNode.parentNode.insertBefore(D,this.rawNode),f.set(D,"id",E)),f.set(C,w)):(this.rawNode.removeAttribute("clip-path"),D&&
D.parentNode.removeChild(D));return this},_removeClipNode:function(){var w,C=f.get(this.rawNode,"clip-path");C&&(w=d.byId(C.match(/gfx_clip[\d]+/)[0]))&&w.parentNode.removeChild(w);return w}});x.Group=g("dojox.gfx.svg.Group",x.Shape,{constructor:function(){e.Container._init.call(this)},setRawNode:function(w){this.rawNode=w;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);x.Shape.prototype.destroy.apply(this,arguments)}});x.Group.nodeType="g";x.Rect=g("dojox.gfx.svg.Rect",[x.Shape,
e.Rect],{setShape:function(w){this.shape=k.makeParameters(this.shape,w);this.bbox=null;for(var C in this.shape)if("type"!=C&&"r"!=C){w=this.shape[C];if("width"===C||"height"===C)w=0>w?0:w;this.rawNode.setAttribute(C,w)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});x.Rect.nodeType="rect";x.Ellipse=g("dojox.gfx.svg.Ellipse",[x.Shape,e.Ellipse],{});x.Ellipse.nodeType="ellipse";x.Circle=g("dojox.gfx.svg.Circle",[x.Shape,
e.Circle],{});x.Circle.nodeType="circle";x.Line=g("dojox.gfx.svg.Line",[x.Shape,e.Line],{});x.Line.nodeType="line";x.Polyline=g("dojox.gfx.svg.Polyline",[x.Shape,e.Polyline],{setShape:function(w,C){w&&w instanceof Array?(this.shape=k.makeParameters(this.shape,{points:w}),C&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=k.makeParameters(this.shape,w);this.bbox=null;this._normalizePoints();for(var D=[],E=this.shape.points,F=0;F<E.length;++F)D.push(E[F].x.toFixed(8),
E[F].y.toFixed(8));this.rawNode.setAttribute("points",D.join(" "));return this}});x.Polyline.nodeType="polyline";x.Image=g("dojox.gfx.svg.Image",[x.Shape,e.Image],{setShape:function(w){this.shape=k.makeParameters(this.shape,w);this.bbox=null;w=this.rawNode;for(var C in this.shape)if("type"!=C&&"src"!=C){var D=this.shape[C];if("width"===C||"height"===C)D=0>D?0:D;w.setAttribute(C,D)}w.setAttribute("preserveAspectRatio","none");u(w,x.xmlns.xlink,"xlink:href",this.shape.src);w.__gfxObject__=this;return this}});
x.Image.nodeType="image";x.Text=g("dojox.gfx.svg.Text",[x.Shape,e.Text],{setShape:function(w){this.shape=k.makeParameters(this.shape,w);this.bbox=null;w=this.rawNode;var C=this.shape;w.setAttribute("x",C.x);w.setAttribute("y",C.y);w.setAttribute("text-anchor",C.align);w.setAttribute("text-decoration",C.decoration);w.setAttribute("rotate",C.rotated?90:0);w.setAttribute("kerning",C.kerning?"auto":0);w.setAttribute("text-rendering",c);w.firstChild?w.firstChild.nodeValue=C.text:w.appendChild(v(C.text));
return this},getTextWidth:function(){var w=this.rawNode,C=w.parentNode;w=w.cloneNode(!0);w.style.visibility="hidden";var D=0,E=w.firstChild.nodeValue;C.appendChild(w);if(""!=E)for(;!D;)D=w.getBBox?parseInt(w.getBBox().width):68;C.removeChild(w);return D},getBoundingBox:function(){var w=null;if(this.getShape().text)try{w=this.rawNode.getBBox()}catch(C){w={x:0,y:0,width:0,height:0}}return w}});x.Text.nodeType="text";x.Path=g("dojox.gfx.svg.Path",[x.Shape,r.Path],{_updateWithSegment:function(w){this.inherited(arguments);
"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(w){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});x.Path.nodeType="path";x.TextPath=g("dojox.gfx.svg.TextPath",[x.Shape,r.TextPath],{_updateWithSegment:function(w){this.inherited(arguments);this._setTextPath()},setShape:function(w){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==
typeof this.shape.path){var w=this.rawNode;if(!w.firstChild){var C=q(x.xmlns.svg,"textPath"),D=v("");C.appendChild(D);w.appendChild(C)}C=(C=w.firstChild.getAttributeNS(x.xmlns.xlink,"href"))&&x.getRef(C);if(!C&&(D=this._getParentSurface())){D=D.defNode;C=q(x.xmlns.svg,"path");var E=k._base._getUniqueId();C.setAttribute("id",E);D.appendChild(C);u(w.firstChild,x.xmlns.xlink,"xlink:href","#"+E)}C&&C.setAttribute("d",this.shape.path)}},_setText:function(){var w=this.rawNode;if(!w.firstChild){var C=q(x.xmlns.svg,
"textPath"),D=v("");C.appendChild(D);w.appendChild(C)}w=w.firstChild;C=this.text;w.setAttribute("alignment-baseline","middle");switch(C.align){case "middle":w.setAttribute("text-anchor","middle");w.setAttribute("startOffset","50%");break;case "end":w.setAttribute("text-anchor","end");w.setAttribute("startOffset","100%");break;default:w.setAttribute("text-anchor","start"),w.setAttribute("startOffset","0%")}w.setAttribute("baseline-shift","0.5ex");w.setAttribute("text-decoration",C.decoration);w.setAttribute("rotate",
C.rotated?90:0);w.setAttribute("kerning",C.kerning?"auto":0);w.firstChild.data=C.text}});x.TextPath.nodeType="text";var l=534<function(){var w=/WebKit\/(\d*)/.exec(z);return w?w[1]:0}();x.Surface=g("dojox.gfx.svg.Surface",e.Surface,{constructor:function(){e.Container._init.call(this)},destroy:function(){e.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(w,C){if(!this.rawNode)return this;var D=0>w?0:w,E=0>C?0:C;this.rawNode.setAttribute("width",D);this.rawNode.setAttribute("height",
E);l&&(this.rawNode.style.width=D,this.rawNode.style.height=E);return this},getDimensions:function(){return this.rawNode?{width:k.normalizedLength(this.rawNode.getAttribute("width")),height:k.normalizedLength(this.rawNode.getAttribute("height"))}:null}});x.createSurface=function(w,C,D){var E=new x.Surface;E.rawNode=q(x.xmlns.svg,"svg");E.rawNode.setAttribute("overflow","hidden");C&&E.rawNode.setAttribute("width",0>C?0:C);D&&E.rawNode.setAttribute("height",0>D?0:D);C=q(x.xmlns.svg,"defs");E.rawNode.appendChild(C);
E.defNode=C;E._parent=d.byId(w);E._parent.appendChild(E.rawNode);k._base._fixMsTouchAction(E);return E};p={_setFont:function(){var w=this.fontStyle;this.rawNode.setAttribute("font-style",w.style);this.rawNode.setAttribute("font-variant",w.variant);this.rawNode.setAttribute("font-weight",w.weight);this.rawNode.setAttribute("font-size",w.size);this.rawNode.setAttribute("font-family",w.family)}};var t=e.Container;g=x.Container={openBatch:function(){if(!this._batch){var w=x.useSvgWeb?a.doc.createDocumentFragment(!0):
a.doc.createDocumentFragment();this.fragment=w}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(w){this!=w.getParent()&&(this.fragment?this.fragment.appendChild(w.rawNode):this.rawNode.appendChild(w.rawNode),t.add.apply(this,arguments),w.setClip(w.clip));return this},remove:function(w,C){this==w.getParent()&&(this.rawNode==w.rawNode.parentNode&&
this.rawNode.removeChild(w.rawNode),this.fragment&&this.fragment==w.rawNode.parentNode&&this.fragment.removeChild(w.rawNode),w._removeClipNode(),t.remove.apply(this,arguments));return this},clear:function(){for(var w=this.rawNode;w.lastChild;)w.removeChild(w.lastChild);var C=this.defNode;if(C){for(;C.lastChild;)C.removeChild(C.lastChild);w.appendChild(C)}return t.clear.apply(this,arguments)},getBoundingBox:t.getBoundingBox,_moveChildToFront:t._moveChildToFront,_moveChildToBack:t._moveChildToBack};
r=x.Creator={createObject:function(w,C){if(!this.rawNode)return null;var D=new w,E=q(x.xmlns.svg,w.nodeType);D.setRawNode(E);D.setShape(C);this.add(D);return D}};B.extend(x.Text,p);B.extend(x.TextPath,p);B.extend(x.Group,g);B.extend(x.Group,e.Creator);B.extend(x.Group,r);B.extend(x.Surface,g);B.extend(x.Surface,e.Creator);B.extend(x.Surface,r);x.fixTarget=function(w,C){w.gfxTarget||(w.gfxTarget=A&&w.target.wholeText?w.target.parentElement.__gfxObject__:w.target.__gfxObject__);return!0};x.useSvgWeb&&
(x.createSurface=function(w,C,D){var E=new x.Surface;C=0>C?0:C;D=0>D?0:D;if(!C||!D){var F=m.position(w);C=C||F.w;D=D||F.h}w=d.byId(w);F=w.id?w.id+"_svgweb":k._base._getUniqueId();var G=q(x.xmlns.svg,"svg");G.id=F;G.setAttribute("width",C);G.setAttribute("height",D);svgweb.appendChild(G,w);G.addEventListener("SVGLoad",function(){E.rawNode=this;E.isLoaded=!0;var H=q(x.xmlns.svg,"defs");E.rawNode.appendChild(H);E.defNode=H;if(E.onLoad)E.onLoad(E)},!1);E.isLoaded=!1;return E},x.Surface.extend({destroy:function(){var w=
this.rawNode;svgweb.removeChild(w,w.parentNode)}}),p={connect:function(w,C,D){"on"===w.substring(0,2)&&(w=w.substring(2));D=2==arguments.length?C:B.hitch(C,D);this.getEventSource().addEventListener(w,D,!1);return[this,w,D]},disconnect:function(w){this.getEventSource().removeEventListener(w[1],w[2],!1);delete w[0]}},B.extend(x.Shape,p),B.extend(x.Surface,p));return x})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),
function(B,p,a,d,g,n,m,f,h,k){function e(q,u){for(var v=q.length-1;u<v;)q[u]=q[++u];q.length=v}var r=B.shape={};r.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(g("gfxRegistry")){var q=r.register(this);this.getUID=function(){return q}}},destroy:function(){g("gfxRegistry")&&r.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=
null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var q=this.getBoundingBox();if(!q)return null;var u=this._getRealMatrix();return[k.multiplyPoint(u,q.x,q.y),k.multiplyPoint(u,q.x+q.width,q.y),k.multiplyPoint(u,q.x+
q.width,q.y+q.height),k.multiplyPoint(u,q.x,q.y+q.height)]},getEventSource:function(){return this.rawNode},setClip:function(q){this.clip=q},getClip:function(){return this.clip},setShape:function(q){this.shape=B.makeParameters(this.shape,q);this.bbox=null;return this},setFill:function(q){if(!q)return this.fillStyle=null,this;var u=null;if("object"==typeof q&&"type"in q)switch(q.type){case "linear":u=B.makeParameters(B.defaultLinearGradient,q);break;case "radial":u=B.makeParameters(B.defaultRadialGradient,
q);break;case "pattern":u=B.makeParameters(B.defaultPattern,q)}else u=B.normalizeColor(q);this.fillStyle=u;return this},setStroke:function(q){if(!q)return this.strokeStyle=null,this;if("string"==typeof q||p.isArray(q)||q instanceof h)q={color:q};q=this.strokeStyle=B.makeParameters(B.defaultStroke,q);q.color=B.normalizeColor(q.color);return this},setTransform:function(q){this.matrix=k.clone(q?k.normalize(q):k.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var q=
this.getParent();q&&(q._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var q=this.getParent();q&&(q._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(q){return q?this.setTransform([this.matrix,q]):this},applyLeftTransform:function(q){return q?this.setTransform([q,this.matrix]):this},applyTransform:function(q){return q?this.setTransform([this.matrix,q]):this},removeShape:function(q){this.parent&&
this.parent.remove(this,q);return this},_setParent:function(q,u){this.parent=q;return this._updateParentMatrix(u)},_updateParentMatrix:function(q){this.parentMatrix=q?k.clone(q):null;return this._applyTransform()},_getRealMatrix:function(){for(var q=this.matrix,u=this.parent;u;)u.matrix&&(q=k.multiply(u.matrix,q)),u=u.parent;return q}});r._eventsProcessing={on:function(q,u){return n(this.getEventSource(),q,r.fixCallback(this,B.fixTarget,u))},connect:function(q,u,v){"on"==q.substring(0,2)&&(q=q.substring(2));
return this.on(q,v?p.hitch(u,v):u)},disconnect:function(q){return q.remove()}};r.fixCallback=function(q,u,v,x){x||(x=v,v=null);if(p.isString(x)){v=v||d.global;if(!v[x])throw['dojox.gfx.shape.fixCallback: scope["',x,'"] is null (scope\x3d"',v,'")'].join("");return function(z){return u(z,q)?v[x].apply(v,arguments||[]):void 0}}return v?function(z){return u(z,q)?x.apply(v,arguments||[]):void 0}:function(z){return u(z,q)?x.apply(v,arguments):void 0}};p.extend(r.Shape,r._eventsProcessing);r.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(q){var u=q.getParent();u&&u.remove(q,!0);this.children.push(q);return q._setParent(this,this._getRealMatrix())},remove:function(q,u){for(var v=0;v<this.children.length;++v)if(this.children[v]==q){u||(q.parent=null,q.parentMatrix=null);e(this.children,v);break}return this},clear:function(q){for(var u,v=0;v<this.children.length;++v)u=this.children[v],u.parent=null,u.parentMatrix=null,q&&u.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var q=null;m.forEach(this.children,function(u){var v=u.getBoundingBox();v&&((u=u.getTransform())&&(v=k.multiplyRectangle(u,v)),q?(q.x=Math.min(q.x,v.x),q.y=Math.min(q.y,v.y),q.endX=Math.max(q.endX,v.x+v.width),q.endY=Math.max(q.endY,v.y+v.height)):q={x:v.x,y:v.y,endX:v.x+v.width,endY:v.y+v.height})});q&&(q.width=q.endX-q.x,q.height=q.endY-q.y);return q}return null},_moveChildToFront:function(q){for(var u=0;u<this.children.length;++u)if(this.children[u]==
q){e(this.children,u);this.children.push(q);break}return this},_moveChildToBack:function(q){for(var u=0;u<this.children.length;++u)if(this.children[u]==q){e(this.children,u);this.children.unshift(q);break}return this}};r.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,f.destroy);this._nodes=[];m.forEach(this._events,function(q){q&&q.remove()});this._events=[];this.rawNode=null;
if(g("ie"))for(;this._parent.lastChild;)f.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(q){},whenLoaded:function(q,u){var v=p.hitch(q,u);if(this.isLoaded)v(this);else n.once(this,"load",function(x){v(x)})}});p.extend(r.Surface,r._eventsProcessing);r.Rect=a("dojox.gfx.shape.Rect",r.Shape,{constructor:function(q){this.shape=B.getDefault("Rect");this.rawNode=
q},getBoundingBox:function(){return this.shape}});r.Ellipse=a("dojox.gfx.shape.Ellipse",r.Shape,{constructor:function(q){this.shape=B.getDefault("Ellipse");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=this.shape;this.bbox={x:q.cx-q.rx,y:q.cy-q.ry,width:2*q.rx,height:2*q.ry}}return this.bbox}});r.Circle=a("dojox.gfx.shape.Circle",r.Shape,{constructor:function(q){this.shape=B.getDefault("Circle");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=this.shape;this.bbox={x:q.cx-
q.r,y:q.cy-q.r,width:2*q.r,height:2*q.r}}return this.bbox}});r.Line=a("dojox.gfx.shape.Line",r.Shape,{constructor:function(q){this.shape=B.getDefault("Line");this.rawNode=q},getBoundingBox:function(){if(!this.bbox){var q=this.shape;this.bbox={x:Math.min(q.x1,q.x2),y:Math.min(q.y1,q.y2),width:Math.abs(q.x2-q.x1),height:Math.abs(q.y2-q.y1)}}return this.bbox}});r.Polyline=a("dojox.gfx.shape.Polyline",r.Shape,{constructor:function(q){this.shape=B.getDefault("Polyline");this.rawNode=q},setShape:function(q,
u){q&&q instanceof Array?(this.inherited(arguments,[{points:q}]),u&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[q]);return this},_normalizePoints:function(){var q=this.shape.points,u=q&&q.length;if(u&&"number"==typeof q[0]){for(var v=[],x=0;x<u;x+=2)v.push({x:q[x],y:q[x+1]});this.shape.points=v}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var q=this.shape.points,u=q.length,v=q[0],x=v.x,z=v.y,A=v.x,y=v.y,c=1;c<u;++c)v=
q[c],x>v.x&&(x=v.x),A<v.x&&(A=v.x),z>v.y&&(z=v.y),y<v.y&&(y=v.y);this.bbox={x:x,y:z,width:A-x,height:y-z}}return this.bbox}});r.Image=a("dojox.gfx.shape.Image",r.Shape,{constructor:function(q){this.shape=B.getDefault("Image");this.rawNode=q},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});r.Text=a(r.Shape,{constructor:function(q){this.fontStyle=null;this.shape=B.getDefault("Text");this.rawNode=q},getFont:function(){return this.fontStyle},
setFont:function(q){this.fontStyle="string"==typeof q?B.splitFontString(q):B.makeParameters(B.defaultFont,q);this._setFont();return this},getBoundingBox:function(){var q=null;this.getShape().text&&(q=B._base._computeTextBoundingBox(this));return q}});r.Creator={createShape:function(q){switch(q.type){case B.defaultPath.type:return this.createPath(q);case B.defaultRect.type:return this.createRect(q);case B.defaultCircle.type:return this.createCircle(q);case B.defaultEllipse.type:return this.createEllipse(q);
case B.defaultLine.type:return this.createLine(q);case B.defaultPolyline.type:return this.createPolyline(q);case B.defaultImage.type:return this.createImage(q);case B.defaultText.type:return this.createText(q);case B.defaultTextPath.type:return this.createTextPath(q)}return null},createGroup:function(){return this.createObject(B.Group)},createRect:function(q){return this.createObject(B.Rect,q)},createEllipse:function(q){return this.createObject(B.Ellipse,q)},createCircle:function(q){return this.createObject(B.Circle,
q)},createLine:function(q){return this.createObject(B.Line,q)},createPolyline:function(q){return this.createObject(B.Polyline,q)},createImage:function(q){return this.createObject(B.Image,q)},createText:function(q){return this.createObject(B.Text,q)},createPath:function(q){return this.createObject(B.Path,q)},createTextPath:function(q){return this.createObject(B.TextPath,{}).setText(q)},createObject:function(q,u){return null}};return r})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang",
"dojo/_base/declare","./matrix","./shape"],function(B,p,a,d,g){g=a("dojox.gfx.path.Path",g.Shape,{constructor:function(n){this.shape=p.clone(B.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=n;this.segmented=!1},setAbsoluteMode:function(n){this._confirmSegmented();this.absolute="string"==typeof n?"absolute"==n:n;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&
"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var n=this.bbox,m=this._getRealMatrix();this.bbox=null;for(var f=0,h=this.segments.length;f<h;++f)this._updateWithSegment(this.segments[f],m);m=this.bbox;this.bbox=n;return this.tbbox=m?[{x:m.l,y:m.t},{x:m.r,y:m.t},{x:m.r,y:m.b},{x:m.l,y:m.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in
this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(n,m,f){f&&(m=d.multiplyPoint(f,n,m),n=m.x,m=m.y);this.bbox&&"l"in this.bbox?(this.bbox.l>n&&(this.bbox.l=n),this.bbox.r<n&&(this.bbox.r=n),this.bbox.t>m&&(this.bbox.t=m),this.bbox.b<m&&(this.bbox.b=m)):this.bbox={l:n,b:m,r:n,t:m}},_updateWithSegment:function(n,m){var f=n.args,h=f.length,k;switch(n.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(k=0;k<h;k+=2)this._updateBBox(f[k],
f[k+1],m);this.last.x=f[h-2];this.last.y=f[h-1];this.absolute=!0;break;case "H":for(k=0;k<h;++k)this._updateBBox(f[k],this.last.y,m);this.last.x=f[h-1];this.absolute=!0;break;case "V":for(k=0;k<h;++k)this._updateBBox(this.last.x,f[k],m);this.last.y=f[h-1];this.absolute=!0;break;case "m":k=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],m),k=2);for(;k<h;k+=2)this._updateBBox(this.last.x+=f[k],this.last.y+=f[k+1],m);this.absolute=!1;break;case "l":case "t":for(k=0;k<h;k+=2)this._updateBBox(this.last.x+=
f[k],this.last.y+=f[k+1],m);this.absolute=!1;break;case "h":for(k=0;k<h;++k)this._updateBBox(this.last.x+=f[k],this.last.y,m);this.absolute=!1;break;case "v":for(k=0;k<h;++k)this._updateBBox(this.last.x,this.last.y+=f[k],m);this.absolute=!1;break;case "c":for(k=0;k<h;k+=6)this._updateBBox(this.last.x+f[k],this.last.y+f[k+1],m),this._updateBBox(this.last.x+f[k+2],this.last.y+f[k+3],m),this._updateBBox(this.last.x+=f[k+4],this.last.y+=f[k+5],m);this.absolute=!1;break;case "s":case "q":for(k=0;k<h;k+=
4)this._updateBBox(this.last.x+f[k],this.last.y+f[k+1],m),this._updateBBox(this.last.x+=f[k+2],this.last.y+=f[k+3],m);this.absolute=!1;break;case "A":for(k=0;k<h;k+=7)this._updateBBox(f[k+5],f[k+6],m);this.last.x=f[h-2];this.last.y=f[h-1];this.absolute=!0;break;case "a":for(k=0;k<h;k+=7)this._updateBBox(this.last.x+=f[k+5],this.last.y+=f[k+6],m);this.absolute=!1}var e=[n.action];for(k=0;k<h;++k)e.push(B.formatNumber(f[k],!0));if("string"==typeof this.shape.path)this.shape.path+=e.join("");else for(k=
0,h=e.length;k<h;++k)this.shape.path.push(e[k])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(n,m){this.tbbox=null;var f=this._validSegments[n.toLowerCase()];"number"==typeof f&&(f?m.length>=f&&(f={action:n,args:m.slice(0,m.length-m.length%f)},this.segments.push(f),this._updateWithSegment(f)):(f={action:n,args:[]},this.segments.push(f),this._updateWithSegment(f)))},_collectArgs:function(n,m){for(var f=0;f<m.length;++f){var h=m[f];"boolean"==typeof h?n.push(h?1:0):
"number"==typeof h?n.push(h):h instanceof Array?this._collectArgs(n,h):"x"in h&&"y"in h&&n.push(h.x,h.y)}},moveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"M":"m",n);return this},lineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"L":"l",n);return this},hLineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?
"H":"h",n);return this},vLineTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"V":"v",n);return this},curveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"C":"c",n);return this},smoothCurveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"S":"s",n);return this},qCurveTo:function(){this._confirmSegmented();var n=
[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"Q":"q",n);return this},qSmoothCurveTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"T":"t",n);return this},arcTo:function(){this._confirmSegmented();var n=[];this._collectArgs(n,arguments);this._pushSegment(this.absolute?"A":"a",n);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var n=
this.shape.path;this.shape.path=[];this._setPath(n);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(n){n=p.isArray(n)?n:n.match(B.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(n){for(var m="",f=[],h=n.length,k=0;k<h;++k){var e=n[k],r=parseFloat(e);isNaN(r)?(m&&this._pushSegment(m,f),f=[],m=e):f.push(r)}this._pushSegment(m,f)}},setShape:function(n){this.inherited(arguments,["string"==typeof n?{path:n}:n]);this.segmented=!1;this.segments=
[];B.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",g,{constructor:function(n){"text"in this||(this.text=p.clone(B.defaultTextPath));"fontStyle"in this||(this.fontStyle=p.clone(B.defaultFont))},getText:function(){return this.text},setText:function(n){this.text=B.makeParameters(this.text,"string"==typeof n?{text:n}:n);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(n){this.fontStyle="string"==typeof n?
B.splitFontString(n):B.makeParameters(B.defaultFont,n);this._setFont();return this}});return B.path={Path:g,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],function(B,p){var a={},d={x:"0%",y:"0%",width:"100%",height:"100%"},g={};a.createFilter=function(r,q){var u=B.mixin({},d,r);u.primitives||(u.primitives=[]);q&&Array.prototype.push.apply(u.primitives,q);return u};var n=function(r,q,u){q instanceof Array&&(u=q,q=null);q=B.mixin({},q);q.children=u;q.tag=
r;return q};p.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),function(r){a[r]=function(q,u){return n(r,q,u)}});a.feMerge=function(r,q){if("string"===typeof r){for(var u=[],v=0;v<arguments.length;++v)u.push(a.feMergeNode({"in":arguments[v]}));return n("feMerge",
{},u)}return n("feMerge",r,q)};var m=a.createFilter;g.convolutions=[m({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),m({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),m({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])])];p.forEach(g.convolutions,function(r){B.mixin(r,d)});g.shadows=[m({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",
values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",
type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",
slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var f={x:"-10%",y:"-10%",width:"125%",height:"125%"};p.forEach(g.shadows,function(r){B.mixin(r,f)});g.blurs=[m({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),m({_gfxName:"blur2",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),m({_gfxName:"blur4",x:"-15%",
y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),m({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),m({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",slope:10})])])];g.colors=[m({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),
a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),m({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"grayscale"},[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),
m({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",tableValues:"0,0"})])]),m({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),m({_gfxName:"hueRotate120"},
[a.feColorMatrix({type:"hueRotate",values:120})]),m({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),m({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];p.forEach(g.colors,function(r){B.mixin(r,d)});g.miscs=[m({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,
specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",
dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",
height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur",
"litPaint")]),m({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",
in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),
a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",
k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"veryFuzzy",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",
result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",
result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",
specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),m({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),m({_gfxName:"holes",x:"0%",y:"0%",
width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),m({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},
[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];g.reliefs=[m({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",
elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},
[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",
result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},
[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",
y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];g.textures=[m({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",
in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"gold",x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",
in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",
in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var h in g)if(g.hasOwnProperty(h)){a[h]={};for(var k=g[h],e=0;e<k.length;++e)(function(){var r=k[e];a[h][r._gfxName]=function(q){return B.delegate(r,q)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array",
"dojo/_base/window","./_base","./svg"],function(B,p,a,d,g){function n(f,h){var k=h.ownerDocument.createElementNS(g.xmlns.svg,f.tag);h.appendChild(k);for(var e in f)e in m||k.setAttribute(e,f[e]);f.children&&p.forEach(f.children,function(r){n(r,k)});return k}a=d.svgext={};var m={primitives:null,tag:null,children:null};g.Shape.extend({addRenderingOption:function(f,h){this.rawNode.setAttribute(f,h);return this},setFilter:function(f){if(!f)return this.rawNode.removeAttribute("filter"),this.filter=null,
this;this.filter=f;f.id=f.id||d._base._getUniqueId();var h=B.byId(f.id);if(!h){h=this.rawNode.ownerDocument.createElementNS(g.xmlns.svg,"filter");h.setAttribute("filterUnits","userSpaceOnUse");for(var k in f)k in m||h.setAttribute(k,f[k]);p.forEach(f.primitives,function(e){n(e,h)});(k=this._getParentSurface())&&k.defNode.appendChild(h)}this.rawNode.setAttribute("filter","url(#"+f.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),
function(B,p,a,d,g,n,m,f,h,k){function e(u,v){var x=r(v);x&&B.utils.forEach(u,function(z){if(z instanceof B.Surface||z instanceof B.Group)z.textDir=x;z instanceof B.Text&&z.setShape({textDir:x});z instanceof B.TextPath&&z.setText({textDir:x})},u);return u}function r(u){var v=["ltr","rtl","auto"];return u&&(u=u.toLowerCase(),0>n.indexOf(v,u))?null:u}p.getObject("dojox.gfx._gfxBidiSupport",!0);switch(B.renderer){case "vml":B.isVml=!0;break;case "svg":B.isSvg=!0;B.svg.useSvgWeb&&(B.isSvgWeb=!0);break;
case "silverlight":B.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":B.isCanvas=!0}var q=new k;p.extend(B.shape.Surface,{textDir:"",setTextDir:function(u){e(this,u)},getTextDir:function(){return this.textDir}});p.extend(B.Group,{textDir:"",setTextDir:function(u){e(this,u)},getTextDir:function(){return this.textDir}});p.extend(B.Text,{textDir:"",formatText:function(u,v){if(v&&u&&1<u.length){var x="ltr",z=v;if("auto"==z){if(B.isVml)return u;z=q.checkContextual(u)}if(B.isVml)return x=q.checkContextual(u),
z!=x?"rtl"==z?q.hasBidiChar(u)?"\u200f\u200f"+u:q.bidiTransform(u,"IRNNN","ILNNN"):"\u200e"+u:u;if(B.isSvgWeb)return"rtl"==z?q.bidiTransform(u,"IRNNN","ILNNN"):u;if(B.isSilverlight)return"rtl"==z?q.bidiTransform(u,"IRNNN","VLYNN"):q.bidiTransform(u,"ILNNN","VLYNN");if(B.isCanvas)return"rtl"==z?"\u202b"+u+"\u202c":"\u202a"+u+"\u202c";if(B.isSvg)return 4>a("ff")?"rtl"==z?q.bidiTransform(u,"IRYNN","VLNNN"):q.bidiTransform(u,"ILYNN","VLNNN"):"\u200e"+("rtl"==z?"\u202b":"\u202a")+u+"\u202c"}return u},
bidiPreprocess:function(u){return u}});p.extend(B.TextPath,{textDir:"",formatText:function(u,v){if(v&&u&&1<u.length){var x="ltr",z=v;if("auto"==z){if(B.isVml)return u;z=q.checkContextual(u)}if(B.isVml)return x=q.checkContextual(u),z!=x?"rtl"==z?q.hasBidiChar(u)?"\u200f\u200f"+u:q.bidiTransform(u,"IRNNN","ILNNN"):"\u200e"+u:u;if(B.isSvgWeb)return"rtl"==z?q.bidiTransform(u,"IRNNN","ILNNN"):u;B.isSvg&&(u=a("opera")||4<=a("ff")?"\u200e"+("rtl"==z?"\u202b":"\u202a")+u+"\u202c":"rtl"==z?q.bidiTransform(u,
"IRYNN","VLNNN"):q.bidiTransform(u,"ILYNN","VLNNN"))}return u},bidiPreprocess:function(u){u&&"string"==typeof u&&(this.origText=u,u=this.formatText(u,this.textDir));return u}});m=function(u,v,x,z){var A=u.prototype[v];u.prototype[v]=function(){var y;x&&(y=x.apply(this,arguments));y=A.call(this,y);z&&(y=z.call(this,y,arguments));return y}};f=function(u){u&&(u.textDir&&(u.textDir=r(u.textDir)),u.text&&u.text instanceof Array&&(u.text=u.text.join(",")));!u||void 0==u.text&&!u.textDir||this.textDir==
u.textDir&&u.text==this.origText||(this.origText=void 0!=u.text?u.text:this.origText,u.textDir&&(this.textDir=u.textDir),u.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(u)};m(B.Text,"setShape",f,null);m(B.TextPath,"setText",f,null);f=function(u){(u=p.clone(u))&&this.origText&&(u.text=this.origText);return u};m(B.Text,"getShape",null,f);m(B.TextPath,"getText",null,f);f=function(u,v){var x;v&&v[0]&&(x=r(v[0]));u.setTextDir(x?x:this.textDir);return u};m(B.Surface,"createGroup",
null,f);m(B.Group,"createGroup",null,f);f=function(u){if(u){var v=u.textDir?r(u.textDir):this.textDir;v&&(u.textDir=v)}return u};m(B.Surface,"createText",f,null);m(B.Surface,"createTextPath",f,null);m(B.Group,"createText",f,null);m(B.Group,"createTextPath",f,null);B.createSurface=function(u,v,x,z){v=B[B.renderer].createSurface(u,v,x);z=r(z);if(B.isSvgWeb)return v.textDir=z?z:g.style(d.byId(u),"direction"),v;if(B.isVml||B.isSvg||B.isCanvas)v.textDir=z?z:g.style(v.rawNode,"direction");B.isSilverlight&&
(v.textDir=z?z:g.style(v._nodes[1],"direction"));return v};return B})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),function(B,p,a,d,g,n,m,f,h,k,e){var r=a.utils={};p.mixin(r,{forEach:function(q,u,v){v=v||B.global;u.call(v,q);(q instanceof a.Surface||q instanceof a.Group)&&g.forEach(q.children,function(x){r.forEach(x,u,v)})},
serialize:function(q){var u={},v;if((v=q instanceof a.Surface)||q instanceof a.Group){if(u.children=g.map(q.children,r.serialize),v)return u.children}else u.shape=q.getShape();q.getTransform&&(v=q.getTransform())&&(u.transform=v);q.getStroke&&(v=q.getStroke())&&(u.stroke=v);q.getFill&&(v=q.getFill())&&(u.fill=v);q.getFont&&(v=q.getFont())&&(u.font=v);return u},toJson:function(q,u){return m.toJson(r.serialize(q),u)},deserialize:function(q,u){if(u instanceof Array)return g.map(u,p.hitch(null,r.deserialize,
q));var v="shape"in u?q.createShape(u.shape):q.createGroup();"transform"in u&&v.setTransform(u.transform);"stroke"in u&&v.setStroke(u.stroke);"fill"in u&&v.setFill(u.fill);"font"in u&&v.setFont(u.font);"children"in u&&g.forEach(u.children,p.hitch(null,r.deserialize,v));return v},fromJson:function(q,u){return r.deserialize(q,m.fromJson(u))},toSvg:function(q){var u=new f;if("svg"===a.renderer)try{var v=r._cleanSvg(r._innerXML(q.rawNode));u.callback(v)}catch(z){u.errback(z)}else{r._initSvgSerializerDeferred||
r._initSvgSerializer();var x=r.toJson(q);v=function(){try{var z=q.getDimensions(),A=z.width,y=z.height,c=r._gfxSvgProxy.document.createElement("div");r._gfxSvgProxy.document.body.appendChild(c);n.withDoc(r._gfxSvgProxy.document,function(){d.style(c,"width",A);d.style(c,"height",y)},this);r._gfxSvgProxy[dojox._scopeName].gfx.createSurface(c,A,y).whenLoaded(null,function(b){try{r._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(b,x);var l=r._cleanSvg(c.innerHTML);b.clear();b.destroy();r._gfxSvgProxy.document.body.removeChild(c);
u.callback(l)}catch(t){u.errback(t)}})}catch(b){u.errback(b)}};0<r._initSvgSerializerDeferred.fired?v():r._initSvgSerializerDeferred.addCallback(v)}return u},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){r._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!r._initSvgSerializerDeferred){r._initSvgSerializerDeferred=new f;var q=n.doc.createElement("iframe");d.style(q,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});
var u;h("ie")?q.onreadystatechange=function(){"complete"==q.contentWindow.document.readyState&&(q.onreadystatechange=function(){},u=setInterval(function(){q.contentWindow[B.scopeMap.dojo[1]._scopeName]&&q.contentWindow[B.scopeMap.dojox[1]._scopeName].gfx&&q.contentWindow[B.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(u),q.contentWindow.parent[B.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=q.contentWindow,q.contentWindow.parent[B.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50))}:q.onload=function(){q.onload=function(){};u=setInterval(function(){q.contentWindow[B.scopeMap.dojo[1]._scopeName]&&q.contentWindow[B.scopeMap.dojox[1]._scopeName].gfx&&q.contentWindow[B.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(u),q.contentWindow.parent[B.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=q.contentWindow,q.contentWindow.parent[B.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50)};var v=e.dojoxGfxSvgProxyFrameUrl||k.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");
q.setAttribute("src",v.toString());n.body().appendChild(q)}},_innerXML:function(q){return q.innerXML?q.innerXML:q.xml?q.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(q):null},_cleanSvg:function(q){q&&(-1==q.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(q=q.substring(4,q.length),q='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+q),-1==q.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&(q=q.substring(4,q.length),q='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+
q),-1===q.indexOf("xlink:href")&&(q=q.replace(/href\s*=/g,"xlink:href\x3d")),q=q.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),q=q.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),q=q.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),q=q.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),q=q.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return q}});return r})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(B,p,a){function d(va,za,
Ba,Fa,xa){var Da=va;void 0===za&&(za=xa.defInFormat);void 0===Ba&&(Ba=xa.defOutFormat);void 0===Fa&&(Fa=xa.defSwap);if(za!==Ba){var Aa=za.substring(0,1);var Ja=za.substring(1,4);var Ka=Ba.substring(0,1),Ma=Ba.substring(1,4);"C"===Ja.charAt(0)&&(Ja=g(Da),Ja="ltr"===Ja||"rtl"===Ja?Ja.toUpperCase():"L"===za.charAt(2)?"LTR":"RTL",za=Aa+Ja);"C"===Ma.charAt(0)&&(Ja=g(Da),"rtl"===Ja?Ma="RTL":"ltr"===Ja?(Da=Da.split(""),Da.reverse(),Ja=g(Da.join("")),Ma=Ja.toUpperCase()):Ma="L"===Ba.charAt(2)?"LTR":"RTL",
Ba=Ka+Ma)}if(za===Ba)return va;Ka=za.substring(0,1);Da=za.substring(1,4);Aa=Ba.substring(0,1);Ma=Ba.substring(1,4);xa.inFormat=za;xa.outFormat=Ba;xa.swap=Fa;if("L"===Ka&&"VLTR"===Ba){if("LTR"===Da)return xa.dir=w,n(va,xa);if("RTL"===Da)return xa.dir=C,n(va,xa)}if("V"===Ka&&"V"===Aa)return xa.dir="RTL"===Da?C:w,f(va,xa);if("L"===Ka&&"VRTL"===Ba)return xa.dir="LTR"===Da?w:C,va=n(va,xa),f(va);if("VLTR"===za&&"LLTR"===Ba)return xa.dir=w,n(va,xa);if("V"===Ka&&"L"===Aa&&Da!==Ma)return va=f(va),"RTL"===
Da?d(va,"LLTR","VLTR",Fa,xa):d(va,"LRTL","VRTL",Fa,xa);if("VRTL"===za&&"LRTL"===Ba)return d(va,"LRTL","VRTL",Fa,xa);if("L"===Ka&&"L"===Aa)return za=xa.swap,xa.swap=za.substr(0,1)+"N","RTL"===Da?(xa.dir=C,va=n(va,xa),xa.swap="N"+za.substr(1,2),xa.dir=w,va=n(va,xa)):(xa.dir=w,va=n(va,xa),xa.swap="N"+za.substr(1,2),va=d(va,"VLTR","LRTL",xa.swap,xa)),va}function g(va){return(va=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(va))?"z">=va[0]?"ltr":"rtl":""}function n(va,
za){var Ba=va.split(""),Fa=[];m(Ba,Fa,za);if(0!==za.hiLevel&&za.swap.substr(0,1)!==za.swap.substr(1,2))for(var xa=0;xa<Ba.length;xa++)if(1===Fa[xa]){var Da=xa;b:{var Aa=void 0;for(var Ja=Ba[xa],Ka=0,Ma=F.length-1;Ka<=Ma;)if(Aa=Math.floor((Ka+Ma)/2),Ja<F[Aa][0])Ma=Aa-1;else if(Ja>F[Aa][0])Ka=Aa+1;else{Aa=F[Aa][1];break b}Aa=Ja}Ba[Da]=Aa}e(2,Ba,Fa,za);e(1,Ba,Fa,za);c=Fa;return Ba.join("")}function m(va,za,Ba){var Fa=va.length,xa=Ba.dir?ca:Q,Da=null,Aa=null,Ja=null;Da=0;Aa=Aa=null;var Ka=-1,Ma=Aa=null,
Ca=[],Na=[];Ba.hiLevel=Ba.dir;Ba.lastArabic=!1;Ba.hasUbatAl=!1;Ba.hasUbatB=!1;Ba.hasUbatS=!1;for(Aa=0;Aa<Fa;Aa++){Ma=Aa;Ja=va[Aa].charCodeAt(0);var Ta=Qa[Ja>>8];Ca[Ma]=Ta<ra?Ta:Ga[Ta-ra][Ja&255]}for(Ma=0;Ma<Fa;Ma++){Na[Ma]=Aa=r(va,Ca,Na,Ma,Ba);Da=xa[Da][Aa];Aa=Da&240;Da&=15;za[Ma]=Ja=xa[Da][l];if(0<Aa){if(16===Aa)for(Aa=Ka;Aa<Ma;Aa++)za[Aa]=1;Ka=-1}if(Aa=xa[Da][t])-1===Ka&&(Ka=Ma);else if(-1<Ka){for(Aa=Ka;Aa<Ma;Aa++)za[Aa]=Ja;Ka=-1}Ca[Ma]===ka&&(za[Ma]=0);Ba.hiLevel|=Ja}if(Ba.hasUbatS)for(va=0;va<
Fa;va++)if(Ca[va]===qa)for(za[va]=Ba.dir,xa=va-1;0<=xa;xa--)if(Ca[xa]===ia)za[xa]=Ba.dir;else break}function f(va,za){var Ba=va.split("");if(za){var Fa=[];m(Ba,Fa,za);c=Fa}Ba.reverse();A.reverse();return Ba.join("")}function h(va){for(var za=0;za<P.length;za++)if(va>=P[za]&&va<=L[za])return!0;return!1}function k(va,za,Ba,Fa){for(;za*Ba<Fa&&u(va[za]);)za+=Ba;return za*Ba<Fa&&h(va[za])?!0:!1}function e(va,za,Ba,Fa){if(!(Fa.hiLevel<va))if(1!==va||Fa.dir!==C||Fa.hasUbatB){Fa=za.length;for(var xa=0,Da,
Aa,Ja;xa<Fa;){if(Ba[xa]>=va){for(Da=xa+1;Da<Fa&&Ba[Da]>=va;)Da++;for(Aa=Da-1;xa<Aa;xa++,Aa--)Ja=za[xa],za[xa]=za[Aa],za[Aa]=Ja,Ja=A[xa],A[xa]=A[Aa],A[Aa]=Ja;xa=Da}xa++}}else za.reverse(),A.reverse()}function r(va,za,Ba,Fa,xa){return{UBAT_L:function(){xa.lastArabic=!1;return ha},UBAT_R:function(){xa.lastArabic=!1;return ja},UBAT_ON:function(){return fa},UBAT_AN:function(){return R},UBAT_EN:function(){return xa.lastArabic?R:ma},UBAT_AL:function(){xa.lastArabic=!0;xa.hasUbatAl=!0;return ja},UBAT_WS:function(){return fa},
UBAT_CS:function(){var Da,Aa;if(1>Fa||Fa+1>=za.length||(Da=Ba[Fa-1])!==ma&&Da!==R||(Aa=za[Fa+1])!==ma&&Aa!==R)return fa;xa.lastArabic&&(Aa=R);return Aa===Da?Aa:fa},UBAT_ES:function(){return(0<Fa?Ba[Fa-1]:ka)===ma&&Fa+1<za.length&&za[Fa+1]===ma?ma:fa},UBAT_ET:function(){if(0<Fa&&Ba[Fa-1]===ma)return ma;if(xa.lastArabic)return fa;for(var Da=Fa+1,Aa=za.length;Da<Aa&&za[Da]===ea;)Da++;return Da<Aa&&za[Da]===ma?ma:fa},UBAT_NSM:function(){if("VLTR"===xa.inFormat){for(var Da=za.length,Aa=Fa+1;Aa<Da&&za[Aa]===
oa;)Aa++;if(Aa<Da&&(Da=va[Fa],Aa=za[Aa],(1425<=Da&&2303>=Da||64286===Da)&&(Aa===ja||Aa===na)))return ja}return 1>Fa||za[Fa-1]===ka?fa:Ba[Fa-1]},UBAT_B:function(){xa.lastArabic=!0;xa.hasUbatB=!0;return xa.dir},UBAT_S:function(){xa.hasUbatS=!0;return fa},UBAT_LRE:function(){xa.lastArabic=!1;return fa},UBAT_RLE:function(){xa.lastArabic=!1;return fa},UBAT_LRO:function(){xa.lastArabic=!1;return fa},UBAT_RLO:function(){xa.lastArabic=!1;return fa},UBAT_PDF:function(){xa.lastArabic=!1;return fa},UBAT_BN:function(){return fa}}[ta[za[Fa]]]()}
function q(va,za){for(var Ba=0;Ba<X.length;Ba++)if(va===X[Ba])return za[Ba];return va}function u(va){return"\u064b"<=va&&"\u0655">=va?!0:!1}function v(va){if("L"===va)return"LTR";if("R"===va)return"RTL";if("C"===va)return"CLR";if("D"===va)return"CRL"}function x(va,za){for(var Ba=0;Ba<G.length;Ba++)if(va===G[Ba])return za[Ba];return va}function z(va,za,Ba,Fa){for(var xa=0;xa<va.length;xa++)if(va[xa]>za||!Ba&&va[xa]===za)va[xa]+=Fa}B.getObject("string",!0,dojox);B=p("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(va,za,Ba){this.sourceToTarget=[];this.targetToSource=[];if(!va)return"";var Fa=this.sourceToTarget,xa=this.targetToSource,Da=va.length;A=[];c=[];for(var Aa=0;Aa<Da;Aa++)Fa[Aa]=Aa,xa[Aa]=Aa,A[Aa]=Aa;if(!this.checkParameters(za,Ba))return va;za=this.inputFormat;Ba=this.outputFormat;Fa=va;Fa=b;Aa=v(za.charAt(1));xa=v(Ba.charAt(1));var Ja="I"===za.charAt(0)?"L":za.charAt(0);Da="I"===Ba.charAt(0)?"L":Ba.charAt(0);
Aa=Ja+Aa;xa=Da+xa;Da=za.charAt(2)+Ba.charAt(2);Fa.defInFormat=Aa;Fa.defOutFormat=xa;Fa.defSwap=Da;va=d(va,Aa,xa,Da,Fa);Fa=!1;if("R"===Ba.charAt(1))Fa=!0;else if("C"===Ba.charAt(1)||"D"===Ba.charAt(1))Fa=this.checkContextual(va);xa=this.sourceToTarget=A;Da=Array(xa.length);for(Aa=0;Aa<xa.length;Aa++)Da[xa[Aa]]=Aa;y=this.targetToSource=Da;if(za.charAt(3)===Ba.charAt(3))Fa=va;else if("S"===Ba.charAt(3))if(za=Fa,Ba=!0,0===va.length)Fa=void 0;else{void 0===za&&(za=!0);void 0===Ba&&(Ba=!0);va=String(va);
va=va.split("");var Ka=0;xa=1;Fa=va.length;za||(Ka=va.length-1,xa=-1,Fa=1);Da=Fa;Aa=Ba;var Ma=0;Fa=[];for(Ja=0;Ka*xa<Da;Ka+=xa)if(h(va[Ka])||u(va[Ka])){var Ca;if(Ca="\u0644"===va[Ka])b:{for(var Na=va,Ta=Ka+xa,Wa=xa,jb=Da;Ta*Wa<jb&&u(Na[Ta]);)Ta+=Wa;Ca=" ";if(Ta*Wa<jb)for(Ca=Na[Ta],Na=0;Na<G.length;Na++)if(G[Na]===Ca){Ca=!0;break b}Ca=!1}if(Ca){va[Ka]=0===Ma?x(va[Ka+xa],H):x(va[Ka+xa],M);Ka+=xa;Ma=va;Ca=Ka;Na=xa;for(Ta=Da;Ca*Na<Ta&&u(Ma[Ca]);)Ca+=Na;Ca*Na<Ta&&(Ma[Ca]=" ");Aa&&(Fa[Ja]=Ka,Ja++);Ma=0}else{Ca=
va[Ka];if(1===Ma){Na=Ka;if(k(va,Ka+xa,xa,Da))b:for(Ta=va[Ka],Wa=0;Wa<X.length;Wa++){if(Ta===X[Wa]){Ta=K[Wa];break b}}else Ta=q(va[Ka],T);va[Na]=Ta}else!0===k(va,Ka+xa,xa,Da)?va[Ka]=q(va[Ka],O):va[Ka]=q(va[Ka],W);u(Ca)||(Ma=1);b:{for(Na=0;Na<N.length;Na++)if(N[Na]===Ca){Ca=!0;break b}Ca=!1}!0===Ca&&(Ma=0)}}else Ma=0;xa="";for(Da=0;Da<va.length;Da++){if(Aa=Ba){b:{for(Aa=0;Aa<Fa.length;Aa++)if(Fa[Aa]===Da)break b;Aa=-1}Aa=-1<Aa}Aa?(z(y,Da,!za,-1),A.splice(Da,1)):xa+=va[Da]}Fa=xa}else if(za=va,Ba=Fa,
va=!0,0===za.length)Fa=void 0;else for(void 0===va&&(va=!0),void 0===Ba&&(Ba=!0),za=String(za),Fa="",xa=[],xa=za.split(""),Da=0;Da<za.length;Da++)Aa=!1,"\ufe70"<=xa[Da]&&"\ufeff">xa[Da]?(Ja=za.charCodeAt(Da),"\ufef5"<=xa[Da]&&"\ufefc">=xa[Da]?(Ba?(0<Da&&va&&" "===xa[Da-1]?Fa=Fa.substring(0,Fa.length-1)+"\u0644":(Fa+="\u0644",Aa=!0),Fa+=G[(Ja-65269)/2]):(Fa+=G[(Ja-65269)/2],Fa+="\u0644",Da+1<za.length&&va&&" "===xa[Da+1]?Da++:Aa=!0),Aa&&(z(y,Da,!0,1),A.splice(Da,0,A[Da]))):Fa+=Y[Ja-65136]):Fa+=xa[Da];
this.sourceToTarget=A;this.targetToSource=y;this.levels=c;return Fa},_inputFormatSetter:function(va){if(!D.test(va))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=va},_outputFormatSetter:function(va){if(!D.test(va))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=va},checkParameters:function(va,za){va?this.set("inputFormat",va):va=this.inputFormat;za?this.set("outputFormat",za):za=this.outputFormat;return va===za?
!1:!0},checkContextual:function(va){va=g(va);if("ltr"!==va&&"rtl"!==va){try{va=document.dir.toLowerCase()}catch(za){}"ltr"!==va&&"rtl"!==va&&(va="ltr")}return va},hasBidiChar:function(va){return E.test(va)}});var A=[],y=[],c=[],b={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},l=5,t=6,w=0,C=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,F=[["(",")"],
[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],G=["\u0622","\u0623",
"\u0625","\u0627"],H=["\ufef5","\ufef7","\ufef9","\ufefb"],M=["\ufef6","\ufef8","\ufefa","\ufefc"],X="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),W="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
T="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),K="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
O="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),N="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Y="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
P=["\u0621","\u0641"],L=["\u063a","\u064a"],Q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ha=0,ja=1,ma=2,R=3,fa=4,ka=5,qa=6,na=7,ia=8,ea=11,oa=12,ta="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ra=100;p=ha;a=ja;var aa=ma,da=R,J=fa,sa=ka,wa=qa,U=na,La=ia,
Ha=ea,pa=oa,Qa=[ra+0,p,p,p,p,ra+1,ra+2,ra+3,a,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,ra+4,J,J,J,p,J,p,J,p,J,J,J,p,p,J,J,p,p,p,p,p,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,p,p,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,p,p,J,J,p,p,J,J,p,p,J,J,J,J,J,J,J,J,J,J,
J,J,J,J,J,J,J,J,J,J,J,J,J,p,p,p,ra+5,U,U,ra+6,ra+7],Ga=[[18,18,18,18,18,18,18,18,18,wa,sa,wa,La,sa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,sa,sa,sa,wa,La,J,J,Ha,Ha,Ha,J,J,J,J,J,10,9,10,9,9,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,9,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,18,18,18,18,18,18,sa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,J,Ha,Ha,Ha,Ha,J,J,J,J,p,J,J,18,J,J,Ha,Ha,
aa,aa,J,p,J,J,J,aa,p,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,p,p,p,p,p,p,p,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,p,J,J,J,J,J,J,J,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,
pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,a,pa,a,pa,pa,a,pa,pa,a,pa,J,J,J,J,J,J,J,J,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,J,J,J,J,J,a,a,a,a,a,J,J,J,J,J,J,J,J,J,J,J],[da,da,da,da,J,J,J,J,U,Ha,Ha,U,9,U,J,J,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,U,J,J,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,da,da,da,da,da,da,da,da,da,da,Ha,da,da,U,U,U,pa,
U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,pa,pa,pa,pa,pa,pa,pa,da,J,pa,pa,pa,pa,pa,pa,U,U,pa,pa,J,pa,pa,pa,pa,U,U,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,U,U,U,U,U,U],[U,U,U,U,U,U,U,U,U,U,U,U,U,U,J,U,U,pa,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,J,J,U,
U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,U,J,J,J,J,J,J,J,J,J,J,J,J,J,J,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,pa,pa,pa,pa,pa,pa,pa,pa,pa,a,a,J,J,J,J,a,J,J,J,J,J],[La,La,La,La,La,La,La,La,La,La,La,18,18,18,p,a,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,La,sa,13,14,15,16,17,9,Ha,Ha,
Ha,Ha,Ha,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,9,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,La,18,18,18,18,18,J,J,J,J,J,18,18,18,18,18,18,aa,p,J,J,aa,aa,aa,aa,aa,aa,10,10,J,J,J,p,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,10,10,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,J,J,J,J,J,J,J,J,J,J,J,J,
J,J,J],[p,p,p,p,p,p,p,J,J,J,J,J,J,J,J,J,J,J,J,p,p,p,p,p,J,J,J,J,J,a,pa,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,J,a,a,a,a,a,J,a,J,a,a,J,a,a,J,a,a,a,a,a,a,a,a,a,a,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,
U,U,U,U,U,U,U,U,U,U],[pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,pa,pa,pa,pa,pa,pa,pa,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,9,J,9,J,J,9,J,J,J,J,J,J,J,J,J,Ha,J,J,10,10,J,J,J,J,J,Ha,Ha,J,J,J,J,J,U,U,U,U,U,J,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,
U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,J,J,18],[J,J,J,Ha,Ha,Ha,J,J,J,J,J,10,9,10,9,9,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,9,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,J,J,J,J,J,J,J,J,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,J,J,J,p,p,p,p,p,p,J,J,p,p,p,p,p,p,J,J,p,p,
p,p,p,p,J,J,p,p,p,J,J,J,Ha,Ha,J,J,J,Ha,Ha,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J,J]];return B})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(B,p,a){B=function(){return this}();var d=B.location,g=d.pathname;a=d.protocol;d={version:"3.40",_appBaseUrl:a+"//"+d.host+g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-1]))};p.noGlobals||(B.esri=d);(d.dijit=d.dijit||{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";
return d})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(B,p,a,d,g,n,m,f,h){function k(A,y,c,b){(y=y&&y[A])?y={formatType:y.formatType,options:y}:b&&-1!==B.indexOf(b.properties||"",A)?y={formatType:b.formatter||"DateString",options:null}:c&&-1!==B.indexOf(c.properties||"",A)&&(y={formatType:c.formatter||"NumberFormat",options:null});return y}function e(A,y,c){return[d.isString(A)?
A.split(""):A,y||a.global,d.isString(c)?new Function("item","index","array",c):c]}function r(A){return void 0!==A&&null!==A}function q(A){return r(A)?A:""}function u(A,y,c,b){var l=c.match(/([^\(]+)(\([^\)]+\))?/i);c=d.trim(l[1]);var t=l[2]?d.trim(l[2]):null;l=y[A];b=b||(t?p.fromJson(t.replace(/^\(/,"({").replace(/\)$/,"})")):{});t=b.utcOffset;if(-1===B.indexOf(x,c))c=d.getObject(c),d.isFunction(c)&&(l=c(l,A,y,b));else if("number"===typeof l||"string"===typeof l&&l&&!isNaN(Number(l)))switch(l=Number(l),
c){case "NumberFormat":return m.format(l,b);case "DateString":A=new Date(l);if(b.local||b.systemLocale)return b.systemLocale?A.toLocaleDateString()+(b.hideTime?"":" "+A.toLocaleTimeString()):A.toDateString()+(b.hideTime?"":" "+A.toTimeString());A=A.toUTCString();b.hideTime&&(A=A.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return A;case "DateFormat":return A=new Date(l),r(t)&&(A=g.add(A,"minute",A.getTimezoneOffset()-t)),f.format(A,b)}return q(l)}function v(A,y){var c;if(y)for(c in A)A.hasOwnProperty(c)&&
(void 0===A[c]?delete A[c]:A[c]instanceof Object&&v(A[c],!0));else for(c in A)A.hasOwnProperty(c)&&void 0===A[c]&&delete A[c];return A}var x=["NumberFormat","DateString","DateFormat"],z=/<\/?[^>]+>/g;n={valueOf:function(A,y){for(var c in A)if(A[c]==y)return c;return null},stripTags:function(A){if(A){var y=typeof A;if("string"===y)A=A.replace(z,"");else if("object"===y)for(var c in A)(y=A[c])&&"string"===typeof y&&(y=y.replace(z,"")),A[c]=y}return A},substitute:function(A,y,c){if(r(c))if(d.isObject(c)){var b=
c.first;var l=c.dateFormat;var t=c.numberFormat;var w=c.format}else b=c;if(y&&"${*}"!==y)return d.replace(y,d.hitch({obj:A},function(D,E){var F=E.split(":"),G;return 1<F.length?(E=F[0],F.shift(),(G=w&&w[F[0]])?F=G.formatType:(F=F.join(":"),G=null),u(E,this.obj,F,G)):(G=k(E,w,t,l))?u(E,this.obj,G.formatType,G.options):q(this.obj[E])}),/\$\{([^\}]+)\}/g);y=[];for(var C in A)if(c=(c=k(C,w,t,l))?u(C,A,c.formatType,c.options):A[C],y.push(C+" \x3d "+q(c)+"\x3cbr/\x3e"),b)break;return y.join("")},filter:function(A,
y,c){y=e(A,c,y);c={};var b;A=y[0];for(b in A)y[2].call(y[b],A[b],b,A)&&(c[b]=A[b]);return c},startsWith:function(A,y,c){c=c||0;return A.indexOf(y,c)===c},endsWith:function(A,y,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>A.length)c=A.length;c-=y.length;A=A.indexOf(y,c);return-1!==A&&A===c},isDefined:r,fixJson:v,isObject:function(A){return A&&"object"===typeof A},isString:function(A){return"string"===typeof A},mixin:function(A,y){for(var c in y)y.hasOwnProperty(c)&&(A[c]=y[c]);return A},
clone2DArray:function(A){if(A=A?A.slice(0):null){var y,c=A.length;for(y=0;y<c;y++)A[y]=A[y]?A[y].slice(0):null}return A},clone3DArray:function(A){if(A=A?A.slice(0):null){var y,c=A.length;for(y=0;y<c;y++){A[y]=A[y]?A[y].slice(0):null;var b=A[y];if(b){var l,t=b.length;for(l=0;l<t;l++)b[l]=b[l]?b[l].slice(0):null}}}return A}};d.mixin(h,n);h._isDefined=r;h._getParts=e;h._sanitize=v;return n})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(B,p,a){var d=B("ff"),g=
B("ie"),n=void 0===g&&7<=B("trident"),m=B("edge"),f=B("webkit"),h=B("opera"),k=B("chrome"),e=B("safari"),r=navigator.userAgent,q;(q=r.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&B.add("esri-iphone",parseFloat(q[2].replace("_",".")));(q=r.match(/Android\s+(\d+(\.\d+)*)/i))&&B.add("esri-android",parseFloat(q[1]));(q=r.match(/Fennec\/(\d+\.\d+)/i))&&B.add("esri-fennec",parseFloat(q[1]));0<=r.indexOf("BlackBerry")&&0<=r.indexOf("WebKit")&&B.add("esri-blackberry",1);B.add("esri-touch",B("esri-iphone")||
B("esri-android")||B("esri-blackberry")||6<=B("esri-fennec")||(d||f)&&(document.createTouch||"ontouchstart"in p||p.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(q=r.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&B.add("esri-mobile",!!q);B.add("esri-pointer",!d&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!p.PointerEvent));a._getDOMAccessor=function(v){var x="";d?x="Moz":f?x="Webkit":g?x="ms":h&&(x="O");return x+v.charAt(0).toUpperCase()+v.substr(1)};B.add("esri-phonegap",
!!p.cordova);B.add("esri-cors",B("esri-phonegap")||p.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);B.add("esri-file-upload",p.FormData&&p.FileList?!0:!1);B.add("esri-script-sandbox",function(){return"MessageChannel"in p&&"HTMLIFrameElement"in p&&"sandbox"in HTMLIFrameElement.prototype});B.add("esri-secure-context",function(){if("isSecureContext"in p)return p.isSecureContext;if(p.location&&p.location.origin)return 0===p.location.origin.indexOf("https:")});B.add("esri-wasm","WebAssembly"in
p);B.add("esri-workers",p.Worker?!0:!1);B.add("esri-featurelayer-webgl",!1);if(r=B("esri-featurelayer-webgl")){var u=B("esri-mobile");q=u?1:2;u=u?1:3;"object"===typeof r?(r.maxDrillLevel=null==r.maxDrillLevel?q:r.maxDrillLevel,r.maxRecordCountFactor=null==r.maxRecordCountFactor?u:r.maxRecordCountFactor,r.enablePBFQuery=null==r.enablePBFQuery?!0:r.enablePBFQuery):B.add("esri-featurelayer-webgl",{maxDrillLevel:q,maxRecordCountFactor:u,enablePBFQuery:!0},null,!0)}B.add("esri-featurelayer-webgl-labeling",
!1);B.add("esri-pbf",!g||10<=g);B.add("esri-featurelayer-pbf",!0);B.add("esri-transforms",n||m||9<=g||3.5<=d||4<=k||3.1<=e||10.5<=h||3.2<=B("esri-iphone")||2.1<=B("esri-android"));B.add("esri-transitions",n||m||10<=g||4<=d||4<=k||3.1<=e||10.5<=h||3.2<=B("esri-iphone")||2.1<=B("esri-android"));B.add("esri-transforms3d",n||m||10<=d||12<=k||4<=e||3.2<=B("esri-iphone")||3<=B("esri-android"));B.add("esri-url-encodes-apostrophe",function(){if(!p.document)return!1;var v=p.document.createElement("a");v.href=
"?'";return-1<v.href.indexOf("?%27")});3>B("esri-android")&&(B.add("esri-transforms",!1,!1,!0),B.add("esri-transitions",!1,!1,!0),B.add("esri-transforms3d",!1,!1,!0));B.add("esri-will-change",B("esri-transforms")&&(52<=k||11.1<=e));a._css=function(v){var x=B("esri-transforms3d");void 0!==v&&null!==v?x=v:x&&(k||e&&!B("esri-iphone"))&&(x=!1);var z=x?"translate3d(":"translate(",A=x?k?",-1px)":",0px)":")",y=x?"scale3d(":"scale(",c=x?",1)":")",b=x?"rotate3d(0,0,1,":"rotate(",l=x?"matrix3d(":"matrix(",
t=x?",0,0,":",",w=x?",0,0,0,0,1,0,":",",C=x?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||d&&"MozTransition"||h&&"OTransition"||g&&"msTransition"||"transition",transform:f&&"-webkit-transform"||d&&"MozTransform"||h&&"OTransform"||g&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||d&&"-moz-transform"||h&&"-o-transform"||g&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||d&&"MozTransformOrigin"||h&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",
endEvent:f&&"webkitTransitionEnd"||d&&"transitionend"||h&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(D,E){return z+D+"px,"+E+"px"+A},scale:function(D){return y+D+","+D+c},rotate:function(D){return b+D+"deg)"},matrix:function(D){return l+D.xx+","+D.xy+t+D.yx+","+D.yy+w+D.dx.toFixed(10)+(d&&59>=d?"px,":",")+D.dy.toFixed(10)+(d&&59>=d?"px":"")+C},getScaleFromMatrix:function(D){if(!D)return 1;D=D.toLowerCase();var E=-1<D.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(D.substring(E.length,
D.indexOf(",")))}}};a.isiPhone=B("esri-iphone");a.isAndroid=B("esri-android");a.isFennec=B("esri-fennec");a.isBlackBerry=B("esri-blackberry");a.isTouchEnabled=B("esri-touch");a.isPointerEnabled=B("esri-pointer");a._hasCors=B("esri-cors");a._hasFileUpload=B("esri-file-upload");a._hasTransforms=B("esri-transforms");a._hasTransitions=B("esri-transitions");a._has3DTransforms=B("esri-transforms3d");return B})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(B,p,a,d,g,n,m,f,h,k){var e={},r=f.defaults.io,q=/^[a-z][a-z0-9\+\-\.]*:/i,u=/^\s*http:/i,v=/^\s*https:/i,x=/:\d+$/,z=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;e.isHTTP=function(y){var c=d.location.protocol;return null==y?"http:"===c||"https:"===c:y?"https:"===c:"http:"===c};e.getProtocolForWebResource=function(y){return e.isHTTP()?d.location.protocol:y?"https:":"http:"};e.urlToObject=function(y){var c={},b=new a(y),l=y.indexOf("?");null===b.query?c={path:y,query:null}:(c.path=y.substring(0,
l),c.query=g.queryToObject(b.query));b.fragment&&(c.hash=b.fragment,null===b.query&&(c.path=c.path.substring(0,c.path.length-(b.fragment.length+1))));return c};e.getProxyUrl=function(y,c){var b=B.isString(y)?0===B.trim(y).toLowerCase().indexOf("https:"):y,l=r.proxyUrl,t,w=k.io.proxyNotSet;B.isString(y)&&(t=e.getProxyRule(y))&&(l=t.proxyUrl);if(!l)throw Error(w);if(b&&!1!==c&&0!==d.location.href.toLowerCase().indexOf("https:")&&(b=l,0!==b.toLowerCase().indexOf("http")&&(b=e.getAbsoluteUrl(b)),b=b.replace(/^http:/i,
"https:"),e.canUseXhr(b))){l=b;var C=1}l=e.urlToObject(l);l._xo=C;return l};e.addProxy=function(y){var c=e.getProxyRule(y),b;c?b=e.urlToObject(c.proxyUrl):r.alwaysUseProxy&&(b=e.getProxyUrl());b&&(c=e.urlToObject(y),y=b.path+"?"+c.path,(b=g.objectToQuery(B.mixin(b.query||{},c.query)))&&(y+="?"+b));return y};e.addProxyRule=function(y){var c=y.urlPrefix=e.urlToObject(y.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),b=r.proxyRules,l,t=b.length,w=t;for(l=0;l<t;l++){var C=
b[l].urlPrefix;if(0===c.indexOf(C)){if(c.length===C)return-1;w=l;break}else 0===C.indexOf(c)&&(w=l+1)}b.splice(w,0,y);return w};e.getProxyRule=function(y){var c=r.proxyRules,b=c.length,l=e.urlToObject(y).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(y=0;y<b;y++)if(0===l.indexOf(c[y].urlPrefix)){var t=c[y];break}return t};e.hasSameOrigin=function(y,c,b){y=y.toLowerCase();c=c.toLowerCase();var l=d.location.href.toLowerCase();y=0===y.indexOf("http")?new a(y):l=new a(l);
c=0===c.indexOf("http")?new a(c):B.isString(l)?new a(l):l;return(b||y.scheme===c.scheme)&&y.host===c.host&&y.port===c.port};e.canUseXhr=function(y,c){var b=h("esri-phonegap")?!0:!1,l=e.hasSameOrigin,t=r.corsEnabledServers,w,C=-1;!b&&h("esri-cors")&&t&&t.length&&(b=p.some(t,function(D,E){var F=!D||"object"!==typeof D||D instanceof RegExp?D:D.host;if(F instanceof RegExp){if(F.test(y))return C=E,!0}else if(F&&(w=0!==F.trim().toLowerCase().indexOf("http"),l(y,w?"http://"+F:F)||w&&l(y,"https://"+F)))return C=
E,!0;return!1}));return c?C:b};e.getAbsoluteUrl=function(y){var c=e.getProtocolForWebResource();return B.isString(y)&&!q.test(y)?0===y.indexOf("//")?c+y:0===y.indexOf("/")?c+"//"+d.location.host+y:n._appBaseUrl+y:y};e.fixUrl=function(y){y=B.trim(y);y=e.getAbsoluteUrl(y);y=e.normalizeSlashes(y);y=y.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");y=e.downgradeToHTTP(y);return y=e.upgradeToHTTPS(y)};e.normalize=function(y){return e.fixUrl(y)};e.normalizeSlashes=function(y){if(/^https?:\/\//i.test(y)){var c=
y.indexOf("?");if(-1<c){var b=y.slice(0,c);var l=y.slice(c+1)}else b=y;y=b.replace(/\/{2,}/g,"/");y=y.replace("/","//");l&&(y+="?"+l)}return y};e.downgradeToHTTP=function(y){return e.isHTTP(!1)&&v.test(y)&&e.hasSameOrigin(d.location.href,y,!0)&&!e.canUseXhr(y)?y.replace(v,"http:"):y};e.upgradeToHTTPS=function(y){var c=r.httpsDomains,b=e.isHTTP(!1),l=e.isHTTP(!0);if(!u.test(y))return y;y=B.trim(y);var t=y.indexOf("/",7);t=-1===t?y:y.slice(0,t);t=t.toLowerCase().slice(7);if(x.test(t))if(m.endsWith(t,
":80"))t=t.slice(0,-3),y=y.replace(":80","");else return y;if(b&&t===d.location.host&&(!z.test(y)||!e.canUseXhr(y)))return y;b=!1;if(l&&t===d.location.host)b=!0;else if(c)for(var w=0;w<c.length;w++){var C=c[w];if(t===C||m.endsWith(t,"."+C)){b=!0;break}}b||!l||r.alwaysUseProxy||e.getProxyRule(y)||(b=!0);b&&(y=y.replace(u,"https:"));return y};f=k.widgets.popup;var A=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:f.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:f.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:f.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:f.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:f.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:f.NLS_openLinkInApp}];e.getURIInfo=function(y){var c;p.some(A,function(b){b.pattern.test(y)&&(c=b);return!!c});return c};e.isKnownURI=function(y){return!!e.getURIInfo(y)};e.base64UrlEncode=function(y){return btoa(String.fromCharCode.apply(null,y)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};B.mixin(n,e);n._getProxyUrl=e.getProxyUrl;n._getProxiedUrl=e.addProxy;n._hasSameOrigin=e.hasSameOrigin;n._canDoXOXHR=e.canUseXhr;n._getAbsoluteUrl=e.getAbsoluteUrl;
n.fixUrl=e.fixUrl;return e})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(B,p,a,d){a=function(){return this}();var g={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,
0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(n,m){p.publish("esri.Error",[n])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com",
"jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com",
"static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com",
"servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};d.config=g;B.noGlobals||(a.esriConfig=g);return g})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(B,p,a,d,g){function n(r,q,u){return r&&q?r.getWidth()/q*(u||f)*39.37*h.screenDPI:0}function m(r,q,u,v,x){return r.expand(v*q/(39.37*((x?u:k.values[k[u]])||f)*h.screenDPI)/r.getWidth())}var f=6370997*Math.PI/180,h=d.defaults,k=g,e={getUnitValueForSR:function(r){return this.getUnitValue(r)||
f},getUnitValue:function(r){if(r)if("object"===typeof r){var q=r.wkid;var u=r.wkt}else"number"===typeof r?q=r:"string"===typeof r&&(u=r);if(q)var v=k.values[k[q]];else u&&-1!==u.search(/^PROJCS/i)&&(r=/UNIT\[([^\]]+)\]\]$/i.exec(u))&&r[1]&&(v=parseFloat(r[1].split(",")[1]));return v},getScale:function(r,q,u){if(1<arguments.length&&null!=q&&!q.declaredClass){var v=r;var x=q;q=null;var z=e.getUnitValue(u)}else v=q||r.extent,x=r.width,z=e.getUnitValue(v&&v.spatialReference);return n(v,x,z)},getExtentForScale:function(r,
q,u){return m(u||r.extent,r.width,e.getUnitValue(r.spatialReference),q,!0)}};B.mixin(B.getObject("geometry",!0,a),e);a.geometry._getScale=n;a.geometry._getExtentForScale=m;return e})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(B,p){var a,d={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,
103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,
103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,
103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,
103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)d[a]=0;for(a=2056;2065>=a;a++)d[a]=0;for(a=2067;2135>=a;a++)d[a]=0;for(a=2137;2154>=a;a++)d[a]=0;for(a=2161;2170>=a;a++)d[a]=0;for(a=2172;2193>=a;a++)d[a]=0;for(a=2195;2198>=a;a++)d[a]=0;for(a=2200;2203>=a;a++)d[a]=0;for(a=2205;2217>=a;a++)d[a]=0;for(a=2222;2224>=a;a++)d[a]=1;for(a=2225;2250>=a;a++)d[a]=2;for(a=2251;2253>=a;a++)d[a]=1;for(a=2257;2264>=a;a++)d[a]=2;for(a=2274;2279>=a;a++)d[a]=2;for(a=2280;2282>=a;a++)d[a]=
1;for(a=2283;2289>=a;a++)d[a]=2;for(a=2290;2292>=a;a++)d[a]=0;for(a=2308;2313>=a;a++)d[a]=0;for(a=2315;2491>=a;a++)d[a]=0;for(a=2494;2866>=a;a++)d[a]=0;for(a=2867;2869>=a;a++)d[a]=1;for(a=2870;2888>=a;a++)d[a]=2;for(a=2891;2895>=a;a++)d[a]=2;for(a=2896;2898>=a;a++)d[a]=1;for(a=2902;2908>=a;a++)d[a]=2;for(a=2915;2920>=a;a++)d[a]=2;for(a=2921;2923>=a;a++)d[a]=1;for(a=2924;2930>=a;a++)d[a]=2;for(a=2931;2962>=a;a++)d[a]=0;for(a=2964;2968>=a;a++)d[a]=2;for(a=2969;2973>=a;a++)d[a]=0;for(a=2975;2991>=a;a++)d[a]=
0;for(a=2995;3051>=a;a++)d[a]=0;for(a=3054;3079>=a;a++)d[a]=0;for(a=3081;3088>=a;a++)d[a]=0;for(a=3092;3101>=a;a++)d[a]=0;for(a=3106;3138>=a;a++)d[a]=0;for(a=3146;3151>=a;a++)d[a]=0;for(a=3153;3166>=a;a++)d[a]=0;for(a=3168;3172>=a;a++)d[a]=0;for(a=3174;3203>=a;a++)d[a]=0;for(a=3294;3358>=a;a++)d[a]=0;for(a=3367;3403>=a;a++)d[a]=0;for(a=3408;3416>=a;a++)d[a]=0;for(a=3417;3438>=a;a++)d[a]=2;for(a=3441;3446>=a;a++)d[a]=2;for(a=3447;3450>=a;a++)d[a]=0;for(a=3451;3459>=a;a++)d[a]=2;for(a=3460;3478>=a;a++)d[a]=
0;for(a=3554;3559>=a;a++)d[a]=0;for(a=3560;3570>=a;a++)d[a]=2;for(a=3571;3581>=a;a++)d[a]=0;for(a=3594;3597>=a;a++)d[a]=0;for(a=3601;3604>=a;a++)d[a]=0;for(a=3637;3639>=a;a++)d[a]=0;for(a=3665;3667>=a;a++)d[a]=0;for(a=3693;3695>=a;a++)d[a]=0;for(a=3701;3727>=a;a++)d[a]=0;for(a=3728;3739>=a;a++)d[a]=2;for(a=3740;3751>=a;a++)d[a]=0;for(a=3753;3760>=a;a++)d[a]=2;for(a=3761;3773>=a;a++)d[a]=0;for(a=3775;3777>=a;a++)d[a]=0;for(a=3779;3781>=a;a++)d[a]=0;for(a=3783;3785>=a;a++)d[a]=0;for(a=3788;3791>=a;a++)d[a]=
0;for(a=3797;3802>=a;a++)d[a]=0;for(a=3814;3816>=a;a++)d[a]=0;for(a=3825;3829>=a;a++)d[a]=0;for(a=3832;3841>=a;a++)d[a]=0;for(a=3844;3852>=a;a++)d[a]=0;for(a=3873;3885>=a;a++)d[a]=0;for(a=3890;3893>=a;a++)d[a]=0;for(a=3907;3912>=a;a++)d[a]=0;for(a=3942;3950>=a;a++)d[a]=0;for(a=3968;3970>=a;a++)d[a]=0;for(a=3973;3976>=a;a++)d[a]=0;for(a=3986;3989>=a;a++)d[a]=0;for(a=3994;3997>=a;a++)d[a]=0;for(a=4048;4051>=a;a++)d[a]=0;for(a=4056;4063>=a;a++)d[a]=0;for(a=4093;4096>=a;a++)d[a]=0;for(a=4390;4398>=a;a++)d[a]=
0;for(a=4399;4413>=a;a++)d[a]=2;for(a=4418;4433>=a;a++)d[a]=2;for(a=4455;4457>=a;a++)d[a]=2;for(a=4484;4489>=a;a++)d[a]=0;for(a=4491;4554>=a;a++)d[a]=0;for(a=4568;4589>=a;a++)d[a]=0;for(a=4652;4656>=a;a++)d[a]=0;for(a=4766;4800>=a;a++)d[a]=0;for(a=5014;5016>=a;a++)d[a]=0;for(a=5069;5072>=a;a++)d[a]=0;for(a=5105;5130>=a;a++)d[a]=0;for(a=5173;5188>=a;a++)d[a]=0;for(a=5253;5259>=a;a++)d[a]=0;for(a=5269;5275>=a;a++)d[a]=0;for(a=5292;5311>=a;a++)d[a]=0;for(a=5329;5331>=a;a++)d[a]=0;for(a=5343;5349>=a;a++)d[a]=
0;for(a=5355;5357>=a;a++)d[a]=0;for(a=5387;5389>=a;a++)d[a]=0;for(a=5459;5463>=a;a++)d[a]=0;for(a=5479;5482>=a;a++)d[a]=0;for(a=5518;5520>=a;a++)d[a]=0;for(a=5530;5539>=a;a++)d[a]=0;for(a=5550;5552>=a;a++)d[a]=0;for(a=5562;5583>=a;a++)d[a]=0;for(a=5623;5625>=a;a++)d[a]=2;for(a=5631;5639>=a;a++)d[a]=0;for(a=5649;5653>=a;a++)d[a]=0;for(a=5663;5680>=a;a++)d[a]=0;for(a=5682;5685>=a;a++)d[a]=0;for(a=5875;5877>=a;a++)d[a]=0;for(a=5896;5899>=a;a++)d[a]=0;for(a=5921;5940>=a;a++)d[a]=0;for(a=6050;6125>=a;a++)d[a]=
0;for(a=6244;6275>=a;a++)d[a]=0;for(a=6328;6348>=a;a++)d[a]=0;for(a=6350;6356>=a;a++)d[a]=0;for(a=6366;6372>=a;a++)d[a]=0;for(a=6381;6387>=a;a++)d[a]=0;for(a=6393;6404>=a;a++)d[a]=0;for(a=6480;6483>=a;a++)d[a]=0;for(a=6511;6514>=a;a++)d[a]=0;for(a=6579;6581>=a;a++)d[a]=0;for(a=6619;6624>=a;a++)d[a]=0;for(a=6625;6627>=a;a++)d[a]=2;for(a=6628;6632>=a;a++)d[a]=0;for(a=6634;6637>=a;a++)d[a]=0;for(a=6669;6692>=a;a++)d[a]=0;for(a=6707;6709>=a;a++)d[a]=0;for(a=6720;6723>=a;a++)d[a]=0;for(a=6732;6738>=a;a++)d[a]=
0;for(a=6931;6933>=a;a++)d[a]=0;for(a=6956;6959>=a;a++)d[a]=0;for(a=7005;7007>=a;a++)d[a]=0;for(a=7057;7070>=a;a++)d[a]=2;for(a=7074;7082>=a;a++)d[a]=0;for(a=7109;7118>=a;a++)d[a]=0;for(a=7119;7127>=a;a++)d[a]=1;for(a=7374;7376>=a;a++)d[a]=0;for(a=7528;7586>=a;a++)d[a]=0;for(a=7587;7645>=a;a++)d[a]=2;for(a=7692;7696>=a;a++)d[a]=0;for(a=7755;7787>=a;a++)d[a]=0;for(a=7791;7795>=a;a++)d[a]=0;for(a=7799;7801>=a;a++)d[a]=0;for(a=7803;7805>=a;a++)d[a]=0;for(a=7825;7831>=a;a++)d[a]=0;for(a=7845;7859>=a;a++)d[a]=
0;for(a=8013;8032>=a;a++)d[a]=0;for(a=8065;8068>=a;a++)d[a]=1;for(a=8518;8529>=a;a++)d[a]=2;for(a=8533;8536>=a;a++)d[a]=2;for(a=8538;8540>=a;a++)d[a]=2;for(a=8677;8679>=a;a++)d[a]=0;for(a=8836;8840>=a;a++)d[a]=0;for(a=8857;8859>=a;a++)d[a]=0;for(a=8908;8910>=a;a++)d[a]=0;for(a=9154;9159>=a;a++)d[a]=0;for(a=9205;9218>=a;a++)d[a]=0;for(a=9271;9273>=a;a++)d[a]=0;for(a=9295;9297>=a;a++)d[a]=0;for(a=9356;9360>=a;a++)d[a]=0;for(a=9404;9407>=a;a++)d[a]=0;for(a=9476;9482>=a;a++)d[a]=0;for(a=9487;9494>=a;a++)d[a]=
0;for(a=9697;9699>=a;a++)d[a]=0;for(a=20002;20032>=a;a++)d[a]=0;for(a=20062;20092>=a;a++)d[a]=0;for(a=20135;20138>=a;a++)d[a]=0;for(a=20248;20258>=a;a++)d[a]=0;for(a=20348;20358>=a;a++)d[a]=0;for(a=20436;20440>=a;a++)d[a]=0;for(a=20822;20824>=a;a++)d[a]=0;for(a=20904;20932>=a;a++)d[a]=0;for(a=20934;20936>=a;a++)d[a]=0;for(a=21004;21032>=a;a++)d[a]=0;for(a=21035;21037>=a;a++)d[a]=0;for(a=21095;21097>=a;a++)d[a]=0;for(a=21148;21150>=a;a++)d[a]=0;for(a=21207;21264>=a;a++)d[a]=0;for(a=21307;21364>=a;a++)d[a]=
0;for(a=21413;21423>=a;a++)d[a]=0;for(a=21453;21463>=a;a++)d[a]=0;for(a=21473;21483>=a;a++)d[a]=0;for(a=21780;21782>=a;a++)d[a]=0;for(a=21891;21894>=a;a++)d[a]=0;for(a=21896;21899>=a;a++)d[a]=0;for(a=22171;22177>=a;a++)d[a]=0;for(a=22181;22187>=a;a++)d[a]=0;for(a=22191;22197>=a;a++)d[a]=0;for(a=22234;22236>=a;a++)d[a]=0;for(a=22521;22525>=a;a++)d[a]=0;for(a=22991;22994>=a;a++)d[a]=0;for(a=23028;23038>=a;a++)d[a]=0;for(a=23830;23853>=a;a++)d[a]=0;for(a=23866;23872>=a;a++)d[a]=0;for(a=23877;23884>=
a;a++)d[a]=0;for(a=23886;23894>=a;a++)d[a]=0;for(a=23946;23948>=a;a++)d[a]=0;for(a=24311;24313>=a;a++)d[a]=0;for(a=24342;24347>=a;a++)d[a]=0;for(a=24370;24374>=a;a++)d[a]=10;for(a=24375;24381>=a;a++)d[a]=0;for(a=24718;24721>=a;a++)d[a]=0;for(a=24817;24821>=a;a++)d[a]=0;for(a=24877;24882>=a;a++)d[a]=0;for(a=24891;24893>=a;a++)d[a]=0;for(a=25391;25395>=a;a++)d[a]=0;for(a=25828;25838>=a;a++)d[a]=0;for(a=26191;26195>=a;a++)d[a]=0;for(a=26391;26393>=a;a++)d[a]=0;for(a=26701;26722>=a;a++)d[a]=0;for(a=26729;26799>=
a;a++)d[a]=2;for(a=26801;26803>=a;a++)d[a]=2;for(a=26811;26813>=a;a++)d[a]=2;for(a=26847;26870>=a;a++)d[a]=2;for(a=26891;26899>=a;a++)d[a]=0;for(a=26901;26923>=a;a++)d[a]=0;for(a=26929;26946>=a;a++)d[a]=0;for(a=26948;26998>=a;a++)d[a]=0;for(a=27037;27040>=a;a++)d[a]=0;for(a=27205;27232>=a;a++)d[a]=0;for(a=27258;27260>=a;a++)d[a]=0;for(a=27391;27398>=a;a++)d[a]=0;for(a=27561;27564>=a;a++)d[a]=0;for(a=27571;27574>=a;a++)d[a]=0;for(a=27581;27584>=a;a++)d[a]=0;for(a=27591;27594>=a;a++)d[a]=0;for(a=28191;28193>=
a;a++)d[a]=0;for(a=28348;28358>=a;a++)d[a]=0;for(a=28402;28432>=a;a++)d[a]=0;for(a=28462;28492>=a;a++)d[a]=0;for(a=29118;29122>=a;a++)d[a]=0;for(a=29168;29172>=a;a++)d[a]=0;for(a=29177;29185>=a;a++)d[a]=0;for(a=29187;29195>=a;a++)d[a]=0;for(a=29900;29903>=a;a++)d[a]=0;for(a=30161;30179>=a;a++)d[a]=0;for(a=30491;30494>=a;a++)d[a]=0;for(a=30729;30732>=a;a++)d[a]=0;for(a=31251;31259>=a;a++)d[a]=0;for(a=31265;31268>=a;a++)d[a]=0;for(a=31275;31279>=a;a++)d[a]=0;for(a=31281;31297>=a;a++)d[a]=0;for(a=31461;31469>=
a;a++)d[a]=0;for(a=31491;31495>=a;a++)d[a]=0;for(a=31917;31922>=a;a++)d[a]=0;for(a=31965;32E3>=a;a++)d[a]=0;for(a=32001;32003>=a;a++)d[a]=2;for(a=32005;32031>=a;a++)d[a]=2;for(a=32033;32060>=a;a++)d[a]=2;for(a=32064;32067>=a;a++)d[a]=2;for(a=32074;32077>=a;a++)d[a]=2;for(a=32081;32086>=a;a++)d[a]=0;for(a=32107;32130>=a;a++)d[a]=0;for(a=32133;32158>=a;a++)d[a]=0;for(a=32164;32167>=a;a++)d[a]=2;for(a=32180;32199>=a;a++)d[a]=0;for(a=32201;32260>=a;a++)d[a]=0;for(a=32301;32360>=a;a++)d[a]=0;for(a=32601;32662>=
a;a++)d[a]=0;for(a=32664;32667>=a;a++)d[a]=2;for(a=32701;32761>=a;a++)d[a]=0;for(a=53001;53004>=a;a++)d[a]=0;for(a=53008;53019>=a;a++)d[a]=0;for(a=53021;53032>=a;a++)d[a]=0;for(a=53034;53037>=a;a++)d[a]=0;for(a=53042;53046>=a;a++)d[a]=0;for(a=53074;53080>=a;a++)d[a]=0;for(a=54001;54004>=a;a++)d[a]=0;for(a=54008;54019>=a;a++)d[a]=0;for(a=54021;54032>=a;a++)d[a]=0;for(a=54034;54037>=a;a++)d[a]=0;for(a=54042;54046>=a;a++)d[a]=0;for(a=54048;54053>=a;a++)d[a]=0;for(a=54074;54080>=a;a++)d[a]=0;for(a=54098;54101>=
a;a++)d[a]=0;for(a=102001;102040>=a;a++)d[a]=0;for(a=102042;102063>=a;a++)d[a]=0;for(a=102065;102067>=a;a++)d[a]=0;for(a=102070;102117>=a;a++)d[a]=0;for(a=102122;102216>=a;a++)d[a]=0;for(a=102221;102377>=a;a++)d[a]=0;for(a=102382;102388>=a;a++)d[a]=0;for(a=102389;102398>=a;a++)d[a]=2;for(a=102399;102444>=a;a++)d[a]=0;for(a=102445;102447>=a;a++)d[a]=2;for(a=102448;102458>=a;a++)d[a]=0;for(a=102459;102468>=a;a++)d[a]=2;for(a=102469;102499>=a;a++)d[a]=0;for(a=102500;102519>=a;a++)d[a]=1;for(a=102520;102524>=
a;a++)d[a]=0;for(a=102525;102529>=a;a++)d[a]=2;for(a=102530;102588>=a;a++)d[a]=0;for(a=102590;102598>=a;a++)d[a]=0;for(a=102601;102603>=a;a++)d[a]=0;for(a=102605;102628>=a;a++)d[a]=0;for(a=102629;102646>=a;a++)d[a]=2;for(a=102648;102700>=a;a++)d[a]=2;for(a=102701;102703>=a;a++)d[a]=0;for(a=102707;102730>=a;a++)d[a]=2;for(a=102733;102758>=a;a++)d[a]=2;for(a=102767;102900>=a;a++)d[a]=0;for(a=102901;102933>=a;a++)d[a]=2;for(a=102934;102950>=a;a++)d[a]=13;for(a=102951;102960>=a;a++)d[a]=0;for(a=102965;102969>=
a;a++)d[a]=0;for(a=102971;102973>=a;a++)d[a]=0;for(a=102975;102989>=a;a++)d[a]=0;for(a=102990;102992>=a;a++)d[a]=1;for(a=102997;103002>=a;a++)d[a]=0;for(a=103003;103008>=a;a++)d[a]=2;for(a=103009;103011>=a;a++)d[a]=0;for(a=103012;103014>=a;a++)d[a]=2;for(a=103019;103021>=a;a++)d[a]=0;for(a=103022;103024>=a;a++)d[a]=2;for(a=103029;103031>=a;a++)d[a]=0;for(a=103032;103034>=a;a++)d[a]=2;for(a=103065;103068>=a;a++)d[a]=0;for(a=103074;103076>=a;a++)d[a]=0;for(a=103077;103079>=a;a++)d[a]=1;for(a=103080;103082>=
a;a++)d[a]=0;for(a=103083;103085>=a;a++)d[a]=2;for(a=103090;103093>=a;a++)d[a]=0;for(a=103097;103099>=a;a++)d[a]=0;for(a=103100;103102>=a;a++)d[a]=2;for(a=103107;103109>=a;a++)d[a]=0;for(a=103110;103112>=a;a++)d[a]=2;for(a=103113;103116>=a;a++)d[a]=0;for(a=103117;103120>=a;a++)d[a]=2;for(a=103153;103157>=a;a++)d[a]=0;for(a=103158;103162>=a;a++)d[a]=2;for(a=103163;103165>=a;a++)d[a]=0;for(a=103166;103168>=a;a++)d[a]=1;for(a=103169;103171>=a;a++)d[a]=2;for(a=103186;103188>=a;a++)d[a]=0;for(a=103189;103191>=
a;a++)d[a]=2;for(a=103192;103195>=a;a++)d[a]=0;for(a=103196;103199>=a;a++)d[a]=2;for(a=103200;103224>=a;a++)d[a]=0;for(a=103225;103227>=a;a++)d[a]=1;for(a=103232;103237>=a;a++)d[a]=0;for(a=103238;103243>=a;a++)d[a]=2;for(a=103244;103246>=a;a++)d[a]=0;for(a=103247;103249>=a;a++)d[a]=2;for(a=103254;103256>=a;a++)d[a]=0;for(a=103257;103259>=a;a++)d[a]=2;for(a=103264;103266>=a;a++)d[a]=0;for(a=103267;103269>=a;a++)d[a]=2;for(a=103300;103375>=a;a++)d[a]=0;for(a=103381;103383>=a;a++)d[a]=0;for(a=103384;103386>=
a;a++)d[a]=1;for(a=103387;103389>=a;a++)d[a]=0;for(a=103390;103392>=a;a++)d[a]=2;for(a=103397;103399>=a;a++)d[a]=0;for(a=103400;103471>=a;a++)d[a]=2;for(a=103476;103478>=a;a++)d[a]=0;for(a=103479;103481>=a;a++)d[a]=2;for(a=103486;103488>=a;a++)d[a]=0;for(a=103489;103491>=a;a++)d[a]=2;for(a=103492;103495>=a;a++)d[a]=0;for(a=103496;103499>=a;a++)d[a]=2;for(a=103528;103543>=a;a++)d[a]=0;for(a=103544;103548>=a;a++)d[a]=2;for(a=103549;103551>=a;a++)d[a]=0;for(a=103552;103554>=a;a++)d[a]=1;for(a=103555;103557>=
a;a++)d[a]=2;for(a=103558;103560>=a;a++)d[a]=0;for(a=103571;103573>=a;a++)d[a]=0;for(a=103574;103576>=a;a++)d[a]=2;for(a=103577;103580>=a;a++)d[a]=0;for(a=103581;103583>=a;a++)d[a]=2;for(a=103595;103694>=a;a++)d[a]=0;for(a=103696;103699>=a;a++)d[a]=0;for(a=103700;103793>=a;a++)d[a]=2;for(a=103794;103872>=a;a++)d[a]=0;for(a=103900;103971>=a;a++)d[a]=2;return p.WKIDUnitConversion=d})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),
function(B,p,a,d,g,n){function m(f){if(f){if("function"!==typeof f.forEach){var h=Object.keys(f),k=h.map(function(u){return f[u]});return m(k).then(function(u){var v={};h.forEach(function(x,z){return v[x]=u[z]});return v})}var e=new a,r=[],q=f.length;0===q&&e.resolve(r);f.forEach(function(u){var v={promise:u};r.push(v);u.then(function(x){v.value=x})["catch"](function(x){v.error=x}).then(function(){--q;0===q&&e.resolve(r)})});return e.promise}}Object.defineProperty(p,"__esModule",{value:!0});p.all=
function(f){return g(f)};p.filter=function(f,h){var k=f.slice();return g(f.map(function(e,r){return h(e,r)})).then(function(e){return k.filter(function(r,q){return e[q]})})};p.eachAlways=m;p.create=function(f,h){var k=new a(h);f(function(e){void 0===e&&(e=null);return d(e).then(k.resolve)},k.reject);return k.promise};p.reject=function(f){var h=new a;h.reject(f);return h.promise};p.resolve=function(f){void 0===f&&(f=null);var h=new a;h.resolve(f);return h.promise};p.after=function(f,h){void 0===h&&
(h=null);var k=0,e=new a(function(){k&&(clearTimeout(k),k=0)});k=setTimeout(function(){e.resolve(h)},f);return e.promise};p.timeout=function(f,h,k){var e=0,r=new a(f.cancel);f.then(function(q){r.isFulfilled()||(r.resolve(q),e&&(clearTimeout(e),e=0))});f["catch"](function(q){r.isFulfilled()||(r.reject(q),e&&(clearTimeout(e),e=0))});e=setTimeout(function(){var q=k||new n("promiseUtils:timeout","The wrapped promise did not resolve within "+h+" ms");r.reject(q)},h);return r.promise};p.wrapCallback=function(f){var h=
!1,k=new a(function(){return h=!0});f(function(e){h||k.resolve(e)});return k.promise};p.isThenable=function(f){return f&&"function"===typeof f.then};p.when=function(f){return d(f)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(B,p,a,d){var g=B.some;return function(n){var m,f;p.isArray(n)?f=n:n&&"object"===typeof n&&(m=n);var h=[];if(m){f=[];for(var k in m)Object.hasOwnProperty.call(m,k)&&(h.push(k),f.push(m[k]));var e={}}else f&&(e=[]);
if(!f||!f.length)return(new a).resolve(e);var r=new a;r.promise.always(function(){e=h=null});var q=f.length;g(f,function(u,v){m||h.push(v);d(u,function(x){r.isFulfilled()||(e[h[v]]=x,0===--q&&r.resolve(e))},r.reject);return r.isFulfilled()});return r.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(B,p,a,d,g){B=function(n){function m(f,h,k){var e=n.call(this,f,h,k)||this;return e instanceof m?e:new m(f,
h,k)}a(m,n);m.prototype.toJSON=function(){return{name:this.name,message:this.message,details:d.clone(this.details),dojoType:this.dojoType}};m.fromJSON=function(f){var h=new m(f.name,f.message,f.details);null!=f.dojoType&&(h.dojoType=f.dojoType);return h};return m}(g);B.prototype.type="error";return B})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,a){p.__proto__=a}||
function(p,a){for(var d in a)a.hasOwnProperty(d)&&(p[d]=a[d])};return function(p,a){function d(){this.constructor=p}B(p,a);p.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(B,p,a,d,g,n){function m(u){return void 0!==u&&null!==u}function f(u){return m(u)?u:""}function h(u,v,x){var z=x.match(/([^\(]+)(\([^\)]+\))?/i),
A=p.trim(z[1]);x=v[u];z=JSON.parse((z[2]?p.trim(z[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var y=z.utcOffset;if(-1===r.indexOf(A))A=p.getObject(A),p.isFunction(A)&&(x=A(x,u,v,z));else if("number"===typeof x||"string"===typeof x&&x&&!isNaN(Number(x)))switch(x=Number(x),A){case "NumberFormat":u=p.mixin({},z);v=parseFloat(u.places);if(isNaN(v)||0>v)u.places=Infinity;return d.format(x,
u);case "DateString":x=new Date(x);if(z.local||z.systemLocale)return z.systemLocale?x.toLocaleDateString()+(z.hideTime?"":" "+x.toLocaleTimeString()):x.toDateString()+(z.hideTime?"":" "+x.toTimeString());x=x.toUTCString();z.hideTime&&(x=x.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return x;case "DateFormat":return x=new Date(x),m(y)&&(x=a.add(x,"minute",x.getTimezoneOffset()-y)),g.format(x,z)}return f(x)}function k(u,v){var x;if(v)for(x in u)u.hasOwnProperty(x)&&(void 0===u[x]?delete u[x]:u[x]instanceof
Object&&k(u[x],!0));else for(x in u)u.hasOwnProperty(x)&&void 0===u[x]&&delete u[x];return u}function e(u){if(!u||"object"!=typeof u||p.isFunction(u))return u;if(u instanceof Int8Array||u instanceof Uint8Array||u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Int32Array||u instanceof Uint16Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array||u instanceof Date)return new u.constructor(u);if(u instanceof ArrayBuffer)return u.slice(0,u.byteLength);
if("function"===typeof u.clone)u=u.clone();else if("function"===typeof u.map&&"function"===typeof u.forEach)u=u.map(e);else if("function"===typeof u.notifyChange&&"function"===typeof u.watch)u=u.clone();else{var v={},x,z={};for(x in u){var A=u[x];var y=!(x in z)||z[x]!==A;if(!(x in v)||v[x]!==A&&y)v[x]=e?e(A):A}u=v}return u}var r=["NumberFormat","DateString","DateFormat"],q=/<\/?[^>]+>/g;return{equals:function(u,v){return u===v||"number"===typeof u&&isNaN(u)&&"number"===typeof v&&isNaN(v)||p.isFunction((u||
{}).getTime)&&p.isFunction((v||{}).getTime)&&u.getTime()==v.getTime()||p.isFunction((u||{}).equals)&&u.equals(v)||p.isFunction((v||{}).equals)&&v.equals(u)||!1},mixin:p.mixin,valueOf:function(u,v){for(var x in u)if(u[x]==v)return x;return null},stripTags:function(u){if(u){var v=typeof u;if("string"===v)u=u.replace(q,"");else if("object"===v)for(var x in u)(v=u[x])&&"string"===typeof v&&(v=v.replace(q,"")),u[x]=v}return u},substitute:function(u,v,x){if(m(x))if(p.isObject(x)){var z=x.first;var A=x.dateFormat;
var y=x.numberFormat}else z=x;if(v&&"{*}"!==v)return p.replace(v,p.hitch({obj:u},function(b,l){var t=l.split(":");return 1<t.length?(l=t[0],t.shift(),h(l,this.obj,t.join(":"))):A&&-1!==(A.properties||[]).indexOf(l)?h(l,this.obj,A.formatter||"DateString"):y&&-1!==(y.properties||[]).indexOf(l)?h(l,this.obj,y.formatter||"NumberFormat"):f(this.obj[l])}));v=[];var c;v.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+n.fieldsSummary+'"\x3e\x3ctbody\x3e');for(c in u)if(x=u[c],A&&-1!==(A.properties||
[]).indexOf(c)?x=h(c,u,A.formatter||"DateString"):y&&-1!==(y.properties||[]).indexOf(c)&&(x=h(c,u,y.formatter||"NumberFormat")),v.push("\x3ctr\x3e\x3cth\x3e"+c+"\x3c/th\x3e\x3ctd\x3e"+f(x)+"\x3c/td\x3e\x3c/tr\x3e"),z)break;v.push("\x3c/tbody\x3e\x3c/table\x3e");return v.join("")},filter:function(u,v,x){v=[p.isString(u)?u.split(""):u,x||B.global,p.isString(v)?new Function("item","index","array",v):v];x={};var z;u=v[0];for(z in u)v[2].call(v[z],u[z],z,u)&&(x[z]=u[z]);return x},startsWith:function(u,
v,x){x=x||0;return u.indexOf(v,x)===x},endsWith:function(u,v,x){if("number"!==typeof x||!isFinite(x)||Math.floor(x)!==x||x>u.length)x=u.length;x-=v.length;u=u.indexOf(v,x);return-1!==u&&u===x},isDefined:m,fixJson:k,clone:e}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(B,p,a){return function(){function d(g,n,m){this instanceof d&&(this.name=g,this.message=n&&a.substitute(n,m,function(f){return null==f?"":f})||"",this.details=m)}d.prototype.toString=
function(){return"["+this.name+"]: "+this.message};return d}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b){function l(w){return{state:w.state,pixelRatio:w.pixelRatio,stationary:w.stationary}}var t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(w){function C(){var D=null!==w&&w.apply(this,arguments)||this;D._clipData=new Float32Array(8);D._upperLeft=u.create();D._upperRight=u.create();D._lowerLeft=u.create();D._lowerRight=u.create();D._mat2=q.create();D._clipRendererInitialized=!1;D._contextVersion=null;D._labelFader=new m["default"](D);
return D}a(C,w);Object.defineProperty(C.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});C.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};C.prototype.createElement=function(){var D=document.createElement("canvas");D.setAttribute("class","esri-display-object");return D};C.prototype.setElement=function(D){this.element=D};C.prototype.useContextVersion=function(D){this._renderingContext||(this._contextVersion=D)};C.prototype.attach=
function(D){if(this.attached)return!0;this._resizeCanvas(D);var E=z.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new c(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=l(D);this._painter||(this._painter=new k["default"],this._painter.initialize(this._renderingContext));return w.prototype.attach.call(this,D)};C.prototype.detach=function(D){w.prototype.detach.call(this,
D);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};C.prototype.renderChildren=function(D){var E=this.children;D.drawPhase=h.WGLDrawPhase.FILL|h.WGLDrawPhase.LINE|h.WGLDrawPhase.MARKER|h.WGLDrawPhase.TEXT;for(var F=E.length,G=0;G<F;G++){var H=E[G];H.attached&&this.renderChild(H,D)}if(d("esri-featurelayer-webgl-labeling")){var M=D.context,X=M.getBoundFramebufferObject();M.bindFramebuffer(this._labelsFBO2);G=D.stationary;M.setClearColor(0,
0,0,G?0:1);M.clear(M.gl.COLOR_BUFFER_BIT);if(G)for(D.drawPhase=h.WGLDrawPhase.LABEL_ALPHA,D.labelFBO=this._labelsFBO1,D.labelStep=this._labelFader.step(),G=0;G<F;G++)H=E[G],H.attached&&this.renderChild(H,D);else this._labelFader.reset();M.bindFramebuffer(X);D.labelFBO=this._labelsFBO2;D.drawPhase=h.WGLDrawPhase.LABEL;for(G=0;G<F;G++)H=E[G],H.attached&&this.renderChild(H,D);D=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=D}};C.prototype.beforeRenderChildren=function(D,E){var F=
E.context,G=E.state,H=E.pixelRatio,M=this._painter;if(M){F.enforceState();M.update(G,H);var X=G.width;M=G.height;var W=G.rotation;X=Math.round(X*H);M=Math.round(M*H);this._boundFBO=F.getBoundFramebufferObject();!d("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===X&&this._labelsFBO1.height===M||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=A.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:X,height:M},{colorTarget:0,depthStencilTarget:0}),F.bindFramebuffer(this._labelsFBO1),F.setDepthWriteEnabled(!0),F.setStencilWriteMask(255),F.setClearColor(0,0,0,0),F.setClearDepth(1),F.setClearStencil(0),F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT),F.setDepthWriteEnabled(!1),F.bindFramebuffer(this._boundFBO),this._labelsFBO2=A.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:X,height:M},{colorTarget:0,depthStencilTarget:0}));if(G.spatialReference&&(G.spatialReference._isWrappable?G.spatialReference._isWrappable():G.spatialReference.isWrappable)){var T=r.toRadian(W),K=Math.abs(Math.cos(T)),O=Math.abs(Math.sin(T)),N=Math.round(G.worldScreenWidth);if(Math.round(X*K+M*O)<=N)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===X&&this._clipFBO.height===M||(this._clipFBO=new A(F,{colorTarget:0,depthStencilTarget:3,width:X,height:M}));var Y=.5*X,
P=.5*M;G=1/X;var L=1/M;H*=.5*N;var Q=.5*(X*O+M*K);X=this._upperLeft;K=this._upperRight;O=this._lowerLeft;N=this._lowerRight;u.set(X,-H,-Q);u.set(K,H,-Q);u.set(O,-H,Q);u.set(N,H,Q);q.identity(this._mat2);q.translate(this._mat2,this._mat2,[Y,P]);0!==W&&q.rotate(this._mat2,this._mat2,T);u.transformMat2d(X,X,this._mat2);u.transformMat2d(K,K,this._mat2);u.transformMat2d(O,O,this._mat2);u.transformMat2d(N,N,this._mat2);W=this._clipData;W.set([2*O[0]*G-1,2*(M-O[1])*L-1,2*N[0]*G-1,2*(M-N[1])*L-1,2*X[0]*G-
1,2*(M-X[1])*L-1,2*K[0]*G-1,2*(M-K[1])*L-1]);this._clipRendererInitialized||this._initializeClipRenderer(F);this._clipVBO.setData(W);this._boundFBO=F.getBoundFramebufferObject();F.bindFramebuffer(this._clipFBO);F.setDepthWriteEnabled(!0);F.setStencilWriteMask(255);F.setClearColor(0,0,0,0);F.setClearDepth(1);F.setClearStencil(0);F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT);F.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};C.prototype.afterRenderChildren=
function(D,E){if(this._clipFrame&&this._clipRendererInitialized){var F=this._renderingContext;F.bindFramebuffer(this._boundFBO);this._boundFBO=null;F.bindVAO(this._clipVAO);F.bindProgram(this._clipStencilProgram);F.setDepthWriteEnabled(!1);F.setDepthTestEnabled(!1);F.setStencilTestEnabled(!0);F.setBlendingEnabled(!1);F.setColorMask(!1,!1,!1,!1);F.setStencilOp(7680,7680,7681);F.setStencilWriteMask(255);F.setStencilFunction(519,1,255);F.drawElements(4,6,5123,0);F.bindVAO();F.setColorMask(!0,!0,!0,!0);
F.setBlendingEnabled(!0);F.setStencilFunction(514,1,255);this._blitRenderer.render(F,this._clipFBO.colorTexture,9728,1);F.setStencilTestEnabled(!1)}};C.prototype.doRender=function(D){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(D),w.prototype.doRender.call(this,D),this._cachedRenderParams=l(D)):E.display="none"};C.prototype.takeScreenshot=function(D){void 0===D&&(D={});var E=D.pixelRatio||1;this._cachedRenderParams.pixelRatio=E;var F=Math.round(E*
this._cachedRenderParams.state.width),G=Math.round(E*this._cachedRenderParams.state.height),H=0,M=0,X=F,W=G,T=F,K=G;if(T=D.area)H=Math.round(E*T.x),M=Math.round(E*T.y),X=Math.round(E*T.width),W=Math.round(E*T.height);void 0!==D.width&&void 0!==D.height?(T=D.width/D.height,W*T<X?(T*=W,H+=Math.floor((X-T)/2),X=Math.floor(T)):(T=X/T,M+=Math.floor((W-T)/2),W=Math.floor(T)),T=D.width,K=D.height):(T=X,K=W);E=document.createElement("canvas");E.width=T;E.height=K;var O=E.getContext("2d"),N=new Uint8Array(X*
W*4),Y=this._renderingContext,P=A.create(Y,{colorTarget:1,depthStencilTarget:3,width:F,height:G});Y.bindFramebuffer(P);Y.setViewport(0,0,F,G);var L=this._cachedRenderParams,Q=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(Q.COLOR_BUFFER_BIT|Q.DEPTH_BUFFER_BIT|Q.STENCIL_BUFFER_BIT);L.context=this._renderingContext;L.painter=this._painter;this.beforeRenderChildren(L,
L);if(void 0!==D.rotation&&null!==D.rotation){Q=L.state;var ca=Q.clone();ca.viewpoint.rotation=D.rotation;L.state=ca;this.renderChildren(L);L.state=Q}else this.renderChildren(L);this.afterRenderChildren(L,L);P.readPixels(H,G-(M+W),X,W,6408,5121,N);Y.bindFramebuffer();Y=O.getImageData(0,0,T,K);if(0!==H||0!==M||X!==F||W!==G||T!==F||K!==G)v.resampleHermite(N,X,W,Y.data,T,K,!0);else{M=W-1;W=0;P=4*X;for(ca=Q=H=G=F=X=L=void 0;W<M;){Q=W*P;ca=M*P;for(L=0;L<P;L+=4)X=N[Q+L],F=N[Q+L+1],G=N[Q+L+2],H=N[Q+L+3],
N[Q+L]=N[ca+L],N[Q+L+1]=N[ca+L+1],N[Q+L+2]=N[ca+L+2],N[Q+L+3]=N[ca+L+3],N[ca+L]=X,N[ca+L+1]=F,N[ca+L+2]=G,N[ca+L+3]=H;W++;M--}X=Y.data;F=N.length;for(M=0;M<F;M++)X[M]=N[M]}N=Y.data;W=N.length;for(M=0;M<W;M+=4)H=N[M+3],0<H&&(G=H/255,X=Math.floor(N[M+0]/G),F=Math.floor(N[M+1]/G),G=Math.floor(N[M+2]/G),N[M+0]=255>=X?X:255,N[M+1]=255>=F?F:255,N[M+2]=255>=G?G:255);O.putImageData(Y,0,0);O=t[D.format?D.format.toLowerCase():"png"];N=1;void 0!==D.quality&&(N=D.quality/100);D=E.toDataURL(O,N);return g.resolve({dataURL:D,
x:0,y:0,width:T,height:K})};C.prototype.prepareChildrenRenderParameters=function(D){if(!this.attached||!this._renderingContext)return null;D=l(D);var E=this._renderingContext,F=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,this.element.height);E.setDepthWriteEnabled(!1);D.context=E;D.painter=this._painter;return D};C.prototype.attachChild=
function(D,E){return D.attach(E)};C.prototype.detachChild=function(D,E){return D.detach(E)};C.prototype.renderChild=function(D,E){return D.processRender(E)};C.prototype._resizeCanvas=function(D){var E=this.element,F=E.style,G=D.state,H=D.pixelRatio;D=Math.round(G.width*H);H=Math.round(G.height*H);if(E.width!==D||E.height!==H)E.width=D,E.height=H;F.width=G.width+"px";F.height=G.height+"px"};C.prototype._initializeClipRenderer=function(D){if(this._clipRendererInitialized)return!0;this._blitRenderer=
new f;var E={a_pos:0},F=new y(D,e.stencilVS,e.stencilFS,E);if(!F)return!1;var G=x.createVertex(D,35040,32),H=new Uint16Array([0,1,2,2,1,3]);H=x.createIndex(D,35044,H);D=new b(D,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:G},H);this._clipStencilProgram=F;this._clipVBO=G;this._clipVAO=D;return this._clipRendererInitialized=!0};return C}(n)})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./DisplayObject"],function(B,p,a,d){var g;(function(n){n[n.BEFORE=0]="BEFORE";n[n.ATTACHING=1]="ATTACHING";n[n.DETACHING=2]="DETACHING";n[n.RENDERING=3]="RENDERING";n[n.AFTER=4]="AFTER";n[n.DONE=5]="DONE"})(g||(g={}));return function(n){function m(){var f=null!==n&&n.apply(this,arguments)||this;f._childrenSet=new Set;f._childrenToAttach=[];f._childrenToDetach=[];f._renderPhase=g.DONE;f.children=[];return f}a(m,n);Object.defineProperty(m.prototype,"numChildren",{get:function(){return this.children.length},
enumerable:!0,configurable:!0});m.prototype.detach=function(f){var h=this.children.concat(this._childrenToDetach);f=this.prepareChildrenRenderParameters(f);for(var k=0;k<h.length;k++){var e=h[k];e.attached&&(this.detachChild(e,f),e.attached=!1,e.parent=null)}};m.prototype.doRender=function(f){var h=this.prepareChildrenRenderParameters(f);this._renderPhase=g.BEFORE;this.beforeRenderChildren(f,h);this._renderPhase=g.ATTACHING;this.attachChildren(h);this._renderPhase=g.DETACHING;for(var k=this._childrenToDetach;0<
k.length;){var e=k.shift();this.detachChild(e,h);e.attached=!1;e.parent=null}this._renderPhase=g.RENDERING;this.renderChildren(h);this._renderPhase=g.AFTER;this.afterRenderChildren(f,h);this._renderPhase=g.DONE};m.prototype.addChild=function(f){return this.addChildAt(f,this.children.length)};m.prototype.addChildAt=function(f,h){void 0===h&&(h=this.numChildren);if(!f||this.contains(f))return f;var k=f.parent;k&&k!==this&&k.removeChild(f);h>=this.numChildren?this.children.push(f):this.children.splice(h,
0,f);this._childrenSet.add(f);k=this._childrenToDetach.indexOf(f);-1<k&&this._childrenToDetach.splice(k,1);this._childrenToAttach.push(f);this._renderPhase>=g.RENDERING&&this.requestRender();return f};m.prototype.contains=function(f){return this._childrenSet.has(f)};m.prototype.getChildIndex=function(f){return this.children.indexOf(f)};m.prototype.getChildAt=function(f){return 0>f||f>this.children.length?null:this.children[f]};m.prototype.removeAllChildren=function(){for(var f=this.numChildren;f--;)this.removeChildAt(0)};
m.prototype.removeChild=function(f){return this.contains(f)?this.removeChildAt(this.getChildIndex(f)):f};m.prototype.removeChildAt=function(f){if(0>f||f>=this.children.length)return null;f=this.children.splice(f,1)[0];this._childrenSet["delete"](f);if(f.attached)this._childrenToDetach.push(f),this._renderPhase>=g.RENDERING&&this.requestRender();else{var h=this._childrenToAttach.indexOf(f);-1<h&&this._childrenToAttach.splice(h,1)}return f};m.prototype.requestChildRender=function(f){f&&f.parent===this&&
this._renderPhase>=g.RENDERING&&this.requestRender()};m.prototype.setChildIndex=function(f,h){var k=this.getChildIndex(f);-1<k&&(this.children.splice(k,1),this.children.splice(h,0,f),this._renderPhase>=g.RENDERING&&this.requestRender())};m.prototype.sortChildren=function(f){this._renderPhase>g.RENDERING&&this.requestRender();return this.children.sort(f)};m.prototype.attachChildren=function(f){var h=this._childrenToAttach;if(0!==h.length)for(var k=0,e=!1;!e;)e=h[k],this.attachChild(e,f)?(e.attached=
!0,e.parent=this,h.splice(k,1)):++k,e=h.length===k};m.prototype.renderChildren=function(f){for(var h=this.children,k=h.length,e=0;e<k;e++){var r=h[e];r.attached&&this.renderChild(r,f)}};m.prototype.beforeRenderChildren=function(f,h){};m.prototype.attachChild=function(f,h){return f.attach(h)};m.prototype.detachChild=function(f,h){f.detach(h)};m.prototype.renderChild=function(f,h){f.processRender(h)};m.prototype.afterRenderChildren=function(f,h){};return m}(d)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(B,p,a,d){return function(g){function n(){var m=null!==g&&g.apply(this,arguments)||this;m._renderRequestedCalled=!1;m._attached=!1;m._opacity=1;m.renderRequested=!1;m._visible=!0;return m}a(n,g);Object.defineProperty(n.prototype,"attached",{get:function(){return this._attached},set:function(m){this._attached!==m&&((this._attached=m)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"opacity",{get:function(){return this._opacity},set:function(m){this._opacity!==m&&(this._opacity=m,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(m){this._visible!==m&&(this._visible=m,this.requestRender())},enumerable:!0,configurable:!0});n.prototype.attach=function(m){return!0};n.prototype.detach=function(m){};n.prototype.processRender=
function(m){this._renderRequestedCalled=!1;this.doRender(m);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};n.prototype.requestRender=function(){var m=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);m!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};n.prototype.dispose=function(){};return n}(d.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function n(){}n.prototype.on=function(m,f){return d.after(this,"on"+m,f,!0)};n.prototype.once=function(m,f){return g.once(this,m,f)};n.prototype.emit=function(m){g.emit(this,m,this)};n.prototype.hasEventListener=function(m){m="on"+m;return!(!this[m]||!this[m].after)};return n}();p.Evented=B;p.EventedMixin=function(n){return function(m){function f(){return null!==
m&&m.apply(this,arguments)||this}a(f,m);f.prototype.on=function(h,k){return d.after(this,"on"+h,k,!0)};f.prototype.once=function(h,k){return g.once(this,h,k)};f.prototype.emit=function(h,k){g.emit(this,h,k)};f.prototype.hasEventListener=function(h){h="on"+h;return!(!this[h]||!this[h].after)};return f}(n)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function d(g,n){void 0===
n&&(n=250);this.duration=n;this._startTime=this._lastTime=0;this._parent=g}d.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};d.prototype.step=function(){var g=performance.now();if(0===this._lastTime)return this._lastTime=g,this._parent.requestRender(),0;var n=g-this._lastTime;this._lastTime=g;g-this._startTime<2*this.duration&&this._parent.requestRender();return n/this.duration};return d}();p["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(B,p,a,d,g,n){return function(){function m(){this._initialized=!1}m.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};m.prototype.render=function(f,h,k,e){f&&(this._initialized||this._initialize(f),f.setBlendFunctionSeparate(1,771,1,771),f.bindVAO(this._vertexArrayObject),f.bindProgram(this._program),h.setSamplingMode(k),f.bindTexture(h,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",e),f.drawArrays(5,0,4),f.bindVAO())};m.prototype._initialize=function(f){if(this._initialized)return!0;var h={a_pos:0,a_tex:1},k=new g(f,a.bitblitVS,a.bitblitFS,h);if(!k)return!1;var e=new Int8Array(16);e[0]=-1;e[1]=-1;e[2]=0;e[3]=0;e[4]=1;e[5]=-1;e[6]=1;e[7]=0;e[8]=-1;e[9]=1;e[10]=0;e[11]=1;e[12]=1;e[13]=1;e[14]=1;e[15]=1;f=new n(f,h,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(f,35044,e)});this._program=k;this._vertexArrayObject=f;return this._initialized=!0};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(B,p,a,d,g,n,m){B=new m;m.parse(a,B);m.parse(d,B);m.parse(g,
B);m.parse(n,B);return B})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(B,p,a){return function(){function d(g){if(g)for(var n in g)this[n]=g[n]}d.parse=function(g,n){for(var m=a.parse(g).getElementsByTagName("snippet"),f=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,h=/[\$\s]+/g,k=/\(([^\(\)]*)\)/,e=0;e<m.length;e++){for(var r=m[e].getAttribute("name"),q=m[e].textContent;;){var u=q.match(f);if(null==u)break;var v=u[0].replace(h,
""),x=v.match(k),z=void 0;x&&(z=x[1].split(",").map(function(A){return A.trim()}));v=v.replace(k,"");z=n._instantiate(v,z);q=q.replace(u[0],z)}n[r]=q}};d.prototype._instantiate=function(g,n){var m=this[g];for(n||(n=[]);;){var f=m.match(/\$(\d+)/);if(null==f)break;var h=parseInt(f[1],10);m=m.replace(f[0],n[h])}return m};return d}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(B,p,a){return function(){function d(g,n,m,f,h){this._glName=
this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=n;this._usage=m;this._id=d._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&g.instanceCounter.incrementCount(1);f&&this.setData(f,h)}d.createIndex=function(g,n,m,f){return new d(g,34963,n,m,f)};d.createVertex=function(g,n,m){return new d(g,34962,n,m)};Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});d.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};d.prototype.setData=function(g,n){if(g){if("number"===typeof g){if(34963===
this._bufferType&&n)switch(this._indexType=n,this._size=g,n){case 5123:g*=2;break;case 5125:g*=4}}else{var m=g.byteLength;g instanceof Uint16Array&&(m/=2,this._indexType=5123);g instanceof Uint32Array&&(m/=4,this._indexType=5125);this._size=m;ArrayBuffer.isView(g)&&(g=g.buffer)}m=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,g,this._usage);this._context.bindVAO(m)}};d.prototype.setSubData=function(g,n,m,f){void 0===
n&&(n=0);void 0===m&&(m=0);if(g){var h=f,k=g.byteLength;g instanceof Uint16Array&&(k/=2,n*=2,m*=2,h*=2);g instanceof Uint32Array&&(k/=4,n*=4,m*=4,h*=4);void 0===f&&(f=k-1);f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);k=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;k.bufferSubData(this._bufferType,n,g.slice(m,h));this._context.bindVAO(f)}};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports",
"dojo/has","./ShaderTranspiler"],function(B,p,a,d){return function(){function g(n,m,f,h,k){void 0===k&&(k={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=n;this._vertexShaderSource=
m;this._fragmentShaderSource=f;if(Array.isArray(k))for(m=0;m<k.length;m++)this._defines[k[m]]="1";else this._defines=k;this._id=g._nextId++;this._locations=h;a("esri-webgl-debug")&&n.instanceCounter.incrementCount(3)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},
enumerable:!0,configurable:!0});g.prototype.getDefine=function(n){return this._defines[n]};g.prototype.dispose=function(){if(this._context){var n=this._context.gl;this._vShader&&(n.deleteShader(this._vShader),this._vShader=null);this._fShader&&(n.deleteShader(this._fShader),this._fShader=null);this._glName&&(n.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){this._vShader=
this._loadShader(35633);this._fShader=this._loadShader(35632);var n=this._context.gl,m=n.createProgram();n.attachShader(m,this._vShader);n.attachShader(m,this._fShader);for(var f in this._locations)n.bindAttribLocation(m,this._locations[f],f);n.linkProgram(m);n.getProgramParameter(m,n.LINK_STATUS);this._glName=m;this._initialized=!0}};g.prototype.getUniformLocation=function(n){this.initialize();void 0===this._nameToUniformLocation[n]&&(this._nameToUniformLocation[n]=this._context.gl.getUniformLocation(this._glName,
n));return this._nameToUniformLocation[n]};g.prototype.hasUniform=function(n){return null!==this.getUniformLocation(n)};g.prototype.getAttribLocation=function(n){this.initialize();void 0===this._nameToAttribLocation[n]&&(this._nameToAttribLocation[n]=this._context.gl.getAttribLocation(this._glName,n));return this._nameToAttribLocation[n]};g.prototype.setUniform1i=function(n,m){var f=this._nameToUniform1[n];if(void 0===f||m!==f)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(n),
m),this._nameToUniform1[n]=m};g.prototype.setUniform1f=function(n,m){var f=this._nameToUniform1[n];if(void 0===f||m!==f)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(n),m),this._nameToUniform1[n]=m};g.prototype.setUniform1fv=function(n,m){var f=this._nameToUniform2[n];void 0!==f&&g._arraysEqual(m,f)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(n),m),void 0===f?this._nameToUniform2[n]=new Float32Array(m):f.set(m))};g.prototype.setUniform2f=
function(n,m,f){var h=this._nameToUniform2[n];if(void 0===h||m!==h[0]||f!==h[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(n),m,f),void 0===h?this._nameToUniform2[n]=new Float32Array([m,f]):(h[0]=m,h[1]=f)};g.prototype.setUniform2fv=function(n,m){var f=this._nameToUniform2[n];void 0!==f&&g._arraysEqual(m,f)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(n),m),void 0===f?this._nameToUniform2[n]=new Float32Array(m):f.set(m))};
g.prototype.setUniform3f=function(n,m,f,h){var k=this._nameToUniform3[n];if(void 0===k||m!==k[0]||f!==k[1]||h!==k[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(n),m,f,h),void 0===k?this._nameToUniform3[n]=new Float32Array([m,f,h]):(k[0]=m,k[1]=f,k[2]=h)};g.prototype.setUniform3fv=function(n,m){var f=this._nameToUniform3[n];void 0!==f&&g._arraysEqual(m,f)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(n),m),void 0===f?this._nameToUniform3[n]=
new Float32Array(m):f.set(m))};g.prototype.setUniform4f=function(n,m,f,h,k){var e=this._nameToUniform4[n];if(void 0===e||m!==e[0]||f!==e[1]||h!==e[2]||k!==e[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(n),m,f,h,k),void 0===e?this._nameToUniform4[n]=new Float32Array([m,f,h,k]):(e[0]=m,e[1]=f,e[2]=h,e[3]=k)};g.prototype.setUniform4fv=function(n,m){var f=this._nameToUniform4[n];void 0!==f&&g._arraysEqual(m,f)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(n),
m),void 0===f?this._nameToUniform4[n]=new Float32Array(m):f.set(m))};g.prototype.setUniformMatrix3fv=function(n,m,f){void 0===f&&(f=!1);var h=this._nameToUniformMatrix3[n];void 0!==h&&(9===h.length?g._matrix3Equal(h,m):g._arraysEqual(m,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(n),f,m),void 0===h?this._nameToUniformMatrix3[n]=new Float32Array(m):h.set(m))};g.prototype.setUniformMatrix4fv=function(n,m,f){void 0===f&&(f=!1);var h=this._nameToUniformMatrix4[n];
void 0!==h&&(16===h.length?g._matrix4Equal(h,m):g._arraysEqual(m,h))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(n),f,m),void 0===h?this._nameToUniformMatrix4[n]=new Float32Array(m):h.set(m))};g._padToThree=function(n){var m=n.toString();1E3>n&&(m=("  "+n).slice(-3));return m};g.prototype._addLineNumbers=function(n){var m=2;return n.replace(/\n/g,function(){return"\n"+g._padToThree(m++)+":"})};g.prototype._loadShader=function(n){var m=35633===n,f=m?
this._vertexShaderSource:this._fragmentShaderSource,h="",k;for(k in this._defines)h+="#define "+k+" "+this._defines[k]+"\n";f=h+f;"webgl2"===this._context.contextVersion&&(f=d.transpileShader(f,m?"vertex":"fragment"));m=this._context.gl;n=m.createShader(n);m.shaderSource(n,f);m.compileShader(n);m.getShaderParameter(n,m.COMPILE_STATUS);return n};g._matrix4Equal=function(n,m){return n[0]===m[0]&&n[1]===m[1]&&n[2]===m[2]&&n[3]===m[3]&&n[4]===m[4]&&n[5]===m[5]&&n[6]===m[6]&&n[7]===m[7]&&n[8]===m[8]&&
n[9]===m[9]&&n[10]===m[10]&&n[11]===m[11]&&n[12]===m[12]&&n[13]===m[13]&&n[14]===m[14]&&n[15]===m[15]};g._matrix3Equal=function(n,m){return n[0]===m[0]&&n[1]===m[1]&&n[2]===m[2]&&n[3]===m[3]&&n[4]===m[4]&&n[5]===m[5]&&n[6]===m[6]&&n[7]===m[7]&&n[8]===m[8]};g._arraysEqual=function(n,m){if(n.length!==m.length)return!1;for(var f=0;f<n.length;++f)if(n[f]!==m[f])return!1;return!0};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3",
"./lib/glsl-tokenizer/string"],function(B,p,a,d){function g(h){return h.map(function(k){return"eof"!==k.type?k.data:""}).join("")}function n(h,k,e,r){r=r||e;for(var q=0;q<h.length;q++){var u=h[q];if("ident"===u.type&&u.data===e)return r in k?k[r]++:k[r]=0,n(h,k,r+"_"+k[r],r)}return e}function m(h,k,e){void 0===e&&(e="afterVersion");var r={data:"\n",type:"whitespace"},q=function(z){return z<h.length?/[^\r\n]$/.test(h[z].data):!1},u=function(z){for(var A=-1,y=0,c=-1,b=0;b<z.length;b++){var l=z[b];"preprocessor"===
l.type&&(l.data.match(/#(if|ifdef|ifndef)\s+.+/)?++y:l.data.match(/#endif\s*.*/)&&--y);("afterVersion"===e||"afterPrecision"===e)&&"preprocessor"===l.type&&/^#version/.test(l.data)&&(c=Math.max(c,b));if("afterPrecision"===e&&"keyword"===l.type&&"precision"===l.data){a:{for(l=b;l<z.length;l++){var t=z[l];if("operator"===t.type&&";"===t.data)break a}l=null}if(null===l)throw Error("precision statement not followed by any semicolons!");c=Math.max(c,l)}A<c&&0===y&&(A=b)}return A+1}(h);q(u-1)&&h.splice(u++,
0,r);for(var v=0;v<k.length;v++){var x=k[v];h.splice(u++,0,x)}q(u-1)&&q(u)&&h.splice(u,0,r)}Object.defineProperty(p,"__esModule",{value:!0});var f=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];p.transpileShader=function(h,k){var e=d(h);a:{var r="100";var q="300 es";void 0===r&&(r="100");void 0===q&&(q="300 es");for(var u=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,v=0;v<e.length;v++){var x=e[v];if("preprocessor"===x.type){var z=u.exec(x.data);
if(z)if(u=z[1].replace(/\s\s+/g," "),u===q){r=u;break a}else if(u===r){x.data="#version "+q;break a}else throw Error("unknown glsl version: "+u);}}e.splice(0,0,{type:"preprocessor",data:"#version "+q},{type:"whitespace",data:"\n"});r=null}if("300 es"===r)throw Error("shader is already glsl 300 es");u=x=null;v={};z={};for(r=0;r<e.length;++r)switch(q=e[r],q.type){case "keyword":"vertex"===k&&"attribute"===q.data?q.data="in":"varying"===q.data&&(q.data="vertex"===k?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(q.data.trim())&&
(q.data=q.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===k&&"gl_FragColor"===q.data){if(!x){x=n(e,v,"fragColor");var A=void 0;void 0===A&&(A="lowp");m(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:A},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:x},{type:"operator",data:";"}],"afterPrecision")}q.data=x}else"fragment"===k&&"gl_FragDepthEXT"===q.data&&(u||(u=n(e,v,"gl_FragDepth")),q.data=u);break;case "ident":if(0<=
a.indexOf(q.data)){if(A="vertex"===k)a:{for(A=r-1;0<=A;A--){var y=e[A];if("whitespace"!==y.type&&"block-comment"!==y.type)if("keyword"===y.type){if("attribute"===y.data||"in"===y.data){A=!0;break a}}else break}A=!1}if(A)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");q.data in z||(z[q.data]=n(e,v,q.data));q.data=z[q.data]}}for(r=e.length-1;0<=r;--r)q=e[r],"preprocessor"===q.type&&((x=q.data.match(/#extension\s+(.*):/))&&x[1]&&0<=f.indexOf(x[1].trim())&&
(x=e[r+1],e.splice(r,x&&"whitespace"===x.type?2:1)),(x=q.data.match(/#ifdef\s+(.*)/))&&x[1]&&0<=f.indexOf(x[1].trim())&&(q.data="#if 1"),(x=q.data.match(/#ifndef\s+(.*)/))&&x[1]&&0<=f.indexOf(x[1].trim())&&(q.data="#if 0"));return g(e)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(B,p){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(B){"use strict;";return function(p){var a=B(),d=[];d=d.concat(a(p));return d=d.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(B,p,a){"use strict;";var d="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function g(D){D.length&&
A.push({type:d[u],data:D,position:b,line:y,column:c})}function n(){z=z.length?[]:z;if("/"===x&&"*"===v)return b=q+r-1,u=0,x=v,r+1;if("/"===x&&"/"===v)return b=q+r-1,u=1,x=v,r+1;if("#"===v)return u=2,b=q+r,r;if(/\s/.test(v))return u=9,b=q+r,r;l=/\d/.test(v);t=/[^\w_]/.test(v);b=q+r;u=l?4:t?3:9999;return r}function m(){if(("\r"===v||"\n"===v)&&"\\"!==x)return g(z.join("")),u=999,r;z.push(v);x=v;return r+1}function f(){if("."===x&&/\d/.test(v))return u=5,r;if("/"===x&&"*"===v)return u=0,r;if("/"===x&&
"/"===v)return u=1,r;if("."===v&&z.length){for(;h(z););u=5;return r}if(";"===v||")"===v||"("===v){if(z.length)for(;h(z););g(v);u=999;return r+1}var D=2===z.length&&"\x3d"!==v;if(/[\w_\d\s]/.test(v)||D){for(;h(z););u=999;return r}z.push(v);x=v;return r+1}function h(D){var E=0;do{var F=p.indexOf(D.slice(0,D.length+E).join(""));var G=p[F];if(-1===F){if(0<E--+D.length)continue;G=D.slice(0,1).join("")}g(G);b+=G.length;z=z.slice(G.length);return z.length}while(1)}function k(){if("."===v||/[eE]/.test(v))return z.push(v),
u=5,x=v,r+1;if("x"===v&&1===z.length&&"0"===z[0])return u=11,z.push(v),x=v,r+1;if(/[^\d]/.test(v))return g(z.join("")),u=999,r;z.push(v);x=v;return r+1}function e(){"f"===v&&(z.push(v),x=v,r+=1);if(/[eE]/.test(v)||"-"===v&&/[eE]/.test(x))return z.push(v),x=v,r+1;if(/[^\d]/.test(v))return g(z.join("")),u=999,r;z.push(v);x=v;return r+1}var r=0,q=0,u=999,v,x,z=[],A=[],y=1,c=0,b=0,l=!1,t=!1,w="",C;return function(D){A=[];if(null!==D){D=D.replace?D.replace(/\r\n/g,"\n"):D;r=0;w+=D;for(C=w.length;v=w[r],
r<C;){D=r;switch(u){case 0:"/"===v&&"*"===x?(z.push(v),g(z.join("")),u=999):(z.push(v),x=v);r+=1;break;case 1:r=m();break;case 2:r=m();break;case 3:r=f();break;case 4:r=k();break;case 11:/[^a-fA-F0-9]/.test(v)?(g(z.join("")),u=999):(z.push(v),x=v,r+=1);break;case 5:r=e();break;case 9999:if(/[^\d\w_]/.test(v)){var E=z.join("");u=-1<B.indexOf(E)?8:-1<a.indexOf(E)?7:6;g(z.join(""));u=999}else z.push(v),x=v,r+=1;break;case 9:/[^\s]/g.test(v)?(g(z.join("")),u=999):(z.push(v),x=v,r+=1);break;case 999:r=
n()}if(D!==r)switch(w[D]){case "\n":c=0;++y;break;default:++c}}q+=r;w=w.slice(r);return A}z.length&&g(z.join(""));u=10;g("(eof)");return A}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(B,p,a,d){return function(){function g(n,m,f,h,k){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=n;this._layout=f;this._buffers=h;this._locations=m;k&&(this._indexBuffer=k);this._id=g._nextId++;a("esri-webgl-debug")&&n.instanceCounter.incrementCount(2)}Object.defineProperty(g.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){var n=this;return Object.keys(this._buffers).reduce(function(m,
f){return m+n._buffers[f].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(n){void 0===n&&(n=!0);if(this._context){var m=this._context.capabilities.vao;m&&this._glName&&(m.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(n){for(var f in this._buffers)this._buffers[f].dispose(),delete this._buffers[f];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var n=this._context.capabilities.vao;if(n){var m=n.createVertexArray();n.bindVertexArray(m);this._bindLayout();n.bindVertexArray(null);
this._glName=m}this._initialized=!0}};g.prototype.bind=function(){this.initialize();var n=this._context.capabilities.vao;n?n.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var n=this._buffers,m=!!this._context.capabilities.vao,f=this._layout,h=this._indexBuffer,k=this._context.gl,e;for(e in n)d.bindVertexBufferLayout(this._context,this._locations,n[e],f[e]);h&&(m?k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,h.glName):this._context.bindBuffer(h))};
g.prototype.unbind=function(){this.initialize();var n=this._context.capabilities.vao;n?n.bindVertexArray(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var n=this._buffers,m=this._layout,f;for(f in n)d.unbindVertexBufferLayout(this._context,this._locations,n[f],m[f]);(n=this._indexBuffer)&&this._context.unbindBuffer(n.bufferType)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],
function(B,p,a,d){return function(){function g(){}g.vertexCount=function(n,m){return n.vertexBuffers[m].size/g.getStride(n.layout[m])};g.getStride=function(n){return n[0].stride};g.getBytesPerElement=function(n){switch(n){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};g.addDescriptor=function(n,m,f,h,k,e){var r=g.getBytesPerElement(h);if(0<n.length){var q=n[0].stride,u=
q+r*f;n.forEach(function(v){return v.stride=u});n.push({name:m,count:f,type:h,offset:q,stride:u,normalized:k,divisor:e})}else n.push({name:m,count:f,type:h,offset:0,stride:r*f,normalized:k,divisor:e})};g.assertCompatibleVertexAttributeLocations=function(n,m){return n.locations===m.locations};g.hasAttribute=function(n,m){for(var f=0;f<n.length;f++)if(n[f].name===m)return!0;return!1};g.findAttribute=function(n,m){for(var f=0;f<n.length;f++)if(n[f].name===m)return n[f];return null};g.copyFramebufferToTexture=
function(n,m,f,h,k){void 0===k&&(k=0);var e=n.getBoundFramebufferObject(),r=n.getBoundTexture(0);n.bindFramebuffer(m);n.bindTexture(f,0);n.gl.copyTexImage2D(n.gl.TEXTURE_2D,k,f.descriptor.pixelFormat,h[0],h[1],h[2],h[3],0);n.gl.flush();n.bindFramebuffer(e);n.bindTexture(r,0)};g.assert=function(n,m){if(!n)throw new d(m);};g.setBaseInstanceOffset=function(n,m){var f={},h;for(h in n)f[h]=n[h].map(function(k){return k.divisor?a({},k,{baseInstance:m}):k});return f};g.bindVertexBufferLayout=function(n,
m,f,h,k){var e=n.gl,r=n.capabilities.instancing;n.bindBuffer(f);h.forEach(function(q){var u=m[q.name],v=(k?k:0+q.baseInstance?q.baseInstance:0)*q.stride;if(4>=q.count)e.vertexAttribPointer(u,q.count,q.type,q.normalized,q.stride,q.offset+v),e.enableVertexAttribArray(u),q.divisor&&0<q.divisor&&r&&r.vertexAttribDivisor(u,q.divisor);else if(9===q.count)for(var x=0;3>x;x++)e.vertexAttribPointer(u+x,3,q.type,q.normalized,q.stride,q.offset+12*x+v),e.enableVertexAttribArray(u+x),q.divisor&&0<q.divisor&&r&&
r.vertexAttribDivisor(u+x,q.divisor);else if(16===q.count)for(x=0;4>x;x++)e.vertexAttribPointer(u+x,4,q.type,q.normalized,q.stride,q.offset+16*x+v),e.enableVertexAttribArray(u+x),q.divisor&&0<q.divisor&&r&&r.vertexAttribDivisor(u+x,q.divisor)})};g.unbindVertexBufferLayout=function(n,m,f,h){var k=n.gl;n.bindBuffer(f);h.forEach(function(e){var r=m[e.name];if(4>=e.count)k.disableVertexAttribArray(r);else if(9===e.count)for(e=0;3>e;e++)k.disableVertexAttribArray(r+e);else if(16===e.count)for(e=0;4>e;e++)k.disableVertexAttribArray(r+
e)});n.unbindBuffer(34962)};return g}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(B){for(var p,a=1,d=arguments.length;a<d;a++){p=arguments[a];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(B[g]=p[g])}return B}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(p.WGLGeometryType||(p.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(p.WGLGeometryTransactionStatus||(p.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(p.WGLDrawPhase||(p.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(p.VVType||(p.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(p.WGLVVFlag||(p.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(p.WGLVVTarget||(p.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(p.CapType||(p.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(p.JoinType||(p.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(p.EsriSymbolType||(p.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(p.EsriSymbolTypeKebab||(p.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function b(){this._initialized=!1}b.prototype.registerPass=function(l,t){this._initialize();for(var w=0;w<t.length;w++)this._passMap.set(t[w],l);return this};b.prototype.getPaintPassTs=function(l){this._initialize();return this._passMap.has(l)?[this._passMap.get(l)]:[]};b.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return b}();p.WGLPainterOptions=
B;var y=new Uint8Array(4*h.C_HITTEST_SEARCH_SIZE*h.C_HITTEST_SEARCH_SIZE),c=new Uint32Array(y.buffer);B=function(){function b(){this._hlPainter=new z;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new f}b.allGeometryPhases=function(){return[n.WGLDrawPhase.FILL,
n.WGLDrawPhase.LINE,n.WGLDrawPhase.MARKER,n.WGLDrawPhase.TEXT]};b.toWGLDrawPhases=function(l){for(var t=[],w,C=0;C<n.WGLDrawPhase.NUM_DRAW_PHASES;C++)w=1<<C,w&l&&t.push(w);return t};Object.defineProperty(b.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(l){return l.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(l){return l.forEach(function(t){return t.dispose()})}),this._brushes.clear())};b.prototype.initialize=function(l){this.materialManager.initialize(l)};b.prototype.update=function(l,t){this._state=l;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/l.width,this._extrudeScaleVector[1]=-2/l.height,g.identity(this._extrudeMatrix),g.rotate(this._extrudeMatrix,this._extrudeMatrix,-l.rotation*m.C_DEG_TO_RAD,this._extrudeRotateVector),g.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),g.transpose(this._extrudeMatrix,this._extrudeMatrix),g.identity(this._extrudeNoRotationMatrix),g.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),g.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};b.prototype.getBrushes=function(l){if(!this._brushes){var t=new r["default"],w=new v["default"],C=new u["default"],D=new x["default"],E=new q["default"],F=new k["default"],G=new e["default"];this._brushes=new Map;this._brushes.set(n.WGLDrawPhase.FILL,[t]);
this._brushes.set(n.WGLDrawPhase.MARKER,[w]);this._brushes.set(n.WGLDrawPhase.LINE,[C]);this._brushes.set(n.WGLDrawPhase.TEXT,[D]);this._brushes.set(n.WGLDrawPhase.LABEL,[E]);this._brushes.set(n.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(n.WGLDrawPhase.HITTEST,[t,w,C,D]);this._brushes.set(n.WGLDrawPhase.HIGHLIGHT,[t,w,C,D]);this._brushes.set(n.WGLDrawPhase.CLIP,[G]);this._brushes.set(n.WGLDrawPhase.DEBUG,[F])}if(!this._brushes.has(l))throw Error("WGLPainter: Tried to get brush for unknown phase: "+
l);return this._brushes.get(l)};b.prototype.bindTextureManager=function(l){this.textureManager=l};b.prototype.draw=function(l,t,w,C){w[0]===n.WGLDrawPhase.LABEL_ALPHA&&w[0]===n.WGLDrawPhase.LABEL||this._drawClippingRects(l,t);var D=l.context;D.setBlendingEnabled(!0);D.setStencilWriteMask(0);D.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(l,t,w,C);this._debugTiles(l,t)};b.prototype.setHighlightOptions=function(l){this._hlPainter.setHighlightOptions(l)};b.prototype.highlight=function(l,t){var w=
l.context,C=w.getViewport();this._hlPainter.setup(w,C.width,C.height);this._hlPainter.startMaskDraw(w);this._drawClippingRects(l,t);w.setBlendingEnabled(!0);w.setStencilWriteMask(0);w.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(l,t,[n.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(w)};b.prototype.hitTest=function(l,t){var w=h.C_HITTEST_SEARCH_SIZE,C=[0,0],D=[0,0],E=l.state;E.toMap(C,[0,0]);E.toMap(D,[w,w]);if(0===t.filter(function(T){return!(C[0]>T.bounds[2]||D[0]<T.bounds[0]||C[1]<T.bounds[1]||
D[1]>T.bounds[3])}).length)return[];E=l.context;this._hittestFBO||(this._hittestFBO=A.create(E,{colorTarget:0,depthStencilTarget:3,width:w,height:w}));var F=E.getViewport(),G=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,w,w);this._drawClippingRects(l,t);var H=E.gl;E.setClearColor(1,1,1,1);E.clear(H.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(l,t,[n.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,
0,w,w,6408,5121,y);w*=w;H=new Set;for(var M=0;M<w;M++){var X=c[M];4294967295!==X&&H.add(X)}E.bindFramebuffer(G);E.setViewport(F.x,F.y,F.width,F.height);var W=[];H.forEach(function(T){W.push(T)});return W};b.prototype._getPaintPass=function(l){this._passes||(this._passes=new Map);if(!this._passes.has(l))try{this._passes.set(l,new l)}catch(t){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+l+",\n"+t);}return this._passes.get(l)};b.prototype._getPaintPasses=function(l,t){var w=
this;return t.getPaintPassTs(l).map(function(C){return w._getPaintPass(C)})};b.prototype._drawPhases=function(l,t,w,C){l.context.setStencilTestEnabled(!0);for(var D=0;D<w.length;D++){var E=w[D],F=C?this._getPaintPasses(E,C):[];E=a({},l,{drawPhase:E});F.forEach(function(M){return M.preRender(l,l.rendererInfo)});for(var G=0,H=t;G<H.length;G++)H[G].doRender(E);F.reverse().forEach(function(M){return M.postRender(l,l.rendererInfo)})}l.context.setStencilTestEnabled(!1)};b.prototype._debugTiles=function(l,
t){d("esri-feature-tiles-debug")&&this._drawPhases(l,t,[n.WGLDrawPhase.DEBUG])};b.prototype._drawClippingRects=function(l,t){if(0!==t.length){var w=l.context;w.setDepthWriteEnabled(!1);w.setDepthTestEnabled(!1);w.setStencilTestEnabled(!0);w.setBlendingEnabled(!1);w.setColorMask(!1,!1,!1,!1);w.setStencilOp(7680,7680,7681);w.setClearStencil(0);w.clear(w.gl.STENCIL_BUFFER_BIT);w.setStencilWriteMask(255);w=0;for(var C=t.length;w<t.length;w++,C--){var D=t[w];D.attached&&(D.stencilRef=C)}this._drawPhases(l,
t,[n.WGLDrawPhase.CLIP]);l.context.setColorMask(!0,!0,!0,!0)}};return b}();p["default"]=B})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(B){var p={scalar:{},SIMD:{},create:function(){var a=new B.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var d=new B.ARRAY_TYPE(16);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=
a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a},fromValues:function(a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A){var y=new B.ARRAY_TYPE(16);y[0]=a;y[1]=d;y[2]=g;y[3]=n;y[4]=m;y[5]=f;y[6]=h;y[7]=k;y[8]=e;y[9]=r;y[10]=q;y[11]=u;y[12]=v;y[13]=x;y[14]=z;y[15]=
A;return y},set:function(a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y){a[0]=d;a[1]=g;a[2]=n;a[3]=m;a[4]=f;a[5]=h;a[6]=k;a[7]=e;a[8]=r;a[9]=q;a[10]=u;a[11]=v;a[12]=x;a[13]=z;a[14]=A;a[15]=y;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};p.scalar.transpose=function(a,d){if(a===d){var g=d[1],n=d[2],m=d[3],f=d[6],h=d[7],k=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=g;a[6]=d[9];a[7]=d[13];a[8]=n;a[9]=f;
a[11]=d[14];a[12]=m;a[13]=h;a[14]=k}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a};p.SIMD.transpose=function(a,d){var g=SIMD.Float32x4.load(d,0);var n=SIMD.Float32x4.load(d,4);var m=SIMD.Float32x4.load(d,8);var f=SIMD.Float32x4.load(d,12);var h=SIMD.Float32x4.shuffle(g,n,0,1,4,5);var k=SIMD.Float32x4.shuffle(m,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,k,0,2,4,
6);h=SIMD.Float32x4.shuffle(h,k,1,3,5,7);SIMD.Float32x4.store(a,0,e);SIMD.Float32x4.store(a,4,h);h=SIMD.Float32x4.shuffle(g,n,2,3,6,7);k=SIMD.Float32x4.shuffle(m,f,2,3,6,7);g=SIMD.Float32x4.shuffle(h,k,0,2,4,6);n=SIMD.Float32x4.shuffle(h,k,1,3,5,7);SIMD.Float32x4.store(a,8,g);SIMD.Float32x4.store(a,12,n);return a};p.transpose=B.USE_SIMD?p.SIMD.transpose:p.scalar.transpose;p.scalar.invert=function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=d[6],r=d[7],q=d[8],u=d[9],v=d[10],x=d[11],z=d[12],
A=d[13],y=d[14],c=d[15],b=g*k-n*h,l=g*e-m*h,t=g*r-f*h,w=n*e-m*k,C=n*r-f*k,D=m*r-f*e,E=q*A-u*z,F=q*y-v*z,G=q*c-x*z,H=u*y-v*A,M=u*c-x*A,X=v*c-x*y,W=b*X-l*M+t*H+w*G-C*F+D*E;if(!W)return null;W=1/W;a[0]=(k*X-e*M+r*H)*W;a[1]=(m*M-n*X-f*H)*W;a[2]=(A*D-y*C+c*w)*W;a[3]=(v*C-u*D-x*w)*W;a[4]=(e*G-h*X-r*F)*W;a[5]=(g*X-m*G+f*F)*W;a[6]=(y*t-z*D-c*l)*W;a[7]=(q*D-v*t+x*l)*W;a[8]=(h*M-k*G+r*E)*W;a[9]=(n*G-g*M-f*E)*W;a[10]=(z*C-A*t+c*b)*W;a[11]=(u*t-q*C-x*b)*W;a[12]=(k*F-h*H-e*E)*W;a[13]=(g*H-n*F+m*E)*W;a[14]=(A*
l-z*w-y*b)*W;a[15]=(q*w-u*l+v*b)*W;return a};p.SIMD.invert=function(a,d){var g=SIMD.Float32x4.load(d,0);var n=SIMD.Float32x4.load(d,4);var m=SIMD.Float32x4.load(d,8);var f=SIMD.Float32x4.load(d,12);var h=SIMD.Float32x4.shuffle(g,n,0,1,4,5);var k=SIMD.Float32x4.shuffle(m,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,h,1,3,5,7);h=SIMD.Float32x4.shuffle(g,n,2,3,6,7);var r=SIMD.Float32x4.shuffle(m,f,2,3,6,7);var q=SIMD.Float32x4.shuffle(h,r,0,2,4,6);r=SIMD.Float32x4.shuffle(r,
h,1,3,5,7);h=SIMD.Float32x4.mul(q,r);h=SIMD.Float32x4.swizzle(h,1,0,3,2);g=SIMD.Float32x4.mul(k,h);n=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,h),g);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);h=SIMD.Float32x4.mul(k,q);h=SIMD.Float32x4.swizzle(h,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,h),g);f=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(r,
h));f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),r);h=SIMD.Float32x4.swizzle(h,1,0,3,2);q=SIMD.Float32x4.swizzle(q,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,h),g);m=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(q,h));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);h=SIMD.Float32x4.mul(e,k);h=SIMD.Float32x4.swizzle(h,
1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,h),m);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,h),f);h=SIMD.Float32x4.swizzle(h,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,h),m);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(q,h));h=SIMD.Float32x4.mul(e,r);h=SIMD.Float32x4.swizzle(h,1,0,3,2);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(q,h));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,h),m);h=SIMD.Float32x4.swizzle(h,2,3,0,1);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,h),n);m=SIMD.Float32x4.sub(m,
SIMD.Float32x4.mul(k,h));h=SIMD.Float32x4.mul(e,q);h=SIMD.Float32x4.swizzle(h,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,h),n);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(k,h));h=SIMD.Float32x4.swizzle(h,2,3,0,1);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(r,h));f=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,h),f);e=SIMD.Float32x4.mul(e,g);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,2,3,0,1),e);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,1,0,3,2),e);h=SIMD.Float32x4.reciprocalApproximation(e);
e=SIMD.Float32x4.sub(SIMD.Float32x4.add(h,h),SIMD.Float32x4.mul(e,SIMD.Float32x4.mul(h,h)));e=SIMD.Float32x4.swizzle(e,0,0,0,0);if(!e)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(e,g));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,n));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(e,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(e,f));return a};p.invert=B.USE_SIMD?p.SIMD.invert:p.scalar.invert;p.scalar.adjoint=function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=d[6],r=d[7],q=d[8],
u=d[9],v=d[10],x=d[11],z=d[12],A=d[13],y=d[14],c=d[15];a[0]=k*(v*c-x*y)-u*(e*c-r*y)+A*(e*x-r*v);a[1]=-(n*(v*c-x*y)-u*(m*c-f*y)+A*(m*x-f*v));a[2]=n*(e*c-r*y)-k*(m*c-f*y)+A*(m*r-f*e);a[3]=-(n*(e*x-r*v)-k*(m*x-f*v)+u*(m*r-f*e));a[4]=-(h*(v*c-x*y)-q*(e*c-r*y)+z*(e*x-r*v));a[5]=g*(v*c-x*y)-q*(m*c-f*y)+z*(m*x-f*v);a[6]=-(g*(e*c-r*y)-h*(m*c-f*y)+z*(m*r-f*e));a[7]=g*(e*x-r*v)-h*(m*x-f*v)+q*(m*r-f*e);a[8]=h*(u*c-x*A)-q*(k*c-r*A)+z*(k*x-r*u);a[9]=-(g*(u*c-x*A)-q*(n*c-f*A)+z*(n*x-f*u));a[10]=g*(k*c-r*A)-h*(n*
c-f*A)+z*(n*r-f*k);a[11]=-(g*(k*x-r*u)-h*(n*x-f*u)+q*(n*r-f*k));a[12]=-(h*(u*y-v*A)-q*(k*y-e*A)+z*(k*v-e*u));a[13]=g*(u*y-v*A)-q*(n*y-m*A)+z*(n*v-m*u);a[14]=-(g*(k*y-e*A)-h*(n*y-m*A)+z*(n*e-m*k));a[15]=g*(k*v-e*u)-h*(n*v-m*u)+q*(n*e-m*k);return a};p.SIMD.adjoint=function(a,d){var g=SIMD.Float32x4.load(d,0);var n=SIMD.Float32x4.load(d,4);var m=SIMD.Float32x4.load(d,8);var f=SIMD.Float32x4.load(d,12);var h=SIMD.Float32x4.shuffle(g,n,0,1,4,5);var k=SIMD.Float32x4.shuffle(m,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,
k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,h,1,3,5,7);h=SIMD.Float32x4.shuffle(g,n,2,3,6,7);n=SIMD.Float32x4.shuffle(m,f,2,3,6,7);g=SIMD.Float32x4.shuffle(h,n,0,2,4,6);n=SIMD.Float32x4.shuffle(n,h,1,3,5,7);h=SIMD.Float32x4.mul(g,n);h=SIMD.Float32x4.swizzle(h,1,0,3,2);m=SIMD.Float32x4.mul(k,h);f=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,h),m);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);h=SIMD.Float32x4.mul(k,
g);h=SIMD.Float32x4.swizzle(h,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,h),m);var r=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(n,h));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),n);h=SIMD.Float32x4.swizzle(h,1,0,3,2);g=SIMD.Float32x4.swizzle(g,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,h),m);var q=SIMD.Float32x4.mul(e,h);h=SIMD.Float32x4.swizzle(h,
2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(g,h));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,h),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);h=SIMD.Float32x4.mul(e,k);h=SIMD.Float32x4.swizzle(h,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,h),q);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,h),r);h=SIMD.Float32x4.swizzle(h,2,3,0,1);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,h),q);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(g,h));h=SIMD.Float32x4.mul(e,n);h=SIMD.Float32x4.swizzle(h,1,0,3,2);f=SIMD.Float32x4.sub(f,
SIMD.Float32x4.mul(g,h));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,h),q);h=SIMD.Float32x4.swizzle(h,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,h),f);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(k,h));h=SIMD.Float32x4.mul(e,g);h=SIMD.Float32x4.swizzle(h,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,h),f);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(k,h));h=SIMD.Float32x4.swizzle(h,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(n,h));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,h),r);SIMD.Float32x4.store(a,
0,m);SIMD.Float32x4.store(a,4,f);SIMD.Float32x4.store(a,8,q);SIMD.Float32x4.store(a,12,r);return a};p.adjoint=B.USE_SIMD?p.SIMD.adjoint:p.scalar.adjoint;p.determinant=function(a){var d=a[0],g=a[1],n=a[2],m=a[3],f=a[4],h=a[5],k=a[6],e=a[7],r=a[8],q=a[9],u=a[10],v=a[11],x=a[12],z=a[13],A=a[14];a=a[15];return(d*h-g*f)*(u*a-v*A)-(d*k-n*f)*(q*a-v*z)+(d*e-m*f)*(q*A-u*z)+(g*k-n*h)*(r*a-v*x)-(g*e-m*h)*(r*A-u*x)+(n*e-m*k)*(r*z-q*x)};p.SIMD.multiply=function(a,d,g){var n=SIMD.Float32x4.load(d,0),m=SIMD.Float32x4.load(d,
4),f=SIMD.Float32x4.load(d,8);d=SIMD.Float32x4.load(d,12);var h=SIMD.Float32x4.load(g,0);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),d))));SIMD.Float32x4.store(a,0,h);h=SIMD.Float32x4.load(g,4);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,
0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),d))));SIMD.Float32x4.store(a,4,h);h=SIMD.Float32x4.load(g,8);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,
3,3,3,3),d))));SIMD.Float32x4.store(a,8,h);g=SIMD.Float32x4.load(g,12);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),d))));SIMD.Float32x4.store(a,12,n);return a};p.scalar.multiply=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4],e=d[5],r=d[6],q=d[7],u=d[8],v=d[9],
x=d[10],z=d[11],A=d[12],y=d[13],c=d[14];d=d[15];var b=g[0],l=g[1],t=g[2],w=g[3];a[0]=b*n+l*k+t*u+w*A;a[1]=b*m+l*e+t*v+w*y;a[2]=b*f+l*r+t*x+w*c;a[3]=b*h+l*q+t*z+w*d;b=g[4];l=g[5];t=g[6];w=g[7];a[4]=b*n+l*k+t*u+w*A;a[5]=b*m+l*e+t*v+w*y;a[6]=b*f+l*r+t*x+w*c;a[7]=b*h+l*q+t*z+w*d;b=g[8];l=g[9];t=g[10];w=g[11];a[8]=b*n+l*k+t*u+w*A;a[9]=b*m+l*e+t*v+w*y;a[10]=b*f+l*r+t*x+w*c;a[11]=b*h+l*q+t*z+w*d;b=g[12];l=g[13];t=g[14];w=g[15];a[12]=b*n+l*k+t*u+w*A;a[13]=b*m+l*e+t*v+w*y;a[14]=b*f+l*r+t*x+w*c;a[15]=b*h+l*
q+t*z+w*d;return a};p.multiply=B.USE_SIMD?p.SIMD.multiply:p.scalar.multiply;p.mul=p.multiply;p.scalar.translate=function(a,d,g){var n=g[0],m=g[1];g=g[2];if(d===a)a[12]=d[0]*n+d[4]*m+d[8]*g+d[12],a[13]=d[1]*n+d[5]*m+d[9]*g+d[13],a[14]=d[2]*n+d[6]*m+d[10]*g+d[14],a[15]=d[3]*n+d[7]*m+d[11]*g+d[15];else{var f=d[0];var h=d[1];var k=d[2];var e=d[3];var r=d[4];var q=d[5];var u=d[6];var v=d[7];var x=d[8];var z=d[9];var A=d[10];var y=d[11];a[0]=f;a[1]=h;a[2]=k;a[3]=e;a[4]=r;a[5]=q;a[6]=u;a[7]=v;a[8]=x;a[9]=
z;a[10]=A;a[11]=y;a[12]=f*n+r*m+x*g+d[12];a[13]=h*n+q*m+z*g+d[13];a[14]=k*n+u*m+A*g+d[14];a[15]=e*n+v*m+y*g+d[15]}return a};p.SIMD.translate=function(a,d,g){var n=SIMD.Float32x4.load(d,0),m=SIMD.Float32x4.load(d,4),f=SIMD.Float32x4.load(d,8),h=SIMD.Float32x4.load(d,12);g=SIMD.Float32x4(g[0],g[1],g[2],0);d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11]);n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(g,0,0,0,0));m=SIMD.Float32x4.mul(m,
SIMD.Float32x4.swizzle(g,1,1,1,1));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2));d=SIMD.Float32x4.add(n,SIMD.Float32x4.add(m,SIMD.Float32x4.add(f,h)));SIMD.Float32x4.store(a,12,d);return a};p.translate=B.USE_SIMD?p.SIMD.translate:p.scalar.translate;p.scalar.scale=function(a,d,g){var n=g[0],m=g[1];g=g[2];a[0]=d[0]*n;a[1]=d[1]*n;a[2]=d[2]*n;a[3]=d[3]*n;a[4]=d[4]*m;a[5]=d[5]*m;a[6]=d[6]*m;a[7]=d[7]*m;a[8]=d[8]*g;a[9]=d[9]*g;a[10]=d[10]*g;a[11]=d[11]*g;a[12]=d[12];a[13]=d[13];a[14]=d[14];
a[15]=d[15];return a};p.SIMD.scale=function(a,d,g){g=SIMD.Float32x4(g[0],g[1],g[2],0);var n=SIMD.Float32x4.load(d,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(g,0,0,0,0)));n=SIMD.Float32x4.load(d,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(g,1,1,1,1)));n=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(g,2,2,2,2)));a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a};p.scale=B.USE_SIMD?p.SIMD.scale:
p.scalar.scale;p.rotate=function(a,d,g,n){var m=n[0],f=n[1];n=n[2];var h=Math.sqrt(m*m+f*f+n*n);if(Math.abs(h)<B.EPSILON)return null;h=1/h;m*=h;f*=h;n*=h;var k=Math.sin(g);var e=Math.cos(g);var r=1-e;g=d[0];h=d[1];var q=d[2];var u=d[3];var v=d[4];var x=d[5];var z=d[6];var A=d[7];var y=d[8];var c=d[9];var b=d[10];var l=d[11];var t=m*m*r+e;var w=f*m*r+n*k;var C=n*m*r-f*k;var D=m*f*r-n*k;var E=f*f*r+e;var F=n*f*r+m*k;var G=m*n*r+f*k;m=f*n*r-m*k;f=n*n*r+e;a[0]=g*t+v*w+y*C;a[1]=h*t+x*w+c*C;a[2]=q*t+z*
w+b*C;a[3]=u*t+A*w+l*C;a[4]=g*D+v*E+y*F;a[5]=h*D+x*E+c*F;a[6]=q*D+z*E+b*F;a[7]=u*D+A*E+l*F;a[8]=g*G+v*m+y*f;a[9]=h*G+x*m+c*f;a[10]=q*G+z*m+b*f;a[11]=u*G+A*m+l*f;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a};p.scalar.rotateX=function(a,d,g){var n=Math.sin(g);g=Math.cos(g);var m=d[4],f=d[5],h=d[6],k=d[7],e=d[8],r=d[9],q=d[10],u=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=m*g+e*n;a[5]=f*g+r*n;a[6]=h*g+q*n;a[7]=k*g+u*
n;a[8]=e*g-m*n;a[9]=r*g-f*n;a[10]=q*g-h*n;a[11]=u*g-k*n;return a};p.SIMD.rotateX=function(a,d,g){var n=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);var m=SIMD.Float32x4.load(d,4);d=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,g),SIMD.Float32x4.mul(d,n)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),SIMD.Float32x4.mul(m,
n)));return a};p.rotateX=B.USE_SIMD?p.SIMD.rotateX:p.scalar.rotateX;p.scalar.rotateY=function(a,d,g){var n=Math.sin(g);g=Math.cos(g);var m=d[0],f=d[1],h=d[2],k=d[3],e=d[8],r=d[9],q=d[10],u=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=m*g-e*n;a[1]=f*g-r*n;a[2]=h*g-q*n;a[3]=k*g-u*n;a[8]=m*n+e*g;a[9]=f*n+r*g;a[10]=h*n+q*g;a[11]=k*n+u*g;return a};p.SIMD.rotateY=function(a,d,g){var n=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));
d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);var m=SIMD.Float32x4.load(d,0);d=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,g),SIMD.Float32x4.mul(d,n)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,n),SIMD.Float32x4.mul(d,g)));return a};p.rotateY=B.USE_SIMD?p.SIMD.rotateY:p.scalar.rotateY;p.scalar.rotateZ=function(a,d,g){var n=Math.sin(g);g=Math.cos(g);var m=d[0],f=d[1],h=d[2],k=d[3],
e=d[4],r=d[5],q=d[6],u=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=m*g+e*n;a[1]=f*g+r*n;a[2]=h*g+q*n;a[3]=k*g+u*n;a[4]=e*g-m*n;a[5]=r*g-f*n;a[6]=q*g-h*n;a[7]=u*g-k*n;return a};p.SIMD.rotateZ=function(a,d,g){var n=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);var m=SIMD.Float32x4.load(d,0);d=SIMD.Float32x4.load(d,
4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,g),SIMD.Float32x4.mul(d,n)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),SIMD.Float32x4.mul(m,n)));return a};p.rotateZ=B.USE_SIMD?p.SIMD.rotateZ:p.scalar.rotateZ;p.fromTranslation=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};p.fromScaling=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d[1];a[6]=
0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};p.fromRotation=function(a,d,g){var n=g[0],m=g[1];g=g[2];var f=Math.sqrt(n*n+m*m+g*g);if(Math.abs(f)<B.EPSILON)return null;f=1/f;n*=f;m*=f;g*=f;f=Math.sin(d);d=Math.cos(d);var h=1-d;a[0]=n*n*h+d;a[1]=m*n*h+g*f;a[2]=g*n*h-m*f;a[3]=0;a[4]=n*m*h-g*f;a[5]=m*m*h+d;a[6]=g*m*h+n*f;a[7]=0;a[8]=n*g*h+m*f;a[9]=m*g*h-n*f;a[10]=g*g*h+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};p.fromXRotation=function(a,d){var g=Math.sin(d),
n=Math.cos(d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};p.fromYRotation=function(a,d){var g=Math.sin(d),n=Math.cos(d);a[0]=n;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};p.fromZRotation=function(a,d){var g=Math.sin(d),n=Math.cos(d);a[0]=n;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=n;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a};p.fromRotationTranslation=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=n+n,e=m+m,r=f+f;d=n*k;var q=n*e;n*=r;var u=m*e;m*=r;f*=r;k*=h;e*=h;h*=r;a[0]=1-(u+f);a[1]=q+h;a[2]=n-e;a[3]=0;a[4]=q-h;a[5]=1-(d+f);a[6]=m+k;a[7]=0;a[8]=n+e;a[9]=m-k;a[10]=1-(d+u);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};p.getTranslation=function(a,d){a[0]=d[12];a[1]=d[13];a[2]=d[14];return a};p.getRotation=function(a,d){var g=d[0]+d[5]+d[10],n=0;0<g?(n=2*Math.sqrt(g+1),a[3]=.25*n,a[0]=
(d[6]-d[9])/n,a[1]=(d[8]-d[2])/n,a[2]=(d[1]-d[4])/n):d[0]>d[5]&d[0]>d[10]?(n=2*Math.sqrt(1+d[0]-d[5]-d[10]),a[3]=(d[6]-d[9])/n,a[0]=.25*n,a[1]=(d[1]+d[4])/n,a[2]=(d[8]+d[2])/n):d[5]>d[10]?(n=2*Math.sqrt(1+d[5]-d[0]-d[10]),a[3]=(d[8]-d[2])/n,a[0]=(d[1]+d[4])/n,a[1]=.25*n,a[2]=(d[6]+d[9])/n):(n=2*Math.sqrt(1+d[10]-d[0]-d[5]),a[3]=(d[1]-d[4])/n,a[0]=(d[8]+d[2])/n,a[1]=(d[6]+d[9])/n,a[2]=.25*n);return a};p.fromRotationTranslationScale=function(a,d,g,n){var m=d[0],f=d[1],h=d[2],k=d[3],e=m+m,r=f+f,q=h+
h;d=m*e;var u=m*r;m*=q;var v=f*r;f*=q;h*=q;e*=k;r*=k;k*=q;q=n[0];var x=n[1];n=n[2];a[0]=(1-(v+h))*q;a[1]=(u+k)*q;a[2]=(m-r)*q;a[3]=0;a[4]=(u-k)*x;a[5]=(1-(d+h))*x;a[6]=(f+e)*x;a[7]=0;a[8]=(m+r)*n;a[9]=(f-e)*n;a[10]=(1-(d+v))*n;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};p.fromRotationTranslationScaleOrigin=function(a,d,g,n,m){var f=d[0],h=d[1],k=d[2],e=d[3],r=f+f,q=h+h,u=k+k;d=f*r;var v=f*q;f*=u;var x=h*q;h*=u;k*=u;r*=e;q*=e;e*=u;u=n[0];var z=n[1];n=n[2];var A=m[0],y=m[1];m=m[2];a[0]=
(1-(x+k))*u;a[1]=(v+e)*u;a[2]=(f-q)*u;a[3]=0;a[4]=(v-e)*z;a[5]=(1-(d+k))*z;a[6]=(h+r)*z;a[7]=0;a[8]=(f+q)*n;a[9]=(h-r)*n;a[10]=(1-(d+x))*n;a[11]=0;a[12]=g[0]+A-(a[0]*A+a[4]*y+a[8]*m);a[13]=g[1]+y-(a[1]*A+a[5]*y+a[9]*m);a[14]=g[2]+m-(a[2]*A+a[6]*y+a[10]*m);a[15]=1;return a};p.fromQuat=function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=g+g,k=n+n,e=m+m;g*=h;var r=n*h;n*=k;var q=m*h,u=m*k;m*=e;h*=f;k*=f;f*=e;a[0]=1-n-m;a[1]=r+f;a[2]=q-k;a[3]=0;a[4]=r-f;a[5]=1-g-m;a[6]=u+h;a[7]=0;a[8]=q+k;a[9]=u-h;a[10]=
1-g-n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};p.frustum=function(a,d,g,n,m,f,h){var k=1/(g-d),e=1/(m-n),r=1/(f-h);a[0]=2*f*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*e;a[6]=0;a[7]=0;a[8]=(g+d)*k;a[9]=(m+n)*e;a[10]=(h+f)*r;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*f*2*r;a[15]=0;return a};p.perspective=function(a,d,g,n,m){d=1/Math.tan(d/2);var f=1/(n-m);a[0]=d/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+n)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*n*f;a[15]=0;return a};p.perspectiveFromFieldOfView=
function(a,d,g,n){var m=Math.tan(d.upDegrees*Math.PI/180),f=Math.tan(d.downDegrees*Math.PI/180),h=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var k=2/(h+d),e=2/(m+f);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=-((h-d)*k*.5);a[9]=(m-f)*e*.5;a[10]=n/(g-n);a[11]=-1;a[12]=0;a[13]=0;a[14]=n*g/(g-n);a[15]=0;return a};p.ortho=function(a,d,g,n,m,f,h){var k=1/(d-g),e=1/(n-m),r=1/(f-h);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*e;a[6]=0;a[7]=0;a[8]=0;a[9]=
0;a[10]=2*r;a[11]=0;a[12]=(d+g)*k;a[13]=(m+n)*e;a[14]=(h+f)*r;a[15]=1;return a};p.lookAt=function(a,d,g,n){var m=d[0],f=d[1];d=d[2];var h=n[0];var k=n[1];var e=n[2];var r=g[0];n=g[1];var q=g[2];if(Math.abs(m-r)<B.EPSILON&&Math.abs(f-n)<B.EPSILON&&Math.abs(d-q)<B.EPSILON)return p.identity(a);g=m-r;n=f-n;r=d-q;var u=1/Math.sqrt(g*g+n*n+r*r);g*=u;n*=u;r*=u;q=k*r-e*n;e=e*g-h*r;h=h*n-k*g;(u=Math.sqrt(q*q+e*e+h*h))?(u=1/u,q*=u,e*=u,h*=u):h=e=q=0;k=n*h-r*e;var v=r*q-g*h;var x=g*e-n*q;(u=Math.sqrt(k*k+v*
v+x*x))?(u=1/u,k*=u,v*=u,x*=u):x=v=k=0;a[0]=q;a[1]=k;a[2]=g;a[3]=0;a[4]=e;a[5]=v;a[6]=n;a[7]=0;a[8]=h;a[9]=x;a[10]=r;a[11]=0;a[12]=-(q*m+e*f+h*d);a[13]=-(k*m+v*f+x*d);a[14]=-(g*m+n*f+r*d);a[15]=1;return a};p.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};p.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],
2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};p.add=function(a,d,g){a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];a[3]=d[3]+g[3];a[4]=d[4]+g[4];a[5]=d[5]+g[5];a[6]=d[6]+g[6];a[7]=d[7]+g[7];a[8]=d[8]+g[8];a[9]=d[9]+g[9];a[10]=d[10]+g[10];a[11]=d[11]+g[11];a[12]=d[12]+g[12];a[13]=d[13]+g[13];a[14]=d[14]+g[14];a[15]=d[15]+g[15];return a};
p.subtract=function(a,d,g){a[0]=d[0]-g[0];a[1]=d[1]-g[1];a[2]=d[2]-g[2];a[3]=d[3]-g[3];a[4]=d[4]-g[4];a[5]=d[5]-g[5];a[6]=d[6]-g[6];a[7]=d[7]-g[7];a[8]=d[8]-g[8];a[9]=d[9]-g[9];a[10]=d[10]-g[10];a[11]=d[11]-g[11];a[12]=d[12]-g[12];a[13]=d[13]-g[13];a[14]=d[14]-g[14];a[15]=d[15]-g[15];return a};p.sub=p.subtract;p.multiplyScalar=function(a,d,g){a[0]=d[0]*g;a[1]=d[1]*g;a[2]=d[2]*g;a[3]=d[3]*g;a[4]=d[4]*g;a[5]=d[5]*g;a[6]=d[6]*g;a[7]=d[7]*g;a[8]=d[8]*g;a[9]=d[9]*g;a[10]=d[10]*g;a[11]=d[11]*g;a[12]=d[12]*
g;a[13]=d[13]*g;a[14]=d[14]*g;a[15]=d[15]*g;return a};p.multiplyScalarAndAdd=function(a,d,g,n){a[0]=d[0]+g[0]*n;a[1]=d[1]+g[1]*n;a[2]=d[2]+g[2]*n;a[3]=d[3]+g[3]*n;a[4]=d[4]+g[4]*n;a[5]=d[5]+g[5]*n;a[6]=d[6]+g[6]*n;a[7]=d[7]+g[7]*n;a[8]=d[8]+g[8]*n;a[9]=d[9]+g[9]*n;a[10]=d[10]+g[10]*n;a[11]=d[11]+g[11]*n;a[12]=d[12]+g[12]*n;a[13]=d[13]+g[13]*n;a[14]=d[14]+g[14]*n;a[15]=d[15]+g[15]*n;return a};p.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===
d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]&&a[9]===d[9]&&a[10]===d[10]&&a[11]===d[11]&&a[12]===d[12]&&a[13]===d[13]&&a[14]===d[14]&&a[15]===d[15]};p.equals=function(a,d){var g=a[0],n=a[1],m=a[2],f=a[3],h=a[4],k=a[5],e=a[6],r=a[7],q=a[8],u=a[9],v=a[10],x=a[11],z=a[12],A=a[13],y=a[14],c=a[15],b=d[0],l=d[1],t=d[2],w=d[3],C=d[4],D=d[5],E=d[6],F=d[7],G=d[8],H=d[9],M=d[10],X=d[11],W=d[12],T=d[13],K=d[14],O=d[15];return Math.abs(g-b)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(b))&&Math.abs(n-l)<=B.EPSILON*
Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(m-t)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(f-w)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-C)<=B.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(k-D)<=B.EPSILON*Math.max(1,Math.abs(k),Math.abs(D))&&Math.abs(e-E)<=B.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(r-F)<=B.EPSILON*Math.max(1,Math.abs(r),Math.abs(F))&&Math.abs(q-G)<=B.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(u-H)<=B.EPSILON*Math.max(1,
Math.abs(u),Math.abs(H))&&Math.abs(v-M)<=B.EPSILON*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(x-X)<=B.EPSILON*Math.max(1,Math.abs(x),Math.abs(X))&&Math.abs(z-W)<=B.EPSILON*Math.max(1,Math.abs(z),Math.abs(W))&&Math.abs(A-T)<=B.EPSILON*Math.max(1,Math.abs(A),Math.abs(T))&&Math.abs(y-K)<=B.EPSILON*Math.max(1,Math.abs(y),Math.abs(K))&&Math.abs(c-O)<=B.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))};return p})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var B=
{EPSILON:1E-6};B.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;B.RANDOM=Math.random;B.ENABLE_SIMD=!1;B.SIMD_AVAILABLE=B.ARRAY_TYPE===Float32Array&&"SIMD"in this;B.USE_SIMD=B.ENABLE_SIMD&&B.SIMD_AVAILABLE;B.setMatrixArrayType=function(a){B.ARRAY_TYPE=a};var p=Math.PI/180;B.toRadian=function(a){return a*p};B.equals=function(a,d){return Math.abs(a-d)<=B.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))};return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require",
"exports"],function(B,p){function a(g,n){g%=n;return 0<=g?g:g+n}Object.defineProperty(p,"__esModule",{value:!0});p.C_INFINITY=Number.POSITIVE_INFINITY;p.C_PI=Math.PI;p.C_2PI=2*p.C_PI;p.C_PI_BY_2=p.C_PI/2;p.C_RAD_TO_256=128/p.C_PI;p.C_256_TO_RAD=p.C_PI/128;p.C_DEG_TO_256=256/360;p.C_DEG_TO_RAD=p.C_PI/180;p.C_SQRT2=1.414213562;p.C_SQRT2_INV=1/p.C_SQRT2;var d=1/Math.LN2;p.positiveMod=a;p.radToByte=function(g){return a(g*p.C_RAD_TO_256,256)};p.degToByte=function(g){return a(g*p.C_DEG_TO_256,256)};p.log2=
function(g){return Math.log(g)*d};p.sqr=function(g){return g*g};p.clamp=function(g,n,m){return Math.min(Math.max(g,n),m)};p.interpolate=function(g,n,m){return g*(1-m)+n*m};p.between=function(g,n,m){return g>=n&&g<=m||g>=m&&g<=n}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(B,p,a,d,g,n,m,f,h,k){return function(){function e(){this._programRep=new Map;this.isInitialize=!1}e.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(r){return r.dispose()}),this._programRep.clear())};e.prototype.initialize=function(r){if(!this.isInitialize){var q=new k("label",["labelVS","labelFS"],[],m,r);q.addDefine("ID","ID",[!0,!0],"ID");q.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");q.addDefine("SDF","SDF",[!1,!1],"SDF");q.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");q.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");q.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");q.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");q.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");q.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");q.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");q.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");q.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");q.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var u=new k("text",["textVS","textFS"],[],h,r);u.addDefine("ID","ID",[!0,!0],"ID");u.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");u.addDefine("SDF","SDF",[!1,!1],"SDF");u.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");u.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");u.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");u.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");u.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");u.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");u.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");u.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");u.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");u.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var v=new k("icon",["iconVS","iconFS"],
[],n,r);v.addDefine("ID","ID",[!0,!0],"ID");v.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");v.addDefine("SDF","SDF",[!0,!0],"SDF");v.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");v.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");v.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");v.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");v.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");v.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");v.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");v.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");v.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");v.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var x=new k("fill",["fillVS","fillFS"],[],g,r);x.addDefine("ID","ID",[!0,!0],"ID");x.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");x.addDefine("SDF","SDF",
[!1,!1],"SDF");x.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");x.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");x.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");x.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");x.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");x.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");x.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");x.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");x.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");x.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");r=new k("line",["lineVS","lineFS"],[],f,r);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");r.addDefine("SDF","SDF",[!0,!0],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=q;this._textShaderVariations=u;this._fillShaderVariations=x;this._iconShaderVariations=v;this._lineShaderVariations=r;this.isInitialize=!0}};e.prototype.getProgram=function(r,q,u){r|=q===a.WGLDrawPhase.HITTEST?8:0;r|=q===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[r])return this._programRep[r];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
q=d.getMaterialVariations(r);switch(q.geometryType){case a.WGLGeometryType.MARKER:var v=this._iconShaderVariations.getProgram(q.variations,null,null,u);break;case a.WGLGeometryType.TEXT:v=this._textShaderVariations.getProgram(q.variations,null,null,u);break;case a.WGLGeometryType.LABEL:v=this._labelShaderVariations.getProgram(q.variations,null,null,u);break;case a.WGLGeometryType.FILL:v=this._fillShaderVariations.getProgram(q.variations,null,null,u);break;case a.WGLGeometryType.LINE:v=this._lineShaderVariations.getProgram(q.variations,
null,null,u)}v&&(this._programRep[r]=v);return v};return e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(B,p,a,d,g){function n(f){var h=[];h[0]=f.sdf?!0:!1;h[1]=f.vvSizeMinMaxValue?!0:!1;h[2]=f.vvSizeScaleStops?!0:!1;h[3]=f.vvSizeFieldStops?!0:!1;h[4]=f.vvSizeUnitValue?!0:!1;h[5]=f.vvColor?!0:!1;h[6]=f.vvRotation?!0:!1;h[7]=f.vvOpacity?!0:!1;h[8]=f.visibility?!0:!1;h[9]=f.pattern?
!0:!1;h[10]=f.heatmap?!0:!1;return h.reduce(function(k,e,r){e&&(k|=1<<r+2);return k},0)}function m(f){if(f.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var h=n(f)<<3;return f.geometryType+h}Object.defineProperty(p,"__esModule",{value:!0});p.createTextMaterialInfo=function(f,h,k){var e=new d["default"],r=new g;r.geometryType=k;r.sdf=!0;r.pattern=!1;r.visibility=!1;r.heatmap=!1;e.texBindingInfo.push(new d.TexBindingInfo(2,f.page,"u_texture"));0===h?r.vvOpacity=r.vvSizeMinMaxValue=r.vvSizeScaleStops=
r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(h&a.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(h&a.WGLVVFlag.SIZE_MINMAX_VALUE),r.vvSizeScaleStops=0!==(h&a.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(h&a.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=0!==(h&a.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(h&a.WGLVVFlag.COLOR),r.vvRotation=0!==(h&a.WGLVVFlag.ROTATION));e.materialKey=m(r);e.materialKeyInfo=r;return e};p.createMaterialInfo=function(f,h,k){var e=new d["default"],
r=new g;r.geometryType=h;f?(f=f.spriteMosaicItem,r.sdf=f.sdf,r.pattern=!0,e.texBindingInfo.push(new d.TexBindingInfo(1,f.page,"u_texture"))):(r.sdf=!1,r.pattern=!1);0===k?r.vvOpacity=r.vvSizeMinMaxValue=r.vvSizeScaleStops=r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(k&a.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(k&a.WGLVVFlag.SIZE_MINMAX_VALUE),r.vvSizeScaleStops=0!==(k&a.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(k&a.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=
0!==(k&a.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(k&a.WGLVVFlag.COLOR),r.vvRotation=0!==(k&a.WGLVVFlag.ROTATION));r.visibility=!1;e.materialKey=m(r);e.materialKeyInfo=r;return e};p.getMaterialKey=m;p.getMaterialVariations=function(f){var h=f&7;f>>=3;return{geometryType:h,variations:[0!==(f&1),0!==(f&2),0!==(f&4),0!==(f&8),0!==(f&16),0!==(f&32),0!==(f&64),0!==(f&128),0!==(f&256),0!==(f&512),0!==(f&1024),0!==(f&2048),0!==(f&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",{value:!0});var f=function(){function k(e,r,q){this.unit=e;this.pageId=r;this.semantic=q}k.prototype.clone=function(){return new k(this.unit,this.pageId,this.semantic)};k.prototype.serialize=function(e){e.writeInt32(this.unit);e.writeInt32(this.pageId);return e};k.deserialize=function(e){var r=e.readInt32();e=e.readInt32();return new k(r,e,"u_texture")};return k}();p.TexBindingInfo=f;var h=function(){function k(e,r){this.name=e;this.value=
r}k.prototype.clone=function(){return new k(this.name,this.value)};k.prototype.serialize=function(e){e.writeInt32(this.value);return e};k.deserialize=function(e){e=e.readInt32();return new k("u_my_param",e)};return k}();p.MaterialParam=h;B=function(){function k(){this.texBindingInfo=[];this.materialParams=[]}k.fromSprite=function(e,r,q){var u=new k,v=new n;v.geometryType=r;e?(v.sdf=e.sdf,v.pattern=!0,u.texBindingInfo.push(new f(1,e.page,"u_texture"))):(v.sdf=!1,v.pattern=!1);0===q?v.vvOpacity=v.vvSizeMinMaxValue=
v.vvSizeScaleStops=v.vvSizeFieldStops=v.vvSizeUnitValue=v.vvColor=v.vvRotation=!1:(v.vvOpacity=0!==(q&a.WGLVVFlag.OPACITY),v.vvSizeMinMaxValue=0!==(q&a.WGLVVFlag.SIZE_MINMAX_VALUE),v.vvSizeScaleStops=0!==(q&a.WGLVVFlag.SIZE_SCALE_STOPS),v.vvSizeFieldStops=0!==(q&a.WGLVVFlag.SIZE_FIELD_STOPS),v.vvSizeUnitValue=0!==(q&a.WGLVVFlag.SIZE_UNIT_VALUE),v.vvColor=0!==(q&a.WGLVVFlag.COLOR),v.vvRotation=0!==(q&a.WGLVVFlag.ROTATION));v.visibility=!1;u.materialKey=d.getMaterialKey(v);u.materialKeyInfo=v;return u};
k.fromGlyph=function(e,r,q){var u=new k,v=new n;v.geometryType=r;v.sdf=!0;v.pattern=!1;v.visibility=!1;v.heatmap=!1;u.texBindingInfo.push(new f(2,e.page,"u_texture"));0===q?v.vvOpacity=v.vvSizeMinMaxValue=v.vvSizeScaleStops=v.vvSizeFieldStops=v.vvSizeUnitValue=v.vvColor=v.vvRotation=!1:(v.vvOpacity=0!==(q&a.WGLVVFlag.OPACITY),v.vvSizeMinMaxValue=0!==(q&a.WGLVVFlag.SIZE_MINMAX_VALUE),v.vvSizeScaleStops=0!==(q&a.WGLVVFlag.SIZE_SCALE_STOPS),v.vvSizeFieldStops=0!==(q&a.WGLVVFlag.SIZE_FIELD_STOPS),v.vvSizeUnitValue=
0!==(q&a.WGLVVFlag.SIZE_UNIT_VALUE),v.vvColor=0!==(q&a.WGLVVFlag.COLOR),v.vvRotation=0!==(q&a.WGLVVFlag.ROTATION));u.materialKey=d.getMaterialKey(v);u.materialKeyInfo=v;return u};k.prototype.copy=function(e){this.materialParams=e.materialParams.map(function(r){return r.clone()});this.texBindingInfo=e.texBindingInfo.map(function(r){return r.clone()});e.materialKeyInfo&&(this.materialKeyInfo=new n,this.materialKeyInfo.copy(e.materialKeyInfo));this.materialKey=e.materialKey};k.prototype.serialize=function(e){e.writeInt32(this.materialKey);
m.serializeList(e,this.texBindingInfo);m.serializeList(e,this.materialParams);return e};k.deserialize=function(e){var r=new k;r.materialKey=e.readInt32();r.texBindingInfo=m.deserializeList(e,f);r.materialParams=m.deserializeList(e,h);r.materialKeyInfo=new n;g(r.materialKeyInfo,r.materialKey);return r};return k}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(B,p){return function(a,d){a.geometryType=
d&7;d>>=3;a.sdf=0!==(d&4);a.vvSizeMinMaxValue=0!==(d&8);a.vvSizeScaleStops=0!==(d&16);a.vvSizeFieldStops=0!==(d&32);a.vvSizeUnitValue=0!==(d&64);a.vvColor=0!==(d&128);a.vvRotation=0!==(d&256);a.vvOpacity=0!==(d&512);a.visibility=0!==(d&1024);a.pattern=0!==(d&2048);a.heatmap=0!==(d&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(B,p){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(d){this.geometryType=d.geometryType;this.sdf=d.sdf;this.vvSizeMinMaxValue=d.vvSizeMinMaxValue;this.vvSizeScaleStops=d.vvSizeScaleStops;this.vvSizeFieldStops=d.vvSizeFieldStops;this.vvSizeUnitValue=d.vvSizeUnitValue;this.vvColor=d.vvColor;this.vvRotation=d.vvRotation;this.vvOpacity=d.vvOpacity;this.visibility=d.visibility;this.pattern=d.pattern;
this.heatmap=d.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.serializeList=function(a,d){if(null===d)a.writeInt32(0);else{a.writeInt32(d.length);for(var g=0;g<d.length;g++)d[g].serialize(a);return a}};p.deserializeList=function(a,d,g){var n=a.readInt32();n=Array(n);for(var m=0;m<n.length;m++)n[m]=d.deserialize(a,g);return n}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(B,p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(B,p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml",
"../../../../webgl/ShaderSnippets"],function(B,p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(B,p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(B,
p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(B,p,a,d,g){function n(m){return m.reduce(function(f,h,k){h&&(f|=1<<k);return f},0)}return function(){function m(f,h,k,e,r,q){"string"===typeof f?this._initParams(f,h,k,e,r,q):this._initObject({programNamePrefix:f.programNamePrefix,shaderSnippetPrefixes:f.shaderSnippetPrefixes,baseDefines:f.baseDefines,snippets:f.snippets,
rctx:f.rctx,vertexAttribLocs:f.vertexAttribLocs})}m.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(f){return f.dispose()}),this._programCache.clear())};m.prototype._initObject=function(f){this._initParams(f.programNamePrefix,f.shaderSnippetPrefixes,f.baseDefines,f.snippets,f.rctx,f.vertexAttribLocs)};m.prototype._initParams=function(f,h,k,e,r,q){this._defaultSnippets=e;this._defaultRctx=r;this._defaultVertexAttribLocs=q;this._programCache=new Map;this._variationInfo=
new Map;this._shaderSourceVariator=new d(f,h,k)};m.prototype.addDefine=function(f,h,k,e){this._shaderSourceVariator.addDefine(f,h,k,e)};m.prototype.addBinaryShaderSnippetSuffix=function(f,h,k){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(f,h,k)};m.prototype.addNaryShaderSnippetSuffix=function(f,h){this._shaderSourceVariator.addNaryShaderSnippetSuffix(f,h)};m.prototype.getProgram=function(f,h,k,e){h=h||this._defaultSnippets;k=k||this._defaultRctx;e=e||this._defaultVertexAttribLocs;if(!h)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!k)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!e)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var r=n(f);if(this._programCache.has(r))return this._programCache.get(r);f=this._shaderSourceVariator.getShaderVariation(f);var q=f.shaderSnippetNames[0];var u=h[q];g.assert(null!=u,"shader snippet '"+q+"' does not exist");q=f.shaderSnippetNames[1];h=h[q];g.assert(null!=h,"shader snippet '"+
q+"' does not exist");k=new a(k,u,h,e,f.defines);this._programCache.set(r,k);return k};m.prototype.getProgramByKey=function(f){if(this._programCache.has(f))return this._programCache.get(f);if(!this._variationInfo[f])return null;var h=this._variationInfo[f],k=this._defaultSnippets,e=this._defaultRctx,r=this._defaultVertexAttribLocs;var q=h.shaderSnippetNames[0];var u=k[q];g.assert(null!=u,"shader snippet '"+q+"' does not exist");q=h.shaderSnippetNames[1];k=k[q];g.assert(null!=k,"shader snippet '"+
q+"' does not exist");h=new a(e,u,k,r,h.defines);this._programCache.set(f,h);return h};m.prototype.getProgramInfo=function(f){var h=this._shaderSourceVariator.getShaderVariation(f);f=n(f);this._variationInfo[f]||(this._variationInfo[f]=h);return{name:h.programName,key:f}};return m}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(B,p,a,d){return function(){function g(n,m,f){if("string"===typeof n)var h=n;else h=
n.programNamePrefix,m=n.shaderSnippetPrefixes,f=n.baseDefines;d.assert(m,"you must specify shader snippet prefixes");d.assert(2===m.length,"you must specify shader snippet prefixes for vertex and fragment shaders");f&&0!==f.length||(f=[]);this.programNamePrefix=h;this.shaderSnippetPrefixes=m;this.baseDefines=f;this.variables=[];this.sealed=!1}g.prototype.addDefine=function(n,m,f,h){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(n,"you must specify a program name suffix");
this.variables.push({programNameSuffixes:["",n],shaderNameSuffixes:h||n,defineStr:m,affectsShaderTypes:f||[!0,!0]})};g.prototype.addBinaryShaderSnippetSuffix=function(n,m,f){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(n,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",n],shaderSnippetSuffixes:["",m],affectsShaderTypes:f||[!0,!0]})};g.prototype.addNaryShaderSnippetSuffix=function(n,m){d.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");var f=n.map(function(h){d.assert(null!=h.value,"value must always be specified");return h.value});this.variables.push({values:f,programNameSuffixes:n.map(function(h,k){return null!=h.programNameSuffix?h.programNameSuffix:f[k]}),shaderSnippetSuffixes:n.map(function(h,k){return null!=h.shaderSnippetSuffix?h.shaderSnippetSuffix:f[k]}),affectsShaderTypes:m||[!0,!0]})};g.prototype.getShaderVariation=function(n){d.assert(n.length===
this.variables.length,"you must specify a value for each variable");for(var m=this.programNamePrefix,f=a.clone(this.shaderSnippetPrefixes),h=a.clone(this.shaderSnippetPrefixes),k=a.clone(this.baseDefines),e=0;e<this.variables.length;e++){var r=this.variables[e],q=n[e],u=void 0;r.values?(u=r.values.indexOf(q),d.assert(0<=u,"invalid value "+q+" for variable "+e)):u=q?1:0;m+=r.programNameSuffixes[u];for(q=0;2>q;q++)r.affectsShaderTypes[q]&&(r.shaderSnippetSuffixes&&(f[q]+=r.shaderSnippetSuffixes[u],
h[q]+=r.shaderSnippetSuffixes[u]),r.defineStr&&u&&(k.push(r.defineStr),h[q]+=r.shaderNameSuffixes))}return{programName:m,shaderSnippetNames:f,shaderNames:h,defines:k}};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(B,p,a,d,g,n,m,f,h,k){function e(t){return t.map(function(w){return w.name})}
function r(t){for(var w={},C=0;C<t.length;C++){var D=t[C];w[D.name]=D.strideInBytes}return w}function q(t,w){switch(t){case h.WGLGeometryType.MARKER:return w?p.C_ICON_VERTEX_NAMES_VV:p.C_ICON_VERTEX_NAMES;case h.WGLGeometryType.FILL:return w?p.C_FILL_VERTEX_NAMES_VV:p.C_FILL_VERTEX_NAMES;case h.WGLGeometryType.LINE:return w?p.C_LINE_VERTEX_NAMES_VV:p.C_LINE_VERTEX_NAMES;case h.WGLGeometryType.TEXT:return w?p.C_TEXT_VERTEX_NAMES_VV:p.C_TEXT_VERTEX_NAMES;case h.WGLGeometryType.LABEL:return p.C_LABEL_VERTEX_NAMES}return null}
function u(t){switch(t){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return t}function v(t){if(t=u(t.type)){switch(t){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function x(t){if(t=u(t.type)){switch(t){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}
function z(t){if(t=u(t.type)){switch(t){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function A(t){if(t=u(t.type)){switch(t){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function y(t){return t&&t.length||0}function c(t){return"string"===typeof t}Object.defineProperty(p,"__esModule",{value:!0});var b=g.getLogger("esri.views.2d.engine.webgl.Utils");p.C_HITTEST_SEARCH_SIZE=4;p.C_VBO_GEOMETRY="geometry";p.C_VBO_PERINSTANCE="per_instance";p.C_VBO_PERINSTANCE_VV=
"per_instance_vv";p.C_VBO_VISIBILITY="visibility";p.C_VBO_VISIBILITY_RANGE="visibilityRange";p.C_ICON_VERTEX_DEF=[{name:p.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];p.C_ICON_VERTEX_DEF_VV=[{name:p.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];p.C_ICON_HEATMAP=[{name:p.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];p.C_FILL_VERTEX_DEF=[{name:p.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];p.C_FILL_VERTEX_DEF_VV=[{name:p.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];p.C_LINE_VERTEX_DEF=[{name:p.C_VBO_GEOMETRY,
strideInBytes:32,divisor:0}];p.C_LINE_VERTEX_DEF_VV=[{name:p.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];p.C_TEXT_VERTEX_DEF=[{name:p.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:p.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];p.C_TEXT_VERTEX_DEF_VV=[{name:p.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:p.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];p.C_LABEL_VERTEX_DEF=[{name:p.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:p.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:p.C_VBO_VISIBILITY_RANGE,
strideInBytes:2,divisor:0}];p.C_ICON_VERTEX_NAMES=e(p.C_ICON_VERTEX_DEF);p.C_ICON_VERTEX_NAMES_VV=e(p.C_ICON_VERTEX_DEF_VV);p.C_FILL_VERTEX_NAMES=e(p.C_FILL_VERTEX_DEF);p.C_FILL_VERTEX_NAMES_VV=e(p.C_FILL_VERTEX_DEF_VV);p.C_LINE_VERTEX_NAMES=e(p.C_LINE_VERTEX_DEF);p.C_LINE_VERTEX_NAMES_VV=e(p.C_LINE_VERTEX_DEF_VV);p.C_TEXT_VERTEX_NAMES=e(p.C_TEXT_VERTEX_DEF);p.C_TEXT_VERTEX_NAMES_VV=e(p.C_TEXT_VERTEX_DEF_VV);p.C_LABEL_VERTEX_NAMES=e(p.C_LABEL_VERTEX_DEF);p.C_ICON_STRIDE_SPEC=r(p.C_ICON_VERTEX_DEF);
p.C_ICON_STRIDE_SPEC_VV=r(p.C_ICON_VERTEX_DEF_VV);p.C_ICON_STRIDE_SPEC_HEATMAP=r(p.C_ICON_HEATMAP);p.C_FILL_STRIDE_SPEC=r(p.C_FILL_VERTEX_DEF);p.C_FILL_STRIDE_SPEC_VV=r(p.C_FILL_VERTEX_DEF_VV);p.C_LINE_STRIDE_SPEC=r(p.C_LINE_VERTEX_DEF);p.C_LINE_STRIDE_SPEC_VV=r(p.C_LINE_VERTEX_DEF_VV);p.C_TEXT_STRIDE_SPEC=r(p.C_TEXT_VERTEX_DEF);p.C_TEXT_STRIDE_SPEC_VV=r(p.C_TEXT_VERTEX_DEF_VV);p.C_LABEL_STRIDE_SPEC=r(p.C_LABEL_VERTEX_DEF);p.getStrides=function(t,w,C){void 0===C&&(C=!1);switch(t){case h.WGLGeometryType.MARKER:return w?
p.C_ICON_STRIDE_SPEC_VV:C?p.C_ICON_STRIDE_SPEC_HEATMAP:p.C_ICON_STRIDE_SPEC;case h.WGLGeometryType.FILL:return w?p.C_FILL_STRIDE_SPEC_VV:p.C_FILL_STRIDE_SPEC;case h.WGLGeometryType.LINE:return w?p.C_LINE_STRIDE_SPEC_VV:p.C_LINE_STRIDE_SPEC;case h.WGLGeometryType.TEXT:return w?p.C_TEXT_STRIDE_SPEC_VV:p.C_TEXT_STRIDE_SPEC;case h.WGLGeometryType.LABEL:return p.C_LABEL_STRIDE_SPEC}return null};p.getNamedBuffers=q;p.getSymbolGeometryType=function(t){return v(t)?h.WGLGeometryType.MARKER:z(t)?h.WGLGeometryType.LINE:
x(t)?h.WGLGeometryType.FILL:A(t)?h.WGLGeometryType.TEXT:h.WGLGeometryType.UNKNOWN};p.normalizeSymbolType=u;p.isMarkerSymbol=v;p.isFillSymbol=x;p.isLineSymbol=z;p.isPictureSymbol=function(t){if(t=u(t.type))switch(t){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};p.isTextSymbol=A;p.getTextProperties=function(t){return k.TextProperties.pool.acquire(t.color?f.copyAndPremultiply(t.color):[255,255,255,255],t.haloColor?f.copyAndPremultiply(t.haloColor):[255,255,255,255],
n.pt2px(t.haloSize),n.pt2px(t.font.size),t.angle*Math.PI/180,t.xoffset/t.font.size,t.yoffset/t.font.size,"left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5,"top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5)};p.isSameUniformValue=function(t,w){return!1};p.isSameMaterialInfo=function(t,w){if(t.materialKey!==w.materialKey||y(t.texBindingInfo)!==y(w.texBindingInfo)||y(t.materialParams)!==y(w.materialParams))return!1;for(var C=t.texBindingInfo.length,D=0;D<C;++D){var E=
t.texBindingInfo[D],F=w.texBindingInfo[D];if(E.unit!==F.unit||E.pageId!==F.pageId||E.semantic!==F.semantic)return!1}C=t.materialParams.length;for(D=0;D<C;)return!1;return!0};p.serializeString=function(t,w,C){for(var D=0,E=t.length,F=0;F<E;++F)w&&(w[C+D]=t.charCodeAt(F)),++D;w&&(w[C+D]=0);++D;return D};p.deserializeString=function(t,w,C){var D=0;t.s="";for(var E=!0;E;){var F=w[C+D];++D;0!==F?t.s+=String.fromCharCode(F):E=!1}return D};p.isDefined=function(t){return null!==t&&void 0!==t};p.isNumber=
function(t){return"number"===typeof t};p.isString=c;p.isStringOrNull=function(t){return null==t||c(t)};p.lerp=function(t,w,C){return t+(w-t)*C};B=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(w,C){this._arr.push(C)};t.prototype.getKeys=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};return t}();p.KeysGetter=B;B=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(w,C){this._arr.push(w)};
t.prototype.getValues=function(w){this._arr.length=0;w&&w.forEach(this._push);return this._arr};return t}();p.ValuesGetter=B;p.getCapType=function(t){switch(t){case "butt":return h.CapType.BUTT;case "round":return h.CapType.ROUND;case "square":return h.CapType.SQUARE;default:return b.error("Cannot interpret unknown cap: "+t),h.CapType.UNKNOWN}};p.getJoinType=function(t){switch(t){case "miter":return h.JoinType.MITER;case "bevel":return h.JoinType.BEVEL;case "round":return h.JoinType.ROUND;default:return b.error("Cannot interpret unknown join: "+
t),h.JoinType.UNKNOWN}};p.getVVType=function(t){switch(t){case "opacity":return h.VVType.OPACITY;case "color":return h.VVType.COLOR;case "rotation":return h.VVType.ROTATION;case "size":return h.VVType.SIZE;default:return b.error("Cannot interpret unknown vv: "+t),null}};p.createArcadeFunction=function(t,w){var C=t.spatialReference,D=t.layer,E=m.createFunction(t.valueExpression),F=new d;return function(G,H){F.repurposeFromGraphicLikeObject(G.geometry,G.attributes,D);var M=H&&new a({viewingMode:H.viewingMode,
scale:H.scale});M=m.executeFunction(E,{vars:{$feature:F,$view:M||{}},spatialReference:C});return w?w(M):M}};p.copyMeshData=function(t,w,C,D,E,F,G){for(var H in F){var M=F[H].stride,X=F[H].data,W=C[H].data,T=M*E.vertexCount/4,K=M*t/4,O=M*E.vertexFrom/4;for(M=0;M<T;++M)W[M+K]=X[M+O]}C=E.indexCount;for(M=0;M<C;++M)D[M+w]=G[M+E.indexFrom]-E.vertexFrom+t};p.C_VBO_INFO=(l={},l[p.C_VBO_GEOMETRY]=35044,l[p.C_VBO_VISIBILITY]=35044,l[p.C_VBO_VISIBILITY_RANGE]=35048,l);p.createGeometryData=function(t,w,C){for(var D=
[],E=0;5>E;++E){for(var F={},G=0,H=q(E,t);G<H.length;G++){var M=H[G];F[M]={data:C(E,M)}}D.push({data:w(E),buffers:F})}return D};var l})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(B,p,a){return a})},"esri/arcade/Dictionary":function(){define("require exports ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry".split(" "),function(B,p,a,d,g,n){function m(h,k){void 0===k&&(k=!1);if(null===h||void 0===
h)return null;if(d.isNumber(h))return d.toNumber(h);if(d.isBoolean(h))return d.toBoolean(h);if(d.isString(h))return d.toString(h);if(d.isDate(h))return d.toDate(h);if(d.isArray(h)){for(var e=[],r=0;r<h.length;r++)e.push(m(h[r],k));return e}r=new f;r.immutable=!1;for(var q=0,u=Object.keys(h);q<u.length;q++){var v=u[q];e=h[v];void 0!==e&&r.setField(v,m(e,k))}r.immutable=k;return r}var f=function(){function h(k){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=
!0;this.attributes=k instanceof h?k.attributes:void 0===k?{}:null===k?{}:k}h.prototype.field=function(k){var e=k.toLowerCase(),r=this.attributes[k];if(void 0!==r)return r;for(var q in this.attributes)if(q.toLowerCase()===e)return this.attributes[q];throw Error("Field not Found : "+k);};h.prototype.setField=function(k,e){if(this.immutable)throw Error("Dictionary is Immutable");var r=k.toLowerCase();if(void 0===this.attributes[k])for(var q in this.attributes)if(q.toLowerCase()===r){this.attributes[q]=
e;return}this.attributes[k]=e};h.prototype.hasField=function(k){var e=k.toLowerCase();if(void 0!==this.attributes[k])return!0;for(var r in this.attributes)if(r.toLowerCase()===e)return!0;return!1};h.prototype.keys=function(){var k=[],e;for(e in this.attributes)k.push(e);return k=k.sort()};h.prototype.castToText=function(){var k="",e;for(e in this.attributes){""!==k&&(k+=",");var r=this.attributes[e];null==r?k+=JSON.stringify(e)+":null":d.isBoolean(r)||d.isNumber(r)||d.isString(r)?k+=JSON.stringify(e)+
":"+JSON.stringify(r):r instanceof n?k+=JSON.stringify(e)+":"+d.toStringExplicit(r):r instanceof a?k+=JSON.stringify(e)+":"+d.toStringExplicit(r):r instanceof Array?k+=JSON.stringify(e)+":"+d.toStringExplicit(r):r instanceof Date?k+=JSON.stringify(e)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(k+=JSON.stringify(e)+":"+r.castToText())}return"{"+k+"}"};h.convertObjectToArcadeDictionary=function(k,e){void 0===e&&(e=!0);var r=new h;r.immutable=!1;for(var q in k){var u=
k[q];void 0!==u&&r.setField(q.toString(),m(u))}r.immutable=e;return r};h.convertJsonToArcade=function(k,e){void 0===e&&(e=!1);return m(k,e)};h.prototype.castAsJson=function(k){void 0===k&&(k=null);var e={};for(q in this.attributes){var r=this.attributes[q];if(void 0!==r){if(null===k||void 0===k?0:k.keyTranslate)var q=k.keyTranslate(q);e[q]=d.castAsJson(r,k)}}return e};h.prototype.castDictionaryValueAsJsonAsync=function(k,e,r,q,u){void 0===q&&(q=null);return d.castAsJsonAsync(r,q,u).then(function(v){return k[e]=
v})};h.prototype.castAsJsonAsync=function(k,e){void 0===k&&(k=null);void 0===e&&(e=null);var r={},q=[];for(v in this.attributes){var u=this.attributes[v];if(null===e||void 0===e?0:e.keyTranslate)var v=e.keyTranslate(v);void 0!==u&&(d.isSimpleType(u)||u instanceof n||u instanceof Date?r[v]=d.castAsJson(u,e):q.push(this.castDictionaryValueAsJsonAsync(r,v,u,k,e)))}return 0<q.length?g.all(q).then(function(){return r}):g.resolve(r)};return h}();return f})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(B,p){return function(){function a(d){void 0===d&&(d=[]);this._elements=d}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(d){return this._elements[d]};a.prototype.toArray=function(){for(var d=[],g=0;g<this.length();g++)d.push(this.get(g));return d};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x){function z(R,fa,ka){return""===fa||null===fa||void 0===fa||fa===ka||fa===ka?R:R=R.split(fa).join(ka)}function A(R){return R instanceof ha||R instanceof a||R instanceof ja}function y(R){return c(R)||l(R)||C(R)||b(R)||null===R||R===p.voidOperation||"number"===typeof R?!0:!1}function c(R){return"string"===typeof R||R instanceof String}function b(R){return"boolean"===typeof R}function l(R){return"number"===typeof R}function t(R){return R instanceof Array}function w(R){return R instanceof
d}function C(R){return R instanceof Date}function D(R,fa){if(!1===isNaN(R)){if(void 0===fa||null===fa||""===fa)return R.toString();fa=z(fa,"\u2030","");fa=z(fa,"\u00a4","");return v.format(R,{pattern:fa})}return R.toString()}function E(R,fa){var ka=u.DateTime.fromJSDate(R);return void 0===fa||null===fa||""===fa?ka.toISO({suppressMilliseconds:!0}):ka.toFormat(F(fa),{locale:x.locale,numberingSystem:"latn"})}function F(R){R=R.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var fa="",ka=0;for(R=R.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);ka<
R.length;ka++){var qa=R[ka];switch(qa){case "D":fa+="d";break;case "DD":fa+="dd";break;case "DDD":fa+="o";break;case "d":fa+="c";break;case "ddd":fa+="ccc";break;case "dddd":fa+="cccc";break;case "M":fa+="L";break;case "MM":fa+="LL";break;case "MMM":fa+="LLL";break;case "MMMM":fa+="LLLL";break;case "YY":fa+="yy";break;case "Y":case "YYYY":fa+="yyyy";break;case "Q":fa+="q";break;case "Z":fa+="ZZ";break;case "ZZ":fa+="ZZZ";break;case "S":fa+="'S'";break;case "SS":fa+="'SS'";break;case "SSS":fa+="u";
break;case "A":case "a":fa+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":fa+=qa;break;default:fa=2<=qa.length&&"["===qa.slice(0,1)&&"]"===qa.slice(-1)?fa+("'"+qa.slice(1,-1)+"'"):fa+("'"+qa+"'")}}return fa}function G(R,fa,ka){switch(ka){case "\x3e":return R>fa;case "\x3c":return R<fa;case "\x3e\x3d":return R>=fa;case "\x3c\x3d":return R<=fa}return!1}function H(R,fa){if(R===fa||null===R&&fa===p.voidOperation||null===fa&&R===p.voidOperation)return!0;
if(C(R)&&C(fa))return R.getTime()===fa.getTime();if(R instanceof g||R instanceof n)return R.equalityTest(fa);if(R instanceof e&&fa instanceof e){var ka=R.getCacheValue("_arcadeCacheId"),qa=fa.getCacheValue("_arcadeCacheId");if(void 0!==ka&&null!==ka)return ka===qa}return void 0!==R&&void 0!==fa&&null!==R&&null!==fa&&"object"===typeof R&&"object"===typeof fa&&(R._arcadeCacheId===fa._arcadeCacheId&&void 0!==R._arcadeCacheId&&null!==R._arcadeCacheId||R._underlyingGraphic===fa._underlyingGraphic&&void 0!==
R._underlyingGraphic&&null!==R._underlyingGraphic)?!0:!1}function M(R,fa){if(c(R))return R;if(null===R)return"";if(l(R))return D(R,fa);if(b(R))return R.toString();if(C(R))return E(R,fa);if(R instanceof h)return JSON.stringify(R.toJson());if(t(R)){for(var ka=[],qa=0;qa<R.length;qa++)ka[qa]=W(R[qa]);return"["+ka.join(",")+"]"}if(R instanceof d){ka=[];for(qa=0;qa<R.length();qa++)ka[qa]=W(R.get(qa));return"["+ka.join(",")+"]"}return null!==R&&"object"===typeof R&&void 0!==R.castToText?R.castToText():
A(R)?"object, Function":""}function X(R,fa){if(c(R))return R;if(null===R)return"";if(l(R))return D(R,fa);if(b(R))return R.toString();if(C(R))return E(R,fa);if(R instanceof h)return R instanceof f?'{"xmin":'+R.xmin.toString()+',"ymin":'+R.ymin.toString()+","+(R.hasZ?'"zmin":'+R.zmin.toString()+",":"")+(R.hasM?'"mmin":'+R.mmin.toString()+",":"")+'"xmax":'+R.xmax.toString()+',"ymax":'+R.ymax.toString()+","+(R.hasZ?'"zmax":'+R.zmax.toString()+",":"")+(R.hasM?'"mmax":'+R.mmax.toString()+",":"")+'"spatialReference":'+
N(R.spatialReference)+"}":N(R.toJson(),function(na,ia){return na.key===ia.key?0:"spatialReference"===na.key?1:"spatialReference"===ia.key||na.key<ia.key?-1:na.key>ia.key?1:0});if(t(R)){for(var ka=[],qa=0;qa<R.length;qa++)ka[qa]=W(R[qa]);return"["+ka.join(",")+"]"}if(R instanceof d){ka=[];for(qa=0;qa<R.length();qa++)ka[qa]=W(R.get(qa));return"["+ka.join(",")+"]"}return null!==R&&"object"===typeof R&&void 0!==R.castToText?R.castToText():A(R)?"object, Function":""}function W(R){return null===R?"null":
b(R)||l(R)||c(R)?JSON.stringify(R):R instanceof h||R instanceof d||R instanceof Array?X(R):R instanceof Date?JSON.stringify(E(R,"")):null!==R&&"object"===typeof R&&void 0!==R.castToText?R.castToText():"null"}function T(R,fa){return l(R)?R:null===R||""===R?0:C(R)?NaN:b(R)?R?1:0:t(R)||""===R||void 0===R?NaN:void 0!==fa&&c(R)?(fa=z(fa,"\u2030",""),fa=z(fa,"\u00a4",""),v.parse(R,{pattern:fa})):R===p.voidOperation?0:Number(R)}function K(R){var fa=/ (\d\d)/,ka=u.DateTime.fromISO(R);return ka.isValid||fa.test(R)&&
(R=R.replace(fa,"T$1"),ka=u.DateTime.fromISO(R),ka.isValid)?ka:null}function O(R,fa){var ka;fa.fields.some(function(qa){qa.name.toLowerCase()===R.toLowerCase()&&(ka=qa.domain);return!!ka});return ka}function N(R,fa){fa||(fa={});"function"===typeof fa&&(fa={cmp:fa});var ka="boolean"===typeof fa.cycles?fa.cycles:!1,qa=fa.cmp&&function(ia){return function(ea){return function(oa,ta){return ia({key:oa,value:ea[oa]},{key:ta,value:ea[ta]})}}}(fa.cmp),na=[];return function oa(ea){ea&&ea.toJson&&"function"===
typeof ea.toJson&&(ea=ea.toJson());if(void 0!==ea){if("number"===typeof ea)return isFinite(ea)?""+ea:"null";if("object"!==typeof ea)return JSON.stringify(ea);var ta;if(Array.isArray(ea)){var ra="[";for(ta=0;ta<ea.length;ta++)ta&&(ra+=","),ra+=oa(ea[ta])||"null";return ra+"]"}if(null===ea)return"null";if(-1!==na.indexOf(ea)){if(ka)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var aa=na.push(ea)-1,da=Object.keys(ea).sort(qa&&qa(ea));ra="";for(ta=0;ta<
da.length;ta++){var J=da[ta],sa=oa(ea[J]);sa&&(ra&&(ra+=","),ra+=JSON.stringify(J)+":"+sa)}na.splice(aa,1);return"{"+ra+"}"}}(R)}function Y(R,fa){if(fa instanceof e)R.push([fa.x,fa.y]);else throw Error("Invalid Argument");}function P(R,fa){void 0===fa&&(fa=null);if(null!=R){if(b(R)||l(R)||c(R))return R;if(R instanceof h)return!0===(null===fa||void 0===fa?void 0:fa.keepGeometryType)?R:R.toJson();if(R instanceof d)return R.toArray().map(function(ka){return P(ka,fa)});if(R instanceof Array)return R.map(function(ka){return P(ka,
fa)});if(R instanceof Date)return R;if(null!==R&&"object"===typeof R&&void 0!==R.castAsJson)return R.castAsJson(fa)}return null}function L(R,fa,ka,qa,na){return Q(R,fa,ka).then(function(ia){na[qa]=ia})}function Q(R,fa,ka){void 0===fa&&(fa=null);void 0===ka&&(ka=null);R instanceof d&&(R=R.toArray());if(null!=R){if(y(R)||R instanceof h||R instanceof Date)return m.resolve(P(R,ka));if(R instanceof Array){for(var qa=[],na=[],ia=0;ia<R.length;ia++){var ea=R[ia];null===ea||y(ea)||ea instanceof h||ea instanceof
Date?na.push(P(ea,ka)):(na.push(null),qa.push(L(ea,fa,ka,na.length-1,na)))}return 0<qa.length?m.all(qa).then(function(){return na}):m.resolve(na)}if(null!==R&&"object"===typeof R&&void 0!==R.castAsJsonAsync)return R.castAsJsonAsync(fa,ka)}return m.resolve(null)}Object.defineProperty(p,"__esModule",{value:!0});p.castAsJsonAsync=p.castAsJson=p.binaryOperator=p.tick=p.toStringArray=p.autoCastArrayOfPointsToMultiPoint=p.autoCastArrayOfPointsToPolyline=p.autoCastArrayOfPointsToPolygon=p.autoCastFeatureToGeometry=
p.stableStringify=p.getDomain=p.getDomainCode=p.getDomainValue=p.fixNullGeometry=p.fixSpatialReference=p.toBoolean=p.toDateTime=p.toDate=p.toNumber=p.toStringExplicit=p.toNumberArray=p.toString=p.equalityTest=p.greaterThanLessThan=p.standardiseDateFormat=p.formatDate=p.formatNumber=p.generateUUID=p.absRound=p.pcCheck=p.isDate=p.isImmutableArray=p.isFeatureSetCollection=p.isFeatureSet=p.isArray=p.isInteger=p.isNumber=p.isBoolean=p.isString=p.defaultUndefined=p.isSimpleType=p.isFunctionParameter=p.multiReplace=
p.continueResult=p.breakResult=p.voidOperation=p.SizzleFunction=p.ReturnResult=p.ImplicitResult=p.NativeFunction=p.SizzleFunctionE=p.NativeFunctionE=p.ImplicitResultE=p.ReturnResultE=void 0;B=function(){return function(R){this.value=R}}();p.ReturnResultE=B;var ca=function(){return function(R){this.value=R}}();p.ImplicitResultE=ca;var ha=function(){return function(R){this.fn=R}}();p.NativeFunctionE=ha;var ja=function(){return function(R,fa){this.paramCount=fa;this.fn=R}}();p.SizzleFunctionE=ja;p.NativeFunction=
ha;p.ImplicitResult=ca;p.ReturnResult=B;p.SizzleFunction=ja;p.voidOperation={type:"VOID"};p.breakResult={type:"BREAK"};p.continueResult={type:"CONTINUE"};p.multiReplace=z;p.isFunctionParameter=A;p.isSimpleType=y;p.defaultUndefined=function(R,fa){return void 0===R?fa:R};p.isString=c;p.isBoolean=b;p.isNumber=l;p.isInteger=function(R){return"number"===typeof R&&isFinite(R)&&Math.floor(R)===R};p.isArray=t;p.isFeatureSet=function(R){return!0===(R&&R.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===
R.declaredRootClass)};p.isFeatureSetCollection=function(R){return!0===(R&&R.declaredRootClass&&"esri.arcade.featureSetCollection"===R.declaredRootClass)};p.isImmutableArray=w;p.isDate=C;p.pcCheck=function(R,fa,ka){if(R.length<fa||R.length>ka)throw Error("Function called with wrong number of Parameters");};p.absRound=function(R){return 0>R?-Math.round(-R):Math.round(R)};p.generateUUID=function(){var R=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(fa){var ka=
(R+16*Math.random())%16|0;R=Math.floor(R/16);return("x"===fa?ka:ka&3|8).toString(16)})};p.formatNumber=D;p.formatDate=E;p.standardiseDateFormat=F;p.greaterThanLessThan=function(R,fa,ka){if(null===R){if(null===fa||fa===p.voidOperation)return G(null,null,ka);if(l(fa))return G(0,fa,ka);if(c(fa)||b(fa))return G(0,T(fa),ka);if(C(fa))return G(0,fa.getTime(),ka)}if(R===p.voidOperation){if(null===fa||fa===p.voidOperation)return G(null,null,ka);if(l(fa))return G(0,fa,ka);if(c(fa)||b(fa))return G(0,T(fa),ka);
if(C(fa))return G(0,fa.getTime(),ka)}else if(l(R)){if(l(fa))return G(R,fa,ka);if(b(fa))return G(R,T(fa),ka);if(null===fa||fa===p.voidOperation)return G(R,0,ka);if(c(fa))return G(R,T(fa),ka);if(C(fa))return G(R,fa.getTime(),ka)}else if(c(R)){if(c(fa))return G(M(R),M(fa),ka);if(C(fa))return G(T(R),fa.getTime(),ka);if(l(fa))return G(T(R),fa,ka);if(null===fa||fa===p.voidOperation)return G(T(R),0,ka);if(b(fa))return G(T(R),T(fa),ka)}else if(C(R)){if(C(fa))return G(R,fa,ka);if(null===fa||fa===p.voidOperation)return G(R.getTime(),
0,ka);if(l(fa))return G(R.getTime(),fa,ka);if(b(fa)||c(fa))return G(R.getTime(),T(fa),ka)}else if(b(R)){if(b(fa))return G(R,fa,ka);if(l(fa))return G(T(R),T(fa),ka);if(C(fa))return G(T(R),fa.getTime(),ka);if(null===fa||fa===p.voidOperation)return G(T(R),0,ka);if(c(fa))return G(T(R),T(fa),ka)}return!H(R,fa)||"\x3c\x3d"!==ka&&"\x3e\x3d"!==ka?!1:!0};p.equalityTest=H;p.toString=M;p.toNumberArray=function(R){var fa=[];if(!1===t(R))return null;if(R instanceof d){for(var ka=0;ka<R.length();ka++)fa[ka]=T(R.get(ka));
return fa}for(ka=0;ka<R.length;ka++)fa[ka]=T(R[ka]);return fa};p.toStringExplicit=X;p.toNumber=T;p.toDate=function(R){return C(R)?R:c(R)&&(R=K(R))?R.toJSDate():null};p.toDateTime=function(R){return C(R)?u.DateTime.fromJSDate(R):c(R)?K(R):null};p.toBoolean=function(R){return b(R)?R:c(R)?(R=R.toLowerCase(),"true"===R?!0:!1):l(R)?0===R||isNaN(R)?!1:!0:!1};p.fixSpatialReference=function(R,fa){if(null===R||void 0===R)return null;if(null===R.spatialReference||void 0===R.spatialReference)R.spatialReference=
fa;return R};p.fixNullGeometry=function(R){if(null===R)return null;if(R instanceof e)return"NaN"===R.x||null===R.x||isNaN(R.x)?null:R;if(R instanceof r){if(0===R.rings.length)return null;for(var fa=0,ka=R.rings;fa<ka.length;fa++){var qa=ka[fa];if(0<qa.length)return R}return null}if(R instanceof q){if(0===R.paths.length)return null;fa=0;for(ka=R.paths;fa<ka.length;fa++)if(qa=ka[fa],0<qa.length)return R;return null}return R instanceof k?0===R.points.length?null:R:R instanceof f?"NaN"===R.xmin||null===
R.xmin||isNaN(R.xmin)?null:R:null};p.getDomainValue=function(R,fa){if(!R||!R.domain)return fa;var ka=null;if("string"===R.field.type||"esriFieldTypeString"===R.field.type)fa=M(fa);else{if(null===fa||void 0===fa)return null;if(""===fa)return fa;fa=T(fa)}for(var qa=0;qa<R.domain.codedValues.length;qa++){var na=R.domain.codedValues[qa];na.code===fa&&(ka=na)}return null===ka?fa:ka.name};p.getDomainCode=function(R,fa){if(!R||!R.domain)return fa;var ka=null;fa=M(fa);for(var qa=0;qa<R.domain.codedValues.length;qa++){var na=
R.domain.codedValues[qa];na.name===fa&&(ka=na)}return null===ka?fa:ka.code};p.getDomain=function(R,fa,ka,qa){void 0===ka&&(ka=null);if(!fa||!fa.fields)return null;for(var na=null,ia=0;ia<fa.fields.length;ia++){var ea=fa.fields[ia];ea.name.toLowerCase()===R.toString().toLowerCase()&&(na=ea)}if(null===na)throw Error("Field not found");var oa,ta;qa||(qa=ka&&fa.typeIdField&&ka._field(fa.typeIdField));null!=qa&&fa.types.some(function(ra){return ra.id===qa?((oa=ra.domains&&ra.domains[na.name])&&"inherited"===
oa.type&&(oa=O(na.name,fa),ta=!0),!0):!1});ta||oa||(oa=O(R,fa));return{field:na,domain:oa}};p.stableStringify=N;p.autoCastFeatureToGeometry=function(R){if(null===R)return null;for(var fa=[],ka=0;ka<R.length;ka++){var qa=R[ka];qa&&(qa.declaredClass&&"esri.arcade.Feature"===qa.declaredClass||"FeatureSetReader"===qa.type)?fa.push(qa.geometry()):fa.push(qa)}return fa};p.autoCastArrayOfPointsToPolygon=function(R,fa){if(t(R)||w(R)){var ka=!1,qa=!1,na=[],ia=fa;if(t(R)){for(var ea=0;ea<R.length;ea++){var oa=
R[ea];Y(na,oa)}0<na.length&&(ia=R[0].spatialReference,ka=R[0].hasZ,qa=R[0].hasM)}else if(R instanceof n)na=R._elements,0<na.length&&(ka=R._hasZ,qa=R._hasM,ia=R.get(0).spatialReference);else if(w(R)){ea=0;for(var ta=R.toArray();ea<ta.length;ea++)oa=ta[ea],Y(na,oa);0<na.length&&(ia=R.get(0).spatialReference,ka=!0===R.get(0).hasZ,qa=!0===R.get(0).hasM)}else throw Error("Invalid Argument");if(0===na.length)return null;!1===(new r({rings:[],spatialReference:{wkid:4326}})).isClockwise(na)&&(na=na.slice(0).reverse());
return new r({rings:[na],spatialReference:ia,hasZ:ka,hasM:qa})}return R};p.autoCastArrayOfPointsToPolyline=function(R,fa){if(t(R)||w(R)){var ka=!1,qa=!1,na=[],ia=fa;if(t(R)){for(var ea=0;ea<R.length;ea++){var oa=R[ea];Y(na,oa)}0<na.length&&(ia=R[0].spatialReference,ka=!0===R[0].hasZ,qa=!0===R[0].hasM)}else if(R instanceof n)na=R._elements,0<na.length&&(ka=R._hasZ,qa=R._hasM,ia=R.get(0).spatialReference);else if(w(R)){ea=0;for(var ta=R.toArray();ea<ta.length;ea++)oa=ta[ea],Y(na,oa);0<na.length&&(ia=
R.get(0).spatialReference,ka=!0===R.get(0).hasZ,qa=!0===R.get(0).hasM)}return 0===na.length?null:new q({paths:[na],spatialReference:ia,hasZ:ka,hasM:qa})}return R};p.autoCastArrayOfPointsToMultiPoint=function(R,fa){if(t(R)||w(R)){var ka=!1,qa=!1,na=[],ia=fa;if(t(R)){for(var ea=0;ea<R.length;ea++){var oa=R[ea];Y(na,oa)}0<na.length&&(ia=R[0].spatialReference,ka=!0===R[0].hasZ,qa=!0===R[0].hasM)}else if(R instanceof n)na=R._elements,0<na.length&&(ka=R._hasZ,qa=R._hasM,ia=R.get(0).spatialReference);else if(w(R)){ea=
0;for(var ta=R.toArray();ea<ta.length;ea++)oa=ta[ea],Y(na,oa);0<na.length&&(ia=R.get(0).spatialReference,ka=!0===R.get(0).hasZ,qa=!0===R.get(0).hasM)}return 0===na.length?null:new k({points:na,spatialReference:ia,hasZ:ka,hasM:qa})}return R};p.toStringArray=function(R,fa){void 0===fa&&(fa=!1);var ka=[];if(null===R)return ka;if(!0===t(R)){for(var qa=0;qa<R.length;qa++){var na=M(R[qa]);""===na&&!0!==fa||ka.push(na)}return ka}if(R instanceof d){for(qa=0;qa<R.length();qa++)na=M(R.get(qa)),""===na&&!0!==
fa||ka.push(na);return ka}return y(R)?(na=M(R),""===na&&!0!==fa||ka.push(na),ka):[]};var ma=0;p.tick=function(R){ma++;return 0===ma%100?(ma=0,m.create(function(fa){setTimeout(function(){fa(R)},0)})):R};p.binaryOperator=function(R,fa,ka){switch(ka){case "\x26":return R&fa;case "|":return R|fa;case "^":return R^fa;case "\x3c\x3c":return R<<fa;case "\x3e\x3e":return R>>fa;case "\x3e\x3e\x3e":return R>>>fa}};p.castAsJson=P;p.castAsJsonAsync=Q})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(B,p){return function(){return function(a,d){this.context=this.definition=null;this.definition=a;this.context=d}}()})},"esri/arcade/ImmutablePathArray":function(){var B=this&&this.__extends||function(){var p=function(a,d){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(g[m]=n[m])};return p(a,d)};return function(a,d){function g(){this.constructor=a}if("function"!==typeof d&&
null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");p(a,d);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(p,a,d,g){return function(n){function m(f,h,k,e,r){f=n.call(this,f)||this;f._lazyPath=[];f._hasZ=!1;f._hasM=!1;f._hasZ=k;f._hasM=e;f._spRef=h;f._cacheId=r;return f}B(m,n);m.prototype.get=function(f){if(void 0===this._lazyPath[f]){var h=this._elements[f];
if(void 0===h)return;this._lazyPath[f]=new g(h,this._spRef,this._hasZ,this._hasM,this._cacheId,f)}return this._lazyPath[f]};m.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof m?!1:f.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()};return m}(d)})},"esri/arcade/ImmutablePointArray":function(){var B=this&&this.__extends||function(){var p=function(a,d){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
function(g,n){g.__proto__=n}||function(g,n){for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(g[m]=n[m])};return p(a,d)};return function(a,d){function g(){this.constructor=a}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");p(a,d);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(p,a,d,g){return function(n){function m(f,
h,k,e,r,q){f=n.call(this,f)||this;f._lazyPt=[];f._hasZ=!1;f._hasM=!1;f._spRef=h;f._hasZ=k;f._hasM=e;f._cacheId=r;f._partId=q;return f}B(m,n);m.prototype.get=function(f){if(void 0===this._lazyPt[f]){var h=this._elements[f];if(void 0===h)return;var k=this._hasZ,e=this._hasM,r=null;r=k&&!e?new g(h[0],h[1],h[2],void 0,this._spRef):e&&!k?new g(h[0],h[1],void 0,h[2],this._spRef):k&&e?new g(h[0],h[1],h[2],h[3],this._spRef):new g(h[0],h[1],this._spRef);r.setCacheValue("_arcadeCacheId",this._cacheId.toString()+
"-"+this._partId.toString()+"-"+f.toString());this._lazyPt[f]=r}return this._lazyPt[f]};m.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof m?!1:f.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return m}(d)})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(B,
p,a,d,g,n,m,f){function h(u,v){89.99999<v?v=89.99999:-89.99999>v&&(v=-89.99999);var x=.017453292519943*v;return[111319.49079327169*u,3189068.5*Math.log((1+Math.sin(x))/(1-Math.sin(x)))]}function k(u,v,x){u=u/6378137*57.29577951308232;return x?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*v/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*v/6378137)))]}function e(){}function r(){}function q(u){var v=u._json;u._unquantizeFn?
(v=u._unquantizeFn({x:v.x,y:v.y}),u._xVal=v.x,u._yVal=v.y,u._unquantizeFn=null):(u._xVal=v.x,u._yVal=v.y);u._json=null}a={type:"point",x:0,y:0};B=B(m,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(u,v,x){p.isArray(u)?(this.x=u[0],this.y=u[1],this.spatialReference=v):g.isObject(u)?(g.mixin(this,u),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):
(this.x=u,this.y=v,this.spatialReference=x);this.verifySR()},offset:function(u,v){return new this.constructor(this.x+u,this.y+v,this.spatialReference)},setX:function(u){this.x=u;this.clearCache();return this},setY:function(u){this.y=u;this.clearCache();return this},setLongitude:function(u){var v=this.spatialReference;v&&(v._isWebMercator()?this.setX(h(u,this.y)[0]):4326===v.wkid&&this.setX(u));return this},setLatitude:function(u){var v=this.spatialReference;v&&(v._isWebMercator()?this.setY(h(this.x,
u)[1]):4326===v.wkid&&this.setY(u));return this},getLongitude:function(){var u=this.spatialReference;if(u)if(u._isWebMercator())var v=k(this.x,this.y)[0];else 4326===u.wkid&&(v=this.x);return v},getLatitude:function(){var u=this.spatialReference;if(u)if(u._isWebMercator())var v=k(this.x,this.y)[1];else 4326===u.wkid&&(v=this.y);return v},update:function(u,v){this.x=u;this.y=v;this.clearCache();return this},normalize:function(){var u=this.x,v=this.spatialReference;if(v){var x=v._getInfo();x&&(u=this._normalizeX(u,
x))}return new this.constructor(u,this.y,v)},_normalizeX:function(u,v){var x=v.valid[0],z=v.valid[1],A=2*z;u>z?(x=Math.ceil(Math.abs(u-z)/A),u-=x*A):u<x&&(x=Math.ceil(Math.abs(u-x)/A),u+=x*A);return u},toJson:function(){var u={x:this.x,y:this.y},v=this.spatialReference;v&&(u.spatialReference=v.toJson());return u}});e.prototype=B.prototype;r.prototype=new e;Object.defineProperty(r.prototype,"x",{get:function(){this._json&&q(this);return this._xVal},set:function(u){this._xVal=u}});Object.defineProperty(r.prototype,
"y",{get:function(){this._json&&q(this);return this._yVal},set:function(u){this._yVal=u}});r.prototype.setupLazyUnquantization=function(u,v){this._unquantizeFn=u;this._json=v};B.simpleConstructor=e;B.accessorConstructor=r;B.lngLatToXY=h;B.xyToLngLat=k;B.defaultProps=a;B.metersPerDegree=6378137*Math.PI/180;p.setObject("geometry.Point",B,d);d.geometry.defaultPoint=a;return B})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(B,
p,a,d,g){function n(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7];B=B(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(g.isObject(f)?g.mixin(this,f):g.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==p.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==p.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(f){var h=!1;f&&(h=this.isWebMercator()&&4326===f.wkid||f.isWebMercator()&&4326===this.wkid);return h},isWebMercator:function(){return this._isWebMercator()},equals:function(f){var h=!1;f&&(this===f&&
(h=!0),this.wkid||f.wkid?h=this.wkid===f.wkid||this.isWebMercator()&&f.isWebMercator()||this.wkid===f.latestWkid||f.wkid===this.latestWkid:this.wkt&&f.wkt&&(h=this.wkt.toUpperCase()===f.wkt.toUpperCase()));return h},toJson:function(){var f=null;null!=this.wkid?f={wkid:this.wkid}:null!=this.wkt&&(f={wkt:this.wkt});f&&null!=this.latestWkid&&(f.latestWkid=this.latestWkid);return f}});n.prototype=B.prototype;B.simpleConstructor=n;return d.SpatialReference=B})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(B,p,a,d,g){B=B(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(n){this.spatialReference=n;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new g(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(n){return this.cache&&this.cache[n]},setCacheValue:function(n,m){this.cache||
(this.cache={});this.cache[n]=m}});p.setObject("geometry.Geometry",B,d);return B})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(B,p,a,d,g){function n(m){var f=!1;m&&(m.ics||m.icsid)&&(f=!0);return f}d={isICS:n,createSpatialReference:function(m){var f=null;m&&(f=n(m)?new p(m):new B(m));return f}};g.mixin(a,d);return d})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(B,p,a,d,g,n){B=B(n,{declaredClass:"esri.ImageSpatialReference",constructor:function(m){m&&p.isObject(m)&&p.mixin(this,m)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(m){var f=!1;if(m)if(this.icsid&&m.icsid){if(f=this.icsid===m.icsid,this.icsns||m.icsns)f=f&&this.icsns===m.icsns}else this.ics&&m.ics&&(f=this.ics===m.ics);return f},toJson:function(m){var f=null,h=g.isDefined;m=h(m)?m:!0;h(this.icsid)?(f={icsid:this.icsid},
h(this.icsns)&&(f.icsns=this.icsns)):h(this.ics)&&(f={ics:this.ics});h(this.url)&&h(f)&&m&&(f.url=this.url);return f}});return d.ImageSpatialReference=B})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(B,p,a,d){function g(h,k){var e=new a(k);h(function(r){return f(r).then(e.resolve)},e.reject);return e.promise}function n(h){if(h){if("function"!==typeof h.forEach){var k=Object.keys(h),e=k.map(function(q){return h[q]});return n(e).then(function(q){var u=
{};k.forEach(function(v,x){return u[v]=q[x]});return u})}var r=null;return g(function(q,u){var v=[],x=h.length;0===x&&q(v);h.forEach(function(z){var A={promise:z};v.push(A);z.then(function(y){A.value=y})["catch"](function(y){A.error=y}).then(function(){--x;0===x&&(r?u(Error("AbortError")):q(v))})})},function(q){r=q||"Invocation cancellation";h.forEach(function(u){return u.cancel(q)})})}}function m(h){void 0===h&&(h=void 0);var k=new a;k.resolve(h);return k.promise}function f(h){return h&&"function"===
typeof h.then?h:m(h)}Object.defineProperty(p,"__esModule",{value:!0});p.createResolver=p.when=p.isPromiseLike=p.wrapCallback=p.timeout=p.after=p.resolve=p.reject=p.first=p.eachAlwaysValues=p.eachAlways=p.createDeferred=p.create=p.filter=p.all=void 0;p.all=function(h){return d(h)};p.filter=function(h,k){var e=h.slice();return d(h.map(function(r,q){return k(r,q)})).then(function(r){return e.filter(function(q,u){return r[u]})})};p.create=g;p.createDeferred=function(h){var k=null;h=g(function(e,r){k=
{resolve:e,reject:r}},h);k.promise=h;k.cancel=function(){k.reject(Error("AbortError"))};return k};p.eachAlways=n;p.eachAlwaysValues=function(h){return n(h).then(function(k){return k.filter(function(e){return!!e.value}).map(function(e){return e.value})})};p.first=function(h){return h&&h.length?g(function(k,e){for(var r=0;r<h.length;r++)h[r].then(k,e)}):m()};p.reject=function(h){var k=new a;k.reject(h);return k.promise};p.resolve=m;p.after=function(h,k){void 0===k&&(k=void 0);var e=0;return g(function(r){e=
setTimeout(function(){r(k)},h)},function(){e&&(clearTimeout(e),e=0)})};p.timeout=function(h,k,e){var r=0,q=new a(h.cancel);h.then(function(u){q.isFulfilled()||(q.resolve(u),r&&(clearTimeout(r),r=0))});h["catch"](function(u){q.isFulfilled()||(q.reject(u),r&&(clearTimeout(r),r=0))});r=setTimeout(function(){q.reject(e||Error("promiseUtils:timeout"))},k);return q.promise};p.wrapCallback=function(h){var k=!1;return g(function(){h(function(e){k||m(e)})},function(){return k=!0})};p.isPromiseLike=function(h){return h&&
"function"===typeof h.then};p.when=f;p.createResolver=function(h){var k,e;h=g(function(q,u){k=q;e=u},h);var r=function(q){k(q)};r.resolve=function(q){return k(q)};r.reject=function(q){return e(q)};r.promise=h;return r}})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r){function q(){}d={type:"extent",
xmin:0,ymin:0,xmax:0,ymax:0};var u=B(f,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(v,x,z,A,y){n.isObject(v)?(n.mixin(this,v),this.spatialReference&&(this.spatialReference=r.createSpatialReference(this.spatialReference))):this.update(v,x,z,A,y);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new h((this.xmin+this.xmax)/2,(this.ymin+
this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new h(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new h(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new h(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new h(this.xmax,this.ymin,this.spatialReference)},centerAt:function(v){var x=this.getCenter(),z=v.x-x.x;v=v.y-x.y;return new u(this.xmin+z,this.ymin+v,this.xmax+z,this.ymax+v,this.spatialReference)},
update:function(v,x,z,A,y){this.xmin=v;this.ymin=x;this.xmax=z;this.ymax=A;this.spatialReference=y;this.clearCache();return this},offset:function(v,x){return new u(this.xmin+v,this.ymin+x,this.xmax+v,this.ymax+x,this.spatialReference)},expand:function(v){var x=(1-v)/2;v=this.getWidth()*x;x*=this.getHeight();return new u(this.xmin+v,this.ymin+x,this.xmax-v,this.ymax-x,this.spatialReference)},intersects:function(v){if(!v)return!1;var x=v.type,z=this.spatialReference,A=v.spatialReference;z&&A&&!z.equals(A)&&
z._canProject(A)&&(v=z.isWebMercator()?k.geographicToWebMercator(v):k.webMercatorToGeographic(v,!0));switch(x){case "point":return this.contains(v);case "multipoint":return this._intersectsMultipoint(v);case "extent":return this._intersectsExtent(v);case "polygon":return this._intersectsPolygon(v);case "polyline":return this._intersectsPolyline(v)}},normalize:function(){var v=this._normalize(!1,!0);a.isArray(v)||(v=[v]);return v},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var v=
this.spatialReference,x=v&&v._getInfo(),z=[],A=0;if(x&&this._isOutOfBounds(x)){var y=this;A=y.xmin;var c=y.ymin,b=y.ymax,l=x.valid[0],t=x.valid[1];y.getWidth()>2*t&&(y=y.getCenter(),y=new u(y.x-t,c,y.x+t,b,new m(v.toJson())));A=y.xmin-A;var w=this._normalizeX(y.xmin,x);x=this._normalizeX(y.xmax,x);w.frameId===x.frameId?z.push(new u(w.x,c,x.x,b,new m(v.toJson()))):z.push(new u(w.x,c,t,b,new m(v.toJson())),new u(l,c,x.x,b,new m(v.toJson())))}else z.push(this.getExtent());return{extents:z,marginLeft:A}},
_intersectsMultipoint:function(v){var x=v.points.length,z;for(z=0;z<x;z++)if(this.contains(v.getPoint(z)))return!0;return!1},_intersectsExtent:function(v){var x,z,A=!1;if(this.xmin<=v.xmin){var y=v.xmin;this.xmax<y?A=!0:x=Math.min(this.xmax,v.xmax)-y}else y=this.xmin,v.xmax<y?A=!0:x=Math.min(this.xmax,v.xmax)-y;if(this.ymin<=v.ymin){var c=v.ymin;this.ymax<c?A=!0:z=Math.min(this.ymax,v.ymax)-c}else c=this.ymin,v.ymax<c?A=!0:z=Math.min(this.ymax,v.ymax)-c;return A?null:new u(y,c,y+x,c+z,this.spatialReference)},
_intersectsPolygon:function(v){var x=[this.xmin,this.ymax],z=[this.xmax,this.ymax],A=[this.xmin,this.ymin],y=[this.xmax,this.ymin],c=[x,z,A,y];x=[[A,x],[x,z],[z,y],[y,A]];A=v.rings;y=A.length;var b=new h(0,0,this.spatialReference);var l=c.length;for(z=0;z<l;z++)if(b.update(c[z][0],c[z][1]),v.contains(b))return!0;b.setSpatialReference(v.spatialReference);for(z=0;z<y;z++)if(c=A[z],l=c.length){var t=c[0];b.update(t[0],t[1]);if(this.contains(b))return!0;for(v=1;v<l;v++){var w=c[v];b.update(w[0],w[1]);
if(this.contains(b)||this._intersectsLine([t,w],x))return!0;t=w}}return!1},_intersectsPolyline:function(v){var x=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],z,A=v.paths,y=A.length,c,b=new h(0,0,v.spatialReference);for(v=0;v<y;v++){var l=A[v];if(c=l.length){var t=l[0];b.update(t[0],t[1]);if(this.contains(b))return!0;for(z=1;z<c;z++){var w=l[z];b.update(w[0],
w[1]);if(this.contains(b)||this._intersectsLine([t,w],x))return!0;t=w}}}return!1},_intersectsLine:function(v,x){var z=e._getLineIntersection2,A,y=x.length;for(A=0;A<y;A++)if(z(v,x[A]))return!0;return!1},contains:function(v){if(!v)return!1;var x=v.type;if("point"===x){var z=this.spatialReference,A=v.spatialReference;x=v.x;v=v.y;z&&A&&!z.equals(A)&&z._canProject(A)&&(v=z.isWebMercator()?h.lngLatToXY(x,v):h.xyToLngLat(x,v,!0),x=v[0],v=v[1]);return x>=this.xmin&&x<=this.xmax&&v>=this.ymin&&v<=this.ymax}return"extent"===
x?this._containsExtent(v):!1},_containsExtent:function(v){var x=v.xmin,z=v.ymin,A=v.xmax,y=v.ymax,c=v.spatialReference;v=new h(x,z,c);x=new h(x,y,c);y=new h(A,y,c);z=new h(A,z,c);return this.contains(v)&&this.contains(x)&&this.contains(y)&&this.contains(z)?!0:!1},union:function(v){return new u(Math.min(this.xmin,v.xmin),Math.min(this.ymin,v.ymin),Math.max(this.xmax,v.xmax),Math.max(this.ymax,v.ymax),this.spatialReference)},getExtent:function(){var v=this.spatialReference;return new u(this.xmin,this.ymin,
this.xmax,this.ymax,v&&new m(v.toJson()))},_shiftCM:function(v){var x=this.getCacheValue("_shifted");if(!x){x=new u(this.toJson());var z=x.spatialReference;if(v=v||z._getInfo()){var A=this._getCM(v);if(A){var y=z._isWebMercator()?k.webMercatorToGeographic(A):A;x.xmin-=A.x;x.xmax-=A.x;z._isWebMercator()||(y.x=this._normalizeX(y.x,v).x);x.setSpatialReference(new m(n.substitute({Central_Meridian:y.x},4326===z.wkid?v.altTemplate:v.wkTemplate)))}}this.setCacheValue("_shifted",x)}return x},_getCM:function(v){var x;
this._isOutOfBounds(v)&&(x=this.getCenter());return x},_isOutOfBounds:function(v){var x=v.valid[0];v=v.valid[1];var z=this.xmin,A=this.xmax;return!(z>=x&&z<=v&&A>=x&&A<=v)},_normalize:function(v,x,z){var A=new u(this.toJson()),y=A.spatialReference;if(y&&(z=z||y._getInfo())){var c=p.map(this._getParts(z),function(b){return b.extent});return 2<c.length?v?this._shiftCM(z):A.update(z.valid[0],A.ymin,z.valid[1],A.ymax,y):2===c.length?v?this._shiftCM(z):x?c:{rings:p.map(c,function(b){return[[b.xmin,b.ymin],
[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]}),spatialReference:y}:c[0]||A}return A},_getParts:function(v){var x=this.getCacheValue("_parts");if(!x){x=[];var z=this.xmin,A=this.xmax,y=this.ymin,c=this.ymax,b=this.spatialReference,l=this.getWidth(),t=z,w=A,C=0,D=0;v=v||b._getInfo();var E=v.valid[0];var F=v.valid[1];D=this._normalizeX(z,v);z=D.x;C=D.frameId;D=this._normalizeX(A,v);A=D.x;D=D.frameId;v=z===A&&0<l;if(l>2*F){l=new u(t<w?z:A,y,F,c,b);z=new u(E,y,t<w?A:z,c,b);F=new u(0,
y,F,c,b);y=new u(E,y,0,c,b);b=[];E=[];l.contains(F)&&b.push(C);l.contains(y)&&E.push(C);z.contains(F)&&b.push(D);z.contains(y)&&E.push(D);for(c=C+1;c<D;c++)b.push(c),E.push(c);x.push({extent:l,frameIds:[C]},{extent:z,frameIds:[D]},{extent:F,frameIds:b},{extent:y,frameIds:E})}else z>A||v?x.push({extent:new u(z,y,F,c,b),frameIds:[C]},{extent:new u(E,y,A,c,b),frameIds:[D]}):x.push({extent:new u(z,y,A,c,b),frameIds:[C]});this.setCacheValue("_parts",x)}return x},_normalizeX:function(v,x){var z=0,A=x.valid[0],
y=x.valid[1],c=2*y;v>y?(z=Math.ceil(Math.abs(v-y)/c),v-=z*c):v<A&&(z=Math.ceil(Math.abs(v-A)/c),v+=z*c,z=-z);return{x:v,frameId:z}},toJson:function(){var v={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},x=this.spatialReference;x&&(v.spatialReference=x.toJson());return v}});q.prototype=u.prototype;u.simpleConstructor=q;u.defaultProps=d;a.setObject("geometry.Extent",u,g);g.geometry.defaultExtent=d;return u})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(B,p,a,d,g,n){function m(h,k,e,r){if("point"===h.type){var q=k(h.x,h.y,r);return new h.constructor(q[0],q[1],new g(e))}if("extent"===h.type){q=k(h.xmin,h.ymin,r);var u=k(h.xmax,h.ymax,r);return new h.constructor(q[0],q[1],u[0],u[1],new g(e))}if("polyline"===h.type||"polygon"===h.type){q="polyline"===h.type;var v=[],x;B.forEach(q?h.paths:h.rings,function(A){v.push(x=[]);B.forEach(A,function(y){x.push(k(y[0],y[1],r))})});return q?new h.constructor({paths:v,spatialReference:new g(e)}):new h.constructor({rings:v,
spatialReference:new g(e)})}if("multipoint"===h.type){var z=[];B.forEach(h.points,function(A){z.push(k(A[0],A[1],r))});return new h.constructor({points:z,spatialReference:new g(e)})}}function f(h,k){var e=h&&(null!=h.wkid?h:h.spatialReference),r=k&&(null!=k.wkid?k:k.spatialReference);return e&&r?r.equals(e)?!0:r._canProject(e):!1}a={canProject:f,project:function(h,k){var e=h&&h.spatialReference,r=k&&(null!=k.wkid?k:k.spatialReference);e&&r?e.equals(r)?h=new h.constructor(h.toJson()):f(e,r)?r.isWebMercator()?
h=m(h,n.lngLatToXY,{wkid:102100}):4326===r.wkid&&(h=m(h,n.xyToLngLat,{wkid:4326})):h=null:h=null;return h},lngLatToXY:n.lngLatToXY,xyToLngLat:n.xyToLngLat,metersPerDegree:n.metersPerDegree,geographicToWebMercator:function(h){return m(h,n.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(h,k){return m(h,n.xyToLngLat,{wkid:4326},k)}};p.mixin(p.getObject("geometry",!0,d),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(B,
p,a,d){function g(f,h,k){return f instanceof d?new d(f.x+k*(h.x-f.x),f.y+k*(h.y-f.y)):[f[0]+k*(h[0]-f[0]),f[1]+k*(h[1]-f[1])]}function n(f,h){return 1E-8>Math.abs(f-h)}function m(f,h,k,e){var r=n(f[0],h[0])?1E10:(f[1]-h[1])/(f[0]-h[0]),q=n(k[0],e[0])?1E10:(k[1]-e[1])/(k[0]-e[0]),u=f[1]-r*f[0],v=k[1]-q*k[0];if(n(r,q)){if(n(u,v)){if(n(f[0],h[0]))if(Math.min(f[1],h[1])<Math.max(k[1],e[1])||Math.max(f[1],h[1])>Math.min(k[1],e[1])){f=(f[1]+h[1]+k[1]+e[1]-Math.min(f[1],h[1],k[1],e[1])-Math.max(f[1],h[1],
k[1],e[1]))/2;var x=(f-u)/r}else return null;else if(Math.min(f[0],h[0])<Math.max(k[0],e[0])||Math.max(f[0],h[0])>Math.min(k[0],e[0]))x=(f[0]+h[0]+k[0]+e[0]-Math.min(f[0],h[0],k[0],e[0])-Math.max(f[0],h[0],k[0],e[0]))/2,f=r*x+u;else return null;return[x,f]}return null}n(r,1E10)?(x=f[0],f=q*x+v):n(q,1E10)?(x=k[0],f=r*x+u):(x=-(u-v)/(r-q),f=f[1]===h[1]?f[1]:k[1]===e[1]?k[1]:r*x+u);return[x,f]}p={getLength:function(f,h){var k=h.x-f.x,e=h.y-f.y;return Math.sqrt(k*k+e*e)},_getLength:function(f,h){var k=
h[0]-f[0],e=h[1]-f[1];return Math.sqrt(k*k+e*e)},getPointOnLine:g,getMidpoint:function(f,h){return g(f,h,.5)},_equals:n,_getLineIntersection:m,getLineIntersection:function(f,h,k,e,r){(f=m([f.x,f.y],[h.x,h.y],[k.x,k.y],[e.x,e.y]))&&(f=new d(f[0],f[1],r));return f},_getLineIntersection2:function(f,h){var k=f[0],e=f[1],r=h[0],q=h[1],u=k[0];k=k[1];var v=e[0];e=e[1];var x=r[0],z=r[1];r=q[0]-x;x=u-x;var A=v-u;q=q[1]-z;z=k-z;var y=e-k,c=q*A-r*y;if(0===c)return!1;r=(r*z-q*x)/c;x=(A*z-y*x)/c;return 0<=r&&
1>=r&&0<=x&&1>=x?[u+r*(v-u),k+r*(e-k)]:!1},_pointLineDistance:function(f,h){var k=h[0],e=h[1],r=k[0],q=k[1];k=f[0];var u=f[1],v=e[0]-r,x=e[1]-q,z=k-r,A=u-q;e=Math.sqrt;var y=Math.pow,c=e(y(v,2)+y(x,2));z=(z*v+A*x)/(c*c);q+=z*x;return e(y(k-(r+z*v),2)+y(u-q,2))}};B.mixin(B.getObject("geometry",!0,a),p);return p})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(B,
p,a,d,g,n,m,f,h,k){function e(){}function r(){}a={type:"multipoint",points:null};B=B(m,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(q){this.points=[];q&&(q.points?g.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(q){this.clearCache();p.isArray(q)?this.points.push(q):this.points.push([q.x,q.y]);return this},removePoint:function(q){if(this._validateInputs(q))return this.clearCache(),
new f(this.points.splice(q,1)[0],this.spatialReference)},getExtent:function(){var q=this.getCacheValue("_extent");if(q)return new h(q);q=this.points;var u=q.length;if(u){var v=q[0],x,z,A=x=v[0],y=z=v[1],c=Math.min,b=Math.max,l=this.spatialReference,t;for(t=0;t<u;t++){v=q[t];var w=v[0];v=v[1];A=c(A,w);y=c(y,v);x=b(x,w);z=b(z,v)}q={xmin:A,ymin:y,xmax:x,ymax:z,spatialReference:l?l.toJson():null};this.setCacheValue("_extent",q);return new h(q)}},_validateInputs:function(q){return null===q||0>q||q>=this.points.length?
!1:!0},getPoint:function(q){if(this._validateInputs(q))return q=this.points[q],new f(q[0],q[1],this.spatialReference)},setPoint:function(q,u){if(this._validateInputs(q))return this.clearCache(),this.points[q]=[u.x,u.y],this},toJson:function(){var q={points:g.clone2DArray(this.points)},u=this.spatialReference;u&&(q.spatialReference=u.toJson());return q}});e.prototype=B.prototype;r.prototype=new e;Object.defineProperty(r.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:g.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(q){this._pointsVal=q}});r.prototype.setupLazyUnquantization=function(q,u){this._unquantizeFn=q;this._pointsVal=u.points};B.simpleConstructor=e;B.accessorConstructor=r;B.defaultProps=a;p.setObject("geometry.Multipoint",B,d);d.geometry.defaultMultipoint=a;return B})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r){function q(){}function u(){}d={type:"polygon",rings:null};var v=B(f,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(x){this.rings=[];this._ring=0;x&&(a.isArray(x)?this.rings=a.isArray(x[0][0])?x:[x]:x.rings?n.mixin(this,x):this.spatialReference=x,this.spatialReference&&(this.spatialReference=r.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(x){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];a.isArray(x[0])?p.forEach(x,this._addPointArr,this):p.forEach(x,this._addPoint,this);return this},_addPointArr:function(x){this.rings[this._ring].push(x)},_addPoint:function(x){this.rings[this._ring].push([x.x,x.y])},_insertPoints:function(x,z){this.clearCache();this._ring=z;this.rings[this._ring]||(this.rings[this._ring]=[]);p.forEach(x,this._addPoint,this)},_validateInputs:function(x,z){return null!==x&&void 0!==x&&(0>x||x>=this.rings.length)||null!==z&&void 0!==x&&(0>z||z>=this.rings[x].length)?
!1:!0},getPoint:function(x,z){if(this._validateInputs(x,z))return new h(this.rings[x][z],this.spatialReference)},setPoint:function(x,z,A){if(this._validateInputs(x,z))return this.clearCache(),this.rings[x][z]=[A.x,A.y],this},insertPoint:function(x,z,A){if(this._validateInputs(x)&&null!=z&&0<=z&&z<=this.rings[x].length)return this.clearCache(),this.rings[x].splice(z,0,[A.x,A.y]),this},removeRing:function(x){if(this._validateInputs(x,null)){this.clearCache();x=this.rings.splice(x,1)[0];var z,A=x.length,
y=this.spatialReference;for(z=0;z<A;z++)x[z]=new h(x[z],y);return x}},removePoint:function(x,z){if(this._validateInputs(x,z))return this.clearCache(),new h(this.rings[x].splice(z,1)[0],this.spatialReference)},getExtent:function(){var x=this.getCacheValue("_extent");var z=this.getCacheValue("_partwise");if(x)return x=new k(x),x._partwise=z,x;x=this.rings;var A=x.length;if(A&&x[0].length){var y,c,b,l,t=y=x[0][0][0],w=c=x[0][0][1],C=Math.min,D=Math.max,E=this.spatialReference;z=[];var F,G;for(b=0;b<
A;b++){var H=x[b];var M=F=H[0]&&H[0][0];var X=G=H[0]&&H[0][1];var W=H.length;for(l=0;l<W;l++){var T=H[l];var K=T[0];T=T[1];t=C(t,K);w=C(w,T);y=D(y,K);c=D(c,T);M=C(M,K);X=C(X,T);F=D(F,K);G=D(G,T)}z.push(new k({xmin:M,ymin:X,xmax:F,ymax:G,spatialReference:E?E.toJson():null}))}x={xmin:t,ymin:w,xmax:y,ymax:c,spatialReference:E?E.toJson():null};z=1<z.length?z:null;this.setCacheValue("_extent",x);this.setCacheValue("_partwise",z);x=new k(x);x._partwise=z;return x}},contains:function(x){var z=this.rings,
A=!1,y,c,b,l=z.length;var t=this.spatialReference;var w=x.spatialReference;var C=x.x;x=x.y;t&&w&&!t.equals(w)&&t._canProject(w)&&(x=t.isWebMercator()?h.lngLatToXY(C,x):h.xyToLngLat(C,x,!0),C=x[0],x=x[1]);for(b=0;b<l;b++){t=z[b];var D=t.length;for(c=y=0;c<D;c++){y++;y===D&&(y=0);w=t[c];var E=t[y];(w[1]<x&&E[1]>=x||E[1]<x&&w[1]>=x)&&w[0]+(x-w[1])/(E[1]-w[1])*(E[0]-w[0])<C&&(A=!A)}}return A},getCentroid:function(){var x=this.getCacheValue("_centroid");if(void 0!==x)return x;x=this.rings;var z,A,y=[],
c,b,l=Infinity,t=-Infinity,w=Infinity,C=-Infinity;p.forEach(x,function(F){D=z=A=0;p.forEach(F,function(G,H){H<F.length-1&&(c=F[H+1],b=G[0]*c[1]-c[0]*G[1],D+=(G[0]+c[0])*b,z+=(G[1]+c[1])*b,A+=b,G[0]<l&&(l=G[0]),G[0]>t&&(t=G[0]),G[1]<w&&(w=G[1]),G[1]>C&&(C=G[1]))});0<A&&(A*=-1);A&&y.push([D,z,A/2])});y.sort(function(F,G){return F[2]-G[2]});var D=z=void 0;if(y[0]){var E=6*y[0][2];D=y[0][0]/E;z=y[0][1]/E;if(D<l||D>t||z<w||z>C)D=z=void 0}if(void 0===D||void 0===z)if(x=x[0]&&x[0].length?this._getLineCentroid(x[0]):
null)D=x.x,z=x.y;x=isNaN(D)||isNaN(z)?null:new h(D,z,this.spatialReference);this.setCacheValue("_centroid",x);return x},_getLineCentroid:function(x){var z=0,A=0,y=0,c={x:0,y:0},b={x:0,y:0},l,t=x.length,w;for(l=0;l<t-1;l++){var C=x[l];var D=x[l+1];if(C&&D){c.x=C[0];c.y=C[1];b.x=D[0];b.y=D[1];var E=e.getLength(c,b);0<E&&(z+=E,C=e.getMidpoint(C,D),A+=E*C[0],y+=E*C[1])}}0<z?w={x:A/z,y:y/z}:x[0]&&(w={x:x[0][0],y:x[0][1]});return w},isClockwise:function(x){var z=0,A,y=x.length,c=a.isArray(x[0])?function(b,
l){return b[0]*l[1]-l[0]*b[1]}:function(b,l){return b.x*l.y-l.x*b.y};for(A=0;A<y;A++)z+=c(x[A],x[(A+1)%y]);return 0>=z/2},isSelfIntersecting:function(x){x=x||this;var z,A,y,c,b,l=x.rings.length;for(y=0;y<l;y++){for(z=0;z<x.rings[y].length-1;z++){var t=[[x.rings[y][z][0],x.rings[y][z][1]],[x.rings[y][z+1][0],x.rings[y][z+1][1]]];for(A=y+1;A<l;A++)for(c=0;c<x.rings[A].length-1;c++){var w=[[x.rings[A][c][0],x.rings[A][c][1]],[x.rings[A][c+1][0],x.rings[A][c+1][1]]];if((b=e._getLineIntersection2(t,w))&&
!(b[0]===t[0][0]&&b[1]===t[0][1]||b[0]===w[0][0]&&b[1]===w[0][1]||b[0]===t[1][0]&&b[1]===t[1][1]||b[0]===w[1][0]&&b[1]===w[1][1]))return!0}}c=x.rings[y].length;if(!(4>=c))for(z=0;z<c-3;z++){var C=c-1;0===z&&(C=c-2);t=[[x.rings[y][z][0],x.rings[y][z][1]],[x.rings[y][z+1][0],x.rings[y][z+1][1]]];for(A=z+2;A<C;A++)if(w=[[x.rings[y][A][0],x.rings[y][A][1]],[x.rings[y][A+1][0],x.rings[y][A+1][1]]],(b=e._getLineIntersection2(t,w))&&!(b[0]===t[0][0]&&b[1]===t[0][1]||b[0]===w[0][0]&&b[1]===w[0][1]||b[0]===
t[1][0]&&b[1]===t[1][1]||b[0]===w[1][0]&&b[1]===w[1][1]))return!0}}return!1},toJson:function(){var x={rings:n.clone3DArray(this.rings)},z=this.spatialReference;z&&(x.spatialReference=z.toJson());return x}});q.prototype=v.prototype;u.prototype=new q;Object.defineProperty(u.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:n.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(x){this._ringsVal=x}});u.prototype.setupLazyUnquantization=
function(x,z){this._unquantizeFn=x;this._ringsVal=z.rings};v.simpleConstructor=q;v.accessorConstructor=u;v.defaultProps=d;v.createEllipse=function(x){var z=x.center.x,A=x.center.y,y=x.longAxis,c=x.shortAxis,b=x.numberOfPoints,l=x.map,t;x=[];var w=2*Math.PI/b;for(t=0;t<b;t++){var C=Math.cos(t*w);var D=Math.sin(t*w);C=l.toMap({x:y*C+z,y:c*D+A});x.push(C)}x.push(x[0]);z=new v(l.spatialReference);z.addRing(x);return z};v.createCircle=function(x){return v.createEllipse({center:x.center,longAxis:x.r,shortAxis:x.r,
numberOfPoints:x.numberOfPoints,map:x.map})};v.fromExtent=function(x){var z=x.normalize();x=x.spatialReference;return new v({rings:p.map(z,function(A){return[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]}),spatialReference:x?x.toJson():null})};a.setObject("geometry.Polygon",v,g);g.geometry.defaultPolygon=d;g.geometry.createEllipse=v.createEllipse;g.geometry.createCircle=v.createCircle;g.geometry.isClockwise=v.prototype.isClockwise;g.geometry.polygonSelfIntersecting=
v.prototype.isSelfIntersecting;return v})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(B,p,a,d,g,n,m,f,h,k,e){function r(){}function q(){}d={type:"polyline",paths:null};B=B(f,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(u){this.paths=[];this._path=0;u&&(a.isArray(u)?this.paths=a.isArray(u[0][0])?u:
[u]:u.paths?n.mixin(this,u):this.spatialReference=u,this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(u){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(u[0])?p.forEach(u,this._addPointArr,this):p.forEach(u,this._addPoint,this);return this},_addPointArr:function(u){this.paths[this._path].push(u)},_addPoint:function(u){this.paths[this._path].push([u.x,u.y])},_insertPoints:function(u,v){this.clearCache();
this._path=v;this.paths[this._path]||(this.paths[this._path]=[]);p.forEach(u,this._addPoint,this)},_validateInputs:function(u,v){return null!==u&&void 0!==u&&(0>u||u>=this.paths.length)||null!==v&&void 0!==u&&(0>v||v>=this.paths[u].length)?!1:!0},getPoint:function(u,v){if(this._validateInputs(u,v))return new h(this.paths[u][v],this.spatialReference)},setPoint:function(u,v,x){if(this._validateInputs(u,v))return this.clearCache(),this.paths[u][v]=[x.x,x.y],this},insertPoint:function(u,v,x){if(this._validateInputs(u)&&
null!=v&&0<=v&&v<=this.paths[u].length)return this.clearCache(),this.paths[u].splice(v,0,[x.x,x.y]),this},removePath:function(u){if(this._validateInputs(u,null)){this.clearCache();u=this.paths.splice(u,1)[0];var v,x=u.length,z=this.spatialReference;for(v=0;v<x;v++)u[v]=new h(u[v],z);return u}},removePoint:function(u,v){if(this._validateInputs(u,v))return this.clearCache(),new h(this.paths[u].splice(v,1)[0],this.spatialReference)},getExtent:function(){var u=this.getCacheValue("_extent");var v=this.getCacheValue("_partwise");
if(u)return u=new k(u),u._partwise=v,u;u=this.paths;var x=u.length;if(x&&u[0].length){var z,A,y,c,b=z=u[0][0][0],l=A=u[0][0][1],t=Math.min,w=Math.max,C=this.spatialReference;v=[];var D,E;for(y=0;y<x;y++){var F=u[y];var G=D=F[0]&&F[0][0];var H=E=F[0]&&F[0][1];var M=F.length;for(c=0;c<M;c++){var X=F[c];var W=X[0];X=X[1];b=t(b,W);l=t(l,X);z=w(z,W);A=w(A,X);G=t(G,W);H=t(H,X);D=w(D,W);E=w(E,X)}v.push(new k({xmin:G,ymin:H,xmax:D,ymax:E,spatialReference:C?C.toJson():null}))}u={xmin:b,ymin:l,xmax:z,ymax:A,
spatialReference:C?C.toJson():null};v=1<v.length?v:null;this.setCacheValue("_extent",u);this.setCacheValue("_partwise",v);u=new k(u);u._partwise=v;return u}},toJson:function(){var u={paths:n.clone3DArray(this.paths)},v=this.spatialReference;v&&(u.spatialReference=v.toJson());return u}});r.prototype=B.prototype;q.prototype=new r;Object.defineProperty(q.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:n.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=
null);return this._pathsVal},set:function(u){this._pathsVal=u}});q.prototype.setupLazyUnquantization=function(u,v){this._unquantizeFn=u;this._pathsVal=v.paths};B.simpleConstructor=r;B.accessorConstructor=q;B.defaultProps=d;a.setObject("geometry.Polyline",B,g);g.geometry.defaultPolyline=d;return B})},"esri/libs/luxon/luxon":function(){define(["exports"],function(B){function p(S,Z){for(var I=0;I<Z.length;I++){var V=Z[I];V.enumerable=V.enumerable||!1;V.configurable=!0;"value"in V&&(V.writable=!0);Object.defineProperty(S,
V.key,V)}}function a(S,Z,I){Z&&p(S.prototype,Z);I&&p(S,I);return S}function d(){d=Object.assign||function(S){for(var Z=1;Z<arguments.length;Z++){var I=arguments[Z],V;for(V in I)Object.prototype.hasOwnProperty.call(I,V)&&(S[V]=I[V])}return S};return d.apply(this,arguments)}function g(S,Z){S.prototype=Object.create(Z.prototype);S.prototype.constructor=S;m(S,Z)}function n(S){n=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)};return n(S)}function m(S,
Z){m=Object.setPrototypeOf||function(I,V){I.__proto__=V;return I};return m(S,Z)}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}function h(S,Z,I){h=f()?Reflect.construct:function(V,ba,la){var ua=[null];ua.push.apply(ua,ba);V=new (Function.bind.apply(V,ua));la&&m(V,la.prototype);return V};return h.apply(null,
arguments)}function k(S){var Z="function"===typeof Map?new Map:void 0;k=function(I){function V(){return h(I,arguments,n(this).constructor)}if(null===I||-1===Function.toString.call(I).indexOf("[native code]"))return I;if("function"!==typeof I)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof Z){if(Z.has(I))return Z.get(I);Z.set(I,V)}V.prototype=Object.create(I.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}});return m(V,I)};
return k(S)}function e(S,Z){if(S){if("string"===typeof S)return r(S,Z);var I=Object.prototype.toString.call(S).slice(8,-1);"Object"===I&&S.constructor&&(I=S.constructor.name);if("Map"===I||"Set"===I)return Array.from(S);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return r(S,Z)}}function r(S,Z){if(null==Z||Z>S.length)Z=S.length;for(var I=0,V=Array(Z);I<Z;I++)V[I]=S[I];return V}function q(S,Z){var I="undefined"!==typeof Symbol&&S[Symbol.iterator]||S["@@iterator"];if(I)return(I=
I.call(S)).next.bind(I);if(Array.isArray(S)||(I=e(S))||Z&&S&&"number"===typeof S.length){I&&(S=I);var V=0;return function(){return V>=S.length?{done:!0}:{done:!1,value:S[V++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function u(S){return"undefined"===typeof S}function v(S){return"number"===typeof S}function x(S){return"number"===typeof S&&0===S%1}function z(){try{return"undefined"!==
typeof Intl&&!!Intl.RelativeTimeFormat}catch(S){return!1}}function A(S,Z,I){if(0!==S.length)return S.reduce(function(V,ba){var la=[Z(ba),ba];return V?I(V[0],la[0])===V[0]?V:la:la},null)[1]}function y(S,Z){return Z.reduce(function(I,V){I[V]=S[V];return I},{})}function c(S,Z){return Object.prototype.hasOwnProperty.call(S,Z)}function b(S,Z,I){return x(S)&&S>=Z&&S<=I}function l(S,Z){void 0===Z&&(Z=2);var I=0>S?"-":"",V=I?-1*S:S;V=V.toString().length<Z?("0".repeat(Z)+V).slice(-Z):V.toString();return""+
I+V}function t(S){if(!u(S)&&null!==S&&""!==S)return parseInt(S,10)}function w(S){if(!u(S)&&null!==S&&""!==S)return S=1E3*parseFloat("0."+S),Math.floor(S)}function C(S,Z,I){void 0===I&&(I=!1);Z=Math.pow(10,Z);return(I?Math.trunc:Math.round)(S*Z)/Z}function D(S){return 0===S%4&&(0!==S%100||0===S%400)}function E(S,Z){var I=Z-1;I=I-12*Math.floor(I/12)+1;return 2===I?D(S+(Z-I)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][I-1]}function F(S){var Z=Date.UTC(S.year,S.month-1,S.day,S.hour,S.minute,S.second,
S.millisecond);100>S.year&&0<=S.year&&(Z=new Date(Z),Z.setUTCFullYear(Z.getUTCFullYear()-1900));return+Z}function G(S){var Z=S-1;Z=(Z+Math.floor(Z/4)-Math.floor(Z/100)+Math.floor(Z/400))%7;return 4===(S+Math.floor(S/4)-Math.floor(S/100)+Math.floor(S/400))%7||3===Z?53:52}function H(S){return 99<S?S:60<S?1900+S:2E3+S}function M(S,Z,I,V){void 0===V&&(V=null);S=new Date(S);var ba={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};V&&(ba.timeZone=V);Z=d({timeZoneName:Z},
ba);return(I=(new Intl.DateTimeFormat(I,Z)).formatToParts(S).find(function(la){return"timezonename"===la.type.toLowerCase()}))?I.value:null}function X(S,Z){var I=parseInt(S,10);Number.isNaN(I)&&(I=0);var V=parseInt(Z,10)||0;V=0>I||Object.is(I,-0)?-V:V;return 60*I+V}function W(S){var Z=Number(S);if("boolean"===typeof S||""===S||Number.isNaN(Z))throw new bb("Invalid unit value "+S);return Z}function T(S,Z){var I={},V;for(V in S)if(c(S,V)){var ba=S[V];void 0!==ba&&null!==ba&&(I[Z(V)]=W(ba))}return I}
function K(S,Z){var I=Math.trunc(Math.abs(S/60)),V=Math.trunc(Math.abs(S%60)),ba=0<=S?"+":"-";switch(Z){case "short":return""+ba+l(I,2)+":"+l(V,2);case "narrow":return""+ba+I+(0<V?":"+V:"");case "techie":return""+ba+l(I,2)+l(V,2);default:throw new RangeError("Value format "+Z+" is out of range for property format");}}function O(S){return y(S,["hour","minute","second","millisecond"])}function N(S){switch(S){case "narrow":return[].concat(Pc);case "short":return[].concat(Sb);case "long":return[].concat(Qc);
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function Y(S){switch(S){case "narrow":return[].concat(Rc);case "short":return[].concat(Tb);case "long":return[].concat(Ub);case "numeric":return"1234567".split("");default:return null}}function P(S){switch(S){case "narrow":return[].concat(Sc);case "short":return[].concat(Tc);case "long":return[].concat(Uc);default:return null}}function L(S,Z,I,V){void 0===
I&&(I="always");void 0===V&&(V=!1);var ba={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},la=-1===["hours","minutes","seconds"].indexOf(S);if("auto"===I&&la)switch(I="days"===S,Z){case 1:return I?"tomorrow":"next "+ba[S][0];case -1:return I?"yesterday":"last "+ba[S][0];case 0:return I?"today":"this "+ba[S][0]}I=Object.is(Z,-0)||0>Z;Z=Math.abs(Z);la=1===
Z;var ua=ba[S];S=V?la?ua[1]:ua[2]||ua[1]:la?ba[S][0]:S;return I?Z+" "+S+" ago":"in "+Z+" "+S}function Q(S,Z){for(var I="",V=q(S),ba;!(ba=V()).done;)ba=ba.value,I=ba.literal?I+ba.val:I+Z(ba.val);return I}function ca(S,Z){var I;if(u(S)||null===S)return Z;if(S instanceof lb)return S;if("string"===typeof S){var V=S.toLowerCase();return"local"===V||"system"===V?Z:"utc"===V||"gmt"===V?cb.utcInstance:null!=(I=fb.parseGMTOffset(S))?cb.instance(I):fb.isValidSpecifier(V)?fb.create(S):cb.parseSpecifier(V)||
new Db(S)}return v(S)?cb.instance(S):"object"===typeof S&&S.offset&&"number"===typeof S.offset?S:new Db(S)}function ha(S,Z){void 0===Z&&(Z={});var I=JSON.stringify([S,Z]),V=Eb[I];V||(V=new Intl.DateTimeFormat(S,Z),Eb[I]=V);return V}function ja(S){for(var Z=[],I=1;12>=I;I++){var V=Ua.utc(2016,I,1);Z.push(S(V))}return Z}function ma(S){for(var Z=[],I=1;7>=I;I++){var V=Ua.utc(2016,11,13+I);Z.push(S(V))}return Z}function R(S,Z,I,V,ba){S=S.listingMode(I);return"error"===S?null:"en"===S?V(Z):ba(Z)}function fa(){for(var S=
arguments.length,Z=Array(S),I=0;I<S;I++)Z[I]=arguments[I];S=Z.reduce(function(V,ba){return V+ba.source},"");return RegExp("^"+S+"$")}function ka(){for(var S=arguments.length,Z=Array(S),I=0;I<S;I++)Z[I]=arguments[I];return function(V){return Z.reduce(function(ba,la){var ua=ba[0],ya=ba[1],Ea=la(V,ba[2]),Ia=Ea[1],Oa=Ea[2];return[d({},ua,Ea[0]),ya||Ia,Oa]},[{},null,1]).slice(0,2)}}function qa(S){if(null==S)return[null,null];for(var Z=arguments.length,I=Array(1<Z?Z-1:0),V=1;V<Z;V++)I[V-1]=arguments[V];
for(Z=0;Z<I.length;Z++){var ba=I[Z];V=ba[1];if(ba=ba[0].exec(S))return V(ba)}return[null,null]}function na(){for(var S=arguments.length,Z=Array(S),I=0;I<S;I++)Z[I]=arguments[I];return function(V,ba){var la={},ua;for(ua=0;ua<Z.length;ua++)la[Z[ua]]=t(V[ba+ua]);return[la,null,ba+ua]}}function ia(S,Z,I){S=S[Z];return u(S)?I:t(S)}function ea(S,Z){return[{year:ia(S,Z),month:ia(S,Z+1,1),day:ia(S,Z+2,1)},null,Z+3]}function oa(S,Z){return[{hours:ia(S,Z,0),minutes:ia(S,Z+1,0),seconds:ia(S,Z+2,0),milliseconds:w(S[Z+
3])},null,Z+4]}function ta(S,Z){var I=!S[Z]&&!S[Z+1],V=X(S[Z+1],S[Z+2]);return[{},I?null:cb.instance(V),Z+3]}function ra(S,Z){return[{},S[Z]?fb.create(S[Z]):null,Z+1]}function aa(S){var Z=S[2],I=S[3],V=S[4],ba=S[5],la=S[6],ua=S[7],ya=S[8],Ea="-"===S[0][0],Ia=ua&&"-"===ua[0],Oa=function(Sa,Pa){void 0===Pa&&(Pa=!1);return void 0!==Sa&&(Pa||Sa&&Ea)?-Sa:Sa};return[{years:Oa(t(S[1])),months:Oa(t(Z)),weeks:Oa(t(I)),days:Oa(t(V)),hours:Oa(t(ba)),minutes:Oa(t(la)),seconds:Oa(t(ua),"-0"===ua),milliseconds:Oa(w(ya),
Ia)}]}function da(S,Z,I,V,ba,la,ua){Z={year:2===Z.length?H(t(Z)):t(Z),month:Sb.indexOf(I)+1,day:t(V),hour:t(ba),minute:t(la)};ua&&(Z.second=t(ua));S&&(Z.weekday=3<S.length?Ub.indexOf(S)+1:Tb.indexOf(S)+1);return Z}function J(S){var Z=S[8],I=S[9],V=S[10],ba=S[11];S=da(S[1],S[4],S[3],S[2],S[5],S[6],S[7]);Z=Z?Vc[Z]:I?0:X(V,ba);return[S,new cb(Z)]}function sa(S){return[da(S[1],S[4],S[3],S[2],S[5],S[6],S[7]),cb.utcInstance]}function wa(S){return[da(S[1],S[7],S[2],S[3],S[4],S[5],S[6]),cb.utcInstance]}function U(S,
Z,I){void 0===I&&(I=!1);S={values:I?Z.values:d({},S.values,Z.values||{}),loc:S.loc.clone(Z.loc),conversionAccuracy:Z.conversionAccuracy||S.conversionAccuracy};return new Za(S)}function La(S,Z,I,V,ba){S=S[ba][I];var la=Z[I]/S;la=Math.sign(la)!==Math.sign(V[ba])&&0!==V[ba]&&1>=Math.abs(la)?0>la?Math.floor(la):Math.ceil(la):Math.trunc(la);V[ba]+=la;Z[I]-=la*S}function Ha(S,Z){Wc.reduce(function(I,V){if(u(Z[V]))return I;I&&La(S,Z,I,Z,V);return V},null)}function pa(S){if(v(S))return Za.fromMillis(S);if(Za.isDuration(S))return S;
if("object"===typeof S)return Za.fromObject(S);throw new bb("Unknown duration argument "+S+" of type "+typeof S);}function Qa(S,Z){var I=function(V){return V.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};I=I(Z)-I(S);return Math.floor(Za.fromMillis(I).as("days"))}function Ga(S,Z,I){for(var V={},ba,la,ua=0,ya=[["years",function(Pa,Ra){return Ra.year-Pa.year}],["quarters",function(Pa,Ra){return Ra.quarter-Pa.quarter}],["months",function(Pa,Ra){return Ra.month-Pa.month+12*(Ra.year-Pa.year)}],
["weeks",function(Pa,Ra){var db=Qa(Pa,Ra);return(db-db%7)/7}],["days",Qa]];ua<ya.length;ua++){var Ea=ya[ua],Ia=Ea[0];Ea=Ea[1];if(0<=I.indexOf(Ia)){var Oa;ba=Ia;Ea=Ea(S,Z);la=S.plus((Oa={},Oa[Ia]=Ea,Oa));if(la>Z){var Sa;S=S.plus((Sa={},Sa[Ia]=Ea-1,Sa));--Ea}else S=la;V[Ia]=Ea}}return[S,V,la,ba]}function va(S,Z,I,V){var ba=Ga(S,Z,I);S=ba[0];var la=ba[1],ua=ba[2],ya=ba[3];ba=Z-S;I=I.filter(function(Oa){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Oa)});if(0===I.length){if(ua<Z){var Ea;
ua=S.plus((Ea={},Ea[ya]=1,Ea))}ua!==S&&(la[ya]=(la[ya]||0)+ba/(ua-S))}Z=Za.fromObject(la,V);if(0<I.length){var Ia;return(Ia=Za.fromMillis(ba,V)).shiftTo.apply(Ia,I).plus(Z)}return Z}function za(S,Z){var I=S.numberingSystem;void 0===Z&&(Z="");return new RegExp(""+Fb[I||"latn"]+Z)}function Ba(S,Z){void 0===Z&&(Z=function(I){return I});return{regex:S,deser:function(I){var V=Z;I=I[0];var ba=parseInt(I,10);if(isNaN(ba)){ba="";for(var la=0;la<I.length;la++){var ua=I.charCodeAt(la);if(-1!==I[la].search(Fb.hanidec))ba+=
Xc.indexOf(I[la]);else for(Ia in Vb){var ya=Vb[Ia],Ea=ya[0];ya=ya[1];ua>=Ea&&ua<=ya&&(ba+=ua-Ea)}}var Ia=parseInt(ba,10)}else Ia=ba;return V(Ia)}}}function Fa(S){return S.replace(/\./g,"\\.?").replace(Gb,Wb)}function xa(S,Z){return null===S?null:{regex:RegExp(S.map(Fa).join("|")),deser:function(I){var V=I[0];return S.findIndex(function(ba){return V.replace(/\./g,"").replace(Gb," ").toLowerCase()===ba.replace(/\./g,"").replace(Gb," ").toLowerCase()})+Z}}}function Da(S,Z){return{regex:S,deser:function(I){return X(I[1],
I[2])},groups:Z}}function Aa(S){return{regex:S,deser:function(Z){return Z[0]}}}function Ja(S,Z){var I=za(Z),V=za(Z,"{2}"),ba=za(Z,"{3}"),la=za(Z,"{4}"),ua=za(Z,"{6}"),ya=za(Z,"{1,2}"),Ea=za(Z,"{1,3}"),Ia=za(Z,"{1,6}"),Oa=za(Z,"{1,9}"),Sa=za(Z,"{2,4}"),Pa=za(Z,"{4,6}"),Ra=function(ab){return{regex:RegExp(ab.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Yc){return Yc[0]},literal:!0}},db=function(ab){if(S.literal)return Ra(ab);switch(ab.val){case "G":return xa(Z.eras("short",!1),
0);case "GG":return xa(Z.eras("long",!1),0);case "y":return Ba(Ia);case "yy":return Ba(Sa,H);case "yyyy":return Ba(la);case "yyyyy":return Ba(Pa);case "yyyyyy":return Ba(ua);case "M":return Ba(ya);case "MM":return Ba(V);case "MMM":return xa(Z.months("short",!0,!1),1);case "MMMM":return xa(Z.months("long",!0,!1),1);case "L":return Ba(ya);case "LL":return Ba(V);case "LLL":return xa(Z.months("short",!1,!1),1);case "LLLL":return xa(Z.months("long",!1,!1),1);case "d":return Ba(ya);case "dd":return Ba(V);
case "o":return Ba(Ea);case "ooo":return Ba(ba);case "HH":return Ba(V);case "H":return Ba(ya);case "hh":return Ba(V);case "h":return Ba(ya);case "mm":return Ba(V);case "m":return Ba(ya);case "q":return Ba(ya);case "qq":return Ba(V);case "s":return Ba(ya);case "ss":return Ba(V);case "S":return Ba(Ea);case "SSS":return Ba(ba);case "u":return Aa(Oa);case "a":return xa(Z.meridiems(),0);case "kkkk":return Ba(la);case "kk":return Ba(Sa,H);case "W":return Ba(ya);case "WW":return Ba(V);case "E":case "c":return Ba(I);
case "EEE":return xa(Z.weekdays("short",!1,!1),1);case "EEEE":return xa(Z.weekdays("long",!1,!1),1);case "ccc":return xa(Z.weekdays("short",!0,!1),1);case "cccc":return xa(Z.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Da(new RegExp("([+-]"+ya.source+")(?::("+V.source+"))?"),2);case "ZZZ":return Da(new RegExp("([+-]"+ya.source+")("+V.source+")?"),2);case "z":return Aa(/[a-z_+-/]{1,256}?/i);default:return Ra(ab)}}(S)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};db.token=
S;return db}function Ka(S){return["^"+S.map(function(Z){return Z.regex}).reduce(function(Z,I){return Z+"("+I.source+")"},"")+"$",S]}function Ma(S,Z,I){if(S=S.match(Z)){Z={};var V=1,ba;for(ba in I)if(c(I,ba)){var la=I[ba],ua=la.groups?la.groups+1:1;!la.literal&&la.token&&(Z[la.token.val[0]]=la.deser(S.slice(V,V+ua)));V+=ua}return[S,Z]}return[S,{}]}function Ca(S){var Z=function(V){switch(V){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";
case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};var I=u(S.Z)?u(S.z)?null:fb.create(S.z):new cb(S.Z);u(S.q)||(S.M=3*(S.q-1)+1);u(S.h)||(12>S.h&&1===S.a?S.h+=12:12===S.h&&0===S.a&&(S.h=0));0===S.G&&S.y&&(S.y=-S.y);u(S.u)||(S.S=w(S.u));return[Object.keys(S).reduce(function(V,ba){var la=Z(ba);la&&(V[la]=S[ba]);return V},{}),I]}function Na(){Hb||
(Hb=Ua.fromMillis(1555555555555));return Hb}function Ta(S,Z){if(S.literal)return S;var I=gb.macroTokenToFormatOpts(S.val);if(!I)return S;var V=gb.create(Z,I).formatDateTimeParts(Na()).map(function(ba){var la=ba.type;ba=ba.value;"literal"===la?la={literal:!0,val:ba}:(ba=I[la],la=Zc[la],"object"===typeof la&&(la=la[ba]),la=la?{literal:!1,val:la}:void 0);return la});return V.includes(void 0)?S:V}function Wa(S,Z){var I;return(I=Array.prototype).concat.apply(I,S.map(function(V){return Ta(V,Z)}))}function jb(S,
Z,I){I=Wa(gb.parseFormat(I),S);var V=I.map(function(Ea){return Ja(Ea,S)}),ba=V.find(function(Ea){return Ea.invalidReason});if(ba)return{input:Z,tokens:I,invalidReason:ba.invalidReason};ba=Ka(V);V=RegExp(ba[0],"i");var la=Ma(Z,V,ba[1]);ba=la[0];var ua=(la=la[1])?Ca(la):[null,null],ya=ua[0];ua=ua[1];if(c(la,"a")&&c(la,"H"))throw new ob("Can't include meridiem when specifying 24-hour format");return{input:Z,tokens:I,regex:V,rawMatches:ba,matches:la,result:ya,zone:ua}}function $a(S,Z){return new eb("unit out of range",
"you specified "+Z+" (of type "+typeof Z+") as a "+S+", which is invalid")}function vb(S,Z,I){S=(new Date(Date.UTC(S,Z-1,I))).getUTCDay();return 0===S?7:S}function wb(S,Z){var I=D(S)?Ib:Jb,V=I.findIndex(function(ba){return ba<Z});return{month:V+1,day:Z-I[V]}}function hb(S){var Z=S.year,I=S.month,V=S.day;var ba=V+(D(Z)?Ib:Jb)[I-1];I=vb(Z,I,V);ba=Math.floor((ba-I+10)/7);1>ba?(--Z,ba=G(Z)):ba>G(Z)&&(Z+=1,ba=1);return d({weekYear:Z,weekNumber:ba,weekday:I},O(S))}function xb(S){var Z=S.weekYear,I=S.weekNumber,
V=S.weekday,ba=vb(Z,1,4),la=D(Z)?366:365;I=7*I+V-ba-3;1>I?(la=Z-1,I+=D(la)?366:365):I>la?(la=Z+1,I-=D(Z)?366:365):la=Z;Z=wb(la,I);return d({year:la,month:Z.month,day:Z.day},O(S))}function pb(S){var Z=S.year;var I=S.month;I=S.day+(D(Z)?Ib:Jb)[I-1];return d({year:Z,ordinal:I},O(S))}function Xa(S){var Z=S.year,I=wb(Z,S.ordinal);return d({year:Z,month:I.month,day:I.day},O(S))}function Xb(S){var Z=x(S.year),I=b(S.month,1,12),V=b(S.day,1,E(S.year,S.month));return Z?I?V?!1:$a("day",S.day):$a("month",S.month):
$a("year",S.year)}function Yb(S){var Z=S.hour,I=S.minute,V=S.second;S=S.millisecond;var ba=b(Z,0,23)||24===Z&&0===I&&0===V&&0===S,la=b(I,0,59),ua=b(V,0,59),ya=b(S,0,999);return ba?la?ua?ya?!1:$a("millisecond",S):$a("second",V):$a("minute",I):$a("hour",Z)}function yb(S){return new eb("unsupported zone",'the zone "'+S.name+'" is not supported')}function Kb(S){null===S.weekData&&(S.weekData=hb(S.c));return S.weekData}function qb(S,Z){var I={ts:S.ts,zone:S.zone,c:S.c,o:S.o,loc:S.loc,invalid:S.invalid};
return new Ua(d({},I,Z,{old:I}))}function Zb(S,Z,I){var V=S-6E4*Z,ba=I.offset(V);if(Z===ba)return[V,Z];V-=6E4*(ba-Z);Z=I.offset(V);return ba===Z?[V,ba]:[S-6E4*Math.min(ba,Z),Math.max(ba,Z)]}function $b(S,Z){var I=new Date(S+6E4*Z);return{year:I.getUTCFullYear(),month:I.getUTCMonth()+1,day:I.getUTCDate(),hour:I.getUTCHours(),minute:I.getUTCMinutes(),second:I.getUTCSeconds(),millisecond:I.getUTCMilliseconds()}}function zb(S,Z,I){return Zb(F(S),Z,I)}function ac(S,Z){var I=S.o,V=S.c.year+Math.trunc(Z.years),
ba=S.c.month+Math.trunc(Z.months)+3*Math.trunc(Z.quarters);ba=d({},S.c,{year:V,month:ba,day:Math.min(S.c.day,E(V,ba))+Math.trunc(Z.days)+7*Math.trunc(Z.weeks)});V=Za.fromObject({years:Z.years-Math.trunc(Z.years),quarters:Z.quarters-Math.trunc(Z.quarters),months:Z.months-Math.trunc(Z.months),weeks:Z.weeks-Math.trunc(Z.weeks),days:Z.days-Math.trunc(Z.days),hours:Z.hours,minutes:Z.minutes,seconds:Z.seconds,milliseconds:Z.milliseconds}).as("milliseconds");ba=F(ba);ba=Zb(ba,I,S.zone);I=ba[0];ba=ba[1];
0!==V&&(I+=V,ba=S.zone.offset(I));return{ts:I,o:ba}}function rb(S,Z,I,V,ba){var la=I.setZone,ua=I.zone;return S&&0!==Object.keys(S).length?(S=Ua.fromObject(S,d({},I,{zone:Z||ua})),la?S:S.setZone(ua)):Ua.invalid(new eb("unparsable",'the input "'+ba+"\" can't be parsed as "+V))}function mb(S,Z,I){void 0===I&&(I=!0);return S.isValid?gb.create(Ya.create("en-US"),{allowZ:I,forceSimple:!0}).formatDateTimeFromString(S,Z):null}function bc(S,Z){var I=Z.suppressSeconds,V=Z.suppressMilliseconds;V=void 0===V?
!1:V;var ba=Z.includeOffset,la=Z.includePrefix;la=void 0===la?!1:la;var ua=Z.includeZone;ua=void 0===ua?!1:ua;var ya=Z.spaceZone,Ea=Z.format;Ea=void 0===Ea?"extended":Ea;var Ia="basic"===Ea?"HHmm":"HH:mm";void 0!==I&&I&&0===S.second&&0===S.millisecond||(Ia+="basic"===Ea?"ss":":ss",V&&0===S.millisecond||(Ia+=".SSS"));(ua||ba)&&(void 0===ya?0:ya)&&(Ia+=" ");ua?Ia+="z":ba&&(Ia+="basic"===Ea?"ZZZ":"ZZ");I=mb(S,Ia);la&&(I="T"+I);return I}function cc(S){var Z={year:"year",years:"year",month:"month",months:"month",
day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[S.toLowerCase()];if(!Z)throw new dc(S);return Z}function ec(S,Z){var I=ca(Z.zone,Va.defaultZone),V=Ya.fromObject(Z),ba=Va.now();
if(!u(S.year)){var la=q(fc);for(var ua;!(ua=la()).done;)ua=ua.value,u(S[ua])&&(S[ua]=gc[ua]);if(la=Xb(S)||Yb(S))return Ua.invalid(la);ba=I.offset(ba);la=zb(S,ba,I);ba=la[0];la=la[1]}return new Ua({ts:ba,zone:I,loc:V,o:la})}function hc(S,Z,I){var V=u(I.round)?!0:I.round,ba=function(Ia,Oa){Ia=C(Ia,V||I.calendary?0:2,!0);return Z.loc.clone(I).relFormatter(I).format(Ia,Oa)},la=function(Ia){return I.calendary?Z.hasSame(S,Ia)?0:Z.startOf(Ia).diff(S.startOf(Ia),Ia).get(Ia):Z.diff(S,Ia).get(Ia)};if(I.unit)return ba(la(I.unit),
I.unit);for(var ua=q(I.units),ya;!(ya=ua()).done;){ya=ya.value;var Ea=la(ya);if(1<=Math.abs(Ea))return ba(Ea,ya)}return ba(S>Z?-0:0,I.units[I.units.length-1])}function ic(S){var Z={};0<S.length&&"object"===typeof S[S.length-1]?(Z=S[S.length-1],S=Array.from(S).slice(0,S.length-1)):S=Array.from(S);return[Z,S]}function sb(S){if(Ua.isDateTime(S))return S;if(S&&S.valueOf&&v(S.valueOf()))return Ua.fromJSDate(S);if(S&&"object"===typeof S)return Ua.fromObject(S);throw new bb("Unknown datetime argument: "+
S+", of type "+typeof S);}var kb=function(S){function Z(){return S.apply(this,arguments)||this}g(Z,S);return Z}(k(Error)),$c=function(S){function Z(I){return S.call(this,"Invalid DateTime: "+I.toMessage())||this}g(Z,S);return Z}(kb),ad=function(S){function Z(I){return S.call(this,"Invalid Interval: "+I.toMessage())||this}g(Z,S);return Z}(kb),bd=function(S){function Z(I){return S.call(this,"Invalid Duration: "+I.toMessage())||this}g(Z,S);return Z}(kb),ob=function(S){function Z(){return S.apply(this,
arguments)||this}g(Z,S);return Z}(kb),dc=function(S){function Z(I){return S.call(this,"Invalid unit "+I)||this}g(Z,S);return Z}(kb),bb=function(S){function Z(){return S.apply(this,arguments)||this}g(Z,S);return Z}(kb),ib=function(S){function Z(){return S.call(this,"Zone is an abstract class")||this}g(Z,S);return Z}(kb),Lb={year:"numeric",month:"numeric",day:"numeric"},jc={year:"numeric",month:"short",day:"numeric"},cd={year:"numeric",month:"short",day:"numeric",weekday:"short"},kc={year:"numeric",
month:"long",day:"numeric"},lc={year:"numeric",month:"long",day:"numeric",weekday:"long"},mc={hour:"numeric",minute:"numeric"},nc={hour:"numeric",minute:"numeric",second:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},qc={hour:"numeric",minute:"numeric",hourCycle:"h23"},rc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",
hourCycle:"h23",timeZoneName:"short"},tc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},uc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},wc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",
month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},zc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",
second:"numeric",timeZoneName:"long"},Cc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,Qc="January February March April May June July August September October November December".split(" "),Sb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pc="JFMAMJJASOND".split(""),Ub="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Tb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Rc="MTWTFSS".split(""),Dc=["AM","PM"],Uc=["Before Christ","Anno Domini"],Tc=["BC",
"AD"],Sc=["B","A"],ed={D:Lb,DD:jc,DDD:kc,DDDD:lc,t:mc,tt:nc,ttt:oc,tttt:pc,T:qc,TT:rc,TTT:sc,TTTT:tc,f:uc,ff:wc,fff:yc,ffff:Ac,F:vc,FF:xc,FFF:zc,FFFF:Bc},gb=function(){function S(I,V){this.opts=V;this.loc=I;this.systemLoc=null}S.create=function(I,V){void 0===V&&(V={});return new S(I,V)};S.parseFormat=function(I){for(var V=null,ba="",la=!1,ua=[],ya=0;ya<I.length;ya++){var Ea=I.charAt(ya);"'"===Ea?(0<ba.length&&ua.push({literal:la,val:ba}),V=null,ba="",la=!la):la?ba+=Ea:Ea===V?ba+=Ea:(0<ba.length&&
ua.push({literal:!1,val:ba}),V=ba=Ea)}0<ba.length&&ua.push({literal:la,val:ba});return ua};S.macroTokenToFormatOpts=function(I){return ed[I]};var Z=S.prototype;Z.formatWithSystemDefault=function(I,V){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(I,d({},this.opts,V)).format()};Z.formatDateTime=function(I,V){void 0===V&&(V={});return this.loc.dtFormatter(I,d({},this.opts,V)).format()};Z.formatDateTimeParts=function(I,V){void 0===V&&(V={});return this.loc.dtFormatter(I,
d({},this.opts,V)).formatToParts()};Z.resolvedOptions=function(I,V){void 0===V&&(V={});return this.loc.dtFormatter(I,d({},this.opts,V)).resolvedOptions()};Z.num=function(I,V){void 0===V&&(V=0);if(this.opts.forceSimple)return l(I,V);var ba=d({},this.opts);0<V&&(ba.padTo=V);return this.loc.numberFormatter(ba).format(I)};Z.formatDateTimeFromString=function(I,V){var ba=this,la="en"===this.loc.listingMode(),ua=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ya=function(Pa,Ra){return ba.loc.extract(I,
Pa,Ra)},Ea=function(Pa){return I.isOffsetFixed&&0===I.offset&&Pa.allowZ?"Z":I.isValid?I.zone.formatOffset(I.ts,Pa.format):""},Ia=function(Pa,Ra){return la?N(Pa)[I.month-1]:ya(Ra?{month:Pa}:{month:Pa,day:"numeric"},"month")},Oa=function(Pa,Ra){return la?Y(Pa)[I.weekday-1]:ya(Ra?{weekday:Pa}:{weekday:Pa,month:"long",day:"numeric"},"weekday")},Sa=function(Pa){return la?P(Pa)[0>I.year?0:1]:ya({era:Pa},"era")};return Q(S.parseFormat(V),function(Pa){switch(Pa){case "S":return ba.num(I.millisecond);case "u":case "SSS":return ba.num(I.millisecond,
3);case "s":return ba.num(I.second);case "ss":return ba.num(I.second,2);case "m":return ba.num(I.minute);case "mm":return ba.num(I.minute,2);case "h":return ba.num(0===I.hour%12?12:I.hour%12);case "hh":return ba.num(0===I.hour%12?12:I.hour%12,2);case "H":return ba.num(I.hour);case "HH":return ba.num(I.hour,2);case "Z":return Ea({format:"narrow",allowZ:ba.opts.allowZ});case "ZZ":return Ea({format:"short",allowZ:ba.opts.allowZ});case "ZZZ":return Ea({format:"techie",allowZ:ba.opts.allowZ});case "ZZZZ":return I.zone.offsetName(I.ts,
{format:"short",locale:ba.loc.locale});case "ZZZZZ":return I.zone.offsetName(I.ts,{format:"long",locale:ba.loc.locale});case "z":return I.zoneName;case "a":return la?Dc[12>I.hour?0:1]:ya({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ua?ya({day:"numeric"},"day"):ba.num(I.day);case "dd":return ua?ya({day:"2-digit"},"day"):ba.num(I.day,2);case "c":return ba.num(I.weekday);case "ccc":return Oa("short",!0);case "cccc":return Oa("long",!0);case "ccccc":return Oa("narrow",!0);case "E":return ba.num(I.weekday);
case "EEE":return Oa("short",!1);case "EEEE":return Oa("long",!1);case "EEEEE":return Oa("narrow",!1);case "L":return ua?ya({month:"numeric",day:"numeric"},"month"):ba.num(I.month);case "LL":return ua?ya({month:"2-digit",day:"numeric"},"month"):ba.num(I.month,2);case "LLL":return Ia("short",!0);case "LLLL":return Ia("long",!0);case "LLLLL":return Ia("narrow",!0);case "M":return ua?ya({month:"numeric"},"month"):ba.num(I.month);case "MM":return ua?ya({month:"2-digit"},"month"):ba.num(I.month,2);case "MMM":return Ia("short",
!1);case "MMMM":return Ia("long",!1);case "MMMMM":return Ia("narrow",!1);case "y":return ua?ya({year:"numeric"},"year"):ba.num(I.year);case "yy":return ua?ya({year:"2-digit"},"year"):ba.num(I.year.toString().slice(-2),2);case "yyyy":return ua?ya({year:"numeric"},"year"):ba.num(I.year,4);case "yyyyyy":return ua?ya({year:"numeric"},"year"):ba.num(I.year,6);case "G":return Sa("short");case "GG":return Sa("long");case "GGGGG":return Sa("narrow");case "kk":return ba.num(I.weekYear.toString().slice(-2),
2);case "kkkk":return ba.num(I.weekYear,4);case "W":return ba.num(I.weekNumber);case "WW":return ba.num(I.weekNumber,2);case "o":return ba.num(I.ordinal);case "ooo":return ba.num(I.ordinal,3);case "q":return ba.num(I.quarter);case "qq":return ba.num(I.quarter,2);case "X":return ba.num(Math.floor(I.ts/1E3));case "x":return ba.num(I.ts);default:var Ra=S.macroTokenToFormatOpts(Pa);Pa=Ra?ba.formatWithSystemDefault(I,Ra):Pa;return Pa}})};Z.formatDurationFromString=function(I,V){var ba=this,la=function(Ea){switch(Ea[0]){case "S":return"millisecond";
case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}},ua=S.parseFormat(V),ya=ua.reduce(function(Ea,Ia){var Oa=Ia.val;return Ia.literal?Ea:Ea.concat(Oa)},[]);ya=I.shiftTo.apply(I,ya.map(la).filter(function(Ea){return Ea}));return Q(ua,function(Ea){return function(Ia){var Oa=la(Ia);return Oa?ba.num(Ea.get(Oa),Ia.length):Ia}}(ya))};return S}(),eb=function(){function S(Z,I){this.reason=Z;this.explanation=
I}S.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return S}(),lb=function(){function S(){}var Z=S.prototype;Z.offsetName=function(I,V){throw new ib;};Z.formatOffset=function(I,V){throw new ib;};Z.offset=function(I){throw new ib;};Z.equals=function(I){throw new ib;};a(S,[{key:"type",get:function(){throw new ib;}},{key:"name",get:function(){throw new ib;}},{key:"isUniversal",get:function(){throw new ib;}},{key:"isValid",get:function(){throw new ib;
}}]);return S}(),Mb=null,Ec=function(S){function Z(){return S.apply(this,arguments)||this}g(Z,S);var I=Z.prototype;I.offsetName=function(V,ba){return M(V,ba.format,ba.locale)};I.formatOffset=function(V,ba){return K(this.offset(V),ba)};I.offset=function(V){return-(new Date(V)).getTimezoneOffset()};I.equals=function(V){return"system"===V.type};a(Z,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},
{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Mb&&(Mb=new Z);return Mb}}]);return Z}(lb),fd=RegExp("^"+Cc.source+"$"),Ab={},gd={year:0,month:1,day:2,hour:3,minute:4,second:5},Bb={},fb=function(S){function Z(V){var ba=S.call(this)||this;ba.zoneName=V;ba.valid=Z.isValidZone(V);return ba}g(Z,S);Z.create=function(V){Bb[V]||(Bb[V]=new Z(V));return Bb[V]};Z.resetCache=function(){Bb={};Ab={}};Z.isValidSpecifier=function(V){return!(!V||!V.match(fd))};Z.isValidZone=function(V){try{return(new Intl.DateTimeFormat("en-US",
{timeZone:V})).format(),!0}catch(ba){return!1}};Z.parseGMTOffset=function(V){return V&&(V=V.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(V[1]):null};var I=Z.prototype;I.offsetName=function(V,ba){return M(V,ba.format,ba.locale,this.name)};I.formatOffset=function(V,ba){return K(this.offset(V),ba)};I.offset=function(V){V=new Date(V);if(isNaN(V))return NaN;var ba=this.name;Ab[ba]||(Ab[ba]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:ba,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",
minute:"2-digit",second:"2-digit"}));ba=Ab[ba];if(ba.formatToParts){ba=ba.formatToParts(V);for(var la=[],ua=0;ua<ba.length;ua++){var ya=ba[ua],Ea=ya.value;ya=gd[ya.type];u(ya)||(la[ya]=parseInt(Ea,10))}ba=la}else ba=ba.format(V).replace(/\u200E/g,""),ba=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(ba),ba=[ba[3],ba[1],ba[2],ba[4],ba[5],ba[6]];ba=F({year:ba[0],month:ba[1],day:ba[2],hour:ba[3],minute:ba[4],second:ba[5],millisecond:0});V=+V;la=V%1E3;return(ba-(V-(0<=la?la:1E3+la)))/6E4};I.equals=function(V){return"iana"===
V.type&&V.name===this.name};a(Z,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return Z}(lb),Nb=null,cb=function(S){function Z(V){var ba=S.call(this)||this;ba.fixed=V;return ba}g(Z,S);Z.instance=function(V){return 0===V?Z.utcInstance:new Z(V)};Z.parseSpecifier=function(V){return V&&(V=V.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Z(X(V[1],V[2])):null};
var I=Z.prototype;I.offsetName=function(){return this.name};I.formatOffset=function(V,ba){return K(this.fixed,ba)};I.offset=function(){return this.fixed};I.equals=function(V){return"fixed"===V.type&&V.fixed===this.fixed};a(Z,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+K(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Nb&&(Nb=new Z(0));
return Nb}}]);return Z}(lb),Db=function(S){function Z(V){var ba=S.call(this)||this;ba.zoneName=V;return ba}g(Z,S);var I=Z.prototype;I.offsetName=function(){return null};I.formatOffset=function(){return""};I.offset=function(){return NaN};I.equals=function(){return!1};a(Z,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return Z}(lb),Fc=function(){return Date.now()},
Gc="system",Hc=null,Ic=null,Jc=null,Kc,Va=function(){function S(){}S.resetCaches=function(){Ya.resetCache();fb.resetCache()};a(S,null,[{key:"now",get:function(){return Fc},set:function(Z){Fc=Z}},{key:"defaultZone",get:function(){return ca(Gc,Ec.instance)},set:function(Z){Gc=Z}},{key:"defaultLocale",get:function(){return Hc},set:function(Z){Hc=Z}},{key:"defaultNumberingSystem",get:function(){return Ic},set:function(Z){Ic=Z}},{key:"defaultOutputCalendar",get:function(){return Jc},set:function(Z){Jc=
Z}},{key:"throwOnInvalid",get:function(){return Kc},set:function(Z){Kc=Z}}]);return S}(),hd=["base"],Eb={},Ob={},Pb={},Cb=null,id=function(){function S(Z,I,V){this.padTo=V.padTo||0;this.floor=V.floor||!1;if(!I){I={useGrouping:!1};0<V.padTo&&(I.minimumIntegerDigits=V.padTo);V=I;void 0===V&&(V={});I=JSON.stringify([Z,V]);var ba=Ob[I];ba||(ba=new Intl.NumberFormat(Z,V),Ob[I]=ba);this.inf=ba}}S.prototype.format=function(Z){if(this.inf)return this.inf.format(this.floor?Math.floor(Z):Z);Z=this.floor?Math.floor(Z):
C(Z,3);return l(Z,this.padTo)};return S}(),jd=function(){function S(I,V,ba){this.opts=ba;if(I.zone.isUniversal){var la=I.offset/60*-1;la=0<=la?"Etc/GMT+"+la:"Etc/GMT"+la;var ua=fb.isValidZone(la);0!==I.offset&&ua?this.dt=I:(la="UTC",this.dt=ba.timeZoneName?I:0===I.offset?I:Ua.fromMillis(I.ts+6E4*I.offset))}else"system"===I.zone.type?this.dt=I:(this.dt=I,la=I.zone.name);I=d({},this.opts);la&&(I.timeZone=la);this.dtf=ha(V,I)}var Z=S.prototype;Z.format=function(){return this.dtf.format(this.dt.toJSDate())};
Z.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};Z.resolvedOptions=function(){return this.dtf.resolvedOptions()};return S}(),kd=function(){function S(I,V,ba){this.opts=d({style:"long"},ba);if(!V&&z()){V=ba;void 0===V&&(V={});ba=V;ba.base;if(null==ba)ba={};else{var la={},ua=Object.keys(ba),ya;for(ya=0;ya<ua.length;ya++){var Ea=ua[ya];0<=hd.indexOf(Ea)||(la[Ea]=ba[Ea])}ba=la}ba=JSON.stringify([I,ba]);la=Pb[ba];la||(la=new Intl.RelativeTimeFormat(I,V),Pb[ba]=la);this.rtf=
la}}var Z=S.prototype;Z.format=function(I,V){return this.rtf?this.rtf.format(I,V):L(V,I,this.opts.numeric,"long"!==this.opts.style)};Z.formatToParts=function(I,V){return this.rtf?this.rtf.formatToParts(I,V):[]};return S}(),Ya=function(){function S(I,V,ba,la){var ua=I.indexOf("-u-");if(-1===ua)I=[I];else{ua=I.substring(0,ua);try{var ya=ha(I).resolvedOptions()}catch(Ea){ya=ha(ua).resolvedOptions()}I=ya;I=[ua,I.numberingSystem,I.calendar]}ya=I[1];ua=I[2];this.locale=I[0];this.numberingSystem=V||ya||
null;this.outputCalendar=ba||ua||null;V=this.locale;ba=this.numberingSystem;if((I=this.outputCalendar)||ba)V+="-u",I&&(V+="-ca-"+I),ba&&(V+="-nu-"+ba);this.intl=V;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=la;this.fastNumbersCached=null}S.fromOpts=function(I){return S.create(I.locale,I.numberingSystem,I.outputCalendar,I.defaultToEN)};S.create=function(I,V,ba,la){void 0===la&&(la=!1);I=I||Va.defaultLocale;
var ua;(ua=I)||(la?la="en-US":(Cb||(Cb=(new Intl.DateTimeFormat).resolvedOptions().locale),la=Cb),ua=la);return new S(ua,V||Va.defaultNumberingSystem,ba||Va.defaultOutputCalendar,I)};S.resetCache=function(){Cb=null;Eb={};Ob={};Pb={}};S.fromObject=function(I){I=void 0===I?{}:I;return S.create(I.locale,I.numberingSystem,I.outputCalendar)};var Z=S.prototype;Z.listingMode=function(I){I=this.isEnglish();var V=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===
this.outputCalendar);return I&&V?"en":"intl"};Z.clone=function(I){return I&&0!==Object.getOwnPropertyNames(I).length?S.create(I.locale||this.specifiedLocale,I.numberingSystem||this.numberingSystem,I.outputCalendar||this.outputCalendar,I.defaultToEN||!1):this};Z.redefaultToEN=function(I){void 0===I&&(I={});return this.clone(d({},I,{defaultToEN:!0}))};Z.redefaultToSystem=function(I){void 0===I&&(I={});return this.clone(d({},I,{defaultToEN:!1}))};Z.months=function(I,V,ba){var la=this;void 0===V&&(V=
!1);void 0===ba&&(ba=!0);return R(this,I,ba,N,function(){var ua=V?{month:I,day:"numeric"}:{month:I},ya=V?"format":"standalone";la.monthsCache[ya][I]||(la.monthsCache[ya][I]=ja(function(Ea){return la.extract(Ea,ua,"month")}));return la.monthsCache[ya][I]})};Z.weekdays=function(I,V,ba){var la=this;void 0===V&&(V=!1);void 0===ba&&(ba=!0);return R(this,I,ba,Y,function(){var ua=V?{weekday:I,year:"numeric",month:"long",day:"numeric"}:{weekday:I},ya=V?"format":"standalone";la.weekdaysCache[ya][I]||(la.weekdaysCache[ya][I]=
ma(function(Ea){return la.extract(Ea,ua,"weekday")}));return la.weekdaysCache[ya][I]})};Z.meridiems=function(I){var V=this;void 0===I&&(I=!0);return R(this,void 0,I,function(){return Dc},function(){if(!V.meridiemCache){var ba={hour:"numeric",hourCycle:"h12"};V.meridiemCache=[Ua.utc(2016,11,13,9),Ua.utc(2016,11,13,19)].map(function(la){return V.extract(la,ba,"dayperiod")})}return V.meridiemCache})};Z.eras=function(I,V){var ba=this;void 0===V&&(V=!0);return R(this,I,V,P,function(){var la={era:I};ba.eraCache[I]||
(ba.eraCache[I]=[Ua.utc(-40,1,1),Ua.utc(2017,1,1)].map(function(ua){return ba.extract(ua,la,"era")}));return ba.eraCache[I]})};Z.extract=function(I,V,ba){return(I=this.dtFormatter(I,V).formatToParts().find(function(la){return la.type.toLowerCase()===ba}))?I.value:null};Z.numberFormatter=function(I){void 0===I&&(I={});return new id(this.intl,I.forceSimple||this.fastNumbers,I)};Z.dtFormatter=function(I,V){void 0===V&&(V={});return new jd(I,this.intl,V)};Z.relFormatter=function(I){void 0===I&&(I={});
return new kd(this.intl,this.isEnglish(),I)};Z.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};Z.equals=function(I){return this.locale===I.locale&&this.numberingSystem===I.numberingSystem&&this.outputCalendar===I.outputCalendar};a(S,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var I=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||
!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=I}return this.fastNumbersCached}}]);return S}(),Lc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Mc=RegExp(""+Qb.source+Lc.source+"?"),Rb=RegExp("(?:T"+Mc.source+")?"),ld=na("weekYear","weekNumber","weekDay"),md=na("year","ordinal"),Nc=RegExp(Qb.source+" ?(?:"+Lc.source+"|("+Cc.source+"))?"),nd=RegExp("(?: "+
Nc.source+")?"),od=RegExp("^T?"+Qb.source+"$"),pd=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Vc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},qd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,rd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,
sd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,td=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,ud=fa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Rb),vd=fa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Rb),wd=fa(/(\d{4})-?(\d{3})/,Rb),xd=fa(Mc),yd=ka(ea,oa,ta),zd=ka(ld,oa,ta),Ad=ka(md,oa,ta),Bd=ka(oa,ta),Cd=ka(oa),Dd=fa(/(\d{4})-(\d\d)-(\d\d)/,
nd),Ed=fa(Nc),Fd=ka(ea,oa,ta,ra),Gd=ka(oa,ta,ra),Oc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Hd=d({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},
months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Oc),Id=d({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Oc),nb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),
Wc=nb.slice(0).reverse(),Za=function(){function S(I){var V="longterm"===I.conversionAccuracy||!1;this.values=I.values;this.loc=I.loc||Ya.create();this.conversionAccuracy=V?"longterm":"casual";this.invalid=I.invalid||null;this.matrix=V?Id:Hd;this.isLuxonDuration=!0}S.fromMillis=function(I,V){return S.fromObject({milliseconds:I},V)};S.fromObject=function(I,V){void 0===V&&(V={});if(null==I||"object"!==typeof I)throw new bb("Duration.fromObject: argument expected to be an object, got "+(null===I?"null":
typeof I));return new S({values:T(I,S.normalizeUnit),loc:Ya.fromObject(V),conversionAccuracy:V.conversionAccuracy})};S.fromISO=function(I,V){var ba=qa(I,[pd,aa])[0];return ba?S.fromObject(ba,V):S.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")};S.fromISOTime=function(I,V){var ba=qa(I,[od,Cd])[0];return ba?S.fromObject(ba,V):S.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")};S.invalid=function(I,V){void 0===V&&(V=null);if(!I)throw new bb("need to specify a reason the Duration is invalid");
var ba=I instanceof eb?I:new eb(I,V);if(Va.throwOnInvalid)throw new bd(ba);return new S({invalid:ba})};S.normalizeUnit=function(I){var V={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[I?I.toLowerCase():I];if(!V)throw new dc(I);return V};S.isDuration=
function(I){return I&&I.isLuxonDuration||!1};var Z=S.prototype;Z.toFormat=function(I,V){void 0===V&&(V={});var ba=d({},V,{floor:!1!==V.round&&!1!==V.floor});return this.isValid?gb.create(this.loc,ba).formatDurationFromString(this,I):"Invalid Duration"};Z.toObject=function(){return this.isValid?d({},this.values):{}};Z.toISO=function(){if(!this.isValid)return null;var I="P";0!==this.years&&(I+=this.years+"Y");if(0!==this.months||0!==this.quarters)I+=this.months+3*this.quarters+"M";0!==this.weeks&&(I+=
this.weeks+"W");0!==this.days&&(I+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)I+="T";0!==this.hours&&(I+=this.hours+"H");0!==this.minutes&&(I+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)I+=C(this.seconds+this.milliseconds/1E3,3)+"S";"P"===I&&(I+="T0S");return I};Z.toISOTime=function(I){void 0===I&&(I={});if(!this.isValid)return null;var V=this.toMillis();if(0>V||864E5<=V)return null;I=d({suppressMilliseconds:!1,suppressSeconds:!1,
includePrefix:!1,format:"extended"},I);V=this.shiftTo("hours","minutes","seconds","milliseconds");var ba="basic"===I.format?"hhmm":"hh:mm";I.suppressSeconds&&0===V.seconds&&0===V.milliseconds||(ba+="basic"===I.format?"ss":":ss",I.suppressMilliseconds&&0===V.milliseconds||(ba+=".SSS"));V=V.toFormat(ba);I.includePrefix&&(V="T"+V);return V};Z.toJSON=function(){return this.toISO()};Z.toString=function(){return this.toISO()};Z.toMillis=function(){return this.as("milliseconds")};Z.valueOf=function(){return this.toMillis()};
Z.plus=function(I){if(!this.isValid)return this;I=pa(I);for(var V={},ba=q(nb),la;!(la=ba()).done;)if(la=la.value,c(I.values,la)||c(this.values,la))V[la]=I.get(la)+this.get(la);return U(this,{values:V},!0)};Z.minus=function(I){if(!this.isValid)return this;I=pa(I);return this.plus(I.negate())};Z.mapUnits=function(I){if(!this.isValid)return this;for(var V={},ba=0,la=Object.keys(this.values);ba<la.length;ba++){var ua=la[ba];V[ua]=W(I(this.values[ua],ua))}return U(this,{values:V},!0)};Z.get=function(I){return this[S.normalizeUnit(I)]};
Z.set=function(I){if(!this.isValid)return this;I=d({},this.values,T(I,S.normalizeUnit));return U(this,{values:I})};Z.reconfigure=function(I){var V=void 0===I?{}:I;I=V.conversionAccuracy;V={loc:this.loc.clone({locale:V.locale,numberingSystem:V.numberingSystem})};I&&(V.conversionAccuracy=I);return U(this,V)};Z.as=function(I){return this.isValid?this.shiftTo(I).get(I):NaN};Z.normalize=function(){if(!this.isValid)return this;var I=this.toObject();Ha(this.matrix,I);return U(this,{values:I},!0)};Z.shiftTo=
function(){for(var I=arguments.length,V=Array(I),ba=0;ba<I;ba++)V[ba]=arguments[ba];if(!this.isValid||0===V.length)return this;V=V.map(function(db){return S.normalizeUnit(db)});I={};ba={};for(var la=this.toObject(),ua,ya=q(nb),Ea;!(Ea=ya()).done;)if(Ea=Ea.value,0<=V.indexOf(Ea)){ua=Ea;var Ia=0,Oa;for(Oa in ba)Ia+=this.matrix[Oa][Ea]*ba[Oa],ba[Oa]=0;v(la[Ea])&&(Ia+=la[Ea]);var Sa=Math.trunc(Ia);I[Ea]=Sa;ba[Ea]=Ia-Sa;for(var Pa in la)nb.indexOf(Pa)>nb.indexOf(Ea)&&La(this.matrix,la,Pa,I,Ea)}else v(la[Ea])&&
(ba[Ea]=la[Ea]);for(var Ra in ba)0!==ba[Ra]&&(I[ua]+=Ra===ua?ba[Ra]:ba[Ra]/this.matrix[ua][Ra]);return U(this,{values:I},!0).normalize()};Z.negate=function(){if(!this.isValid)return this;for(var I={},V=0,ba=Object.keys(this.values);V<ba.length;V++){var la=ba[V];I[la]=-this.values[la]}return U(this,{values:I},!0)};Z.equals=function(I){if(!this.isValid||!I.isValid||!this.loc.equals(I.loc))return!1;for(var V=q(nb),ba;!(ba=V()).done;){var la=ba.value;ba=this.values[la];la=I.values[la];ba=void 0===ba||
0===ba?void 0===la||0===la:ba===la;if(!ba)return!1}return!0};a(S,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?
this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",
get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return S}(),tb=function(){function S(I){this.s=I.start;this.e=I.end;this.invalid=I.invalid||null;this.isLuxonInterval=!0}S.invalid=function(I,V){void 0===V&&(V=null);if(!I)throw new bb("need to specify a reason the Interval is invalid");var ba=I instanceof eb?I:new eb(I,V);if(Va.throwOnInvalid)throw new ad(ba);return new S({invalid:ba})};S.fromDateTimes=
function(I,V){var ba=sb(I),la=sb(V);var ua=ba&&ba.isValid?la&&la.isValid?la<ba?tb.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+ba.toISO()+" and end\x3d"+la.toISO()):null:tb.invalid("missing or invalid end"):tb.invalid("missing or invalid start");return null==ua?new S({start:ba,end:la}):ua};S.after=function(I,V){var ba=pa(V),la=sb(I);return S.fromDateTimes(la,la.plus(ba))};S.before=function(I,V){var ba=pa(V),la=sb(I);return S.fromDateTimes(la.minus(ba),
la)};S.fromISO=function(I,V){var ba=(I||"").split("/",2),la=ba[0];ba=ba[1];if(la&&ba){try{var ua=Ua.fromISO(la,V);var ya=ua.isValid}catch(Oa){ya=!1}try{var Ea=Ua.fromISO(ba,V);var Ia=Ea.isValid}catch(Oa){Ia=!1}if(ya&&Ia)return S.fromDateTimes(ua,Ea);if(ya){if(Ea=Za.fromISO(ba,V),Ea.isValid)return S.after(ua,Ea)}else if(Ia&&(ua=Za.fromISO(la,V),ua.isValid))return S.before(Ea,ua)}return S.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")};S.isInterval=function(I){return I&&I.isLuxonInterval||
!1};var Z=S.prototype;Z.length=function(I){void 0===I&&(I="milliseconds");return this.isValid?this.toDuration.apply(this,[I]).get(I):NaN};Z.count=function(I){void 0===I&&(I="milliseconds");if(!this.isValid)return NaN;var V=this.start.startOf(I),ba=this.end.startOf(I);return Math.floor(ba.diff(V,I).get(I))+1};Z.hasSame=function(I){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,I):!1};Z.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};Z.isAfter=function(I){return this.isValid?
this.s>I:!1};Z.isBefore=function(I){return this.isValid?this.e<=I:!1};Z.contains=function(I){return this.isValid?this.s<=I&&this.e>I:!1};Z.set=function(I){I=void 0===I?{}:I;return this.isValid?S.fromDateTimes(I.start||this.s,I.end||this.e):this};Z.splitAt=function(){var I=this;if(!this.isValid)return[];for(var V=arguments.length,ba=Array(V),la=0;la<V;la++)ba[la]=arguments[la];V=ba.map(sb).filter(function(Ea){return I.contains(Ea)}).sort();ba=[];la=this.s;for(var ua=0;la<this.e;){var ya=V[ua]||this.e;
ya=+ya>+this.e?this.e:ya;ba.push(S.fromDateTimes(la,ya));la=ya;ua+=1}return ba};Z.splitBy=function(I){I=pa(I);if(!this.isValid||!I.isValid||0===I.as("milliseconds"))return[];for(var V=this.s,ba=1,la,ua=[];V<this.e;)la=this.start.plus(I.mapUnits(function(ya){return ya*ba})),la=+la>+this.e?this.e:la,ua.push(S.fromDateTimes(V,la)),V=la,ba+=1;return ua};Z.divideEqually=function(I){return this.isValid?this.splitBy(this.length()/I).slice(0,I):[]};Z.overlaps=function(I){return this.e>I.s&&this.s<I.e};Z.abutsStart=
function(I){return this.isValid?+this.e===+I.s:!1};Z.abutsEnd=function(I){return this.isValid?+I.e===+this.s:!1};Z.engulfs=function(I){return this.isValid?this.s<=I.s&&this.e>=I.e:!1};Z.equals=function(I){return this.isValid&&I.isValid?this.s.equals(I.s)&&this.e.equals(I.e):!1};Z.intersection=function(I){if(!this.isValid)return this;var V=this.s>I.s?this.s:I.s;I=this.e<I.e?this.e:I.e;return V>=I?null:S.fromDateTimes(V,I)};Z.union=function(I){return this.isValid?S.fromDateTimes(this.s<I.s?this.s:I.s,
this.e>I.e?this.e:I.e):this};S.merge=function(I){var V=I.sort(function(ba,la){return ba.s-la.s}).reduce(function(ba,la){var ua=ba[0],ya=ba[1];return ya?ya.overlaps(la)||ya.abutsStart(la)?[ua,ya.union(la)]:[ua.concat([ya]),la]:[ua,la]},[[],null]);I=V[0];(V=V[1])&&I.push(V);return I};S.xor=function(I){var V,ba=null,la=0,ua=[];I=I.map(function(ya){return[{time:ya.s,type:"s"},{time:ya.e,type:"e"}]});I=(V=Array.prototype).concat.apply(V,I).sort(function(ya,Ea){return ya.time-Ea.time});for(V=q(I);!(I=V()).done;)I=
I.value,la+="s"===I.type?1:-1,1===la?ba=I.time:(ba&&+ba!==+I.time&&ua.push(S.fromDateTimes(ba,I.time)),ba=null);return S.merge(ua)};Z.difference=function(){for(var I=this,V=arguments.length,ba=Array(V),la=0;la<V;la++)ba[la]=arguments[la];return S.xor([this].concat(ba)).map(function(ua){return I.intersection(ua)}).filter(function(ua){return ua&&!ua.isEmpty()})};Z.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};Z.toISO=function(I){return this.isValid?
this.s.toISO(I)+"/"+this.e.toISO(I):"Invalid Interval"};Z.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};Z.toISOTime=function(I){return this.isValid?this.s.toISOTime(I)+"/"+this.e.toISOTime(I):"Invalid Interval"};Z.toFormat=function(I,V){var ba=(void 0===V?{}:V).separator;ba=void 0===ba?" \u2013 ":ba;return this.isValid?""+this.s.toFormat(I)+ba+this.e.toFormat(I):"Invalid Interval"};Z.toDuration=function(I,V){return this.isValid?this.e.diff(this.s,
I,V):Za.invalid(this.invalidReason)};Z.mapEndpoints=function(I){return S.fromDateTimes(I(this.s),I(this.e))};a(S,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return S}(),ub=function(){function S(){}
S.hasDST=function(Z){void 0===Z&&(Z=Va.defaultZone);var I=Ua.now().setZone(Z).set({month:12});return!Z.isUniversal&&I.offset!==I.set({month:6}).offset};S.isValidIANAZone=function(Z){return fb.isValidSpecifier(Z)&&fb.isValidZone(Z)};S.normalizeZone=function(Z){return ca(Z,Va.defaultZone)};S.months=function(Z,I){void 0===Z&&(Z="long");var V=void 0===I?{}:I,ba=V.locale,la=V.numberingSystem,ua=V.locObj;V=V.outputCalendar;return((void 0===ua?null:ua)||Ya.create(void 0===ba?null:ba,void 0===la?null:la,
void 0===V?"gregory":V)).months(Z)};S.monthsFormat=function(Z,I){void 0===Z&&(Z="long");var V=void 0===I?{}:I,ba=V.locale,la=V.numberingSystem,ua=V.locObj;V=V.outputCalendar;return((void 0===ua?null:ua)||Ya.create(void 0===ba?null:ba,void 0===la?null:la,void 0===V?"gregory":V)).months(Z,!0)};S.weekdays=function(Z,I){void 0===Z&&(Z="long");var V=void 0===I?{}:I,ba=V.locale,la=V.numberingSystem;V=V.locObj;return((void 0===V?null:V)||Ya.create(void 0===ba?null:ba,void 0===la?null:la,null)).weekdays(Z)};
S.weekdaysFormat=function(Z,I){void 0===Z&&(Z="long");var V=void 0===I?{}:I,ba=V.locale,la=V.numberingSystem;V=V.locObj;return((void 0===V?null:V)||Ya.create(void 0===ba?null:ba,void 0===la?null:la,null)).weekdays(Z,!0)};S.meridiems=function(Z){Z=(void 0===Z?{}:Z).locale;return Ya.create(void 0===Z?null:Z).meridiems()};S.eras=function(Z,I){void 0===Z&&(Z="short");var V=(void 0===I?{}:I).locale;return Ya.create(void 0===V?null:V,null,"gregory").eras(Z)};S.features=function(){return{relative:z()}};
return S}(),Fb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Vb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xc=Fb.hanidec.replace(/[\[|\]]/g,"").split(""),Wb="( |"+String.fromCharCode(160)+")",Gb=new RegExp(Wb,"g"),Zc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Hb=null,Jb=[0,31,59,90,120,151,181,212,243,273,304,334],Ib=[0,31,60,91,121,152,182,213,244,274,305,335],gc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Jd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},
Kd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fc="year month day hour minute second millisecond".split(" "),Ld="weekYear weekNumber weekday hour minute second millisecond".split(" "),Md="year ordinal hour minute second millisecond".split(" "),Ua=function(){function S(I){var V=I.zone||Va.defaultZone,ba=I.invalid||(Number.isNaN(I.ts)?new eb("invalid input"):null)||(V.isValid?null:yb(V));this.ts=u(I.ts)?Va.now():I.ts;var la=null,ua=null;ba||(I.old&&I.old.ts===this.ts&&I.old.zone.equals(V)?(ua=
[I.old.c,I.old.o],la=ua[0],ua=ua[1]):(ua=V.offset(this.ts),la=$b(this.ts,ua),la=(ba=Number.isNaN(la.year)?new eb("invalid input"):null)?null:la,ua=ba?null:ua));this._zone=V;this.loc=I.loc||Ya.create();this.invalid=ba;this.weekData=null;this.c=la;this.o=ua;this.isLuxonDateTime=!0}S.now=function(){return new S({})};S.local=function(){var I=ic(arguments),V=I[1];return ec({year:V[0],month:V[1],day:V[2],hour:V[3],minute:V[4],second:V[5],millisecond:V[6]},I[0])};S.utc=function(){var I=ic(arguments),V=I[0],
ba=I[1];I=ba[0];var la=ba[1],ua=ba[2],ya=ba[3],Ea=ba[4],Ia=ba[5];ba=ba[6];V.zone=cb.utcInstance;return ec({year:I,month:la,day:ua,hour:ya,minute:Ea,second:Ia,millisecond:ba},V)};S.fromJSDate=function(I,V){void 0===V&&(V={});var ba="[object Date]"===Object.prototype.toString.call(I)?I.valueOf():NaN;if(Number.isNaN(ba))return S.invalid("invalid input");var la=ca(V.zone,Va.defaultZone);return la.isValid?new S({ts:ba,zone:la,loc:Ya.fromObject(V)}):S.invalid(yb(la))};S.fromMillis=function(I,V){void 0===
V&&(V={});if(v(I))return-864E13>I||864E13<I?S.invalid("Timestamp out of range"):new S({ts:I,zone:ca(V.zone,Va.defaultZone),loc:Ya.fromObject(V)});throw new bb("fromMillis requires a numerical input, but received a "+typeof I+" with value "+I);};S.fromSeconds=function(I,V){void 0===V&&(V={});if(v(I))return new S({ts:1E3*I,zone:ca(V.zone,Va.defaultZone),loc:Ya.fromObject(V)});throw new bb("fromSeconds requires a numerical input");};S.fromObject=function(I,V){void 0===V&&(V={});I=I||{};var ba=ca(V.zone,
Va.defaultZone);if(!ba.isValid)return S.invalid(yb(ba));var la=Va.now(),ua=ba.offset(la),ya=T(I,cc),Ea=!u(ya.ordinal),Ia=!u(ya.year),Oa=!u(ya.month)||!u(ya.day);Ia=Ia||Oa;var Sa=ya.weekYear||ya.weekNumber,Pa=Ya.fromObject(V);if((Ia||Ea)&&Sa)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Oa&&Ea)throw new ob("Can't mix ordinal dates with month/day");Oa=Sa||ya.weekday&&!Ia;Sa=$b(la,ua);if(Oa){var Ra=Ld;la=Jd;Sa=hb(Sa)}else Ea?(Ra=Md,la=Kd,Sa=pb(Sa)):(Ra=fc,la=
gc);var db=!1;Ra=q(Ra);for(var ab;!(ab=Ra()).done;)ab=ab.value,u(ya[ab])?ya[ab]=db?la[ab]:Sa[ab]:db=!0;Oa?(la=x(ya.weekYear),Sa=b(ya.weekNumber,1,G(ya.weekYear)),db=b(ya.weekday,1,7),la=la?Sa?db?!1:$a("weekday",ya.weekday):$a("week",ya.week):$a("weekYear",ya.weekYear)):Ea?(la=x(ya.year),Sa=b(ya.ordinal,1,D(ya.year)?366:365),la=la?Sa?!1:$a("ordinal",ya.ordinal):$a("year",ya.year)):la=Xb(ya);if(la=la||Yb(ya))return S.invalid(la);Ea=Oa?xb(ya):Ea?Xa(ya):ya;ua=zb(Ea,ua,ba);ba=new S({ts:ua[0],zone:ba,o:ua[1],
loc:Pa});return ya.weekday&&Ia&&I.weekday!==ba.weekday?S.invalid("mismatched weekday","you can't specify both a weekday of "+ya.weekday+" and a date of "+ba.toISO()):ba};S.fromISO=function(I,V){void 0===V&&(V={});var ba=qa(I,[ud,yd],[vd,zd],[wd,Ad],[xd,Bd]);return rb(ba[0],ba[1],V,"ISO 8601",I)};S.fromRFC2822=function(I,V){void 0===V&&(V={});var ba=qa(I.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[qd,J]);return rb(ba[0],ba[1],V,"RFC 2822",I)};S.fromHTTP=function(I,V){void 0===
V&&(V={});var ba=qa(I,[rd,sa],[sd,sa],[td,wa]);return rb(ba[0],ba[1],V,"HTTP",V)};S.fromFormat=function(I,V,ba){void 0===ba&&(ba={});if(u(I)||u(V))throw new bb("fromFormat requires an input string and a format");var la=ba,ua=la.locale;la=la.numberingSystem;ua=Ya.fromOpts({locale:void 0===ua?null:ua,numberingSystem:void 0===la?null:la,defaultToEN:!0});ua=jb(ua,I,V);var ya=[ua.result,ua.zone,ua.invalidReason];ua=ya[0];la=ya[1];return(ya=ya[2])?S.invalid(ya):rb(ua,la,ba,"format "+V,I)};S.fromString=
function(I,V,ba){void 0===ba&&(ba={});return S.fromFormat(I,V,ba)};S.fromSQL=function(I,V){void 0===V&&(V={});var ba=qa(I,[Dd,Fd],[Ed,Gd]);return rb(ba[0],ba[1],V,"SQL",I)};S.invalid=function(I,V){void 0===V&&(V=null);if(!I)throw new bb("need to specify a reason the DateTime is invalid");var ba=I instanceof eb?I:new eb(I,V);if(Va.throwOnInvalid)throw new $c(ba);return new S({invalid:ba})};S.isDateTime=function(I){return I&&I.isLuxonDateTime||!1};var Z=S.prototype;Z.get=function(I){return this[I]};
Z.resolvedLocaleOptions=function(I){void 0===I&&(I={});I=gb.create(this.loc.clone(I),I).resolvedOptions(this);return{locale:I.locale,numberingSystem:I.numberingSystem,outputCalendar:I.calendar}};Z.toUTC=function(I,V){void 0===I&&(I=0);void 0===V&&(V={});return this.setZone(cb.instance(I),V)};Z.toLocal=function(){return this.setZone(Va.defaultZone)};Z.setZone=function(I,V){var ba=void 0===V?{}:V,la=ba.keepLocalTime;la=void 0===la?!1:la;ba=ba.keepCalendarTime;ba=void 0===ba?!1:ba;I=ca(I,Va.defaultZone);
if(I.equals(this.zone))return this;if(I.isValid){var ua=this.ts;if(la||ba)la=I.offset(this.ts),ba=this.toObject(),ua=zb(ba,la,I)[0];return qb(this,{ts:ua,zone:I})}return S.invalid(yb(I))};Z.reconfigure=function(I){I=void 0===I?{}:I;I=this.loc.clone({locale:I.locale,numberingSystem:I.numberingSystem,outputCalendar:I.outputCalendar});return qb(this,{loc:I})};Z.setLocale=function(I){return this.reconfigure({locale:I})};Z.set=function(I){if(!this.isValid)return this;I=T(I,cc);var V=!u(I.weekYear)||!u(I.weekNumber)||
!u(I.weekday),ba=!u(I.ordinal),la=!u(I.year),ua=!u(I.month)||!u(I.day),ya=I.weekYear||I.weekNumber;if((la||ua||ba)&&ya)throw new ob("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ua&&ba)throw new ob("Can't mix ordinal dates with month/day");V?V=xb(d({},hb(this.c),I)):u(I.ordinal)?(V=d({},this.toObject(),I),u(I.day)&&(V.day=Math.min(E(V.year,V.month),V.day))):V=Xa(d({},pb(this.c),I));I=zb(V,this.o,this.zone);return qb(this,{ts:I[0],o:I[1]})};Z.plus=function(I){if(!this.isValid)return this;
I=pa(I);return qb(this,ac(this,I))};Z.minus=function(I){if(!this.isValid)return this;I=pa(I).negate();return qb(this,ac(this,I))};Z.startOf=function(I){if(!this.isValid)return this;var V={};I=Za.normalizeUnit(I);switch(I){case "years":V.month=1;case "quarters":case "months":V.day=1;case "weeks":case "days":V.hour=0;case "hours":V.minute=0;case "minutes":V.second=0;case "seconds":V.millisecond=0}"weeks"===I&&(V.weekday=1);"quarters"===I&&(V.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(V)};
Z.endOf=function(I){var V;return this.isValid?this.plus((V={},V[I]=1,V)).startOf(I).minus(1):this};Z.toFormat=function(I,V){void 0===V&&(V={});return this.isValid?gb.create(this.loc.redefaultToEN(V)).formatDateTimeFromString(this,I):"Invalid DateTime"};Z.toLocaleString=function(I,V){void 0===I&&(I=Lb);void 0===V&&(V={});return this.isValid?gb.create(this.loc.clone(V),I).formatDateTime(this):"Invalid DateTime"};Z.toLocaleParts=function(I){void 0===I&&(I={});return this.isValid?gb.create(this.loc.clone(I),
I).formatDateTimeParts(this):[]};Z.toISO=function(I){void 0===I&&(I={});return this.isValid?this.toISODate(I)+"T"+this.toISOTime(I):null};Z.toISODate=function(I){I=(void 0===I?{}:I).format;I="basic"===(void 0===I?"extended":I)?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(I="+"+I);return mb(this,I)};Z.toISOWeekDate=function(){return mb(this,"kkkk-'W'WW-c")};Z.toISOTime=function(I){var V=void 0===I?{}:I;I=V.suppressMilliseconds;var ba=V.suppressSeconds,la=V.includeOffset,ua=V.includePrefix;V=V.format;return bc(this,
{suppressSeconds:void 0===ba?!1:ba,suppressMilliseconds:void 0===I?!1:I,includeOffset:void 0===la?!0:la,includePrefix:void 0===ua?!1:ua,format:void 0===V?"extended":V})};Z.toRFC2822=function(){return mb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};Z.toHTTP=function(){return mb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};Z.toSQLDate=function(){return mb(this,"yyyy-MM-dd")};Z.toSQLTime=function(I){var V=void 0===I?{}:I;I=V.includeOffset;V=V.includeZone;return bc(this,{includeOffset:void 0===I?!0:
I,includeZone:void 0===V?!1:V,spaceZone:!0})};Z.toSQL=function(I){void 0===I&&(I={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(I):null};Z.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};Z.valueOf=function(){return this.toMillis()};Z.toMillis=function(){return this.isValid?this.ts:NaN};Z.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};Z.toJSON=function(){return this.toISO()};Z.toBSON=function(){return this.toJSDate()};Z.toObject=function(I){void 0===
I&&(I={});if(!this.isValid)return{};var V=d({},this.c);I.includeConfig&&(V.outputCalendar=this.outputCalendar,V.numberingSystem=this.loc.numberingSystem,V.locale=this.loc.locale);return V};Z.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};Z.diff=function(I,V,ba){void 0===V&&(V="milliseconds");void 0===ba&&(ba={});if(!this.isValid||!I.isValid)return Za.invalid("created by diffing an invalid DateTime");ba=d({locale:this.locale,numberingSystem:this.numberingSystem},ba);var la=(Array.isArray(V)?
V:[V]).map(Za.normalizeUnit);V=I.valueOf()>this.valueOf();I=va(V?this:I,V?I:this,la,ba);return V?I.negate():I};Z.diffNow=function(I,V){void 0===I&&(I="milliseconds");void 0===V&&(V={});return this.diff(S.now(),I,V)};Z.until=function(I){return this.isValid?tb.fromDateTimes(this,I):this};Z.hasSame=function(I,V){if(!this.isValid)return!1;var ba=I.valueOf(),la=this.setZone(I.zone,{keepLocalTime:!0});return la.startOf(V)<=ba&&ba<=la.endOf(V)};Z.equals=function(I){return this.isValid&&I.isValid&&this.valueOf()===
I.valueOf()&&this.zone.equals(I.zone)&&this.loc.equals(I.loc)};Z.toRelative=function(I){void 0===I&&(I={});if(!this.isValid)return null;var V=I.base||S.fromObject({},{zone:this.zone}),ba=I.padding?this<V?-I.padding:I.padding:0,la="years months days hours minutes seconds".split(" "),ua=I.unit;Array.isArray(I.unit)&&(la=I.unit,ua=void 0);return hc(V,this.plus(ba),d({},I,{numeric:"always",units:la,unit:ua}))};Z.toRelativeCalendar=function(I){void 0===I&&(I={});return this.isValid?hc(I.base||S.fromObject({},
{zone:this.zone}),this,d({},I,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};S.min=function(){for(var I=arguments.length,V=Array(I),ba=0;ba<I;ba++)V[ba]=arguments[ba];if(!V.every(S.isDateTime))throw new bb("min requires all arguments be DateTimes");return A(V,function(la){return la.valueOf()},Math.min)};S.max=function(){for(var I=arguments.length,V=Array(I),ba=0;ba<I;ba++)V[ba]=arguments[ba];if(!V.every(S.isDateTime))throw new bb("max requires all arguments be DateTimes");return A(V,
function(la){return la.valueOf()},Math.max)};S.fromFormatExplain=function(I,V,ba){void 0===ba&&(ba={});var la=ba;ba=la.locale;la=la.numberingSystem;ba=Ya.fromOpts({locale:void 0===ba?null:ba,numberingSystem:void 0===la?null:la,defaultToEN:!0});return jb(ba,I,V)};S.fromStringExplain=function(I,V,ba){void 0===ba&&(ba={});return S.fromFormatExplain(I,V,ba)};a(S,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},
{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?
this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:
NaN}},{key:"weekYear",get:function(){return this.isValid?Kb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Kb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Kb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?pb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?ub.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?ub.months("long",{locObj:this.loc})[this.month-
1]:null}},{key:"weekdayShort",get:function(){return this.isValid?ub.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?ub.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,
{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return D(this.year)}},{key:"daysInMonth",get:function(){return E(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?D(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?
G(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Lb}},{key:"DATE_MED",get:function(){return jc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return cd}},{key:"DATE_FULL",get:function(){return kc}},{key:"DATE_HUGE",get:function(){return lc}},{key:"TIME_SIMPLE",get:function(){return mc}},{key:"TIME_WITH_SECONDS",get:function(){return nc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return oc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return pc}},{key:"TIME_24_SIMPLE",get:function(){return qc}},
{key:"TIME_24_WITH_SECONDS",get:function(){return rc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return sc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return tc}},{key:"DATETIME_SHORT",get:function(){return uc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return vc}},{key:"DATETIME_MED",get:function(){return wc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return xc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return dd}},{key:"DATETIME_FULL",get:function(){return yc}},{key:"DATETIME_FULL_WITH_SECONDS",
get:function(){return zc}},{key:"DATETIME_HUGE",get:function(){return Ac}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return S}();B.DateTime=Ua;B.Duration=Za;B.FixedOffsetZone=cb;B.IANAZone=fb;B.Info=ub;B.Interval=tb;B.InvalidZone=Db;B.Settings=Va;B.SystemZone=Ec;B.VERSION="2.0.2";B.Zone=lb;Object.defineProperty(B,"__esModule",{value:!0})})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(B,p,a){a.prototype.repurposeFromGraphicLikeObject=
function(d,g,n){void 0===n&&(n=null);null===g&&(g={});this.attributes=g;this.geometry=d;this._datesfixed=(this._layer=n)?!1:!0};return a})},"esri/arcade/Feature":function(){var B=this&&this.__assign||function(){B=Object.assign||function(p){for(var a,d=1,g=arguments.length;d<g;d++){a=arguments[d];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(p[n]=a[n])}return p};return B.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(p,a,d,g,n,m,f,h,k,e){return function(){function r(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}r.createFromGraphic=function(q){var u=new r;u._geometry=q.geometry?q.geometry:null;u.attributes=void 0===q.attributes?{}:null===q.attributes?{}:q.attributes;q._sourceLayer?(u._layer=q._sourceLayer,u._datesfixed=!1):q._layer?(u._layer=q._layer,u._datesfixed=!1):q.layer&&
"fields"in q.layer?(u._layer=q.layer,u._datesfixed=!1):q.sourceLayer&&"fields"in q.sourceLayer&&(u._layer=q.sourceLayer,u._datesfixed=!1);return u};r.createFromArcadeFeature=function(q){var u=new r;u._datesfixed=q._datesfixed;u.attributes=q.attributes;u._geometry=q._geometry;q._layer&&(u._layer=q._layer);return u};r.createFromArcadeDictionary=function(q){var u=new r;u.attributes=q.field("attributes");null!==u.attributes?u.attributes instanceof d?(u.attributes=u.attributes.attributes,null===u.attributes&&
(u.attributes={})):u.attributes={}:u.attributes={};u._geometry=q.field("geometry");null!==u._geometry&&(u._geometry instanceof d?u._geometry=r.parseGeometryFromDictionary(u._geometry):u._geometry instanceof f||(u._geometry=null));return u};r.createFromGraphicLikeObject=function(q,u,v){void 0===v&&(v=null);var x=new r;null===u&&(u={});x.attributes=u;x._geometry=q?q:null;x._layer=v;x._layer&&(x._datesfixed=!1);x._adapter=null;return x};r.prototype.repurposeFromGraphicLikeObject=function(q,u,v){void 0===
v&&(v=null);null===u&&(u={});this.attributes=u;this._geometry=q?q:null;this._datesfixed=(this._layer=v)?!1:!0};r.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var q="";!1===this._datesfixed&&this._fixDates();for(var u in this.attributes){""!==q&&(q+=",");var v=this.attributes[u];null==v?q+=JSON.stringify(u)+":null":n.isBoolean(v)||n.isNumber(v)||n.isString(v)?q+=JSON.stringify(u)+":"+JSON.stringify(v):v instanceof f?q+=JSON.stringify(u)+":"+n.toStringExplicit(v):
v instanceof g?q+=JSON.stringify(u)+":"+n.toStringExplicit(v):v instanceof Array?q+=JSON.stringify(u)+":"+n.toStringExplicit(v):v instanceof Date?q+=JSON.stringify(u)+":"+JSON.stringify(v):null!==v&&"object"===typeof v&&void 0!==v.castToText&&(q+=JSON.stringify(u)+":"+v.castToText())}return'{"geometry":'+(null===this.geometry()?"null":n.toStringExplicit(this.geometry()))+',"attributes":{'+q+"}}"};r.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{for(var q=[],u=0;u<this._layer.fields.length;u++){var v=this._layer.fields[u];"date"!==v.type&&"esriFieldTypeDate"!==v.type||q.push(v.name)}this._datefields=q;0<q.length&&this._fixDateFields(q)}this._datesfixed=!0};r.prototype._fixDateFields=function(q){this.attributes=B({},this.attributes);for(var u=0;u<q.length;u++){var v=this.attributes[q[u]];if(null!==v)if(void 0===v)for(var x in this.attributes){if(x.toLowerCase()===q[u].toLowerCase()){v=this.attributes[x];null===v||v instanceof Date||(this.attributes[x]=
new Date(v));break}}else v instanceof Date||(this.attributes[q[u]]=new Date(v))}};r.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof f||(this._geometry=k.fromJson(this._geometry));return this._geometry};r.prototype.field=function(q){if(this._adapter)return this._adapter.field(q);!1===this._datesfixed&&this._fixDates();var u=this.attributes[q];if(void 0!==u)return u;u=q.toLowerCase();for(var v in this.attributes)if(v.toLowerCase()===
u)return this.attributes[v];if(this._hasFieldDefinition(u))return null;throw Error("Field not Found : "+q);};r.prototype._hasFieldDefinition=function(q){if(null===this._layer)return!1;for(var u=0;u<this._layer.fields.length;u++)if(this._layer.fields[u].name.toLowerCase()===q)return!0;return!1};r.prototype._field=function(q){var u;if(this._adapter)return null!==(u=this._adapter.field(q))&&void 0!==u?u:null;!1===this._datesfixed&&this._fixDates();u=q.toLowerCase();q=this.attributes[q];if(void 0!==q)return q;
for(var v in this.attributes)if(v.toLowerCase()===u)return this.attributes[v];return null};r.prototype.setField=function(q,u){if(this.immutable)throw Error("Feature is Immutable");if(!1===n.isSimpleType(u))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(q,u);else{var v=q.toLowerCase();if(void 0===this.attributes[q])for(var x in this.attributes)if(x.toLowerCase()===v){this.attributes[x]=u;return}this.attributes[q]=u}};r.prototype.hasField=function(q){if(this._adapter)return this._adapter.hasField(q);
var u=q.toLowerCase();if(void 0!==this.attributes[q])return!0;for(var v in this.attributes)if(v.toLowerCase()===u)return!0;return this._hasFieldDefinition(u)?!0:!1};r.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var q=[],u={},v;for(v in this.attributes)q.push(v),u[v.toLowerCase()]=1;if(null!==this._layer)for(v=0;v<this._layer.fields.length;v++){var x=this._layer.fields[v];1!==u[x.name.toLowerCase()]&&q.push(x.name)}return q=q.sort()};r.parseGeometryFromDictionary=function(q){q=
r.convertDictionaryToJson(q,!0);void 0!==q.hasm&&(q.hasM=q.hasm,delete q.hasm);void 0!==q.hasz&&(q.hasZ=q.hasz,delete q.hasz);void 0!==q.spatialreference&&(q.spatialReference=q.spatialreference,delete q.spatialreference);void 0!==q.rings&&(q.rings=this.fixPathArrays(q.rings,!0===q.hasZ,!0===q.hasZ));void 0!==q.paths&&(q.paths=this.fixPathArrays(q.paths,!0===q.hasZ,!0===q.hasM));void 0!==q.points&&(q.points=this.fixPointArrays(q.points,!0===q.hasZ,!0===q.hasM));return k.fromJson(q)};r.fixPathArrays=
function(q,u,v){var x=[];if(q instanceof Array)for(var z=0;z<q.length;z++)x.push(this.fixPointArrays(q[z],u,v));else if(q instanceof g)for(z=0;z<q.length();z++)x.push(this.fixPointArrays(q.get(z),u,v));return x};r.fixPointArrays=function(q,u,v){var x=[];if(q instanceof Array)for(var z=0;z<q.length;z++){var A=q[z];A instanceof h?u&&v?x.push([A.x,A.y,A.z,A.m]):u?x.push([A.x,A.y,A.z]):v?x.push([A.x,A.y,A.m]):x.push([A.x,A.y]):A instanceof g?x.push(A.toArray()):x.push(A)}else if(q instanceof g)for(z=
0;z<q.length();z++)A=q.get(z),A instanceof h?u&&v?x.push([A.x,A.y,A.z,A.m]):u?x.push([A.x,A.y,A.z]):v?x.push([A.x,A.y,A.m]):x.push([A.x,A.y]):A instanceof g?x.push(A.toArray()):x.push(A);return x};r.convertDictionaryToJson=function(q,u){void 0===u&&(u=!1);var v={},x;for(x in q.attributes){var z=q.attributes[x];z instanceof d&&(z=r.convertDictionaryToJson(z));u?v[x.toLowerCase()]=z:v[x]=z}return v};r.parseAttributesFromDictionary=function(q){var u={},v;for(v in q.attributes){var x=q.attributes[v];
if(n.isSimpleType(x))u[v]=x;else throw Error("Illegal Argument");}return u};r.fromJson=function(q){var u=null;null!==q.geometry&&void 0!==q.geometry&&(u=k.fromJson(q.geometry));var v={};if(null!==q.attributes&&void 0!==q.attributes)for(var x in q.attributes){var z=q.attributes[x];if(null===z)v[x]=z;else if(n.isString(z)||n.isNumber(z)||n.isBoolean(z)||n.isDate(z))v[x]=z;else throw Error("Illegal Argument");}return r.createFromGraphicLikeObject(u,v,null)};r.prototype.fullDomain=function(q,u){return null!==
this._layer&&this._layer.fields?n.getDomain(q,this._layer,this,u):null};r.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(q){return{name:q.name,code:q.id}}):[]}:null:null};r.prototype.domainValueLookup=function(q,u,v){if(null===this._layer||!this._layer.fields)return null;v=n.getDomain(q,this._layer,this,v);if(void 0===u)try{u=this.field(q)}catch(x){return null}return n.getDomainValue(v,
u)};r.prototype.gdbVersion=function(){if(null===this._layer)return"";var q=this._layer.gdbVersion;return void 0===q?"":""===q&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":q};r.prototype.domainCodeLookup=function(q,u,v){if(null===this._layer||!this._layer.fields)return null;if(void 0===u){try{u=this.field(q)}catch(x){return null}return u}q=n.getDomain(q,this._layer,this,v);return n.getDomainCode(q,u)};r.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var q=[],u=0,v=this._layer.fields;u<v.length;u++)q.push(e.esriFieldToJson(v[u]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===e.layerGeometryEsriRestConstants[this._layer.geometryType]?"":e.layerGeometryEsriRestConstants[this._layer.geometryType],fields:q}};r.prototype.castAsJson=function(q){void 0===q&&(q=null);var u={attributes:{},geometry:!0===(null===q||void 0===q?void 0:q.keepGeometryType)?this.geometry():this.geometry().toJson()},
v;for(v in this.attributes){var x=this.attributes[v];void 0!==x&&(u.attributes[v]=n.castAsJson(x,q))}return u};r.prototype.castAsJsonAsync=function(q,u){void 0===q&&(q=null);void 0===u&&(u=null);return m.resolve(this.castAsJson(u))};return r}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(B,p,a,d,g,n,m,f,h){function k(u,v,x){var z=u.rings||u.paths,A,y;var c=0;for(A=z.length;c<A;c++){var b=
z[c];var l=0;for(y=b.length;l<y;l++){var t=b[l];if(0<l)w+=t[0],C+=t[1];else{var w=t[0];var C=t[1]}t[0]=v(w);t[1]=x(C)}}return u}var e={esriGeometryPoint:function(u,v,x){u.x=v(u.x);u.y=x(u.y);return u},esriGeometryPolyline:k,esriGeometryPolygon:k,esriGeometryEnvelope:function(u,v,x){u.xmin=v(u.xmin);u.ymin=x(u.ymin);u.xmax=v(u.xmax);u.ymax=x(u.ymax);return u},esriGeometryMultipoint:function(u,v,x){var z=u.points,A;var y=0;for(A=z.length;y<A;y++){var c=z[y];if(0<y)b+=c[0],l+=c[1];else{var b=c[0];var l=
c[1]}c[0]=v(b);c[1]=x(l)}return u}},r={esriGeometryPoint:function(u,v,x){u.x=v(u.x);u.y=x(u.y);return u}},q={createInstance:function(u,v){var x=new u;v&&d.mixin(x,v);return x},fromJson:function(u){if(void 0!==u.x&&void 0!==u.y)return new g(u);if(void 0!==u.paths)return new n(u);if(void 0!==u.rings)return new m(u);if(void 0!==u.points)return new f(u);if(void 0!==u.xmin&&void 0!==u.ymin&&void 0!==u.xmax&&void 0!==u.ymax)return new h(u)},getJsonType:function(u){return u instanceof g?"esriGeometryPoint":
u instanceof n?"esriGeometryPolyline":u instanceof m?"esriGeometryPolygon":u instanceof h?"esriGeometryEnvelope":u instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(u){return"esriGeometryPoint"===u?g:"esriGeometryPolyline"===u?n:"esriGeometryPolygon"===u?m:"esriGeometryEnvelope"===u?h:"esriGeometryMultipoint"===u?f:null},supportsLazyUnquantization:function(u){return"esriGeometryPoint"===u||"esriGeometryPolyline"===u||"esriGeometryPolygon"===u||"esriGeometryMultipoint"===u},unquantizeFunction:function(u,
v){if(u&&v){var x=v.translate[0],z=v.translate[1],A=v.scale[0],y=v.scale[1],c=function(t){return t*A+x},b=function(t){return z-t*y},l=e[u];return function(t){return t?l(t,c,b):null}}},unquantize:function(u,v,x){if(v=q.unquantizeFunction(v,x)){var z=u.length;for(x=0;x<z;x++)v(u[x].geometry)}},quantizeFunction:function(u,v){if(u&&"esriGeometryPoint"===u&&v){var x=v.translate[0],z=v.translate[1],A=v.scale[0],y=v.scale[1],c=function(t){return Math.round((t-x)/A)},b=function(t){return Math.round((z-t)/
y)},l=r[u];return function(t){return t?l(t,c,b):null}}},quantize:function(u,v,x){if(v=q.quantizeFunction(v,x)){var z=u.length;for(x=0;x<z;x++)v(u[x].geometry)}}};B.mixin(B.getObject("geometry",!0,a),q);return q})},"esri/arcade/featureset/support/shared":function(){var B=this&&this.__assign||function(){B=Object.assign||function(p){for(var a,d=1,g=arguments.length;d<g;d++){a=arguments[d];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(p[n]=a[n])}return p};return B.apply(this,arguments)};
define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(p,a,d,g,n){function m(h){var k=null;h.domain&&(k="range"===h.domain.type?{type:"range",range:[h.domain.minValue,h.domain.maxValue]}:{type:"codedValue",codedValues:h.domain.toJson().codedValues});return B(B({name:h.name,type:h.type,alias:h.alias},void 0!==h.length?{length:h.length}:{}),{editable:!0===h.editable,nullable:!0===h.nullable,domain:k})}function f(h){return h instanceof Date}
Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=
void 0;(function(h){h[h.Standardised=0]="Standardised";h[h.StandardisedNoInterval=1]="StandardisedNoInterval";h[h.SqlServer=2]="SqlServer";h[h.Oracle=3]="Oracle";h[h.Postgres=4]="Postgres";h[h.PGDB=5]="PGDB";h[h.FILEGDB=6]="FILEGDB";h[h.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(h){return new n(m(h))};a.esriFieldToJson=m;(function(h){h[h.InFeatureSet=0]="InFeatureSet";h[h.NotInFeatureSet=1]="NotInFeatureSet";h[h.Unknown=
2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(h){return"string"===typeof h||h instanceof String};a.isBoolean=function(h){return"boolean"===typeof h};a.isNumber=function(h){return"number"===typeof h};a.isArray=function(h){return h instanceof Array};a.isDate=f;a.equalityTest=function(h,k){return h===k?!0:f(h)&&f(k)?h.getTime()===k.getTime():!1};a.cloneAttributes=function(h){var k={},e;for(e in h)k[e]=h[e];return k};a.convertSquareUnitsToCode=function(h){if(void 0===h)return null;if("number"===
typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(h){if(null===h)return null;switch(h.type){case "polygon":case "multipoint":case "polyline":return h.getExtent();case "point":return new g({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference});case "extent":return h}return null};a.convertLinearUnitsToCode=function(h){if(void 0===
h)return null;if("number"===typeof h||"number"===typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(h,k){return h===k||"point"===h&&"esriGeometryPoint"===k||"polyline"===h&&"esriGeometryPolyline"===k||"polygon"===h&&"esriGeometryPolygon"===k||"extent"===h&&"esriGeometryEnvelope"===k||"multipoint"===h&&"esriGeometryMultipoint"===k||"point"===
k&&"esriGeometryPoint"===h||"polyline"===k&&"esriGeometryPolyline"===h||"polygon"===k&&"esriGeometryPolygon"===h||"extent"===k&&"esriGeometryEnvelope"===h||"multipoint"===k&&"esriGeometryMultipoint"===h?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(h){return function(k){h.reject(k)}};a.callback=function(h,k){return function(){try{h.apply(null,arguments)}catch(e){k.reject(e)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",
esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",
esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",
esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",
esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(h){switch(h){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(h,k){return d.create(function(e,r){var q=d.resolve(!0);h.reduce(function(u,v,x,z){return u.then(function(A){try{return k(A,v,x,z)}catch(y){return d.reject(y)}},function(A){return d.reject(A)})},
q).then(e,r)})};a.extractServiceUrl=function(h){if(void 0===h)return"";h=h.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");h=h.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return h=h.split("?")[0]};a.stableStringify=function(h,k){k||(k={});"function"===typeof k&&(k={cmp:k});var e="boolean"===typeof k.cycles?k.cycles:!1,r=k.cmp&&function(u){return function(v){return function(x,z){return u({key:x,value:v[x]},{key:z,value:v[z]})}}}(k.cmp),q=[];return function x(v){v&&v.toJson&&"function"===typeof v.toJson&&
(v=v.toJson());if(void 0!==v){if("number"===typeof v)return isFinite(v)?""+v:"null";if("object"!==typeof v)return JSON.stringify(v);var z;if(Array.isArray(v)){var A="[";for(z=0;z<v.length;z++)z&&(A+=","),A+=x(v[z])||"null";return A+"]"}if(null===v)return"null";if(-1!==q.indexOf(v)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var y=q.push(v)-1,c=Object.keys(v).sort(r&&r(v));A="";for(z=0;z<c.length;z++){var b=c[z],l=x(v[b]);l&&(A&&(A+=","),A+=
JSON.stringify(b)+":"+l)}q.splice(y,1);return"{"+A+"}"}}(h)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(B,p,a,d,g,n,m){B=B(null,{declaredClass:"esri.layers.Field",constructor:function(f){if(f&&p.isObject(f)&&(this.name=f.name,this.type=f.type,this.alias=f.alias,this.length=f.length,this.editable=f.editable,this.nullable=f.nullable,this.defaultValue=f.defaultValue,this.description=f.description?
JSON.parse(f.description):null,this.isViewOverride=!!f.isViewOverride,(f=f.domain)&&p.isObject(f)))switch(f.type){case "range":this.domain=new n(f);break;case "codedValue":this.domain=new m(f)}},toJson:function(){return g.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||
void 0})},toJSON:function(){return this.toJson()}});p.setObject("layers.Field",B,d);return B})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(B,p,a,d,g,n){B=B([n],{declaredClass:"esri.layers.RangeDomain",constructor:function(m){m&&p.isObject(m)&&(this.minValue=m.range[0],this.maxValue=m.range[1])},toJson:function(){var m=this.inherited(arguments);m.range=[this.minValue,this.maxValue];return g.fixJson(m)}});
p.setObject("layers.RangeDomain",B,d);return B})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(B,p,a,d,g){B=B(null,{declaredClass:"esri.layers.Domain",constructor:function(n){n&&p.isObject(n)&&(this.name=n.name,this.type=n.type)},toJson:function(){return g.fixJson({name:this.name,type:this.type})}});p.setObject("layers.Domain",B,d);return B})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(B,p,a,d,g,n,m){B=B([m],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(f){f&&p.isObject(f)&&(this.codedValues=f.codedValues)},getName:function(f){var h;a.some(this.codedValues,function(k){k.code==f&&(h=k.name);return!!h});return h},toJson:function(){var f=this.inherited(arguments);f.codedValues=p.clone(this.codedValues);return n.fixJson(f)}});p.setObject("layers.CodedValueDomain",B,g);return B})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports",
"dojo/has"],function(B,p,a){var d={info:0,warn:1,error:2};B=function(){function g(n){void 0===n&&(n={});this.module=n.module||"";this.writer=n.writer||null;this.level=n.level||null;null!=n.enabled&&(this.enabled=!!n.enabled);g._loggers[this.module]=this;n=this.module.lastIndexOf(".");-1!==n&&(this.parent=g.getLogger(this.module.slice(0,n)))}g.prototype.log=function(n){for(var m=[],f=1;f<arguments.length;f++)m[f-1]=arguments[f];this._isEnabled()&&this._matchLevel(n)&&(f=this._inheritedWriter())&&f.apply(void 0,
[n,this.module].concat(m))};g.prototype.error=function(){for(var n=[],m=0;m<arguments.length;m++)n[m]=arguments[m];this.log.apply(this,["error"].concat(n))};g.prototype.warn=function(){for(var n=[],m=0;m<arguments.length;m++)n[m]=arguments[m];this.log.apply(this,["warn"].concat(n))};g.prototype.info=function(){for(var n=[],m=0;m<arguments.length;m++)n[m]=arguments[m];this.log.apply(this,["info"].concat(n))};g.prototype.getLogger=function(n){return g.getLogger(this.module+"."+n)};g.getLogger=function(n){var m=
g._loggers[n];m||(m=new g({module:n}));return m};g.prototype._parentWithMember=function(n,m){for(var f=this;f&&null==f[n];)f=f.parent;return f?f[n]:m};g.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};g.prototype._consoleWriter=function(n,m){for(var f=[],h=2;h<arguments.length;h++)f[h-2]=arguments[h];console[n].apply(console,["["+m+"]"].concat(f))};g.prototype._matchLevel=function(n){return d[this._parentWithMember("level","error")]<=d[n]};g.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};g._loggers={};return g}();B.getLogger("esri").level="warn";return B})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(B,p){function a(g){return g?72*g/p.DPI:0}Object.defineProperty(p,"__esModule",{value:!0});var d=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;p.DPI=96;p.pt2px=function(g){return g?g/72*p.DPI:0};p.px2pt=a;p.toPt=function(g){if("string"===typeof g){if(d.test(g)){var n=g.match(d),m=Number(n[1]);
n=n[3]&&n[3].toLowerCase();g="-"===g.charAt(0);m="px"===n?a(m):m;return g?-m:m}return null}return g}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});p.createSyntaxTree=function(g){return a.createSyntaxTree(g)};p.createFunction=function(g,n){return a.createFunction(g,n)};p.createExecContext=function(g,n){return a.createExecContext(g,n)};p.executeFunction=
function(g,n){return a.executeFunction(g,n)};p.extractFieldNames=function(g){return a.extractFieldNames(g)};p.getViewInfo=function(g){if(g&&g.viewingMode&&null!=g.scale&&g.spatialReference)return{view:new d({viewingMode:g.viewingMode,scale:g.scale}),sr:g.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(B,p,a,d){B.setObject("renderer.arcadeUtils",d,a);return d})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),
function(B,p,a,d,g,n,m){function f(r){return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var h={vars:{$feature:"any",$view:"any"}},k=/^\$(feature|aggregatedFeatures)\./i,e={_getSyntaxTree:function(r){return"string"===typeof r?e.createSyntaxTree(r):r},createSyntaxTree:function(r){try{var q=r?n.parseScript(r):null}catch(u){q=null}return q},createFunction:function(r,q){q=q||B.clone(h);var u=e._getSyntaxTree(r);try{var v=u?n.compileScript(u,q):null}catch(x){v=null}return v},createExecContext:function(r,
q){return{vars:{$feature:r?m.createFromGraphic(r):new m,$view:q&&q.view},spatialReference:q&&q.sr}},evalSyntaxTree:function(r,q){try{var u=n.executeScript(r,q)}catch(v){u=null}return u},executeFunction:function(r,q){try{var u=r?r(q):null}catch(v){u=null}return u},executeAsyncFunction:function(r,q){try{var u=r?r(q):(new d).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(v){u=(new d).reject(v)}return u},extractFieldNames:function(r,q){var u=e._getSyntaxTree(r);
u=n.extractExpectedFieldLiterals(u);var v=[];p.forEach(u,function(z){k.test(z)&&(z=z.replace(k,""),v.push(z))});var x=p.filter(v,function(z){return-1!==z.indexOf("*")});v=p.filter(v,function(z){return-1===x.indexOf(z)});q&&p.forEach(x,function(z){var A=new RegExp("^"+z.split(/\*+/).map(f).join(".*")+"$","i");p.forEach(q,function(y){A.test(y)&&v.push(y)})});v.sort();return p.filter(v,function(z,A){return 0===A||v[A-1]!==z})},dependsOnView:function(r){return e.hasVariable(r,"$view")},hasGeometryFunctions:function(r){return(r=
e._getSyntaxTree(r))?n.scriptTouchesGeometry(r):!1},hasGeometryOperations:function(r){return(r=e._getSyntaxTree(r))?n.scriptUsesGeometryEngine(r):!1},enableGeometryOperations:function(){return n.enableGeometrySupport()},hasVariable:function(r,q){var u=e._getSyntaxTree(r);return u?n.referencesMember(u,q):!1},hasFunction:function(r,q){var u=e._getSyntaxTree(r);return u?n.referencesFunction(u,q):!1},createFeatureSetFromLayer:function(r,q){q=q||{};var u=n.featureSetUtils();return u?u.constructFeatureSet(r,
q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetFromLayerUrl:function(r,q){q=q||{};var u=n.featureSetUtils();return u?u.constructFeatureSetFromUrlRaw(r,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetCollectionFromMap:function(r,q){var u=n.featureSetUtils();return u?u.createFeatureSetCollectionFromMap(r,r.spatialReference,q&&q.cache):null},createFeatureSetCollectionFromServiceUrl:function(r,q){q=q||{};var u=n.featureSetUtils();return u?
u.createFeatureSetCollectionFromService(r,q.spatialReference,q.cache):null},hasFeatureSetOperations:function(r){return(r=e._getSyntaxTree(r))?n.scriptUsesFeatureSet(r):!1},enableFeatureSetOperations:function(){return n.enableFeatureSetSupport().then(function(){var r=n.featureSetUtils();r&&r.initialiseMetaDataCache()})},enableAsyncOperations:function(){return n.enableAsyncSupport()}};B.setObject("support.expressionUtils",e,g);return e})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils".split(" "),
function(B,p,a,d,g,n,m,f){function h(H,M){if(null===w)throw Error("Async Arcade must be enabled for this script");return m("esri-csp-restrictions")||!1===b?function(X){return w.executeScript(H,X)}:a.compileScript(H,M,!0)}function k(H,M){void 0===M&&(M=[]);return g.parseScript(H,M)}function e(H,M){if(!0===M.useAsync||!0===H.isAsync){if(null===w)throw Error("Async Arcade must be enabled for this script");return w.executeScript(H,M)}return d.executeScript(H,M)}function r(H,M){return d.referencesMember(H,
M)}function q(H,M){void 0===M&&(M=[]);void 0===H.usesGeometry&&n.findScriptDependencies(H,M);return!0===H.usesGeometry}function u(){return D?D:D=f.create(function(H,M){B(["../geometry/geometryEngine","./functions/geomsync"],function(X,W){t=!0;W.setGeometryEngine(X);H(!0)},function(X){M(X)})})}function v(){return null!==E?E:E=a.enableAsyncSupport().then(function(){return f.create(function(H,M){B(["./arcadeAsyncRuntime"],function(X){try{w=X;X=0;for(var W=C;X<W.length;X++){var T=W[X];w.extend(T);a.extend(T,
"async")}C=null;H(!0)}catch(K){M(K)}},M)})})}function x(){return w?!0:!1}function z(){return F?F:F=v().then(function(){return f.create(function(H,M){B(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(X,W,T,K,O){try{G=X,w.extend([W,T,K,O]),a.extend([W,T,K,O],"async"),l=!0,H(!0)}catch(N){M(N)}},M)})})}function A(H,M){void 0===M&&(M=[]);void 0===H.usesFeatureSet&&n.findScriptDependencies(H,M);return!0===
H.usesFeatureSet}function y(H,M){if(M)for(var X=0;X<M.length;X++)if(r(H,M[X]))return!0;return!1}Object.defineProperty(p,"__esModule",{value:!0});p.featureSetUtils=p.scriptTouchesGeometry=p.loadScriptDependencies=p.scriptIsAsync=p.scriptUsesFeatureSet=p.enableFeatureSetSupport=p.isGeometryEnabled=p.isAsyncEnabled=p.isFeatureSetSupportEnabled=p.enableAsyncSupport=p.enableGeometrySupport=p.scriptUsesGeometryEngine=p.extractExpectedFieldLiterals=p.extractFieldLiterals=p.referencesFunction=p.referencesMember=
p.executeScript=p.parseAndExecuteScript=p.scriptCheck=p.validateScript=p.parseScript=p.extend=p.compileScript=void 0;var c="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),b=function(){if(m("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(H){return!1}}(),l=!1,t=!1,w=null,C=[];p.compileScript=function(H,M){return!0===M.useAsync||!0===H.isAsync?h(H,M):m("esri-csp-restrictions")?function(X){return d.executeScript(H,
X)}:a.compileScript(H,M)};p.extend=function(H){d.extend(H);a.extend(H,"sync");null===w?C.push(H):(a.extend(H,"async"),w.extend(H))};p.parseScript=k;p.validateScript=function(H,M,X){void 0===X&&(X="");return g.validateScript(H,M,X)};p.scriptCheck=function(H,M,X,W){void 0===W&&(W="");return g.scriptCheck(H,M,X,W)};p.parseAndExecuteScript=function(H,M,X){void 0===X&&(X=[]);H=g.parseScript(H,X);return e(H,M)};p.executeScript=e;p.referencesMember=r;p.referencesFunction=function(H,M){return d.referencesFunction(H,
M)};p.extractFieldLiterals=function(H,M){void 0===M&&(M=!1);return g.extractFieldLiterals(H,M)};p.extractExpectedFieldLiterals=function(H){return g.extractExpectedFieldLiterals(H)};p.scriptUsesGeometryEngine=q;var D=null;p.enableGeometrySupport=u;var E=null;p.enableAsyncSupport=v;p.isFeatureSetSupportEnabled=function(){return l};p.isAsyncEnabled=x;p.isGeometryEnabled=function(){return t};var F=null;p.enableFeatureSetSupport=z;p.scriptUsesFeatureSet=A;p.scriptIsAsync=function(H,M){void 0===M&&(M=[]);
void 0===H.isAsync&&n.findScriptDependencies(H,M);return!0===H.isAsync};p.loadScriptDependencies=function(H,M,X,W){void 0===X&&(X=[]);void 0===W&&(W=!1);return f.create(function(T,K){var O="string"===typeof H?k(H):H,N=[];O&&(!1===t&&(q(O)||W)&&N.push(u()),!1===x()&&(!0===O.isAsync||M)&&N.push(v()),!1===l&&(A(O)||y(O,X))&&N.push(z()));N.length?f.all(N).then(function(){T(!0)},K):T(!0)})};p.scriptTouchesGeometry=function(H){if(q(H))return!0;H=n.findFunctionCalls(H);for(var M=!1,X=0;X<H.length;X++)if(-1<
c.indexOf(H[X])){M=!0;break}return M};var G=null;p.featureSetUtils=function(){return G}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b,l,t,w,C){function D(aa,da,J){try{return J(aa,null,da.arguments)}catch(sa){throw sa;}}function E(aa){return aa instanceof Error?A.reject(aa):A.reject(Error(aa))}function F(aa,da){try{switch(da.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return W(aa,da);case "VariableDeclaration":for(var J=[],sa=0;sa<da.declarations.length;sa++)J.push(F(aa,da.declarations[sa]));return J.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return X(aa,da);case "FunctionDeclaration":var wa=da.id.name.toLowerCase(),U={isAsync:aa.isAsync,spatialReference:aa.spatialReference,console:aa.console,lrucache:aa.lrucache,interceptor:aa.interceptor,services:aa.services,symbols:aa.symbols,mangleMap:aa.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:aa.depthCounter+1,globalScope:aa.globalScope};if(64<U.depthCounter)throw Error("Exceeded maximum function depth");J="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(sa=0;sa<da.params.length;sa++){var La=da.params[sa].name.toLowerCase(),Ha=ca(aa);U.localScope._SymbolsMap[La]=Ha;U.mangleMap[La]=Ha;J+="lscope['"+Ha+"']\x3darguments["+sa.toString()+"];\n"}!0===aa.isAsync?(J=J+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(X(U,da.body)+"\n return lastStatement; "),J=J+"});  }, runtimeCtx),"+(da.params.length+")")):J+=X(U,da.body)+"\n return lastStatement; }, runtimeCtx),"+da.params.length+")";J+="\n lastStatement \x3d lc.voidOperation; \n";if(void 0!==
aa.globalScope[wa])var pa="gscope['"+wa+"']\x3d"+J;else void 0!==aa.globalScope._SymbolsMap[wa]?pa="gscope['"+aa.globalScope._SymbolsMap[wa]+"']\x3d"+J:(Ha=ca(aa),aa.globalScope._SymbolsMap[wa]=Ha,aa.mangleMap[wa]=Ha,pa="gscope['"+Ha+"']\x3d"+J);return pa;case "ReturnStatement":var Qa=null===da.argument?"return lc.voidOperation":"return "+F(aa,da.argument);return Qa;case "IfStatement":if("AssignmentExpression"===da.test.type||"UpdateExpression"===da.test.type)throw Error(k.nodeErrorMessage(da.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ga=F(aa,da.test),va=ha(aa),za="var "+va+" \x3d "+Ga+";\n if ("+va+" \x3d\x3d\x3d true) {\n"+M(aa,da.consequent)+"\n }\n";za=null!==da.alternate?za+("else if ("+va+"\x3d\x3d\x3dfalse)   { \n"+M(aa,da.alternate)+"}\n"):za+("else if ("+va+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return za+="else { lang.error({type: '"+da.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ba=
"AssignmentExpression"===da.expression.type?"lastStatement \x3d lc.voidOperation; "+F(aa,da.expression)+"; \n ":"lastStatement \x3d "+F(aa,da.expression)+"; ";return Ba;case "AssignmentExpression":return H(aa,da);case "UpdateExpression":return G(aa,da);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Fa=[];wa=pa=0;for(sa=da.quasis;wa<sa.length;wa++){var xa=sa[wa];Fa.push(xa.value?JSON.stringify(xa.value.cooked):JSON.stringify(""));!1===xa.tail&&
(Fa.push(da.expressions[pa]?"lang.castString(lang.aCheck("+F(aa,da.expressions[pa])+", 'TemplateLiteral'))":""),pa++)}J="(["+Fa.join(",")+"]).join('')"}catch(Xa){throw Xa;}return J;case "TemplateElement":return JSON.stringify(da.value?da.value.cooked:"");case "ForStatement":J="lastStatement \x3d lc.voidOperation; \n";null!==da.init&&(J+=F(aa,da.init)+"; ");var Da=ha(aa),Aa=ha(aa);J+="var "+Da+" \x3d true; \n do { ";null!==da.update&&(J+=" if ("+Da+"\x3d\x3d\x3dfalse) {\n "+F(aa,da.update)+"  \n}\n "+
Da+"\x3dfalse; \n");null!==da.test&&(J+="var "+Aa+" \x3d "+F(aa,da.test)+"; ",J+="if ("+Aa+"\x3d\x3d\x3dfalse) { break; } else if ("+Aa+"!\x3d\x3dtrue) { lang.error({type: '"+da.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");J+=F(aa,da.body);null!==da.update&&(J+="\n "+F(aa,da.update));return J+("\n"+Da+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ja=ha(aa),Ka=ha(aa),Ma=ha(aa),Ca="var "+Ja+" \x3d "+F(aa,da.right)+";\n";"VariableDeclaration"===
da.left.type&&(Ca+=F(aa,da.left));var Na="VariableDeclaration"===da.left.type?da.left.declarations[0].id.name:da.left.name;Na=Na.toLowerCase();J="";null!==aa.localScope&&(void 0!==aa.localScope[Na]?J="lscope['"+Na+"']":void 0!==aa.localScope._SymbolsMap[Na]&&(J="lscope['"+aa.localScope._SymbolsMap[Na]+"']"));""===J&&(void 0!==aa.globalScope[Na]?J="gscope['"+Na+"']":void 0!==aa.globalScope._SymbolsMap[Na]&&(J="gscope['"+aa.globalScope._SymbolsMap[Na]+"']"));Ca=Ca+("if ("+Ja+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ja+") || lc.isString("+Ja+")) {var ")+(Ka+"\x3d"+Ja+".length; \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+Ka+"; "+Ma+"++) {\n");Ca+=J+"\x3d"+Ma+";\n";Ca+=F(aa,da.body);Ca+="\n}\n";Ca+=" lastStatement \x3d lc.voidOperation; \n";Ca+=" \n}\n";Ca+="else if (lc.isImmutableArray("+Ja+")) {";Ca=Ca+("var "+Ka+"\x3d"+Ja+".length(); \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+Ka+"; "+Ma+"++) {\n");Ca+=J+"\x3d"+Ma+";\n";Ca+=F(aa,da.body);Ca+="\n}\n";Ca+=" lastStatement \x3d lc.voidOperation; \n";Ca+=" \n}\n";Ca+="else if (( "+
Ja+" instanceof lang.Dictionary) || ( "+Ja+" instanceof lang.Feature)) {";Ca=Ca+("var "+Ka+"\x3d"+Ja+".keys(); \nfor(var ")+(Ma+"\x3d0; "+Ma+"\x3c"+Ka+".length; "+Ma+"++) {\n");Ca+=J+"\x3d"+Ka+"["+Ma+"];\n";Ca+=F(aa,da.body);Ca+="\n}\n";Ca+=" lastStatement \x3d lc.voidOperation; \n";Ca+=" \n}\n";aa.isAsync&&(Ca+="else if (lc.isFeatureSet("+Ja+")) {",Ca=Ca+("var "+Ka+"\x3d"+Ja+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Ma+"\x3dlang. graphicToFeature( yield "+Ka+".next(),"+Ja+"); "+Ma+"!\x3dnull; "+
Ma+"\x3dlang. graphicToFeature( yield "+Ka+".next(),"+Ja+")) {\n")+(J+"\x3d"+Ma+";\n"),Ca+=F(aa,da.body),Ca+="\n}\n",Ca+=" lastStatement \x3d lc.voidOperation; \n",Ca+=" \n}\n");return Ca+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return K(aa,da);case "MemberExpression":try{J=void 0;J=!0===da.computed?F(aa,da.property):"'"+da.property.name+"'";var Ta="lang.member("+F(aa,da.object)+","+J+")"}catch(Xa){throw Xa;}return Ta;case "Literal":return null===da.value||void 0===da.value?
"null":JSON.stringify(da.value);case "ThisExpression":throw Error(k.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==da.callee.type)throw Error(k.nodeErrorMessage(da,"RUNTIME","ONLYNODESSUPPORTED"));var Wa=da.callee.name.toLowerCase();J="";null!==aa.localScope&&(void 0!==aa.localScope[Wa]?J="lscope['"+Wa+"']":void 0!==aa.localScope._SymbolsMap[Wa]&&(J="lscope['"+aa.localScope._SymbolsMap[Wa]+"']"));""===J&&(void 0!==aa.globalScope[Wa]?J="gscope['"+Wa+"']":
void 0!==aa.globalScope._SymbolsMap[Wa]&&(J="gscope['"+aa.globalScope._SymbolsMap[Wa]+"']"));if(""!==J){sa="[";for(xa=0;xa<da.arguments.length;xa++)0<xa&&(sa+=", "),sa+=F(aa,da.arguments[xa]);sa+="]";Fa=aa.isAsync?"(yield lang.callfunc("+J+","+sa+",runtimeCtx) )":"lang.callfunc("+J+","+sa+",runtimeCtx)"}else throw Error(k.nodeErrorMessage(da,"RUNTIME","NOTFOUND"));}catch(Xa){throw Xa;}return Fa;case "UnaryExpression":try{var jb="lang.unary("+F(aa,da.argument)+",'"+da.operator+"')"}catch(Xa){throw Xa;
}return jb;case "BinaryExpression":try{var $a="lang.binary("+F(aa,da.left)+","+F(aa,da.right)+",'"+da.operator+"')"}catch(Xa){throw Xa;}return $a;case "LogicalExpression":try{if("AssignmentExpression"===da.left.type||"UpdateExpression"===da.left.type)throw Error(k.nodeErrorMessage(da.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===da.right.type||"UpdateExpression"===da.right.type)throw Error(k.nodeErrorMessage(da.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===da.operator||"||"===da.operator)var vb="(lang.logicalCheck("+F(aa,da.left)+") "+da.operator+" lang.logicalCheck("+F(aa,da.right)+"))";else throw Error(k.nodeErrorMessage(da,"RUNTIME","ONLYORORAND"));}catch(Xa){throw Xa;}return vb;case "ConditionalExpression":throw Error(k.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{J=[];for(sa=0;sa<da.elements.length;sa++)"Literal"===da.elements[sa].type?J.push(F(aa,da.elements[sa])):J.push("lang.aCheck("+F(aa,da.elements[sa])+
",'ArrayExpression')");var wb="["+J.join(",")+"]"}catch(Xa){throw Xa;}return wb;case "ObjectExpression":J="lang.dictionary([";for(sa=0;sa<da.properties.length;sa++){var hb=da.properties[sa],xb="Identifier"===hb.key.type?"'"+hb.key.name+"'":F(aa,hb.key),pb=F(aa,hb.value);0<sa&&(J+=",");J+="lang.strCheck("+xb+",'ObjectExpression'),lang.aCheck("+pb+", 'ObjectExpression')"}return J+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(k.nodeErrorMessage(da,"RUNTIME","NOTSUPPORTED"));
default:throw Error(k.nodeErrorMessage(da,"RUNTIME","UNREOGNISED"));}}catch(Xa){throw Xa;}}function G(aa,da){var J=null,sa="";if("MemberExpression"===da.argument.type)return J=F(aa,da.argument.object),sa=!0===da.argument.computed?F(aa,da.argument.property):"'"+da.argument.property.name+"'","lang.memberupdate("+J+","+sa+",'"+da.operator+"',"+da.prefix+")";J=da.argument.name.toLowerCase();if(null!==aa.localScope){if(void 0!==aa.localScope[J])return"lang.update(lscope, '"+J+"','"+da.operator+"',"+da.prefix+
")";if(void 0!==aa.localScope._SymbolsMap[J])return"lang.update(lscope, '"+aa.localScope._SymbolsMap[J]+"','"+da.operator+"',"+da.prefix+")"}if(void 0!==aa.globalScope[J])return"lang.update(gscope, '"+J+"','"+da.operator+"',"+da.prefix+")";if(void 0!==aa.globalScope._SymbolsMap[J])return"lang.update(gscope, '"+aa.globalScope._SymbolsMap[J]+"','"+da.operator+"',"+da.prefix+")";throw Error("Variable not recognised");}function H(aa,da){var J=F(aa,da.right),sa=null,wa="";if("MemberExpression"===da.left.type)return sa=
F(aa,da.left.object),wa=!0===da.left.computed?F(aa,da.left.property):"'"+da.left.property.name+"'","lang.assignmember("+sa+","+wa+",'"+da.operator+"',"+J+")";sa=da.left.name.toLowerCase();if(null!==aa.localScope){if(void 0!==aa.localScope[sa])return"lscope['"+sa+"']\x3dlang.assign("+J+",'"+da.operator+"', lscope['"+sa+"'])";if(void 0!==aa.localScope._SymbolsMap[sa])return"lscope['"+aa.localScope._SymbolsMap[sa]+"']\x3dlang.assign("+J+",'"+da.operator+"', lscope['"+aa.localScope._SymbolsMap[sa]+"'])"}if(void 0!==
aa.globalScope[sa])return"gscope['"+sa+"']\x3dlang.assign("+J+",'"+da.operator+"', gscope['"+sa+"'])";if(void 0!==aa.globalScope._SymbolsMap[sa])return"gscope['"+aa.globalScope._SymbolsMap[sa]+"']\x3dlang.assign("+J+",'"+da.operator+"', gscope['"+aa.globalScope._SymbolsMap[sa]+"'])";throw Error("Variable not recognised");}function M(aa,da){return"BlockStatement"===da.type?F(aa,da):"ReturnStatement"===da.type||"BreakStatement"===da.type||"ContinueStatement"===da.type?F(aa,da)+"; ":"UpdateExpression"===
da.type?"lastStatement \x3d "+F(aa,da)+"; ":"ExpressionStatement"===da.type?F(aa,da):"ObjectExpression"===da.type?"lastStatement \x3d "+F(aa,da)+"; ":F(aa,da)+"; "}function X(aa,da){for(var J="",sa=0;sa<da.body.length;sa++)J="ReturnStatement"===da.body[sa].type?J+(F(aa,da.body[sa])+"; \n"):"BreakStatement"===da.body[sa].type?J+(F(aa,da.body[sa])+"; \n"):"ContinueStatement"===da.body[sa].type?J+(F(aa,da.body[sa])+"; \n"):"UpdateExpression"===da.body[sa].type?J+("lastStatement \x3d "+F(aa,da.body[sa])+
"; \n"):"ObjectExpression"===da.body[sa].type?J+("lastStatement \x3d "+F(aa,da.body[sa])+"; \n"):J+(F(aa,da.body[sa])+" \n");return J}function W(aa,da){var J=null===da.init?null:F(aa,da.init);J===h.voidOperation&&(J=null);var sa=da.id.name.toLowerCase();if(null!==aa.localScope){if(void 0!==aa.localScope[sa])return"lscope['"+sa+"']\x3d"+J+"; ";if(void 0!==aa.localScope._SymbolsMap[sa])return"lscope['"+aa.localScope._SymbolsMap[sa]+"']\x3d"+J+"; ";var wa=ca(aa);aa.localScope._SymbolsMap[sa]=wa;aa.mangleMap[sa]=
wa;return"lscope['"+wa+"']\x3d"+J+"; "}if(void 0!==aa.globalScope[sa])return"gscope['"+sa+"']\x3d"+J+"; ";if(void 0!==aa.globalScope._SymbolsMap[sa])return"gscope['"+aa.globalScope._SymbolsMap[sa]+"']\x3d"+J+"; ";wa=ca(aa);aa.globalScope._SymbolsMap[sa]=wa;aa.mangleMap[sa]=wa;return"gscope['"+wa+"']\x3d"+J+"; "}function T(aa,da,J){da=da.toLowerCase();switch(da){case "hasz":return aa=aa.hasZ,void 0===aa?!1:aa;case "hasm":return aa=aa.hasM,void 0===aa?!1:aa;case "spatialreference":return da=aa.spatialReference._arcadeCacheId,
void 0===da&&(J=!0,Object.freeze&&Object.isFrozen(aa.spatialReference)&&(J=!1),J&&(ka++,da=aa.spatialReference._arcadeCacheId=ka)),aa=new g({wkt:aa.spatialReference.wkt,wkid:aa.spatialReference.wkid}),void 0!==da&&(aa._arcadeCacheId="SPREF"+da.toString()),aa}switch(aa.type){case "extent":switch(da){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return aa=aa[da],void 0!==aa?aa:null;case "type":return"Extent"}break;case "polygon":switch(da){case "rings":return da=
aa.getCacheValue("_arcadeCacheId"),void 0===da&&(ka++,da=ka,aa.setCacheValue("_arcadeCacheId",da)),aa=new m(aa.rings,aa.spatialReference,!0===aa.hasZ,!0===aa.hasM,da);case "type":return"Polygon"}break;case "point":switch(da){case "x":case "y":case "z":case "m":return void 0!==aa[da]?aa[da]:null;case "type":return"Point"}break;case "polyline":switch(da){case "paths":return da=aa.getCacheValue("_arcadeCacheId"),void 0===da&&(ka++,da=ka,aa.setCacheValue("_arcadeCacheId",da)),aa=new m(aa.paths,aa.spatialReference,
!0===aa.hasZ,!0===aa.hasM,da);case "type":return"Polyline"}break;case "multipoint":switch(da){case "points":return da=aa.getCacheValue("_arcadeCacheId"),void 0===da&&(ka++,da=ka,aa.setCacheValue("_arcadeCacheId",da)),aa=new f(aa.points,aa.spatialReference,!0===aa.hasZ,!0===aa.hasM,da,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(J,"RUNTIME","PROPERTYNOTFOUND"));}function K(aa,da){try{var J=da.name.toLowerCase();if(null!==aa.localScope){if(void 0!==aa.localScope[J])return"lscope['"+
J+"']";if(void 0!==aa.localScope._SymbolsMap[J])return"lscope['"+aa.localScope._SymbolsMap[J]+"']"}if(void 0!==aa.globalScope[J])return"gscope['"+J+"']";if(void 0!==aa.globalScope._SymbolsMap[J])return"gscope['"+aa.globalScope._SymbolsMap[J]+"']";throw Error(k.nodeErrorMessage(da,"RUNTIME","VARIABLENOTFOUND"));}catch(sa){throw sa;}}function O(aa){return null===aa?"":h.isArray(aa)||h.isImmutableArray(aa)?"Array":h.isDate(aa)?"Date":h.isString(aa)?"String":h.isBoolean(aa)?"Boolean":h.isNumber(aa)?"Number":
aa instanceof d?"Attachment":aa instanceof a?"Portal":aa instanceof g?"Dictionary":aa instanceof n?"Feature":aa instanceof l?"Point":aa instanceof t?"Polygon":aa instanceof w?"Polyline":aa instanceof b?"Multipoint":aa instanceof y?"Extent":h.isFunctionParameter(aa)?"Function":h.isFeatureSet(aa)?"FeatureSet":h.isFeatureSetCollection(aa)?"FeatureSetCollection":aa===h.voidOperation?"":"number"===typeof aa&&isNaN(aa)?"Number":"Unrecognised Type"}function N(aa,da,J,sa){try{if(h.equalityTest(da[J],sa))return da[J+
1];var wa=da.length-J;return 1===wa?da[J]:2===wa?null:3===wa?da[J+2]:N(aa,da,J+2,sa)}catch(U){throw U;}}function Y(aa,da,J,sa){try{if(!0===sa)return da[J+1];if(3===da.length-J)return da[J+2];var wa=da[J+2];if(!1===h.isBoolean(wa))throw Error("WHEN needs boolean test conditions");return Y(aa,da,J+2,wa)}catch(U){throw U;}}function P(aa,da){var J=aa.length,sa=Math.floor(J/2);if(0===J)return[];if(1===J)return[aa[0]];var wa=P(aa.slice(0,sa),da);J=P(aa.slice(sa,J),da);for(sa=[];0<wa.length||0<J.length;)if(0<
wa.length&&0<J.length){var U=da(wa[0],J[0]);isNaN(U)&&(U=0);0>=U?(sa.push(wa[0]),wa=wa.slice(1)):(sa.push(J[0]),J=J.slice(1))}else 0<wa.length?(sa.push(wa[0]),wa=wa.slice(1)):0<J.length&&(sa.push(J[0]),J=J.slice(1));return sa}function L(aa,da){try{var J=aa.length,sa=Math.floor(J/2);if(0===J)return A.resolve([]);if(1===J)return A.resolve([aa[0]]);var wa=[L(aa.slice(0,sa),da),L(aa.slice(sa,J),da)];return A.all(wa).then(function(U){return Q(U[0],U[1],da,[])})}catch(U){return A.reject(U)}}function Q(aa,
da,J,sa){return A.create(function(wa,U){0<aa.length||0<da.length?0<aa.length&&0<da.length?J(aa[0],da[0]).then(function(La){try{isNaN(La)&&(La=1),0>=La?(sa.push(aa[0]),aa=aa.slice(1)):(sa.push(da[0]),da=da.slice(1)),Q(aa,da,J,sa).then(function(Ha){wa(Ha)},U)}catch(Ha){U(Ha)}},U):0<aa.length?(sa.push(aa[0]),aa=aa.slice(1),Q(aa,da,J,sa).then(function(La){wa(La)},U)):0<da.length&&(sa.push(da[0]),da=da.slice(1),Q(aa,da,J,sa).then(function(La){wa(La)},U)):wa(sa)})}function ca(aa){aa.symbols.symbolCounter++;
return"_T"+aa.symbols.symbolCounter.toString()}function ha(aa){aa.symbols.symbolCounter++;return"_Tvar"+aa.symbols.symbolCounter.toString()}function ja(aa,da,J){var sa={};aa||(aa={});J||(J={});sa._SymbolsMap={};sa.textformatting=1;sa.infinity=1;sa.pi=1;for(var wa in da)sa[wa]=1;for(wa in J)sa[wa]=1;for(wa in aa)sa[wa]=1;return sa}function ma(aa,da){for(var J={mode:da,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:D,standardFunctionAsync:D,evaluateIdentifier:R},sa=0;sa<aa.length;sa++)aa[sa].registerFunctions(J);
if("sync"===da){for(var wa in J.functions)qa[wa]=new h.NativeFunction(J.functions[wa]),ea.prototype[wa]=qa[wa];for(sa=0;sa<J.signatures.length;sa++)k.addFunctionDeclaration(J.signatures[sa],"sync")}else{for(wa in J.functions)na[wa]=new h.NativeFunction(J.functions[wa]),oa.prototype[wa]=na[wa];for(sa=0;sa<J.signatures.length;sa++)k.addFunctionDeclaration(J.signatures[sa],"async")}}function R(aa,da){var J=da.name;if("_SymbolsMap"===J)throw"Illegal";if(0<aa.localStack.length){if("_t"!==J.substr(0,2).toLowerCase()&&
void 0!==aa.localStack[aa.localStack.length-1][J])return aa.localStack[aa.localStack.length-1][J];var sa=aa.mangleMap[J];if(void 0!==sa&&void 0!==aa.localStack[aa.localStack.length-1][sa])return aa.localStack[aa.localStack.length-1][sa]}if("_t"!==J.substr(0,2).toLowerCase()&&void 0!==aa.globalScope[J]||1===aa.globalScope._SymbolsMap[J])return aa.globalScope[J];J=aa.mangleMap[J];if(void 0!==J)return aa.globalScope[J]}function fa(aa){}Object.defineProperty(p,"__esModule",{value:!0});p.enableAsyncSupport=
p.compileScript=p.referencesFunction=p.referencesMember=p.validateScript=p.extractExpectedFieldLiterals=p.extractFieldLiterals=p.executeScript=p.extend=p.functionHelper=void 0;var ka=0,qa={};r.registerFunctions(qa,D);z.registerFunctions(qa,D);v.registerFunctions(qa,D);q.registerFunctions(qa,D);x.registerFunctions(qa,D);qa["typeof"]=function(aa,da){return D(aa,da,function(J,sa,wa){h.pcCheck(wa,1,1);J=O(wa[0]);if("Unrecognised Type"===J)throw Error("Unrecognised Type");return J})};qa.iif=function(aa,
da){try{return D(aa,da,function(J,sa,wa){h.pcCheck(wa,3,3);if(!1===h.isBoolean(wa[0]))throw Error("IF Function must have a boolean test condition");return wa[0]?wa[1]:wa[2]})}catch(J){throw J;}};qa.decode=function(aa,da){try{return D(aa,da,function(J,sa,wa){if(2>wa.length)throw Error("Missing Parameters");if(2===wa.length)return wa[1];if(0===(wa.length-1)%2)throw Error("Must have a default value result.");return N(aa,wa,1,wa[0])})}catch(J){throw J;}};qa.when=function(aa,da){try{return D(aa,da,function(J,
sa,wa){if(3>wa.length)throw Error("Missing Parameters");if(0===wa.length%2)throw Error("Must have a default value result.");J=wa[0];if(!1===h.isBoolean(J))throw Error("WHEN needs boolean test conditions");return Y(aa,wa,0,J)})}catch(J){throw J;}};qa.top=function(aa,da){return D(aa,da,function(J,sa,wa){h.pcCheck(wa,2,2);if(h.isArray(wa[0]))return h.toNumber(wa[1])>=wa[0].length?wa[0].slice(0):wa[0].slice(0,h.toNumber(wa[1]));if(h.isImmutableArray(wa[0]))return h.toNumber(wa[1])>=wa[0].length()?wa[0].slice(0):
wa[0].slice(0,h.toNumber(wa[1]));throw Error("Top cannot accept this parameter type");})};qa.first=function(aa,da){return D(aa,da,function(J,sa,wa){h.pcCheck(wa,1,1);return h.isArray(wa[0])?0===wa[0].length?null:wa[0][0]:h.isImmutableArray(wa[0])?0===wa[0].length()?null:wa[0].get(0):null})};qa.sort=function(aa,da){return D(aa,da,function(J,sa,wa){h.pcCheck(wa,1,2);sa=wa[0];h.isImmutableArray(sa)&&(sa=sa.toArray());if(!1===h.isArray(sa))throw Error("Illegal Argument");if(1<wa.length){if(!1===h.isFunctionParameter(wa[1]))throw Error("Illegal Argument");
var U=function(Ga,va){return ra.callfunc(wa[1],[Ga,va],J)};return aa.isAsync?L(sa,U):sa=P(sa,function(Ga,va){return U(Ga,va)})}if(0===sa.length)return[];for(var La={},Ha=0;Ha<sa.length;Ha++){var pa=O(sa[Ha]);""!==pa&&(La[pa]=!0)}if(!0===La.Array||!0===La.Dictionary||!0===La.Feature||!0===La.Point||!0===La.Polygon||!0===La.Polyline||!0===La.Multipoint||!0===La.Extent||!0===La.Function)return sa.slice(0);Ha=0;pa="";for(var Qa in La)Ha++,pa=Qa;return sa=1<Ha||"String"===pa?P(sa,function(Ga,va){if(null===
Ga||void 0===Ga||Ga===h.voidOperation)return null===va||void 0===va||va===h.voidOperation?0:1;if(null===va||void 0===va||va===h.voidOperation)return-1;var za=h.toString(Ga),Ba=h.toString(va);return za<Ba?-1:za===Ba?0:1}):"Number"===pa?P(sa,function(Ga,va){return Ga-va}):"Boolean"===pa?P(sa,function(Ga,va){return Ga===va?0:va?-1:1}):"Date"===pa?P(sa,function(Ga,va){return va-Ga}):sa.slice(0)})};var na={},ia;for(ia in qa)na[ia]=new h.NativeFunction(qa[ia]);u.registerFunctions(qa,D);for(ia in qa)qa[ia]=
new h.NativeFunction(qa[ia]);var ea=function(){};ea.prototype=qa;var oa=function(){};oa.prototype=na;p.functionHelper={fixSpatialReference:h.fixSpatialReference,parseArguments:function(aa,da){for(var J=[],sa=0;sa<da.arguments.length;sa++)J.push(F(aa,da.arguments[sa]));return J},standardFunction:D};p.extend=ma;ma([e],"sync");ma([e],"async");p.executeScript=function(aa,da){return aa(da)};p.extractFieldLiterals=function(aa,da){void 0===da&&(da=!1);return k.findFieldLiterals(aa)};p.extractExpectedFieldLiterals=
function(aa){return k.findExpectedFieldLiterals(aa)};p.validateScript=function(aa,da){return k.validateScript(aa,da,"sync")};p.referencesMember=function(aa,da){return k.referencesMember(aa,da)};p.referencesFunction=function(aa,da){return k.referencesFunction(aa,da)};var ta=0,ra={error:function(aa,da,J){throw Error(k.nodeErrorMessage(aa,da,J));},__awaiter:function(aa,da,J,sa){return A.create(function(wa,U){function La(Qa){try{pa(sa.next(Qa))}catch(Ga){U(Ga)}}function Ha(Qa){try{pa(sa["throw"](Qa))}catch(Ga){U(Ga)}}
function pa(Qa){Qa.done?wa(Qa.value):Qa.value&&Qa.value.then?Qa.value.then(La,Ha):(ta++,0===ta%100?setTimeout(function(){ta=0;La(Qa.value)},0):La(Qa.value))}pa((sa=sa.apply(aa,da||[])).next())})},functionDepthchecker:function(aa,da){return function(){da.depthCounter++;da.localStack.push([]);if(64<da.depthCounter)throw Error("Exceeded maximum function depth");var J=aa.apply(this,arguments);if(A.isPromiseLike(J))return J.then(function(sa){da.depthCounter--;--da.localStack.length;return sa});da.depthCounter--;
--da.localStack.length;return J}},castString:function(aa){return h.toString(aa)},aCheck:function(aa,da){if(h.isFunctionParameter(aa))throw Error(k.nodeErrorMessage({type:da},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return aa===h.voidOperation?null:aa},Dictionary:g,Feature:n,dictionary:function(aa){for(var da={},J=0;J<aa.length;J+=2){if(h.isFunctionParameter(aa[J+1]))throw Error("Illegal Argument");if(!1===h.isString(aa[J]))throw Error("Illegal Argument");da[aa[J].toString()]=aa[J+1]===h.voidOperation?
null:aa[J+1]}aa=new g(da);aa.immutable=!1;return aa},strCheck:function(aa){if(!1===h.isString(aa))throw Error("Illegal Argument");return aa},unary:function(aa,da){if(h.isBoolean(aa)){if("!"===da)return!aa;if("-"===da)return-1*h.toNumber(aa);if("+"===da)return 1*h.toNumber(aa);if("~"===da)return~h.toNumber(aa);throw Error(k.nodeErrorMessage({type:"UnaryExpression",operator:da,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===da)return-1*h.toNumber(aa);if("+"===da)return 1*
h.toNumber(aa);if("~"===da)return~h.toNumber(aa);throw Error(k.nodeErrorMessage({type:"UnaryExpression",operator:da,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(aa){if(!1===h.isBoolean(aa))throw Error(k.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return aa},logical:function(aa,da,J){if(h.isBoolean(aa)&&h.isBoolean(da))switch(J){case "||":return aa||da;case "\x26\x26":return aa&&da}throw Error(k.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(aa,da,J){switch(J){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return h.binaryOperator(h.toNumber(aa),h.toNumber(da),J);case "\x3d\x3d":return h.equalityTest(aa,da);case "\x3d":return h.equalityTest(aa,da);case "!\x3d":return!h.equalityTest(aa,da);case "\x3c":return h.greaterThanLessThan(aa,da,J);case "\x3e":return h.greaterThanLessThan(aa,da,J);case "\x3c\x3d":return h.greaterThanLessThan(aa,
da,J);case "\x3e\x3d":return h.greaterThanLessThan(aa,da,J);case "+":return h.isString(aa)||h.isString(da)?h.toString(aa)+h.toString(da):h.toNumber(aa)+h.toNumber(da);case "-":return h.toNumber(aa)-h.toNumber(da);case "*":return h.toNumber(aa)*h.toNumber(da);case "/":return h.toNumber(aa)/h.toNumber(da);case "%":return h.toNumber(aa)%h.toNumber(da);default:throw Error(k.nodeErrorMessage({type:"BinaryExpression",operator:J,left:aa,right:da},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(aa,
da,J){switch(da){case "\x3d":return aa===h.voidOperation?null:aa;case "/\x3d":return h.toNumber(J)/h.toNumber(aa);case "*\x3d":return h.toNumber(J)*h.toNumber(aa);case "-\x3d":return h.toNumber(J)-h.toNumber(aa);case "+\x3d":return h.isString(J)||h.isString(aa)?h.toString(J)+h.toString(aa):h.toNumber(J)+h.toNumber(aa);case "%\x3d":return h.toNumber(J)%h.toNumber(aa);default:throw Error(k.nodeErrorMessage({type:"AssignmentExpression",operator:da,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));
}},update:function(aa,da,J,sa){var wa=h.toNumber(aa[da]);aa[da]="++"===J?wa+1:wa-1;return!1===sa?wa:"++"===J?wa+1:wa-1},graphicToFeature:function(aa,da){return null===aa?null:n.createFromGraphicLikeObject(aa.geometry,aa.attributes,da)},memberupdate:function(aa,da,J,sa){if(h.isArray(aa))if(h.isNumber(da)){0>da&&(da=aa.length+da);if(0>da||da>=aa.length)throw Error("Assignment outside of array bounds");var wa=h.toNumber(aa[da]);aa[da]="++"===J?wa+1:wa-1}else throw Error("Invalid Parameter");else if(aa instanceof
g){if(!1===h.isString(da))throw Error("Dictionary accessor must be a string");if(!0===aa.hasField(da))wa=h.toNumber(aa.field(da)),aa.setField(da,"++"===J?wa+1:wa-1);else throw Error("Invalid Parameter");}else if(aa instanceof n){if(!1===h.isString(da))throw Error("Feature accessor must be a string");if(!0===aa.hasField(da))wa=h.toNumber(aa.field(da)),aa.setField(da,"++"===J?wa+1:wa-1);else throw Error("Invalid Parameter");}else{if(h.isImmutableArray(aa))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===sa?wa:"++"===J?wa+1:wa-1},assignmember:function(aa,da,J,sa){if(h.isArray(aa))if(h.isNumber(da)){0>da&&(da=aa.length+da);if(0>da||da>aa.length)throw Error("Assignment outside of array bounds");if(da===aa.length&&"\x3d"!==J)throw Error("Invalid Parameter");aa[da]=this.assign(sa,J,aa[da])}else throw Error("Invalid Parameter");else if(aa instanceof g){if(!1===h.isString(da))throw Error("Dictionary accessor must be a string");if(!0===aa.hasField(da))aa.setField(da,this.assign(sa,J,aa.field(da)));
else{if("\x3d"!==J)throw Error("Invalid Parameter");aa.setField(da,this.assign(sa,J,null))}}else if(aa instanceof n){if(!1===h.isString(da))throw Error("Feature accessor must be a string");if(!0===aa.hasField(da))aa.setField(da,this.assign(sa,J,aa.field(da)));else{if("\x3d"!==J)throw Error("Invalid Parameter");aa.setField(da,this.assign(sa,J,null))}}else{if(h.isImmutableArray(aa))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(aa,da){if(null===aa)throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(aa instanceof g||aa instanceof n){if(h.isString(da))return aa.field(da);throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(aa instanceof c){if(h.isString(da))return T(aa,da,"MemberExpression");throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(h.isArray(aa)){if(h.isNumber(da)&&isFinite(da)&&
Math.floor(da)===da){0>da&&(da=aa.length+da);if(da>=aa.length||0>da)throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return aa[da]}throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(h.isString(aa)){if(h.isNumber(da)&&isFinite(da)&&Math.floor(da)===da){0>da&&(da=aa.length+da);if(da>=aa.length||0>da)throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return aa[da]}throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(h.isImmutableArray(aa)&&h.isNumber(da)&&isFinite(da)&&Math.floor(da)===da){0>da&&(da=aa.length()+da);if(da>=aa.length()||0>da)throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return aa.get(da)}throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(aa,da,J){return aa instanceof h.NativeFunction?aa.fn(J,{arguments:da,preparsed:!0}):aa instanceof h.SizzleFunction?aa.fn.apply(this,da):aa.apply(this,da)}};p.compileScript=function(aa,da,J){void 0===da&&(da=null);void 0===J&&(J=!1);null===da&&(da={vars:{},customfunctions:{}});da={isAsync:J,globalScope:ja(da.vars,J?na:qa,da.customfunctions),localScope:null,mangleMap:{},console:fa,lrucache:da.lrucache,interceptor:da.interceptor,
services:da.services,symbols:{symbolCounter:0}};aa=F(da,aa.body[0].body);""===aa&&(aa="lc.voidOperation; ");da={lc:h,lang:ra,mangles:da.mangleMap,postProcess:function(sa){sa instanceof h.ReturnResult&&(sa=sa.value);sa instanceof h.ImplicitResult&&(sa=sa.value);sa===h.voidOperation&&(sa=null);if(sa===h.breakResult)throw Error("Cannot return BREAK");if(sa===h.continueResult)throw Error("Cannot return CONTINUE");if(h.isFunctionParameter(sa))throw Error("Cannot return FUNCTION");return sa},prepare:function(sa,
wa){var U=sa.spatialReference;if(null===U||void 0===U)U=new C({wkid:102100});var La=sa.vars,Ha=sa.customfunctions,pa=wa?new oa:new ea;La||(La={});Ha||(Ha={});var Qa=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Qa.immutable=!1;pa._SymbolsMap={textformatting:1,infinity:1,pi:1};pa.textformatting=Qa;pa.infinity=Number.POSITIVE_INFINITY;pa.pi=Math.PI;for(var Ga in Ha)pa[Ga]=Ha[Ga],pa._SymbolsMap[Ga]=1;for(Ga in La)pa._SymbolsMap[Ga]=1,pa[Ga]=La[Ga]&&
"esri.Graphic"===La[Ga].declaredClass?n.createFromGraphic(La[Ga]):La[Ga];return{localStack:[],isAsync:wa,mangleMap:this.mangles,spatialReference:U,globalScope:pa,abortSignal:void 0===sa.abortSignal||null===sa.abortSignal?{aborted:!1}:sa.abortSignal,localScope:null,services:sa.services,console:sa.console?sa.console:fa,lrucache:sa.lrucache,interceptor:sa.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",J?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
aa+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+aa+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(da)};p.enableAsyncSupport=function(){return A.create(function(aa,da){B(["./functions/geomasync"],function(J){ma([J],"async");aa(!0)},
function(J){da(J)})})}})},"esri/arcade/ArcadePortal":function(){var B=this&&this.__extends||function(){var p=function(a,d){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(g[m]=n[m])};return p(a,d)};return function(a,d){function g(){this.constructor=a}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");p(a,d);a.prototype=
null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();define(["require","exports","./Dictionary"],function(p,a,d){return function(g){function n(m){var f=g.call(this)||this;f.immutable=!1;f.setField("url",m);f.immutable=!0;return f}B(n,g);return n}(d)})},"esri/arcade/Attachment":function(){var B=this&&this.__extends||function(){var p=function(a,d){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var m in n)Object.prototype.hasOwnProperty.call(n,
m)&&(g[m]=n[m])};return p(a,d)};return function(a,d){function g(){this.constructor=a}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");p(a,d);a.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();define(["require","exports","./Dictionary"],function(p,a,d){return function(g){function n(m,f,h,k,e,r){var q=g.call(this)||this;q.attachmentUrl=e;q.immutable=!1;q.setField("id",m);q.setField("name",f);q.setField("contenttype",
h);q.setField("size",k);q.setField("exifinfo",r);q.immutable=!0;return q}B(n,g);return n}(d)})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(B,p){function a(b,l){return"0"!==b.min&&l.length<Number(b.min)||"*"!==b.max&&l.length>Number(b.max)?-2:1}function d(b,l,t){if(null!==t.localScope&&void 0!==t.localScope[b.toLowerCase()]){var w=t.localScope[b.toLowerCase()];if("FormulaFunction"===w.type||"any"===w.type)return void 0===w.signature&&(w.signature={min:"0",max:"*"}),
a(w.signature,l)}return void 0!==t.globalScope[b.toLowerCase()]&&(w=t.globalScope[b.toLowerCase()],"FormulaFunction"===w.type||"any"===w.type)?(void 0===w.signature&&(w.signature={min:"0",max:"*"}),a(w.signature,l)):-1}function g(b,l){if(b)for(var t=0;t<b.length;t++)n(b[t],l)}function n(b,l){if(b&&!1!==l(b))switch(b.type){case "ArrayExpression":g(b.elements,l);break;case "AssignmentExpression":case "BinaryExpression":n(b.left,l);n(b.right,l);break;case "BlockStatement":g(b.body,l);break;case "CallExpression":n(b.callee,
l);g(b.arguments,l);break;case "ExpressionStatement":n(b.expression,l);break;case "ForInStatement":n(b.left,l);n(b.right,l);n(b.body,l);break;case "ForStatement":n(b.init,l);n(b.test,l);n(b.update,l);n(b.body,l);break;case "FunctionDeclaration":n(b.id,l);g(b.params,l);n(b.body,l);break;case "IfStatement":n(b.test,l);n(b.consequent,l);n(b.alternate,l);break;case "LogicalExpression":n(b.left,l);n(b.right,l);break;case "MemberExpression":n(b.object,l);n(b.property,l);break;case "ObjectExpression":g(b.properties,
l);break;case "Program":g(b.body,l);break;case "Property":n(b.key,l);n(b.value,l);break;case "ReturnStatement":n(b.argument,l);break;case "UnaryExpression":n(b.argument,l);break;case "UpdateExpression":n(b.argument,l);break;case "VariableDeclaration":g(b.declarations,l);break;case "VariableDeclarator":n(b.id,l);n(b.init,l);break;case "TemplateLiteral":g(b.expressions,l),g(b.quasis,l)}}function m(b,l){void 0===l&&(l=!0);var t=q(b,"SYNTAX","UNREOGNISED");try{switch(b.type){case "VariableDeclarator":return"Identifier"!==
b.id.type?q(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==b.init?m(b.init,!1):"";case "VariableDeclaration":for(var w=0;w<b.declarations.length;w++)if(t=m(b.declarations[w],l),""!==t)return t;return"";case "ForInStatement":t=m(b.left,l);if(""!==t)break;if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return q(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return q(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return q(b,"SYNTAX","LEFTNOTVAR");
t=m(b.right,l);if(""!==t)break;t=m(b.body,l);if(""!==t)break;return"";case "ForStatement":if(null!==b.test&&(t=m(b.test,l),""!==t))break;if(null!==b.init&&(t=m(b.init,l),""!==t))break;if(null!==b.update&&(t=m(b.update,l),""!==t))break;if(null!==b.body&&(t=m(b.body,l),""!==t))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":t=m(b.test,l);if(""!==t)break;if(null!==b.consequent&&(t=m(b.consequent,!1),""!==t))break;if(null!==
b.alternate&&(t=m(b.alternate,!1),""!==t))break;return"";case "BlockStatement":var C=[];for(w=0;w<b.body.length;w++)"EmptyStatement"!==b.body[w].type&&C.push(b.body[w]);b.body=C;for(w=0;w<b.body.length;w++)if(t=m(b.body[w],l),""!==t)return t;return"";case "FunctionDeclaration":return!1===l?q(b,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==b.id.type?q(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):m(b.body,!1);case "ReturnStatement":return null!==b.argument?m(b.argument,l):"";case "UpdateExpression":return"Identifier"!==
b.argument.type&&"MemberExpression"!==b.argument.type?q(b,"SYNTAX","ASSIGNMENTTOVARSONLY"):m(b.argument,l);case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return q(b,"SYNTAX","ASSIGNMENTTOVARSONLY");t=m(b.left,l);if(""!==t)break;switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(b,"SYNTAX","OPERATORNOTRECOGNISED")}return m(b.right,!1);case "ExpressionStatement":return m(b.expression,!1);
case "Identifier":t="";break;case "MemberExpression":t=m(b.object,l);if(""!==t)break;return!0===b.computed?m(b.property,l):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==b.callee.type)return q(b,"SYNTAX","ONLYNODESSUPPORTED");t="";for(w=0;w<b.arguments.length;w++)if(t=m(b.arguments[w],l),""!==t)return t;return"";case "UnaryExpression":t=m(b.argument,l);break;case "BinaryExpression":t=m(b.left,l);if(""!==t)break;t=m(b.right,l);if(""!==t)break;switch(b.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return q(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":t=m(b.left,l);if(""!==t)break;t=m(b.right);if(""!==t)break;switch(b.operator){case "\x26\x26":case "||":break;default:return q(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":t="";for(w=0;w<b.elements.length&&(t=m(b.elements[w],l),""===t);w++);break;case "TemplateLiteral":t="";for(w=0;w<b.quasis.length;w++)if(t=m(b.quasis[w],l),""!==t)return t;for(w=0;w<b.expressions.length&&(t=m(b.expressions[w],
l),""===t);w++);break;case "ObjectExpression":t="";for(w=0;w<b.properties.length;w++){t="";if(null!==b.properties[w].key&&("Literal"!==b.properties[w].key.type&&"Identifier"!==b.properties[w].key.type&&(t=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[w].key.type)){C=b.properties[w].key;var D="value"in C?C.value:null;"string"===typeof D||D instanceof String||(t=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===t&&(t=m(b.properties[w],l));if(""!==t)break}break;case "Property":if("Literal"!==
b.key.type&&"Identifier"!==b.key.type)return q(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(t=m(b.key,l),""!==t))break;t=m(b.value,l)}return t}catch(E){throw E;}}function f(b,l){var t=q(b,"SYNTAX","UNREOGNISED"),w=null,C="";try{switch(b.type){case "VariableDeclarator":var D=null===b.init?"":f(b.init,l);if(""!==D)return D;"Identifier"===b.id.type&&(null===l.localScope?l.globalScope[b.id.name.toLowerCase()]={type:"any"}:l.localScope[b.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":w=
k(b.id.name.toLowerCase(),b);C=e(b,l);if(""!==C)return C;if(null!==l.localScope)return q(b,"SYNTAX","GLOBALFUNCTIONSONLY");w.isnative=!1;l.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[w]};return"";case "VariableDeclaration":t="";for(var E=0;E<b.declarations.length&&(t=f(b.declarations[E],l),""===t);E++);break;case "IfStatement":t=f(b.test,l);if(""!==t)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)return q(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==b.consequent&&(t=f(b.consequent,l),""!==t))break;if(null!==b.alternate&&(t=f(b.alternate,l),""!==t))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<b.body.length;E++)if(t=f(b.body[E],l),""!==t)return t;return"";case "ReturnStatement":return null!==b.argument?f(b.argument,l):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return q(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return q(b,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return q(b,"SYNTAX","LEFTNOTVAR");t=f(b.left,l);if(""!==t)break;t=f(b.right,l);if(""!==t)break;t=f(b.body,l);if(""!==t)break;return"";case "ForStatement":if(null!==b.init&&(t=f(b.init,l),""!==t))break;if(null!==b.test&&(t=f(b.test,l),""!==t))break;if(null!==b.body&&(t=f(b.body,l),""!==t))break;if(null!==b.update&&(t=f(b.update,l),""!==t))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
b.argument.type&&"MemberExpression"!==b.argument.type)return q(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=!1;if("MemberExpression"===b.argument.type)return f(b.argument,l);null!==l.localScope&&void 0!==l.localScope[b.argument.name.toLowerCase()]&&(F=!0);void 0!==l.globalScope[b.argument.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return q(b,"SYNTAX","ASSIGNMENTTOVARSONLY");
var G=f(b.right,l);if(""!==G)return G;F=!1;if("MemberExpression"===b.left.type)return G=f(b.left,l),""!==G?G:"";null!==l.localScope&&void 0!==l.localScope[b.left.name.toLowerCase()]&&(F=!0);void 0!==l.globalScope[b.left.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return f(b.expression,l);case "Identifier":var H=b.name.toLowerCase();if(null!==l.localScope&&void 0!==l.localScope[H])return"";t=void 0!==l.globalScope[H]?"":
q(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":t=f(b.object,l);if(""!==t)break;return!0===b.computed?f(b.property,l):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==b.callee.type)return q(b,"SYNTAX","ONLYNODESSUPPORTED");t="";for(E=0;E<b.arguments.length;E++)if(t=f(b.arguments[E],l),""!==t)return t;var M=d(b.callee.name,b.arguments,l);-1===M&&(t=q(b,"SYNTAX","NOTFOUND"));-2===M&&(t=q(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t=
f(b.argument,l);break;case "BinaryExpression":t=f(b.left,l);if(""!==t)break;t=f(b.right,l);if(""!==t)break;return"";case "LogicalExpression":t=f(b.left,l);if(""!==t)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)return q(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");t=f(b.right,l);if(""!==t)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type?q(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":t=
"";for(E=0;E<b.elements.length&&(t=f(b.elements[E],l),""===t);E++);break;case "TemplateLiteral":t="";for(E=0;E<b.quasis.length;E++)if(t=f(b.quasis[E],l),""!==t)return t;for(E=0;E<b.expressions.length&&(t=f(b.expressions[E],l),""===t);E++);break;case "ObjectExpression":t="";for(E=0;E<b.properties.length;E++){t="";if(null!==b.properties[E].key&&("Literal"!==b.properties[E].key.type&&"Identifier"!==b.properties[E].key.type&&(t=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[E].key.type)){var X=
b.properties[E].key,W="value"in X?X.value:null;"string"===typeof W||W instanceof String||(t=q(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===t&&(t=f(b.properties[E],l));if(""!==t)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return q(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(t=f(b.key,l),""!==t))break;t=f(b.value,l)}return t}catch(T){throw T;}}function h(b,l){var t=!1,w=l.toLowerCase();n(b,function(C){if(t)return!1;"Identifier"===C.type&&C.name&&C.name.toLowerCase()===
w&&(t=!0);return!0});return t}function k(b,l){var t=[];if(void 0!==l.params&&null!==l.params)for(var w=0;w<l.params.length;w++)t.push("any");return{name:b,"return":"any",params:t}}function e(b,l){for(var t={globalScope:l.globalScope,localScope:{}},w=0;w<b.params.length;w++)t.localScope[b.params[w].name.toLowerCase()]={type:"any"};return f(b.body,t)}function r(b,l,t,w){var C={};if(void 0===b||null===b)b={};if(void 0===t||null===t)t={};C.infinity={type:"any"};C.textformatting={type:"any"};C.pi={type:"any"};
for(var D in l)"sync"===w&&void 0!==l[D].min?C[D]={type:"FormulaFunction",signature:{min:l[D].min,max:l[D].max}}:"sync"!==w&&void 0!==l[D].fmin&&(C[D]={type:"FormulaFunction",signature:{min:l[D].fmin,max:l[D].fmax}});for(l=0;l<t.length;l++)D=t[l],C[D.name]={type:"FormulaFunction",signature:D};for(D in b)C[D]=b[D],C[D].type="any";return C}function q(b,l,t){var w="";switch(l){case "SYNTAX":w="Syntax Error: ";break;case "RUNTIME":w="Runtime Error: ";break;default:w="Syntax Error: "}try{switch(b.type){case "IfStatement":switch(t){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":w+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":w+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(t){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":w+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":w+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":w+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(t){case "GLOBALFUNCTIONSONLY":w+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":w+=" Function Definition must have an identifier"}break;case "VariableDeclaration":w+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(t){case "FUNCTIONVARIABLEDECLARATOR":w+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":w+=" Variable Definition must have an identifier"}break;case "Identifier":w+=" Identifier Not Found. ";w+=b.name;break;case "ObjectExpression":switch(t){case "OBJECTPROPERTYMUSTBESTRING":w+=
" Property name must be a string"}break;case "ForStatement":switch(t){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":w+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(t){case "ONLY1VAR":w+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":w+=" Can only declare value for use with IN";break;case "LEFTNOVAR":w+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":w+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":w+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(t){case "PROPERTYNOTFOUND":w+="Cannot find member property. ";w+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "OUTOFBOUNDS":w+="Out of Bounds. ";w+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "NOTFOUND":w+="Cannot call member method on null. ";w+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "INVALIDTYPE":w+="Cannot call member property on object of this type. ",
w+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":""}break;case "Property":switch(t){case "ONLYLITERAL":w+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(t){case "WRONGSIGNATURE":w+="Function signature does not match: ";w+="Identifier"===b.callee.type?b.callee.name:"";break;case "ONLYNODESUPPORTED":w+="Functions must be declared.";w+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTAFUNCTION":w+="Not a Function: ";
w+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTFOUND":w+="Function Not Found: "+("Identifier"===b.callee.type?b.callee.name:"")}break;case "UnaryExpression":switch(t){case "NOTSUPPORTEDUNARYOPERATOR":w+="Operator "+b.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":w+="Unary operator "+b.operator+" cannot be used with this argument."}case "BinaryExpression":switch(t){case "OPERATORNOTRECOGNISED":w+="Binary Operator not recognised "+
b.operator}break;case "LogicalExpression":switch(t){case "ONLYBOOLEAN":w+="Operator "+b.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":w+="Logical Expression "+b.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(t){case "FUNCTIONCONTEXTILLEGAL":w+=" Cannot Put Function inside Array."}break;default:w+="Expression contains unrecognised code structures."}}catch(C){throw C;}return w}function u(b,l,t){return{line:b.loc.start.line,
character:b.loc.start.column,reason:q(b,l,t)}}function v(b,l,t,w){l={globalScope:l.globalScope,localScope:{}};for(var C=0;C<b.params.length;C++)l.localScope[b.params[C].name.toLowerCase()]={type:"any"};x(b.body,l,t,w,!1)}function x(b,l,t,w,C){void 0===C&&(C=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");var D=null;try{switch(b.type){case "VariableDeclarator":"Identifier"!==b.id.type?w.push(u(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(b.id.name.toLowerCase(),null===l.localScope?l.globalScope[b.id.name.toLowerCase()]=
{type:"any"}:l.localScope[b.id.name.toLowerCase()]={type:"any"});null!==b.init&&x(b.init,l,t,w,C);break;case "FunctionDeclaration":!1===C&&w.push(u(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&w.push(u(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));D=k("",b);v(b,l,t,w);null!==l.localScope&&w.push(u(b,"SYNTAX","GLOBALFUNCTIONSONLY"));D.isnative=!1;"Identifier"===b.id.type&&(l.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",signature:[D]});break;case "VariableDeclaration":for(var E=
0;E<b.declarations.length;E++)x(b.declarations[E],l,t,w,C);break;case "IfStatement":null!==b.test&&(x(b.test,l,t,w,C),"AssignmentExpression"!==b.test.type&&"UpdateExpression"!==b.test.type||w.push(u(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&x(b.consequent,l,t,w,C);null!==b.alternate&&x(b.alternate,l,t,w,C);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(E=0;E<b.body.length;E++)x(b.body[E],l,t,w,C);break;case "ReturnStatement":null!==
b.argument&&x(b.argument,l,t,w,C);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&w.push(u(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&w.push(u(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&w.push(u(b,"SYNTAX","LEFTNOTVAR"));x(b.left,l,t,w,C);x(b.right,l,t,w,C);x(b.body,l,t,w,C);break;case "ForStatement":null!==b.init&&x(b.init,l,t,w,C);null!==b.test&&x(b.test,l,t,w,C);null!==b.body&&x(b.body,l,t,w,C);null!==b.update&&x(b.update,
l,t,w,C);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)w.push(u(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===b.argument.type){var F=!1;!1===t&&(null!==l.localScope&&void 0!==l.localScope[b.argument.name.toLowerCase()]&&(F=!0),void 0!==l.globalScope[b.argument.name.toLowerCase()]&&(F=!0),!1===F&&w.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,
reason:"Identifier "+b.argument.name+" has not been declared."}))}"MemberExpression"===b.argument.type&&x(b.argument,l,t,w,C)}break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&w.push(u(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:w.push(u(b,"SYNTAX","OPERATORNOTRECOGNISED"))}x(b.right,l,t,w,C);F=!1;"Identifier"===b.left.type&&(null!==l.localScope&&void 0!==
l.localScope[b.left.name.toLowerCase()]&&(F=!0),void 0!==l.globalScope[b.left.name.toLowerCase()]&&(F=!0),!1===t&&!1===F&&w.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.left.name+" has not been declared."}));"MemberExpression"===b.left.type&&x(b.left,l,t,w,C);break;case "ExpressionStatement":x(b.expression,l,t,w,C);break;case "Identifier":var G=b.name.toLowerCase();if(null!==l.localScope&&void 0!==l.localScope[G]||void 0!==l.globalScope[G])break;
!1===t&&w.push(u(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":x(b.object,l,t,w,C);!0===b.computed&&x(b.property,l,t,w,C);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==b.callee.type&&w.push(u(b,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<b.arguments.length;E++)x(b.arguments[E],l,t,w,C);if("Identifier"===b.callee.type){var H=d(b.callee.name,b.arguments,l);!1===t&&-1===H&&w.push(u(b,"SYNTAX","NOTFOUND"));-2===H&&w.push(u(b,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":x(b.argument,l,t,w,C);break;case "BinaryExpression":x(b.left,l,t,w,C);x(b.right,l,t,w,C);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:w.push(u(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;default:w.push(u(b,
"SYNTAX","OPERATORNOTRECOGNISED"))}x(b.left,l,t,w,C);"AssignmentExpression"!==b.left.type&&"UpdateExpression"!==b.left.type||w.push(u(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));x(b.right,l,t,w,C);"AssignmentExpression"!==b.right.type&&"UpdateExpression"!==b.right.type||w.push(u(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(E=0;E<b.elements.length;E++)x(b.elements[E],l,t,w,C);break;case "TemplateLiteral":for(E=0;E<b.quasis.length;E++)x(b.quasis[E],l,t,w,
C);for(E=0;E<b.expressions.length;E++)x(b.expressions[E],l,t,w,C);break;case "ObjectExpression":for(E=0;E<b.properties.length;E++)x(b.properties[E],l,t,w,C);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&w.push(u(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&x(b.key,l,t,w,C);x(b.value,l,t,w,C);break;default:w.push(u(b,"SYNTAX","UNRECOGNISED"))}}catch(M){w.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}function z(b){var l=
[];n(b,function(t){"CallExpression"===t.type&&"Identifier"===t.callee.type&&l.push(t.callee.name.toLowerCase());return!0});return l}Object.defineProperty(p,"__esModule",{value:!0});p.scriptUsesFeatureSet=p.findScriptDependencies=p.findFunctionCalls=p.checkScript=p.extractAllIssues=p.extractAllIssuesInFunction=p.makeError=p.nodeErrorMessage=p.validateLanguage=p.validateScript=p.constructGlobalScope=p.validateFunction=p.extractFunctionDeclaration=p.findExpectedFieldLiterals=p.findFieldLiterals=p.referencesFunction=
p.referencesMember=p.testValidityOfExpression=p.validateLanguageNode=p.walk=p.findFunction=p.checkFunctionSignature=p.addFunctionDeclaration=p.functionDecls=void 0;p.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var A in p.functionDecls)p.functionDecls[A].fmin=p.functionDecls[A].min,p.functionDecls[A].fmax=p.functionDecls[A].max;var y="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
c="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");p.addFunctionDeclaration=function(b,l){var t=p.functionDecls[b.name.toLowerCase()];void 0===t?"sync"===l?p.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:p.functionDecls[b.name.toLowerCase()]=
{fmin:b.min,fmax:b.max}:"sync"===l?(t.min=b.min,t.max=b.max):(t.fmin=b.min,t.fmax=b.max)};p.checkFunctionSignature=a;p.findFunction=d;p.walk=n;p.validateLanguageNode=m;p.testValidityOfExpression=f;p.referencesMember=h;p.referencesFunction=function(b,l){var t=!1,w=l.toLowerCase();n(b,function(C){return t?!1:"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===w?(t=!0,!1):!0});return t};p.findFieldLiterals=function(b){var l=[];n(b,function(t){if("MemberExpression"!==
t.type||"Identifier"!==t.object.type)return!0;!1===t.computed&&t.object&&t.object.name&&t.property&&"Identifier"===t.property.type&&t.property.name?l.push(t.object.name.toLowerCase()+"."+t.property.name.toLowerCase()):t.object&&t.object.name&&t.property&&"Literal"===t.property.type&&"string"===typeof t.property.value&&l.push(t.object.name.toLowerCase()+"."+t.property.value.toString().toLowerCase());return!1});return l};p.findExpectedFieldLiterals=function(b){var l=[];n(b,function(t){if("CallExpression"===
t.type&&"Identifier"===t.callee.type&&"expects"===t.callee.name.toLowerCase()){for(var w="",C=0;C<(t.arguments||[]).length;C++)if(0===C)"Identifier"===t.arguments[C].type&&(w=t.arguments[C].name.toLowerCase());else{var D;if(D=w&&"Literal"===t.arguments[C].type)D=t.arguments[C].value,D="string"===typeof D||D instanceof String;D&&l.push(w+"."+t.arguments[C].value.toLowerCase())}return!1}if("MemberExpression"!==t.type||"Identifier"!==t.object.type)return!0;!1===t.computed&&t.object&&t.object.name&&t.property&&
"Identifier"===t.property.type&&t.property.name?l.push(t.object.name.toLowerCase()+"."+t.property.name.toLowerCase()):t.object&&t.object.name&&t.property&&"Literal"===t.property.type&&"string"===typeof t.property.value&&l.push(t.object.name.toLowerCase()+"."+t.property.value.toString().toLowerCase());return!1});return l};p.extractFunctionDeclaration=k;p.validateFunction=e;p.constructGlobalScope=r;p.validateScript=function(b,l,t,w){void 0===t&&(t="async");void 0===w&&(w=p.functionDecls);l={globalScope:r(l.vars,
w,l.customFunctions,t),localScope:null};return f(b.body[0].body,l)};p.validateLanguage=function(b){return"BlockStatement"!==b.body[0].body.type?"Invalid formula content.":m(b.body[0].body)};p.nodeErrorMessage=q;p.makeError=u;p.extractAllIssuesInFunction=v;p.extractAllIssues=x;p.checkScript=function(b,l,t,w,C){void 0===w&&(w="async");void 0===C&&(C=p.functionDecls);var D=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===l||void 0===l)l={vars:{},
customFunctions:[]};l={globalScope:r(l.vars,C,l.customFunctions,w),localScope:null};try{x(b.body[0].body,l,t,D)}catch(E){}return D};p.findFunctionCalls=z;p.findScriptDependencies=function(b,l){void 0===l&&(l=[]);var t=null;if(void 0===b.usesFeatureSet){null===t&&(t=z(b));b.usesFeatureSet=!1;for(var w=0;w<t.length;w++)-1<y.indexOf(t[w])&&(b.usesFeatureSet=!0,b.isAsync=!0);if(!1===b.usesFeatureSet&&l&&0<l.length){w=0;for(var C=l;w<C.length;w++)if(h(b,C[w])){b.usesFeatureSet=!0;b.isAsync=!0;break}}}if(void 0===
b.usesGeometry)for(b.usesGeometry=!1,null===t&&(t=z(b)),w=0;w<t.length;w++)-1<c.indexOf(t[w])&&(b.usesGeometry=!0)};p.scriptUsesFeatureSet=function(b){b=z(b);for(var l=0;l<b.length;l++)if(-1<y.indexOf(b[l]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;p.registerFunctions=
function(m){function f(k,e){if(e instanceof a)return m.arcadeCustomFunctionHandler(e);if(e instanceof g.NativeFunction)return function(){for(var r=[],q=0;q<arguments.length;q++)r[q]=arguments[q];return e.fn(k,{preparsed:!0,arguments:r})};if(e instanceof g.SizzleFunction)return function(){for(var r=[],q=0;q<arguments.length;q++)r[q]=arguments[q];if(r.length!==e.paramCount)throw Error("Invalid parameters");return e.fn.apply(e,r)};throw Error("Invalid Parameter");}function h(k){if(k instanceof d)return k.toArray();
if(g.isArray(k))return k;throw Error("Invalid Parameter");}m.functions.array=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,1,2);r=g.toNumber(u[0]);if(isNaN(r)||!1===g.isInteger(r))throw Error("Invalid Parameter");u=g.defaultUndefined(u[1],null);r=Array(r);r.fill(u);return r})};m.functions.front=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,1,1);if(g.isImmutableArray(u[0])){if(0>=u[0].length())throw Error("Array is empty");return u[0].get(0)}if(g.isArray(u[0])){if(0>=
u[0].length)throw Error("Array is empty");return u[0][0]}throw Error("Invalid Parameter");})};m.functions.back=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,1,1);if(g.isImmutableArray(u[0])){if(0>=u[0].length())throw Error("Array is empty");return u[0].get(u[0].length()-1)}if(g.isArray(u[0])){if(0>=u[0].length)throw Error("Array is empty");return u[0][u[0].length-1]}throw Error("Invalid Parameter");})};m.functions.push=function(k,e){return m.standardFunction(k,e,function(r,
q,u){g.pcCheck(u,1,2);if(g.isArray(u[0]))return u[0][u[0].length]=u[1],u[0].length;throw Error("Invalid Parameter");})};m.functions.pop=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,1,1);if(g.isArray(u[0])){if(0>=u[0].length)throw Error("Array is empty");r=u[0][u[0].length-1];--u[0].length;return r}throw Error("Invalid Parameter");})};m.functions.erase=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);if(g.isArray(u[0])){r=g.toNumber(u[1]);if(isNaN(r)||
!1===g.isInteger(r))throw Error("Invalid Parameter");u=u[0];if(0>=u.length)throw Error("Array is empty");0>r&&(r=u.length+r);if(0>r)throw Error("Element not found");if(r>=u.length)throw Error("Index is greater than array");u.splice(r,1);return g.voidOperation}throw Error("Invalid Parameter");})};m.functions.insert=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,3,3);if(g.isArray(u[0])){r=g.toNumber(u[1]);if(isNaN(r)||!1===g.isInteger(r))throw Error("Invalid Parameter");q=u[2];
u=u[0];if(r>u.length)throw Error("Index is greater than array");if(0>r&&r<-1*u.length)throw Error("Index is greater than array");if(r===u.length)return u[r]=q,g.voidOperation;u.splice(r,0,q);return g.voidOperation}throw Error("Invalid Parameter");})};m.functions.resize=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,3);if(g.isArray(u[0])){q=g.toNumber(u[1]);if(isNaN(q)||!1===g.isInteger(q))throw Error("Invalid Parameter");if(0>q)throw Error("Size cannot be negative");r=g.defaultUndefined(u[2],
null);u=u[0];if(u.length>=q)return u.length=q,g.voidOperation;var v=u.length;u.length=q;for(q=v;q<u.length;q++)u[q]=r;return g.voidOperation}throw Error("Invalid Parameter");})};m.functions.includes=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);if(g.isArray(u[0])){var v=u[1];r=u[0];return-1<r.findIndex(function(z){return g.equalityTest(z,v)})?!0:!1}if(g.isImmutableArray(u[0])){var x=u[1];r=u[0].toArray();return-1<r.findIndex(function(z){return g.equalityTest(z,x)})?
!0:!1}throw Error("Invalid Parameter");})};m.functions.slice=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,1,3);if(g.isArray(u[0])){r=g.toNumber(g.defaultUndefined(u[1],0));q=g.toNumber(g.defaultUndefined(u[2],u[0].length));if(isNaN(r)||!1===g.isInteger(r))throw Error("Invalid Parameter");if(isNaN(q)||!1===g.isInteger(q))throw Error("Invalid Parameter");var v=u[0];return v.slice(r,q)}if(g.isImmutableArray(u[0])){v=u[0];r=g.toNumber(g.defaultUndefined(u[1],0));q=g.toNumber(g.defaultUndefined(u[2],
v.length()));if(isNaN(r)||!1===g.isInteger(r))throw Error("Invalid Parameter");if(isNaN(q)||!1===g.isInteger(q))throw Error("Invalid Parameter");return v.toArray().slice(r,q)}throw Error("Invalid Parameter");})};m.functions.splice=function(k,e){return m.standardFunction(k,e,function(r,q,u){r=[];for(q=0;q<u.length;q++)g.isArray(u[q])?r.push.apply(r,u[q]):g.isImmutableArray(u[q])?r.push.apply(r,u[q].toArray()):r.push(u[q]);return r})};"sync"===m.mode&&(m.functions.any=function(k,e){return m.standardFunction(k,
e,function(r,q,u){g.pcCheck(u,2,2);r=f(k,u[1]);q=0;for(u=h(u[0]);q<u.length;q++){var v=r(u[q]);if(g.isBoolean(v)&&!0===v)return!0}return!1})},m.functions.all=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);r=f(k,u[1]);q=0;for(u=h(u[0]);q<u.length;q++)if(!0!==r(u[q]))return!1;return!0})},m.functions.none=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);r=f(k,u[1]);q=0;for(u=h(u[0]);q<u.length;q++)if(!0===r(u[q]))return!1;return!0})},m.functions.reduce=
function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,3);var v=f(k,u[1]);r=h(u[0]);return 2===u.length?0===r.length?null:r.reduce(function(x,z){var A=v(x,z);return x=void 0!==A&&A!==g.voidOperation?A:null}):r.reduce(function(x,z){var A=v(x,z);return x=void 0!==A&&A!==g.voidOperation?A:null},u[2])})},m.functions.map=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);r=f(k,u[1]);q=[];var v=0;for(u=h(u[0]);v<u.length;v++){var x=r(u[v]);void 0!==x&&x!==g.voidOperation?
q.push(x):q.push(null)}return q})},m.functions.filter=function(k,e){return m.standardFunction(k,e,function(r,q,u){g.pcCheck(u,2,2);r=f(k,u[1]);q=[];var v=0;for(u=h(u[0]);v<u.length;v++){var x=u[v];!0===r(x)&&q.push(x)}return q})});"async"===m.mode&&(m.functions.any=function(k,e){return m.standardFunctionAsync(k,e,function(r,q,u){g.pcCheck(u,2,2);var v=f(k,u[1]),x=!1;return h(u[0]).reduce(function(z,A,y){return z.then(function(c){0<y&&!0===c&&(x=!0);if(!0===x)return n.resolve(!0);c=v(A);return n.isPromiseLike(c)?
c:n.resolve(c)})},Promise.resolve(!1)).then(function(z){!0===z&&(x=!0);return x})})},m.functions.all=function(k,e){return m.standardFunctionAsync(k,e,function(r,q,u){g.pcCheck(u,2,2);var v=f(k,u[1]),x=!0;return h(u[0]).reduce(function(z,A,y){return z.then(function(c){0<y&&!0!==c&&(x=!1);if(!1===x)return n.resolve(!1);c=v(A);return n.isPromiseLike(c)?c:n.resolve(c)})},Promise.resolve(!0)).then(function(z){!0!==z&&(x=!1);return x})})},m.functions.none=function(k,e){return m.standardFunctionAsync(k,
e,function(r,q,u){g.pcCheck(u,2,2);var v=f(k,u[1]),x=!0;return h(u[0]).reduce(function(z,A,y){return z.then(function(c){0<y&&!0===c&&(x=!1);if(!1===x)return n.resolve(!0);c=v(A);return n.isPromiseLike(c)?c:n.resolve(c)})},Promise.resolve(!1)).then(function(z){!0===z&&(x=!1);return x})})},m.functions.filter=function(k,e){return m.standardFunctionAsync(k,e,function(r,q,u){g.pcCheck(u,2,2);var v=f(k,u[1]),x=h(u[0]),z=[];return x.reduce(function(A,y,c){return A.then(function(b){0<c&&!0===b&&z.push(x[c-
1]);b=v(y);return n.isPromiseLike(b)?b:n.resolve(b)})},Promise.resolve(!1)).then(function(A){!0===A&&0<x.length&&z.push(x[x.length-1]);return z})})},m.functions.reduce=function(k,e){return m.standardFunctionAsync(k,e,function(r,q,u){g.pcCheck(u,2,3);var v=f(k,u[1]);r=h(u[0]);q=null;if(2<u.length)u=g.defaultUndefined(u[2],null),q=r.reduce(function(x,z){return x.then(function(A){if(void 0===A||A===g.voidOperation)A=null;A=v(A,z);return n.isPromiseLike(A)?A:n.resolve(A)})},Promise.resolve(u));else{if(0===
r.length)return null;q=r.reduce(function(x,z,A){return 1>=A?(x=v(x,z),n.isPromiseLike(x)?x:n.resolve(x)):x.then(function(y){if(void 0===y||y===g.voidOperation)y=null;y=v(y,z);return n.isPromiseLike(y)?y:n.resolve(y)})})}return q.then(function(x){return void 0!==x&&x!==g.voidOperation?x:null})})},m.functions.map=function(k,e){return m.standardFunctionAsync(k,e,function(r,q,u){g.pcCheck(u,2,2);var v=f(k,u[1]),x=h(u[0]),z=[];return x.reduce(function(A,y,c){return A.then(function(b){0<c&&(void 0!==b&&
b!==g.voidOperation?z.push(b):z.push(null));b=v(y);return n.isPromiseLike(b)?b:n.resolve(b)})},Promise.resolve()).then(function(A){0<x.length&&(void 0!==A&&A!==g.voidOperation?z.push(A):z.push(null));return z})})})}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(B,p,a,d,g){function n(e){e=new Date(e.getTime());var r=e.getFullYear(),q=new Date(0);q.setFullYear(r+1,0,4);q.setHours(0,0,0,0);q=m(q);var u=
new Date(0);u.setFullYear(r,0,4);u.setHours(0,0,0,0);u=m(u);return e.getTime()>=q.getTime()?r+1:e.getTime()>=u.getTime()?r:r-1}function m(e){e=new Date(e.getTime());var r=e.getDay();r=(1>r?7:0)+r-1;e.setDate(e.getDate()-r);e.setHours(0,0,0,0);return e}function f(e){return null===e?e:isNaN(e.getTime())?null:e}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;var h=[0,31,59,90,120,151,181,212,243,273,304,334],k=[0,31,60,91,121,152,182,213,244,274,305,335];p.registerFunctions=
function(e,r){e.today=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,0,0);v=new Date;v.setHours(0,0,0,0);return v})};e.now=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,0,0);return new Date})};e.timestamp=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,0,0);v=new Date;return v=new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds())})};e.toutc=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,
1,1);v=a.toDate(z[0]);return null===v?null:new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds())})};e.tolocal=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?null:d.DateTime.utc(v.getFullYear(),v.getMonth()+1,v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).toJSDate()})};e.day=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);
return null===v?NaN:v.getDate()})};e.month=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getMonth()})};e.year=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getFullYear()})};e.hour=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getHours()})};e.second=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?
NaN:v.getSeconds()})};e.millisecond=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getMilliseconds()})};e.minute=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getMinutes()})};e.week=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,2);v=a.toDate(z[0]);if(null===v)return NaN;z=a.toNumber(a.defaultUndefined(z[1],0));if(0>z||6<z)throw Error("Invalid Parameter");x=v.getDate();var A=v.getMonth(),
y=v.getFullYear();v=v.getDay();x=x+(0!==y%4||0===y%100&&0!==y%400?h:k)[A]-1;A=Math.floor(x/7);return v-z+(0>v-z?7:0)<x-7*A?A+1:A})};e.weekday=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:v.getDay()})};e.isoweekday=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);if(null===v)return NaN;v=v.getDay();0===v&&(v=7);return v})};e.isomonth=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===
v?NaN:v.getMonth()+1})};e.isoweek=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);x=a.toDate(z[0]);if(null===x)return NaN;v=m(x).getTime();x=n(x);z=new Date(0);z.setFullYear(x,0,4);z.setHours(0,0,0,0);x=m(z);v-=x.getTime();return Math.round(v/6048E5)+1})};e.isoyear=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,1,1);v=a.toDate(z[0]);return null===v?NaN:n(v)})};e.date=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,0,7);if(3===z.length)return f(new Date(a.toNumber(z[0]),
a.toNumber(z[1]),a.toNumber(z[2]),0,0,0,0));if(4===z.length)return f(new Date(a.toNumber(z[0]),a.toNumber(z[1]),a.toNumber(z[2]),a.toNumber(z[3]),0,0,0));if(5===z.length)return f(new Date(a.toNumber(z[0]),a.toNumber(z[1]),a.toNumber(z[2]),a.toNumber(z[3]),a.toNumber(z[4]),0,0));if(6===z.length)return f(new Date(a.toNumber(z[0]),a.toNumber(z[1]),a.toNumber(z[2]),a.toNumber(z[3]),a.toNumber(z[4]),a.toNumber(z[5]),0));if(7===z.length)return f(new Date(a.toNumber(z[0]),a.toNumber(z[1]),a.toNumber(z[2]),
a.toNumber(z[3]),a.toNumber(z[4]),a.toNumber(z[5]),a.toNumber(z[6])));if(2===z.length){v=a.toString(z[1]);if(""===v)return null;v=a.standardiseDateFormat(v);x=void 0;x="X"===v?d.DateTime.fromSeconds(a.toNumber(z[0])):"x"===v?d.DateTime.fromMillis(a.toNumber(z[0])):d.DateTime.fromFormat(a.toString(z[0]),v,{locale:g.locale,numberingSystem:"latn"});return x.isValid?x.toJSDate():null}if(1===z.length){if(a.isString(z[0])){if(""===z[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===
/^[0-9][0-9][0-9][0-9]$/.test(z[0]))return a.toDate(z[0]+"-01-01")}v=a.toNumber(z[0]);return!1===isNaN(v)?f(new Date(v)):a.toDate(z[0])}if(0===z.length)return new Date})};e.datediff=function(q,u){return r(q,u,function(v,x,z){a.pcCheck(z,2,3);v=a.toDateTime(z[0]);x=a.toDateTime(z[1]);if(null===v||null===x)return NaN;switch(a.toString(z[2]).toLowerCase()){case "days":case "day":case "d":return v.diff(x,"days").days;case "months":case "month":return v.diff(x,"months").months;case "minutes":case "minute":case "m":return"M"===
z[2]?v.diff(x,"months").months:v.diff(x,"minutes").minutes;case "seconds":case "second":case "s":return v.diff(x,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return v.diff(x).milliseconds;case "hours":case "hour":case "h":return v.diff(x,"hours").hours;case "years":case "year":case "y":return v.diff(x,"years").years;default:return v.diff(x).milliseconds}})};e.dateadd=function(q,u){return r(q,u,function(v,x,z){var A;a.pcCheck(z,2,3);v=a.toDateTime(z[0]);if(null===v)return null;
x=a.toNumber(z[1]);if(isNaN(x))return v.toJSDate();var y="milliseconds";switch(a.toString(z[2]).toLowerCase()){case "days":case "day":case "d":y="days";x=a.absRound(x);break;case "months":case "month":y="months";x=a.absRound(x);break;case "minutes":case "minute":case "m":y="M"===z[2]?"months":"minutes";break;case "seconds":case "second":case "s":y="seconds";break;case "milliseconds":case "millisecond":case "ms":y="milliseconds";break;case "hours":case "hour":case "h":y="hours";break;case "years":case "year":case "y":y=
"years"}return v.plus((A={},A[y]=x,A)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r,q,u){function v(x){return x&&(x instanceof d||"object"===typeof x&&"FeatureSetReader"===x.type)}
Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;p.registerFunctions=function(x,z){x.ringisclockwise=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=[];if(null===l[0])return!1;if(n.isArray(l[0])){var t=0;for(l=l[0];t<l.length;t++)if(b=l[t],b instanceof k)c.push([b.x,b.y]);else throw Error("Invalid Argument");}else if(l[0]instanceof g)c=l[0]._elements;else if(n.isImmutableArray(l[0])){t=0;for(var w=l[0].toArray();t<w.length;t++)if(b=w[t],b instanceof k)c.push([b.x,
b.y]);else throw Error("Invalid Argument");0<c.length&&(l[0].get(0),l[0].get(0))}else throw Error("Invalid Argument");return 3>c.length?!1:(new e({rings:[],spatialReference:{wkid:4326}})).isClockwise(c)})};x.polygon=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=null;if(l[0]instanceof a){if(c=n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference),!1===c instanceof e)throw Error("Illegal Parameter");}else c=l[0]instanceof e?u.fromJson(l[0].toJson()):n.fixSpatialReference(new e(JSON.parse(l[0])),
A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.polyline=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=null;if(l[0]instanceof a){if(c=n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference),!1===c instanceof r)throw Error("Illegal Parameter");}else c=l[0]instanceof r?u.fromJson(l[0].toJson()):
n.fixSpatialReference(new r(JSON.parse(l[0])),A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.point=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=null;if(l[0]instanceof a){if(c=n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference),!1===c instanceof k)throw Error("Illegal Parameter");
}else c=l[0]instanceof k?u.fromJson(l[0].toJson()):n.fixSpatialReference(new k(JSON.parse(l[0])),A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.multipoint=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=null;if(l[0]instanceof a){if(c=n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference),
!1===c instanceof h)throw Error("Illegal Parameter");}else c=l[0]instanceof h?u.fromJson(l[0].toJson()):n.fixSpatialReference(new h(JSON.parse(l[0])),A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.extent=function(A,y){return z(A,y,function(c,b,l){l=n.autoCastFeatureToGeometry(l);n.pcCheck(l,1,1);c=null;l[0]instanceof a?
c=n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference):l[0]instanceof k?(c={xmin:l[0].x,ymin:l[0].y,xmax:l[0].x,ymax:l[0].y,spatialReference:l[0].spatialReference.toJson()},l=l[0],l.hasZ?(c.zmin=l.z,c.zmax=l.z):l.hasM&&(c.mmin=l.m,c.mmax=l.m),c=u.fromJson(c)):c=l[0]instanceof e?u.fromJson(l[0].getExtent().toJson()):l[0]instanceof r?u.fromJson(l[0].getExtent().toJson()):l[0]instanceof h?u.fromJson(l[0].getExtent().toJson()):l[0]instanceof m?u.fromJson(l[0].toJson()):n.fixSpatialReference(new m(JSON.parse(l[0])),
A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.geometry=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,1,1);c=null;if(null===l[0])return null;c=v(l[0])?n.fixSpatialReference(l[0].geometry(),A.spatialReference):l[0]instanceof a?n.fixSpatialReference(d.parseGeometryFromDictionary(l[0]),A.spatialReference):n.fixSpatialReference(u.fromJson(JSON.parse(l[0])),
A.spatialReference);if(null!==c&&!1===c.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return n.fixNullGeometry(c)})};x.setgeometry=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,2,2);if(v(l[0])){if(!0===l[0].immutable)throw Error("Feature is Immutable");if(l[1]instanceof f||null===l[1])l[0]._geometry=l[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return n.voidOperation})};
x.feature=function(A,y){return z(A,y,function(c,b,l){if(0===l.length)throw Error("Missing Parameters");c=null;if(1===l.length)if(n.isString(l[0]))c=d.fromJson(JSON.parse(l[0]));else if(v(l[0]))c=d.createFromArcadeFeature(l[0]);else if(l[0]instanceof f)c=d.createFromGraphicLikeObject(l[0],null,null);else if(l[0]instanceof a)c=l[0].hasField("geometry")?l[0].field("geometry"):null,b=l[0].hasField("attributes")?l[0].field("attributes"):null,null!==c&&c instanceof a&&(c=d.parseGeometryFromDictionary(c)),
null!==b&&(b=d.parseAttributesFromDictionary(b)),c=d.createFromGraphicLikeObject(c,b,null);else throw Error("Illegal Argument");else{if(2===l.length){b=c=null;if(null!==l[0])if(l[0]instanceof f)c=l[0];else if(c instanceof a)c=d.parseGeometryFromDictionary(l[0]);else throw Error("Illegal Argument");if(null!==l[1])if(l[1]instanceof a)b=d.parseAttributesFromDictionary(l[1]);else throw Error("Illegal Argument");}else{c=null;b={};if(null!==l[0])if(l[0]instanceof f)c=l[0];else if(c instanceof a)c=d.parseGeometryFromDictionary(l[0]);
else throw Error("Illegal Argument");for(var t=1;t<l.length;t+=2){var w=n.toString(l[t]),C=l[t+1];if(null===C||void 0===C||n.isString(C)||isNaN(C)||n.isDate(C)||n.isNumber(C)||n.isBoolean(C)){if(n.isFunctionParameter(C)||!1===n.isSimpleType(C))throw Error("Illegal Argument");b[w]=C===n.voidOperation?null:C}else throw Error("Illegal Argument");}}c=d.createFromGraphicLikeObject(c,b,null)}c._geometry=n.fixSpatialReference(c.geometry(),A.spatialReference);c.immutable=!1;return c})};x.dictionary=function(A,
y){return z(A,y,function(c,b,l){if(0===l.length)return l=new a,l.immutable=!1,l;if(1===l.length&&n.isString(l[0]))try{var t=JSON.parse(l[0]),w=a.convertObjectToArcadeDictionary(t,!1);w.immutable=!1;return w}catch(C){throw Error("Missing Parameters or Illegal Json");}if(0!==l.length%2)throw Error("Missing Parameters");c={};for(b=0;b<l.length;b+=2)if(t=n.toString(l[b]),w=l[b+1],null===w||void 0===w||n.isString(w)||isNaN(w)||n.isDate(w)||n.isNumber(w)||n.isBoolean(w)||n.isArray(w)||n.isImmutableArray(w)){if(n.isFunctionParameter(w))throw Error("Illegal Argument");
c[t]=w===n.voidOperation?null:w}else throw Error("Illegal Argument");l=new a(c);l.immutable=!1;return l})};x.haskey=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,2,2);c=n.toString(l[1]);if(v(l[0])||l[0]instanceof a)return l[0].hasField(c);throw Error("Illegal Argument");})};x.indexof=function(A,y){return z(A,y,function(c,b,l){n.pcCheck(l,2,2);c=l[1];if(n.isArray(l[0])){for(b=0;b<l[0].length;b++)if(n.equalityTest(c,l[0][b]))return b;return-1}if(n.isImmutableArray(l[0])){var t=l[0].length();
for(b=0;b<t;b++)if(n.equalityTest(c,l[0].get(b)))return b;return-1}throw Error("Illegal Argument");})};x.angle=function(A,y){return z(A,y,function(c,b,l){l=n.autoCastFeatureToGeometry(l);n.pcCheck(l,2,3);if(!(l[0]instanceof k))throw Error("Illegal Argument");if(!(l[1]instanceof k))throw Error("Illegal Argument");if(2<l.length&&!(l[2]instanceof k))throw Error("Illegal Argument");return 2===l.length?q.angle2D(l[0],l[1]):q.angleBetween2D(l[0],l[1],l[2])})};x.bearing=function(A,y){return z(A,y,function(c,
b,l){l=n.autoCastFeatureToGeometry(l);n.pcCheck(l,2,3);if(!(l[0]instanceof k))throw Error("Illegal Argument");if(!(l[1]instanceof k))throw Error("Illegal Argument");if(2<l.length&&!(l[2]instanceof k))throw Error("Illegal Argument");return 2===l.length?q.bearing2D(l[0],l[1]):q.bearingBetween2D(l[0],l[1],l[2])})};x.isselfintersecting=function(A,y){return z(A,y,function(c,b,l){l=n.autoCastFeatureToGeometry(l);n.pcCheck(l,1,1);c=l[0];if(c instanceof e)return c.isSelfIntersecting(c);if(c instanceof r)return c=
c.paths,q.pathsSelfIntersecting(c);if(c instanceof h)for(b=c.points,l=0;l<b.length;l++)for(var t=0;t<b.length;t++)if(t!==l){for(var w=!0,C=0;C<b[l].length;C++)if(b[l][C]!==b[t][C]){w=!1;break}if(!0===w)return!0}return n.isArray(c)||n.isImmutableArray(c)?(c=n.autoCastArrayOfPointsToPolyline(c,A.spatialReference),null!==c&&(c=c.paths),q.pathsSelfIntersecting(c)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(B,p,a){function d(e,r,q){var u=
{x:0,y:0};r&&(u.z=0);q&&(u.m=0);for(var v=0,x=e[0],z=0;z<e.length;z++){var A=e[z];a:if(A.length!==x.length)var y=!1;else{for(y=0;y<A.length;y++)if(A[y]!==x[y]){y=!1;break a}y=!0}if(!1===y){y=g(x,A,r);var c=A,b=r,l=q,t={x:(x[0]+c[0])/2,y:(x[1]+c[1])/2};b&&(t.z=(x[2]+c[2])/2);b&&l?t.m=(x[3]+c[3])/2:l&&(t.m=(x[2]+c[2])/2);x=t;x.x*=y;x.y*=y;u.x+=x.x;u.y+=x.y;r&&(x.z*=y,u.z+=x.z);q&&(x.m*=y,u.m+=x.m);v+=y;x=A}}0<v?(u.x/=v,u.y/=v,r&&(u.z/=v),q&&(u.m/=v)):(u.x=e[0][0],u.y=e[0][1],r&&(u.z=e[0][2]),q&&r?u.m=
e[0][3]:q&&(u.m=e[0][2]));return u}function g(e,r,q){var u=r[0]-e[0];e=r[1]-e[1];return q?(r=r[2]-r[2],Math.sqrt(u*u+e*e+r*r)):Math.sqrt(u*u+e*e)}function n(e,r,q){for(void 0===q&&(q=0);e<q;)e+=r;for(q+=r;e>=q;)e-=r;return e}function m(e,r){return Math.atan2(r.y-e.y,r.x-e.x)}function f(e,r,q){var u=e.x-r.x;e=e.y-r.y;var v=q.x-r.x;r=q.y-r.y;return Math.atan2(u*r-v*e,u*v+e*r)}function h(e,r,q,u,v){var x=e[0];e=e[1];var z=r[0];r=r[1];var A=q[0],y=q[1];q=u[0]-A;A=x-A;var c=z-x;u=u[1]-y;y=e-y;var b=r-
e,l=u*c-q*b;if(0===l)return!1;q=(q*y-u*A)/l;A=(c*y-b*A)/l;return 0<=q&&1>=q&&0<=A&&1>=A?(v&&(v[0]=x+q*(z-x),v[1]=e+q*(r-e)),!0):!1}Object.defineProperty(p,"__esModule",{value:!0});p.pathsSelfIntersecting=p.bearingBetween2D=p.angleBetween2D=p.angleBetweenRad=p.bearing2D=p.angle2D=p.angleRad=p.centroidMultiPoint=p.centroidPolyline=void 0;p.centroidPolyline=function(e){for(var r={x:0,y:0,spatialReference:e.spatialReference.toJson()},q={x:0,y:0,spatialReference:e.spatialReference.toJson()},u=0,v=0,x=
0;x<e.paths.length;x++)if(0!==e.paths[x].length){var z=e.paths[x];var A=!0===e.hasZ;if(1>=z.length)z=0;else{for(var y=0,c=1;c<z.length;c++)y+=g(z[c-1],z[c],A);z=y}0===z?(A=d(e.paths[x],!0===e.hasZ,!0===e.hasM),r.x+=A.x,r.y+=A.y,!0===e.hasZ&&(r.z+=A.z),!0===e.hasM&&(r.m+=A.m),++u):(A=d(e.paths[x],!0===e.hasZ,!0===e.hasM),q.x+=A.x*z,q.y+=A.y*z,!0===e.hasZ&&(q.z+=A.z*z),!0===e.hasM&&(q.m+=A.m*z),v+=z)}return 0<v?(q.x/=v,q.y/=v,!0===e.hasZ&&(q.z/=v),!0===e.hasM&&(q.m/=v),new a(q)):0<u?(r.x/=u,r.y/=u,
!0===e.hasZ&&(q.z/=u),!0===e.hasM&&(r.m/=u),new a(r)):null};p.centroidMultiPoint=function(e){if(0===e.points.length)return null;for(var r=0,q=0,u=0,v=0,x=0;x<e.points.length;x++){var z=e.getPoint(x);!0===z.hasZ&&(u+=z.z);!0===z.hasM&&(v+=z.m);r+=z.x;q+=z.y;v+=z.m}r={x:r/e.points.length,y:q/e.points.length,spatialReference:null};r.spatialReference=e.spatialReference.toJson();!0===e.hasZ&&(r.z=u/e.points.length);!0===e.hasM&&(r.m=v/e.points.length);return new a(r)};p.angleRad=m;p.angle2D=function(e,
r){return n(m(e,r),2*Math.PI)*(180/Math.PI)};p.bearing2D=function(e,r){return n(Math.PI/2-m(e,r),2*Math.PI)*(180/Math.PI)};p.angleBetweenRad=f;p.angleBetween2D=function(e,r,q){return n(f(e,r,q),2*Math.PI)*(180/Math.PI)};p.bearingBetween2D=function(e,r,q){return n(-1*f(e,r,q),2*Math.PI)*(180/Math.PI)};var k=[0,0];p.pathsSelfIntersecting=function(e){for(var r=0;r<e.length;r++){for(var q=e[r],u=0;u<q.length-1;u++)for(var v=q[u],x=q[u+1],z=r+1;z<e.length;z++)for(var A=0;A<e[z].length-1;A++){var y=e[z][A],
c=e[z][A+1],b=h(v,x,y,c,k);if(b&&!(k[0]===v[0]&&k[1]===v[1]||k[0]===y[0]&&k[1]===y[1]||k[0]===x[0]&&k[1]===x[1]||k[0]===c[0]&&k[1]===c[1]))return!0}A=q.length;if(!(3>A))for(u=0;u<=A-2;u++)for(v=q[u],x=q[u+1],z=u+2;z<=A-2;z++)if(y=q[z],c=q[z+1],(b=h(v,x,y,c,k))&&!(k[0]===v[0]&&k[1]===v[1]||k[0]===y[0]&&k[1]===y[1]||k[0]===x[0]&&k[1]===x[1]||k[0]===c[0]&&k[1]===c[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q){function u(x){return 0===a.version.indexOf("4.")?e.fromExtent(x):new e({spatialReference:x.spatialReference,rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]})}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=p.setGeometryEngine=void 0;var v=null;p.setGeometryEngine=function(x){v=x};p.registerFunctions=function(x,z){function A(y){g.pcCheck(y,2,2);if(!(y[0]instanceof f&&y[1]instanceof f||y[0]instanceof f&&
null===y[1]||y[1]instanceof f&&null===y[0]||null===y[0]&&null===y[1]))throw Error("Illegal Argument");}x.disjoint=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!0:v.disjoint(t[0],t[1])})};x.intersects=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!1:v.intersects(t[0],t[1])})};x.touches=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);
return null===t[0]||null===t[1]?!1:v.touches(t[0],t[1])})};x.crosses=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!1:v.crosses(t[0],t[1])})};x.within=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!1:v.within(t[0],t[1])})};x.contains=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!1:v.contains(t[0],t[1])})};
x.overlaps=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?!1:v.overlaps(t[0],t[1])})};x.equals=function(y,c){return z(y,c,function(b,l,t){g.pcCheck(t,2,2);return t[0]===t[1]?!0:t[0]instanceof f&&t[1]instanceof f?v.equals(t[0],t[1]):g.isDate(t[0])&&g.isDate(t[1])?t[0].getTime()===t[1].getTime():!1})};x.relate=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,3,3);if(t[0]instanceof f&&t[1]instanceof
f)return v.relate(t[0],t[1],g.toString(t[2]));if(t[0]instanceof f&&null===t[1]||t[1]instanceof f&&null===t[0]||null===t[0]&&null===t[1])return!1;throw Error("Illegal Argument");})};x.intersection=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]||null===t[1]?null:v.intersect(t[0],t[1])})};x.union=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);b=[];if(0===t.length)throw Error("Function called with wrong number of Parameters");
if(1===t.length)if(g.isArray(t[0]))for(t=g.autoCastFeatureToGeometry(t[0]),l=0;l<t.length;l++){if(null!==t[l]){if(!(t[l]instanceof f))throw Error("Illegal Argument");b.push(t[l])}}else if(g.isImmutableArray(t[0]))for(t=g.autoCastFeatureToGeometry(t[0].toArray()),l=0;l<t.length;l++){if(null!==t[l]){if(!(t[l]instanceof f))throw Error("Illegal Argument");b.push(t[l])}}else{if(t[0]instanceof f)return g.fixSpatialReference(d.cloneGeometry(t[0]),y.spatialReference);if(null===t[0])return null;throw Error("Illegal Argument");
}else for(l=0;l<t.length;l++)if(null!==t[l]){if(!(t[l]instanceof f))throw Error("Illegal Argument");b.push(t[l])}return 0===b.length?null:v.union(b)})};x.difference=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null!==t[0]&&null===t[1]?d.cloneGeometry(t[0]):null===t[0]?null:v.difference(t[0],t[1])})};x.symmetricdifference=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);A(t);return null===t[0]&&null===t[1]?null:null===t[0]?d.cloneGeometry(t[1]):
null===t[1]?d.cloneGeometry(t[0]):v.symmetricDifference(t[0],t[1])})};x.clip=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,2);if(!(t[1]instanceof m)&&null!==t[1])throw Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");return null===t[1]?null:v.clip(t[0],t[1])})};x.cut=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,2);if(!(t[1]instanceof r)&&null!==t[1])throw Error("Illegal Argument");
if(null===t[0])return[];if(!(t[0]instanceof f))throw Error("Illegal Argument");return null===t[1]?[d.cloneGeometry(t[0])]:v.cut(t[0],t[1])})};x.area=function(y,c){return z(y,c,function(b,l,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return b=g.autoCastArrayOfPointsToPolygon(t[0],y.spatialReference),null===b?0:v.planarArea(b,d.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof f))throw Error("Illegal Argument");
return v.planarArea(t[0],d.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)))})};x.areageodetic=function(y,c){return z(y,c,function(b,l,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return b=g.autoCastArrayOfPointsToPolygon(t[0],y.spatialReference),null===b?0:v.geodesicArea(b,d.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.geodesicArea(t[0],d.convertSquareUnitsToCode(g.defaultUndefined(t[1],
-1)))})};x.length=function(y,c){return z(y,c,function(b,l,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return b=g.autoCastArrayOfPointsToPolyline(t[0],y.spatialReference),null===b?0:v.planarLength(b,d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.planarLength(t[0],d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};x.length3d=function(y,c){return z(y,
c,function(b,l,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return b=g.autoCastArrayOfPointsToPolyline(t[0],y.spatialReference),null===b?0:v.planarLength(b,d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.planarLength(t[0],d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};x.lengthgeodetic=function(y,c){return z(y,c,function(b,l,t){g.pcCheck(t,
1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return b=g.autoCastArrayOfPointsToPolyline(t[0],y.spatialReference),null===b?0:v.geodesicLength(b,d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.geodesicLength(t[0],d.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};x.distance=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,
2,3);b=t[0];if(g.isArray(t[0])||g.isImmutableArray(t[0]))b=g.autoCastArrayOfPointsToMultiPoint(t[0],y.spatialReference);l=t[1];if(g.isArray(t[1])||g.isImmutableArray(t[1]))l=g.autoCastArrayOfPointsToMultiPoint(t[1],y.spatialReference);if(!(b instanceof f))throw Error("Illegal Argument");if(!(l instanceof f))throw Error("Illegal Argument");return v.distance(b,l,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};x.distancegeodetic=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);
g.pcCheck(t,2,3);b=t[0];l=t[1];if(!(b instanceof k))throw Error("Illegal Argument");if(!(l instanceof k))throw Error("Illegal Argument");var w=new r({paths:[],spatialReference:b.spatialReference});w.addPath([b,l]);return v.geodesicLength(w,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};x.densify=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");b=g.toNumber(t[1]);
if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return t[0]instanceof e||t[0]instanceof r?v.densify(t[0],b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]instanceof m?v.densify(u(t[0]),b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]})};x.densifygeodetic=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");b=g.toNumber(t[1]);
if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return t[0]instanceof e||t[0]instanceof r?v.geodesicDensify(t[0],b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]instanceof m?v.geodesicDensify(u(t[0]),b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]})};x.generalize=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,4);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");
b=g.toNumber(t[1]);if(isNaN(b))throw Error("Illegal Argument");return v.generalize(t[0],b,g.toBoolean(g.defaultUndefined(t[2],!0)),d.convertLinearUnitsToCode(g.defaultUndefined(t[3],-1)))})};x.buffer=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");b=g.toNumber(t[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?d.cloneGeometry(t[0]):v.buffer(t[0],b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],
-1)))})};x.buffergeodetic=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");b=g.toNumber(t[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?d.cloneGeometry(t[0]):v.geodesicBuffer(t[0],b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};x.offset=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,6);if(null===t[0])return null;
if(!(t[0]instanceof e||t[0]instanceof r))throw Error("Illegal Argument");b=g.toNumber(t[1]);if(isNaN(b))throw Error("Illegal Argument");l=g.toNumber(g.defaultUndefined(t[4],10));if(isNaN(l))throw Error("Illegal Argument");var w=g.toNumber(g.defaultUndefined(t[5],0));if(isNaN(w))throw Error("Illegal Argument");return v.offset(t[0],b,d.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)),g.toString(g.defaultUndefined(t[3],"round")).toLowerCase(),l,w)})};x.rotate=function(y,c){return z(y,c,function(b,
l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);b=t[0];if(null===b)return null;if(!(b instanceof f))throw Error("Illegal Argument");b instanceof m&&(b=e.fromExtent(b));l=g.toNumber(t[1]);if(isNaN(l))throw Error("Illegal Argument");t=g.defaultUndefined(t[2],null);if(null===t)return v.rotate(b,l);if(t instanceof k)return v.rotate(b,l,t);throw Error("Illegal Argument");})};x.centroid=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return null;
b=t[0];if(g.isArray(t[0])||g.isImmutableArray(t[0]))b=g.autoCastArrayOfPointsToMultiPoint(t[0],y.spatialReference);if(null===b)return null;if(!(b instanceof f))throw Error("Illegal Argument");return b instanceof k?g.fixSpatialReference(d.cloneGeometry(t[0]),y.spatialReference):b instanceof e?b.getCentroid():b instanceof r?n.centroidPolyline(b):b instanceof h?n.centroidMultiPoint(b):b instanceof m?b.getCenter():null})};x.multiparttosinglepart=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);
g.pcCheck(t,1,1);l=[];if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");if(t[0]instanceof k||t[0]instanceof m)return[g.fixSpatialReference(d.cloneGeometry(t[0]),y.spatialReference)];b=v.simplify(t[0]);if(b instanceof e){l=[];var w=[];for(t=0;t<b.rings.length;t++)if(b.isClockwise(b.rings[t])){var C=q.fromJson({rings:[b.rings[t]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJson()});l.push(C)}else w.push({ring:b.rings[t],pt:b.getPoint(t,0)});
for(b=0;b<w.length;b++)for(t=0;t<l.length;t++)if(l[t].contains(w[b].pt)){l[t].addRing(w[b].ring);break}return l}if(b instanceof r){l=[];for(t=0;t<b.paths.length;t++)w=q.fromJson({paths:[b.paths[t]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJson()}),l.push(w);return l}if(t[0]instanceof h){b=g.fixSpatialReference(d.cloneGeometry(t[0]),y.spatialReference);for(t=0;t<b.points.length;t++)l.push(b.getPoint(t));return l}return null})};x.issimple=function(y,c){return z(y,c,function(b,
l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return!0;if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.isSimple(t[0])})};x.simplify=function(y,c){return z(y,c,function(b,l,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return null;if(!(t[0]instanceof f))throw Error("Illegal Argument");return v.simplify(t[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(B,p,a,d){Object.defineProperty(p,
"__esModule",{value:!0});p.cloneGeometry=p.sameGeomType=p.convertLinearUnitsToCode=p.shapeExtent=p.convertSquareUnitsToCode=void 0;p.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};p.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.extent;
case "point":return new a({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference});case "extent":return g}return null};p.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};p.sameGeomType=function(g,n){return g===n||"point"===g&&"esriGeometryPoint"===n||"polyline"===g&&"esriGeometryPolyline"===n||"polygon"===g&&"esriGeometryPolygon"===n||"extent"===g&&"esriGeometryEnvelope"===
n||"multipoint"===g&&"esriGeometryMultipoint"===n||"point"===n&&"esriGeometryPoint"===g||"polyline"===n&&"esriGeometryPolyline"===g||"polygon"===n&&"esriGeometryPolygon"===g||"extent"===n&&"esriGeometryEnvelope"===g||"multipoint"===n&&"esriGeometryMultipoint"===g?!0:!1};p.cloneGeometry=function(g){if(null===g)return null;var n=d.fromJson(g.toJson());g.getCacheValue("_geVersion")&&n.setCacheValue("_geVersion",g.getCacheValue("_geVersion"));return n}})},"esri/arcade/functions/maths":function(){define(["require",
"exports","../languageUtils","dojo/number"],function(B,p,a,d){function g(n,m,f){if("undefined"===typeof f||0===+f)return Math[n](m);m=+m;f=+f;if(isNaN(m)||"number"!==typeof f||0!==f%1)return NaN;m=m.toString().split("e");m=Math[n](+(m[0]+"e"+(m[1]?+m[1]-f:-f)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+f:f))}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;p.registerFunctions=function(n,m){function f(h,k,e){h=a.toNumber(h);return isNaN(h)?h:isNaN(k)||isNaN(e)||
k>e?NaN:h<k?k:h>e?e:h}n.number=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,2);e=q[0];return a.isNumber(e)?e:null===e?0:a.isDate(e)||a.isBoolean(e)?Number(e):a.isArray(e)?NaN:""===e||void 0===e?Number(e):a.isString(e)?void 0!==q[1]?(q=a.multiReplace(q[1],"\u2030",""),q=a.multiReplace(q,"\u00a4",""),d.parse(e,{pattern:q})):Number(e.trim()):Number(e)})};n.abs=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.abs(a.toNumber(q[0]))})};n.acos=function(h,k){return m(h,
k,function(e,r,q){a.pcCheck(q,1,1);return Math.acos(a.toNumber(q[0]))})};n.asin=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.asin(a.toNumber(q[0]))})};n.atan=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.atan(a.toNumber(q[0]))})};n.atan2=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,2,2);return Math.atan2(a.toNumber(q[0]),a.toNumber(q[1]))})};n.ceil=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,2);return 2===q.length?(e=a.toNumber(q[1]),
isNaN(e)&&(e=0),g("ceil",a.toNumber(q[0]),-1*e)):Math.ceil(a.toNumber(q[0]))})};n.round=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,2);return 2===q.length?(e=a.toNumber(q[1]),isNaN(e)&&(e=0),g("round",a.toNumber(q[0]),-1*e)):Math.round(a.toNumber(q[0]))})};n.floor=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,2);return 2===q.length?(e=a.toNumber(q[1]),isNaN(e)&&(e=0),g("floor",a.toNumber(q[0]),-1*e)):Math.floor(a.toNumber(q[0]))})};n.cos=function(h,k){return m(h,k,function(e,
r,q){a.pcCheck(q,1,1);return Math.cos(a.toNumber(q[0]))})};n.isnan=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return"number"===typeof q[0]&&isNaN(q[0])})};n.exp=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.exp(a.toNumber(q[0]))})};n.log=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.log(a.toNumber(q[0]))})};n.pow=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,2,2);return Math.pow(a.toNumber(q[0]),a.toNumber(q[1]))})};n.random=
function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,0,0);return Math.random()})};n.sin=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.sin(a.toNumber(q[0]))})};n.sqrt=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.sqrt(a.toNumber(q[0]))})};n.tan=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return Math.tan(a.toNumber(q[0]))})};n.defaultvalue=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,2,2);return null===q[0]||""===q[0]||
void 0===q[0]?q[1]:q[0]})};n.isempty=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return null===q[0]||""===q[0]||void 0===q[0]?!0:!1})};n["boolean"]=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,1,1);return a.toBoolean(q[0])})};n.constrain=function(h,k){return m(h,k,function(e,r,q){a.pcCheck(q,3,3);e=a.toNumber(q[1]);r=a.toNumber(q[2]);if(a.isArray(q[0])){var u=[],v=0;for(q=q[0];v<q.length;v++)u.push(f(q[v],e,r));return u}if(a.isImmutableArray(q[0])){u=[];for(v=0;v<q[0].length();v++)u.push(f(q[0].get(v),
e,r));return u}return f(q[0],e,r)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(B,p,a,d){function g(n,m,f,h){if(1===h.length){if(a.isArray(h[0]))return d.calculateStat(n,h[0],-1);if(a.isImmutableArray(h[0]))return d.calculateStat(n,h[0].toArray(),-1)}return d.calculateStat(n,h,-1)}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;p.registerFunctions=function(n,m){n.stdev=function(f,h){return m(f,h,
function(k,e,r){return g("stdev",k,e,r)})};n.variance=function(f,h){return m(f,h,function(k,e,r){return g("variance",k,e,r)})};n.average=function(f,h){return m(f,h,function(k,e,r){return g("mean",k,e,r)})};n.mean=function(f,h){return m(f,h,function(k,e,r){return g("mean",k,e,r)})};n.sum=function(f,h){return m(f,h,function(k,e,r){return g("sum",k,e,r)})};n.min=function(f,h){return m(f,h,function(k,e,r){return g("min",k,e,r)})};n.max=function(f,h){return m(f,h,function(k,e,r){return g("max",k,e,r)})};
n.distinct=function(f,h){return m(f,h,function(k,e,r){return g("distinct",k,e,r)})};n.count=function(f,h){return m(f,h,function(k,e,r){a.pcCheck(r,1,1);if(a.isArray(r[0])||a.isString(r[0]))return r[0].length;if(a.isImmutableArray(r[0]))return r[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(B,p,a){function d(n){for(var m=0,f=0;f<n.length;f++)m+=n[f];return m/n.length}function g(n){for(var m=
d(n),f=0,h=0;h<n.length;h++)f+=Math.pow(m-n[h],2);return f/n.length}Object.defineProperty(p,"__esModule",{value:!0});p.calculateStat=p.decodeStatType=void 0;p.decodeStatType=function(n){switch(n.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};p.calculateStat=function(n,m,f){void 0===
f&&(f=1E3);switch(n.toLowerCase()){case "distinct":a:{n=f;f=[];for(var h={},k=[],e=0;e<m.length;e++){if(void 0!==m[e]&&null!==m[e]&&m[e]!==a.voidOperation){var r=m[e];if(a.isNumber(r)||a.isString(r))void 0===h[r]&&(f.push(r),h[r]=1);else{for(var q=!1,u=0;u<k.length;u++)!0===a.equalityTest(k[u],r)&&(q=!0);!1===q&&(k.push(r),f.push(r))}}if(f.length>=n&&-1!==n){m=f;break a}}m=f}return m;case "avg":case "mean":return d(a.toNumberArray(m));case "min":return Math.min.apply(Math,a.toNumberArray(m));case "sum":m=
a.toNumberArray(m);for(f=n=0;f<m.length;f++)n+=m[f];return n;case "max":return Math.max.apply(Math,a.toNumberArray(m));case "stdev":case "stddev":return Math.sqrt(g(a.toNumberArray(m)));case "var":case "variance":return g(a.toNumberArray(m));case "count":return m.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x){function z(A,y,c){if(null===A)y.updateUint8Array([0,139]);else if(m.isArray(A)){y.updateUint8Array([61]);if(c.map.has(A))A=c.map.get(A),y.updateIntArray([A^61237541]);else{c.map.set(A,c.currentLength++);for(var b=0;b<A.length;b++){var l=A[b];z(l,y,c)}c.map["delete"](A);c.currentLength--}y.updateUint8Array([199])}else if(m.isImmutableArray(A)){y.updateUint8Array([61]);if(c.map.has(A))A=c.map.get(A),y.updateIntArray([A^61237541]);else{c.map.set(A,c.currentLength++);
b=0;for(var t=A.toArray();b<t.length;b++)l=t[b],z(l,y,c);c.map["delete"](A);c.currentLength--}y.updateUint8Array([199])}else if(m.isDate(A))y.updateIntArray([A.getTime()]),y.updateUint8Array([241]);else if(m.isString(A))y.updateIntArray([A.length]),y.updateWithString(A),y.updateUint8Array([41]);else if(m.isBoolean(A))y.updateUint8Array([!0===A?1:0,113]);else if(m.isNumber(A))y.updateFloatArray([A]),y.updateUint8Array([173]);else{if(A instanceof d)throw Error("Type not supported in Hash");if(A instanceof
a)throw Error("Type not supported in Hash");if(A instanceof g){y.updateUint8Array([223]);if(c.map.has(A))A=c.map.get(A),y.updateIntArray([A^61237541]);else{c.map.set(A,c.currentLength++);b=0;for(t=A.keys();b<t.length;b++)l=t[b],y.updateIntArray([l.length]),y.updateWithString(l),y.updateUint8Array([251]),l=A.field(l),z(l,y,c),y.updateUint8Array([239]);c.map["delete"](A);c.currentLength--}y.updateUint8Array([73])}else{if(A instanceof n)throw Error("Type not supported in Hash");if(A instanceof q)y.updateIntArray([3833836621]),
y.updateIntArray([0]),y.updateFloatArray([A.x]),y.updateIntArray([1]),y.updateFloatArray([A.y]),y.updateIntArray([3765347959]),z(A.spatialReference.wkid,y,c);else if(A instanceof u){y.updateIntArray([1266616829]);for(b=0;b<A.rings.length;b++){t=A.rings[b];var w=[],C=null,D=null;for(l=0;l<t.length;l++){var E=A.getPoint(b,l);if(0===l)C=E;else if(D.x===E.x&&D.y===E.y)continue;D=E;l===t.length-1&&C.x===E.x&&C.y===E.y||w.push(E)}y.updateIntArray([1397116793,w.length]);for(l=0;l<w.length;l++)E=w[l],y.updateIntArray([3962308117,
l]),z(E,y,c),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([3878477243]);z(A.spatialReference.wkid,y,c)}else if(A instanceof v){y.updateIntArray([4106883559]);for(b=0;b<A.paths.length;b++){t=A.paths[b];y.updateIntArray([1397116793,t.length]);for(l=0;l<t.length;l++)y.updateIntArray([3962308117,l]),z(A.getPoint(b,l),y,c),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([2568784753]);z(A.spatialReference.wkid,y,c)}else if(A instanceof r){y.updateIntArray([588535921,
A.points.length]);for(l=0;l<A.points.length;l++)b=A.getPoint(l),y.updateIntArray([l]),z(b,y,c);y.updateIntArray([1700171621]);z(A.spatialReference.wkid,y,c)}else if(A instanceof e)y.updateIntArray([3483648373]),y.updateIntArray([0]),y.updateFloatArray([A.xmax]),y.updateIntArray([1]),y.updateFloatArray([A.xmin]),y.updateIntArray([2]),y.updateFloatArray([A.ymax]),y.updateIntArray([3]),y.updateFloatArray([A.ymin]),y.updateIntArray([3622027469]),z(A.spatialReference.wkid,y,c);else if(A instanceof x)y.updateIntArray([14]),
void 0!==A.wkid&&null!==A.wkid&&y.updateIntArray([A.wkid]),A.wkt&&y.updateWithString(A.wkt);else{if(m.isFunctionParameter(A))throw Error("Type not supported in Hash");if(m.isFeatureSet(A))throw Error("Type not supported in Hash");m.isFeatureSetCollection(A);throw Error("Type not supported in Hash");}}}}Object.defineProperty(p,"__esModule",{value:!0});p.registerFunctions=void 0;p.registerFunctions=function(A,y){A.portal=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);return new a(m.toString(w[0]))})};
A.trim=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);return m.toString(w[0]).trim()})};A.tohex=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);l=m.toNumber(w[0]);return isNaN(l)?l:l.toString(16)})};A.upper=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);return m.toString(w[0]).toUpperCase()})};A.proper=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,2);l=1;2===w.length&&"firstword"===m.toString(w[1]).toLowerCase()&&(l=2);t=/\s/;w=m.toString(w[0]);for(var C=
"",D=!0,E=0;E<w.length;E++){var F=w[E];t.test(F)?1===l&&(D=!0):F.toUpperCase()!==F.toLowerCase()&&(D?(F=F.toUpperCase(),D=!1):F=F.toLowerCase());C+=F}return C})};A.lower=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);return m.toString(w[0]).toLowerCase()})};A.guid=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,0,1);if(0<w.length)switch(m.toString(w[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();
case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};A.console=function(c,b){return y(c,b,function(l,t,w){0!==w.length&&(1===w.length?c.console(m.toString(w[0])):c.console(m.toString(w)));return m.voidOperation})};A.mid=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,3);l=m.toNumber(w[1]);if(isNaN(l))return"";0>l&&(l=0);if(2===w.length)return m.toString(w[0]).substr(l);t=m.toNumber(w[2]);if(isNaN(t))return"";0>t&&(t=0);return m.toString(w[0]).substr(l,
t)})};A.find=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,3);l=0;if(2<w.length){l=m.toNumber(m.defaultUndefined(w[2],0));if(isNaN(l))return-1;0>l&&(l=0)}return m.toString(w[1]).indexOf(m.toString(w[0]),l)})};A.left=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,2);l=m.toNumber(w[1]);if(isNaN(l))return"";0>l&&(l=0);return m.toString(w[0]).substr(0,l)})};A.right=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,2);l=m.toNumber(w[1]);if(isNaN(l))return"";0>l&&(l=0);return m.toString(w[0]).substr(-1*
l,l)})};A.split=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,4);l=m.toNumber(m.defaultUndefined(w[2],-1));t=m.toBoolean(m.defaultUndefined(w[3],!1));-1===l||null===l||!0===t?w=m.toString(w[0]).split(m.toString(w[1])):(isNaN(l)&&(l=-1),-1>l&&(l=-1),w=m.toString(w[0]).split(m.toString(w[1]),l));if(!1===t)return w;t=[];for(var C=0;C<w.length&&!(-1!==l&&t.length>=l);C++)""!==w[C]&&void 0!==w[C]&&t.push(w[C]);return t})};A.text=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,2);return m.toStringExplicit(w[0],
w[1])})};A.concatenate=function(c,b){return y(c,b,function(l,t,w){l=[];if(1>w.length)return"";if(m.isArray(w[0])){t=m.defaultUndefined(w[2],"");for(var C=0;C<w[0].length;C++)l[C]=m.toStringExplicit(w[0][C],t);return 1<w.length?l.join(w[1]):l.join("")}if(m.isImmutableArray(w[0])){t=m.defaultUndefined(w[2],"");for(C=0;C<w[0].length();C++)l[C]=m.toStringExplicit(w[0].get(C),t);return 1<w.length?l.join(w[1]):l.join("")}for(C=0;C<w.length;C++)l[C]=m.toStringExplicit(w[C]);return l.join("")})};A.reverse=
function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(m.isArray(w[0]))return l=w[0].slice(0),l.reverse(),l;if(m.isImmutableArray(w[0]))return l=w[0].toArray().slice(0),l.reverse(),l;throw Error("Invalid Parameter");})};A.replace=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,3,4);l=m.toString(w[0]);t=m.toString(w[1]);var C=m.toString(w[2]);return(4===w.length?m.toBoolean(w[3]):1)?m.multiReplace(l,t,C):l.replace(t,C)})};A.schema=function(c,b){return y(c,b,function(l,t,w){if(w[0]instanceof
n)return(l=w[0].schema())?g.convertObjectToArcadeDictionary(l):null;throw Error("Invalid Parameter");})};A.subtypes=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(w[0]instanceof n)return(l=w[0].subtypes())?g.convertObjectToArcadeDictionary(l):null;throw Error("Invalid Parameter");})};A.subtypecode=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(w[0]instanceof n){t=w[0].subtypes();if(!t)return null;if(t.subtypeField&&w[0].hasField(t.subtypeField))for(w=w[0].field(t.subtypeField),
l=0,t=t.subtypes;l<t.length;l++){var C=t[l];if(C.code===w)return C.code}return null}throw Error("Invalid Parameter");})};A.subtypename=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(w[0]instanceof n){t=w[0].subtypes();if(!t)return"";if(t.subtypeField&&w[0].hasField(t.subtypeField))for(w=w[0].field(t.subtypeField),l=0,t=t.subtypes;l<t.length;l++){var C=t[l];if(C.code===w)return C.name}return""}throw Error("Invalid Parameter");})};A.gdbversion=function(c,b){return y(c,b,function(l,t,
w){m.pcCheck(w,1,1);if(w[0]instanceof n)return w[0].gdbVersion();throw Error("Invalid Parameter");})};A.domain=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,3);if(w[0]instanceof n)return(l=w[0].fullDomain(m.toString(w[1]),void 0===w[2]?void 0:m.toNumber(w[2])))&&l.domain?"coded-value"===l.domain.type||"codedValue"===l.domain.type?g.convertObjectToArcadeDictionary({type:"codedValue",name:l.domain.name,dataType:f.layerFieldEsriConstants[l.field.type],codedValues:l.domain.codedValues.map(function(C){return{name:C.name,
code:C.code}})}):g.convertObjectToArcadeDictionary({type:"range",name:l.domain.name,dataType:f.layerFieldEsriConstants[l.field.type],min:l.domain.min,max:l.domain.max}):null;throw Error("Invalid Parameter");})};A.domainname=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,4);if(w[0]instanceof n)return w[0].domainValueLookup(m.toString(w[1]),w[2],void 0===w[3]?void 0:m.toNumber(w[3]));throw Error("Invalid Parameter");})};A.domaincode=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,2,
4);if(w[0]instanceof n)return w[0].domainCodeLookup(m.toString(w[1]),w[2],void 0===w[3]?void 0:m.toNumber(w[3]));throw Error("Invalid Parameter");})};A.urlencode=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(null===w[0])return"";if(w[0]instanceof g){l="";t=0;for(var C=w[0].keys();t<C.length;t++){var D=C[t],E=w[0].field(D);""!==l&&(l+="\x26");l=null===E?l+(encodeURIComponent(D)+"\x3d"):l+(encodeURIComponent(D)+"\x3d"+encodeURIComponent(E))}return l}return encodeURIComponent(m.toString(w[0]))})};
A.hash=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);l=new k.XXH(0);z(w[0],l,{map:new Map,currentLength:0});return l.digest()})};A.convertdirection=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,3,3);return h.convertDirection(w[0],w[1],w[2])})};A.fromjson=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,1);if(!1===m.isString(w[0]))throw Error("Invalid Parameter");return g.convertJsonToArcade(JSON.parse(m.toString(w[0])))})};A.expects=function(c,b){return y(c,b,function(l,
t,w){if(1>w.length)throw Error("Function called with wrong number of Parameters");return m.voidOperation})};A.tocharcode=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,2);l=m.toNumber(m.defaultUndefined(w[1],0));t=m.toString(w[0]);if(0===t.length&&1===w.length)return null;if(t.length<=l||0>l)throw Error("Illegal argument");return t.charCodeAt(l)})};A.tocodepoint=function(c,b){return y(c,b,function(l,t,w){m.pcCheck(w,1,2);l=m.toNumber(m.defaultUndefined(w[1],0));t=m.toString(w[0]);if(0===
t.length&&1===w.length)return null;if(t.length<=l||0>l)throw Error("Illegal argument");return t.codePointAt(l)})};A.fromcharcode=function(c,b){return y(c,b,function(l,t,w){if(1>w.length)throw Error("Function called with wrong number of Parameters");l=w.map(function(C){return Math.trunc(m.toNumber(C))}).filter(function(C){return 0<=C&&65535>=C});return 0===l.length?null:String.fromCharCode.apply(null,l)})};A.fromcodepoint=function(c,b){return y(c,b,function(l,t,w){if(1>w.length)throw Error("Function called with wrong number of Parameters");
try{var C=w.map(function(D){return Math.trunc(m.toNumber(D))}).filter(function(D){return 1114111>=D&&D>>>0===D})}catch(D){return null}return 0===C.length?null:String.fromCodePoint.apply(null,C)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(B,p,a,d){function g(L){if(!1===d.isString(L))throw Error("Invalid Parameter");return L}function n(L,Q){var ca=Math.pow(10,Q);return Math.round(L*ca)/ca}function m(L){L=+L;return isFinite(L)?
L-L%1||(0>L?-0:0===L?L:0):L}function f(L){var Q=parseFloat(L.toString().replace(m(L).toString(),"0"))*((0<L)-(0>L)||+L);return 0>L?{fraction:Q,integer:Math.ceil(L)}:{fraction:Q,integer:Math.floor(L)}}function h(L,Q){switch(L){case 0:return"SHORT"===Q?"N":"North";case 1:return"SHORT"===Q?"E":"East";case 2:return"SHORT"===Q?"S":"South";case 3:return"SHORT"===Q?"W":"West"}}function k(L,Q,ca){for(;L.length<ca;)L=Q+L;return L}function e(L,Q){return L-Math.floor(L/Q)*Q}function r(L){switch(L){case 6:case 1:return 360;
case 4:return F;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function q(L){switch(L.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function u(L){switch(L.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function v(L,Q,ca){var ha=null;switch(Q){case 1:ha=p.preciseMultiply(L,3600);break;case 2:ha=L;break;case 5:ha=p.preciseMultiply(L,3240);break;case 4:ha=p.preciseMultiply(L,G);break;default:throw Error("Unnexpected evaluation");
}switch(ca){case 1:return p.preciseDivide(ha,3600);case 2:return ha;case 5:return p.preciseDivide(ha,3240);case 4:return ha/G;default:throw Error("Unnexpected evaluation");}}function x(L){switch(L){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function z(L){switch(d.toNumber(L)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function A(L){switch(L.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function y(L){L=parseFloat(L);if(d.isNumber(L)){if(isNaN(L))throw Error("Invalid conversion");return L}throw Error("Invalid conversion");}function c(L,Q,ca){var ha=3===ca,ja=null,ma=null,R=0,fa=0;fa=0;if(ha){if(2>L.length)throw Error("Conversion Error");fa=1;(ma=z(d.toString(L[L.length-1])))?(ja=ma.first,ma=ma.second):(R=1,ja=A(d.toString(L[0])),ma=A(d.toString(L[L.length-1])));if(null===ja||null===
ma)throw Error("Invalid Conversion");}switch(Q){case 1:case 4:case 5:if(0===L.length)throw Error("Invalid Conversion");return ha?N.createFromAngleMeridianAndDirection(Y.createFromAngleAndUnits(y(L[R]),x(Q)),ja,ma):N.createFromAngleAndDirection(Y.createFromAngleAndUnits(y(L[R]),x(Q)),ca);case 3:fa=L.length-fa-R;if(3===fa)return L=Y.createFromDegreesMinutesSeconds(y(L[R]),y(L[R+1]),y(L[R+2])),ha?N.createFromAngleMeridianAndDirection(L,ja,ma):N.createFromAngleAndDirection(L,ca);if(1===fa)return L=y(L[R]),
L=K.number_to_dms(L),L=Y.createFromDegreesMinutesSeconds(L.m_degrees,L.m_minutes,L.m_seconds),ha?N.createFromAngleMeridianAndDirection(L,ja,ma):N.createFromAngleAndDirection(L,ca)}throw Error("Conversion Error");}function b(L){for(var Q=[" ","-","/","'",'"',"\\","^","\u00b0",H,"\t","\r","\n","*"],ca="",ha=0;ha<L.length;ha++){var ja=L.charAt(ha);ca=-1!==Q.indexOf(ja)?ca+"RRSPLITRRSPLITRR":ca+ja}return ca.split("RRSPLITRRSPLITRR").filter(function(ma){return""!==ma})}function l(L,Q,ca){for(var ha={padding:0,
rounding:0,newpos:Q},ja=!1;Q<L.length;){var ma=L[Q];if(ma===ca)ja?ha.rounding++:ha.padding++,Q++;else if("."===ma)ja=!0,Q++;else break}ha.newpos=Q-1;return ha}Object.defineProperty(p,"__esModule",{value:!0});p.convertDirection=p.preciseDivide=p.preciseMultiply=p.preciseMinus=p.preciseAdd=void 0;var t=function(L){return function(Q,ca,ha){ha=ha||14;return+L(Q,ca).toFixed(ha)}},w=function(L,Q){return L+Q},C=function(L,Q){return L-Q},D=function(L,Q){return L*Q},E=function(L,Q){return L/Q};p.preciseAdd=
function(L,Q,ca){return t(w)(L,Q,ca)};p.preciseMinus=function(L,Q,ca){return t(C)(L,Q,ca)};p.preciseMultiply=function(L,Q,ca){return t(D)(L,Q,ca)};p.preciseDivide=function(L,Q,ca){return t(E)(L,Q,ca)};var F=2*Math.PI,G=648E3/Math.PI,H=String.fromCharCode(7501),M;(function(L){L[L.north=0]="north";L[L.east=1]="east";L[L.south=2]="south";L[L.west=3]="west"})(M||(M={}));var X;(function(L){L[L.decimal_degrees=1]="decimal_degrees";L[L.seconds=2]="seconds";L[L.degrees_minutes_seconds=3]="degrees_minutes_seconds";
L[L.radians=4]="radians";L[L.gradians=5]="gradians";L[L.truncated_degrees=6]="truncated_degrees";L[L.fractional_degree_minutes=7]="fractional_degree_minutes";L[L.fractional_minute_seconds=8]="fractional_minute_seconds"})(X||(X={}));var W;(function(L){L[L.north_azimuth=1]="north_azimuth";L[L.polar=2]="polar";L[L.quadrant=3]="quadrant";L[L.south_azimuth=4]="south_azimuth"})(W||(W={}));var T;(function(L){L[L.meridian=0]="meridian";L[L.direction=1]="direction"})(T||(T={}));var K=function(){function L(Q,
ca,ha){this.m_degrees=Q;this.m_minutes=ca;this.m_seconds=ha}L.prototype.get_field=function(Q){switch(Q){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};L.seconds_to_DMS=function(Q){var ca=f(Q).fraction;Q=f(Q).integer;var ha=Math.floor(Q/3600);Q-=3600*ha;var ja=Math.floor(Q/60);return new L(ha,ja,Q-60*ja+ca)};L.number_to_dms=function(Q){var ca=f(Q).fraction;Q=f(Q).integer;var ha=p.preciseMultiply(f(100*
ca).fraction,100);ca=f(100*ca).integer;return new L(Q,ca,ha)};L.prototype.format=function(Q,ca){var ha=n(this.m_seconds,ca),ja=this.m_minutes,ma=this.m_degrees;if(2===Q||8===Q)60<=ha&&(ha-=60,++ja),60<=ja&&(ja=0,++ma),360<=ma&&(ma=0);else if(7===Q)ha=0,ja=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ma=this.m_degrees,60<=ja&&(ja=0,++ma),360<=ma&&(ma=0);else if(1===Q||6===Q)ha=p.preciseDivide(this.m_seconds,3600),ja=p.preciseDivide(this.m_minutes,60),ma=Math.round(this.m_degrees+ja+ha),ha=ja=
0;return new L(ma,ja,ha)};L.DMS_to_seconds=function(Q,ca,ha){return 3600*Q+60*ca+ha};return L}(),O=function(){function L(Q,ca,ha){this.meridian=Q;this.angle=ca;this.direction=ha}L.prototype.fetch_azimuth=function(Q){return 0===Q?this.meridian:this.direction};return L}(),N=function(){function L(Q){this.m_angle=Q}L.createFromAngleAndDirection=function(Q,ca){return new L(new Y(L.convertDirectionFormat(Q.extract_angular_units(2),ca,1)))};L.prototype.getAngle=function(Q){var ca=this.m_angle.extract_angular_units(2);
switch(Q){case 1:case 4:case 2:return Q=new Y(L.convertDirectionFormat(ca,1,Q));case 3:return Q=L.seconds_north_azimuth_to_quadrant(ca),Q=new Y(Q.angle)}};L.prototype.getMeridian=function(Q){var ca=this.m_angle.extract_angular_units(2);switch(Q){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return L.seconds_north_azimuth_to_quadrant(ca).meridian}};L.prototype.getDirection=function(Q){var ca=this.m_angle.extract_angular_units(2);switch(Q){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return L.seconds_north_azimuth_to_quadrant(ca).direction}};
L.seconds_north_azimuth_to_quadrant=function(Q){var ca=324E3>=Q||972E3<=Q?0:2;return new O(ca,0===ca?Math.min(1296E3-Q,Q):Math.abs(Q-648E3),648E3<Q?3:1)};L.createFromAngleMeridianAndDirection=function(Q,ca,ha){return new L(new Y(L.secondsQuadrantToNorthAzimuth(Q.extract_angular_units(2),ca,ha)))};L.secondsQuadrantToNorthAzimuth=function(Q,ca,ha){return 0===ca?1===ha?Q:1296E3-Q:1===ha?648E3-Q:648E3+Q};L.convertDirectionFormat=function(Q,ca,ha){var ja=0;switch(ca){case 1:ja=Q;break;case 2:ja=324E3-
Q;break;case 3:throw Error("Unnexpected evaluation");case 4:ja=Q+648E3}Q=0;switch(ha){case 1:Q=ja;break;case 2:Q=324E3-ja;break;case 3:throw Error("Unnexpected evaluation");case 4:Q=ja-648E3}Q%=1296E3;return 0>Q?1296E3+Q:Q};return L}(),Y=function(){function L(Q){this.m_seconds=Q}L.createFromAngleAndUnits=function(Q,ca){return new L(v(Q,ca,2))};L.prototype.extract_angular_units=function(Q){return v(this.m_seconds,2,x(Q))};L.createFromDegreesMinutesSeconds=function(Q,ca,ha){return new L(p.preciseAdd(p.preciseAdd(p.preciseMultiply(Q,
3600),p.preciseMultiply(ca,60)),ha))};return L}(),P=function(){function L(Q,ca,ha,ja){this.m_view=Q;this.m_angle=ca;this.m_merdian=ha;this.m_direction=ja;this.m_formatted_dms=this.m_dms=null}L.createFromStringAndBearing=function(Q,ca,ha){return new L(Q,ca.getAngle(ha),ca.getMeridian(ha),ca.getDirection(ha))};L.prototype.fetch_angle=function(){return this.m_angle};L.prototype.fetch_meridian=function(){return this.m_merdian};L.prototype.fetch_direction=function(){return this.m_direction};L.prototype.fetch_m_view=
function(){return this.m_view};L.prototype.fetch_dms=function(){null===this.m_dms&&this.calculate_dms();return this.m_dms};L.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};L.prototype.calculate_dms=function(){var Q=null,ca=6,ha=0;for(Q=0;Q<this.m_view.length;Q++){var ja=this.m_view[Q];switch(ja){case "m":Q=l(this.m_view,Q,ja);ca=6===ca?7:ca;Q=Q.newpos;continue;case "s":Q=l(this.m_view,Q,ja),ca=8,ha=ha<Q.rounding?Q.rounding:ha,
Q=Q.newpos}}this.m_dms=K.seconds_to_DMS(this.m_angle.extract_angular_units(2));this.m_formatted_dms=K.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(ca,ha)};return L}();p.convertDirection=function(L,Q,ca){if(!(Q instanceof a))throw Error("Invalid Parameter");if(!1===Q.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===Q.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var ha=q(g(Q.field("directiontype")));Q=u(g(Q.field("angletype")));
if(d.isNumber(L)){L=d.toNumber(L);if(3===ha)throw Error("Conversion error");3===Q?(L=K.number_to_dms(L),Q=N.createFromAngleAndDirection(Y.createFromDegreesMinutesSeconds(L.m_degrees,L.m_minutes,L.m_seconds),ha)):Q=N.createFromAngleAndDirection(Y.createFromAngleAndUnits(L,x(Q)),ha)}else if(d.isString(L))Q=c(b(L),Q,ha);else if(d.isArray(L))Q=c(L,Q,ha);else if(d.isImmutableArray(L))Q=c(L.toArray(),Q,ha);else throw Error("Conversion Error");if(!(ca instanceof a))throw Error("Invalid Parameter");if(!1===
ca.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ca.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");ha=q(g(ca.field("directiontype")));L=ca.hasField("angleType")?u(g(ca.field("angletype"))):null;var ja=g(ca.field("outputType")).toUpperCase().trim();if(!ha||!ja)throw Error("Conversion error");if(!(L||"TEXT"===ja&&ca.hasField("format")))throw Error("Invalid unit");switch(ja){case "VALUE":if(3===ha||3===L)return ca=Q,Q=ca.getAngle(ha),
3===ha&&3===L?(L=K.seconds_to_DMS(Q.extract_angular_units(2)),ha=[h(ca.getMeridian(ha),"SHORT"),L.m_degrees,L.m_minutes,L.m_seconds,h(ca.getDirection(ha),"SHORT")]):3===L?(L=K.seconds_to_DMS(Q.extract_angular_units(2)),ha=[L.m_degrees,L.m_minutes,L.m_seconds]):ha=3===ha?[h(ca.getMeridian(ha),"SHORT"),Q.extract_angular_units(L),h(ca.getDirection(ha),"SHORT")]:[Q.extract_angular_units(L)],ha;ca=Q;if((Q=x(L))&&3!==L)ha=ca.getAngle(ha).extract_angular_units(Q);else throw Error("Conversion Error");return ha;
case "TEXT":ja="";ca.hasField("format")&&(ja=d.toString(ca.field("format")));if(null===ja||""===ja){ca="";switch(L){case 1:ca=3===ha?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ca=3===ha?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:ca="R.RR";break;case 5:ca="GGG.GG"+H;break;default:throw Error("Conversion error");}3===ha&&(ca="p "+ca+" b");ja=ca}ca=Q;L=ja;var ma="",R=null,fa=null;Q=P.createFromStringAndBearing(L,ca,ha);ja={D:1,d:6,m:7,s:8,R:4,G:5};for(fa=0;fa<L.length;fa++){var ka=L[fa];
switch(ka){case "[":R=L;ka={escaped:"",newpos:fa};for(fa++;fa<R.length;){var qa=R[fa];fa++;if("]"===qa)break;ka.escaped+=qa}ka.newpos=fa-1;R=ka;ma+=R.escaped;fa=R.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":R=l(L,fa,ka);fa=ca.getAngle(ha);a:{ka=ja[ka];qa=R.padding;var na=R.rounding,ia=Q,ea=null;switch(ka){case 1:case 4:case 5:ea=e(n(fa.extract_angular_units(ka),na),r(ka));fa=k(ea.toFixed(na),"0",qa+na+(0<na?1:0));break a;case 6:case 7:ea=e(ia.fetch_formatted_dms().get_field(ka),
r(ka));fa=k(ea.toFixed(na),"0",qa+na+(0<na?1:0));break a;case 8:ea=e(n(ia.fetch_dms().get_field(ka),na),r(ka));fa=k(ea.toFixed(na),"0",qa+na+(0<na?1:0));break a;default:throw Error("Unnexepected evaluation");}}ma+=fa;fa=R.newpos;continue;case "P":case "p":ma+=h(Q.fetch_meridian(),"p"===ka?"SHORT":"LONG");continue;case "B":case "b":ma+=h(Q.fetch_direction(),"b"===ka?"SHORT":"LONG");continue;default:ma+=ka}}return ma;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require",
"exports"],function(B,p){function a(g){for(var n=[],m=0,f=g.length;m<f;m++){var h=g.charCodeAt(m);128>h?n.push(h):2048>h?n.push(192|h>>6,128|h&63):55296>h||57344<=h?n.push(224|h>>12,128|h>>6&63,128|h&63):(m++,h=65536+((h&1023)<<10|g.charCodeAt(m)&1023),n.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|h&63))}return new Uint8Array(n)}Object.defineProperty(p,"__esModule",{value:!0});p.XXH=void 0;var d=function(){function g(n){this.seed=n;this.totallen=0;this.bufs=[];this.init()}g.prototype.init=function(){this.bufs=
[];this.totallen=0;return this};g.prototype.updateFloatArray=function(n){for(var m=[],f=0;f<n.length;f++){var h=n[f];isNaN(h)?m.push("NaN"):Infinity===h?m.push("Infinity"):-Infinity===h?m.push("-Infinity"):0===h?m.push("0"):m.push(h.toString(16))}this.update(a(m.join("")))};g.prototype.updateIntArray=function(n){n=Int32Array.from(n);this.update(new Uint8Array(n.buffer))};g.prototype.updateUint8Array=function(n){this.update(Uint8Array.from(n))};g.prototype.updateWithString=function(n){return this.update(a(n))};
g.prototype.update=function(n){this.bufs.push(n);this.totallen+=n.length;return this};g.prototype.digest=function(){for(var n=new Uint8Array(this.totallen),m=0,f=0,h=this.bufs;f<h.length;f++){var k=h[f];n.set(k,m);m+=k.length}this.init();return this.xxHash32(n,this.seed)};g.prototype.xxHash32=function(n,m){void 0===m&&(m=0);var f=m+374761393&4294967295,h=0;if(16<=n.length){f=[m+2654435761+2246822519&4294967295,m+2246822519&4294967295,m+0&4294967295,m-2654435761&4294967295];var k=n.length-16,e=0;for(h=
0;(h&4294967280)<=k;h+=4){var r=h,q=n[r+0]+(n[r+1]<<8);r=n[r+2]+(n[r+3]<<8);q=f[e]+(2246822519*q+(2246822519*r<<16))&4294967295;q=q<<13|q>>>19;f[e]=2654435761*(q&65535)+(2654435761*(q>>>16)<<16)&4294967295;e=e+1&3}f=(f[0]<<1|f[0]>>>31)+(f[1]<<7|f[1]>>>25)+(f[2]<<12|f[2]>>>20)+(f[3]<<18|f[3]>>>14)&4294967295}f=f+n.length&4294967295;for(e=n.length-4;h<=e;h+=4)r=h,q=n[r+0]+(n[r+1]<<8),r=n[r+2]+(n[r+3]<<8),f=f+(3266489917*q+(3266489917*r<<16))&4294967295,f=f<<17|f>>>15,f=668265263*(f&65535)+(668265263*
(f>>>16)<<16)&4294967295;for(;h<n.length;++h)e=n[h],f+=374761393*e,f=f<<11|f>>>21,f=2654435761*(f&65535)+(2654435761*(f>>>16)<<16)&4294967295;f^=f>>>15;f=(2246822519*(f&65535)&4294967295)+(2246822519*(f>>>16)<<16);f^=f>>>13;f=(3266489917*(f&65535)&4294967295)+(3266489917*(f>>>16)<<16);f^=f>>>16;return 0>f?f+4294967296:f};return g}();p.XXH=d})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b,l,t,w,C){function D(ia,ea){for(var oa=[],ta=0;ta<ea.arguments.length;ta++)oa.push(F(ia,ea.arguments[ta]));return oa}function E(ia,ea,oa){try{return!0===ea.preparsed?oa(ia,null,ea.arguments):oa(ia,ea,D(ia,ea))}catch(ta){throw ta;}}function F(ia,ea){try{switch(ea.type){case "EmptyStatement":return k.voidOperation;case "VariableDeclarator":var oa=null===ea.init?null:F(ia,ea.init);oa===k.voidOperation&&(oa=null);if("Identifier"!==ea.id.type)throw Error("Can only assign a regular variable");
var ta=ea.id.name.toLowerCase();null!==ia.localScope?ia.localScope[ta]={value:oa,valueset:!0,node:ea.init}:ia.globalScope[ta]={value:oa,valueset:!0,node:ea.init};return k.voidOperation;case "VariableDeclaration":for(var ra=0;ra<ea.declarations.length;ra++)F(ia,ea.declarations[ra]);return k.voidOperation;case "BlockStatement":a:{var aa=k.voidOperation;for(ra=0;ra<ea.body.length;ra++)if(aa=F(ia,ea.body[ra]),aa instanceof k.ReturnResult||aa===k.breakResult||aa===k.continueResult){var da=aa;break a}da=
aa}return da;case "FunctionDeclaration":var J=ea.id.name.toLowerCase();ia.globalScope[J]={valueset:!0,node:null,value:new m(ea,ia)};return k.voidOperation;case "ReturnStatement":if(null===ea.argument)var sa=new k.ReturnResult(k.voidOperation);else{var wa=F(ia,ea.argument);sa=new k.ReturnResult(wa)}return sa;case "IfStatement":if("AssignmentExpression"===ea.test.type||"UpdateExpression"===ea.test.type)throw Error(e.nodeErrorMessage(ea.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var U=F(ia,
ea.test);if(!0===U)var La=F(ia,ea.consequent);else if(!1===U)La=null!==ea.alternate?F(ia,ea.alternate):k.voidOperation;else throw Error(e.nodeErrorMessage(ea,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return La;case "ExpressionStatement":if("AssignmentExpression"===ea.expression.type||"UpdateExpression"===ea.expression.type)var Ha=F(ia,ea.expression);else{var pa=F(ia,ea.expression);Ha=pa===k.voidOperation?k.voidOperation:new k.ImplicitResult(pa)}return Ha;case "AssignmentExpression":var Qa=
F(ia,ea.right);ra=null;var Ga="";if("MemberExpression"===ea.left.type){ra=F(ia,ea.left.object);!0===ea.left.computed?Ga=F(ia,ea.left.property):"Identifier"===ea.left.property.type&&(Ga=ea.left.property.name);if(k.isArray(ra))if(k.isNumber(Ga)){0>Ga&&(Ga=ra.length+Ga);if(0>Ga||Ga>ra.length)throw Error("Assignment outside of array bounds");if(Ga===ra.length&&"\x3d"!==ea.operator)throw Error("Invalid Parameter");ra[Ga]=H(Qa,ea.operator,ra[Ga],ea)}else throw Error("Invalid Parameter");else if(ra instanceof
g){if(!1===k.isString(Ga))throw Error("Dictionary accessor must be a string");if(!0===ra.hasField(Ga))ra.setField(Ga,H(Qa,ea.operator,ra.field(Ga),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");ra.setField(Ga,H(Qa,ea.operator,null,ea))}}else if(ra instanceof n){if(!1===k.isString(Ga))throw Error("Feature accessor must be a string");if(!0===ra.hasField(Ga))ra.setField(Ga,H(Qa,ea.operator,ra.field(Ga),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");ra.setField(Ga,
H(Qa,ea.operator,null,ea))}}else{if(k.isImmutableArray(ra))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var va=k.voidOperation}else if(ra=ea.left.name.toLowerCase(),null!==ia.localScope&&void 0!==ia.localScope[ra])ia.localScope[ra]={value:H(Qa,ea.operator,ia.localScope[ra].value,ea),valueset:!0,node:ea.right},va=k.voidOperation;else if(void 0!==ia.globalScope[ra])ia.globalScope[ra]={value:H(Qa,ea.operator,ia.globalScope[ra].value,ea),valueset:!0,node:ea.right},va=k.voidOperation;
else throw Error("Variable not recognised");return va;case "UpdateExpression":ra=null;Ga="";if("MemberExpression"===ea.argument.type){ra=F(ia,ea.argument.object);!0===ea.argument.computed?Ga=F(ia,ea.argument.property):"Identifier"===ea.argument.property.type&&(Ga=ea.argument.property.name);if(k.isArray(ra))if(k.isNumber(Ga)){0>Ga&&(Ga=ra.length+Ga);if(0>Ga||Ga>=ra.length)throw Error("Assignment outside of array bounds");var za=k.toNumber(ra[Ga]);ra[Ga]="++"===ea.operator?za+1:za-1}else throw Error("Invalid Parameter");
else if(ra instanceof g){if(!1===k.isString(Ga))throw Error("Dictionary accessor must be a string");if(!0===ra.hasField(Ga))za=k.toNumber(ra.field(Ga)),ra.setField(Ga,"++"===ea.operator?za+1:za-1);else throw Error("Invalid Parameter");}else if(ra instanceof n){if(!1===k.isString(Ga))throw Error("Feature accessor must be a string");if(!0===ra.hasField(Ga))za=k.toNumber(ra.field(Ga)),ra.setField(Ga,"++"===ea.operator?za+1:za-1);else throw Error("Invalid Parameter");}else{if(k.isImmutableArray(ra))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Ba=!1===ea.prefix?za:"++"===ea.operator?za+1:za-1}else{ra="Identifier"===ea.argument.type?ea.argument.name.toLowerCase():"";if(!ra)throw Error("Invalid identifier");if(null!==ia.localScope&&void 0!==ia.localScope[ra])za=k.toNumber(ia.localScope[ra].value),ia.localScope[ra]={value:"++"===ea.operator?za+1:za-1,valueset:!0,node:ea},Ba=!1===ea.prefix?za:"++"===ea.operator?za+1:za-1;else if(void 0!==ia.globalScope[ra])za=k.toNumber(ia.globalScope[ra].value),ia.globalScope[ra]=
{value:"++"===ea.operator?za+1:za-1,valueset:!0,node:ea},Ba=!1===ea.prefix?za:"++"===ea.operator?za+1:za-1;else throw Error("Variable not recognised");}return Ba;case "BreakStatement":return k.breakResult;case "ContinueStatement":return k.continueResult;case "TemplateElement":return ea.value?ea.value.cooked:"";case "TemplateLiteral":var Fa="",xa=0;va=0;for(ra=ea.quasis;va<ra.length;va++)if(Ga=ra[va],Fa+=Ga.value?Ga.value.cooked:"",!1===Ga.tail){var Da=ea.expressions[xa]?k.toString(F(ia,ea.expressions[xa])):
"";Fa+=Da;xa++}return Fa;case "ForStatement":null!==ea.init&&F(ia,ea.init);xa={testResult:!0,lastAction:k.voidOperation};do b:{ra=ia;Ga=ea;Da=xa;if(null!==Ga.test){Da.testResult=F(ra,Ga.test);if(!1===Da.testResult)break b;if(!0!==Da.testResult)throw Error(e.nodeErrorMessage(Ga,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Da.lastAction=F(ra,Ga.body);Da.lastAction===k.breakResult?Da.testResult=!1:Da.lastAction instanceof k.ReturnResult?Da.testResult=!1:null!==Ga.update&&F(ra,Ga.update)}while(!0===
xa.testResult);Fa=xa.lastAction instanceof k.ReturnResult?xa.lastAction:k.voidOperation;return Fa;case "ForInStatement":return G(ia,ea);case "Identifier":return O(ia,ea);case "MemberExpression":return X(ia,ea);case "Literal":return ea.value;case "CallExpression":return N(ia,ea);case "UnaryExpression":return W(ia,ea);case "BinaryExpression":return T(ia,ea);case "LogicalExpression":return K(ia,ea);case "ArrayExpression":try{for(ra=[],Ga=0;Ga<ea.elements.length;Ga++){var Aa=F(ia,ea.elements[Ga]);if(k.isFunctionParameter(Aa))throw Error(e.nodeErrorMessage(ea,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Aa===k.voidOperation?ra.push(null):ra.push(Aa)}}catch(Ma){throw Ma;}return ra;case "ObjectExpression":ra={};for(Ga=0;Ga<ea.properties.length;Ga++){var Ja=F(ia,ea.properties[Ga]);if(k.isFunctionParameter(Ja.value))throw Error("Illegal Argument");if(!1===k.isString(Ja.key))throw Error("Illegal Argument");ra[Ja.key.toString()]=Ja.value===k.voidOperation?null:Ja.value}var Ka=new g(ra);Ka.immutable=!1;return Ka;case "Property":return{key:"Identifier"===ea.key.type?
ea.key.name:F(ia,ea.key),value:F(ia,ea.value)};default:throw Error(e.nodeErrorMessage(ea,"RUNTIME","UNREOGNISED"));}}catch(Ma){throw Ma;}}function G(ia,ea){var oa=F(ia,ea.right);"VariableDeclaration"===ea.left.type&&F(ia,ea.left);var ta=null,ra="";if("VariableDeclaration"===ea.left.type){var aa=ea.left.declarations[0].id;"Identifier"===aa.type&&(ra=aa.name)}else"Identifier"===ea.left.type&&(ra=ea.left.name);if(!ra)throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDVARIABLE"));ra=ra.toLowerCase();
null!==ia.localScope&&void 0!==ia.localScope[ra]&&(ta=ia.localScope[ra]);null===ta&&void 0!==ia.globalScope[ra]&&(ta=ia.globalScope[ra]);if(null===ta)throw Error(e.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTDECLARED"));if(k.isArray(oa)||k.isString(oa)){oa=oa.length;for(aa=0;aa<oa;aa++){ta.value=aa;ra=F(ia,ea.body);if(ra===k.breakResult)break;if(ra instanceof k.ReturnResult)return ra}return k.voidOperation}if(k.isImmutableArray(oa)){for(aa=0;aa<oa.length();aa++){ta.value=aa;ra=F(ia,ea.body);if(ra===
k.breakResult)break;if(ra instanceof k.ReturnResult)return ra}return k.voidOperation}if(oa instanceof g||oa instanceof n)for(oa=oa.keys(),aa=0;aa<oa.length;aa++){ta.value=oa[aa];ra=F(ia,ea.body);if(ra===k.breakResult)break;if(ra instanceof k.ReturnResult)return ra}else return k.voidOperation}function H(ia,ea,oa,ta){switch(ea){case "\x3d":return ia===k.voidOperation?null:ia;case "/\x3d":return k.toNumber(oa)/k.toNumber(ia);case "*\x3d":return k.toNumber(oa)*k.toNumber(ia);case "-\x3d":return k.toNumber(oa)-
k.toNumber(ia);case "+\x3d":return k.isString(oa)||k.isString(ia)?k.toString(oa)+k.toString(ia):k.toNumber(oa)+k.toNumber(ia);case "%\x3d":return k.toNumber(oa)%k.toNumber(ia);default:throw Error(e.nodeErrorMessage(ta,"RUNTIME","OPERATORNOTRECOGNISED"));}}function M(ia,ea,oa){ea=ea.toLowerCase();switch(ea){case "hasz":return ia=ia.hasZ,void 0===ia?!1:ia;case "hasm":return ia=ia.hasM,void 0===ia?!1:ia;case "spatialreference":return ea=ia.spatialReference._arcadeCacheId,void 0===ea&&(oa=!0,Object.freeze&&
Object.isFrozen(ia.spatialReference)&&(oa=!1),oa&&(fa++,ea=ia.spatialReference._arcadeCacheId=fa)),ia=new g({wkt:ia.spatialReference.wkt,wkid:ia.spatialReference.wkid}),void 0!==ea&&(ia._arcadeCacheId="SPREF"+ea.toString()),ia}switch(ia.type){case "extent":switch(ea){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ia=ia[ea],void 0!==ia?ia:null;case "type":return"Extent"}break;case "polygon":switch(ea){case "rings":return ea=ia.getCacheValue("_arcadeCacheId"),
void 0===ea&&(fa++,ea=fa,ia.setCacheValue("_arcadeCacheId",ea)),ia=new f(ia.rings,ia.spatialReference,!0===ia.hasZ,!0===ia.hasM,ea);case "type":return"Polygon"}break;case "point":switch(ea){case "x":case "y":case "z":case "m":return void 0!==ia[ea]?ia[ea]:null;case "type":return"Point"}break;case "polyline":switch(ea){case "paths":return ea=ia.getCacheValue("_arcadeCacheId"),void 0===ea&&(fa++,ea=fa,ia.setCacheValue("_arcadeCacheId",ea)),ia=new f(ia.paths,ia.spatialReference,!0===ia.hasZ,!0===ia.hasM,
ea);case "type":return"Polyline"}break;case "multipoint":switch(ea){case "points":return ea=ia.getCacheValue("_arcadeCacheId"),void 0===ea&&(fa++,ea=fa,ia.setCacheValue("_arcadeCacheId",ea)),ia=new h(ia.points,ia.spatialReference,!0===ia.hasZ,!0===ia.hasM,ea,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(oa,"RUNTIME","PROPERTYNOTFOUND"));}function X(ia,ea){try{var oa=F(ia,ea.object);if(null===oa)throw Error(e.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));if(!1===ea.computed){if("Identifier"===
ea.property.type){if(oa instanceof g||oa instanceof n)return oa.field(ea.property.name);if(oa instanceof c)return M(oa,ea.property.name,ea)}throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}var ta=F(ia,ea.property);if(oa instanceof g||oa instanceof n){if(k.isString(ta))return oa.field(ta);throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(oa instanceof c){if(k.isString(ta))return M(oa,ta,ea);throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(k.isArray(oa)){if(k.isNumber(ta)&&
isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length+ta);if(ta>=oa.length||0>ta)throw Error(e.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return oa[ta]}throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(k.isString(oa)){if(k.isNumber(ta)&&isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length+ta);if(ta>=oa.length||0>ta)throw Error(e.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return oa[ta]}throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(k.isImmutableArray(oa)&&k.isNumber(ta)&&
isFinite(ta)&&Math.floor(ta)===ta){0>ta&&(ta=oa.length()+ta);if(ta>=oa.length()||0>ta)throw Error(e.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return oa.get(ta)}throw Error(e.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}catch(ra){throw ra;}}function W(ia,ea){try{var oa=F(ia,ea.argument);if(k.isBoolean(oa)){if("!"===ea.operator)return!oa;if("-"===ea.operator)return-1*k.toNumber(oa);if("+"===ea.operator)return 1*k.toNumber(oa);if("~"===ea.operator)return~k.toNumber(oa);throw Error(e.nodeErrorMessage(ea,
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ea.operator)return~k.toNumber(oa);if("-"===ea.operator)return-1*k.toNumber(oa);if("+"===ea.operator)return 1*k.toNumber(oa);throw Error(e.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ta){throw ta;}}function T(ia,ea){try{var oa=[F(ia,ea.left),F(ia,ea.right)],ta=oa[0],ra=oa[1];switch(ea.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return k.binaryOperator(k.toNumber(ta),k.toNumber(ra),
ea.operator);case "\x3d\x3d":return k.equalityTest(ta,ra);case "!\x3d":return!k.equalityTest(ta,ra);case "\x3c":return k.greaterThanLessThan(ta,ra,ea.operator);case "\x3e":return k.greaterThanLessThan(ta,ra,ea.operator);case "\x3c\x3d":return k.greaterThanLessThan(ta,ra,ea.operator);case "\x3e\x3d":return k.greaterThanLessThan(ta,ra,ea.operator);case "+":return k.isString(ta)||k.isString(ra)?k.toString(ta)+k.toString(ra):k.toNumber(ta)+k.toNumber(ra);case "-":return k.toNumber(ta)-k.toNumber(ra);
case "*":return k.toNumber(ta)*k.toNumber(ra);case "/":return k.toNumber(ta)/k.toNumber(ra);case "%":return k.toNumber(ta)%k.toNumber(ra);default:throw Error(e.nodeErrorMessage(ea,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(aa){throw aa;}}function K(ia,ea){try{if("AssignmentExpression"===ea.left.type||"UpdateExpression"===ea.left.type)throw Error(e.nodeErrorMessage(ea.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ea.right.type||"UpdateExpression"===ea.right.type)throw Error(e.nodeErrorMessage(ea.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var oa=F(ia,ea.left);if(k.isBoolean(oa))switch(ea.operator){case "||":if(!0===oa)return oa;var ta=F(ia,ea.right);if(k.isBoolean(ta))return ta;throw Error(e.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===oa)return oa;ta=F(ia,ea.right);if(k.isBoolean(ta))return ta;throw Error(e.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));default:throw Error(e.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));}throw Error(e.nodeErrorMessage(ea,"RUNTIME",
"ONLYBOOLEAN"));}catch(ra){throw ra;}}function O(ia,ea){try{var oa=ea.name.toLowerCase();if(null!==ia.localScope&&void 0!==ia.localScope[oa]){var ta=ia.localScope[oa];if(!0===ta.valueset)return ta.value;ta.value=F(ia,ta.node);ta.valueset=!0;return ta.value}if(void 0!==ia.globalScope[oa]){ta=ia.globalScope[oa];if(!0===ta.valueset)return ta.value;ta.value=F(ia,ta.node);ta.valueset=!0;return ta.value}throw Error(e.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTFOUND"));}catch(ra){throw ra;}}function N(ia,
ea){try{if("Identifier"!==ea.callee.type)throw Error(e.nodeErrorMessage(ea,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ia.localScope&&void 0!==ia.localScope[ea.callee.name.toLowerCase()]){var oa=ia.localScope[ea.callee.name.toLowerCase()];if(oa.value instanceof k.NativeFunction)return oa.value.fn(ia,ea);if(oa.value instanceof m)return ha(ia,ea,oa.value.definition);throw Error(e.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ia.globalScope[ea.callee.name.toLowerCase()]){oa=ia.globalScope[ea.callee.name.toLowerCase()];
if(oa.value instanceof k.NativeFunction)return oa.value.fn(ia,ea);if(oa.value instanceof m)return ha(ia,ea,oa.value.definition);throw Error(e.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}throw Error(e.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));}catch(ta){throw ta;}}function Y(ia){return null==ia?"":k.isArray(ia)||k.isImmutableArray(ia)?"Array":k.isDate(ia)?"Date":k.isString(ia)?"String":k.isBoolean(ia)?"Boolean":k.isNumber(ia)?"Number":ia instanceof d?"Attachment":ia instanceof a?"Portal":ia instanceof
g?"Dictionary":ia instanceof n?"Feature":ia instanceof l?"Point":ia instanceof t?"Polygon":ia instanceof w?"Polyline":ia instanceof b?"Multipoint":ia instanceof y?"Extent":k.isFunctionParameter(ia)?"Function":k.isFeatureSet(ia)?"FeatureSet":k.isFeatureSetCollection(ia)?"FeatureSetCollection":ia===k.voidOperation?"":"number"===typeof ia&&isNaN(ia)?"Number":"Unrecognised Type"}function P(ia,ea,oa,ta){try{var ra=F(ia,ea.arguments[oa]);if(k.equalityTest(ra,ta))return F(ia,ea.arguments[oa+1]);var aa=ea.arguments.length-
oa;return 1===aa?F(ia,ea.arguments[oa]):2===aa?null:3===aa?F(ia,ea.arguments[oa+2]):P(ia,ea,oa+2,ta)}catch(da){throw da;}}function L(ia,ea,oa,ta){try{if(!0===ta)return F(ia,ea.arguments[oa+1]);if(3===ea.arguments.length-oa)return F(ia,ea.arguments[oa+2]);var ra=F(ia,ea.arguments[oa+2]);if(!1===k.isBoolean(ra))throw Error("WHEN needs boolean test conditions");return L(ia,ea,oa+2,ra)}catch(aa){throw aa;}}function Q(ia,ea){var oa=ia.length,ta=Math.floor(oa/2);if(0===oa)return[];if(1===oa)return[ia[0]];
var ra=Q(ia.slice(0,ta),ea);oa=Q(ia.slice(ta,oa),ea);for(ta=[];0<ra.length||0<oa.length;)if(0<ra.length&&0<oa.length){var aa=ea(ra[0],oa[0]);isNaN(aa)&&(aa=0);0>=aa?(ta.push(ra[0]),ra=ra.slice(1)):(ta.push(oa[0]),oa=oa.slice(1))}else 0<ra.length?(ta.push(ra[0]),ra=ra.slice(1)):0<oa.length&&(ta.push(oa[0]),oa=oa.slice(1));return ta}function ca(ia,ea,oa){try{var ta=ia.body;if(oa.length!==ia.params.length)throw Error("Invalid Parameter calls to function.");for(var ra=0;ra<oa.length;ra++)ea.localScope[ia.params[ra].name.toLowerCase()]=
{value:oa[ra],valueset:!0,node:null};var aa=F(ea,ta);if(aa instanceof k.ReturnResult)return aa.value;if(aa===k.breakResult)throw Error("Cannot Break from a Function");if(aa===k.continueResult)throw Error("Cannot Continue from a Function");return aa instanceof k.ImplicitResult?aa.value:aa}catch(da){throw da;}}function ha(ia,ea,oa){return E(ia,ea,function(ta,ra,aa){ta={spatialReference:ia.spatialReference,globalScope:ia.globalScope,depthCounter:ia.depthCounter+1,console:ia.console,lrucache:ia.lrucache,
interceptor:ia.interceptor,localScope:{}};if(64<ta.depthCounter)throw Error("Exceeded maximum function depth");return ca(oa,ta,aa)})}function ja(ia){return function(){var ea={spatialReference:ia.context.spatialReference,console:ia.context.console,lrucache:ia.context.lrucache,interceptor:ia.context.interceptor,localScope:{},depthCounter:ia.context.depthCounter+1,globalScope:ia.context.globalScope};if(64<ea.depthCounter)throw Error("Exceeded maximum function depth");return ca(ia.definition,ea,arguments)}}
function ma(ia){}function R(ia){for(var ea={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:E,evaluateIdentifier:O,arcadeCustomFunctionHandler:ja},oa=0;oa<ia.length;oa++)ia[oa].registerFunctions(ea);for(var ta in ea.functions)ka[ta]={value:new k.NativeFunction(ea.functions[ta]),valueset:!0,node:null},na.prototype[ta]=ka[ta];for(oa=0;oa<ea.signatures.length;oa++)e.addFunctionDeclaration(ea.signatures[oa],"async")}Object.defineProperty(p,"__esModule",{value:!0});p.findFunctionCalls=
p.referencesFunction=p.referencesMember=p.validateScript=p.extractExpectedFieldLiterals=p.extractFieldLiterals=p.executeScript=p.extend=p.functionHelper=void 0;var fa=0,ka={};q.registerFunctions(ka,E);A.registerFunctions(ka,E);x.registerFunctions(ka,E);u.registerFunctions(ka,E);z.registerFunctions(ka,E);v.registerFunctions(ka,E);ka["typeof"]=function(ia,ea){return E(ia,ea,function(oa,ta,ra){k.pcCheck(ra,1,1);oa=Y(ra[0]);if("Unrecognised Type"===oa)throw Error("Unrecognised Type");return oa})};ka.iif=
function(ia,ea){try{k.pcCheck(null===ea.arguments?[]:ea.arguments,3,3);var oa=F(ia,ea.arguments[0]);if(!1===k.isBoolean(oa))throw Error("IF Function must have a boolean test condition");var ta=F(ia,ea.arguments[1]),ra=F(ia,ea.arguments[2]);return!0===oa?ta:ra}catch(aa){throw aa;}};ka.decode=function(ia,ea){try{if(2>ea.arguments.length)throw Error("Missing Parameters");if(2===ea.arguments.length)return F(ia,ea.arguments[1]);if(0===(ea.arguments.length-1)%2)throw Error("Must have a default value result.");
var oa=F(ia,ea.arguments[0]);return P(ia,ea,1,oa)}catch(ta){throw ta;}};ka.when=function(ia,ea){try{if(3>ea.arguments.length)throw Error("Missing Parameters");if(0===ea.arguments.length%2)throw Error("Must have a default value result.");var oa=F(ia,ea.arguments[0]);if(!1===k.isBoolean(oa))throw Error("WHEN needs boolean test conditions");return L(ia,ea,0,oa)}catch(ta){throw ta;}};ka.top=function(ia,ea){return E(ia,ea,function(oa,ta,ra){k.pcCheck(ra,2,2);if(k.isArray(ra[0]))return k.toNumber(ra[1])>=
ra[0].length?ra[0].slice(0):ra[0].slice(0,k.toNumber(ra[1]));if(k.isImmutableArray(ra[0]))return k.toNumber(ra[1])>=ra[0].length()?ra[0].slice(0):ra[0].slice(0,k.toNumber(ra[1]));throw Error("Top cannot accept this parameter type");})};ka.first=function(ia,ea){return E(ia,ea,function(oa,ta,ra){k.pcCheck(ra,1,1);return k.isArray(ra[0])?0===ra[0].length?null:ra[0][0]:k.isImmutableArray(ra[0])?0===ra[0].length()?null:ra[0].get(0):null})};ka.sort=function(ia,ea){return E(ia,ea,function(oa,ta,ra){k.pcCheck(ra,
1,2);oa=ra[0];k.isImmutableArray(oa)&&(oa=oa.toArray());if(!1===k.isArray(oa))throw Error("Illegal Argument");if(1<ra.length){if(!1===k.isFunctionParameter(ra[1]))throw Error("Illegal Argument");var aa=ja(ra[1]);return oa=Q(oa,function(sa,wa){return aa(sa,wa)})}if(0===oa.length)return[];ra={};for(ta=0;ta<oa.length;ta++){var da=Y(oa[ta]);""!==da&&(ra[da]=!0)}if(!0===ra.Array||!0===ra.Dictionary||!0===ra.Feature||!0===ra.Point||!0===ra.Polygon||!0===ra.Polyline||!0===ra.Multipoint||!0===ra.Extent||
!0===ra.Function)return oa.slice(0);ta=0;da="";for(var J in ra)ta++,da=J;return oa=1<ta||"String"===da?Q(oa,function(sa,wa){if(null===sa||void 0===sa||sa===k.voidOperation)return null===wa||void 0===wa||wa===k.voidOperation?0:1;if(null===wa||void 0===wa||wa===k.voidOperation)return-1;var U=k.toString(sa),La=k.toString(wa);return U<La?-1:U===La?0:1}):"Number"===da?Q(oa,function(sa,wa){return sa-wa}):"Boolean"===da?Q(oa,function(sa,wa){return sa===wa?0:wa?-1:1}):"Date"===da?Q(oa,function(sa,wa){return wa-
sa}):oa.slice(0)})};for(var qa in ka)ka[qa]={value:new k.NativeFunction(ka[qa]),valueset:!0,node:null};var na=function(){};na.prototype=ka;na.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};na.prototype.pi={value:Math.PI,valueset:!0,node:null};p.functionHelper={fixSpatialReference:k.fixSpatialReference,parseArguments:D,standardFunction:E};p.extend=R;R([r]);p.executeScript=function(ia,ea){var oa=ea.spatialReference;if(null===oa||void 0===oa)oa=new C({wkid:102100});var ta=
ea.vars,ra=ea.customfunctions,aa=new na;ta||(ta={});ra||(ra={});var da=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});da.immutable=!1;aa.textformatting={value:da,valueset:!0,node:null};for(var J in ra)aa[J]={value:new k.NativeFunction(ra[J]),"native":!0,valueset:!0,node:null};for(J in ta)aa[J]=ta[J]&&"esri.Graphic"===ta[J].declaredClass?{value:n.createFromGraphic(ta[J]),valueset:!0,node:null}:{value:ta[J],valueset:!0,node:null};oa=F({spatialReference:oa,
globalScope:aa,localScope:null,console:ea.console?ea.console:ma,lrucache:ea.lrucache,interceptor:ea.interceptor,depthCounter:1},ia.body[0].body);oa instanceof k.ReturnResult&&(oa=oa.value);oa instanceof k.ImplicitResult&&(oa=oa.value);oa===k.voidOperation&&(oa=null);if(oa===k.breakResult)throw Error("Cannot return BREAK");if(oa===k.continueResult)throw Error("Cannot return CONTINUE");if(oa instanceof m)throw Error("Cannot return FUNCTION");if(oa instanceof k.NativeFunction)throw Error("Cannot return FUNCTION");
return oa};p.extractFieldLiterals=function(ia,ea){void 0===ea&&(ea=!1);return e.findFieldLiterals(ia)};p.extractExpectedFieldLiterals=function(ia){return e.findExpectedFieldLiterals(ia)};p.validateScript=function(ia,ea){return e.validateScript(ia,ea,"simple")};p.referencesMember=function(ia,ea){return e.referencesMember(ia,ea)};p.referencesFunction=function(ia,ea){return e.referencesFunction(ia,ea)};p.findFunctionCalls=function(ia){return e.findFunctionCalls(ia)}})},"esri/arcade/parser":function(){define(["require",
"exports","./treeAnalysis","./lib/arcade-parser"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});p.referencesFunction=p.referencesMember=p.extractExpectedFieldLiterals=p.validateScript=p.extractFieldLiterals=p.scriptCheck=p.parseScript=void 0;p.parseScript=function(g,n){void 0===n&&(n=[]);var m=d.parse("function _() { "+g+"\n}");if(null===m.body||void 0===m.body)throw Error("No formula provided.");if(0===m.body.length)throw Error("No formula provided.");if(0===m.body.length)throw Error("No formula provided.");
if("BlockStatement"!==m.body[0].body.type)throw Error("Invalid formula content.");var f=a.validateLanguage(m);if(""!==f)throw Error(f);a.findScriptDependencies(m,n);return m};p.scriptCheck=function(g,n,m,f,h){var k=[];g="function _() { \n"+g+"\n}";try{var e=d.parse(g,{tolerant:!0,loc:!0,range:!0}),r=e.errors;if(0<r.length)for(var q=0;q<r.length;q++)k.push({line:r[q].lineNumber-2,character:r[q].column,reason:r[q].description});var u=a.checkScript(e,n,m,f,h);for(n=0;n<u.length;n++)u[n].line-=2,u[n].range&&
(u[n].range=[u[n][0]-15,u[n][1]-15]),u[n].loc&&(u[n].loc.start.line-=2,u[n].loc.end.line-=2),k.push(u[n])}catch(x){try{if("Unexpected token }"===x.description){var v=g.split("\n").length;x.lineNumber===v?(x.index=g.length-1,k.push({line:x.lineNumber-4,character:x.column,reason:"Unexpected end of script"})):(x.index=g.length-1,k.push({line:x.lineNumber-2,character:x.column,reason:"Unexpected end of script"}))}else k.push({line:x.lineNumber-2,character:x.column,reason:x.description})}catch(z){}}return k};
p.extractFieldLiterals=function(g,n){void 0===n&&(n=!1);return a.findFieldLiterals(g)};p.validateScript=function(g,n,m){return a.validateScript(g,n,m)};p.extractExpectedFieldLiterals=function(g){return a.findExpectedFieldLiterals(g)};p.referencesMember=function(g,n){return a.referencesMember(g,n)};p.referencesFunction=function(g,n){return a.referencesFunction(g,n)}})},"esri/arcade/lib/arcade-parser":function(){var B=this&&this.__createBinding||(Object.create?function(a,d,g,n){void 0===n&&(n=g);Object.defineProperty(a,
n,{enumerable:!0,get:function(){return d[g]}})}:function(a,d,g,n){void 0===n&&(n=g);a[n]=d[g]}),p=this&&this.__exportStar||function(a,d){for(var g in a)"default"===g||Object.prototype.hasOwnProperty.call(d,g)||B(d,a,g)};define("require exports ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(a,d,g,n,m,f,h,k){Object.defineProperty(d,"__esModule",{value:!0});d.version=d.Syntax=d.tokenize=d.parse=void 0;d.parse=function(e,r,q){var u=null,v=function(y,c){q&&q(y,c);
u&&u.visit(y,c)},x="function"===typeof q?v:void 0,z=!1;if(r){z="boolean"===typeof r.comment&&r.comment;var A="boolean"===typeof r.attachComment&&r.attachComment;if(z||A)u=new g.CommentHandler,u.attach=A,r.comment=!0,x=v}e=new n.Parser(e,r,x);r=e.parseScript();z&&u&&(r.comments=u.comments);e.config.tokens&&(r.tokens=e.tokens);e.config.tolerant&&(r.errors=e.errorHandler.errors);return r};d.tokenize=function(e,r,q){e=new m.Tokenizer(e,r);r=[];var u=void 0;try{for(;;){var v=e.getNextToken();if(!v)break;
q&&(v=q(v));r.push(v)}}catch(x){e.errorHandler.tolerate(x)}e.errorHandler.tolerant&&(u=e.errors());return{tokens:r,errors:u}};Object.defineProperty(d,"Syntax",{enumerable:!0,get:function(){return f.Syntax}});p(h,d);p(k,d);d.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.CommentHandler=void 0;B=function(){function d(){this.attach=!1;this.comments=[];this.stack=[];this.leading=
[];this.trailing=[]}d.prototype.insertInnerComments=function(g,n){if(g.type===a.Syntax.BlockStatement&&0===g.body.length){for(var m=[],f=this.leading.length-1;0<=f;--f){var h=this.leading[f];n.end.offset>=h.start&&(m.unshift(h.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}m.length&&(g.innerComments=m)}};d.prototype.findTrailingComments=function(g){var n=[];if(0<this.trailing.length){for(var m=this.trailing.length-1;0<=m;--m){var f=this.trailing[m];f.start>=g.end.offset&&n.unshift(f.comment)}this.trailing.length=
0;return n}(m=this.stack[this.stack.length-1])&&m.node.trailingComments&&(f=m.node.trailingComments[0])&&f.range[0]>=g.end.offset&&(n=m.node.trailingComments,delete m.node.trailingComments);return n};d.prototype.findLeadingComments=function(g){for(var n=[],m;0<this.stack.length;){var f=this.stack[this.stack.length-1];if(f&&f.start>=g.start.offset)m=f.node,this.stack.pop();else break}if(m){for(var h=(m.leadingComments?m.leadingComments.length:0)-1;0<=h;--h)f=m.leadingComments[h],f.range[1]<=g.start.offset&&
(n.unshift(f),m.leadingComments.splice(h,1));m.leadingComments&&0===m.leadingComments.length&&delete m.leadingComments;return n}for(h=this.leading.length-1;0<=h;--h)f=this.leading[h],f.start<=g.start.offset&&(n.unshift(f.comment),this.leading.splice(h,1));return n};d.prototype.visitNode=function(g,n){if(!(g.type===a.Syntax.Program&&0<g.body.length)){this.insertInnerComments(g,n);var m=this.findTrailingComments(n),f=this.findLeadingComments(n);0<f.length&&(g.leadingComments=f);0<m.length&&(g.trailingComments=
m);this.stack.push({node:g,start:n.start.offset})}};d.prototype.visitComment=function(g,n){this.comments.push(g);if(this.attach){var m={comment:{type:g.type,value:g.value,range:[n.start.offset,n.end.offset]},start:n.start.offset};g.loc&&(m.comment.loc=g.loc);this.leading.push(m);this.trailing.push(m)}};d.prototype.visit=function(g,n){"Line"===g.type||"Block"===g.type?this.visitComment(g,n):this.attach&&this.visitNode(g,n)};return d}();p.CommentHandler=B})},"esri/arcade/lib/syntax":function(){define(["require",
"exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.Syntax=void 0;p.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},
"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(B,p,a,d,g,n,m,f,h){Object.defineProperty(p,"__esModule",{value:!0});p.Parser=void 0;B=function(){function k(e,r,q){void 0===r&&(r={});this.config={range:"boolean"===typeof r.range&&r.range,loc:"boolean"===typeof r.loc&&r.loc,source:null,tokens:"boolean"===typeof r.tokens&&r.tokens,comment:"boolean"===typeof r.comment&&r.comment,tolerant:"boolean"===
typeof r.tolerant&&r.tolerant,globalReturn:!!r.globalReturn};this.config.loc&&r.source&&null!==r.source&&(this.config.source=String(r.source));this.delegate=q;this.errorHandler=new d.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new m.Scanner(e,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,
"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,
column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}k.prototype.tolerateError=function(e){for(var r=[],q=1;q<arguments.length;q++)r[q-1]=arguments[q];var u=r.slice();r=e.replace(/%(\d)/g,function(v,x){a.assert(x<u.length,"Message reference must be in range");return u[x]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,r)};k.prototype.unexpectedTokenError=
function(e,r){var q=r||g.Messages.UnexpectedToken;if(e){r||(q=2===e.type?g.Messages.UnexpectedEOS:3===e.type?g.Messages.UnexpectedIdentifier:6===e.type?g.Messages.UnexpectedNumber:8===e.type?g.Messages.UnexpectedString:10===e.type?g.Messages.UnexpectedTemplate:g.Messages.UnexpectedToken);var u=e.value.toString()}else u="ILLEGAL";q=q.replace("%0",u);return e&&"number"===typeof e.lineNumber?this.errorHandler.createError(e.start,e.lineNumber,e.start-(this.lastMarker.index-this.lastMarker.column)+1,q):
this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,q)};k.prototype.throwUnexpectedToken=function(e,r){throw this.unexpectedTokenError(e,r);};k.prototype.tolerateUnexpectedToken=function(e,r){this.errorHandler.tolerate(this.unexpectedTokenError(e,r))};k.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e&&0<e.length&&this.delegate)for(var r=0;r<e.length;++r){var q=e[r],u=new n.Comment(q.multiLine?"Block":
"Line",this.scanner.source.slice(q.slice[0],q.slice[1]));this.config.range&&(u.range=q.range);this.config.loc&&(u.loc=q.loc);this.delegate(u,{start:{line:q.loc.start.line,column:q.loc.start.column,offset:q.range[0]},end:{line:q.loc.end.line,column:q.loc.end.column,offset:q.range[1]}})}}else this.scanner.scanComments()};k.prototype.peekAhead=function(e){var r=this,q=this.scanner.saveState();e.call(this,function(){r.scanner.scanComments();return r.scanner.lex()});this.scanner.restoreState(q)};k.prototype.getTokenRaw=
function(e){return this.scanner.source.slice(e.start,e.end)};k.prototype.convertToken=function(e){var r={type:h.TokenName[e.type],value:this.getTokenRaw(e)};this.config.range&&(r.range=[e.start,e.end]);this.config.loc&&(r.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===e.type&&(r.regex={pattern:e.pattern,flags:e.flags});return r};k.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=
this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var r=this.scanner.lex();this.hasLineTerminator=e.lineNumber!==r.lineNumber;this.lookahead=r;this.config.tokens&&2!==r.type&&this.tokens.push(this.convertToken(r));
return e};k.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};k.prototype.startNode=function(e,r){void 0===r&&(r=0);var q=e.start-e.lineStart,u=e.lineNumber;0>q&&(q+=r,u--);return{index:e.start,line:u,column:q}};k.prototype.finalize=function(e,r){this.config.range&&(r.range=[e.index,this.lastMarker.index]);this.config.loc&&(r.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},
this.config.source&&(r.loc.source=this.config.source));this.delegate&&this.delegate(r,{start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return r};k.prototype.expect=function(e){var r=this.nextToken();7===r.type&&r.value===e||this.throwUnexpectedToken(r)};k.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===
e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,g.Messages.UnexpectedToken)}else this.expect(",")};k.prototype.expectKeyword=function(e){var r=this.nextToken();4===r.type&&r.value.toString().toLowerCase()===e.toLowerCase()||this.throwUnexpectedToken(r)};k.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e};k.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===e.toLowerCase()};
k.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e};k.prototype.matchAssign=function(){return 7!==this.lookahead.type?!1:n.AssignmentOperators.includes(this.lookahead.value)};k.prototype.isolateCoverGrammar=function(e){var r=this.context.isBindingElement,q=this.context.isAssignmentTarget,u=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;
e=e.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=r;this.context.isAssignmentTarget=q;this.context.firstCoverInitializedNameError=u;return e};k.prototype.inheritCoverGrammar=function(e){var r=this.context.isBindingElement,q=this.context.isAssignmentTarget,u=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=
null;e=e.call(this);this.context.isBindingElement=this.context.isBindingElement&&r;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&q;this.context.firstCoverInitializedNameError=u||this.context.firstCoverInitializedNameError;return e};k.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,
this.lastMarker.column=this.startMarker.column)};k.prototype.parsePrimaryExpression=function(){var e=this.createNode();switch(this.lookahead.type){case 3:e=this.finalize(e,new n.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var r=this.nextToken();var q=this.getTokenRaw(r);e=this.finalize(e,new n.Literal(r.value,q));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;r=this.nextToken();q=this.getTokenRaw(r);
e=this.finalize(e,new n.Literal("true"===r.value.toString().toLowerCase(),q));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;r=this.nextToken();q=this.getTokenRaw(r);e=this.finalize(e,new n.Literal(null,q));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;e=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":e=
this.inheritCoverGrammar(this.parseObjectInitializer);break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=this.throwUnexpectedToken(this.nextToken());break;default:e=this.throwUnexpectedToken(this.nextToken())}return e};k.prototype.parseArrayInitializer=function(){var e=this.createNode(),r=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),r.push(null)):(r.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),
this.match("]")||this.expect(","));this.expect("]");return this.finalize(e,new n.ArrayExpression(r))};k.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:e=this.finalize(e,new n.Literal(r.value,this.getTokenRaw(r)));break;case 3:case 1:case 5:case 4:e=this.finalize(e,new n.Identifier(r.value));break;default:e=this.throwUnexpectedToken(r)}return e};k.prototype.parseObjectProperty=function(){var e=this.createNode(),r=this.lookahead,q=
!1,u=!1,v=null;if(3===r.type){var x=r.value;this.nextToken();q=this.match("[");v=this.finalize(e,new n.Identifier(x))}else this.match("*")?this.nextToken():(q=this.match("["),v=this.parseObjectPropertyKey());v||this.throwUnexpectedToken(this.lookahead);x=null;this.match(":")?(this.nextToken(),x=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===r.type?(x=this.finalize(e,new n.Identifier(r.value)),u=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(e,new n.Property("init",
v,q,x,!1,u))};k.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var r=[];!this.match("}");)r.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(e,new n.ObjectExpression(r))};k.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),r=this.nextToken();return this.finalize(e,new n.TemplateElement({raw:r.value,
cooked:r.cooked},r.tail))};k.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),r=this.nextToken();return this.finalize(e,new n.TemplateElement({raw:r.value,cooked:r.cooked},r.tail))};k.prototype.parseTemplateLiteral=function(){var e=this.createNode(),r=[],q=[],u=this.parseTemplateHead();for(q.push(u);!u.tail;)r.push(this.parseExpression()),u=this.parseTemplateElement(),q.push(u);return this.finalize(e,new n.TemplateLiteral(q,r))};
k.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var e=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");this.context.isBindingElement=!1;return e};k.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var r=this.isolateCoverGrammar(this.parseAssignmentExpression);e.push(r);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return e};k.prototype.isIdentifierName=
function(e){return 3===e.type||4===e.type||1===e.type||5===e.type};k.prototype.parseIdentifierName=function(){var e=this.createNode(),r=this.nextToken();this.isIdentifierName(r)||this.throwUnexpectedToken(r);return this.finalize(e,new n.Identifier(r.value))};k.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,r=this.context.allowIn;this.context.allowIn=!0;for(var q=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=
!1;this.context.isAssignmentTarget=!1;var u=this.parseArguments();q=this.finalize(this.startNode(e),new n.CallExpression(q,u))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),u=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),q=this.finalize(this.startNode(e),new n.ComputedMemberExpression(q,u));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),u=this.parseIdentifierName(),
q=this.finalize(this.startNode(e),new n.StaticMemberExpression(q,u));else break;this.context.allowIn=r;return q};k.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),r=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var q=this.isolateCoverGrammar(this.parseExpression);
this.expect("]");r=this.finalize(e,new n.ComputedMemberExpression(r,q))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),q=this.parseIdentifierName(),r=this.finalize(e,new n.StaticMemberExpression(r,q));else break;return r};k.prototype.parseUpdateExpression=function(){var e=this.lookahead;if(this.match("++")||this.match("--")){e=this.startNode(e);var r=this.nextToken();var q=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||
this.tolerateError(g.Messages.InvalidLHSInAssignment);q=this.finalize(e,new n.UpdateExpression(r.value,q,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else q=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,r=this.nextToken().value,
q=this.finalize(this.startNode(e),new n.UpdateExpression(r,q,!1)));return q};k.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var e=this.startNode(this.lookahead),r=this.nextToken();var q=this.inheritCoverGrammar(this.parseUnaryExpression);q=this.finalize(e,new n.UnaryExpression(r.value,q));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else q=this.parseUpdateExpression();return q};k.prototype.binaryPrecedence=
function(e){var r=e.value;return 7===e.type?this.operatorPrecedence[r]||0:4===e.type?this.context.allowIn&&"in"===r?12:0:0};k.prototype.parseBinaryExpression=function(){var e=this.lookahead,r=this.inheritCoverGrammar(this.parseUnaryExpression),q=this.lookahead,u=this.binaryPrecedence(q);if(0<u){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=[e,this.lookahead];var v=this.inheritCoverGrammar(this.parseUnaryExpression);q=[r,q.value,v];for(var x=[u];;){u=this.binaryPrecedence(this.lookahead);
if(0>=u)break;for(;2<q.length&&u<=x[x.length-1];){v=q.pop();var z=q.pop();x.pop();r=q.pop();e.pop();var A=e[e.length-1],y=this.startNode(A,A.lineStart);q.push(this.finalize(y,new n.BinaryExpression(z,r,v)))}q.push(this.nextToken().value);x.push(u);e.push(this.lookahead);q.push(this.inheritCoverGrammar(this.parseUnaryExpression))}u=q.length-1;r=q[u];for(z=e.pop();1<u;){A=e.pop();if(!A)break;y=this.startNode(A,z&&z.lineStart);z=q[u-1];r=this.finalize(y,new n.BinaryExpression(z,q[u-2],r));u-=2;z=A}}return r};
k.prototype.parseAssignmentExpression=function(){var e=this.lookahead,r=e,q=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);r=this.nextToken();r=r.value;var u=this.isolateCoverGrammar(this.parseAssignmentExpression);q=this.finalize(this.startNode(e),new n.AssignmentExpression(r,q,u));this.context.firstCoverInitializedNameError=
null}return q};k.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};k.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var e=this.parseFunctionDeclaration();break;default:e=this.parseStatement()}else e=this.parseStatement();return e};k.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var r=
[];!this.match("}");)r.push(this.parseStatementListItem());this.expect("}");return this.finalize(e,new n.BlockStatement(r))};k.prototype.parseObjectStatement=function(){var e=this.createNode(),r=this.parseObjectInitializer();return this.finalize(e,new n.ExpressionStatement(r))};k.prototype.parseBlockOrObjectStatement=function(){var e="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(r){var q=r();if(3===q.type||8===q.type)q=r(),7===q.type&&
":"===q.value&&(e=!0)});return e?this.parseObjectStatement():this.parseBlock()};k.prototype.parseVariableIdentifier=function(){var e=this.createNode(),r=this.nextToken();3!==r.type&&this.throwUnexpectedToken(r,g.Messages.IdentiferExpected);return this.finalize(e,new n.Identifier(r.value))};k.prototype.parseVariableDeclaration=function(e){var r=this.createNode(),q=this.parseVariableIdentifier(),u=null;this.match("\x3d")?(this.nextToken(),u=this.isolateCoverGrammar(this.parseAssignmentExpression)):
q.type===f.Syntax.Identifier||e.inFor||this.expect("\x3d");return this.finalize(r,new n.VariableDeclarator(q,u))};k.prototype.parseVariableDeclarationList=function(e){for(var r=[this.parseVariableDeclaration(e)];this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(e));return r};k.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var r=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(e,new n.VariableDeclaration(r,
"var"))};k.prototype.parseEmptyStatement=function(){var e=this.createNode();this.expect(";");return this.finalize(e,new n.EmptyStatement)};k.prototype.parseExpressionStatement=function(){var e=this.createNode(),r=this.parseExpression();this.consumeSemicolon();return this.finalize(e,new n.ExpressionStatement(r))};k.prototype.parseIfClause=function(){var e=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var r=this.parseStatement();this.context.curlyParsing=e;return r};k.prototype.parseIfStatement=
function(){var e=this.createNode(),r=null;this.expectKeyword("if");this.expect("(");var q=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var u=this.finalize(this.createNode(),new n.EmptyStatement)}else this.expect(")"),u=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause());return this.finalize(e,new n.IfStatement(q,u,r))};k.prototype.parseForStatement=function(){var e=null,r=null,q=null,u=null,v=
null,x=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var z=this.createNode();this.nextToken();var A=this.context.allowIn;this.context.allowIn=!1;var y=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=A;1===y.length&&this.matchKeyword("in")?(y[0].init&&this.tolerateError(g.Messages.ForInOfLoopInitializer,"for-in"),u=this.finalize(z,new n.VariableDeclaration(y,"var")),this.nextToken(),v=this.parseExpression()):
(e=this.finalize(z,new n.VariableDeclaration(y,"var")),this.expect(";"))}else{z=this.context.isBindingElement;y=this.context.isAssignmentTarget;var c=this.context.firstCoverInitializedNameError;A=this.context.allowIn;this.context.allowIn=!1;e=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=A;this.matchKeyword("in")?(this.context.isAssignmentTarget&&e.type!==f.Syntax.AssignmentExpression||this.tolerateError(g.Messages.InvalidLHSInForIn),this.nextToken(),u=e,v=this.parseExpression(),
e=null):(this.context.isBindingElement=z,this.context.isAssignmentTarget=y,this.context.firstCoverInitializedNameError=c,this.expect(";"))}u||(this.match(";")||(r=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(q=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),A=this.finalize(this.createNode(),new n.EmptyStatement)):(this.expect(")"),z=this.context.inIteration,y=this.context.curlyParsing,
this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",A=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=y,this.context.inIteration=z);return u&&v?this.finalize(x,new n.ForInStatement(u,v,A)):this.finalize(x,new n.ForStatement(e,r,q,A))};k.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(e,new n.ContinueStatement)};k.prototype.parseBreakStatement=function(){var e=
this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(e,new n.BreakStatement)};k.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(g.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var r=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();
return this.finalize(e,new n.ReturnStatement(r))};k.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var e=this.parseExpressionStatement();break;case 7:e=this.lookahead.value;e="{"===e?this.parseBlockOrObjectStatement():"("===e?this.parseExpressionStatement():";"===e?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":e=this.parseBreakStatement();break;case "continue":e=
this.parseContinueStatement();break;case "for":e=this.parseForStatement();break;case "function":e=this.parseFunctionDeclaration();break;case "if":e=this.parseIfStatement();break;case "return":e=this.parseReturnStatement();break;case "var":e=this.parseVariableStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e};k.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var r=this.context.inIteration,
q=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var u=[];2!==this.lookahead.type&&!this.match("}");)u.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=r;this.context.inFunctionBody=q;return this.finalize(e,new n.BlockStatement(u))};k.prototype.parseFormalParameters=function(){var e=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){e.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");
if(this.match(")"))break}this.expect(")");return e};k.prototype.parseFunctionDeclaration=function(){var e=this.createNode();this.expectKeyword("function");var r=this.parseVariableIdentifier(),q=this.parseFormalParameters(),u=this.parseFunctionSourceElements();return this.finalize(e,new n.FunctionDeclaration(r,q,u))};k.prototype.parseScript=function(){for(var e=this.createNode(),r=[];2!==this.lookahead.type;)r.push(this.parseStatementListItem());return this.finalize(e,new n.Program(r))};return k}();
p.Parser=B})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.assert=void 0;p.assert=function(a,d){if(!a)throw Error("ASSERT: "+d);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.ErrorHandler=void 0;var a=function(){function d(){this.errors=[];this.tolerant=!1}d.prototype.recordError=function(g){this.errors.push(g)};d.prototype.tolerate=
function(g){if(this.tolerant)this.recordError(g);else throw g;};d.prototype.constructError=function(g,n){var m=Error(g);try{throw m;}catch(f){Object.create&&Object.defineProperty&&(m=Object.create(f),Object.defineProperty(m,"column",{value:n}))}return m};d.prototype.createError=function(g,n,m,f){m=this.constructError("Line "+n+": "+f,m);m.index=g;m.lineNumber=n;m.description=f;return m};d.prototype.throwError=function(g,n,m,f){throw this.createError(g,n,m,f);};d.prototype.tolerateError=function(g,
n,m,f){g=this.createError(g,n,m,f);if(this.tolerant)this.recordError(g);else throw g;};return d}();p.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.Messages=void 0;p.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",
IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},
"esri/arcade/lib/nodes":function(){var B=this&&this.__extends||function(){var p=function(a,d){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,n){g.__proto__=n}||function(g,n){for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(g[m]=n[m])};return p(a,d)};return function(a,d){function g(){this.constructor=a}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");p(a,d);a.prototype=null===d?Object.create(d):(g.prototype=
d.prototype,new g)}}();define(["require","exports","./syntax"],function(p,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.VariableDeclarator=a.VariableDeclaration=a.UpdateExpression=a.UpdateOperators=a.UnaryExpression=a.UnaryOperators=a.TemplateLiteral=a.TemplateElement=a.Program=a.ReturnStatement=a.Property=a.ObjectExpression=a.Literal=a.IfStatement=a.Identifier=a.FunctionDeclaration=a.ForStatement=a.ForInStatement=a.ExpressionStatement=a.EmptyStatement=a.ContinueStatement=a.StaticMemberExpression=
a.ComputedMemberExpression=a.CallExpression=a.BreakStatement=a.BlockStatement=a.BinaryExpression=a.BinaryOperators=a.LogicalOperators=a.AssignmentExpression=a.AssignmentOperators=a.ArrayExpression=a.Comment=void 0;p=function(){return function(){}}();var g=function(n){function m(f,h){var k=n.call(this)||this;k.type=f;k.value=h;return k}B(m,n);return m}(p);a.Comment=g;g=function(n){function m(f){var h=n.call(this)||this;h.elements=f;h.type=d.Syntax.ArrayExpression;return h}B(m,n);return m}(p);a.ArrayExpression=
g;a.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");g=function(n){function m(f,h,k){var e=n.call(this)||this;e.operator=f;e.left=h;e.right=k;e.type=d.Syntax.AssignmentExpression;return e}B(m,n);return m}(p);a.AssignmentExpression=g;a.LogicalOperators=["||","\x26\x26"];a.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");g=function(n){function m(f,h,k){var e=n.call(this)||this;e.operator=f;e.left=h;
e.right=k;e.type=a.LogicalOperators.includes(f)?d.Syntax.LogicalExpression:d.Syntax.BinaryExpression;return e}B(m,n);return m}(p);a.BinaryExpression=g;g=function(n){function m(f){var h=n.call(this)||this;h.body=f;h.type=d.Syntax.BlockStatement;return h}B(m,n);return m}(p);a.BlockStatement=g;g=function(n){function m(){var f=null!==n&&n.apply(this,arguments)||this;f.type=d.Syntax.BreakStatement;return f}B(m,n);return m}(p);a.BreakStatement=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.callee=
f;k.args=h;k.type=d.Syntax.CallExpression;k.arguments=h;return k}B(m,n);return m}(p);a.CallExpression=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.object=f;k.property=h;k.type=d.Syntax.MemberExpression;k.computed=!0;return k}B(m,n);return m}(p);a.ComputedMemberExpression=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.object=f;k.property=h;k.type=d.Syntax.MemberExpression;k.computed=!1;return k}B(m,n);return m}(p);a.StaticMemberExpression=g;g=function(n){function m(){var f=
null!==n&&n.apply(this,arguments)||this;f.type=d.Syntax.ContinueStatement;return f}B(m,n);return m}(p);a.ContinueStatement=g;g=function(n){function m(){var f=null!==n&&n.apply(this,arguments)||this;f.type=d.Syntax.EmptyStatement;return f}B(m,n);return m}(p);a.EmptyStatement=g;g=function(n){function m(f){var h=n.call(this)||this;h.expression=f;h.type=d.Syntax.ExpressionStatement;return h}B(m,n);return m}(p);a.ExpressionStatement=g;g=function(n){function m(f,h,k){var e=n.call(this)||this;e.left=f;e.right=
h;e.body=k;e.type=d.Syntax.ForInStatement;e.each=!1;return e}B(m,n);return m}(p);a.ForInStatement=g;g=function(n){function m(f,h,k,e){var r=n.call(this)||this;r.init=f;r.test=h;r.update=k;r.body=e;r.type=d.Syntax.ForStatement;return r}B(m,n);return m}(p);a.ForStatement=g;g=function(n){function m(f,h,k){var e=n.call(this)||this;e.id=f;e.params=h;e.body=k;e.type=d.Syntax.FunctionDeclaration;e.generator=!1;e.expression=!1;e.async=!1;return e}B(m,n);return m}(p);a.FunctionDeclaration=g;g=function(n){function m(f){var h=
n.call(this)||this;h.name=f;h.type=d.Syntax.Identifier;return h}B(m,n);return m}(p);a.Identifier=g;g=function(n){function m(f,h,k){var e=n.call(this)||this;e.test=f;e.consequent=h;e.alternate=k;e.type=d.Syntax.IfStatement;return e}B(m,n);return m}(p);a.IfStatement=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.value=f;k.raw=h;k.type=d.Syntax.Literal;return k}B(m,n);return m}(p);a.Literal=g;g=function(n){function m(f){var h=n.call(this)||this;h.properties=f;h.type=d.Syntax.ObjectExpression;
return h}B(m,n);return m}(p);a.ObjectExpression=g;g=function(n){function m(f,h,k,e,r,q){var u=n.call(this)||this;u.kind=f;u.key=h;u.computed=k;u.value=e;u.method=r;u.shorthand=q;u.type=d.Syntax.Property;return u}B(m,n);return m}(p);a.Property=g;g=function(n){function m(f){var h=n.call(this)||this;h.argument=f;h.type=d.Syntax.ReturnStatement;return h}B(m,n);return m}(p);a.ReturnStatement=g;g=function(n){function m(f){var h=n.call(this)||this;h.body=f;h.type=d.Syntax.Program;return h}B(m,n);return m}(p);
a.Program=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.value=f;k.tail=h;k.type=d.Syntax.TemplateElement;return k}B(m,n);return m}(p);a.TemplateElement=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.quasis=f;k.expressions=h;k.type=d.Syntax.TemplateLiteral;return k}B(m,n);return m}(p);a.TemplateLiteral=g;a.UnaryOperators=["-","+","!","~"];g=function(n){function m(f,h){var k=n.call(this)||this;k.operator=f;k.argument=h;k.type=d.Syntax.UnaryExpression;k.prefix=!0;return k}B(m,
n);return m}(p);a.UnaryExpression=g;a.UpdateOperators=["++","--"];g=function(n){function m(f,h,k){var e=n.call(this)||this;e.operator=f;e.argument=h;e.prefix=k;e.type=d.Syntax.UpdateExpression;return e}B(m,n);return m}(p);a.UpdateExpression=g;g=function(n){function m(f,h){var k=n.call(this)||this;k.declarations=f;k.kind=h;k.type=d.Syntax.VariableDeclaration;return k}B(m,n);return m}(p);a.VariableDeclaration=g;p=function(n){function m(f,h){var k=n.call(this)||this;k.id=f;k.init=h;k.type=d.Syntax.VariableDeclarator;
return k}B(m,n);return m}(p);a.VariableDeclarator=p})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});p.Scanner=void 0;B=function(){function n(m,f){this.source=m;this.errorHandler=f;this.isModule=this.trackComment=!1;this.length=m.length;this.index=0;this.lineNumber=0<m.length?1:0;this.lineStart=0;this.curlyStack=[]}n.prototype.saveState=function(){return{index:this.index,
lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};n.prototype.restoreState=function(m){this.index=m.index;this.lineNumber=m.lineNumber;this.lineStart=m.lineStart;this.curlyStack=m.curlyStack};n.prototype.eof=function(){return this.index>=this.length};n.prototype.throwUnexpectedToken=function(m){void 0===m&&(m=g.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)};n.prototype.tolerateUnexpectedToken=
function(m){void 0===m&&(m=g.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)};n.prototype.skipSingleLineComment=function(m){var f=[],h=0,k=null;this.trackComment&&(f=[],h=this.index-m,k={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{line:0,column:0}});for(;!this.eof();){var e=this.source.charCodeAt(this.index);++this.index;if(d.Character.isLineTerminator(e))return k&&(k.end={line:this.lineNumber,column:this.index-
this.lineStart-1},m={multiLine:!1,slice:[h+m,this.index-1],range:[h,this.index-1],loc:k},f.push(m)),13===e&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,f}k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart},m={multiLine:!1,slice:[h+m,this.index],range:[h,this.index],loc:k},f.push(m));return f};n.prototype.skipMultiLineComment=function(){var m=[],f=0,h=null;this.trackComment&&(f=this.index-2,h={start:{line:this.lineNumber,column:this.index-
this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var k=this.source.charCodeAt(this.index);if(d.Character.isLineTerminator(k))13===k&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===k&&47===this.source.charCodeAt(this.index+1))return this.index+=2,h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index-2],range:[f,this.index],loc:h},m.push(f)),m;++this.index}}h&&
(h.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index],range:[f,this.index],loc:h},m.push(f));this.tolerateUnexpectedToken();return m};n.prototype.scanComments=function(){var m=null;this.trackComment&&(m=[]);for(var f=0===this.index;!this.eof();){var h=this.source.charCodeAt(this.index);if(d.Character.isWhiteSpace(h))++this.index;else if(d.Character.isLineTerminator(h))++this.index,13===h&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,
this.lineStart=this.index,f=!0;else if(47===h)if(h=this.source.charCodeAt(this.index+1),47===h)this.index+=2,h=this.skipSingleLineComment(2),m&&(m=m.concat(h)),f=!0;else if(42===h)this.index+=2,h=this.skipMultiLineComment(),m&&(m=m.concat(h));else break;else if(f&&45===h)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,h=this.skipSingleLineComment(3),m&&(m=m.concat(h));else break;else if(60!==h||this.isModule)break;else if("!--"===this.source.slice(this.index+
1,this.index+4))this.index+=4,h=this.skipSingleLineComment(4),m&&(m=m.concat(h));else break}return m};n.prototype.isKeyword=function(m){m=m.toLowerCase();switch(m.length){case 2:return"if"===m||"in"===m;case 3:return"var"===m||"for"===m;case 4:return"else"===m;case 5:return"break"===m;case 6:return"return"===m;case 8:return"function"===m||"continue"===m;default:return!1}};n.prototype.codePointAt=function(m){var f=this.source.charCodeAt(m);55296<=f&&56319>=f&&(m=this.source.charCodeAt(m+1),56320<=
m&&57343>=m&&(f=1024*(f-55296)+m-56320+65536));return f};n.prototype.scanHexEscape=function(m){m="u"===m?4:2;for(var f=0,h=0;h<m;++h)if(!this.eof()&&d.Character.isHexDigit(this.source.charCodeAt(this.index)))f=16*f+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(f)};n.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],f=0;for("}"===m&&this.throwUnexpectedToken();!this.eof();){m=this.source[this.index++];if(!d.Character.isHexDigit(m.charCodeAt(0)))break;
f=16*f+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<f||"}"!==m)&&this.throwUnexpectedToken();return d.Character.fromCodePoint(f)};n.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var f=this.source.charCodeAt(this.index);if(92===f||55296<=f&&57343>f)return this.index=m,this.getComplexIdentifier();if(d.Character.isIdentifierPart(f))++this.index;else break}return this.source.slice(m,this.index)};n.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),
f=d.Character.fromCodePoint(m);this.index+=f.length;if(92===m){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var h=this.scanUnicodeCodePointEscape()}else h=this.scanHexEscape("u"),null!==h&&"\\"!==h&&d.Character.isIdentifierStart(h.charCodeAt(0))||this.throwUnexpectedToken();f=h}for(;!this.eof();){m=this.codePointAt(this.index);if(!d.Character.isIdentifierPart(m))break;h=d.Character.fromCodePoint(m);f+=h;this.index+=
h.length;92===m&&(f=f.substr(0,f.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,h=this.scanUnicodeCodePointEscape()):(h=this.scanHexEscape("u"),null!==h&&"\\"!==h&&d.Character.isIdentifierPart(h.charCodeAt(0))||this.throwUnexpectedToken()),f+=h)}return f};n.prototype.octalToDecimal=function(m){var f="0"!==m,h="01234567".indexOf(m);!this.eof()&&d.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=
!0,h=8*h+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(m)&&!this.eof()&&d.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=8*h+"01234567".indexOf(this.source[this.index++])));return{code:h,octal:f}};n.prototype.scanIdentifier=function(){var m=this.index,f=92===this.source.charCodeAt(m)?this.getComplexIdentifier():this.getIdentifier();var h=1===f.length?3:this.isKeyword(f)?4:"null"===f.toLowerCase()?5:"true"===f.toLowerCase()||"false"===f.toLowerCase()?1:3;if(3!==h&&
m+f.length!==this.index){var k=this.index;this.index=m;this.tolerateUnexpectedToken(g.Messages.InvalidEscapedReservedWord);this.index=k}return{type:h,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanPunctuator=function(){var m=this.index,f=this.source[this.index];switch(f){case "(":case "{":"{"===f&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;
break;default:f=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===f?this.index+=4:(f=f.substr(0,3),"\x3d\x3d\x3d"===f||"!\x3d\x3d"===f||"\x3e\x3e\x3e"===f||"\x3c\x3c\x3d"===f||"\x3e\x3e\x3d"===f||"**\x3d"===f?this.index+=3:(f=f.substr(0,2),"\x26\x26"===f||"||"===f||"\x3d\x3d"===f||"!\x3d"===f||"+\x3d"===f||"-\x3d"===f||"*\x3d"===f||"/\x3d"===f||"++"===f||"--"===f||"\x3c\x3c"===f||"\x3e\x3e"===f||"\x26\x3d"===f||"|\x3d"===f||"^\x3d"===f||"%\x3d"===f||"\x3c\x3d"===f||"\x3e\x3d"===f||"\x3d\x3e"===
f||"**"===f?this.index+=2:(f=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(f)&&++this.index)))}this.index===m&&this.throwUnexpectedToken();return{type:7,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanHexLiteral=function(m){for(var f="";!this.eof()&&d.Character.isHexDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];0===f.length&&this.throwUnexpectedToken();d.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+f,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanBinaryLiteral=function(m){for(var f="";!this.eof();){var h=this.source[this.index];if("0"!==h&&"1"!==h)break;f+=this.source[this.index++]}0===f.length&&this.throwUnexpectedToken();this.eof()||(h=this.source.charCodeAt(this.index),(d.Character.isIdentifierStart(h)||d.Character.isDecimalDigit(h))&&this.throwUnexpectedToken());return{type:6,
value:parseInt(f,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanOctalLiteral=function(m,f){var h="",k=!1;d.Character.isOctalDigit(m.charCodeAt(0))?(k=!0,h="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&d.Character.isOctalDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];k||0!==h.length||this.throwUnexpectedToken();(d.Character.isIdentifierStart(this.source.charCodeAt(this.index))||d.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&
this.throwUnexpectedToken();return{type:6,value:parseInt(h,8),octal:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};n.prototype.scanNumericLiteral=function(){var m=this.index,f=this.source[m];a.assert(d.Character.isDecimalDigit(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point");var h="";if("."!==f){h=this.source[this.index++];f=this.source[this.index];if("0"===h){if("x"===f||"X"===f)return++this.index,this.scanHexLiteral(m);
if("b"===f||"B"===f)return++this.index,this.scanBinaryLiteral(m);if("o"===f||"O"===f)return this.scanOctalLiteral(f,m)}for(;d.Character.isDecimalDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];f=this.source[this.index]}if("."===f){for(h+=this.source[this.index++];d.Character.isDecimalDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];f=this.source[this.index]}if("e"===f||"E"===f){h+=this.source[this.index++];f=this.source[this.index];if("+"===f||"-"===
f)h+=this.source[this.index++];if(d.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;d.Character.isDecimalDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];else this.throwUnexpectedToken()}d.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(h),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanStringLiteral=function(){var m=this.index,f=this.source[m];
a.assert("'"===f||'"'===f,"String literal must starts with a quote");++this.index;for(var h=!1,k="";!this.eof();){var e=this.source[this.index++];if(e===f){f="";break}if("\\"===e)if((e=this.source[this.index++])&&d.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(e){case "u":"{"===this.source[this.index]?(++this.index,k+=this.scanUnicodeCodePointEscape()):(e=this.scanHexEscape(e),null===e&&this.throwUnexpectedToken(),
k+=e);break;case "x":e=this.scanHexEscape(e);null===e&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);k+=e;break;case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\x0B";break;case "8":case "9":k+=e;this.tolerateUnexpectedToken();break;default:e&&d.Character.isOctalDigit(e.charCodeAt(0))?(e=this.octalToDecimal(e),h=e.octal||h,k+=String.fromCharCode(e.code)):k+=e}else if(d.Character.isLineTerminator(e.charCodeAt(0)))break;
else k+=e}""!==f&&(this.index=m,this.throwUnexpectedToken());return{type:8,value:k,octal:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.scanTemplate=function(){var m="",f=!1,h=this.index,k="`"===this.source[h],e=!1,r=2;for(++this.index;!this.eof();){var q=this.source[this.index++];if("`"===q){r=1;f=e=!0;break}if("$"===q){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;f=!0;break}m+=q}else if("\\"===q)if(q=this.source[this.index++],
d.Character.isLineTerminator(q.charCodeAt(0)))++this.lineNumber,"\r"===q&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(q){case "n":m+="\n";break;case "r":m+="\r";break;case "t":m+="\t";break;case "u":if("{"===this.source[this.index])++this.index,m+=this.scanUnicodeCodePointEscape();else{var u=this.index,v=this.scanHexEscape(q);null!==v?m+=v:(this.index=u,m+=q)}break;case "x":q=this.scanHexEscape(q);null===q&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);
m+=q;break;case "b":m+="\b";break;case "f":m+="\f";break;case "v":m+="\v";break;default:"0"===q?(d.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral),m+="\x00"):d.Character.isOctalDigit(q.charCodeAt(0))?this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral):m+=q}else d.Character.isLineTerminator(q.charCodeAt(0))?(++this.lineNumber,"\r"===q&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,m+="\n"):m+=q}f||
this.throwUnexpectedToken();k||this.curlyStack.pop();return{type:10,value:this.source.slice(h+1,this.index-r),cooked:m,head:k,tail:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};n.prototype.testRegExp=function(m,f){var h=this,k=m;0<=f.indexOf("u")&&(k=k.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,r,q){e=parseInt(r||q,16);1114111<e&&h.throwUnexpectedToken(g.Messages.InvalidRegExp);return 65535>=e?String.fromCharCode(e):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"\uffff"));try{RegExp(k)}catch(e){this.throwUnexpectedToken(g.Messages.InvalidRegExp)}try{return new RegExp(m,f)}catch(e){return null}};n.prototype.scanRegExpBody=function(){var m=this.source[this.index];a.assert("/"===m,"Regular expression literal must start with a slash");for(var f=this.source[this.index++],h=!1,k=!1;!this.eof();)if(m=this.source[this.index++],f+=m,"\\"===m)m=this.source[this.index++],d.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(g.Messages.UnterminatedRegExp),
f+=m;else if(d.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);else if(h)"]"===m&&(h=!1);else{if("/"===m){k=!0;break}"["===m&&(h=!0)}k||this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);return f.substr(1,f.length-2)};n.prototype.scanRegExpFlags=function(){for(var m="";!this.eof();){var f=this.source[this.index];if(!d.Character.isIdentifierPart(f.charCodeAt(0)))break;++this.index;if("\\"!==f||this.eof())m+=f;else{f=this.source[this.index];
if("u"===f){++this.index;f=this.index;var h=this.scanHexEscape("u");if(null!==h)for(m+=h;f<this.index;++f);else this.index=f,m+="u"}this.tolerateUnexpectedToken()}}return m};n.prototype.scanRegExp=function(){var m=this.index,f=this.scanRegExpBody(),h=this.scanRegExpFlags(),k=this.testRegExp(f,h);return{type:9,value:"",pattern:f,flags:h,regex:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};n.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,
lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return d.Character.isIdentifierStart(m)?this.scanIdentifier():40===m||41===m||59===m?this.scanPunctuator():39===m||34===m?this.scanStringLiteral():46===m?d.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():d.Character.isDecimalDigit(m)?this.scanNumericLiteral():96===m||125===m&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=m&&57343>m&&d.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return n}();p.Scanner=B})},"esri/arcade/lib/character":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
d=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
p.Character={fromCodePoint:function(g){return 65536>g?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10))+String.fromCharCode(56320+(g-65536&1023))},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===g||160===g||5760<=g&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||92===g||
128<=g&&a.test(p.Character.fromCodePoint(g))},isIdentifierPart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||48<=g&&57>=g||92===g||128<=g&&d.test(p.Character.fromCodePoint(g))},isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g},isOctalDigit:function(g){return 48<=g&&55>=g}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.TokenName=
p.TokenType=void 0;var a=p.TokenType||(p.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";p.TokenName={};p.TokenName[1]="Boolean";p.TokenName[2]="\x3cend\x3e";p.TokenName[3]="Identifier";p.TokenName[4]="Keyword";
p.TokenName[5]="Null";p.TokenName[6]="Numeric";p.TokenName[7]="Punctuator";p.TokenName[8]="String";p.TokenName[9]="RegularExpression";p.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){var B=this&&this.__spreadArray||function(p,a){for(var d=0,g=a.length,n=p.length;d<g;d++,n++)p[n]=a[d];return p};define("require exports ./error-handler ./nodes ./scanner ./token".split(" "),function(p,a,d,g,n,m){Object.defineProperty(a,"__esModule",{value:!0});a.Tokenizer=void 0;var f=function(){function h(){this.values=
[];this.curly=this.paren=-1}h.prototype.beforeFunctionExpression=function(k){return 0<=B(B(B(B(["(","{","[","return",","],g.AssignmentOperators),g.BinaryOperators),g.LogicalOperators),g.UnaryOperators).indexOf(k)};h.prototype.isRegexStart=function(){var k=this.values[this.values.length-1],e=null!==k;switch(k){case "this":case "]":e=!1;break;case ")":k=this.values[this.paren-1];e="if"===k||"while"===k||"for"===k||"with"===k;break;case "}":e=!0,"function"===this.values[this.curly-3]?e=(k=this.values[this.curly-
4])?!this.beforeFunctionExpression(k):!1:"function"===this.values[this.curly-4]&&(e=(k=this.values[this.curly-5])?!this.beforeFunctionExpression(k):!0)}return e};h.prototype.push=function(k){7===k.type||4===k.type?("{"===k.value?this.curly=this.values.length:"("===k.value&&(this.paren=this.values.length),this.values.push(k.value)):this.values.push(null)};return h}();p=function(){function h(k,e){this.errorHandler=new d.ErrorHandler;this.errorHandler.tolerant=e?"boolean"===typeof e.tolerant&&e.tolerant:
!1;this.scanner=new n.Scanner(k,this.errorHandler);this.scanner.trackComment=e?"boolean"===typeof e.comment&&e.comment:!1;this.trackRange=e?"boolean"===typeof e.range&&e.range:!1;this.trackLoc=e?"boolean"===typeof e.loc&&e.loc:!1;this.buffer=[];this.reader=new f}h.prototype.errors=function(){return this.errorHandler.errors};h.prototype.getNextToken=function(){if(0===this.buffer.length){var k=this.scanner.scanComments();if(k)for(var e=0;e<k.length;++e){var r=k[e],q=this.scanner.source.slice(r.slice[0],
r.slice[1]);q={type:r.multiLine?"BlockComment":"LineComment",value:q};this.trackRange&&(q.range=r.range);this.trackLoc&&(q.loc=r.loc);this.buffer.push(q)}if(!this.scanner.eof()){k=null;this.trackLoc&&(k={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});e=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){r=this.scanner.saveState();try{e=this.scanner.scanRegExp()}catch(u){this.scanner.restoreState(r),e=this.scanner.lex()}}else e=
this.scanner.lex();this.reader.push(e);r={type:m.TokenName[e.type],value:this.scanner.source.slice(e.start,e.end)};this.trackRange&&(r.range=[e.start,e.end]);this.trackLoc&&k&&(k.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},r.loc=k);9===e.type&&(r.regex={pattern:e.pattern,flags:e.flags});this.buffer.push(r)}}return this.buffer.shift()};return h}();a.Tokenizer=p})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],
function(B,p,a){function d(m,f){Array.isArray(f)?(m[0]=f[0],m[1]=f[1],m[2]=f[2],m[3]=f[3]):(m[0]=f.r,m[1]=f.g,m[2]=f.b,m[3]=f.a);return m}function g(m,f,h){void 0===f&&(f=0);void 0===h&&(h=!1);var k=m[f+3];m[f+0]*=k;m[f+1]*=k;m[f+2]*=k;h||(m[f+3]*=255);return m}Object.defineProperty(p,"__esModule",{value:!0});p.white=[255,255,255,1];var n=[0,0,0,0];p.premultiplyAlpha=g;p.copyAndPremultiply=function(m){return g(d([],m))};p.premultiplyAlphaUint32=function(m){g(d(n,m));return a.i8888to32(n[0],n[1],n[2],
n[3])};p.premultiplyAlphaRGBA=function(m){if(!m)return 0;var f=m.a;return a.i8888to32(m.r*f,m.g*f,m.b*f,255*f)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=new Float32Array(1),d=new Uint32Array(a.buffer);p.nextHighestPowerOfTwo=function(g){g--;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;g|=g>>16;g++;return g};p.toUint32=function(g){a[0]=g;return d[0]};p.i1616to32=function(g,n){return 65535&
g|n<<16};p.i8888to32=function(g,n,m,f){return g&255|(n&255)<<8|(m&255)<<16|f<<24};p.i8816to32=function(g,n,m){return g&255|(n&255)<<8|m<<16};p.numTo32=function(g){return g|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function d(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=
this.offsetY=this.offsetX=this.angle=0}d.prototype.acquire=function(g,n,m,f,h,k,e,r,q){this.color=g;this.haloColor=n;this.haloSize=m;this.size=f;this.angle=h;this.offsetX=k;this.offsetY=e;this.hAnchor=r;this.vAnchor=q};d.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};d.pool=new a(d);return d}();p.TextProperties=
B})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(B,p){var a=function(){return function(){}}();return function(){function d(g,n,m,f,h){void 0===f&&(f=1);void 0===h&&(h=0);this.classConstructor=g;this.acquireFunctionOrWithConstructor=n;this.releaseFunction=m;this.growthSize=f;!0===n?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof n&&(this.acquireFunction=n);this._pool=Array(h);this._set=new Set;this._initialSize=h;for(g=0;g<h;g++)this._pool[g]=
new this.classConstructor;this.growthSize=Math.max(f,1)}d.prototype.acquire=function(){for(var g=[],n=0;n<arguments.length;n++)g[n]=arguments[n];n=this.classConstructor||a;if(0===this._pool.length)for(var m=this.growthSize,f=0;f<m;f++)this._pool[f]=new n;n=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[n].concat(g)):n&&n.acquire&&"function"===typeof n.acquire&&n.acquire.apply(n,g);this._set["delete"](n);return n};d.prototype.release=function(g){g&&!this._set.has(g)&&(this.releaseFunction?
this.releaseFunction(g):g&&g.release&&"function"===typeof g.release&&g.release(),this._pool.push(g),this._set.add(g))};d.prototype.prune=function(g){void 0===g&&(g=this._initialSize);if(!(this._pool.length<=g))for(var n;g>this._pool.length;)n=this._pool.shift(),this._set["delete"](n),n.dispose&&"function"===typeof n.dispose&&n.dispose()};d.prototype._constructorAcquireFunction=function(g){for(var n=[],m=1;m<arguments.length;m++)n[m-1]=arguments[m];(f=this.classConstructor).call.apply(f,[g].concat(n));
var f};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m,f,h,k,e){Object.defineProperty(p,"__esModule",{value:!0});B=function(r){function q(){var u=r.call(this)||
this;u._initialized=!1;u._maxWidth=0;u._color=new Float32Array([1,0,0,1]);return u}a(q,r);q.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=
null);this._canvas=null};q.prototype.draw=function(u,v){var x=u.context;if(v.status!==m.TileStatus.INITIALIZED){this._initialized||this._initialize(x);x.bindVAO(this._outlineVertexArrayObject);x.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",v.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",
0);this._outlineProgram.setUniform4fv("u_color",this._color);x.setLineWidth(2);x.drawArrays(3,0,4);x.bindVAO();var z=this._getTexture(x,v);z&&(x.bindVAO(this._tileInfoVertexArrayObject),x.bindProgram(this._tileInfoProgram),x.bindTexture(z,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",v.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",
1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",z.descriptor.width,z.descriptor.height),x.drawArrays(5,0,4),x.bindVAO())}};q.prototype._initialize=function(u){if(this._initialized)return!0;var v={a_pos:0},x=new h(u,n.backgroundVS,n.backgroundFS,v),z=new h(u,n.tileInfoVS,n.tileInfoFS,v),A={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},y=new Int8Array([0,0,1,0,1,1,0,1]);y=f.createVertex(u,35044,y);y=new e(u,
v,A,{geometry:y});var c=new Int8Array([0,0,1,0,0,1,1,1]);c=f.createVertex(u,35044,c);u=new e(u,v,A,{geometry:c});this._outlineProgram=x;this._tileInfoProgram=z;this._outlineVertexArrayObject=y;this._tileInfoVertexArrayObject=u;return this._initialized=!0};q.prototype._getTexture=function(u,v){if(v.texture)return v.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height",
"32"),this._canvas.setAttribute("style","display:none"));var x=v.key.id,z=this._canvas.getContext("2d");z.font="24px sans-serif";z.textAlign="left";z.textBaseline="middle";var A=z.measureText(x);A=Math.pow(2,Math.ceil(d.log2(A.width+2)));A>this._maxWidth&&(this._maxWidth=A);z.clearRect(0,0,this._maxWidth,32);z.fillStyle="blue";z.fillText(x,0,16);v.texture=new k(u,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return v.texture};return q}(g["default"]);p["default"]=B})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){return function(){}}();p["default"]=a})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=p.TileStatus||(p.TileStatus={});a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=
3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(B,p,a){return function(){function d(g,n,m){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=g;this._desc={pixelFormat:n.pixelFormat,internalFormat:n.internalFormat,dataType:n.dataType,target:n.target?n.target:3553,samplingMode:n.samplingMode?n.samplingMode:
9729,wrapMode:n.wrapMode?n.wrapMode:10497,maxAnisotropy:n.maxAnisotropy,flipped:void 0!==n.flipped?n.flipped:!1,hasMipmap:void 0!==n.hasMipmap?n.hasMipmap:!1,level:void 0!==n.level?n.level:0,unpackAlignment:n.unpackAlignment?n.unpackAlignment:4,width:n.width,height:n.height,preMultiplyAlpha:void 0!==n.preMultiplyAlpha?n.preMultiplyAlpha:!1};this._id=++d._nextId;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(0);this.setData(m)}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});d.prototype.dispose=function(){var g=this;if(this._context){if(this._glName){var n=this._context.gl;this._boundToUnits.forEach(function(m){g._context.bindTexture(null,m)});n.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&
this._context.instanceCounter.decrementCount(0);this._context=null}};d.prototype.resize=function(g,n){var m=this._desc;if(m.width!==g||m.height!==n)m.width=g,m.height=n,this.setData(null)};d.prototype.setData=function(g){var n=this._context.gl;this._glName||(this._glName=n.createTexture());void 0===g&&(g=null);null===g&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var f=this._desc;d._validateTexture(f);
n.pixelStorei(n.UNPACK_ALIGNMENT,f.unpackAlignment);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,f.flipped?1:0);n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f.preMultiplyAlpha);if(g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement)n.texImage2D(n.TEXTURE_2D,f.level,f.internalFormat?f.internalFormat:f.pixelFormat,f.pixelFormat,f.dataType,g),void 0===this._desc.width&&(this._desc.width=g.width),void 0===this._desc.height&&(this._desc.height=
g.height);else{var h=f.internalFormat?f.internalFormat:f.pixelFormat,k=f.pixelFormat;n.DEPTH24_STENCIL8&&h===n.DEPTH_STENCIL&&(h=n.DEPTH24_STENCIL8);n.texImage2D(n.TEXTURE_2D,f.level,h,f.width,f.height,0,k,f.dataType,g)}f.hasMipmap&&this.generateMipmap();d._applySamplingMode(n,this._desc);d._applyWrapMode(n,this._desc);d._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(m,0)};d.prototype.updateData=function(g,n,m,f,h,k){var e=this._context.gl,r=this._desc,q=
this._context.getBoundTexture(0);this._context.bindTexture(this,0);k instanceof ImageData||k instanceof HTMLImageElement||k instanceof HTMLCanvasElement||k instanceof HTMLVideoElement?e.texSubImage2D(e.TEXTURE_2D,g,n,m,r.pixelFormat,r.dataType,k):e.texSubImage2D(e.TEXTURE_2D,g,n,m,f,h,r.pixelFormat,r.dataType,k);this._context.bindTexture(q,0)};d.prototype.generateMipmap=function(){var g=this._desc;g.hasMipmap||(g.hasMipmap=!0,d._validateTexture(g));9729===g.samplingMode?(this._samplingModeDirty=!0,
g.samplingMode=9985):9728===g.samplingMode&&(this._samplingModeDirty=!0,g.samplingMode=9984);g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var n=this._context.gl;n.generateMipmap(n.TEXTURE_2D);this._context.bindTexture(g,0)};d.prototype.setSamplingMode=function(g){g!==this._desc.samplingMode&&(this._desc.samplingMode=g,d._validateTexture(this._desc),this._samplingModeDirty=!0)};d.prototype.setWrapMode=function(g){g!==this._desc.wrapMode&&(this._desc.wrapMode=g,d._validateTexture(this._desc),
this._wrapModeDirty=!0)};d.prototype.applyChanges=function(){var g=this._context.gl,n=this._desc;this._samplingModeDirty&&(d._applySamplingMode(g,n),this._samplingModeDirty=!1);this._wrapModeDirty&&(d._applyWrapMode(g,n),this._wrapModeDirty=!1)};d.prototype.setBoundToUnit=function(g,n){n?this._boundToUnits.add(g):this._boundToUnits["delete"](g)};d._isPowerOfTwo=function(g){return 0===(g&g-1)};d._validateTexture=function(g){d._isPowerOfTwo(g.width)&&d._isPowerOfTwo(g.height)};d._applySamplingMode=
function(g,n){var m=n.samplingMode;if(9985===m||9987===m)m=9729;else if(9984===m||9986===m)m=9728;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,m);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,n.samplingMode)};d._applyWrapMode=function(g,n){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,n.wrapMode);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,n.wrapMode)};d._applyAnisotropicFilteringParameters=function(g,n){if(null!=n.maxAnisotropy){var m=g.capabilities.textureFilterAnisotropic;if(m){var f=
g.gl;f.texParameterf(f.TEXTURE_2D,m.TEXTURE_MAX_ANISOTROPY,n.maxAnisotropy)}}};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m,f,h){Object.defineProperty(p,"__esModule",
{value:!0});B=function(k){function e(){var r=k.call(this)||this;r._color=d.create();r._initialized=!1;r._color.set([1,0,0,1]);return r}a(e,k);e.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};e.prototype.draw=function(r,q){var u=r.context;this._initialized||this._initialize(u);u.setStencilFunctionSeparate(1032,519,q.stencilRef,255);u.bindVAO(this._solidVertexArrayObject);
u.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",q.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",q.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);u.drawArrays(5,0,4);u.bindVAO()};e.prototype._initialize=function(r){if(this._initialized)return!0;var q={a_pos:0},u=new f(r,n.backgroundVS,n.backgroundFS,
q);if(!u)return!1;var v=new Int8Array([0,0,1,0,0,1,1,1]);v=m.createVertex(r,35044,v);r=new h(r,q,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:v});this._solidProgram=u;this._solidVertexArrayObject=r;return this._initialized=!0};return e}(g["default"]);p["default"]=B})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(B){var p={create:function(){var a=new B.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},
clone:function(a){var d=new B.ARRAY_TYPE(4);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];return d},fromValues:function(a,d,g,n){var m=new B.ARRAY_TYPE(4);m[0]=a;m[1]=d;m[2]=g;m[3]=n;return m},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a},set:function(a,d,g,n,m){a[0]=d;a[1]=g;a[2]=n;a[3]=m;return a},add:function(a,d,g){a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];a[3]=d[3]+g[3];return a},subtract:function(a,d,g){a[0]=d[0]-g[0];a[1]=d[1]-g[1];a[2]=d[2]-g[2];a[3]=d[3]-g[3];return a}};
p.sub=p.subtract;p.multiply=function(a,d,g){a[0]=d[0]*g[0];a[1]=d[1]*g[1];a[2]=d[2]*g[2];a[3]=d[3]*g[3];return a};p.mul=p.multiply;p.divide=function(a,d,g){a[0]=d[0]/g[0];a[1]=d[1]/g[1];a[2]=d[2]/g[2];a[3]=d[3]/g[3];return a};p.div=p.divide;p.ceil=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);a[2]=Math.ceil(d[2]);a[3]=Math.ceil(d[3]);return a};p.floor=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);a[2]=Math.floor(d[2]);a[3]=Math.floor(d[3]);return a};p.min=function(a,d,g){a[0]=
Math.min(d[0],g[0]);a[1]=Math.min(d[1],g[1]);a[2]=Math.min(d[2],g[2]);a[3]=Math.min(d[3],g[3]);return a};p.max=function(a,d,g){a[0]=Math.max(d[0],g[0]);a[1]=Math.max(d[1],g[1]);a[2]=Math.max(d[2],g[2]);a[3]=Math.max(d[3],g[3]);return a};p.round=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);a[2]=Math.round(d[2]);a[3]=Math.round(d[3]);return a};p.scale=function(a,d,g){a[0]=d[0]*g;a[1]=d[1]*g;a[2]=d[2]*g;a[3]=d[3]*g;return a};p.scaleAndAdd=function(a,d,g,n){a[0]=d[0]+g[0]*n;a[1]=d[1]+g[1]*
n;a[2]=d[2]+g[2]*n;a[3]=d[3]+g[3]*n;return a};p.distance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1],m=d[2]-a[2],f=d[3]-a[3];return Math.sqrt(g*g+n*n+m*m+f*f)};p.dist=p.distance;p.squaredDistance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1],m=d[2]-a[2],f=d[3]-a[3];return g*g+n*n+m*m+f*f};p.sqrDist=p.squaredDistance;p.length=function(a){var d=a[0],g=a[1],n=a[2];a=a[3];return Math.sqrt(d*d+g*g+n*n+a*a)};p.len=p.length;p.squaredLength=function(a){var d=a[0],g=a[1],n=a[2];a=a[3];return d*d+g*g+n*n+a*a};p.sqrLen=
p.squaredLength;p.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];a[2]=-d[2];a[3]=-d[3];return a};p.inverse=function(a,d){a[0]=1/d[0];a[1]=1/d[1];a[2]=1/d[2];a[3]=1/d[3];return a};p.normalize=function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=g*g+n*n+m*m+f*f;0<h&&(h=1/Math.sqrt(h),a[0]=g*h,a[1]=n*h,a[2]=m*h,a[3]=f*h);return a};p.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]+a[3]*d[3]};p.lerp=function(a,d,g,n){var m=d[0],f=d[1],h=d[2];d=d[3];a[0]=m+n*(g[0]-m);a[1]=f+n*(g[1]-f);a[2]=h+n*(g[2]-h);a[3]=
d+n*(g[3]-d);return a};p.random=function(a,d){d=d||1;a[0]=B.RANDOM();a[1]=B.RANDOM();a[2]=B.RANDOM();a[3]=B.RANDOM();p.normalize(a,a);p.scale(a,a,d);return a};p.transformMat4=function(a,d,g){var n=d[0],m=d[1],f=d[2];d=d[3];a[0]=g[0]*n+g[4]*m+g[8]*f+g[12]*d;a[1]=g[1]*n+g[5]*m+g[9]*f+g[13]*d;a[2]=g[2]*n+g[6]*m+g[10]*f+g[14]*d;a[3]=g[3]*n+g[7]*m+g[11]*f+g[15]*d;return a};p.transformQuat=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=g[0],k=g[1],e=g[2];g=g[3];var r=g*n+k*f-e*m,q=g*m+e*n-h*f,u=g*f+h*m-k*n;
n=-h*n-k*m-e*f;a[0]=r*g+n*-h+q*-e-u*-k;a[1]=q*g+n*-k+u*-h-r*-e;a[2]=u*g+n*-e+r*-k-q*-h;a[3]=d[3];return a};p.forEach=function(){var a=p.create();return function(d,g,n,m,f,h){g||(g=4);n||(n=0);for(m=m?Math.min(m*g+n,d.length):d.length;n<m;n+=g)a[0]=d[n],a[1]=d[n+1],a[2]=d[n+2],a[3]=d[n+3],f(a,a,h),d[n]=a[0],d[n+1]=a[1],d[n+2]=a[2],d[n+3]=a[3];return d}}();p.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};p.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&
a[3]===d[3]};p.equals=function(a,d){var g=a[0],n=a[1],m=a[2],f=a[3],h=d[0],k=d[1],e=d[2],r=d[3];return Math.abs(g-h)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(n-k)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(k))&&Math.abs(m-e)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(e))&&Math.abs(f-r)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(r))};return p})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",{value:!0});B=function(f){function h(){var k=null!==f&&f.apply(this,arguments)||this;k._isInitialized=!1;k._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};k._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};k._spritesTextureSize=new Float32Array(2);return k}a(h,f);h.prototype.dispose=function(){};h.prototype.getGeometryType=function(){return d.WGLGeometryType.FILL};h.prototype.drawGeometry=
function(k,e,r,q){q=k.context;var u=k.painter,v=k.rendererInfo,x=k.requiredLevel,z=k.stationary,A=r.indexCount,y=r.indexFrom;this._initialize();var c=r.materialInfo.materialKeyInfo,b=c.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(b=k.painter.materialManager.getProgram(r.materialInfo.materialKey,k.drawPhase,b)){q.bindProgram(b);var l=this._getVAO(q,e,c.hasVV());q.bindVAO(l);if(0<r.materialInfo.texBindingInfo.length){r=r.materialInfo.texBindingInfo[0];l=r.pageId;var t=k.painter.textureManager.sprites;
this._spritesTextureSize[0]=t.getWidth(l);this._spritesTextureSize[1]=t.getHeight(l);b.setUniform1f("u_zoomFactor",1/Math.pow(2,x-e.key.level)/k.pixelRatio);u.textureManager.bindSpritePage(q,l,r.unit,z?9728:9729);b.setUniform1i(r.semantic,r.unit);b.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}b.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform);b.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);b.setUniform1f("u_opacity",1);c.vvColor&&(b.setUniform1fv("u_vvColorValues",
v.vvColorValues),b.setUniform4fv("u_vvColors",v.vvColors));c.vvOpacity&&(b.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),b.setUniform1fv("u_vvOpacities",v.vvOpacities));q.drawElements(4,A,5125,4*y);q.bindVAO(null)}};h.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};h.prototype._getVAO=function(k,e,r){if(e.fillGeometry.vao)return e.fillGeometry.vao;var q=e.fillGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],u=e.fillGeometry.indexBuffer;if(!q||!u)return null;e.fillGeometry.vao=r?new m(k,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:q},u):new m(k,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:q},u);return e.fillGeometry.vao};return h}(n["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});B=function(n){function m(){return null!==n&&n.apply(this,arguments)||this}
a(m,n);m.prototype.draw=function(f,h){var k=this;if(h.canDisplay){var e=this.getGeometryType(),r=h.getDisplayList(f.drawPhase),q=h.getGeometry(e);q&&g.forEachIter(r.ofType(e),function(u){return k.drawGeometry(f,h,u,q)})}};return m}(d["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.forEachIter=function(a,d){for(;;){var g=a.next();if(g.done)break;d(g.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",{value:!0});B=function(f){function h(){var k=null!==f&&f.apply(this,arguments)||this;k._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};k._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};k._glyphsTextureSize=new Float32Array(2);return k}a(h,f);h.prototype.dispose=function(){};h.prototype.drawGeometry=function(k,e,r,q){if(k.requiredLevel===e.key.level){q=k.context;var u=k.painter,v=k.drawPhase,x=r.materialInfo,z=r.indexCount;r=r.indexFrom;var A=this._attributeLocations,y=k.drawPhase===d.WGLDrawPhase.LABEL_ALPHA,c=x.materialKey;
y&&(c|=8);if(v=u.materialManager.getProgram(c,v,A))q.setStencilTestEnabled(!1),q.bindProgram(v),A=this._getVAO(q,e),q.bindVAO(A),y?(q.setBlendingEnabled(!1),v.setUniform1f("u_fadeStep",k.labelStep)):(x=x.texBindingInfo[0],u.textureManager.bindGlyphsPage(q,x.pageId,x.unit),v.setUniform1i(x.semantic,x.unit)),x=u.textureManager.glyphs,this._glyphsTextureSize[0]=x.width/4,this._glyphsTextureSize[1]=x.height/4,u=u.extrudeNoRotationMatrix,q.bindTexture(k.labelFBO.colorTexture,3),v.setUniform1i("u_referenceTex",
3),v.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),v.setUniformMatrix4fv("u_extrudeMatrix",u),v.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),v.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),v.setUniform1f("u_pixelRatio",k.pixelRatio),v.setUniform1f("u_opacity",1),v.setUniform1f("u_zoomLevel",10*k.displayLevel),v.setUniform1f("u_mapRotation",k.state.rotation),v.setUniform1f("u_mapAligned",0),v.setUniform2fv("u_screenSize",k.state.size),q.drawElements(4,
z,5125,4*r),q.bindVAO(null),q.setStencilTestEnabled(!0),q.setBlendingEnabled(!0)}};h.prototype.getGeometryType=function(){return d.WGLGeometryType.LABEL};h.prototype._getVAO=function(k,e){var r=e.labelGeometry;if(r&&r.vao)return r.vao;var q=r.vertexBufferMap[g.C_VBO_GEOMETRY],u=r.vertexBufferMap[g.C_VBO_VISIBILITY_RANGE],v=r.indexBuffer;if(!q||!v||!u)return null;r.vao=new m(k,this._attributeLocations,this._vertexAttributeLayout,{geometry:q,visibility:r.vertexBufferMap[g.C_VBO_VISIBILITY],visibilityRange:u},
v);return r.vao};return h}(n["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",{value:!0});B=function(f){function h(){var k=null!==f&&f.apply(this,arguments)||this;k._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};k._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};k._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};k._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};k._spritesTextureSize=new Float32Array(2);return k}a(h,f);h.prototype.dispose=function(){};h.prototype.getGeometryType=function(){return d.WGLGeometryType.LINE};h.prototype.drawGeometry=function(k,e,r,q){q=k.context;var u=k.painter,v=k.rendererInfo,x=k.requiredLevel,z=k.drawPhase,A=r.indexFrom,y=r.indexCount,c=r.materialInfo;r=c.materialKeyInfo;var b=r.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(z=u.materialManager.getProgram(c.materialKey,
z,b)){q.bindProgram(z);b=this._getVAO(q,e,r.hasVV());q.bindVAO(b);b=1/k.pixelRatio;if(0<c.texBindingInfo.length){c=c.texBindingInfo[0];var l=c.pageId,t=u.textureManager.sprites;this._spritesTextureSize[0]=t.getWidth(l);this._spritesTextureSize[1]=t.getHeight(l);u.textureManager.bindSpritePage(q,l,c.unit);z.setUniform1i(c.semantic,c.unit);z.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}k=Math.pow(2,x-e.key.level)/k.pixelRatio;z.setUniform1f("u_zoomFactor",k);z.setUniformMatrix4fv("u_transformMatrix",
e.tileTransform.transform);z.setUniformMatrix4fv("u_extrudeMatrix",u.extrudeMatrix);z.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);z.setUniform1f("u_opacity",1);z.setUniform1f("u_blur",0+b);z.setUniform1f("u_antialiasing",b);z.setUniform1f("u_zoomFactor",k);r.vvSizeMinMaxValue&&z.setUniform4fv("u_vvSizeMinMaxValue",v.vvSizeMinMaxValue);r.vvSizeScaleStops&&z.setUniform1f("u_vvSizeScaleStopsValue",v.vvSizeScaleStopsValue);r.vvSizeFieldStops&&(z.setUniform1fv("u_vvSizeFieldStopsValues",
v.vvSizeFieldStopsValues),z.setUniform1fv("u_vvSizeFieldStopsSizes",v.vvSizeFieldStopsSizes));r.vvSizeUnitValue&&z.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",v.vvSizeUnitValueToPixelsRatio);r.vvColor&&(z.setUniform1fv("u_vvColorValues",v.vvColorValues),z.setUniform4fv("u_vvColors",v.vvColors));r.vvOpacity&&(z.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),z.setUniform1fv("u_vvOpacities",v.vvOpacities));q.setFaceCullingEnabled(!0);q.setFrontFace(2305);q.setCullFace(1029);q.drawElements(4,
y,5125,4*A);q.setFaceCullingEnabled(!1);q.bindVAO(null)}};h.prototype._getVAO=function(k,e,r){if(e.lineGeometry.vao)return e.lineGeometry.vao;var q=e.lineGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],u=e.lineGeometry.indexBuffer;if(!q||!u)return null;e.lineGeometry.vao=r?new m(k,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:q},u):new m(k,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:q},u);return e.lineGeometry.vao};return h}(n["default"]);p["default"]=
B})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});B=function(h){function k(){var e=null!==h&&h.apply(this,arguments)||this;e._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};e._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};e._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};e._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};e._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};e._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};e._spritesTextureSize=new Float32Array(2);return e}a(k,h);k.prototype.dispose=function(){};k.prototype.getGeometryType=function(){return d.WGLGeometryType.MARKER};k.prototype.drawGeometry=
function(e,r,q,u){u=e.context;var v=e.painter,x=e.rendererInfo,z=e.drawPhase;e=q.indexCount;var A=q.indexFrom,y=q.materialInfo;q=y.materialKeyInfo;var c=q.heatmap,b=q.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(z=v.materialManager.getProgram(y.materialKey,z,b))u.bindProgram(z),b=this._getVAO(u,r,q.hasVV(),c),u.bindVAO(b),c?(y=this._getIntensityTexture(u,x.heatmapParameters),u.bindTexture(y,1),z.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(x.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(x.heatmapParameters.radius)):(c=y.texBindingInfo[0],y=c.pageId,v.textureManager.bindSpritePage(u,y,c.unit),z.setUniform1i(c.semantic,c.unit),c=v.textureManager.sprites,this._spritesTextureSize[0]=c.getWidth(y)/4,this._spritesTextureSize[1]=c.getHeight(y)/4),v=x.vvMaterialParameters.vvRotationEnabled&&"geographic"===x.vvMaterialParameters.vvRotationType?v.extrudeMatrix:v.extrudeNoRotationMatrix,z.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform),
z.setUniformMatrix4fv("u_extrudeMatrix",v),z.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord),z.setUniform2fv("u_mosaicSize",this._spritesTextureSize),z.setUniform1f("u_opacity",1),q.vvSizeMinMaxValue&&z.setUniform4fv("u_vvSizeMinMaxValue",x.vvSizeMinMaxValue),q.vvSizeScaleStops&&z.setUniform1f("u_vvSizeScaleStopsValue",x.vvSizeScaleStopsValue),q.vvSizeFieldStops&&(z.setUniform1fv("u_vvSizeFieldStopsValues",x.vvSizeFieldStopsValues),z.setUniform1fv("u_vvSizeFieldStopsSizes",x.vvSizeFieldStopsSizes)),
q.vvSizeUnitValue&&z.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",x.vvSizeUnitValueToPixelsRatio),q.vvColor&&(z.setUniform1fv("u_vvColorValues",x.vvColorValues),z.setUniform4fv("u_vvColors",x.vvColors)),q.vvOpacity&&(z.setUniform1fv("u_vvOpacityValues",x.vvOpacityValues),z.setUniform1fv("u_vvOpacities",x.vvOpacities)),q.vvRotation&&z.setUniform1f("u_vvRotationType","geographic"===x.vvMaterialParameters.vvRotationType?0:1),u.drawElements(4,e,5125,4*A),u.bindVAO(null)};k.prototype._getVAO=function(e,
r,q,u){if(r.iconGeometry.vao)return r.iconGeometry.vao;var v=r.iconGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],x=r.iconGeometry.indexBuffer;if(!v||!x)return null;r.iconGeometry.vao=q?new f(e,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:v},x):u?new f(e,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:v},x):new f(e,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:v},x);return r.iconGeometry.vao};k.prototype._getIntensityTexture=
function(e,r){if(r.intensityKernel&&!r.refreshIntensityKernel)return r.intensityKernel;r.intensityKernel&&(r.intensityKernel.dispose(),r.intensityKernel=null);for(var q=r.radius,u=r.kernelSize,v=r.blurRadius,x=q*q,z=[],A=-1;++A<u;)z[A]=Math.exp(-Math.pow(A-v,2)/(2*x))/(q/2*Math.sqrt(2*Math.PI));q=[];for(var y,c=0;c<u;c++)for(x=z[c],A=0;A<u;A++)y=c*u+A,v=z[A],q[4*y]=x*v,q[4*y+1]=0,q[4*y+2]=0,q[4*y+3]=1;u=new m(e,{target:3553,pixelFormat:6408,internalFormat:e.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:e.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:u,height:u},new Float32Array(q));r.intensityKernel=u;r.refreshIntensityKernel=!1;return u};return k}(n["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",
{value:!0});B=function(f){function h(){var k=null!==f&&f.apply(this,arguments)||this;k._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};k._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};k._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};k._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};k._glyphsTextureSize=new Float32Array(2);return k}a(h,f);h.prototype.dispose=function(){};h.prototype.getGeometryType=
function(){return d.WGLGeometryType.TEXT};h.prototype.drawGeometry=function(k,e,r,q){q=k.context;var u=k.painter,v=k.rendererInfo,x=r.materialInfo,z=r.indexCount;r=r.indexFrom;var A=x.materialKeyInfo,y=A.vvSizeMinMaxValue||A.vvSizeScaleStops||A.vvSizeFieldStops||A.vvSizeUnitValue||A.vvColor||A.vvRotation||A.vvOpacity;if(k=u.materialManager.getProgram(x.materialKey,k.drawPhase,y?this._attributeLocationsVV:this._attributeLocations))q.bindProgram(k),y=this._getVAO(q,e,y,this.getGeometryType()),q.bindVAO(y),
x=x.texBindingInfo[0],u.textureManager.bindGlyphsPage(q,x.pageId,x.unit),k.setUniform1i(x.semantic,x.unit),x=u.textureManager.glyphs,this._glyphsTextureSize[0]=x.width/4,this._glyphsTextureSize[1]=x.height/4,u=v.vvMaterialParameters.vvRotationEnabled&&"geographic"===v.vvMaterialParameters.vvRotationType?u.extrudeMatrix:u.extrudeNoRotationMatrix,k.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),k.setUniformMatrix4fv("u_extrudeMatrix",u),k.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),
k.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),k.setUniform1f("u_pixelRatio",1),k.setUniform1f("u_opacity",1),A.vvSizeMinMaxValue&&k.setUniform4fv("u_vvSizeMinMaxValue",v.vvSizeMinMaxValue),A.vvSizeScaleStops&&k.setUniform1f("u_vvSizeScaleStopsValue",v.vvSizeScaleStopsValue),A.vvSizeFieldStops&&(k.setUniform1fv("u_vvSizeFieldStopsValues",v.vvSizeFieldStopsValues),k.setUniform1fv("u_vvSizeFieldStopsSizes",v.vvSizeFieldStopsSizes)),A.vvSizeUnitValue&&k.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
v.vvSizeUnitValueToPixelsRatio),A.vvColor&&(k.setUniform1fv("u_vvColorValues",v.vvColorValues),k.setUniform4fv("u_vvColors",v.vvColors)),A.vvOpacity&&(k.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),k.setUniform1fv("u_vvOpacities",v.vvOpacities)),A.vvRotation&&k.setUniform1f("u_vvRotationType","geographic"===v.vvMaterialParameters.vvRotationType?0:1),q.drawElements(4,z,5125,4*r),q.bindVAO(null)};h.prototype._getVAO=function(k,e,r,q){if((e=e.getGeometry(q))&&e.vao)return e.vao;q=e.vertexBufferMap[g.C_VBO_GEOMETRY];
var u=e.vertexBufferMap[g.C_VBO_VISIBILITY],v=e.indexBuffer;if(!q||!v)return null;e.vao=r?new m(k,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:q,visibility:u},v):new m(k,this._attributeLocations,this._vertexAttributeLayout,{geometry:q,visibility:u},v);return e.vao};return h}(n["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(B,p,a,d,g){return function(){function n(){this._hlRenderer=new d;this._hlSurfaces=new g;this._height=this._width=void 0}n.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};n.prototype.setup=function(m,f,h){var k=f%4,e=h%4;f+=2>k?-k:4-k;h+=2>e?-e:4-e;this._width=f;this._height=h;this._boundFBO=m.getBoundFramebufferObject();f=Math.round(.75*f);h=Math.round(.75*h);this._hlRenderer.setup(m,f,h);this._hlSurfaces.setup(m,
f,h)};n.prototype.setHighlightOptions=function(m){this._hlRenderer.setHighlightOptions({fillColor:m.fillColor,outlineColor:m.outlineColor,outlineWidth:.75*m.outlineWidth,outerHaloWidth:.75*m.outerHaloWidth,innerHaloWidth:.75*m.innerHaloWidth,outlinePosition:.75*m.outlinePosition})};n.prototype.startMaskDraw=function(m){m.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);m.setClearColor(0,0,0,0);m.setClearStencil(0);m.clear(m.gl.COLOR_BUFFER_BIT|m.gl.STENCIL_BUFFER_BIT);m.setViewport(0,0,.75*this._width,
.75*this._height)};n.prototype.draw=function(m){m.setStencilTestEnabled(!1);m.setBlendingEnabled(!1);m.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);m.setClearColor(0,0,0,0);m.clear(m.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(m,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(m.bindFramebuffer(null),m.clear(m.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(m,this._hlSurfaces.sharedBlur2Tex)):(m.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),m.setClearColor(0,0,0,0),m.clear(m.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(m,this._hlSurfaces.sharedBlur2Tex),m.bindFramebuffer(this._boundFBO),m.setBlendingEnabled(!0),m.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(m,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(B,p,a,d,g,n,m){var f=[void 0,void 0,void 0,1],h=[3,4],k=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function r(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}r.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};r.prototype.preBlur=function(q,u){q.bindTexture(u,h[0]);q.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k);q.bindVAO(this._resources.quadVAO);q.drawArrays(5,0,4);q.bindVAO()};r.prototype.finalBlur=function(q,u){q.bindTexture(u,h[0]);q.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",e);q.bindVAO(this._resources.quadVAO);q.drawArrays(5,0,4);q.bindVAO()};r.prototype.renderHighlight=function(q,u){q.bindTexture(u,h[0]);q.bindTexture(this._resources.shadeTex,h[1]);q.bindProgram(this._resources.highlightProgram);q.bindVAO(this._resources.quadVAO);q.drawArrays(5,0,4);q.bindVAO()};r.prototype._initialize=function(q,u,v){this._width=u;this._height=
v;u=new d(q,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);v=new m(q,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:u});var x=(new g("hl",["texturedVS","highlightFS"],[],a,q,{a_position:0,a_texcoord:1})).getProgram([]),z=(new g("hl",["texturedVS","blurFS"],[],a,q,{a_position:0,a_texcoord:1})).getProgram([]);
x.setUniform1i("u_texture",h[0]);x.setUniform1i("u_shade",h[1]);x.setUniform4fv("u_sigmas",f);z.setUniform1i("u_texture",h[0]);z.setUniform4fv("u_sigmas",f);q=new n(q,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:u,quadVAO:v,highlightProgram:x,blurProgram:z,shadeTex:q}};r.prototype.setHighlightOptions=function(q){function u(t,w,C){b[0]=(1-C)*t[0]+C*w[0];b[1]=(1-C)*t[1]+C*w[1];b[2]=(1-C)*t[2]+C*w[2];b[3]=(1-C)*t[3]+C*
w[3]}this._highlightOptions=q;if(this._resources){for(var v=q.outlinePosition-q.outlineWidth/2-q.outerHaloWidth,x=q.outlinePosition-q.outlineWidth/2,z=q.outlinePosition+q.outlineWidth/2,A=q.outlinePosition+q.outlineWidth/2+q.innerHaloWidth,y=new Uint8Array(1024),c,b=[void 0,void 0,void 0,void 0],l=0;256>l;++l)c=v+l/255*(A-v),c<v?(y[4*l]=0,y[4*l+1]=0,y[4*l+2]=0,y[4*l+3]=0):c<x?u([0,0,0,0],q.outlineColor,(c-v)/(x-v)):c<z?(b[0]=q.outlineColor[0],b[1]=q.outlineColor[1],b[2]=q.outlineColor[2],b[3]=q.outlineColor[3]):
c<A?u(q.outlineColor,q.fillColor,(c-z)/(A-z)):(y[4*l]=q.fillColor[0],y[4*l+1]=q.fillColor[1],y[4*l+2]=q.fillColor[2],y[4*l+3]=q.fillColor[3]),y[4*l]=255*b[0]*b[3],y[4*l+1]=255*b[1]*b[3],y[4*l+2]=255*b[2]*b[3],y[4*l+3]=255*b[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[v,A]);this._resources.shadeTex.updateData(0,0,0,256,1,y)}};r.prototype.setup=function(q,u,v){this._resources?(this._width=u,this._height=v):(this._initialize(q,u,v),this.setHighlightOptions(this._highlightOptions))};
return r}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(B,p,a,d){B=new d;d.parse(a,B);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(B,p,a,d){function g(n,m,f){m=new d(n,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:m,height:f,samplingMode:9729});n=a.createWithAttachments(n,m,{colorTarget:0,depthStencilTarget:2});return[m,n]}return function(){function n(){this._height=this._width=void 0;this._resources=null}n.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};n.prototype._initialize=function(m,
f,h){this._width=f;this._height=h;var k=g(m,f,h),e=k[0];k=k[1];m=g(m,f,h);this._resources={sharedBlur1Tex:e,sharedBlur1Fbo:k,sharedBlur2Tex:m[0],sharedBlur2Fbo:m[1]}};n.prototype.setup=function(m,f,h){!this._resources||this._width===f&&this._height===h||this.dispose();this._resources||this._initialize(m,f,h)};Object.defineProperty(n.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return n}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(B,p,a,d,g){return function(){function n(m,
f,h,k){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=m;this._desc={colorTarget:f.colorTarget,depthStencilTarget:f.depthStencilTarget,width:f.width,height:f.height,multisampled:f.multisampled};this._id=n._nextId++;a("esri-webgl-debug")&&m.instanceCounter.incrementCount(4);h&&(m=void 0,h instanceof g?(this._colorAttachment=h,m=h.descriptor):(m=h,this._colorAttachment=new g(this._context,m)),n._validateTextureDimensions(m,
this._desc));if(k instanceof d){if(2===f.depthStencilTarget)this._stencilAttachment=k;else if(1===f.depthStencilTarget||3===f.depthStencilTarget)this._depthAttachment=k;n._validateBufferDimensions(k.descriptor,this._desc)}else k&&(f=void 0,k instanceof g?(this._depthStencilTexture=k,f=this._depthStencilTexture.descriptor):(f=k,this._depthStencilTexture=new g(this._context,f)),n._validateTextureDimensions(f,this._desc))}n.create=function(m,f){return new n(m,f)};n.createWithAttachments=function(m,f,
h,k){return new n(m,h,f,k)};Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});n.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};n.prototype.attachColorTexture=function(m){if(m){n._validateTextureDimensions(m.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,m.glName,0)}this._colorAttachment=m}};n.prototype.detachColorTexture=
function(){var m=void 0;if(this._colorAttachment instanceof g){m=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;this._context.gl.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,null,0)}this._colorAttachment=null}return m};n.prototype.attachDepthStencilTexture=function(m){if(m){n._validateTextureDimensions(m.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,m.glName,0)}this._depthStencilTexture=m}};n.prototype.detachDepthStencilTexture=function(){var m=this._depthStencilTexture;if(m&&this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;this._context.gl.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return m};
n.prototype.attachDepthStencilBuffer=function(m){if(m){var f=m.descriptor;n._validateBufferDimensions(f,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===f.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),f=this._context.gl,f.framebufferRenderbuffer(f.FRAMEBUFFER,1===this._desc.depthStencilTarget?f.DEPTH_ATTACHMENT:f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,m.glName));this._depthAttachment=m}};n.prototype.detachDepthStencilBuffer=function(){var m=
this._context.gl,f=this._depthAttachment;f&&this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,1===this._desc.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,null));this._depthAttachment=null;return f};n.prototype.copyToTexture=function(m,f,h,k,e,r,q){var u=this._context;u.bindTexture(q);u.bindFramebuffer(this);u.gl.copyTexSubImage2D(3553,0,e,r,m,f,h,k)};n.prototype.readPixels=function(m,f,h,k,e,r,q){this._context.bindFramebuffer(this);
this._context.gl.readPixels(m,f,h,k,e,r,q)};n.prototype.resize=function(m,f){var h=this._desc;if(h.width!==m||h.height!==f)if(this._initialized)h.width=m,h.height=f,this._colorAttachment instanceof g?(k=this._colorAttachment,h=k.descriptor,h.width=m,h.height=f,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,h),n._validateTextureDimensions(k.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(h=this._depthStencilTexture.descriptor,
h.width=m,h.height=f,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,h)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{h.width=m;h.height=f;if(this._colorAttachment instanceof g){var k=this._colorAttachment;k.resize(m,f)}this._depthStencilTexture&&this._depthStencilTexture.resize(m,f)}};n.prototype.initialize=function(){if(this._initialized)return!1;
var m=this._context.gl;this._glName&&m.deleteFramebuffer(this._glName);var f=m.createFramebuffer(),h=this._desc;m.bindFramebuffer(m.FRAMEBUFFER,f);if(!this._colorAttachment)if(0===h.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:h.width,height:h.height});else{var k=new d(this._context,{internalFormat:32854,width:h.width,height:h.height});m.framebufferRenderbuffer(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.RENDERBUFFER,
k.glName);this._colorAttachment=k}this._colorAttachment instanceof g&&m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,this._colorAttachment.glName,0);switch(h.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new d(this._context,{internalFormat:1===h.depthStencilTarget?33189:34041,width:h.width,height:h.height}));m.framebufferRenderbuffer(m.FRAMEBUFFER,1===h.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new d(this._context,{internalFormat:36168,width:h.width,height:h.height}));m.framebufferRenderbuffer(m.FRAMEBUFFER,m.STENCIL_ATTACHMENT,m.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new g(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:h.width,height:h.height})),m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,
m.TEXTURE_2D,this._depthStencilTexture.glName,0)}m.checkFramebufferStatus(m.FRAMEBUFFER);this._glName=f;return this._initialized=!0};n.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var m=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var f=this._context.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,null,0)}m.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(m=this._colorAttachment,f=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(m));this._colorAttachment=null};n.prototype._disposeDepthStencilAttachments=function(){var m=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,1===this._desc.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,
m.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.STENCIL_ATTACHMENT,m.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};n._validateBufferDimensions=function(m,f){void 0!==f.width&&0<=f.width&&void 0!==f.height&&0<=f.height||(f.width=m.width,f.height=m.height)};n._validateTextureDimensions=function(m,f){void 0!==f.width&&0<=f.width&&void 0!==f.height&&0<=f.height||(f.width=m.width,f.height=m.height)};n._nextId=0;return n}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(B,p,a){return function(){function d(g,n){this._context=
g;this._desc=n;this._glName=null;this._id=-1;var m=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++d._nextId;this._glName=m.createRenderbuffer();this._context.bindRenderbuffer(this);m.renderbufferStorage(m.RENDERBUFFER,n.internalFormat,n.width,n.height)}Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});d.prototype.resize=function(g,n){var m=this._context.gl,f=this._desc;if(f.width!==g||f.height!==n)f.width=g,f.height=n,this._context.bindRenderbuffer(this),m.renderbufferStorage(m.RENDERBUFFER,f.internalFormat,f.width,f.height)};d.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!B)var B=1E-6;if(!p)var p="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var d={GLMAT_EPSILON:B,GLMAT_ARRAY_TYPE:p,GLMAT_RANDOM:a,setMatrixArrayType:function(m){d.GLMAT_ARRAY_TYPE=m}},g=Math.PI/180,n=180/Math.PI;d.toRadian=function(m){return m*g};d.toDegree=function(m){return m*n};d.setMatrixArrayType(Array);return d})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(B){var p=B.GLMAT_ARRAY_TYPE;B={create:function(){var a=new p(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var d=new p(6);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];return d},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=g*f-n*m;if(!e)return null;e=1/e;a[0]=f*e;a[1]=
-n*e;a[2]=-m*e;a[3]=g*e;a[4]=(m*k-f*h)*e;a[5]=(n*h-g*k)*e;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=g[0],r=g[1],q=g[2],u=g[3],v=g[4];g=g[5];a[0]=n*e+f*r;a[1]=m*e+h*r;a[2]=n*q+f*u;a[3]=m*q+h*u;a[4]=n*v+f*g+k;a[5]=m*v+h*g+d;return a}};B.mul=B.multiply;B.rotate=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=Math.sin(g);g=Math.cos(g);a[0]=n*g+f*e;a[1]=m*g+h*e;a[2]=n*-e+f*g;a[3]=m*-e+h*
g;a[4]=k;a[5]=d;return a};B.scale=function(a,d,g){var n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=g[0];g=g[1];a[0]=d[0]*e;a[1]=n*e;a[2]=m*g;a[3]=f*g;a[4]=h;a[5]=k;return a};B.translate=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=g[0];g=g[1];a[0]=n;a[1]=m;a[2]=f;a[3]=h;a[4]=n*e+f*g+k;a[5]=m*e+h*g+d;return a};B.fromRotation=function(a,d){var g=Math.sin(d),n=Math.cos(d);a[0]=n;a[1]=g;a[2]=-g;a[3]=n;a[4]=0;a[5]=0;return a};B.fromScaling=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=d[1];
a[4]=0;a[5]=0;return a};B.fromTranslation=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=d[0];a[5]=d[1];return a};B.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};B.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return B})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(B){var p=B.GLMAT_ARRAY_TYPE,a=B.GLMAT_RANDOM,
d={create:function(){var g=new p(2);g[0]=0;g[1]=0;return g},clone:function(g){var n=new p(2);n[0]=g[0];n[1]=g[1];return n},fromValues:function(g,n){var m=new p(2);m[0]=g;m[1]=n;return m},copy:function(g,n){g[0]=n[0];g[1]=n[1];return g},set:function(g,n,m){g[0]=n;g[1]=m;return g},add:function(g,n,m){g[0]=n[0]+m[0];g[1]=n[1]+m[1];return g},subtract:function(g,n,m){g[0]=n[0]-m[0];g[1]=n[1]-m[1];return g}};d.sub=d.subtract;d.multiply=function(g,n,m){g[0]=n[0]*m[0];g[1]=n[1]*m[1];return g};d.mul=d.multiply;
d.divide=function(g,n,m){g[0]=n[0]/m[0];g[1]=n[1]/m[1];return g};d.div=d.divide;d.min=function(g,n,m){g[0]=Math.min(n[0],m[0]);g[1]=Math.min(n[1],m[1]);return g};d.max=function(g,n,m){g[0]=Math.max(n[0],m[0]);g[1]=Math.max(n[1],m[1]);return g};d.scale=function(g,n,m){g[0]=n[0]*m;g[1]=n[1]*m;return g};d.scaleAndAdd=function(g,n,m,f){g[0]=n[0]+m[0]*f;g[1]=n[1]+m[1]*f;return g};d.distance=function(g,n){var m=n[0]-g[0],f=n[1]-g[1];return Math.sqrt(m*m+f*f)};d.dist=d.distance;d.squaredDistance=function(g,
n){var m=n[0]-g[0],f=n[1]-g[1];return m*m+f*f};d.sqrDist=d.squaredDistance;d.length=function(g){var n=g[0];g=g[1];return Math.sqrt(n*n+g*g)};d.len=d.length;d.squaredLength=function(g){var n=g[0];g=g[1];return n*n+g*g};d.sqrLen=d.squaredLength;d.negate=function(g,n){g[0]=-n[0];g[1]=-n[1];return g};d.inverse=function(g,n){g[0]=1/n[0];g[1]=1/n[1];return g};d.normalize=function(g,n){var m=n[0],f=n[1];m=m*m+f*f;0<m&&(m=1/Math.sqrt(m),g[0]=n[0]*m,g[1]=n[1]*m);return g};d.dot=function(g,n){return g[0]*n[0]+
g[1]*n[1]};d.cross=function(g,n,m){n=n[0]*m[1]-n[1]*m[0];g[0]=g[1]=0;g[2]=n;return g};d.lerp=function(g,n,m,f){var h=n[0];n=n[1];g[0]=h+f*(m[0]-h);g[1]=n+f*(m[1]-n);return g};d.random=function(g,n){n=n||1;var m=2*a()*Math.PI;g[0]=Math.cos(m)*n;g[1]=Math.sin(m)*n;return g};d.transformMat2=function(g,n,m){var f=n[0];n=n[1];g[0]=m[0]*f+m[2]*n;g[1]=m[1]*f+m[3]*n;return g};d.transformMat2d=function(g,n,m){var f=n[0];n=n[1];g[0]=m[0]*f+m[2]*n+m[4];g[1]=m[1]*f+m[3]*n+m[5];return g};d.transformMat3=function(g,
n,m){var f=n[0];n=n[1];g[0]=m[0]*f+m[3]*n+m[6];g[1]=m[1]*f+m[4]*n+m[7];return g};d.transformMat4=function(g,n,m){var f=n[0];n=n[1];g[0]=m[0]*f+m[4]*n+m[12];g[1]=m[1]*f+m[5]*n+m[13];return g};d.forEach=function(){var g=d.create();return function(n,m,f,h,k,e){m||(m=2);f||(f=0);for(h=h?Math.min(h*m+f,n.length):n.length;f<h;f+=m)g[0]=n[f],g[1]=n[f+1],k(g,g,e),n[f]=g[0],n[f+1]=g[1];return n}}();d.str=function(g){return"vec2("+g[0]+", "+g[1]+")"};return d})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.adjustScreenshotSettings=function(d,g){d=a({format:"png",quality:100},d);if(d.includePadding){var n=g.width;var m=g.height}else n=g.width-g.padding.left-g.padding.right,m=g.height-g.padding.top-g.padding.bottom;var f=n/m;void 0!==d.width&&void 0===d.height?d.height=d.width/f:void 0!==d.height&&void 0===d.width&&(d.width=f*d.height);void 0!==d.height&&(d.height=Math.floor(d.height));void 0!==
d.width&&(d.width=Math.floor(d.width));d.area||d.includePadding||(d.area={x:g.padding.left,y:g.padding.top,width:n,height:m});return d};p.resampleHermite=function(d,g,n,m,f,h,k){void 0===k&&(k=!0);var e=g/f;n/=h;for(var r=Math.ceil(e/2),q=Math.ceil(n/2),u=0;u<h;u++)for(var v=0;v<f;v++){for(var x=4*(v+(k?h-u-1:u)*f),z=0,A=0,y=0,c=0,b=0,l=0,t=0,w=(u+.5)*n,C=Math.floor(u*n);C<(u+1)*n;C++){var D=Math.abs(w-(C+.5))/q,E=(v+.5)*e;D*=D;for(var F=Math.floor(v*e);F<(v+1)*e;F++){var G=Math.abs(E-(F+.5))/r;z=
Math.sqrt(D+G*G);-1<=z&&1>=z&&(z=2*z*z*z-3*z*z+1,0<z&&(G=4*(F+C*g),t+=z*d[G+3],y+=z,255>d[G+3]&&(z=z*d[G+3]/250),c+=z*d[G],b+=z*d[G+1],l+=z*d[G+2],A+=z))}}m[x]=c/A;m[x+1]=b/A;m[x+2]=l/A;m[x+3]=t/y}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(B,p){function a(m,f,h){void 0===f&&(f={});switch(h){case "webgl":var k=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":k=["webgl2"];break;default:k=["webgl","experimental-webgl",
"webkit-3d","moz-webgl"]}h=null;for(var e=0;e<k.length;e++){var r=k[e];try{h=m.getContext(r,f)}catch(q){}if(h)break}return h}function d(m,f){var h=m.parentNode;h&&(h.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+f+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(p,"__esModule",{value:!0});p.createContextOrErrorHTML=
function(m,f,h){void 0===f&&(f={});if(!window.WebGLRenderingContext)return d(m,g),null;f=a(m,f,h);return f?f:(d(m,n),null)};p.createContext=a;var g='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',n='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(B,p,a,d,g,n,m){return function(){function f(h,k){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=
1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=
null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=n["default"](h)?"webgl2":"webgl";this.gl=h;h instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=m.loadCapabilities(h,k);var e=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:e[0],y:e[1],width:e[2],height:e[3]};e=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:e?this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new g);this.enforceState()}Object.defineProperty(f.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"parameters",{get:function(){return this._parameters},
enumerable:!0,configurable:!0});f.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};f.prototype.setBlendingEnabled=function(h){this._blendEnabled!==h&&(!0===h?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=h)};f.prototype.setBlendColor=function(h,k,e,r){if(h!==this._blendColorState.r||k!==this._blendColorState.g||e!==
this._blendColorState.b||r!==this._blendColorState.a)this.gl.blendColor(h,k,e,r),this._blendColorState.r=h,this._blendColorState.g=k,this._blendColorState.b=e,this._blendColorState.a=r};f.prototype.setBlendFunction=function(h,k){if(h!==this._blendFunctionState.srcRGB||k!==this._blendFunctionState.dstRGB)this.gl.blendFunc(h,k),this._blendFunctionState.srcRGB=h,this._blendFunctionState.srcAlpha=h,this._blendFunctionState.dstRGB=k,this._blendFunctionState.dstAlpha=k};f.prototype.setBlendFunctionSeparate=
function(h,k,e,r){if(this._blendFunctionState.srcRGB!==h||this._blendFunctionState.srcAlpha!==e||this._blendFunctionState.dstRGB!==k||this._blendFunctionState.dstAlpha!==r)this.gl.blendFuncSeparate(h,k,e,r),this._blendFunctionState.srcRGB=h,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=k,this._blendFunctionState.dstAlpha=r};f.prototype.setBlendEquation=function(h){this._blendEquationState.mode!==h&&(this.gl.blendEquation(h),this._blendEquationState.mode=h,this._blendEquationState.modeAlpha=
h)};f.prototype.setBlendEquationSeparate=function(h,k){if(this._blendEquationState.mode!==h||this._blendEquationState.modeAlpha!==k)this.gl.blendEquationSeparate(h,k),this._blendEquationState.mode=h,this._blendEquationState.modeAlpha=k};f.prototype.setColorMask=function(h,k,e,r){if(this._colorMaskState.r!==h||this._colorMaskState.g!==k||this._colorMaskState.b!==e||this._colorMaskState.a!==r)this.gl.colorMask(h,k,e,r),this._colorMaskState.r=h,this._colorMaskState.g=k,this._colorMaskState.b=e,this._colorMaskState.a=
r};f.prototype.setClearColor=function(h,k,e,r){if(this._clearColor.r!==h||this._clearColor.g!==k||this._clearColor.b!==e||this._clearColor.a!==r)this.gl.clearColor(h,k,e,r),this._clearColor.r=h,this._clearColor.g=k,this._clearColor.b=e,this._clearColor.a=r};f.prototype.setFaceCullingEnabled=function(h){this._polygonCullingEnabled!==h&&(!0===h?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=h)};f.prototype.setPolygonOffsetFillEnabled=function(h){this._polygonOffsetFillEnabled!==
h&&(!0===h?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=h)};f.prototype.setPolygonOffset=function(h,k){if(this._polygonOffset[0]!==h||this._polygonOffset[1]!==k)this._polygonOffset[0]=h,this._polygonOffset[1]=k,this.gl.polygonOffset(h,k)};f.prototype.setCullFace=function(h){this._cullFace!==h&&(this.gl.cullFace(h),this._cullFace=h)};f.prototype.setFrontFace=function(h){this._frontFace!==h&&(this.gl.frontFace(h),this._frontFace=
h)};f.prototype.setScissorTestEnabled=function(h){this._scissorTestEnabled!==h&&(!0===h?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=h)};f.prototype.setScissorRect=function(h,k,e,r){if(this._scissorRect.x!==h||this._scissorRect.y!==k||this._scissorRect.width!==e||this._scissorRect.height!==r)this.gl.scissor(h,k,e,r),this._scissorRect.x=h,this._scissorRect.y=k,this._scissorRect.width=e,this._scissorRect.height=r};f.prototype.setDepthTestEnabled=
function(h){this._depthTestEnabled!==h&&(!0===h?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=h)};f.prototype.setClearDepth=function(h){this._clearDepth!==h&&(this.gl.clearDepth(h),this._clearDepth=h)};f.prototype.setDepthFunction=function(h){this._depthFunction!==h&&(this.gl.depthFunc(h),this._depthFunction=h)};f.prototype.setDepthWriteEnabled=function(h){this._depthWriteEnabled!==h&&(this.gl.depthMask(h),this._depthWriteEnabled=h)};f.prototype.setDepthRange=
function(h,k){if(this._depthRange.zNear!==h||this._depthRange.zFar!==k)this.gl.depthRange(h,k),this._depthRange.zNear=h,this._depthRange.zFar=k};f.prototype.setStencilTestEnabled=function(h){this._stencilTestEnabled!==h&&(!0===h?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=h)};f.prototype.setClearStencil=function(h){h!==this._clearStencil&&(this.gl.clearStencil(h),this._clearStencil=h)};f.prototype.setStencilFunction=function(h,k,e){if(this._stencilFunction.func!==
h||this._stencilFunction.ref!==k||this._stencilFunction.mask!==e)this.gl.stencilFunc(h,k,e),this._stencilFunction.face=1032,this._stencilFunction.func=h,this._stencilFunction.ref=k,this._stencilFunction.mask=e};f.prototype.setStencilFunctionSeparate=function(h,k,e,r){if(this._stencilFunction.face!==h||this._stencilFunction.func!==k||this._stencilFunction.ref!==e||this._stencilFunction.mask!==r)this.gl.stencilFuncSeparate(h,k,e,r),this._stencilFunction.face=h,this._stencilFunction.func=k,this._stencilFunction.ref=
e,this._stencilFunction.mask=r};f.prototype.setStencilWriteMask=function(h){this._stencilWriteMask!==h&&(this.gl.stencilMask(h),this._stencilWriteMask=h)};f.prototype.setStencilOp=function(h,k,e){if(this._stencilOperation.fail!==h||this._stencilOperation.zFail!==k||this._stencilOperation.zPass!==e)this.gl.stencilOp(h,k,e),this._stencilOperation.face=1032,this._stencilOperation.fail=h,this._stencilOperation.zFail=k,this._stencilOperation.zPass=e};f.prototype.setStencilOpSeparate=function(h,k,e,r){if(this._stencilOperation.face!==
h||this._stencilOperation.fail!==k||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==r)this.gl.stencilOpSeparate(h,k,e,r),this._stencilOperation.face=h,this._stencilOperation.face=h,this._stencilOperation.fail=k,this._stencilOperation.zFail=e,this._stencilOperation.zPass=r};f.prototype.setLineWidth=function(h){var k=this._lineWidth;this._lineWidth!==h&&(this.gl.lineWidth(h),this._lineWidth=h);return k};f.prototype.setActiveTexture=function(h){var k=this._activeTextureUnit;0<=h&&h!==
this._activeTextureUnit&&(this.gl.activeTexture(d.BASE_TEXTURE_UNIT+h),this._activeTextureUnit=h);return k};f.prototype.clear=function(h){h&&this.gl.clear(h)};f.prototype.drawArrays=function(h,k,e){this.gl.drawArrays(h,k,e)};f.prototype.drawElements=function(h,k,e,r){5123===e?this.gl.drawElements(h,k,e,r):5125===e&&this.gl.drawElements(h,k,e,r)};Object.defineProperty(f.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});f.prototype.setViewport=function(h,
k,e,r){var q=this._viewport;if(q.x!==h||q.y!==k||q.width!==e||q.height!==r)q.x=h,q.y=k,q.width=e,q.height=r,this.gl.viewport(h,k,e,r)};f.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};f.prototype.bindProgram=function(h){h?this._activeShaderProgram!==h&&(h.initialize(),this.gl.useProgram(h.glName),this._activeShaderProgram=h):(this.gl.useProgram(null),this._activeShaderProgram=null)};f.prototype.bindTexture=function(h,
k){void 0===k&&(k=0);-1===f._MAX_TEXTURE_IMAGE_UNITS&&(f._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var e=this._textureUnitMap[k];this.setActiveTexture(k);null==h||null==h.glName?(null!=e&&(this.gl.bindTexture(e.descriptor.target,null),e.setBoundToUnit(k,!1)),this._textureUnitMap[k]=null):e&&e.id===h.id?h.applyChanges():(this.gl.bindTexture(h.descriptor.target,h.glName),h.setBoundToUnit(k,!0),h.applyChanges(),this._textureUnitMap[k]=h)};f.prototype.bindFramebuffer=
function(h){h?this._activeFramebuffer!==h&&(h.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,h.glName),this._activeFramebuffer=h):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};f.prototype.bindBuffer=function(h){h&&(34962===h.bufferType?this._activeVertexBuffer=f._bindBuffer(this.gl,h,h.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=f._bindBuffer(this.gl,h,h.bufferType,this._activeIndexBuffer))};f.prototype.bindRenderbuffer=function(h){var k=
this.gl;h||(k.bindRenderbuffer(k.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==h&&(k.bindRenderbuffer(k.RENDERBUFFER,h.glName),this._activeRenderbuffer=h)};f.prototype.unbindBuffer=function(h){34962===h?this._activeVertexBuffer=f._bindBuffer(this.gl,null,h,this._activeVertexBuffer):this._activeIndexBuffer=f._bindBuffer(this.gl,null,h,this._activeIndexBuffer)};f.prototype.bindVAO=function(h){h?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===h.id||(h.bind(),
this._activeVertexArrayObject=h):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};f.prototype.getBoundTexture=function(h){return this._textureUnitMap[h]};f.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};f.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};f.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(var h=0;h<this.parameters.maxTextureImageUnits;h++)this.bindTexture(null,h);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};f.prototype.enforceState=function(){var h=this.gl,k=this._capabilities.vao;k&&k.bindVertexArray(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)h.disableVertexAttribArray(e);
this._activeVertexBuffer?h.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):h.bindBuffer(34962,null);this._activeIndexBuffer?h.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):h.bindBuffer(34963,null);if(k&&this._activeVertexArrayObject){if(k=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(k)}h.bindFramebuffer(h.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);h.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);h.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);h.bindRenderbuffer(h.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?h.enable(this.gl.BLEND):h.disable(this.gl.BLEND);h.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);h.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);h.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);h.clearDepth(this._clearDepth);h.clearStencil(this._clearStencil);h.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);h.cullFace(this._cullFace);h.depthFunc(this._depthFunction);h.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST);h.depthMask(this._depthWriteEnabled);h.frontFace(this._frontFace);h.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE);h.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?h.enable(h.POLYGON_OFFSET_FILL):h.disable(h.POLYGON_OFFSET_FILL);h.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
h.enable(h.SCISSOR_TEST):h.disable(h.SCISSOR_TEST);h.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);h.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST);h.stencilMask(this._stencilWriteMask);for(k=0;k<this.parameters.maxTextureImageUnits;k++)h.activeTexture(d.BASE_TEXTURE_UNIT+k),h.bindTexture(3553,
null),(e=this._textureUnitMap[k])&&h.bindTexture(e.descriptor.target,e.glName);h.activeTexture(d.BASE_TEXTURE_UNIT+this._activeTextureUnit);h.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};f._bindBuffer=function(h,k,e,r){if(!k)return h.bindBuffer(e,null),null;if(r===k)return r;h.bindBuffer(e,k.glName);return k};f._MAX_TEXTURE_IMAGE_UNITS=-1;return f}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,
"__esModule",{value:!0});p.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require","exports"],function(B,p){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;
break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};a.prototype.decrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},
"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p["default"]=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(B,p,a,d,g,n){function m(f,h,k,e,r){if(e&&
g["default"](f))return!0;if(h[k])return!1;for(h=0;h<r.length;h++)if(f.getExtension(r[h]))return!0;return!1}Object.defineProperty(p,"__esModule",{value:!0});p.loadCapabilities=function(f,h){var k=h&&h.disabledExtensions||{},e=d.load(f,k),r=n.load(f,k);var q=k.compressedTextureS3TC?null:(q=f.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:q.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:q.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:q.COMPRESSED_RGBA_S3TC_DXT3_EXT,
COMPRESSED_RGBA_S3TC_DXT5:q.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var u=k.textureFilterAnisotropic?null:(u=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:u.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:u.TEXTURE_MAX_ANISOTROPY_EXT}:null;var v=a.load(f,k);if(g["default"](f))var x=k.colorBufferFloat||!f.getExtension("EXT_color_buffer_float")?null:{R16F:f.R16F,
RG16F:f.RG16F,RGBA16F:f.RGBA16F,R32F:f.R32F,RG32F:f.RG32F,RGBA32F:f.RGBA32F,R11F_G11F_B10F:f.R11F_G11F_B10F};else if(f instanceof WebGLRenderingContext){x=!k.colorBufferFloat&&f.getExtension("EXT_color_buffer_half_float");var z=!k.colorBufferFloat&&f.getExtension("WEBGL_color_buffer_float");x=x||z?{RGBA16F:x?x.RGBA16F_EXT:void 0,RGBA32F:z?z.RGBA32F_EXT:void 0}:null}else x=void 0;z=g["default"](f)?{MIN:f.MIN,MAX:f.MAX}:k.blendMinMax?null:(z=f.getExtension("EXT_blend_minmax"))?{MIN:z.MIN_EXT,MAX:z.MAX_EXT}:
null;return{instancing:e,vao:r,compressedTextureS3TC:q,textureFilterAnisotropic:u,disjointTimerQuery:v,colorBufferFloat:x,blendMinMax:z,depthTexture:m(f,k,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:m(f,k,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:m(f,k,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:m(f,k,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:m(f,k,
"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.load=function(d,g){if(g.disjointTimerQuery)return null;var n=d.getExtension("EXT_disjoint_timer_query")||d.getExtension("EXT_disjoint_timer_query_webgl2");return n?a["default"](d)?{createQuery:function(){return d.createQuery()},resultAvailable:function(m){return d.getQueryParameter(m,
d.QUERY_RESULT_AVAILABLE)},getResult:function(m){return d.getQueryParameter(m,d.QUERY_RESULT)},disjoint:function(){return d.getParameter(n.GPU_DISJOINT_EXT)},beginTimeElapsed:function(m){return d.beginQuery(n.TIME_ELAPSED_EXT,m)},endTimeElapsed:function(){return d.endQuery(n.TIME_ELAPSED_EXT)},createTimestamp:function(m){return n.queryCounterEXT(m,n.TIMESTAMP_EXT)},timestampBits:function(){return d.getQuery(n.TIMESTAMP_EXT,n.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return n.createQueryEXT()},
resultAvailable:function(m){return n.getQueryObjectEXT(m,n.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(m){return n.getQueryObjectEXT(m,n.QUERY_RESULT_EXT)},disjoint:function(){return d.getParameter(n.GPU_DISJOINT_EXT)},beginTimeElapsed:function(m){return n.beginQueryEXT(n.TIME_ELAPSED_EXT,m)},endTimeElapsed:function(){return n.endQueryEXT(n.TIME_ELAPSED_EXT)},createTimestamp:function(m){return n.queryCounterEXT(m,n.TIMESTAMP_EXT)},timestampBits:function(){return n.getQueryEXT(n.TIMESTAMP_EXT,
n.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.load=function(d,g){if(a["default"](d))return{drawArraysInstanced:d.drawArraysInstanced.bind(d),drawElementsInstanced:d.drawElementsInstanced.bind(d),vertexAttribDivisor:d.vertexAttribDivisor.bind(d)};if(g.angleInstancedArrays)return null;var n=d.getExtension("ANGLE_instanced_arrays");
return n?{drawArraysInstanced:n.drawArraysInstancedANGLE.bind(n),drawElementsInstanced:n.drawElementsInstancedANGLE.bind(n),vertexAttribDivisor:n.vertexAttribDivisorANGLE.bind(n)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.load=function(d,g){if(a["default"](d))return{createVertexArray:d.createVertexArray.bind(d),deleteVertexArray:d.deleteVertexArray.bind(d),
bindVertexArray:d.bindVertexArray.bind(d)};if(g.vao)return null;var n=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object");return n?{createVertexArray:n.createVertexArrayOES.bind(n),deleteVertexArray:n.deleteVertexArrayOES.bind(n),bindVertexArray:n.bindVertexArrayOES.bind(n)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./TextureManager ./Utils ./WGLPainter ./WGLRendererInfo".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A){Object.defineProperty(p,"__esModule",{value:!0});B=function(y){function c(b){var l=y.call(this)||this;l._rendererInfo=new A;l._stage=new e;l._container=null;l._tileCoordinateScale=f.create();l._orientationVec=f.fromValues(0,0,1);l._displayScale=f.create();l._defaultTransform=m.create();l._pointToCallbacks=new Map;l._highlightIDs=new Set;l._tileId=void 0;l._patches={};l._displayWidth=0;l._displayHeight=0;l._highlightOptionsUpToDate=!1;l.layer=null;l.textureManager=
new v;l.highlightOptions=b.highlightOptions;l.tileInfoView=b.tileInfoView;l._stage.useContextVersion("webgl");l.layer=b.layer;l._layerView=b.layerView;return l}d(c,y);c.prototype.dispose=function(){this.textureManager&&(this.textureManager.dispose(),this.textureManager=null);this.removeAllChildren();for(var b=0,l=this.children;b<l.length;b++)l[b].dispose()};c.prototype.disposeWebGLResources=function(){for(var b=0,l=this.children;b<l.length;b++)l[b].clear()};c.prototype.displayWidth=function(){return this._displayWidth};
Object.defineProperty(c.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(b){this._highlightOptions=b;this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visualVariablesInfo",{get:function(){return this._visualVariablesInfo},set:function(b){this._visualVariablesInfo=b;this.requestRender()},
enumerable:!0,configurable:!0});c.prototype.install=function(b){b.addChild(this._stage);this._stage.addChild(this);this._container=b};c.prototype.uninstall=function(b){b.removeChild(this._stage);this._stage.removeChild(this);this.dispose();this._container=null};c.prototype.hitTest=function(b,l){var t=this,w=[b,l];return g.create(function(C,D){t._pointToCallbacks.set(w,{resolve:C,reject:D});t.requestRender()},function(){t._pointToCallbacks.has(w)&&t._pointToCallbacks["delete"](w)})};c.prototype.highlight=
function(b){var l=this;l.addHighlight(b);return{remove:function(){l.removeHighlight(b)}}};c.prototype.setHighlight=function(b){this._highlightIDs.clear();this.addHighlight(b)};c.prototype.setVisibility=function(b,l){for(var t=function(D){if(D.data){var E=D.data.tileDisplayData.displayObjectRegistry,F=b.filter(function(G){return E.has(G.id)});D.setVisibility(F,l)}},w=0,C=this.children;w<C.length;w++)t(C[w])};c.prototype.setVisibilityRange=function(b,l,t,w){for(var C=0,D=this.children;C<D.length;C++){var E=
D[C];E.data&&E.data.tileDisplayData.displayObjectRegistry.has(b)&&E.setVisibilityRange(b,l,t,w)}};c.prototype.addHighlight=function(b){for(var l=0;l<b.length;l++)this._highlightIDs.add(b[l]);this._buildHLList()};c.prototype.removeHighlight=function(b){for(var l=0;l<b.length;l++)this._highlightIDs["delete"](b[l]);this._buildHLList()};c.prototype.getMaterialItems=function(b){if(b&&0!==b.length){for(var l=[],t=0;t<b.length;t++){var w=b[t];l.push(this.textureManager.rasterizeItem(w.symbol,w.glyphIds))}return n.all(l).then(function(C){return C.map(function(D,
E){return{id:E,mosaicItem:D}})})}};c.prototype.onTileData=function(b,l){var t=null;l&&(t=r.decode(l));b.setData(t,null!=this.visualVariablesInfo.vvFields,this.layer.labelsVisible);b.buildHLList(this._highlightIDs);this._layerView&&this._layerView.view.labelManager.requestUpdate();this.addChild(b);this._stage.fadeInLabels();this.requestRender()};c.prototype.onTileDataUpdate=function(b,l){this._patches[b.key.id]=this._patches[b.key.id]||[];this._patches[b.key.id].push({tile:b,patch:l});this._stage.fadeInLabels();
this.requestRender()};c.prototype.onTileError=function(b){b.clear();b.buildHLList(this._highlightIDs);this.addChild(b);this.requestRender()};c.prototype.addChild=function(b){var l=y.prototype.addChild.call(this,b);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.addTile(this.layer.uid,b);this._buildHLList();return l};c.prototype.removeChild=function(b){var l=y.prototype.removeChild.call(this,b);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.removeTile(this.layer.uid,
b.key.id);this._buildHLList();return l};c.prototype.prepareChildrenRenderParameters=function(b){this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,b.state);var l=this.tileInfoView.getClosestInfoForScale(b.state.scale).level,t=this.tileInfoView.tileInfo.scaleToZoom(b.state.scale);return a({},b,{rendererInfo:this._rendererInfo,requiredLevel:l,displayLevel:t})};c.prototype.renderChildren=function(b){for(var l=this,t=0;this._nextTile()&&4>t;){for(var w=0,C=this._patches[this._tileId];w<
C.length;w++){var D=C[w];this._patchTileVisuals(D.tile,D.patch)}delete this._patches[this._tileId];++t}t=b.painter;t.bindTextureManager(this.textureManager);this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,b.state);this.sortChildren(function(E,F){return 0!==E.key.level-F.key.level?E.key.level-F.key.level:0!==E.key.row-F.key.row?E.key.row-F.key.row:E.key.col-F.key.col});w=z["default"].toWGLDrawPhases(b.drawPhase);if(0<w.length&&w[0]===q.WGLDrawPhase.LABEL||w[0]===q.WGLDrawPhase.LABEL_ALPHA){C=
this.layer;if(!(C.labelsVisible&&C.labelingInfo&&0<C.labelingInfo.length))return;this._updateTilesTransform(b.state,b.requiredLevel);t.update(b.state,b.pixelRatio)}t.draw(b,this.children,w,this._painterOptions);0<this._highlightIDs.size&&t.highlight(b,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(E,F){E.resolve(l._hitTest(b,F[0],F[1]))}),this._pointToCallbacks.clear())};c.prototype.attachChild=function(b,l){return b.attach(l)};c.prototype.detachChild=function(b,
l){b.detach(l)};c.prototype.renderChild=function(b,l){b.doRender(l)};c.prototype.beforeRenderChildren=function(b,l){this._updateTilesTransform(b.state,this.tileInfoView.getClosestInfoForScale(b.state.scale).level);this._updateHighlightOptions();this._stage.opacity=this._container.opacity};c.prototype._hitTest=function(b,l,t){var w=b.painter,C=b.requiredLevel,D=[0,0];b.state.toMap(D,[l,t]);l=b.state.clone();t=l.viewpoint.clone();t.targetGeometry=new h(D[0],D[1],b.state.spatialReference);l.viewpoint=
t;l.size=[x.C_HITTEST_SEARCH_SIZE,x.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(l,C);w.update(l,b.pixelRatio);return w.hitTest({context:b.context,drawPhase:q.WGLDrawPhase.HITTEST,painter:w,pixelRatio:b.pixelRatio,displayLevel:b.displayLevel,rendererInfo:this._rendererInfo,requiredLevel:C,state:l,stationary:b.stationary},this.children)};c.prototype._updateTilesTransform=function(b,l){var t=1/b.width,w=1/b.height,C=[0,0];this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[l].resolution,
b.resolution,b.rotation,this.tileInfoView.tileInfo.size[0],b.width,b.height,this._defaultTransform);for(var D=0,E=this.children;D<E.length;D++){var F=E[D];b.toScreen(C,F.coords);C[1]=b.height-C[1];F.tileTransform.displayCoord[0]=2*C[0]*t-1;F.tileTransform.displayCoord[1]=2*C[1]*w-1;F.key.level===l?F.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[F.key.level].resolution,b.resolution,b.rotation,this.tileInfoView.tileInfo.size[0],
b.width,b.height,F.tileTransform.transform)}};c.prototype._calculateRelativeViewProjMat=function(b,l,t,w,C,D,E){b/=l;this._tileCoordinateScale.set([b,b,1]);if(C!==this._displayWidth||D!==this._displayHeight)this._displayScale.set([2/C,-2/D,1]),this._displayWidth=C,this._displayHeight=D;m.identity(E);m.scale(E,E,this._tileCoordinateScale);m.rotate(E,E,-t*u.C_DEG_TO_RAD,this._orientationVec);m.scale(E,E,this._displayScale);m.transpose(E,E)};c.prototype._updateHighlightOptions=function(){if(!this._highlightOptionsUpToDate&&
this.parent){var b=this.parent.glPainter,l=this._highlightOptions;if(b){var t=l.color.toRgba();t[0]/=255;t[1]/=255;t[2]/=255;var w=t.slice();t[3]*=l.fillOpacity;w[3]*=l.haloOpacity;b.setHighlightOptions({fillColor:t,outlineColor:w,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0})}}};c.prototype._buildHLList=function(){for(var b=0,l=this.children;b<l.length;b++)l[b].buildHLList(this._highlightIDs);this.requestRender()};c.prototype._nextTile=function(){var b=Object.keys(this._patches);
if(0===b.length)return this._tileId=void 0,!1;if(!this._tileId)return this._tileId=b[0],!0;var l=b.indexOf(this._tileId);l=(l+1)%b.length;this._tileId=b[l];return!0};c.prototype._patchTileVisuals=function(b,l){var t=l.addOrUpdate?r.decode(l.addOrUpdate):null;b.patchData({remove:l.remove||[],addOrUpdate:t},this.layer.labelsVisible);b.buildHLList(this._highlightIDs);this.contains(b)||this.addChild(b)};return c}(k);p["default"]=B})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(B){var p={create:function(){var a=new B.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var d=new B.ARRAY_TYPE(3);d[0]=a[0];d[1]=a[1];d[2]=a[2];return d},fromValues:function(a,d,g){var n=new B.ARRAY_TYPE(3);n[0]=a;n[1]=d;n[2]=g;return n},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];return a},set:function(a,d,g,n){a[0]=d;a[1]=g;a[2]=n;return a},add:function(a,d,g){a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a},subtract:function(a,d,g){a[0]=d[0]-g[0];a[1]=d[1]-g[1];
a[2]=d[2]-g[2];return a}};p.sub=p.subtract;p.multiply=function(a,d,g){a[0]=d[0]*g[0];a[1]=d[1]*g[1];a[2]=d[2]*g[2];return a};p.mul=p.multiply;p.divide=function(a,d,g){a[0]=d[0]/g[0];a[1]=d[1]/g[1];a[2]=d[2]/g[2];return a};p.div=p.divide;p.ceil=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);a[2]=Math.ceil(d[2]);return a};p.floor=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);a[2]=Math.floor(d[2]);return a};p.min=function(a,d,g){a[0]=Math.min(d[0],g[0]);a[1]=Math.min(d[1],g[1]);
a[2]=Math.min(d[2],g[2]);return a};p.max=function(a,d,g){a[0]=Math.max(d[0],g[0]);a[1]=Math.max(d[1],g[1]);a[2]=Math.max(d[2],g[2]);return a};p.round=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);a[2]=Math.round(d[2]);return a};p.scale=function(a,d,g){a[0]=d[0]*g;a[1]=d[1]*g;a[2]=d[2]*g;return a};p.scaleAndAdd=function(a,d,g,n){a[0]=d[0]+g[0]*n;a[1]=d[1]+g[1]*n;a[2]=d[2]+g[2]*n;return a};p.distance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1],m=d[2]-a[2];return Math.sqrt(g*g+n*n+m*m)};p.dist=
p.distance;p.squaredDistance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1],m=d[2]-a[2];return g*g+n*n+m*m};p.sqrDist=p.squaredDistance;p.length=function(a){var d=a[0],g=a[1];a=a[2];return Math.sqrt(d*d+g*g+a*a)};p.len=p.length;p.squaredLength=function(a){var d=a[0],g=a[1];a=a[2];return d*d+g*g+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];a[2]=-d[2];return a};p.inverse=function(a,d){a[0]=1/d[0];a[1]=1/d[1];a[2]=1/d[2];return a};p.normalize=function(a,d){var g=d[0],n=d[1],
m=d[2];g=g*g+n*n+m*m;0<g&&(g=1/Math.sqrt(g),a[0]=d[0]*g,a[1]=d[1]*g,a[2]=d[2]*g);return a};p.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};p.cross=function(a,d,g){var n=d[0],m=d[1];d=d[2];var f=g[0],h=g[1];g=g[2];a[0]=m*g-d*h;a[1]=d*f-n*g;a[2]=n*h-m*f;return a};p.lerp=function(a,d,g,n){var m=d[0],f=d[1];d=d[2];a[0]=m+n*(g[0]-m);a[1]=f+n*(g[1]-f);a[2]=d+n*(g[2]-d);return a};p.hermite=function(a,d,g,n,m,f){var h=f*f,k=h*(2*f-3)+1,e=h*(f-2)+f,r=h*(f-1);f=h*(3-2*f);a[0]=d[0]*k+g[0]*e+n[0]*r+
m[0]*f;a[1]=d[1]*k+g[1]*e+n[1]*r+m[1]*f;a[2]=d[2]*k+g[2]*e+n[2]*r+m[2]*f;return a};p.bezier=function(a,d,g,n,m,f){var h=1-f,k=h*h,e=f*f,r=k*h;k*=3*f;h*=3*e;f*=e;a[0]=d[0]*r+g[0]*k+n[0]*h+m[0]*f;a[1]=d[1]*r+g[1]*k+n[1]*h+m[1]*f;a[2]=d[2]*r+g[2]*k+n[2]*h+m[2]*f;return a};p.random=function(a,d){d=d||1;var g=2*B.RANDOM()*Math.PI,n=2*B.RANDOM()-1,m=Math.sqrt(1-n*n)*d;a[0]=Math.cos(g)*m;a[1]=Math.sin(g)*m;a[2]=n*d;return a};p.transformMat4=function(a,d,g){var n=d[0],m=d[1];d=d[2];var f=g[3]*n+g[7]*m+g[11]*
d+g[15];f=f||1;a[0]=(g[0]*n+g[4]*m+g[8]*d+g[12])/f;a[1]=(g[1]*n+g[5]*m+g[9]*d+g[13])/f;a[2]=(g[2]*n+g[6]*m+g[10]*d+g[14])/f;return a};p.transformMat3=function(a,d,g){var n=d[0],m=d[1];d=d[2];a[0]=n*g[0]+m*g[3]+d*g[6];a[1]=n*g[1]+m*g[4]+d*g[7];a[2]=n*g[2]+m*g[5]+d*g[8];return a};p.transformQuat=function(a,d,g){var n=d[0],m=d[1],f=d[2];d=g[0];var h=g[1],k=g[2];g=g[3];var e=g*n+h*f-k*m,r=g*m+k*n-d*f,q=g*f+d*m-h*n;n=-d*n-h*m-k*f;a[0]=e*g+n*-d+r*-k-q*-h;a[1]=r*g+n*-h+q*-d-e*-k;a[2]=q*g+n*-k+e*-h-r*-d;
return a};p.rotateX=function(a,d,g,n){var m=[],f=[];m[0]=d[0]-g[0];m[1]=d[1]-g[1];m[2]=d[2]-g[2];f[0]=m[0];f[1]=m[1]*Math.cos(n)-m[2]*Math.sin(n);f[2]=m[1]*Math.sin(n)+m[2]*Math.cos(n);a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];return a};p.rotateY=function(a,d,g,n){var m=[],f=[];m[0]=d[0]-g[0];m[1]=d[1]-g[1];m[2]=d[2]-g[2];f[0]=m[2]*Math.sin(n)+m[0]*Math.cos(n);f[1]=m[1];f[2]=m[2]*Math.cos(n)-m[0]*Math.sin(n);a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];return a};p.rotateZ=function(a,d,g,n){var m=
[],f=[];m[0]=d[0]-g[0];m[1]=d[1]-g[1];m[2]=d[2]-g[2];f[0]=m[0]*Math.cos(n)-m[1]*Math.sin(n);f[1]=m[0]*Math.sin(n)+m[1]*Math.cos(n);f[2]=m[2];a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];return a};p.forEach=function(){var a=p.create();return function(d,g,n,m,f,h){g||(g=3);n||(n=0);for(m=m?Math.min(m*g+n,d.length):d.length;n<m;n+=g)a[0]=d[n],a[1]=d[n+1],a[2]=d[n+2],f(a,a,h),d[n]=a[0],d[n+1]=a[1],d[n+2]=a[2];return d}}();p.angle=function(a,d){var g=p.fromValues(a[0],a[1],a[2]),n=p.fromValues(d[0],d[1],
d[2]);p.normalize(g,g);p.normalize(n,n);g=p.dot(g,n);return 1<g?0:Math.acos(g)};p.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};p.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]};p.equals=function(a,d){var g=a[0],n=a[1],m=a[2],f=d[0],h=d[1],k=d[2];return Math.abs(g-f)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(f))&&Math.abs(n-h)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(m-k)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(k))};return p})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k){function e(u){return u&&("esri.geometry.SpatialReference"===u.declaredClass||null!=u.wkid)}var r=[0,0],q=g.getLogger("esri.geometry.Point");B=function(u){function v(z,A,y,c,b){z=u.call(this)||this;z.x=0;z.y=0;z.z=void 0;z.m=void 0;z.type="point";return z}a(v,u);var x=v;v.copy=function(z,A){A.x=z.x;A.y=z.y;A.z=z.z;A.m=z.m;A.spatialReference=Object.isFrozen(z.spatialReference)?z.spatialReference:z.spatialReference.clone()};v.distance=function(z,A){var y=z.x-A.x,c=z.y-A.y,
b=z.hasZ&&A.hasZ?z.z-A.z:0;return Math.sqrt(y*y+c*c+b*b)};v.prototype.normalizeCtorArgs=function(z,A,y,c,b){if(Array.isArray(z)){var l=z;b=A;z=l[0];A=l[1];y=l[2];c=l[3]}else if(z&&"object"===typeof z){if(l=z,z=null!=l.x?l.x:l.longitude,A=null!=l.y?l.y:l.latitude,y=null!=l.z?l.z:l.altitude,c=l.m,(b=l.spatialReference)&&"esri.geometry.SpatialReference"!==b.declaredClass&&(b=new f(b)),null!=l.longitude||null!=l.latitude)null==l.longitude?q.warn(".longitude\x3d","Latitude was defined without longitude"):
null==l.latitude?q.warn(".latitude\x3d","Longitude was defined without latitude"):!l.declaredClass&&b&&b.isWebMercator&&(A=k.lngLatToXY(l.longitude,l.latitude,r),z=A[0],A=A[1])}else e(y)?(b=y,y=null):e(c)&&(b=c,c=null);z={x:z,y:A};null!=b&&(z.spatialReference=b);null!=y&&(z.z=y);null!=c&&(z.m=c);return z};Object.defineProperty(v.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(z){var A=this._get("hasM");z!==A&&(this._set("m",z?0:void 0),this._set("hasM",z))},enumerable:!0,configurable:!0});
Object.defineProperty(v.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(z){var A=this._get("hasZ");z!==A&&(this._set("z",z?0:void 0),this._set("hasZ",z))},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"latitude",{get:function(){var z=this._get("spatialReference");if(z){if(z.isWebMercator)return k.xyToLngLat(this.x,this.y,r)[1];if(z.isWGS84)return this._get("y")}return null},set:function(z){var A=this._get("spatialReference");A&&(A.isWebMercator?this._set("y",
k.lngLatToXY(this.x,z,r)[1]):A.isWGS84&&this._set("y",z),this._set("latitude",z))},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"longitude",{get:function(){var z=this._get("spatialReference");if(z){if(z.isWebMercator)return k.xyToLngLat(this._get("x"),this._get("y"),r)[0];if(z.isWGS84)return this._get("x")}return null},set:function(z){var A=this._get("spatialReference");A&&(A.isWebMercator?this._set("x",k.lngLatToXY(z,this._get("y"),r)[0]):A.isWGS84&&this._set("x",z),this._set("longitude",
z))},enumerable:!0,configurable:!0});v.prototype.clone=function(){var z=new x;z.x=this.x;z.y=this.y;z.z=this.z;z.m=this.m;z.spatialReference=this.spatialReference;return z};v.prototype.copy=function(z){x.copy(z,this);return this};v.prototype.equals=function(z){if(!z)return!1;var A=this.x,y=this.y,c=this.z,b=this.m,l=this.spatialReference,t=z.z,w=z.m,C=z.x,D=z.y;z=z.spatialReference;if(!l.equals(z))if(l.isWebMercator&&z.isWGS84)D=k.lngLatToXY(C,D),C=D[0],D=D[1],z=l;else if(l.isWGS84&&z.isWebMercator)D=
k.xyToLngLat(C,D),C=D[0],D=D[1],z=l;else return!1;return A===C&&y===D&&c===t&&b===w&&l.wkid===z.wkid};v.prototype.offset=function(z,A,y){this.x+=z;this.y+=A;null!=y&&this.hasZ&&(this.z+=y);return this};v.prototype.normalize=function(){if(!this.spatialReference)return this;var z=h.getInfo(this.spatialReference);if(!z)return this;var A=this.x,y=z.valid;z=y[0];var c=y[1];y=2*c;A>c?(z=Math.ceil(Math.abs(A-c)/y),A-=z*y):A<z&&(z=Math.ceil(Math.abs(A-z)/y),A+=z*y);this._set("x",A);return this};v.prototype.distance=
function(z){return x.distance(this,z)};v.prototype.toArray=function(){var z=this.hasZ,A=this.hasM;return z&&A?[this.x,this.y,this.z,this.m]:z?[this.x,this.y,this.z]:A?[this.x,this.y,this.m]:[this.x,this.y]};v.prototype.toJSON=function(z){return this.write(null,z)};d([n.property({dependsOn:["x","y","z","m","spatialReference"]})],v.prototype,"cache",void 0);d([n.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasM",null);d([n.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],v.prototype,"hasZ",null);d([n.property({type:Number,dependsOn:["y"]})],v.prototype,"latitude",null);d([n.property({type:Number,dependsOn:["x"]})],v.prototype,"longitude",null);d([n.property({type:Number,json:{write:{isRequired:!0}}})],v.prototype,"x",void 0);d([n.property({type:Number,json:{write:!0}})],v.prototype,"y",void 0);d([n.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],v.prototype,
"z",void 0);d([n.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],v.prototype,"m",void 0);return v=x=d([n.subclass("esri.geometry.Point")],v)}(n.declared(m));B.prototype.toJSON.isDefaultToJSON=!0;return B})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(B,p){return function(a,d){a.__bases__=d.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(B,
p,a,d){var g=arguments.length,n=3>g?p:null===d?d=Object.getOwnPropertyDescriptor(p,a):d,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(B,p,a,d);else for(var f=B.length-1;0<=f;f--)if(m=B[f])n=(3>g?m(n):3<g?m(p,a,n):m(p,a))||n;return 3<g&&n&&Object.defineProperty(p,a,n),n}})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){function r(q){for(var u in q)p.hasOwnProperty(u)||(p[u]=q[u])}Object.defineProperty(p,"__esModule",{value:!0});r(a);r(d);r(g);r(n);r(m);r(f);r(h);r(k);r(e)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.aliasOf=function(d){return function(g,n){a.getPropertyMetadata(g,n).aliasOf=d}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(B,p){function a(f){return null!=f.__accessorMetadata__}function d(f){return a(f)&&null!=g(f).properties}function g(f){f.__accessorMetadata__||Object.defineProperty(f,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return f.__accessorMetadata__}function n(f){f=g(f);var h=f.properties;h||(h=f.properties={});return h}function m(f,h){var k=g(f),e=k.parameters;e||(e=k.parameters={});k=e[h];k||(k=[],e[h]=k);return k}Object.defineProperty(p,"__esModule",{value:!0});
p.hasMetadata=a;p.hasPropertiesMetadata=d;p.hasPropertyMetadata=function(f,h){return d(f)&&null!=n(f)[h]};p.hasParametersMetadata=function(f,h){return a(f)&&null!=g(f).parameters&&null!=g(f).parameters[h]};p.getMetadata=g;p.getPropertiesMetadata=n;p.getPropertyMetadata=function(f,h){var k=n(f),e=k[h];e||(e=k[h]={});return e};p.setPropertyMetadata=function(f,h,k){n(f)[h]=k};p.getParametersMetadata=m;p.getParameterMetadata=function(f,h,k){var e=m(f,h)[k];e||(m(f,h)[k]=e={index:k});return e}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.autoDestroy=function(){return function(d,g,n){a.getMetadata(d).autoDestroy=!0;return d[g]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(B,p,a,d){function g(k){var e="_meta"in k?a.ensureType(k):k;return function(){for(var r=[],q=0;q<arguments.length;q++)r[q]=arguments[q];r.push(e);return"number"===typeof r[2]?
m.apply(this,r):n.apply(this,r)}}function n(k,e,r,q){d.getPropertyMetadata(k,e).cast=q}function m(k,e,r,q){d.getParameterMetadata(k,e,r).cast=q}function f(k){return function(e,r,q){d.getPropertyMetadata(e,k).cast=e[r]}}Object.defineProperty(p,"__esModule",{value:!0});var h=Object.prototype.toString;p.autocastMethod=function(k,e,r){if(d.hasParametersMetadata(k,e)){var q=d.getParametersMetadata(k,e).filter(function(v){return null!=v.cast});if(q.length){var u=r.value;r.value=function(){for(var v=[],
x=0;x<arguments.length;x++)v[x]=arguments[x];for(x=0;x<q.length;x++){var z=q[x];v[z.index]=z.cast(v[z.index])}return u.apply(this,v)};return r}}};p.cast=function(){for(var k=[],e=0;e<arguments.length;e++)k[e]=arguments[e];if(3!==k.length||"string"!==typeof k[1]){if(1===k.length&&"[object Function]"===h.call(k[0]))return g(k[0]);if(1===k.length&&"string"===typeof k[0])return f(k[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(B,
p,a){function d(b,l){return l.isInstanceOf?l.isInstanceOf(b):l instanceof b}function g(b){return null==b?b:new Date(b)}function n(b){return null==b?b:!!b}function m(b){return null==b?b:b.toString()}function f(b){return null==b?b:parseFloat(b)}function h(b){return null==b?b:Math.round(parseFloat(b))}function k(b){return b&&b.constructor&&void 0!==b.constructor._meta}function e(b,l){return null!=l&&b&&!d(b,l)}function r(b,l){e(b,l)&&(k(l)?y.error("Accessor#set","Assigning an instance of '"+(l.declaredClass||
"unknown")+"' which is not a subclass of '"+(b&&b.prototype&&b.prototype.declaredClass||"unknown")+"'"):l=new b(l));return l}function q(b){switch(b){case Number:return f;case c:return h;case Boolean:return n;case String:return m;case Date:return g;default:return r.bind(null,b)}}function u(b,l){var t=q(b);return 1===arguments.length?t:t(l)}function v(b,l){return 1===arguments.length?v.bind(null,b):l?Array.isArray(l)?l.map(b):[b(l)]:l}function x(b,l,t){return 0!==l&&Array.isArray(t)?t.map(function(w){return x(b,
l-1,w)}):b(t)}function z(b,l,t){if(2===arguments.length)return z.bind(null,b,l);if(!t)return t;t=x(b,l,t);for(var w=l,C=t;0<w&&Array.isArray(C);)w--,C=C[0];if(void 0!==C)for(C=0;C<w;C++)t=[t];return t}function A(b,l){if(2===arguments.length)return A(b).call(null,l);var t={},w=[],C=[],D;for(D in b.typeMap){var E=b.typeMap[D];t[D]=u(E);w.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");C.push(D)}var F="string"===typeof b.key?function(G){return G[b.key]}:b.key;return function(G){if(b.base&&
!e(b.base,G))return G;var H=F(G)||b.defaultKeyValue,M=t[H];if(!M)return y.error("Accessor#set","Invalid property value, value needs to be one of '"+(w.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(C.join("', '")+"')")),null;if(!e(b.typeMap[H],G))return G;if("string"!==typeof b.key||k(G))return M(G);H={};for(var X in G)X!==b.key&&(H[X]=G[X]);return M(H)}}Object.defineProperty(p,"__esModule",{value:!0});var y=a.getLogger("esri.core.Accessor");p.isInstanceOf=d;p.ensureDate=
g;p.ensureBoolean=n;p.ensureString=m;p.ensureNumber=f;p.ensureInteger=h;p.isClassedType=k;p.requiresType=e;p.ensureClass=r;p.ensureType=u;p.ensureArrayTyped=v;p.ensureArray=function(b,l){return 1===arguments.length?v(u.bind(null,b)):v(u.bind(null,b),l)};p.ensureNArrayTyped=z;p.ensureNArray=function(b,l,t){return 2===arguments.length?z(u.bind(null,b),l):z(u.bind(null,b),l,t)};p.ensureOneOfType=A;var c=function(){return function(){}}();p.Integer=c;p["default"]=u})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.declared=function(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];g=function(){return this||{}};g.__bases__=[a].concat(d);return g}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.decorators.property");
p.property=function(m){void 0===m&&(m={});return function(f,h){var k=f.constructor.prototype;if(k!==Function.prototype){var e=Object.getOwnPropertyDescriptor(f,h);e&&(e.get||e.set)?(m=d.clone(m),e.set&&(m.set=e.set),e.get&&(m.get=e.get)):e&&e.hasOwnProperty("value")&&(m=d.clone(m),m.value=e.value);k=n.getPropertyMetadata(k,h);for(var r in m)e=m[r],Array.isArray(e)?k[r]=(k[r]||[]).concat(e):k[r]=e}}};p.propertyJSONMeta=function(m,f,h){m=n.getPropertyMetadata(m.constructor.prototype,h);m.json||(m.json=
{});m=m.json;void 0!==f&&(m.origins||(m.origins={}),m.origins[f]||(m.origins[f]={}),m=m.origins[f]);return m}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});p.reader=function(g,n,m){if(void 0===n||Array.isArray(n)){var f=g;m=n;var h=[void 0]}else f=n,h=Array.isArray(g)?g:[g];return function(k,e,r){var q=k.constructor.prototype;h.forEach(function(u){u=
d.propertyJSONMeta(k,u,f);u.read&&"object"!==typeof u.read&&(u.read={});a.setDeepValue("read.reader",q[e],u);m&&(u.read.source=(u.read.source||[]).concat(m))})}}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(B,p){function a(d,g,n){for(var m=0;m<d.length;m++){var f=d[m];if(!(f in n))if(g)n[f]={};else return;n=n[f]}return n}Object.defineProperty(p,"__esModule",{value:!0});p.getDeepValue=function(d,g){return a(d.split("."),!1,g)};p.setDeepValue=function(d,
g,n){var m=d.split(".");d=m.pop();(n=a(m,!0,n))&&d&&(n[d]=g)}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.shared=function(a){return function(d,g){d[g]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(B,p,a,d){function g(e,r){e.read&&("function"===typeof e.read?r.push(e.read):
"object"===typeof e.read&&e.read.reader&&r.push(e.read.reader))}function n(e,r){e.write&&("function"===typeof e.write?r.push(e.write):"object"===typeof e.write&&e.write.writer&&r.push(e.write.writer))}function m(e){var r=[];e=d.getPropertiesMetadata(e.prototype);if(!e)return r;for(var q in e){var u=e[q];u.cast&&r.push(u.cast);u.copy&&r.push(u.copy);if(u=u.json)if(g(u,r),n(u,r),u=u.origins)for(var v in u){var x=u[v];g(x,r);n(x,r)}}return r}function f(e){var r={values:{},descriptors:{}},q=["__bases__"],
u=d.getPropertiesMetadata(e.prototype),v=m(e);Object.getOwnPropertyNames(e.prototype).filter(function(x){return-1!==q.indexOf(x)||u&&u.hasOwnProperty(x)||!k(Object.getOwnPropertyDescriptor(e.prototype,x))&&-1!==v.indexOf(e.prototype[x])?!1:!0}).forEach(function(x){var z=Object.getOwnPropertyDescriptor(e.prototype,x);k(z)?r.descriptors[x]=z:r.values[x]=e.prototype[x]});return r}function h(e){var r=Object.getOwnPropertyNames(e),q=Object.getPrototypeOf(e.prototype).constructor,u=Object.getOwnPropertyNames(Function);
u.push("__bases__");var v=Object.getOwnPropertyNames(q),x={values:{},descriptors:{}};r.filter(function(z){return-1!==u.indexOf(z)?!1:-1===v.indexOf(z)||q[z]!==e[z]?!0:!1}).forEach(function(z){var A=Object.getOwnPropertyDescriptor(e,z);k(A)?x.descriptors[z]=A:x.values[z]=e[z]});return x}function k(e){return e&&!(!e.get&&!e.set)}Object.defineProperty(p,"__esModule",{value:!0});p.subclass=function(e){return function(r){var q=f(r),u=h(r);null!=e&&(q.values.declaredClass=e);r=a(r.__bases__,q.values);Object.defineProperties(r.prototype,
q.descriptors);for(var v in u.values)r[v]=u.values[v];Object.defineProperties(r,u.descriptors);return r}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(B,p,a){function d(f,h){f&&!Array.isArray(f)&&"function"!==typeof f&&(h=f,f=null);f=f||[];h=h||{};return g([this].concat(f),h)}function g(f,h){f&&!Array.isArray(f)&&"function"!==typeof f&&(h=f,f=null);"function"===typeof f?f=[f]:f||(f=[]);h=h||{};var k;var e=0;for(k=n.length;e<k;e++)n[e](f,
h);var r=a(f,h);r.createSubclass=d;e=0;for(k=m.length;e<k;e++)m[e](r);return r}var n=[],m=[];(function(f){f.hasMixin=function(h,k){var e=Array.isArray(h)?h.reduce(function(q,u){return u._meta?q.concat(u._meta.bases):q},[]):h._meta?h._meta.bases:h;if(!e)return!1;if("string"===typeof k)for(var r=e.length-1;0<=r;r--)if(e[r].prototype.declaredClass===k)return!0;return-1!==e.indexOf(k)};f.safeMixin=function(h,k){return a.safeMixin(h,k)};f.before=function(h){n.push(h)};f.after=function(h){m.push(h)}})(g||
(g={}));return g})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});p.writer=function(g,n,m){if(void 0===n){var f=g;var h=[void 0]}else"string"!==typeof n?(f=g,h=[void 0],m=n):(f=n,h=Array.isArray(g)?g:[g]);return function(k,e,r){var q=k.constructor.prototype;h.forEach(function(u){u=d.propertyJSONMeta(k,u,f);u.write&&"object"!==typeof u.write&&(u.write=
{});m&&a.setDeepValue("write.target",m,u);a.setDeepValue("write.writer",q[e],u)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(B,p,a,d,g,n,m){return function(f){function h(){var k=f.call(this)||this;k.type=null;k.extent=null;k.hasM=!1;k.hasZ=!1;k.spatialReference=m.WGS84;return k}a(h,f);Object.defineProperty(h.prototype,
"cache",{get:function(){return{}},enumerable:!0,configurable:!0});h.prototype.clone=function(){return null};h.prototype.clearCache=function(){this.notifyChange("cache")};h.prototype.getCacheValue=function(k){return this.cache[k]};h.prototype.setCacheValue=function(k,e){this.cache[k]=e};d([n.property()],h.prototype,"type",void 0);d([n.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"cache",null);d([n.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"extent",void 0);
d([n.property({type:Boolean,json:{write:{overridePolicy:function(k){return{enabled:k}}}}})],h.prototype,"hasM",void 0);d([n.property({type:Boolean,json:{write:{overridePolicy:function(k){return{enabled:k}}}}})],h.prototype,"hasZ",void 0);d([n.property({type:m,json:{write:!0}})],h.prototype,"spatialReference",void 0);return h=d([n.subclass("esri.geometry.Geometry")],h)}(n.declared(g))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(B,p,a,d,g,n,m,f,h){function k(r,q){if(!r)return null;if(r.declaredClass)throw Error("JSON object is already hydrated");var u=new this;u.read(r,q);return u}var e=function(r){function q(){return null!==r&&r.apply(this,arguments)||this}a(q,r);q.prototype.read=function(u,v){f["default"](this,u,v);return this};q.prototype.write=function(u,v){return h["default"](this,u||{},v)};q.prototype.toJSON=function(u){return this.write(null,u)};q.fromJSON=function(u,v){return k.call(this,u,v)};return q=d([m.subclass("esri.core.JSONSupport")],
q)}(m.declared(g));e.prototype.toJSON.isDefaultToJSON=!0;n.after(function(r){n.hasMixin(r,e)&&(r.fromJSON=k.bind(r))});return e})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(B,p,a,d,g,n){p=p["default"];B.before(function(f,h){B.hasMixin(f,m)&&d.processPrototype(h)});B.after(function(f){B.hasMixin(f,m)&&(d.processClass(f),Object.defineProperties(f.prototype,
{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var m=B(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===m)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new p(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var f=[],h=0;h<arguments.length;h++)f.push(arguments[h]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,f)}},__accessor__:null,postscript:function(f){var h=this.__accessor__;f=h.ctorArgs||f;if(null!=this.getDefaults){var k=this.getDefaults(f||{});this.set(k)}h.initialize();f&&(this.set(f),h.ctorArgs=null);h.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(f){}else n.removeTarget(this),this.__accessor__.destroy()},get:function(f){return a.get(this,f)},hasOwnProperty:function(f){return this.__accessor__?this.__accessor__.has(f):Object.prototype.hasOwnProperty.call(this,f)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(f,h){g.set(this,f,h);return this},watch:function(f,h,k){return n.watch(this,f,h,k)},_clearOverride:function(f){return this.__accessor__.clearOverride(f)},_override:function(f,h){return this.__accessor__.override(f,
h)},_isOverridden:function(f){return this.__accessor__.isOverridden(f)},notifyChange:function(f){this.__accessor__.propertyInvalidated(f)},_get:function(f){return this.__accessor__.internalGet(f)},_set:function(f,h){return this.__accessor__.internalSet(f,h)}});return m})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(B,p,a,d,g,n,m){Object.defineProperty(p,"__esModule",{value:!0});
d.getLogger("esri.core.accessorSupport.Properties");B=function(){function f(h){this.host=h;this._origin=n.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new m["default"];h=this.host.constructor.__accessorMetadata__;this.metadatas=h.properties;this.autoDestroy=h.autoDestroy}f.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};f.prototype.constructed=function(){this.lifecycle=
2};f.prototype.destroy=function(){this.destroyed=!0;var h=this.cursors;if(this.cursors)for(var k=0,e=Object.getOwnPropertyNames(h);k<e.length;k++){var r=e[k],q=h[r];if(q){for(;0<q.length;)q.pop().propertyDestroyed(this,r);h[r]=null}}if(this.autoDestroy)for(r in this.metadatas)(h=this.internalGet(r))&&h&&"function"===typeof h.destroy&&(h.destroy(),this.metadatas[r].nonNullable||this.internalSet(r,null))};Object.defineProperty(f.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,
configurable:!0});f.prototype.clearOverride=function(h){this.isOverridden(h)&&(this.overridden[h]=!1,this.propertyInvalidated(h))};f.prototype.get=function(h){var k=this.metadatas[h];if(this.store.has(h)&&!this.dirties[h])return this.store.get(h);var e=k.get;return e?(k=e.call(this.host),this.store.set(h,k,n.OriginId.COMPUTED),this.propertyCommitted(h),k):k.value};f.prototype.originOf=function(h){var k=this.store.originOf(h);return void 0===k&&(h=this.metadatas[h])&&h.hasOwnProperty("value")?"defaults":
n.idToName(k)};f.prototype.has=function(h){return this.metadatas[h]?this.store.has(h):!1};f.prototype.internalGet=function(h){if(this.metadatas[h]){var k=this.store;return k.has(h)?k.get(h):this.metadatas[h].value}};f.prototype.internalSet=function(h,k){this.metadatas[h]&&(this.propertyInvalidated(h),this.initialized?this.store.set(h,k,this._origin):this.store.set(h,k,n.OriginId.DEFAULTS),this.propertyCommitted(h))};f.prototype.isOverridden=function(h){return null!=this.overridden&&!0===this.overridden[h]};
f.prototype.keys=function(){return this.store.keys()};f.prototype.override=function(h,k){if(this.metadatas[h]){this.overridden||(this.overridden={});var e=this.metadatas[h];e.nonNullable&&null==k||((e=e.cast)&&(k=e.call(this.host,k)),this.overridden[h]=!0,this.internalSet(h,k))}};f.prototype.set=function(h,k){if(this.metadatas[h]){var e=this.metadatas[h];if(!e.nonNullable||null!=k){var r=e.set;(e=e.cast)&&(k=e.call(this.host,k));r?r.call(this.host,k):this.internalSet(h,k)}}};f.prototype.setDefaultOrigin=
function(h){this._origin=n.nameToId(h)};f.prototype.propertyInvalidated=function(h){var k=this.dirties,e=this.isOverridden(h),r=this.cursors&&this.cursors[h],q=this.metadatas[h].computes;if(r)for(var u=0;u<r.length;u++)r[u].propertyInvalidated(this,h);e||(k[h]=!0);if(q)for(h=0;h<q.length;h++)this.propertyInvalidated(q[h])};f.prototype.propertyCommitted=function(h){var k=this.cursors&&this.cursors[h];this.dirties[h]=!1;if(k)for(var e=0;e<k.length;e++)k[e].propertyCommitted(this,h)};f.prototype.addCursor=
function(h,k){this.cursors||(this.cursors={});var e=this.cursors[h];e||(this.cursors[h]=e=[]);e.push(k)};f.prototype.removeCursor=function(h,k){var e=this.cursors[h];this.cursors[h]&&(e.splice(e.indexOf(k),1),0===e.length&&(this.cursors[h]=null))};return f}();p["default"]=B})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(B,p,a,d,g){Object.defineProperty(p,
"__esModule",{value:!0});var n=[a["default"],d["default"],g["default"]];p.processPrototypeMetadatas=function(m,f){for(var h=Object.getOwnPropertyNames(m),k=0;k<n.length;k++){var e=n[k];if(e.processPrototypePropertyMetadata)for(var r=0,q=h;r<q.length;r++){var u=q[r];e.processPrototypePropertyMetadata(u,m[u],m,f)}}};p.processClassMetadatas=function(m,f){for(var h=Object.getOwnPropertyNames(m),k=0;k<n.length;k++){var e=n[k];if(e.processClassPropertyMetadata)for(var r=0,q=h;r<q.length;r++){var u=q[r];
e.processClassPropertyMetadata(u,m[u],m,f)}}};p.instanceCreated=function(m,f){for(var h=Object.getOwnPropertyNames(f),k=0;k<n.length;k++){var e=n[k];e.instanceCreated&&e.instanceCreated(m,f,h)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(B,p,a,d,g,n,m){function f(h,k,e){var r=n.getProperties(h);return m.wire(h,e.aliasOf,function(){r.propertyInvalidated(k)})}Object.defineProperty(p,
"__esModule",{value:!0});p.AliasedPropertyExtension={processClassPropertyMetadata:function(h,k,e,r){var q=k.aliasOf;if(q&&(h=q.split(".")[0],null!=e[h]&&!k.set&&!k.get)){var u;k.get=function(){var v=d["default"](this,q);if("function"===typeof v){u||(u=q.split(".").slice(0,-1).join("."));var x=d["default"](this,u);x&&(v=v.bind(x))}return v};k.readOnly||(k.set=function(v){return g["default"](this,q,v)})}},instanceCreated:function(h,k,e){for(var r=0;r<e.length;r++){var q=e[r],u=k[q];u.aliasOf&&f(h,q,
u)}}};p["default"]=p.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(B,p,a){function d(f,h,k){if(null!=k.getItemAt||Array.isArray(k)){var e=parseInt(f,10);if(!isNaN(e))return Array.isArray(k)?k[e]:k.getItemAt(e)}e=a.getProperties(k);return h?a.isPropertyDeclared(e,f)?e.get(f):k[f]:a.isPropertyDeclared(e,f)?e.internalGet(f):k[f]}function g(f,h,k,e){if(null==f)return f;if((f=d(h[e],k,f))||!(e<h.length-1))return e===
h.length-1?f:g(f,h,k,e+1)}function n(f,h,k,e){void 0===k&&(k=!1);void 0===e&&(e=0);return"string"===typeof h&&-1===h.indexOf(".")?d(h,k,f):g(f,a.pathToArray(h),k,e)}function m(f,h){return n(f,h,!0)}Object.defineProperty(p,"__esModule",{value:!0});p.valueOf=n;p.get=m;p.exists=function(f,h){return void 0!==n(h,f,!0)};p["default"]=m})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(B,p,a){function d(f,h){return h?Object.keys(h).reduce(function(k,
e){if("value"===e)return k[e]=h[e],k;if(void 0===k[e])return k[e]=a.clone(h[e]),k;var r=k[e],q=h[e];if(r===q)return k;if(Array.isArray(q)||Array.isArray(k))r=r?Array.isArray(r)?k[e]=r.concat():k[e]=[r]:k[e]=[],q&&(Array.isArray(q)||(q=[q]),q.forEach(function(u){-1===r.indexOf(u)&&r.push(u)}));else if(q&&"object"===typeof q)k[e]=d(r,q);else if(!k.hasOwnProperty(e)||h.hasOwnProperty(e))k[e]=q;return k},f||{}):f}function g(f){return Array.isArray(f)?f:f.split(".")}function n(f){if(Array.isArray(f)||
-1<f.indexOf(",")){f=Array.isArray(f)?f:f.split(",");for(var h=0;h<f.length;h++)f[h]=f[h].trim();return 1===f.length?f[0]:f}return f.trim()}function m(f){var h=!1;return function(){h||(h=!0,f())}}Object.defineProperty(p,"__esModule",{value:!0});p.getProperties=function(f){return f?f.__accessor__?f.__accessor__:f.propertyInvalidated?f:null:null};p.isPropertyDeclared=function(f,h){return f&&f.metadatas&&null!=f.metadatas[h]};p.merge=d;p.pathToStringOrArray=function(f){return f?"string"===typeof f&&
-1===f.indexOf(".")?f:g(f):f};p.pathToArray=g;p.splitPath=n;p.parse=function(f,h,k,e){h=n(h);if(Array.isArray(h)){var r=h.map(function(q){return e(f,q.trim(),k)});return{remove:m(function(){return r.forEach(function(q){return q.remove()})})}}return e(f,h.trim(),k)};p.once=m})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(B,p,a,d,g){function n(m,f,h){if(m&&f)if("object"===typeof f){h=0;for(var k=Object.getOwnPropertyNames(f);h<
k.length;h++){var e=k[h];n(m,e,f[e])}}else"_"!==f[0]&&(-1!==f.indexOf(".")?(f=f.split("."),e=f.splice(f.length-1,1)[0],n(g["default"](m,f),e,h)):m[f]=h)}Object.defineProperty(p,"__esModule",{value:!0});d.getLogger("esri.core.accessorSupport.set");p.set=n;p["default"]=n})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(B,p,a){function d(k,e,r){e=a.splitPath(e);if(Array.isArray(e)){for(var q=[],u=0;u<e.length;u++)q.push((new g(e[u],r)).install(k));
return new f(q)}k=(new g(e,r)).install(k);return new h(k)}Object.defineProperty(p,"__esModule",{value:!0});var g=function(){function k(e,r){this.path=e;this.callback=r;this.chain=null;this.path=e;-1<e.indexOf(".")&&(this.chain=a.pathToArray(e));this.callback=r;return this}k.prototype.install=function(e){e=this.chain?new m(this,e):new n(this,e);return e};k.prototype.notify=function(e){this.callback(e,this.path)};return k}(),n=function(){function k(e,r){this.binding=e;this.target=r;a.getProperties(r).addCursor(this.binding.path,
this)}k.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};k.prototype.propertyDestroyed=function(e,r){a.getProperties(this.target).removeCursor(r,this)};k.prototype.propertyInvalidated=function(e,r){this.binding&&this.binding.notify(this.target)};k.prototype.propertyCommitted=function(e,r){this.binding&&this.binding.notify(this.target)};return k}(),m=function(){function k(e,r){this.binding=e;this.target=r;this.stack=
[];this.properties=a.getProperties(r);this.stack.push({properties:this.properties,propertyName:e.chain[0]});this.properties.addCursor(e.chain[0],this);this.moveForward();return this}k.prototype.destroy=function(){for(;;){var e=this.stack.pop();if(null==e)break;e.properties.removeCursor(e.propertyName,this)}this.target=this.binding=null};k.prototype.propertyDestroyed=function(e,r){this.moveBackward(e,r)};k.prototype.propertyInvalidated=function(e,r){this.binding&&this.binding.notify(this.target)};
k.prototype.propertyCommitted=function(e,r){this.binding&&(this.moveBackward(e,r),this.moveForward(),this.binding.notify(this.target))};k.prototype.moveBackward=function(e,r){for(var q=this.stack,u=q[q.length-1];u.properties!==e&&u.propertyName!==r;)u.properties.removeCursor(u.propertyName,this),q.pop(),u=q[q.length-1]};k.prototype.moveForward=function(){var e=this.stack,r=e[e.length-1];r=r.properties.internalGet(r.propertyName);(r=a.getProperties(r))&&e.length<this.binding.chain.length&&(e=this.binding.chain[e.length],
this.stack.push({properties:r,propertyName:e}),r.addCursor(e,this),this.moveForward())};return k}(),f=function(){function k(e){this.cursors=e}k.prototype.remove=function(){for(var e=this.cursors;0<e.length;)e.pop().destroy();this.cursors=null};return k}(),h=function(){function k(e){this.cursor=e}k.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return k}();p.create=function(k,e){var r=a.splitPath(k);if(Array.isArray(r)){for(var q=[],u=0;u<r.length;u++)q.push(new g(r[u],e));return function(x){for(var z=
[],A=0;A<q.length;A++)z[A]=q[A].install(x);return new f(z)}}var v=new g(r,e);return function(x){return new h(v.install(x))}};p.wire=d;p["default"]=d})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});d.getLogger("esri.core.accessorSupport.extensions.computedProperty");p.ComputedPropertyExtension={processClassPropertyMetadata:function(m,
f,h,k){f.dependsOn&&(h=void 0,h=f.dependsOn.slice())&&(f.wire=n.create(h,function(e){return g.getProperties(e).propertyInvalidated(m)}))},instanceCreated:function(m,f,h){for(var k=0;k<h.length;k++){var e=f[h[k]];e.wire&&e.wire(m)}}};p["default"]=p.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(B,p,a,d,g,n){function m(f,h,k){var e=f&&f.json;f&&f.json&&f.json.origins&&k&&(f=f.json.origins[k.origin])&&h in f&&(e=f);return e}Object.defineProperty(p,"__esModule",{value:!0});p.originSpecificReadPropertyDefinition=function(f,h){return m(f,"read",h)};p.originSpecificWritePropertyDefinition=function(f,h){return m(f,"write",h)};p.SerializablePropertyExtension={processPrototypePropertyMetadata:function(f,h,k,e){if(g.process(h)){a.process(h);k=h.type;for(e=0;Array.isArray(k);)k=k[0],e++;if(h.json.origins)for(var r in h.json.origins){var q=
h.json.origins[r];d.create(k,e,f,q);n.create(k,e,f,q)}d.create(k,e,f,h.json);n.create(k,e,f,h.json)}}};p["default"]=p.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.process=function(a){if(a.json&&a.json.origins){var d=a.json.origins,g={"web-document":["web-scene","web-map"]};a=function(m){if(d[m]){var f=d[m];g[m].forEach(function(h){d[h]=
f});delete d[m]}};for(var n in g)a(n)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(B,p,a,d){function g(r,q,u,v){if(1<q)return f(r,q);if(1===q)return h(r);if(k(r)){var x=h(r.prototype.itemType.Type);return function(z,A,y){return(z=x(z,A,y))?new r(z):z}}return n(r)}function n(r){return r.prototype.read?function(q,u,v){return null==q?q:(new r).read(q,v)}:r.fromJSON}function m(r,q,
u,v){return 0!==v&&Array.isArray(q)?q.map(function(x){return m(r,x,u,v-1)}):r(q,null,u)}function f(r,q){var u=n(r),v=m.bind(null,u);return function(x,z,A){if(null==x)return x;x=v(x,A,q);z=q;for(A=x;0<z&&Array.isArray(A);)z--,A=A[0];if(void 0!==A)for(A=0;A<z;A++)x=[x];return x}}function h(r){var q=n(r);return function(u,v,x){return null==u?u:Array.isArray(u)?u.map(function(z){return q(z,null,x)}):[q(u,null,x)]}}function k(r){return d.isCollection(r)?(r=r.prototype.itemType)&&r.Type&&"function"===typeof r.Type?
e(r.Type):!1:!1}function e(r){return!!r&&(!!r.prototype.read||!!r.fromJSON||k(r))}Object.defineProperty(p,"__esModule",{value:!0});p.create=function(r,q,u,v){(!v.read||!v.read.reader&&!1!==v.read.enabled)&&e(r)&&a.setDeepValue("read.reader",g(r,q,u,v),v)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&
0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(B,p){function a(g){"boolean"===typeof g.read?g.read={enabled:g.read}:"function"===typeof g.read?g.read={enabled:!0,reader:g.read}:g.read&&"object"===typeof g.read&&void 0===g.read.enabled&&(g.read.enabled=!0)}function d(g){"boolean"===typeof g.write?g.write={enabled:g.write}:"function"===typeof g.write?
g.write={enabled:!0,writer:g.write}:g.write&&"object"===typeof g.write&&void 0===g.write.enabled&&(g.write.enabled=!0)}Object.defineProperty(p,"__esModule",{value:!0});p.process=function(g){g.json||(g.json={});a(g.json);d(g.json);if(g.json.origins)for(var n in g.json.origins)a(g.json.origins[n]),d(g.json.origins[n]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(B,p,a,d){function g(k,
e,r,q){a.setDeepValue(r,n(k,q),e)}function n(k,e){var r;return r=k&&"function"===typeof k.write?k.write({},e):k&&"function"===typeof k.toJSON?k.toJSON():"number"===typeof k?-Infinity===k?-Number.MAX_VALUE:Infinity===k?Number.MAX_VALUE:isNaN(k)?null:k:k}function m(k,e,r,q){null===k?k=null:k&&"function"===typeof k.map?(k=k.map(function(u){return n(u,q)}),"function"===typeof k.toArray&&(k=k.toArray())):k=[n(k,q)];a.setDeepValue(r,k,e)}function f(k,e,r){return 0!==r&&Array.isArray(k)?k.map(function(q){return f(q,
e,r-1)}):n(k,e)}function h(k){return function(e,r,q,u){if(null===e)e=null;else{e=f(e,u,k);u=k;for(var v=e;0<u&&Array.isArray(v);)u--,v=v[0];if(void 0!==v)for(v=0;v<u;v++)e=[e]}a.setDeepValue(q,e,r)}}Object.defineProperty(p,"__esModule",{value:!0});p.create=function(k,e,r,q){q.write&&!q.write.writer&&!1!==q.write.enabled&&(1===e||d.isCollection(k)?q.write.writer=m:q.write.writer=1<e?h(e):g)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(B,
p){function a(n){switch(n){case "defaults":return g.DEFAULTS;case "service":return g.SERVICE;case "portal-item":return g.PORTAL_ITEM;case "web-scene":return g.WEB_SCENE;case "web-map":return g.WEB_MAP;case "user":return g.USER}}function d(n){switch(n){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.USER:return"user"}}Object.defineProperty(p,"__esModule",{value:!0});var g;
(function(n){n[n.DEFAULTS=0]="DEFAULTS";n[n.COMPUTED=1]="COMPUTED";n[n.SERVICE=2]="SERVICE";n[n.PORTAL_ITEM=3]="PORTAL_ITEM";n[n.WEB_SCENE=4]="WEB_SCENE";n[n.WEB_MAP=5]="WEB_MAP";n[n.USER=6]="USER";n[n.NUM=7]="NUM"})(g=p.OriginId||(p.OriginId={}));p.nameToId=a;p.idToName=d;p.readableNameToId=function(n){return a(n)};p.idToReadableName=function(n){return d(n)};p.writableNameToId=function(n){return a(n)};p.idToWritableName=function(n){return d(n)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function d(){this._values={}}d.prototype.get=function(g){return this._values[g]};d.prototype.originOf=function(g){return a.OriginId.USER};d.prototype.keys=function(){return Object.keys(this._values)};d.prototype.set=function(g,n){this._values[g]=n};d.prototype.clear=function(g){delete this._values[g]};d.prototype.has=function(g){return g in this._values};return d}();p["default"]=B})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});var h=Object.prototype.hasOwnProperty,k=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,e={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},r=/^_(set|get)([a-zA-Z0-9]+)Attr$/;p.processPrototype=function(q){for(var u=q.declaredClass,v=q.properties||{},x=0,z=Object.getOwnPropertyNames(v);x<z.length;x++){var A=z[x],y=v[A],c=typeof y;null==y?n.setPropertyMetadata(q,A,{value:y}):
Array.isArray(y)?n.setPropertyMetadata(q,A,{type:[y[0]],value:null}):"object"===c?m.getProperties(y)||y instanceof Date?n.setPropertyMetadata(q,A,{type:y.constructor,value:y}):n.setPropertyMetadata(q,A,y):"boolean"===c?n.setPropertyMetadata(q,A,{type:Boolean,value:y}):"string"===c?n.setPropertyMetadata(q,A,{type:String,value:y}):"number"===c?n.setPropertyMetadata(q,A,{type:Number,value:y}):"function"===c&&n.setPropertyMetadata(q,A,{type:y,value:null})}x=0;for(z=Object.getOwnPropertyNames(q);x<z.length;x++){c=
z[x];y=q[c];v=A=void 0;var b=k.exec(c);if(b)A=b[1],v=e[b[2]];else if(b=r.exec(c))A=b[2][0].toLowerCase()+b[2].substr(1),v=b[1].toLowerCase();A&&v&&(A=n.getPropertyMetadata(q,A),a.setDeepValue(v,y,A))}x=0;for(z=Object.getOwnPropertyNames(n.getPropertiesMetadata(q));x<z.length;x++)if(A=z[x],y=n.getPropertyMetadata(q,A),v=y.type,c=y.types,void 0===y.value&&h.call(q,A)&&(y.value=q[A]),!y.cast&&v){A=y;y=0;for(c=v;Array.isArray(c);)c=c[0],y++;v=1===y?d.ensureArray(c):1<y?d.ensureNArray(c,y):d.ensureType(v);
A.cast=v}else!y.cast&&c&&(Array.isArray(c)?y.cast=d.ensureArrayTyped(d.ensureOneOfType(c[0])):y.cast=d.ensureOneOfType(c));g.processPrototypeMetadatas(n.getPropertiesMetadata(q),u);return n.getPropertiesMetadata(q)};p.processClass=function(q){for(var u=q.prototype,v=u.declaredClass,x=q._meta.bases,z={},A=x.length-1;0<=A;A--)m.merge(z,n.getMetadata(x[A].prototype));var y=z.properties;g.processClassMetadatas(y,v);Object.defineProperty(q,"__accessorMetadata__",{value:{properties:y,autoDestroy:!!z.autoDestroy}});
var c={};v=function(b){var l=y[b];c[b]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(b):l.value},set:function(t){var w=this.__accessor__;if(!w)Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:t});else if(!Object.isFrozen(this)){if(w.initialized&&l.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+b+"' of "+this.declaredClass);if(2===w.lifecycle&&l.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
b+"' of "+this.declaredClass);w.set(b,t)}}}};x=0;for(A=Object.getOwnPropertyNames(y);x<A.length;x++)v(A[x]);Object.defineProperties(q.prototype,c);if(z.parameters)for(q=0,v=Object.getOwnPropertyNames(z.parameters);q<v.length;q++)x=v[q],A=Object.getOwnPropertyDescriptor(u,x)||{value:u[x]},(A=f.autocastMethod(u,x,A))&&Object.defineProperty(u,x,A);return z}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(B,p,a,d,g,n,m,f,h){function k(l){A.has(l)?y.splice(y.indexOf(l),1):A.add(l);y.push(l);c||(c=n.schedule(r))}function e(l){if(!l.removed){var t=l.callback,w=l.path,C=l.oldValue,D=l.target,E=m.valueOf(D,l.propertyPath,!0);d.equals(C,E)||(l.oldValue=E,t.call(D,E,C,w,D))}}function r(){if(c){c=null;var l=y;y=z.acquire();A.clear();for(var t=z.acquire(),w=0;w<l.length;w++){var C=l[w];e(C);C.removed&&t.push(C)}for(w=0;w<y.length;w++)C=y[w],C.removed&&(t.push(C),A["delete"](C),y.splice(w,1),--w);for(w=
0;w<t.length;w++)x.pool.release(t[w]);z.release(l);z.release(t);b.forEach(function(D){return D()})}}function q(l,t,w){var C=f.parse(l,t,w,function(D,E,F){var G=m.valueOf(D,E,!0),H,M=h.wire(D,E,function(X,W){X.__accessor__.destroyed?C.remove():(H||(H=x.pool.acquire(X,W,G,F),G=null),k(H))});return{remove:f.once(function(){M.remove();H&&(H.removed=!0,k(H),H=null);C=M=G=null})}});return C}function u(l,t,w){var C=f.parse(l,t,w,function(D,E,F){var G=m.valueOf(D,E,!0),H=!1;return h.wire(D,E,function(M,X){if(M.__accessor__.destroyed)C.remove();
else if(!H){H=!0;var W=m.valueOf(M,X,!0);d.equals(G,W)||F.call(M,W,G,X,M);G=m.valueOf(M,X,!0);H=!1}})});return C}function v(l,t,w,C){void 0===C&&(C=!1);return!l.__accessor__||l.__accessor__.destroyed?{remove:function(){}}:C?u(l,t,w):q(l,t,w)}Object.defineProperty(p,"__esModule",{value:!0});var x=function(){function l(t,w,C,D){this.target=t;this.path=w;this.oldValue=C;this.callback=D;this.removed=!1;this.propertyPath=f.pathToStringOrArray(w)}l.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};l.pool=new g(l,!0);return l}(),z=new a,A=new Set,y=z.acquire(),c;p.dispatchTarget=function(l){for(var t=z.copy(y),w=0;w<t.length;w++){var C=t[w];C.target===l&&(e(C),A["delete"](C),y.splice(y.indexOf(C),1))}};p.removeTarget=function(l){for(var t=0;t<y.length;t++){var w=y[t];w.target===l&&(w.removed=!0)}};p.dispatch=r;var b=new Set;p.afterDispatch=function(l){b.add(l);return{remove:function(){b["delete"](l)}}};p.watch=v;p.isValueInUse=function(l){return y.some(function(t){return t.oldValue===
l})};p["default"]=v})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(B,p,a){function d(m){m.length=0}var g=Array.prototype.splice;B=function(){function m(f,h){void 0===f&&(f=50);void 0===h&&(h=50);this._pool=new a(Array,!1,d,h,f)}m.prototype.acquire=function(){return this._pool.acquire()};m.prototype.copy=function(f){var h=this.acquire();f.unshift(0,0);g.apply(h,f);f.splice(0,2);return h};m.prototype.release=function(f){this._pool.release(f)};
m.acquire=function(){return n.acquire()};m.copy=function(f){return n.copy(f)};m.release=function(f){return n.release(f)};return m}();var n=new B(100);return B})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(B,p,a,d,g){function n(t){void 0===t&&(t=p.now());p.debug.rafId=null;0<c.length&&(p.debug.rafId=m());if(0<q){var w=t-q;x=Math.min(w,x);if(w<u)return}p.debug.executeFrameTasks(t)}function m(){return p.debug.requestNextFrame?
p.debug.requestNextFrame(k):k()}function f(){for(var t=0;t<c.length;){var w=c[t];t++;if(w.removed){c.splice(t-1,1);for(var C=0;C<A.length;C++){var D=A[C];if(w.phases[D]){D=b[D];var E=D.indexOf(w);-1!==E&&D.splice(E,1)}}}}}function h(){for(;y.length;){var t=y.shift();t.isActive&&(t.isActive=!1,t.callback())}p.debug.willDispatch=!1}function k(){return g(n)}Object.defineProperty(p,"__esModule",{value:!0});p.now=d;var e=function(){return function(t){this.phases=t;this.paused=!1;this.pausedAt=0;this.epoch=
-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),r=function(){function t(w){this.callback=w;this.isActive=!0}t.prototype.remove=function(){this.isActive=!1};return t}(),q=-1,u=0,v=0,x=Number.POSITIVE_INFINITY,z={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},A=["prepare","preRender","render","postRender","update"],y=[],c=[],b={prepare:[],preRender:[],render:[],postRender:[],update:[]},l=function(){function t(w){this._task=w}t.prototype.remove=function(){this._task.removed=!0};
t.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=p.now())};t.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=p.now()-this._task.pausedAt))};return t}();p.FrameTaskHandle=l;p.debug={frameTasks:c,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(t){void 0===t&&(t=!1);for(var w=0;w<c.length;w++)c[w].removed=!0;t&&f()},dispatch:h,executeFrameTasks:function(t){void 0===t&&(t=
p.now());0>q&&(q=t);var w=t-q;q=t;for(var C=0;C<c.length;C++){var D=c[C];-1!==D.epoch&&(D.dt=w)}for(C=0;C<A.length;C++){w=A[C];for(var E=b[w],F=0;F<E.length;F++)D=E[F],D.paused||D.removed||(0===C&&D.ticks++,-1===D.epoch&&(D.epoch=t),z.time=t,z.deltaTime=D.dt,z.elapsedFrameTime=p.now()-t,z.frameDuration=0<v?v:x,z.spendInTask=t-D.epoch,D.phases[w].call(D,z))}f()}};p.schedule=function(t){t=new r(t);y.push(t);p.debug.willDispatch||(p.debug.willDispatch=!0,a(h));return t};p.addFrameTask=function(t){var w=
new e(t);c.push(w);for(var C=0,D=A;C<D.length;C++){var E=D[C];t[E]&&b[E].push(w)}p.debug.rafId||(q=-1,p.debug.rafId=m());return new l(w)};p.setFrameRate=function(t){if(0>=t)v=u=0;else{var w=1.05*x;t=Math.ceil(1E3/t/w);u=(t-1)*w;v=t*x}};p.requestNextFrame=m})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(B,p,a){function d(){if(a.postMessage&&!a.importScripts){var n=a.onmessage,m=!0;a.onmessage=function(){m=!1};a.postMessage("","*");a.onmessage=
n;return m}return!1}var g=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var n=function(k){a.process.nextTick(k)};else if(a.Promise)n=function(k){a.Promise.resolve().then(k)};else if(g){var m=[],f=document.createElement("div");(new g(function(){for(;0<m.length;)m.shift()()})).observe(f,{attributes:!0});n=function(k){m.push(k);f.setAttribute("queueStatus","1")}}else if(d()){var h=[];a.addEventListener("message",function(k){if(k.source===a&&"esri-nexttick-message"===
k.data)for(k.stopPropagation();h.length;)h.shift()()},!0);n=function(k){h.push(k);a.postMessage("esri-nexttick-message","*")}}else n=a.setImmediate?function(k){return a.setImmediate(k)}:function(k){return a.setTimeout(k,0)};return n}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(B,p){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports","./global"],function(B,p,a){return function(){var d=a.performance||{};if(d.now)return function(){return d.now()};if(d.webkitNow)return function(){return d.webkitNow()};if(d.mozNow)return function(){return d.mozNow()};if(d.msNow)return function(){return d.msNow()};if(d.oNow)return function(){return d.oNow()};var g=d.timing&&d.timing.navigationStart?d.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require",
"exports","./global","./now"],function(B,p,a,d){var g=d();B=a.requestAnimationFrame;if(!B){p=["ms","moz","webkit","o"];for(var n=0;n<p.length&&!B;++n)B=a[p[n]+"RequestAnimationFrame"];B||(B=function(m){var f=d(),h=Math.max(0,16-(f-g)),k=a.setTimeout(function(){m(d())},h);g=f+h;return k})}return B})},"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(B,p,a,d,g,n){function m(h,
k,e){void 0===e&&(e=f);for(var r=g.getProperties(h),q=r.metadatas,u={},v=0,x=Object.getOwnPropertyNames(k);v<x.length;v++){var z=u,A=q,y=x[v],c=k,b=e,l=n.originSpecificReadPropertyDefinition(A[y],b);l&&(!l.read||!1!==l.read.enabled&&!l.read.source)&&(z[y]=!0);for(var t=0,w=Object.getOwnPropertyNames(A);t<w.length;t++){var C=w[t];l=n.originSpecificReadPropertyDefinition(A[C],b);a:{var D=y;var E=c;if(l&&l.read&&!1!==l.read.enabled&&l.read.source)if(l=l.read.source,"string"===typeof l){if(l===D||-1<
l.indexOf(".")&&0===l.indexOf(D)&&d.exists(l,E)){D=!0;break a}}else for(var F=0;F<l.length;F++){var G=l[F];if(G===D||-1<G.indexOf(".")&&0===G.indexOf(D)&&d.exists(G,E)){D=!0;break a}}D=!1}D&&(z[C]=!0)}}r.setDefaultOrigin(e.origin);x=0;for(z=Object.getOwnPropertyNames(u);x<z.length;x++)v=z[x],y=(A=n.originSpecificReadPropertyDefinition(q[v],e).read)&&A.source,c=void 0,c=y&&"string"===typeof y?d.valueOf(k,y):k[v],A&&A.reader&&(c=A.reader.call(h,c,k,e)),void 0!==c&&r.set(v,c);k=0;for(q=Object.getOwnPropertyNames(q);k<
q.length;k++)v=q[k],u[v]||(x=h,z=r,A=e,y=(y=n.originSpecificReadPropertyDefinition(z.metadatas[v],A))&&y.read&&y.read["default"],void 0!==y&&(x="function"===typeof y?y.call(x,v,A):y,void 0!==x&&z.set(v,x)));r.setDefaultOrigin("user")}Object.defineProperty(p,"__esModule",{value:!0});var f={origin:"service"};p.read=m;p.readLoadable=function(h,k,e,r){void 0===r&&(r=f);k=a({},r,{messages:[]});e(k);k.messages.forEach(function(q){"warning"!==q.type||h.loaded?r&&r.messages.push(q):h.loadWarnings.push(q)})};
p["default"]=m})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(B,p,a,d,g,n,m){function f(e,r,q,u,v,x){if(!u||!u.write)return!1;var z=e.get(q);if(void 0===z)return!1;if(!v&&u.write.overridePolicy){var A=u.write.overridePolicy.call(e,z,q,x);void 0!==A&&(v=A)}v||(v=u.write);if(!v||!1===v.enabled)return!1;if(null===z){if(v.allowNull)return!0;v.isRequired&&((e=new a("web-document-write:property-required",
"Missing value for required property '"+q+"' on '"+e.declaredClass+"'",{propertyName:q,target:e}),x)&&x.messages?x.messages.push(e):e&&!x&&k.error(e.name,e.message));return!1}return!v.ignoreOrigin&&x&&x.origin&&r.store.originOf(q)<g.nameToId(x.origin)?!1:!0}function h(e,r,q){if(e&&"function"===typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return n.merge(r,e.toJSON());var u=n.getProperties(e),v=u.metadatas,x;for(x in v){var z=m.originSpecificWritePropertyDefinition(v[x],q);if(f(e,u,x,z,null,
q)){var A=e.get(x),y={};z.write.writer.call(e,A,y,"string"===typeof z.write.target?z.write.target:x,q);z=y;0<Object.keys(z).length&&(r=n.merge(r,z),q&&q.writtenProperties&&q.writtenProperties.push({target:e,propName:x,oldOrigin:g.idToReadableName(u.store.originOf(x)),newOrigin:q.origin}))}}return r}Object.defineProperty(p,"__esModule",{value:!0});var k=d.getLogger("esri.core.accessorSupport.write");p.willPropertyWrite=function(e,r,q,u){var v=n.getProperties(e),x=m.originSpecificWritePropertyDefinition(v.metadatas[r],
u);return x?f(e,v,r,x,q,u):!1};p.write=h;p.disableWriteDefaultPolicy=function(e){return function(r){return{enabled:r!==e}}};p["default"]=h})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(B,p,a,d,g,n,m,f){B=function(h){function k(r){r=h.call(this)||this;r.latestWkid=
null;r.wkid=null;r.wkt=null;return r}a(k,h);var e=k;k.fromJSON=function(r){if(!r)return null;if(r.wkid){if(102100===r.wkid)return e.WebMercator;if(4326===r.wkid)return e.WGS84}var q=new e;q.read(r);return q};k.prototype.normalizeCtorArgs=function(r){return r&&"object"===typeof r?r:(q={},q["string"===typeof r?"wkt":"wkid"]=r,q);var q};Object.defineProperty(k.prototype,"isWGS84",{get:function(){return f.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isWebMercator",
{get:function(){return f.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isGeographic",{get:function(){return f.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isWrappable",{get:function(){return f.isWrappable(this)},enumerable:!0,configurable:!0});k.prototype.writeWkt=function(r,q){this.wkid||(q.wkt=r)};k.prototype.clone=function(){if(this===e.WGS84)return e.WGS84;if(this===e.WebMercator)return e.WebMercator;var r=new e;
null!=this.wkid?(r.wkid=this.wkid,null!=this.latestWkid&&(r.latestWkid=this.latestWkid),null!=this.vcsWkid&&(r.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(r.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(r.wkt=this.wkt);return r};k.prototype.equals=function(r){return f.equals(this,r)};k.prototype.toJSON=function(r){return this.write(null,r)};k.GCS_NAD_1927=null;k.WGS84=null;k.WebMercator=null;d([m.property({dependsOn:["wkid"],readOnly:!0})],k.prototype,"isWGS84",null);d([m.property({dependsOn:["wkid"],
readOnly:!0})],k.prototype,"isWebMercator",null);d([m.property({dependsOn:["wkid","wkt"],readOnly:!0})],k.prototype,"isGeographic",null);d([m.property({dependsOn:["wkid"],readOnly:!0})],k.prototype,"isWrappable",null);d([m.property({type:Number,json:{write:!0}})],k.prototype,"latestWkid",void 0);d([m.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],k.prototype,"wkid",void 0);d([m.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],k.prototype,"wkt",void 0);d([m.writer("wkt"),m.writer("web-scene","wkt")],k.prototype,"writeWkt",null);d([m.property({type:Number,json:{write:!0}})],k.prototype,"vcsWkid",void 0);d([m.property({type:Number,json:{write:!0}})],k.prototype,"latestVcsWkid",void 0);return k=e=d([m.subclass("esri.geometry.SpatialReference")],k)}(m.declared(g));B.prototype.toJSON.isDefaultToJSON=!0;B.GCS_NAD_1927=new B({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
B.WGS84=new B(4326);B.WGS84.wkt=n.substitute({Central_Meridian:"0.0"},f.getInfo(B.WGS84).wkTemplate);B.WebMercator=new B({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(B.GCS_NAD_1927),Object.freeze(B.WGS84),Object.freeze(B.WebMercator));return B})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(B,p,a){function d(h){return h.wkid&&!0===g[h.wkid]}Object.defineProperty(p,"__esModule",{value:!0});var g=
{102113:!0,102100:!0,3857:!0,3785:!0},n={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};B=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7],f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:B,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:B,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:B,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:B,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};p.equals=function(h,k){if(k){if(h===k)return!0;if(null!=h.wkid||null!=k.wkid)return h.wkid===k.wkid||d(h)&&d(k)||null!=k.latestWkid&&h.wkid===k.latestWkid||null!=h.latestWkid&&k.wkid===h.latestWkid;if(h.wkt&&k.wkt)return h.wkt.toUpperCase()===k.wkt.toUpperCase()}return!1};p.getInfo=function(h){return h.wkid?f[h.wkid]:null};p.isGeographic=function(h){return h.wkid?null==a[h.wkid]:h.wkt?!!/^\s*GEOGCS/i.test(h.wkt):!1};p.isWGS84=function(h){return 4326===
h.wkid};p.isWebMercator=d;p.isWrappable=function(h){return h.wkid&&!0===n[h.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(B){return B})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(B,p,a,d){function g(k,e,r,q,u){if("point"===k.type&&"point"===u.type)e=e(k.x,k.y,h,0,q),u.x=e[0],u.y=e[1];else if("extent"===k.type&&
"extent"===u.type){var v=e(k.xmin,k.ymin,h,0,q);u.xmin=v[0];u.ymin=v[1];e=e(k.xmax,k.ymax,h,0,q);u.xmax=e[0];u.ymax=e[1]}else if("polyline"===k.type&&"polyline"===u.type||"polygon"===k.type&&"polygon"===u.type){v="polyline"===k.type?k.paths:k.rings;var x=[],z=void 0;for(k=0;k<v.length;k++){var A=v[k];z=[];x.push(z);for(var y=0;y<A.length;y++)z.push(e(A[y][0],A[y][1],[0,0],0,q)),2<A[y].length&&z[y].push(A[y][2]),3<A[y].length&&z[y].push(A[y][3])}"polyline"===u.type?u.paths=x:u.rings=x}else if("multipoint"===
k.type&&"multipoint"===u.type){v=k.points;x=[];for(k=0;k<v.length;k++)x[k]=e(v[k][0],v[k][1],[0,0],0,q),2<v[k].length&&x[k].push(v[k][2]),3<v[k].length&&x[k].push(v[k][3]);u.points=x}else if("mesh"===k.type&&"mesh"===u.type&&(v=k.vertexAttributes&&k.vertexAttributes.position,x=u.vertexAttributes&&u.vertexAttributes.position,v))for(z=[0,0],k=0;k<v.length;k+=3)e(v[k],v[k+1],z,0,q),x[k]=z[0],x[k+1]=z[1];u.spatialReference=r;return u}function n(k,e){var r=k&&(null!=k.wkid||null!=k.wkt?k:k.spatialReference),
q=e&&(null!=e.wkid||null!=e.wkt?e:e.spatialReference);return r&&q?d.equals(q,r)?!0:d.isWebMercator(q)&&d.isWGS84(r)||d.isWebMercator(r)&&d.isWGS84(q):!1}function m(k,e,r,q){void 0===r&&(r=[0,0]);void 0===q&&(q=0);89.99999<e?e=89.99999:-89.99999>e&&(e=-89.99999);e*=.017453292519943;r[q]=111319.49079327169*k;r[q+1]=3189068.5*Math.log((1+Math.sin(e))/(1-Math.sin(e)));return r}function f(k,e,r,q,u){void 0===r&&(r=[0,0]);void 0===q&&(q=0);void 0===u&&(u=!1);k=k/6378137*57.29577951308232;r[q]=u?k:k-360*
Math.floor((k+180)/360);r[q+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*e/6378137)));return r}Object.defineProperty(p,"__esModule",{value:!0});var h=[0,0];p.canProject=n;p.project=function(k,e){var r=k&&k.spatialReference,q=e&&(null!=e.wkid||null!=e.wkt?e:e.spatialReference);return n(r,q)?d.equals(r,q)?k.clone():d.isWebMercator(q)?g(k,m,a.WebMercator,!1,k.clone()):d.isWGS84(q)?g(k,f,a.WGS84,!1,k.clone()):null:null};p.lngLatToXY=m;p.xyToLngLat=f;p.geographicToWebMercator=function(k,
e,r){void 0===e&&(e=!1);void 0===r&&(r=k.clone());return g(k,m,a.WebMercator,e,r)};p.webMercatorToGeographic=function(k,e,r){void 0===e&&(e=!1);void 0===r&&(r=k.clone());return g(k,f,a.WGS84,e,r)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./mesh/factories/WGLMeshFactory ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u){var v=new a["default"],x=new a["default"];return function(){function z(){this.tileBufferData=this.tileDisplayData=null}z.prototype.reshuffle=function(){v.reset();var A=this._collectDisplayRecords(),y;for(y in A)for(var c=A[y],b=0,l=c;b<l.length;b++){var t=l[b];v.needMore(t.geometryType,t.meshData?t.meshData.vertexCount:t.vertexCount,t.meshData?t.meshData.indexData.length:t.indexCount)}b=A.length;l=new d;for(y=0;y<b;++y){l.geometries[y].indexBuffer=new Uint32Array(Math.round(1.15*
v.indicesFor(y)));t=[];for(var w in this.tileBufferData.geometries[y].vertexBuffer)t.push(this.tileBufferData.geometries[y].vertexBuffer[w].stride);t=z._computeVertexAlignment(t);c=Math.round(1.15*v.verticesFor(y));t=z._align(c,t);for(var C in this.tileBufferData.geometries[y].vertexBuffer)c=this.tileBufferData.geometries[y].vertexBuffer[C].stride,l.geometries[y].vertexBuffer[C]={stride:c,data:new Uint32Array(Math.round(t*c/4))}}x.reset();this.tileDisplayData.displayList=new m;for(y=0;y<b;++y){c=
A[y];w=0;for(C=c;w<C.length;w++){t=C[w];if(t.meshData)t.writeMeshDataToBuffers(x.verticesFor(y),l.geometries[y].vertexBuffer,x.indicesFor(y),l.geometries[y].indexBuffer),t.meshData=null;else{var D=this.tileBufferData.geometries[y].vertexBuffer,E=this.tileBufferData.geometries[y].indexBuffer,F=l.geometries[y].vertexBuffer,G=l.geometries[y].indexBuffer,H=x.verticesFor(y),M=x.indicesFor(y);n.copyMeshData(H,M,F,G,t,D,E);t.vertexFrom=H;t.indexFrom=M}x.needMore(y,t.vertexCount,t.indexCount)}this.tileDisplayData.displayList.addToList(c)}this.tileBufferData=
l};z.prototype.getStrides=function(){for(var A=[],y=0;y<this.tileBufferData.geometries.length;++y){var c=this.tileBufferData.geometries[y];A[y]={};for(var b in c.vertexBuffer)A[y][b]=c.vertexBuffer[b].stride}return A};z.prototype._guessSize=function(){for(var A=this.tileDisplayData.displayObjects,y=Math.min(A.length,4),c=0,b=0;b<y;b++)c=Math.max(c,A[b].displayRecords.length);return 2*(12*A.length+A.length*c*40)};z.prototype.serialize=function(){var A=this.tileBufferData.serialize(),y=this.tileBufferData.getBuffers(),
c=this.tileDisplayData.serialize(new u["default"](Int32Array,this._guessSize())).buffer();y.push(c);return{result:{displayData:c,bufferData:A},transferList:y}};z.decode=function(A){var y=e.MaterialStore.deserialize(new r["default"](A.materialStore)),c=q.deserializeList(new r["default"](A.displayObjects),f,{store:y});y={};for(var b in A.vertexBuffersMap)y[b]=k.VertexBuffers.decode(A.vertexBuffersMap[b]);A=new z;b=new g;var l=new d;b.displayObjects=c;for(var t in y)c=y[t],l.geometries[t].indexBuffer=
c.indexBuffer,l.geometries[t].vertexBuffer=c.namedBuffers;A.tileDisplayData=b;A.tileBufferData=l;return A};z.bind=function(A,y){var c=new z;c.tileDisplayData=A;c.tileBufferData=y;return c};z.create=function(A,y){var c=new z;c.tileDisplayData=new g;c.tileDisplayData.displayObjects=A;for(var b=[0,0,0,0,0],l=[0,0,0,0,0],t=[[],[],[],[],[]],w=0;w<A.length;w++)for(var C=0,D=A[w].displayRecords;C<D.length;C++){var E=D[C];t[E.geometryType].push(E);b[E.geometryType]+=E.meshData.vertexCount;l[E.geometryType]+=
E.meshData.indexData.length}w=new d;C=[y.fill||{},y.line||{},y.icon||{},y.text||{},y.label||{}];for(D=0;5>D;D++){E=new Uint32Array(l[D]);var F=void 0;var G=C[D],H=b[D],M={};for(F in G){var X={data:new Uint32Array(H*G[F]/4),stride:G[F]};M[F]=X}F=M;h.writeAllMeshDataToBuffers(t[D],F,E);w.geometries[D]={indexBuffer:E,vertexBuffer:F}}c.tileBufferData=w;return c};z._align=function(A,y){var c=A%y;return 0===c?A:A+(y-c)};z._computeVertexAlignment=function(A){for(var y=!1,c=!1,b=0;b<A.length;b++){var l=A[b];
2===l%4?y=!0:0!==l%4&&(c=!0)}return c?4:y?2:1};z.prototype._collectDisplayRecords=function(){for(var A=[[],[],[],[],[]],y=0,c=this.tileDisplayData.displayObjects;y<c.length;y++)for(var b=0,l=c[y].displayRecords;b<l.length;b++){var t=l[b];A[t.geometryType].push(t)}return A};return z}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function d(){this._byGeometryType=
null}Object.defineProperty(d.prototype,"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});d.prototype.reset=function(){this._byGeometryType=null};d.prototype.verticesFor=function(g){return this._byGeometryType?this._byGeometryType[g].vertices:0};d.prototype.indicesFor=function(g){return this._byGeometryType?this._byGeometryType[g].indices:0};d.prototype.needMore=function(g,n,m){if(n||m)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,
indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),g=this._byGeometryType[g],g.vertices+=n,g.indices+=m};return d}();p["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports"],function(B,p){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}
a.deserialize=function(d){for(var g=new a,n=0;5>n;++n){g.geometries[n].indexBuffer=new Uint32Array(d.geometries[n].indexBuffer);g.geometries[n].vertexBuffer={};for(var m in d.geometries[n].vertexBuffer)g.geometries[n].vertexBuffer[m]={data:new Uint32Array(d.geometries[n].vertexBuffer[m].data),stride:d.geometries[n].vertexBuffer[m].stride}}return g};a.prototype.serialize=function(){for(var d={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,
vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},g=0;5>g;++g)for(var n in this.geometries[g].vertexBuffer)d.geometries[g].vertexBuffer[n]={data:this.geometries[g].vertexBuffer[n].data.buffer,stride:this.geometries[g].vertexBuffer[n].stride};return d};a.prototype.getBuffers=function(){for(var d=[],g=0;5>g;++g){d.push(this.geometries[g].indexBuffer.buffer);
for(var n in this.geometries[g].vertexBuffer)d.push(this.geometries[g].vertexBuffer[n].data.buffer)}return d};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define("require exports ./WGLDisplayList ./WGLDisplayObject ./mesh/factories/WGLMeshFactory ./util/serializationUtils".split(" "),function(B,p,a,d,g,n){return function(){function m(){}Object.defineProperty(m.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=
new Map;for(var f=0,h=this.displayObjects;f<h.length;f++){var k=h[f];this._displayObjectRegistry.set(k.id,k)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=new a;for(var f=0,h=this.displayObjects;f<h.length;f++)for(var k=0,e=h[f].displayRecords;k<e.length;k++)this._displayList.addToList(e[k])}return this._displayList},set:function(f){this._displayList=f},enumerable:!0,configurable:!0});
m.prototype.serialize=function(f){this.materialStore.serialize(f);n.serializeList(f,this.displayObjects);return f};m.prototype._deserializeObjects=function(f){var h=f.readInt32();h=Array(h);for(var k=new a,e=new Map,r={store:this.materialStore},q=0;q<h.length;++q){var u=d.deserialize(f,r);h[q]=u;e.set(u.id,u);var v=0;for(u=u.displayRecords;v<u.length;v++)k.addToList(u[v])}this.displayObjects=h;this._displayList=k;this._displayObjectRegistry=e};m.deserialize=function(f){var h=new m;h.materialStore=
g.MaterialStore.deserialize(f);h._deserializeObjects(f);return h};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(B,p,a,d,g,n,m,f){var h=d.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");B=function(){function u(){this.symbolLevels=[]}Object.defineProperty(u.prototype,"empty",{get:function(){return!this.symbolLevels||
0===this.symbolLevels.length},enumerable:!0,configurable:!0});u.prototype.addToList=function(v){var x=this;Array.isArray(v)?v.forEach(function(z){x._addToList(z)}):this._addToList(v)};u.prototype.removeFromList=function(v){var x=this;Array.isArray(v)||(v=[v]);v.forEach(function(z){x._removeFromList(z)})};u.prototype.ofType=function(v){var x,z,A,y,c,b,l,t,w,C,D;return a(this,function(E){switch(E.label){case 0:x=0,z=this.symbolLevels,E.label=1;case 1:if(!(x<z.length))return[3,8];A=z[x];y=0;c=A.zLevels;
E.label=2;case 2:if(!(y<c.length))return[3,7];b=c[y];l=b.geometryDPInfo;t=this._getDPInfoType(v);if(!l[t])return[3,6];w=0;C=l[t];E.label=3;case 3:if(!(w<C.length))return[3,6];D=C[w];return[4,D];case 4:E.sent(),E.label=5;case 5:return w++,[3,3];case 6:return y++,[3,2];case 7:return x++,[3,1];case 8:return[2]}})};u.prototype._addToList=function(v){var x=this._getDisplayList(v.symbolLevel,v.zOrder,v.geometryType),z=0<x.length?x[x.length-1]:null;null!==z&&m.isSameMaterialInfo(z.materialInfo,v.materialInfo)&&
z.indexFrom+z.indexCount===v.indexFrom?z.indexCount+=v.indexCount:(z=new k,z.indexFrom=v.indexFrom,z.indexCount=v.indexCount,z.materialInfo=v.materialInfo,z.geometryType=v.geometryType,x.push(z))};u.prototype._removeFromList=function(v){for(var x=this._getDisplayList(v.symbolLevel,v.zOrder,v.geometryType),z=x.length,A=void 0,y=0;y<z;++y){var c=x[y];v.indexFrom+v.indexCount>c.indexFrom&&v.indexFrom<c.indexFrom+c.indexCount&&(A=y)}if(void 0!==A)if(c=x[A],v.indexFrom===c.indexFrom)c.indexCount-=v.indexCount,
c.indexFrom+=v.indexCount;else if(v.indexFrom+v.indexCount===c.indexFrom+c.indexCount)c.indexCount-=v.indexCount;else{z=c.indexFrom;y=v.indexFrom-c.indexFrom;var b=v.indexCount;v=c.indexFrom+c.indexCount-(v.indexFrom+v.indexCount);c.indexCount=y;var l=new k;l.geometryType=c.geometryType;l.materialInfo=new n["default"];l.materialInfo.copy(c.materialInfo);l.indexFrom=z+y+b;l.indexCount=v;x.splice(A+1,0,l)}};u.prototype._getDisplayList=function(v,x,z){for(var A,y=this.symbolLevels.length,c=0;c<y;c++)if(this.symbolLevels[c].symbolLevel===
v){A=this.symbolLevels[c];break}A||(A=new q,A.symbolLevel=v,this.symbolLevels.push(A));v=A.zLevels.length;for(y=0;y<v;y++)if(A.zLevels[y].zLevel===x){var b=A.zLevels[y];break}b||(b=new r,b.geometryDPInfo=new e,b.zLevel=x,A.zLevels.push(b));switch(z){case g.WGLGeometryType.FILL:b.geometryDPInfo.fill||(b.geometryDPInfo.fill=[]);var l=b.geometryDPInfo.fill;break;case g.WGLGeometryType.LINE:b.geometryDPInfo.line||(b.geometryDPInfo.line=[]);l=b.geometryDPInfo.line;break;case g.WGLGeometryType.MARKER:b.geometryDPInfo.marker||
(b.geometryDPInfo.marker=[]);l=b.geometryDPInfo.marker;break;case g.WGLGeometryType.TEXT:b.geometryDPInfo.text||(b.geometryDPInfo.text=[]);l=b.geometryDPInfo.text;break;case g.WGLGeometryType.LABEL:b.geometryDPInfo.label||(b.geometryDPInfo.label=[]),l=b.geometryDPInfo.label}return l};u.prototype.serialize=function(v){f.serializeList(v,this.symbolLevels);return v};u.deserialize=function(v){var x=new u;x.symbolLevels=f.deserializeList(v,q);return x};u.prototype._getDPInfoType=function(v){switch(v){case g.WGLGeometryType.FILL:return"fill";
case g.WGLGeometryType.LINE:return"line";case g.WGLGeometryType.MARKER:return"marker";case g.WGLGeometryType.TEXT:return"text";case g.WGLGeometryType.LABEL:return"label";default:h.error("DisplayList: Tried to convert unknown geometryType: "+v)}};return u}();var k=function(){function u(){this.materialInfo=null;this.indexCount=this.indexFrom=0}u.prototype.serialize=function(v){this.materialInfo.serialize(v);v.writeInt32(this.indexFrom);v.writeInt32(this.indexCount);return v};u.deserialize=function(v,
x){var z=new u;z.geometryType=x.geometryType;z.materialInfo=n["default"].deserialize(v);z.indexFrom=v.readInt32();z.indexCount=v.readInt32();return z};return u}(),e=function(){function u(){this.label=this.text=this.marker=this.line=this.fill=null}u.prototype.serialize=function(v){f.serializeList(v,this.fill);f.serializeList(v,this.line);f.serializeList(v,this.marker);f.serializeList(v,this.text);f.serializeList(v,this.label);return v};u.deserialize=function(v){var x=new u,z={geometryType:g.WGLGeometryType.FILL},
A=f.deserializeList(v,k,z);A.length&&(x.fill=A);z.geometryType=g.WGLGeometryType.LINE;A=f.deserializeList(v,k,z);A.length&&(x.line=A);z.geometryType=g.WGLGeometryType.MARKER;A=f.deserializeList(v,k,z);A.length&&(x.marker=A);z.geometryType=g.WGLGeometryType.TEXT;A=f.deserializeList(v,k,z);A.length&&(x.text=A);z.geometryType=g.WGLGeometryType.LABEL;v=f.deserializeList(v,k,z);v.length&&(x.label=v);return x};return u}(),r=function(){function u(){this.geometryDPInfo=new e}u.prototype.serialize=function(v){v.writeInt32(this.zLevel);
this.geometryDPInfo.serialize(v);return v};u.deserialize=function(v){var x=new u;x.zLevel=v.readInt32();x.geometryDPInfo=e.deserialize(v);return x};return u}(),q=function(){function u(){this.zLevels=[]}u.prototype.serialize=function(v){v.writeInt32(this.symbolLevel);f.serializeList(v,this.zLevels);return v};u.deserialize=function(v){var x=new u;x.symbolLevel=v.readInt32();x.zLevels=f.deserializeList(v,r);return x};return u}();return B})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],
function(){return function(B,p){function a(k){return function(e){return d([k,e])}}function d(k){if(n)throw new TypeError("Generator is already executing.");for(;g;)try{if(n=1,m&&(f=k[0]&2?m["return"]:k[0]?m["throw"]||((f=m["return"])&&f.call(m),0):m.next)&&!(f=f.call(m,k[1])).done)return f;if(m=0,f)k=[k[0]&2,f.value];switch(k[0]){case 0:case 1:f=k;break;case 4:return g.label++,{value:k[1],done:!1};case 5:g.label++;m=k[1];k=[0];continue;case 7:k=g.ops.pop();g.trys.pop();continue;default:if(!(f=g.trys,
f=0<f.length&&f[f.length-1])&&(6===k[0]||2===k[0])){g=0;continue}if(3===k[0]&&(!f||k[1]>f[0]&&k[1]<f[3]))g.label=k[1];else if(6===k[0]&&g.label<f[1])g.label=f[1],f=k;else if(f&&g.label<f[2])g.label=f[2],g.ops.push(k);else{f[2]&&g.ops.pop();g.trys.pop();continue}}k=p.call(B,g)}catch(e){k=[6,e],m=0}finally{n=f=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var g={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},n,m,f,h;return h={next:a(0),"throw":a(1),"return":a(2)},
"function"===typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(B,p,a,d,g,n){return function(){function m(f){this.yOverflow=this.xOverflow=this.yBucket=this.xBucket=-1;this.id=f;this.displayRecords=[];this.metrics=[];this.anchor=null}m.prototype.addMetric=function(f,
h,k,e){this.metrics.push(new g["default"](f,{from:h,count:k},e))};m.prototype.serialize=function(f){f.writeInt32(this.id);n.serializeList(f,this.metrics);n.serializeList(f,this.displayRecords);this.anchor?(f.writeF32(this.anchor[0]),f.writeF32(this.anchor[1]),f.writeInt32(this.xBucket),f.writeInt32(this.yBucket),f.writeInt32(this.xOverflow),f.writeInt32(this.yOverflow)):(f.writeF32(0),f.writeF32(0));return f};m.deserialize=function(f,h){var k=h.store,e=f.readInt32(),r=new m(e);k={id:e,store:k};e=
n.deserializeList(f,g["default"]);e.length&&(r.metrics=e);r.displayRecords=n.deserializeList(f,d,k);k=f.readF32();e=f.readF32();if(k||e)r.anchor=a.fromValues(k,e),r.xBucket=f.readInt32(),r.yBucket=f.readInt32(),r.xOverflow=f.readInt32(),r.yOverflow=f.readInt32();return r};return m}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(B){var p={create:function(){var a=new B.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var d=new B.ARRAY_TYPE(2);
d[0]=a[0];d[1]=a[1];return d},fromValues:function(a,d){var g=new B.ARRAY_TYPE(2);g[0]=a;g[1]=d;return g},copy:function(a,d){a[0]=d[0];a[1]=d[1];return a},set:function(a,d,g){a[0]=d;a[1]=g;return a},add:function(a,d,g){a[0]=d[0]+g[0];a[1]=d[1]+g[1];return a},subtract:function(a,d,g){a[0]=d[0]-g[0];a[1]=d[1]-g[1];return a}};p.sub=p.subtract;p.multiply=function(a,d,g){a[0]=d[0]*g[0];a[1]=d[1]*g[1];return a};p.mul=p.multiply;p.divide=function(a,d,g){a[0]=d[0]/g[0];a[1]=d[1]/g[1];return a};p.div=p.divide;
p.ceil=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);return a};p.floor=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);return a};p.min=function(a,d,g){a[0]=Math.min(d[0],g[0]);a[1]=Math.min(d[1],g[1]);return a};p.max=function(a,d,g){a[0]=Math.max(d[0],g[0]);a[1]=Math.max(d[1],g[1]);return a};p.round=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);return a};p.scale=function(a,d,g){a[0]=d[0]*g;a[1]=d[1]*g;return a};p.scaleAndAdd=function(a,d,g,n){a[0]=d[0]+g[0]*n;a[1]=
d[1]+g[1]*n;return a};p.distance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1];return Math.sqrt(g*g+n*n)};p.dist=p.distance;p.squaredDistance=function(a,d){var g=d[0]-a[0],n=d[1]-a[1];return g*g+n*n};p.sqrDist=p.squaredDistance;p.length=function(a){var d=a[0];a=a[1];return Math.sqrt(d*d+a*a)};p.len=p.length;p.squaredLength=function(a){var d=a[0];a=a[1];return d*d+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];return a};p.inverse=function(a,d){a[0]=1/d[0];a[1]=1/d[1];return a};
p.normalize=function(a,d){var g=d[0],n=d[1];g=g*g+n*n;0<g&&(g=1/Math.sqrt(g),a[0]=d[0]*g,a[1]=d[1]*g);return a};p.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};p.cross=function(a,d,g){d=d[0]*g[1]-d[1]*g[0];a[0]=a[1]=0;a[2]=d;return a};p.lerp=function(a,d,g,n){var m=d[0];d=d[1];a[0]=m+n*(g[0]-m);a[1]=d+n*(g[1]-d);return a};p.random=function(a,d){d=d||1;var g=2*B.RANDOM()*Math.PI;a[0]=Math.cos(g)*d;a[1]=Math.sin(g)*d;return a};p.transformMat2=function(a,d,g){var n=d[0];d=d[1];a[0]=g[0]*n+g[2]*d;a[1]=
g[1]*n+g[3]*d;return a};p.transformMat2d=function(a,d,g){var n=d[0];d=d[1];a[0]=g[0]*n+g[2]*d+g[4];a[1]=g[1]*n+g[3]*d+g[5];return a};p.transformMat3=function(a,d,g){var n=d[0];d=d[1];a[0]=g[0]*n+g[3]*d+g[6];a[1]=g[1]*n+g[4]*d+g[7];return a};p.transformMat4=function(a,d,g){var n=d[0];d=d[1];a[0]=g[0]*n+g[4]*d+g[12];a[1]=g[1]*n+g[5]*d+g[13];return a};p.forEach=function(){var a=p.create();return function(d,g,n,m,f,h){g||(g=2);n||(n=0);for(m=m?Math.min(m*g+n,d.length):d.length;n<m;n+=g)a[0]=d[n],a[1]=
d[n+1],f(a,a,h),d[n]=a[0],d[n+1]=a[1];return d}}();p.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};p.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]};p.equals=function(a,d){var g=a[0],n=a[1],m=d[0],f=d[1];return Math.abs(g-m)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(n-f)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))};return p})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData"],
function(B,p,a,d){var g=a.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function n(m,f,h){this.id=m;this.geometryType=f;this._materialInfo=h;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(n.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"materialInfo",{get:function(){return"number"===
typeof this._materialInfo?(g.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),null):this._materialInfo},set:function(m){this._materialInfo=m},enumerable:!0,configurable:!0});n.prototype.copy=function(){var m=new n(this.id,this.geometryType,this._materialInfo);m.vertexFrom=this.vertexFrom;m.vertexCount=this.vertexCount;m.indexFrom=this.indexFrom;m.indexCount=this.indexCount;m.zOrder=this.zOrder;m.symbolLevel=this.symbolLevel;m.meshData=this.meshData;
return m};n.prototype.setMeshDataFromBuffers=function(m,f,h){var k=new d,e;for(e in f){for(var r=f[e].stride,q=f[e].data,u=[],v=0;v<r*m.vertexCount/4;++v)u[v]=q[v+r*m.vertexFrom/4];k.vertexData.set(e,u)}for(v=k.indexData.length=0;v<m.indexCount;++v)k.indexData[v]=h[v+m.indexFrom]-m.vertexFrom;k.vertexCount=m.vertexCount;this.meshData=k};n.prototype.readMeshDataFromBuffers=function(m,f){this.meshData?this.meshData.clear():this.meshData=new d;for(var h in m){for(var k=m[h].stride,e=m[h].data,r=[],q=
0;q<k*this.vertexCount/4;++q)r[q]=e[q+k*this.vertexFrom/4];this.meshData.vertexData.set(h,r)}for(q=this.meshData.indexData.length=0;q<this.indexCount;++q)this.meshData.indexData[q]=f[q+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};n.prototype.writeMeshDataToBuffers=function(m,f,h,k){for(var e in f)for(var r=f[e].stride,q=this.meshData.vertexData.get(e),u=f[e].data,v=0;v<r*this.meshData.vertexCount/4;++v)u[v+r*m/4]=q[v];for(v=0;v<this.meshData.indexData.length;++v)k[v+
h]=this.meshData.indexData[v]+m;this.vertexFrom=m;this.vertexCount=this.meshData.vertexCount;this.indexFrom=h;this.indexCount=this.meshData.indexData.length};n.writeAllMeshDataToBuffers=function(m,f,h){for(var k=0,e=0,r=0;r<m.length;r++){var q=m[r];q.writeMeshDataToBuffers(k,f,e,h);k+=q.vertexCount;e+=q.indexCount}};n.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};n.prototype.serialize=function(m){m.writeInt32(this.geometryType);
m.writeInt32(this._materialInfo);m.writeInt32(this.symbolLevel);m.writeInt32(this.zOrder);m.writeInt32(this.vertexFrom);m.writeInt32(this.vertexCount);m.writeInt32(this.indexFrom);m.writeInt32(this.indexCount);return m};n.deserialize=function(m,f){var h=m.readInt32(),k=f.store&&f.store.get(m.readInt32())||m.readInt32();h=new n(f.id,h,k);h.symbolLevel=m.readInt32();h.zOrder=m.readInt32();h.vertexFrom=m.readInt32();h.vertexCount=m.readInt32();h.indexFrom=m.readInt32();h.indexCount=m.readInt32();return h};
return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(B,p){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(d,g,n){for(var m in d)this.vertexData.set(m,d[m]);for(m in this.vertexData)null===d[m]&&this.vertexData["delete"](m);this.vertexCount=g;this.indexData=n};return a}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function d(g,n,m,f,h){void 0===f&&(f=255);void 0===h&&(h=0);this.bounds=g;this.range=n;this.index=m;this.minZoom=f;this.maxZoom=h}d.prototype.serialize=function(g){this.bounds.serialize(g);g.writeInt32(this.range.from);g.writeInt32(this.range.count);g.writeInt32(this.index);return g};d.deserialize=function(g){var n=
a["default"].deserialize(g),m=g.readInt32(),f=g.readInt32();m={from:m,count:f};g=g.readInt32();return new d(n,m,g)};return d}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix/vec2"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function d(g,n,m,f){this.width=m;this.height=f;this.center=a.fromValues(g,n)}Object.defineProperty(d.prototype,"x",{get:function(){return this.center[0]},
set:function(g){this.center[0]=g},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.center[1]},set:function(g){this.center[1]=g},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});d.prototype.serialize=function(g){g.writeF32(this.center[0]);
g.writeF32(this.center[1]);g.writeInt32(this.width);g.writeInt32(this.height);return g};d.deserialize=function(g){var n=g.readF32(),m=g.readF32(),f=g.readInt32();g=g.readInt32();return new d(n,m,f,g)};return d}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b){Object.defineProperty(p,"__esModule",{value:!0});var l=g.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),t={esriGeometryPoint:"above-center above-left above-right center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null},w=function(){function F(){this._materials=[];this._materialsIndex=new Map}
F.prototype.insert=function(G){var H=this._materials.length;this._materials.push(G);return H};F.prototype._hashGlyph=function(G,H,M){return"G-"+H+"-"+M+"-"+G.page};F.prototype._hashSprite=function(G,H,M){return"S-"+H+"-"+M+"-"+(G?G.page:-1)+"-"+(G?G.sdf:!1)};F.prototype.createSpriteMaterial=function(G,H,M){var X=this._hashSprite(G,H,M);if(this._materialsIndex.has(X))return this._materialsIndex.get(X);var W=this._materials.length;G=h["default"].fromSprite(G,H,M);this._materials.push(G);this._materialsIndex.set(X,
W);return W};F.prototype.createGlyphMaterial=function(G,H,M){var X=this._hashGlyph(G,H,M);if(this._materialsIndex.has(X))return this._materialsIndex.get(X);var W=this._materials.length;G=h["default"].fromGlyph(G,H,M);this._materials.push(G);this._materialsIndex.set(X,W);return W};F.prototype.get=function(G){return this._materials[G]};F.prototype.serialize=function(G){y.serializeList(G,this._materials);return G};F.deserialize=function(G){var H=new F;H._materials=y.deserializeList(G,h["default"]);return H};
return F}();p.MaterialStore=w;var C=function(){function F(G){this._bucketSize=G;this._rowsLength=m.TILE_SIZE/G;this._colsLength=m.TILE_SIZE/G;this._grid=this._initGrid()}F.prototype.checkOverlap=function(G,H){var M=Math.floor(G/this._bucketSize),X=Math.floor(H/this._bucketSize);if(0>M||M>=this._rowsLength||0>X||X>=this._colsLength||this._grid[X][M])return!0;this._grid[X][M]=!0;return!1};F.prototype.reset=function(){this._grid=this._initGrid()};F.prototype._initGrid=function(){for(var G=[],H=0;H<this._rowsLength;H++)G.push(Array(this._colsLength));
return G};return F}(),D=function(){function F(G,H,M){this.displayObjects=G;this.vertexVectorsMap=H;this._materials=M;this.grid=new C(m.COLLISION_EARLY_REJECT_BUCKET_SIZE)}F.prototype.get=function(G){return this.vertexVectorsMap[G]};F.prototype.pushDisplayObject=function(G){this.displayObjects.push(G)};F.prototype.encode=function(G,H){var M=y.serializeList(new b["default"](Uint32Array,this._guessSize()),this.displayObjects).buffer(),X=this._materials.serialize(new b["default"](Uint32Array)).buffer(),
W={};H.push(M);H.push(X);for(var T=0;T<this.vertexVectorsMap.length;T++){var K=this.vertexVectorsMap[T];W[T]={};K.transfer(W[T],H)}G.displayObjects=M;G.materialStore=X;G.vertexBuffersMap=W;this.destroy()};F.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};F.prototype._guessSize=function(){for(var G=this.displayObjects,H=Math.min(G.length,4),M=0,X=0;X<H;X++)M=Math.max(M,G[X].displayRecords.length);return 2*(12*G.length+G.length*M*40)};return F}(),E=function(){function F(){this._vvMap=
new Map}F.prototype.set=function(G,H){this._vvMap.set(G,H)};F.prototype.getValue=function(G,H,M){return this._vvMap.has(G)?this._vvMap.get(G)(H,M):0};return F}();B=function(){function F(G,H,M,X,W,T,K,O,N,Y){var P=this;this._labelsDebugTemplate=null;this._matcher=G;this._materials=M;this._geometryType=X;this._idField=W;this._pixelRatio=N;this._vvMap=null;this._vvFlags=K;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(T,
H,O);Y&&(this._validateLabelingInfo(Y)?this._labelTemplates=Y.map(function(L){return v["default"].fromText(P._materials,0,L.symbol,N,L.labelPlacement)}):l.error(new d("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}F.from=function(G,H,M,X,W,T,K,O){switch(G.type){case "simple":return F._fromSimpleRenderer(G,H,M,X,W,T,K,O);case "unique-value":case "uniqueValue":return F._fromUniqueValueRenderer(G,H,M,X,W,T,K,O);case "class-breaks":case "classBreaks":return F._fromClassBreaksRenderer(G,
H,M,X,W,T,K,O);default:return l.error(new d("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(F.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});F.prototype.createMeshData=function(G){var H=Array(5),M=this._matcher.getDefault(),X=!!c.getMarkerVVFlags(this._vvFlags),W=!!c.getFillVVFlags(this._vvFlags),T=!!c.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),K=!!c.getTextVVFlags(this._vvFlags);
!this._labelTemplates&&M&&1===M.length&&M[0]instanceof z["default"]?(H[f.WGLGeometryType.MARKER]=new q.VertexVectors(f.WGLGeometryType.MARKER,X,G),H[f.WGLGeometryType.FILL]=new q.VertexVectors(f.WGLGeometryType.FILL,W,0),H[f.WGLGeometryType.LINE]=new q.VertexVectors(f.WGLGeometryType.LINE,T,0),H[f.WGLGeometryType.TEXT]=new q.VertexVectors(f.WGLGeometryType.TEXT,K,0),H[f.WGLGeometryType.LABEL]=new q.VertexVectors(f.WGLGeometryType.LABEL,!1,0)):(H[f.WGLGeometryType.MARKER]=new q.VertexVectors(f.WGLGeometryType.MARKER,
X,G),H[f.WGLGeometryType.FILL]=new q.VertexVectors(f.WGLGeometryType.FILL,W,G),H[f.WGLGeometryType.LINE]=new q.VertexVectors(f.WGLGeometryType.LINE,T,G),H[f.WGLGeometryType.TEXT]=new q.VertexVectors(f.WGLGeometryType.TEXT,K,G),H[f.WGLGeometryType.LABEL]=new q.VertexVectors(f.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?G:0));return new D([],H,this._materials)};F.prototype.write=function(G,H,M,X,W){var T=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(H,
M),K=H.attributes[this._idField],O=new r(K),N=!!X&&!!this._labelTemplates;this._computeVV(H,M);if(T&&(H.geometry||H.centroid)){M=O.displayRecords;for(var Y=0;Y<T.length;Y++){var P=T[Y],L=G.get(P.geometryType);P.writeMesh(M,L,this._geometryType,K,H,this._pixelRatio,this._vvBufU32)}N&&(T=this._getLabelReference(T),this._writeLabelMesh(O,G,K,H,W,X.get(K),T));G.pushDisplayObject(O)}};F.prototype._hasBadLabelClass=function(G,H){var M=G.labelPlacement,X=t[H];if(!X)return l.error(new d("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for WebGL Feature Layer, "+H+" is not supported")),!0;X.some(function(W){return W===M})||(X=X[0],l.warn("Found invalid label placement type "+M+" for "+H+". Defaulting to "+X),G.labelPlacement=X);return!1};F.prototype._validateLabelingInfo=function(G){var H=this;return!G.some(function(M){return H._hasBadLabelClass(M,H._geometryType)})};F.prototype._getLabelReference=function(G){for(var H=0;H<G.length;H++){var M=G[H];if(M instanceof z["default"])return M}return null};F.prototype._writeLabelMesh=
function(G,H,M,X,W,T,K){for(var O=G.displayRecords,N=0,Y=0,P=-1,L=-1,Q=0;Q<T.labelingInfo.length;Q++){var ca=T.labelingInfo[Q],ha=T.text[Q],ja=this._labelTemplates[ca],ma=H.get(ja.geometryType),R=W.get(ja.symbolId).glyphMosaicItems,fa=O.length;ja.bindReferenceTemplate(K);if(!ja.computeGlyphs(R,ha)){R=ja.computeAnchor(this._geometryType,X);ha=ja.bounds;if(-1===P&&(P=Math.floor(R[0]/m.COLLISION_BUCKET_SIZE),L=Math.floor(R[1]/m.COLLISION_BUCKET_SIZE),H.grid.checkOverlap(R[0],R[1])))return;ja.writeMesh(O,
ma,this._geometryType,M,X,this._pixelRatio,this._vvBufU32);G.anchor=R;G.addMetric(ha,fa,O.length-fa,ca);ca=ha.center;N=Math.max(ha.halfWidth+Math.abs(ca[0]),N);Y=Math.max(ha.halfHeight+Math.abs(ca[1]),Y)}}-1!==P&&(M=2.5*Math.max(N,Y),H=Math.ceil(Math.abs((M-G.anchor[0]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),M=Math.ceil(Math.abs((M-G.anchor[1]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),G.xBucket=P,G.yBucket=L,G.xOverflow=H,G.yOverflow=M)};F.prototype._debugLabels=function(G,H,M,
X,W){X={geometry:{paths:[[[X[0]+W.center[0]-W.width/2,X[1]+W.center[1]+W.height/2],[0,-W.height],[W.width,0],[0,W.height],[-W.width,0]]]},attributes:{}};W=this._getLabelDebugTemplate();H=H.get(W.geometryType);W.writeMesh(G,H,"esriGeometryPolyline",M,X,this._pixelRatio,this._vvBufU32)};F.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};F.prototype._createLabelsDebugTemplate=function(){var G=
new n({style:"solid",width:1,color:[255,0,0,1]});return x["default"].fromSimpleLine(this._materials,0,G,null,this._pixelRatio)};F.prototype._isErrorVV=function(G){return null===G||isNaN(G)||Infinity===G};F.prototype._computeVV=function(G,H){if(!this._vvMap)return 0;var M=this._vvMap.getValue(f.VVType.SIZE,G,H),X=this._vvMap.getValue(f.VVType.COLOR,G,H),W=this._vvMap.getValue(f.VVType.OPACITY,G,H),T=this._vvMap.getValue(f.VVType.ROTATION,G,H);this._vvBufF32[f.VVType.SIZE]=this._isErrorVV(M)?NaN:M;
this._vvBufF32[f.VVType.COLOR]=this._isErrorVV(X)?NaN:X;this._vvBufF32[f.VVType.OPACITY]=this._isErrorVV(W)?NaN:W;this._vvBufF32[f.VVType.ROTATION]=this._isErrorVV(T)?NaN:T;return 0};F.prototype._createVVFunctionMap=function(G,H,M){if(G&&G.length)for(var X=0;X<G.length;X++){var W=G[X],T=k.getVVType(W.type);if(W=this._createGetValueFunction(W,H,M))this._vvMap||(this._vvMap=new E),this._vvMap.set(T,W)}};F.prototype._createGetValueFunction=function(G,H,M){if(k.getVVType(G.type)===f.VVType.SIZE){var X=
e.getTypeOfSizeVisualVariable(G);return X===f.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(G,H,M,X===f.WGLVVFlag.SIZE_UNIT_VALUE&&function(W){return e.getVisualVariableSizeValueRepresentationRatio(W,G.valueRepresentation)})}return this._createNormalizedFunction(G,H,M)};F.prototype._createNormalizedFunction=function(G,H,M,X){var W=G.field;if(W){if("string"===typeof W){var T=G.normalizationField;return T?function(K){if(K.attributes[W]&&K.attributes[T])return K=K.attributes[W]/K.attributes[T],
X?X(K):K}:X?function(K){return X(K.attributes[W])}:function(K){return K.attributes[W]}}if("function"===typeof W)return l.error(new d("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(K){};l.error(new d("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof W));return function(K){}}if(G.valueExpression&&"$view.scale"!==G.valueExpression)return k.createArcadeFunction({valueExpression:G.valueExpression,
spatialReference:M,layer:H},X);l.error("Unable to create a normalized function for visual variable: "+G);return function(K){}};F._fromSimpleRenderer=function(G,H,M,X,W,T,K,O){var N=G.getSymbols();G=G.visualVariables;var Y=c.getVVFlags(G),P=new A["default"],L=new w;N.length&&P.setDefault(u.createMeshTemplates([],L,N[0],M,Y,K));return new F(P,H,L,X,W,G,Y,T,K,O)};F._fromUniqueValueRenderer=function(G,H,M,X,W,T,K,O){var N=G.uniqueValueInfos,Y=G.visualVariables,P=c.getVVFlags(Y),L=[G.field];G.field2&&
L.push(G.field2);G.field3&&L.push(G.field3);var Q=G.valueExpression;L=new A.MapMatcher(L,G.fieldDelimiter,Q?{valueExpression:Q,spatialReference:T,layer:H}:null);Q=new w;var ca=G.backgroundFillSymbol;ca=ca&&u.createMeshTemplates([],Q,ca,M,P,K);for(var ha=0;ha<N.length;ha++){var ja=N[ha],ma=u.createMeshTemplates([],Q,ja.symbol,M,P,K);L.add(ja.value,ca?ca.concat(ma):ma)}if(G=G.defaultSymbol)M=u.createMeshTemplates([],Q,G,M,P,K),L.setDefault(ca?ca.concat(M):M);return new F(L,H,Q,X,W,Y,P,T,K,O)};F._fromClassBreaksRenderer=
function(G,H,M,X,W,T,K,O){var N=G.isMaxInclusive,Y=G.visualVariables,P=G.valueExpression,L=G.normalizationField,Q=G.normalizationTotal,ca=G.normalizationType,ha=c.getVVFlags(Y);N=new A.IntervalMatcher(G.field,N,P?{valueExpression:P,spatialReference:T,layer:H}:null,{normalizationField:L,normalizationTotal:Q,normalizationType:ca});P=new w;L=(L=G.backgroundFillSymbol)&&u.createMeshTemplates([],P,L,M,ha,K,!0);Q=0;for(ca=G.classBreakInfos;Q<ca.length;Q++){var ja=ca[Q],ma=u.createMeshTemplates([],P,ja.symbol,
M,ha,K);N.add({min:ja.minValue,max:ja.maxValue},L?L.concat(ma):ma)}if(G=G.defaultSymbol)M=u.createMeshTemplates([],P,G,M,ha,K),N.setDefault(L?L.concat(M):M);return new F(N,H,P,X,W,Y,ha,T,K,O)};return F}();p["default"]=B})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(B,p,a,d){var g={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",
STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},n={color:[0,0,0,1],style:g.STYLE_SOLID,width:.75,cap:g.CAP_BUTT,join:g.JOIN_MITER,miterLimit:7.5},m=B(d,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",
style:{value:g.STYLE_SOLID,json:{read:function(f,h){return p.valueOf(this._jsonStyles,f)||void 0},write:function(f,h){h.style=this._jsonStyles[f]}}},cap:{value:g.CAP_BUTT,json:{read:!1,write:!1}},join:{value:g.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:a.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash",
"short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return p.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(f,h,k,e,r,q){if(f&&"string"!==typeof f)return f;var u={};null!=f&&(u.style=f);null!=h&&(u.color=h);null!=k&&(u.width=a.toPt(k));null!=e&&(u.cap=e);null!=r&&(u.join=r);null!=q&&(u.miterLimit=a.toPt(q));return u},clone:function(){return new m({color:p.clone(this.color),
style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});p.mixin(m,g);m.defaultProps=n;return m})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(B,p,a){return B(a,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:p.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary",
"../core/JSONSupport","../Color"],function(B,p,a,d){var g=p({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),n=0;return a.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+n++},properties:{type:{type:String,value:null,json:{read:g.fromJSON,
write:{ignoreOrigin:!0,writer:function(m,f){f.type=g.toJSON(this.type)}}}},color:{type:d,value:new d([0,0,0,1]),json:{read:function(m){return m&&B.isDefined(m[0])?[m[0],m[1],m[2],m[3]/255]:m},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(B,p){return function(a,d){void 0===d&&(d={});var g=d.ignoreUnknown||!1,n={},m;for(m in a)n[a[m]]=m;var f=function(k){return n.hasOwnProperty(k)?n[k]:g?void 0:k},h=function(k){return a.hasOwnProperty(k)?
a[k]:g?void 0:k};return{toJSON:f,fromJSON:h,read:function(k){return h(k)},write:function(k,e,r){k=f(k);void 0!==k&&(e[r]=k)}}}})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(B,p,a){function d(m){return Math.max(0,Math.min(p.ensureInteger(m),255))}var g=B([a],{declaredClass:"esri.Color",toJSON:function(){return[d(this.r),d(this.g),d(this.b),1<this.a?this.a:d(255*this.a)]},clone:function(){return new g(this.toRgba())}});
g.toJSON=function(m){return m&&[d(m.r),d(m.g),d(m.b),1<m.a?m.a:d(255*m.a)]};g.fromJSON=function(m){return m&&new g([m[0],m[1],m[2],m[3]/255])};g.toUnitRGB=function(m){return[m.r/255,m.g/255,m.b/255]};g.toUnitRGBA=function(m){return[m.r/255,m.g/255,m.b/255,null!=m.a?m.a:1]};var n="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(B=0;B<n.length;B++)g[n[B]]=a[n[B]];g.named.rebeccapurple=[102,51,153];return g})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(B,p,a,d){var g={};p.setObject("dojo.colors",g);var n=function(f,h,k){0>k&&++k;1<k&&--k;var e=6*k;return 1>e?f+(h-f)*e:1>2*k?h:2>3*k?f+(h-f)*(2/3-k)*6:f};B.colorFromRgb=a.fromRgb=function(f,h){var k=f.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(k){var e=k[2].split(/\s*,\s*/),r=e.length;k=k[1];if("rgb"==k&&3==r||"rgba"==k&&4==r)return k=e[0],"%"==k.charAt(k.length-1)?(k=d.map(e,function(v){return 2.56*parseFloat(v)}),4==r&&(k[3]=e[3]),a.fromArray(k,h)):a.fromArray(e,
h);if("hsl"==k&&3==r||"hsla"==k&&4==r){k=(parseFloat(e[0])%360+360)%360/360;var q=parseFloat(e[1])/100,u=parseFloat(e[2])/100;q=.5>=u?u*(q+1):u+q-u*q;u=2*u-q;k=[256*n(u,q,k+1/3),256*n(u,q,k),256*n(u,q,k-1/3),1];4==r&&(k[3]=e[3]);return a.fromArray(k,h)}}return null};var m=function(f,h,k){f=Number(f);return isNaN(f)?k:f<h?h:f>k?k:f};a.prototype.sanitize=function(){this.r=Math.round(m(this.r,0,255));this.g=Math.round(m(this.g,0,255));this.b=Math.round(m(this.b,0,255));this.a=m(this.a,0,1);return this};
g.makeGrey=a.makeGrey=function(f,h){return a.fromArray([f,f,f,h])};p.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.EXTRUDE_SCALE=64;p.PICTURE_FILL_COLOR=4294967295;p.TILE_SIZE=512;p.ANGLE_FACTOR_256=256/360;p.COLLISION_BUCKET_SIZE=128;p.COLLISION_MAX_ZOOM_DELTA=4;p.COLLISION_EARLY_REJECT_BUCKET_SIZE=
32})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(B,p,a,d,g,n,m){function f(q){return n.isNumber(q.minDataValue)&&n.isNumber(q.maxDataValue)&&null!=q.minSize&&null!=q.maxSize?g.WGLVVFlag.SIZE_MINMAX_VALUE:(q.expression&&"view.scale"===q.expression||q.valueExpression&&"$view.scale"===q.valueExpression)&&Array.isArray(q.stops)?
g.WGLVVFlag.SIZE_SCALE_STOPS:(null!=q.field||q.expression&&"view.scale"!==q.expression||q.valueExpression&&"$view.scale"!==q.valueExpression)&&Array.isArray(q.stops)?g.WGLVVFlag.SIZE_FIELD_STOPS:(null!=q.field||q.expression&&"view.scale"!==q.expression||q.valueExpression&&"$view.scale"!==q.valueExpression)&&null!=q.valueUnit?g.WGLVVFlag.SIZE_UNIT_VALUE:g.WGLVVFlag.NONE}function h(q){return{value:q.value,size:a.toPt(q.size)}}function k(q){return q.map(function(u){return h(u)})}function e(q){return"string"===
typeof q||"number"===typeof q?a.toPt(q):{type:"size",expression:q.expression,stops:k(q.stops)}}function r(q){var u={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(n.isString(q.field))if(q.stops){if(8<q.stops.length)return null;q=q.stops;for(var v=0;8>v;++v){var x=q[Math.min(v,q.length-1)];u.values[v]=x.value;u.opacities[v]=x.opacity}}else if(q.opacityValues){if(!n.isDefined(q.minDataValue)||!n.isDefined(q.maxDataValue)||2!==q.opacityValues.length)return null;u.values[0]=q.minDataValue;u.opacities[0]=
q.opacityValues[0];u.values[1]=q.maxDataValue;u.opacities[1]=q.opacityValues[1];for(v=2;8>v;++v)u.values[v]=q.maxDataValue,u.opacities[v]=q.opacityValues[1]}else return null;else if(q.stops&&0<=q.stops.length||q.opacityValues&&0<=q.opacityValues.length)for(q=q.stops&&0<=q.stops.length?q.stops[0].opacity:q.opacityValues[0],v=0;8>v;v++)u.values[v]=Infinity,u.opacities[v]=q;else return null;return u}Object.defineProperty(p,"__esModule",{value:!0});p.getTypeOfSizeVisualVariable=f;p.getVisualVariableSizeValueRepresentationRatio=
function(q,u){if(!q||!u)return q;switch(u){case "radius":case "distance":return 2*q;case "area":return Math.sqrt(q)}return q};p.stopToSizeStop=h;p.normalizeSizeStops=k;p.normalizeSizeElement=e;p.getVisualVariablesFields=function(q){var u=q&&0<q.length?{}:null;u&&q.forEach(function(v){var x=v.type;v.field&&(u[x]=v.field)});return u};p.convertVisualVariables=function(q){var u=q&&0<q.length?{}:null,v=u?{}:null;if(!u)return{vvFields:u,vvRanges:v};for(var x=0;x<q.length;x++){var z=q[x],A=z.type;z.field&&
(u[A]=z.field);if("size"===A){v.size||(v.size={});var y=z;switch(f(y)){case g.WGLVVFlag.SIZE_MINMAX_VALUE:v.size.minMaxValue={minDataValue:y.minDataValue,maxDataValue:y.maxDataValue,minSize:e(y.minSize),maxSize:e(y.maxSize)};break;case g.WGLVVFlag.SIZE_SCALE_STOPS:v.size.scaleStops={stops:k(y.stops)};break;case g.WGLVVFlag.SIZE_FIELD_STOPS:z=[];A=[];y=k(y.stops);for(var c=y.length,b=0;6>b;b++){var l=y[Math.min(b,c-1)];z.push(l.value);A.push(a.pt2px(l.size))}v.size.fieldStops={values:z,sizes:A};break;
case g.WGLVVFlag.SIZE_UNIT_VALUE:v.size.unitValue={unit:y.valueUnit,valueRepresentation:y.valueRepresentation}}}else if("color"===A)for(z=m.convertVisualVariables([z],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),v.color=z.color,b=0;32>b;b+=4)d.premultiplyAlpha(v.color.colors,b,!0);else"opacity"===A?v.opacity=r(z):"rotation"===A&&(v.rotation={type:z.rotationType})}return{vvFields:u,vvRanges:v}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require",
"exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(B,p,a,d,g){function n(b){return null!==b&&void 0!==b}function m(b){return"number"===typeof b}function f(b,l){b&&b.push(l)}function h(b,l,t,w,C){var D=b.minSize,E=b.maxSize;if(b.expression)return f(C,"Could not convert size info: expression not supported"),!1;if(b.useSymbolValue)return b=w.symbolSize[t],l.minSize[t]=b,l.maxSize[t]=b,l.offset[t]=l.minSize[t],l.factor[t]=0,l.type[t]=1,!0;if(n(b.field)){if(n(b.stops)){if(2===
b.stops.length&&m(b.stops[0].size)&&m(b.stops[1].size))return k(b.stops[0].size,b.stops[1].size,b.stops[0].value,b.stops[1].value,l,t),l.type[t]=1,!0;f(C,"Could not convert size info: stops only supported with 2 elements");return!1}if(m(D)&&m(E)&&n(b.minDataValue)&&n(b.maxDataValue))return k(D,E,b.minDataValue,b.maxDataValue,l,t),l.type[t]=1,!0;if(null!=a.meterIn[b.valueUnit])return l.minSize[t]=-Infinity,l.maxSize[t]=Infinity,l.offset[t]=0,l.factor[t]=1/a.meterIn[b.valueUnit],l.type[t]=1,!0;"unknown"===
b.valueUnit?f(C,"Could not convert size info: proportional size not supported"):f(C,"Could not convert size info: scale-dependent size not supported");return!1}if(!n(b.field)){if(b.stops&&b.stops[0]&&m(b.stops[0].size))return l.minSize[t]=b.stops[0].size,l.maxSize[t]=b.stops[0].size,l.offset[t]=l.minSize[t],l.factor[t]=0,l.type[t]=1,!0;if(m(D))return l.minSize[t]=D,l.maxSize[t]=D,l.offset[t]=D,l.factor[t]=0,l.type[t]=1,!0}f(C,"Could not convert size info: unsupported variant of sizeInfo");return!1}
function k(b,l,t,w,C,D){w=0<Math.abs(w-t)?(l-b)/(w-t):0;C.minSize[D]=0<w?b:l;C.maxSize[D]=0<w?l:b;C.offset[D]=b-t*w;C.factor[D]=w}function e(b,l,t,w){if(b.normalizationField||b.valueRepresentation)return f(w,"Could not convert size info: unsupported property"),null;var C=b.field;if(null!=C&&"string"!==typeof C)return f(w,"Could not convert size info: field is not a string"),null;if(!l.size)l.size={field:b.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(b.field)if(!l.size.field)l.size.field=
b.field;else if(b.field!==l.size.field)return f(w,"Could not convert size info: multiple fields in use"),null;switch(b.axis){case "width":return(C=h(b,l.size,0,t,w))?l:null;case "height":return(C=h(b,l.size,2,t,w))?l:null;case "depth":return(C=h(b,l.size,1,t,w))?l:null;case "width-and-depth":return(C=h(b,l.size,0,t,w))&&h(b,l.size,1,t,w),C?l:null;case null:case void 0:case "all":return(C=(C=(C=h(b,l.size,0,t,w))&&h(b,l.size,1,t,w))&&h(b,l.size,2,t,w))?l:null;default:return f(w,'Could not convert size info: unknown axis "'+
b.axis+'""'),null}}function r(b,l,t){for(var w=0;3>w;++w){var C=l.unitInMeters;1===b.type[w]&&(C*=l.modelSize[w],b.type[w]=2);b.minSize[w]/=C;b.maxSize[w]/=C;b.offset[w]/=C;b.factor[w]/=C}if(0!==b.type[0])l=0;else if(0!==b.type[1])l=1;else if(0!==b.type[2])l=2;else return f(t,"No size axis contains a valid size or scale"),!1;for(w=0;3>w;++w)0===b.type[w]&&(b.minSize[w]=b.minSize[l],b.maxSize[w]=b.maxSize[l],b.offset[w]=b.offset[l],b.factor[w]=b.factor[l],b.type[w]=b.type[l]);return!0}function q(b,
l,t){b[4*l]=t.r/255;b[4*l+1]=t.g/255;b[4*l+2]=t.b/255;b[4*l+3]=t.a}function u(b,l,t){if(b.normalizationField)return f(t,"Could not convert color info: unsupported property"),null;if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return f(t,"Could not convert color info: too many color stops"),null;l.color={field:b.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};b=b.stops;for(t=0;8>t;++t){var w=b[Math.min(t,b.length-1)];l.color.values[t]=
w.value;q(l.color.colors,t,w.color)}}else if(b.colors){if(!n(b.minDataValue)||!n(b.maxDataValue))return f(t,"Could not convert color info: missing data values"),null;if(2!==b.colors.length)return f(t,"Could not convert color info: invalid colors array"),null;l.color={field:b.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};l.color.values[0]=b.minDataValue;q(l.color.colors,0,b.colors[0]);l.color.values[1]=b.maxDataValue;q(l.color.colors,1,b.colors[1]);
for(t=2;8>t;++t)l.color.values[t]=b.maxDataValue,q(l.color.colors,t,b.colors[1])}else return f(t,"Could not convert color info: missing stops or colors"),null;else if(b.stops&&0<=b.stops.length||b.colors&&0<=b.colors.length)for(b=b.stops&&0<=b.stops.length?b.stops[0].color:b.colors[0],l.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},t=0;8>t;t++)l.color.values[t]=Infinity,q(l.color.colors,t,b);else return f(t,"Could not convert color info: no field and no colors/stops"),
null;return l}function v(b,l,t,w){b=2===t&&"arithmetic"===b.rotationType;l.offset[t]=b?90:0;l.factor[t]=b?-1:1;l.type[t]=1}function x(b,l,t){if("string"!==typeof b.field)return f(t,"Could not convert rotation info: field is not a string"),null;if(!l.rotation)l.rotation={field:b.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(b.field)if(!l.rotation.field)l.rotation.field=b.field;else if(b.field!==l.rotation.field)return f(t,"Could not convert rotation info: multiple fields in use"),null;
switch(b.axis){case "tilt":return v(b,l.rotation,0,t),l;case "roll":return v(b,l.rotation,1,t),l;case null:case void 0:case "heading":return v(b,l.rotation,2,t),l;default:return f(t,'Could not convert rotation info: unknown axis "'+b.axis+'""'),null}}function z(b,l,t){if(!b)return null;var w=!l.supportedTypes||!!l.supportedTypes.size,C=!l.supportedTypes||!!l.supportedTypes.color,D=!l.supportedTypes||!!l.supportedTypes.rotation;return(b=b.reduce(function(E,F){if(!E)return E;if(F.valueExpression)return f(t,
"Could not convert visual variables: arcade expressions not supported"),null;switch(F.type){case "size":return w?e(F,E,l,t):E;case "color":return C?u(F,E,t):E;case "rotation":return D?x(F,E,t):E;default:return f(t,"Could not convert visual variables: unsupported type "+F.type),null}},{size:null,color:null,rotation:null}))&&b.size&&!r(b.size,l,t)?null:b}function A(b,l,t){if(!!b!==!!l||b&&b.field!==l.field)return!1;if(b&&"rotation"===t)for(t=0;3>t;t++)if(b.type[t]!==l.type[t]||b.offset[t]!==l.offset[t]||
b.factor[t]!==l.factor[t])return!1;return!0}function y(b,l){var t={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},w=b&&null!=b.size;b&&b.size?(t.vvSizeEnabled=!0,t.vvSizeMinSize=b.size.minSize,t.vvSizeMaxSize=b.size.maxSize,t.vvSizeOffset=b.size.offset,t.vvSizeFactor=b.size.factor):b&&w&&(t.vvSizeValue=l.transformation.scale);b&&w&&(t.vvSymbolAnchor=
l.transformation.anchor,t.vvSymbolRotation=l.transformation.rotation);b&&b.color&&(t.vvColorEnabled=!0,t.vvColorValues=b.color.values,t.vvColorColors=b.color.colors);return t}Object.defineProperty(p,"__esModule",{value:!0});p.convertVisualVariables=z;p.initFastSymbolUpdatesState=function(b,l,t){return l&&b&&!b.disableFastUpdates?(b=z(b.visualVariables,t))?{enabled:!0,visualVariables:b,materialParameters:y(b,t),customTransformation:b&&null!=b.size}:{enabled:!1}:{enabled:!1}};p.updateFastSymbolUpdatesState=
function(b,l,t){if(!l||!b.enabled)return!1;var w=b.visualVariables;l=z(l.visualVariables,t);if(!(l&&A(w.size,l.size,"size")&&A(w.color,l.color,"color")&&A(w.rotation,l.rotation,"rotation")))return!1;b.visualVariables=l;b.materialParameters=y(l,t);b.customTransformation=l&&null!=l.size;return!0};p.getMaterialParams=y;var c;(function(b){var l=g.mat4d,t=g.vec3,w=l.create(),C=t.create();b.evaluateModelTransform=function(D,E,F){if(!D.vvSizeEnabled)return F;l.set(F,w);d.computeObjectRotation(D.vvSymbolRotation[2],
D.vvSymbolRotation[0],D.vvSymbolRotation[1],w);if(D.vvSizeEnabled){for(F=0;3>F;++F){var G=D.vvSizeOffset[F]+E[0]*D.vvSizeFactor[F],H=F;var M=D.vvSizeMinSize[F],X=D.vvSizeMaxSize[F];G=G<M?M:G>X?X:G;C[H]=G}l.scale(w,C,w)}else l.scale(w,D.vvSizeValue,w);l.translate(w,D.vvSymbolAnchor,w);return w}})(c||(c={}));p.evaluateModelTransform=c.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define(["dojo/date/locale","../../Color","../../core/lang","../../core/numberUtils",
"dojo/i18n!dojo/cldr/nls/gregorian"],function(B,p,a,d,g){function n(u){return u&&u.map(function(v){return new p(v)})}function m(u,v,x){var z="";0===v?z=h.lt+" ":v===x&&(z=h.gt+" ");return z+u}var f={},h={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},k={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},e={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},
minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},r={formatLength:"short",fullYear:!0},q={formatLength:"short"};a.mixin(f,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,
millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(u,v){var x=[];null==u||u instanceof Date||(u=new Date(u));v=v||{};v=a.mixin({},v);var z=v.selector?v.selector.toLowerCase():null;var A=!z||-1<z.indexOf("time");z=!z||-1<z.indexOf("date");A&&(v.timeOptions=v.timeOptions||q,v.timeOptions&&(v.timeOptions=a.mixin({},v.timeOptions),v.timeOptions.selector=
v.timeOptions.selector||"time",x.push(v.timeOptions)));z&&(v.dateOptions=v.dateOptions||r,v.dateOptions&&(v.dateOptions=a.mixin({},v.dateOptions),v.dateOptions.selector=v.dateOptions.selector||"date",x.push(v.dateOptions)));x&&x.length?(x=x.map(function(y){return B.format(u,y)}),A=1==x.length?x[0]:g["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(y,c){return x[c]})):A=B.format(u);return A},createColorStops:function(u){var v=u.values,x=u.colors,z=u.labelIndexes,A=u.isDate,y=
u.dateFormatOptions;u=[];return u=v.map(function(c,b){var l=null;if(!z||-1<z.indexOf(b)){var t;(t=A?f.formatDate(c,y):d.format(c))&&(l=m(t,b,v.length-1))}return{value:c,color:x[b],label:l}})},updateColorStops:function(u){var v=u.stops,x=u.changes,z=u.isDate,A=u.dateFormatOptions,y=[],c=v.map(function(l){return l.value});x.forEach(function(l){y.push(l.index);c[l.index]=l.value});var b=d.round(c,{indexes:y});v.forEach(function(l,t){l.value=c[t];if(null!=l.label){var w,C=null;(w=z?f.formatDate(b[t],
A):d.format(b[t]))&&(C=m(w,t,v.length-1));l.label=C}})},createClassBreakLabel:function(u){var v=u.minValue,x=u.maxValue,z=u.isFirstBreak?"":h.gt+" ";u="percent-of-total"===u.normalizationType?h.pct:"";v=null==v?"":d.format(v);x=null==x?"":d.format(x);return z+v+u+" "+h.ld+" "+x+u},setLabelsForClassBreaks:function(u){var v=u.classBreakInfos,x=u.classificationMethod,z=u.normalizationType,A=[];v&&v.length&&"standard-deviation"!==x&&(u.round?(A.push(v[0].minValue),v.forEach(function(y){A.push(y.maxValue)}),
A=d.round(A),v.forEach(function(y,c){y.label=f.createClassBreakLabel({minValue:0===c?A[0]:A[c],maxValue:A[c+1],isFirstBreak:0===c,normalizationType:z})})):v.forEach(function(y,c){y.label=f.createClassBreakLabel({minValue:y.minValue,maxValue:y.maxValue,isFirstBreak:0===c,normalizationType:z})}))},updateClassBreak:function(u){var v=u.classBreaks,x=u.normalizationType,z=u.change,A=z.index;z=z.value;var y=-1,c=-1,b=v.length;"standard-deviation"!==u.classificationMethod&&(0===A?y=A:A===b?c=A-1:(c=A-1,
y=A),-1<y&&y<b&&(u=v[y],u.minValue=z,u.label=f.createClassBreakLabel({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===y,normalizationType:x})),-1<c&&c<b&&(u=v[c],u.maxValue=z,u.label=f.createClassBreakLabel({minValue:u.minValue,maxValue:u.maxValue,isFirstBreak:0===c,normalizationType:x})))},calculateDateFormatInterval:function(u){var v,x,z=u.length,A=Infinity;u=u.map(function(D){return new Date(D)});for(v=0;v<z-1;v++){var y=u[v];var c=[];var b=Infinity;var l="";for(x=v+1;x<z;x++){var t=u[x];
t=y.getFullYear()!==t.getFullYear()&&"year"||y.getMonth()!==t.getMonth()&&"month"||y.getDate()!==t.getDate()&&"day"||y.getHours()!==t.getHours()&&"hour"||y.getMinutes()!==t.getMinutes()&&"minute"||y.getSeconds()!==t.getSeconds()&&"second"||"millisecond";var w=k[t];w<b&&(b=w,l=t);c.push(t)}if(b<A){A=b;var C=l}}return C},createUniqueValueLabel:function(u){var v=u.value,x=u.fieldInfo,z=u.domain;u=u.dateFormatInterval;var A=String(v);(z=z&&z.codedValues?z.getName(v):null)?A=z:"number"===typeof v&&(A=
x&&"date"===x.type?f.formatDate(v,u&&e[u]):d.format(v));return A},cloneColorVariable:function(u){if(u){var v=a.mixin({},u);v.colors=n(v.colors);v.stops=v.stops&&v.stops.map(function(x){x=a.mixin({},x);x.color&&(x.color=new p(x.color));return x});v.legendOptions&&(v.legendOptions=a.mixin({},v.legendOptions))}return v},cloneOpacityVariable:function(u){if(u){var v=a.mixin({},u);if(u=v.opacityValues)v.opacityValues=u.slice(0);if(u=v.stops)v.stops=u.map(function(x){return a.mixin({},x)});if(u=v.legendOptions)v.legendOptions=
a.mixin({},u)}return v},cloneSizeVariable:function(u){if(u){var v=a.mixin({},u);v.stops&&(v.stops=v.stops.map(function(x){return a.mixin({},x)}));(u=v.minSize)&&"object"===typeof u&&(v.minSize=f.cloneSizeVariable(u));(u=v.maxSize)&&"object"===typeof u&&(v.maxSize=f.cloneSizeVariable(u));if(u=v.legendOptions)if(v.legendOptions=a.mixin({},u),u=u.customValues)v.legendOptions.customValues=u.slice(0)}return v}});return f})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],
function(B,p){function a(f,h){return f-h}var d=/^-?(\d+)(\.(\d+))?$/i,g=new RegExp("\\"+p.decimal+"0+$","g"),n=RegExp("(\\d)0*$","g"),m={numDigits:function(f){var h=String(f),k=h.match(d);f={integer:0,fractional:0};k&&k[1]?(f.integer=k[1].split("").length,f.fractional=k[3]?k[3].split("").length:0):-1<h.toLowerCase().indexOf("e")&&(k=h.split("e"),h=k[0],k=k[1],h&&k&&(h=Number(h),k=Number(k),(f=0<k)||(k=Math.abs(k)),h=m.numDigits(h),f?(h.integer+=k,h.fractional=k>h.fractional?0:h.fractional-k):(h.fractional+=
k,h.integer=k>h.integer?1:h.integer-k),f=h));return f},percentChange:function(f,h,k,e){var r={previous:null,next:null};if(null!=k){var q=f-k;r.previous=Math.floor(Math.abs(100*(h-k-q)/q))}null!=e&&(q=e-f,r.next=Math.floor(Math.abs(100*(e-h-q)/q)));return r},round:function(f,h){var k=f.slice(0),e,r,q=h&&null!=h.tolerance?h.tolerance:2,u=h&&h.indexes,v=h&&null!=h.strictBounds?h.strictBounds:!1;if(u)u.sort(a);else for(u=[],e=0;e<k.length;e++)u.push(e);for(e=0;e<u.length;e++){var x=u[e];var z=k[x];var A=
0===x?null:k[x-1];var y=x===k.length-1?null:k[x+1];var c=m.numDigits(z);if(c=c.fractional){var b=0;for(r=!1;b<=c&&!r;){var l=void 0;var t=void 0;l=z;r=b;t=Number(l.toFixed(r));t<l?l=t+1/Math.pow(10,r):(l=t,t-=1/Math.pow(10,r));t=Number(t.toFixed(r));l=Number(l.toFixed(r));t=[t,l];t=v&&0===e?t[1]:t[0];l=r=r=void 0;var w=q,C=m.percentChange(z,t,A,y);l=null==C.previous||C.previous<=w;r=null==C.next||C.next<=w;r=l&&r||C.previous+C.next<=2*w;b++}r&&(k[x]=t)}}return k},format:function(f,h){h=h||{places:20,
round:-1};var k=B.format(f,h);k&&(k=k.replace(n,"$1").replace(g,""));return k}};return m})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){function r(x){var z=x.paths[0];if(!z||0===z.length)return null;z=m.getPointOnPath(z,m.getPathLength(z)/2);return h.makeDehydratedPoint(z[0],z[1],z[2],x.spatialReference)}function q(x){if(Array.isArray(x)){for(var z=0;z<x.length;z++)if(!q(x[z]))return!1;return!0}return null==x||0<=x}Object.defineProperty(p,"__esModule",{value:!0});var u=[1,1,1];p.computeCentroid=function(x){if("point"===x.type)return x;if(h.isHydratedGeometry(x))switch(x.type){case "extent":return x.center;
case "polygon":return x.centroid;case "polyline":return r(x);case "mesh":return x.extent.center}else switch(x.type){case "extent":var z=e.isFinite(x.zmin);return h.makeDehydratedPoint(.5*(x.xmax+x.xmin),.5*(x.ymax+x.ymin),z?.5*(x.zmax+x.zmin):void 0,x.spatialReference);case "polygon":return z=n.ringsCentroid(x.rings,h.hasZ(x)),h.makeDehydratedPoint(z[0],z[1],z[2],x.spatialReference);case "polyline":return r(x)}};p.convertPointSR=function(x,z){var A=x.spatialReference;A.isWebMercator&&z.isWGS84?(f.xyToLngLat(x.x,
x.y,v),x.x=v[0],x.y=v[1],x.spatialReference=a.SpatialReference.WGS84):z.isWebMercator&&A.isWGS84&&(f.lngLatToXY(x.x,x.y,v),x.x=v[0],x.y=v[1],x.spatialReference=a.SpatialReference.WebMercator)};p.enlargeExtent=function(x,z,A){if(x){z||(z=g.create());var y=.5*x.width*(A-1);A=.5*x.height*(A-1);x.width<1E-7*x.height?y+=A/20:x.height<1E-7*x.width&&(A+=y/20);k.vec4d.set4(x.xmin-y,x.ymin-A,x.xmax+y,x.ymax+A,z);return z}return null};p.updateVertexAttributeAuxpos1w=function(x,z){for(var A=0;A<x.geometries.length;++A){var y=
x.geometries[A].data.vertexAttributes.auxpos1;y&&y.data[3]!==z&&(y.data[3]=z,x.geometryVertexAttrsUpdated(A))}};p.mixinColorAndOpacity=function(x,z){var A=[1,1,1,1];null!=x&&(A[0]=x[0],A[1]=x[1],A[2]=x[2]);null!==z&&void 0!==z?A[3]=z:null!=x&&3<x.length&&(A[3]=x[3]);return A};p.overrideColor=function(x,z,A,y,c,b){void 0===b&&(b=[0,0,0,0]);for(var l=0;3>l;++l)b[l]=x&&null!=x[l]?x[l]:A&&null!=A[l]?A[l]:c[l];b[3]=null!=z?z:null!=y?y:c[3];return b};p.computeObjectScale=function(x,z,A,y){void 0===x&&(x=
u);void 0===y&&(y=1);var c=Array(3);if(null==z||null==A)c[0]=1,c[1]=1,c[2]=1;else{for(var b=void 0,l=0,t=2;0<=t;t--){var w=x[t],C=void 0,D=null!=w,E=0===t&&!b&&!D,F=A[t];"symbolValue"===w||E?C=0!==F?z[t]/F:1:D&&"proportional"!==w&&isFinite(w)&&(C=0!==F?w/F:1);null!=C&&(b=c[t]=C,l=Math.max(l,Math.abs(C)))}for(t=2;0<=t;t--)null==c[t]?c[t]=b:0===c[t]&&(c[t]=.001*l)}for(t=2;0<=t;t--)c[t]/=y;return c};p.computeSizeWithResourceSize=function(x,z){var A=z.width,y=z.depth,c=z.height,b=z.isPrimitive?10:1;if(null==
A&&null==c&&null==y)return[b*x[0],b*x[1],b*x[2]];A=[A,y,c];for(y=0;3>y;y++)if(c=A[y],null!=c){var l=c/x[y];break}for(y=0;3>y;y++)null==A[y]&&(A[y]=x[y]*l);return A};p.validateSymbolLayerSize=function(x){null!=x.isPrimitive&&(x=[x.width,x.depth,x.height]);return q(x)?null:"Symbol sizes may not be negative values"};p.computeObjectRotation=function(x,z,A,y){void 0===y&&(y=k.mat4d.identity());x=x||0;z=z||0;A=A||0;0!==x&&k.mat4d.rotateZ(y,-x/180*Math.PI,y);0!==z&&k.mat4d.rotateX(y,z/180*Math.PI,y);0!==
A&&k.mat4d.rotateY(y,A/180*Math.PI,y);return y};p.demResolutionForBoundingBox=function(x,z){return null!=z.minDemResolution?z.minDemResolution:d.isPoint(x)?z.minDemResolutionForPoints:.01*d.maximumDimension(x)};var v=[0,0]})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r){Object.defineProperty(p,"__esModule",{value:!0});p.Extent=a;p.BaseGeometry=d;p.Mesh=g;p.Multipoint=n;p.Point=m;p.Polygon=f;p.Polyline=h;p.ScreenPoint=k;p.SpatialReference=e;p.isGeometry=function(q){return q instanceof p.BaseGeometry};p.fromJSON=r.fromJSON})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q){function u(v,x,z){return null==x?z:null==z?x:v(x,z)}B=function(v){function x(){for(var A=0;A<arguments.length;A++);A=v.call(this)||this;A.type="extent";A.xmin=0;A.ymin=0;A.mmin=void 0;A.zmin=void 0;A.xmax=0;A.ymax=0;A.mmax=void 0;A.zmax=void 0;return A}a(x,v);var z=x;x.prototype.normalizeCtorArgs=function(A,y,c,b,l){return!A||"esri.geometry.SpatialReference"!==A.declaredClass&&null==A.wkid?"object"===typeof A?(A.spatialReference=null!=A.spatialReference?A.spatialReference:
h.WGS84,A):{xmin:A,ymin:y,xmax:c,ymax:b,spatialReference:null!=l?l:h.WGS84}:{spatialReference:A,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(x.prototype,"center",{get:function(){var A=new f({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(A.z=.5*(this.zmin+this.zmax));this.hasM&&(A.m=.5*(this.mmin+this.mmax));return A},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(x.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});x.prototype.centerAt=function(A){var y=this.center;return null!=A.z&&this.hasZ?this.offset(A.x-y.x,A.y-y.y,A.z-y.z):this.offset(A.x-y.x,A.y-y.y)};x.prototype.clone=function(){var A=new z;A.xmin=this.xmin;A.ymin=this.ymin;A.xmax=this.xmax;A.ymax=this.ymax;A.spatialReference=this.spatialReference;null!=this.zmin&&(A.zmin=this.zmin,A.zmax=this.zmax);null!=this.mmin&&(A.mmin=this.mmin,A.mmax=this.mmax);return A};x.prototype.contains=function(A){if(!A)return!1;var y=this.spatialReference,
c=A.spatialReference;y&&c&&!y.equals(c)&&q.canProject(y,c)&&(A=y.isWebMercator?q.geographicToWebMercator(A):q.webMercatorToGeographic(A,!0));return"point"===A.type?k.extentContainsPoint(this,A):"extent"===A.type?k.extentContainsExtent(this,A):!1};x.prototype.equals=function(A){if(!A)return!1;var y=this.spatialReference,c=A.spatialReference;y&&c&&!y.equals(c)&&q.canProject(y,c)&&(A=y.isWebMercator?q.geographicToWebMercator(A):q.webMercatorToGeographic(A,!0));return this.xmin===A.xmin&&this.ymin===
A.ymin&&this.zmin===A.zmin&&this.mmin===A.mmin&&this.xmax===A.xmax&&this.ymax===A.ymax&&this.zmax===A.zmax&&this.mmax===A.mmax};x.prototype.expand=function(A){A=.5*(1-A);var y=this.width*A,c=this.height*A;this.xmin+=y;this.ymin+=c;this.xmax-=y;this.ymax-=c;this.hasZ&&(y=(this.zmax-this.zmin)*A,this.zmin+=y,this.zmax-=y);this.hasM&&(A*=this.mmax-this.mmin,this.mmin+=A,this.mmax-=A);return this};x.prototype.intersects=function(A){if(!A)return!1;var y=this.spatialReference,c=A.spatialReference;y&&c&&
!y.equals(c)&&q.canProject(y,c)&&(A=y.isWebMercator?q.geographicToWebMercator(A):q.webMercatorToGeographic(A,!0));y=e.getExtentIntersector(A.type);return"mesh"!==A.type?y(this,A):y(this,A.extent)};x.prototype.normalize=function(){var A=this._normalize(!1,!0);return Array.isArray(A)?A:[A]};x.prototype.offset=function(A,y,c){this.xmin+=A;this.ymin+=y;this.xmax+=A;this.ymax+=y;null!=c&&(this.zmin+=c,this.zmax+=c);return this};x.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};x.prototype.union=
function(A){this.xmin=Math.min(this.xmin,A.xmin);this.ymin=Math.min(this.ymin,A.ymin);this.xmax=Math.max(this.xmax,A.xmax);this.ymax=Math.max(this.ymax,A.ymax);if(this.hasZ||A.hasZ)this.zmin=u(Math.min,this.zmin,A.zmin),this.zmax=u(Math.max,this.zmax,A.zmax);if(this.hasM||A.hasM)this.mmin=u(Math.min,this.mmin,A.mmin),this.mmax=u(Math.max,this.mmax,A.mmax);return this};x.prototype.intersection=function(A){if(!this.intersects(A))return null;this.xmin=Math.max(this.xmin,A.xmin);this.ymin=Math.max(this.ymin,
A.ymin);this.xmax=Math.min(this.xmax,A.xmax);this.ymax=Math.min(this.ymax,A.ymax);if(this.hasZ||A.hasZ)this.zmin=u(Math.max,this.zmin,A.zmin),this.zmax=u(Math.min,this.zmax,A.zmax);if(this.hasM||A.hasM)this.mmin=u(Math.max,this.mmin,A.mmin),this.mmax=u(Math.min,this.mmax,A.mmax);return this};x.prototype.toJSON=function(A){return this.write(null,A)};x.prototype._shiftCM=function(A){void 0===A&&(A=r.getInfo(this.spatialReference));if(!A||!this.spatialReference)return this;var y=this.spatialReference,
c=this._getCM(A);if(c){var b=y.isWebMercator?q.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;y.isWebMercator||(b.x=this._normalizeX(b.x,A).x);this.spatialReference=new h(g.substitute({Central_Meridian:b.x},y.isWGS84?A.altTemplate:A.wkTemplate))}return this};x.prototype._getCM=function(A){var y=null,c=A.valid;A=c[0];c=c[1];var b=this.xmin,l=this.xmax;b>=A&&b<=c&&l>=A&&l<=c||(y=this.center);return y};x.prototype._normalize=function(A,y,c){var b=this.spatialReference;if(!b)return this;c=
c||r.getInfo(b);if(!c)return this;var l=this._getParts(c).map(function(C){return C.extent});if(2>l.length)return l[0]||this;if(2<l.length)return A?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(A)return this._shiftCM(c);if(y)return l;var t=!0,w=!0;l.forEach(function(C){C.hasZ||(t=!1);C.hasM||(w=!1)});return{rings:l.map(function(C){var D=[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]];if(t)for(var E=(C.zmax-C.zmin)/2,F=0;F<D.length;F++)D[F].push(E);
if(w)for(C=(C.mmax-C.mmin)/2,F=0;F<D.length;F++)D[F].push(C);return D}),hasZ:t,hasM:w,spatialReference:b}};x.prototype._getParts=function(A){var y=this.cache._parts;if(!y){y=[];var c=this.ymin,b=this.ymax,l=this.spatialReference,t=this.width,w=this.xmin,C=this.xmax,D=void 0;A=A||r.getInfo(l);var E=A.valid,F=E[0],G=E[1];D=this._normalizeX(this.xmin,A);var H=D.x;E=D.frameId;D=this._normalizeX(this.xmax,A);var M=D.x;A=D.frameId;D=H===M&&0<t;if(t>2*G){t=new z(w<C?H:M,c,G,b,l);w=new z(F,c,w<C?M:H,b,l);
C=new z(0,c,G,b,l);c=new z(F,c,0,b,l);b=[];l=[];t.contains(C)&&b.push(E);t.contains(c)&&l.push(E);w.contains(C)&&b.push(A);w.contains(c)&&l.push(A);for(F=E+1;F<A;F++)b.push(F),l.push(F);y.push({extent:t,frameIds:[E]},{extent:w,frameIds:[A]},{extent:C,frameIds:b},{extent:c,frameIds:l})}else H>M||D?y.push({extent:new z(H,c,G,b,l),frameIds:[E]},{extent:new z(F,c,M,b,l),frameIds:[A]}):y.push({extent:new z(H,c,M,b,l),frameIds:[E]});this.cache._parts=y}A=this.hasZ;c=this.hasM;if(A||c)for(E={},A&&(E.zmin=
this.zmin,E.zmax=this.zmax),c&&(E.mmin=this.mmin,E.mmax=this.mmax),A=0;A<y.length;A++)y[A].extent.set(E);return y};x.prototype._normalizeX=function(A,y){var c=y.valid,b=c[0],l=c[1];c=2*l;var t=0;A>l?(b=Math.ceil(Math.abs(A-l)/c),A-=b*c,t=b):A<b&&(b=Math.ceil(Math.abs(A-b)/c),A+=b*c,t=-b);return{x:A,frameId:t}};d([n.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],x.prototype,"cache",void 0);d([n.property({readOnly:!0,dependsOn:["cache"]})],x.prototype,"center",
null);d([n.property({readOnly:!0,dependsOn:["cache"]})],x.prototype,"extent",null);d([n.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasM",null);d([n.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasZ",null);d([n.property({readOnly:!0,dependsOn:["ymin","ymax"]})],x.prototype,"height",null);d([n.property({readOnly:!0,dependsOn:["xmin","xmax"]})],x.prototype,"width",null);
d([n.property({type:Number,json:{write:!0}})],x.prototype,"xmin",void 0);d([n.property({type:Number,json:{write:!0}})],x.prototype,"ymin",void 0);d([n.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],x.prototype,"mmin",void 0);d([n.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],x.prototype,"zmin",void 0);d([n.property({type:Number,json:{write:!0}})],
x.prototype,"xmax",void 0);d([n.property({type:Number,json:{write:!0}})],x.prototype,"ymax",void 0);d([n.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],x.prototype,"mmax",void 0);d([n.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],x.prototype,"zmax",void 0);return x=z=d([n.subclass("esri.geometry.Extent")],x)}(n.declared(m));B.prototype.toJSON.isDefaultToJSON=
!0;return B})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(B,p){function a(n,m,f,h){return m>=n.xmin&&m<=n.xmax&&f>=n.ymin&&f<=n.ymax?null!=h&&n.hasZ?h>=n.zmin&&h<=n.zmax:!0:!1}function d(n,m){var f;if(f=n.rings)if(Array.isArray(f[0][0])){for(var h=!1,k=0,e=f.length;k<e;k++)h=g(h,f[k],m);f=h}else f=g(!1,f,m);else f=!1;return f}function g(n,m,f){var h=f[0];f=f[1];for(var k=0,e=0,r=m.length;e<r;e++){k++;k===r&&(k=0);var q=m[e],u=q[0];q=q[1];var v=
m[k],x=v[0];v=v[1];(q<f&&v>=f||v<f&&q>=f)&&u+(f-q)/(v-q)*(x-u)<h&&(n=!n)}return n}Object.defineProperty(p,"__esModule",{value:!0});p.extentContainsPoint=function(n,m){return a(n,m.x,m.y,m.z)};p.extentContainsExtent=function(n,m){var f=m.xmin,h=m.ymin,k=m.zmin,e=m.xmax,r=m.ymax,q=m.zmax;return n.hasZ&&m.hasZ?a(n,f,h,k)&&a(n,f,r,k)&&a(n,e,r,k)&&a(n,e,h,k)&&a(n,f,h,q)&&a(n,f,r,q)&&a(n,e,r,q)&&a(n,e,h,q):a(n,f,h)&&a(n,f,r)&&a(n,e,r)&&a(n,e,h)};p.extentContainsCoords2D=function(n,m){return a(n,m[0],m[1])};
p.extentContainsCoords3D=function(n,m){return a(n,m[0],m[1],m[2])};p.polygonContainsPoint=function(n,m){return d(n,[m.x,m.y])};p.polygonContainsCoords=d})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(B,p,a){function d(A,y){return a.extentContainsPoint(A,y)}function g(A,y){var c=A.hasZ&&y.hasZ;if(A.xmin<=y.xmin){var b=y.xmin;if(A.xmax<b)return!1}else if(b=A.xmin,y.xmax<b)return!1;if(A.ymin<=y.ymin){if(b=y.ymin,A.ymax<b)return!1}else if(b=
A.ymin,y.ymax<b)return!1;if(c&&y.hasZ)if(A.zmin<=y.zmin){if(c=y.zmin,A.zmax<c)return!1}else if(c=A.zmin,y.zmax<c)return!1;return!0}function n(A,y){for(var c=y.hasZ?a.extentContainsCoords3D:a.extentContainsCoords2D,b=0,l=y.points;b<l.length;b++)if(c(A,l[b]))return!0;return!1}function m(A,y){e[0]=A.xmin;e[1]=A.ymax;r[0]=A.xmax;r[1]=A.ymax;q[0]=A.xmin;q[1]=A.ymin;u[0]=A.xmax;u[1]=A.ymin;for(var c=0,b=v;c<b.length;c++)if(a.polygonContainsCoords(y,b[c]))return!0;c=0;for(b=y.rings;c<b.length;c++){var l=
b[c];if(l.length){var t=l[0];if(a.extentContainsCoords2D(A,t))return!0;for(var w=1;w<l.length;w++){var C=l[w];if(a.extentContainsCoords2D(A,C)||h(t,C,x))return!0;t=C}}}return!1}function f(A,y){e[0]=A.xmin;e[1]=A.ymax;r[0]=A.xmax;r[1]=A.ymax;q[0]=A.xmin;q[1]=A.ymin;u[0]=A.xmax;u[1]=A.ymin;for(var c=y.paths,b=0;b<c.length;b++){var l=c[b];if(c.length){var t=l[0];if(a.extentContainsCoords2D(A,t))return!0;for(var w=1;w<l.length;w++){var C=l[w];if(a.extentContainsCoords2D(A,C)||h(t,C,x))return!0;t=C}}}return!1}
function h(A,y,c){for(var b=0;b<c.length;b++)if(k(A,y,c[b][0],c[b][1]))return!0;return!1}function k(A,y,c,b,l){var t=A[0];A=A[1];var w=y[0];y=y[1];var C=c[0],D=c[1];c=b[0]-C;C=t-C;var E=w-t;b=b[1]-D;D=A-D;var F=y-A,G=b*E-c*F;if(0===G)return!1;c=(c*D-b*C)/G;C=(E*D-F*C)/G;return 0<=c&&1>=c&&0<=C&&1>=C?(l&&(l[0]=t+c*(w-t),l[1]=A+c*(y-A)),!0):!1}Object.defineProperty(p,"__esModule",{value:!0});p.extentIntersectsPoint=d;p.extentIntersectsExtent=g;p.extentIntersectsMultipoint=n;var e=[0,0],r=[0,0],q=[0,
0],u=[0,0],v=[e,r,q,u],x=[[q,e],[e,r],[r,u],[u,q]];p.extentIntersectsPolygon=m;p.extentIntersectsPolyline=f;var z=[0,0];p.isSelfIntersecting=function(A){for(var y=0;y<A.length;y++){for(var c=A[y],b=0;b<c.length-1;b++)for(var l=c[b],t=c[b+1],w=y+1;w<A.length;w++)for(var C=0;C<A[w].length-1;C++){var D=A[w][C],E=A[w][C+1],F=k(l,t,D,E,z);if(F&&!(z[0]===l[0]&&z[1]===l[1]||z[0]===D[0]&&z[1]===D[1]||z[0]===t[0]&&z[1]===t[1]||z[0]===E[0]&&z[1]===E[1]))return!0}C=c.length;if(!(4>=C))for(b=0;b<C-3;b++){var G=
C-1;0===b&&(G=C-2);l=c[b];t=c[b+1];for(w=b+2;w<G;w++)if(D=c[w],E=c[w+1],(F=k(l,t,D,E,z))&&!(z[0]===l[0]&&z[1]===l[1]||z[0]===D[0]&&z[1]===D[1]||z[0]===t[0]&&z[1]===t[1]||z[0]===E[0]&&z[1]===E[1]))return!0}}return!1};p.segmentIntersects=k;p.getExtentIntersector=function(A){switch(A){case "esriGeometryEnvelope":case "extent":return g;case "esriGeometryMultipoint":case "multipoint":return n;case "esriGeometryPoint":case "point":return d;case "esriGeometryPolygon":case "polygon":return m;case "esriGeometryPolyline":case "polyline":return f;
case "mesh":return g}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(B,p,a,d){return function(g){function n(m){return g.call(this)||this}a(n,g);n.prototype.clone=function(){return new n};return n}(d)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k){function e(r){return function(q,u){return null==q?u:null==u?q:r(q,u)}}B=function(r){function q(){for(var v=0;v<arguments.length;v++);v=r.call(this)||this;v.points=[];v.type="multipoint";return v}a(q,r);var u=q;q.prototype.normalizeCtorArgs=function(v,x){if(!v&&!x)return null;var z={};Array.isArray(v)?(z.points=v,z.spatialReference=x):!v||"esri.geometry.SpatialReference"!==v.declaredClass&&null==v.wkid?(v.points&&(z.points=v.points),v.spatialReference&&(z.spatialReference=
v.spatialReference),v.hasZ&&(z.hasZ=v.hasZ),v.hasM&&(z.hasM=v.hasM)):z.spatialReference=v;var A=z.points&&z.points[0];A&&(void 0===z.hasZ&&void 0===z.hasM?(z.hasZ=2<A.length,z.hasM=!1):void 0===z.hasZ?z.hasZ=3<A.length:void 0===z.hasM&&(z.hasM=3<A.length));return z};Object.defineProperty(q.prototype,"extent",{get:function(){var v=this.points;if(!v.length)return null;var x=new m,z=this.hasZ,A=this.hasM,y=z?3:2,c=v[0],b=e(Math.min),l=e(Math.max),t=c[0],w=c[1],C=c[0];c=c[1];for(var D,E,F,G,H=0,M=v.length;H<
M;H++){var X=v[H],W=X[0],T=X[1];t=b(t,W);w=b(w,T);C=l(C,W);c=l(c,T);z&&2<X.length&&(W=X[2],D=b(D,W),F=l(F,W));A&&X.length>y&&(X=X[y],E=b(E,X),G=l(G,X))}x.xmin=t;x.ymin=w;x.xmax=C;x.ymax=c;x.spatialReference=this.spatialReference;z?(x.zmin=D,x.zmax=F):(x.zmin=null,x.zmax=null);A?(x.mmin=E,x.mmax=G):(x.mmin=null,x.mmax=null);return x},enumerable:!0,configurable:!0});q.prototype.writePoints=function(v,x,z,A){x.points=g.clone(this.points)};q.prototype.addPoint=function(v){this.clearCache();k.updateSupportFromPoint(this,
v);Array.isArray(v)?this.points.push(v):this.points.push(v.toArray());return this};q.prototype.clone=function(){var v={points:g.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(v.hasZ=!0);this.hasM&&(v.hasM=!0);return new u(v)};q.prototype.getPoint=function(v){if(!this._validateInputs(v))return null;v=this.points[v];var x={x:v[0],y:v[1],spatialReference:this.spatialReference},z=2;this.hasZ&&(x.z=v[2],z=3);this.hasM&&(x.m=v[z]);return new h(x)};q.prototype.removePoint=function(v){if(!this._validateInputs(v))return null;
this.clearCache();return new h(this.points.splice(v,1)[0],this.spatialReference)};q.prototype.setPoint=function(v,x){if(!this._validateInputs(v))return this;this.clearCache();k.updateSupportFromPoint(x);this.points[v]=x.toArray();return this};q.prototype.toJSON=function(v){return this.write(null,v)};q.prototype._validateInputs=function(v){return null!=v&&0<=v&&v<this.points.length};d([n.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],q.prototype,"cache",void 0);d([n.property({dependsOn:["cache"]})],
q.prototype,"extent",null);d([n.property({type:[[Number]],json:{write:{isRequired:!0}}})],q.prototype,"points",void 0);d([n.writer("points")],q.prototype,"writePoints",null);return q=u=d([n.subclass("esri.geometry.Multipoint")],q)}(n.declared(f));B.prototype.toJSON.isDefaultToJSON=!0;return B})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});p.updateSupportFromPoint=function(a,d,g){void 0===
g&&(g=!1);var n=a.hasM,m=a.hasZ;Array.isArray(d)?4!==d.length||n||m?3===d.length&&g&&!n?(m=!0,n=!1):3===d.length&&n&&m&&(m=n=!1):m=n=!0:(m=!m&&d.hasZ&&(!n||d.hasM),n=!n&&d.hasM&&(!m||d.hasZ));a.hasZ=m;a.hasM=n}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x){function z(c){return function(b,l){return null==b?l:null==l?b:c(b,l)}}var A=z(Math.min),y=z(Math.max);B=function(c){function b(){for(var t=0;t<arguments.length;t++);t=c.call(this)||this;t.rings=[];t.type="polygon";return t}a(b,c);var l=b;b.createEllipse=function(t){var w=t.center.x,C=t.center.y,D=t.center.z,E=t.center.m,F=t.center.hasZ,G=t.center.hasM,H=t.longAxis,M=t.shortAxis,X=t.numberOfPoints;t=t.view;for(var W=[],T=2*Math.PI/X,K=F?3:2,O=0;O<X;O++){var N=
t.toMap(H*Math.cos(O*T)+w,M*Math.sin(O*T)+C);N=[N.x,N.y];F&&(N[2]=D);G&&(N[K]=E);W.push(N)}W.push(W[0]);return new l({rings:[W],spatialReference:t.spatialReference})};b.createCircle=function(t){return l.createEllipse({center:t.center,longAxis:t.r,shortAxis:t.r,numberOfPoints:t.numberOfPoints,view:t.view})};b.fromExtent=function(t){var w=t.clone().normalize();t=t.spatialReference;var C=!1,D=!1;w.map(function(E){E.hasZ&&(C=!0);E.hasM&&(D=!0)});w={rings:w.map(function(E){var F=[[E.xmin,E.ymin],[E.xmin,
E.ymax],[E.xmax,E.ymax],[E.xmax,E.ymin],[E.xmin,E.ymin]];if(C&&E.hasZ)for(var G=E.zmin+.5*(E.zmax-E.zmin),H=0;H<F.length;H++)F[H].push(G);if(D&&E.hasM)for(E=E.mmin+.5*(E.mmax-E.mmin),H=0;H<F.length;H++)F[H].push(E);return F}),spatialReference:t};C&&(w.hasZ=!0);D&&(w.hasM=!0);return new l(w)};b.prototype.normalizeCtorArgs=function(t,w){var C=null,D=null;if(t&&!Array.isArray(t)){C=t.rings?t.rings:null;w||(t.spatialReference?w=t.spatialReference:t.rings||(w=t));var E=t.hasZ;var F=t.hasM}else C=t;C=C||
[];w=w||k.WGS84;C.length&&C[0]&&null!=C[0][0]&&"number"===typeof C[0][0]&&(C=[C]);if(D=C[0]&&C[0][0])void 0===E&&void 0===F?(E=2<D.length,F=!1):void 0===E?E=!F&&3<D.length:void 0===F&&(F=!E&&3<D.length);return{rings:C,spatialReference:w,hasZ:E,hasM:F}};Object.defineProperty(b.prototype,"centroid",{get:function(){var t=e.polygonCentroid(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;var w=new h;w.x=t[0];w.y=t[1];w.spatialReference=this.spatialReference;this.hasZ&&(w.z=t[2]);
return w},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){var t=this.hasZ,w=this.hasM,C=this.spatialReference,D=this.rings,E=t?3:2;if(!D.length||!D[0].length)return null;var F=D[0][0],G=F[0];F=F[1];var H=D[0][0],M=H[0];H=H[1];for(var X=void 0,W=void 0,T=void 0,K=void 0,O=[],N=0;N<D.length;N++){var Y=D[N],P=Y[0],L=P[0];P=P[1];var Q=Y[0],ca=Q[0];Q=Q[1];for(var ha=void 0,ja=void 0,ma=void 0,R=void 0,fa=0;fa<Y.length;fa++){var ka=Y[fa],qa=ka[0],na=ka[1];G=A(G,
qa);F=A(F,na);M=y(M,qa);H=y(H,na);L=A(L,qa);P=A(P,na);ca=y(ca,qa);Q=y(Q,na);t&&2<ka.length&&(qa=ka[2],X=A(X,qa),W=y(W,qa),ha=A(ha,qa),ja=y(ja,qa));w&&ka.length>E&&(R=ka[E],T=A(X,R),K=y(W,R),ma=A(ha,R),R=y(ja,R))}O.push(new m({xmin:L,ymin:P,zmin:ha,mmin:ma,xmax:ca,ymax:Q,zmax:ja,mmax:R,spatialReference:C}))}D=new m;D.xmin=G;D.ymin=F;D.xmax=M;D.ymax=H;D.spatialReference=C;t&&(D.zmin=X,D.zmax=W);w&&(D.mmin=T,D.mmax=K);D.cache._partwise=1<O.length?O:null;return D},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"isSelfIntersecting",{get:function(){return u.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});b.prototype.writePaths=function(t,w,C,D){w.rings=g.clone(this.rings)};b.prototype.addRing=function(t){if(t){this.clearCache();var w=this.rings,C=w.length;if(Array.isArray(t[0]))w[C]=t.concat();else{for(var D=[],E=0,F=t.length;E<F;E++)D[E]=t[E].toArray();w[C]=D}return this}};b.prototype.clone=function(){var t=new l;t.spatialReference=this.spatialReference;t.rings=g.clone(this.rings);t.hasZ=
this.hasZ;t.hasM=this.hasM;return t};b.prototype.contains=function(t){if(!t)return!1;v.canProject(t,this.spatialReference)&&(t=v.project(t,this.spatialReference));return r.polygonContainsPoint(this,t)};b.prototype.isClockwise=function(t){var w=this;t=Array.isArray(t[0])?t:t.map(function(C){return w.hasZ?w.hasM?[C.x,C.y,C.z,C.m]:[C.x,C.y,C.z]:[C.x,C.y]});return q.isClockwise(t,this.hasM,this.hasZ)};b.prototype.getPoint=function(t,w){if(!this._validateInputs(t,w))return null;var C=this.rings[t][w],
D=this.hasZ,E=this.hasM;return D&&!E?new h(C[0],C[1],C[2],void 0,this.spatialReference):E&&!D?new h(C[0],C[1],void 0,C[2],this.spatialReference):D&&E?new h(C[0],C[1],C[2],C[3],this.spatialReference):new h(C[0],C[1],this.spatialReference)};b.prototype.insertPoint=function(t,w,C){if(!this._validateInputs(t,w,!0))return this;this.clearCache();x.updateSupportFromPoint(this,C);Array.isArray(C)||(C=C.toArray());this.rings[t].splice(w,0,C);return this};b.prototype.removePoint=function(t,w){if(!this._validateInputs(t,
w))return null;this.clearCache();return new h(this.rings[t].splice(w,1)[0],this.spatialReference)};b.prototype.removeRing=function(t){if(!this._validateInputs(t,null))return null;this.clearCache();t=this.rings.splice(t,1)[0];var w=this.spatialReference;return t.map(function(C){return new h(C,w)})};b.prototype.setPoint=function(t,w,C){if(!this._validateInputs(t,w))return this;this.clearCache();x.updateSupportFromPoint(this,C);Array.isArray(C)||(C=C.toArray());this.rings[t][w]=C;return this};b.prototype._validateInputs=
function(t,w,C){void 0===C&&(C=!1);return null==t||0>t||t>=this.rings.length||null!=w&&(t=this.rings[t],C&&(0>w||w>t.length)||!C&&(0>w||w>=t.length))?!1:!0};b.prototype.toJSON=function(t){return this.write(null,t)};d([n.property({dependsOn:["hasM","hasZ","rings"]})],b.prototype,"cache",void 0);d([n.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"centroid",null);d([n.property({dependsOn:["cache"],readOnly:!0})],b.prototype,"extent",null);d([n.property({dependsOn:["cache"],readOnly:!0})],
b.prototype,"isSelfIntersecting",null);d([n.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],b.prototype,"rings",void 0);d([n.writer("rings")],b.prototype,"writePaths",null);return b=l=d([n.subclass("esri.geometry.Polygon")],b)}(n.declared(f));B.prototype.toJSON.isDefaultToJSON=!0;return B})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(B,p,a){function d(m,f){if(!m||!m.length)return null;for(var h=[],k=[],
e=f?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],r=0,q=m.length;r<q;r++){var u=g(m[r],f,e);u&&k.push(u)}k.sort(function(v,x){var z=v[2]-x[2];0===z&&f&&(z=v[4]-x[4]);return z});k.length&&(r=6*k[0][2],h[0]=k[0][0]/r,h[1]=k[0][1]/r,f&&(r=6*k[0][4],h[2]=0!==r?k[0][3]/r:0),h[0]<e[0]||h[0]>e[1]||h[1]<e[2]||h[1]>e[3]||f&&(h[2]<e[4]||h[2]>e[5]))&&(h.length=0);if(!h.length)if(k=m[0]&&m[0].length?n(m[0],f):null)h[0]=k[0],h[1]=k[1],f&&2<k.length&&(h[2]=k[2]);
else return null;return h}function g(m,f,h){for(var k=0,e=0,r=0,q=0,u=0,v=0,x=m.length-1;v<x;v++){var z=m[v],A=z[0],y=z[1],c=z[2],b=m[v+1],l=b[0],t=b[1],w=b[2],C=A*t-l*y;q+=C;k+=(A+l)*C;e+=(y+t)*C;f&&2<z.length&&2<b.length&&(C=A*w-l*c,r+=(c+w)*C,u+=C);A<h[0]&&(h[0]=A);A>h[1]&&(h[1]=A);y<h[2]&&(h[2]=y);y>h[3]&&(h[3]=y);f&&(c<h[4]&&(h[4]=c),c>h[5]&&(h[5]=c))}0<q&&(q*=-1);0<u&&(u*=-1);if(!q)return null;m=[k,e,.5*q];f&&(m[3]=r,m[4]=.5*u);return m}function n(m,f){for(var h=f?[0,0,0]:[0,0],k=f?[0,0,0]:
[0,0],e=0,r=0,q=0,u=0,v=0,x=m.length;v<x-1;v++){var z=m[v],A=m[v+1];if(z&&A){h[0]=z[0];h[1]=z[1];k[0]=A[0];k[1]=A[1];f&&2<z.length&&2<A.length&&(h[2]=z[2],k[2]=A[2]);var y=a.getLength(h,k);y&&(e+=y,z=a.getMidpoint(z,A),r+=y*z[0],q+=y*z[1],f&&2<z.length&&(u+=y*z[2]))}}return 0<e?f?[r/e,q/e,u/e]:[r/e,q/e]:m.length?m[0]:null}Object.defineProperty(p,"__esModule",{value:!0});p.extentCentroid=function(m){return m?m.hasZ?[m.xmax-m.xmin/2,m.ymax-m.ymin/2,m.zmax-m.zmin/2]:[m.xmax-m.xmin/2,m.ymax-m.ymin/2]:
null};p.polygonCentroid=function(m){return m?d(m.rings,m.hasZ):null};p.ringsCentroid=d;p.lineCentroid=n})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(B,p){function a(g,n){var m=n[0]-g[0],f=n[1]-g[1];if(2<g.length&&2<n.length){var h=g[2]-n[2];return Math.sqrt(m*m+f*f+h*h)}return Math.sqrt(m*m+f*f)}function d(g,n,m){var f=g[0]+m*(n[0]-g[0]),h=g[1]+m*(n[1]-g[1]);return 2<g.length&&2<n.length?[f,h,g[2]+m*(n[2]-g[2])]:[f,h]}Object.defineProperty(p,
"__esModule",{value:!0});p.geometryToCoordinates=function(g){if(!g)return null;if(Array.isArray(g))return g;var n=g.hasZ,m=g.hasM;if("point"===g.type)return m&&n?[g.x,g.y,g.z,g.m]:n?[g.x,g.y,g.z]:m?[g.x,g.y,g.m]:[g.x,g.y];if("polygon"===g.type)return g.rings.slice(0);if("polyline"===g.type)return g.paths.slice(0);if("multipoint"===g.type)return g.points.slice(0);if("extent"===g.type){g=g.clone().normalize();if(!g)return null;var f=!1,h=!1;g.forEach(function(k){k.hasZ&&(f=!0);k.hasM&&(h=!0)});return g.map(function(k){var e=
[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]];if(f&&k.hasZ)for(var r=.5*(k.zmax-k.zmin),q=0;q<e.length;q++)e[q].push(r);if(h&&k.hasM)for(k=.5*(k.mmax-k.mmin),q=0;q<e.length;q++)e[q].push(k);return e})}return null};p.getLength=a;p.getMidpoint=function(g,n){return d(g,n,.5)};p.getPathLength=function(g){for(var n=g.length,m=0,f=0;f<n-1;++f)m+=a(g[f],g[f+1]);return m};p.getPointOnPath=function(g,n){if(0>=n)return g[0];for(var m=g.length,f=0,h=0;h<m-1;++h){var k=a(g[h],
g[h+1]);if(n-f<k)return d(g[h],g[h+1],(n-f)/k);f+=k}return g[m-1]};p.isClockwise=function(g,n,m){for(var f=g.length,h=0,k=0,e=0,r=0;r<f;r++){var q=g[r],u=g[(r+1)%f],v=2;h+=q[0]*u[1]-u[0]*q[1];2<q.length&&2<u.length&&m&&(k+=q[0]*u[2]-u[0]*q[2],v=3);q.length>v&&u.length>v&&n&&(e+=q[0]*u[v]-u[0]*q[v])}return 0>=h&&0>=k&&0>=e}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){function r(v){return function(x,z){return null==x?z:null==z?x:v(x,z)}}var q=r(Math.min),u=r(Math.max);B=function(v){function x(){for(var A=0;A<arguments.length;A++);A=v.call(this)||this;A.paths=[];A.type="polyline";return A}a(x,v);var z=x;x.prototype.normalizeCtorArgs=function(A,y){var c=null,b=null;if(A&&!Array.isArray(A)){c=A.paths?A.paths:null;y||(A.spatialReference?y=A.spatialReference:A.paths||(y=A));var l=A.hasZ;var t=A.hasM}else c=A;c=c||[];y=y||k.WGS84;c.length&&
c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(b=c[0]&&c[0][0])void 0===l&&void 0===t?(l=2<b.length,t=!1):void 0===l?l=!t&&3<b.length:void 0===t&&(t=!l&&3<b.length);return{paths:c,spatialReference:y,hasZ:l,hasM:t}};Object.defineProperty(x.prototype,"extent",{get:function(){var A=this.hasZ,y=this.hasM,c=this.spatialReference,b=this.paths,l=A?3:2;if(!b.length||!b[0].length)return null;var t=b[0][0],w=t[0];t=t[1];var C=b[0][0],D=C[0];C=C[1];for(var E=void 0,F=void 0,G=void 0,H=void 0,M=[],
X=0;X<b.length;X++){var W=b[X],T=W[0],K=T[0];T=T[1];var O=W[0],N=O[0];O=O[1];for(var Y=void 0,P=void 0,L=void 0,Q=void 0,ca=0;ca<W.length;ca++){var ha=W[ca],ja=ha[0],ma=ha[1];w=q(w,ja);t=q(t,ma);D=u(D,ja);C=u(C,ma);K=q(K,ja);T=q(T,ma);N=u(N,ja);O=u(O,ma);A&&2<ha.length&&(ja=ha[2],E=q(E,ja),F=u(F,ja),Y=q(Y,ja),P=u(P,ja));y&&ha.length>l&&(Q=ha[l],G=q(E,Q),H=u(F,Q),L=q(Y,Q),Q=u(P,Q))}M.push(new m({xmin:K,ymin:T,zmin:Y,mmin:L,xmax:N,ymax:O,zmax:P,mmax:Q,spatialReference:c}))}b=new m;b.xmin=w;b.ymin=t;
b.xmax=D;b.ymax=C;b.spatialReference=c;A&&(b.zmin=E,b.zmax=F);y&&(b.mmin=G,b.mmax=H);b.cache._partwise=1<M.length?M:null;return b},enumerable:!0,configurable:!0});x.prototype.writePaths=function(A,y,c,b){y.paths=g.clone(this.paths)};x.prototype.addPath=function(A){if(A){this.clearCache();var y=this.paths,c=y.length;if(Array.isArray(A[0]))y[c]=A.concat();else{for(var b=[],l=0,t=A.length;l<t;l++)b[l]=A[l].toArray();y[c]=b}return this}};x.prototype.clone=function(){var A=new z;A.spatialReference=this.spatialReference;
A.paths=g.clone(this.paths);A.hasZ=this.hasZ;A.hasM=this.hasM;return A};x.prototype.getPoint=function(A,y){if(!this._validateInputs(A,y))return null;var c=this.paths[A][y],b=this.hasZ,l=this.hasM;return b&&!l?new h(c[0],c[1],c[2],void 0,this.spatialReference):l&&!b?new h(c[0],c[1],void 0,c[2],this.spatialReference):b&&l?new h(c[0],c[1],c[2],c[3],this.spatialReference):new h(c[0],c[1],this.spatialReference)};x.prototype.insertPoint=function(A,y,c){if(!this._validateInputs(A,y,!0))return this;this.clearCache();
e.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[A].splice(y,0,c);return this};x.prototype.removePath=function(A){if(!this._validateInputs(A,null))return null;this.clearCache();A=this.paths.splice(A,1)[0];var y=this.spatialReference;return A.map(function(c){return new h(c,y)})};x.prototype.removePoint=function(A,y){if(!this._validateInputs(A,y))return null;this.clearCache();return new h(this.paths[A].splice(y,1)[0],this.spatialReference)};x.prototype.setPoint=function(A,
y,c){if(!this._validateInputs(A,y))return this;this.clearCache();e.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[A][y]=c;return this};x.prototype._validateInputs=function(A,y,c){void 0===c&&(c=!1);return null==A||0>A||A>=this.paths.length||null!=y&&(A=this.paths[A],c&&(0>y||y>A.length)||!c&&(0>y||y>=A.length))?!1:!0};x.prototype.toJSON=function(A){return this.write(null,A)};d([n.property({dependsOn:["hasM","hasZ","paths"]})],x.prototype,"cache",void 0);d([n.property({dependsOn:["cache"],
readOnly:!0})],x.prototype,"extent",null);d([n.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],x.prototype,"paths",void 0);d([n.writer("paths")],x.prototype,"writePaths",null);return x=z=d([n.subclass("esri.geometry.Polyline")],x)}(n.declared(f));B.prototype.toJSON.isDefaultToJSON=!0;return B})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(B,p,a,d,g,n){return function(m){function f(){for(var k=[],e=0;e<arguments.length;e++)k[e]=arguments[e];k=m.apply(this,k)||this;k.x=0;k.y=0;k.z=void 0;return k}a(f,m);var h=f;f.prototype.normalizeCtorArgs=function(k,e){return"number"===typeof k?{x:k,y:e}:Array.isArray(k)?{x:k[0],y:k[1]}:k};f.prototype.clone=function(){return new h({x:this.x,y:this.y,z:this.z})};f.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};d([n.property({type:Number})],f.prototype,
"x",void 0);d([n.property({type:Number})],f.prototype,"y",void 0);d([n.property({type:Number})],f.prototype,"z",void 0);return f=h=d([n.subclass("esri.geometry.ScreenPoint")],f)}(n.declared(g))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(B,p,a,d,g,n,m){function f(u){return void 0!==u.points}function h(u){return void 0!==u.x&&void 0!==u.y}function k(u){return void 0!==u.paths}
function e(u){return void 0!==u.rings}function r(u){if(u){if(h(u))return g.fromJSON(u);if(k(u))return m.fromJSON(u);if(e(u))return n.fromJSON(u);if(f(u))return d.fromJSON(u);if(void 0!==u.xmin&&void 0!==u.ymin&&void 0!==u.xmax&&void 0!==u.ymax)return a.fromJSON(u)}return null}Object.defineProperty(p,"__esModule",{value:!0});p.fromJson=function(u){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(v){}return r(u)};p.isMultipoint=f;p.isPoint=h;p.isPolyline=k;p.isPolygon=e;p.fromJSON=
r;p.getJsonType=function(u){return u instanceof g?"esriGeometryPoint":u instanceof m?"esriGeometryPolyline":u instanceof n?"esriGeometryPolygon":u instanceof a?"esriGeometryEnvelope":u instanceof d?"esriGeometryMultipoint":null};var q={esriGeometryPoint:g,esriGeometryPolyline:m,esriGeometryPolygon:n,esriGeometryEnvelope:a,esriGeometryMultipoint:d};p.getGeometryType=function(u){return u&&q[u]||null}})},"esri/layers/vectorTiles/geometry/support/aaBoundingBox":function(){define(["require","exports",
"../Extent","./aaBoundingRect"],function(B,p,a,d){function g(e){void 0===e&&(e=p.ZERO);return[e[0],e[1],e[2],e[3],e[4],e[5]]}function n(e){return e[0]>=e[3]?0:e[3]-e[0]}function m(e){return e[1]>=e[4]?0:e[4]-e[1]}function f(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];return e}function k(e){return 6===e.length}Object.defineProperty(p,"__esModule",{value:!0});p.create=g;p.fromValues=function(e,r,q,u,v,x){return[e,r,q,u,v,x]};p.fromExtent=
function(e,r){void 0===r&&(r=g());r[0]=e.xmin;r[1]=e.ymin;r[2]=e.zmin;r[3]=e.xmax;r[4]=e.ymax;r[5]=e.zmax;return r};p.toExtent=function(e,r){return isFinite(e[2])||isFinite(e[5])?new a({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:r}):new a({xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:r})};p.fromMinMax=function(e,r,q){void 0===q&&(q=g());q[0]=e[0];q[1]=e[1];q[2]=e[2];q[3]=r[0];q[4]=r[1];q[5]=r[2];return q};p.expandPointInPlace=function(e,r){r[0]<e[0]&&
(e[0]=r[0]);r[0]>e[3]&&(e[3]=r[0]);r[1]<e[1]&&(e[1]=r[1]);r[1]>e[4]&&(e[4]=r[1]);r[2]<e[2]&&(e[2]=r[2]);r[2]>e[5]&&(e[5]=r[2])};p.expand=function(e,r,q){void 0===q&&(q=e);k(r)?(q[0]=Math.min(e[0],r[0]),q[1]=Math.min(e[1],r[1]),q[2]=Math.min(e[2],r[2]),q[3]=Math.max(e[3],r[3]),q[4]=Math.max(e[4],r[4]),q[5]=Math.max(e[5],r[5])):d.is(r)?(q[0]=Math.min(e[0],r[0]),q[1]=Math.min(e[1],r[1]),q[3]=Math.max(e[3],r[2]),q[4]=Math.max(e[4],r[3])):2===r.length?(q[0]=Math.min(e[0],r[0]),q[1]=Math.min(e[1],r[1]),
q[3]=Math.max(e[3],r[0]),q[4]=Math.max(e[4],r[1])):3===r.length&&(q[0]=Math.min(e[0],r[0]),q[1]=Math.min(e[1],r[1]),q[2]=Math.min(e[2],r[2]),q[3]=Math.max(e[3],r[0]),q[4]=Math.max(e[4],r[1]),q[5]=Math.max(e[5],r[2]));return q};p.expandWithBuffer=function(e,r,q,u,v){void 0===v&&(v=e);var x=e[0],z=e[1],A=e[2],y=e[3],c=e[4];e=e[5];for(var b=0;b<u;b++)x=Math.min(x,r[q+3*b]),z=Math.min(z,r[q+3*b+1]),A=Math.min(A,r[q+3*b+2]),y=Math.max(y,r[q+3*b]),c=Math.max(c,r[q+3*b+1]),e=Math.max(e,r[q+3*b+2]);v[0]=
x;v[1]=z;v[2]=A;v[3]=y;v[4]=c;v[5]=e;return v};p.expandWithNestedArray=function(e,r,q,u){void 0===u&&(u=e);var v=r.length,x=e[0],z=e[1],A=e[2],y=e[3],c=e[4];e=e[5];if(q)for(q=0;q<v;q++){var b=r[q];x=Math.min(x,b[0]);z=Math.min(z,b[1]);A=Math.min(A,b[2]);y=Math.max(y,b[0]);c=Math.max(c,b[1]);e=Math.max(e,b[2])}else for(q=0;q<v;q++)b=r[q],x=Math.min(x,b[0]),z=Math.min(z,b[1]),y=Math.max(y,b[0]),c=Math.max(c,b[1]);u[0]=x;u[1]=z;u[2]=A;u[3]=y;u[4]=c;u[5]=e;return u};p.allFinite=function(e){for(var r=
0;6>r;r++)if(!isFinite(e[r]))return!1;return!0};p.width=n;p.depth=m;p.height=f;p.diameter=function(e){var r=n(e),q=f(e);e=m(e);return Math.sqrt(r*r+q*q+e*e)};p.center=function(e,r){void 0===r&&(r=[0,0,0]);r[0]=e[0]+n(e)/2;r[1]=e[1]+m(e)/2;r[2]=e[2]+f(e)/2;return r};p.size=function(e,r){void 0===r&&(r=[0,0,0]);r[0]=n(e);r[1]=m(e);r[2]=f(e);return r};p.maximumDimension=function(e){return Math.max(n(e),f(e),m(e))};p.containsPoint=function(e,r){return r[0]>=e[0]&&r[1]>=e[1]&&r[2]>=e[2]&&r[0]<=e[3]&&r[1]<=
e[4]&&r[2]<=e[5]};p.containsPointWithMargin=function(e,r,q){return r[0]>=e[0]-q&&r[1]>=e[1]-q&&r[2]>=e[2]-q&&r[0]<=e[3]+q&&r[1]<=e[4]+q&&r[2]<=e[5]+q};p.contains=function(e,r){return r[0]>=e[0]&&r[1]>=e[1]&&r[2]>=e[2]&&r[3]<=e[3]&&r[4]<=e[4]&&r[5]<=e[5]};p.intersects=function(e,r){return Math.max(r[0],e[0])<=Math.min(r[3],e[3])&&Math.max(r[1],e[1])<=Math.min(r[4],e[4])&&Math.max(r[2],e[2])<=Math.min(r[5],e[5])};p.offset=function(e,r,q,u,v){void 0===v&&(v=e);v[0]=e[0]+r;v[1]=e[1]+q;v[2]=e[2]+u;v[3]=
e[3]+r;v[4]=e[4]+q;v[5]=e[5]+u;return v};p.setMin=function(e,r,q){void 0===q&&(q=e);q[0]=r[0];q[1]=r[1];q[2]=r[2];q!==e&&(q[3]=e[3],q[4]=e[4],q[5]=e[5]);return q};p.setMax=function(e,r,q){void 0===q&&(q=e);q[3]=r[0];q[4]=r[1];q[5]=r[2];q!==e&&(q[0]=e[0],q[1]=e[1],q[2]=e[2]);return e};p.set=h;p.empty=function(e){return e?h(e,p.NEGATIVE_INFINITY):g(p.NEGATIVE_INFINITY)};p.toRect=function(e,r){r||(r=d.create());r[0]=e[0];r[1]=e[1];r[2]=e[3];r[3]=e[4];return r};p.fromRect=function(e,r){e[0]=r[0];e[1]=
r[1];e[3]=r[2];e[4]=r[3];return e};p.is=k;p.isPoint=function(e){return 0===n(e)&&0===m(e)&&0===f(e)};p.equals=function(e,r,q){if(null==e||null==r)return e===r;if(!k(e)||!k(r))return!1;if(q)for(var u=0;u<e.length;u++){if(!q(e[u],r[u]))return!1}else for(u=0;u<e.length;u++)if(e[u]!==r[u])return!1;return!0};p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];p.ZERO=[0,0,0,0,0,0]})},"esri/layers/vectorTiles/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../geometry"],function(B,p,a){function d(k){void 0===k&&(k=p.ZERO);return[k[0],k[1],k[2],k[3]]}function g(k){return k[0]>=k[2]?0:k[2]-k[0]}function n(k){return k[1]>=k[3]?0:k[3]-k[1]}function m(k,e){k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=e[3];return k}function f(k){return 4===k.length}function h(k,e,r){return k<e?e:k>r?r:k}Object.defineProperty(p,"__esModule",{value:!0});p.create=d;p.clone=function(k){return[k[0],k[1],k[2],k[3]]};p.fromValues=function(k,e,r,q,u){void 0===u&&(u=d());u[0]=
k;u[1]=e;u[2]=r;u[3]=q;return u};p.fromExtent=function(k,e){void 0===e&&(e=d());e[0]=k.xmin;e[1]=k.ymin;e[2]=k.xmax;e[3]=k.ymax;return e};p.toExtent=function(k,e){return new a.Extent({xmin:k[0],ymin:k[1],xmax:k[2],ymax:k[3],spatialReference:e})};p.expandPointInPlace=function(k,e){e[0]<k[0]&&(k[0]=e[0]);e[0]>k[2]&&(k[2]=e[0]);e[1]<k[1]&&(k[1]=e[1]);e[1]>k[3]&&(k[3]=e[1])};p.expand=function(k,e,r){void 0===r&&(r=k);if("length"in e)if(f(e))r[0]=Math.min(k[0],e[0]),r[1]=Math.min(k[1],e[1]),r[2]=Math.max(k[2],
e[2]),r[3]=Math.max(k[3],e[3]);else{if(2===e.length||3===e.length)r[0]=Math.min(k[0],e[0]),r[1]=Math.min(k[1],e[1]),r[2]=Math.max(k[2],e[0]),r[3]=Math.max(k[3],e[1])}else switch(e.type){case "extent":r[0]=Math.min(k[0],e.xmin);r[1]=Math.min(k[1],e.ymin);r[2]=Math.max(k[2],e.xmax);r[3]=Math.max(k[3],e.ymax);break;case "point":r[0]=Math.min(k[0],e.x),r[1]=Math.min(k[1],e.y),r[2]=Math.max(k[2],e.x),r[3]=Math.max(k[3],e.y)}return r};p.expandWithNestedArray=function(k,e,r){void 0===r&&(r=k);var q=e.length,
u=k[0],v=k[1],x=k[2];k=k[3];for(var z=0;z<q;z++){var A=e[z];u=Math.min(u,A[0]);v=Math.min(v,A[1]);x=Math.max(x,A[0]);k=Math.max(k,A[1])}r[0]=u;r[1]=v;r[2]=x;r[3]=k;return r};p.allFinite=function(k){for(var e=0;4>e;e++)if(!isFinite(k[e]))return!1;return!0};p.width=g;p.height=n;p.diameter=function(k){var e=g(k);k=n(k);return Math.sqrt(e*e+k*k)};p.area=function(k){return g(k)*n(k)};p.center=function(k,e){void 0===e&&(e=[0,0]);e[0]=k[0]+g(k)/2;e[1]=k[1]+n(k)/2;return e};p.containsPoint=function(k,e){return e[0]>=
k[0]&&e[1]>=k[1]&&e[0]<=k[2]&&e[1]<=k[3]};p.containsPointWithMargin=function(k,e,r){return e[0]>=k[0]-r&&e[1]>=k[1]-r&&e[0]<=k[2]+r&&e[1]<=k[3]+r};p.intersects=function(k,e){return Math.max(e[0],k[0])<=Math.min(e[2],k[2])&&Math.max(e[1],k[1])<=Math.min(e[3],k[3])};p.contains=function(k,e){return e[0]>=k[0]&&e[2]<=k[2]&&e[1]>=k[1]&&e[3]<=k[3]};p.intersection=function(k,e,r){void 0===r&&(r=k);var q=e[0],u=e[1],v=e[2];e=e[3];r[0]=h(k[0],q,v);r[1]=h(k[1],u,e);r[2]=h(k[2],q,v);r[3]=h(k[3],u,e);return r};
p.offset=function(k,e,r,q){void 0===q&&(q=k);q[0]=k[0]+e;q[1]=k[1]+r;q[2]=k[2]+e;q[3]=k[3]+r;return q};p.pad=function(k,e,r){void 0===r&&(r=k);r[0]=k[0]-e;r[1]=k[1]-e;r[2]=k[2]+e;r[3]=k[3]+e;return r};p.setMin=function(k,e,r){void 0===r&&(r=k);r[0]=e[0];r[1]=e[1];r!==k&&(r[2]=k[2],r[3]=k[3]);return r};p.setMax=function(k,e,r){void 0===r&&(r=k);r[2]=e[0];r[3]=e[1];r!==k&&(r[0]=k[0],r[1]=k[1]);return k};p.set=m;p.empty=function(k){return k?m(k,p.NEGATIVE_INFINITY):d(p.NEGATIVE_INFINITY)};p.is=f;p.isPoint=
function(k){return(0===g(k)||!isFinite(k[0]))&&(0===n(k)||!isFinite(k[1]))};p.equals=function(k,e,r){if(null==k||null==e)return k===e;if(!f(k)||!f(e))return!1;if(r)for(var q=0;q<k.length;q++){if(!r(k[q],e[q]))return!1}else for(q=0;q<k.length;q++)if(k[q]!==e[q])return!1;return!0};p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];p.ZERO=[0,0,0,0]})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ./dehydratedFeatureComparison".split(" "),
function(B,p,a,d,g,n,m){function f(z){switch(z){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function h(z,A,y,c){return{uid:a.generateUID(),objectId:c&&z.attributes?z.attributes[c]:null,attributes:z.attributes,geometry:k(z.geometry,A,y),visible:!0}}function k(z,A,y){if(!z)return null;switch(A){case "point":return{x:z.x,y:z.y,
z:z.z,type:A,spatialReference:y};case "polyline":var c=z;return{paths:c.paths,hasZ:c.hasZ,hasM:c.hasM,type:A,spatialReference:y};case "polygon":return{rings:z.rings,hasZ:c.hasZ,hasM:c.hasM,type:A,spatialReference:y};case "multipoint":return{points:z.points,hasZ:c.hasZ,hasM:c.hasM,type:A,spatialReference:y};case "extent":return{xmin:z.xmin,ymin:z.ymin,zmin:z.zmin,mmin:z.mmin,xmax:z.xmax,ymax:z.ymax,zmax:z.zmax,mmax:z.mmax,hasZ:z.hasZ,hasM:z.hasM,type:A,spatialReference:y}}}function e(z){return"point"===
z.type?null!=z.z:"extent"===z.type?null!=z.zmin:z.hasZ}function r(z){return"declaredClass"in z}function q(z,A){g.empty(A);"mesh"===z.type&&(z=z.extent);switch(z.type){case "point":A[0]=A[3]=z.x;A[1]=A[4]=z.y;e(z)&&(A[2]=A[5]=z.z);break;case "polyline":for(var y=0;y<z.paths.length;y++)g.expandWithNestedArray(A,z.paths[y],e(z));break;case "polygon":for(y=0;y<z.rings.length;y++)g.expandWithNestedArray(A,z.rings[y],e(z));break;case "multipoint":g.expandWithNestedArray(A,z.points,e(z));break;case "extent":A[0]=
z.xmin,A[1]=z.ymin,A[3]=z.xmax,A[4]=z.ymax,null!=z.zmin&&(A[2]=z.zmin),null!=z.zmax&&(A[5]=z.zmax)}}function u(z,A){n.empty(A);"mesh"===z.type&&(z=z.extent);switch(z.type){case "point":A[0]=A[2]=z.x;A[1]=A[3]=z.y;break;case "polyline":for(var y=0;y<z.paths.length;y++)n.expandWithNestedArray(A,z.paths[y]);break;case "polygon":for(y=0;y<z.rings.length;y++)n.expandWithNestedArray(A,z.rings[y]);break;case "multipoint":n.expandWithNestedArray(A,z.points);break;case "extent":A[0]=z.xmin,A[1]=z.ymin,A[2]=
z.xmax,A[3]=z.ymax}}Object.defineProperty(p,"__esModule",{value:!0});p.equals=m.equals;p.isPoint=function(z){return"point"===z.type};p.mapJSONGeometryType=f;p.fromFeatureSetJSON=function(z){var A=f(z.geometryType),y=d.fromJSON(z.spatialReference);return z.features.map(function(c){return h(c,A,y,z.objectIdFieldName)})};p.fromJSON=h;p.fromJSONGeometry=k;p.makeDehydratedPoint=function(z,A,y,c){return{x:z,y:A,z:y,spatialReference:c,type:"point"}};p.hasZ=e;p.isHydratedGeometry=function(z){return"declaredClass"in
z};p.isHydratedGraphic=r;p.hydrateGraphic=function(z,A){if(!z||r(z))return z;var y=new a({layer:A,sourceLayer:A});y.read(z);return y};p.computeAABB=q;p.expandAABB=function(z,A){q(z,v);g.expand(A,v)};p.computeAABR=u;p.expandAABR=function(z,A){u(z,x);n.expand(A,x)};var v=g.create(),x=n.create()})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic","./core/tsSupport/declareExtendsHelper","./core/JSONSupport"],function(B,p,a,d,g){B=function(m){function f(h){return m.call(this)||
this}d(f,m);f.fromJSON=function(h){return new a(h)};return f}(g);var n=0;(function(m){m.generateUID=function(){return n++}})(B||(B={}));return B})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(B,p,a,d,g,n,m,f,h){function k(){}B=B(null,{declaredClass:"esri.Graphic",constructor:function(e,r,q,u){this._construct();e&&!e.declaredClass?(this.geometry=e.geometry?f.fromJson(e.geometry):
null,this.symbol=e.symbol?h.fromJson(e.symbol):null,this.attributes=e.attributes||null,this.infoTemplate=e.infoTemplate?new m(e.infoTemplate):null):(this.geometry=e,this.symbol=r,this.attributes=q,this.infoTemplate=u)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,
_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(e){this._parentGraphic=e},setSize:function(e){this.size=e;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(e){this._aggregationSourceLayer=e;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(e){this._aggregationInfo=e;return this},
getChildGraphics:function(){var e=this.getAggregationSourceLayer();return e?e.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var e=[];this._shape&&e.push(this._shape);this._bgShape&&e.push(this._bgShape);return e},getNode:function(){var e=this._shape&&this._shape.getNode();return e&&e.nodeType?e:null},getNodes:function(){var e=this.getShapes(),r,q,u=e.length,v=[];for(q=0;q<u;q++)(r=e[q]&&e[q].getNode())&&r.nodeType&&v.push(r);return v},getLayer:function(){return this._layer},
getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var e=new this.constructor(this.toJson());e.visible=this.visible;e._layer=this._layer;e._sourceLayer=this._sourceLayer;e._aggregationSourceLayer=this._aggregationSourceLayer;e._aggregationInfo=this._aggregationInfo;e._resolution=this._resolution;return e},draw:function(){var e=this._graphicsLayer;e&&e._draw(this,!0);return this},setGeometry:function(e){this.geometry=e;this._geomVersion++;var r=this._graphicsLayer;r&&
(r._updateExtent(this),this.draw(),e&&"polyline"===e.type&&r._updateSVGMarkers());return this},setResolution:function(e){this._resolution=e;return this},getResolution:function(){return this._resolution},setSymbol:function(e,r){var q=this._graphicsLayer,u=this._shape;this.symbol=e;q&&(r&&u&&q._removeShape(this),this.draw());return this},setAttributes:function(e){this.attributes=e;this.clearCache();return this},setInfoTemplate:function(e){this.infoTemplate=e;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var e=this.getLayer();return this.infoTemplate||e&&e.infoTemplate},getTitle:function(){var e=this.getInfoTemplate(),r=e&&e.title;if(p.isFunction(r))r=r.call(e,this);else if(p.isString(r)){var q=(e=this.getLayer())&&e._getDateOpts;r=n.substitute(this.attributes,r,{first:!0,dateFormat:q&&q.call(e)})}return r},getContent:function(){var e=this.getInfoTemplate(),r=e&&e.content;if(p.isFunction(r))r=r.call(e,this);else if(p.isString(r)){var q=(e=this.getLayer())&&e._getDateOpts;
r=n.substitute(this.attributes,r,{dateFormat:q&&q.call(e)})}return r},attr:function(e,r){null==r||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[e]=r,this._setDataAttr(e,r));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var e;if(this.getShapes().length){var r=this.getNodes();var q=r.length;for(e=0;e<
q;e++)g.show(r[e])}else this.draw();(r=this._graphicsLayer)&&r._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var e=this._graphicsLayer,r,q;if(e){if("canvas-2d"===e.surfaceType)e._removeShape(this);else{var u=this.getNodes();if(q=u.length)for(r=0;r<q;r++)g.hide(u[r])}e._graphicVisibilityChanged(this)}return this},toJson:function(){var e={};this.geometry&&(e.geometry=this.geometry.toJson());this.attributes&&(e.attributes=p.mixin({},this.attributes));
this.symbol&&(e.symbol=this.symbol.toJson());this.infoTemplate&&(e.infoTemplate=this.infoTemplate.toJson());return e},_setDataAttr:function(e,r){var q=this.getNodes(),u,v=q.length;for(u=0;u<v;u++)this._setDOMDataAttr(q[u],e,r)},_setDOMDataAttr:function(e,r,q){null==q?e.removeAttribute(r):e.setAttribute(r,q)},_applyDataAttrs:function(){var e=this._dataAttrs;if(e){var r=this.getNodes(),q,u=r.length;for(q=0;q<u;q++)for(var v in e)this._setDOMDataAttr(r[q],v,e[v])}},_getViewInfo:function(e){return(e=
(e=e||this.getLayer())&&e.getMap())&&e.getViewInfo()},evaluateExpression:function(e,r){return this._getDataValue(e._attributeDef,e._attributeCache,null,null,e,r)},_getDataValue:function(e,r,q,u,v,x){var z=r.id,A=this.attributes,y=e.field,c=r.isNumeric,b=null;if(z){var l=this._computedAttributes,t=this._computedVersion,w=this._computedGeomVersion;u=this._getViewInfo(u);var C=!(!v||!v.async),D=x&&x.skipCache||C,E=!x||!1!==x.strictReturnType,F=r.dependsOnView||r.isJSFunc,G=r.dependsOnGeometry;l||(l=
this._computedAttributes={});F&&!t&&(t=this._computedVersion={});G&&!w&&(w=this._computedGeomVersion={});var H=F&&t[z]!==u.version||G&&w[z]!==this._geomVersion;b=l[z];if(void 0===b||H||D)b=null,r.hasExpr?b=v?v.evaluate(x&&x.context):q.executeFunction(r.compiledFunc,q.createExecContext(this,u)):r.isJSFunc?b=y(this,e):A&&(b=A[y],c&&this._isValidNumber(b)&&(r=e.normalizationType||"field",q=b,b=null,v=e.normalizationTotal,e=A[e.normalizationField],"log"===r&&0!==q?b=Math.log(q)*Math.LOG10E:"percent-of-total"===
r&&this._isValidNumber(v)&&0!==v?b=q/v*100:"field"===r&&this._isValidNumber(e)&&0!==e&&(b=q/e))),E&&(C?c&&(this._construct(),b=b.then(this._sanitizeNumericValue)):b=this._sanitizeValue(b,c)),D||(l[z]=b,F&&(t[z]=u.version),G&&(w[z]=this._geomVersion))}else A&&(b=this._sanitizeValue(A[y],c));return b},_sanitizeValue:function(e,r){r&&!this._isValidNumber(e)&&(e=null);return e},_sanitizeNumericValue:function(e){return this._sanitizeValue(e,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=
p.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(e){return"number"===typeof e&&!isNaN(e)&&Infinity!==e&&-Infinity!==e},clearCache:function(e){if(null!=e){var r=this._computedAttributes,q=this._computedVersion,u=this._computedGeomVersion;r&&(r[e]=void 0);q&&(q[e]=void 0);u&&(u[e]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});B.prototype.getShape=B.prototype.getDojoShape;k.prototype=B.prototype;B.simpleConstructor=
k;return d.Graphic=B})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(B,p,a,d,g){var n={show:function(m){if(m=n.getNode(m))m.style.display="block"},getNode:function(m){return m&&m.domNode||m},hide:function(m){if(m=n.getNode(m))m.style.display="none"},toggle:function(m){if(m=n.getNode(m))m.style.display="none"===m.style.display?"block":"none"},documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(m){if(m=this.getNode(m)){var f=0,h=0,k=0,e=0,r=0,q=0;return[p.connect(m,"ontouchstart",function(u){f=u.touches[0].screenX;h=u.touches[0].screenY;k=m.scrollWidth;e=m.scrollHeight;r=m.clientWidth;q=m.clientHeight}),p.connect(m,"ontouchmove",function(u){u.preventDefault();var v=m.firstChild;v instanceof Text&&(v=m.childNodes[1]);var x=v._currentX||0,z=v._currentY||0;x+=u.touches[0].screenX-f;0<x?x=0:0>x&&Math.abs(x)+r>k&&(x=-1*(k-r));
v._currentX=x;z+=u.touches[0].screenY-h;0<z?z=0:0>z&&Math.abs(z)+q>e&&(z=-1*(e-q));v._currentY=z;d.set(v,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+x+"px, "+z+"px)"});f=u.touches[0].screenX;h=u.touches[0].screenY})]}}};a.mixin(B,n);return n})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(B,p,a,d,g){B=B(null,{declaredClass:"esri.InfoTemplate",constructor:function(n,m){n&&p.isObject(n)&&
!p.isFunction(n)?p.mixin(this,n):(this.title=n||"${*}",this.content=m||"${*}")},setTitle:function(n){this.title=n;return this},setContent:function(n){this.content=n;return this},toJson:function(){return g.fixJson({title:this.title,content:this.content})}});return d.InfoTemplate=B})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){var r={createDefaultSymbol:function(q){switch(q){case "esriGeometryPoint":case "esriGeometryMultipoint":var u=r.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":u=r.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":u=r.createDefaultFillSymbol()}return u},createDefaultMarkerSymbol:function(){return new g},createDefaultLineSymbol:function(){return new m},createDefaultFillSymbol:function(){return new h},
getFirstSupportedSymbol:function(q){var u;p.some(q,function(v){v&&-1<r.supportedSymbolTypes.indexOf(v.type)&&(u=v);return!!u});return u},isPointSymbol:function(q){return q?-1<r.supportedPointSymbolTypes.indexOf(q.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(q,u){var v=null;switch(q.type){case "esriSMS":v=new g(q);break;case "esriPMS":v=new n(q);break;case "esriTS":v=new e(q);
break;case "esriSLS":v=void 0!==q.cap?new f(q):new m(q);break;case "esriCLS":v=new f(q);break;case "esriSFS":v=new h(q);break;case "esriPFS":v=new k(q);break;default:v=(v=u&&u.geometryType)?r.createDefaultSymbol(v):null}return v},getShapeDescriptors:function(q){return q&&q.getShapeDescriptors?q.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};B.mixin(B.getObject("symbol",!0,d),r);return r})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(B,p,a,d,g,n,m,f,h){var k={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},e={style:k.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};B=B(f,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",
path:"esriSMSPath"},constructor:function(r,q,u,v){r?p.isString(r)?(this.style=r,q&&(this.size=q),u&&(this.outline=u),v&&(this.color=v)):(this.style=m.valueOf(this._styles,this.style),r.outline&&(this.outline=new h(r.outline))):(p.mixin(this,e),this.size=g.pt2px(this.size),this.outline=new h(this.outline),this.color=new a(this.color));this.style||(this.style=k.STYLE_CIRCLE)},setStyle:function(r){this.style=r;return this},setPath:function(r){this.path=r;this.setStyle(k.STYLE_PATH);return this},setOutline:function(r){this.outline=
r;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(r,q,u){this._targetWidth=r;this._targetHeight=q;this._spikeSize=u},getShapeDescriptors:function(){var r,q=this.style,u=(this.size||g.pt2px(e.size))/2,v=0-u,x=0+u,z=0-u,A=0+u;switch(q){case k.STYLE_CIRCLE:var y={type:"circle",cx:0,cy:0,r:u};var c=this.getFill();if(r=this.getStroke())r.style=r.style||"Solid";break;case k.STYLE_CROSS:y={type:"path",path:"M "+v+",0 L "+
x+",0 M 0,"+z+" L 0,"+A+" E"};c=null;r=this.getStroke();break;case k.STYLE_DIAMOND:y={type:"path",path:"M "+v+",0 L 0,"+z+" L "+x+",0 L 0,"+A+" L "+v+",0 Z"};c=this.getFill();r=this.getStroke();break;case k.STYLE_SQUARE:y={type:"path",path:"M "+v+","+A+" L "+v+","+z+" L "+x+","+z+" L "+x+","+A+" L "+v+","+A+" Z"};c=this.getFill();r=this.getStroke();break;case k.STYLE_TRIANGLE:y={type:"path",path:"M "+v+","+A+" L 0,"+z+" L "+x+","+A+" L "+v+","+A+" Z"};c=this.getFill();r=this.getStroke();break;case k.STYLE_X:y=
{type:"path",path:"M "+v+","+A+" L "+x+","+z+" M "+v+","+z+" L "+x+","+A+" E"};c=null;r=this.getStroke();break;case k.STYLE_PATH:y={type:"path",path:this.path||""},c=this.getFill(),r=this.getStroke()}return{defaultShape:y,fill:c,stroke:r}},toJson:function(){var r=this.style,q=this.outline,u=p.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[r]||"esriSMSCircle"});q&&(u.outline=q.toJson());"x"===r||"cross"===r?delete u.color:"target"===r&&(u.style="esriSMSSquare",delete u.color,
0<this._targetHeight&&0<this._targetWidth&&(u.size=g.px2pt(Math.max(this._targetHeight,this._targetWidth))));u.path=this.path;return m.fixJson(u)}});p.mixin(B,k);B.defaultProps=e;p.setObject("symbol.SimpleMarkerSymbol",B,n);n.symbol.defaultSimpleMarkerSymbol=e;return B})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(B,p,a,d,g,n){B=B(n,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,
size:12,constructor:function(m){m&&p.isObject(m)&&(this.size="auto"===this.size?this.size:d.pt2px(this.size),this.xoffset=d.pt2px(this.xoffset),this.yoffset=d.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(m){this.angle=m;return this},setSize:function(m){this.size=m;return this},setOffset:function(m,f){this.xoffset=m;this.yoffset=f;return this},toJson:function(){var m=d.px2pt(this.size);m=isNaN(m)?void 0:m;var f=d.px2pt(this.xoffset);f=isNaN(f)?void 0:f;var h=d.px2pt(this.yoffset);
h=isNaN(h)?void 0:h;return p.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:m,angle:this.angle&&-1*this.angle,xoffset:f,yoffset:h})}});p.setObject("symbol.MarkerSymbol",B,g);return B})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(B,p,a,d,g,n){B=B(null,{declaredClass:"esri.symbol.Symbol",color:new n([0,0,0,1]),type:null,constructor:function(m){m&&p.isObject(m)&&(p.mixin(this,m),this.color&&
g.isDefined(this.color[0])&&(this.color=n.toDojoColor(this.color)),(m=this.type)&&0===m.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[m]))},setColor:function(m){this.color=m;return this},toJson:function(){return{color:n.toJsonColor(this.color)}}});p.setObject("symbol.Symbol",B,d);return B})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(B,p,a,d){var g=B([p],{declaredClass:"esri.Color"});g.toJsonColor=function(n){return n&&[n.r,n.g,n.b,1<n.a?n.a:Math.round(255*n.a)]};g.toDojoColor=function(n){return n&&new g([n[0],n[1],n[2],n[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(B=0;B<a.length;B++)g[a[B]]=p[a[B]];return d.Color=g})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(B,p,a,d,g,n,m,f){var h={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},k={color:[0,0,0,1],style:h.STYLE_SOLID,width:1};B=B(f,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(e,r,q){e?p.isString(e)?(this.style=e,r&&(this.color=r),q&&(this.width=q)):(this.style=m.valueOf(this._styles,e.style)||h.STYLE_SOLID,this.marker=
e.marker):(p.mixin(this,k),this.color=new a(this.color),this.width=g.pt2px(this.width))},setStyle:function(e){this.style=e;return this},setMarker:function(e){this.marker=e},getStroke:function(){return this.style===h.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return m.fixJson(p.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?p.clone(this.marker):void 0}))}});p.mixin(B,h);B.defaultProps=k;p.setObject("symbol.SimpleLineSymbol",B,n);n.symbol.defaultSimpleLineSymbol=k;return B})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(B,p,a,d,g,n){B=B(n,{declaredClass:"esri.symbol.LineSymbol",constructor:function(m){p.isObject(m)?this.width=d.pt2px(this.width):
this.width=12},setWidth:function(m){this.width=m;return this},toJson:function(){var m=d.px2pt(this.width);m=isNaN(m)?void 0:m;return p.mixin(this.inherited("toJson",arguments),{width:m})}});p.setObject("symbol.LineSymbol",B,g);return B})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(B,p,a,d,g,n,m,f){var h={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};B=
B(f,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(k,e,r){k?p.isString(k)?(this.url=k,e&&(this.width=e),r&&(this.height=r)):(this.width=d.pt2px(null==k.width?h.width:k.width),this.height=d.pt2px(null==k.height?h.height:k.height),e=k.imageData,9>a("ie")||!e||(r=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+e,this.imageData=r)):(p.mixin(this,h),this.width=d.pt2px(this.width),this.height=d.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var k=this.url,e=this.imageData;if(0===k.indexOf("data:")){var r=
k;k=e;e=r.indexOf(";base64,")+8;e=r.substr(e)}!p.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=m.getAbsoluteUrl(k));r=d.px2pt(this.width);r=isNaN(r)?void 0:r;var q=d.px2pt(this.height);q=isNaN(q)?void 0:q;k=n.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:k,imageData:e,contentType:this.contentType,width:r,height:q}));delete k.color;delete k.size;k.imageData||delete k.imageData;return k}});B.defaultProps=h;p.setObject("symbol.PictureMarkerSymbol",
B,g);g.symbol.defaultPictureMarkerSymbol=h;return B})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(B,p,a,d,g,n,m,f){var h={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},k={color:[0,0,0,1],style:h.STYLE_SOLID,width:1,cap:h.CAP_BUTT,join:h.JOIN_MITER,miterLimit:10};B=B(f,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(e,r,q,u,v,x){e?p.isString(e)?(this.style=e,r&&(this.color=r),void 0!==q&&(this.width=q),u&&(this.cap=u),v&&(this.join=v),void 0!==x&&(this.miterLimit=x)):(this.cap=m.valueOf(this._caps,e.cap),this.join=m.valueOf(this._joins,e.join),this.width=g.pt2px(e.width),this.miterLimit=g.pt2px(e.miterLimit)):(p.mixin(this,k),this.color=new a(this.color),this.width=g.pt2px(this.width),this.miterLimit=g.pt2px(this.miterLimit))},setCap:function(e){this.cap=e;return this},
setJoin:function(e){this.join=e;return this},setMiterLimit:function(e){this.miterLimit=e;return this},getStroke:function(){return p.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===h.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var e=g.px2pt(this.miterLimit);e=isNaN(e)?void 0:e;return m.fixJson(p.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:e}))}});p.mixin(B,h);B.defaultProps=k;p.setObject("symbol.CartographicLineSymbol",B,n);n.symbol.defaultCartographicLineSymbol=k;return B})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(B,p,a,d,g,n,m,f,h,k){var e={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},r={style:e.STYLE_SOLID,color:[0,0,0,.25]};B=B(f,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(q,u,v){q?p.isString(q)?(this.style=q,void 0!==u&&(this.outline=u),void 0!==v&&(this.color=v)):this.style=m.valueOf(this._styles,q.style):(p.mixin(this,r),this.outline=new h(this.outline),this.color=new a(this.color))},setStyle:function(q){this.style=q;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var q=this.style;return q===e.STYLE_NULL?null:q===e.STYLE_SOLID?this.color:p.mixin({},g.defaultPattern,{src:k.toUrl("../images/symbol/sfs/"+q+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return m.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});p.mixin(B,e);B.defaultProps=
r;p.setObject("symbol.SimpleFillSymbol",B,n);n.symbol.defaultSimpleFillSymbol=r;return B})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(B,p,a,d,g,n){B=B(g,{declaredClass:"esri.symbol.FillSymbol",constructor:function(m){m&&p.isObject(m)&&m.outline&&(this.outline=new n(m.outline))},setOutline:function(m){this.outline=m;return this},toJson:function(){var m=this.inherited("toJson",arguments);this.outline&&
(m.outline=this.outline.toJson());return m}});p.setObject("symbol.FillSymbol",B,d);return B})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(B,p,a,d,g,n,m,f){var h={xoffset:0,yoffset:0,width:12,height:12};B=B(f,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(k,e,r,q){k?p.isString(k)?(this.url=
k,void 0!==e&&(this.outline=e),void 0!==r&&(this.width=r),void 0!==q&&(this.height=q)):(this.xoffset=d.pt2px(k.xoffset),this.yoffset=d.pt2px(k.yoffset),this.width=d.pt2px(k.width),this.height=d.pt2px(k.height),e=k.imageData,9>a("ie")||!e||(r=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+e,this.imageData=r)):(p.mixin(this,h),this.width=d.pt2px(this.width),this.height=d.pt2px(this.height))},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},
setOffset:function(k,e){this.xoffset=k;this.yoffset=e;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},setXScale:function(k){this.xscale=k;return this},setYScale:function(k){this.yscale=k;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return p.mixin({},d.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var k=this.url,e=this.imageData;if(0===k.indexOf("data:")){var r=k;k=e;e=r.indexOf(";base64,")+8;e=r.substr(e)}!p.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=m.getAbsoluteUrl(k));r=d.px2pt(this.width);r=isNaN(r)?void 0:r;var q=d.px2pt(this.height);q=isNaN(q)?void 0:q;var u=d.px2pt(this.xoffset);u=isNaN(u)?void 0:u;var v=d.px2pt(this.yoffset);
v=isNaN(v)?void 0:v;k=n.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:k,imageData:e,contentType:this.contentType,width:r,height:q,xoffset:u,yoffset:v,xscale:this.xscale,yscale:this.yscale}));k.imageData||delete k.imageData;return k}});B.defaultProps=h;p.setObject("symbol.PictureFillSymbol",B,g);g.symbol.defaultPictureFillSymbol=h;return B})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(B,p,a,d,g,n,m,f,h){var k={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:d.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e={start:"left",middle:"center",end:"right"},r={left:"start",center:"middle",right:"end",justify:"start"},q={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},u=document.createElement("canvas");B=B(f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(v,
x,z){p.mixin(this,k);this.font=new h(this.font);this.color=new m(this.color);v&&(p.isObject(v)?(p.mixin(this,v),this.color&&n.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),this.type="textsymbol",this.font=new h(this.font),this.xoffset=d.pt2px(this.xoffset),this.yoffset=d.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=d.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=m.toDojoColor(this.haloColor))):(this.text=v,x&&(this.font=x),z&&(this.color=
z)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(v){this.font=v;return this},setSize:function(v){this.font.size=v;return this},setAngle:function(v){this.angle=v;return this},setOffset:function(v,x){this.xoffset=v;this.yoffset=x;return this},setHaloColor:function(v){this.haloColor=v;return this},setHaloSize:function(v){this.haloSize=v;return this},setAlign:function(v){this.align=v;this.setHorizontalAlignment(v&&e[v.toLowerCase()]||"center");return this},setHorizontalAlignment:function(v){this.horizontalAlignment=
v;return this},getSVGAlign:function(){var v=this.horizontalAlignment;return v=v&&r[v.toLowerCase()]||"middle"},setVerticalAlignment:function(v){this.verticalAlignment=v;return this},getSVGBaseline:function(){var v=this.verticalAlignment;return v&&q[v.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(v){this.decoration=v;this.font||this.setFont(new h);this.font.setDecoration(v);return this},setRotated:function(v){this.rotated=
v;return this},setKerning:function(v){this.kerning=v;return this},setText:function(v){this.text=v;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var v=u&&u.getContext&&u.getContext("2d");if(v){var x=this.font;v.font=(x.style?x.style:d.defaultFont.style)+" "+(x.weight?x.weight:d.defaultFont.weight)+" "+(x.size?x.size:d.defaultFont.size)+"px "+(x.family?x.family:d.defaultFont.family);return v.measureText(this.text).width}v=this.getHeight();x=
0;var z;for(z=0;z<this.text.length;z++){var A=this.text.charAt(z);x=A==A.toUpperCase()?x+.7*v:x+.5*v}return x},getHeight:function(){return d.normalizedLength(this.font.size)},getShapeDescriptors:function(){var v=this.font;if(v){var x={};v.size&&(x.size=v.size);v.style&&(x.style=v.style);v.variant&&(x.variant=v.variant);v.decoration&&(x.decoration=v.decoration);v.weight&&(x.weight=v.weight);v.family&&(x.family=v.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||v&&v.decoration,rotated:this.rotated,kerning:this.kerning},font:x,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var v=d.px2pt(this.xoffset),x=d.px2pt(this.yoffset),z=d.px2pt(this.haloSize);v=isNaN(v)?void 0:v;x=isNaN(x)?void 0:x;z=isNaN(z)?void 0:z;return n.fixJson(p.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:z,haloColor:this.haloColor&&
m.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:v,yoffset:x,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});p.mixin(B,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});B.defaultProps=
k;p.setObject("symbol.TextSymbol",B,g);g.symbol.defaultTextSymbol=k;return B})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(B,p,a,d,g,n){B=B(null,{declaredClass:"esri.symbol.Font",constructor:function(m,f,h,k,e){m?p.isObject(m)?p.mixin(this,m):(this.size=m,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==f&&(this.style=f),void 0!==h&&(this.variant=h),void 0!==k&&(this.weight=k),void 0!==e&&
(this.family=e)):p.mixin(this,d.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&p.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=d.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(m){this.size=this._convert2PxSize(m);return this},_convert2PxSize:function(m){var f;parseFloat(m)==m?f=m:p.isString(m)&&(-1<m.indexOf("pt")?f=d.pt2px(parseFloat(m)):-1<m.indexOf("px")?f=parseFloat(m):-1<m.indexOf("em")?f=
d.pt2px(12*parseFloat(m)):-1<m.indexOf("%")&&(f=d.pt2px(.12*parseFloat(m))));return f},setStyle:function(m){this.style=m;return this},setVariant:function(m){this.variant=m;return this},setWeight:function(m){this.weight=m;return this},setFamily:function(m){this.family=m;return this},setDecoration:function(m){this.decoration=m;return this},toJson:function(){return n.fixJson({size:d.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});p.mixin(B,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});p.setObject("symbol.Font",B,g);return B})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(B,p){function a(f,h){if(f===h)return!0;if(null==f||null==h||f.length!==h.length)return!1;for(var k=0;k<f.length;k++){var e=f[k],r=h[k];if(e.length!==
r.length)return!1;for(var q=0;q<e.length;q++)if(e[q]!==r[q])return!1}return!0}function d(f,h){if(f===h)return!0;if(null==f||null==h||f.length!==h.length)return!1;for(var k=0;k<f.length;k++)if(!a(f[k],h[k]))return!1;return!0}function g(f,h){return f===h||f&&h&&f.equals(h)}function n(f,h){if(f===h)return!0;if(!f||!h||f.type!==h.type)return!1;switch(f.type){case "point":return g(f.spatialReference,h.spatialReference)?f.x===h.x&&f.y===h.y&&f.z===h.z&&f.m===h.m:!1;case "extent":return f.hasZ===h.hasZ&&
f.hasM===h.hasM&&g(f.spatialReference,h.spatialReference)?f.xmin===h.xmin&&f.ymin===h.ymin&&f.zmin===h.zmin&&f.xmax===h.xmax&&f.ymax===h.ymax&&f.zmax===h.zmax:!1;case "polyline":return f.hasZ===h.hasZ&&f.hasM===h.hasM&&g(f.spatialReference,h.spatialReference)?d(f.paths,h.paths):!1;case "polygon":return f.hasZ===h.hasZ&&f.hasM===h.hasM&&g(f.spatialReference,h.spatialReference)?d(f.rings,h.rings):!1;case "multipoint":return f.hasZ===h.hasZ&&f.hasM===h.hasM&&g(f.spatialReference,h.spatialReference)?
a(f.points,h.points):!1;case "mesh":return!1}}function m(f,h){if(f===h)return!0;if(!f||!h)return!1;for(var k in f)if(!(k in h)||f[k]!==h[k])return!1;for(k in h)if(!(k in f))return!1;return!0}Object.defineProperty(p,"__esModule",{value:!0});p.equals=function(f,h){return f===h?!0:null!=f&&null!=h&&f.objectId===h.objectId&&n(f.geometry,h.geometry)&&m(f.attributes,h.attributes)?!0:!1}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var B={};(function(p,a){a(p,!0);a(p,
!1)})(B,function(p,a){var d={};(function(){if("undefined"!=typeof Float32Array){var c=new Float32Array(1),b=new Int32Array(c.buffer);d.invsqrt=function(l){c[0]=l;b[0]=1597463007-(b[0]>>1);var t=c[0];return t*(1.5-.5*l*t*t)}}else d.invsqrt=function(l){return 1/Math.sqrt(l)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=a?Float32Array:Array);var n={create:function(c){var b=new g(3);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(c,b,l){var t=new g(3);t[0]=c;t[1]=
b;t[2]=l;return t},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];return b},set3:function(c,b,l,t){t[0]=c;t[1]=b;t[2]=l;return t},add:function(c,b,l){if(!l||c===l)return c[0]+=b[0],c[1]+=b[1],c[2]+=b[2],c;l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];return l},subtract:function(c,b,l){if(!l||c===l)return c[0]-=b[0],c[1]-=b[1],c[2]-=b[2],c;l[0]=c[0]-b[0];l[1]=c[1]-b[1];l[2]=c[2]-b[2];return l},multiply:function(c,b,l){if(!l||c===l)return c[0]*=b[0],c[1]*=b[1],c[2]*=b[2],c;l[0]=c[0]*b[0];l[1]=c[1]*
b[1];l[2]=c[2]*b[2];return l},max:function(c,b,l){l[0]=Math.max(c[0],b[0]);l[1]=Math.max(c[1],b[1]);l[2]=Math.max(c[2],b[2]);return l},min:function(c,b,l){l[0]=Math.min(c[0],b[0]);l[1]=Math.min(c[1],b[1]);l[2]=Math.min(c[2],b[2]);return l},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];return b},scale:function(c,b,l){if(!l||c===l)return c[0]*=b,c[1]*=b,c[2]*=b,c;l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;return l},normalize:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=Math.sqrt(l*l+
t*t+w*w);if(!C)return b[0]=0,b[1]=0,b[2]=0,b;if(1===C)return b[0]=l,b[1]=t,b[2]=w,b;C=1/C;b[0]=l*C;b[1]=t*C;b[2]=w*C;return b},cross:function(c,b,l){l||(l=c);var t=c[0],w=c[1];c=c[2];var C=b[0],D=b[1];b=b[2];l[0]=w*b-c*D;l[1]=c*C-t*b;l[2]=t*D-w*C;return l},length:function(c){var b=c[0],l=c[1];c=c[2];return Math.sqrt(b*b+l*l+c*c)},length2:function(c){var b=c[0],l=c[1];c=c[2];return b*b+l*l+c*c},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]},direction:function(c,b,l){l||(l=c);var t=c[0]-b[0],
w=c[1]-b[1];c=c[2]-b[2];b=Math.sqrt(t*t+w*w+c*c);if(!b)return l[0]=0,l[1]=0,l[2]=0,l;b=1/b;l[0]=t*b;l[1]=w*b;l[2]=c*b;return l},lerp:function(c,b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);t[2]=c[2]+l*(b[2]-c[2]);return t},dist:function(c,b){var l=b[0]-c[0],t=b[1]-c[1],w=b[2]-c[2];return Math.sqrt(l*l+t*t+w*w)},dist2:function(c,b){var l=b[0]-c[0],t=b[1]-c[1],w=b[2]-c[2];return l*l+t*t+w*w}},m=null,f=new g(4);n.unproject=function(c,b,l,t,w){w||(w=c);m||(m=v.create());var C=m;f[0]=
2*(c[0]-t[0])/t[2]-1;f[1]=2*(c[1]-t[1])/t[3]-1;f[2]=2*c[2]-1;f[3]=1;v.multiply(l,b,C);if(!v.inverse(C))return null;v.multiplyVec4(C,f);if(0===f[3])return null;w[0]=f[0]/f[3];w[1]=f[1]/f[3];w[2]=f[2]/f[3];return w};var h=n.createFrom(1,0,0),k=n.createFrom(0,1,0),e=n.createFrom(0,0,1);n.rotationTo=function(c,b,l){l||(l=x.create());var t=n.dot(c,b),w=n.create();if(1<=t)x.set(z,l);else if(-.999999>t)n.cross(h,c,w),1E-6>w.length&&n.cross(k,c,w),1E-6>w.length&&n.cross(e,c,w),n.normalize(w),x.fromAxisAngle(w,
Math.PI,l);else{t=Math.sqrt(2*(1+t));var C=1/t;n.cross(c,b,w);l[0]=w[0]*C;l[1]=w[1]*C;l[2]=w[2]*C;l[3]=.5*t;x.normalize(l)}1<l[3]?l[3]=1:-1>l[3]&&(l[3]=-1);return l};var r=n.create(),q=n.create();n.project=function(c,b,l,t){t||(t=c);n.direction(b,l,r);n.subtract(c,b,q);c=n.dot(r,q);n.scale(r,c,t);n.add(t,b,t)};n.str=function(c){return"["+c[0]+", "+c[1]+", "+c[2]+"]"};var u={create:function(c){var b=new g(9);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8]):
b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(c,b,l,t,w,C,D,E,F){var G=new g(9);G[0]=c;G[1]=b;G[2]=l;G[3]=t;G[4]=w;G[5]=C;G[6]=D;G[7]=E;G[8]=F;return G},determinant:function(c){var b=c[3],l=c[4],t=c[5],w=c[6],C=c[7],D=c[8];return c[0]*(D*l-t*C)+c[1]*(-D*b+t*w)+c[2]*(C*b-l*w)},inverse:function(c,b){var l=c[0],t=c[1],w=c[2],C=c[3],D=c[4],E=c[5],F=c[6],G=c[7],H=c[8],M=H*D-E*G,X=-H*C+E*F,W=G*C-D*F,T=l*M+t*X+w*W;if(!T)return null;T=1/T;b||(b=u.create());b[0]=M*T;b[1]=(-H*
t+w*G)*T;b[2]=(E*t-w*D)*T;b[3]=X*T;b[4]=(H*l-w*F)*T;b[5]=(-E*l+w*C)*T;b[6]=W*T;b[7]=(-G*l+t*F)*T;b[8]=(D*l-t*C)*T;return b},multiply:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2],D=c[3],E=c[4],F=c[5],G=c[6],H=c[7];c=c[8];var M=b[0],X=b[1],W=b[2],T=b[3],K=b[4],O=b[5],N=b[6],Y=b[7];b=b[8];l[0]=M*t+X*D+W*G;l[1]=M*w+X*E+W*H;l[2]=M*C+X*F+W*c;l[3]=T*t+K*D+O*G;l[4]=T*w+K*E+O*H;l[5]=T*C+K*F+O*c;l[6]=N*t+Y*D+b*G;l[7]=N*w+Y*E+b*H;l[8]=N*C+Y*F+b*c;return l},add:function(c,b,l){l||(l=c);l[0]=c[0]+b[0];l[1]=
c[1]+b[1];l[2]=c[2]+b[2];l[3]=c[3]+b[3];l[4]=c[4]+b[4];l[5]=c[5]+b[5];l[6]=c[6]+b[6];l[7]=c[7]+b[7];l[8]=c[8]+b[8];return l},subtract:function(c,b,l){l||(l=c);l[0]=c[0]-b[0];l[1]=c[1]-b[1];l[2]=c[2]-b[2];l[3]=c[3]-b[3];l[4]=c[4]-b[4];l[5]=c[5]-b[5];l[6]=c[6]-b[6];l[7]=c[7]-b[7];l[8]=c[8]-b[8];return l},multiplyVec2:function(c,b,l){l||(l=b);var t=b[0];b=b[1];l[0]=t*c[0]+b*c[3]+c[6];l[1]=t*c[1]+b*c[4]+c[7];return l},multiplyVec3:function(c,b,l){l||(l=b);var t=b[0],w=b[1];b=b[2];l[0]=t*c[0]+w*c[3]+b*
c[6];l[1]=t*c[1]+w*c[4]+b*c[7];l[2]=t*c[2]+w*c[5]+b*c[8];return l},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];return b},identity:function(c){c||(c=u.create());c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1],t=c[2],w=c[5];c[1]=c[3];c[2]=c[6];c[3]=l;c[5]=c[7];c[6]=t;c[7]=w;return c}b[0]=c[0];b[1]=c[3];b[2]=c[6];b[3]=c[1];b[4]=c[4];b[5]=c[7];b[6]=c[2];b[7]=c[5];b[8]=
c[8];return b},toMat4:function(c,b){b||(b=v.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=c[8];b[9]=c[7];b[8]=c[6];b[7]=0;b[6]=c[5];b[5]=c[4];b[4]=c[3];b[3]=0;b[2]=c[2];b[1]=c[1];b[0]=c[0];return b},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+"]"}},v={create:function(c){var b=new g(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],
b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):c&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);return b},createFrom:function(c,b,l,t,w,C,D,E,F,G,H,M,X,W,T,K){var O=new g(16);O[0]=c;O[1]=b;O[2]=l;O[3]=t;O[4]=w;O[5]=C;O[6]=D;O[7]=E;O[8]=F;O[9]=G;
O[10]=H;O[11]=M;O[12]=X;O[13]=W;O[14]=T;O[15]=K;return O},createFromMatrixRowMajor:function(c){var b=new g(16);b[0]=c[0];b[4]=c[1];b[8]=c[2];b[12]=c[3];b[1]=c[4];b[5]=c[5];b[9]=c[6];b[13]=c[7];b[2]=c[8];b[6]=c[9];b[10]=c[10];b[14]=c[11];b[3]=c[12];b[7]=c[13];b[11]=c[14];b[15]=c[15];return b},createFromMatrix:function(c){var b=new g(16);b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=
c[15];return b},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b},setRowMajor:function(c,b){b[0]=c[0];b[4]=c[1];b[8]=c[2];b[12]=c[3];b[1]=c[4];b[5]=c[5];b[9]=c[6];b[13]=c[7];b[2]=c[8];b[6]=c[9];b[10]=c[10];b[14]=c[11];b[3]=c[12];b[7]=c[13];b[11]=c[14];b[15]=c[15];return b},identity:function(c){c||(c=v.create());c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1],t=c[2],w=c[3],C=c[6],D=c[7],E=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=l;c[6]=c[9];c[7]=c[13];c[8]=t;c[9]=C;c[11]=c[14];c[12]=w;c[13]=D;c[14]=E;return c}b[0]=c[0];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=c[1];b[5]=c[5];b[6]=c[9];b[7]=c[13];b[8]=c[2];b[9]=c[6];b[10]=c[10];b[11]=c[14];b[12]=c[3];b[13]=c[7];b[14]=c[11];b[15]=c[15];return b},determinant:function(c){var b=
c[0],l=c[1],t=c[2],w=c[3],C=c[4],D=c[5],E=c[6],F=c[7],G=c[8],H=c[9],M=c[10],X=c[11],W=c[12],T=c[13],K=c[14];c=c[15];return W*H*E*w-G*T*E*w-W*D*M*w+C*T*M*w+G*D*K*w-C*H*K*w-W*H*t*F+G*T*t*F+W*l*M*F-b*T*M*F-G*l*K*F+b*H*K*F+W*D*t*X-C*T*t*X-W*l*E*X+b*T*E*X+C*l*K*X-b*D*K*X-G*D*t*c+C*H*t*c+G*l*E*c-b*H*E*c-C*l*M*c+b*D*M*c},inverse:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=c[4],E=c[5],F=c[6],G=c[7],H=c[8],M=c[9],X=c[10],W=c[11],T=c[12],K=c[13],O=c[14],N=c[15],Y=l*E-t*D,P=l*F-w*D,L=l*G-C*D,Q=
t*F-w*E,ca=t*G-C*E,ha=w*G-C*F,ja=H*K-M*T,ma=H*O-X*T,R=H*N-W*T,fa=M*O-X*K,ka=M*N-W*K,qa=X*N-W*O,na=Y*qa-P*ka+L*fa+Q*R-ca*ma+ha*ja;if(!na)return null;na=1/na;b[0]=(E*qa-F*ka+G*fa)*na;b[1]=(-t*qa+w*ka-C*fa)*na;b[2]=(K*ha-O*ca+N*Q)*na;b[3]=(-M*ha+X*ca-W*Q)*na;b[4]=(-D*qa+F*R-G*ma)*na;b[5]=(l*qa-w*R+C*ma)*na;b[6]=(-T*ha+O*L-N*P)*na;b[7]=(H*ha-X*L+W*P)*na;b[8]=(D*ka-E*R+G*ja)*na;b[9]=(-l*ka+t*R-C*ja)*na;b[10]=(T*ca-K*L+N*Y)*na;b[11]=(-H*ca+M*L-W*Y)*na;b[12]=(-D*fa+E*ma-F*ja)*na;b[13]=(l*fa-t*ma+w*ja)*na;
b[14]=(-T*Q+K*P-O*Y)*na;b[15]=(H*Q-M*P+X*Y)*na;return b},toRotationMat:function(c,b){b||(b=v.create());b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(c,b){b||(b=u.create());b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[4];b[4]=c[5];b[5]=c[6];b[6]=c[8];b[7]=c[9];b[8]=c[10];return b},toInverseMat3:function(c,b){var l=c[0],t=c[1],w=c[2],C=c[4],D=c[5],E=c[6],F=c[8],G=c[9],H=c[10],
M=H*D-E*G,X=-H*C+E*F,W=G*C-D*F,T=l*M+t*X+w*W;if(!T)return null;T=1/T;b||(b=u.create());b[0]=M*T;b[1]=(-H*t+w*G)*T;b[2]=(E*t-w*D)*T;b[3]=X*T;b[4]=(H*l-w*F)*T;b[5]=(-E*l+w*C)*T;b[6]=W*T;b[7]=(-G*l+t*F)*T;b[8]=(D*l-t*C)*T;return b},multiply:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2],D=c[3],E=c[4],F=c[5],G=c[6],H=c[7],M=c[8],X=c[9],W=c[10],T=c[11],K=c[12],O=c[13],N=c[14];c=c[15];var Y=b[0],P=b[1],L=b[2],Q=b[3],ca=b[4],ha=b[5],ja=b[6],ma=b[7],R=b[8],fa=b[9],ka=b[10],qa=b[11],na=b[12],ia=b[13],ea=
b[14];b=b[15];l[0]=Y*t+P*E+L*M+Q*K;l[1]=Y*w+P*F+L*X+Q*O;l[2]=Y*C+P*G+L*W+Q*N;l[3]=Y*D+P*H+L*T+Q*c;l[4]=ca*t+ha*E+ja*M+ma*K;l[5]=ca*w+ha*F+ja*X+ma*O;l[6]=ca*C+ha*G+ja*W+ma*N;l[7]=ca*D+ha*H+ja*T+ma*c;l[8]=R*t+fa*E+ka*M+qa*K;l[9]=R*w+fa*F+ka*X+qa*O;l[10]=R*C+fa*G+ka*W+qa*N;l[11]=R*D+fa*H+ka*T+qa*c;l[12]=na*t+ia*E+ea*M+b*K;l[13]=na*w+ia*F+ea*X+b*O;l[14]=na*C+ia*G+ea*W+b*N;l[15]=na*D+ia*H+ea*T+b*c;return l},multiplyVec3:function(c,b,l){l||(l=b);var t=b[0],w=b[1];b=b[2];l[0]=c[0]*t+c[4]*w+c[8]*b+c[12];
l[1]=c[1]*t+c[5]*w+c[9]*b+c[13];l[2]=c[2]*t+c[6]*w+c[10]*b+c[14];return l},multiplyVec4:function(c,b,l){l||(l=b);var t=b[0],w=b[1],C=b[2];b=b[3];l[0]=c[0]*t+c[4]*w+c[8]*C+c[12]*b;l[1]=c[1]*t+c[5]*w+c[9]*C+c[13]*b;l[2]=c[2]*t+c[6]*w+c[10]*C+c[14]*b;l[3]=c[3]*t+c[7]*w+c[11]*C+c[15]*b;return l},translate:function(c,b,l){var t=b[0],w=b[1];b=b[2];if(!l||c===l)return c[12]=c[0]*t+c[4]*w+c[8]*b+c[12],c[13]=c[1]*t+c[5]*w+c[9]*b+c[13],c[14]=c[2]*t+c[6]*w+c[10]*b+c[14],c[15]=c[3]*t+c[7]*w+c[11]*b+c[15],c;var C=
c[0];var D=c[1];var E=c[2];var F=c[3];var G=c[4];var H=c[5];var M=c[6];var X=c[7];var W=c[8];var T=c[9];var K=c[10];var O=c[11];l[0]=C;l[1]=D;l[2]=E;l[3]=F;l[4]=G;l[5]=H;l[6]=M;l[7]=X;l[8]=W;l[9]=T;l[10]=K;l[11]=O;l[12]=C*t+G*w+W*b+c[12];l[13]=D*t+H*w+T*b+c[13];l[14]=E*t+M*w+K*b+c[14];l[15]=F*t+X*w+O*b+c[15];return l},scale:function(c,b,l){var t=b[0],w=b[1];b=b[2];if(!l||c===l)return c[0]*=t,c[1]*=t,c[2]*=t,c[3]*=t,c[4]*=w,c[5]*=w,c[6]*=w,c[7]*=w,c[8]*=b,c[9]*=b,c[10]*=b,c[11]*=b,c;l[0]=c[0]*t;l[1]=
c[1]*t;l[2]=c[2]*t;l[3]=c[3]*t;l[4]=c[4]*w;l[5]=c[5]*w;l[6]=c[6]*w;l[7]=c[7]*w;l[8]=c[8]*b;l[9]=c[9]*b;l[10]=c[10]*b;l[11]=c[11]*b;l[12]=c[12];l[13]=c[13];l[14]=c[14];l[15]=c[15];return l},maxScale:function(c){return Math.max(Math.max(Math.sqrt(c[0]*c[0]+c[4]*c[4]+c[8]*c[8]),Math.sqrt(c[1]*c[1]+c[5]*c[5]+c[9]*c[9])),Math.sqrt(c[2]*c[2]+c[6]*c[6]+c[10]*c[10]))},rotate:function(c,b,l,t){var w=l[0],C=l[1];l=l[2];var D=Math.sqrt(w*w+C*C+l*l);if(!D)return null;1!==D&&(D=1/D,w*=D,C*=D,l*=D);var E=Math.sin(b);
var F=Math.cos(b);var G=1-F;b=c[0];D=c[1];var H=c[2];var M=c[3];var X=c[4];var W=c[5];var T=c[6];var K=c[7];var O=c[8];var N=c[9];var Y=c[10];var P=c[11];var L=w*w*G+F;var Q=C*w*G+l*E;var ca=l*w*G-C*E;var ha=w*C*G-l*E;var ja=C*C*G+F;var ma=l*C*G+w*E;var R=w*l*G+C*E;w=C*l*G-w*E;C=l*l*G+F;t?c!==t&&(t[12]=c[12],t[13]=c[13],t[14]=c[14],t[15]=c[15]):t=c;t[0]=b*L+X*Q+O*ca;t[1]=D*L+W*Q+N*ca;t[2]=H*L+T*Q+Y*ca;t[3]=M*L+K*Q+P*ca;t[4]=b*ha+X*ja+O*ma;t[5]=D*ha+W*ja+N*ma;t[6]=H*ha+T*ja+Y*ma;t[7]=M*ha+K*ja+P*ma;
t[8]=b*R+X*w+O*C;t[9]=D*R+W*w+N*C;t[10]=H*R+T*w+Y*C;t[11]=M*R+K*w+P*C;return t},rotateX:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[4],C=c[5],D=c[6],E=c[7],F=c[8],G=c[9],H=c[10],M=c[11];l?c!==l&&(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[4]=w*b+F*t;l[5]=C*b+G*t;l[6]=D*b+H*t;l[7]=E*b+M*t;l[8]=w*-t+F*b;l[9]=C*-t+G*b;l[10]=D*-t+H*b;l[11]=E*-t+M*b;return l},rotateY:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[0],C=c[1],D=c[2],
E=c[3],F=c[8],G=c[9],H=c[10],M=c[11];l?c!==l&&(l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[0]=w*b+F*-t;l[1]=C*b+G*-t;l[2]=D*b+H*-t;l[3]=E*b+M*-t;l[8]=w*t+F*b;l[9]=C*t+G*b;l[10]=D*t+H*b;l[11]=E*t+M*b;return l},rotateZ:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[0],C=c[1],D=c[2],E=c[3],F=c[4],G=c[5],H=c[6],M=c[7];l?c!==l&&(l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[0]=w*b+F*t;l[1]=
C*b+G*t;l[2]=D*b+H*t;l[3]=E*b+M*t;l[4]=w*-t+F*b;l[5]=C*-t+G*b;l[6]=D*-t+H*b;l[7]=E*-t+M*b;return l},frustum:function(c,b,l,t,w,C,D){D||(D=v.create());var E=b-c,F=t-l,G=C-w;D[0]=2*w/E;D[1]=0;D[2]=0;D[3]=0;D[4]=0;D[5]=2*w/F;D[6]=0;D[7]=0;D[8]=(b+c)/E;D[9]=(t+l)/F;D[10]=-(C+w)/G;D[11]=-1;D[12]=0;D[13]=0;D[14]=-(C*w*2)/G;D[15]=0;return D},perspective:function(c,b,l,t,w){c=l*Math.tan(c*Math.PI/360);b*=c;return v.frustum(-b,b,-c,c,l,t,w)},ortho:function(c,b,l,t,w,C,D){D||(D=v.create());var E=b-c,F=t-l,
G=C-w;D[0]=2/E;D[1]=0;D[2]=0;D[3]=0;D[4]=0;D[5]=2/F;D[6]=0;D[7]=0;D[8]=0;D[9]=0;D[10]=-2/G;D[11]=0;D[12]=-(c+b)/E;D[13]=-(t+l)/F;D[14]=-(C+w)/G;D[15]=1;return D},lookAt:function(c,b,l,t){t||(t=v.create());var w=c[0],C=c[1];c=c[2];var D=l[0];var E=l[1];var F=l[2];var G=b[0];l=b[1];var H=b[2];if(w===G&&C===l&&c===H)return v.identity(t);b=w-G;l=C-l;G=c-H;var M=1/Math.sqrt(b*b+l*l+G*G);b*=M;l*=M;G*=M;H=E*G-F*l;F=F*b-D*G;D=D*l-E*b;(M=Math.sqrt(H*H+F*F+D*D))?(M=1/M,H*=M,F*=M,D*=M):D=F=H=0;E=l*D-G*F;var X=
G*H-b*D;var W=b*F-l*H;(M=Math.sqrt(E*E+X*X+W*W))?(M=1/M,E*=M,X*=M,W*=M):W=X=E=0;t[0]=H;t[1]=E;t[2]=b;t[3]=0;t[4]=F;t[5]=X;t[6]=l;t[7]=0;t[8]=D;t[9]=W;t[10]=G;t[11]=0;t[12]=-(H*w+F*C+D*c);t[13]=-(E*w+X*C+W*c);t[14]=-(b*w+l*C+G*c);t[15]=1;return t},fromRotationTranslation:function(c,b,l){l||(l=v.create());var t=c[0],w=c[1],C=c[2],D=c[3],E=t+t,F=w+w,G=C+C;c=t*E;var H=t*F;t*=G;var M=w*F;w*=G;C*=G;E*=D;F*=D;D*=G;l[0]=1-(M+C);l[1]=H+D;l[2]=t-F;l[3]=0;l[4]=H-D;l[5]=1-(c+C);l[6]=w+E;l[7]=0;l[8]=t+F;l[9]=
w-E;l[10]=1-(c+M);l[11]=0;l[12]=b[0];l[13]=b[1];l[14]=b[2];l[15]=1;return l},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+"]"}},x={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(c,b,l,t){var w=new g(4);w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},set:function(c,b){b[0]=c[0];b[1]=c[1];
b[2]=c[2];b[3]=c[3];return b},identity:function(c){c||(c=x.create());c[0]=0;c[1]=0;c[2]=0;c[3]=1;return c}},z=x.identity();x.calculateW=function(c,b){var l=c[0],t=c[1],w=c[2];if(!b||c===b)return c[3]=-Math.sqrt(Math.abs(1-l*l-t*t-w*w)),c;b[0]=l;b[1]=t;b[2]=w;b[3]=-Math.sqrt(Math.abs(1-l*l-t*t-w*w));return b};x.dot=function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3]};x.inverse=function(c,b){var l=c[0],t=c[1],w=c[2],C=c[3];l=(l=l*l+t*t+w*w+C*C)?1/l:0;if(!b||c===b)return c[0]*=-l,c[1]*=-l,c[2]*=
-l,c[3]*=l,c;b[0]=-c[0]*l;b[1]=-c[1]*l;b[2]=-c[2]*l;b[3]=c[3]*l;return b};x.conjugate=function(c,b){if(!b||c===b)return c[0]*=-1,c[1]*=-1,c[2]*=-1,c;b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];b[3]=c[3];return b};x.length=function(c){var b=c[0],l=c[1],t=c[2];c=c[3];return Math.sqrt(b*b+l*l+t*t+c*c)};x.normalize=function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=Math.sqrt(l*l+t*t+w*w+C*C);if(0===D)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;D=1/D;b[0]=l*D;b[1]=t*D;b[2]=w*D;b[3]=C*D;return b};x.add=function(c,
b,l){if(!l||c===l)return c[0]+=b[0],c[1]+=b[1],c[2]+=b[2],c[3]+=b[3],c;l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];l[3]=c[3]+b[3];return l};x.multiply=function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];var D=b[0],E=b[1],F=b[2];b=b[3];l[0]=t*b+c*D+w*F-C*E;l[1]=w*b+c*E+C*D-t*F;l[2]=C*b+c*F+t*E-w*D;l[3]=c*b-t*D-w*E-C*F;return l};x.multiplyVec3=function(c,b,l){l||(l=b);var t=b[0],w=b[1],C=b[2];b=c[0];var D=c[1],E=c[2];c=c[3];var F=c*t+D*C-E*w,G=c*w+E*t-b*C,H=c*C+b*w-D*t;t=-b*t-D*w-E*C;l[0]=F*c+
t*-b+G*-E-H*-D;l[1]=G*c+t*-D+H*-b-F*-E;l[2]=H*c+t*-E+F*-D-G*-b;return l};x.scale=function(c,b,l){if(!l||c===l)return c[0]*=b,c[1]*=b,c[2]*=b,c[3]*=b,c;l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;l[3]=c[3]*b;return l};x.toMat3=function(c,b){b||(b=u.create());var l=c[0],t=c[1],w=c[2],C=c[3],D=l+l,E=t+t,F=w+w,G=l*D,H=l*E;l*=F;var M=t*E;t*=F;w*=F;D*=C;E*=C;C*=F;b[0]=1-(M+w);b[1]=H+C;b[2]=l-E;b[3]=H-C;b[4]=1-(G+w);b[5]=t+D;b[6]=l+E;b[7]=t-D;b[8]=1-(G+M);return b};x.toMat4=function(c,b){b||(b=v.create());var l=
c[0],t=c[1],w=c[2],C=c[3],D=l+l,E=t+t,F=w+w,G=l*D,H=l*E;l*=F;var M=t*E;t*=F;w*=F;D*=C;E*=C;C*=F;b[0]=1-(M+w);b[1]=H+C;b[2]=l-E;b[3]=0;b[4]=H-C;b[5]=1-(G+w);b[6]=t+D;b[7]=0;b[8]=l+E;b[9]=t-D;b[10]=1-(G+M);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};x.slerp=function(c,b,l,t){t||(t=c);var w=c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3];if(1<=Math.abs(w))return t!==c&&(t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=c[3]),t;var C=Math.acos(w);var D=Math.sqrt(1-w*w);if(.001>Math.abs(D))return t[0]=.5*c[0]+.5*b[0],
t[1]=.5*c[1]+.5*b[1],t[2]=.5*c[2]+.5*b[2],t[3]=.5*c[3]+.5*b[3],t;w=Math.sin((1-l)*C)/D;l=Math.sin(l*C)/D;t[0]=c[0]*w+b[0]*l;t[1]=c[1]*w+b[1]*l;t[2]=c[2]*w+b[2]*l;t[3]=c[3]*w+b[3]*l;return t};x.fromRotationMatrix=function(c,b){b||(b=x.create());var l=c[0]+c[4]+c[8];if(0<l){var t=Math.sqrt(l+1);b[3]=.5*t;t=.5/t;b[0]=(c[7]-c[5])*t;b[1]=(c[2]-c[6])*t;b[2]=(c[3]-c[1])*t}else{t=x.fromRotationMatrix.s_iNext=x.fromRotationMatrix.s_iNext||[1,2,0];l=0;c[4]>c[0]&&(l=1);c[8]>c[3*l+l]&&(l=2);var w=t[l],C=t[w];
t=Math.sqrt(c[3*l+l]-c[3*w+w]-c[3*C+C]+1);b[l]=.5*t;t=.5/t;b[3]=(c[3*C+w]-c[3*w+C])*t;b[w]=(c[3*w+l]+c[3*l+w])*t;b[C]=(c[3*C+l]+c[3*l+C])*t}return b};u.toQuat4=x.fromRotationMatrix;(function(){var c=u.create();x.fromAxes=function(b,l,t,w){c[0]=l[0];c[3]=l[1];c[6]=l[2];c[1]=t[0];c[4]=t[1];c[7]=t[2];c[2]=b[0];c[5]=b[1];c[8]=b[2];return x.fromRotationMatrix(c,w)}})();x.identity=function(c){c||(c=x.create());c[0]=0;c[1]=0;c[2]=0;c[3]=1;return c};x.fromAngleAxis=function(c,b,l){l||(l=x.create());c*=.5;
var t=Math.sin(c);l[3]=Math.cos(c);l[0]=t*b[0];l[1]=t*b[1];l[2]=t*b[2];return l};x.toAngleAxis=function(c,b){b||(b=c);var l=c[0]*c[0]+c[1]*c[1]+c[2]*c[2];0<l?(b[3]=2*Math.acos(c[3]),l=d.invsqrt(l),b[0]=c[0]*l,b[1]=c[1]*l,b[2]=c[2]*l):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};x.str=function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"};var A={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(c,b,l,t){var w=new g(4);
w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];return b},identity:function(c){c||(c=A.create());c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1];c[1]=c[2];c[2]=l;return c}b[0]=c[0];b[1]=c[2];b[2]=c[1];b[3]=c[3];return b},determinant:function(c){return c[0]*c[3]-c[2]*c[1]},inverse:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=l*C-w*t;if(!D)return null;D=1/D;b[0]=C*D;b[1]=-t*D;b[2]=-w*D;b[3]=l*D;return b},
multiply:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];l[0]=t*b[0]+w*b[2];l[1]=t*b[1]+w*b[3];l[2]=C*b[0]+c*b[2];l[3]=C*b[1]+c*b[3];return l},rotate:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];var D=Math.sin(b);b=Math.cos(b);l[0]=t*b+w*D;l[1]=t*-D+w*b;l[2]=C*b+c*D;l[3]=C*-D+c*b;return l},multiplyVec2:function(c,b,l){l||(l=b);var t=b[0];b=b[1];l[0]=t*c[0]+b*c[1];l[1]=t*c[2]+b*c[3];return l},scale:function(c,b,l){l||(l=c);var t=c[1],w=c[2],C=c[3],D=b[0];b=b[1];l[0]=c[0]*D;l[1]=
t*b;l[2]=w*D;l[3]=C*b;return l},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"}},y=a?"":"d";p["glMath"+y]=d;p["vec2"+y]={create:function(c){var b=new g(2);c?(b[0]=c[0],b[1]=c[1]):(b[0]=0,b[1]=0);return b},createFrom:function(c,b){var l=new g(2);l[0]=c;l[1]=b;return l},add:function(c,b,l){l||(l=b);l[0]=c[0]+b[0];l[1]=c[1]+b[1];return l},subtract:function(c,b,l){l||(l=b);l[0]=c[0]-b[0];l[1]=c[1]-b[1];return l},multiply:function(c,b,l){l||(l=b);l[0]=c[0]*b[0];l[1]=c[1]*b[1];return l},
divide:function(c,b,l){l||(l=b);l[0]=c[0]/b[0];l[1]=c[1]/b[1];return l},scale:function(c,b,l){l||(l=c);l[0]=c[0]*b;l[1]=c[1]*b;return l},dist:function(c,b){var l=b[0]-c[0],t=b[1]-c[1];return Math.sqrt(l*l+t*t)},dist2:function(c,b){var l=b[0]-c[0],t=b[1]-c[1];return l*l+t*t},set:function(c,b){b[0]=c[0];b[1]=c[1];return b},set2:function(c,b,l){l[0]=c;l[1]=b;return l},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];return b},normalize:function(c,b){b||(b=c);var l=c[0]*c[0]+c[1]*c[1];0<l?(l=Math.sqrt(l),
b[0]=c[0]/l,b[1]=c[1]/l):b[0]=b[1]=0;return b},cross:function(c,b,l){c=c[0]*b[1]-c[1]*b[0];if(!l)return c;l[0]=l[1]=0;l[2]=c;return l},length:function(c){var b=c[0];c=c[1];return Math.sqrt(b*b+c*c)},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]},direction:function(c,b,l){l||(l=c);var t=c[0]-b[0];c=c[1]-b[1];b=t*t+c*c;if(!b)return l[0]=0,l[1]=0,l[2]=0,l;b=1/Math.sqrt(b);l[0]=t*b;l[1]=c*b;return l},lerp:function(c,b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);return t},str:function(c){return"["+
c[0]+", "+c[1]+"]"}};p["vec3"+y]=n;p["vec4"+y]={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(c,b,l,t){var w=new g(4);w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},add:function(c,b,l){l||(l=b);l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];l[3]=c[3]+b[3];return l},subtract:function(c,b,l){l||(l=b);l[0]=c[0]-b[0];l[1]=c[1]-b[1];l[2]=c[2]-b[2];l[3]=c[3]-b[3];return l},multiply:function(c,b,l){l||(l=b);l[0]=c[0]*b[0];l[1]=
c[1]*b[1];l[2]=c[2]*b[2];l[3]=c[3]*b[3];return l},divide:function(c,b,l){l||(l=b);l[0]=c[0]/b[0];l[1]=c[1]/b[1];l[2]=c[2]/b[2];l[3]=c[3]/b[3];return l},scale:function(c,b,l){l||(l=c);l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;l[3]=c[3]*b;return l},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3]},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];return b},set4:function(c,b,l,t,w){w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];
b[3]=-c[3];return b},lerp:function(c,b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);t[2]=c[2]+l*(b[2]-c[2]);t[3]=c[3]+l*(b[3]-c[3]);return t},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"}};p["mat2"+y]=A;p["mat3"+y]=u;p["mat4"+y]=v;p["quat4"+y]=x});return B})},"esri/layers/vectorTiles/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(B,p,a){function d(e){return Math.asin(1<e?1:-1>e?-1:e)}function g(e){return Math.acos(1<
e?1:-1>e?-1:e)}function n(e,r,q){return e<r?r:e>q?q:e}function m(e){for(var r in e){var q=e[r];q instanceof Function&&(e[r]=q.bind(e))}return e}Object.defineProperty(p,"__esModule",{value:!0});p.deg2rad=function(e){return e*Math.PI/180};p.rad2deg=function(e){return 180*e/Math.PI};p.asin=d;p.acos=g;p.sign=Math.sign||function(e){return+(0<e)-+(0>e)||+e};p.log2=Math.log2||function(e){return Math.log(e)/Math.LN2};p.fovx2fovy=function(e,r,q){return 2*Math.atan(q*Math.tan(.5*e)/r)};p.fovy2fovx=function(e,
r,q){return 2*Math.atan(r*Math.tan(.5*e)/q)};p.makeOrthonormal=function(e,r,q){q=q||e;var u=a.vec3d.dot(e,r);a.vec3d.set3(e[0]-u*r[0],e[1]-u*r[1],e[2]-u*r[2],q);a.vec3d.normalize(q)};p.tangentFrame=function(e,r,q){Math.abs(e[0])>Math.abs(e[1])?a.vec3d.set3(0,1,0,r):a.vec3d.set3(1,0,0,r);a.vec3d.cross(e,r,q);a.vec3d.normalize(r);a.vec3d.cross(q,e,r);a.vec3d.normalize(q)};p.cartesianToSpherical=function(e,r){var q=a.vec3d.length(e),u=d(e[2]/q);a.vec3d.set3(q,u,Math.atan2(e[1]/q,e[0]/q),r)};p.sphericalToCartesian=
function(e,r){var q=e[0],u=e[1],v=e[2],x=Math.cos(u);a.vec3d.set3(q*x*Math.cos(v),q*x*Math.sin(v),q*Math.sin(u),r)};p.lerp=function(e,r,q){return e+(r-e)*q};p.bilerp=function(e,r,q,u,v,x){e+=(r-e)*v;return e+(q+(u-q)*v-e)*x};p.slerp=function(e,r,q,u){void 0===u&&(u=e);var v=a.vec3d.length(e),x=a.vec3d.length(r),z=a.vec3d.dot(e,r)/(v*x);if(.9999999999999999>z){z=Math.acos(z);var A=((1-q)*v+q*x)/Math.sin(z);x=A/x*Math.sin(q*z);a.vec3d.scale(e,A/v*Math.sin((1-q)*z),h);a.vec3d.scale(r,x,k);return a.vec3d.add(h,
k,u)}return a.vec3d.lerp(e,r,q,u)};p.angle=function(e,r,q){e=a.vec3d.normalize(e,h);r=a.vec3d.normalize(r,k);var u=g(a.vec3d.dot(e,r));return q&&(e=a.vec3d.cross(e,r,f),0>a.vec3d.dot(e,q))?-u:u};p.clamp=n;p.isFinite=Number.isFinite||function(e){return"number"===typeof e&&window.isFinite(e)};p.isNaN=Number.isNaN||function(e){return e!==e};p.makePiecewiseLinearFunction=function(e){var r=e.length;return function(q){var u=0;if(q<=e[0][0])return e[0][1];if(q>=e[r-1][0])return e[r-1][1];for(;q>e[u][0];)u++;
var v=e[u][0];q=(v-q)/(v-e[u-1][0]);return q*e[u-1][1]+(1-q)*e[u][1]}};p.vectorEquals=function(e,r){if(null==e||null==r)return e!==r;if(e.length!==r.length)return!1;for(var q=0;q<e.length;q++)if(e[q]!==r[q])return!1;return!0};p.floatEqualRelative=function(e,r,q){void 0===q&&(q=1E-6);if(p.isNaN(e)||p.isNaN(r))return!1;if(e===r)return!0;var u=Math.abs(e-r),v=Math.abs(e),x=Math.abs(r);if(0===e||0===r||1E-12>v&&1E-12>x){if(u>.01*q)return!1}else if(u/(v+x)>q)return!1;return!0};p.floatEqualAbsolute=function(e,
r,q){void 0===q&&(q=1E-6);return p.isNaN(e)||p.isNaN(r)?!1:(e>r?e-r:r-e)<=q};B=function(){function e(r,q){this.min=r;this.max=q;this.range=q-r}e.prototype.ndiff=function(r,q){void 0===q&&(q=0);return Math.ceil((r-q)/this.range)*this.range+q};e.prototype._normalize=function(r,q,u,v){void 0===v&&(v=0);u-=v;u<r?u+=this.ndiff(r-u):u>q&&(u-=this.ndiff(u-q));return u+v};e.prototype.normalize=function(r,q){return this._normalize(this.min,this.max,r,q)};e.prototype.clamp=function(r,q){void 0===q&&(q=0);return n(r-
q,this.min,this.max)+q};e.prototype.monotonic=function(r,q,u){return r<q?q:q+this.ndiff(r-q,u)};e.prototype.minimalMonotonic=function(r,q,u){return this._normalize(r,r+this.range,q,u)};e.prototype.center=function(r,q,u){q=this.monotonic(r,q,u);return this.normalize((r+q)/2,u)};e.prototype.diff=function(r,q,u){return this.monotonic(r,q,u)-r};e.prototype.contains=function(r,q,u){q=this.minimalMonotonic(r,q);u=this.minimalMonotonic(r,u);return u>r&&u<q};return e}();p.Cyclical=B;p.cyclical2PI=m(new B(0,
2*Math.PI));p.cyclicalPI=m(new B(-Math.PI,Math.PI));p.cyclicalDeg=m(new B(0,360));var f=a.vec3d.create(),h=a.vec3d.create(),k=a.vec3d.create()})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});var g=function(){function n(m,f){this.data=m;this.stride=f;this.vertexCount=0}n.prototype.transfer=function(m,f){var h=this.data.buffer();m.vertexCount=this.vertexCount;
m.data=h;m.stride=this.stride;f.push(h)};return n}();p["default"]=g;B=function(){function n(m,f,h){this.geometryType=m;this.indexVector=new d["default"](Uint32Array,h);this.namedVectors={};m=a.getStrides(m,f);for(var k in m){f=m[k];var e=new d["default"](Uint32Array,f/4*h);this.namedVectors[k]=new g(e,f)}}n.prototype.get=function(m){return this.namedVectors[m].data};n.prototype.transfer=function(m,f){var h=this.indexVector.buffer(),k={};f.push(h);for(var e in this.namedVectors){var r=this.namedVectors[e];
k[e]={};r.transfer(k[e],f)}m.geometryType=this.geometryType;m.indexBuffer=h;m.namedBuffers=k;this.destroy()};n.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return n}();p.VertexVectors=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function d(g,n){this._pos=0;var m=n?this._roundToNearest4(n):40;this._array=new ArrayBuffer(m);this._buffer=
new g(this._array);this._ctor=g}Object.defineProperty(d.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});d.prototype._roundToNearest4=function(g){g=Math.round(g);return g+(4-g%4)};d.prototype._ensureSize=function(g){if(this._pos+g>=this._buffer.length){g=this._roundToNearest4(1.5*(this._array.byteLength+4*g));g=new ArrayBuffer(g);var n=new this._ctor(g);n.set(this._buffer,0);this._array=g;this._buffer=n}};d.prototype.writeInt32=function(g){this._ensureSize(1);var n=
this._pos;this._buffer[this._pos++]=g;return n};d.prototype.writeF32=function(g){this._ensureSize(1);var n=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=g;this._pos++;return n};d.prototype.writeUint32=function(g){this._ensureSize(1);var n=this._pos;this._buffer[this._pos++]=g;return n};d.prototype.push=function(g){this._ensureSize(1);var n=this._pos;this._buffer[this._pos++]=g;return n};d.prototype.writeRegion=function(g){this._ensureSize(g.length);var n=this._pos;this._buffer.set(g,
this._pos);this._pos+=g.length;return n};d.prototype.buffer=function(){var g=this._array.slice(0,4*this._pos);this.destroy();return g};d.prototype.destroy=function(){this._buffer=this._array=null};return d}();p["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),
function(B,p,a,d,g,n,m,f,h){Object.defineProperty(p,"__esModule",{value:!0});var k=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.meshTemplateUtils");p.createMeshTemplates=function(e,r,q,u,v,x,z){void 0===z&&(z=!1);if(-1!==q.type.indexOf("3d"))return k.error("3D symbols are not supported with MapView"),e;var A=u.get(q.id);A||k.error("Couldn't find texture resources for symbol: "+q.id+"!");switch(q.type){case d.EsriSymbolTypeKebab.SIMPLE_MARKER:return e.push(m["default"].fromSimpleMarker(r,
h.getMarkerVVFlags(v),q,A.spriteMosaicItem,x)),e;case d.EsriSymbolTypeKebab.PICTURE_MARKER:return e.push(m["default"].fromPictureMarker(r,h.getMarkerVVFlags(v),q,A.spriteMosaicItem,x)),e;case d.EsriSymbolTypeKebab.SIMPLE_FILL:return e.push(g["default"].fromSimpleFill(r,h.getFillVVFlags(v),q,A.spriteMosaicItem,x,z)),q.outline&&(u=u.get(q.outline.id),e.push(n["default"].fromSimpleLine(r,h.getLineVVFlags(v,!0),q.outline,u&&u.spriteMosaicItem,x))),e;case d.EsriSymbolTypeKebab.PICTURE_FILL:return e.push(g["default"].fromPictureFill(r,
h.getFillVVFlags(v),q,A.spriteMosaicItem,x,z)),q.outline&&(u=u.get(q.outline.id),e.push(n["default"].fromSimpleLine(r,h.getLineVVFlags(v,!0),q.outline,u&&u.spriteMosaicItem,x))),e;case d.EsriSymbolTypeKebab.SIMPLE_LINE:return e.push(n["default"].fromSimpleLine(r,h.getLineVVFlags(v,!1),q,A.spriteMosaicItem,x)),e;case d.EsriSymbolTypeKebab.TEXT:return e.push(f["default"].fromText(r,h.getTextVVFlags(v),q,x,A.glyphMosaicItems)),e;default:return k.error("Unable to create mesh template for unknown symbol type: "+
q.type),e}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v){Object.defineProperty(p,"__esModule",{value:!0});var x=
g.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),z=[],A=[];B=function(y){function c(b,l,t,w,C,D,E,F){var G=y.call(this)||this;G.fillColor=w;G.tl=C;G.br=D;G.aux=E;G.isBFS=F;G.geometryType=h.WGLGeometryType.FILL;G.useLibtess=!1;w=d("esri-featurelayer-webgl");G.useLibtess="libtess"===((w||{}).tesselator||"libtess");G.useLibtess&&(G._tesselator=new u["default"]);G.vvFlags=l;G._materialStore=b;G.materialId=G._materialStore.createSpriteMaterial(t,G.geometryType,l);G._tileClipper=
new r.TileClipper(0,0,0,1,8);G._tileClipper.setExtent(512);return G}a(c,y);c.fromSimpleFill=function(b,l,t,w,C,D){void 0===D&&(D=!1);t=(C=t.color)&&"none"!==t.style&&m.premultiplyAlphaRGBA(C)||0;if(!w)return new c(b,l,null,t,0,0,0,D);var E=w.rect;C=E.x+1;var F=E.y+1,G=E.x+1+w.width,H=E.y+1+w.height;E=e.i1616to32(C,F);var M=e.i1616to32(G,H);C=e.i8888to32(e.nextHighestPowerOfTwo(G-C),e.nextHighestPowerOfTwo(H-F),0,0);return new c(b,l,w,t,E,M,C,D)};c.fromPictureFill=function(b,l,t,w,C,D){void 0===D&&
(D=!1);C=f.PICTURE_FILL_COLOR;var E=w.rect,F=E.x+1+w.width,G=E.y+1+w.height;E=e.i1616to32(E.x+1,E.y+1);F=e.i1616to32(F,G);t=e.i8888to32(e.nextHighestPowerOfTwo(t.width),e.nextHighestPowerOfTwo(t.height),0,0);return new c(b,l,w,C,E,F,t,D)};c.prototype.writeMesh=function(b,l,t,w,C,D,E){z.length=0;if(this.vvFlags&k.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==t)x.error("Unable to handle geometryType: "+t);else{var F=C.geometry;F=(C=this._isClippingRequired(F))?this._clip(F,!this.useLibtess):
F.rings;return this.useLibtess?this._writeMeshLibtess(b,l,t,w,F,C,D,E):this._writeMeshEarcut(b,l,t,w,F,C,D,E)}};c.prototype._isClippingRequired=function(b){var l=0;for(b=b.rings;l<b.length;l++){var t=b[l],w=t.length;if(!(3>w)){var C=t[0][0],D=t[0][1];if(-8>C||520<C||-8>D||520<D)return!0;for(var E=1;E<w;++E)if(C+=t[E][0],D+=t[E][1],-8>C||520<C||-8>D||520<D)return!0}}return!1};c.prototype._clip=function(b,l){this._tileClipper.reset(3);for(var t=0,w=b.rings;t<w.length;t++){var C=w[t],D=C.length;if(!(3>
D)){var E=C[0][0];var F=C[0][1];this._tileClipper.moveTo(E,F);for(var G=1;G<D;++G)E+=C[G][0],F+=C[G][1],this._tileClipper.lineTo(E,F);this._tileClipper.close()}}return this._tileClipper.result(l)};c.prototype._writeMeshLibtess=function(b,l,t,w,C,D,E,F){if(C&&C.length){t=this._materialStore.get(this.materialId);E=[];var G=l.indexVector;l=l.get("geometry");var H=new q(w,this.geometryType,this.materialId),M=this._getOffset(l,t);H.vertexFrom=M;H.indexFrom=G.length;b.push(H);this._tesselator.beginPolygon(z,
E);for(b=0;b<C.length;b++){var X=C[b];if(!(3>X.length)){this._tesselator.beginContour();var W=void 0,T=void 0;D?(W=X[0].x,T=X[0].y):(W=X[0][0],T=X[0][1]);var K=[W,T,0];this._tesselator.addVertex(K,K);for(K=1;K<X.length-1;K++){var O=void 0,N=void 0;D?(W=X[K].x,T=X[K].y):(O=X[K][0],N=X[K][1],W+=O,T+=N);O=[W,T,0];this._tesselator.addVertex(O,O)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(H,l,w,z,t,F);this._writeIndicesLibTess(H,G,M,E)}};c.prototype._writeMeshEarcut=
function(b,l,t,w,C,D,E,F){if(C&&C.length){t=this._materialStore.get(this.materialId);E=l.indexVector;l=l.get("geometry");var G=new q(w,this.geometryType,this.materialId),H=this._getOffset(l,t);G.vertexFrom=H;G.indexFrom=E.length;b.push(G);for(var M=b=0,X=0;X<C.length;X++){var W=C[X],T=M,K=void 0,O=void 0;D?(K=W[0].x,O=W[0].y):(K=W[0][0],O=W[0][1]);z[M++]=K;z[M++]=O;for(var N=0,Y=1;Y<W.length;++Y){var P=void 0,L=void 0;D?(P=K,L=O,K=W[Y].x,O=W[Y].y,P=K-P,L=O-L):(P=W[Y][0],L=W[Y][1],K+=P,O+=L);N-=P*
(O+O+L);z[M++]=K;z[M++]=O}0<N?(0<T-b&&(this._write(G,E,l,H,w,z,A,b,T,t,F),b=T),A.length=0):0>N?0<T-b?A.push(.5*(T-b)):M=T:M=T}0<M-b&&this._write(G,E,l,H,w,z,A,b,M,t,F);z.length=A.length=0}};c.prototype._write=function(b,l,t,w,C,D,E,F,G,H,M){w=n(D.slice(F,G),E,2);w.length&&(F=this._getOffset(t,H),this._writeVertices(b,t,C,D,E,H,M),this._writeIndices(b,l,F,w))};c.prototype._getOffset=function(b,l){var t=l.materialKeyInfo.hasVV()?8:6;return b.length/t};c.prototype._writeVertices=function(b,l,t,w,C,D,
E){for(C=0;C<w.length;C+=2){var F=e.i1616to32(w[C],w[C+1]);l.push(F);l.push(t);l.push(this.fillColor);l.push(this.tl);l.push(this.br);l.push(this.aux);this._writeVV(l,E,D);b.vertexCount++}};c.prototype._writeIndices=function(b,l,t,w){for(var C=0;C<w.length;C+=3)l.push(t+w[C]),l.push(t+w[C+1]),l.push(t+w[C+2]),b.indexCount+=3};c.prototype._writeVerticesLibTess=function(b,l,t,w,C,D){for(var E=0;E<w.length;E+=2){var F=e.i1616to32(w[E],w[E+1]);l.push(F);l.push(t);l.push(this.fillColor);l.push(this.tl);
l.push(this.br);l.push(this.aux);this._writeVV(l,D,C);b.vertexCount++}};c.prototype._writeIndicesLibTess=function(b,l,t,w){for(var C=0;C<w.length;C++)l.push(t+w[C]),b.indexCount++};c.prototype._writeVV=function(b,l,t){t.materialKeyInfo.hasVV()&&(this.isBFS?(b.push(4294967295),b.push(4294967295)):(b.push(l[h.VVType.COLOR]),b.push(l[h.VVType.OPACITY])))};return c}(v["default"]);p["default"]=B})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function B(l,t,w){w=w||
2;c=l.length/w+(t?2*t.length:0);b=!1;var C=t&&t.length,D=C?t[0]*w:l.length,E=p(l,0,D,w,!0),F=[];if(!E)return F;var G;if(C)a:{var H=w;C=[];var M;var X=0;for(M=t.length;X<M;X++){var W=t[X]*H;var T=X<M-1?t[X+1]*H:l.length;W=p(l,W,T,H,!1);W===W.next&&(W.steiner=!0);C.push(h(W))}C.sort(n);for(X=0;X<C.length;X++){if(!E){E=null;break a}t=C[X];H=E;if(H=m(t,H))t=v(H,t),a(t,t.next);E=a(E,E.next)}}if(b)return F;if(l.length>80*w){var K=G=l[0];var O=C=l[1];for(H=w;H<D;H+=w)X=l[H],t=l[H+1],X<K&&(K=X),t<O&&(O=t),
X>G&&(G=X),t>C&&(C=t);G=Math.max(G-K,C-O)}d(E,F,w,K,O,G);return F}function p(l,t,w,C,D){if(D===0<y(l,t,w,C))for(D=t;D<w;D+=C)var E=x(D,l[D],l[D+1],E);else for(D=w-C;D>=t;D-=C)E=x(D,l[D],l[D+1],E);E&&r(E,E.next)&&(z(E),E=E.next);return E}function a(l,t){if(!l)return l;t||(t=l);var w=l,C=0,D=c*c/2;do{var E=!1;if(w.steiner||!r(w,w.next)&&0!==e(w.prev,w,w.next))w=w.next;else{z(w);w=t=w.prev;if(w===w.next)return null;E=!0}if(C++>D)return b=!0,null}while(E||w!==t);return t}function d(l,t,w,C,D,E,F){if(l){if(!F&&
E){var G=l,H=G;do null===H.z&&(H.z=f(H.x,H.y,C,D,E)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==G);H.prevZ.nextZ=null;H.prevZ=null;G=H;var M,X,W,T,K=1;do{H=G;var O=G=null;for(X=0;H;){X++;var N=H;for(M=W=0;M<K&&(W++,N=N.nextZ,N);M++);for(T=K;0<W||0<T&&N;)0===W?(M=N,N=N.nextZ,T--):0!==T&&N?H.z<=N.z?(M=H,H=H.nextZ,W--):(M=N,N=N.nextZ,T--):(M=H,H=H.nextZ,W--),O?O.nextZ=M:G=M,M.prevZ=O,O=M;H=N}O.nextZ=null;K*=2}while(1<X)}for(G=l;l.prev!==l.next;){H=l.prev;N=l.next;if(E)a:{O=l;T=C;var Y=D,P=E;X=O.prev;
W=O;K=O.next;if(0<=e(X,W,K))O=!1;else{var L=X.x>W.x?X.x>K.x?X.x:K.x:W.x>K.x?W.x:K.x,Q=X.y>W.y?X.y>K.y?X.y:K.y:W.y>K.y?W.y:K.y;M=f(X.x<W.x?X.x<K.x?X.x:K.x:W.x<K.x?W.x:K.x,X.y<W.y?X.y<K.y?X.y:K.y:W.y<K.y?W.y:K.y,T,Y,P);T=f(L,Q,T,Y,P);for(Y=O.nextZ;Y&&Y.z<=T;){if(Y!==O.prev&&Y!==O.next&&k(X.x,X.y,W.x,W.y,K.x,K.y,Y.x,Y.y)&&0<=e(Y.prev,Y,Y.next)){O=!1;break a}Y=Y.nextZ}for(Y=O.prevZ;Y&&Y.z>=M;){if(Y!==O.prev&&Y!==O.next&&k(X.x,X.y,W.x,W.y,K.x,K.y,Y.x,Y.y)&&0<=e(Y.prev,Y,Y.next)){O=!1;break a}Y=Y.prevZ}O=
!0}}else O=g(l);if(O)t.push(H.i/w),t.push(l.i/w),t.push(N.i/w),z(l),G=l=N.next;else{if(b)break;l=N;if(l===G){if(!F)d(a(l),t,w,C,D,E,1);else if(1===F){F=t;G=w;H=l;do N=H.prev,O=H.next.next,!r(N,O)&&q(N,H,H.next,O)&&u(N,O)&&u(O,N)&&(F.push(N.i/G),F.push(H.i/G),F.push(O.i/G),z(H),z(H.next),H=l=O),H=H.next;while(H!==l);l=H;d(l,t,w,C,D,E,2)}else if(2===F)a:{F=l;do{for(G=F.next.next;G!==F.prev;){if(H=F.i!==G.i){O=O=O=void 0;H=F;N=G;if(O=H.next.i!==N.i&&H.prev.i!==N.i){b:{O=H;do{if(O.i!==H.i&&O.next.i!==
H.i&&O.i!==N.i&&O.next.i!==N.i&&q(O,O.next,H,N)){O=!0;break b}O=O.next}while(O!==H);O=!1}O=!O}if(O=O&&u(H,N)&&u(N,H)){O=H;X=!1;W=(H.x+N.x)/2;N=(H.y+N.y)/2;do O.y>N!==O.next.y>N&&W<(O.next.x-O.x)*(N-O.y)/(O.next.y-O.y)+O.x&&(X=!X),O=O.next;while(O!==H);O=X}H=O}if(H){l=v(F,G);F=a(F,F.next);l=a(l,l.next);d(F,t,w,C,D,E);d(l,t,w,C,D,E);break a}G=G.next}F=F.next}while(F!==l)}break}}}}}function g(l){var t=l.prev,w=l.next;if(0<=e(t,l,w))return!1;for(var C=l.next.next,D=0;C!==l.prev;){if(k(t.x,t.y,l.x,l.y,
w.x,w.y,C.x,C.y)&&0<=e(C.prev,C,C.next))return!1;C=C.next;if(D++>c)return b=!0,!1}return!0}function n(l,t){return l.x-t.x}function m(l,t){var w=t,C=l.x,D=l.y,E=-Infinity;do{if(!w)return null;if(D<=w.y&&D>=w.next.y){var F=w.x+(D-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(F<=C&&F>E){E=F;if(F===C){if(D===w.y)return w;if(D===w.next.y)return w.next}var G=w.x<w.next.x?w:w.next}}w=w.next}while(w!==t);if(!G)return null;if(C===E)return G.prev;F=G;var H=G.x,M=G.y,X=Infinity;for(w=G.next;w!==F;){if(C>=w.x&&w.x>=
H&&k(D<M?C:E,D,H,M,D<M?E:C,D,w.x,w.y)){var W=Math.abs(D-w.y)/(C-w.x);(W<X||W===X&&w.x>G.x)&&u(w,l)&&(G=w,X=W)}w=w.next}return G}function f(l,t,w,C,D){l=32767*(l-w)/D;t=32767*(t-C)/D;l=(l|l<<8)&16711935;l=(l|l<<4)&252645135;l=(l|l<<2)&858993459;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;return(l|l<<1)&1431655765|((t|t<<1)&1431655765)<<1}function h(l){var t=l,w=l;do t.x<w.x&&(w=t),t=t.next;while(t!==l);return w}function k(l,t,w,C,D,E,F,G){return 0<=(D-F)*(t-G)-(l-F)*(E-G)&&0<=(l-
F)*(C-G)-(w-F)*(t-G)&&0<=(w-F)*(E-G)-(D-F)*(C-G)}function e(l,t,w){return(t.y-l.y)*(w.x-t.x)-(t.x-l.x)*(w.y-t.y)}function r(l,t){return l.x===t.x&&l.y===t.y}function q(l,t,w,C){return r(l,t)&&r(w,C)||r(l,C)&&r(w,t)?!0:0<e(l,t,w)!==0<e(l,t,C)&&0<e(w,C,l)!==0<e(w,C,t)}function u(l,t){return 0>e(l.prev,l,l.next)?0<=e(l,t,l.next)&&0<=e(l,l.prev,t):0>e(l,t,l.prev)||0>e(l,l.next,t)}function v(l,t){var w=new A(l.i,l.x,l.y),C=new A(t.i,t.x,t.y),D=l.next,E=t.prev;l.next=t;t.prev=l;w.next=D;D.prev=w;C.next=
w;w.prev=C;E.next=C;C.prev=E;return C}function x(l,t,w,C){l=new A(l,t,w);C?(l.next=C.next,l.prev=C,C.next.prev=l,C.next=l):(l.prev=l,l.next=l);return l}function z(l){l.next.prev=l.prev;l.prev.next=l.next;l.prevZ&&(l.prevZ.nextZ=l.nextZ);l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function A(l,t,w){this.i=l;this.x=t;this.y=w;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(l,t,w,C){for(var D=0,E=w-C;t<w;t+=C)D+=(l[E]-l[t])*(l[t+1]+l[E+1]),E=t;return D}var c,b;B.deviation=function(l,
t,w,C){var D=t&&t.length,E=Math.abs(y(l,0,D?t[0]*w:l.length,w));if(D){D=0;for(var F=t.length;D<F;D++)E-=Math.abs(y(l,t[D]*w,D<F-1?t[D+1]*w:l.length,w))}for(D=t=0;D<C.length;D+=3){F=C[D]*w;var G=C[D+1]*w,H=C[D+2]*w;t+=Math.abs((l[F]-l[H])*(l[G+1]-l[F+1])-(l[F]-l[G])*(l[H+1]-l[F+1]))}return 0===E&&0===t?0:Math.abs((t-E)/E)};B.flatten=function(l){for(var t=l[0][0].length,w={vertices:[],holes:[],dimensions:t},C=0,D=0;D<l.length;D++){for(var E=0;E<l[D].length;E++)for(var F=0;F<t;F++)w.vertices.push(l[D][E][F]);
0<D&&(C+=l[D-1].length,w.holes.push(C))}return w};return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});var g=function(){return function(m,f,h){this.ratio=m;this.x=f;this.y=h}}();B=function(){function m(f,h,k,e,r){void 0===e&&(e=8);void 0===r&&(r=8);this.lines=[];this.starts=[];this.pixelRatio=e;this.pixelMargin=r;this.tileSize=512*e;this.dz=f;
this.yPos=h;this.xPos=k}m.prototype.setExtent=function(f){this.finalRatio=this.tileSize/f*(1<<this.dz);var h=this.pixelRatio*this.pixelMargin;h/=this.finalRatio;f>>=this.dz;h>f&&(h=f);this.margin=h;this.xmin=f*this.xPos-h;this.ymin=f*this.yPos-h;this.xmax=this.xmin+f+2*h;this.ymax=this.ymin+f+2*h};m.prototype.reset=function(f){this.type=f;this.lines=[];this.starts=[];this.line=null;this.start=0};m.prototype.moveTo=function(f,h){this._pushLine();this._prevIsIn=this._isIn(f,h);this._moveTo(f,h,this._prevIsIn);
this._prevPt=new a.Point(f,h);this._firstPt=new a.Point(f,h);this._dist=0};m.prototype.lineTo=function(f,h){var k=this._isIn(f,h),e=new a.Point(f,h),r=a.Point.distance(this._prevPt,e),q;if(k)if(this._prevIsIn)this._lineTo(f,h,!0);else{var u=this._prevPt;var v=e;var x=this._intersect(v,u);this.start=this._dist+r*(1-this._r);this._lineTo(x.x,x.y,!0);this._lineTo(v.x,v.y,!0)}else if(this._prevIsIn)v=this._prevPt,u=e,x=this._intersect(v,u),this._lineTo(x.x,x.y,!0),this._lineTo(u.x,u.y,!1);else{var z=
this._prevPt;if(!(z.x<=this.xmin&&e.x<=this.xmin||z.x>=this.xmax&&e.x>=this.xmax||z.y<=this.ymin&&e.y<=this.ymin||z.y>=this.ymax&&e.y>=this.ymax)){u=[];if(z.x<this.xmin&&e.x>this.xmin||z.x>this.xmin&&e.x<this.xmin){v=(this.xmin-z.x)/(e.x-z.x);var A=z.y+v*(e.y-z.y);A<=this.ymin?q=!1:A>=this.ymax?q=!0:u.push(new g(v,this.xmin,A))}if(z.x<this.xmax&&e.x>this.xmax||z.x>this.xmax&&e.x<this.xmax)v=(this.xmax-z.x)/(e.x-z.x),A=z.y+v*(e.y-z.y),A<=this.ymin?q=!1:A>=this.ymax?q=!0:u.push(new g(v,this.xmax,A));
if(z.y<this.ymin&&e.y>this.ymin||z.y>this.ymin&&e.y<this.ymin)v=(this.ymin-z.y)/(e.y-z.y),A=z.x+v*(e.x-z.x),A<=this.xmin?x=!1:A>=this.xmax?x=!0:u.push(new g(v,A,this.ymin));if(z.y<this.ymax&&e.y>this.ymax||z.y>this.ymax&&e.y<this.ymax)v=(this.ymax-z.y)/(e.y-z.y),A=z.x+v*(e.x-z.x),A<=this.xmin?x=!1:A>=this.xmax?x=!0:u.push(new g(v,A,this.ymax));if(0===u.length)x?q?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):q?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,
this.ymin,!0);else if(1<u.length&&u[0].ratio>u[1].ratio)this.start=this._dist+r*u[1].ratio,this._lineTo(u[1].x,u[1].y,!0),this._lineTo(u[0].x,u[0].y,!0);else for(this.start=this._dist+r*u[0].ratio,v=0;v<u.length;v++)this._lineTo(u[v].x,u[v].y,!0)}this._lineTo(e.x,e.y,!1)}this._dist+=r;this._prevIsIn=k;this._prevPt=e};m.prototype.close=function(){if(2<this.line.length){var f=this._firstPt,h=this._prevPt;f.x===h.x&&f.y===h.y||this.lineTo(f.x,f.y);f=this.line;for(h=f.length;4<=h;)if(f[0].x===f[1].x&&
f[0].x===f[h-2].x||f[0].y===f[1].y&&f[0].y===f[h-2].y)f.pop(),f[0].x=f[h-2].x,f[0].y=f[h-2].y,--h;else break}};m.prototype.result=function(f){void 0===f&&(f=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&f&&n.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};m.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var f=this.lines,h=f.length;if(0===h)return null;for(var k=[],e=0;e<h;e++)k.push({line:f[e],
start:this.starts[e]||0});return k};m.prototype._isIn=function(f,h){return f>=this.xmin&&f<=this.xmax&&h>=this.ymin&&h<=this.ymax};m.prototype._intersect=function(f,h){if(h.x>=this.xmin&&h.x<=this.xmax){var k=h.y<=this.ymin?this.ymin:this.ymax;var e=(k-f.y)/(h.y-f.y);var r=f.x+e*(h.x-f.x)}else if(h.y>=this.ymin&&h.y<=this.ymax)r=h.x<=this.xmin?this.xmin:this.xmax,e=(r-f.x)/(h.x-f.x),k=f.y+e*(h.y-f.y);else{k=h.y<=this.ymin?this.ymin:this.ymax;r=h.x<=this.xmin?this.xmin:this.xmax;var q=(r-f.x)/(h.x-
f.x),u=(k-f.y)/(h.y-f.y);q<u?(e=q,k=f.y+q*(h.y-f.y)):(e=u,r=f.x+u*(h.x-f.x))}this._r=e;return new a.Point(r,k)};m.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};m.prototype._moveTo=function(f,h,k){3!==
this.type?k&&(f=Math.round((f-(this.xmin+this.margin))*this.finalRatio),h=Math.round((h-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(f,h))):(k||(f<this.xmin&&(f=this.xmin),f>this.xmax&&(f=this.xmax),h<this.ymin&&(h=this.ymin),h>this.ymax&&(h=this.ymax)),f=Math.round((f-(this.xmin+this.margin))*this.finalRatio),h=Math.round((h-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(f,h)),this._is_v=this._is_h=!1)};m.prototype._lineTo=function(f,h,k){if(3!==this.type)if(k){f=
Math.round((f-(this.xmin+this.margin))*this.finalRatio);h=Math.round((h-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(k=this.line[this.line.length-1],k.equals(f,h)))return;this.line.push(new a.Point(f,h))}else this.line&&0<this.line.length&&this._pushLine();else if(k||(f<this.xmin&&(f=this.xmin),f>this.xmax&&(f=this.xmax),h<this.ymin&&(h=this.ymin),h>this.ymax&&(h=this.ymax)),f=Math.round((f-(this.xmin+this.margin))*this.finalRatio),h=Math.round((h-(this.ymin+this.margin))*this.finalRatio),
this.line&&0<this.line.length){k=this.line[this.line.length-1];var e=k.x===f,r=k.y===h;e&&r||(this._is_h&&e?(k.x=f,k.y=h,k=this.line[this.line.length-2],k.x===f&&k.y===h?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(k=this.line[this.line.length-2],this._is_h=k.x===f,this._is_v=k.y===h)):(this._is_h=k.x===f,this._is_v=k.y===h)):this._is_v&&r?(k.x=f,k.y=h,k=this.line[this.line.length-2],k.x===f&&k.y===h?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(k=this.line[this.line.length-
2],this._is_h=k.x===f,this._is_v=k.y===h)):(this._is_h=k.x===f,this._is_v=k.y===h)):(this.line.push(new a.Point(f,h)),this._is_h=e,this._is_v=r))}else this.line.push(new a.Point(f,h))};return m}();p.TileClipper=B;B=function(){function m(){}m.prototype.setExtent=function(f){this._ratio=4096===f?1:4096/f};m.prototype.reset=function(f){this.type=f;this.lines=[];this.line=null};m.prototype.moveTo=function(f,h){this.line&&this.lines.push(this.line);this.line=[];var k=this._ratio;this.line.push(new a.Point(f*
k,h*k))};m.prototype.lineTo=function(f,h){var k=this._ratio;this.line.push(new a.Point(f*k,h*k))};m.prototype.close=function(){var f=this.line;f&&!f[0].isEqual(f[f.length-1])&&f.push(f[0])};m.prototype.result=function(){this.line&&this.lines.push(this.line);return 0===this.lines.length?null:this.lines};return m}();p.SimpleBuilder=B;var n=function(){function m(){}m.simplify=function(f,h,k){if(k){var e=-h,r=f+h,q=-h,u=f+h;f=[];h=[];for(var v=k.length,x=0;x<v;++x){var z=k[x];if(z&&!(2>z.length))for(var A=
z[0],y=void 0,c=z.length,b=1;b<c;++b)y=z[b],A.x===y.x&&(A.x<=e&&(A.y>y.y?(f.push(x),f.push(b),f.push(0),f.push(-1)):(h.push(x),h.push(b),h.push(0),h.push(-1))),A.x>=r&&(A.y<y.y?(f.push(x),f.push(b),f.push(1),f.push(-1)):(h.push(x),h.push(b),h.push(1),h.push(-1)))),A.y===y.y&&(A.y<=q&&(A.x<y.x?(f.push(x),f.push(b),f.push(2),f.push(-1)):(h.push(x),h.push(b),h.push(2),h.push(-1))),A.y>=u&&(A.x>y.x?(f.push(x),f.push(b),f.push(3),f.push(-1)):(h.push(x),h.push(b),h.push(3),h.push(-1)))),A=y}0!==f.length&&
0!==h.length&&(m.fillParent(k,h,f),m.fillParent(k,f,h),e=[],m.calcDeltas(e,h,f),m.calcDeltas(e,f,h),m.addDeltas(e,k))}};m.fillParent=function(f,h,k){for(var e=k.length,r=h.length,q=0;q<r;q+=4){var u=h[q],v=h[q+1],x=h[q+2],z=f[u][v-1];u=f[u][v];v=8092;for(var A=-1,y=0;y<e;y+=4)if(k[y+2]===x){var c=k[y],b=k[y+1],l=f[c][b-1];c=f[c][b];switch(x){case 0:case 1:d.between(z.y,l.y,c.y)&&d.between(u.y,l.y,c.y)&&(l=Math.abs(c.y-l.y),l<v&&(v=l,A=y));break;case 2:case 3:d.between(z.x,l.x,c.x)&&d.between(u.x,
l.x,c.x)&&(l=Math.abs(c.x-l.x),l<v&&(v=l,A=y))}}h[q+3]=A}};m.calcDeltas=function(f,h,k){for(var e=h.length,r=0;r<e;r+=4){var q=m.calcDelta(r,h,k,[]);f.push(h[r]);f.push(h[r+1]);f.push(h[r+2]);f.push(q)}};m.calcDelta=function(f,h,k,e){f=h[f+3];if(-1===f)return 0;var r=e.length;if(1<r&&e[r-2]===f)return 0;e.push(f);return m.calcDelta(f,k,h,e)+1};m.addDeltas=function(f,h){for(var k=f.length,e=0,r=0;r<k;r+=4){var q=f[r+3];q>e&&(e=q)}for(r=0;r<k;r+=4){var u=h[f[r]],v=f[r+1];q=e-f[r+3];switch(f[r+2]){case 0:u[v-
1].x-=q;u[v].x-=q;1===v&&(u[u.length-1].x-=q);v===u.length-1&&(u[0].x-=q);break;case 1:u[v-1].x+=q;u[v].x+=q;1===v&&(u[u.length-1].x+=q);v===u.length-1&&(u[0].x+=q);break;case 2:u[v-1].y-=q;u[v].y-=q;1===v&&(u[u.length-1].y-=q);v===u.length-1&&(u[0].y-=q);break;case 3:u[v-1].y+=q,u[v].y+=q,1===v&&(u[u.length-1].y+=q),v===u.length-1&&(u[0].y+=q)}}};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",
{value:!0});var a=function(){function d(g,n){this.x=g;this.y=n}d.prototype.clone=function(){return new d(this.x,this.y)};d.prototype.equals=function(g,n){return g===this.x&&n===this.y};d.prototype.isEqual=function(g){return g.x===this.x&&g.y===this.y};d.prototype.setCoords=function(g,n){this.x=g;this.y=n};d.prototype.normalize=function(){var g=this.x,n=this.y;g=Math.sqrt(g*g+n*n);this.x/=g;this.y/=g};d.prototype.rightPerpendicular=function(){var g=this.x;this.x=this.y;this.y=-g};d.prototype.move=
function(g,n){this.x+=g;this.y+=n};d.prototype.assign=function(g){this.x=g.x;this.y=g.y};d.prototype.assignAdd=function(g,n){this.x=g.x+n.x;this.y=g.y+n.y};d.prototype.assignSub=function(g,n){this.x=g.x-n.x;this.y=g.y-n.y};d.prototype.rotate=function(g,n){var m=this.x,f=this.y;this.x=m*g-f*n;this.y=m*n+f*g};d.prototype.scale=function(g){this.x*=g;this.y*=g};d.prototype.length=function(){var g=this.x,n=this.y;return Math.sqrt(g*g+n*n)};d.distance=function(g,n){var m=n.x-g.x,f=n.y-g.y;return Math.sqrt(m*
m+f*f)};d.add=function(g,n){return new d(g.x+n.x,g.y+n.y)};d.sub=function(g,n){return new d(g.x-n.x,g.y-n.y)};return d}();p.Point=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});var g=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");B=function(){function n(){this._indexCounter=this._currentVertexIndex=
0;this._triangleIndices=[-1,-1,-1];this.glu=new d.GluTesselator;this.glu.gluTessCallback(d.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_EDGE_FLAG,
this._edgeCallback.bind(this));this.glu.gluTessProperty(d.gluEnum.GLU_TESS_WINDING_RULE,d.windingRule.GLU_TESS_WINDING_ODD)}n.prototype.beginPolygon=function(m,f){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(m);this._indices=f};n.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};n.prototype.beginContour=function(){this.glu.gluTessBeginContour()};n.prototype.endContour=function(){this.glu.gluTessEndContour()};
n.prototype.addVertex=function(m,f){this.glu.gluTessVertex(m,f)};n.prototype._vertexCallback=function(m,f){f[f.length]=m[0];f[f.length]=m[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(var h=0;3>h;h++)-1===this._triangleIndices[h]&&(this._triangleIndices[h]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[h];this._currentVertexIndex=0}else this._currentVertexIndex++};n.prototype._begincallback=function(m){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};n.prototype._endcallback=function(){this._currentVertexIndex=0};n.prototype._errorcallback=function(m){g.error("Encountered error during tesselation: "+m)};n.prototype._combinecallback=function(m,f,h){return[m[0],m[1],m[2]]};n.prototype._edgeCallback=function(m){};return n}();p["default"]=B})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],function(){var B={DEBUG:!1,assert:function(p,a){if(B.DEBUG&&
!p)throw Error("Assertion failed"+(a?": "+a:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,
GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,
GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};B.geom.vertEq=function(p,a){return p.s===a.s&&p.t===a.t};B.geom.vertLeq=function(p,a){return p.s<a.s||p.s===a.s&&p.t<=a.t};B.geom.edgeEval=function(p,a,d){B.assert(B.geom.vertLeq(p,a)&&B.geom.vertLeq(a,d));var g=a.s-p.s,n=d.s-a.s;return 0<g+n?g<n?a.t-p.t+g/(g+n)*(p.t-d.t):a.t-d.t+n/(g+n)*(d.t-p.t):0};B.geom.edgeSign=function(p,a,d){B.assert(B.geom.vertLeq(p,a)&&B.geom.vertLeq(a,d));var g=a.s-p.s,n=d.s-a.s;return 0<g+n?(a.t-d.t)*g+(a.t-p.t)*
n:0};B.geom.transLeq=function(p,a){return p.t<a.t||p.t===a.t&&p.s<=a.s};B.geom.transEval=function(p,a,d){B.assert(B.geom.transLeq(p,a)&&B.geom.transLeq(a,d));var g=a.t-p.t,n=d.t-a.t;return 0<g+n?g<n?a.s-p.s+g/(g+n)*(p.s-d.s):a.s-d.s+n/(g+n)*(d.s-p.s):0};B.geom.transSign=function(p,a,d){B.assert(B.geom.transLeq(p,a)&&B.geom.transLeq(a,d));var g=a.t-p.t,n=d.t-a.t;return 0<g+n?(a.s-d.s)*g+(a.s-p.s)*n:0};B.geom.edgeGoesLeft=function(p){return B.geom.vertLeq(p.dst(),p.org)};B.geom.edgeGoesRight=function(p){return B.geom.vertLeq(p.org,
p.dst())};B.geom.vertL1dist=function(p,a){return Math.abs(p.s-a.s)+Math.abs(p.t-a.t)};B.geom.vertCCW=function(p,a,d){return 0<=p.s*(a.t-d.t)+a.s*(d.t-p.t)+d.s*(p.t-a.t)};B.geom.interpolate_=function(p,a,d,g){p=0>p?0:p;d=0>d?0:d;return p<=d?0===d?(a+g)/2:a+p/(p+d)*(g-a):g+d/(p+d)*(a-g)};B.geom.edgeIntersect=function(p,a,d,g,n){if(!B.geom.vertLeq(p,a)){var m=p;p=a;a=m}B.geom.vertLeq(d,g)||(m=d,d=g,g=m);B.geom.vertLeq(p,d)||(m=p,p=d,d=m,m=a,a=g,g=m);if(B.geom.vertLeq(d,a))if(B.geom.vertLeq(a,g)){m=B.geom.edgeEval(p,
d,a);var f=B.geom.edgeEval(d,a,g);0>m+f&&(m=-m,f=-f);n.s=B.geom.interpolate_(m,d.s,f,a.s)}else m=B.geom.edgeSign(p,d,a),f=-B.geom.edgeSign(p,g,a),0>m+f&&(m=-m,f=-f),n.s=B.geom.interpolate_(m,d.s,f,g.s);else n.s=(d.s+a.s)/2;B.geom.transLeq(p,a)||(m=p,p=a,a=m);B.geom.transLeq(d,g)||(m=d,d=g,g=m);B.geom.transLeq(p,d)||(m=p,p=d,d=m,m=a,a=g,g=m);B.geom.transLeq(d,a)?B.geom.transLeq(a,g)?(m=B.geom.transEval(p,d,a),f=B.geom.transEval(d,a,g),0>m+f&&(m=-m,f=-f),n.t=B.geom.interpolate_(m,d.t,f,a.t)):(m=B.geom.transSign(p,
d,a),f=-B.geom.transSign(p,g,a),0>m+f&&(m=-m,f=-f),n.t=B.geom.interpolate_(m,d.t,f,g.t)):n.t=(d.t+a.t)/2};B.mesh={};B.mesh.makeEdge=function(p){var a=B.mesh.makeEdgePair_(p.eHead);B.mesh.makeVertex_(a,p.vHead);B.mesh.makeVertex_(a.sym,p.vHead);B.mesh.makeFace_(a,p.fHead);return a};B.mesh.meshSplice=function(p,a){var d=!1,g=!1;p!==a&&(a.org!==p.org&&(g=!0,B.mesh.killVertex_(a.org,p.org)),a.lFace!==p.lFace&&(d=!0,B.mesh.killFace_(a.lFace,p.lFace)),B.mesh.splice_(a,p),g||(B.mesh.makeVertex_(a,p.org),
p.org.anEdge=p),d||(B.mesh.makeFace_(a,p.lFace),p.lFace.anEdge=p))};B.mesh.deleteEdge=function(p){var a=p.sym,d=!1;p.lFace!==p.rFace()&&(d=!0,B.mesh.killFace_(p.lFace,p.rFace()));p.oNext===p?B.mesh.killVertex_(p.org,null):(p.rFace().anEdge=p.oPrev(),p.org.anEdge=p.oNext,B.mesh.splice_(p,p.oPrev()),d||B.mesh.makeFace_(p,p.lFace));a.oNext===a?(B.mesh.killVertex_(a.org,null),B.mesh.killFace_(a.lFace,null)):(p.lFace.anEdge=a.oPrev(),a.org.anEdge=a.oNext,B.mesh.splice_(a,a.oPrev()));B.mesh.killEdge_(p)};
B.mesh.addEdgeVertex=function(p){var a=B.mesh.makeEdgePair_(p),d=a.sym;B.mesh.splice_(a,p.lNext);a.org=p.dst();B.mesh.makeVertex_(d,a.org);a.lFace=d.lFace=p.lFace;return a};B.mesh.splitEdge=function(p){var a=B.mesh.addEdgeVertex(p).sym;B.mesh.splice_(p.sym,p.sym.oPrev());B.mesh.splice_(p.sym,a);p.sym.org=a.org;a.dst().anEdge=a.sym;a.sym.lFace=p.rFace();a.winding=p.winding;a.sym.winding=p.sym.winding;return a};B.mesh.connect=function(p,a){var d=!1,g=B.mesh.makeEdgePair_(p),n=g.sym;a.lFace!==p.lFace&&
(d=!0,B.mesh.killFace_(a.lFace,p.lFace));B.mesh.splice_(g,p.lNext);B.mesh.splice_(n,a);g.org=p.dst();n.org=a.org;g.lFace=n.lFace=p.lFace;p.lFace.anEdge=n;d||B.mesh.makeFace_(g,p.lFace);return g};B.mesh.zapFace=function(p){var a=p.anEdge,d=a.lNext;do{var g=d;d=g.lNext;g.lFace=null;if(null===g.rFace()){g.oNext===g?B.mesh.killVertex_(g.org,null):(g.org.anEdge=g.oNext,B.mesh.splice_(g,g.oPrev()));var n=g.sym;n.oNext===n?B.mesh.killVertex_(n.org,null):(n.org.anEdge=n.oNext,B.mesh.splice_(n,n.oPrev()));
B.mesh.killEdge_(g)}}while(g!==a);a=p.prev;p=p.next;p.prev=a;a.next=p};B.mesh.meshUnion=function(p,a){var d=p.fHead,g=p.vHead,n=p.eHead,m=a.fHead,f=a.vHead,h=a.eHead;m.next!==m&&(d.prev.next=m.next,m.next.prev=d.prev,m.prev.next=d,d.prev=m.prev);f.next!==f&&(g.prev.next=f.next,f.next.prev=g.prev,f.prev.next=g,g.prev=f.prev);h.next!==h&&(n.sym.next.sym.next=h.next,h.next.sym.next=n.sym.next,h.sym.next.sym.next=n,n.sym.next=h.sym.next);return p};B.mesh.deleteMesh=function(p){};B.mesh.makeEdgePair_=
function(p){var a=new B.GluHalfEdge,d=new B.GluHalfEdge,g=p.sym.next;d.next=g;g.sym.next=a;a.next=p;p.sym.next=d;a.sym=d;a.oNext=a;a.lNext=d;d.sym=a;d.oNext=d;return d.lNext=a};B.mesh.splice_=function(p,a){var d=p.oNext,g=a.oNext;d.sym.lNext=a;g.sym.lNext=p;p.oNext=g;a.oNext=d};B.mesh.makeVertex_=function(p,a){var d=a.prev,g=new B.GluVertex(a,d);d.next=g;a.prev=g;d=g.anEdge=p;do d.org=g,d=d.oNext;while(d!==p)};B.mesh.makeFace_=function(p,a){var d=a.prev,g=new B.GluFace(a,d);d.next=g;a.prev=g;g.anEdge=
p;g.inside=a.inside;d=p;do d.lFace=g,d=d.lNext;while(d!==p)};B.mesh.killEdge_=function(p){var a=p.next;p=p.sym.next;a.sym.next=p;p.sym.next=a};B.mesh.killVertex_=function(p,a){var d=p.anEdge,g=d;do g.org=a,g=g.oNext;while(g!==d);d=p.prev;g=p.next;g.prev=d;d.next=g};B.mesh.killFace_=function(p,a){var d=p.anEdge,g=d;do g.lFace=a,g=g.lNext;while(g!==d);d=p.prev;g=p.next;g.prev=d;d.next=g};B.normal={};B.normal.S_UNIT_X_=1;B.normal.S_UNIT_Y_=0;B.normal.projectPolygon=function(p,a,d,g){var n=!1,m=[a,d,
g];0===a&&0===d&&0===g&&(B.normal.computeNormal_(p,m),n=!0);d=B.normal.longAxis_(m);a=p.mesh.vHead;if(B.TRUE_PROJECT){B.normal.normalize_(m);g=[0,0,0];var f=[0,0,0];g[d]=0;g[(d+1)%3]=B.normal.S_UNIT_X_;g[(d+2)%3]=B.normal.S_UNIT_Y_;d=B.normal.dot_(g,m);g[0]-=d*m[0];g[1]-=d*m[1];g[2]-=d*m[2];B.normal.normalize_(g);f[0]=m[1]*g[2]-m[2]*g[1];f[1]=m[2]*g[0]-m[0]*g[2];f[2]=m[0]*g[1]-m[1]*g[0];B.normal.normalize_(f);for(m=a.next;m!==a;m=m.next)m.s=B.normal.dot_(m.coords,g),m.t=B.normal.dot_(m.coords,f)}else for(g=
(d+1)%3,f=(d+2)%3,d=0<m[d]?1:-1,m=a.next;m!==a;m=m.next)m.s=m.coords[g],m.t=d*m.coords[f];n&&B.normal.checkOrientation_(p)};B.normal.dot_=function(p,a){return p[0]*a[0]+p[1]*a[1]+p[2]*a[2]};B.normal.normalize_=function(p){var a=p[0]*p[0]+p[1]*p[1]+p[2]*p[2];B.assert(0<a);a=Math.sqrt(a);p[0]/=a;p[1]/=a;p[2]/=a};B.normal.longAxis_=function(p){var a=0;Math.abs(p[1])>Math.abs(p[0])&&(a=1);Math.abs(p[2])>Math.abs(p[a])&&(a=2);return a};B.normal.computeNormal_=function(p,a){var d=[-2*B.GLU_TESS_MAX_COORD,
-2*B.GLU_TESS_MAX_COORD,-2*B.GLU_TESS_MAX_COORD],g=[2*B.GLU_TESS_MAX_COORD,2*B.GLU_TESS_MAX_COORD,2*B.GLU_TESS_MAX_COORD],n=[],m=[],f,h=p.mesh.vHead;for(f=h.next;f!==h;f=f.next)for(var k=0;3>k;++k){var e=f.coords[k];e<g[k]&&(g[k]=e,m[k]=f);e>d[k]&&(d[k]=e,n[k]=f)}f=0;d[1]-g[1]>d[0]-g[0]&&(f=1);d[2]-g[2]>d[f]-g[f]&&(f=2);if(g[f]>=d[f])a[0]=0,a[1]=0,a[2]=1;else{d=0;g=m[f];n=n[f];m=[0,0,0];g=[g.coords[0]-n.coords[0],g.coords[1]-n.coords[1],g.coords[2]-n.coords[2]];k=[0,0,0];for(f=h.next;f!==h;f=f.next)k[0]=
f.coords[0]-n.coords[0],k[1]=f.coords[1]-n.coords[1],k[2]=f.coords[2]-n.coords[2],m[0]=g[1]*k[2]-g[2]*k[1],m[1]=g[2]*k[0]-g[0]*k[2],m[2]=g[0]*k[1]-g[1]*k[0],e=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],e>d&&(d=e,a[0]=m[0],a[1]=m[1],a[2]=m[2]);0>=d&&(a[0]=a[1]=a[2]=0,a[B.normal.longAxis_(g)]=1)}};B.normal.checkOrientation_=function(p){for(var a=0,d=p.mesh.fHead,g=d.next;g!==d;g=g.next){var n=g.anEdge;if(!(0>=n.winding)){do a+=(n.org.s-n.dst().s)*(n.org.t+n.dst().t),n=n.lNext;while(n!==g.anEdge)}}if(0>a)for(p=p.mesh.vHead,
a=p.next;a!==p;a=a.next)a.t=-a.t};B.render={};B.render.renderMesh=function(p,a,d){for(var g=!1,n=-1,m=a.fHead.prev;m!==a.fHead;m=m.prev)if(m.inside){g||(p.callBeginCallback(B.primitiveType.GL_TRIANGLES),g=!0);var f=m.anEdge;B.assert(f.lNext.lNext.lNext===f,"renderMesh called with non-triangulated mesh");do{if(d){var h=f.rFace().inside?0:1;n!==h&&(n=h,p.callEdgeFlagCallback(!!n))}p.callVertexCallback(f.org.data);f=f.lNext}while(f!==m.anEdge)}g&&p.callEndCallback()};B.render.renderBoundary=function(p,
a){for(var d=a.fHead.next;d!==a.fHead;d=d.next)if(d.inside){p.callBeginCallback(B.primitiveType.GL_LINE_LOOP);var g=d.anEdge;do p.callVertexCallback(g.org.data),g=g.lNext;while(g!==d.anEdge);p.callEndCallback()}};B.sweep={};B.sweep.SENTINEL_COORD_=4*B.GLU_TESS_MAX_COORD;B.sweep.TOLERANCE_NONZERO_=!1;B.sweep.computeInterior=function(p){p.fatalError=!1;B.sweep.removeDegenerateEdges_(p);B.sweep.initPriorityQ_(p);B.sweep.initEdgeDict_(p);for(var a;null!==(a=p.pq.extractMin());){for(;;){var d=p.pq.minimum();
if(null===d||!B.geom.vertEq(d,a))break;d=p.pq.extractMin();B.sweep.spliceMergeVertices_(p,a.anEdge,d.anEdge)}B.sweep.sweepEvent_(p,a)}a=p.dict.getMin().getKey();p.event=a.eUp.org;B.sweep.doneEdgeDict_(p);B.sweep.donePriorityQ_(p);B.sweep.removeDegenerateFaces_(p.mesh);p.mesh.checkMesh()};B.sweep.addWinding_=function(p,a){p.winding+=a.winding;p.sym.winding+=a.sym.winding};B.sweep.edgeLeq_=function(p,a,d){p=p.event;a=a.eUp;d=d.eUp;if(a.dst()===p)return d.dst()===p?B.geom.vertLeq(a.org,d.org)?0>=B.geom.edgeSign(d.dst(),
a.org,d.org):0<=B.geom.edgeSign(a.dst(),d.org,a.org):0>=B.geom.edgeSign(d.dst(),p,d.org);if(d.dst()===p)return 0<=B.geom.edgeSign(a.dst(),p,a.org);a=B.geom.edgeEval(a.dst(),p,a.org);p=B.geom.edgeEval(d.dst(),p,d.org);return a>=p};B.sweep.deleteRegion_=function(p,a){a.fixUpperEdge&&B.assert(0===a.eUp.winding);a.eUp.activeRegion=null;p.dict.deleteNode(a.nodeUp);a.nodeUp=null};B.sweep.fixUpperEdge_=function(p,a){B.assert(p.fixUpperEdge);B.mesh.deleteEdge(p.eUp);p.fixUpperEdge=!1;p.eUp=a;a.activeRegion=
p};B.sweep.topLeftRegion_=function(p){var a=p.eUp.org;do p=p.regionAbove();while(p.eUp.org===a);p.fixUpperEdge&&(a=B.mesh.connect(p.regionBelow().eUp.sym,p.eUp.lNext),B.sweep.fixUpperEdge_(p,a),p=p.regionAbove());return p};B.sweep.topRightRegion_=function(p){var a=p.eUp.dst();do p=p.regionAbove();while(p.eUp.dst()===a);return p};B.sweep.addRegionBelow_=function(p,a,d){var g=new B.ActiveRegion;g.eUp=d;g.nodeUp=p.dict.insertBefore(a.nodeUp,g);return d.activeRegion=g};B.sweep.isWindingInside_=function(p,
a){switch(p.windingRule){case B.windingRule.GLU_TESS_WINDING_ODD:return 0!==(a&1);case B.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==a;case B.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<a;case B.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>a;case B.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=a||-2>=a}B.assert(!1);return!1};B.sweep.computeWinding_=function(p,a){a.windingNumber=a.regionAbove().windingNumber+a.eUp.winding;a.inside=B.sweep.isWindingInside_(p,a.windingNumber)};B.sweep.finishRegion_=
function(p,a){var d=a.eUp,g=d.lFace;g.inside=a.inside;g.anEdge=d;B.sweep.deleteRegion_(p,a)};B.sweep.finishLeftRegions_=function(p,a,d){var g=a;for(a=a.eUp;g!==d;){g.fixUpperEdge=!1;var n=g.regionBelow(),m=n.eUp;if(m.org!==a.org){if(!n.fixUpperEdge){B.sweep.finishRegion_(p,g);break}m=B.mesh.connect(a.lPrev(),m.sym);B.sweep.fixUpperEdge_(n,m)}a.oNext!==m&&(B.mesh.meshSplice(m.oPrev(),m),B.mesh.meshSplice(a,m));B.sweep.finishRegion_(p,g);a=n.eUp;g=n}return a};B.sweep.addRightEdges_=function(p,a,d,g,
n,m){var f=!0;do B.assert(B.geom.vertLeq(d.org,d.dst())),B.sweep.addRegionBelow_(p,a,d.sym),d=d.oNext;while(d!==g);for(null===n&&(n=a.regionBelow().eUp.rPrev());;){g=a.regionBelow();d=g.eUp.sym;if(d.org!==n.org)break;d.oNext!==n&&(B.mesh.meshSplice(d.oPrev(),d),B.mesh.meshSplice(n.oPrev(),d));g.windingNumber=a.windingNumber-d.winding;g.inside=B.sweep.isWindingInside_(p,g.windingNumber);a.dirty=!0;!f&&B.sweep.checkForRightSplice_(p,a)&&(B.sweep.addWinding_(d,n),B.sweep.deleteRegion_(p,a),B.mesh.deleteEdge(n));
f=!1;a=g;n=d}a.dirty=!0;B.assert(a.windingNumber-d.winding===g.windingNumber);m&&B.sweep.walkDirtyRegions_(p,a)};B.sweep.callCombine_=function(p,a,d,g,n){var m=[a.coords[0],a.coords[1],a.coords[2]];a.data=null;a.data=p.callCombineCallback(m,d,g);null===a.data&&(n?p.fatalError||(p.callErrorCallback(B.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),p.fatalError=!0):a.data=d[0])};B.sweep.spliceMergeVertices_=function(p,a,d){var g=[null,null,null,null];g[0]=a.org.data;g[1]=d.org.data;B.sweep.callCombine_(p,
a.org,g,[.5,.5,0,0],!1);B.mesh.meshSplice(a,d)};B.sweep.vertexWeights_=function(p,a,d,g,n){var m=B.geom.vertL1dist(a,p),f=B.geom.vertL1dist(d,p),h=n+1;g[n]=.5*f/(m+f);g[h]=.5*m/(m+f);p.coords[0]+=g[n]*a.coords[0]+g[h]*d.coords[0];p.coords[1]+=g[n]*a.coords[1]+g[h]*d.coords[1];p.coords[2]+=g[n]*a.coords[2]+g[h]*d.coords[2]};B.sweep.getIntersectData_=function(p,a,d,g,n,m){var f=[0,0,0,0],h=[d.data,g.data,n.data,m.data];a.coords[0]=a.coords[1]=a.coords[2]=0;B.sweep.vertexWeights_(a,d,g,f,0);B.sweep.vertexWeights_(a,
n,m,f,2);B.sweep.callCombine_(p,a,h,f,!0)};B.sweep.checkForRightSplice_=function(p,a){var d=a.regionBelow(),g=a.eUp,n=d.eUp;if(B.geom.vertLeq(g.org,n.org)){if(0<B.geom.edgeSign(n.dst(),g.org,n.org))return!1;B.geom.vertEq(g.org,n.org)?g.org!==n.org&&(p.pq.remove(g.org.pqHandle),B.sweep.spliceMergeVertices_(p,n.oPrev(),g)):(B.mesh.splitEdge(n.sym),B.mesh.meshSplice(g,n.oPrev()),a.dirty=d.dirty=!0)}else{if(0>B.geom.edgeSign(g.dst(),n.org,g.org))return!1;a.regionAbove().dirty=a.dirty=!0;B.mesh.splitEdge(g.sym);
B.mesh.meshSplice(n.oPrev(),g)}return!0};B.sweep.checkForLeftSplice_=function(p,a){var d=a.regionBelow(),g=a.eUp,n=d.eUp;B.assert(!B.geom.vertEq(g.dst(),n.dst()));if(B.geom.vertLeq(g.dst(),n.dst())){if(0>B.geom.edgeSign(g.dst(),n.dst(),g.org))return!1;a.regionAbove().dirty=a.dirty=!0;d=B.mesh.splitEdge(g);B.mesh.meshSplice(n.sym,d);d.lFace.inside=a.inside}else{if(0<B.geom.edgeSign(n.dst(),g.dst(),n.org))return!1;a.dirty=d.dirty=!0;d=B.mesh.splitEdge(n);B.mesh.meshSplice(g.lNext,n.sym);d.rFace().inside=
a.inside}return!0};B.sweep.checkForIntersect_=function(p,a){var d=a.regionBelow(),g=a.eUp,n=d.eUp,m=g.org,f=n.org,h=g.dst(),k=n.dst(),e=new B.GluVertex;B.assert(!B.geom.vertEq(k,h));B.assert(0>=B.geom.edgeSign(h,p.event,m));B.assert(0<=B.geom.edgeSign(k,p.event,f));B.assert(m!==p.event&&f!==p.event);B.assert(!a.fixUpperEdge&&!d.fixUpperEdge);if(m===f||Math.min(m.t,h.t)>Math.max(f.t,k.t))return!1;if(B.geom.vertLeq(m,f)){if(0<B.geom.edgeSign(k,m,f))return!1}else if(0>B.geom.edgeSign(h,f,m))return!1;
B.geom.edgeIntersect(h,m,k,f,e);B.assert(Math.min(m.t,h.t)<=e.t);B.assert(e.t<=Math.max(f.t,k.t));B.assert(Math.min(k.s,h.s)<=e.s);B.assert(e.s<=Math.max(f.s,m.s));B.geom.vertLeq(e,p.event)&&(e.s=p.event.s,e.t=p.event.t);var r=B.geom.vertLeq(m,f)?m:f;B.geom.vertLeq(r,e)&&(e.s=r.s,e.t=r.t);if(B.geom.vertEq(e,m)||B.geom.vertEq(e,f))return B.sweep.checkForRightSplice_(p,a),!1;if(!B.geom.vertEq(h,p.event)&&0<=B.geom.edgeSign(h,p.event,e)||!B.geom.vertEq(k,p.event)&&0>=B.geom.edgeSign(k,p.event,e)){if(k===
p.event)return B.mesh.splitEdge(g.sym),B.mesh.meshSplice(n.sym,g),a=B.sweep.topLeftRegion_(a),g=a.regionBelow().eUp,B.sweep.finishLeftRegions_(p,a.regionBelow(),d),B.sweep.addRightEdges_(p,a,g.oPrev(),g,g,!0),!0;if(h===p.event)return B.mesh.splitEdge(n.sym),B.mesh.meshSplice(g.lNext,n.oPrev()),d=a,a=B.sweep.topRightRegion_(a),m=a.regionBelow().eUp.rPrev(),d.eUp=n.oPrev(),n=B.sweep.finishLeftRegions_(p,d,null),B.sweep.addRightEdges_(p,a,n.oNext,g.rPrev(),m,!0),!0;0<=B.geom.edgeSign(h,p.event,e)&&(a.regionAbove().dirty=
a.dirty=!0,B.mesh.splitEdge(g.sym),g.org.s=p.event.s,g.org.t=p.event.t);0>=B.geom.edgeSign(k,p.event,e)&&(a.dirty=d.dirty=!0,B.mesh.splitEdge(n.sym),n.org.s=p.event.s,n.org.t=p.event.t);return!1}B.mesh.splitEdge(g.sym);B.mesh.splitEdge(n.sym);B.mesh.meshSplice(n.oPrev(),g);g.org.s=e.s;g.org.t=e.t;g.org.pqHandle=p.pq.insert(g.org);B.sweep.getIntersectData_(p,g.org,m,h,f,k);a.regionAbove().dirty=a.dirty=d.dirty=!0;return!1};B.sweep.walkDirtyRegions_=function(p,a){for(var d=a.regionBelow();;){for(;d.dirty;)a=
d,d=d.regionBelow();if(!a.dirty&&(d=a,a=a.regionAbove(),null===a||!a.dirty))break;a.dirty=!1;var g=a.eUp,n=d.eUp;g.dst()!==n.dst()&&B.sweep.checkForLeftSplice_(p,a)&&(d.fixUpperEdge?(B.sweep.deleteRegion_(p,d),B.mesh.deleteEdge(n),d=a.regionBelow(),n=d.eUp):a.fixUpperEdge&&(B.sweep.deleteRegion_(p,a),B.mesh.deleteEdge(g),a=d.regionAbove(),g=a.eUp));if(g.org!==n.org)if(g.dst()===n.dst()||a.fixUpperEdge||d.fixUpperEdge||g.dst()!==p.event&&n.dst()!==p.event)B.sweep.checkForRightSplice_(p,a);else if(B.sweep.checkForIntersect_(p,
a))break;g.org===n.org&&g.dst()===n.dst()&&(B.sweep.addWinding_(n,g),B.sweep.deleteRegion_(p,a),B.mesh.deleteEdge(g),a=d.regionAbove())}};B.sweep.connectRightVertex_=function(p,a,d){var g=d.oNext,n=a.regionBelow(),m=a.eUp,f=n.eUp,h=!1;m.dst()!==f.dst()&&B.sweep.checkForIntersect_(p,a);B.geom.vertEq(m.org,p.event)&&(B.mesh.meshSplice(g.oPrev(),m),a=B.sweep.topLeftRegion_(a),g=a.regionBelow().eUp,B.sweep.finishLeftRegions_(p,a.regionBelow(),n),h=!0);B.geom.vertEq(f.org,p.event)&&(B.mesh.meshSplice(d,
f.oPrev()),d=B.sweep.finishLeftRegions_(p,n,null),h=!0);h?B.sweep.addRightEdges_(p,a,d.oNext,g,g,!0):(g=B.geom.vertLeq(f.org,m.org)?f.oPrev():m,g=B.mesh.connect(d.lPrev(),g),B.sweep.addRightEdges_(p,a,g,g.oNext,g.oNext,!1),g.sym.activeRegion.fixUpperEdge=!0,B.sweep.walkDirtyRegions_(p,a))};B.sweep.connectLeftDegenerate_=function(p,a,d){var g=a.eUp;if(B.geom.vertEq(g.org,d))B.assert(B.sweep.TOLERANCE_NONZERO_),B.sweep.TOLERANCE_NONZERO_&&B.sweep.spliceMergeVertices_(p,g,d.anEdge);else if(B.geom.vertEq(g.dst(),
d)){if(B.assert(B.sweep.TOLERANCE_NONZERO_),B.sweep.TOLERANCE_NONZERO_){a=B.sweep.topRightRegion_(a);g=a.regionBelow();var n=g.eUp.sym,m=n.oNext,f=m;g.fixUpperEdge&&(B.assert(m!==n),B.sweep.deleteRegion_(p,g),B.mesh.deleteEdge(n),n=m.oPrev());B.mesh.meshSplice(d.anEdge,n);B.geom.edgeGoesLeft(m)||(m=null);B.sweep.addRightEdges_(p,a,n.oNext,f,m,!0)}}else B.mesh.splitEdge(g.sym),a.fixUpperEdge&&(B.mesh.deleteEdge(g.oNext),a.fixUpperEdge=!1),B.mesh.meshSplice(d.anEdge,g),B.sweep.sweepEvent_(p,d)};B.sweep.connectLeftVertex_=
function(p,a){var d=new B.ActiveRegion;d.eUp=a.anEdge.sym;d=p.dict.search(d).getKey();var g=d.regionBelow(),n=d.eUp,m=g.eUp;0===B.geom.edgeSign(n.dst(),a,n.org)?B.sweep.connectLeftDegenerate_(p,d,a):(g=B.geom.vertLeq(m.dst(),n.dst())?d:g,d.inside||g.fixUpperEdge?(n=g===d?B.mesh.connect(a.anEdge.sym,n.lNext):B.mesh.connect(m.dNext(),a.anEdge).sym,g.fixUpperEdge?B.sweep.fixUpperEdge_(g,n):B.sweep.computeWinding_(p,B.sweep.addRegionBelow_(p,d,n)),B.sweep.sweepEvent_(p,a)):B.sweep.addRightEdges_(p,d,
a.anEdge,a.anEdge,null,!0))};B.sweep.sweepEvent_=function(p,a){p.event=a;for(var d=a.anEdge;null===d.activeRegion;)if(d=d.oNext,d===a.anEdge){B.sweep.connectLeftVertex_(p,a);return}d=B.sweep.topLeftRegion_(d.activeRegion);var g=d.regionBelow(),n=g.eUp;g=B.sweep.finishLeftRegions_(p,g,null);g.oNext===n?B.sweep.connectRightVertex_(p,d,g):B.sweep.addRightEdges_(p,d,g.oNext,n,n,!0)};B.sweep.addSentinel_=function(p,a){var d=new B.ActiveRegion,g=B.mesh.makeEdge(p.mesh);g.org.s=B.sweep.SENTINEL_COORD_;g.org.t=
a;g.dst().s=-B.sweep.SENTINEL_COORD_;g.dst().t=a;p.event=g.dst();d.eUp=g;d.windingNumber=0;d.inside=!1;d.fixUpperEdge=!1;d.sentinel=!0;d.dirty=!1;d.nodeUp=p.dict.insert(d)};B.sweep.initEdgeDict_=function(p){p.dict=new B.Dict(p,B.sweep.edgeLeq_);B.sweep.addSentinel_(p,-B.sweep.SENTINEL_COORD_);B.sweep.addSentinel_(p,B.sweep.SENTINEL_COORD_)};B.sweep.doneEdgeDict_=function(p){for(var a=0,d;null!==(d=p.dict.getMin().getKey());)d.sentinel||(B.assert(d.fixUpperEdge),B.assert(1===++a)),B.assert(0===d.windingNumber),
B.sweep.deleteRegion_(p,d);p.dict=null};B.sweep.removeDegenerateEdges_=function(p){for(var a=p.mesh.eHead,d,g=a.next;g!==a;g=d){d=g.next;var n=g.lNext;B.geom.vertEq(g.org,g.dst())&&g.lNext.lNext!==g&&(B.sweep.spliceMergeVertices_(p,n,g),B.mesh.deleteEdge(g),g=n,n=g.lNext);if(n.lNext===g){if(n!==g){if(n===d||n===d.sym)d=d.next;B.mesh.deleteEdge(n)}if(g===d||g===d.sym)d=d.next;B.mesh.deleteEdge(g)}}};B.sweep.initPriorityQ_=function(p){var a=new B.PriorityQ;p.pq=a;p=p.mesh.vHead;var d;for(d=p.next;d!==
p;d=d.next)d.pqHandle=a.insert(d);a.init()};B.sweep.donePriorityQ_=function(p){p.pq.deleteQ();p.pq=null};B.sweep.removeDegenerateFaces_=function(p){for(var a,d=p.fHead.next;d!==p.fHead;d=a)a=d.next,d=d.anEdge,B.assert(d.lNext!==d),d.lNext.lNext===d&&(B.sweep.addWinding_(d.oNext,d),B.mesh.deleteEdge(d))};B.tessmono={};B.tessmono.tessellateMonoRegion_=function(p){p=p.anEdge;for(B.assert(p.lNext!==p&&p.lNext.lNext!==p);B.geom.vertLeq(p.dst(),p.org);p=p.lPrev());for(;B.geom.vertLeq(p.org,p.dst());p=p.lNext);
for(var a=p.lPrev(),d;p.lNext!==a;)if(B.geom.vertLeq(p.dst(),a.org)){for(;a.lNext!==p&&(B.geom.edgeGoesLeft(a.lNext)||0>=B.geom.edgeSign(a.org,a.dst(),a.lNext.dst()));)d=B.mesh.connect(a.lNext,a),a=d.sym;a=a.lPrev()}else{for(;a.lNext!==p&&(B.geom.edgeGoesRight(p.lPrev())||0<=B.geom.edgeSign(p.dst(),p.org,p.lPrev().org));)d=B.mesh.connect(p,p.lPrev()),p=d.sym;p=p.lNext}for(B.assert(a.lNext!==p);a.lNext.lNext!==p;)d=B.mesh.connect(a.lNext,a),a=d.sym};B.tessmono.tessellateInterior=function(p){for(var a,
d=p.fHead.next;d!==p.fHead;d=a)a=d.next,d.inside&&B.tessmono.tessellateMonoRegion_(d)};B.tessmono.discardExterior=function(p){for(var a,d=p.fHead.next;d!==p.fHead;d=a)a=d.next,d.inside||B.mesh.zapFace(d)};B.tessmono.setWindingNumber=function(p,a,d){for(var g,n=p.eHead.next;n!==p.eHead;n=g)g=n.next,n.rFace().inside!==n.lFace.inside?n.winding=n.lFace.inside?a:-a:d?B.mesh.deleteEdge(n):n.winding=0};B.Dict=function(p,a){this.head_=new B.DictNode;this.frame_=p;this.leq_=a};B.Dict.prototype.deleteDict_=
function(){};B.Dict.prototype.insertBefore=function(p,a){do p=p.prev;while(null!==p.key&&!this.leq_(this.frame_,p.key,a));var d=new B.DictNode(a,p.next,p);p.next.prev=d;return p.next=d};B.Dict.prototype.insert=function(p){return this.insertBefore(this.head_,p)};B.Dict.prototype.deleteNode=function(p){p.next.prev=p.prev;p.prev.next=p.next};B.Dict.prototype.search=function(p){var a=this.head_;do a=a.next;while(null!==a.key&&!this.leq_(this.frame_,p,a.key));return a};B.Dict.prototype.getMin=function(){return this.head_.next};
B.Dict.prototype.getMax=function(){return this.head_.prev};B.DictNode=function(p,a,d){this.key=p||null;this.next=a||this;this.prev=d||this};B.DictNode.prototype.getKey=function(){return this.key};B.DictNode.prototype.getSuccessor=function(){return this.next};B.DictNode.prototype.getPredecessor=function(){return this.prev};B.GluTesselator=function(){this.state_=B.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=B.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};B.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};B.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(B.GluTesselator.tessState_.T_DORMANT)};B.GluTesselator.prototype.gluTessProperty=function(p,a){switch(p){case B.gluEnum.GLU_TESS_TOLERANCE:return;
case B.gluEnum.GLU_TESS_WINDING_RULE:switch(a){case B.windingRule.GLU_TESS_WINDING_ODD:case B.windingRule.GLU_TESS_WINDING_NONZERO:case B.windingRule.GLU_TESS_WINDING_POSITIVE:case B.windingRule.GLU_TESS_WINDING_NEGATIVE:case B.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=a;return}break;case B.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!a;return;default:this.callErrorCallback(B.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(B.gluEnum.GLU_INVALID_VALUE)};B.GluTesselator.prototype.gluGetTessProperty=
function(p){switch(p){case B.gluEnum.GLU_TESS_TOLERANCE:return 0;case B.gluEnum.GLU_TESS_WINDING_RULE:return p=this.windingRule,B.assert(p===B.windingRule.GLU_TESS_WINDING_ODD||p===B.windingRule.GLU_TESS_WINDING_NONZERO||p===B.windingRule.GLU_TESS_WINDING_POSITIVE||p===B.windingRule.GLU_TESS_WINDING_NEGATIVE||p===B.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),p;case B.gluEnum.GLU_TESS_BOUNDARY_ONLY:return B.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(B.gluEnum.GLU_INVALID_ENUM)}return!1};
B.GluTesselator.prototype.gluTessNormal=function(p,a,d){this.normal_[0]=p;this.normal_[1]=a;this.normal_[2]=d};B.GluTesselator.prototype.gluTessCallback=function(p,a){var d=a?a:null;switch(p){case B.gluEnum.GLU_TESS_BEGIN:case B.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=d;break;case B.gluEnum.GLU_TESS_EDGE_FLAG:case B.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=d;break;case B.gluEnum.GLU_TESS_VERTEX:case B.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=d;break;case B.gluEnum.GLU_TESS_END:case B.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
d;break;case B.gluEnum.GLU_TESS_ERROR:case B.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=d;break;case B.gluEnum.GLU_TESS_COMBINE:case B.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=d;break;case B.gluEnum.GLU_TESS_MESH:this.meshCallback_=d;break;default:this.callErrorCallback(B.gluEnum.GLU_INVALID_ENUM)}};B.GluTesselator.prototype.gluTessVertex=function(p,a){var d=!1,g=[0,0,0];this.requireState_(B.GluTesselator.tessState_.T_IN_CONTOUR);for(var n=0;3>n;++n){var m=p[n];m<-B.GLU_TESS_MAX_COORD&&
(m=-B.GLU_TESS_MAX_COORD,d=!0);m>B.GLU_TESS_MAX_COORD&&(m=B.GLU_TESS_MAX_COORD,d=!0);g[n]=m}d&&this.callErrorCallback(B.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(g,a)};B.GluTesselator.prototype.gluTessBeginPolygon=function(p){this.requireState_(B.GluTesselator.tessState_.T_DORMANT);this.state_=B.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new B.GluMesh;this.polygonData_=p};B.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(B.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=B.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};B.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(B.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=B.GluTesselator.tessState_.T_IN_POLYGON};B.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(B.GluTesselator.tessState_.T_IN_POLYGON);this.state_=B.GluTesselator.tessState_.T_DORMANT;B.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);B.sweep.computeInterior(this);
if(!this.fatalError){var p=this.mesh;this.boundaryOnly_?B.tessmono.setWindingNumber(p,1,!0):B.tessmono.tessellateInterior(p);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?B.render.renderBoundary(this,this.mesh):B.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){B.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}B.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};B.GluTesselator.prototype.requireState_=function(p){this.state_!==p&&this.gotoState_(p)};B.GluTesselator.prototype.gotoState_=function(p){for(;this.state_!==p;)if(this.state_<p)switch(this.state_){case B.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(B.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case B.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(B.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case B.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(B.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case B.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(B.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};B.GluTesselator.prototype.addVertex_=function(p,a){var d=this.lastEdge_;null===d?(d=B.mesh.makeEdge(this.mesh),B.mesh.meshSplice(d,d.sym)):(B.mesh.splitEdge(d),d=d.lNext);d.org.data=a;d.org.coords[0]=p[0];d.org.coords[1]=p[1];d.org.coords[2]=p[2];d.winding=1;d.sym.winding=-1;this.lastEdge_=d};B.GluTesselator.prototype.callBeginCallback=
function(p){this.beginCallback_&&this.beginCallback_(p,this.polygonData_)};B.GluTesselator.prototype.callVertexCallback=function(p){this.vertexCallback_&&this.vertexCallback_(p,this.polygonData_)};B.GluTesselator.prototype.callEdgeFlagCallback=function(p){this.edgeFlagCallback_&&this.edgeFlagCallback_(p,this.polygonData_)};B.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};B.GluTesselator.prototype.callCombineCallback=function(p,a,d){return this.combineCallback_?
this.combineCallback_(p,a,d,this.polygonData_)||null:null};B.GluTesselator.prototype.callErrorCallback=function(p){this.errorCallback_&&this.errorCallback_(p,this.polygonData_)};B.GluFace=function(p,a){this.next=p||this;this.prev=a||this;this.anEdge=null;this.inside=!1};B.GluHalfEdge=function(p){this.next=p||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};B.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};B.GluHalfEdge.prototype.dst=function(){return this.sym.org};
B.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};B.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};B.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};B.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};B.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};B.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};B.GluMesh=function(){this.vHead=new B.GluVertex;this.fHead=new B.GluFace;this.eHead=new B.GluHalfEdge;this.eHeadSym=
new B.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};B.GluMesh.prototype.checkMesh=function(){if(B.DEBUG){var p=this.fHead,a=this.vHead,d=this.eHead,g,n;for(g=g=p;(n=g.next)!==p;g=n){B.assert(n.prev===g);g=n.anEdge;do B.assert(g.sym!==g),B.assert(g.sym.sym===g),B.assert(g.lNext.oNext.sym===g),B.assert(g.oNext.sym.lNext===g),B.assert(g.lFace===n),g=g.lNext;while(g!==n.anEdge)}B.assert(n.prev===g&&null===n.anEdge);for(g=g=a;(p=g.next)!==a;g=p){B.assert(p.prev===g);g=p.anEdge;
do B.assert(g.sym!==g),B.assert(g.sym.sym===g),B.assert(g.lNext.oNext.sym===g),B.assert(g.oNext.sym.lNext===g),B.assert(g.org===p),g=g.oNext;while(g!==p.anEdge)}B.assert(p.prev===g&&null===p.anEdge&&null===p.data);for(a=a=d;(g=a.next)!==d;a=g)B.assert(g.sym.next===a.sym),B.assert(g.sym!==g),B.assert(g.sym.sym===g),B.assert(null!==g.org),B.assert(null!==g.dst()),B.assert(g.lNext.oNext.sym===g),B.assert(g.oNext.sym.lNext===g);B.assert(g.sym.next===a.sym&&g.sym===this.eHeadSym&&g.sym.sym===g&&null===
g.org&&null===g.dst()&&null===g.lFace&&null===g.rFace())}};B.GluVertex=function(p,a){this.next=p||this;this.prev=a||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};B.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new B.PriorityQHeap};B.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};B.PriorityQ.prototype.init=function(){this.order_=[];for(var p=0;p<this.size_;p++)this.order_[p]=p;
p=function(d){return function(g,n){return B.geom.vertLeq(d[g],d[n])?1:-1}}(this.verts_);this.order_.sort(p);this.initialized_=!0;this.heap_.init();if(B.DEBUG){var a=0+this.size_-1;for(p=0;p<a;++p)B.assert(B.geom.vertLeq(this.verts_[this.order_[p+1]],this.verts_[this.order_[p]]))}};B.PriorityQ.prototype.insert=function(p){if(this.initialized_)return this.heap_.insert(p);var a=this.size_++;this.verts_[a]=p;return-(a+1)};B.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var p=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(B.geom.vertLeq(a,p))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return p};B.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var p=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(B.geom.vertLeq(a,p))return a}return p};B.PriorityQ.prototype.remove=function(p){if(0<=
p)this.heap_.remove(p);else for(p=-(p+1),B.assert(p<this.verts_.length&&null!==this.verts_[p]),this.verts_[p]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};B.PriorityQHeap=function(){this.heap_=B.PriorityQHeap.reallocNumeric_([0],B.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=B.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};B.PriorityQHeap.INIT_SIZE_=32;B.PriorityQHeap.reallocNumeric_=
function(p,a){for(var d=Array(a),g=0;g<p.length;g++)d[g]=p[g];for(;g<a;g++)d[g]=0;return d};B.PriorityQHeap.prototype.init=function(){for(var p=this.size_;1<=p;--p)this.floatDown_(p);this.initialized_=!0};B.PriorityQHeap.prototype.insert=function(p){var a=++this.size_;2*a>this.max_&&(this.max_*=2,this.handles_=B.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));if(0===this.freeList_)var d=a;else d=this.freeList_,this.freeList_=this.handles_[this.freeList_];this.verts_[d]=p;this.handles_[d]=
a;this.heap_[a]=d;this.initialized_&&this.floatUp_(a);return d};B.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};B.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};B.PriorityQHeap.prototype.extractMin=function(){var p=this.heap_,a=this.verts_,d=this.handles_,g=p[1],n=a[g];0<this.size_&&(p[1]=p[this.size_],d[p[1]]=1,a[g]=null,d[g]=this.freeList_,this.freeList_=g,0<--this.size_&&this.floatDown_(1));return n};B.PriorityQHeap.prototype.remove=function(p){var a=
this.heap_,d=this.verts_,g=this.handles_;B.assert(1<=p&&p<=this.max_&&null!==d[p]);var n=g[p];a[n]=a[this.size_];g[a[n]]=n;n<=--this.size_&&(1>=n?this.floatDown_(n):B.geom.vertLeq(d[a[n>>1]],d[a[n]])?this.floatDown_(n):this.floatUp_(n));d[p]=null;g[p]=this.freeList_;this.freeList_=p};B.PriorityQHeap.prototype.floatDown_=function(p){for(var a=this.heap_,d=this.verts_,g=this.handles_,n=a[p];;){var m=p<<1;m<this.size_&&B.geom.vertLeq(d[a[m+1]],d[a[m]])&&(m+=1);B.assert(m<=this.max_);var f=a[m];if(m>
this.size_||B.geom.vertLeq(d[n],d[f])){a[p]=n;g[n]=p;break}a[p]=f;g[f]=p;p=m}};B.PriorityQHeap.prototype.floatUp_=function(p){for(var a=this.heap_,d=this.verts_,g=this.handles_,n=a[p];;){var m=p>>1,f=a[m];if(0===m||B.geom.vertLeq(d[f],d[n])){a[p]=n;g[n]=p;break}a[p]=f;g[f]=p;p=m}};B.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};B.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
B.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});B=function(){return function(){}}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u){Object.defineProperty(p,"__esModule",{value:!0});var v=d.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),x=h.allocTriangles(20),z=h.allocTriangles(20),A=[h.allocExtrudeVectors(),h.allocExtrudeVectors()],y=h.allocExtrudeVectors(),c=n.TILE_SIZE+8,b=new h.Tessellator({distanceAlongCorrection:!0}),l=new e.TileClipper(0,0,0,1,8);l.setExtent(512);B=function(t){function w(C,D,E,F,G,H,M,X,W,T,K){var O=t.call(this)||this;O.capType=H;O.joinType=M;O.fillColor=X;
O.tl=W;O.br=T;O.hasPattern=K;O.geometryType=m.WGLGeometryType.LINE;O.halfWidth=0<F?.5*(F+1/G):0;O._materialStore=C;O.vvFlags=D;O.materialId=O._materialStore.createSpriteMaterial(E,O.geometryType,D);return O}a(w,t);w.fromSimpleLine=function(C,D,E,F,G){var H=E.color,M=r.getCapType("round"),X=r.getJoinType("round");H=H&&"none"!==E.style&&g.premultiplyAlphaRGBA(H)||0;"none"===E.style&&(H=0);if(!F)return new w(C,D,F,E.width,G,M,X,H,0,0,!1);var W=F.rect,T=W.x+1+F.width,K=W.y+1+F.height;W=k.i1616to32(W.x+
1,W.y+1);T=k.i1616to32(T,K);return new w(C,D,F,E.width,G,M,X,H,W,T,!0)};w.fromPictureLineSymbol=function(C,D,E,F){v.error("PictureLineSymbol support does not exist!");return null};w.prototype.writeMesh=function(C,D,E,F,G,H,M){if(this.vvFlags&f.WGLVVFlag.COLOR||0!==this.fillColor){H=this._materialStore.get(this.materialId);var X=D.indexVector;D=D.get("geometry");var W=this.halfWidth,T=new q(F,this.geometryType,this.materialId),K=this._getOffset(D,H);T.vertexFrom=K;T.indexFrom=X.length;C.push(T);switch(E){case "esriGeometryPolyline":C=
this._clipLines(G.geometry.paths);this._write(T,X,D,K,F,W,C,H,M);break;case "esriGeometryPolygon":C=this._clipLines(G.geometry.rings);this._write(T,X,D,K,F,W,C,H,M);break;default:v.error("Unable to handle geometryType: "+E)}}};w.prototype._clipLines=function(C){for(var D=[],E=!1,F=0;F<C.length;){var G=[],H=C[F];l.reset(2);var M=H[0],X=M[0];M=M[1];if(E)l.moveTo(X,M);else{if(-8>X||X>c||-8>M||M>c){E=!0;continue}G.push({x:X,y:M})}for(var W=!1,T=H.length,K=1;K<T;++K)if(X+=H[K][0],M+=H[K][1],E)l.lineTo(X,
M);else{if(-8>X||X>c||-8>M||M>c){W=!0;break}G.push({x:X,y:M})}if(W)E=!0;else{if(E){if(G=l.resultWithStarts())for(E=0;E<G.length;E++)D.push(G[E])}else D.push({line:G,start:0});F++;E=!1}}return D};w.prototype._getOffset=function(C,D){var E=D.materialKeyInfo.hasVV()?11:8;return C.length/E};w.prototype._write=function(C,D,E,F,G,H,M,X,W){for(var T=0,K=0;K<M.length;K++){var O=M[K],N=O.line;if(!(2>N.length)){var Y=N[0],P=N[N.length-1],L=P.x-Y.x;Y=P.y-Y.y;L=1E-6>L*L+Y*Y;var Q=O.start%65535;O=A[1];for(Y=0;Y<
N.length;Y++){var ca=N[Y];P=O===A[Y%2]?A[(Y+1)%2]:A[Y%2];var ha=0===Y,ja=Y===N.length-1;ja&&L&&!this.hasPattern?h.copyExtrudeVectors(P,y):(this._computeExtrudeVectors(P,Y,N,L),T+=this._writeVertices(E,G,H,ca.x,ca.y,P,Q,T,X,W),!P.capCenter||L&&ja||this._writePieIndices(C,D,F,P),L&&ha&&!this.hasPattern&&h.copyExtrudeVectors(y,P));ha||this._writeBridgeIndices(C,D,F,O,P);if(!ja){ja=N[Y+1];ha=[ja.x-ca.x,ja.y-ca.y];var ma=h.length(ha);ha=[ha[0]/ma,ha[1]/ma];ma=Q+ma;if(65535<ma){var R=(65535-Q)/(ma-Q);Q=
ca.x+(ja.x-ca.x)*R;ca=ca.y+(ja.y-ca.y)*R;ja=O;b.buttCap(ja,ha,ha);T+=this._writeVertices(E,G,H,Q,ca,ja,65535,T,X,W);b.bridge(x,P,ja);this._writeBridgeIndices(C,D,F,P,ja);b.buttCap(ja,ha,ha);Q=ma-65535}else Q=ma,O=P}}}}C.vertexCount=T};w.prototype._writeVertices=function(C,D,E,F,G,H,M,X,W,T){var K=0,O=k.i1616to32(F,G),N=H.vectors;H=N.items;for(N=N.count;K<N;++K){var Y=H[K].vector,P=Y[0];Y=Y[1];var L=H[K].texCoords,Q=L[0],ca=L[1],ha=H[K].direction;L=ha[0];var ja=ha[1];ha=k.i1616to32(M,31*E);P=k.i8888to32(Math.round(31*
P),Math.round(31*Y),Math.round(31*Q),Math.round(31*ca));Y=k.i8888to32(Math.round(31*L),Math.round(31*ja),0,0);C.push(O);C.push(D);C.push(this.fillColor);C.push(P);C.push(ha);C.push(this.tl);C.push(this.br);C.push(Y);this._writeVV(C,T,W);H[K].base={index:X+K,point:[F,G]}}return K};w.prototype._writeVV=function(C,D,E){E.materialKeyInfo.hasVV()&&(C.push(D[m.VVType.SIZE]),C.push(D[m.VVType.COLOR]),C.push(D[m.VVType.OPACITY]))};w.prototype._writeBridgeIndices=function(C,D,E,F,G){b.bridge(x,F,G);for(F=
0;F<x.count;++F)G=x.items[F],D.push(E+G.v1.base.index),D.push(E+G.v2.base.index),D.push(E+G.v3.base.index),C.indexCount+=3};w.prototype._writePieIndices=function(C,D,E,F){b.pie(z,F);for(F=0;F<z.count;++F){var G=z.items[F];D.push(E+G.v1.base.index);D.push(E+G.v2.base.index);D.push(E+G.v3.base.index);C.indexCount+=3}};w.prototype._computeExtrudeVectors=function(C,D,E,F){var G=E[D],H=[void 0,void 0],M=[void 0,void 0];if(0<D&&D<E.length-1){var X=E[(D+E.length-1)%E.length],W=E[(D+1)%E.length];h.normalize(H,
[G.x-X.x,G.y-X.y]);h.normalize(M,[W.x-G.x,W.y-G.y])}else if(0===D)W=E[(D+1)%E.length],h.normalize(M,[W.x-G.x,W.y-G.y]),F?(X=E[E.length-2],h.normalize(H,[G.x-X.x,G.y-X.y])):H=M;else if(D===E.length-1)X=E[(D+E.length-1)%E.length],h.normalize(H,[G.x-X.x,G.y-X.y]),F?(X=E[1],h.normalize(M,[X.x-G.x,X.y-G.y])):M=H;else return;F||0!==D?F||D!==E.length-1?this._computeJoinExtrudeVectors(C,H,M):this._computeCapExtrudeVectors(C,H,M,h.CapPosition.END):this._computeCapExtrudeVectors(C,H,M,h.CapPosition.START)};
w.prototype._computeCapExtrudeVectors=function(C,D,E,F){switch(this.capType){case m.CapType.BUTT:b.buttCap(C,D,E);break;case m.CapType.ROUND:var G=h.getNumberOfSlices(Math.PI);b.roundCap(C,D,E,F,G,F===h.CapPosition.START?-1:1);break;case m.CapType.SQUARE:b.squareCap(C,D,E,F);break;default:v.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),b.buttCap(C,D,E)}};w.prototype._computeJoinExtrudeVectors=function(C,D,E){var F=h.getRads(D,E);if(F>Math.PI-.05)b.rectJoin(C,D,E);else if(this.joinType===
m.JoinType.MITER||.1>F).05>F?b.fastMiterJoin(C,D,E):F<h.MITER_SAFE_RADS?b.miterJoin(C,D,E):b.bevelJoin(C,D,E,h.SYSTEM_MAG_LIMIT);else if(this.joinType===m.JoinType.BEVEL)b.bevelJoin(C,D,E,1);else if(this.joinType===m.JoinType.ROUND){var G=h.getNumberOfSlices(F);2.3>F?2>G||.5>F?b.bevelJoin(C,D,E,1):b.roundJoin(C,D,E,G):b.unitRoundJoin(C,D,E,G)}};return w}(u["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(B,p){function a(W){var T=
{items:[],count:0},K;for(K=0;K<W;++K)T.items.push(void 0);return T}function d(W,T){c.vector[0]=W.vector[0];c.vector[1]=W.vector[1];c.texCoords[0]=W.texCoords[0];c.texCoords[1]=W.texCoords[1];c.direction[0]=W.direction[0];c.direction[1]=W.direction[1];c.base=W.base;W.vector[0]=T.vector[0];W.vector[1]=T.vector[1];W.texCoords[0]=T.texCoords[0];W.texCoords[1]=T.texCoords[1];W.direction[0]=T.direction[0];W.direction[1]=T.direction[1];W.base=T.base;T.vector[0]=c.vector[0];T.vector[1]=c.vector[1];T.texCoords[0]=
c.texCoords[0];T.texCoords[1]=c.texCoords[1];T.direction[0]=c.direction[0];T.direction[1]=c.direction[1];T.base=c.base}function g(W,T){return W[0]*T[0]+W[1]*T[1]}function n(W){return Math.sqrt(g(W,W))}function m(W,T){var K=n(T);W[0]=T[0]/K;W[1]=T[1]/K;return W}function f(W,T){W[0]=-T[1];W[1]=T[0];return W}function h(W,T){return W[0]*T[1]-W[1]*T[0]}function k(W,T){W[0]=-T[0];W[1]=-T[1];return W}function e(W,T,K){W[0]=T[0]*K;W[1]=T[1]*K;return W}function r(W,T,K){W[0]=T[0]+K[0];W[1]=T[1]+K[1];return W}
function q(W,T){var K=g(W,T);return.999<K?0:-.999>K?Math.PI:Math.acos(K)}function u(W,T,K,O,N){if(0===O)W.count=0;else{var Y=n(T),P=e(b[0],T,1/Y);K=e(b[1],K,1/Y);P=q(P,K);P=(N?-1:1)*P/O;N=Math.cos(P);P=Math.sin(P);K=T[0];var L=T[1];for(T=0;T<O-1;++T)Y=K,K=N*Y-P*L,L=P*Y+N*L,W.items[T][0]=K,W.items[T][1]=L;W.count=O-1}}function v(W){var T=W.count,K=Math.floor(T/2),O;for(O=0;O<K;++O){var N=W.items[O];W.items[O]=W.items[T-O-1];W.items[T-O-1]=N}}Object.defineProperty(p,"__esModule",{value:!0});var x;(function(W){W[W.ENTRY=
1]="ENTRY";W[W.EXIT=2]="EXIT";W[W.CAP=3]="CAP"})(x=p.VectorRole||(p.VectorRole={}));var z;(function(W){W[W.START=1]="START";W[W.END=2]="END"})(z=p.CapPosition||(p.CapPosition={}));p.SYSTEM_MAG_LIMIT=3.8;p.MITER_SAFE_RADS=2*Math.acos(1/p.SYSTEM_MAG_LIMIT);var A=p.SYSTEM_MAG_LIMIT*p.SYSTEM_MAG_LIMIT,y=16/(2*Math.PI);p.allocTriangles=function(W){var T={items:[],count:0},K;for(K=0;K<W;++K)T.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return T};p.allocExtrudeVectors=function(){var W={items:[],count:0},T;for(T=0;30>T;++T)W.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});T={};T[x.ENTRY]=a(20);T[x.EXIT]=a(20);T[x.CAP]=a(20);return{vectors:W,lists:T}};p.copyExtrudeVectors=function(W,T){var K;for(K=0;K<T.vectors.count;++K)W.vectors.items[K].vector[0]=
T.vectors.items[K].vector[0],W.vectors.items[K].vector[1]=T.vectors.items[K].vector[1],W.vectors.items[K].texCoords[0]=T.vectors.items[K].texCoords[0],W.vectors.items[K].texCoords[1]=T.vectors.items[K].texCoords[1],W.vectors.items[K].direction[0]=T.vectors.items[K].direction[0],W.vectors.items[K].direction[1]=T.vectors.items[K].direction[1],W.vectors.items[K].base=T.vectors.items[K].base;W.vectors.count=T.vectors.count;var O=T.lists[x.ENTRY],N=W.lists[x.ENTRY],Y=T.lists[x.EXIT],P=W.lists[x.EXIT],
L=T.lists[x.CAP],Q=W.lists[x.CAP];for(K=0;K<O.count;++K)N.items[K]=O.items[K];N.count=O.count;for(K=0;K<Y.count;++K)P.items[K]=Y.items[K];P.count=Y.count;for(K=0;K<L.count;++K)Q.items[K]=L.items[K];Q.count=L.count;W.capCenter=T.capCenter};var c={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};p.swapExtrudeVectors=d;var b=[],l;for(l=0;32>l;++l)b.push([void 0,void 0]);var t=function(W){var T={items:[],count:0},K;for(K=0;K<W;++K)T.items.push([void 0,void 0]);return T}(16);
p.length=n;p.normalize=m;p.getNumberOfSlices=function(W){return Math.max(Math.round(W*y),1)};p.getRads=q;p.reverse=v;var w=[void 0,void 0],C=[void 0,void 0],D=[0,0],E=[0,0],F=[0,0],G=[0,0],H=Math.cos(Math.PI/4),M=Math.sin(Math.PI/4),X=Math.sqrt(2);l=function(){function W(T){this._distanceAlongCorrection=T.distanceAlongCorrection}W.prototype.bridge=function(T,K,O){var N=K.vectors;K=K.lists[x.EXIT];var Y=O.vectors,P=O.lists[x.ENTRY];if(K.count===P.count+1){O=K.items;var L=N.items;var Q=P.items;Y=Y.items}else if(P.count===
K.count+1)O=P.items,L=Y.items,Q=K.items,Y=N.items;else if(K.count===P.count)O=P.items,L=Y.items,Q=K.items,Y=N.items;else{T.count=0;return}N=K.count+P.count-2;T.count=N;w[0]=O;w[1]=Q;C[0]=L;C[1]=Y;for(K=0;K<N;++K)O=T.items[K],L=(K+0)%2,L=C[L][w[L][Math.floor((K+0)/2)]],O.v1.vector[0]=L.vector[0],O.v1.vector[1]=L.vector[1],O.v1.texCoords[0]=L.texCoords[0],O.v1.texCoords[1]=L.texCoords[1],O.v1.direction[0]=L.direction[0],O.v1.direction[1]=L.direction[1],O.v1.base=L.base,L=(K+1)%2,L=C[L][w[L][Math.floor((K+
1)/2)]],O.v2.vector[0]=L.vector[0],O.v2.vector[1]=L.vector[1],O.v2.texCoords[0]=L.texCoords[0],O.v2.texCoords[1]=L.texCoords[1],O.v2.direction[0]=L.direction[0],O.v2.direction[1]=L.direction[1],O.v2.base=L.base,L=(K+2)%2,L=C[L][w[L][Math.floor((K+2)/2)]],O.v3.vector[0]=L.vector[0],O.v3.vector[1]=L.vector[1],O.v3.texCoords[0]=L.texCoords[0],O.v3.texCoords[1]=L.texCoords[1],O.v3.direction[0]=L.direction[0],O.v3.direction[1]=L.direction[1],O.v3.base=L.base,L=O.v1.base&&O.v1.base.point||D,Q=O.v2.base&&
O.v2.base.point||D,Y=O.v3.base&&O.v3.base.point||D,E[0]=L[0]+O.v1.vector[0],E[1]=L[1]+O.v1.vector[1],F[0]=Q[0]+O.v2.vector[0],F[1]=Q[1]+O.v2.vector[1],G[0]=Y[0]+O.v3.vector[0],G[1]=Y[1]+O.v3.vector[1],0>(F[0]-E[0])*(G[1]-E[1])-(G[0]-E[0])*(F[1]-E[1])||d(O.v2,O.v3)};W.prototype.pie=function(T,K){if(0===K.lists[x.CAP].count)T.count=0;else if(1===K.lists[x.CAP].count)T.count=0;else{T.count=K.lists[x.CAP].count-1;var O;for(O=0;O<T.count;++O){var N=T.items[O],Y=K.vectors.items[K.lists[x.CAP].items[O]];
N.v1.vector[0]=Y.vector[0];N.v1.vector[1]=Y.vector[1];N.v1.texCoords[0]=Y.texCoords[0];N.v1.texCoords[1]=Y.texCoords[1];N.v1.direction[0]=Y.direction[0];N.v1.direction[1]=Y.direction[1];N.v1.base=Y.base;Y=K.vectors.items[K.lists[x.CAP].items[O+1]];N.v2.vector[0]=Y.vector[0];N.v2.vector[1]=Y.vector[1];N.v2.texCoords[0]=Y.texCoords[0];N.v2.texCoords[1]=Y.texCoords[1];N.v2.direction[0]=Y.direction[0];N.v2.direction[1]=Y.direction[1];N.v2.base=Y.base;Y=K.vectors.items[K.capCenter];N.v3.vector[0]=Y.vector[0];
N.v3.vector[1]=Y.vector[1];N.v3.texCoords[0]=Y.texCoords[0];N.v3.texCoords[1]=Y.texCoords[1];N.v3.direction[0]=Y.direction[0];N.v3.direction[1]=Y.direction[1];N.v3.base=Y.base;Y=N.v1.base&&N.v1.base.point||D;var P=N.v2.base&&N.v2.base.point||D,L=N.v3.base&&N.v3.base.point||D;E[0]=Y[0]+N.v1.vector[0];E[1]=Y[1]+N.v1.vector[1];F[0]=P[0]+N.v2.vector[0];F[1]=P[1]+N.v2.vector[1];G[0]=L[0]+N.v3.vector[0];G[1]=L[1]+N.v3.vector[1];0>(F[0]-E[0])*(G[1]-E[1])-(G[0]-E[0])*(F[1]-E[1])||d(N.v2,N.v3)}}};W.prototype.buttCap=
function(T,K,O){this.fastMiterJoin(T,K,O)};W.prototype.roundCap=function(T,K,O,N,Y,P){void 0===P&&(P=0);this.fastMiterJoin(T,K,O);O=N===z.START?0:1;N=N===z.START?1:0;T.capCenter=T.vectors.count;K=T.vectors.items[T.capCenter];K.vector[0]=0;K.vector[1]=0;K.texCoords[0]=0;K.texCoords[1]=0;K.direction[0]=0;K.direction[1]=0;++T.vectors.count;u(t,T.vectors.items[O].vector,T.vectors.items[N].vector,Y,!1);Y=T.vectors.count;K=T.lists[x.CAP];K.items[0]=O;O=T.vectors.items[O].texCoords[1];var L=T.vectors.items[N].texCoords[1],
Q;for(Q=0;Q<t.count;++Q){var ca=P*(1-Math.abs(t.count/2-Q)/(t.count/2)),ha=O+Q/(t.count-1)*(L-O),ja=t.items[Q],ma=T.vectors.items[Y+Q];ma.vector[0]=ja[0];ma.vector[1]=ja[1];ma.texCoords[0]=ca;ma.texCoords[1]=ha;ma.direction[0]=0;ma.direction[1]=0;K.items[Q+1]=Y+Q}K.items[t.count+1]=N;K.count=t.count+2;T.vectors.count=Y+t.count};W.prototype.squareCap=function(T,K,O,N){this.fastMiterJoin(T,K,O);K=N===z.START?0:1;O=N===z.START?1:0;var Y=b[0],P=b[1],L=b[2],Q=b[3];N=b[4];var ca=T.vectors.items[K].vector;
Y[0]=H*ca[0]-M*ca[1];Y[1]=M*ca[0]+H*ca[1];e(Q,Y,X);P[0]=H*Y[0]-M*Y[1];P[1]=M*Y[0]+H*Y[1];L[0]=H*P[0]-M*P[1];L[1]=M*P[0]+H*P[1];e(N,L,X);K=T.vectors.items[K];K.vector[0]=Q[0];K.vector[1]=Q[1];T=T.vectors.items[O];T.vector[0]=N[0];T.vector[1]=N[1]};W.prototype.fastMiterJoin=function(T,K,O){O=f(b[0],O);K=k(b[1],O);var N=T.vectors.items[0];N.vector[0]=O[0];N.vector[1]=O[1];N.texCoords[0]=0;N.texCoords[1]=-1;N.direction[0]=0;N.direction[1]=0;O=T.vectors.items[1];O.vector[0]=K[0];O.vector[1]=K[1];O.texCoords[0]=
0;O.texCoords[1]=1;O.direction[0]=0;O.direction[1]=0;T.vectors.count=2;K=T.lists[x.ENTRY];K.items[0]=0;K.items[1]=1;K.count=2;K=T.lists[x.EXIT];K.items[0]=0;K.items[1]=1;K.count=2;T.lists[x.CAP].count=0;T.capCenter=void 0};W.prototype.miterJoin=function(T,K,O){var N=f(b[0],K),Y=f(b[1],O),P=b[2];P[0]=N[0]+Y[0];P[1]=N[1]+Y[1];Y=m(b[3],P);N=g(Y,N);Y=e(b[4],Y,1/N);N=k(b[5],Y);this._distanceAlongCorrection?(P=T.vectors.items[0],P.vector[0]=Y[0],P.vector[1]=Y[1],P.texCoords[0]=0,P.texCoords[1]=-1,P.direction[0]=
K[0],P.direction[1]=K[1],P=T.vectors.items[1],P.vector[0]=N[0],P.vector[1]=N[1],P.texCoords[0]=0,P.texCoords[1]=1,P.direction[0]=K[0],P.direction[1]=K[1],K=T.vectors.items[2],K.vector[0]=Y[0],K.vector[1]=Y[1],K.texCoords[0]=0,K.texCoords[1]=-1,K.direction[0]=O[0],K.direction[1]=O[1],K=T.vectors.items[3],K.vector[0]=N[0],K.vector[1]=N[1],K.texCoords[0]=0,K.texCoords[1]=1,K.direction[0]=O[0],K.direction[1]=O[1],T.vectors.count=4,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=1,O.count=2,O=T.lists[x.EXIT],
O.items[0]=2,O.items[1]=3):(P=T.vectors.items[0],P.vector[0]=Y[0],P.vector[1]=Y[1],P.texCoords[0]=0,P.texCoords[1]=-1,P.direction[0]=0,P.direction[1]=0,P=T.vectors.items[1],P.vector[0]=N[0],P.vector[1]=N[1],P.texCoords[0]=0,P.texCoords[1]=1,P.direction[0]=0,P.direction[1]=0,T.vectors.count=2,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=1,O.count=2,O=T.lists[x.EXIT],O.items[0]=0,O.items[1]=1);O.count=2;T.lists[x.CAP].count=0;T.capCenter=void 0};W.prototype.bevelJoin=function(T,K,O,N){var Y=N*N;N=h(K,
O);var P=0<N?[-1,1]:[1,-1],L=P[0];P=P[1];var Q=0<N?k(b[0],f(b[1],K)):f(b[2],K),ca=0<N?k(b[3],f(b[4],O)):f(b[5],O),ha=b[6];ha[0]=Q[0]+ca[0];ha[1]=Q[1]+ca[1];var ja=m(b[7],ha),ma=k(b[8],ja),R=g(ja,Q);ha=h(ja,Q);var fa=Math.abs(ha/R);ha=1+fa*fa;var ka=ha<A?[fa,this._distanceAlongCorrection]:[Math.sqrt(A-1),!0],qa=ka[0];ka=ka[1];var na=ha<Y?[fa,this._distanceAlongCorrection]:[Math.sqrt(Y-1),!0];fa=na[0];(na=na[1])&&ka?(ka=T.vectors.items[0],r(ka.vector,k(b[9],Q),e(b[10],k(b[11],K),qa)),ka.texCoords[0]=
0,ka.texCoords[1]=L,ka.direction[0]=this._distanceAlongCorrection?K[0]:0,ka.direction[1]=this._distanceAlongCorrection?K[1]:0,ma=T.vectors.items[1],r(ma.vector,k(b[12],ca),e(b[13],O,qa)),ma.texCoords[0]=0,ma.texCoords[1]=L,ma.direction[0]=this._distanceAlongCorrection?O[0]:0,ma.direction[1]=this._distanceAlongCorrection?O[1]:0,L=T.vectors.items[2],L.vector[0]=0,L.vector[1]=0,L.texCoords[0]=0,L.texCoords[1]=0,L.direction[0]=0,L.direction[1]=0,L=T.vectors.items[3],r(L.vector,Q,e(b[14],K,fa)),L.texCoords[0]=
0,L.texCoords[1]=P,L.direction[0]=this._distanceAlongCorrection?K[0]:0,L.direction[1]=this._distanceAlongCorrection?K[1]:0,K=T.vectors.items[4],r(K.vector,ca,e(b[15],k(b[16],O),fa)),K.texCoords[0]=0,K.texCoords[1]=P,K.direction[0]=this._distanceAlongCorrection?O[0]:0,K.direction[1]=this._distanceAlongCorrection?O[1]:0,T.vectors.count=5,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=2,O.items[2]=3,O.count=3,O=T.lists[x.EXIT],O.items[0]=1,O.items[1]=2,O.items[2]=4,O.count=3,ha<Y?(Y=T.lists[x.CAP],Y.count=
0,T.capCenter=void 0):(Y=T.lists[x.CAP],Y.items[0]=3,Y.items[1]=4,Y.count=2,T.capCenter=2)):!na&&ka?(ka=T.vectors.items[0],r(ka.vector,k(b[9],Q),e(b[10],k(b[11],K),qa)),ka.texCoords[0]=0,ka.texCoords[1]=L,ka.direction[0]=this._distanceAlongCorrection?K[0]:0,ka.direction[1]=this._distanceAlongCorrection?K[1]:0,ma=T.vectors.items[1],r(ma.vector,k(b[12],ca),e(b[13],O,qa)),ma.texCoords[0]=0,ma.texCoords[1]=L,ma.direction[0]=this._distanceAlongCorrection?O[0]:0,ma.direction[1]=this._distanceAlongCorrection?
O[1]:0,L=T.vectors.items[2],L.vector[0]=0,L.vector[1]=0,L.texCoords[0]=0,L.texCoords[1]=0,L.direction[0]=0,L.direction[1]=0,L=T.vectors.items[3],e(L.vector,ja,1/R),L.texCoords[0]=0,L.texCoords[1]=P,L.direction[0]=0,L.direction[1]=0,T.vectors.count=4,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=2,O.items[2]=3,O.count=3,O=T.lists[x.EXIT],O.items[0]=1,O.items[1]=2,O.items[2]=3,O.count=3,T.lists[x.CAP].count=0,T.capCenter=void 0):na&&!ka?(ka=T.vectors.items[0],e(ka.vector,ma,1/R),ka.texCoords[0]=0,ka.texCoords[1]=
L,ka.direction[0]=0,ka.direction[1]=0,ma=T.vectors.items[1],ma.vector[0]=0,ma.vector[1]=0,ma.texCoords[0]=0,ma.texCoords[1]=0,ma.direction[0]=0,ma.direction[1]=0,L=T.vectors.items[2],r(L.vector,Q,e(b[9],K,fa)),L.texCoords[0]=0,L.texCoords[1]=P,L.direction[0]=this._distanceAlongCorrection?K[0]:0,L.direction[1]=this._distanceAlongCorrection?K[1]:0,L=T.vectors.items[3],r(L.vector,ca,e(b[10],k(b[11],O),fa)),L.texCoords[0]=0,L.texCoords[1]=P,L.direction[0]=this._distanceAlongCorrection?O[0]:0,L.direction[1]=
this._distanceAlongCorrection?O[1]:0,T.vectors.count=4,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=1,O.items[2]=2,O.count=3,O=T.lists[x.EXIT],O.items[0]=0,O.items[1]=1,O.items[2]=3,O.count=3,ha<Y?(Y=T.lists[x.CAP],Y.count=0,T.capCenter=void 0):(Y=T.lists[x.CAP],Y.items[0]=2,Y.items[1]=3,Y.count=2,T.capCenter=1)):na||ka||(ka=T.vectors.items[0],e(ka.vector,ma,1/R),ka.texCoords[0]=0,ka.texCoords[1]=L,ka.direction[0]=0,ka.direction[1]=0,ma=T.vectors.items[1],e(ma.vector,ja,1/R),ma.texCoords[0]=0,ma.texCoords[1]=
P,ma.direction[0]=0,ma.direction[1]=0,T.vectors.count=2,O=T.lists[x.ENTRY],O.items[0]=0,O.items[1]=1,O.count=2,O=T.lists[x.EXIT],O.items[0]=0,O.items[1]=1,O.count=2,T.lists[x.CAP].count=0,T.capCenter=void 0);0>N&&(v(T.lists[x.ENTRY]),v(T.lists[x.EXIT]))};W.prototype.roundJoin=function(T,K,O,N){var Y=h(K,O),P=0<Y?[-1,1]:[1,-1],L=P[0];P=P[1];var Q=0<Y?k(b[0],f(b[1],K)):f(b[2],K),ca=0<Y?k(b[3],f(b[4],O)):f(b[5],O),ha=b[6];ha[0]=Q[0]+ca[0];ha[1]=Q[1]+ca[1];var ja=m(b[7],ha);ha=k(b[8],ja);var ma=g(ja,
Q);ja=h(ja,Q);ja=Math.abs(ja/ma);var R=1+ja*ja<A?[ja,this._distanceAlongCorrection]:[Math.sqrt(A-1),!0];ja=R[0];R[1]?(R=T.vectors.items[0],R.vector[0]=Q[0],R.vector[1]=Q[1],R.texCoords[0]=0,R.texCoords[1]=P,R.direction[0]=0,R.direction[1]=0,R=T.vectors.items[1],R.vector[0]=ca[0],R.vector[1]=ca[1],R.texCoords[0]=0,R.texCoords[1]=P,R.direction[0]=0,R.direction[1]=0,R=T.vectors.items[2],r(R.vector,k(b[9],Q),e(b[10],k(b[11],K),ja)),R.texCoords[0]=0,R.texCoords[1]=L,R.direction[0]=this._distanceAlongCorrection?
K[0]:0,R.direction[1]=this._distanceAlongCorrection?K[1]:0,K=T.vectors.items[3],r(K.vector,k(b[12],ca),e(b[13],O,ja)),K.texCoords[0]=0,K.texCoords[1]=L,K.direction[0]=this._distanceAlongCorrection?O[0]:0,K.direction[1]=this._distanceAlongCorrection?O[1]:0,O=T.vectors.items[4],O.vector[0]=0,O.vector[1]=0,O.texCoords[0]=0,O.texCoords[1]=0,O.direction[0]=0,O.direction[1]=0,T.vectors.count=5,O=T.lists[x.ENTRY],O.items[0]=2,O.items[1]=4,O.items[2]=0,O.count=3,O=T.lists[x.EXIT],O.items[0]=3,O.items[1]=
4,O.items[2]=1,O.count=3,T.capCenter=4):(R=T.vectors.items[0],R.vector[0]=Q[0],R.vector[1]=Q[1],R.texCoords[0]=0,R.texCoords[1]=P,R.direction[0]=0,R.direction[1]=0,R=T.vectors.items[1],R.vector[0]=ca[0],R.vector[1]=ca[1],R.texCoords[0]=0,R.texCoords[1]=P,R.direction[0]=0,R.direction[1]=0,R=T.vectors.items[2],e(R.vector,ha,1/ma),R.texCoords[0]=0,R.texCoords[1]=L,R.direction[0]=0,R.direction[1]=0,K=T.vectors.items[3],K.vector[0]=0,K.vector[1]=0,K.texCoords[0]=0,K.texCoords[1]=0,K.direction[0]=0,K.direction[1]=
0,T.vectors.count=4,O=T.lists[x.ENTRY],O.items[0]=2,O.items[1]=3,O.items[2]=0,O.count=3,O=T.lists[x.EXIT],O.items[0]=2,O.items[1]=3,O.items[2]=1,O.count=3,T.capCenter=3);u(t,Q,ca,N,0>Y);N=T.vectors.count;Q=T.lists[x.CAP];for(ca=Q.items[0]=0;ca<t.count;++ca)O=t.items[ca],L=T.vectors.items[N+ca],L.vector[0]=O[0],L.vector[1]=O[1],L.texCoords[0]=0,L.texCoords[1]=P,L.direction[0]=0,L.direction[1]=0,Q.items[ca+1]=N+ca;Q.items[t.count+1]=1;Q.count=t.count+2;T.vectors.count=N+t.count;0>Y&&(v(T.lists[x.ENTRY]),
v(T.lists[x.EXIT]))};W.prototype.unitRoundJoin=function(T,K,O,N){var Y=h(K,O),P=0<Y?[-1,1]:[1,-1],L=P[0];P=P[1];K=0<Y?k(b[0],f(b[1],K)):f(b[2],K);O=0<Y?k(b[3],f(b[4],O)):f(b[5],O);var Q=T.vectors.items[0];Q.vector[0]=K[0];Q.vector[1]=K[1];Q.texCoords[0]=0;Q.texCoords[1]=P;Q.direction[0]=0;Q.direction[1]=0;Q=T.vectors.items[1];Q.vector[0]=O[0];Q.vector[1]=O[1];Q.texCoords[0]=0;Q.texCoords[1]=P;Q.direction[0]=0;Q.direction[1]=0;Q=T.vectors.items[2];k(Q.vector,K);Q.texCoords[0]=0;Q.texCoords[1]=L;Q.direction[0]=
0;Q.direction[1]=0;Q=T.vectors.items[3];k(Q.vector,O);Q.texCoords[0]=0;Q.texCoords[1]=L;Q.direction[0]=0;Q.direction[1]=0;L=T.vectors.items[4];L.vector[0]=0;L.vector[1]=0;L.texCoords[0]=0;L.texCoords[1]=0;L.direction[0]=0;L.direction[1]=0;T.vectors.count=5;L=T.lists[x.ENTRY];L.items[0]=2;L.items[1]=0;L.count=2;L=T.lists[x.EXIT];L.items[0]=3;L.items[1]=1;L.count=2;T.capCenter=4;u(t,K,O,N,0>Y);N=T.vectors.count;K=T.lists[x.CAP];for(L=K.items[0]=0;L<t.count;++L)O=t.items[L],Q=T.vectors.items[N+L],Q.vector[0]=
O[0],Q.vector[1]=O[1],Q.texCoords[0]=0,Q.texCoords[1]=P,Q.direction[0]=0,Q.direction[1]=0,K.items[L+1]=N+L;K.items[t.count+1]=1;K.count=t.count+2;T.vectors.count=N+t.count;0>Y&&(v(T.lists[x.ENTRY]),v(T.lists[x.EXIT]))};W.prototype.rectJoin=function(T,K,O){K=f(b[0],K);O=f(b[1],O);var N=T.vectors.items[0];N.vector[0]=K[0];N.vector[1]=K[1];N.texCoords[0]=0;N.texCoords[1]=-1;N.direction[0]=0;N.direction[1]=0;N=T.vectors.items[1];N.vector[0]=O[0];N.vector[1]=O[1];N.texCoords[0]=0;N.texCoords[1]=-1;N.direction[0]=
0;N.direction[1]=0;N=T.vectors.items[2];k(N.vector,K);N.texCoords[0]=0;N.texCoords[1]=1;N.direction[0]=0;N.direction[1]=0;K=T.vectors.items[3];k(K.vector,O);K.texCoords[0]=0;K.texCoords[1]=1;K.direction[0]=0;K.direction[1]=0;T.vectors.count=4;K=T.lists[x.ENTRY];K.items[0]=0;K.items[1]=2;K.count=2;K=T.lists[x.EXIT];K.items[0]=1;K.items[1]=3;K.count=2;T.capCenter=void 0};return W}();p.Tessellator=l})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q){Object.defineProperty(p,"__esModule",{value:!0});var u=d.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");B=function(v){function x(z,A,y,c,b,l,t,w,C,D,E){if(255<t||255<w)u.error("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels"),t>w?(w*=255/t,t=255):(t*=255/w,w=255);var F=v.call(this)||this;F.geometryType=k.WGLGeometryType.MARKER;var G=m.create(),H=n.create(),M=E.sdf?.5:1;n.translate(H,H,new Float32Array([M*
y,M*-c]));b&&n.rotate(H,H,3.14159265359/180*b);F._materialStore=z;F.vvFlags=A;F._materialId=z.createSpriteMaterial(E,F.geometryType,A);F._fillColor=l;F._outlineColor=C;F._sizeOutlineWidth=e.i8888to32(t,w,D,0);z=Math.round(E.rect.x/4);A=Math.round(E.rect.y/4);b=z+Math.round(E.rect.width/4);E=A+Math.round(E.rect.height/4);G.set([-.5*t,-.5*w]);m.transformMat2d(G,G,H);F._offsetUpperLeft=e.i1616to32(G[0],G[1]);F._texUpperLeft=e.i8888to32(z,A,0,0);G.set([.5*t,-.5*w]);m.transformMat2d(G,G,H);F._offsetUpperRight=
e.i1616to32(G[0],G[1]);F._texUpperRight=e.i8888to32(b,A,0,0);G.set([-.5*t,.5*w]);m.transformMat2d(G,G,H);F._offsetBottomLeft=e.i1616to32(G[0],G[1]);F._texBottomLeft=e.i8888to32(z,E,0,0);G.set([.5*t,.5*w]);m.transformMat2d(G,G,H);F._offsetBottomRight=e.i1616to32(G[0],G[1]);F._texBottomRight=e.i8888to32(b,E,0,0);F.height=w;F.width=t;F.xOffset=y;F.yOffset=c;return F}a(x,v);x.fromPictureMarker=function(z,A,y,c,b){b=Math.round(g.pt2px(y.width));var l=Math.round(g.pt2px(y.height)),t=h.PICTURE_FILL_COLOR,
w=Math.round(g.pt2px(y.xoffset||0)),C=Math.round(g.pt2px(y.yoffset||0));return new x(z,A,w,C,y.angle,t,b,l,0,0,c)};x.fromSimpleMarker=function(z,A,y,c,b){b=f.premultiplyAlphaRGBA(y.color);var l=Math.round(g.pt2px(y.size)),t=Math.round(g.pt2px(y.xoffset||0)),w=Math.round(g.pt2px(y.yoffset||0)),C=y.outline,D=(C&&C.color&&f.premultiplyAlphaRGBA(C.color))|0;C=(C&&C.width&&Math.round(g.pt2px(C.width)))|0;return new x(z,A,t,w,y.angle,b,l,l,D,C,c)};x.prototype.writeMesh=function(z,A,y,c,b,l,t){l=this._materialStore.get(this._materialId);
var w=A.indexVector;A=A.get("geometry");var C=new r(c,this.geometryType,this._materialId),D=this._getOffset(A,l);z.push(C);C.vertexFrom=D;C.indexFrom=w.length;switch(y){case "esriGeometryPoint":y=b.geometry;z=y.x;y=y.y;this._writeVertices(C,A,c,this._getPos(z,y),l,t);this._writeIndices(C,w,D);break;case "esriGeometryPolyline":this._writeMany(C,w,A,D,c,b.geometry.paths[0],l,t);break;case "esriGeometryPolygon":(y=b.centroid)?(z=y.x,y=y.y,this._writeVertices(C,A,c,this._getPos(z,y),l,t),this._writeIndices(C,
w,D)):u.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(C,w,A,D,c,b.geometry.points,l,t);break;default:u.error("Unable to handle geometryType: "+y)}};x.prototype._getPos=function(z,A){return e.i1616to32(z,A)};x.prototype._writeMany=function(z,A,y,c,b,l,t,w){for(var C=0,D=0,E=0,F=0;F<l.length;F++){var G=l[F],H=G[0];G=G[1];this._writeVertices(z,y,b,this._getPos(H+C,G+D),t,w);this._writeIndices(z,A,c+E);C+=H;D+=G;E+=4}};
x.prototype._getOffset=function(z,A){var y=A.materialKeyInfo.hasVV()?11:7;return z.length/y};x.prototype._writeVertices=function(z,A,y,c,b,l){A.push(c);A.push(this._offsetUpperLeft);A.push(this._texUpperLeft);A.push(y);A.push(this._fillColor);A.push(this._outlineColor);A.push(this._sizeOutlineWidth);this._writeVV(A,l,b);A.push(c);A.push(this._offsetUpperRight);A.push(this._texUpperRight);A.push(y);A.push(this._fillColor);A.push(this._outlineColor);A.push(this._sizeOutlineWidth);this._writeVV(A,l,
b);A.push(c);A.push(this._offsetBottomLeft);A.push(this._texBottomLeft);A.push(y);A.push(this._fillColor);A.push(this._outlineColor);A.push(this._sizeOutlineWidth);this._writeVV(A,l,b);A.push(c);A.push(this._offsetBottomRight);A.push(this._texBottomRight);A.push(y);A.push(this._fillColor);A.push(this._outlineColor);A.push(this._sizeOutlineWidth);this._writeVV(A,l,b);z.vertexCount+=4};x.prototype._writeVV=function(z,A,y){y.materialKeyInfo.hasVV()&&(z.push(A[k.VVType.SIZE]),z.push(A[k.VVType.COLOR]),
z.push(A[k.VVType.OPACITY]),z.push(A[k.VVType.ROTATION]))};x.prototype._writeIndices=function(z,A,y){A.push(y+0);A.push(y+1);A.push(y+2);A.push(y+1);A.push(y+3);A.push(y+2);z.indexCount+=6};return x}(q["default"]);p["default"]=B})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(B){var p={create:function(){var a=new B.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var d=new B.ARRAY_TYPE(6);d[0]=a[0];d[1]=a[1];d[2]=a[2];
d[3]=a[3];d[4]=a[4];d[5]=a[5];return d},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,d,g,n,m,f){var h=new B.ARRAY_TYPE(6);h[0]=a;h[1]=d;h[2]=g;h[3]=n;h[4]=m;h[5]=f;return h},set:function(a,d,g,n,m,f,h){a[0]=d;a[1]=g;a[2]=n;a[3]=m;a[4]=f;a[5]=h;return a},invert:function(a,d){var g=d[0],n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=g*f-n*m;if(!e)return null;e=1/e;a[0]=f*
e;a[1]=-n*e;a[2]=-m*e;a[3]=g*e;a[4]=(m*k-f*h)*e;a[5]=(n*h-g*k)*e;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=g[0],r=g[1],q=g[2],u=g[3],v=g[4];g=g[5];a[0]=n*e+f*r;a[1]=m*e+h*r;a[2]=n*q+f*u;a[3]=m*q+h*u;a[4]=n*v+f*g+k;a[5]=m*v+h*g+d;return a}};p.mul=p.multiply;p.rotate=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=Math.sin(g);g=Math.cos(g);a[0]=n*g+f*e;a[1]=m*g+h*e;a[2]=n*-e+f*g;a[3]=
m*-e+h*g;a[4]=k;a[5]=d;return a};p.scale=function(a,d,g){var n=d[1],m=d[2],f=d[3],h=d[4],k=d[5],e=g[0];g=g[1];a[0]=d[0]*e;a[1]=n*e;a[2]=m*g;a[3]=f*g;a[4]=h;a[5]=k;return a};p.translate=function(a,d,g){var n=d[0],m=d[1],f=d[2],h=d[3],k=d[4];d=d[5];var e=g[0];g=g[1];a[0]=n;a[1]=m;a[2]=f;a[3]=h;a[4]=n*e+f*g+k;a[5]=m*e+h*g+d;return a};p.fromRotation=function(a,d){var g=Math.sin(d),n=Math.cos(d);a[0]=n;a[1]=g;a[2]=-g;a[3]=n;a[4]=0;a[5]=0;return a};p.fromScaling=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=
d[1];a[4]=0;a[5]=0;return a};p.fromTranslation=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=d[0];a[5]=d[1];return a};p.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};p.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};p.add=function(a,d,g){a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];a[3]=d[3]+g[3];a[4]=d[4]+g[4];a[5]=d[5]+g[5];return a};p.subtract=function(a,d,g){a[0]=
d[0]-g[0];a[1]=d[1]-g[1];a[2]=d[2]-g[2];a[3]=d[3]-g[3];a[4]=d[4]-g[4];a[5]=d[5]-g[5];return a};p.sub=p.subtract;p.multiplyScalar=function(a,d,g){a[0]=d[0]*g;a[1]=d[1]*g;a[2]=d[2]*g;a[3]=d[3]*g;a[4]=d[4]*g;a[5]=d[5]*g;return a};p.multiplyScalarAndAdd=function(a,d,g,n){a[0]=d[0]+g[0]*n;a[1]=d[1]+g[1]*n;a[2]=d[2]+g[2]*n;a[3]=d[3]+g[3]*n;a[4]=d[4]+g[4]*n;a[5]=d[5]+g[5]*n;return a};p.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]};p.equals=
function(a,d){var g=a[0],n=a[1],m=a[2],f=a[3],h=a[4],k=a[5],e=d[0],r=d[1],q=d[2],u=d[3],v=d[4],x=d[5];return Math.abs(g-e)<=B.EPSILON*Math.max(1,Math.abs(g),Math.abs(e))&&Math.abs(n-r)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(m-q)<=B.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(f-u)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(h-v)<=B.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(k-x)<=B.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))};return p})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v){Object.defineProperty(p,"__esModule",{value:!0});var x=d.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),z=24*1.2,A=function(){function y(c,b,l,t,w,C,D,E,F){this.materialId=c;this.vertexOffsetUpperLeft=b;this.vertexOffsetUpperRight=l;this.vertexOffsetLowerLeft=t;this.vertexOffsetLowerRight=w;this.texFontSizeUpperLeft=C;this.texFontSizeUpperRight=D;this.texFontSizeLowerLeft=E;this.texFontSizeLowerRight=F}y.from=function(c,b,l,t,w){var C=c.glyphMosaicItem,
D=C.rect,E=C.metrics,F=Math.round(D.x/4),G=Math.round(D.y/4);C=F+Math.round(D.width/4);var H=G+Math.round(D.height/4);if(c.codePoint){var M=c.x+0+E.left;c=c.y+-17-E.top;c=new h.Point(M-4,c-4);D=new h.Point(c.x+D.width,c.y+D.height)}else M=c.x,c=c.y,c=new h.Point(M,c),D=new h.Point(c.x+E.width,c.y+E.height);E=new h.Point(c.x,D.y);M=new h.Point(D.x,c.y);if(l){var X=Math.cos(l);l=Math.sin(l);c.rotate(X,l);D.rotate(X,l);E.rotate(X,l);M.rotate(X,l)}l=k.i1616to32(8*c.x,8*c.y);c=k.i1616to32(8*M.x,8*M.y);
E=k.i1616to32(8*E.x,8*E.y);D=k.i1616to32(8*D.x,8*D.y);M=k.i8888to32(F,G,t,w);G=k.i8888to32(C,G,t,w);F=k.i8888to32(F,H,t,w);t=k.i8888to32(C,H,t,w);return new y(b,l,c,E,D,M,G,F,t)};return y}();p.ComputedGlyph=A;B=function(y){function c(b,l,t){var w=y.call(this)||this;w.geometryType=f.WGLGeometryType.TEXT;var C=t.haloColor;w.color=(t.color&&n.premultiplyAlphaRGBA(t.color))|0;w.textSize=g.pt2px(t.font.size);var D=t.yoffset/t.font.size;w.shapingXOffset=t.xoffset/t.font.size*24;w.shapingYOffset=24*D;w.haloColor=
(C&&n.premultiplyAlphaRGBA(C))|0;w.haloSize=10*g.pt2px(g.toPt(t.haloSize||0));w.textPropColor=w.color||m.PICTURE_FILL_COLOR;w.textPropSize=g.pt2px(t.font.size);w.textPropAngle=t.angle*Math.PI/180;w.xOffset=g.pt2px(t.xoffset);w.yOffset=g.pt2px(t.yoffset);w.textPropHAnchor="left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5;w.textPropVAnchor="top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5;w.textPropHaloColor=w.haloColor||4294967295;w.textPropHaloSize=g.pt2px(g.toPt(t.haloSize||
0));w._materialStore=b;w.vvFlags=l;return w}a(c,y);c.fromText=function(b,l,t,w,C){b=new c(b,l,t);b.computeGlyphs(C,t.text,!1);return b};c.prototype.writeMesh=function(b,l,t,w,C,D,E){D=l.indexVector;var F=l.get("geometry");l=l.get("visibility");var G=this._getOffset(F);switch(t){case "esriGeometryPoint":C=C.geometry;t=C.x;C=C.y;this._writeVertices(b,D,F,l,G,w,t,C,E);break;case "esriGeometryPolygon":if(C.centroid){C=C.centroid;t=C.x;C=C.y;this._writeVertices(b,D,F,l,G,w,t,C,E);break}default:x.error("Unable to handle geometryType: "+
t)}};c.prototype.computeGlyphs=function(b,l,t){if(!l||!l.length)return this._computedGlyphs=[],null;b=this._computeShaping(b,240,z,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);l=v.bidiText(l);l=b.getShaping(l[0],l[1]);b=Array(l.length);for(var w=0;w<l.length;w++){var C=this.textPropAngle,D=this.textSize,E=this.haloSize,F=this._materialStore.createGlyphMaterial(l[w].glyphMosaicItem,f.WGLGeometryType.TEXT,this.vvFlags);b[w]=A.from(l[w],F,C,D,E)}this._computedGlyphs=
b;if(!t)return null;t=e.getBox(l);t.width*=this.textSize/24;t.height*=this.textSize/24;return new q["default"](t.x,t.y,t.width,t.height)};c.prototype._computeShaping=function(b,l,t,w,C,D,E,F,G){return this._shaping=new e([b],240,z,0,[C,D],E,F,.5)};c.prototype._getOffset=function(b){return b.length/(this.vvFlags?9:5)};c.prototype._writeVertices=function(b,l,t,w,C,D,E,F,G){var H=this._computedGlyphs,M=k.i1616to32(2*E,2*F);E=k.i1616to32(2*E+1,2*F);F=0;if(this.haloSize)for(var X=0;X<H.length;X++,F+=4){var W=
H[X].materialId,T=this._materialStore.get(W);W=new r(D,this.geometryType,W);W.vertexFrom=C;W.indexFrom=l.length;this._writeVertex(W,t,w,D,E,this.haloColor,H[X],T,G);this._writeIndices(W,l,C+F);b.push(W)}for(X=0;X<H.length;X++,F+=4)W=H[X].materialId,T=this._materialStore.get(W),W=new r(D,this.geometryType,W),W.vertexFrom=C,W.indexFrom=l.length,this._writeVertex(W,t,w,D,M,this.color,H[X],T,G),this._writeIndices(W,l,C+F),b.push(W)};c.prototype._writeVertex=function(b,l,t,w,C,D,E,F,G){l.push(C);l.push(w);
l.push(D);l.push(E.vertexOffsetUpperLeft);l.push(E.texFontSizeUpperLeft);this._writeVV(l,G,F);l.push(C);l.push(w);l.push(D);l.push(E.vertexOffsetUpperRight);l.push(E.texFontSizeUpperRight);this._writeVV(l,G,F);l.push(C);l.push(w);l.push(D);l.push(E.vertexOffsetLowerLeft);l.push(E.texFontSizeLowerLeft);this._writeVV(l,G,F);l.push(C);l.push(w);l.push(D);l.push(E.vertexOffsetLowerRight);l.push(E.texFontSizeLowerRight);this._writeVV(l,G,F);t.push(4294967295);b.vertexCount+=4};c.prototype._writeVV=function(b,
l,t){t.materialKeyInfo.hasVV()&&(b.push(l[f.VVType.SIZE]),b.push(l[f.VVType.COLOR]),b.push(l[f.VVType.OPACITY]),b.push(l[f.VVType.ROTATION]))};c.prototype._writeIndices=function(b,l,t){l.push(t+0);l.push(t+1);l.push(t+2);l.push(t+1);l.push(t+3);l.push(t+2);b.indexCount+=6};return c}(u["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(B,p,a){return function(){function d(g,n,m,f,h,k,e,r){this._glyphItems=
g;this._maxWidth=n;this._lineHeight=m;this._letterSpacing=f;this._offset=h;this._hAnchor=k;this._vAnchor=e;this._justify=r}d.prototype.getShaping=function(g,n){for(var m=this._letterSpacing,f=this._lineHeight,h=this._justify,k=this._maxWidth,e=[],r=0,q=0,u=0,v=0,x=-1,z=0,A=-1,y=g.length,c=0;c<y;c++){var b=g.charCodeAt(c);if(10===b){if(c!==y-1){if(x>=v){r=e[x];var l=r.x+r.glyphMosaicItem.metrics.advance;z=Math.max(l,z);h&&this._applyJustification(e,v,x);v=e.length}q=n?q-f:q+f;r=0;++u}}else{l=void 0;
for(var t=0,w=this._glyphItems;t<w.length&&!(l=w[t][b]);t++);if(l){e.push({codePoint:b,x:r,y:q,glyphMosaicItem:l});r+=l.metrics.advance+m;if(0<k&&r>k&&0<=A){t=A+1;l=e[t].x;z=Math.max(l,z);for(w=t;w<e.length;w++)e[w].y=n?e[w].y-f:e[w].y+f,e[w].x-=l;h&&this._applyJustification(e,v,A);q=n?q-f:q+f;r-=l;++u;v=t;A=-1}++x;32===b&&(A=e.length-1)}}}x>=v&&(r=e[x],z=Math.max(z,r.x+r.glyphMosaicItem.metrics.advance),h&&this._applyJustification(e,v,x));if(0<e.length)for(m=(h-this._hAnchor)*z,h=(-this._vAnchor*
(u+1)+.5)*f,n&&u&&(h+=u*f),m+=this._offset[0],h+=this._offset[1],f=0;f<e.length;f++)u=e[f],u.x+=m,u.y+=h;return e};d.getBox=function(g){var n=g.length;if(0!==n){for(var m=g[0].x+g[0].glyphMosaicItem.metrics.left,f=m,h=g[0].y,k=h,e=h,r=1;r<n;r++){var q=g[r],u=q.x+q.glyphMosaicItem.metrics.left;u<m&&(m=u);u>f&&(f=u);q=q.y;q<h&&(h=q);q>k&&(k=q);q!==e&&(f=Math.max(f,g[r-1].x+g[r-1].glyphMosaicItem.metrics.left+g[r-1].glyphMosaicItem.metrics.width),e=q)}f=Math.max(f,g[n-1].x+g[n-1].glyphMosaicItem.metrics.left+
g[n-1].glyphMosaicItem.metrics.width);k+=12;return{x:m,y:k,width:f-m,height:k-(h-12)}}};d.addDecoration=function(g,n){var m=g.length;if(0!==m){for(var f=g[0].x+g[0].glyphMosaicItem.metrics.left,h=g[0].y,k=1;k<m;k++){var e=g[k];if(e.y!==h){var r=g[k-1].x+g[k-1].glyphMosaicItem.metrics.left+g[k-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:f,y:h+n-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:r-f,height:8,left:0,top:0,advance:0},page:0}});h=e.y;f=e.x+e.glyphMosaicItem.metrics.left}}m=
g[m-1].x+g[m-1].glyphMosaicItem.metrics.left+g[m-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:f,y:h+n-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:m-f,height:8,left:0,top:0,advance:0},page:0}})}};d.prototype._applyJustification=function(g,n,m){var f=g[m];for(f=(f.x+f.glyphMosaicItem.metrics.advance)*this._justify;n<=m;n++)g[n].x-=f};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(B,p){return function(){function a(d,
g,n,m){void 0===d&&(d=0);void 0===g&&(g=0);void 0===n&&(n=0);void 0===m&&(m=0);this.x=d;this.y=g;this.width=n;this.height=m}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});var d=new a;p.bidiText=function(g){if(!d.hasBidiChar(g))return[g,
!1];var n="rtl"===d.checkContextual(g)?"IDNNN":"ICNNN";return[d.bidiTransform(g,n,"VLYSN"),!0]}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(B,p,a,d){function g(m,f){void 0===f&&(f=!1);var h=a.WGLVVFlag.SIZE_FIELD_STOPS|a.WGLVVFlag.SIZE_MINMAX_VALUE|a.WGLVVFlag.SIZE_SCALE_STOPS|a.WGLVVFlag.SIZE_UNIT_VALUE,k=(m&(a.WGLVVTarget.FIELD_TARGETS_OUTLINE|a.WGLVVTarget.MINMAX_TARGETS_OUTLINE|a.WGLVVTarget.SCALE_TARGETS_OUTLINE|
a.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return f?h&k:h&~k}function n(m){var f=g(m,!1);return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|a.WGLVVFlag.ROTATION|f)}Object.defineProperty(p,"__esModule",{value:!0});p.getVVFlags=function(m){if(!m)return a.WGLVVFlag.NONE;for(var f=0,h=0;h<m.length;h++){var k=m[h];if("size"===k.type){var e=d.getTypeOfSizeVisualVariable(k);f|=e;"outline"===k.target&&(f|=e<<4)}else"color"===k.type?f|=a.WGLVVFlag.COLOR:"opacity"===k.type?f|=a.WGLVVFlag.OPACITY:"rotation"===k.type&&
(f|=a.WGLVVFlag.ROTATION)}return f};p.getSizeFlagsMask=g;p.getMarkerVVFlags=n;p.getFillVVFlags=function(m){return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY)};p.getLineVVFlags=function(m,f){if(f){var h=g(m,!0);return m&h}h=g(m,!1);return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|h)};p.getTextVVFlags=function(m){return n(m)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z){Object.defineProperty(p,"__esModule",{value:!0});var A=d.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),y=24*1.2,c=r.i8888to32(255,255,255,255),b={xOffset:0,yOffset:0,width:0,height:0};B=function(l){function t(w,C,D){var E=l.call(this)||this;E.geometryType=k.WGLGeometryType.LABEL;E.vvFlags=0;E._textBoxVerticalOffset=0;E._textBoxHorizontalOffset=0;E._refTemplate=b;E._xOffset=C.xoffset;E._yOffset=-C.yoffset;E._decorationOffset=e.getFontDecorationOffset(C.font);
var F=C.haloColor;E._color=(C.color&&h.premultiplyAlphaRGBA(C.color))|0;var G=C.yoffset/C.font.size;E._shapingXOffset=C.xoffset/C.font.size*24;E._shapingYOffset=24*G;E._haloColor=(F&&h.premultiplyAlphaRGBA(F))|0;E._haloSize=10*g.pt2px(g.toPt(C.haloSize||0));E._textPropSize=g.pt2px(C.font.size);E._textPropAngle=C.angle*Math.PI/180;E._textPropHJustification="left"===C.horizontalAlignment?0:"right"===C.horizontalAlignment?1:.5;F=0;G=.5;switch(D){case "above-center":case "above-left":case "above-right":F=
-.5;G=0;break;case "below-center":case "below-left":case "below-right":F=.5,G=1}var H=0,M=.5;switch(D){case "above-left":case "center-left":case "below-left":H=-.5;M=1;break;case "above-right":case "center-right":case "below-right":H=.5,M=0}E._textPropHAnchorPlacement=M;E._textPropVAnchorPlacement=G;E._placementDirection=[H,F];E._materialStore=w;E.symbolId=C.id;E.anchor=m.create();return E}a(t,l);t.fromText=function(w,C,D,E,F,G){return new t(w,D,F)};Object.defineProperty(t.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});t.prototype.computeGlyphs=function(w,C){var D=C.text;if(!D||!D.length)return this._computedGlyphs=[],1;D=this._computeShaping(w,240,y,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(D,C.rtl);isNaN(this._decorationOffset)||q.addDecoration(D,this._decorationOffset);for(var E=Array(D.length),F=0;F<D.length;F++){var G=this._textPropAngle,H=this._textPropSize,M=this._haloSize,
X=this._materialStore.createGlyphMaterial(D[F].glyphMosaicItem,k.WGLGeometryType.LABEL,this.vvFlags);E[F]=z.ComputedGlyph.from(D[F],X,G,H,M)}this._computedGlyphs=E;if(!D||0===D.length)return 2;D=q.getBox(D);E=this._textPropSize/24;D.width*=E;D.height*=E;D.x*=E;D.y*=E;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-D.x-D.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-D.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-D.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-D.y+D.height);F=D.width/2;G=D.height/2;this._textPropAngle&&(E=m.fromValues(-F,-G),F=m.fromValues(F,G),G=n.create(),n.rotate(G,G,this._textPropAngle),m.transformMat2d(E,E,G),m.transformMat2d(F,F,G),G=Math.abs(F[1]-E[1]),D.width=Math.abs(F[0]-E[0]),D.height=G);this._bounds=new v["default"](D.x,D.y,D.width+10,D.height+10);D=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=D+this._yOffset;return 0};t.prototype.bindReferenceTemplate=function(w){this._refTemplate=w?w:b};t.prototype.computeAnchor=function(w,C){var D=this._refTemplate.xOffset,E=this._refTemplate.yOffset;switch(w){case "esriGeometryPoint":var F=C.geometry,G=F.x;F=F.y;this._setAnchor(G,F);break;case "esriGeometryMultipoint":G=C.geometry;F=this._computeAnchorMultipoint(G.points);G=F.x;F=F.y;this._setAnchor(G,F);break;case "esriGeometryPolygon":if(C.centroid){G=
C.centroid;this._setAnchor(G.x,G.y);break}G=C.geometry;F=this._computeAnchorRings(G.rings);if(!F)break;G=F.x;F=F.y;this._setAnchor(G,F);break;case "esriGeometryPolyline":G=C.geometry;F=this._computeAnchorRings(G.paths);if(!F)break;G=F.x;F=F.y;this._setAnchor(G,F);break;default:A.error("Unable to handle geometryType: "+w)}return m.fromValues(this.anchor[0]+D,this.anchor[1]+E)};t.prototype.writeMesh=function(w,C,D,E,F,G,H){D=C.indexVector;F=C.get("geometry");G=C.get("visibility");C=C.get("visibilityRange");
H=this._getOffset(F);var M=r.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(w,D,F,G,C,E,H,M,this.anchor[0],this.anchor[1])};t.prototype._setAnchor=function(w,C){this.anchor[0]=w;this.anchor[1]=C};t.prototype._computeAnchorMultipoint=function(w){return w.length&&w[0].length?{x:w[0][0],y:w[0][1]}:
null};t.prototype._computeAnchorRings=function(w){if(!w.length||!w[0].length||!w[0][0].length)return null;w=f.ringsCentroid(w,!1);return{x:w[0],y:w[1]}};t.prototype._computeShaping=function(w,C,D,E,F,G,H,M,X){return this._shaping=new q([w],240,y,0,[F,G],H,M,X)};t.prototype._getOffset=function(w){return w.length/5};t.prototype._writeVertices=function(w,C,D,E,F,G,H,M,X,W){var T=this._computedGlyphs,K=r.i1616to32(2*X,2*W);X=r.i1616to32(2*X+1,2*W);W=0;var O=r.i8888to32(0,(G&16711680)>>16,(G&65280)>>8,
G&255);if(this._haloSize)for(var N=0;N<T.length;N++,W+=4){var Y=T[N].materialId,P=this._materialStore.get(Y);Y=new u(G,this.geometryType,Y);Y.vertexFrom=H+W;Y.indexFrom=C.length;this._writeGlyph(Y,D,E,F,O,X,this._haloColor,M,T[N],P);this._writeIndices(Y,C,H+W);w.push(Y)}for(N=0;N<T.length;N++,W+=4)Y=T[N].materialId,P=this._materialStore.get(Y),Y=new u(G,this.geometryType,Y),Y.vertexFrom=H+W,Y.indexFrom=C.length,this._writeGlyph(Y,D,E,F,O,K,this._color,M,T[N],P),this._writeIndices(Y,C,H+W),w.push(Y)};
t.prototype._writeGlyph=function(w,C,D,E,F,G,H,M,X,W){C.push(G);C.push(H);C.push(X.vertexOffsetUpperLeft);C.push(X.texFontSizeUpperLeft);C.push(M);C.push(G);C.push(H);C.push(X.vertexOffsetUpperRight);C.push(X.texFontSizeUpperRight);C.push(M);C.push(G);C.push(H);C.push(X.vertexOffsetLowerLeft);C.push(X.texFontSizeLowerLeft);C.push(M);C.push(G);C.push(H);C.push(X.vertexOffsetLowerRight);C.push(X.texFontSizeLowerRight);C.push(M);D.push(4294967295);E.push(c);E.push(c);w.vertexCount+=4};t.prototype._writeIndices=
function(w,C,D){C.push(D+0);C.push(D+1);C.push(D+2);C.push(D+1);C.push(D+3);C.push(D+2);w.indexCount+=6};return t}(x["default"]);p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(B,p){function a(d){d=d.toLowerCase().split(" ").join("-");switch(d){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";
default:return d}}Object.defineProperty(p,"__esModule",{value:!0});p.getFullyQualifiedFontName=function(d){a:{if(d.weight)switch(d.weight.toLowerCase()){case "bold":case "bolder":var g="-bold";break a}g=""}a:{if(d.style)switch(d.style.toLowerCase()){case "italic":case "oblic":var n="-italic";break a}n=""}g+=n;return a(d.family)+(0<g.length?g:"-regular")};p.getFontDecorationOffset=function(d){switch(d.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Matcher":function(){define(["require",
"exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});var n=d.getLogger("esri/views/2d/engine/webgl/util/Matcher");B=function(){function m(){this._defaultResult=null}m.prototype.size=function(){return 1};m.prototype.getDefault=function(){return this._defaultResult};m.prototype.setDefault=function(f){this._defaultResult=f};m.prototype.match=function(f,h){return this.getDefault()};return m}();
p["default"]=B;d=function(m){function f(h,k,e,r){var q=m.call(this)||this;q._intervals=[];q._isMaxInclusive=k;e?q._getValue=g.createArcadeFunction(e):h&&h.length?"function"===typeof h?(q._field=null,q._getValue=h):(q._field=h,q._normalizationInfo=r,q._getValue=q._getValueFromField.bind(q)):q._field=null;return q}a(f,m);f.prototype.add=function(h,k){this._intervals.push({interval:h,result:k});this._intervals.sort(function(e,r){return e.interval.min-r.interval.min})};f.prototype.size=function(){return m.prototype.size.call(this)+
this._intervals.length};f.prototype.match=function(h,k){if(!this._getValue)return this.getDefault();var e=this._getValue(h,k);if(!e&&(null===e||void 0===e||isNaN(e)))return this.getDefault();for(var r=0;r<this._intervals.length;r++){var q=this._intervals[r],u=q.interval;q=q.result;var v=this._isMaxInclusive?e<=u.max:e<u.max;if(e>=u.min&&v)return q}return this.getDefault()};f.prototype._needsNormalization=function(){var h=this._normalizationInfo;return h&&(h.normalizationField||h.normalizationTotal||
h.normalizationType)};f.prototype._getValueFromField=function(h){var k=h.attributes[this._field];if(!this._needsNormalization())return k;var e=this._normalizationInfo,r=e.normalizationField,q=e.normalizationTotal;e=e.normalizationType;h=!!r&&h.attributes[r];if(e)switch(e){case "field":return(h||void 0)&&k/h;case "log":return Math.log(k)*Math.LOG10E;case "percent-of-total":return k/q*100;default:n.error("Found unknown normalization type: "+e)}else n.error("Normalization is required, but no type was set!")};
return f}(B);p.IntervalMatcher=d;B=function(m){function f(h,k,e){var r=m.call(this)||this;r._resultsMap=new Map;e?r._getValue=g.createArcadeFunction(e):h&&h.length?"function"===typeof h[0]?(r._fields=null,r._getValue=h[0]):(r._fields=h,r._seperator=k||"",r._getValue=r._getValueFromFields.bind(r)):r._fields=null;return r}a(f,m);f.prototype.add=function(h,k){this._resultsMap.set(h.toString(),k)};f.prototype.size=function(){return m.prototype.size.call(this)+this._resultsMap.size};f.prototype.match=
function(h,k){if(!this._getValue)return this.getDefault();var e=this._getValue(h,k);if(!e&&(null===e||void 0===e))return this.getDefault();e=e.toString();return this._resultsMap.has(e)?this._resultsMap.get(e):this.getDefault()};f.prototype._getValueFromFields=function(h){for(var k=[],e=0,r=this._fields;e<r.length;e++)k.push(h.attributes[r[e]]);return k.join(this._seperator)};return f}(B);p.MapMatcher=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require",
"exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function g(n,m,f){this.data=n;this.stride=m;this.vertexCount=f}g.decode=function(n){var m=new Uint32Array(n.data);return new g(m,n.stride,n.vertexCount)};return g}();p["default"]=a;var d=function(){function g(n,m,f){this.geometryType=n;this.indexBuffer=new Uint32Array(m);this.namedBuffers=f}g.decode=function(n){var m=n.geometryType,f=n.indexBuffer,h={},k;for(k in n.namedBuffers)h[k]=a.decode(n.namedBuffers[k]);
return new g(m,f,h)};return g}();p.VertexBuffers=d})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function d(g){this._pos=0;this._buffer=g;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}d.prototype.readInt32=function(){return this._i32View[this._pos++]};d.prototype.readF32=function(){return this._f32View[this._pos++]};return d}();
p["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../config ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ./CIMSymbolHelper ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils ../../../support/screenshotUtils ./SDFConverter".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x){function z(y){if(y.type){switch(q.normalizeSymbolType(y.type)){case "simple-marker":return y.path?
"simple-marker"+y.style+y.path:"simple-marker"+y.style;case "simple-line":return"simple-line"+y.style}if(q.isPictureSymbol(y))return y.url?y.url:y.imageData+(""+y.width+y.height)}return JSON.stringify(y)}var A=g.getLogger("esri.views.2d.engine.webgl.TextureManager");return function(){function y(){this._invalidFontsMap=new Map;this._spriteMosaic=new r(1024,1024,500);this._glyphSource=new k(a.fontsUrl+"/{fontstack}/{range}.pbf");this._glyphMosaic=new h(1024,1024,this._glyphSource);this._sdfConverter=
new x["default"](126)}Object.defineProperty(y.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(y.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});y.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=null};y.prototype.rasterizeItem=function(c,b){void 0===b&&(b=null);return c?c.type&&-1!==c.type.toLowerCase().indexOf("3d")?(A.error(new d("mapview-invalid-type",
"Mapviewer does not support 3d symbol type: "+c.type,c)),n.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!c.type||"text"!==c.type&&"esriTS"!==c.type?this._rasterizeSpriteSymbol(c).then(function(l){return{spriteMosaicItem:l}}):this._rasterizeTextSymbol(c,b).then(function(l){return{glyphMosaicItems:l}}):(A.error(new d("mapview-null-resource","Unable to rasterize null resource")),n.resolve(null))};y.prototype.bindSpritePage=function(c,b,l,t){t||(t=9729);this._spriteMosaic.bind(c,t,b,l)};y.prototype.bindGlyphsPage=
function(c,b,l){this._glyphMosaic.bind(c,9729,b,l)};y.prototype._rasterizeTextSymbol=function(c,b){var l=this,t=f.getFullyQualifiedFontName(c.font),w=this._invalidFontsMap.has(t);return this._glyphMosaic.getGlyphItems(w?"arial-unicode-ms-regular":t,b)["catch"](function(C){A.error(new d("mapview-invalid-resource","Couldn't find font "+t+". Falling back to Arial Unicode MS Regular"));l._invalidFontsMap.set(t,!0);return l._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",b)})};y.prototype._rasterizeSpriteSymbol=
function(c){var b=this;if(c&&(q.isFillSymbol(c)||q.isLineSymbol(c))&&"style"in c&&("solid"===c.style||"esriSFSSolid"===c.style||"esriSLSSolid"===c.style||"none"===c.style||"esriSFSNull"===c.style||"esriSLSNull"===c.style))return n.resolve(null);var l=z(c);if(this._spriteMosaic.has(l))return n.resolve(this._spriteMosaic.getSpriteItem(l));if("simple-marker"!==c.type&&"esriSMS"!==c.type||!c.path){if(c.url||c.imageData)return u.requestImage(c.imageData?"data:"+c.contentType+";base64,"+c.imageData:c.url).then(function(D){D=
b._rasterizeResource(D);return b._addItemToMosaic(l,D.size,D.anchor,D.image,!q.isMarkerSymbol(c),D.sdf)});var t=this._rasterizeResource(c);return n.resolve(this._addItemToMosaic(l,t.size,t.anchor,t.image,!q.isMarkerSymbol(c),t.sdf))}var w=[126,126],C=this;return this._sdfConverter.draw(c.path).then(function(D){return C._addItemToMosaic(l,w,[0,0],new Uint32Array(D.buffer),!1,!0)})};y.prototype._rasterizeResource=function(c){if(c instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=
document.createElement("canvas"));this._rasterizationCanvas.width=c.width;this._rasterizationCanvas.height=c.height;var b=this._rasterizationCanvas.getContext("2d");b.drawImage(c,0,0,c.width,c.height);b=b.getImageData(0,0,c.width,c.height);b=new Uint8Array(b.data);for(var l=void 0,t=0;t<b.length;t+=4)l=b[t+3]/255,b[t]*=l,b[t+1]*=l,b[t+2]*=l;l=c.width;t=c.height;var w=b;if(500<=l||500<=t)w=c.width/c.height,1<w?(l=500,t=Math.round(500/w)):(t=500,l=Math.round(500*w)),w=new Uint8Array(4*l*t),v.resampleHermite(b,
c.width,c.height,new Uint8ClampedArray(w.buffer),l,t,!1);return{size:[l,t],anchor:[0,0],image:new Uint32Array(w.buffer),sdf:!1}}return this._rasterizeJSON(c)};y.prototype._addItemToMosaic=function(c,b,l,t,w,C){return this._spriteMosaic.addSpriteItem(c,b,l,t,w,C)};y.prototype._rasterizeJSON=function(c){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===c.type||"esriSFS"===c.type){var b=m.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,
c.style);c=b[0];var l=b[1];b=b[2];return{size:[l,b],anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!1}}if("simple-line"===c.type||"esriSLS"===c.type)return b=m.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,c.style),c=b[0],l=b[1],b=b[2],{size:[l,b],anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!0};"simple-marker"===c.type||"esriSMS"===c.type?(c=m.CIMSymbolHelper.fromSimpleMarker(c),l=!0):l=e.SDFHelper.checkSDF(c);if(l)return l=(new e.SDFHelper).buildSDF(c),c=l[0],{size:[l[1],l[2]],
anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!0};var t=m.CIMSymbolHelper.rasterize(this._rasterizationCanvas,c);c=t[0];l=t[1];b=t[2];return{size:[l,b],anchor:[t[3],t[4]],image:new Uint32Array(c.buffer),sdf:!1}};return y}()})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(B,p,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(d){return a.defaults.workers=d}});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../core/Logger ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),
function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});var m=a.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");B=function(){function f(){}f.getEnvelope=function(h){if("CIMPointSymbol"!==h.type)return null;var k=new d.EnvDrawHelper;k.drawSymbol(h,{type:"point",x:0,y:0});return k.envelope()};f.rasterize=function(h,k){var e=this.getEnvelope(k);if(!e||0>=e.width||0>=e.height)return[null,0,0,0,0];var r=96/72,q=(e.x+.5*e.width)*r,u=-(e.y+.5*e.height)*r;h.width=e.width*r+2;h.height=
e.height*r+2;e=h.getContext("2d");r=d.Transformation.createScale(r,-r);r.translate(.5*h.width-q,.5*h.height-u);(new d.CanvasDrawHelper(e,r)).drawSymbol(k,{type:"point",x:0,y:0});r=e.getImageData(0,0,h.width,h.height);r=new Uint8Array(r.data);for(var v=0;v<r.length;v+=4)e=r[v+3]/255,r[v]*=e,r[v+1]*=e,r[v+2]*=e;return[r,h.width,h.height,q/h.width,u/h.height]};f.fromSimpleMarker=function(h){var k=h.style;if("circle"===k||"esriSMSCircle"===k){var e=Math.acos(.995);var r=Math.ceil(n.C_PI/e/4);0===r&&(r=
1);e=n.C_PI_BY_2/r;r*=4;k=[];k.push([50,0]);for(var q=1;q<r;q++)k.push([50*Math.cos(q*e),-50*Math.sin(q*e)]);k.push([50,0]);e={rings:[k]};r={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===k||"esriSMSCross"===k)e=0,e={rings:[[[e,50],[e,e],[50,e],[50,-e],[e,-e],[e,-50],[-e,-50],[-e,-e],[-50,-e],[-50,e],[-e,e],[-e,50],[e,50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===k||"esriSMSDiamond"===k)e={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};
else if("square"===k||"esriSMSSquare"===k)e={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===k||"esriSMSX"===k)e=0,e={rings:[[[0,e],[50-e,50],[50,50-e],[e,0],[50,e-50],[50-e,-50],[0,-e],[e-50,-50],[-50,e-50],[-e,0],[-50,50-e],[e-50,50],[0,e]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===k||"esriSMSTriangle"===k)r=2/3*100,k=r-100,e={rings:[[[-57.735026918962575,k],[0,r],[57.735026918962575,k],[-57.735026918962575,k]]]},r=
{xmin:-57.735026918962575,ymin:k,xmax:57.735026918962575,ymax:r};if(e&&r){var u=[{type:"CIMSolidFill",enable:!0,color:h.color}];h.outline&&u.push({type:"CIMSolidStroke",enable:!0,width:h.outline.width,color:h.outline.color});u={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:h.angle,size:h.size,offsetX:h.xoffset,offsetY:h.yoffset,frame:r,markerGraphics:[{type:"CIMMarkerGraphic",geometry:e,symbol:{type:"CIMPolygonSymbol",symbolLayers:u}}]}]}}return u};return f}();p.CIMSymbolHelper=
B;B=function(){function f(){}f.rasterizeSimpleFill=function(h,k){h.width=8;h.height=8;var e=h.getContext("2d");e.strokeStyle="#FFFFFF";e.beginPath();if("vertical"===k||"cross"===k||"esriSFSCross"===k||"esriSFSVertical"===k)e.moveTo(0,0),e.lineTo(0,8);if("horizontal"===k||"cross"===k||"esriSFSCross"===k||"esriSFSHorizontal"===k)e.moveTo(0,0),e.lineTo(8,0);if("forward-diagonal"===k||"diagonal-cross"===k||"esriSFSDiagonalCross"===k||"esriSFSForwardDiagonal"===k)e.moveTo(0,0),e.lineTo(8,8);if("backward-diagonal"===
k||"diagonal-cross"===k||"esriSFSBackwardDiagonal"===k||"esriSFSDiagonalCross"===k)e.moveTo(8,0),e.lineTo(0,8);e.stroke();e=e.getImageData(0,0,h.width,h.height);e=new Uint8Array(e.data);for(var r,q=0;q<e.length;q+=4)r=e[q+3]/255,e[q]*=r,e[q+1]*=r,e[q+2]*=r;return[e,h.width,h.height]};f.rasterizeSimpleLine=function(h,k){switch(k){case "dash":case "esriSLSDash":var e=[3,2];break;case "dash-dot":case "esriSLSDashDot":e=[2,2,0,2];break;case "dot":case "esriSLSDot":e=[0,3];break;case "long-dash":case "esriSLSLongDash":e=
[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":e=[6,3,0,3];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":e=[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":e=[2,2];break;case "short-dash-dot":case "esriSLSShortDashDot":e=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":e=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":e=[0,2];break;case "solid":case "esriSLSSolid":case "none":m.error("Unexpected: style does not require rasterization");
e=[0,0];break;default:m.error("Tried to rasterize SLS, but found an unexpected style: "+k+"!"),e=[0,0]}for(var r=0,q=0,u=e;q<u.length;q++){var v=u[q];r+=v}r*=16;u=31*r;q=new Float32Array(u);for(v=0;v<u;++v)q[v]=257;for(var x=u=.5,z=!0,A=0;A<e.length;A++){v=e[A];u=x;x+=16*v;for(var y=u;y<x;){for(var c=.5;31>c;){v=(31-c+1.5)*r+y-.5;var b=(c-15.5)*(c-15.5);q[v]=z?b:Math.min((y-u)*(y-u)+b,(y-x)*(y-x)+b);c++}y++}z=!z}e=q.length;u=new Uint8Array(4*e);for(v=0;v<e;++v)g.packFloat(Math.sqrt(q[v])/15,u,4*v);
return[u,r,31]};return f}();p.SymbolHelper=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});var m=function(){function f(h){this._t=h}f.createIdentity=function(){return new f([1,0,0,0,1,0])};f.prototype.clone=function(){return new f(this._t.slice())};f.prototype.transform=
function(h){var k=this._t;return[k[0]*h[0]+k[1]*h[1]+k[2],k[3]*h[0]+k[4]*h[1]+k[5]]};f.createScale=function(h,k){return new f([h,0,0,0,k,0])};f.prototype.scale=function(h,k){var e=this._t;e[0]*=h;e[1]*=h;e[2]*=h;e[3]*=k;e[4]*=k;e[5]*=k;return this};f.prototype.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};f.createTranslate=function(h,k){return new f([0,0,h,0,0,k])};f.prototype.translate=function(h,k){var e=this._t;e[2]+=h;e[5]+=k;return this};f.createRotate=
function(h){var k=Math.cos(h);h=Math.sin(h);return new f([k,-h,0,h,k,0])};f.prototype.rotate=function(h){return this.multiply(f.createRotate(h))};f.prototype.multiply=function(h){var k=this._t;h=h._t;var e=k[1]*h[0]+k[4]*h[1],r=k[2]*h[0]+k[5]*h[1]+h[2],q=k[0]*h[3]+k[3]*h[4],u=k[1]*h[3]+k[4]*h[4],v=k[2]*h[3]+k[5]*h[4]+h[5];k[0]=k[0]*h[0]+k[3]*h[1];k[1]=e;k[2]=r;k[3]=q;k[4]=u;k[5]=v;return this};return f}();p.Transformation=m;B=function(){function f(h){this._transfos=[];this._sizeTransfos=[];this._transfos.push(h||
m.createIdentity());this._sizeTransfos.push(h?h.scaleRatio():1)}f.prototype.transformPt=function(h){return this._transfos[this._transfos.length-1].transform(h)};f.prototype.transformSize=function(h){return h*this._sizeTransfos[this._sizeTransfos.length-1]};f.prototype.back=function(){return this._transfos[this._transfos.length-1]};f.prototype.push=function(h){var k=h.scaleRatio();h.multiply(this.back());this._transfos.push(h);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*
k)};f.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};f.prototype.drawSolidFill=function(h,k){};f.prototype.drawSolidStroke=function(h,k,e){};f.prototype.drawSymbol=function(h,k){if(h)switch(h.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(h,k)}};f.prototype.drawMultiLayerSymbol=function(h,k){if(h){var e=h.symbolLayers;if(e)for(var r=e.length;r--;){var q=e[r];if(q&&q.enable)switch(q.type){case "CIMSolidFill":this.drawSolidFill(k,
q.color);break;case "CIMSolidStroke":this.drawSolidStroke(k,q.color,q.width);break;case "CIMVectorMarker":this.drawVectorMarker(q,k)}}}};f.prototype.drawVectorMarker=function(h,k){if(h){var e=h.markerGraphics;if(e){var r=h.size,q=h.frame,u=q?q.ymax-q.ymin:0;u=r&&u?r/u:1;var v=m.createIdentity();q&&v.translate(.5*-(q.xmax+q.xmin),.5*-(q.ymax+q.ymin));var x=h.anchorPt;if(x){var z=x.x;x=x.y;"relative"===h.anchorPtUnits&&q&&(z*=(q.xmax-q.xmin)*u,x*=r);v.translate(-z,-x)}1!==u&&v.scale(u,u);h.rotation&&
v.rotate(h.rotation*g.C_DEG_TO_RAD);v.translate(h.offsetX||0,h.offsetY||0);v.translate(k.x,k.y);this.push(v);for(r=0;r<e.length;r++)(q=e[r])&&this.drawSymbol(q.symbol,q.geometry);this.pop()}}};return f}();p.CIMSymbolDrawHelper=B;d=function(f){function h(){var k=f.call(this)||this;k._xmin=k._ymin=Infinity;k._xmax=k._ymax=-Infinity;return k}a(h,f);h.prototype.envelope=function(){return new n(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};h.prototype._merge=function(k,e){k[0]-e<
this._xmin&&(this._xmin=k[0]-e);k[0]+e>this._xmax&&(this._xmax=k[0]+e);k[1]-e<this._ymin&&(this._ymin=k[1]-e);k[1]+e>this._ymax&&(this._ymax=k[1]+e)};h.prototype.drawSolidFill=function(k,e){for(var r=0,q=k.rings;r<q.length;r++){var u=q[r],v=u?u.length:0;if(2<v){this._merge(this.transformPt(u[0]),0);for(var x=1;x<v;++x)this._merge(this.transformPt(u[x]),0)}}};h.prototype.drawSolidStroke=function(k,e,r){e=.5*this.transformSize(r);r=0;for(k=k.rings||k.paths;r<k.length;r++){var q=k[r],u=q?q.length:0;
if(1<u){this._merge(this.transformPt(q[0]),e);for(var v=1;v<u;++v)this._merge(this.transformPt(q[v]),e)}}};return h}(B);p.EnvDrawHelper=d;B=function(f){function h(k,e){var r=f.call(this,e)||this;r._ctx=k;return r}a(h,f);h.prototype.drawSolidFill=function(k,e){var r=this._ctx;r.fillStyle="rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")";r.beginPath();for(var q=0,u=k.rings;q<u.length;q++){var v=u[q],x=v?v.length:0;if(2<x){var z=this.transformPt(v[0]);r.moveTo(z[0],
z[1]);for(var A=1;A<x;++A)z=this.transformPt(v[A]),r.lineTo(z[0],z[1]);r.closePath()}}r.fill("evenodd")};h.prototype.drawSolidStroke=function(k,e,r){var q=this._ctx;q.strokeStyle="rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")";q.lineWidth=this.transformSize(r)+.5;q.beginPath();e=!!k.rings;r=0;for(k=k.rings||k.paths;r<k.length;r++){var u=k[r],v=u?u.length:0;if(1<v){var x=this.transformPt(u[0]);q.moveTo(x[0],x[1]);for(var z=1;z<v;++z)x=this.transformPt(u[z]),q.lineTo(x[0],
x[1]);e&&q.closePath()}}q.stroke()};return h}(B);p.CanvasDrawHelper=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(B,p,a,d,g){function n(m,f,h){g.packFloatRGBA(m,f,h)}Object.defineProperty(p,"__esModule",{value:!0});p.packFloat=n;B=function(){function m(){}m.checkSDF=function(f){return!0};m.prototype._extractGeometry=function(f){if(!f)return null;f=f.symbolLayers;if(!f||1!==f.length)return null;
f=f[0];if(!f)return null;f=f.markerGraphics;if(!f||1!==f.length)return null;f=f[0];if(!f)return null;var h=f.geometry;if(!h||!h.rings)return null;f=[];var k=0;for(h=h.rings;k<h.length;k++){for(var e=[],r=0,q=h[k];r<q.length;r++){var u=q[r];e.push(new a.Point(u[0],u[1]))}f.push(e)}return f};m.prototype._getEnvelope=function(f){for(var h=Infinity,k=-Infinity,e=Infinity,r=-Infinity,q=0;q<f.length;q++)for(var u=0,v=f[q];u<v.length;u++){var x=v[u];x.x<h&&(h=x.x);x.x>k&&(k=x.x);x.y<e&&(e=x.y);x.y>r&&(r=
x.y)}return new d(h,e,k-h,r-e)};m.prototype.buildSDF=function(f){f=this._extractGeometry(f);if(!f)return null;var h=this._getEnvelope(f);if(0>=h.width||0>=h.height)return null;for(var k=64/Math.max(h.width,h.height),e=Math.round(h.width*k),r=Math.round(h.height*k),q=e+62,u=r+62,v=0;v<f.length;v++)for(var x=0,z=f[v];x<z.length;x++){var A=z[x];A.x-=h.x;A.y-=h.y;A.x*=k;A.y*=k;A.x+=30.5;A.y+=30.5}h=this._dist_map(f,q,u,31);this._sign_dist_map(f,q,u,31,h);return[this._encodeDistMap(h,31),q,u,e,r,k]};m.prototype._dist_map=
function(f,h,k,e){for(var r=h*k,q=new Float32Array(r),u=e*e+1,v=0;v<r;++v)q[v]=u;for(u=0;u<f.length;u++){var x=f[u],z=x.length;for(v=1;v<z;++v){var A=x[v-1],y=x[v],c=void 0,b=void 0;A.x<y.x?(c=A.x,b=y.x):(c=y.x,b=A.x);var l=void 0,t=void 0;A.y<y.y?(l=A.y,t=y.y):(l=y.y,t=A.y);var w=Math.floor(c)-e;b=Math.floor(b)+e;l=Math.floor(l)-e;t=Math.floor(t)+e;0>w&&(w=0);b>h&&(b=h);0>l&&(l=0);t>k&&(t=k);c=y.x-A.x;for(var C=y.y-A.y,D=c*c+C*C;w<b;w++)for(var E=l;E<t;E++){var F=(w-A.x)*c+(E-A.y)*C,G=void 0,H=void 0;
0>F?(G=A.x,H=A.y):F>D?(G=y.x,H=y.y):(F/=D,G=A.x+F*c,H=A.y+F*C);F=(w-G)*(w-G)+(E-H)*(E-H);G=(k-E-1)*h+w;F<q[G]&&(q[G]=F)}}}for(v=0;v<r;++v)q[v]=Math.sqrt(q[v]);return q};m.prototype._sign_dist_map=function(f,h,k,e,r){for(var q=0;q<f.length;q++)for(var u=f[q],v=u.length,x=1;x<v;++x){var z=u[x-1],A=u[x],y=void 0,c=void 0;z.x<A.x?(y=z.x,c=A.x):(y=A.x,c=z.x);var b=void 0,l=void 0;z.y<A.y?(b=z.y,l=A.y):(b=A.y,l=z.y);y=Math.floor(y);c=Math.floor(c)+1;b=Math.floor(b);l=Math.floor(l)+1;y<e&&(y=e);c>h-e&&(c=
h-e);b<e&&(b=e);for(l>k-e&&(l=k-e);b<l;++b)if(z.y>b!==A.y>b){for(var t=(k-b-1)*h,w=y;w<c;++w)w<(A.x-z.x)*(b-z.y)/(A.y-z.y)+z.x&&(r[t+w]=-r[t+w]);for(w=e;w<y;++w)r[t+w]=-r[t+w]}}};m.prototype._encodeDistMap=function(f,h){for(var k=2*h,e=f.length,r=new Uint8Array(4*e),q=0;q<e;++q)n(.5-f[q]/k,r,4*q);return r};return m}();p.SDFHelper=B})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","../../support/geometryUtils","./gl-matrix"],function(B,p,a,d){function g(P,
L){if(!P)throw new T(L);}function n(P,L,Q){return P<L?L:P>Q?Q:P}function m(P){return P/180*Math.PI}function f(P){return 180*P/Math.PI}function h(P,L,Q){d.mat4d.multiply(L,P,x);d.mat4d.inverse(x);for(P=0;8>P;++P)d.mat4d.multiplyVec4(x,z[P],A),d.vec3d.set3(A[0]/A[3],A[1]/A[3],A[2]/A[3],Q[P])}function k(P,L){a.plane.fromPoints(P[4],P[0],P[3],L[0]);a.plane.fromPoints(P[1],P[5],P[6],L[1]);a.plane.fromPoints(P[4],P[5],P[1],L[2]);a.plane.fromPoints(P[3],P[2],P[6],L[3]);a.plane.fromPoints(P[0],P[1],P[2],
L[4]);a.plane.fromPoints(P[5],P[4],P[7],L[5])}function e(P,L,Q,ca){var ha=6378137/Math.sqrt(1-p.ECCENTRICITY_SQUARED*Math.pow(Math.sin(P),2)),ja=Math.cos(P);ca[0]=(ha+Q)*Math.cos(L)*ja;ca[1]=(ha*(1-p.ECCENTRICITY_SQUARED)+Q)*Math.sin(P);ca[2]=-(ha+Q)*Math.sin(L)*ja}function r(P){for(var L in P)return L}function q(P,L){P[12]=L[0];P[13]=L[1];P[14]=L[2]}function u(P,L){void 0===L&&(L=0);for(var Q=0,ca=0;4>ca;ca++)Q+=P[L+ca]*N[ca];return Q}function v(P){return P-Math.floor(P)}Object.defineProperty(p,
"__esModule",{value:!0});var x=d.mat4d.create(),z=[d.vec4d.createFrom(-1,-1,-1,1),d.vec4d.createFrom(1,-1,-1,1),d.vec4d.createFrom(1,1,-1,1),d.vec4d.createFrom(-1,1,-1,1),d.vec4d.createFrom(-1,-1,1,1),d.vec4d.createFrom(1,-1,1,1),d.vec4d.createFrom(1,1,1,1),d.vec4d.createFrom(-1,1,1,1)],A=d.vec4d.create(),y=[d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create()],c=d.vec3d.create(),b=d.vec3d.create(),l=d.vec3d.create(),
t=d.vec3d.create(),w=d.vec3d.create(),C=d.vec3d.create(),D=d.vec3d.create(),E=d.vec3d.create(),F=d.vec3d.create(),G=d.vec3d.create(),H=d.vec3d.create(),M=d.vec3d.create(),X=d.vec3d.create(),W=d.vec3d.createFrom(0,0,0),T=function(){function P(L){this.message=L}P.prototype.toString=function(){return"AssertException: "+this.message};return P}();p.AssertException=T;p.EARTH_RADIUS=6378137;p.METER2FEET=3.28084;p.ECCENTRICITY_SQUARED=.0066943799901414;p.VertexAttrConstants={POSITION:"position",NORMAL:"normal",
NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};p.assert=g;p.verify=function(P,L){};p.isPowerOfTwo=function(P){return 0===(P&P-1)};p.lerp=function(P,L,Q){return P+(L-P)*Q};p.clamp=n;p.encodeInt16=function(P){return n(Math.round(32767*P),-32767,32767)};p.encodeNormal=function(P,L){var Q=Math.abs(P[0]),ca=Math.abs(P[1]),ha=1/(Q+ca+Math.abs(P[2]));Q*=ha;ca*=ha;ha=Math.min(P[2]*
ha,0);L[0]=K(P[0])*(Q-ha);L[1]=K(P[1])*(ca-ha)};var K="function"===typeof Math.sign?Math.sign:function(P){return+(0<P)-+(0>P)||0};p.fallbackIfUndefined=function(P,L){return void 0===P?L:P};p.hex2rgb=function(P){P=Math.floor(P);return[(P>>16&255)/255,(P>>8&255)/255,(P&255)/255]};p.rgb2hex=function(P){var L=n(Math.round(255*P[0]),0,255),Q=n(Math.round(255*P[1]),0,255);P=n(Math.round(255*P[2]),0,255);return"0x"+((L<<16)+(Q<<8)+P).toString(16)};p.dec2hex=function(P){P=P.toString(16);return"00000000".substr(0,
8-P.length)+P};p.deg2rad=m;p.rad2deg=f;p.azimuthElevationAngle2Direction=function(P,L){var Q=1.5*Math.PI-P,ca=.5*Math.PI-L;return[Math.cos(Q)*Math.sin(ca),Math.cos(ca),Math.sin(Q)*Math.sin(ca)]};p.raySphere=function(P,L,Q,ca,ha){Q=Q||W;var ja=d.vec3d.subtract(P,Q,c);Q=d.vec3d.dot(L,L);var ma=2*d.vec3d.dot(L,ja);ca=d.vec3d.dot(ja,ja)-ca*ca;ca=ma*ma-4*Q*ca;if(0>ca)return!1;ja=Math.sqrt(ca);ca=(-ma-ja)/(2*Q);Q=(-ma+ja)/(2*Q);if(0>ca||Q<ca&&0<Q)ca=Q;return 0<ca?(ha&&d.vec3d.add(P,d.vec3d.scale(L,ca,X),
ha),!0):!1};p.rayTriangle3D=function(P,L,Q,ca,ha,ja,ma,R,fa){void 0===fa&&(fa=d.vec3d.create());var ka=ca[ma]-Q[ja],qa=ca[ma+1]-Q[ja+1],na=ca[ma+2]-Q[ja+2];ca=ha[R]-Q[ja];ma=ha[R+1]-Q[ja+1];ha=ha[R+2]-Q[ja+2];var ia=L[1]*ha-ma*L[2],ea=L[2]*ca-ha*L[0],oa=L[0]*ma-ca*L[1];R=ka*ia+qa*ea+na*oa;if(-1E-5<R&&1E-5>R)return!1;R=1/R;var ta=P[0]-Q[ja],ra=P[1]-Q[ja+1];P=P[2]-Q[ja+2];fa[1]=R*(ta*ia+ra*ea+P*oa);if(0>fa[1]||1<fa[1])return!1;Q=ra*na-qa*P;P=P*ka-na*ta;ka=ta*qa-ka*ra;fa[2]=R*(L[0]*Q+L[1]*P+L[2]*ka);
if(0>fa[2]||1<fa[1]+fa[2])return!1;fa[0]=R*(ca*Q+ma*P+ha*ka);return!0};p.rayBoxTest=function(P,L,Q,ca){var ha=(Q[0]-P[0])/L[0],ja=(ca[0]-P[0])/L[0];if(ha>ja){var ma=ha;ha=ja;ja=ma}var R=(Q[1]-P[1])/L[1],fa=(ca[1]-P[1])/L[1];R>fa&&(ma=R,R=fa,fa=ma);if(ha>fa||R>ja)return!1;R>ha&&(ha=R);fa<ja&&(ja=fa);Q=(Q[2]-P[2])/L[2];P=(ca[2]-P[2])/L[2];Q>P&&(ma=Q,Q=P,P=ma);if(ha>P||Q>ja)return!1;P<ja&&(ja=P);return 0>ja?!1:!0};p.rayRay2D=function(P,L,Q,ca,ha,ja){void 0===ja&&(ja=d.vec2d.create());var ma=(ca[ha]-
Q[ha])*(L[0]-P[0])-(ca[0]-Q[0])*(L[ha]-P[ha]);if(0===ma)return!1;Q=((ca[0]-Q[0])*(P[ha]-Q[ha])-(ca[ha]-Q[ha])*(P[0]-Q[0]))/ma;ja[0]=P[0]+Q*(L[0]-P[0]);ja[1]=P[ha]+Q*(L[ha]-P[ha]);return!0};p.matrixToFrustumPoints=h;p.matrixToFrustumPlanes=function(P,L,Q,ca){void 0===ca&&(ca=Q,Q=y);h(P,L,Q);k(Q,ca)};p.frustumPointsToPlanes=k;p.project=function(P,L,Q,ca,ha){ha||(ha=P);A[0]=P[0];A[1]=P[1];A[2]=P[2];A[3]=1;d.mat4d.multiplyVec4(L,A);2<ha.length&&(ha[2]=-A[2]);d.mat4d.multiplyVec4(Q,A);g(0!==A[3]);ha[0]=
A[0]/A[3];ha[1]=A[1]/A[3];ha[2]=A[2]/A[3];ha[0]=(.5*ha[0]+.5)*ca[2]+ca[0];ha[1]=(.5*ha[1]+.5)*ca[3]+ca[1]};p.geodeticToGeocentricLatidude=function(P){return Math.atan((1-p.ECCENTRICITY_SQUARED)*Math.tan(P))};p.latLon2positionWGS84Ellipsoid=e;p.pos2latLon=function(P,L){var Q=d.vec3d.length(P);L[0]=Math.asin(n(P[1]/Q,-1,1));L[1]=(0>P[2]?1:-1)*Math.acos(n(P[0]/(Math.cos(L[0])*Q),-1,1));L[0]=f(L[0]);L[1]=f(L[1]);L[2]=Q};p.pos2latLonWGS84Ellipsoid=function(P,L){var Q=P[0],ca=-P[2],ha=P[1],ja=Math.sqrt(Math.pow(6378137,
2)*(1-p.ECCENTRICITY_SQUARED)),ma=Math.sqrt(Math.pow(Q,2)+Math.pow(ca,2)),R=Math.atan2(6378137*ha,ja*ma);Q=Math.atan2(ca,Q);ha=Math.atan2(ha+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(ja,2))/Math.pow(ja,2)),2)*ja*Math.pow(Math.sin(R),3),ma-6378137*p.ECCENTRICITY_SQUARED*Math.pow(Math.cos(R),3));ma=ma/Math.cos(ha)-6378137/Math.sqrt(1-p.ECCENTRICITY_SQUARED*Math.pow(Math.sin(ha),2))+p.EARTH_RADIUS;L[0]=ha;L[1]=Q;L[2]=ma};p.computeGlobeTransformation=function(P,L,Q){var ca=m(P[0]);P=m(P[1]);e(ca,
P,L,b);d.mat4d.translate(Q,b);d.mat4d.rotateY(Q,.5*Math.PI+P);d.mat4d.rotateX(Q,.5*Math.PI-ca);return Q};p.readUInt16=function(P,L){return P[L]+(P[L+1]<<8)};p.readUInt32=function(P,L){return P[L]+(P[L+1]<<8)+(P[L+2]<<16)+(P[L+3]<<24)};p.setIfDefined=function(P,L,Q){void 0!==L[P]&&(Q[P]=L[P])};p.array2object=function(P,L){var Q={};if(void 0!==L)for(var ca=0;ca<P.length;ca++){var ha=P[ca];Q[L(ha)]=ha}else for(ca=0;ca<P.length;ca++)ha=P[ca],Q[ha]=ha;return Q};p.object2array=function(P){var L=[],Q;for(Q in P)L.push(P[Q]);
return L};p.mergeObjects=function(P,L,Q){void 0===Q&&(Q={});if(Q!==P)for(var ca in P)Q[ca]=P[ca];if(Q!==L)for(var ha in L)Q[ha]=L[ha];return Q};p.subtractObjects=function(P,L){var Q={},ca;for(ca in P)void 0===L[ca]&&(Q[ca]=P[ca]);return Q};p.intersectObjects=function(P,L){var Q={},ca;for(ca in P)void 0!==L[ca]&&(Q[ca]=P[ca]);return Q};p.getFirstObjectKey=r;p.getFirstObjectValue=function(P){return P[r(P)]};p.objectEmpty=function(P){for(var L in P)return!1;return!0};p.byteBuffer2base64image=function(P,
L,Q,ca,ha){var ja=4*L;g(P.length===ja*Q,"buffer length must match image resolution");var ma=document.createElement("canvas");ma.width=L;ma.height=Q;var R=ma.getContext("2d");L=R.getImageData(0,0,L,Q);for(var fa=L.data,ka=0;ka<Q;++ka)for(var qa=ka*ja,na=(Q-1-ka)*ja,ia=0;ia<ja;++ia)fa[qa++]=P[na++];R.putImageData(L,0,0);return ma.toDataURL(ca,ha)};p.cround=function(P){return Math.round(100*P)/100};p.logWithBase=function(P,L){return Math.log(P)/Math.log(L)};p.setMatrixTranslation=q;p.setMatrixTranslation3=
function(P,L,Q,ca){P[12]=L;P[13]=Q;P[14]=ca};p.getMatrixTranslation=function(P,L){void 0===L&&(L=d.vec3d.create());L[0]=P[12];L[1]=P[13];L[2]=P[14];return L};p.createTranslationMatrix=function(P,L){P=d.mat4d.identity(P);q(P,L);return P};p.isTranslationMatrix=function(P){return 1===P[0]&&0===P[1]&&0===P[2]&&0===P[3]&&0===P[4]&&1===P[5]&&0===P[6]&&0===P[7]&&0===P[8]&&0===P[9]&&1===P[10]&&0===P[11]&&1===P[15]};p.fovx2fovy=function(P,L,Q){return 2*Math.atan(Q*Math.tan(.5*P)/L)};p.fovy2fovx=function(P,
L,Q){return 2*Math.atan(L*Math.tan(.5*P)/Q)};p.fovx2fovd=function(P,L,Q){return 2*Math.atan(Math.sqrt(L*L+Q*Q)*Math.tan(.5*P)/L)};p.fovy2fovd=function(P,L,Q){return 2*Math.atan(Math.sqrt(L*L+Q*Q)*Math.tan(.5*P)/Q)};p.fovd2fovx=function(P,L,Q){return 2*Math.atan(L*Math.tan(.5*P)/Math.sqrt(L*L+Q*Q))};p.fovd2fovy=function(P,L,Q){return 2*Math.atan(Q*Math.tan(.5*P)/Math.sqrt(L*L+Q*Q))};p.nextHighestPowerOfTwo=function(P){--P;for(var L=1;32>L;L<<=1)P|=P>>L;return P+1};p.nextHighestPowerOfTen=function(P){return Math.pow(10,
Math.ceil(Math.LOG10E*Math.log(P)))};p.lineLineDistanceSquared3D=function(P,L,Q,ca,ha){l[0]=P[0]-Q[0];l[1]=P[1]-Q[1];l[2]=P[2]-Q[2];t[0]=ca[0]-Q[0];t[1]=ca[1]-Q[1];t[2]=ca[2]-Q[2];if(1E-4>Math.abs(t[0])&&1E-4>Math.abs(t[1])&&1E-4>Math.abs(t[2]))return ha.success=!1,ha;w[0]=L[0]-P[0];w[1]=L[1]-P[1];w[2]=L[2]-P[2];if(1E-4>Math.abs(w[0])&&1E-4>Math.abs(w[1])&&1E-4>Math.abs(w[2]))return ha.success=!1,ha;L=l[0]*t[0]+l[1]*t[1]+l[2]*t[2];ca=t[0]*w[0]+t[1]*w[1]+t[2]*w[2];var ja=l[0]*w[0]+l[1]*w[1]+l[2]*w[2],
ma=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],R=(w[0]*w[0]+w[1]*w[1]+w[2]*w[2])*ma-ca*ca;if(1E-4>Math.abs(R))return ha.success=!1,ha;ja=n((L*ca-ja*ma)/R,0,1);L=n((L+ca*ja)/ma,0,1);C[0]=P[0]+ja*w[0];C[1]=P[1]+ja*w[1];C[2]=P[2]+ja*w[2];D[0]=Q[0]+L*t[0];D[1]=Q[1]+L*t[1];D[2]=Q[2]+L*t[2];P=d.vec3d.dist2(C,D);ha.success=!0;ha.dist2=P;ha.pa=C;ha.pb=D;return ha};p.pointLineSegmentDistanceSquared2D=function(P,L,Q){H[0]=L[0]-P[0];H[1]=L[1]-P[1];H[2]=0;M[0]=Q[0]-P[0];M[1]=Q[1]-P[1];M[2]=0;X[0]=Q[0];X[1]=Q[1];X[2]=0;L=d.vec2d.dot(M,
H);Q=d.vec2d.dot(H,H);L=n(L/Q,0,1);G[0]=H[0]*L;G[1]=H[1]*L;E[0]=P[0]+G[0];E[1]=P[1]+G[1];d.vec2d.subtract(X,E,F);P=d.vec2d.dot(F,F);L=d.vec2d.dot(M,M);Q=d.vec2d.dot(H,H);var ca=d.vec2d.dot(G,G);if(ca>L||ca>Q)P=Number.MAX_VALUE;return P};p.packFloatRGBA=function(P,L,Q){void 0===Q&&(Q=0);P=n(P,0,Y);for(var ca=0;4>ca;ca++)L[Q+ca]=Math.floor(256*v(P*O[ca]))};p.unpackFloatRGBA=u;var O=[1,256,65536,16777216],N=[1/256,1/65536,1/16777216,1/4294967296],Y=u(new Uint8ClampedArray([255,255,255,255]));p.inverseProjectionInfo=
function(P,L,Q,ca,ha){0===P[11]?(ca[0]=2/(L*P[0]),ca[1]=2/(Q*P[5]),ca[2]=(1+P[12])/P[0],ca[3]=(1+P[13])/P[5],d.vec2d.set2(0,1,ha)):(ca[0]=-2/(L*P[0]),ca[1]=-2/(Q*P[5]),ca[2]=(1-P[8])/P[0],ca[3]=(1-P[9])/P[5],d.vec2d.set2(1,0,ha))}})},"esri/layers/vectorTiles/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});p.plane=d;p.triangle=
g;p.lineSegment=a})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/lineSegment":function(){define(["require","exports","../../lib/glMatrix","../mathUtils"],function(B,p,a,d){function g(m,f){void 0===m&&(m=a.vec3d.create());void 0===f&&(f=a.vec3d.create());return{origin:m,vector:f}}Object.defineProperty(p,"__esModule",{value:!0});p.create=g;p.fromOriginAndVector=function(m,f,h){void 0===h&&(h=g());a.vec3d.set(m,h.origin);a.vec3d.set(f,h.vector);return h};p.distance2=function(m,f){var h=a.vec3d.subtract(f,
m.origin),k=a.vec3d.dot(m.vector,h),e=a.vec3d.dot(m.vector,m.vector);k=d.clamp(k/e,0,1);h=a.vec3d.subtract(a.vec3d.scale(m.vector,k,n),h,n);return a.vec3d.dot(h,h)};var n=a.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(B,p,a){function d(k){void 0===k&&(k=p.UP);return[k[0],k[1],k[2],k[3]]}function g(k,e,r){void 0===r&&(r=d());a.vec3d.set(e,r);r[3]=-a.vec3d.dot(e,k);return r}function n(k,e,r,q){void 0===
q&&(q=d());a.vec3d.cross(e,k,h);return g(r,a.vec3d.normalize(h),q)}Object.defineProperty(p,"__esModule",{value:!0});p.create=d;p.fromValues=function(k,e,r,q,u){void 0===u&&(u=d());u[0]=k;u[1]=e;u[2]=r;u[3]=q;return u};p.fromNormalAndOffset=function(k,e,r){void 0===r&&(r=d());a.vec3d.set(k,r);r[3]=e;return r};p.fromPositionAndNormal=g;p.projectVector=function(k,e,r){void 0===r&&(r=e);return a.vec3d.cross(k,a.vec3d.cross(e,k,f),r)};p.distance=function(k,e){return a.vec3d.dot(k,e)+k[3]};p.fromPoints=
function(k,e,r,q){void 0===q&&(q=d());return n(a.vec3d.subtract(k,e,m),a.vec3d.subtract(r,e,f),k,q)};p.set=function(k,e){k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=e[3];return k};p.negate=function(k,e){void 0===e&&(e=k);e[0]=-k[0];e[1]=-k[1];e[2]=-k[2];e[3]=-k[3];return e};p.fromVectorsAndPoint=n;p.intersectRay=function(k,e,r,q){var u=a.vec3d.dot(k,r);if(0===u)return!1;k=-(a.vec3d.dot(k,e)+k[3])/u;a.vec3d.add(e,a.vec3d.scale(r,k,q),q);return!0};p.UP=[0,0,1,0];var m=a.vec3d.create(),f=a.vec3d.create(),h=a.vec3d.create()})},
"esri/layers/vectorTiles/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix","./lineSegment"],function(B,p,a,d){function g(u,v,x){var z=a.vec2d.dist(u,v);v=a.vec2d.dist(v,x);u=a.vec2d.dist(x,u);x=(z+v+u)/2;return Math.sqrt(x*(x-z)*(x-v)*(x-u))}Object.defineProperty(p,"__esModule",{value:!0});p.create=function(u,v,x){void 0===u&&(u=a.vec3d.create());void 0===v&&(v=a.vec3d.create());void 0===x&&(x=a.vec3d.create());return{p0:u,p1:v,p2:x}};p.distance2=
function(u,v){var x=u.p0,z=u.p1,A=u.p2,y=a.vec3d.subtract(z,x,n),c=a.vec3d.subtract(A,z,m),b=a.vec3d.subtract(x,A,f),l=a.vec3d.subtract(v,x,h),t=a.vec3d.subtract(v,z,k),w=a.vec3d.subtract(v,A,e),C=a.vec3d.cross(y,b),D=a.vec3d.dot(a.vec3d.cross(y,C,r),l);t=a.vec3d.dot(a.vec3d.cross(c,C,r),t);w=a.vec3d.dot(a.vec3d.cross(b,C,r),w);if(0<D&&0<t&&0<w)return A=a.vec3d.dot(C,l),A*A/a.vec3d.dot(C,C);C=d.distance2(d.fromOriginAndVector(x,y,q),v);z=d.distance2(d.fromOriginAndVector(z,c,q),v);A=d.distance2(d.fromOriginAndVector(A,
b,q),v);return Math.min(C,z,A)};p.areaPoints2d=g;p.area2d=function(u){return g(u.p0,u.p1,u.p2)};var n=a.vec3d.create(),m=a.vec3d.create(),f=a.vec3d.create(),h=a.vec3d.create(),k=a.vec3d.create(),e=a.vec3d.create(),r=a.vec3d.create(),q=d.create()})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var B={};(function(p,a){a(p,!0);a(p,!1)})(B,function(p,a){var d={};(function(){if("undefined"!=typeof Float32Array){var c=new Float32Array(1),b=new Int32Array(c.buffer);
d.invsqrt=function(l){c[0]=l;b[0]=1597463007-(b[0]>>1);var t=c[0];return t*(1.5-.5*l*t*t)}}else d.invsqrt=function(l){return 1/Math.sqrt(l)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=a?Float32Array:Array);var n={create:function(c){var b=new g(3);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(c,b,l){var t=new g(3);t[0]=c;t[1]=b;t[2]=l;return t},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];return b},set3:function(c,b,l,t){t[0]=c;t[1]=b;t[2]=l;return t},
add:function(c,b,l){if(!l||c===l)return c[0]+=b[0],c[1]+=b[1],c[2]+=b[2],c;l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];return l},subtract:function(c,b,l){if(!l||c===l)return c[0]-=b[0],c[1]-=b[1],c[2]-=b[2],c;l[0]=c[0]-b[0];l[1]=c[1]-b[1];l[2]=c[2]-b[2];return l},multiply:function(c,b,l){if(!l||c===l)return c[0]*=b[0],c[1]*=b[1],c[2]*=b[2],c;l[0]=c[0]*b[0];l[1]=c[1]*b[1];l[2]=c[2]*b[2];return l},max:function(c,b,l){l[0]=Math.max(c[0],b[0]);l[1]=Math.max(c[1],b[1]);l[2]=Math.max(c[2],b[2]);return l},
min:function(c,b,l){l[0]=Math.min(c[0],b[0]);l[1]=Math.min(c[1],b[1]);l[2]=Math.min(c[2],b[2]);return l},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];return b},scale:function(c,b,l){if(!l||c===l)return c[0]*=b,c[1]*=b,c[2]*=b,c;l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;return l},normalize:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=Math.sqrt(l*l+t*t+w*w);if(!C)return b[0]=0,b[1]=0,b[2]=0,b;if(1===C)return b[0]=l,b[1]=t,b[2]=w,b;C=1/C;b[0]=l*C;b[1]=t*C;b[2]=w*C;return b},cross:function(c,
b,l){l||(l=c);var t=c[0],w=c[1];c=c[2];var C=b[0],D=b[1];b=b[2];l[0]=w*b-c*D;l[1]=c*C-t*b;l[2]=t*D-w*C;return l},length:function(c){var b=c[0],l=c[1];c=c[2];return Math.sqrt(b*b+l*l+c*c)},length2:function(c){var b=c[0],l=c[1];c=c[2];return b*b+l*l+c*c},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]},direction:function(c,b,l){l||(l=c);var t=c[0]-b[0],w=c[1]-b[1];c=c[2]-b[2];b=Math.sqrt(t*t+w*w+c*c);if(!b)return l[0]=0,l[1]=0,l[2]=0,l;b=1/b;l[0]=t*b;l[1]=w*b;l[2]=c*b;return l},lerp:function(c,
b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);t[2]=c[2]+l*(b[2]-c[2]);return t},dist:function(c,b){var l=b[0]-c[0],t=b[1]-c[1],w=b[2]-c[2];return Math.sqrt(l*l+t*t+w*w)},dist2:function(c,b){var l=b[0]-c[0],t=b[1]-c[1],w=b[2]-c[2];return l*l+t*t+w*w}},m=null,f=new g(4);n.unproject=function(c,b,l,t,w){w||(w=c);m||(m=v.create());var C=m;f[0]=2*(c[0]-t[0])/t[2]-1;f[1]=2*(c[1]-t[1])/t[3]-1;f[2]=2*c[2]-1;f[3]=1;v.multiply(l,b,C);if(!v.inverse(C))return null;v.multiplyVec4(C,f);if(0===
f[3])return null;w[0]=f[0]/f[3];w[1]=f[1]/f[3];w[2]=f[2]/f[3];return w};var h=n.createFrom(1,0,0),k=n.createFrom(0,1,0),e=n.createFrom(0,0,1);n.rotationTo=function(c,b,l){l||(l=x.create());var t=n.dot(c,b),w=n.create();if(1<=t)x.set(z,l);else if(-.999999>t)n.cross(h,c,w),1E-6>w.length&&n.cross(k,c,w),1E-6>w.length&&n.cross(e,c,w),n.normalize(w),x.fromAxisAngle(w,Math.PI,l);else{t=Math.sqrt(2*(1+t));var C=1/t;n.cross(c,b,w);l[0]=w[0]*C;l[1]=w[1]*C;l[2]=w[2]*C;l[3]=.5*t;x.normalize(l)}1<l[3]?l[3]=1:
-1>l[3]&&(l[3]=-1);return l};var r=n.create(),q=n.create();n.project=function(c,b,l,t){t||(t=c);n.direction(b,l,r);n.subtract(c,b,q);c=n.dot(r,q);n.scale(r,c,t);n.add(t,b,t)};n.str=function(c){return"["+c[0]+", "+c[1]+", "+c[2]+"]"};var u={create:function(c){var b=new g(9);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(c,b,l,t,w,C,D,E,F){var G=new g(9);G[0]=c;G[1]=b;G[2]=l;G[3]=
t;G[4]=w;G[5]=C;G[6]=D;G[7]=E;G[8]=F;return G},determinant:function(c){var b=c[3],l=c[4],t=c[5],w=c[6],C=c[7],D=c[8];return c[0]*(D*l-t*C)+c[1]*(-D*b+t*w)+c[2]*(C*b-l*w)},inverse:function(c,b){var l=c[0],t=c[1],w=c[2],C=c[3],D=c[4],E=c[5],F=c[6],G=c[7],H=c[8],M=H*D-E*G,X=-H*C+E*F,W=G*C-D*F,T=l*M+t*X+w*W;if(!T)return null;T=1/T;b||(b=u.create());b[0]=M*T;b[1]=(-H*t+w*G)*T;b[2]=(E*t-w*D)*T;b[3]=X*T;b[4]=(H*l-w*F)*T;b[5]=(-E*l+w*C)*T;b[6]=W*T;b[7]=(-G*l+t*F)*T;b[8]=(D*l-t*C)*T;return b},multiply:function(c,
b,l){l||(l=c);var t=c[0],w=c[1],C=c[2],D=c[3],E=c[4],F=c[5],G=c[6],H=c[7];c=c[8];var M=b[0],X=b[1],W=b[2],T=b[3],K=b[4],O=b[5],N=b[6],Y=b[7];b=b[8];l[0]=M*t+X*D+W*G;l[1]=M*w+X*E+W*H;l[2]=M*C+X*F+W*c;l[3]=T*t+K*D+O*G;l[4]=T*w+K*E+O*H;l[5]=T*C+K*F+O*c;l[6]=N*t+Y*D+b*G;l[7]=N*w+Y*E+b*H;l[8]=N*C+Y*F+b*c;return l},multiplyVec2:function(c,b,l){l||(l=b);var t=b[0];b=b[1];l[0]=t*c[0]+b*c[3]+c[6];l[1]=t*c[1]+b*c[4]+c[7];return l},multiplyVec3:function(c,b,l){l||(l=b);var t=b[0],w=b[1];b=b[2];l[0]=t*c[0]+w*
c[3]+b*c[6];l[1]=t*c[1]+w*c[4]+b*c[7];l[2]=t*c[2]+w*c[5]+b*c[8];return l},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];return b},identity:function(c){c||(c=u.create());c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1],t=c[2],w=c[5];c[1]=c[3];c[2]=c[6];c[3]=l;c[5]=c[7];c[6]=t;c[7]=w;return c}b[0]=c[0];b[1]=c[3];b[2]=c[6];b[3]=c[1];b[4]=c[4];b[5]=c[7];b[6]=c[2];b[7]=
c[5];b[8]=c[8];return b},toMat4:function(c,b){b||(b=v.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=c[8];b[9]=c[7];b[8]=c[6];b[7]=0;b[6]=c[5];b[5]=c[4];b[4]=c[3];b[3]=0;b[2]=c[2];b[1]=c[1];b[0]=c[0];return b},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+"]"}},v={create:function(c){var b=new g(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],
b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):c&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);return b},createFrom:function(c,b,l,t,w,C,D,E,F,G,H,M,X,W,T,K){var O=new g(16);O[0]=c;O[1]=b;O[2]=l;O[3]=t;O[4]=w;O[5]=C;O[6]=D;O[7]=
E;O[8]=F;O[9]=G;O[10]=H;O[11]=M;O[12]=X;O[13]=W;O[14]=T;O[15]=K;return O},createFromMatrixRowMajor:function(c){var b=new g(16);b[0]=c[0];b[4]=c[1];b[8]=c[2];b[12]=c[3];b[1]=c[4];b[5]=c[5];b[9]=c[6];b[13]=c[7];b[2]=c[8];b[6]=c[9];b[10]=c[10];b[14]=c[11];b[3]=c[12];b[7]=c[13];b[11]=c[14];b[15]=c[15];return b},createFromMatrix:function(c){var b=new g(16);b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];
b[14]=c[14];b[15]=c[15];return b},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=c[12];b[13]=c[13];b[14]=c[14];b[15]=c[15];return b},setRowMajor:function(c,b){b[0]=c[0];b[4]=c[1];b[8]=c[2];b[12]=c[3];b[1]=c[4];b[5]=c[5];b[9]=c[6];b[13]=c[7];b[2]=c[8];b[6]=c[9];b[10]=c[10];b[14]=c[11];b[3]=c[12];b[7]=c[13];b[11]=c[14];b[15]=c[15];return b},identity:function(c){c||(c=v.create());c[0]=1;c[1]=0;c[2]=0;
c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1],t=c[2],w=c[3],C=c[6],D=c[7],E=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=l;c[6]=c[9];c[7]=c[13];c[8]=t;c[9]=C;c[11]=c[14];c[12]=w;c[13]=D;c[14]=E;return c}b[0]=c[0];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=c[1];b[5]=c[5];b[6]=c[9];b[7]=c[13];b[8]=c[2];b[9]=c[6];b[10]=c[10];b[11]=c[14];b[12]=c[3];b[13]=c[7];b[14]=c[11];b[15]=c[15];return b},determinant:function(c){var b=
c[0],l=c[1],t=c[2],w=c[3],C=c[4],D=c[5],E=c[6],F=c[7],G=c[8],H=c[9],M=c[10],X=c[11],W=c[12],T=c[13],K=c[14];c=c[15];return W*H*E*w-G*T*E*w-W*D*M*w+C*T*M*w+G*D*K*w-C*H*K*w-W*H*t*F+G*T*t*F+W*l*M*F-b*T*M*F-G*l*K*F+b*H*K*F+W*D*t*X-C*T*t*X-W*l*E*X+b*T*E*X+C*l*K*X-b*D*K*X-G*D*t*c+C*H*t*c+G*l*E*c-b*H*E*c-C*l*M*c+b*D*M*c},inverse:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=c[4],E=c[5],F=c[6],G=c[7],H=c[8],M=c[9],X=c[10],W=c[11],T=c[12],K=c[13],O=c[14],N=c[15],Y=l*E-t*D,P=l*F-w*D,L=l*G-C*D,Q=
t*F-w*E,ca=t*G-C*E,ha=w*G-C*F,ja=H*K-M*T,ma=H*O-X*T,R=H*N-W*T,fa=M*O-X*K,ka=M*N-W*K,qa=X*N-W*O,na=Y*qa-P*ka+L*fa+Q*R-ca*ma+ha*ja;if(!na)return null;na=1/na;b[0]=(E*qa-F*ka+G*fa)*na;b[1]=(-t*qa+w*ka-C*fa)*na;b[2]=(K*ha-O*ca+N*Q)*na;b[3]=(-M*ha+X*ca-W*Q)*na;b[4]=(-D*qa+F*R-G*ma)*na;b[5]=(l*qa-w*R+C*ma)*na;b[6]=(-T*ha+O*L-N*P)*na;b[7]=(H*ha-X*L+W*P)*na;b[8]=(D*ka-E*R+G*ja)*na;b[9]=(-l*ka+t*R-C*ja)*na;b[10]=(T*ca-K*L+N*Y)*na;b[11]=(-H*ca+M*L-W*Y)*na;b[12]=(-D*fa+E*ma-F*ja)*na;b[13]=(l*fa-t*ma+w*ja)*na;
b[14]=(-T*Q+K*P-O*Y)*na;b[15]=(H*Q-M*P+X*Y)*na;return b},toRotationMat:function(c,b){b||(b=v.create());b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];b[6]=c[6];b[7]=c[7];b[8]=c[8];b[9]=c[9];b[10]=c[10];b[11]=c[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(c,b){b||(b=u.create());b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[4];b[4]=c[5];b[5]=c[6];b[6]=c[8];b[7]=c[9];b[8]=c[10];return b},toInverseMat3:function(c,b){var l=c[0],t=c[1],w=c[2],C=c[4],D=c[5],E=c[6],F=c[8],G=c[9],H=c[10],
M=H*D-E*G,X=-H*C+E*F,W=G*C-D*F,T=l*M+t*X+w*W;if(!T)return null;T=1/T;b||(b=u.create());b[0]=M*T;b[1]=(-H*t+w*G)*T;b[2]=(E*t-w*D)*T;b[3]=X*T;b[4]=(H*l-w*F)*T;b[5]=(-E*l+w*C)*T;b[6]=W*T;b[7]=(-G*l+t*F)*T;b[8]=(D*l-t*C)*T;return b},multiply:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2],D=c[3],E=c[4],F=c[5],G=c[6],H=c[7],M=c[8],X=c[9],W=c[10],T=c[11],K=c[12],O=c[13],N=c[14];c=c[15];var Y=b[0],P=b[1],L=b[2],Q=b[3],ca=b[4],ha=b[5],ja=b[6],ma=b[7],R=b[8],fa=b[9],ka=b[10],qa=b[11],na=b[12],ia=b[13],ea=
b[14];b=b[15];l[0]=Y*t+P*E+L*M+Q*K;l[1]=Y*w+P*F+L*X+Q*O;l[2]=Y*C+P*G+L*W+Q*N;l[3]=Y*D+P*H+L*T+Q*c;l[4]=ca*t+ha*E+ja*M+ma*K;l[5]=ca*w+ha*F+ja*X+ma*O;l[6]=ca*C+ha*G+ja*W+ma*N;l[7]=ca*D+ha*H+ja*T+ma*c;l[8]=R*t+fa*E+ka*M+qa*K;l[9]=R*w+fa*F+ka*X+qa*O;l[10]=R*C+fa*G+ka*W+qa*N;l[11]=R*D+fa*H+ka*T+qa*c;l[12]=na*t+ia*E+ea*M+b*K;l[13]=na*w+ia*F+ea*X+b*O;l[14]=na*C+ia*G+ea*W+b*N;l[15]=na*D+ia*H+ea*T+b*c;return l},multiplyVec3:function(c,b,l){l||(l=b);var t=b[0],w=b[1];b=b[2];l[0]=c[0]*t+c[4]*w+c[8]*b+c[12];
l[1]=c[1]*t+c[5]*w+c[9]*b+c[13];l[2]=c[2]*t+c[6]*w+c[10]*b+c[14];return l},multiplyVec4:function(c,b,l){l||(l=b);var t=b[0],w=b[1],C=b[2];b=b[3];l[0]=c[0]*t+c[4]*w+c[8]*C+c[12]*b;l[1]=c[1]*t+c[5]*w+c[9]*C+c[13]*b;l[2]=c[2]*t+c[6]*w+c[10]*C+c[14]*b;l[3]=c[3]*t+c[7]*w+c[11]*C+c[15]*b;return l},translate:function(c,b,l){var t=b[0],w=b[1];b=b[2];if(!l||c===l)return c[12]=c[0]*t+c[4]*w+c[8]*b+c[12],c[13]=c[1]*t+c[5]*w+c[9]*b+c[13],c[14]=c[2]*t+c[6]*w+c[10]*b+c[14],c[15]=c[3]*t+c[7]*w+c[11]*b+c[15],c;var C=
c[0];var D=c[1];var E=c[2];var F=c[3];var G=c[4];var H=c[5];var M=c[6];var X=c[7];var W=c[8];var T=c[9];var K=c[10];var O=c[11];l[0]=C;l[1]=D;l[2]=E;l[3]=F;l[4]=G;l[5]=H;l[6]=M;l[7]=X;l[8]=W;l[9]=T;l[10]=K;l[11]=O;l[12]=C*t+G*w+W*b+c[12];l[13]=D*t+H*w+T*b+c[13];l[14]=E*t+M*w+K*b+c[14];l[15]=F*t+X*w+O*b+c[15];return l},scale:function(c,b,l){var t=b[0],w=b[1];b=b[2];if(!l||c===l)return c[0]*=t,c[1]*=t,c[2]*=t,c[3]*=t,c[4]*=w,c[5]*=w,c[6]*=w,c[7]*=w,c[8]*=b,c[9]*=b,c[10]*=b,c[11]*=b,c;l[0]=c[0]*t;l[1]=
c[1]*t;l[2]=c[2]*t;l[3]=c[3]*t;l[4]=c[4]*w;l[5]=c[5]*w;l[6]=c[6]*w;l[7]=c[7]*w;l[8]=c[8]*b;l[9]=c[9]*b;l[10]=c[10]*b;l[11]=c[11]*b;l[12]=c[12];l[13]=c[13];l[14]=c[14];l[15]=c[15];return l},maxScale:function(c){return Math.max(Math.max(Math.sqrt(c[0]*c[0]+c[4]*c[4]+c[8]*c[8]),Math.sqrt(c[1]*c[1]+c[5]*c[5]+c[9]*c[9])),Math.sqrt(c[2]*c[2]+c[6]*c[6]+c[10]*c[10]))},rotate:function(c,b,l,t){var w=l[0],C=l[1];l=l[2];var D=Math.sqrt(w*w+C*C+l*l);if(!D)return null;1!==D&&(D=1/D,w*=D,C*=D,l*=D);var E=Math.sin(b);
var F=Math.cos(b);var G=1-F;b=c[0];D=c[1];var H=c[2];var M=c[3];var X=c[4];var W=c[5];var T=c[6];var K=c[7];var O=c[8];var N=c[9];var Y=c[10];var P=c[11];var L=w*w*G+F;var Q=C*w*G+l*E;var ca=l*w*G-C*E;var ha=w*C*G-l*E;var ja=C*C*G+F;var ma=l*C*G+w*E;var R=w*l*G+C*E;w=C*l*G-w*E;C=l*l*G+F;t?c!==t&&(t[12]=c[12],t[13]=c[13],t[14]=c[14],t[15]=c[15]):t=c;t[0]=b*L+X*Q+O*ca;t[1]=D*L+W*Q+N*ca;t[2]=H*L+T*Q+Y*ca;t[3]=M*L+K*Q+P*ca;t[4]=b*ha+X*ja+O*ma;t[5]=D*ha+W*ja+N*ma;t[6]=H*ha+T*ja+Y*ma;t[7]=M*ha+K*ja+P*ma;
t[8]=b*R+X*w+O*C;t[9]=D*R+W*w+N*C;t[10]=H*R+T*w+Y*C;t[11]=M*R+K*w+P*C;return t},rotateX:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[4],C=c[5],D=c[6],E=c[7],F=c[8],G=c[9],H=c[10],M=c[11];l?c!==l&&(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[4]=w*b+F*t;l[5]=C*b+G*t;l[6]=D*b+H*t;l[7]=E*b+M*t;l[8]=w*-t+F*b;l[9]=C*-t+G*b;l[10]=D*-t+H*b;l[11]=E*-t+M*b;return l},rotateY:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[0],C=c[1],D=c[2],
E=c[3],F=c[8],G=c[9],H=c[10],M=c[11];l?c!==l&&(l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[0]=w*b+F*-t;l[1]=C*b+G*-t;l[2]=D*b+H*-t;l[3]=E*b+M*-t;l[8]=w*t+F*b;l[9]=C*t+G*b;l[10]=D*t+H*b;l[11]=E*t+M*b;return l},rotateZ:function(c,b,l){var t=Math.sin(b);b=Math.cos(b);var w=c[0],C=c[1],D=c[2],E=c[3],F=c[4],G=c[5],H=c[6],M=c[7];l?c!==l&&(l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15]):l=c;l[0]=w*b+F*t;l[1]=
C*b+G*t;l[2]=D*b+H*t;l[3]=E*b+M*t;l[4]=w*-t+F*b;l[5]=C*-t+G*b;l[6]=D*-t+H*b;l[7]=E*-t+M*b;return l},frustum:function(c,b,l,t,w,C,D){D||(D=v.create());var E=b-c,F=t-l,G=C-w;D[0]=2*w/E;D[1]=0;D[2]=0;D[3]=0;D[4]=0;D[5]=2*w/F;D[6]=0;D[7]=0;D[8]=(b+c)/E;D[9]=(t+l)/F;D[10]=-(C+w)/G;D[11]=-1;D[12]=0;D[13]=0;D[14]=-(C*w*2)/G;D[15]=0;return D},perspective:function(c,b,l,t,w){c=l*Math.tan(c*Math.PI/360);b*=c;return v.frustum(-b,b,-c,c,l,t,w)},ortho:function(c,b,l,t,w,C,D){D||(D=v.create());var E=b-c,F=t-l,
G=C-w;D[0]=2/E;D[1]=0;D[2]=0;D[3]=0;D[4]=0;D[5]=2/F;D[6]=0;D[7]=0;D[8]=0;D[9]=0;D[10]=-2/G;D[11]=0;D[12]=-(c+b)/E;D[13]=-(t+l)/F;D[14]=-(C+w)/G;D[15]=1;return D},lookAt:function(c,b,l,t){t||(t=v.create());var w=c[0],C=c[1];c=c[2];var D=l[0];var E=l[1];var F=l[2];var G=b[0];l=b[1];var H=b[2];if(w===G&&C===l&&c===H)return v.identity(t);b=w-G;l=C-l;G=c-H;var M=1/Math.sqrt(b*b+l*l+G*G);b*=M;l*=M;G*=M;H=E*G-F*l;F=F*b-D*G;D=D*l-E*b;(M=Math.sqrt(H*H+F*F+D*D))?(M=1/M,H*=M,F*=M,D*=M):D=F=H=0;E=l*D-G*F;var X=
G*H-b*D;var W=b*F-l*H;(M=Math.sqrt(E*E+X*X+W*W))?(M=1/M,E*=M,X*=M,W*=M):W=X=E=0;t[0]=H;t[1]=E;t[2]=b;t[3]=0;t[4]=F;t[5]=X;t[6]=l;t[7]=0;t[8]=D;t[9]=W;t[10]=G;t[11]=0;t[12]=-(H*w+F*C+D*c);t[13]=-(E*w+X*C+W*c);t[14]=-(b*w+l*C+G*c);t[15]=1;return t},fromRotationTranslation:function(c,b,l){l||(l=v.create());var t=c[0],w=c[1],C=c[2],D=c[3],E=t+t,F=w+w,G=C+C;c=t*E;var H=t*F;t*=G;var M=w*F;w*=G;C*=G;E*=D;F*=D;D*=G;l[0]=1-(M+C);l[1]=H+D;l[2]=t-F;l[3]=0;l[4]=H-D;l[5]=1-(c+C);l[6]=w+E;l[7]=0;l[8]=t+F;l[9]=
w-E;l[10]=1-(c+M);l[11]=0;l[12]=b[0];l[13]=b[1];l[14]=b[2];l[15]=1;return l},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+"]"}},x={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(c,b,l,t){var w=new g(4);w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},set:function(c,b){b[0]=c[0];b[1]=c[1];
b[2]=c[2];b[3]=c[3];return b},identity:function(c){c||(c=x.create());c[0]=0;c[1]=0;c[2]=0;c[3]=1;return c}},z=x.identity();x.calculateW=function(c,b){var l=c[0],t=c[1],w=c[2];if(!b||c===b)return c[3]=-Math.sqrt(Math.abs(1-l*l-t*t-w*w)),c;b[0]=l;b[1]=t;b[2]=w;b[3]=-Math.sqrt(Math.abs(1-l*l-t*t-w*w));return b};x.dot=function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3]};x.inverse=function(c,b){var l=c[0],t=c[1],w=c[2],C=c[3];l=(l=l*l+t*t+w*w+C*C)?1/l:0;if(!b||c===b)return c[0]*=-l,c[1]*=-l,c[2]*=
-l,c[3]*=l,c;b[0]=-c[0]*l;b[1]=-c[1]*l;b[2]=-c[2]*l;b[3]=c[3]*l;return b};x.conjugate=function(c,b){if(!b||c===b)return c[0]*=-1,c[1]*=-1,c[2]*=-1,c;b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];b[3]=c[3];return b};x.length=function(c){var b=c[0],l=c[1],t=c[2];c=c[3];return Math.sqrt(b*b+l*l+t*t+c*c)};x.normalize=function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=Math.sqrt(l*l+t*t+w*w+C*C);if(0===D)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;D=1/D;b[0]=l*D;b[1]=t*D;b[2]=w*D;b[3]=C*D;return b};x.add=function(c,
b,l){if(!l||c===l)return c[0]+=b[0],c[1]+=b[1],c[2]+=b[2],c[3]+=b[3],c;l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];l[3]=c[3]+b[3];return l};x.multiply=function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];var D=b[0],E=b[1],F=b[2];b=b[3];l[0]=t*b+c*D+w*F-C*E;l[1]=w*b+c*E+C*D-t*F;l[2]=C*b+c*F+t*E-w*D;l[3]=c*b-t*D-w*E-C*F;return l};x.multiplyVec3=function(c,b,l){l||(l=b);var t=b[0],w=b[1],C=b[2];b=c[0];var D=c[1],E=c[2];c=c[3];var F=c*t+D*C-E*w,G=c*w+E*t-b*C,H=c*C+b*w-D*t;t=-b*t-D*w-E*C;l[0]=F*c+
t*-b+G*-E-H*-D;l[1]=G*c+t*-D+H*-b-F*-E;l[2]=H*c+t*-E+F*-D-G*-b;return l};x.scale=function(c,b,l){if(!l||c===l)return c[0]*=b,c[1]*=b,c[2]*=b,c[3]*=b,c;l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;l[3]=c[3]*b;return l};x.toMat3=function(c,b){b||(b=u.create());var l=c[0],t=c[1],w=c[2],C=c[3],D=l+l,E=t+t,F=w+w,G=l*D,H=l*E;l*=F;var M=t*E;t*=F;w*=F;D*=C;E*=C;C*=F;b[0]=1-(M+w);b[1]=H+C;b[2]=l-E;b[3]=H-C;b[4]=1-(G+w);b[5]=t+D;b[6]=l+E;b[7]=t-D;b[8]=1-(G+M);return b};x.toMat4=function(c,b){b||(b=v.create());var l=
c[0],t=c[1],w=c[2],C=c[3],D=l+l,E=t+t,F=w+w,G=l*D,H=l*E;l*=F;var M=t*E;t*=F;w*=F;D*=C;E*=C;C*=F;b[0]=1-(M+w);b[1]=H+C;b[2]=l-E;b[3]=0;b[4]=H-C;b[5]=1-(G+w);b[6]=t+D;b[7]=0;b[8]=l+E;b[9]=t-D;b[10]=1-(G+M);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};x.slerp=function(c,b,l,t){t||(t=c);var w=c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3];if(1<=Math.abs(w))return t!==c&&(t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=c[3]),t;var C=Math.acos(w);var D=Math.sqrt(1-w*w);if(.001>Math.abs(D))return t[0]=.5*c[0]+.5*b[0],
t[1]=.5*c[1]+.5*b[1],t[2]=.5*c[2]+.5*b[2],t[3]=.5*c[3]+.5*b[3],t;w=Math.sin((1-l)*C)/D;l=Math.sin(l*C)/D;t[0]=c[0]*w+b[0]*l;t[1]=c[1]*w+b[1]*l;t[2]=c[2]*w+b[2]*l;t[3]=c[3]*w+b[3]*l;return t};x.fromRotationMatrix=function(c,b){b||(b=x.create());var l=c[0]+c[4]+c[8];if(0<l){var t=Math.sqrt(l+1);b[3]=.5*t;t=.5/t;b[0]=(c[7]-c[5])*t;b[1]=(c[2]-c[6])*t;b[2]=(c[3]-c[1])*t}else{t=x.fromRotationMatrix.s_iNext=x.fromRotationMatrix.s_iNext||[1,2,0];l=0;c[4]>c[0]&&(l=1);c[8]>c[3*l+l]&&(l=2);var w=t[l],C=t[w];
t=Math.sqrt(c[3*l+l]-c[3*w+w]-c[3*C+C]+1);b[l]=.5*t;t=.5/t;b[3]=(c[3*C+w]-c[3*w+C])*t;b[w]=(c[3*w+l]+c[3*l+w])*t;b[C]=(c[3*C+l]+c[3*l+C])*t}return b};u.toQuat4=x.fromRotationMatrix;(function(){var c=u.create();x.fromAxes=function(b,l,t,w){c[0]=l[0];c[3]=l[1];c[6]=l[2];c[1]=t[0];c[4]=t[1];c[7]=t[2];c[2]=b[0];c[5]=b[1];c[8]=b[2];return x.fromRotationMatrix(c,w)}})();x.identity=function(c){c||(c=x.create());c[0]=0;c[1]=0;c[2]=0;c[3]=1;return c};x.fromAngleAxis=function(c,b,l){l||(l=x.create());c*=.5;
var t=Math.sin(c);l[3]=Math.cos(c);l[0]=t*b[0];l[1]=t*b[1];l[2]=t*b[2];return l};x.toAngleAxis=function(c,b){b||(b=c);var l=c[0]*c[0]+c[1]*c[1]+c[2]*c[2];0<l?(b[3]=2*Math.acos(c[3]),l=d.invsqrt(l),b[0]=c[0]*l,b[1]=c[1]*l,b[2]=c[2]*l):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};x.str=function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"};var A={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(c,b,l,t){var w=new g(4);
w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];return b},identity:function(c){c||(c=A.create());c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},transpose:function(c,b){if(!b||c===b){var l=c[1];c[1]=c[2];c[2]=l;return c}b[0]=c[0];b[1]=c[2];b[2]=c[1];b[3]=c[3];return b},determinant:function(c){return c[0]*c[3]-c[2]*c[1]},inverse:function(c,b){b||(b=c);var l=c[0],t=c[1],w=c[2],C=c[3],D=l*C-w*t;if(!D)return null;D=1/D;b[0]=C*D;b[1]=-t*D;b[2]=-w*D;b[3]=l*D;return b},
multiply:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];l[0]=t*b[0]+w*b[2];l[1]=t*b[1]+w*b[3];l[2]=C*b[0]+c*b[2];l[3]=C*b[1]+c*b[3];return l},rotate:function(c,b,l){l||(l=c);var t=c[0],w=c[1],C=c[2];c=c[3];var D=Math.sin(b);b=Math.cos(b);l[0]=t*b+w*D;l[1]=t*-D+w*b;l[2]=C*b+c*D;l[3]=C*-D+c*b;return l},multiplyVec2:function(c,b,l){l||(l=b);var t=b[0];b=b[1];l[0]=t*c[0]+b*c[1];l[1]=t*c[2]+b*c[3];return l},scale:function(c,b,l){l||(l=c);var t=c[1],w=c[2],C=c[3],D=b[0];b=b[1];l[0]=c[0]*D;l[1]=
t*b;l[2]=w*D;l[3]=C*b;return l},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"}},y=a?"":"d";p["glMath"+y]=d;p["vec2"+y]={create:function(c){var b=new g(2);c?(b[0]=c[0],b[1]=c[1]):(b[0]=0,b[1]=0);return b},createFrom:function(c,b){var l=new g(2);l[0]=c;l[1]=b;return l},add:function(c,b,l){l||(l=b);l[0]=c[0]+b[0];l[1]=c[1]+b[1];return l},subtract:function(c,b,l){l||(l=b);l[0]=c[0]-b[0];l[1]=c[1]-b[1];return l},multiply:function(c,b,l){l||(l=b);l[0]=c[0]*b[0];l[1]=c[1]*b[1];return l},
divide:function(c,b,l){l||(l=b);l[0]=c[0]/b[0];l[1]=c[1]/b[1];return l},scale:function(c,b,l){l||(l=c);l[0]=c[0]*b;l[1]=c[1]*b;return l},dist:function(c,b){var l=b[0]-c[0],t=b[1]-c[1];return Math.sqrt(l*l+t*t)},dist2:function(c,b){var l=b[0]-c[0],t=b[1]-c[1];return l*l+t*t},set:function(c,b){b[0]=c[0];b[1]=c[1];return b},set2:function(c,b,l){l[0]=c;l[1]=b;return l},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];return b},normalize:function(c,b){b||(b=c);var l=c[0]*c[0]+c[1]*c[1];0<l?(l=Math.sqrt(l),
b[0]=c[0]/l,b[1]=c[1]/l):b[0]=b[1]=0;return b},cross:function(c,b,l){c=c[0]*b[1]-c[1]*b[0];if(!l)return c;l[0]=l[1]=0;l[2]=c;return l},length:function(c){var b=c[0];c=c[1];return Math.sqrt(b*b+c*c)},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]},direction:function(c,b,l){l||(l=c);var t=c[0]-b[0];c=c[1]-b[1];b=t*t+c*c;if(!b)return l[0]=0,l[1]=0,l[2]=0,l;b=1/Math.sqrt(b);l[0]=t*b;l[1]=c*b;return l},lerp:function(c,b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);return t},str:function(c){return"["+
c[0]+", "+c[1]+"]"}};p["vec3"+y]=n;p["vec4"+y]={create:function(c){var b=new g(4);c?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(c,b,l,t){var w=new g(4);w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},add:function(c,b,l){l||(l=b);l[0]=c[0]+b[0];l[1]=c[1]+b[1];l[2]=c[2]+b[2];l[3]=c[3]+b[3];return l},subtract:function(c,b,l){l||(l=b);l[0]=c[0]-b[0];l[1]=c[1]-b[1];l[2]=c[2]-b[2];l[3]=c[3]-b[3];return l},multiply:function(c,b,l){l||(l=b);l[0]=c[0]*b[0];l[1]=
c[1]*b[1];l[2]=c[2]*b[2];l[3]=c[3]*b[3];return l},divide:function(c,b,l){l||(l=b);l[0]=c[0]/b[0];l[1]=c[1]/b[1];l[2]=c[2]/b[2];l[3]=c[3]/b[3];return l},scale:function(c,b,l){l||(l=c);l[0]=c[0]*b;l[1]=c[1]*b;l[2]=c[2]*b;l[3]=c[3]*b;return l},dot:function(c,b){return c[0]*b[0]+c[1]*b[1]+c[2]*b[2]+c[3]*b[3]},set:function(c,b){b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];return b},set4:function(c,b,l,t,w){w[0]=c;w[1]=b;w[2]=l;w[3]=t;return w},negate:function(c,b){b||(b=c);b[0]=-c[0];b[1]=-c[1];b[2]=-c[2];
b[3]=-c[3];return b},lerp:function(c,b,l,t){t||(t=c);t[0]=c[0]+l*(b[0]-c[0]);t[1]=c[1]+l*(b[1]-c[1]);t[2]=c[2]+l*(b[2]-c[2]);t[3]=c[3]+l*(b[3]-c[3]);return t},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+"]"}};p["mat2"+y]=A;p["mat3"+y]=u;p["mat4"+y]=v;p["quat4"+y]=x});return B})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(B,p){function a(g,n){g%=n;return 0<=g?g:g+n}Object.defineProperty(p,"__esModule",{value:!0});p.C_INFINITY=
Number.POSITIVE_INFINITY;p.C_PI=Math.PI;p.C_2PI=2*p.C_PI;p.C_PI_BY_2=p.C_PI/2;p.C_RAD_TO_256=128/p.C_PI;p.C_256_TO_RAD=p.C_PI/128;p.C_DEG_TO_256=256/360;p.C_DEG_TO_RAD=p.C_PI/180;p.C_SQRT2=1.414213562;p.C_SQRT2_INV=1/p.C_SQRT2;var d=1/Math.LN2;p.positiveMod=a;p.radToByte=function(g){return a(g*p.C_RAD_TO_256,256)};p.degToByte=function(g){return a(g*p.C_DEG_TO_256,256)};p.log2=function(g){return Math.log(g)*d};p.sqr=function(g){return g*g};p.clamp=function(g,n,m){return Math.min(Math.max(g,n),m)};
p.interpolate=function(g,n,m){return g*(1-m)+n*m};p.between=function(g,n,m){return g>=n&&g<=m||g>=m&&g<=n}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(B,p,a,d,g,n,m){var f;a("stable-symbol-rendering")&&(f=new Set);return function(){function h(k,e,r){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};
this._textures=[];this._rangePromises=new Map;this.width=k;this.height=e;this._glyphSource=r;this._binPack=new n(k-4,e-4);this._glyphData.push(new Uint8Array(k*e));this._dirties.push(!0);this._textures.push(void 0);this._addDecorationGlyph()}h.prototype.getGlyphItems=function(k,e){for(var r=this,q=[],u=this._glyphSource,v=new Set,x=1/256,z=0;z<e.length;z++)v.add(Math.floor(e[z]*x));var A=[];v.forEach(function(y){if(256>=y){var c=k+y;r._rangePromises.has(c)?A.push(r._rangePromises.get(c)):(y=u.getRange(k,
y).then(function(){r._rangePromises["delete"](c)})["catch"](function(){r._rangePromises["delete"](c);throw Error("Unable to query resource");}),r._rangePromises.set(c,y),A.push(y))}});return d(A).then(function(y){y=r._glyphIndex[k];y||(y={},r._glyphIndex[k]=y);if(a("stable-symbol-rendering")){f.clear();for(var c=0;c<e.length;c++){var b=e[c];f.add(b)}var l=[];v.forEach(function(D){l.push(D)});l.sort();b=[];for(c=0;c<l.length;c++)for(var t=l[c],w=0;256>w;++w)b.push(256*t+w)}else b=e;c=0;for(t=b;c<t.length;c++)if(b=
t[c],w=y[b]){if(!a("stable-symbol-rendering")||f.has(b))q[b]={rect:w.rect,metrics:w.metrics,page:w.page}}else if((w=u.getGlyph(k,b))&&w.metrics){var C=r._recordGlyph(w,b);y[b]={rect:C,metrics:w.metrics,tileIDs:null,page:r._currentPage};if(!a("stable-symbol-rendering")||f.has(b))q[b]={rect:C,metrics:w.metrics,page:r._currentPage};r._dirties[r._currentPage]=!0}return q})};h.prototype._recordGlyph=function(k,e){var r=k.metrics;if(0===r.width)r=new g(0,0,0,0);else{var q=r.width+6,u=r.height+6,v=q%4?4-
q%4:4,x=u%4?4-u%4:4;1===v&&(v=5);1===x&&(x=5);r=this._binPack.allocate(q+v,u+x);r.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new n(this.width-4,this.height-4),r=this._binPack.allocate(q+v,u+x));v=this._glyphData[this._currentPage];x=k.bitmap;var z=void 0,A=void 0;if(x)for(var y=0;y<u;y++){z=
q*y;A=this.width*(r.y+y+1)+r.x;for(var c=0;c<q;c++)v[A+c+1]=x[z+c]}}return r};h.prototype._addDecorationGlyph=function(){for(var k=[117,149,181,207,207,181,149,117],e=[],r=0;r<k.length;r++)for(var q=k[r],u=0;11>u;u++)e.push(q);k={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)};this._recordGlyph(k,0)};h.prototype.bind=function(k,e,r,q){this._textures[r]||(this._textures[r]=new m(k,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*
this.height)));var u=this._textures[r];u.setSamplingMode(e);this._dirties[r]&&u.setData(this._glyphData[r]);k.bindTexture(u,q);this._dirties[r]=!1};h.prototype.dispose=function(){this._binPack=null;for(var k=0,e=this._textures;k<e.length;k++){var r=e[k];r&&r.dispose()}this._textures.length=0;this._glyphData.length=0};return h}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(B,p,a){return function(){function d(g,n){this._height=
this._width=0;this._free=[];this._width=g;this._height=n;this._free.push(new a(0,0,g,n))}Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});d.prototype.allocate=function(g,n){if(g>this._width||n>this._height)return new a;for(var m=null,f=-1,h=0;h<this._free.length;++h){var k=this._free[h];g<=k.width&&n<=k.height&&(null===m||k.y<=
m.y&&k.x<=m.x)&&(m=k,f=h)}if(null===m)return new a;this._free.splice(f,1);m.width<m.height?(m.width>g&&this._free.push(new a(m.x+g,m.y,m.width-g,n)),m.height>n&&this._free.push(new a(m.x,m.y+n,m.width,m.height-n))):(m.width>g&&this._free.push(new a(m.x+g,m.y,m.width-g,m.height)),m.height>n&&this._free.push(new a(m.x,m.y+n,g,m.height-n)));return new a(m.x,m.y,g,n)};d.prototype.release=function(g){for(var n=0;n<this._free.length;++n){var m=this._free[n];if(m.y===g.y&&m.height===g.height&&m.x+m.width===
g.x)m.width+=g.width;else if(m.x===g.x&&m.width===g.width&&m.y+m.height===g.y)m.height+=g.height;else if(g.y===m.y&&g.height===m.height&&g.x+g.width===m.x)m.x=g.x,m.width+=g.width;else if(g.x===m.x&&g.width===m.width&&g.y+g.height===m.y)m.y=g.y,m.height+=g.height;else continue;this._free.splice(n,1);this.release(g)}this._free.push(g)};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request","../../../../core/pbf","../../../../core/promiseUtils"],
function(B,p,a,d,g){var n=function(){function f(h){this._metrics=[];for(this._bitmaps=[];h.next();)switch(h.tag()){case 1:for(var k=h.getMessage();k.next();)switch(k.tag()){case 3:for(var e=k.getMessage(),r=void 0,q=void 0,u=void 0,v=void 0,x=void 0,z=void 0,A=void 0;e.next();)switch(e.tag()){case 1:r=e.getUInt32();break;case 2:q=e.getBytes();break;case 3:u=e.getUInt32();break;case 4:v=e.getUInt32();break;case 5:x=e.getSInt32();break;case 6:z=e.getSInt32();break;case 7:A=e.getUInt32();break;default:e.skip()}r&&
(this._metrics[r]={width:u,height:v,left:x,top:z,advance:A},this._bitmaps[r]=q);break;default:k.skip()}break;default:h.skip()}}f.prototype.getMetrics=function(h){return this._metrics[h]};f.prototype.getBitmap=function(h){return this._bitmaps[h]};return f}(),m=function(){function f(){this._ranges=[]}f.prototype.getRange=function(h){return this._ranges[h]};f.prototype.addRange=function(h,k){this._ranges[h]=k};return f}();return function(){function f(h){this._glyphInfo={};this._baseURL=h}f.prototype.getRange=
function(h,k){var e=this._getFontStack(h);if(e.getRange(k))return g.resolve();var r=256*k,q=r+255;r=this._baseURL.replace("{fontstack}",h).replace("{range}",r+"-"+q);return a(r,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(u){e.addRange(k,new n(new d(new Uint8Array(u.data),new DataView(u.data))))})};f.prototype.getGlyph=function(h,k){var e=this._getFontStack(h);if(e){var r=Math.floor(k/256);if(!(256<r)&&(e=e.getRange(r)))return{metrics:e.getMetrics(k),bitmap:e.getBitmap(k)}}};
f.prototype._getFontStack=function(h){var k=this._glyphInfo[h];k||(k=this._glyphInfo[h]=new m);return k};return f}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(B,p,a,d,g){return function(n,m){var f=d.mixin({},{url:n,failOk:!0},m);"array-buffer"===m.responseType?(f.handleAs="arraybuffer",delete f.responseType):m.responseType&&(f.handleAs=m.responseType,delete f.responseType);null!==m.query&&(f.content=f.query,
delete f.query);if(m.hasOwnProperty("allowImageDataAccess")){var h={allowImageDataAccess:m.allowImageDataAccess};delete f.allowImageDataAccess}var k=new g(function(){e.isFulfilled()||e.cancel()});var e=a(f,h).then(function(r){k.resolve({data:r})})["catch"](function(r){r&&null!=r.httpCode&&(r.details=r.details||{},r.details.httpStatus=r.httpCode);k.reject(r)});return k.promise}})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A){function y(K){K=new n(K);return(K.host+(K.port?":"+K.port:"")).toLowerCase()}function c(K){return this._xhr?this._xhr.getResponseHeader(K):null}function b(K,O){var N=r.objectToQuery(K.content);N&&(K.url+=(-1===K.url.indexOf("?")?"?":"\x26")+N);if(2E3<K.url.length){if("data:"!==K.url.toLowerCase().slice(0,5))return N=new d,N.reject(g.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),N;if(3E6<K.url.length)return N=
new d,N.reject(g.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),N}var Y=new Image;O.allowImageDataAccess&&(Y.crossOrigin=K.withCredentials?"use-credentials":"anonymous");var P=!1,L=new d(function(Q){P=!0;Y.onload=Y.onerror=Y.onabort=null;Y.src=""});N=function(Q){Y.onload=Y.onerror=Y.onabort=null;P||L.reject(Error("Unable to load the resource"))};Y.onload=function(){Y.onload=Y.onerror=Y.onabort=null;P||L.resolve(this)};Y.onerror=N;Y.onabort=
N;Y.alt="";Y.src=K.url;return L}function l(K,O,N,Y){var P=!1,L=!1,Q=!1;if(x.isDefined(O))if(g.isObject(O)){P=!!O.useProxy;L=!!O.usePost;Q=!!O.returnProgress;var ca=O.crossOrigin}else P=!!O;K=g.mixin({},K);delete K._credential;K._ssl&&(K.url=K.url.replace(/^http:/i,"https:"));10>v("ie")&&!W.test(K.url)&&(K.url=encodeURI(K.url));var ha=K.content,ja=K.url,ma=N&&K.form,R=H;ca=x.isDefined(ca)?ca:R.useCors;K.load=function(Ca){if(Ca){if(Ca.error){var Na=g.mixin(Error(),Ca.error);Na.log=!!a.isDebug}else"error"===
Ca.status&&(Na=g.mixin(Error(),Ca),Na.log=!!a.isDebug);Na&&(K.failOk=!Na.log,x.isDefined(Na.httpCode)||(Na.httpCode=Na.code))}return Na||Ca};K.error=function(Ca,Na){Na&&Na.xhr&&Na.xhr.abort();Ca instanceof Error||(Ca=g.mixin(Error(),Ca));Ca.log=!!a.isDebug;K.failOk=!Ca.log;R.errorHandler(Ca,Na);return Ca};K._token&&(K.content=K.content||{},K.content.token=K._token);var fa=0;if(ha&&ja){var ka=r.objectToQuery(ha);fa=ka.length+ja.length+1;v("esri-url-encodes-apostrophe")&&(fa=ka.replace(/'/g,"%27").length+
ja.length+1)}K.timeout=x.isDefined(K.timeout)?K.timeout:R.timeout;K.handleAs=K.handleAs||"json";try{var qa=ca&&z.canUseXhr(K.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(K.url),na=z.hasSameOrigin(K.url,window.location.href)||qa,ia=L||N||fa>R.postLength?!0:!1,ea=na||-1===K.handleAs.indexOf("json")||!K.callbackParamName||N?!1:!0,oa=z.getProxyRule(K.url)||R.alwaysUseProxy||P||!("image"===K.handleAs&&!O.allowImageDataAccess||ea&&!ia||na)?!0:!1;N&&!v("esri-file-upload")&&!oa&&qa&&(oa=!0);
if(oa){var ta=z.getProxyUrl(ja,ca);var ra=ta.path;ta._xo&&(qa=!0);!ia&&ra.length+1+fa>R.postLength&&(ia=!0);K.url=ra+"?"+ja;if(ia)K.content=g.mixin(ta.query||{},ha);else{var aa=r.objectToQuery(g.mixin(ta.query||{},ha));aa&&(K.url+="?"+aa);K.content=null}}if(!ea||ia||oa){var da=K.headers;!qa||da&&da.hasOwnProperty("X-Requested-With")||(da=K.headers=da||{},da["X-Requested-With"]=null);if(N){var J=K.callbackParamName||"callback.html",sa=K.callbackElementName||"textarea",wa,U,La=ma.elements?ma.elements.length:
0;if(ha=K.content)for(wa in ha.token&&-1<ja.toLowerCase().indexOf("/sharing/servers/")&&(ja+=(-1===ja.indexOf("?")?"?":"\x26")+"token\x3d"+ha.token,K.url=oa?ra+"?"+ja:ja,delete ha.token),ha){var Ha=ha[wa];if(x.isDefined(Ha)){var pa=null;for(U=0;U<La;U++){var Qa=ma.elements[U];if(Qa.name===wa){pa=Qa;break}}pa?pa.value=Ha:Y?ma.append(wa,Ha):ma.appendChild(e.create("input",{type:"hidden",name:wa,value:Ha}))}}if(v("esri-file-upload")){p.forEach(ma.elements,function(Ca){Ca.name===J&&ma.removeChild(Ca)});
var Ga=Y?ma:new FormData(ma);if(11<=v("safari")&&"entries"in Ga&&"delete"in Ga){Y=[];for(var va=Ga.entries(),za=va.next();!za.done;){var Ba=za.value;Ba[1]instanceof File&&""===Ba[1].name&&Y.push(Ba[0]);za=va.next()}Y.forEach(function(Ca){Ga["delete"](Ca)})}K.contentType=!1;K.postData=Ga;delete K.form}else{ma.enctype="multipart/form-data";9>v("ie")&&(ma.encoding="multipart/form-data");ma.method="post";p.some(ma.elements,function(Ca){return Ca.name===J})||ma.appendChild(e.create("input",{type:"hidden",
name:J,value:sa}));if(-1!==ja.toLowerCase().indexOf("addattachment")||-1!==ja.toLowerCase().indexOf("updateattachment"))ja+=(-1===ja.indexOf("?")?"?":"\x26")+J+"\x3d"+sa,K.url=oa?ra+"?"+ja:ja;delete K.content}}if(qa&&!K.hasOwnProperty("withCredentials")&&"with-credentials"===H.useCors){ja=oa?ra:ja;var Fa=z.canUseXhr(ja,!0),xa=-1<Fa?H.corsEnabledServers[Fa]:null;if(xa&&xa.hasOwnProperty("withCredentials"))xa.withCredentials&&(K.withCredentials=!0);else if(q.id){var Da=q.id.findServerInfo(ja);Da&&Da.webTierAuth&&
(K.withCredentials=!0)}}K=G?G(K):K;if("image"===K.handleAs)return b(K,O);if(ia){if(N&&!v("esri-file-upload")){var Aa=new d(function(){Ja.cancel()});var Ja=k.post(K.url,K).then(function(Ca){Aa.resolve(Ca)}).otherwise(function(Ca){Aa.reject(Ca)});Aa.addCallback(function(Ca){return K.load(Ca)});Aa.addErrback(function(Ca){return K.error(Ca)});return Aa}!oa&&v("safari")&&(K.url+=(-1===K.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+X++);if(Q){K.uploadProgress=!0;K.data=K.postData;K.query=
K.content;Aa=new d(function(){Ka.cancel()});var Ka=f.post(K.url,K).then(function(Ca){Aa.resolve(Ca)},function(Ca){Aa.reject(Ca)},function(Ca){Aa.progress({transferType:Ca.transferType,loaded:Ca.loaded,total:Ca.total})});Aa.addCallback(function(Ca){return K.load(Ca)});Aa.addErrback(function(Ca){return K.error(Ca)});return Aa}return m.post(K)}return m.get(K)}K=G?G(K):K;K.jsonp=K.callbackParamName;K.query=K.content;Aa=new d(function(){Ma.cancel()});var Ma=h.get(K.url,K).then(function(Ca){Aa.resolve(Ca)}).otherwise(function(Ca){Aa.reject(Ca)});
Aa.addCallback(function(Ca){return K.load(Ca)});Aa.addErrback(function(Ca){return K.error(Ca)});return Aa}catch(Ca){return Aa=new d,Aa.errback(K.error(Ca)),Aa}}function t(K){var O=H.corsStatus,N=z.canUseXhr(K,!0);-1<N&&H.corsEnabledServers.splice(N,1);var Y=new d;Y.reject({log:!!a.isDebug});O[y(K)]=Y.promise;return N}function w(K){var O=H.corsStatus;try{var N=y(K);if(H.corsDetection&&H.useCors&&v("esri-cors")&&K&&-1!==K.toLowerCase().indexOf("/rest/services")&&!z.hasSameOrigin(K,window.location.href)&&
!z.canUseXhr(K)){if(O[N]&&!O[N].isCanceled())return O[N];var Y=new d(A._dfdCanceller);O[N]=Y.promise;var P=m.get({url:K.substring(0,K.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*H.corsDetectionTimeout});Y._pendingDfd=P;P.then(function(L){L?(z.canUseXhr(K)||H.corsEnabledServers.push(N),Y.resolve()):Y.reject()},function(L){Y.reject(L)});return Y.promise}}catch(L){}return T}function C(K){G=K}function D(K,O,N,Y){function P(na){na._pendingDfd=
l(N,Y,R,ma);if(!na._pendingDfd){na.ioArgs=na._pendingDfd&&na._pendingDfd.ioArgs;var ia=Error("Deferred object is missing");ia.log=!!a.isDebug;na.errback(ia);na._pendingDfd=null;return na}na._pendingDfd.addCallback(function(ea){if(!ea)return ea;var oa=na._pendingDfd&&na._pendingDfd.ioArgs&&na._pendingDfd.ioArgs.xhr;if(!oa)return ea;if(oa=oa.getResponseHeader("Content-Type"))if(oa=oa.toLowerCase(),-1===oa.indexOf("text/plain")&&-1===oa.indexOf("application/json"))return ea;if(ea instanceof ArrayBuffer&&
750>=ea.byteLength)oa=new Blob([ea]);else if(ea instanceof Blob&&750>=ea.size)oa=ea;else return ea;var ta=new d,ra=new FileReader;ra.readAsText(oa);ra.onloadend=function(){if(!ra.error)try{var aa=JSON.parse(ra.result);if(aa.error)var da=aa.error}catch(J){}da?(da=g.mixin(Error(),da),da.log=!!a.isDebug,null==da.httpCode&&(da.httpCode=da.code),ta.reject(da)):ta.resolve(ea)};return ta.promise}).addCallback(function(ea){na.ioArgs=na._pendingDfd&&na._pendingDfd.ioArgs;Y.returnFullResponse&&(ea={data:ea,
_xhr:na.ioArgs&&na.ioArgs.xhr,getHeader:c});na.callback(ea);na._pendingDfd=null}).addErrback(function(ea){if(ea){var oa=ea.code;var ta=ea.subcode;var ra=(ra=ea.messageCode)&&ra.toUpperCase()}if(ea&&403==oa&&(4==ta||ea.message&&-1<ea.message.toLowerCase().indexOf("ssl")&&-1===ea.message.toLowerCase().indexOf("permission"))){if(!N._ssl){N._ssl=N._sslFromServer=!0;D(na,!0,N,Y);return}}else if(ea&&415==ea.status){if(t(N.url),!N._err415){N._err415=1;D(na,!0,N,Y);return}}else if(q.id&&-1!==p.indexOf(q.id._errorCodes,
oa)&&!q.id._isPublic(N.url)&&!Q&&(403!=oa||-1===p.indexOf(M,ra)&&(!x.isDefined(ta)||2==ta&&N._token))){na._pendingDfd=q.id.getCredential(N.url,{token:N._token,error:ea});na._pendingDfd.addCallback(function(aa){N._token=aa.token;N._credential=aa;N._ssl=N._sslFromServer||aa.ssl;D(na,!0,N,Y)}).addErrback(function(aa){na.errback(aa);na._pendingDfd=null});return}na.ioArgs=na._pendingDfd&&na._pendingDfd.ioArgs;na.isFulfilled()||na.errback(ea);na._pendingDfd=null}).then(null,null,function(ea){na.progress(ea)})}
var L=N.form,Q=Y.disableIdentityLookup,ca=Y._preLookup,ha=!1;if(v("esri-workers")&&!1!==H.useWorkers)if(!0===Y.useWorkers||!0===H.useWorkers)ha=!0;else if(Y.workerOptions){var ja=Y.workerOptions;if(ja.callback||ja.worker&&ja.worker.worker instanceof Worker)ha=!0}var ma=L&&v("esri-file-upload")&&L instanceof FormData,R=L&&(L.elements?p.some(L.elements,function(na){return"file"===na.type}):ma),fa=-1!==N.url.toLowerCase().indexOf("token\x3d")||N.content&&N.content.token||R&&p.some(L.elements,function(na){return"token"===
na.name})?1:0;if(!O){K.addCallback(function(na){if((/\/sharing\/rest\/accounts\/self/i.test(N.url)||/\/sharing\/rest\/portals\/self/i.test(N.url))&&!fa&&!N._token&&na&&na.user&&na.user.username){H.webTierAuthServers.push(y(N.url));na=H.corsEnabledServers;var ia=z.canUseXhr(N.url,!0),ea={host:y(N.url),withCredentials:!0};if(-1===ia)na.push(ea);else{var oa=na[ia];oa instanceof RegExp?(ea.host=oa,na.splice(ia,1,ea)):"object"===typeof oa?oa.withCredentials=!0:na.splice(ia,1,ea)}}if(na=N._credential)if(ia=
(ia=q.id.findServerInfo(na.server))&&ia.owningSystemUrl)ia=ia.replace(/\/?$/,"/sharing"),(na=q.id.findCredential(ia,na.userId))&&-1===q.id._getIdenticalSvcIdx(ia,na)&&na.resources.splice(0,0,ia)});K.addBoth(function(na){delete N._credential;!na||v("ie")&&na.nodeType||(na._ssl=N._ssl)});var ka=N.load,qa=N.error;ka&&K.addCallback(function(na){var ia=K._pendingDfd;ia=ia&&ia.ioArgs;return ka.call(ia&&ia.args,na,ia)});qa&&K.addErrback(function(na){var ia=K._pendingDfd;ia=ia&&ia.ioArgs;return qa.call(ia&&
ia.args,na,ia)})}!q.id||fa||N._token||q.id._isPublic(N.url)||Q&&!ca||!(O=q.id.findCredential(N.url))||(N._token=O.token,N._ssl=O.ssl);ha?Y.workerOptions&&Y.workerOptions.worker?(F||(F=m),m=Y.workerOptions.worker,P(K)):B(["./workers/RequestClient"],function(na){F||(F=m);if(Y.workerOptions){var ia=Y.workerOptions;m=na.getClient(ia.callback,ia.cbFunction)}else m=na.getClient();P(K)}):(F&&(m=F,F=null),P(K));return K}function E(K,O){K.url=z.fixUrl(K.url);O=O||{};var N=new d(A._dfdCanceller),Y=w(K.url);
N._pendingDfd=Y;Y.always(function(P){P&&"cancel"===P.dojoType?N.reject(P):D(N,!1,K,O)});return N}var F=null,G,H=u.defaults.io,M=["COM_0056","COM_0057","SB_0008"],X=0,W=/%[0-9A-F]{2}/i,T=function(){var K=new d;K.resolve();return K.promise}();E._makeRequest=l;E._processRequest=D;E._disableCors=t;E._detectCors=w;E.setRequestPreCallback=C;q.request=E;q._makeRequest=l;q._processRequest=D;q._disableCors=t;q._detectCors=w;q.setRequestPreCallback=C;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),
function(B,p,a,d,g,n){function m(){var z=document.createElement("iframe");z.name="esri_core_jsonp_iframe";z.style.display="none";z.setAttribute("sandbox","allow-scripts");if(!n("ff")&&"srcdoc"in z){var A=B.toUrl("dojo/dojo.js"),y=g.replace("../../../dojo/dojo.js",A);A=A.slice(0,-7);y=y.replace("../../../dojo/",A);z.srcdoc=y}else y=B.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===y.indexOf("https:")&&(y=y.replace("https:","http:")),z.src=y;document.body.appendChild(z);return z}function f(){var z=
new MessageChannel;z.port1.addEventListener("message",h);z.port1.start();return z}function h(z){var A=z.data;if("ready"===A){A=0;for(var y=v;A<y.length;A++)z=y[A],e(z,q);v=null}else if(z=x[A.id])delete x[A.id],A.isError?z.dfd.reject(Error(A.message)):z.dfd.resolve(A.response)}function k(z,A){z.addEventListener("load",function(){z.contentWindow.postMessage("init","*",[A.port2])})}function e(z,A){x[z.message.id]=z;A.port1.postMessage(z.message)}Object.defineProperty(p,"__esModule",{value:!0});var r,
q,u=0,v=[],x={};p.get=function(z,A){if(!n("esri-script-sandbox"))return d.get(z,A);var y=null;A&&(y={jsonp:A.jsonp,preventCache:A.preventCache,query:A.query,timeout:A.timeout});var c=new a(function(){if(v){var l=v.indexOf(b);-1<l&&v.splice(l,1)}else b.message.id in x&&delete x[b.message.id]}),b={dfd:c,message:{id:"id"+(++u+Math.random()),url:z,options:y}};r||(r=m(),q=f(),k(r,q));v?v.push(b):e(b,q);return c.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){function r(w,C){w.canDelete&&z._remove(w.id,C.options.frameDoc,!0)}function q(w){t&&t.length&&(g.forEach(t,function(C){z._remove(C.id,C.frameDoc);C.frameDoc=null}),t=[]);return w.options.jsonp?!w.data:!0}function u(w){return!!this.scriptLoaded}function v(w){return(w=w.options.checkString)&&eval("typeof("+w+') !\x3d\x3d "undefined"')}function x(w,C){if(this.canDelete){var D=this.response.options;t.push({id:this.id,frameDoc:D.ioArgs?D.ioArgs.frameDoc:D.frameDoc});D.ioArgs&&
(D.ioArgs.frameDoc=null);D.frameDoc=null}C?this.reject(C):this.resolve(w)}function z(w,C,D){var E=a.parseArgs(w,a.deepCopy({},C));w=E.url;C=E.options;var F=a.deferred(E,r,q,C.jsonp?null:C.checkString?v:u,x);n.mixin(F,{id:A+y++,canDelete:!1});C.jsonp&&((new RegExp("[?\x26]"+C.jsonp+"\x3d")).test(w)||(w+=(~w.indexOf("?")?"\x26":"?")+C.jsonp+"\x3d"+(C.frameDoc?"parent.":"")+A+"_callbacks."+F.id),F.canDelete=!0,l[F.id]=function(M){E.data=M;F.handleResponse(E)});a.notify&&a.notify.emit("send",E,F.promise.cancel);
if(!C.canAttach||C.canAttach(F)){var G=z._attach(F.id,w,C.frameDoc,function(M){if(!(M instanceof Error)){var X=Error("Error loading "+(M.target?M.target.src:"script"));X.source=M;M=X}F.reject(M);z._remove(F.id,C.frameDoc,!0)});if(!C.jsonp&&!C.checkString)var H=m(G,c,function(M){if("load"===M.type||b.test(G.readyState))H.remove(),F.scriptLoaded=M})}p(F);return D?F:F.promise}k.add("script-readystatechange",function(w,C){return"undefined"!==typeof C.createElement("script").onreadystatechange&&("undefined"===
typeof w.opera||"[object Opera]"!==w.opera.toString())});var A=B.id.replace(/[\/\.\-]/g,"_"),y=0,c=k("script-readystatechange")?"readystatechange":"load",b=/complete|loaded/,l=d.global[A+"_callbacks"]={},t=[];z.get=z;z._attach=function(w,C,D,E){D=D||e.doc;var F=D.createElement("script");if(E)m.once(F,"error",E);F.type="text/javascript";try{F.src=C}catch(G){E&&E(F)}F.id=w;F.async=!0;F.charset="utf-8";return D.getElementsByTagName("head")[0].appendChild(F)};z._remove=function(w,C,D){h.destroy(f.byId(w,
C));l[w]&&(D?l[w]=function(){delete l[w]}:delete l[w])};z._callbacksProperty=A+"_callbacks";return z})},"esri/core/sniff":function(){define(["../sniff"],function(B){return B})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r){function q(b){return!this.isFulfilled()}function u(b){return!!this._finished}
function v(b,l){if(!l)try{var t=b.options,w=z.doc(z._frame),C=t.handleAs;if("html"!==C){if("xml"===C)if("html"===w.documentElement.tagName.toLowerCase()){f("a",w.documentElement).orphan();var D=w.documentElement.innerText||w.documentElement.textContent;D=D.replace(/>\s+</g,"\x3e\x3c");b.text=n.trim(D)}else b.data=w;else b.text=w.getElementsByTagName("textarea")[0].value;g(b)}else b.data=w}catch(E){l=E}l?this.reject(l):this._finished?this.resolve(b):this.reject(Error("Invalid dojo/request/iframe request state"))}
function x(b){this._callNext()}function z(b,l,t){var w=d.parseArgs(b,d.deepCreate(c,l),!0);b=w.url;l=w.options;if("GET"!==l.method&&"POST"!==l.method)throw Error(l.method+" not supported by dojo/request/iframe");z._frame||(z._frame=z.create(z._iframeName,y+"();"));b=d.deferred(w,null,q,u,v,x);b._callNext=function(){this._calledNext||(this._calledNext=!0,z._currentDfd=null,z._fireNextRequest())};b._legacy=t;z._dfdQueue.push(b);z._fireNextRequest();a(b);return t?b:b.promise}var A=B.id.replace(/[\/\.\-]/g,
"_"),y=A+"_onload";r.global[y]||(r.global[y]=function(){var b=z._currentDfd;if(b){var l=k.byId(b.response.options.form)||b._tmpForm;if(l){for(var t=b._contentToClean,w=0;w<t.length;w++)for(var C=t[w],D=0;D<l.childNodes.length;D++){var E=l.childNodes[D];if(E.name===C){e.destroy(E);break}}b._originalAction&&l.setAttribute("action",b._originalAction);b._originalMethod&&(l.setAttribute("method",b._originalMethod),l.method=b._originalMethod);b._originalTarget&&(l.setAttribute("target",b._originalTarget),
l.target=b._originalTarget)}b._tmpForm&&(e.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else z._fireNextRequest()});var c={method:"POST"};z.create=function(b,l,t){if(r.global[b])return r.global[b];if(r.global.frames[b])return r.global.frames[b];t||(h("config-useXDomain")&&h("config-dojoBlankHtmlUrl"),t=h("config-dojoBlankHtmlUrl")||p.toUrl("dojo/resources/blank.html"));l=e.place('\x3ciframe id\x3d"'+b+'" name\x3d"'+b+'" src\x3d"'+t+'" onload\x3d"'+l+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
r.body());return r.global[b]=l};z.doc=function(b){if(b.contentDocument)return b.contentDocument;var l=b.name;if(l){var t=r.doc.getElementsByTagName("iframe");if(b.document&&t[l].contentWindow&&t[l].contentWindow.document)return t[l].contentWindow.document;if(r.doc.frames[l]&&r.doc.frames[l].document)return r.doc.frames[l].document}return null};z.setSrc=function(b,l,t){b=r.global.frames[b.name];b.contentWindow&&(b=b.contentWindow);try{t?b.location.replace(l):b.location=l}catch(w){}};z._iframeName=
A+"_IoIframe";z._notifyStart=function(){};z._dfdQueue=[];z._currentDfd=null;z._fireNextRequest=function(){try{if(!z._currentDfd&&z._dfdQueue.length){do var b=z._currentDfd=z._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&z._dfdQueue.length);if(!b||b.canceled||b.isCanceled&&b.isCanceled())z._currentDfd=null;else{var l=b.response,t=l.options,w=b._contentToClean=[],C=k.byId(t.form),D=d.notify,E=t.data||null;if(!b._legacy&&"POST"===t.method&&!C)C=b._tmpForm=e.create("form",{name:A+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},r.body());else if("GET"===t.method&&C&&-1<l.url.indexOf("?")){var F=l.url.slice(l.url.indexOf("?")+1);E=n.mixin(m.queryToObject(F),E)}if(C){if(!b._legacy){var G=C;do G=G.parentNode;while(G&&G!==r.doc.documentElement);G||(C.style.position="absolute",C.style.left="-1000px",C.style.top="-1000px",r.body().appendChild(C));C.name||(C.name=A+"_form")}if(E){G=function(O,N){e.create("input",{type:"hidden",name:O,value:N},C);w.push(O)};for(var H in E){var M=
E[H];if(n.isArray(M)&&1<M.length)for(F=0;F<M.length;F++)G(H,M[F]);else{var X=f("input[name\x3d'"+H+"']",C);-1==X.indexOf()?G(H,M):X.val(M)}}}var W=C.getAttributeNode("action"),T=C.getAttributeNode("method"),K=C.getAttributeNode("target");l.url&&(b._originalAction=W?W.value:null,W?W.value=l.url:C.setAttribute("action",l.url));b._legacy?T&&T.value||(T?T.value=t.method:C.setAttribute("method",t.method)):(b._originalMethod=T?T.value:null,T?T.value=t.method:C.setAttribute("method",t.method));b._originalTarget=
K?K.value:null;K?K.value=z._iframeName:C.setAttribute("target",z._iframeName);C.target=z._iframeName;D&&D.emit("send",l,b.promise.cancel);z._notifyStart(l);C.submit()}else t="",l.options.data&&(t=l.options.data,"string"!==typeof t&&(t=m.objectToQuery(t))),G=l.url+(-1<l.url.indexOf("?")?"\x26":"?")+t,D&&D.emit("send",l,b.promise.cancel),z._notifyStart(l),z.setSrc(z._frame,G,!0)}}}catch(O){b.reject(O)}};d.addCommonMethods(z,["GET","POST"]);return z})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(B,p,a,d,g){function n(h){for(;h.childNodes[0]&&1==h.childNodes[0].nodeType;)h=h.childNodes[0];return h}function m(h,k){"string"==typeof h?(h=d.toDom(h,k&&k.ownerDocument),11==h.nodeType&&(h=h.childNodes[0])):1==h.nodeType&&h.parentNode&&(h=h.cloneNode(!1));return h}var f=B.NodeList;p.extend(f,{_placeMultiple:function(h,k){for(var e="string"==typeof h||h.nodeType?B(h):h,r=[],q=0;q<e.length;q++)for(var u=e[q],v=this.length,x=v-1,z;z=this[x];x--)0<q&&(z=this._cloneNode(z),r.unshift(z)),x==v-
1?d.place(z,u,k):u.parentNode.insertBefore(z,u),u=z;r.length&&(r.unshift(0),r.unshift(this.length-1),Array.prototype.splice.apply(this,r));return this},innerHTML:function(h){return arguments.length?this.addContent(h,"only"):this[0].innerHTML},text:function(h){if(arguments.length){for(var k=0,e;e=this[k];k++)1==e.nodeType&&g.set(e,"textContent",h);return this}var r="";for(k=0;e=this[k];k++)r+=g.get(e,"textContent");return r},val:function(h){if(arguments.length){for(var k=p.isArray(h),e=0,r;r=this[e];e++){var q=
r.nodeName.toUpperCase(),u=r.type,v=k?h[e]:h;if("SELECT"==q)for(q=r.options,u=0;u<q.length;u++){var x=q[u];x.selected=r.multiple?-1!=a.indexOf(h,x.value):x.value==v}else"checkbox"==u||"radio"==u?r.checked=r.value==v:r.value=v}return this}if((r=this[0])&&1==r.nodeType){h=r.value||"";if("SELECT"==r.nodeName.toUpperCase()&&r.multiple){h=[];q=r.options;for(u=0;u<q.length;u++)x=q[u],x.selected&&h.push(x.value);h.length||(h=null)}return h}},append:function(h){return this.addContent(h,"last")},appendTo:function(h){return this._placeMultiple(h,
"last")},prepend:function(h){return this.addContent(h,"first")},prependTo:function(h){return this._placeMultiple(h,"first")},after:function(h){return this.addContent(h,"after")},insertAfter:function(h){return this._placeMultiple(h,"after")},before:function(h){return this.addContent(h,"before")},insertBefore:function(h){return this._placeMultiple(h,"before")},remove:f.prototype.orphan,wrap:function(h){if(this[0]){h=m(h,this[0]);for(var k=0,e;e=this[k];k++){var r=this._cloneNode(h);e.parentNode&&e.parentNode.replaceChild(r,
e);n(r).appendChild(e)}}return this},wrapAll:function(h){if(this[0]){h=m(h,this[0]);this[0].parentNode.replaceChild(h,this[0]);h=n(h);for(var k=0,e;e=this[k];k++)h.appendChild(e)}return this},wrapInner:function(h){if(this[0]){h=m(h,this[0]);for(var k=0;k<this.length;k++){var e=this._cloneNode(h);this._wrap(p._toArray(this[k].childNodes),null,this._NodeListCtor).wrapAll(e)}}return this},replaceWith:function(h){h=this._normalize(h,this[0]);for(var k=0,e;e=this[k];k++)this._place(h,e,"before",0<k),e.parentNode.removeChild(e);
return this},replaceAll:function(h){h=B(h);for(var k=this._normalize(this,this[0]),e=0,r;r=h[e];e++)this._place(k,r,"before",0<e),r.parentNode.removeChild(r);return this},clone:function(){for(var h=[],k=0;k<this.length;k++)h.push(this._cloneNode(this[k]));return this._wrap(h,this,this._NodeListCtor)}});f.prototype.html||(f.prototype.html=f.prototype.innerHTML);return f})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(B,p,a){p={_dfdCanceller:function(d){d.canceled=
!0;var g=d._pendingDfd;if(!d.isFulfilled()&&g&&!g.isFulfilled()){g.cancel();var n=g.results&&g.results[1]}d._pendingDfd=null;return n},_fixDfd:function(d){var g=d.then;d.then=function(n,m,f){if(n){var h=n;n=function(k){return k&&k._argsArray?h.apply(null,k):h(k)}}return g.call(this,n,m,f)};return d},_resDfd:function(d,g,n){var m=g.length;1===m?n?d.errback(g[0]):d.callback(g[0]):1<m?(g._argsArray=!0,d.callback(g)):d.callback()}};B.mixin(a,p);return p})},"esri/layers/vectorTiles/core/pbf":function(){define(["require",
"exports"],function(B,p){return function(){function a(d,g,n,m){this._tag=0;this._dataType=99;this._data=d;this._dataView=g;this._pos=n||0;this._end=m||d.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(d){for(;;){if(this._pos===this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!d||d===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=
this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var d=4294967295;d=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<21)>>>
0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return d};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var d=this.getUInt32();return d>>>1^-(d&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var d=0!==this._data[this._pos];this._skip(1);return d};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var d=
this._dataView,g=this._pos;d=d.getUint32(g,!0)+4294967296*d.getUint32(g+4,!0);this._skip(8);return d};a.prototype.getSFixed64=function(){var d=this._dataView,g=this._pos;d=d.getUint32(g,!0)+4294967296*d.getInt32(g+4,!0);this._skip(8);return d};a.prototype.getDouble=function(){var d=this._dataView.getFloat64(this._pos,!0);this._skip(8);return d};a.prototype.getFixed32=function(){var d=this._dataView.getUint32(this._pos,!0);this._skip(4);return d};a.prototype.getSFixed32=function(){var d=this._dataView.getInt32(this._pos,
!0);this._skip(4);return d};a.prototype.getFloat=function(){var d=this._dataView.getFloat32(this._pos,!0);this._skip(4);return d};a.prototype.getString=function(){var d=this._getLength(),g=this._pos;g=this._toString(this._data,g,g+d);this._skip(d);return g};a.prototype.getBytes=function(){var d=this._getLength(),g=this._pos;g=this._toBytes(this._data,g,g+d);this._skip(d);return g};a.prototype.getMessage=function(){var d=this._getLength(),g=this._pos;g=new a(this._data,this._dataView,g,g+d);this._skip(d);
return g};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(d){if(this._pos+d>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=d};a.prototype._decodeVarint=function(){var d=this._data,g=this._pos,n=0;if(10<=this._end-g){var m=d[g++];n|=m&127;if(0!==(m&128)&&(m=d[g++],n|=
(m&127)<<7,0!==(m&128)&&(m=d[g++],n|=(m&127)<<14,0!==(m&128)&&(m=d[g++],n|=(m&127)<<21,0!==(m&128)&&(m=d[g++],n+=268435456*(m&127),0!==(m&128)&&(m=d[g++],n+=34359738368*(m&127),0!==(m&128)&&(m=d[g++],n+=4398046511104*(m&127),0!==(m&128)&&(m=d[g++],n+=562949953421312*(m&127),0!==(m&128)&&(m=d[g++],n+=72057594037927936*(m&127),0!==(m&128)&&(m=d[g++],n+=0x7fffffffffffffff*(m&127),0!==(m&128)))))))))))throw Error("Varint too long!");}else{for(var f=1;g!==this._end;){m=d[g];if(0===(m&128))break;++g;n+=
(m&127)*f;f*=128}if(g===this._end)throw Error("Varint overrun!");++g;n+=m*f}this._pos=g;return n};a.prototype._decodeSVarint=function(){var d=this._decodeVarint();return d%2?-(d+1)/2:d/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(d,g,n){var m="",f="";for(n=Math.min(this._end,n);g<n;++g){var h=d[g];h&128?f+="%"+h.toString(16):(m+=decodeURIComponent(f)+String.fromCharCode(h),f="")}f.length&&
(m+=decodeURIComponent(f));return m};a.prototype._toBytes=function(d,g,n){n=Math.min(this._end,n);return new Uint8Array(d.buffer,g,n-g)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(B,p,a,d,g,n){return function(){function m(f,h,k){void 0===k&&(k=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=
this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;this._pageWidth=f;this._pageHeight=h;0<k&&(this._maxItemSize=k);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new g(this._pageWidth,this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}m.prototype.getWidth=function(f){return f>=
this._size.length?-1:this._size[f][0]};m.prototype.getHeight=function(f){return f>=this._size.length?-1:this._size[f][1]};m.prototype.getPage=function(f){return f<this._textures.length?this._textures[f]:null};m.prototype.has=function(f){return this._mosaicRects.has(f)};Object.defineProperty(m.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!0,configurable:!0});m.prototype.getSpriteItem=function(f){return this._mosaicRects.get(f)};m.prototype.addSpriteItem=function(f,
h,k,e,r,q){if(this._mosaicRects.has(f))return this._mosaicRects.get(f);var u=this._allocateImage(h[0],h[1]),v=u[0],x=u[1];u=u[2];if(0>=v.width||0>=v.height)return null;k={rect:v,width:h[0],height:h[1],anchorX:k[0],anchorY:k[1],sdf:q,pixelRatio:1,page:x};this._mosaicRects.set(f,k);this._copy({rect:v,spriteSize:h,spriteData:e,page:x,pageSize:u,repeat:r,sdf:q});return k};m.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};m.prototype.processNextItem=function(){var f=this._spriteCopyQueue.pop();
f&&this._copy(f)};m.prototype.getSpriteItems=function(f){for(var h={},k=0;k<f.length;k++){var e=f[k];h[e]=this.getSpriteItem(e)}return h};m.prototype.getMosaicItemPosition=function(f,h){var k=this.getSpriteItem(f),e=k&&k.rect;if(!e)return null;e.width=k.width;e.height=k.height;return{size:[k.width,k.height],tl:[(e.x+1)/this._size[k.page][0],(e.y+1)/this._size[k.page][1]],br:[(e.x+1+k.width)/this._size[k.page][0],(e.y+1+k.height)/this._size[k.page][1]],page:k.page}};m.prototype.bind=function(f,h,k,
e){void 0===k&&(k=0);void 0===e&&(e=0);this._textures[k]||(this._textures[k]=new n(f,{pixelFormat:6408,dataType:5121,width:this._size[k][0],height:this._size[k][1]},new Uint8Array(this._mosaicsData[k].buffer)));var r=this._textures[k];r.setSamplingMode(h);this._dirties[k]&&(r.setData(new Uint8Array(this._mosaicsData[k].buffer)),r.generateMipmap());f.bindTexture(r,e);this._dirties[k]=!1};m._copyBits=function(f,h,k,e,r,q,u,v,x,z,A){var y=e*h+k;u=v*q+u;if(A)for(u-=q,A=-1;A<=z;A++,y=((A+z)%z+e)*h+k,u+=
q)for(v=-1;v<=x;v++)r[u+v]=f[y+(v+x)%x];else for(A=0;A<z;A++){for(v=0;v<x;v++)r[u+v]=f[y+v];y+=h;u+=q}};m.prototype._copy=function(f){f.page>=this._mosaicsData.length||(m._copyBits(f.spriteData,f.spriteSize[0],0,0,this._mosaicsData[f.page],f.pageSize[0],f.rect.x+1,f.rect.y+1,f.spriteSize[0],f.spriteSize[1],f.repeat),this._dirties[f.page]=!0)};m.prototype._allocateImage=function(f,h){f+=2;h+=2;var k=Math.max(f,h);if(this._maxItemSize&&this._maxItemSize<k){k=Math.pow(2,Math.ceil(a.log2(f)));var e=Math.pow(2,
Math.ceil(a.log2(h))),r=new d(0,0,f,h);this._mosaicsData.push(new Uint32Array(k*e));this._dirties.push(!0);this._size.push([k,e]);this._textures.push(void 0);return[r,this._mosaicsData.length-1,[k,e]]}k=this._binPack.allocate(f+(f%4?4-f%4:0),h+(h%4?4-h%4:0));return 0>=k.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,
this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth,this._pageHeight),this._allocateImage(f,h)):[k,this._currentPage,[this._pageWidth,this._pageHeight]]};m.prototype.dispose=function(){this._binPack=null;for(var f=0,h=this._textures;f<h.length;f++){var k=h[f];k&&k.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return m}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],
function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.dataURItoBlob=function(d){var g=atob(d.split(",")[1]);d=d.split(",")[0].split(":")[1].split(";")[0];for(var n=new ArrayBuffer(g.length),m=new Uint8Array(n),f=0;f<g.length;f++)m[f]=g.charCodeAt(f);return new Blob([n],{type:d})};p.requestImage=function(d){return a(d,{responseType:"image",allowImageDataAccess:!0}).then(function(g){return g.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFConverter":function(){define(["require",
"exports","../../../../core/promiseUtils","../../../../core/promiseUtils","./packingUtils"],function(B,p,a,d,g){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function n(m){this.size=m;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=m;this.context=this.canvas.getContext("2d");this._gridOuter=new Float64Array(m*m);this._gridInner=new Float64Array(m*m);this._f=new Float64Array(m);this._d=new Float64Array(m);this._z=new Float64Array(m+1);this._v=new Int16Array(m);
m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("style","position: absolute;");m.setAttribute("width","0");m.setAttribute("height","0");document.body.appendChild(m);this._svg=m}n.prototype.draw=function(m,f,h){var k=this;void 0===h&&(h=31);var e=this._createSVGString(m);return a.create(function(r,q){var u=new Image;u.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(e);u.onload=function(){k.context.clearRect(0,0,k.size,k.size);k.context.drawImage(u,0,0,k.size,
k.size);for(var x=k.context.getImageData(0,0,k.size,k.size),z=new Uint8Array(k.size*k.size*4),A=0;A<k.size*k.size;A++){var y=x.data[4*A+3]/255;k._gridOuter[A]=1===y?0:0===y?1E20:Math.pow(Math.max(0,.5-y),2);k._gridInner[A]=1===y?1E20:0===y?0:Math.pow(Math.max(0,y-.5),2)}k._edt(k._gridOuter,k.size,k.size);k._edt(k._gridInner,k.size,k.size);for(A=0;A<k.size*k.size;A++)g.packFloatRGBA(.5-(k._gridOuter[A]-k._gridInner[A])/(2*h),z,4*A);r(z)};var v=f&&f.signal;if(v)d.onAbort(v,function(){return q(d.createAbortError())})})};
n.prototype._createSVGString=function(m){var f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("d",m);this._svg.appendChild(f);m=f.getBBox();var h=m.width/m.height,k=this.size/2,e;if(1<h){var r=e=k/m.width;var q=this.size/4;h=k-1/h*k/2}else e=r=k/m.height,q=k-k*h/2,h=this.size/4;f.setAttribute("style","transform: matrix("+e+", 0, 0, "+r+", "+(-m.x*e+q)+", "+(-m.y*r+h)+")");m='\x3csvg style\x3d"fill:red;" height\x3d"'+this.size+'" width\x3d"'+this.size+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e'+
this._svg.innerHTML+"\x3c/svg\x3e";this._svg.removeChild(f);return m};n.prototype._edt=function(m,f,h){for(var k=this._f,e=this._d,r=this._v,q=this._z,u=0;u<f;u++){for(var v=0;v<h;v++)k[v]=m[v*f+u];this._edt1d(k,e,r,q,h);for(v=0;v<h;v++)m[v*f+u]=e[v]}for(v=0;v<h;v++){for(u=0;u<f;u++)k[u]=m[v*f+u];this._edt1d(k,e,r,q,f);for(u=0;u<f;u++)m[v*f+u]=Math.sqrt(e[u])}};n.prototype._edt1d=function(m,f,h,k,e){h[0]=0;k[0]=-1E20;k[1]=1E20;for(var r=1,q=0;r<e;r++){for(var u=(m[r]+r*r-(m[h[q]]+h[q]*h[q]))/(2*r-
2*h[q]);u<=k[q];)q--,u=(m[r]+r*r-(m[h[q]]+h[q]*h[q]))/(2*r-2*h[q]);q++;h[q]=r;k[q]=u;k[q+1]=1E20}for(q=r=0;r<e;r++){for(;k[q+1]<r;)q++;f[r]=(r-h[q])*(r-h[q])+m[h[q]]}};return n}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/packingUtils":function(){define(["require","exports"],function(B,p){function a(m){return m-Math.floor(m)}Object.defineProperty(p,"__esModule",{value:!0});var d=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],n=function(m,f){void 0===f&&(f=
0);for(var h=0,k=0;4>k;k++)h+=m[f+k]*g[k];return h}(new Uint8ClampedArray([255,255,255,255]));p.packFloatRGBA=function(m,f,h){void 0===h&&(h=0);m=0>m?0:m>n?n:m;for(var k=0;4>k;k++)f[h+k]=Math.floor(256*a(m*d[k]))}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(B,p,a,d,g,n,m){function f(h,k){var e=k.length;
if(h<k[0].value||1===e)return k[0].size;for(var r=1;r<e;r++)if(h<k[r].value)return k[r-1].size+(h-k[r-1].value)/(k[r].value-k[r-1].value)*(k[r].size-k[r-1].size);return k[e-1].size}return function(){function h(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=
new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(h.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});h.prototype.updateHeatmapParameters=function(k){var e=
k.blurRadius,r=Math.round(4.5*k.blurRadius),q=2*r+1;this._heatmapParameters||(this._heatmapParameters={radius:e,blurRadius:r,kernelSize:q,refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:k.maxPixelIntensity,minPixelIntensity:k.minPixelIntensity});for(var u=this._heatmapParameters,v=k.colorStops,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A,y=0;16>y;y++){var c=
v[Math.min(y,v.length-1)];x[y]=c.ratio;A=4*y;z[A+0]=c.color[0]/255;z[A+1]=c.color[1]/255;z[A+2]=c.color[2]/255;z[A+3]=1<c.color[3]?c.color[3]/255:c.color[3];n.premultiplyAlpha(z,A,!0)}u.color={values:x,colors:z,refreshColorRamp:!0};1E-6<Math.abs(u.radius-k.radius)&&(u.radius=e,u.blurRadius=r,u.kernelSize=q,u.refreshIntensityKernel=!0);u.maxPixelIntensity=k.maxPixelIntensity;u.minPixelIntensity=k.minPixelIntensity};h.prototype.updateVisualVariables=function(k,e){var r=this._vvMaterialParameters;r.vvOpacityEnabled=
!1;r.vvSizeEnabled=!1;r.vvColorEnabled=!1;r.vvRotationEnabled=!1;if(k){var q=k.size;if(q){r.vvSizeEnabled=!0;if(q.minMaxValue){var u=q.minMaxValue,v=void 0,x=void 0;m.isDefined(u.minSize)&&m.isDefined(u.maxSize)&&(m.isNumber(u.minSize)&&m.isNumber(u.maxSize)?(v=a.pt2px(u.minSize),x=a.pt2px(u.maxSize)):(x=e.scale,v=a.pt2px(f(x,u.minSize.stops)),x=a.pt2px(f(x,u.maxSize.stops))));this.vvSizeMinMaxValue.set([u.minDataValue,u.maxDataValue,v,x])}q.scaleStops&&(this.vvSizeScaleStopsValue=a.pt2px(f(e.scale,
q.scaleStops.stops)));q.unitValue&&(this.vvSizeUnitValueToPixelsRatio=d.getMetersPerUnitForSR(e.spatialReference)/g.meterIn[q.unitValue.unit]/e.resolution);q.fieldStops&&(this.vvSizeFieldStopsValues.set(q.fieldStops.values),this.vvSizeFieldStopsSizes.set(q.fieldStops.sizes))}if(q=k.color)r.vvColorEnabled=!0,this.vvColorValues.set(q.values),this.vvColors.set(q.colors);if(q=k.opacity)r.vvOpacityEnabled=!0,this.vvOpacityValues.set(q.values),this.vvOpacities.set(q.opacities);if(q=k.rotation)r.vvRotationEnabled=
!0,r.vvRotationType=q.type}};return h}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(B,p,a,d,g){function n(u){return q.fromJSON(u.toLowerCase())||null}function m(u){return f(u)||p.decDegToMeters}function f(u){if(u)if("object"===typeof u){var v=u.wkid;var x=u.wkt}else"number"===typeof u?v=u:"string"===typeof u&&(x=u);if(v)var z=r.values[r[v]];else x&&-1!==x.search(/^PROJCS/i)&&
(u=e.exec(x))&&u[1]&&(z=parseFloat(u[1].split(",")[1]));return z}function h(u){if(u)if("object"===typeof u){var v=u.wkid;var x=u.wkt}else"number"===typeof u?v=u:"string"===typeof u&&(x=u);if(v)var z=r.units[r[v]];else x&&-1!==x.search(/^PROJCS/i)&&(u=e.exec(x))&&u[1]&&(z=(u=/[\\"\\']{1}([^\\"\\']+)/.exec(u[1]))&&u[1]);return z?n(z):null}function k(u,v){var x=m(v);return u/(x*p.inchesPerMeter*a.screenDPI)}Object.defineProperty(p,"__esModule",{value:!0});p.inchesPerMeter=39.37;p.decDegToMeters=20015077/
180;var e=/UNIT\[([^\]]+)\]\]$/i,r=g,q=d({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},
{ignoreUnknown:!0});p.unitFromRESTJSON=n;p.unitToRESTJSON=function(u){return q.toJSON(u)||null};p.getMetersPerVerticalUnitForSR=function(u){u=m(u);return 1E5<u?1:u};p.getVerticalUnitStringForSR=function(u){return 1E5<m(u)?"meters":h(u)};p.getMetersPerUnitForSR=m;p.getMetersPerUnit=f;p.getUnitString=h;p.getScale=function(u,v){var x=v||u.extent,z=u.width,A=f(x&&x.spatialReference);return x&&z?x.width/z*(A||p.decDegToMeters)*p.inchesPerMeter*a.screenDPI:0};p.getResolutionForScale=k;p.getExtentForScale=
function(u,v){var x=u.extent,z=u.width,A=k(v,x.spatialReference);return x.clone().expand(A*z/x.width)}})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e){function r(u,v){k.isMarkerSymbol(u)||k.isLineSymbol(u)?v.add(u):k.isFillSymbol(u)&&(v.add(u),u.outline&&"none"!==u.outline.style&&v.add(u.outline))}function q(u,v){v.has(u)||v.set(u,new Set);for(var x=u.text,z=v.get(u),A=x.length,y=0;y<A;y++){var c=x.charCodeAt(y);z.add(c)}}Object.defineProperty(p,"__esModule",{value:!0});B=function(){function u(v){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this.configuration=v.configuration;
this.service=v.service;this.spatialReference=v.spatialReference;this.tileRenderer=v.tileRenderer}u.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};u.prototype.getMeshData=function(v,x){return x&&x.features&&0!==x.features.length?this._processFeatures(v,x.features).then(function(z){return{tileKey:v.id,data:z}}):n.resolve({tileKey:v.id,data:null})};u.prototype.setConfiguration=function(v){this.configuration=v;this.factory=this.renderer=this.rendererInfo=null};u.prototype.getFactory=
function(){this.factory||(this.factory=this._createFactory());return this.factory};u.prototype.getRenderer=function(){this.renderer||(this.renderer=this._createRenderer());return this.renderer};u.prototype.getRendererInfo=function(){this.rendererInfo||(this.rendererInfo=this._createRendererInfo());return this.rendererInfo};u.prototype._createFactory=function(){if(!this.configuration)return null;var v={fields:this.service.fields,typeIdField:this.service.typeIdField,types:this.service.types};return e["default"].from(this.getRenderer(),
v,this._symbolToMosaicItemMap,this.service.geometryType,this.service.objectIdField,this.spatialReference,this.configuration.devicePixelRatio)};u.prototype._createRenderer=function(){return this.configuration?f.fromJSON(this.configuration.renderer):null};u.prototype._createRendererInfo=function(){return this.configuration?h.createRendererInfo(f.fromJSON(this.configuration.renderer),this.spatialReference,{fields:this.service.fields}):null};u.prototype._processFeatures=function(v,x){var z=this;return x&&
x.length?this._getMosaicItems(x).then(function(){return z._writeFeatures(v,x)}):n.resolve(null)};u.prototype._writeFeatures=function(v,x){var z=this,A=0,y=this.getFactory(),c=y.createMeshData(x.length),b={viewingMode:"",scale:v.scale};return d(function(){var l=x[A++],t=A===x.length;y.write(c,l,b);return t}).then(function(){return z._encodeDisplayData(c)})};u.prototype._encodeDisplayData=function(v){var x={};v.encode(x,[]);return x};u.prototype._getReturnCentroid=function(v){function x(z){if(!z)return!1;
z=z.type;return"simple-marker"===z||"picture-marker"===z||"text"===z}if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(v.type){case "simple":return x(v.symbol);case "unique-value":return x(v.defaultSymbol)||v.uniqueValueInfos.some(function(z){return x(z.symbol)});case "class-breaks":return x(v.defaultSymbol)||v.classBreakInfos.some(function(z){return x(z.symbol)});default:return!0}};u.prototype._getMosaicItems=function(v){v=m.acquire();for(var x=g.acquire(),z=this.getRenderer(),
A=0,y=z.getSymbols();A<y.length;A++){var c=y[A];k.isTextSymbol(c)?q(c,x):r(c,v)}(z instanceof a.UniqueValueRenderer||z instanceof a.ClassBreaksRenderer)&&(z=z.backgroundFillSymbol)&&r(z,v);var b=this._symbolToMosaicItemMap,l=g.acquire(),t=[],w=0;v.forEach(function(C){b.has(C.id)||(l.set(w,C),t.push({symbol:C.toJSON(),id:w}),w++)});x.forEach(function(C,D){if(b.has(D.id)){var E=b.get(D.id).glyphMosaicItems,F=[];C.forEach(function(H){if(E&&E.length<H||!E[H])F[H]=H});0<F.length&&(l.set(w,D),t.push({symbol:D.toJSON(),
id:w,glyphIds:F}),w++)}else{l.set(w,D);var G=[];C.forEach(function(H){return G.push(H)});t.push({symbol:D.toJSON(),id:w,glyphIds:G});w++}});if(0<t.length)return this.tileRenderer.getMaterialItems(t).then(function(C){for(var D=0;D<C.length;D++){var E=C[D],F=l.get(E.id);if(F)if(k.isTextSymbol(F))if(b.has(F.id)){if(F=b.get(F.id).glyphMosaicItems,E=E.mosaicItem.glyphMosaicItems)for(var G=0;G<E.length;G++)null!=E[G]&&(F[G]=E[G])}else b.set(F.id,E.mosaicItem);else b.set(F.id,E.mosaicItem)}g.release(l)});
m.release(v);g.release(x);return n.resolve()};return u}();p.SymbolProcessor=B})},"esri/layers/vectorTiles/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});p.ClassBreaksRenderer=a;p.HeatmapRenderer=d;p.BaseRenderer=g;p.SimpleRenderer=n;p.UniqueValueRenderer=
m;p.isRenderer=function(h){return h instanceof p.BaseRenderer};p.fromJSON=f.fromJSON})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(B,p,a,d,g,n,m,
f,h,k,e,r,q,u){var v=g.getLogger("esri.renderers.ClassBreaksRenderer");q=q.LegendOptions;u=u.ClassBreakInfo;var x=a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),z=n.ensureType(u),A=B(r,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:f,key:"type",typeMap:{"simple-fill":e.types.typeMap["simple-fill"],"picture-fill":e.types.typeMap["picture-fill"],"polygon-3d":e.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:k.read,write:{target:{backgroundFillSymbol:{type:h}},writer:k.writeTarget}}},read:k.read,write:k.writeTarget}},classBreakInfos:{type:[u],json:{read:function(y,c,b){if(Array.isArray(y)){var l=c.minValue;return y.map(function(t){var w=new u;w.read(t,b);null==w.minValue&&(w.minValue=l);null==w.maxValue&&(w.maxValue=w.minValue);l=w.maxValue;return w})}},write:function(y,c,b,l){y=y.map(function(t){return t.write({},l)});this._areClassBreaksConsecutive()&&y.forEach(function(t){delete t.classMinValue});
c[b]=y}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:e.rendererTypes,value:null,json:{origins:{"web-scene":{read:k.read,write:{target:{defaultSymbol:{types:e.rendererTypes3D}},
writer:k.writeTarget}}},read:k.read,write:k.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return m.createFunction(this.valueExpression)}},legendOptions:{type:q,value:null,json:{write:!0}},field:{value:null,cast:function(y){return null==y?y:"function"===typeof y?y:n.ensureString(y)},json:{type:String,write:function(y,c,b,l){"string"===typeof y?c[b]=y:l&&
l.messages?l.messages.push(new d("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):v.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var y=this._get("normalizationType"),c=!!this.normalizationField,
b=null!=this.normalizationTotal;if(c||b)y=c&&"field"||b&&"percent-of-total";else if("field"===y||"percent-of-total"===y)y=null;return y},json:{read:x.fromJSON,write:function(y,c){var b=x.toJSON(y);b&&(c.normalizationType=b)}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(y,c){c.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(y,c,b){y="number"===typeof y?new u({minValue:y,
maxValue:c,symbol:b}):z(p.clone(y));this.classBreakInfos.push(y);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(y,c){var b,l=this.classBreakInfos.length;for(b=0;b<l;b++){var t=[this.classBreakInfos[b].minValue,this.classBreakInfos[b].maxValue];if(t[0]==y&&t[1]==c){this.classBreakInfos.splice(b,1);break}}},getBreakIndex:function(y,c){var b=this.field,l=y.attributes,t=this.classBreakInfos.length,w=this.isMaxInclusive;if(this.valueExpression)b=m.executeFunction(this.compiledFunc,
m.createExecContext(y,m.getViewInfo(c)));else if("function"===typeof b)b=b(y);else{b=parseFloat(l[b]);var C=this.normalizationType;if(C){var D=parseFloat(this.normalizationTotal);l=parseFloat(l[this.normalizationField]);if("log"===C)b=Math.log(b)*Math.LOG10E;else if("percent-of-total"===C&&!isNaN(D))b=b/D*100;else if("field"===C&&!isNaN(l)){if(isNaN(b)||isNaN(l))return-1;b/=l}}}if(null!=b&&!isNaN(b)&&"number"===typeof b)for(l=0;l<t;l++)if(C=[this.classBreakInfos[l].minValue,this.classBreakInfos[l].maxValue],
C[0]<=b&&(w?b<=C[1]:b<C[1]))return l;return-1},getClassBreakInfo:function(y,c){var b=this.getBreakIndex(y,c);return-1!==b?this.classBreakInfos[b]:null},getSymbol:function(y,c){var b=this.getBreakIndex(y,c);return-1<b?this.classBreakInfos[b].symbol:this.defaultSymbol},getSymbols:function(){var y=[];this.classBreakInfos.forEach(function(c){c.symbol&&y.push(c.symbol)});this.defaultSymbol&&y.push(this.defaultSymbol);return y},clone:function(){return new A({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&
this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:p.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:p.clone(this.visualVariables),legendOptions:p.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(y){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(c){c&&(y[c]=!0)});this.valueExpression&&m.extractFieldNames(this.valueExpression).forEach(function(c){y[c]=!0})},_areClassBreaksConsecutive:function(){for(var y=this.classBreakInfos,c=1;c<y.length;c++)if(y[c-1].maxValue!==y[c].minValue)return!1;return!0}});return A})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y){function c(t,w,C){w=t?l[t.type]||null:null;if(w)return w=new w,w.read(t,C),w;C&&C.messages&&t&&C.messages.push(new d("symbol:unsupported","Symbols of type '"+(t.type||"unknown")+"' are not supported",{definition:t,context:C}));return null}function b(t,w,C){if(!t)return null;if(!C||"web-scene"!==C.origin||t.isInstanceOf(v)||t.isInstanceOf(z))return t.write(w,C);var D=y.to3D(t);if(D.symbol)return D.symbol.write(w,C);C.messages&&C.messages.push(new a("symbol:unsupported",
"Symbols of type '"+t.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:t,context:C,error:D.error}));return null}Object.defineProperty(p,"__esModule",{value:!0});var l={esriSMS:u,esriPMS:h,esriTS:x,esriSLS:q,esriSFS:r,esriPFS:f,PointSymbol3D:k,LineSymbol3D:n,PolygonSymbol3D:e,MeshSymbol3D:m,LabelSymbol3D:g,styleSymbolReference:z};p.read=c;p.writeTarget=function(t,w,C,D){(t=b(t,{},D))&&(w[C]=t)};p.write=b;p.fromJSON=function(t,
w){return c(t,null,w)};p.readCallout3D=function(t,w){if(!t||!t.type)return null;var C=null;switch(t.type){case "line":C=new A}C&&C.read(t,w);return C}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(B,p,a,d,g){B=function(n){function m(f,h,k){var e=n.call(this,f,h,k)||this;return e instanceof m?e:new m(f,h,k)}a(m,n);return m}(g);B.prototype.type="warning";return B})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./FillSymbol","./support/urlUtils"],function(B,p,a,d,g){var n={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},m=B(d,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",
url:g.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:a.toPt,json:{write:!0}},height:{value:12,cast:a.toPt,json:{write:!0}},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},source:g.sourcePropertyDefinition},getDefaults:function(){return p.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(f,h,k,e){if(f&&"string"!==typeof f&&null==f.imageData)return f;var r={};f&&(r.url=f);h&&(r.outline=
h);null!=k&&(r.width=a.toPt(k));null!=e&&(r.height=a.toPt(e));return r},clone:function(){var f=new m({color:p.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});f._set("source",p.clone(this.source));return f}});m.defaultProps=n;return m})},"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(B,p){return B.createSubclass({declaredClass:"esri.symbols.FillSymbol",
properties:{outline:{type:p,json:{read:{"default":null},write:!0}},type:null}})})},"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(B,p,a){function d(f,h,k){return h.imageData?a.makeData({mediaType:h.contentType||"image/png",isBase64:!0,data:h.imageData}):g(h.url,k)}function g(f,h){return!h||"service"!==h.origin&&"portal-item"!==h.origin||!h.layer||"feature"!==h.layer.type&&"stream"!==h.layer.type||a.isAbsolute(f)||!h.layer.parsedUrl?
a.read(f,h):a.join(h.layer.parsedUrl.path,"images",f)}function n(f,h,k,e){a.isDataProtocol(f)?(f=a.dataComponents(f),h.contentType=f.mediaType,h.imageData=f.data,k&&k.imageData===h.imageData&&k.url&&(h.url=m(k.url,e))):h.url=m(f,e)}function m(f,h){return a.write(f,h)}Object.defineProperty(p,"__esModule",{value:!0});p.readImageDataOrUrl=d;p.read=g;p.writeImageDataAndUrl=n;p.write=m;p.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:d},write:{writer:function(f,h,k,e){n(f,h,this.source,
e)}}}};p.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(f,h,k){f={};h.imageData&&(f.imageData=h.imageData);h.contentType&&(f.contentType=h.contentType);h.url&&(f.url=g(h.url,k));return f}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(B,p,a,d){function g(c){return a.normalize(c)}function n(c){return"data:"===c.slice(0,5)}function m(c){return f(c)||A.test(c)}function f(c){return c&&
"/"===c[0]&&"/"===c[1]}function h(c){return a.urlToObject(c)}function k(c){if("string"===typeof c)return new d(r(c));c.scheme||(c.scheme=p.appUrl.scheme);return c}function e(c){if(n(c))return null;var b=c.indexOf("://");if(-1===b&&f(c))b=2;else if(-1!==b)b+=3;else return null;b=c.indexOf("/",b);return-1===b?c:c.slice(0,b)}function r(c,b,l){void 0===b&&(b=p.appBaseUrl);if(f(c))return l&&l.preserveProtocolRelative?c:"http"===p.appUrl.scheme&&p.appUrl.authority===e(c).slice(2)?"http:"+c:"https:"+c;if(A.test(c))return c;
"/"===c[0]&&(l=b.indexOf("//"),l=b.indexOf("/",l+2),b=-1===l?b:b.slice(0,l));return u(b,c)}function q(c,b,l){void 0===l&&(l=!1);c=k(c);b=k(b);return l||c.scheme===b.scheme?c.host.toLowerCase()===b.host.toLowerCase()&&c.port===b.port:!1}function u(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];if(c&&c.length){b=[];if(m(c[0])){var l=c[0],t=l.indexOf("//");b.push(l.slice(0,t+1));z.test(c[0])&&(b[0]+="/");c[0]=l.slice(t+2)}else"/"===c[0][0]&&b.push("");c=c.reduce(function(w,C){return C?w.concat(C.split("/")):
w},[]);for(l=0;l<c.length;l++)t=c[l],".."===t&&0<b.length?b.pop():!t||"."===t&&0!==b.length||b.push(t);return b.join("/")}}function v(c,b,l){if(!(b&&l&&c&&m(c)))return c;var t=c.indexOf("//"),w=c.indexOf("/",t+2),C=c.indexOf(":",t+2);w=Math.min(0>w?c.length:w,0>C?c.length:C);if(c.slice(t+2,w).toLowerCase()!==b.toLowerCase())return c;b=c.slice(0,t+2);c=c.slice(w);return""+b+l+c}function x(c,b,l){void 0===b&&(b=p.appBaseUrl);if(!m(c))return c;var t=g(c),w=t.toLowerCase();b=g(b).toLowerCase().replace(/\/+$/,
"");if((l=l?g(l).toLowerCase().replace(/\/+$/,""):null)&&0!==b.indexOf(l))return c;for(var C=function(F,G,H){H=F.indexOf(G,H);return-1===H?F.length:H},D=C(w,"/",w.indexOf("//")+2),E=-1;w.slice(0,D+1)===b.slice(0,D)+"/";){E=D+1;if(D===w.length)break;D=C(w,"/",D+1)}if(-1===E||l&&E<l.length)return c;c=t.slice(E);t=b.slice(E-1).replace(/[^/]+/g,"").length;if(0<t)for(w=0;w<t;w++)c="../"+c;else c="./"+c;return c}Object.defineProperty(p,"__esModule",{value:!0});p.normalize=g;p.canUseXhr=function(c){return a.canUseXhr(c)};
p.removeTrailingSlash=function(c){return c.replace(/\/+$/,"")};B=Function("return this")();p.appUrl=new d(B.location);p.appBaseUrl=function(){var c=p.appUrl.path;c=c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]));return p.appUrl.scheme+"://"+p.appUrl.host+(null!=p.appUrl.port?":"+p.appUrl.port:"")+c}();var z=/^\s*file:/i,A=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;p.isDataProtocol=n;p.isAbsolute=m;p.isProtocolRelative=f;p.urlToObject=h;p.getOrigin=e;p.makeAbsolute=r;p.hasSameOrigin=q;p.join=
u;p.removeFile=function(c){var b=0;if(m(c)){var l=c.indexOf("//");-1!==l&&(b=l+2)}l=c.lastIndexOf("/");return l<b?c:c.slice(0,l+1)};p.addProxy=function(c){return a.addProxy(c)};p.makeData=function(c){return c.isBase64?"data:"+c.mediaType+";base64,"+c.data:"data:"+c.mediaType+","+c.data};var y=/^data:(.*?)(;base64)?,(.*)$/;p.dataComponents=function(c){return(c=c.match(y))?{mediaType:c[1],isBase64:!!c[2],data:c[3]}:null};p.changeDomain=v;p.read=function(c,b){var l=b&&b.url&&b.url.path;c&&l&&(c=r(c,
l,{preserveProtocolRelative:!0}));l=c;var t=b&&b.portal;if(t&&!t.isPortal&&t.urlKey&&t.customBaseUrl){var w=t.urlKey+"."+t.customBaseUrl;l=q(p.appUrl,p.appUrl.scheme+"://"+w)?v(l,t.portalHostname,w):v(l,w,t.portalHostname)}return l};p.write=function(c,b){if(!c)return c;!m(c)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(c);var l=r(c);if(b){var t=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;t&&(l=x(l,t,t),l!==c&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(l))}l=
(t=b&&b.portal)&&!t.isPortal&&t.urlKey&&t.customBaseUrl?v(l,t.urlKey+"."+t.customBaseUrl,t.portalHostname):l;return l};p.makeRelative=x;p.removeQueryParameters=function(c){c=h(c);Object.keys(c.query||{});return c.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(B,p,a,d,g){var n={width:12,height:12,angle:0,xoffset:0,yoffset:0},m=B(d,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker",url:g.urlPropertyDefinition,source:g.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(f,h){return h.size||f}},write:!0},cast:a.toPt},width:{json:{read:{source:["width","size"],reader:function(f,h){return h.size||f}},write:!0},cast:a.toPt},size:{json:{write:!1}}},getDefaults:function(){return p.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(f,h,k){if(f&&"string"!==typeof f&&null==f.imageData)return f;
var e={};f&&(e.url=f);null!=h&&(e.width=a.toPt(h));null!=k&&(e.height=a.toPt(k));return e},clone:function(){var f=new m({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});f._set("source",p.clone(this.source));return f}});m.defaultProps=n;return m})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(B,p,a){return B(a,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,
json:{read:function(d){return d&&-1*d},write:function(d,g){g.angle=d&&-1*d}}},type:{},xoffset:{value:0,cast:p.toPt,json:{write:!0}},yoffset:{value:0,cast:p.toPt,json:{write:!0}},size:{value:9,cast:function(d){return"auto"===d?d:p.toPt(d)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}
a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(B,p,a,d){var g={style:"solid",outline:new d,color:[0,0,0,.25]},n=B(a,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(m){return p.valueOf(this._styles,m)||void 0},write:function(m,f){f.style=this._styles[m]}}}},_styles:{solid:"esriSFSSolid",
none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return p.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(m,f,h){if(m&&"string"!==typeof m)return m;var k={};m&&(k.style=m);f&&(k.outline=f);h&&(k.color=h);return k},clone:function(){return new n({color:p.clone(this.color),outline:this.outline&&
this.outline.clone(),style:this.style})}});p.mixin(n,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});n.defaultProps=g;return n})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./SimpleLineSymbol"],function(B,p,
a,d,g){var n={style:"circle",color:[255,255,255,.25],outline:new g,size:12,angle:0,xoffset:0,yoffset:0},m=B(d,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(f,h){f&&"x"!==this.style&&"cross"!==this.style&&(h.color=f.toJSON());null===f&&(h.color=null)}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(f){return p.valueOf(this._styles,f)},write:function(f,h){h.style=this._styles[f]}}},path:{type:String,value:null,set:function(f){this.style=
"path";this._set("path",f)},json:{write:!0}},outline:{type:g,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return p.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(f,h,k,e){if(f&&"string"!==typeof f)return f;var r={};f&&(r.style=f);null!=h&&(r.size=a.toPt(h));k&&(r.outline=k);e&&(r.color=e);return r},clone:function(){return new m({angle:this.angle,color:p.clone(this.color),
outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function e(h,k){return this.getInherited(e,arguments).call(this,p.mixin({outline:null},h),k)}});p.mixin(m,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});m.defaultProps=n;return m})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(B,p,a,d,g,n){var m={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},f=B(g,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:d,json:{write:!0}},borderLineColor:{type:d,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:n,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:d,json:{write:!0}},haloSize:{type:Number,
cast:a.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(h){return h&&-1*h},write:function(h,k){k.angle=h&&-1*h}}},width:{json:{write:!0}}},getDefaults:function(){return p.mixin(this.inherited(arguments),m)},
normalizeCtorArgs:function(h,k,e){if(h&&"string"!==typeof h)return h;var r={};h&&(r.text=h);k&&(r.font=k);e&&(r.color=e);return r},clone:function(){return new f({angle:this.angle,backgroundColor:p.clone(this.backgroundColor),borderLineColor:p.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:p.clone(this.color),font:this.font&&this.font.clone(),haloColor:p.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});p.mixin(f,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});f.defaultProps=m;return f})},"esri/layers/vectorTiles/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(B,p,a,d,g,n,m,f){return function(h){function k(r){r=h.call(this)||this;r.decoration="none";r.family="sans-serif";r.size=9;r.style="normal";r.weight="normal";return r}a(k,h);var e=k;k.prototype.castSize=function(r){return n.toPt(r)};k.prototype.clone=function(){return new e({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("none")}}})],k.prototype,"decoration",
void 0);d([m.property({type:String,json:{write:!0}})],k.prototype,"family",void 0);d([m.property({type:Number,json:{write:{overridePolicy:function(r,q,u){return{enabled:!u||!u.textSymbol3D}}}}})],k.prototype,"size",void 0);d([m.cast("size")],k.prototype,"castSize",null);d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("normal")}}})],k.prototype,"style",void 0);d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("normal")}}})],k.prototype,
"weight",void 0);return k=e=d([m.subclass("esri.symbols.Font")],k)}(m.declared(g))})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],
function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/JSONSupport"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b){function l(w){var C=w.color?w.color.clone():new a([255,255,255]),D;if(w instanceof q){w.color&&0===w.color.r&&0===w.color.g&&0===w.color.b&&(C=new a([255,255,255]));var E={href:w.url};var F=w.width<=w.height?w.height:w.width}else E=w.style,E=E in t?t[E]:"circle",E={primitive:E},F=w.size,w.outline&&w.outline.color&&0<w.outline.width&&(D={size:w.outline.width,color:w.outline.color.clone()});return new u(new h({size:F,resource:E,material:{color:C},
outline:D}))}Object.defineProperty(p,"__esModule",{value:!0});var t={};t[A.STYLE_CIRCLE]="circle";t[A.STYLE_CROSS]="cross";t[A.STYLE_DIAMOND]="kite";t[A.STYLE_SQUARE]="square";t[A.STYLE_X]="x";p.to3D=function(w,C,D,E){void 0===C&&(C=!1);void 0===D&&(D=!1);void 0===E&&(E=!0);if(!w)return{symbol:null};if(d.isSymbol3D(w)||w instanceof b)E=w.clone();else if(w instanceof z)E=new e(new r({size:w.width||1,material:{color:w.color?w.color.clone():[255,255,255]}}));else if(w instanceof A)E=l(w);else if(w instanceof
q)E=l(w);else if(w instanceof x)E=new m({material:{color:w.color?w.color.clone():[255,255,255]}}),w.outline&&w.outline.color&&(E.outline={size:w.outline.width||0,color:w.outline.color}),E=new v(E);else if(w instanceof y){var F=w.haloColor;var G=w.haloSize;F=F&&0<G?{color:n.clone(F),size:G}:null;G=w.font?w.font.clone():new f;E=new (E?k:u)(new c({size:G.size,font:G,halo:F,material:{color:w.color.clone()},text:w.text}))}else return{error:new g("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+
(w.type||w.declaredClass)+"' is unsupported in 3D",{symbol:w})};C&&(E.id=w.id);if(D&&d.isSymbol3D(E))for(w=0;w<E.symbolLayers.length;++w)E.symbolLayers.getItemAt(w)._ignoreDrivers=!0;return{symbol:E}}})},"esri/layers/vectorTiles/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b,l,t,w,C,D,E,F){Object.defineProperty(p,"__esModule",{value:!0});p.ExtrudeSymbol3DLayer=a;p.BaseFillSymbol=d;p.FillSymbol3DLayer=g;p.Font=n;p.IconSymbol3DLayer=m;p.LabelSymbol3D=f;p.LineSymbol3D=h;p.LineSymbol3DLayer=k;p.BaseMarkerSymbol=e;p.MeshSymbol3D=r;p.ObjectSymbol3DLayer=q;p.PathSymbol3DLayer=u;p.PictureFillSymbol=v;p.PictureMarkerSymbol=x;p.PointSymbol3D=z;p.PolygonSymbol3D=A;p.SimpleFillSymbol=y;p.SimpleLineSymbol=c;p.SimpleMarkerSymbol=b;
p.BaseSymbol=l;p.BaseSymbol3D=t;p.BaseSymbol3DLayer=w;p.TextSymbol=C;p.TextSymbol3DLayer=D;p.WebStyleSymbol=E;p.fromJSON=F.fromJSON;p.isSymbol=function(G){return G instanceof p.BaseSymbol};p.isSymbol2D=function(G){if(!G)return!1;switch(G.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};p.isSymbol3D=function(G){if(!G)return!1;switch(G.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/layers/vectorTiles/symbols/ExtrudeSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(B,p,a,d){return function(g){function n(){return null!==
g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==
g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){(function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n})(d);return d})},"esri/layers/vectorTiles/symbols/ObjectSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==
g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/PathSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(B,p,a,d){return function(g){function n(){return null!==
g&&g.apply(this,arguments)||this}a(n,g);return n}(d)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x){Object.defineProperty(p,"__esModule",
{value:!0});p.types={base:u,key:"type",typeMap:{"simple-fill":e,"picture-fill":m,"picture-marker":f,"simple-line":r,"simple-marker":q,text:v,"label-3d":d,"line-3d":g,"mesh-3d":n,"point-3d":h,"polygon-3d":k,"web-style":x}};p.rendererTypes={base:u,key:"type",typeMap:{"simple-fill":e,"picture-fill":m,"picture-marker":f,"simple-line":r,"simple-marker":q,text:v,"line-3d":g,"mesh-3d":n,"point-3d":h,"polygon-3d":k,"web-style":x}};p.labelTypes={base:u,key:"type",typeMap:{text:v,"label-3d":d}};p.types3D={base:u,
key:"type",typeMap:{"label-3d":d,"line-3d":g,"mesh-3d":n,"point-3d":h,"polygon-3d":k,"web-style":x}};p.rendererTypes3D={base:u,key:"type",typeMap:{"line-3d":g,"mesh-3d":n,"point-3d":h,"polygon-3d":k,"web-style":x}};p.labelTypes3D={base:u,key:"type",typeMap:{"label-3d":d}};p.ensureType=a.ensureOneOfType(p.types)})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r){var q=d({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),u=d({widthAndDepth:"width-and-depth"}),v=d({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});d({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
d({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});d({percentTotal:"percent-of-total"});var x=Math.PI,z=h.opacityToTransparency,A=h.transparencyToOpacity;return B([p,a],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:r,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var y=Object.create(null);
this.collectRequiredFields(y);return Object.keys(y).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(y,c){return this._readVariables(y,c)}},write:function(y,c,b,l){var t=[];y.forEach(function(w,C){"size"===w.type?t.push(this._writeSizeInfo(w,l,C)):"color"===w.type?t.push(this._writeColorInfo(w,l,C)):"opacity"===w.type?t.push(this._writeOpacityInfo(w,l,C)):"rotation"===
w.type&&t.push(this._writeRotationInfo(w,l,C))},this);c.visualVariables=t}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(y){var c=this._cache;this.visualVariables&&this.visualVariables.forEach(function(b,l){c.hasOwnProperty(l)&&(c[l]=null)},this);y&&y.some(function(b){return!!b.target})&&y.sort(function(b,l){return b.target===l.target?0:b.target?1:-1});y&&y.forEach(function(b,l){"color"===
b.type?c[l]=this._processColorInfo(b):"opacity"===b.type?c[l]=this._processOpacityInfo(b):"size"===b.type?c[l]=this._processSizeInfo(b):"rotation"===b.type&&(c[l]=this._processRotationInfo(b))},this);this._set("visualVariables",y)},getSymbol:function(y,c){},getVisualVariableValues:function(y,c){var b=this.visualVariables,l;b&&(l=b.map(function(t){var w=t.type,C=w+"Info";c=n.mixin({},c);c[C]=t;switch(w){case "size":var D=this.getSize(y,c);break;case "color":D=this.getColor(y,c);break;case "opacity":D=
this.getOpacity(y,c);break;case "rotation":D=this.getRotationAngle(y,c)}return{variable:t,value:D}},this).filter(function(t){return null!=t.value},this));return l},hasVisualVariables:function(y,c){return y?!!this.getVisualVariablesForType(y,c):!!(this.getVisualVariablesForType("size",c)||this.getVisualVariablesForType("color",c)||this.getVisualVariablesForType("opacity",c)||this.getVisualVariablesForType("rotation",c))},getVisualVariablesForType:function(y,c){var b=this.visualVariables,l;b&&(l=b.filter(function(t){return t.type===
y&&("string"===typeof c?t.target===c:!1===c?!t.target:!0)}))&&0===l.length&&(l=void 0);return l},getSize:function(y,c){var b=this._getVarInfo(c&&c.sizeInfo,"size"),l=b.variable;b=this._cache[b.cacheKey];var t=null;if(l){var w=l.minSize;t=l.maxSize;w="object"===typeof w&&w?this._getSize(y,w,b&&b.minSize,c):w;t="object"===typeof t&&t?this._getSize(y,t,b&&b.maxSize,c):t;t=this._getSize(y,l,b&&b.root,c,[w,t])}return t},getSizeRangeAtScale:function(y,c){var b=this._getVarInfo(y,"size"),l=this._cache[b.cacheKey],
t={scale:c};if((y=b.variable)&&c){b=y.minSize;var w=y.maxSize;b="object"===typeof b&&b?this._getSize({},b,l&&l.minSize,t):b;l="object"===typeof w&&w?this._getSize({},w,l&&l.maxSize,t):w;if(null!=b||null!=l){if(b>l){var C=l;l=b;b=C}C={minSize:b,maxSize:l}}}return C},getColor:function(y,c){var b=this._getVarInfo(c&&c.colorInfo,"color");return this._getColorComponent(y,b.variable,this._cache[b.cacheKey],c)},getOpacity:function(y,c){var b=this._getVarInfo(c&&c.opacityInfo,"opacity");return this._getColorComponent(y,
b.variable,this._cache[b.cacheKey],c,!0)},getRotationAngle:function(y,c){var b=this._getVarInfo(c&&c.rotationInfo,"rotation"),l=b.variable,t=this._cache[b.cacheKey],w=l.axis||"heading";b="heading"===w&&"arithmetic"===l.rotationType?90:0;w="heading"===w&&"arithmetic"===l.rotationType?-1:1;l=l.field;t=t&&t.compiledFunc;var C=y.attributes,D=0;if(l||t)t?D=f.executeFunction(t,f.createExecContext(y,f.getViewInfo(c))):"function"===typeof l?D=l.apply(this,arguments):C&&(D=C[l]||0),D="number"!==typeof D||
isNaN(D)?null:b+w*D;return D},collectRequiredFields:function(y){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));c.forEach(function(b){b&&(b.field&&(y[b.field]=!0),b.normalizationField&&(y[b.normalizationField]=!0),b.valueExpression&&f.extractFieldNames(b.valueExpression).forEach(function(l){y[l]=!0}))})},_getVarInfo:function(y,c){if(y&&y.type===c&&this.visualVariables){var b=this.visualVariables.indexOf(y);y=this.visualVariables[b]}else this.visualVariables&&(y=(b=this.getVisualVariablesForType(c))&&
b[0],b=this.visualVariables.indexOf(y));return{variable:y,cacheKey:b}},_readSizeInfo:function(y){y.axis&&(y.axis=u.fromJSON(y.axis));y.valueUnit&&(y.valueUnit=v.fromJSON(y.valueUnit));return y},_readColorInfo:function(y){y&&(y.colors&&y.colors.forEach(function(c,b){Array.isArray(c)?y.colors[b]=k.fromJSON(c):y.colors[b]=new k(c)}),y.stops&&y.stops.forEach(function(c,b){c.color&&Array.isArray(c.color)?y.stops[b].color=k.fromJSON(c.color):c.color&&(y.stops[b].color=new k(c.color))}));return y},_readOpacityInfo:function(y){if(y){var c=
n.mixin({},y);c.transparencyValues&&(c.opacityValues=c.transparencyValues.map(A),delete c.transparencyValues);c.stops&&(c.stops=c.stops.map(function(b){b=n.mixin({},b);b.opacity=A(b.transparency);delete b.transparency;return b}))}return c},_readVariables:function(y,c){y&&(y=y.map(function(t){t=n.clone(t);t.type=q.fromJSON(t.type);"size"===t.type?t=this._readSizeInfo(t):"color"===t.type?t=this._readColorInfo(t):"opacity"===t.type&&(t=this._readOpacityInfo(t));return t},this));var b=c.rotationType,
l=c.rotationExpression;l&&(b={type:"rotation",rotationType:b},(l=l.match(this._rotationRE))&&l[1]&&(b.field=l[1],y||(y=[]),y.push(b)));return y},_createCache:function(y){var c=y&&y.valueExpression,b=f.createSyntaxTree(c);b=f.createFunction(b);var l=!(!y||!y.expression)||this._viewScaleRE.test(c);return{ipData:this._interpolateData(y),hasExpr:!!c,compiledFunc:b,isScaleDriven:l}},_processColorInfo:function(y){y&&(y.colors&&y.colors.forEach(function(c,b){c instanceof k||(y.colors[b]=new k(c))}),y.stops&&
y.stops.forEach(function(c,b){!c.color||c.color instanceof k||(y.stops[b].color=new k(c.color))}),this._sortStops(y.stops));return this._createCache(y)},_processOpacityInfo:function(y){this._sortStops(y&&y.stops);return this._createCache(y)},_processSizeInfo:function(y){y.stops&&Array.isArray(y.stops)?y.stops=this._processSizeInfoStops(y.stops):(y.minSize=y.minSize&&this._processSizeInfoSize(y.minSize),y.maxSize=y.maxSize&&this._processSizeInfoSize(y.maxSize));return{root:this._createCache(y),minSize:this._createCache(y.minSize),
maxSize:this._createCache(y.maxSize)}},_processSizeInfoSize:function(y){"object"===typeof y?y.stops=this._processSizeInfoStops(y.stops):y=g.toPt(y);return y},_processSizeInfoStops:function(y){y&&Array.isArray(y)&&(y.forEach(function(c){c.size=g.toPt(c.size)}),this._sortStops(y));return y},_sortStops:function(y){y&&Array.isArray(y)&&y.sort(function(c,b){return c.value-b.value})},_processRotationInfo:function(y){return this._createCache(y)},_getSize:function(y,c,b,l,t){var w=y.attributes,C=c.field,
D=c.stops,E=0,F=b&&b.hasExpr,G=b&&b.compiledFunc,H=b&&b.ipData,M=b&&b.isScaleDriven,X="number"===typeof y,W=X?y:null;if(C||M||F){var T=l&&l.scale,K=t?t[0]:c.minSize,O=t?t[1]:c.maxSize,N=c.minDataValue,Y=c.maxDataValue,P=c.valueUnit||"unknown",L=c.valueRepresentation;E=c.scaleBy;var Q=c.normalizationField,ca=w?parseFloat(w[Q]):void 0,ha=l&&l.shape;M?W=null==T?this._getAverageValue(c):T:"number"!==typeof W&&(F?W=f.executeFunction(G,f.createExecContext(y,f.getViewInfo(l))):"function"===typeof C?W=C.apply(this,
arguments):w&&(W=w[C]));if(null==W||Q&&!X&&(isNaN(ca)||0===ca))return null;isNaN(ca)||X||(W/=ca);if(D)O=this._lookupData(W,H),W=O[0],K=O[1],W===K?E=D[W].size:(W=D[W].size,D=D[K].size,E=W+(D-W)*O[2]);else if(null!=K&&null!=O&&null!=N&&null!=Y)W<=N?E=K:W>=Y?E=O:(D=(W-N)/(Y-N),"area"===E&&ha?(K=(W="circle"===ha)?x*Math.pow(K/2,2):K*K,D=K+D*((W?x*Math.pow(O/2,2):O*O)-K),E=W?2*Math.sqrt(D/x):Math.sqrt(D)):E=K+D*(O-K));else if("unknown"===P)null!=K&&null!=N?(K&&N?(D=W/N,E="circle"===ha?2*Math.sqrt(D*Math.pow(K/
2,2)):"square"===ha||"diamond"===ha||"image"===ha?Math.sqrt(D*Math.pow(K,2)):D*K):E=W+(K||N),E=E<K?K:E,null!=O&&E>O&&(E=O)):E=W;else{D=(l&&l.resolution?l.resolution:1)*e.meterIn[P];if("area"===L)E=Math.sqrt(W/x)/D,E*=2;else if(E=W/D,"radius"===L||"distance"===L)E*=2;null!=K&&E<K&&(E=K);null!=O&&E>O&&(E=O)}}else c&&(E=D&&D[0]&&D[0].size,null==E&&(E=c.minSize));return E=isNaN(E)?0:E},_getAverageValue:function(y){var c=y.stops;if(c){var b=c[0].value;y=c[c.length-1].value}else b=y.minDataValue||0,y=y.maxDataValue||
0;return(b+y)/2},_getColorComponent:function(y,c,b,l,t,w){var C=y.attributes,D=c&&c.field,E="number"===typeof y,F=E?y:null,G=b&&b.hasExpr,H=b&&b.compiledFunc,M=b&&b.ipData;if(D||G){var X=c.normalizationField,W=C?parseFloat(C[X]):void 0;"number"!==typeof F&&(G?F=f.executeFunction(H,f.createExecContext(y,f.getViewInfo(l))):"function"===typeof D?F=D.apply(this,arguments):C&&(F=C[D]));if(null!=F&&(!X||E||!isNaN(W)&&0!==W)){isNaN(W)||E||(F/=W);var T=t?this._getOpacity(F,c,M):this._getColor(F,c,M)}}else c&&
(C=c.stops,t?(T=C&&C[0]&&C[0].opacity,null==T&&(T=c.opacityValues&&c.opacityValues[0])):T=C&&C[0]&&C[0].color||c.colors&&c.colors[0]);w&&(w.data=F,w.value=T);return w||T},_interpolateData:function(y){if(y)if(y.colors||y.opacityValues){var c=(y.colors||y.opacityValues).length,b=y.minDataValue,l=(y.maxDataValue-b)/(c-1);var t=[];for(y=0;y<c;y++)t[y]=b+y*l}else y.stops&&(t=y.stops.map(function(w){return w.value||0}));return t},_getOpacity:function(y,c,b){y=this._lookupData(y,b);c=c||this.opacityInfo;
if(y){b=y[0];var l=y[1];b===l?l=this._getOpacValue(c,b):(b=this._getOpacValue(c,b),c=this._getOpacValue(c,l),l=b+(c-b)*y[2])}return l},_getOpacValue:function(y,c){return y.opacityValues?y.opacityValues[c]:y.stops[c].opacity},_getColor:function(y,c,b){y=this._lookupData(y,b);c=c||this.colorInfo;if(y){var l=y[0];b=y[1];l=l===b?this._getColorObj(c,l):k.blendColors(this._getColorObj(c,l),this._getColorObj(c,b),y[2]);l=new k(l)}return l},_getColorObj:function(y,c){return y.colors?y.colors[c]:y.stops[c].color},
_lookupData:function(y,c){if(c){var b=0,l=c.length-1;c.some(function(w,C){if(y<w)return l=C,!0;b=C;return!1});var t=[b,l,(y-c[b])/(c[l]-c[b])]}return t},_processForContext:function(y,c,b){if(c&&"web-scene"===c.origin){var l=null!=y.expression,t=null!=y.valueExpressionTitle&&"rotation"===y.type;c.messages&&(l&&c.messages.push(new m("property:unsupported",y.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:b+
".expression",context:c})),t&&c.messages.push(new m("property:unsupported",y.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:b+".valueExpressionTitle",context:c})));l&&delete y.expression;t&&delete y.valueExpressionTitle}else"size"===y.type&&this._convertExpressionToArcade(y)},_writeRotationInfo:function(y,c,b){y&&(y=n.mixin({},y),this._processForContext(y,c,"visualVariables["+b+"]"),y.type=q.toJSON(y.type),
y=n.fixJson(y,!0));return y},_convertExpressionToArcade:function(y){y&&y.expression&&(y.valueExpression="$view.scale")},_writeSizeInfo:function(y,c,b){if(y){y=n.mixin({},y);this._processForContext(y,c,"string"===typeof b?b:"visualVariables["+b+"]");var l=y.minSize,t=y.maxSize;l&&(y.minSize="number"===typeof l?l:this._writeSizeInfo(l,c,"visualVariables["+b+"].minSize"));t&&(y.maxSize="number"===typeof t?t:this._writeSizeInfo(t,c,"visualVariables["+b+"].maxSize"));c=y.legendOptions;b=y.axis;y.type=
q.toJSON(y.type);b&&(y.axis=u.toJSON(b));c&&(y.legendOptions=n.mixin({},c),c=c.customValues)&&(y.legendOptions.customValues=c.slice(0));y.stops&&(y.stops=y.stops.map(function(w){w=n.mixin({},w);null===w.label&&delete w.label;return w}));y=n.fixJson(y,!0)}return y},_writeColorInfo:function(y,c,b){y&&(y=n.mixin({},y),this._processForContext(y,c,"visualVariables["+b+"]"),y.type=q.toJSON(y.type),y.colors&&(y.colors=y.colors.map(function(l){return k.toJSON(l)})),y.stops&&(y.stops=y.stops.map(function(l){l=
n.mixin({},l);l.color&&(l.color=k.toJSON(l.color));null==l.value&&(l.value=0);null===l.label&&delete l.label;return l})),y.legendOptions&&(y.legendOptions=n.mixin({},y.legendOptions)),y=n.fixJson(y,!0));return y},_writeOpacityInfo:function(y,c,b){if(y){var l=n.mixin({},y);this._processForContext(l,c,"visualVariables["+b+"]");l.type=q.toJSON(l.type);l.opacityValues&&(l.transparencyValues=l.opacityValues.map(z),delete l.opacityValues);l.stops&&(l.stops=l.stops.map(function(t){t=n.mixin({},t);t.transparency=
z(t.opacity);delete t.opacity;null===t.label&&delete t.label;return t}));l.legendOptions&&(l.legendOptions=n.mixin({},l.legendOptions));l=n.fixJson(l,!0)}return l}})})},"esri/layers/vectorTiles/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(B,p,a){Object.defineProperty(p,"__esModule",{value:!0});p.opacityToTransparency=function(d){d=a.ensureInteger(100*(1-d));return Math.max(0,Math.min(d,100))};p.transparencyToOpacity=function(d){return Math.max(0,
Math.min(1-d/100,1))}})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(B,p,a,d,g,n,m,f,h){var k=n({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",
esriClassifyStandardDeviation:"standard-deviation"}),e=n({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(r){function q(v){v=r.call(this)||this;v.lengthUnit=null;v.visualVariables=null;return v}a(q,r);var u=q;Object.defineProperty(q.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var v=this._get("classificationMethod");return v?v:"manual"}return null},
set:function(v){this._set("classificationMethod",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(v){this._set("fields",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"field1",{get:function(){return"relationship"===this.type?this._get("field1"):null},set:function(v){this._set("field1",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"field2",
{get:function(){return"relationship"===this.type?this._get("field2"):null},set:function(v){this._set("field2",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"focus",{get:function(){return"relationship"===this.type?this._get("focus"):null},set:function(v){this._set("focus",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"numClasses",{get:function(){return"relationship"===this.type?this._get("numClasses"):null},set:function(v){this._set("numClasses",v)},
enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(v){this._set("standardDeviationInterval",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"type",{get:function(){return this._get("type")},set:function(v){var x=v;"classed-size"===v?x="class-breaks-size":"classed-color"===v&&(x="class-breaks-color");this._set("type",
x)},enumerable:!0,configurable:!0});q.prototype.clone=function(){return new u({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:m.clone(this.field1),field2:m.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(v){return v.clone()})})};d([f.property({type:String,value:null,
dependsOn:["type"],json:{read:k.read,write:k.write}})],q.prototype,"classificationMethod",null);d([f.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"fields",null);d([f.property({value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"field1",null);d([f.property({value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"field2",null);d([f.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"focus",null);d([f.property({type:Number,
value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"numClasses",null);d([f.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],q.prototype,"lengthUnit",void 0);d([f.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],q.prototype,"standardDeviationInterval",null);d([f.property({type:String,value:null,json:{read:e.read,write:e.write}})],q.prototype,"type",null);d([f.property({type:[h],json:{write:!0}})],q.prototype,"visualVariables",
void 0);return q=u=d([f.subclass("esri.renderers.support.AuthoringInfo")],q)}(f.declared(g))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(B,p,a,d,g,n,m,f){var h=n({percentTotal:"percent-of-total"}),k=n({sizeInfo:"size",
colorInfo:"color",transparencyInfo:"opacity"}),e={key:function(r){return"number"===typeof r?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(r){function q(v){v=r.call(this)||this;v.endTime=null;v.field=null;v.maxSliderValue=null;v.minSliderValue=null;v.startTime=null;v.type=null;v.units=null;return v}a(q,r);var u=q;q.prototype.castEndTime=function(v){return"string"===typeof v||"number"===typeof v?v:null};q.prototype.castStartTime=function(v){return"string"===typeof v||
"number"===typeof v?v:null};Object.defineProperty(q.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(v){this._set("style",v)},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(v){this._set("theme",v)},enumerable:!0,configurable:!0});q.prototype.clone=function(){return new u({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,
minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};d([m.property({types:e,json:{write:!0}})],q.prototype,"endTime",void 0);d([f.cast("endTime")],q.prototype,"castEndTime",null);d([m.property({type:String,json:{write:!0}})],q.prototype,"field",void 0);d([m.property({type:Number,json:{write:!0}})],q.prototype,"maxSliderValue",void 0);d([m.property({type:Number,json:{write:!0}})],q.prototype,"minSliderValue",void 0);d([m.property({types:e,
json:{write:!0}})],q.prototype,"startTime",void 0);d([f.cast("startTime")],q.prototype,"castStartTime",null);d([m.property({type:String,value:null,dependsOn:["type"],json:{read:h.read,write:h.write}})],q.prototype,"style",null);d([m.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],q.prototype,"theme",null);d([m.property({type:String,json:{read:k.read,write:k.write}})],q.prototype,"type",void 0);d([m.property({type:String,json:{write:!0}})],q.prototype,"units",void 0);return q=
u=d([m.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],q)}(m.declared(g))})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(B,p,a,d,g,n){Object.defineProperty(p,"__esModule",{value:!0});B=function(m){function f(){var k=null!==m&&m.apply(this,arguments)||this;k.title=null;return k}
a(f,m);var h=f;f.prototype.clone=function(){return new h({title:this.title})};d([n.property({type:String,json:{write:!0}})],f.prototype,"title",void 0);return f=h=d([n.subclass("esri.renderers.support.LegendOptions")],f)}(n.declared(g));p.LegendOptions=B;p["default"]=B})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});B=function(h){function k(){var r=null!==h&&h.apply(this,arguments)||this;r.description=null;r.label=null;r.minValue=null;r.maxValue=0;r.symbol=null;return r}a(k,h);var e=k;k.prototype.clone=function(){return new e({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};d([n.property({type:String,json:{write:!0}})],k.prototype,"description",
void 0);d([n.property({type:String,json:{write:!0}})],k.prototype,"label",void 0);d([n.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],k.prototype,"minValue",void 0);d([n.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],k.prototype,"maxValue",void 0);d([n.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:m.read,write:{target:{symbol:{types:f.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,
write:m.writeTarget}})],k.prototype,"symbol",void 0);return k=e=d([n.subclass("esri.renderers.support.ClassBreakInfo")],k)}(n.declared(g));p.ClassBreakInfo=B;p["default"]=B})},"esri/layers/vectorTiles/renderers/HeatmapRenderer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Renderer"],function(B,p,a,d){return function(g){function n(){var m=null!==g&&g.apply(this,arguments)||this;m.type="heatmap";return m}a(n,g);return n}(d)})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(B,p,a,d,g,n,m,f,h){return function(k){function e(){var q=null!==k&&k.apply(this,arguments)||this;q.description=null;q.label=null;q.symbol=null;q.type="simple";return q}a(e,k);var r=e;e.prototype.writeSymbolWebScene=function(q,u,v,x){f.writeTarget(q,u,v,x)};e.prototype.writeSymbol=function(q,u,v,x){f.writeTarget(q,u,v,x)};e.prototype.readSymbol=function(q,u,v){return f.read(q,u,v)};e.prototype.getSymbol=function(q,u){return this.symbol};e.prototype.getSymbols=function(){return this.symbol?
[this.symbol]:[]};e.prototype.clone=function(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:g.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};d([n.property({type:String,json:{write:!0}})],e.prototype,"description",void 0);d([n.property({type:String,json:{write:!0}})],e.prototype,"label",void 0);d([n.property({types:h.rendererTypes})],e.prototype,"symbol",void 0);d([n.writer("web-scene",
"symbol",{symbol:{types:h.rendererTypes3D}})],e.prototype,"writeSymbolWebScene",null);d([n.writer("symbol")],e.prototype,"writeSymbol",null);d([n.reader("symbol")],e.prototype,"readSymbol",null);return e=r=d([n.subclass("esri.renderers.SimpleRenderer")],e)}(n.declared(m))})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A,y,c,b,l){var t=k.getLogger("esri.renderers.UniqueValueRenderer"),w=q.ensureType(A["default"]);return function(C){function D(F){F=C.call(this)||this;F._valueInfoMap={};F._isDefaultSymbolDerived=!1;F.type="unique-value";F.backgroundFillSymbol=null;F.field=null;F.field2=null;F.field3=null;F.valueExpression=null;F.valueExpressionTitle=null;F.legendOptions=null;F.defaultLabel=null;F.fieldDelimiter=null;F.portal=null;F.styleOrigin=null;F.diff={uniqueValueInfos:function(G,
H){if(G||H){if(!G||!H)return{type:"complete",oldValue:G,newValue:H};for(var M=!1,X={type:"collection",added:[],removed:[],changed:[],unchanged:[]},W=function(K){var O=m.find(G,function(N){return N.value===H[K].value});O?x.diff(O,H[K])?X.changed.push({type:"complete",oldValue:O,newValue:H[K]}):X.unchanged.push({oldValue:O,newValue:H[K]}):X.added.push(H[K]);M=!0},T=0;T<H.length;T++)W(T);W=function(K){m.find(H,function(O){return O.value===G[K].value})||(X.removed.push(G[K]),M=!0)};for(T=0;T<G.length;T++)W(T);
return M?X:void 0}}};F._set("uniqueValueInfos",[]);return F}a(D,C);var E=D;D.prototype.writeType=function(F,G,H,M){G.type="uniqueValue"};D.prototype.writeBackgroundFillSymbolWebScene=function(F,G,H,M){c.writeTarget(F,G,H,M)};D.prototype.castField=function(F){return null==F?F:"function"===typeof F?F:q.ensureString(F)};D.prototype.writeField=function(F,G,H,M){"string"===typeof F?G[H]=F:M&&M.messages?M.messages.push(new f("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
t.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(D.prototype,"compiledFunc",{get:function(){return y.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"defaultSymbol",{set:function(F){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",F)},enumerable:!0,configurable:!0});D.prototype.readDefaultSymbol=function(F,G,H){return c.read(F,G,H)};D.prototype.writeDefaultSymbolWebScene=function(F,G,
H,M){this._isDefaultSymbolDerived||c.writeTarget(F,G,H,M)};D.prototype.writeDefaultSymbol=function(F,G,H,M){this._isDefaultSymbolDerived||c.writeTarget(F,G,H,M)};D.prototype.readPortal=function(F,G,H){return H.portal||u.getDefault()};D.prototype.readStyleOrigin=function(F,G,H){if(G.styleName)return Object.freeze({styleName:G.styleName});if(G.styleUrl)return F=e.read(G.styleUrl,H),Object.freeze({styleUrl:F})};D.prototype.writeStyleOrigin=function(F,G,H,M){F.styleName?G.styleName=F.styleName:F.styleUrl&&
(G.styleUrl=e.write(F.styleUrl,M),e.isAbsolute(G.styleUrl)&&(G.styleUrl=e.normalize(G.styleUrl)))};Object.defineProperty(D.prototype,"uniqueValueInfos",{set:function(F){this.styleOrigin?t.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",F),this._updateValueInfoMap())},enumerable:!0,configurable:!0});D.prototype.addUniqueValueInfo=function(F,G){if(this.styleOrigin)t.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
else{var H="object"===typeof F?w(F):new A["default"]({value:F,symbol:G});this.uniqueValueInfos.push(H);this._valueInfoMap[H.value]=H}};D.prototype.removeUniqueValueInfo=function(F){if(this.styleOrigin)t.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var G=0;G<this.uniqueValueInfos.length;G++)if(this.uniqueValueInfos[G].value===F+""){delete this._valueInfoMap[F];this.uniqueValueInfos.splice(G,1);break}};D.prototype.getUniqueValueInfo=
function(F,G){var H=this.field,M=F.attributes;if(this.valueExpression)var X=y.executeFunction(this.compiledFunc,y.createExecContext(F,y.getViewInfo(G)));else if("function"!==typeof H&&this.field2){X=this.field2;var W=this.field3,T=[];H&&T.push(M[H]);X&&T.push(M[X]);W&&T.push(M[W]);X=T.join(this.fieldDelimiter||"")}else"function"===typeof H?X=H(F):H&&(X=M[H]);return this._valueInfoMap[X+""]};D.prototype.getSymbol=function(F,G){var H=this.getUniqueValueInfo(F,G);return H&&H.symbol||this.defaultSymbol};
D.prototype.getSymbols=function(){for(var F=[],G=0,H=this.uniqueValueInfos;G<H.length;G++){var M=H[G];M.symbol&&F.push(M.symbol)}this.defaultSymbol&&F.push(this.defaultSymbol);return F};D.prototype.clone=function(){var F=new E({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:h.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:h.clone(this.visualVariables),
legendOptions:h.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:h.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(F._isDefaultSymbolDerived=!0);F._set("portal",this.portal);var G=h.clone(this.uniqueValueInfos);this.styleOrigin&&(F._set("styleOrigin",Object.freeze(h.clone(this.styleOrigin))),Object.freeze(G));F._set("uniqueValueInfos",G);F._updateValueInfoMap();return F};D.prototype.collectRequiredFields=function(F){this.inherited(arguments);
[this.field,this.field2,this.field3].forEach(function(G){G&&"string"===typeof G&&(F[G]=!0)});this.valueExpression&&y.extractFieldNames(this.valueExpression).forEach(function(G){F[G]=!0})};D.prototype.populateFromStyle=function(){var F=this;return b.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(G){var H=[];F._valueInfoMap={};G&&G.data&&Array.isArray(G.data.items)&&G.data.items.forEach(function(M){var X=new n.WebStyleSymbol({styleUrl:G.styleUrl,styleName:G.styleName,portal:F.portal,
name:M.name});F.defaultSymbol||M.name!==G.data.defaultItem||(F.defaultSymbol=X,F._isDefaultSymbolDerived=!0);X=new A["default"]({value:M.name,symbol:X});H.push(X);F._valueInfoMap[M.name]=X});F._set("uniqueValueInfos",Object.freeze(H));!F.defaultSymbol&&F.uniqueValueInfos.length&&(F.defaultSymbol=F.uniqueValueInfos[0].symbol,F._isDefaultSymbolDerived=!0);return F})};D.prototype._updateValueInfoMap=function(){var F=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(G){return F._valueInfoMap[G.value+
""]=G})};D.fromPortalStyle=function(F,G){var H=new E(G&&G.properties);H._set("styleOrigin",Object.freeze({styleName:F}));H._set("portal",G&&G.portal||u.getDefault());H=H.populateFromStyle();H["catch"](function(M){t.error("#fromPortalStyle('"+F+"'[, ...])","Failed to create unique value renderer from style name",M)});return H};D.fromStyleUrl=function(F,G){var H=new E(G&&G.properties);H._set("styleOrigin",Object.freeze({styleUrl:F}));H=H.populateFromStyle();H["catch"](function(M){t.error("#fromStyleUrl('"+
F+"'[, ...])","Failed to create unique value renderer from style URL",M)});return H};d([r.property()],D.prototype,"type",void 0);d([r.writer("type")],D.prototype,"writeType",null);d([r.property({types:{base:n.BaseSymbol,key:"type",typeMap:{"simple-fill":l.rendererTypes.typeMap["simple-fill"],"picture-fill":l.rendererTypes.typeMap["picture-fill"],"polygon-3d":l.rendererTypes.typeMap["polygon-3d"]}},json:{read:c.read,write:c.writeTarget}})],D.prototype,"backgroundFillSymbol",void 0);d([r.writer("web-scene",
"backgroundFillSymbol",{backgroundFillSymbol:{type:n.PolygonSymbol3D}})],D.prototype,"writeBackgroundFillSymbolWebScene",null);d([r.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],D.prototype,"field",void 0);d([r.cast("field")],D.prototype,"castField",null);d([r.writer("field")],D.prototype,"writeField",null);d([r.property({type:String,json:{write:!0}})],D.prototype,"field2",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"field3",void 0);d([r.property({type:String,
json:{write:!0}})],D.prototype,"valueExpression",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"valueExpressionTitle",void 0);d([r.property({dependsOn:["valueExpression"]})],D.prototype,"compiledFunc",null);d([r.property({type:z["default"],json:{write:!0}})],D.prototype,"legendOptions",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"defaultLabel",void 0);d([r.property({types:l.rendererTypes})],D.prototype,"defaultSymbol",null);d([r.reader("defaultSymbol")],D.prototype,
"readDefaultSymbol",null);d([r.writer("web-scene","defaultSymbol",{defaultSymbol:{types:l.rendererTypes3D}})],D.prototype,"writeDefaultSymbolWebScene",null);d([r.writer("defaultSymbol")],D.prototype,"writeDefaultSymbol",null);d([r.property({type:String,json:{write:!0}})],D.prototype,"fieldDelimiter",void 0);d([r.property({type:u,readOnly:!0})],D.prototype,"portal",void 0);d([r.reader("portal",["styleName"])],D.prototype,"readPortal",null);d([r.property({readOnly:!0})],D.prototype,"styleOrigin",void 0);
d([r.reader("styleOrigin",["styleName","styleUrl"])],D.prototype,"readStyleOrigin",null);d([r.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],D.prototype,"writeStyleOrigin",null);d([r.property({type:[A["default"]],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],D.prototype,"uniqueValueInfos",null);d([r.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],D.prototype,"requiredFields",void 0);d([g(1,r.cast(l.ensureType))],
D.prototype,"addUniqueValueInfo",null);return D=E=d([r.subclass("esri.renderers.UniqueValueRenderer")],D)}(r.declared(v))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(B,p){return function(a,d){p(a,d,B)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define(["require","exports"],function(B,p){function a(r,q,u){for(var v=r.length,x=0;x<v;x++)if(q.call(u,r[x],x,r))return x;return-1}function d(r,q,u,v){void 0===u&&(u=r.length);v=v||
k;for(var x=Math.max(0,v.last-10),z=-1,A=x;A<u;++A)if(r[A]===q){z=A;break}if(-1===z){for(A=0;A<x;++A)if(r[A]===q){z=A;break}if(-1===z)return}r[z]=r[u-1];r.pop();v.last=z;return q}function g(r,q,u,v){void 0===u&&(u=r.length);var x=[];q.forEach(function(z){void 0!==d(r,z,u,v)&&(x.push(z),--u)});return x}function n(r,q){return-1===r.indexOf(q)}function m(r,q,u){return!r.some(q.bind(null,u))}function f(r){return r}Object.defineProperty(p,"__esModule",{value:!0});p.findIndex=a;p.find=function(r,q,u){for(var v=
r.length,x=0;x<v;x++){var z=r[x];if(q.call(u,z,x,r))return z}};p.unique=function(r){return r.filter(function(q,u,v){return v.indexOf(q)===u})};p.equals=function(r,q,u){if(!r&&!q)return!0;if(!r||!q||r.length!==q.length)return!1;if(u)for(var v=0;v<r.length;v++){if(!u(r[v],q[v]))return!1}else for(v=0;v<r.length;v++)if(r[v]!==q[v])return!1;return!0};p.difference=function(r,q,u){if(u){var v=q.filter(m.bind(null,r,u));r=r.filter(m.bind(null,q,u))}else v=q.filter(n.bind(null,r)),r=r.filter(n.bind(null,q));
return{added:v,removed:r}};p.intersect=function(r,q,u){return r&&q?u?r.filter(function(v){return-1<a(q,function(x){return u(v,x)})}):r.filter(function(v){return-1<q.indexOf(v)}):[]};p.constant=function(r,q){for(var u=Array(r),v=0;v<r;v++)u[v]=q;return u};p.range=function(r,q){void 0===q&&(q=r,r=0);for(var u=Array(q-r),v=r;v<q;v++)u[v-r]=v;return u};p.binaryIndexOf=function(r,q,u){for(var v=r.length,x=0,z=v-1;x<z;){var A=x+Math.floor((z-x)/2);q>r[A]?x=A+1:z=A}z=r[x];return u?q>=r[v-1]?-1:z===q?x:x-
1:z===q?x:-1};var h=function(){return function(){this.last=0}}();p.RemoveHint=h;var k=new h,e=function(){return function(r){var q=this;this._array=r;this._hint=new h;this.remove=function(u){return d(q._array,u,q._array.length,q._hint)};this.removeMany=function(u){return g(q._array,u,q._array.length,q._hint)}}}();p.UnorderedRemover=e;p.removeUnordered=d;p.removeUnorderedMany=g;p.keysOfMap=function(r){var q=[];r.forEach(function(u,v){return q.push(v)});return q};p.keysOfSet=function(r,q){void 0===q&&
(q=f);var u=[];r.forEach(function(v){return u.push(q(v))});return u}})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require","exports"],function(B,p){return function(){function a(){}a.getDefault=function(){return null};return a}()})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(B,p,a,d,g){function n(r){return r instanceof d?Object.keys(r.items):
r instanceof a?g.getProperties(r).keys():r?Object.keys(r):[]}function m(r,q){return r instanceof d?r.items[q]:r[q]}function f(r,q){return Array.isArray(r)&&Array.isArray(q)?r.length!==q.length:!1}function h(r){return r?r.declaredClass:null}function k(r,q){var u=r.diff;if(u&&"function"===typeof u)return u(r,q);var v=n(r),x=n(q);if(0!==v.length||0!==x.length){if(!v.length||!x.length||f(r,q))return{type:"complete",oldValue:r,newValue:q};var z=x.filter(function(C){return-1===v.indexOf(C)}),A=v.filter(function(C){return-1===
x.indexOf(C)});z=v.filter(function(C){return-1<x.indexOf(C)&&m(r,C)!==m(q,C)}).concat(z,A).sort();if((A=h(r))&&-1<e.indexOf(A)&&z.length)return{type:"complete",oldValue:r,newValue:q};A=r instanceof a&&q instanceof a;for(var y in z){var c=z[y],b=m(r,c),l=m(q,c),t=void 0;if((A||"function"!==typeof b&&"function"!==typeof l)&&b!==l&&(null!=b||null!=l)&&(t=u&&u[c]&&"function"===typeof u[c]?u[c](b,l):"object"===typeof b&&"object"===typeof l&&h(b)===h(l)?k(b,l):{type:"complete",oldValue:b,newValue:l})){var w=
w||{type:"partial",diff:{}};w.diff[c]=t}}return w}}Object.defineProperty(p,"__esModule",{value:!0});var e=["esri.Color","esri.portal.Portal"];p.diff=function(r,q){if("function"!==typeof r&&"function"!==typeof q&&(r||q))return!r||!q||"object"===typeof r&&"object"===typeof q&&h(r)!==h(q)?{type:"complete",oldValue:r,newValue:q}:k(r,q)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q){function u(D){return D?D.isInstanceOf&&D.isInstanceOf(C):!1}function v(D){return D?u(D)?D.toArray():D.length?Array.prototype.slice.apply(D):[]:[]}function x(D){if(D&&D.length)return D[0]}function z(D,E,F,G){E&&E.forEach(function(H,M,X){D.push(H);z(D,F.call(G,H,M,X),F,G)})}B=function(){function D(){this.target=null;this.defaultPrevented=this.cancellable=!1}D.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};D.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return D}();var A=function(){},y=new k(B,!0,function(D){D.item=null;D.target=null}),c=new Set,b=new Set,l=new Set,t=new Map,w=0,C=function(D){function E(G){G=D.call(this,G)||this;G._boundDispatch=G._dispatchColChange.bind(G);G._chgListeners=[];G._notifications=null;G._timer=null;G.length=0;G._items=[];Object.defineProperty(G,"uid",{value:w++});return G}a(E,D);var F=E;E.ofType=function(G){if(!G)return F;if(t.has(G))return t.get(G);if("function"===typeof G)var H=G.prototype.declaredClass;
else if(G.base)H=G.base.prototype.declaredClass;else for(var M in G.typeMap){var X=G.typeMap[M].prototype.declaredClass;H=H?H+(" | "+X):X}H=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+H+"\x3e"});M={Type:G,ensureType:"function"===typeof G?q.ensureType(G):q.ensureOneOfType(G)};Object.defineProperty(H.prototype,"itemType",{value:M});t.set(G,H);return H};E.prototype.normalizeCtorArgs=function(G){return G?Array.isArray(G)||u(G)?{items:G}:G:{}};Object.defineProperty(E.prototype,"items",{get:function(){return this._items},
set:function(G){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(v(G))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(G,H){var M;Array.isArray(G)?M=G:-1<G.indexOf(",")&&(M=G.split(/\s*,\s*/));if(M){for(var X=[],W=0;W<M.length;W++)X.push(this.on(M[W],H));X.remove=function(){for(var O=0;O<X.length;O++)X[O].remove()};return X}if("change"===G){var T=this._chgListeners,K={removed:!1,callback:H};T.push(K);this._notifications&&this._notifications.push({listeners:T.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=A;K.removed=!0;T.splice(T.indexOf(K),1)}}}return g.after(this,"on"+G,H,!0)};E.prototype.hasEventListener=function(G){return"change"===G?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(G,H){if(this._emitBeforeChanges())return this;var M=this.getNextIndex(H);this._splice(M,0,G);this._emitAfterChanges();return this};E.prototype.addMany=function(G,H){void 0===H&&(H=this._items.length);if(!G||!G.length||
this._emitBeforeChanges())return this;var M=this.getNextIndex(H);this._splice.apply(this,[M,0].concat(v(G)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var G=this._splice(0,this.length)||[];this._emitAfterChanges();return G};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(h.clone)})};E.prototype.concat=function(){for(var G=[],H=0;H<arguments.length;H++)G[H]=arguments[H];G=G.map(v);return this._createNewInstance({items:(M=
this._items).concat.apply(M,G)});var M};E.prototype.drain=function(G,H){if(this.length&&!this._emitBeforeChanges()){for(var M=this._splice(0,this.length),X=M.length,W=0;W<X;W++)G.call(H,M[W],W,M);this._emitAfterChanges()}};E.prototype.every=function(G,H){return this._items.every(G,H)};E.prototype.filter=function(G,H){var M=2===arguments.length?this._items.filter(G,H):this._items.filter(G);return this._createNewInstance({items:M})};E.prototype.find=function(G,H){if("function"!==typeof G)throw new TypeError(G+
" is not a function");for(var M=this._items,X=M.length,W=0;W<X;W++){var T=M[W];if(G.call(H,T,W,M))return T}};E.prototype.findIndex=function(G,H){if("function"!==typeof G)throw new TypeError(G+" is not a function");for(var M=this._items,X=M.length,W=0;W<X;W++)if(G.call(H,M[W],W,M))return W;return-1};E.prototype.flatten=function(G,H){var M=[];z(M,this,G,H);return new F(M)};E.prototype.forEach=function(G,H){for(var M=this._items,X=M.length,W=0;W<X;W++)G.call(H,M[W],W,M)};E.prototype.getItemAt=function(G){return this._items[G]};
E.prototype.getNextIndex=function(G){var H=this.length;G=null==G?H:G;0>G?G=0:G>H&&(G=H);return G};E.prototype.includes=function(G,H){void 0===H&&(H=0);return arguments.length?-1!==this._items.indexOf(G,H):!1};E.prototype.indexOf=function(G,H){void 0===H&&(H=0);return this._items.indexOf(G,H)};E.prototype.join=function(G){void 0===G&&(G=",");return this._items.join(G)};E.prototype.lastIndexOf=function(G,H){void 0===H&&(H=this.length-1);return this._items.lastIndexOf(G,H)};E.prototype.map=function(G,
H){var M=this._items.map(G,H);return new F({items:M})};E.prototype.reorder=function(G,H){void 0===H&&(H=this.length-1);var M=this.indexOf(G);if(-1!==M){0>H?H=0:H>=this.length&&(H=this.length-1);if(M!==H){if(this._emitBeforeChanges())return G;this._splice(M,1);this._splice(H,0,G);this._emitAfterChanges()}return G}};E.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var G=x(this._splice(this.length-1,1));this._emitAfterChanges();return G}};E.prototype.push=function(){for(var G=[],
H=0;H<arguments.length;H++)G[H]=arguments[H];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(G));this._emitAfterChanges();return this.length};E.prototype.reduce=function(G,H){var M=this._items;return 2===arguments.length?M.reduce(G,H):M.reduce(G)};E.prototype.reduceRight=function(G,H){var M=this._items;return 2===arguments.length?M.reduceRight(G,H):M.reduceRight(G)};E.prototype.remove=function(G){return this.removeAt(this.indexOf(G))};E.prototype.removeAt=
function(G){if(!(0>G||G>=this.length||this._emitBeforeChanges()))return G=x(this._splice(G,1)),this._emitAfterChanges(),G};E.prototype.removeMany=function(G){if(!G||!G.length||this._emitBeforeChanges())return[];G=u(G)?G.toArray():G;for(var H=this._items,M=[],X=G.length,W=0;W<X;W++){var T=H.indexOf(G[W]);if(-1<T){for(var K=W+1,O=T+1,N=Math.min(G.length-K,H.length-O),Y=0;Y<N&&G[K+Y]===H[O+Y];)Y++;K=1+Y;(T=this._splice(T,K))&&0<T.length&&M.push.apply(M,T);W+=K-1}}this._emitAfterChanges();return M};E.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var G=this._splice(0,this.length);G&&(G.reverse(),this._splice.apply(this,[0,0].concat(G)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var G=x(this._splice(0,1));this._emitAfterChanges();return G}};E.prototype.slice=function(G,H){void 0===G&&(G=0);void 0===H&&(H=this.length);return this._createNewInstance({items:this._items.slice(G,H)})};E.prototype.some=function(G,H){return this._items.some(G,
H)};E.prototype.sort=function(G){if(!this.length||this._emitBeforeChanges())return this;var H=this._splice(0,this.length);arguments.length?H.sort(G):H.sort();this._splice.apply(this,[0,0].concat(H));return this};E.prototype.splice=function(G,H){for(var M=[],X=2;X<arguments.length;X++)M[X-2]=arguments[X];if(this._emitBeforeChanges())return[];M=this._splice.apply(this,[G,H].concat(M))||[];this._emitAfterChanges();return M};E.prototype.toArray=function(){return this._items.slice()};E.prototype.toJSON=
function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var G=[],H=0;H<arguments.length;H++)G[H]=arguments[H];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(G));this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(G){return new this.constructor(G)};E.prototype._splice=function(G,
H){for(var M=[],X=2;X<arguments.length;X++)M[X-2]=arguments[X];X=this._items;var W=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=e.schedule(this._boundDispatch));if(H){var T=X.splice(G,H);if(this.hasEventListener("before-remove")){var K=y.acquire();K.target=this;K.cancellable=!0;for(var O=0,N=T.length;O<N;O++){var Y=
T[O];K.reset(Y);this.emit("before-remove",K);K.defaultPrevented&&(T.splice(O,1),X.splice(G,0,Y),G+=1,--O,--N)}y.release(K)}this.length=this._items.length;if(this.hasEventListener("after-remove")){Y=y.acquire();Y.target=this;Y.cancellable=!1;N=T.length;for(O=0;O<N;O++)Y.reset(T[O]),this.emit("after-remove",Y);y.release(Y)}}if(M&&M.length){if(W){O=[];for(N=0;N<M.length;N++)Y=M[N],K=W.ensureType(Y),null==K&&null!=Y||O.push(K);M=O}W=this.hasEventListener("before-add");O=this.hasEventListener("after-add");
N=G===this.length;if(W||O){Y=y.acquire();Y.target=this;Y.cancellable=!0;K=y.acquire();K.target=this;K.cancellable=!1;for(var P=0,L=M;P<L.length;P++){var Q=L[P];W?(Y.reset(Q),this.emit("before-add",Y),Y.defaultPrevented||(N?X.push(Q):X.splice(G++,0,Q),this._set("length",X.length),O&&(K.reset(Q),this.emit("after-add",K)))):(N?X.push(Q):X.splice(G++,0,Q),this._set("length",X.length),K.reset(Q),this.emit("after-add",K))}y.release(Y)}else N?X.push.apply(X,M):X.splice.apply(X,[G,0].concat(M)),this._set("length",
X.length)}(M&&M.length||T&&T.length)&&this._notifyChangeEvent(M,T);return T};E.prototype._emitBeforeChanges=function(){var G=!1;if(this.hasEventListener("before-changes")){var H=y.acquire();H.target=this;H.cancellable=!0;this.emit("before-changes",H);G=H.defaultPrevented;y.release(H)}return G};E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var G=y.acquire();G.target=this;G.cancellable=!1;this.emit("after-changes",G);y.release(G)}};E.prototype._notifyChangeEvent=
function(G,H){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:G,removed:H})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var G=this._notifications;this._notifications=null;for(var H=function(W){var T=W.changes;c.clear();b.clear();l.clear();for(var K=0;K<T.length;K++){var O=T[K],N=O.added;O=O.removed;if(N)if(0===l.size&&0===b.size)for(var Y=0,P=N;Y<P.length;Y++)N=P[Y],c.add(N);
else for(Y=0,P=N;Y<P.length;Y++)N=P[Y],b.has(N)?(l.add(N),b["delete"](N)):l.has(N)||c.add(N);if(O)if(0===l.size&&0===c.size)for(Y=0;Y<O.length;Y++)N=O[Y],b.add(N);else for(Y=0;Y<O.length;Y++)N=O[Y],c.has(N)?c["delete"](N):(l["delete"](N),b.add(N))}var L=m.acquire();c.forEach(function(ma){L.push(ma)});var Q=m.acquire();b.forEach(function(ma){Q.push(ma)});var ca=M._items,ha=W.items,ja=m.acquire();l.forEach(function(ma){ha.indexOf(ma)!==ca.indexOf(ma)&&ja.push(ma)});if(W.listeners&&(L.length||Q.length||
ja.length))for(T={target:M,added:L,removed:Q,moved:ja},K=W.listeners.length,N=0;N<K;N++)O=W.listeners[N],O.removed||O.callback.call(M,T);m.release(L);m.release(Q);m.release(ja)},M=this,X=0;X<G.length;X++)H(G[X]);c.clear();b.clear();l.clear()}};E.isCollection=u;d([r.property()],E.prototype,"length",void 0);d([r.property()],E.prototype,"items",null);return E=F=d([r.subclass("esri.core.Collection")],E)}(r.declared(n,f));return C})},"esri/layers/vectorTiles/core/Evented":function(){define(["require",
"exports","dojo/aspect","dojo/on"],function(B,p,a,d){function g(n,m,f,h){var k;Array.isArray(m)?k=m:-1<m.indexOf(",")&&(k=m.split(/\s*,\s*/));if(k){var e=[];for(m=0;m<k.length;m++)e.push(g(n,k[m],f,h));e.remove=function(){for(var r=0;r<e.length;r++)e[r].remove()};return e}return h(n,m)}return function(){function n(){}n.prototype.emit=function(m,f){if(this.hasEventListener(m))return f=f||{},f.target||(f.target=this),d.emit(this,m,f)};n.prototype.on=function(m,f){return g(this,m,f,function(h,k){return a.after(h,
"on"+k,f,!0)})};n.prototype.hasEventListener=function(m){m="on"+m;return!(!this[m]||!this[m].after)};return n}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});
B=function(h){function k(){var r=null!==h&&h.apply(this,arguments)||this;r.description=null;r.label=null;r.symbol=null;r.value=null;return r}a(k,h);var e=k;k.prototype.clone=function(){return new e({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};d([n.property({type:String,json:{write:!0}})],k.prototype,"description",void 0);d([n.property({type:String,json:{write:!0}})],k.prototype,"label",void 0);d([n.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:m.read,
write:{target:{symbol:{types:f.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,write:m.writeTarget}})],k.prototype,"symbol",void 0);d([n.property({type:String,json:{write:!0}})],k.prototype,"value",void 0);return k=e=d([n.subclass("esri.renderers.support.UniqueValueInfo")],k)}(n.declared(g));p.UniqueValueInfo=B;p["default"]=B})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(B,p,a,d){Object.defineProperty(p,
"__esModule",{value:!0});p.fetchStyle=function(g,n){return a.reject(new d("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/vectorTiles/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(B,p,a,d,g,n,m,f,h){function k(q,u,v){if(!q)return null;if(q&&(q.styleName||
q.styleUrl)&&"uniqueValue"!==q.type)return v&&v.messages&&v.messages.push(new g("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+q.type+"'",{definition:q,context:v})),null;u=q?r[q.type]||null:null;if(u)return u=new u,u.read(q,v),u;v&&v.messages&&q&&v.messages.push(new g("renderer:unsupported","Renderers of type '"+(q.type||"unknown")+"' are not supported",{definition:q,context:v}));return null}function e(q,u,v){return q?v&&"web-scene"===v.origin&&"heatmap"===
q.type?(v.messages&&v.messages.push(new a("renderer:unsupported","Renderer of type '"+q.declaredClass+"' are not supported in scenes.",{renderer:q,context:v})),null):q.write(u,v):null}Object.defineProperty(p,"__esModule",{value:!0});var r={simple:f,uniqueValue:h,classBreaks:n,heatmap:m};p.read=k;p.writeTarget=function(q,u,v,x){(q=e(q,{},x))&&d.setDeepValue(v,q,u)};p.write=e;p.fromJSON=function(q,u){return k(q,null,u)}})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),
function(B,p,a,d,g,n){function m(){var e=0===f.length;if(!e){for(var r=g();!e&&6>g()-r;){var q=f[k];if(q){if(!0===q()){var u=h.get(q);f[k]=null;h["delete"](q);u()}k=(k+1)%f.length}else f.splice(k,1),k=(e=0===f.length)?0:k%f.length}e||d(m)}}var f=[],h=new Map,k=0;return function(e){return e?n.create(function(r){f.push(e);h.set(e,r);1===f.length&&d(m)},function(){f[f.indexOf(e)]=null;h["delete"](e)}):n.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(B,p,a){B=function(){function g(n,m){void 0===n&&(n=50);void 0===m&&(m=50);this._pool=new a(Map,!1,function(f){return f.clear()},m,n)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(n){this._pool.release(n)};g.acquire=function(){return d.acquire()};g.release=function(n){return d.release(n)};return g}();var d=new B(100);return B})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],
function(B,p,a){B=function(){function g(n,m){void 0===n&&(n=50);void 0===m&&(m=50);this._pool=new a(Set,!1,function(f){return f.clear()},m,n)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(n){this._pool.release(n)};g.acquire=function(){return d.acquire()};g.release=function(n){return d.release(n)};return g}();var d=new B(100);return B})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(B,p,a,d,g,n,m,f){function h(e,r,q){if(!e)return null;var u=0,v={};e=e.clone();var x=e.visualVariables,z=null;if("simple"!==e.type){var A=e.valueExpression;if(!e.field&&A){var y="$$fake"+u++,c=n.createFunction(A);v[y]=function(b,l){k.repurposeFromGraphicLikeObject(b.geometry,b.attributes,q);return n.executeFunction(c,{vars:{$feature:k,$view:n.getViewInfo(l)},spatialReference:r})};e.field=y;e.valueExpression=null;z=function(b,l){l.attributes[y]=v[y](l);return b.valueExpression?b.getSymbol(d.fromJSON(l)):
b.getSymbol(l)}}}x&&(e.visualVariables=x.map(function(b){if(b.normalizationField){var l=b.field,t=b.normalizationField,w="$$fake"+u++;v[w]=function(E,F){return E.attributes[l]/E.attributes[t]};b=a({},b);b.field=w;delete b.normalizationField;return b}if(b.valueExpression&&"$view.scale"!==b.valueExpression){var C=b.valueExpression;w="$$fake"+u++;var D=n.createFunction(C);v[w]=function(E,F){k.repurposeFromGraphicLikeObject(E.geometry,E.attributes,q);return n.executeFunction(D,{vars:{$feature:k,$view:n.getViewInfo(F)},
spatialReference:r})};b=a({},b);b.field=w;delete b.valueExpression;return b}return b}));return{renderer:e,normalizingFunctions:v,getSymbolFunction:z}}Object.defineProperty(p,"__esModule",{value:!0});var k=new g;p.createRendererInfo=function(e,r,q){var u=(r=h(e,r,q)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},r.normalizingFunctions),v=r&&r.getSymbolFunction;e=r&&r.renderer||e;r=f.convertVisualVariables(e.visualVariables);return{renderer:e,vvFields:r.vvFields,vvRanges:r.vvRanges,
getValue:function(x,z){var A=u[z];return A?A(x):x.attributes[z]},getSymbol:function(x){return v?v(this.renderer,x):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,x):null}}};p.getNormalizedRenderer=function(e,r,q){return(r=h(e,r,q)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},r.renderer)||e};p.getSymbol=function(e,r){return e.getSymbol(r)};p.isRendererWebGLCompatible=function(e){if(!e||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(e.type))return!1;
if(e.visualVariables){var r=0;for(e=e.visualVariables;r<e.length;r++){var q=e[r];switch(q.type){case "color":case "opacity":if(q.stops&&8<q.stops.length)return!1;break;case "size":if(f.getTypeOfSizeVisualVariable(q)===m.WGLVVFlag.SIZE_FIELD_STOPS&&q.stops&&6<q.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/aaBoundingRect ../../../../../renderers/support/diffUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/visualVariablesUtils ../../../engine/webgl/WGLFeatureView ../../../engine/webgl/WGLTile ./BaseTileRenderer".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u){function v(x){for(var z in x.diff){var A=x.diff[z];if("collection"===A.type){if(0!==A.changed.length||0!==A.added.length||0!==A.removed.length)return!0}else if("visualVariables"!==z&&"authoringInfo"!==z)return!0}return!1}Object.defineProperty(p,"__esModule",{value:!0});B=function(x){function z(A){return x.call(this)||this}a(z,x);z.prototype.initialize=function(){};z.prototype.createTile=function(A){var y=f.create();this.tileInfoView.getTileBounds(y,A);return new q(A,
y)};z.prototype.disposeTile=function(A){this._featuresView.removeChild(A)};z.prototype.highlight=function(A){return this._featuresView.highlight(A)};z.prototype.hitTest=function(A,y){return this._featuresView.hitTest(A,y)};z.prototype.supportsRenderer=function(A){return null!=A&&k.isRendererWebGLCompatible(A)&&-1!==["simple","class-breaks","unique-value"].indexOf(A.type)};z.prototype.getProcessorConfiguration=function(){var A=this.layer;return{type:"symbol",renderer:A.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||
1,definitionExpression:A.definitionExpression,outFields:A.outFields.slice().sort(),gdbVersion:A.gdbVersion,historicMoment:A.historicMoment&&A.historicMoment.getTime(),labelingInfo:A.labelingInfo&&A.labelingInfo.map(function(y){return y.toJSON()})}};z.prototype.needsProcessorReconfiguration=function(A){var y=this.configuration;if(!y||y.definitionExpression!==A.definitionExpression||y.outFields.join()!==A.outFields.join())return!0;y=this.configuration&&g.fromJSON(this.configuration.renderer)||null;
A=A&&g.fromJSON(A.renderer)||null;y=h.diff(y,A);if(!y)return!1;switch(y.type){case "complete":return!0;case "partial":if(v(y))return!0;if(y.diff.visualVariables){y=this._featuresView.visualVariablesInfo;var c=this.tileInfoView.tileInfo.spatialReference,b={fields:this.layer.fields.map(function(l){return l.toJSON()})};A=k.getNormalizedRenderer(A,c,b);A=e.convertVisualVariables(A.visualVariables).vvFields;return h.diff(y.vvFields,A)?!0:!1}}};z.prototype.applyConfiguration=function(A,y){var c=g.fromJSON(A.renderer),
b={fields:this.layer.fields.map(function(l){return l.toJSON()})};c=k.getNormalizedRenderer(c,this.tileInfoView.tileInfo.spatialReference,b);this.configuration=A;this._featuresView.visualVariablesInfo=e.convertVisualVariables(c.visualVariables);y&&this._featuresView.disposeWebGLResources()};z.prototype.install=function(A){var y=new r["default"]({highlightOptions:this.highlightOptions,tileInfoView:this.tileInfoView,layer:this.layer,layerView:this.layerView});this._featuresView=y;y.install(A)};z.prototype.uninstall=
function(A){this._featuresView.uninstall(A)};z.prototype.onTileData=function(A){var y=this.tiles.get(A.tileKey);y&&(this._featuresView.onTileData(y,A.data),this.requestUpdate())};z.prototype.onTileDataUpdate=function(A){var y=this.tiles.get(A.tileId);y&&(this._featuresView.onTileDataUpdate(y,A.data),this.requestUpdate())};z.prototype.onTileError=function(A){if(A=this.tiles.get(A.tileKey))this._featuresView.onTileError(A),this.requestUpdate()};z.prototype.getMaterialItems=function(A){return this._featuresView.getMaterialItems(A)};
return z=d([m.subclass()],z)}(m.declared(n,u["default"]));p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat2d ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./number ./Utils ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ../../tiling/enums ../../tiling/TileKey".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z,A){function y(c,b){return c.sortKey-b.sortKey}return function(c){function b(l,t){var w=c.call(this)||this;w.status=z.TileStatus.INITIALIZED;w._data=null;w.hlDisplayList=null;w._wglBuffers=null;w._dirtyMap=new h["default"];w.coords=[0,0];w.bounds=[0,0,0,0];w.tileTransform={transform:Float32Array[16],screenTransform:Float32Array[16],displayCoord:Float32Array[2],screenCoord:Float32Array[2]};w._hasVisualVariables=!1;w._labelIndex=null;w.tileTransform.screenTransform=
d.create();w.tileTransform.transform=g.create();w.tileTransform.displayCoord=n.create();w.tileTransform.screenCoord=n.create();w.key=A.pool.acquire(l);w.coords[0]=t[0];w.coords[1]=t[3];w.bounds=t;return w}a(b,c);Object.defineProperty(b.prototype,"iconGeometry",{get:function(){return this.getGeometry(e.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"textGeometry",{get:function(){return this.getGeometry(e.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"fillGeometry",{get:function(){return this.getGeometry(e.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"lineGeometry",{get:function(){return this.getGeometry(e.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelGeometry",{get:function(){return this.getGeometry(e.WGLGeometryType.LABEL)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isDirty",{get:function(){return this.status===z.TileStatus.MODIFIED},set:function(l){l&&this.status===z.TileStatus.READY?this.setStatus(z.TileStatus.MODIFIED):l||this.status!==z.TileStatus.MODIFIED||this.setStatus(z.TileStatus.READY);this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"hasData",{get:function(){return this.status===z.TileStatus.MODIFIED||this.status===z.TileStatus.READY},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});b.prototype.getGeometry=function(l){return this._wglBuffers&&this._wglBuffers.has(l)?this._wglBuffers.get(l):null};b.prototype.getDisplayList=function(l){switch(l){case e.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&
this._data.tileDisplayData.displayList}};Object.defineProperty(b.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});b.prototype.setData=function(l,t,w){this._hasVisualVariables=t;l&&l.tileDisplayData?(this._dispRecStore=k["default"].fromTileData(l,this._dirtyMap),this._data=l,l.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(w?z.TileStatus.MODIFIED:z.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(z.TileStatus.READY),this._dirtyMap.markAllDirty()):
(this.clear(),this.setStatus(z.TileStatus.NO_DATA))};b.prototype.patchData=function(l,t){this._data||(this.setData(l.addOrUpdate,this._hasVisualVariables,t),l.addOrUpdate=null);this._patchData(l)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=k["default"].fromTileData(this._data,this._dirtyMap));l.addOrUpdate.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(t?z.TileStatus.MODIFIED:z.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(z.TileStatus.READY)};
b.prototype.commitChanges=function(l){this._data&&this.status===z.TileStatus.READY&&(this._wglBuffers||(this._wglBuffers=new u["default"](l.context,this._hasVisualVariables)),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};b.prototype.setVisibility=function(l,t){for(var w=this._data.tileBufferData.geometries.map(function(W){return{vertexFrom:void 0,vertexTo:void 0,geometry:W}}),C=0;C<l.length;C++)for(var D=l[C],E=0,F=this._data.tileDisplayData.displayObjectRegistry.get(D.id).displayRecords;E<
F.length;E++){var G=F[E];if(null==t||t===G.geometryType){var H=w[G.geometryType],M=H.geometry.vertexBuffer[q.C_VBO_VISIBILITY];if(M){H.vertexFrom=null==H.vertexFrom?G.vertexFrom:Math.min(H.vertexFrom,G.vertexFrom);H.vertexTo=null==H.vertexTo?G.vertexFrom+G.vertexCount:Math.max(H.vertexTo,G.vertexFrom+G.vertexCount);H=G.vertexFrom*M.stride/4;G=G.vertexCount*M.stride/4;for(var X=0;X<G;++X)M.data[H+X]=D.visibility?4294967295:0}}}D=!1;for(C=0;C<w.length;++C)H=w[C],null!=H.vertexFrom&&null!=H.vertexTo&&
(D=H.vertexTo?H.vertexTo-H.vertexFrom:0,this.setStatus(z.TileStatus.MODIFIED),this._dirtyMap.markDirtyVertices(C,q.C_VBO_VISIBILITY,H.vertexFrom,D),D=!0);D&&this.requestRender()};b.prototype.setVisibilityRange=function(l,t,w,C){w=r.i8888to32(w,C,w,C);var D=C=void 0,E=this._data.tileBufferData.geometries[e.WGLGeometryType.LABEL].vertexBuffer[q.C_VBO_VISIBILITY_RANGE];l=this._data.tileDisplayData.displayObjectRegistry.get(l);t=l.metrics[t];var F=t.range.from;for(t=F+t.range.count;F<t;++F){var G=l.displayRecords[F];
if(G.geometryType===e.WGLGeometryType.LABEL){C=null==C?G.vertexFrom:Math.min(C,G.vertexFrom);D=null==D?G.vertexFrom+G.vertexCount:Math.max(D,G.vertexFrom+G.vertexCount);var H=G.vertexFrom*E.stride/4;G=G.vertexCount*E.stride/4;for(var M=0;M<G;++M)E.data[H+M]=w}}this._dirtyMap.markDirtyVertices(e.WGLGeometryType.LABEL,q.C_VBO_VISIBILITY_RANGE,C,D?D-C:0)};b.prototype.setStatus=function(l){this.status=l;if(l===z.TileStatus.READY||l===z.TileStatus.NO_DATA)this.attached=!0};b.prototype.clear=function(){this._data=
null;this.setStatus(z.TileStatus.INVALID);this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};b.prototype.dispose=function(){this.clear()};b.prototype.attach=function(l){return this.canDisplay};b.prototype.detach=function(l){c.prototype.detach.call(this,l)};b.prototype.doRender=function(l){var t=this;this.attached&&(this.commitChanges(l),l.context.setStencilFunction(514,this.stencilRef,255),l.painter.getBrushes(l.drawPhase).forEach(function(w){return w.draw(l,
t)}))};b.prototype.buildHLList=function(l){var t=this;this.hlDisplayList=new v;l.forEach(function(w){t._addToHLDisplayList(t.hlDisplayList,w)})};b.prototype._addToHLDisplayList=function(l,t){if(this._data){var w=this._data.tileDisplayData.displayObjectRegistry.get(t);if(w){var C=[],D=0;for(w=w.displayRecords;D<w.length;D++){var E=w[D].copy();E.meshData=null;E.symbolLevel=0;E.zOrder=0;C.push(E)}C.sort(y);l.addToList(C)}}};b.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var l=0,t=this.displayObjects;l<t.length;l++)this._insertIntoLabelIndex(t[l])};b.prototype._insertIntoLabelIndex=function(l){var t=l.anchor;-1!==l.xBucket&&t&&this.labelIndex[l.yBucket][l.xBucket].push(l)};b.prototype._initLabelIndex=function(){for(var l=[],t=0;t<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;t++){l.push([]);for(var w=0;w<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;w++)l[t].push([])}return l};b.prototype._patchData=function(l){for(var t=!0,w=0,C=l.remove||[];w<C.length;w++){var D=C[w],E=this._data.tileDisplayData.displayObjectRegistry.get(D);
if(E){this._data.tileDisplayData.displayList.removeFromList(E.displayRecords);for(var F=0,G=E.displayRecords;F<G.length;F++)this._dispRecStore["delete"](G[F]);this._data.tileDisplayData.displayObjectRegistry["delete"](D);E=this._data.tileDisplayData.displayObjects.indexOf(E);this._data.tileDisplayData.displayObjects.splice(E,1)}}w=0;for(C=l.addOrUpdate&&l.addOrUpdate.tileDisplayData&&l.addOrUpdate.tileDisplayData.displayObjects||[];w<C.length;w++){D=C[w];if(E=this._data.tileDisplayData.displayObjectRegistry.get(D.id)){var H=
E.displayRecords.length;for(F=0;F<H;++F){G=E.displayRecords[F];var M=D.displayRecords[F];if(F>=D.displayRecords.length||G.geometryType!==M.geometryType||G.symbolLevel!==M.symbolLevel||G.zOrder!==M.zOrder||G.materialInfo.materialKey!==M.materialInfo.materialKey)this._dispRecStore["delete"](E.displayRecords[F]),F<D.displayRecords.length&&(E.displayRecords[F]=void 0)}E.displayRecords.length=D.displayRecords.length}else E=new x(D.id),this._data.tileDisplayData.displayObjectRegistry.set(D.id,E),this._data.tileDisplayData.displayObjects.push(E);
H=D.displayRecords.length;for(F=0;F<H;++F){M=D.displayRecords[F];(G=E.displayRecords[F])?(G.meshData=M.meshData,G.materialInfo=M.materialInfo):(G=M.copy(),G.vertexFrom=void 0,G.indexFrom=void 0,E.displayRecords[F]=G);var X=l.addOrUpdate.tileBufferData.geometries[M.geometryType];t=this._dispRecStore.setMeshData(G,M,X.vertexBuffer,X.indexBuffer)&&t}}return t};return b}(m)})},"esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap":function(){define(["require","exports","./Utils"],function(B,p,a){function d(g,
n,m){g.allDirty||(null!=g.from&&null!=g.count?(g.from=Math.min(g.from,n),g.count=Math.max(g.from+g.count,n+m)-g.from):(g.from=n,g.count=m))}Object.defineProperty(p,"__esModule",{value:!0});B=function(){function g(){this._dirties=a.createGeometryData(void 0,function(n){return{indices:{from:null,count:null,allDirty:!1}}},function(n,m){return{vertices:{from:null,count:null,allDirty:!1}}})}g.prototype.markAllClean=function(){for(var n=0,m=this._dirties;n<m.length;n++){var f=m[n];f.data.indices.from=null;
f.data.indices.count=null;f.data.indices.allDirty=!1;for(var h in f.buffers)f.buffers[h].data.vertices.from=null,f.buffers[h].data.vertices.count=null,f.buffers[h].data.vertices.allDirty=!1}};g.prototype.markAllDirty=function(){for(var n=0,m=this._dirties;n<m.length;n++){var f=m[n];f.data.indices.allDirty=!0;for(var h in f.buffers)f.buffers[h].data.vertices.allDirty=!0}};g.prototype.forEach=function(n){for(var m=new Map,f=0;f<this._dirties.length;++f){var h=this._dirties[f],k=new Map,e;for(e in h.buffers){var r=
h.buffers[e].data.vertices;(r.allDirty||null!=r.from&&null!=r.count)&&k.set(e,r)}h=h.data.indices;r=void 0;r=h.allDirty||null!=h.from&&null!=h.count?{indices:h,vertices:k}:{indices:void 0,vertices:k};(r.indices||0<r.vertices.size)&&m.set(f,r)}m.forEach(function(q,u){n({indices:q.indices||null,vertices:0<q.vertices.size?q.vertices:null},u)})};g.prototype.markDirtyIndices=function(n,m,f){d(this._dirties[n].data.indices,m,f)};g.prototype.markDirtyVertices=function(n,m,f,h){d(this._dirties[n].buffers[m].data.vertices,
f,h)};return g}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList","./Utils"],function(B,p,a,d,g){function n(f){f=f.getStrides();var h={},k;for(k in f)h[m[k]]=f[k];return h}Object.defineProperty(p,"__esModule",{value:!0});var m=["FILL","LINE","MARKER","TEXT","LABEL"];B=function(){function f(h,k,e,r){this._strides=h;this._displayList=k;this._vertexAlignments={};this._freeListsAndStorage={};this._dirtyMap=
null;this._dirtyMap=e;for(var q in h){e=k=!1;this._freeListsAndStorage[q]={vtxFreeList:r?new d.FreeList(r):null,idxFreeList:r?new d.FreeList(r):null,vertexBuffers:{},indexBuffer:r?new Uint32Array(r):null};for(var u in h[q])this._freeListsAndStorage[q].vertexBuffers[u]={data:r?new Uint32Array(Math.floor(r*h[q][u]/4)):null,stride:h[q][u]},2===h[q][u]%4?k=!0:0!==h[q][u]%4&&(e=!0);this._vertexAlignments[q]=e?4:k?2:1}}f.fromTileData=function(h,k){var e=n(h),r=[0,0,0,0,0],q=[0,0,0,0,0],u=[];h.tileDisplayData.displayObjectRegistry.forEach(function(l){u.push(l)});
for(var v=0;v<u.length;v++)for(var x=0,z=u[v].displayRecords;x<z.length;x++){var A=z[x];r[A.geometryType]=Math.max(r[A.geometryType],A.vertexFrom+A.vertexCount);q[A.geometryType]=Math.max(q[A.geometryType],A.indexFrom+A.indexCount)}e=new f(e,h.tileDisplayData.displayList,k,null);for(v=0;v<h.tileBufferData.geometries.length;++v){x=r[v];var y=q[v];A=h.tileBufferData.geometries[v];z=e._storageFor(m[v]);var c=h.tileBufferData.geometries[v].indexBuffer;z.indexBuffer=c;z.idxFreeList=new d.FreeList(c.length);
z.idxFreeList.allocate(y);y=void 0;for(var b in A.vertexBuffer)A=h.tileBufferData.geometries[v].vertexBuffer[b],z.vertexBuffers[b].data=A.data,z.vertexBuffers[b].stride=A.stride,y=4*A.data.length/A.stride;z.vtxFreeList=new d.FreeList(y);z.vtxFreeList.allocate(x)}return e};f.prototype["delete"]=function(h){var k=m[h.geometryType];this._freeVertices(k,h.vertexFrom,h.vertexCount);this._freeIndices(k,h.indexFrom,h.indexCount);this._displayList.removeFromList(h);h.vertexFrom=void 0;h.indexFrom=void 0};
f.prototype.setMeshData=function(h,k,e,r){var q=m[h.geometryType];h.meshData=null;var u=void 0,v=void 0;void 0===h.vertexFrom?(v=this._align(q,k.vertexCount),u=this._allocateVertices(q,v)):k.vertexCount>h.vertexCount?(this._freeVertices(q,h.vertexFrom,h.vertexCount),v=this._align(q,k.vertexCount),u=this._allocateVertices(q,v)):k.vertexCount===h.vertexCount?(u=h.vertexFrom,v=h.vertexCount):(this._freeVertices(q,h.vertexFrom+k.vertexCount,h.vertexCount-k.vertexCount),u=h.vertexFrom,v=k.vertexCount);
var x=!0,z=void 0,A=void 0;void 0===h.indexFrom?(A=k.indexCount,z=this._allocateIndices(q,A)):k.indexCount>h.indexCount?(this._displayList.removeFromList(h),this._freeIndices(q,h.indexFrom,h.indexCount),A=k.indexCount,z=this._allocateIndices(q,A)):k.indexCount===h.indexCount?(x=!1,z=h.indexFrom,A=h.indexCount):(this._displayList.removeFromList(h),this._freeIndices(q,h.indexFrom+k.indexCount,h.indexCount-k.indexCount),z=h.indexFrom,A=k.indexCount);if(-1!==u&&-1!==z){q=this._storageFor(q);g.copyMeshData(u,
z,q.vertexBuffers,q.indexBuffer,k,e,r);h.vertexFrom=u;h.indexFrom=z;h.vertexCount=k.vertexCount;h.indexCount=k.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(h.geometryType,h.indexFrom,h.indexCount);for(var y in e)this._dirtyMap.markDirtyVertices(h.geometryType,y,h.vertexFrom,h.vertexCount)}x&&this._displayList.addToList(h);return!0}-1!==u&&this._freeVertices(q,u,v);-1!==z&&this._freeIndices(q,z,A);h.setMeshDataFromBuffers(k,e,r);h.vertexFrom=void 0;h.vertexCount=0;h.indexFrom=void 0;
h.indexCount=0;return!1};f.prototype._allocateVertices=function(h,k){var e=this._storageFor(h),r=e.vtxFreeList.allocate(k);return-1===r||.5<e.vtxFreeList.fragmentation?-1:r};f.prototype._freeVertices=function(h,k,e){var r=this._storageFor(h);r.vtxFreeList.free(k,e);if(a("esri-feature-tiles-debug"))for(var q in r.vertexBuffers){var u=r.vertexBuffers[q].data,v=this._stridesFor(h,q),x=k*v/4;v=e*v/4;for(var z=x;z<x+v;++z)u[z]=0}};f.prototype._freeIndices=function(h,k,e){h=this._storageFor(h);h.idxFreeList.free(k,
e);if(a("esri-feature-tiles-debug")){h=h.indexBuffer;for(var r=k;r<k+e;++r)h[r]=0}};f.prototype._align=function(h,k){var e=k%this._vertexAlignments[h];return 0===e?k:k+(this._vertexAlignments[h]-e)};f.prototype._allocateIndices=function(h,k){var e=this._storageFor(h),r=e.idxFreeList.allocate(k);return-1===r||.5<e.idxFreeList.fragmentation?-1:r};f.prototype._storageFor=function(h){return this._freeListsAndStorage[h]};f.prototype._stridesFor=function(h,k){return this._strides[h][k]};return f}();p["default"]=
B})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require","exports"],function(B,p){Object.defineProperty(p,"__esModule",{value:!0});var a=function(){function g(n){this._largestRange=null;this._parent=n;this._updateLargestRange()}Object.defineProperty(g.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});g.prototype.rangeCreated=function(n){if(!this._largestRange||n.count>this._largestRange.count)this._largestRange=n};
g.prototype.rangeResized=function(n,m,f){if(n===this._largestRange)n.count<f&&this._updateLargestRange();else if(!this._largestRange||n.count>this._largestRange.count)this._largestRange=n};g.prototype.findBestRange=function(n){for(var m=this._parent._freeHead,f=null;null!==m;)m.count>=n&&(!f||m.count-n<f.count-n)&&(f=m),m=m.next;return f};g.prototype.findAdjacentRanges=function(n,m){for(var f=!0,h=!1,k=null,e=this._parent._freeHead;f&&!h;){var r=null!==e?e.from:this._parent._size;n>=(null!==k?k.from+
k.count:0)&&n+m<=r?(f=!1,h=!0):null!==e?(k=e,e=e.next):f=!1}return[k,e]};g.prototype._updateLargestRange=function(){for(var n=null,m=this._parent._freeHead;null!==m;){if(!n||m.count>n.count)n=m;m=m.next}this._largestRange=n};return g}(),d=function(){function g(n,m){this._allocated=0;this._size=n;this._freeHead=0<n?{from:0,count:n,prev:null,next:null}:null;this._bookKeeper=m||new a(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}g.prototype.allocate=function(n){var m=this._bookKeeper.findBestRange(n);
if(null===m)return-1;var f=m.from,h=m.count;m.from+=n;m.count-=n;this._bookKeeper.rangeResized(m,f,h);this._allocated+=n;0===m.count&&(n=null!==m.prev?this._freeHead:m.next,g._removeRange(m),this._freeHead=n);return f};g.prototype.free=function(n,m){var f=this._bookKeeper.findAdjacentRanges(n,m),h=f[0];f=f[1];var k={from:n,count:m,prev:h,next:f};null!==h&&(h.next=k);null!==f&&(f.prev=k);this._bookKeeper.rangeCreated(k);this._allocated-=m;if(null!==f&&k.from+k.count===f.from){var e=k.from,r=k.count;
g._fuse(k,f);g._removeRange(f);this._bookKeeper.rangeResized(k,e,r);this._bookKeeper.rangeResized(f,void 0,0)}null!==h&&h.from+h.count===k.from&&(e=h.from,r=h.count,g._fuse(h,k),g._removeRange(k),this._bookKeeper.rangeResized(h,e,r),this._bookKeeper.rangeResized(k,void 0,0));this._freeHead=null!==k.prev?this._freeHead:k};Object.defineProperty(g.prototype,"fragmentation",{get:function(){var n=this._size-this._allocated;return 0===n?0:1-this._bookKeeper.largestRange.count/n},enumerable:!0,configurable:!0});
g._removeRange=function(n){null!==n.prev?null!==n.next?(n.prev.next=n.next,n.next.prev=n.prev):n.prev.next=null:null!==n.next&&(n.next.prev=null)};g._fuse=function(n,m){n.count+=m.count;n.next=m.next;m.from+=m.count;m.count=0;null!==m.next&&(m.next.prev=n)};return g}();p.FreeList=d})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./Utils","../../../webgl/BufferObject"],function(B,p,a,d){Object.defineProperty(p,"__esModule",{value:!0});B=function(){function g(n,
m){this.geometryMap=a.createGeometryData(m,function(f){return{indexBuffer:d.createIndex(n,35044),vao:null}},function(f,h){return{vertexBuffer:d.createVertex(n,a.C_VBO_INFO[h])}})}g.prototype.dispose=function(){for(var n in this.geometryMap){var m=this.geometryMap[n];m.data.vao&&m.data.vao.dispose(!1);m.data.indexBuffer&&m.data.indexBuffer.dispose();for(var f in m.buffers)m.buffers[f]&&m.buffers[f].data.vertexBuffer.dispose()}};g.prototype.get=function(n){var m=this.geometryMap[n];n={};for(var f in m.buffers)n[f]=
m.buffers[f].data.vertexBuffer;return{indexBuffer:m.data.indexBuffer,get vao(){return m.data.vao},set vao(h){m.data.vao=h},vertexBufferMap:n}};g.prototype.has=function(n){return null!=this.geometryMap[n]};g.prototype.upload=function(n,m){var f=this;m.forEach(function(h,k){h.indices&&(h.indices.allDirty?f._uploadIndices(n,k):null!=h.indices.from&&null!=h.indices.count&&f._uploadIndices(n,k,h.indices.from,h.indices.count));h.vertices&&h.vertices.forEach(function(e,r){e.allDirty?f._uploadVertices(n,
k,r):null!=e.from&&null!=e.count&&f._uploadVertices(n,k,r,e.from,e.count)})})};g.prototype._uploadVertices=function(n,m,f,h,k){var e=this.geometryMap[m];e&&(m=n.geometries[m].vertexBuffer[f])&&(n=m.stride,m=m.data.buffer,e.buffers[f]&&0<m.byteLength&&(null!=h&&null!=k?e.buffers[f].data.vertexBuffer.setSubData(m,h*n,h*n,(h+k)*n):e.buffers[f].data.vertexBuffer.setData(m)))};g.prototype._uploadIndices=function(n,m,f,h){var k=this.geometryMap[m];k&&(n=n.geometries[m].indexBuffer.buffer,k.data.indexBuffer&&
0<n.byteLength&&(null!=f&&null!=h?k.data.indexBuffer.setSubData(n,4*f,4*f,4*(f+h)):k.data.indexBuffer.setData(n)))};return g}();p["default"]=B})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(B,p,a){return function(){function d(g,n,m,f){this.set(g,n,m,f)}d.from=function(g,n,m,f){return d.pool.acquire(g,n,m,f)};d.getId=function(g,n,m,f){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+n+"/"+m+"/"+
f};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(g,n,m,f){null==g?this.world=this.col=this.row=this.level=0:"object"===
typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),n=g[1],m=g[2],f=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(n),this.col=parseFloat(m),this.world=parseFloat(f)):(this.level=+g,this.row=+n,this.col=+m,this.world=+f||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var g=this.level+1,n=this.row<<1,m=this.col<<1,f=this.world;
return[d.pool.acquire(g,n,m,f),d.pool.acquire(g,n,m+1,f),d.pool.acquire(g,n+1,m,f),d.pool.acquire(g,n+1,m+1,f)]};d.prototype._compare=function(g){return this.row<g.row?-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};d.sort=function(g){return g.map(function(n){return d.from(n)}).sort(function(n,m){return n._compare(m)}).map(function(n){return n.id})};d.pool=new a(d,!0,null,25,50);return d}()})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../tiling/enums".split(" "),
function(B,p,a,d,g,n,m,f){Object.defineProperty(p,"__esModule",{value:!0});B=function(h){function k(e){e=h.call(this)||this;e.tiles=new Map;e.layer=null;return e}a(k,h);k.prototype.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.highlightOptions=this.configuration=this.tiles=null};Object.defineProperty(k.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0});k.prototype.acquireTile=function(e){var r=this,q=this.createTile(e);
q.once("attach",function(){return r.notifyChange("updating")});this.tiles.set(e.id,q);return q};k.prototype.forEachTile=function(e){this.tiles.forEach(e)};k.prototype.releaseTile=function(e){this.tiles["delete"](e.key.id);this.disposeTile(e)};k.prototype.isUpdating=function(){var e=!0;this.tiles.forEach(function(r){e=e&&r.status!==f.TileStatus.INITIALIZED});return!e};k.prototype.requestUpdate=function(){this.layerView.requestUpdate()};d([m.property()],k.prototype,"configuration",void 0);d([m.property()],
k.prototype,"highlightOptions",void 0);d([m.property()],k.prototype,"layer",void 0);d([m.property()],k.prototype,"layerView",void 0);d([m.property()],k.prototype,"tileInfoView",void 0);d([m.property()],k.prototype,"updating",null);return k=d([m.subclass()],k)}(m.declared(g,n));p["default"]=B})},"esri/layers/vectorTiles/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(B,p,a,d,g,n,m){return function(f){function h(){var k=f.call(this)||this;k.handles=new n;return k}a(h,f);h.prototype.destroy=function(){this.handles.destroy()};d([m.property({readOnly:!0})],h.prototype,"handles",void 0);return h=d([m.subclass("esri.core.HandleOwner")],h)}(m.declared(g))})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(B,p,a,d,g,n,m){return function(f){function h(k){k=f.call(this)||this;k._groups=new Map;return k}a(h,f);h.prototype.destroy=function(){this.removeAll()};Object.defineProperty(h.prototype,"size",{get:function(){var k=0;this._groups.forEach(function(e){k+=e.length});return k},enumerable:!0,configurable:!0});h.prototype.add=function(k,e){if(!this._isHandle(k)&&!Array.isArray(k)&&!n.isCollection(k))return this;var r=this._getOrCreateGroup(e);Array.isArray(k)||n.isCollection(k)?k.forEach(function(q){return r.push(q)}):
r.push(k);this.notifyChange("size");return this};h.prototype.has=function(k){return this._groups.has(this._ensureGroupKey(k))};h.prototype.remove=function(k){if(Array.isArray(k)||n.isCollection(k))return k.forEach(this.remove,this),this;if(!this.has(k))return this;for(var e=this._getGroup(k),r=0;r<e.length;r++)e[r].remove();this._deleteGroup(k);this.notifyChange("size");return this};h.prototype.removeAll=function(){this._groups.forEach(function(k){for(var e=0;e<k.length;e++)k[e].remove()});this._groups.clear();
this.notifyChange("size");return this};h.prototype._isHandle=function(k){return k&&!!k.remove};h.prototype._getOrCreateGroup=function(k){if(this.has(k))return this._getGroup(k);var e=[];this._groups.set(this._ensureGroupKey(k),e);return e};h.prototype._getGroup=function(k){return this._groups.get(this._ensureGroupKey(k))};h.prototype._deleteGroup=function(k){return this._groups["delete"](this._ensureGroupKey(k))};h.prototype._ensureGroupKey=function(k){return k||"_default_"};d([m.property({readOnly:!0})],
h.prototype,"size",null);return h=d([m.subclass("esri.core.Handles")],h)}(m.declared(g))})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(B,p,a,d,g,n,m){return function(f){function h(){var k=null!==f&&f.apply(this,arguments)||this;k.color=new g([0,255,255]);k.haloOpacity=
1;k.fillOpacity=.5;return k}a(h,f);d([m.property({type:g})],h.prototype,"color",void 0);d([m.property()],h.prototype,"haloOpacity",void 0);d([m.property()],h.prototype,"fillOpacity",void 0);return h=d([m.subclass("esri.views.2d.support.HighlightOptions")],h)}(m.declared(n))})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v){var x=f({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(z){function A(c){c=z.call(this)||this;c.dpi=96;c.format=null;c.origin=null;c.minScale=0;c.maxScale=0;c.size=null;c.spatialReference=null;return c}d(A,z);var y=A;A.create=function(c){void 0===c&&(c={size:256,spatialReference:n.SpatialReference.WebMercator});
var b=c.resolutionFactor||1,l=c.scales,t=c.size||256;c=c.spatialReference||n.SpatialReference.WebMercator;var w=q.getInfo(c);w=w?new n.Point(w.origin[0],w.origin[1],c):new n.Point(0,0,c);var C=1/(39.37*r.getMetersPerUnitForSR(c)*96),D=[];if(l)for(var E=0;E<l.length;E++){var F=l[E],G=F*C;D.push({level:E,scale:F,resolution:G})}else for(F=q.isGeographic(c)?512/t*1.47748799285417E8:256/t*5.91657527591555E8,l=Math.ceil(24/b),D.push({level:0,scale:F,resolution:F*C}),E=1;E<l;E++)F/=Math.pow(2,b),G=F*C,D.push({level:E,
scale:F,resolution:G});return new y({dpi:96,lods:D,origin:w,size:t,spatialReference:c})};Object.defineProperty(A.prototype,"isWrappable",{get:function(){var c=this.spatialReference,b=this.origin;if(c&&b){var l=q.getInfo(c);return c.isWrappable&&Math.abs(l.origin[0]-b.x)<=l.dx}return!1},enumerable:!0,configurable:!0});A.prototype.readOrigin=function(c,b){return n.Point.fromJSON(a({spatialReference:b.spatialReference},c))};Object.defineProperty(A.prototype,"lods",{set:function(c){var b=this,l=0,t=0,
w=[];this._levelToLOD={};c&&(l=-Infinity,t=Infinity,c.forEach(function(C){w.push(C.scale);l=C.scale>l?C.scale:l;t=C.scale<t?C.scale:t;b._levelToLOD[C.level]=C}));this._set("scales",w);this._set("minScale",l);this._set("maxScale",t);this._set("lods",c);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});A.prototype.readSize=function(c,b){return[b.cols,b.rows]};A.prototype.writeSize=function(c,b){b.cols=c[0];b.rows=c[0]};A.prototype.zoomToScale=function(c){var b=this.scales;if(0>=c)return b[0];
if(c>=b.length)return b[b.length-1];var l=Math.round(c);return b[l]+(l-c)*(b[Math.round(c-.5)]-b[l])};A.prototype.scaleToZoom=function(c){for(var b=this.scales,l=b.length-1,t=0;t<l;t++){var w=b[t],C=b[t+1];if(w<=c)break;if(C===c)return t+1;if(w>c&&C<c)return t+1-(c-C)/(w-C)}return t};A.prototype.snapScale=function(c,b){void 0===b&&(b=.95);var l=this.scaleToZoom(c);return l%Math.floor(l)>=b?this.zoomToScale(Math.ceil(l)):this.zoomToScale(Math.floor(l))};A.prototype.tileAt=function(c,b,l,t){var w=this.lodAt(c);
if(!w)return null;if("number"===typeof b){var C=b;b=l}else{if(q.equals(b.spatialReference,this.spatialReference))C=b.x,b=b.y;else{t=u.project(b,this.spatialReference);if(!t)return null;C=t.x;b=t.y}t=l}l=w.resolution*this.size[0];w=w.resolution*this.size[1];t||(t={id:null,level:0,row:0,col:0,extent:e.create()});t.level=c;t.row=Math.floor((this.origin.y-b)/w+.001);t.col=Math.floor((C-this.origin.x)/l+.001);this.updateTileInfo(t);return t};A.prototype.updateTileInfo=function(c){var b=this.lodAt(c.level),
l=b.resolution*this.size[0];b=b.resolution*this.size[1];c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=e.create());c.extent[0]=this.origin.x+c.col*l;c.extent[1]=this.origin.y-(c.row+1)*b;c.extent[2]=c.extent[0]+l;c.extent[3]=c.extent[1]+b};A.prototype.upsampleTile=function(c){var b=this._upsampleLevels[c.level];if(!b||-1===b.parentLevel)return!1;c.level=b.parentLevel;c.row=Math.floor(c.row/b.factor+.001);c.col=Math.floor(c.col/b.factor+.001);this.updateTileInfo(c);return!0};A.prototype.getTileBounds=
function(c,b){var l=this.lodAt(b.level).resolution,t=l*this.size[0];l*=this.size[1];c[0]=this.origin.x+b.col*t;c[1]=this.origin.y-(b.row+1)*l;c[2]=c[0]+t;c[3]=c[1]+l;return c};A.prototype.lodAt=function(c){return this._levelToLOD&&this._levelToLOD[c]||null};A.prototype.clone=function(){return y.fromJSON(this.write({}))};A.prototype._initializeUpsampleLevels=function(){var c=this.lods;this._upsampleLevels=[];for(var b=null,l=0;l<c.length;l++){var t=c[l];this._upsampleLevels[t.level]={parentLevel:b?
b.level:-1,factor:b?b.resolution/t.resolution:0};b=t}};g([h.property({type:Number,json:{write:!0}})],A.prototype,"compressionQuality",void 0);g([h.property({type:Number,json:{write:!0}})],A.prototype,"dpi",void 0);g([h.property({type:String,json:{read:x.read,write:x.write}})],A.prototype,"format",void 0);g([h.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],A.prototype,"isWrappable",null);g([h.property({type:n.Point,json:{write:!0}})],A.prototype,"origin",void 0);g([h.reader("origin")],
A.prototype,"readOrigin",null);g([h.property({type:[v],value:null,json:{write:!0}})],A.prototype,"lods",null);g([h.property({readOnly:!0})],A.prototype,"minScale",void 0);g([h.property({readOnly:!0})],A.prototype,"maxScale",void 0);g([h.property({readOnly:!0})],A.prototype,"scales",void 0);g([h.property({cast:function(c){return Array.isArray(c)?c:"number"===typeof c?[c,c]:[256,256]}})],A.prototype,"size",void 0);g([h.reader("size",["rows","cols"])],A.prototype,"readSize",null);g([h.writer("size",
{cols:{type:k.Integer},rows:{type:k.Integer}})],A.prototype,"writeSize",null);g([h.property({type:n.SpatialReference,json:{write:!0}})],A.prototype,"spatialReference",void 0);return A=y=g([h.subclass("esri.layers.support.TileInfo")],A)}(h.declared(m))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(B,p,a,d,g,n,m){return function(f){function h(e){e=f.call(this,e)||this;e.level=0;e.levelValue=null;e.resolution=0;e.scale=0;return e}a(h,f);var k=h;h.prototype.clone=function(){return new k({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};d([n.property({type:m.Integer,json:{write:!0}})],h.prototype,"level",void 0);d([n.property({type:String,json:{write:!0}})],h.prototype,"levelValue",void 0);d([n.property({type:Number,json:{write:!0}})],h.prototype,
"resolution",void 0);d([n.property({type:Number,json:{write:!0}})],h.prototype,"scale",void 0);return h=k=d([n.subclass("esri.layers.support.LOD")],h)}(n.declared(g))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(B,p,a,d,g,n,m){var f=new n("0/0/0/0"),h=function(){function e(r,q,u,v,x,z,A,y){this.x=r;this.ymin=q;this.ymax=u;this.invM=v;this.leftAdjust=
x;this.rightAdjust=z;this.leftBound=A;this.rightBound=y}e.create=function(r,q){if(r[1]>q[1]){var u=[q,r];r=u[0];q=u[1]}u=r[0];var v=r[1],x=q[0],z=q[1],A=x-u,y=z-v;y=0!==y?A/y:0;var c=(Math.ceil(v)-v)*y,b=(Math.floor(v)-v)*y;return new e(u,Math.floor(v),Math.ceil(z),y,0>A?c:b,0>A?b:c,0>A?x:u,0>A?u:x)};e.prototype.incrRow=function(){this.x+=this.invM};e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};e.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,
this.rightBound)};return e}(),k=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(r,q){var u=this;this.tileInfo=r;this.fullExtent=q;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var v=r.lods.slice();v.sort(function(z,A){return A.scale-z.scale});var x=this._lodInfos=v.map(function(z){return d.create(r,z,q)});v.forEach(function(z,A){u._infoByLevel[z.level]=x[A];u._infoByScale[z.scale]=x[A];u.scales[A]=z.scale},this);this._wrap=r.isWrappable}e.prototype.getLODInfoAt=
function(r){return this._infoByLevel[r.level]};e.prototype.getTileBounds=function(r,q,u){void 0===u&&(u=!1);f.set(q);return(q=this._infoByLevel[f.level])?q.getTileBounds(r,f,u):r};e.prototype.getTileCoords=function(r,q,u){void 0===u&&(u=!1);f.set(q);return(q=this._infoByLevel[f.level])?q.getTileCoords(r,f,u):r};e.prototype.getTileCoverage=function(r,q,u){void 0===q&&(q=192);void 0===u&&(u="closest");u="closest"===u?this.getClosestInfoForScale(r.scale):this.getSmallestInfoForScale(r.scale);var v=g.pool.acquire(u),
x=this._wrap;var z=Infinity;var A=-Infinity,y=v.spans;k[0][0]=k[0][1]=k[1][1]=k[3][0]=-q;k[1][0]=k[2][0]=r.size[0]+q;k[2][1]=k[3][1]=r.size[1]+q;for(q=0;q<k.length;q++){var c=k[q];r.toMap(c,c);c[0]=u.getColumnForX(c[0]);c[1]=u.getRowForY(c[1])}r=[];c=3;for(q=0;4>q;q++){if(k[q][1]!==k[c][1]){var b=h.create(k[q],k[c]);z=Math.min(b.ymin,z);A=Math.max(b.ymax,A);void 0===r[b.ymin]&&(r[b.ymin]=[]);r[b.ymin].push(b)}c=q}if(null==z||null==A||100<A-z)return null;for(c=[];z<A;){null!=r[z]&&(c=c.concat(r[z]));
var l=Infinity;var t=-Infinity;for(q=c.length-1;0<=q;q--)b=c[q],l=Math.min(l,b.getLeftCol()),t=Math.max(t,b.getRightCol());l=Math.floor(l);t=Math.floor(t);if(z>=u.first[1]&&z<=u.last[1])if(x)if(u.size[0]<u.worldSize[0])for(b=Math.floor(t/u.worldSize[0]),q=Math.floor(l/u.worldSize[0]);q<=b;q++)y.push(new m(z,Math.max(u.getFirstColumnForWorld(q),l),Math.min(u.getLastColumnForWorld(q),t)));else y.push(new m(z,l,t));else l>u.last[0]||t<u.first[0]||(l=Math.max(l,u.first[0]),t=Math.min(t,u.last[0]),y.push(new m(z,
l,t)));z+=1;for(q=c.length-1;0<=q;q--)b=c[q],b.ymax>=z?b.incrRow():c.splice(q,1)}return v};e.prototype.getTileIdAtParent=function(r,q){var u=n.pool.acquire(q),v=this._infoByLevel[u.level];if(r.resolution<v.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+r.resolution+" is not a parent resolution of "+v.resolution);return r.resolution===v.resolution?u.id:n.getId(r.level,Math.floor(u.row*v.resolution/r.resolution+.01),Math.floor(u.col*v.resolution/r.resolution+.01),
u.world)};e.prototype.getTileParentId=function(r){r=n.pool.acquire(r);var q=this._lodInfos.indexOf(this._infoByLevel[r.level])-1;if(0>q)return n.pool.release(r),null;q=this.getTileIdAtParent(this._lodInfos[q],r);n.pool.release(r);return q};e.prototype.getTileResolution=function(r){return(r=this._infoByLevel[r.level])?r.resolution:-1};e.prototype.getTileScale=function(r){return(r=this._infoByLevel[r.level])?r.scale:-1};e.prototype.intersects=function(r,q){var u=n.pool.acquire(q),v=this._infoByLevel[u.level],
x=r.lodInfo;if(x.resolution>v.resolution){var z=n.pool.acquire(this.getTileIdAtParent(x,u)),A=x.denormalizeCol(z.col,z.world),y=r.spans.some(function(E){return E.row===z.row&&E.colFrom<=A&&E.colTo>=A});n.pool.release(u);n.pool.release(z);return y}if(x.resolution<v.resolution){var c=r.spans.reduce(function(E,F){E[0]=Math.min(E[0],F.row);E[1]=Math.max(E[1],F.row);E[2]=Math.min(E[2],F.colFrom);E[3]=Math.max(E[3],F.colTo);return E},[Infinity,-Infinity,Infinity,-Infinity]);y=c[0];var b=c[1],l=c[2];c=c[3];
var t=v.denormalizeCol(u.col,u.world),w=x.getColumnForX(v.getXForColumn(t)),C=x.getRowForY(v.getYForRow(u.row));t=x.getColumnForX(v.getXForColumn(t+1))-1;v=x.getRowForY(v.getYForRow(u.row+1))-1;n.pool.release(u);return!(w>c||t<l||C>b||v<y)}var D=x.denormalizeCol(u.col,u.world);y=r.spans.some(function(E){return E.row===u.row&&E.colFrom<=D&&E.colTo>=D});n.pool.release(u);return y};e.prototype.normalizeBounds=function(r,q,u){r[0]=q[0];r[1]=q[1];r[2]=q[2];r[3]=q[3];this._wrap&&(q=a.getInfo(this.tileInfo.spatialReference),
u=-u*(q.valid[1]-q.valid[0]),r[0]+=u,r[2]+=u);return r};e.prototype.getSmallestInfoForScale=function(r){var q=this.scales;if(this._infoByScale[r])return this._infoByScale[r];if(r>q[0])return this._infoByScale[q[0]];for(var u=1;u<q.length-1;u++)if(r>q[u]+1E-6)return this._infoByScale[q[u-1]];return this._infoByScale[q[q.length-1]]};e.prototype.getClosestInfoForScale=function(r){var q=this.scales;this._infoByScale[r]||(r=q.reduce(function(u,v,x,z){return Math.abs(v-r)<Math.abs(u-r)?v:u},q[0]));return this._infoByScale[r]};
return e}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(B,p,a,d){function g(m,f,h){m[0]=f;m[1]=h;return m}var n=new d("0/0/0/0");return function(){function m(f,h,k,e,r,q,u,v,x,z,A,y){this.level=f;this.resolution=h;this.scale=k;this.origin=e;this.first=r;this.last=q;this.size=u;this.norm=v;this.worldStart=x;this.worldEnd=z;this.worldSize=A;this.wrap=y}m.create=function(f,h,k){var e=
a.getInfo(f.spatialReference),r=[f.origin.x,f.origin.y],q=[f.size[0]*h.resolution,f.size[1]*h.resolution],u=[-Infinity,-Infinity],v=[Infinity,Infinity],x=[Infinity,Infinity];k&&(g(u,Math.max(0,Math.floor((k.xmin-r[0])/q[0])),Math.max(0,Math.floor((r[1]-k.ymax)/q[1]))),g(v,Math.max(0,Math.floor((k.xmax-r[0])/q[0])),Math.max(0,Math.floor((r[1]-k.ymin)/q[1]))),g(x,v[0]-u[0]+1,v[1]-u[1]+1));if(f.isWrappable){f=[Math.ceil(Math.round(2*e.origin[1]/h.resolution)/f.size[0]),x[1]];e=[Math.floor((e.origin[0]-
r[0])/q[0]),u[1]];k=[f[0]+e[0]-1,v[1]];var z=!0}else e=u,k=v,f=x,z=!1;return new m(h.level,h.resolution,h.scale,r,u,v,x,q,e,k,f,z)};m.prototype.normalizeCol=function(f){if(!this.wrap)return f;var h=this.worldSize[0];return 0>f?h-1-Math.abs((f+1)%h):f%h};m.prototype.denormalizeCol=function(f,h){return this.wrap?this.worldSize[0]*h+f:f};m.prototype.getWorldForColumn=function(f){return this.wrap?Math.floor(f/this.worldSize[0]):0};m.prototype.getFirstColumnForWorld=function(f){return f*this.worldSize[0]+
this.first[0]};m.prototype.getLastColumnForWorld=function(f){return f*this.worldSize[0]+this.first[0]+this.size[0]-1};m.prototype.getColumnForX=function(f){return(f-this.origin[0])/this.norm[0]};m.prototype.getXForColumn=function(f){return this.origin[0]+f*this.norm[0]};m.prototype.getRowForY=function(f){return(this.origin[1]-f)/this.norm[1]};m.prototype.getYForRow=function(f){return this.origin[1]-f*this.norm[1]};m.prototype.getTileBounds=function(f,h,k){void 0===k&&(k=!1);n.set(h);var e=k?n.col:
this.denormalizeCol(n.col,n.world),r=n.row;h=this.getXForColumn(e);k=this.getYForRow(r+1);e=this.getXForColumn(e+1);r=this.getYForRow(r);f[0]=h;f[1]=k;f[2]=e;f[3]=r;return f};m.prototype.getTileCoords=function(f,h,k){void 0===k&&(k=!1);n.set(h);h=k?n.col:this.denormalizeCol(n.col,n.world);Array.isArray(f)?g(f,this.getXForColumn(h),this.getYForRow(n.row)):(f.x=this.getXForColumn(h),f.y=this.getYForRow(n.row));return f};return m}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(B,p,a,d,g){return function(){function n(m){this.lodInfo=m;this.spans=a.acquire()}n.prototype.release=function(){for(var m=0,f=this.spans;m<f.length;m++)g.pool.release(f[m]);a.release(this.spans)};n.prototype.forEach=function(m,f){var h=this.spans,k=this.lodInfo,e=k.level;if(0!==h.length)for(var r=0;r<h.length;r++){var q=h[r],u=q.row,v=q.colTo;for(q=q.colFrom;q<=v;q++)m.call(f,e,u,k.normalizeCol(q),k.getWorldForColumn(q))}};
n.pool=new d(n,!0);return n}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(B,p,a){return function(){function d(g,n,m){this.row=g;this.colFrom=n;this.colTo=m}d.pool=new a(d,!0);return d}()})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../sniff ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ../tasks/support/pbfDeps ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v,x,z){var A=r.pbfQueryUtils,y=r.optimizedFeatures;d=d("esri-featurelayer-webgl");B=B([m],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:d&&d.maxDrillLevel,maxRecordCountFactor:d&&d.maxRecordCountFactor,enablePBFQuery:d&&d.enablePBFQuery,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_quantizationFactor:1,_wglRenderer:null,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,_tileRequests:null,
constructor:function(c){this._graphicsVal=[];this._featureMap={};this.featureLayer=c},initialize:function(c){this.inherited(arguments);this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var c=this.featureLayer;this._wglRenderer=c._div;this._tileInfo=this._wglRenderer._tileInfo;this._tileInfoView=this._wglRenderer._tileInfoView;this._tileRenderer=this._wglRenderer._tileRenderer;this._tileFetchQueue=new v({tileInfoView:this._tileInfoView,
process:this._getFeatureSet.bind(this)});this._tileStrategy=new x({cachePolicy:"purge",buffer:0,acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._isSuspendedAtStartup=c.suspended;this.start()}},propertyChangeHandler:function(c){this._init&&2>c&&this.start()},destroy:function(){this._tileFetchQueue&&this._tileFetchQueue.clear();this._tileStrategy&&this._tileStrategy.destroy();this._tileRequests&&this._tileRequests.clear();this.inherited(arguments)},
update:function(c){this._tileFetchQueue.pause();this._tileFetchQueue.state=c.state;c=this._tileStrategy.update(c);this._tileFetchQueue.resume();c?this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},hasAllFeatures:function(){var c=!1;this._getVisibleTileRequests().forEach(function(b){b.hasPartialFeatures&&(c=!0)});return!c},hasUpdateError:function(){var c=!1;
this._getVisibleTileRequests().forEach(function(b){b.hasUpdateError&&(c=!0)});return c},start:function(){var c=this.featureLayer;!c.suspended&&c.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_getVisibleTileRequests:function(){var c=this._tileStrategy.tileIndex;if(!c)return[];var b=[];this._tileRequests.forEach(function(l,t){var w=c.get(t);w&&w.visible&&b.push(l)});
return b},_acquireTile:function(c){this.featureLayer._fireUpdateStart();var b=this._acquireRendererTile(c),l=b.key,t=l.id;c=this._tileInfo.lodAt(c.level);var w={id:t,key:l,bounds:this._tileInfo.getTileBounds([0,0,0,0],l),resolution:c.resolution,scale:c.scale};l=this._tileFetchQueue.push(l).then(function(C){return this._wglRenderer._symbolProcessor.getMeshData(w,C.featureSet).then(function(D){return{meshData:D.data,featureSet:C.featureSet,errors:C.errors,hasPartialFeatures:C.hasPartialFeatures}})}.bind(this)).then(function(C){this._tileRenderer.onTileData({tileKey:t,
data:C.meshData});this._addTile(t,C)}.bind(this)).otherwise(function(C){this._tileRenderer.onTileData({tileKey:t,data:null});this._tileError(t);return q.reject(C)}.bind(this));this._tileRequests.set(t,{tsTile:w,request:l,isFulfilled:!1,hasUpdateError:null,hasPartialFeatures:null,featureSet:null,graphics:[]});return b},_acquireRendererTile:function(c){c=this._tileRenderer.acquireTile(c);c.once("attach",function(){this._wglRenderer._scheduleUpdate()}.bind(this));return c},_releaseTile:function(c){this.featureLayer._fireUpdateStart();
this._tileRequests.get(c.key.id)&&(this._removeTile(c),this._wglRenderer._scheduleUpdate())},_addTile:function(c,b){this._reEvalGraphics=!0;var l=this._createGraphics(b.featureSet);this._registerGraphics(l);var t=this._tileRequests.get(c);t&&(t.isFulfilled=!0,t.hasUpdateError=!!b.errors.length,t.hasPartialFeatures=b.hasPartialFeatures||t.hasUpdateError,t.featureSet=b.featureSet,t.graphics=l)},_tileError:function(c){if(c=this._tileRequests.get(c))c.isFulfilled=!0,c.hasUpdateError=!0,c.hasPartialFeatures=
!0,c.graphics=[];this._wglRenderer._scheduleUpdate()},_removeTile:function(c){var b=c.key.id,l=this._tileRequests.get(b);l.request.isFulfilled()||l.request.cancel();this._tileRequests["delete"](b);this._wglRenderer._cancelRedraw(b);this._reEvalGraphics=!0;this._tileRenderer.releaseTile(c);this._unregisterGraphics(l.graphics)},_getFeatureSet:function(c){var b={hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),
transform:null},hasPartialFeatures:!1,errors:[]},l=this.featureLayer._task,t=this._getResolutionParams(c),w=this._tileInfoView.getTileBounds([0,0,0,0],c);w=this._expandTileBounds(w,t);var C=u.acquire();return this._drillQuery(b,C,l,w,t,null,c).then(function(D){u.release(C);this._calculateCentroid(D);return D}.bind(this)).otherwise(function(D){u.release(C);throw D;})},_getResolutionParams:function(c){this._tileInfo.updateTileInfo(c);var b=this._tileInfo.lodAt(c.level);return{mode:"view",originPosition:"upperLeft",
tolerance:this._quantizationFactor*b.resolution,extent:new f(c.extent[0],c.extent[1],c.extent[2],c.extent[3],this.map.spatialReference)}},_expandTileBounds:function(c,b){var l=this.featureLayer.geometryType;l=("esriGeometryPoint"===l||"esriGeometryMultipoint"===l||this._wglRenderer._returnCentroid?20:0)*b.tolerance;c[0]-=l;c[1]-=l;c[2]+=l;c[3]+=l;return c},_calculateCentroid:function(c){if("esriGeometryPolygon"===c.featureSet.geometryType&&this._wglRenderer._returnCentroid){var b=0;var l=c.featureSet.spatialReference,
t=c.featureSet.transform,w={geometry:{x:null,y:null}},C=[w];c.featureSet.features.forEach(function(D){if(!D.centroid){var E=D.geometry;E&&(E=e.createPolygon(E,l,t),E=E.getCentroid())&&(w.geometry.x=E.x,w.geometry.y=E.y,h.quantize(C,"esriGeometryPoint",t),D.centroid={x:w.geometry.x,y:w.geometry.y},b++)}})}return b},_drillQuery:function(c,b,l,t,w,C,D,E){E=null!=E?E:0;c.drill.push(t);return this._query(l,t,w,C,D,E).then(function(F){this.featureLayer.supportsFormatPBF&&this.enablePBFQuery&&(F=y.convertToFeatureSet(A.parsePBFFeatureQuery(F)));
this._appendFeatures(c.featureSet.features,b,F.features);F.transform&&(c.featureSet.transform=F.transform);if(F.exceededTransferLimit){if(E<this.maxDrillLevel){E++;F=(t[2]-t[0])/2;var G=(t[3]-t[1])/2,H=[t[0]+F,t[1]+G,t[2],t[3]],M=[t[0],t[1],t[2]-F,t[3]-G],X=[t[0]+F,t[1],t[2],t[3]-G];return n([this._drillQuery(c,b,l,[t[0],t[1]+G,t[2]-F,t[3]],w,C,D,E),this._drillQuery(c,b,l,H,w,C,D,E),this._drillQuery(c,b,l,M,w,C,D,E),this._drillQuery(c,b,l,X,w,C,D,E)]).then(function(){return c})}c.hasPartialFeatures=
!0}return c}.bind(this)).otherwise(function(F){if(0<E)c.errors.push(F);else throw F;}.bind(this))},_appendFeatures:function(c,b,l){var t=c.length,w=l?l.length:0;c.length=t+w;var C=0,D,E=this.featureLayer.objectIdField;for(D=0;D<w;D++){var F=l[D];var G=F.attributes[E];b.has(G)||(c[t+C]=F,b.add(G),C++)}c.length-=w-C},_query:function(c,b,l,t,w,C){t=this.featureLayer;w=new k;var D=t.getOutFields();.75<=D.length/t.fields.length&&(D=["*"]);w.geometry=new f(b[0],b[1],b[2],b[3],this.map.spatialReference);
w.outFields=D;w.where=t._getAttributeFilter();w.returnGeometry=!0;w.returnCentroid=this._wglRenderer._returnCentroid;w.timeExtent=t._getOffsettedTE(t._mapTimeExtent);t._ts&&(w._ts=Date.now());w.orderByFields=t.supportsAdvancedQueries?t.getOrderByFields():null;w.multipatchOption=t.multipatchOption;w.maxAllowableOffset="esriGeometryPolyline"===t.geometryType?l.tolerance:null;w.quantizationParameters=l;(b=t.advancedQueryCapabilities)&&b.supportsQueryWithResultType&&(w.resultType="tile");w.returnExceededLimitFeatures=
C===this.maxDrillLevel;b&&b.supportsMaxRecordCountFactor&&(w.maxRecordCountFactor=this.maxRecordCountFactor);return this._wrapInNewDeferred(c.rawExecute(w,t.supportsFormatPBF&&this.enablePBFQuery?{format:"pbf"}:null))},_wrapInNewDeferred:function(c){var b=new a(function(){c.isFulfilled()||c.cancel()});c.then(function(l){b.resolve(l)}).otherwise(function(l){b.reject(l)});return b.promise},_collectGraphics:function(){var c=this._featureMap,b=[],l;for(l in c)b.push(c[l]);return b},_createGraphics:function(c){return e.createGraphics(c)},
_registerGraphics:function(c){var b=this.featureLayer.objectIdField;c.forEach(function(l){var t=l.attributes&&l.attributes[b];this._registerFeature(t,l);this._incRefCount(t)}.bind(this))},_unregisterGraphics:function(c){var b=this.featureLayer.objectIdField;c.forEach(function(l){l=l.attributes&&l.attributes[b];this._decRefCount(l);this._unregisterFeature(l)}.bind(this))}});Object.defineProperty(B.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=
this._collectGraphics());return this._graphicsVal}});p.setObject("layers._OnDemandDrillMode",B,g);return B})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(B,p,a){var d=B.forEach;return function(g){function n(u,v){e[v]=u;r.progress([u,v]);0===--q&&r.resolve(e)}var m,f;g instanceof Array?f=g:g&&"object"===typeof g&&(m=g);var h=[];if(m){f=[];for(var k in m)Object.hasOwnProperty.call(m,k)&&(h.push(k),f.push(m[k]));var e={}}else f&&(e=[]);if(!f||!f.length)return(new p).resolve(e);
var r=new p;r.promise.always(function(){e=h=null});var q=f.length;d(f,function(u,v){m||h.push(v);a(u,function(x){r.isFulfilled()||n(x,h[v])},function(x){r.isFulfilled()||n(x,h[v])})});return r.promise}})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(B,p,a,d,g){var n=!!d("esri-pbf");d=!!d("esri-featurelayer-pbf");B=B(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:n&&d,initialize:function(m){this.map=
m;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(m){},destroy:function(){this._init=this._started=!1},drawFeature:function(m){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(m){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(m){(m=this._featureMap[m])&&m._count++},_decRefCount:function(m){(m=this._featureMap[m])&&m._count--},
_getFeature:function(m){return this._featureMap[m]},_addFeatureIIf:function(m,f){var h=this._featureMap,k=h[m],e=this.featureLayer;k||(h[m]=f,e._add(f),f._count=0);return k||f},_removeFeatureIIf:function(m){var f=this._featureMap[m],h=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[m];h._remove(f)}return f},_registerFeature:function(m,f){var h=this._featureMap,k=h[m];k?(k.attributes=f.attributes,k.geometry=f.geometry):(h[m]=f,f._count=0,f._layer=f._graphicsLayer=f._sourceLayer=
this.featureLayer);return k||f},_unregisterFeature:function(m){var f=this._featureMap,h=f[m];h&&!h._count&&(delete f[m],h._graphicsLayer=null)},_clearIIf:function(){var m=this.featureLayer;var f=m.graphics,h=m._selectedFeatures,k=m.getSelectedFeatures().length,e=m.objectIdField;if(k)for(m=f.length-1;0<=m;m--){k=f[m];var r=k.attributes[e];r in h?k._count=1:(k._count=0,this._removeFeatureIIf(r))}else m.clear(),this._featureMap={}},_cancelPendingRequest:function(m){if(m)try{m.cancel()}catch(f){}},_toggleVisibility:function(m){var f=
this.featureLayer,h=f.graphics,k=m?"show":"hide",e,r=h.length;m=m&&f._ager;for(e=0;e<r;e++){var q=h[e];q[k]();m&&f._repaint(q)}},_applyTimeFilter:function(m){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){m||f._fireUpdateStart();var h=f._trackManager;h&&h.clearTracks();var k=f.getTimeDefinition(),e=f._getOffsettedTE(f._mapTimeExtent);e?(e=f._getTimeOverlap(k,e))?(k=f._filterByTime(f.graphics,e.startTime,e.endTime),h&&h.addFeatures(k.match),a.forEach(k.match,function(r){var q=r._shape;r.visible||
(r.show(),(q=r._shape)&&q._moveToFront());f._ager&&q&&f._repaint(r)}),a.forEach(k.noMatch,function(r){r.visible&&r.hide()})):this._toggleVisibility(!1):(h&&h.addFeatures(f.graphics),this._toggleVisibility(!0));h&&(h.moveLatestToFront(),h.drawTracks());m||f._fireUpdateEnd()}}});p.setObject("layers._RenderMode",B,g);return B})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(B,p,a,d,g,n,m,f){var h=B(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=h.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(k){var e={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},r=k&&k.geometry||this.geometry,q=this.objectIds,u=this.outFields,v=this.outSpatialReference,x=this.groupByFieldsForStatistics,z=this.orderByFields,A=this.outStatistics;k=this.distance;r&&(e.geometry=r,e.geometryType=m.getJsonType(r),e.inSR=r.spatialReference.wkid||d.toJson(r.spatialReference.toJson()));q&&(e.objectIds=q.join(","));u&&(e.outFields=u.join(","));null!=this.returnCentroid&&(e.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(e.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(e.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(e.maxRecordCountFactor=this.maxRecordCountFactor);x&&(e.groupByFieldsForStatistics=x.join(","));z&&(e.orderByFields=z.join(","));if(A){var y=[];a.forEach(A,function(c){y.push(c.toJson())});e.outStatistics=d.toJson(y)}v?e.outSR=v.wkid||d.toJson(v.toJson()):r&&(e.outSR=r.spatialReference.wkid||d.toJson(r.spatialReference.toJson()));r=
this.timeExtent;e.time=r?r.toJson().join(","):null;(r=this.relationParam)&&this.spatialRelationship===h.SPATIAL_REL_RELATION&&(e.relationParam=r);k&&(e.distance=this.distance,this.hasOwnProperty("units")?e.units=this._units[this.units]||this._units.meters:e.units=this._units.meters);this.hasOwnProperty("start")&&(e.resultOffset=this.start,e.resultRecordCount=10,""===e.where&&(e.where="1\x3d1"));this.hasOwnProperty("num")&&(e.resultRecordCount=this.num);e.resultType=this.resultType;null!=this.cacheHint&&
(e.cacheHint=this.cacheHint);e.pixelSize=this.pixelSize?d.toJson(this.pixelSize.toJson()):null;e.multipatchOption=this.multipatchOption;this.quantizationParameters&&(e.quantizationParameters=d.toJson(this.quantizationParameters));e._ts=this._ts;return e}});p.mixin(h,f);p.setObject("tasks.Query",h,n);return h})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(B,p,a){p={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};B.setObject("tasks._SpatialRelationship",p,a);return p})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r,q,u,v){var x=h("esri-pbf"),z=p(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(y){this._handleSuccess=a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,y);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var y=new g(this._canceler);this._fetchDfd=y;this._result=null;this._sendRequest();
return y.promise},_canceler:function(y){var c=y._pendingRequest;if(!y.isFulfilled()&&c&&!c.isFulfilled()){c.cancel();var b=c.results&&c.results[1]}y._pendingRequest=null;return b},_sendRequest:function(y){var c=this.query;this.pagination&&(this._startPage=c.resultOffset=null==y?0:y,c.resultRecordCount=this.pageSize);y=this.requestOptions;this._fetchDfd._pendingRequest=k({url:this.url,content:c,handleAs:"pbf"===c.f?"arraybuffer":"json",callbackParamName:"callback",timeout:y&&y.timeout},y);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},
_handleSuccess:function(y){this.pagination?(y.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(y.features):this._result=y,this._fetchDfd.progress(y),y.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(y),this._fetchDfd.resolve(y))},_handleError:function(y){this._fetchDfd.reject(y)}}),A=p(u,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(y,c){this._handler=a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=c&&c.source;this.gdbVersion=c&&c.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(y,c,b,l,t){var w=
t.assembly;y=this._encode(a.mixin({},this._url.query,{f:l&&l.format||"json"},y.toJson(w&&w[0])));var C=this._handler,D=this._errorHandler;this.source&&(l={source:this.source.toJson()},y.layer=n.toJson(l));this.gdbVersion&&(y.gdbVersion=this.gdbVersion);var E="pbf"===y.f;if(E){var F;x||(F="QueryTask.execute: 'pbf' format is not supported in your browser.");if(F)return y=new g,y.addErrback(function(G){D(G,b,t.dfd)}),y.reject(Error(F)),y}F=this.requestOptions;F=k({url:this._url.path+"/query",content:y,
callbackParamName:"callback",handleAs:E?"arraybuffer":"json",timeout:F&&F.timeout},F);y=[F];E&&y.push(A.loadPBFReader());(new m(y)).then(function(G){t.dfd.isFulfilled()||(G=G[0],G[0]?C(G[1],E,c,b,t.dfd):D(G[1],b,t.dfd))});return F},rawExecute:function(y,c,b){c=c||{};y=this._encode(a.mixin({},this._url.query,{f:c.format||"json"},y.toJson(b.assembly&&b.assembly[0])));this.source&&(y.layer=n.toJson({source:this.source.toJson()}));this.gdbVersion&&(y.gdbVersion=this.gdbVersion);return(new z({url:this._url.path+
"/query",query:y,requestOptions:this.requestOptions,pagination:c.pagination,pageSize:c.pageSize})).execute().then(null,null,function(l){b.dfd.progress(l)}).then(a.hitch(this,function(l){this._successHandler([l],"onRawExecuteComplete",null,b.dfd)})).otherwise(a.hitch(this,function(l){this._errorHandler(l,null,b.dfd)}))},executeRelationshipQuery:function(y,c,b){y=this._encode(a.mixin({},this._url.query,{f:"json"},y.toJson()));var l=this._relationshipQueryHandler,t=this._errorHandler;this.gdbVersion&&
(y.gdbVersion=this.gdbVersion);var w=new g(e._dfdCanceller),C=this.requestOptions,D=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&D.endsWith("/dynamicLayer")&&(D=D.slice(0,-13),D=D+"/"+this.source.mapLayerId);w._pendingDfd=k({url:D+"/queryRelatedRecords",content:y,callbackParamName:"callback",timeout:C&&C.timeout,load:function(E,F){l(E,F,c,b,w)},error:function(E){t(E,b,w)}},C);return w},executeForIds:function(y,c,b,l){var t=l.assembly;y=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0},y.toJson(t&&t[0])));var w=this._executeForIdsHandler,C=this._errorHandler;this.source&&(t={source:this.source.toJson()},y.layer=n.toJson(t));this.gdbVersion&&(y.gdbVersion=this.gdbVersion);t=this.requestOptions;return k({url:this._url.path+"/query",content:y,callbackParamName:"callback",timeout:t&&t.timeout,load:function(D,E){w(D,E,c,b,l.dfd)},error:function(D){C(D,b,l.dfd)}},t)},executeForCount:function(y,c,b,l){var t=l.assembly;y=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},y.toJson(t&&t[0])));var w=this._countHandler,C=this._errorHandler;this.source&&(t={source:this.source.toJson()},y.layer=n.toJson(t));this.gdbVersion&&(y.gdbVersion=this.gdbVersion);t=this.requestOptions;return k({url:this._url.path+"/query",content:y,callbackParamName:"callback",timeout:t&&t.timeout,load:function(D,E){w(D,E,c,b,l.dfd)},error:function(D){C(D,b,l.dfd)}},t)},executeForExtent:function(y,c,b,l){var t=l.assembly;y=this._encode(a.mixin({},
this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},y.toJson(t&&t[0])));var w=this._extentHandler,C=this._errorHandler;this.source&&(t={source:this.source.toJson()},y.layer=n.toJson(t));this.gdbVersion&&(y.gdbVersion=this.gdbVersion);t=this.requestOptions;return k({url:this._url.path+"/query",content:y,callbackParamName:"callback",timeout:t&&t.timeout,load:function(D,E){w(D,E,c,b,l.dfd)},error:function(D){C(D,b,l.dfd)}},t)},_handler:function(y,c,b,l,t){try{y&&c&&(y=A.pbfDeps.optimizedFeatures.convertToFeatureSet(A.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(y)));
var w=new v(y);this._successHandler([w],"onComplete",b,t)}catch(C){this._errorHandler(C,l,t)}},_relationshipQueryHandler:function(y,c,b,l,t){try{var w=y.geometryType,C=y.spatialReference,D={};d.forEach(y.relatedRecordGroups,function(E){var F={};F.geometryType=w;F.spatialReference=C;F.features=E.relatedRecords;F=new v(F);if(null!=E.objectId)D[E.objectId]=F;else for(var G in E)E.hasOwnProperty(G)&&"relatedRecords"!==G&&(D[E[G]]=F)});this._successHandler([D],"onExecuteRelationshipQueryComplete",b,t)}catch(E){this._errorHandler(E,
l,t)}},_executeForIdsHandler:function(y,c,b,l,t){try{this._successHandler([y.objectIds],"onExecuteForIdsComplete",b,t)}catch(w){this._errorHandler(w,l,t)}},_countHandler:function(y,c,b,l,t){try{var w=y.features,C=y.objectIds;if(C)var D=C.length;else{if(w)throw Error("Unable to perform query. Please check your parameters.");D=y.count}this._successHandler([D],"onExecuteForCountComplete",b,t)}catch(E){this._errorHandler(E,l,t)}},_extentHandler:function(y,c,b,l,t){try{y.extent&&(y.extent=new r(y.extent)),
this._successHandler([y],"onExecuteForExtentComplete",b,t)}catch(w){this._errorHandler(w,l,t)}}});A.loadPBFReader=function(){var y=new g;A.pbfDeps?y.resolve():B(["./support/pbfDeps"],function(c){A.pbfDeps=c;y.isFulfilled()||y.resolve()});return y.promise};q._createWrappers(A);a.setObject("tasks.QueryTask",A,f);return A})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(B,p,a){B.DeferredList=function(d,g,n,m,f){var h=[];p.call(this);var k=this;0!==
d.length||g||this.resolve([0,[]]);var e=0;a.forEach(d,function(r,q){function u(v,x){h[q]=[v,x];e++;e===d.length&&k.resolve(h)}r.then(function(v){g?k.resolve([q,v]):u(!0,v)},function(v){n?k.reject(v):u(!1,v);if(m)return null;throw v;})})};B.DeferredList.prototype=new p;B.DeferredList.prototype.gatherResults=function(d){d=new B.DeferredList(d,!1,!0,!1);d.addCallback(function(g){var n=[];a.forEach(g,function(m){n.push(m[1])});return n});return d};return B.DeferredList})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(B,p,a,d,g,n,m,f,h,k,e,r){function q(w,C){return Math.ceil((w-C)/(2*C))}function u(w,C){var D=w.paths||w.rings,E,F,G=D.length;for(E=0;E<G;E++){var H=D[E].length;for(F=0;F<H;F++){var M=w.getPoint(E,F);w.setPoint(E,F,M.offset(C,0))}}return w}function v(w,C){if(!(w instanceof h||w instanceof k))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var D=w instanceof h,E=[],F;B.forEach(D?w.paths:w.rings,function(G){E.push(F=[]);F.push([G[0][0],G[0][1]]);var H,
M;for(H=0;H<G.length-1;H++){var X=G[H][0];var W=G[H][1];var T=G[H+1][0];var K=G[H+1][1];var O=Math.sqrt((T-X)*(T-X)+(K-W)*(K-W));var N=(K-W)/O;var Y=(T-X)/O;var P=O/C;if(1<P){for(M=1;M<=P-1;M++){var L=M*C;var Q=Y*L+X;L=N*L+W;F.push([Q,L])}M=(O+Math.floor(P-1)*C)/2;Q=Y*M+X;L=N*M+W;F.push([Q,L])}F.push([T,K])}});return D?new h({paths:E,spatialReference:w.spatialReference}):new k({rings:E,spatialReference:w.spatialReference})}function x(w,C,D){C&&(w=v(w,1E6),w=e.webMercatorToGeographic(w,!0));D&&(w=
u(w,D));return w}function z(w,C,D){var E=w.x||w[0];if(E>C){var F=q(E,C);w.x?w=w.offset(-2*F*C,0):w[0]=E+-2*F*C}else E<D&&(F=q(E,D),w.x?w=w.offset(-2*F*D,0):w[0]=E+-2*F*D);return w}function A(w,C){var D=-1;B.forEach(C.cutIndexes,function(E,F){var G=C.geometries[F];B.forEach(G.rings||G.paths,function(H,M){B.some(H,function(X){if(!(180>X[0])){X=0;var W,T=H.length;for(W=0;W<T;W++){var K=H[W][0];X=K>X?K:X}X=Number(X.toFixed(9));X=-360*q(X,180);T=H.length;for(W=0;W<T;W++)K=G.getPoint(M,W),G.setPoint(M,
W,K.offset(X,0))}return!0})});E===D?G.rings?B.forEach(G.rings,function(H){w[E]=w[E].addRing(H)}):B.forEach(G.paths,function(H){w[E]=w[E].addPath(H)}):(D=E,w[E]=G)});return w}function y(w,C,D,E){var F=new a;F.addCallbacks(D,E);C=C||n.defaults.geometryService;var G=[],H=[],M,X,W,T,K,O,N,Y,P=0;B.forEach(w,function(ha){if(ha)if(M||(M=ha.spatialReference,X=M._getInfo(),T=(W=M._isWebMercator())?2.0037508342788905E7:180,K=W?-2.0037508342788905E7:-180,O=W?102100:4326,N=new h({paths:[[[T,K],[T,T]]],spatialReference:{wkid:O}}),
Y=new h({paths:[[[K,K],[K,T]]],spatialReference:{wkid:O}})),X){var ja=r.fromJson(ha.toJson()),ma=ha.getExtent();"point"===ha.type?G.push(z(ja,T,K)):"multipoint"===ha.type?(ja.points=B.map(ja.points,function(R){return z(R,T,K)}),G.push(ja)):"extent"===ha.type?(ja=ma._normalize(null,null,X),G.push(ja.rings?new k(ja):ja)):ma?(ha=2*q(ma.xmin,K)*T,ja=0===ha?ja:u(ja,ha),ma=ma.offset(ha,0),ma.intersects(N)&&ma.xmax!==T?(P=ma.xmax>P?ma.xmax:P,ja=x(ja,W),H.push(ja),G.push("cut")):ma.intersects(Y)&&ma.xmin!==
K?(P=2*ma.xmax*T>P?2*ma.xmax*T:P,ja=x(ja,W,360),H.push(ja),G.push("cut")):G.push(ja)):G.push(ja)}else G.push(ha);else G.push(ha)});D=new h;E=q(P,T);for(var L=-90,Q=E;0<E;){var ca=-180+360*E;D.addPath([[ca,L],[ca,-1*L]]);L*=-1;E--}0<H.length&&0<Q?C?C.cut(H,D,function(ha){H=A(H,ha);var ja=[];B.forEach(G,function(ma,R){if("cut"===ma){var fa=H.shift();w[R].rings&&1<w[R].rings.length&&fa.rings.length>=w[R].rings.length?(G[R]="simplify",ja.push(fa)):G[R]=!0===W?e.geographicToWebMercator(fa):fa}});0<ja.length?
C.simplify(ja,function(ma){B.forEach(G,function(R,fa){"simplify"===R&&(G[fa]=!0===W?e.geographicToWebMercator(ma.shift()):ma.shift())});F.callback(G)},function(ma){F.errback(ma)}):F.callback(G)},function(ha){F.errback(ha)}):F.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(B.forEach(G,function(ha,ja){if("cut"===ha){var ma=H.shift();G[ja]=!0===W?e.geographicToWebMercator(ma):ma}}),F.callback(G));return F}function c(w,C,D,E){var F=!1,G;p.isObject(w)&&
w&&(p.isArray(w)?w.length&&((G=w[0]&&w[0].declaredClass)&&-1!==G.indexOf("Graphic")?(w=B.map(w,function(H){return H.geometry}),F=w.length?!0:!1):G&&-1!==G.indexOf("esri.geometry.")&&(F=!0)):(G=w.declaredClass)&&-1!==G.indexOf("FeatureSet")?(w=B.map(w.features||[],function(H){return H.geometry}),F=w.length?!0:!1):G&&-1!==G.indexOf("esri.geometry.")&&(F=!0));F&&C.push({index:D,property:E,value:w})}function b(w,C){var D=[];B.forEach(C,function(E){var F=E.i,G=w[F];E=E.p;var H;if(p.isObject(G)&&G)if(E)if("*"===
E[0])for(H in G)G.hasOwnProperty(H)&&c(G[H],D,F,H);else B.forEach(E,function(M){c(p.getObject(M,!1,G),D,F,M)});else c(G,D,F)});return D}function l(w,C){var D=0,E={};B.forEach(C,function(F){var G=F.index,H=F.property,M=F.value,X=M.length||1,W=w.slice(D,D+X);p.isArray(M)||(W=W[0]);D+=X;delete F.value;H?(E[G]=E[G]||{},E[G][H]=W):E[G]=W});return E}function t(w){for(var C=[],D=0,E=0,F=Math.min,G=Math.max,H=0;H<w.length;H++){for(var M=w[H],X=null,W=0;W<M.length;W++)X=M[W],C.push(X),0===W?E=D=X[0]:(D=F(D,
X[0]),E=G(E,X[0]));X&&C.push([(D+E)/2,0])}return C}d={normalizeCentralMeridian:y,_foldCutResults:A,_prepareGeometryForCut:x,_offsetMagnitude:q,_pointNormalization:z,_updatePolyGeometry:u,_straightLineDensify:v,_createWrappers:function(w){var C=p.isObject(w)?w.prototype:p.getObject(w+".prototype");B.forEach(C.__msigns,function(D){var E=C[D.n];C[D.n]=function(){var F=this,G=[],H,M=new a(m._dfdCanceller);D.f&&m._fixDfd(M);for(H=0;H<D.c;H++)G[H]=arguments[H];var X={dfd:M};G.push(X);var W=[],T;if(F.normalization&&
!F._isTable){var K=b(G,D.a);B.forEach(K,function(O){W=W.concat(O.value)});W.length&&(T=y(W))}T?(M._pendingDfd=T,T.addCallbacks(function(O){M.canceled||(X.assembly=l(O,K),M._pendingDfd=E.apply(F,G))},function(O){var N=F.declaredClass;N&&-1!==N.indexOf("FeatureLayer")?F._resolve([O],null,G[D.e],M,!0):F._errorHandler(O,G[D.e],M)})):M._pendingDfd=E.apply(F,G);return M}})},_disassemble:b,_addToBucket:c,_reassemble:l,getDenormalizedExtent:function(w){if(!w)return null;var C=w.getExtent();if(!C)return null;
var D=w.spatialReference&&w.spatialReference._getInfo();if(!D)return C;var E=D.valid[0];D=D.valid[1];var F=2*D,G=C.getWidth(),H=C.xmax,M=C.xmin;if("extent"===w.type||0===G||G<=D||G>F||H<E||M>D)return C;switch(w.type){case "polygon":if(1<w.rings.length)var X=t(w.rings);else return C;break;case "polyline":if(1<w.paths.length)X=t(w.paths);else return C;break;case "multipoint":X=w.points}w=Math.min;E=Math.max;F=new f(C.toJson());for(var W=0;W<X.length;W++){var T=X[W][0];0>T?(T+=D,M=E(T,M)):(T-=D,H=w(T,
H))}F.xmin=H;F.xmax=M;return F.getWidth()<G?(F.xmin-=D,F.xmax-=D,F):C}};p.mixin(p.getObject("geometry",!0,g),d);return d})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(B,p,a,d,g,n,m,f){B=B(f,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(h,k){h&&p.isString(h)&&(this._url=m.urlToObject(this.url=h));k&&k.requestOptions&&(this.requestOptions=
k.requestOptions);this.normalization=!0;this._errorHandler=p.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var h=this._url,k=/^http:/i;this.url&&(this.url=this.url.replace(k,"https:"));h&&h.path&&(h.path=h.path.replace(k,"https:"))},_encode:function(h,k,e){var r={},q;for(q in h)if("declaredClass"!==q){var u=h[q];var v=typeof u;if(null!==u&&void 0!==u&&"function"!==v)if(p.isArray(u)){r[q]=[];var x=u.length;for(v=0;v<x;v++)r[q][v]=this._encode(u[v])}else"object"===
v?u.toJson&&(v=u.toJson(e&&e[q]),"esri.tasks.FeatureSet"===u.declaredClass&&v.spatialReference&&(v.sr=v.spatialReference,delete v.spatialReference),r[q]=k?v:a.toJson(v)):r[q]=u}return r},_successHandler:function(h,k,e,r){k&&this[k].apply(this,h);e&&e.apply(null,h);r&&n._resDfd(r,h)},_errorHandler:function(h,k,e){this.onError(h);k&&k(h);e&&e.errback(h)},setNormalization:function(h){this.normalization=h},onError:function(){}});return g.Task=B})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(B,p,a,d,g,n){B=B([d],{declaredClass:"esri.Evented",registerConnectEvents:function(){var m=this.constructor,f=this.constructor._meta.parents,h=[{}],k={},e,r=function(u,v){p.isArray(u)||(u=[u]);for(var x=0;x<u.length;x++){var z=u[x];z._meta&&z._meta.parents&&r(z._meta.parents,v);z.prototype._eventMap&&v.push(p.mixin({},z.prototype._eventMap))}return v};if(!m._onMap){r(f,h);h.push(this._eventMap);f=p.mixin.apply(this,h);for(q in this)/^on\w/.test(q)&&p.isFunction(this[q])&&(h=this._hyphenLower(q).toLowerCase(),
f[h]||(k[h]={method:q}));for(e in f){var q=this._onCamelCase(e);k[e]={method:q,argKeys:f[e]}}m._onMap=k;return m._onMap}},on:function(m,f){if(-1<m.indexOf(",")){for(var h=m.split(/\s*,\s*/),k=h.length,e=[];k--;)e.push(this.on(h[k],f));e.remove=function(){for(var u=0;u<e.length;u++)e[u].remove()};return e}h=this.constructor._onMap||this.registerConnectEvents();k="string"==typeof m&&m.toLowerCase();var r=this._onCamelCase(k),q=h&&h[k];return(r=q&&q.method||this[r]&&p.isFunction(this[r])&&r)?q&&p.isArray(q.argKeys)?
(h=this._onArr2Obj(f,h[k].argKeys),a.after(this,r,h,!0)):a.after(this,r,function(u){u=u||{};u.target||(u.target=this);f.call(this,u)},!0):this.inherited(arguments)},emit:function(m,f){var h,k,e=m.toLowerCase();var r=this._onCamelCase(m);var q=this.constructor._onMap||this.registerConnectEvents();r=(k=q&&q[e]&&q[e].method||p.isFunction(this[r])&&r)&&this[k];k&&q&&q[e]&&this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},q[e].argKeys)(f);f=f||{};f.target||(f.target=this);if(r){var u=
h&&h.length?h:[f];u=r.apply(this,u)}this.inherited(arguments,[m,f]);return u},_onObj2Arr:function(m,f){if(f){var h=this;return function(k){var e,r=[],q=f.length;for(e=0;e<q;e++)r[e]=k[f[e]];m.apply(h,r)}}return m},_onArr2Obj:function(m,f){if(f){var h=this;return function(){var k,e={},r=arguments.length;for(k=0;k<r;k++)e[f[k]]=arguments[k];e.target||(e.target=h);m.call(h,e)}}return m},_hyphenLower:function(m){return m.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(f,h){return(h?"-":"")+f.toLowerCase()})},
_onCamelCase:function(m){return"on"+m.substr(0,1).toUpperCase()+m.substr(1).replace(/\-([a-z])/g,function(f,h){return h.toUpperCase()})}});return n.Evented=B})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(B,p,a,d,g,n,m,f,h,k,e,r){B=B(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(q,
u){if(q){p.mixin(this,q);var v=this.features=this.features||[],x=q.spatialReference;x=this.spatialReference=e.createInstance(f.simpleConstructor,x);var z=e.getGeometryType(q.geometryType);this.geometryType=q.geometryType;q.fields&&(this.fields=q.fields);var A=e.supportsLazyUnquantization(this.geometryType),y=e.unquantizeFunction(this.geometryType,this.transform),c=!!(u&&A&&y),b=z&&(c?z.accessorConstructor:z.simpleConstructor);a.forEach(v,function(l,t){var w=e.createInstance(m.simpleConstructor),C=
l.geometry;if(z&&C){var D=w.geometry=e.createInstance(b,c?null:C);D.setSpatialReference(C.spatialReference?e.createInstance(f.simpleConstructor,C.spatialReference):x);c&&D.setupLazyUnquantization(y,C)}w.symbol=l.symbol?r.fromJson(l.symbol):null;w.attributes=l.attributes;v[t]=w});c||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(q){var u={};this.displayFieldName&&(u.displayFieldName=this.displayFieldName);this.fields&&
(u.fields=this.fields);this.spatialReference?u.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(u.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(u.geometryType=e.getJsonType(this.features[0].geometry)),u.features=h._encodeGraphics(this.features,q));u.geometryType=u.geometryType||this.geometryType;u.exceededTransferLimit=this.exceededTransferLimit;u.transform=this.transform;return n.fixJson(u)},
_hydrate:function(){e.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(q){if(!this.geometryType)return this.transform=null,this;var u=q.translate[0],v=q.translate[1],x=q.scale[0],z=q.scale[1],A=this.features,y=function(t,w,C){var D,E=[];var F=0;for(D=t.length;F<D;F++){var G=t[F];if(0<F){var H=w(G[0]);G=C(G[1]);if(H!==M||G!==X){E.push([H-M,G-X]);var M=H;var X=G}}else M=w(G[0]),X=C(G[1]),E.push([M,X])}return 0<E.length?E:null},c=function(t,w,C){if("esriGeometryPoint"===
t)return function(D){D.x=w(D.x);D.y=C(D.y);return D};if("esriGeometryPolyline"===t||"esriGeometryPolygon"===t)return function(D){var E;var F=D.rings||D.paths;var G=[];var H=0;for(E=F.length;H<E;H++){var M=F[H];(M=y(M,w,C))&&G.push(M)}return 0<G.length?(D.rings?D.rings=G:D.paths=G,D):null};if("esriGeometryMultipoint"===t)return function(D){var E=y(D.points,w,C);return 0<E.length?(D.points=E,D):null};if("esriGeometryEnvelope"===t)return function(D){return D}}(this.geometryType,function(t){return Math.round((t-
u)/x)},function(t){return Math.round((v-t)/z)}),b;var l=0;for(b=A.length;l<b;l++)A[l].geometry&&(c(A[l].geometry)||A[l].setGeometry(null));this.transform=q;return this}});B.createGraphics=function(q){var u=q.geometryType,v=e.createInstance(f.simpleConstructor,q.spatialReference),x=e.getGeometryType(u).accessorConstructor,z=e.unquantizeFunction(u,q.transform);return a.map(q.features,function(A,y){var c=e.createInstance(m.simpleConstructor),b=A.geometry;if(b){var l=c.geometry=e.createInstance(x);l.setSpatialReference(v);
l.setupLazyUnquantization(z,b)}c.attributes=A.attributes;return c})};B.createPolygon=function(q,u,v){if(q){var x=e.createInstance(k.accessorConstructor);x.setSpatialReference(u);u=e.unquantizeFunction("esriGeometryPolygon",v);x.setupLazyUnquantization(u,q)}return x};p.setObject("tasks.FeatureSet",B,g);return B})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(B,p,a,d,g){a={graphicsExtent:function(n){if(!n||!n.length)return null;
var m=null,f,h=n.length;for(f=0;f<h;f++){var k=n[f].geometry;if(k){var e=k.getExtent();e||"point"!==k.type||null==k.x||null==k.y||(e=new g(k.x,k.y,k.x,k.y,k.spatialReference));e&&(m=m?m.union(e):e)}}return 0>m.getWidth()&&0>m.getHeight()?null:m},getGeometries:function(n){return p.map(n,function(m){return m.geometry})},_encodeGraphics:function(n,m){return p.map(n,function(f,h){var k=f.toJson(),e={};if(k.geometry){var r=m&&m[h];e.geometry=r&&r.toJson()||k.geometry}k.attributes&&(e.attributes=k.attributes);
return e})}};B.mixin(d,a);return a})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(B,p,a,d,g){B=B(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var n={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,
maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},m=this.objectIds,f=this.outFields,h=this.outSpatialReference,k=this.orderByFields;m&&(n.objectIds=m.join(","));f&&(n.outFields=f.join(","));h&&(n.outSR=h.wkid||a.toJson(h.toJson()));k&&(n.orderByFields=k.join(","));n._ts=this._ts;return n}});p.setObject("tasks.RelationshipQuery",B,g);return B})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(B,
p,a,d){B=B(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});p.setObject("tasks.StatisticDefinition",B,d);return B})},"esri/tasks/support/pbfDeps":function(){define(["../../layers/vectorTiles/tasks/operations/pbfQueryUtils","../../layers/vectorTiles/layers/graphics/optimizedFeatures"],
function(B,p){return{pbfQueryUtils:B,optimizedFeatures:p}})},"esri/layers/vectorTiles/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ../../layers/graphics/optimizedFeatures".split(" "),function(B,p,a,d,g,n){function m(b){if(b>=y.length){var l=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");x.error(l)}return y[b]}function f(b){var l,t=l||(l={});t[t.STRING=1]="STRING";t[t.FLOAT=2]="FLOAT";
t[t.DOUBLE=3]="DOUBLE";t[t.SINT32=4]="SINT32";t[t.UINT32=5]="UINT32";t[t.INT64=6]="INT64";t[t.UINT64=7]="UINT64";t[t.SINT64=8]="SINT64";for(t[t.BOOL=9]="BOOL";b.next();)switch(b.tag()){case l.STRING:return b.getString();case l.FLOAT:return b.getFloat();case l.DOUBLE:return b.getDouble();case l.SINT32:return b.getSInt32();case l.UINT32:return b.getUInt32();case l.INT64:return b.getInt64();case l.UINT64:return b.getUInt64();case l.SINT64:return b.getSInt64();case l.BOOL:return b.getBool();default:return b.skip(),
null}return null}function h(b){var l,t=l||(l={});t[t.NAME=1]="NAME";t[t.TYPE=2]="TYPE";t[t.ALIAS=3]="ALIAS";t[t.SQL_TYPE=4]="SQL_TYPE";t[t.DOMAIN=5]="DOMAIN";t[t.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(t={type:z[0]};b.next();)switch(b.tag()){case l.NAME:t.name=b.getString();break;case l.TYPE:t.type=z[b.getEnum()];break;case l.ALIAS:t.alias=b.getString();break;case l.SQL_TYPE:t.sqlType=A[b.getEnum()];break;case l.DOMAIN:b.skip();break;case l.DEFAULT_VALUE:b.skip();break;default:b.skip()}return t}function k(b,
l){var t,w=t||(t={});w[w.ATTRIBUTES=1]="ATTRIBUTES";w[w.GEOMETRY=2]="GEOMETRY";w[w.CENTROID=4]="CENTROID";w=new n.OptimizedFeature;for(var C=0;b.next();)switch(b.tag()){case t.ATTRIBUTES:var D=b.getMessage(),E=l[C++].name;w.attributes[E]=f(D);break;case t.GEOMETRY:D=void 0;E=b.getMessage();var F=D||(D={});F[F.TYPE=1]="TYPE";F[F.LENGTHS=2]="LENGTHS";F[F.COORDS=3]="COORDS";F=new n.OptimizedGeometry;for(var G=F.coords,H=F.lengths;E.next();)switch(E.tag()){case D.LENGTHS:var M=E.getUInt32();for(M=E.pos()+
M;E.pos()<M;)H.push(E.getUInt32());break;case D.COORDS:M=E.getUInt32();M=E.pos()+M;for(var X=0;E.pos()<M;)G[X++]=E.getSInt64();break;default:E.skip()}w.geometry=F;break;case t.CENTROID:D=void 0;E=b.getMessage();F=D||(D={});F[F.TYPE=1]="TYPE";F[F.LENGTHS=2]="LENGTHS";F[F.COORDS=3]="COORDS";F=new n.OptimizedGeometry;for(G=F.coords;E.next();)switch(E.tag()){case D.COORDS:H=E.getUInt32();H=E.pos()+H;for(M=0;E.pos()<H;)G[M++]=E.getSInt64();break;default:E.skip()}w.centroid=F;break;default:b.skip()}return w}
function e(b){var l,t=l||(l={});t[t.X=1]="X";t[t.Y=2]="Y";t[t.M=3]="M";t[t.Z=4]="Z";for(t=[0,0];b.next();)switch(b.tag()){case l.X:t[0]=b.getDouble();break;case l.Y:t[1]=b.getDouble();break;case l.M:t.push(b.getDouble());break;case l.Z:t.push(b.getDouble());break;default:b.skip()}return t}function r(b){var l,t=l||(l={});t[t.X=1]="X";t[t.Y=2]="Y";t[t.M=3]="M";t[t.Z=4]="Z";for(t=[0,0];b.next();)switch(b.tag()){case l.X:t[0]=b.getDouble();break;case l.Y:t[1]=b.getDouble();break;case l.M:t.push(b.getDouble());
break;case l.Z:t.push(b.getDouble());break;default:b.skip()}return t}function q(b){var l,t=l||(l={});t[t.ORIGIN_POSTION=1]="ORIGIN_POSTION";t[t.SCALE=2]="SCALE";t[t.TRANSLATE=3]="TRANSLATE";t=c[0];for(var w,C;b.next();)switch(b.tag()){case l.ORIGIN_POSTION:t=c[b.getEnum()];break;case l.SCALE:w=e(b.getMessage());break;case l.TRANSLATE:C=r(b.getMessage());break;default:b.skip()}return{originPosition:t,scale:w,translate:C}}function u(b){var l,t=l||(l={});t[t.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";t[t.LENGTH_FIELD_NAME=
2]="LENGTH_FIELD_NAME";t[t.UNITS=3]="UNITS";for(t={};b.next();)switch(b.tag()){case l.AREA_FIELD_NAME:t.shapeAreaFieldName=b.getString();break;case l.LENGTH_FIELD_NAME:t.shapeLengthFieldName=b.getString();break;case l.UNITS:t.units=b.getString();break;default:b.skip()}return t}function v(b){var l,t=l||(l={});t[t.WKID=1]="WKID";t[t.LASTEST_WKID=2]="LASTEST_WKID";t[t.VCS_WKID=3]="VCS_WKID";t[t.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";t[t.WKT=5]="WKT";for(t={};b.next();)switch(b.tag()){case l.WKID:t.wkid=
b.getUInt32();break;case l.WKT:t.wkt=b.getString();break;default:b.skip()}return t}Object.defineProperty(p,"__esModule",{value:!0});var x=d.getLogger("esri.tasks.operations.pbfQueryUtils"),z="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),A="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
y=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],c=["upperLeft","lowerLeft"];p.parsePBFFeatureQuery=function(b){try{var l,t=l||(l={});t[t.QUERY_RESULT=2]="QUERY_RESULT";for(var w=new g(new Uint8Array(b),new DataView(b)),C;w.next();)switch(w.tag()){case l.QUERY_RESULT:b=void 0;var D=w.getMessage(),E=b||(b={});E[E.FEATURE_RESULT=1]="FEATURE_RESULT";for(t={};D.next();)switch(D.tag()){case b.FEATURE_RESULT:var F=void 0,G=D.getMessage(),H=F||(F={});H[H.OBJECT_ID_NAME=
1]="OBJECT_ID_NAME";H[H.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";H[H.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";H[H.GEOHASH_NAME=4]="GEOHASH_NAME";H[H.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";H[H.SERVER_GENS=6]="SERVER_GENS";H[H.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";H[H.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";H[H.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";H[H.HAS_Z=10]="HAS_Z";H[H.HAS_M=11]="HAS_M";H[H.TRANSFORM=12]="TRANSFORM";H[H.FIELDS=13]="FIELDS";H[H.FEATURES=15]="FEATURES";var M=new n.OptimizedFeatureSet;
for(M.geometryType=m(0);G.next();)switch(G.tag()){case F.OBJECT_ID_NAME:M.objectIdFieldName=G.getString();break;case F.GLOBAL_ID_NAME:M.globalIdFieldName=G.getString();break;case F.GEOHASH_NAME:M.geohashFieldName=G.getString();break;case F.GEOMETRY_PROPERTIES:M.geometryProperties=u(G.getMessage());break;case F.GEOMETRY_TYPE:M.geometryType=m(G.getEnum());break;case F.SPATIAL_REFERENCE:M.spatialReference=v(G.getMessage());break;case F.HAS_Z:M.hasZ=G.getBool();break;case F.HAS_M:M.hasM=G.getBool();break;
case F.TRANSFORM:var X=G.getMessage();M.transform=q(X);break;case F.EXCEEDED_TRANSFER_LIMIT:var W=G.getBool();M.exceededTransferLimit=W;break;case F.FIELDS:var T=G.getMessage();M.fields.push(h(T));break;case F.FEATURES:var K=G.getMessage();M.features.push(k(K,M.fields));break;default:G.skip()}var O=M;t.featureResult=O;break;default:D.skip()}C=t;break;default:w.skip()}return C.featureResult}catch(N){return l=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:N}),x.error(l),
new n.OptimizedFeatureSet}}})},"esri/layers/vectorTiles/layers/graphics/optimizedFeatures":function(){define(["require","exports","../../core/Error","../../core/Logger"],function(B,p,a,d){function g(N,Y){return Math.round((Y-N.translate[0])/N.scale[0])}function n(N,Y){return Math.round((N.translate[1]-Y)/N.scale[1])}function m(N,Y){return Y*N.scale[0]+N.translate[0]}function f(N,Y){return N.translate[1]-Y*N.scale[1]}function h(N){N=N.coords;return{x:N[0],y:N[1]}}function k(N){var Y=new K;Y.coords[0]=
N.x;Y.coords[1]=N.y;return Y}function e(N){N=N.coords;return{x:N[0],y:N[1],z:N[2]}}function r(N){var Y=new K;Y.coords[0]=N.x;Y.coords[1]=N.y;Y.coords[2]=N.z;return Y}function q(N){N=N.coords;return{x:N[0],y:N[1],m:N[2]}}function u(N){var Y=new K;Y.coords[0]=N.x;Y.coords[1]=N.y;Y.coords[2]=N.m;return Y}function v(N){N=N.coords;return{x:N[0],y:N[1],z:N[2],m:N[3]}}function x(N){var Y=new K;Y.coords[0]=N.x;Y.coords[1]=N.y;Y.coords[2]=N.z;Y.coords[3]=N.m;return Y}function z(N,Y,P){for(var L=Y?P?4:3:P?
3:2,Q=[],ca=0;ca<N.coords.length;ca+=L){for(var ha=[],ja=0;ja<L;ja++)ha.push(N.coords[ca+ja]);Q.push(ha)}return Y?P?{points:Q,hasZ:Y,hasM:P}:{points:Q,hasZ:Y}:P?{points:Q,hasM:P}:{points:Q}}function A(N,Y,P){var L=Y?P?4:3:P?3:2,Q=N.coords,ca=[],ha=0,ja=0;for(N=N.lengths;ja<N.length;ja++){for(var ma=N[ja],R=[],fa=0;fa<ma;fa++){for(var ka=[],qa=0;qa<L;qa++)ka.push(Q[ha++]);R.push(ka)}ca.push(R)}return Y?P?{paths:ca,hasZ:Y,hasM:P}:{paths:ca,hasZ:Y}:P?{paths:ca,hasM:P}:{paths:ca}}function y(N,Y,P){var L=
Y?P?4:3:P?3:2,Q=N.coords,ca=[],ha=0,ja=0;for(N=N.lengths;ja<N.length;ja++){for(var ma=N[ja],R=[],fa=0;fa<ma;fa++){for(var ka=[],qa=0;qa<L;qa++)ka.push(Q[ha++]);R.push(ka)}ca.push(R)}return Y?P?{rings:ca,hasZ:Y,hasM:P}:{rings:ca,hasZ:Y}:P?{rings:ca,hasM:P}:{rings:ca}}function c(N,Y,P,L){if(!Y)return[];switch(Y){case "esriGeometryPoint":Y=k;L&&P?Y=x:L?Y=r:P&&(Y=u);P=[];for(L=0;L<N.length;L++){var Q=N[L],ca=Q.geometry;Q=Q.attributes;ca=ca?Y(ca):void 0;P.push(new O(ca,Q))}return P;case "esriGeometryMultipoint":Y=
P?L?4:3:L?3:2;P=[];for(L=0;L<N.length;L++){ca=N[L];var ha=ca.geometry;ca=ca.attributes;Q=void 0;if(ha){Q=new K;Q.lengths[0]=ha.points.length;var ja=Q.coords,ma=0,R=0;for(ha=ha.points;R<ha.length;R++)for(var fa=ha[R],ka=0;ka<Y;ka++)ja[ma++]=fa[ka]}P.push(new O(Q,ca))}return P;case "esriGeometryPolyline":Y=P?L?4:3:L?3:2;P=[];for(L=0;L<N.length;L++){ca=N[L];fa=ca.geometry;ca=ca.attributes;Q=void 0;if(fa)for(Q=new K,ja=Q.lengths,ma=Q.coords,ha=R=0,fa=fa.paths;ha<fa.length;ha++){ka=fa[ha];for(var qa=0,
na=ka;qa<na.length;qa++)for(var ia=na[qa],ea=0;ea<Y;ea++)ma[R++]=ia[ea];ja.push(ka.length)}P.push(new O(Q,ca))}return P;case "esriGeometryPolygon":Y=P?L?4:3:L?3:2;P=[];for(L=0;L<N.length;L++){Q=N[L];ka=Q.geometry;ca=Q.centroid;Q=Q.attributes;ja=void 0;if(ka)for(ja=new K,ma=ja.lengths,R=ja.coords,fa=ha=0,ka=ka.rings;fa<ka.length;fa++){qa=ka[fa];na=0;for(ia=qa;na<ia.length;na++){ea=ia[na];for(var oa=0;oa<Y;oa++)R[ha++]=ea[oa]}ma.push(qa.length)}ca?P.push(new O(ja,Q,k(ca))):P.push(new O(ja,Q))}return P;
default:return G.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+Y)),[]}}function b(N,Y,P,L,Q,ca){Q=H[Q];var ha=Y.coords;Y=Y.lengths;var ja=P?L?4:3:L?3:2;P=P?L?W:X:L?X:M;N.lengths.length=0;N.coords.length=0;if(!ha.length)return N;if(!Y.length)return P(N.coords,ha,0,0,g(ca,ha[0]),n(ca,ha[1])),N.lengths.length=0,N.coords.length=ja,N;for(var ma,R,fa,ka=0,qa,na=0,ia=0;ia<Y.length;ia++){var ea=Y[ia];if(!(ea<Q)){var oa=0;qa=na;R=L=g(ca,ha[ka]);fa=ma=n(ca,ha[ka+
1]);P(N.coords,ha,qa,ka,R,fa);oa++;ka+=ja;qa+=ja;for(var ta=1;ta<ea;ta++,ka+=ja)if(R=g(ca,ha[ka]),fa=n(ca,ha[ka+1]),R!==L||fa!==ma)P(N.coords,ha,qa,ka,R-L,fa-ma),qa+=ja,oa++,L=R,ma=fa;oa>=Q&&(N.lengths.push(oa),na=qa)}}N.coords.length=na;return N.coords.length?N:null}function l(N,Y,P,L,Q){var ca=Y.coords;Y=Y.lengths;var ha=P?L?W:X:L?X:M;P=P?L?4:3:L?3:2;if(!ca.length)return N.lengths.length=0,N.coords.length=0,N;if(!Y.length)return ha(N.coords,ca,0,0,m(Q,ca[0]),f(Q,ca[1])),N.lengths.length=0,N.coords.length=
P,N;var ja=Q.scale;L=ja[0];ja=ja[1];for(var ma=0,R=0;R<Y.length;R++){var fa=Y[R];N.lengths[R]=fa;var ka=m(Q,ca[ma]),qa=f(Q,ca[ma+1]);ha(N.coords,ca,ma,ma,ka,qa);ma+=P;for(var na=1;na<fa;na++,ma+=P)ka+=ca[ma]*L,qa-=ca[ma+1]*ja,ha(N.coords,ca,ma,ma,ka,qa)}N.lengths.length=Y.length;N.coords.length=ca.length;return N}function t(N,Y,P,L,Q,ca){ca=Q?ca?4:3:ca?3:2;var ha=P,ja=P+ca,ma=0,R=0,fa=P=0,ka=0,qa=0;for(--L;qa<L;qa++,ha+=ca,ja+=ca){var na=Y[ha],ia=Y[ha+1],ea=Y[ha+2],oa=Y[ja],ta=Y[ja+1],ra=Y[ja+2],
aa=na*ta-oa*ia;fa+=aa;ma+=(na+oa)*aa;R+=(ia+ta)*aa;Q&&(aa=na*ra-oa*ea,P+=(ea+ra)*aa,ka+=aa);na<N[0]&&(N[0]=na);na>N[1]&&(N[1]=na);ia<N[2]&&(N[2]=ia);ia>N[3]&&(N[3]=ia);Q&&(ea<N[4]&&(N[4]=ea),ea>N[5]&&(N[5]=ea))}0<fa&&(fa*=-1);0<ka&&(ka*=-1);if(!fa)return null;N=[ma,R,.5*fa];Q&&(N[3]=P,N[4]=.5*ka);return N}function w(N,Y,P,L,Q){Q=L?Q?4:3:Q?3:2;for(var ca=Y,ha=Y+Q,ja=0,ma=0,R=0,fa=0,ka=0,qa=P-1;ka<qa;ka++,ca+=Q,ha+=Q){var na=N[ca],ia=N[ca+1],ea=N[ca+2],oa=N[ha],ta=N[ha+1],ra=N[ha+2],aa=L?D(na,ia,ea,
oa,ta,ra):C(na,ia,oa,ta);aa&&(ja+=aa,L?(na=F(na,ia,ea,oa,ta,ra),ma+=aa*na[0],R+=aa*na[1],fa+=aa*na[2]):(na=E(na,ia,oa,ta),ma+=aa*na[0],R+=aa*na[1]))}return 0<ja?L?[ma/ja,R/ja,fa/ja]:[ma/ja,R/ja]:0<P?L?[N[Y],N[Y+1],N[Y+2]]:[N[Y],N[Y+1]]:null}function C(N,Y,P,L){N=P-N;Y=L-Y;return Math.sqrt(N*N+Y*Y)}function D(N,Y,P,L,Q,ca){N=L-N;Y=Q-Y;P=ca-P;return Math.sqrt(N*N+Y*Y+P*P)}function E(N,Y,P,L){return[N+.5*(P-N),Y+.5*(L-Y)]}function F(N,Y,P,L,Q,ca){return[N+.5*(L-N),Y+.5*(Q-Y),P+.5*(ca-P)]}Object.defineProperty(p,
"__esModule",{value:!0});var G=d.getLogger("esri.tasks.support.optimizedFeatureSet"),H={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},M=function(N,Y,P,L,Q,ca){N[P]=Q;N[P+1]=ca},X=function(N,Y,P,L,Q,ca){N[P]=Q;N[P+1]=ca;N[P+2]=Y[L+2]},W=function(N,Y,P,L,Q,ca){N[P]=Q;N[P+1]=ca;N[P+2]=Y[L+2];N[P+3]=Y[L+3]};p.quantizeX=g;p.quantizeY=n;p.hydrateX=m;p.hydrateY=f;var T=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=
this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();p.OptimizedFeatureSet=T;var K=function(){return function(N,Y){void 0===N&&(N=[]);void 0===Y&&(Y=[]);this.lengths=N;this.coords=Y}}();p.OptimizedGeometry=K;var O=function(){return function(N,Y,P){void 0===N&&(N=null);void 0===Y&&(Y={});this.geometry=N;this.attributes=Y;P&&(this.centroid=P)}}();p.OptimizedFeature=O;p.convertToPoint=
function(N,Y,P){return Y?P?v(N):e(N):P?q(N):h(N)};p.convertToMultipoint=z;p.convertToPolyline=A;p.convertToPolygon=y;p.convertFromFeatures=c;p.convertToFeatureSet=function(N){var Y=[],P=N.objectIdFieldName,L=N.spatialReference,Q=N.transform,ca=N.fields,ha=N.hasM,ja=N.hasZ,ma=N.features,R=N.geometryType;N=N.exceededTransferLimit;switch(R){case "esriGeometryPoint":Y=h;ha&&ja?Y=v:ha?Y=e:ja&&(Y=q);for(var fa=[],ka=0;ka<ma.length;ka++){var qa=ma[ka],na=qa.geometry;qa=qa.attributes;na=na?Y(na):null;fa.push({attributes:qa,
geometry:na})}Y=fa;break;case "esriGeometryMultipoint":Y=[];for(fa=0;fa<ma.length;fa++)na=ma[fa],ka=na.geometry,na=na.attributes,qa=void 0,ka&&(qa=z(ka,ja,ha)),Y.push({attributes:na,geometry:qa});break;case "esriGeometryPolyline":Y=[];for(fa=0;fa<ma.length;fa++)na=ma[fa],ka=na.geometry,na=na.attributes,qa=void 0,ka&&(qa=A(ka,ja,ha)),Y.push({attributes:na,geometry:qa});break;case "esriGeometryPolygon":Y=[];for(fa=0;fa<ma.length;fa++){qa=ma[fa];na=qa.geometry;ka=qa.attributes;var ia=qa.centroid;qa=
void 0;na&&(qa=y(na,ja,ha));ia?(na=h(ia),Y.push({attributes:ka,centroid:na,geometry:qa})):Y.push({attributes:ka,geometry:qa})}break;default:G.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+R))}P={features:Y,fields:ca,geometryType:R,objectIdFieldName:P,spatialReference:L};Q&&(P.transform=Q);N&&(P.exceededTransferLimit=N);ha&&(P.hasM=ha);ja&&(P.hasZ=ja);return P};p.convertFromFeatureSet=function(N){var Y=new T,P=N.hasM,L=N.hasZ,Q=N.features,ca=N.objectIdFieldName,
ha=N.spatialReference,ja=N.geometryType,ma=N.exceededTransferLimit,R=N.transform;Y.fields=N.fields;Y.geometryType=ja;Y.objectIdFieldName=ca;Y.spatialReference=ha;Y.features=c(Q,ja,L,P);ma&&(Y.exceededTransferLimit=ma);P&&(Y.hasM=P);L&&(Y.hasZ=L);R&&(Y.transform=R);return Y};p.hydrateOptimizedFeatureSet=function(N){var Y=N.transform,P=N.hasM,L=N.hasZ;if(!Y)return N;for(var Q=0,ca=N.features;Q<ca.length;Q++){var ha=ca[Q];l(ha.geometry,ha.geometry,P,L,Y);ha.centroid&&l(ha.centroid,ha.centroid,P,L,Y)}N.transform=
null;return N};p.quantizeOptimizedFeatureSet=function(N,Y){var P=Y.geometryType,L=Y.features,Q=Y.hasM,ca=Y.hasZ;if("esriGeometryEnvelope"===P)return G.error(new a("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+P+'" is not supported')),Y;if(!N)return Y;for(var ha=0;ha<L.length;ha++){var ja=L[ha],ma=new O(new K,ja.attributes);b(ma.geometry,ja.geometry,Q,ca,P,N);ja.centroid&&(ma.centroid=new K,b(ma.centroid,ja.centroid,Q,ca,"esriGeometryPoint",N));L[ha]=ma}Y.transform=N;
return Y};p.quantizeOptimizedGeometry=b;p.quantizeOptimizedGeometryRemoveCollinear=function(N,Y,P,L,Q,ca){Q=H[Q];var ha=Y.coords;Y=Y.lengths;var ja=P?L?4:3:L?3:2;P=P?L?W:X:L?X:M;N.lengths.length=0;N.coords.length=0;if(!ha.length)return N;if(!Y.length)return P(N.coords,ha,0,0,g(ca,ha[0]),n(ca,ha[1])),N.lengths.length=0,N.coords.length=ja,N;for(var ma,R,fa,ka=0,qa,na=0,ia=0;ia<Y.length;ia++){var ea=Y[ia];if(!(ea<Q)){var oa=0;qa=na;L=ma=g(ca,ha[ka]);fa=R=n(ca,ha[ka+1]);P(N.coords,ha,qa,ka,L,fa);oa++;
ka+=ja;for(var ta=!1,ra=0,aa=0,da=1;da<ea;da++,ka+=ja)if(L=g(ca,ha[ka]),fa=n(ca,ha[ka+1]),L!==ma||fa!==R)ma=L-ma,R=fa-R,ta&&(0===ra&&0===ma||0===aa&&0===R)?(ra+=ma,aa+=R):(ta=!0,ra=ma,aa=R,qa+=ja,oa++),P(N.coords,ha,qa,ka,ra,aa),ma=L,R=fa;ta&&(qa+=ja,P(N.coords,ha,qa,ka,ra,aa));oa>=Q&&(N.lengths.push(oa),na=qa)}}N.coords.length=na;return N.coords.length?N:null};p.getBoundsOptimizedGeometry=function(N,Y,P,L){P=P?L?4:3:L?3:2;Y=Y.coords;for(var Q=L=Number.POSITIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,
ha=Number.NEGATIVE_INFINITY,ja=0;ja<Y.length;ja+=P){var ma=Y[ja],R=Y[ja+1];L=Math.min(L,ma);ca=Math.max(ca,ma);Q=Math.min(Q,R);ha=Math.max(ha,R)}N[0]=L;N[1]=Q;N[2]=ca;N[3]=ha;return N};p.getQuantizedBoundsOptimizedGeometry=function(N,Y,P,L){P=P?L?4:3:L?3:2;L=Y.coords;var Q=Number.POSITIVE_INFINITY,ca=Number.POSITIVE_INFINITY,ha=Number.NEGATIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,ma=0,R=0;for(Y=Y.lengths;R<Y.length;R++){var fa=Y[R],ka=L[ma],qa=L[ma+1];Q=Math.min(ka,Q);ca=Math.min(qa,ca);ha=Math.max(ka,
ha);ja=Math.max(qa,ja);ma+=P;for(var na=1;na<fa;na++,ma+=P){var ia=L[ma],ea=L[ma+1];ka+=ia;qa+=ea;0>ia&&(Q=Math.min(Q,ka));0<ia&&(ha=Math.max(ha,ka));0>ea?ca=Math.min(ca,qa):0<ea&&(ja=Math.max(ja,qa))}}N[0]=Q;N[1]=ca;N[2]=ha;N[3]=ja;return N};p.hydrateOptimizedGeometry=l;p.getCentroidOptimizedGeometry=function(N,Y,P,L){if(!Y||!Y.lengths.length)return null;N.lengths.length=0;N.coords.length=0;for(var Q=N.coords,ca=[],ha=P?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],ja=Y.lengths,ma=Y.coords,R=P?L?4:3:L?3:2,fa=0,ka=0;ka<ja.length;ka++){var qa=ja[ka],na=t(ha,ma,fa,qa,P,L);na&&ca.push(na);fa+=qa*R}ca.sort(function(ia,ea){var oa=ia[2]-ea[2];0===oa&&P&&(oa=ia[4]-ea[4]);return oa});ca.length&&(R=6*ca[0][2],Q[0]=ca[0][0]/R,Q[1]=ca[0][1]/R,P&&(R=6*ca[0][4],Q[2]=0!==R?ca[0][3]/R:0),Q[0]<ha[0]||
Q[0]>ha[1]||Q[1]<ha[2]||Q[1]>ha[3]||P&&(Q[2]<ha[4]||Q[2]>ha[5]))&&(Q.length=0);if(!Q.length)if(Y=Y.lengths[0]?w(ma,0,ja[0],P,L):null)Q[0]=Y[0],Q[1]=Y[1],P&&2<Y.length&&(Q[2]=Y[2]);else return null;return N};p.lineCentroid=w;p.getLength2D=C;p.getLength3D=D;p.getMidpoint2D=E;p.getMidpoint3D=F})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(B,p,a,d){function g(h,k){h.length=0;k.forEach(function(e){return h.push(e)});
return h}var n=new Set,m=[],f=new Map;return function(){function h(k){var e=this;this._keysToRequests=new Map;this.tileInfoView=null;var r=k.strategy&&"scale-first"!==k.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=k.tileInfoView;this._queues=k.tileServers&&0<k.tileServers.length?k.tileServers.map(function(q){return new a({concurrency:k.concurrency||6,process:function(u){u=e._keysToRequests.get(u);return k.process(u,q)},peeker:r})}):[new a({concurrency:k.concurrency||
6,process:function(q){q=e._keysToRequests.get(q);return k.process(q)},peeker:r})]}Object.defineProperty(h.prototype,"length",{get:function(){return this._queues.reduce(function(k,e){return k+e.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});h.prototype.clear=function(){for(var k=0,e=this._queues;k<e.length;k++)e[k].clear();this._keysToRequests.clear()};h.prototype.find=function(k,
e){for(var r=this,q=0,u=this._queues;q<u.length;q++){var v=u[q].find(function(x){return k(r._keysToRequests.get(x).key)});if(v)return v}};h.prototype.get=function(k){k="string"===typeof k?k:k.id;for(var e=0,r=this._queues;e<r.length;e++){var q=r[e].get(k);if(q)return q}};h.prototype.getRequest=function(k){return this._keysToRequests.get("string"===typeof k?k:k.id)};h.prototype.has=function(k){return"string"===typeof k?this._keysToRequests.has(k):this._keysToRequests.has(k.id)};h.prototype.isOngoing=
function(k){var e="string"===typeof k?k:k.id;return this.has(e)&&this._queues.some(function(r){return r.isOngoing(e)})};h.prototype.pause=function(){for(var k=0,e=this._queues;k<e.length;k++)e[k].pause()};h.prototype.push=function(k){var e=this,r=k.key.id,q=this._queues[k.key.row%this._queues.length].push(r);this._keysToRequests.set(r,k);q.then(function(){e._keysToRequests["delete"](r)});q["catch"](function(){e._keysToRequests["delete"](r)});return q};h.prototype.reset=function(){for(var k=0,e=this._queues;k<
e.length;k++)e[k].reset()};h.prototype.resume=function(){for(var k=0,e=this._queues;k<e.length;k++)e[k].resume()};h.prototype._peekByScaleFirst=function(k){if(!this.state)return k[0];for(var e=this.tileInfoView,r=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,u=0;u<k.length;u++){var v=this._keysToRequests.get(k[u]),x=this.tileInfoView.getTileScale(v.key);f.has(x)||(f.set(x,[]),r=Math.max(x,r),q=Math.min(x,q));f.get(x).push(v.key);n.add(x)}var z=this.state.scale;f.has(z)||(g(m,n),m.sort(),z=m.reduce(function(b,
l,t,w){return Math.abs(l-z)<Math.abs(b-z)?l:b},m[0]));z=Math.min(z,r);z=Math.max(z,q);k=f.get(z);var A=e.getClosestInfoForScale(z),y=A.getColumnForX(this.state.center[0]),c=A.getRowForY(this.state.center[1]);k.sort(function(b,l){var t=A.denormalizeCol(b.col,b.world),w=A.denormalizeCol(l.col,l.world);return Math.sqrt((y-t)*(y-t)+(c-b.row)*(c-b.row))-Math.sqrt((y-w)*(y-w)+(c-l.row)*(c-l.row))});n.clear();f.clear();return k[0].id};h.prototype._peekByCenterFirst=function(k){if(!this.state)return k[0];
for(var e=this.tileInfoView,r=this.state.center,q=[0,0],u=Number.POSITIVE_INFINITY,v=null,x=0;x<k.length;x++){var z=this._keysToRequests.get(k[x]);e.getTileCoords(q,z.key);var A=d.distance(q,r);A<u&&(u=A,v=z.key)}return v.id};return h}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(B,p,a,d,g){return function(){function n(m){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=
null;this.concurrency=1;this.ordered=!1;m.concurrency&&(this.concurrency=m.concurrency);this.ordered=!!m.ordered;this._queue=new d(m.peeker?{peeker:m.peeker}:void 0);this.process=m.process}Object.defineProperty(n.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});n.prototype.clear=function(){this._queue.clear();var m=[];this._processingItems.forEach(function(f){return m.push(f.resultPromise)});this._processingItems.clear();m.forEach(function(f){return f.cancel()});
m.length=0;this._apiPromises.forEach(function(f){return m.push(f)});this._apiPromises.clear();m.forEach(function(f){return f.cancel()});this._cancelNext()};n.prototype.find=function(m,f){var h=this,k=void 0;this._apiPromises.forEach(function(e,r){m.call(f,r)&&(k=h._apiPromises.get(r).promise)});return k};n.prototype.get=function(m){return(m=this._apiPromises.get(m))&&m.promise||void 0};n.prototype.isOngoing=function(m){return this._processingItems.has(m)};n.prototype.has=function(m){return this._apiPromises.has(m)};
n.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};n.prototype.push=function(m){var f=this;if(this._apiPromises.has(m))return this._apiPromises.get(m).promise;var h=new a(function(k){var e=f._processingItems.get(m);e?e.resultPromise.cancel(k):(f._remove(m),f._scheduleNext())});this._add(m,h);this._scheduleNext();return h.promise};n.prototype.reset=function(){var m=[];this._processingItems.forEach(function(k){return m.push(k)});this._processingItems.clear();for(var f=
0;f<m.length;f++){var h=m[f];h.resultPromise.isFulfilled()?this._processReset(h):(h.isReset=!0,h.resultPromise.cancel())}};n.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};n.prototype._scheduleNext=function(){var m=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=g.schedule(function(){m._scheduledNextHandle=null;m._next()}))};n.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
n.prototype._processResult=function(m,f){this._remove(m.item);this._scheduleNext();m.dfd.resolve(f)};n.prototype._processError=function(m,f){m.isReset?this._processReset(m):(this._remove(m.item),this._scheduleNext(),m.dfd.reject(f))};n.prototype._processReset=function(m){this._remove(m.item);this._add(m.item,m.dfd);this._scheduleNext()};n.prototype._processOrdered=function(m,f){var h=this,k=!1;if(m.isReset)this._processReset(m);else{m.result=f;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(u){k||
(u.result?h._itemsToProcess.push(u):k=!0)});for(var e=0,r=this._itemsToProcess;e<r.length;e++){var q=r[e];!1===q.result.ok?this._processError(q,q.result.error):this._processResult(q,q.result.value)}this._itemsToProcess.length=0}};n.prototype._process=function(m){var f=this;if(null!=m){var h=this._apiPromises.get(m),k=this.process(m);if(k&&"function"===typeof k.then){var e={item:m,resultPromise:k,result:null,dfd:h,isReset:!1};this._processingItems.set(m,e);this.ordered?k.then(function(r){return f._processOrdered(e,
{ok:!0,value:r})},function(r){return f._processOrdered(e,{ok:!1,error:r})}):k.then(function(r){return f._processResult(e,r)},function(r){return f._processError(e,r)})}else h.resolve(k),this._remove(m)}};n.prototype._add=function(m,f){this._apiPromises.set(m,f);this._queue.push(m)};n.prototype._remove=function(m){this._queue.remove(m);this._apiPromises["delete"](m);this._processingItems["delete"](m)};n.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),
this._scheduledNextHandle=null)};return n}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(B,p){return function(){function a(d){this._items=[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;d&&d.peeker&&(this._peeker=d.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=
function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(d){this.contains(d)||this._add(d)};a.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};a.prototype.pop=function(){if(0!==this._length){var d=this.peek();this._remove(d);return d}};a.prototype.remove=function(d){this.contains(d)&&this._remove(d)};a.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};a.prototype._remove=function(d){this._itemSet["delete"](d);
this._items.splice(this._items.indexOf(d),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(B,p,a,d,g){var n=new g(0,0,0,0),m=new Map,f=[],h=[];return function(){function k(e){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=e.acquireTile;
this.releaseTile=e.releaseTile;this.tileInfoView=e.tileInfoView;e.cachePolicy&&(this.cachePolicy=e.cachePolicy);e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy);null!=e.buffer&&(this.buffer=e.buffer)}k.prototype.destroy=function(){this.clear()};k.prototype.update=function(e){var r=this,q=this.tileIndex,u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(u){var v=u.spans,x=u.lodInfo,z=x.level,A=e.state.resolution,y=!e.stationary&&A>this._previousResolution;this._previousResolution=
A;q.forEach(function(E){return E.visible=!0});this.tiles.length=0;m.clear();var c=0,b=0;if(0<v.length)for(var l=0;l<v.length;l++){e=v[l];for(var t=e.row,w=e.colTo,C=e.colFrom;C<=w;C++)c++,e=n.set(z,t,x.normalizeCol(C),x.getWorldForColumn(C)).id,q.has(e)?(A=q.get(e),A.status!==d.TileStatus.INITIALIZED&&b++,A.attached?m.set(e,A):A.attached||y||this._addParentTile(e,m)):(A=this.acquireTile(n),this.tileIndex.set(e,A),y||this._addParentTile(e,m))}var D=b===c;h.length=0;f.length=0;q.forEach(function(E,
F){n.set(F);if(!m.has(F)){var G=r.tileInfoView.intersects(u,n);!G||!y&&D?"purge"===r.cachePolicy&&E.status!==d.TileStatus.MODIFIED&&E.status!==d.TileStatus.READY?f.push(F):(n.level>z||!G)&&f.push(F):E.attached?h.push(F):n.level>z&&f.push(F)}});for(v=0;v<h.length;v++)e=h[v],(A=q.get(e))&&A.attached&&m.set(e,A);for(v=0;v<f.length;v++)e=f[v],A=q.get(e),this.releaseTile(A),q["delete"](e);m.forEach(function(E){return r.tiles.push(E)});q.forEach(function(E){m.has(E.key.id)||(E.visible=!1)});h.length=0;
f.length=0;m.clear();return D}};k.prototype.clear=function(){var e=this,r=this.tileIndex;r.forEach(function(q){e.releaseTile(q)});r.clear()};k.prototype._addParentTile=function(e,r){for(var q=e,u=null;;){q=this.tileInfoView.getTileParentId(q);if(!q)break;if(this.tileIndex.has(q)&&(u=this.tileIndex.get(q))&&u.attached){r.has(u.key.id)||r.set(u.key.id,u);break}}};return k}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"*now":function(B){B(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(B,p){return{WebGLRenderer:B,OnDemandDrillMode:p}});