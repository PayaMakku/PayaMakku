// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.40/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l){function m(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var n=D(g,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(p,t,r,y,x){h.isObject(p)?(h.mixin(this,p),this.spatialReference&&(this.spatialReference=
l.createSpatialReference(this.spatialReference))):this.update(p,t,r,y,x);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new c((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new c(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new c(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new c(this.xmin,
this.ymin,this.spatialReference)},getBottomRight:function(){return new c(this.xmax,this.ymin,this.spatialReference)},centerAt:function(p){var t=this.getCenter(),r=p.x-t.x;p=p.y-t.y;return new n(this.xmin+r,this.ymin+p,this.xmax+r,this.ymax+p,this.spatialReference)},update:function(p,t,r,y,x){this.xmin=p;this.ymin=t;this.xmax=r;this.ymax=y;this.spatialReference=x;this.clearCache();return this},offset:function(p,t){return new n(this.xmin+p,this.ymin+t,this.xmax+p,this.ymax+t,this.spatialReference)},
expand:function(p){var t=(1-p)/2;p=this.getWidth()*t;t*=this.getHeight();return new n(this.xmin+p,this.ymin+t,this.xmax-p,this.ymax-t,this.spatialReference)},intersects:function(p){if(!p)return!1;var t=p.type,r=this.spatialReference,y=p.spatialReference;r&&y&&!r.equals(y)&&r._canProject(y)&&(p=r.isWebMercator()?e.geographicToWebMercator(p):e.webMercatorToGeographic(p,!0));switch(t){case "point":return this.contains(p);case "multipoint":return this._intersectsMultipoint(p);case "extent":return this._intersectsExtent(p);
case "polygon":return this._intersectsPolygon(p);case "polyline":return this._intersectsPolyline(p)}},normalize:function(){var p=this._normalize(!1,!0);a.isArray(p)||(p=[p]);return p},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var p=this.spatialReference,t=p&&p._getInfo(),r=[],y=0;if(t&&this._isOutOfBounds(t)){var x=this;y=x.xmin;var z=x.ymin,v=x.ymax,w=t.valid[0],u=t.valid[1];x.getWidth()>2*u&&(x=x.getCenter(),x=new n(x.x-u,z,x.x+u,v,new f(p.toJson())));y=x.xmin-
y;var A=this._normalizeX(x.xmin,t);t=this._normalizeX(x.xmax,t);A.frameId===t.frameId?r.push(new n(A.x,z,t.x,v,new f(p.toJson()))):r.push(new n(A.x,z,u,v,new f(p.toJson())),new n(w,z,t.x,v,new f(p.toJson())))}else r.push(this.getExtent());return{extents:r,marginLeft:y}},_intersectsMultipoint:function(p){var t=p.points.length,r;for(r=0;r<t;r++)if(this.contains(p.getPoint(r)))return!0;return!1},_intersectsExtent:function(p){var t,r,y=!1;if(this.xmin<=p.xmin){var x=p.xmin;this.xmax<x?y=!0:t=Math.min(this.xmax,
p.xmax)-x}else x=this.xmin,p.xmax<x?y=!0:t=Math.min(this.xmax,p.xmax)-x;if(this.ymin<=p.ymin){var z=p.ymin;this.ymax<z?y=!0:r=Math.min(this.ymax,p.ymax)-z}else z=this.ymin,p.ymax<z?y=!0:r=Math.min(this.ymax,p.ymax)-z;return y?null:new n(x,z,x+t,z+r,this.spatialReference)},_intersectsPolygon:function(p){var t=[this.xmin,this.ymax],r=[this.xmax,this.ymax],y=[this.xmin,this.ymin],x=[this.xmax,this.ymin],z=[t,r,y,x];t=[[y,t],[t,r],[r,x],[x,y]];y=p.rings;x=y.length;var v=new c(0,0,this.spatialReference);
var w=z.length;for(r=0;r<w;r++)if(v.update(z[r][0],z[r][1]),p.contains(v))return!0;v.setSpatialReference(p.spatialReference);for(r=0;r<x;r++)if(z=y[r],w=z.length){var u=z[0];v.update(u[0],u[1]);if(this.contains(v))return!0;for(p=1;p<w;p++){var A=z[p];v.update(A[0],A[1]);if(this.contains(v)||this._intersectsLine([u,A],t))return!0;u=A}}return!1},_intersectsPolyline:function(p){var t=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],r,y=p.paths,x=y.length,z,v=new c(0,0,p.spatialReference);for(p=0;p<x;p++){var w=y[p];if(z=w.length){var u=w[0];v.update(u[0],u[1]);if(this.contains(v))return!0;for(r=1;r<z;r++){var A=w[r];v.update(A[0],A[1]);if(this.contains(v)||this._intersectsLine([u,A],t))return!0;u=A}}}return!1},_intersectsLine:function(p,t){var r=k._getLineIntersection2,y,x=t.length;for(y=0;y<x;y++)if(r(p,t[y]))return!0;return!1},contains:function(p){if(!p)return!1;var t=
p.type;if("point"===t){var r=this.spatialReference,y=p.spatialReference;t=p.x;p=p.y;r&&y&&!r.equals(y)&&r._canProject(y)&&(p=r.isWebMercator()?c.lngLatToXY(t,p):c.xyToLngLat(t,p,!0),t=p[0],p=p[1]);return t>=this.xmin&&t<=this.xmax&&p>=this.ymin&&p<=this.ymax}return"extent"===t?this._containsExtent(p):!1},_containsExtent:function(p){var t=p.xmin,r=p.ymin,y=p.xmax,x=p.ymax,z=p.spatialReference;p=new c(t,r,z);t=new c(t,x,z);x=new c(y,x,z);r=new c(y,r,z);return this.contains(p)&&this.contains(t)&&this.contains(x)&&
this.contains(r)?!0:!1},union:function(p){return new n(Math.min(this.xmin,p.xmin),Math.min(this.ymin,p.ymin),Math.max(this.xmax,p.xmax),Math.max(this.ymax,p.ymax),this.spatialReference)},getExtent:function(){var p=this.spatialReference;return new n(this.xmin,this.ymin,this.xmax,this.ymax,p&&new f(p.toJson()))},_shiftCM:function(p){var t=this.getCacheValue("_shifted");if(!t){t=new n(this.toJson());var r=t.spatialReference;if(p=p||r._getInfo()){var y=this._getCM(p);if(y){var x=r._isWebMercator()?e.webMercatorToGeographic(y):
y;t.xmin-=y.x;t.xmax-=y.x;r._isWebMercator()||(x.x=this._normalizeX(x.x,p).x);t.setSpatialReference(new f(h.substitute({Central_Meridian:x.x},4326===r.wkid?p.altTemplate:p.wkTemplate)))}}this.setCacheValue("_shifted",t)}return t},_getCM:function(p){var t;this._isOutOfBounds(p)&&(t=this.getCenter());return t},_isOutOfBounds:function(p){var t=p.valid[0];p=p.valid[1];var r=this.xmin,y=this.xmax;return!(r>=t&&r<=p&&y>=t&&y<=p)},_normalize:function(p,t,r){var y=new n(this.toJson()),x=y.spatialReference;
if(x&&(r=r||x._getInfo())){var z=q.map(this._getParts(r),function(v){return v.extent});return 2<z.length?p?this._shiftCM(r):y.update(r.valid[0],y.ymin,r.valid[1],y.ymax,x):2===z.length?p?this._shiftCM(r):t?z:{rings:q.map(z,function(v){return[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]}),spatialReference:x}:z[0]||y}return y},_getParts:function(p){var t=this.getCacheValue("_parts");if(!t){t=[];var r=this.xmin,y=this.xmax,x=this.ymin,z=this.ymax,v=this.spatialReference,
w=this.getWidth(),u=r,A=y,G=0,B=0;p=p||v._getInfo();var E=p.valid[0];var F=p.valid[1];B=this._normalizeX(r,p);r=B.x;G=B.frameId;B=this._normalizeX(y,p);y=B.x;B=B.frameId;p=r===y&&0<w;if(w>2*F){w=new n(u<A?r:y,x,F,z,v);r=new n(E,x,u<A?y:r,z,v);F=new n(0,x,F,z,v);x=new n(E,x,0,z,v);v=[];E=[];w.contains(F)&&v.push(G);w.contains(x)&&E.push(G);r.contains(F)&&v.push(B);r.contains(x)&&E.push(B);for(z=G+1;z<B;z++)v.push(z),E.push(z);t.push({extent:w,frameIds:[G]},{extent:r,frameIds:[B]},{extent:F,frameIds:v},
{extent:x,frameIds:E})}else r>y||p?t.push({extent:new n(r,x,F,z,v),frameIds:[G]},{extent:new n(E,x,y,z,v),frameIds:[B]}):t.push({extent:new n(r,x,y,z,v),frameIds:[G]});this.setCacheValue("_parts",t)}return t},_normalizeX:function(p,t){var r=0,y=t.valid[0],x=t.valid[1],z=2*x;p>x?(r=Math.ceil(Math.abs(p-x)/z),p-=r*z):p<y&&(r=Math.ceil(Math.abs(p-y)/z),p+=r*z,r=-r);return{x:p,frameId:r}},toJson:function(){var p={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},t=this.spatialReference;t&&
(p.spatialReference=t.toJson());return p}});m.prototype=n.prototype;n.simpleConstructor=m;n.defaultProps=b;a.setObject("geometry.Extent",n,d);d.geometry.defaultExtent=b;return n})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,q,a){D=function(){return this}();var b=D.location,d=b.pathname;a=b.protocol;b={version:"3.40",_appBaseUrl:a+"//"+b.host+d.substring(0,d.lastIndexOf(d.split("/")[d.split("/").length-1]))};q.noGlobals||(D.esri=b);(b.dijit=b.dijit||
{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,q,a,b,d,h,f,g,c){function e(y,x,z,v){(x=x&&x[y])?x={formatType:x.formatType,options:x}:v&&-1!==D.indexOf(v.properties||"",y)?x={formatType:v.formatter||"DateString",options:null}:z&&-1!==D.indexOf(z.properties||"",y)&&(x={formatType:z.formatter||
"NumberFormat",options:null});return x}function k(y,x,z){return[b.isString(y)?y.split(""):y,x||a.global,b.isString(z)?new Function("item","index","array",z):z]}function l(y){return void 0!==y&&null!==y}function m(y){return l(y)?y:""}function n(y,x,z,v){var w=z.match(/([^\(]+)(\([^\)]+\))?/i);z=b.trim(w[1]);var u=w[2]?b.trim(w[2]):null;w=x[y];v=v||(u?q.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=v.utcOffset;if(-1===D.indexOf(t,z))z=b.getObject(z),b.isFunction(z)&&(w=z(w,y,x,v));else if("number"===
typeof w||"string"===typeof w&&w&&!isNaN(Number(w)))switch(w=Number(w),z){case "NumberFormat":return f.format(w,v);case "DateString":y=new Date(w);if(v.local||v.systemLocale)return v.systemLocale?y.toLocaleDateString()+(v.hideTime?"":" "+y.toLocaleTimeString()):y.toDateString()+(v.hideTime?"":" "+y.toTimeString());y=y.toUTCString();v.hideTime&&(y=y.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return y;case "DateFormat":return y=new Date(w),l(u)&&(y=d.add(y,"minute",y.getTimezoneOffset()-u)),g.format(y,
v)}return m(w)}function p(y,x){var z;if(x)for(z in y)y.hasOwnProperty(z)&&(void 0===y[z]?delete y[z]:y[z]instanceof Object&&p(y[z],!0));else for(z in y)y.hasOwnProperty(z)&&void 0===y[z]&&delete y[z];return y}var t=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;h={valueOf:function(y,x){for(var z in y)if(y[z]==x)return z;return null},stripTags:function(y){if(y){var x=typeof y;if("string"===x)y=y.replace(r,"");else if("object"===x)for(var z in y)(x=y[z])&&"string"===typeof x&&(x=x.replace(r,
"")),y[z]=x}return y},substitute:function(y,x,z){if(l(z))if(b.isObject(z)){var v=z.first;var w=z.dateFormat;var u=z.numberFormat;var A=z.format}else v=z;if(x&&"${*}"!==x)return b.replace(x,b.hitch({obj:y},function(B,E){var F=E.split(":"),H;return 1<F.length?(E=F[0],F.shift(),(H=A&&A[F[0]])?F=H.formatType:(F=F.join(":"),H=null),n(E,this.obj,F,H)):(H=e(E,A,u,w))?n(E,this.obj,H.formatType,H.options):m(this.obj[E])}),/\$\{([^\}]+)\}/g);x=[];for(var G in y)if(z=(z=e(G,A,u,w))?n(G,y,z.formatType,z.options):
y[G],x.push(G+" \x3d "+m(z)+"\x3cbr/\x3e"),v)break;return x.join("")},filter:function(y,x,z){x=k(y,z,x);z={};var v;y=x[0];for(v in y)x[2].call(x[v],y[v],v,y)&&(z[v]=y[v]);return z},startsWith:function(y,x,z){z=z||0;return y.indexOf(x,z)===z},endsWith:function(y,x,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>y.length)z=y.length;z-=x.length;y=y.indexOf(x,z);return-1!==y&&y===z},isDefined:l,fixJson:p,isObject:function(y){return y&&"object"===typeof y},isString:function(y){return"string"===
typeof y},mixin:function(y,x){for(var z in x)x.hasOwnProperty(z)&&(y[z]=x[z]);return y},clone2DArray:function(y){if(y=y?y.slice(0):null){var x,z=y.length;for(x=0;x<z;x++)y[x]=y[x]?y[x].slice(0):null}return y},clone3DArray:function(y){if(y=y?y.slice(0):null){var x,z=y.length;for(x=0;x<z;x++){y[x]=y[x]?y[x].slice(0):null;var v=y[x];if(v){var w,u=v.length;for(w=0;w<u;w++)v[w]=v[w]?v[w].slice(0):null}}}return y}};b.mixin(c,h);c._isDefined=l;c._getParts=k;c._sanitize=p;return h})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(D,q,a,b,d){function h(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var f=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(g){g&&(d.isObject(g)?d.mixin(this,g):d.isString(g)?this.wkt=g:this.wkid=g)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:f,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:f,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:f,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:f,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==q.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==q.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(g){var c=!1;g&&(c=this.isWebMercator()&&4326===g.wkid||g.isWebMercator()&&4326===this.wkid);return c},isWebMercator:function(){return this._isWebMercator()},equals:function(g){var c=!1;g&&(this===g&&
(c=!0),this.wkid||g.wkid?c=this.wkid===g.wkid||this.isWebMercator()&&g.isWebMercator()||this.wkid===g.latestWkid||g.wkid===this.latestWkid:this.wkt&&g.wkt&&(c=this.wkt.toUpperCase()===g.wkt.toUpperCase()));return c},toJson:function(){var g=null;null!=this.wkid?g={wkid:this.wkid}:null!=this.wkt&&(g={wkt:this.wkt});g&&null!=this.latestWkid&&(g.latestWkid=this.latestWkid);return g}});h.prototype=D.prototype;D.simpleConstructor=h;return b.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,q,a,b,d){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(h){this.spatialReference=h;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new d(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(h){return this.cache&&this.cache[h]},setCacheValue:function(h,f){this.cache||
(this.cache={});this.cache[h]=f}});q.setObject("geometry.Geometry",D,b);return D})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(D,q,a,b,d,h,f,g){function c(n,p){89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999);var t=.017453292519943*p;return[111319.49079327169*n,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}function e(n,p,t){n=n/6378137*57.29577951308232;return t?[n,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[n-360*Math.floor((n+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function k(){}function l(){}function m(n){var p=n._json;n._unquantizeFn?(p=n._unquantizeFn({x:p.x,y:p.y}),n._xVal=p.x,n._yVal=p.y,n._unquantizeFn=null):(n._xVal=p.x,n._yVal=p.y);n._json=null}a={type:"point",x:0,y:0};D=D(f,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(n,p,t){q.isArray(n)?(this.x=n[0],this.y=
n[1],this.spatialReference=p):d.isObject(n)?(d.mixin(this,n),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference))):(this.x=n,this.y=p,this.spatialReference=t);this.verifySR()},offset:function(n,p){return new this.constructor(this.x+n,this.y+p,this.spatialReference)},setX:function(n){this.x=n;this.clearCache();return this},setY:function(n){this.y=n;this.clearCache();return this},
setLongitude:function(n){var p=this.spatialReference;p&&(p._isWebMercator()?this.setX(c(n,this.y)[0]):4326===p.wkid&&this.setX(n));return this},setLatitude:function(n){var p=this.spatialReference;p&&(p._isWebMercator()?this.setY(c(this.x,n)[1]):4326===p.wkid&&this.setY(n));return this},getLongitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var p=e(this.x,this.y)[0];else 4326===n.wkid&&(p=this.x);return p},getLatitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var p=
e(this.x,this.y)[1];else 4326===n.wkid&&(p=this.y);return p},update:function(n,p){this.x=n;this.y=p;this.clearCache();return this},normalize:function(){var n=this.x,p=this.spatialReference;if(p){var t=p._getInfo();t&&(n=this._normalizeX(n,t))}return new this.constructor(n,this.y,p)},_normalizeX:function(n,p){var t=p.valid[0],r=p.valid[1],y=2*r;n>r?(t=Math.ceil(Math.abs(n-r)/y),n-=t*y):n<t&&(t=Math.ceil(Math.abs(n-t)/y),n+=t*y);return n},toJson:function(){var n={x:this.x,y:this.y},p=this.spatialReference;
p&&(n.spatialReference=p.toJson());return n}});k.prototype=D.prototype;l.prototype=new k;Object.defineProperty(l.prototype,"x",{get:function(){this._json&&m(this);return this._xVal},set:function(n){this._xVal=n}});Object.defineProperty(l.prototype,"y",{get:function(){this._json&&m(this);return this._yVal},set:function(n){this._yVal=n}});l.prototype.setupLazyUnquantization=function(n,p){this._unquantizeFn=n;this._json=p};D.simpleConstructor=k;D.accessorConstructor=l;D.lngLatToXY=c;D.xyToLngLat=e;D.defaultProps=
a;D.metersPerDegree=6378137*Math.PI/180;q.setObject("geometry.Point",D,b);b.geometry.defaultPoint=a;return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,q,a,b,d){function h(f){var g=!1;f&&(f.ics||f.icsid)&&(g=!0);return g}b={isICS:h,createSpatialReference:function(f){var g=null;f&&(g=h(f)?new q(f):new D(f));return g}};d.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,q,a,b,d,h){D=D(h,{declaredClass:"esri.ImageSpatialReference",constructor:function(f){f&&q.isObject(f)&&q.mixin(this,f)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(f){var g=!1;if(f)if(this.icsid&&f.icsid){if(g=this.icsid===f.icsid,this.icsns||f.icsns)g=g&&this.icsns===f.icsns}else this.ics&&f.ics&&(g=this.ics===f.ics);return g},toJson:function(f){var g=null,c=d.isDefined;f=c(f)?f:!0;c(this.icsid)?(g={icsid:this.icsid},
c(this.icsns)&&(g.icsns=this.icsns)):c(this.ics)&&(g={ics:this.ics});c(this.url)&&c(g)&&f&&(g.url=this.url);return g}});return b.ImageSpatialReference=D})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,q,a){var b=D("ff"),d=D("ie"),h=void 0===d&&7<=D("trident"),f=D("edge"),g=D("webkit"),c=D("opera"),e=D("chrome"),k=D("safari"),l=navigator.userAgent,m;(m=l.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(m[2].replace("_",".")));
(m=l.match(/Android\s+(\d+(\.\d+)*)/i))&&D.add("esri-android",parseFloat(m[1]));(m=l.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(m[1]));0<=l.indexOf("BlackBerry")&&0<=l.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(b||g)&&(document.createTouch||"ontouchstart"in q||q.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(m=l.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
D.add("esri-mobile",!!m);D.add("esri-pointer",!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!q.PointerEvent));a._getDOMAccessor=function(p){var t="";b?t="Moz":g?t="Webkit":d?t="ms":c&&(t="O");return t+p.charAt(0).toUpperCase()+p.substr(1)};D.add("esri-phonegap",!!q.cordova);D.add("esri-cors",D("esri-phonegap")||q.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",q.FormData&&q.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in
q&&"HTMLIFrameElement"in q&&"sandbox"in HTMLIFrameElement.prototype});D.add("esri-secure-context",function(){if("isSecureContext"in q)return q.isSecureContext;if(q.location&&q.location.origin)return 0===q.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in q);D.add("esri-workers",q.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(l=D("esri-featurelayer-webgl")){var n=D("esri-mobile");m=n?1:2;n=n?1:3;"object"===typeof l?(l.maxDrillLevel=null==l.maxDrillLevel?m:l.maxDrillLevel,
l.maxRecordCountFactor=null==l.maxRecordCountFactor?n:l.maxRecordCountFactor,l.enablePBFQuery=null==l.enablePBFQuery?!0:l.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:m,maxRecordCountFactor:n,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!d||10<=d);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",h||f||9<=d||3.5<=b||4<=e||3.1<=k||10.5<=c||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",h||f||10<=d||4<=b||
4<=e||3.1<=k||10.5<=c||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",h||f||10<=b||12<=e||4<=k||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!q.document)return!1;var p=q.document.createElement("a");p.href="?'";return-1<p.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=e||
11.1<=k));a._css=function(p){var t=D("esri-transforms3d");void 0!==p&&null!==p?t=p:t&&(e||k&&!D("esri-iphone"))&&(t=!1);var r=t?"translate3d(":"translate(",y=t?e?",-1px)":",0px)":")",x=t?"scale3d(":"scale(",z=t?",1)":")",v=t?"rotate3d(0,0,1,":"rotate(",w=t?"matrix3d(":"matrix(",u=t?",0,0,":",",A=t?",0,0,0,0,1,0,":",",G=t?",0,1)":")";return{names:{transition:g&&"-webkit-transition"||b&&"MozTransition"||c&&"OTransition"||d&&"msTransition"||"transition",transform:g&&"-webkit-transform"||b&&"MozTransform"||
c&&"OTransform"||d&&"msTransform"||"transform",transformName:g&&"-webkit-transform"||b&&"-moz-transform"||c&&"-o-transform"||d&&"-ms-transform"||"transform",origin:g&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||c&&"OTransformOrigin"||d&&"msTransformOrigin"||"transformOrigin",endEvent:g&&"webkitTransitionEnd"||b&&"transitionend"||c&&"oTransitionEnd"||d&&"MSTransitionEnd"||"transitionend"},translate:function(B,E){return r+B+"px,"+E+"px"+y},scale:function(B){return x+B+","+B+z},rotate:function(B){return v+
B+"deg)"},matrix:function(B){return w+B.xx+","+B.xy+u+B.yx+","+B.yy+A+B.dx.toFixed(10)+(b&&59>=b?"px,":",")+B.dy.toFixed(10)+(b&&59>=b?"px":"")+G},getScaleFromMatrix:function(B){if(!B)return 1;B=B.toLowerCase();var E=-1<B.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(B.substring(E.length,B.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");
a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,q,a,b,d,h){function f(c,e,k,l){if("point"===c.type){var m=e(c.x,c.y,l);return new c.constructor(m[0],m[1],new d(k))}if("extent"===c.type){m=e(c.xmin,
c.ymin,l);var n=e(c.xmax,c.ymax,l);return new c.constructor(m[0],m[1],n[0],n[1],new d(k))}if("polyline"===c.type||"polygon"===c.type){m="polyline"===c.type;var p=[],t;D.forEach(m?c.paths:c.rings,function(y){p.push(t=[]);D.forEach(y,function(x){t.push(e(x[0],x[1],l))})});return m?new c.constructor({paths:p,spatialReference:new d(k)}):new c.constructor({rings:p,spatialReference:new d(k)})}if("multipoint"===c.type){var r=[];D.forEach(c.points,function(y){r.push(e(y[0],y[1],l))});return new c.constructor({points:r,
spatialReference:new d(k)})}}function g(c,e){var k=c&&(null!=c.wkid?c:c.spatialReference),l=e&&(null!=e.wkid?e:e.spatialReference);return k&&l?l.equals(k)?!0:l._canProject(k):!1}a={canProject:g,project:function(c,e){var k=c&&c.spatialReference,l=e&&(null!=e.wkid?e:e.spatialReference);k&&l?k.equals(l)?c=new c.constructor(c.toJson()):g(k,l)?l.isWebMercator()?c=f(c,h.lngLatToXY,{wkid:102100}):4326===l.wkid&&(c=f(c,h.xyToLngLat,{wkid:4326})):c=null:c=null;return c},lngLatToXY:h.lngLatToXY,xyToLngLat:h.xyToLngLat,
metersPerDegree:h.metersPerDegree,geographicToWebMercator:function(c){return f(c,h.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(c,e){return f(c,h.xyToLngLat,{wkid:4326},e)}};q.mixin(q.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,q,a,b){function d(g,c,e){return g instanceof b?new b(g.x+e*(c.x-g.x),g.y+e*(c.y-g.y)):[g[0]+e*(c[0]-g[0]),g[1]+e*(c[1]-g[1])]}function h(g,c){return 1E-8>
Math.abs(g-c)}function f(g,c,e,k){var l=h(g[0],c[0])?1E10:(g[1]-c[1])/(g[0]-c[0]),m=h(e[0],k[0])?1E10:(e[1]-k[1])/(e[0]-k[0]),n=g[1]-l*g[0],p=e[1]-m*e[0];if(h(l,m)){if(h(n,p)){if(h(g[0],c[0]))if(Math.min(g[1],c[1])<Math.max(e[1],k[1])||Math.max(g[1],c[1])>Math.min(e[1],k[1])){g=(g[1]+c[1]+e[1]+k[1]-Math.min(g[1],c[1],e[1],k[1])-Math.max(g[1],c[1],e[1],k[1]))/2;var t=(g-n)/l}else return null;else if(Math.min(g[0],c[0])<Math.max(e[0],k[0])||Math.max(g[0],c[0])>Math.min(e[0],k[0]))t=(g[0]+c[0]+e[0]+
k[0]-Math.min(g[0],c[0],e[0],k[0])-Math.max(g[0],c[0],e[0],k[0]))/2,g=l*t+n;else return null;return[t,g]}return null}h(l,1E10)?(t=g[0],g=m*t+p):h(m,1E10)?(t=e[0],g=l*t+n):(t=-(n-p)/(l-m),g=g[1]===c[1]?g[1]:e[1]===k[1]?e[1]:l*t+n);return[t,g]}q={getLength:function(g,c){var e=c.x-g.x,k=c.y-g.y;return Math.sqrt(e*e+k*k)},_getLength:function(g,c){var e=c[0]-g[0],k=c[1]-g[1];return Math.sqrt(e*e+k*k)},getPointOnLine:d,getMidpoint:function(g,c){return d(g,c,.5)},_equals:h,_getLineIntersection:f,getLineIntersection:function(g,
c,e,k,l){(g=f([g.x,g.y],[c.x,c.y],[e.x,e.y],[k.x,k.y]))&&(g=new b(g[0],g[1],l));return g},_getLineIntersection2:function(g,c){var e=g[0],k=g[1],l=c[0],m=c[1],n=e[0];e=e[1];var p=k[0];k=k[1];var t=l[0],r=l[1];l=m[0]-t;t=n-t;var y=p-n;m=m[1]-r;r=e-r;var x=k-e,z=m*y-l*x;if(0===z)return!1;l=(l*r-m*t)/z;t=(y*r-x*t)/z;return 0<=l&&1>=l&&0<=t&&1>=t?[n+l*(p-n),e+l*(k-e)]:!1},_pointLineDistance:function(g,c){var e=c[0],k=c[1],l=e[0],m=e[1];e=g[0];var n=g[1],p=k[0]-l,t=k[1]-m,r=e-l,y=n-m;k=Math.sqrt;var x=
Math.pow,z=k(x(p,2)+x(t,2));r=(r*p+y*t)/(z*z);m+=r*t;return k(x(e-(l+r*p),2)+x(n-m,2))}};D.mixin(D.getObject("geometry",!0,a),q);return q})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,q,a,b,d,h,f,g,c,e){var k=function(){return 9>a("ie")?function(m,n,p,t,r,y,x,z,v){var w=[],u=Math.round,A,G=x.length,B;for(A=0;A<G;A++){var E=x[A];var F=z?z(E[0][0],E[0][1],
v):E[0];if(1<(B=E.length)){var H=u((F[0]-m)*p+r);var L=u((n-F[1])*t+y);F=z?z(E[1][0],E[1][1],v):E[1];var Q=u((F[0]-m)*p+r);F=u((n-F[1])*t+y);w.push("M",H+","+L,"L",Q+","+F);for(Q=2;Q<B;Q++)F=z?z(E[Q][0],E[Q][1],v):E[Q],H=u((F[0]-m)*p+r),L=u((n-F[1])*t+y),w.push(H+","+L)}else H=u((F[0]-m)*p+r),L=u((n-F[1])*t+y),w.push("M",H+","+L)}return w}:function(m,n,p,t,r,y,x,z,v,w){var u=[],A,G,B=Math.round;var E=0;for(A=x?x.length:0;E<A;E++){var F=x[E];u.push("M");var H=0;for(G=F?F.length:0;H<G;H++){var L=z?
z(F[H][0],F[H][1],v):F[H];u.push(B((L[0]-m)*p+r)+","+B((n-L[1])*t+y))}w||u.push("Z")}return u}}(),l={toScreenPoint:function(m,n,p,t,r){var y=m.spatialReference,x=t.spatialReference,z=t.x;t=t.y;y&&x&&!y.equals(x)&&y._canProject(x)&&(y=y.isWebMercator()?d.lngLatToXY(z,t):d.xyToLngLat(z,t,!0),z=y[0],t=y[1]);z=(z-m.xmin)*(n/m.getWidth());t=(m.ymax-t)*(p/m.getHeight());r||(z=Math.round(z),t=Math.round(t));return new h(z,t)},toScreenGeometry:function(m,n,p,t){var r=m.xmin,y=m.ymax,x=n/m.getWidth(),z=p/
m.getHeight(),v=D.forEach,w=Math.round;if(t instanceof d)return new d(w((t.x-r)*x),w((y-t.y)*z));if(t instanceof c){m=new c;var u=m.points;v(t.points,function(F,H){u[H]=[w((F[0]-r)*x),w((y-F[1])*z)]});return m}if(t instanceof e)return new e(w((t.xmin-r)*x),w((y-t.ymin)*z),w((t.xmax-r)*x),w((y-t.ymax)*x));if(t instanceof f){m=new f;var A=m.paths,G;v(t.paths,function(F,H){G=A[H]=[];v(F,function(L,Q){G[Q]=[w((L[0]-r)*x),w((y-L[1])*z)]})});return m}if(t instanceof g){m=new g;var B=m.rings,E;v(t.rings,
function(F,H){E=B[H]=[];v(F,function(L,Q){E[Q]=[w((L[0]-r)*x),w((y-L[1])*z)]})});return m}},_toScreenPath:function(m,n,p,t,r,y){var x=t instanceof f,z=m.spatialReference,v=t.spatialReference;if(z&&v&&!z.equals(v)&&z._canProject(v))if(z.isWebMercator())var w=d.lngLatToXY;else{w=d.xyToLngLat;var u=!0}return k(m.xmin,m.ymax,n/m.getWidth(),p/m.getHeight(),r,y,x?t.paths:t.rings,w,u,x)},toMapPoint:function(m,n,p,t){return new d(m.xmin+t.x/(n/m.getWidth()),m.ymax-t.y/(p/m.getHeight()),m.spatialReference)},
toMapGeometry:function(m,n,p,t){var r=m.xmin,y=m.ymax,x=m.spatialReference,z=n/m.getWidth(),v=p/m.getHeight(),w=D.forEach;if(t instanceof d)return new d(r+t.x/z,y-t.y/v,x);if(t instanceof c){m=new c(x);var u=m.points;w(t.points,function(F,H){u[H]=[r+F[0]/z,y-F[1]/v]});return m}if(t instanceof e)return new e(r+t.xmin/z,y-t.ymin/v,r+t.xmax/z,y-t.ymax/v,x);if(t instanceof f){m=new f(x);var A=m.paths,G;w(t.paths,function(F,H){G=A[H]=[];w(F,function(L,Q){G[Q]=[r+L[0]/z,y-L[1]/v]})});return m}if(t instanceof
g){m=new g(x);var B=m.rings,E;w(t.rings,function(F,H){E=B[H]=[];w(F,function(L,Q){E[Q]=[r+L[0]/z,y-L[1]/v]})});return m}}};q.mixin(q.getObject("geometry",!0,b),l);return l})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,q,a,b,d){D=D(d,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});q.setObject("geometry.ScreenPoint",D,b);return D})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k){function l(){}function m(){}b={type:"polyline",paths:null};D=D(g,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(n){this.paths=[];this._path=0;n&&(a.isArray(n)?this.paths=a.isArray(n[0][0])?n:[n]:n.paths?h.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(n){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(n[0])?q.forEach(n,this._addPointArr,this):q.forEach(n,this._addPoint,this);return this},_addPointArr:function(n){this.paths[this._path].push(n)},_addPoint:function(n){this.paths[this._path].push([n.x,n.y])},_insertPoints:function(n,p){this.clearCache();this._path=p;this.paths[this._path]||(this.paths[this._path]=[]);q.forEach(n,this._addPoint,this)},_validateInputs:function(n,p){return null!==n&&void 0!==n&&(0>n||n>=this.paths.length)||null!==p&&void 0!==n&&(0>p||p>=this.paths[n].length)?
!1:!0},getPoint:function(n,p){if(this._validateInputs(n,p))return new c(this.paths[n][p],this.spatialReference)},setPoint:function(n,p,t){if(this._validateInputs(n,p))return this.clearCache(),this.paths[n][p]=[t.x,t.y],this},insertPoint:function(n,p,t){if(this._validateInputs(n)&&null!=p&&0<=p&&p<=this.paths[n].length)return this.clearCache(),this.paths[n].splice(p,0,[t.x,t.y]),this},removePath:function(n){if(this._validateInputs(n,null)){this.clearCache();n=this.paths.splice(n,1)[0];var p,t=n.length,
r=this.spatialReference;for(p=0;p<t;p++)n[p]=new c(n[p],r);return n}},removePoint:function(n,p){if(this._validateInputs(n,p))return this.clearCache(),new c(this.paths[n].splice(p,1)[0],this.spatialReference)},getExtent:function(){var n=this.getCacheValue("_extent");var p=this.getCacheValue("_partwise");if(n)return n=new e(n),n._partwise=p,n;n=this.paths;var t=n.length;if(t&&n[0].length){var r,y,x,z,v=r=n[0][0][0],w=y=n[0][0][1],u=Math.min,A=Math.max,G=this.spatialReference;p=[];var B,E;for(x=0;x<
t;x++){var F=n[x];var H=B=F[0]&&F[0][0];var L=E=F[0]&&F[0][1];var Q=F.length;for(z=0;z<Q;z++){var aa=F[z];var ca=aa[0];aa=aa[1];v=u(v,ca);w=u(w,aa);r=A(r,ca);y=A(y,aa);H=u(H,ca);L=u(L,aa);B=A(B,ca);E=A(E,aa)}p.push(new e({xmin:H,ymin:L,xmax:B,ymax:E,spatialReference:G?G.toJson():null}))}n={xmin:v,ymin:w,xmax:r,ymax:y,spatialReference:G?G.toJson():null};p=1<p.length?p:null;this.setCacheValue("_extent",n);this.setCacheValue("_partwise",p);n=new e(n);n._partwise=p;return n}},toJson:function(){var n=
{paths:h.clone3DArray(this.paths)},p=this.spatialReference;p&&(n.spatialReference=p.toJson());return n}});l.prototype=D.prototype;m.prototype=new l;Object.defineProperty(m.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:h.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(n){this._pathsVal=n}});m.prototype.setupLazyUnquantization=function(n,p){this._unquantizeFn=n;this._pathsVal=p.paths};D.simpleConstructor=
l;D.accessorConstructor=m;D.defaultProps=b;a.setObject("geometry.Polyline",D,d);d.geometry.defaultPolyline=b;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l){function m(){}function n(){}b={type:"polygon",rings:null};var p=D(g,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(t){this.rings=
[];this._ring=0;t&&(a.isArray(t)?this.rings=a.isArray(t[0][0])?t:[t]:t.rings?h.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(t){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(t[0])?q.forEach(t,this._addPointArr,this):q.forEach(t,this._addPoint,this);return this},_addPointArr:function(t){this.rings[this._ring].push(t)},_addPoint:function(t){this.rings[this._ring].push([t.x,
t.y])},_insertPoints:function(t,r){this.clearCache();this._ring=r;this.rings[this._ring]||(this.rings[this._ring]=[]);q.forEach(t,this._addPoint,this)},_validateInputs:function(t,r){return null!==t&&void 0!==t&&(0>t||t>=this.rings.length)||null!==r&&void 0!==t&&(0>r||r>=this.rings[t].length)?!1:!0},getPoint:function(t,r){if(this._validateInputs(t,r))return new c(this.rings[t][r],this.spatialReference)},setPoint:function(t,r,y){if(this._validateInputs(t,r))return this.clearCache(),this.rings[t][r]=
[y.x,y.y],this},insertPoint:function(t,r,y){if(this._validateInputs(t)&&null!=r&&0<=r&&r<=this.rings[t].length)return this.clearCache(),this.rings[t].splice(r,0,[y.x,y.y]),this},removeRing:function(t){if(this._validateInputs(t,null)){this.clearCache();t=this.rings.splice(t,1)[0];var r,y=t.length,x=this.spatialReference;for(r=0;r<y;r++)t[r]=new c(t[r],x);return t}},removePoint:function(t,r){if(this._validateInputs(t,r))return this.clearCache(),new c(this.rings[t].splice(r,1)[0],this.spatialReference)},
getExtent:function(){var t=this.getCacheValue("_extent");var r=this.getCacheValue("_partwise");if(t)return t=new e(t),t._partwise=r,t;t=this.rings;var y=t.length;if(y&&t[0].length){var x,z,v,w,u=x=t[0][0][0],A=z=t[0][0][1],G=Math.min,B=Math.max,E=this.spatialReference;r=[];var F,H;for(v=0;v<y;v++){var L=t[v];var Q=F=L[0]&&L[0][0];var aa=H=L[0]&&L[0][1];var ca=L.length;for(w=0;w<ca;w++){var ea=L[w];var U=ea[0];ea=ea[1];u=G(u,U);A=G(A,ea);x=B(x,U);z=B(z,ea);Q=G(Q,U);aa=G(aa,ea);F=B(F,U);H=B(H,ea)}r.push(new e({xmin:Q,
ymin:aa,xmax:F,ymax:H,spatialReference:E?E.toJson():null}))}t={xmin:u,ymin:A,xmax:x,ymax:z,spatialReference:E?E.toJson():null};r=1<r.length?r:null;this.setCacheValue("_extent",t);this.setCacheValue("_partwise",r);t=new e(t);t._partwise=r;return t}},contains:function(t){var r=this.rings,y=!1,x,z,v,w=r.length;var u=this.spatialReference;var A=t.spatialReference;var G=t.x;t=t.y;u&&A&&!u.equals(A)&&u._canProject(A)&&(t=u.isWebMercator()?c.lngLatToXY(G,t):c.xyToLngLat(G,t,!0),G=t[0],t=t[1]);for(v=0;v<
w;v++){u=r[v];var B=u.length;for(z=x=0;z<B;z++){x++;x===B&&(x=0);A=u[z];var E=u[x];(A[1]<t&&E[1]>=t||E[1]<t&&A[1]>=t)&&A[0]+(t-A[1])/(E[1]-A[1])*(E[0]-A[0])<G&&(y=!y)}}return y},getCentroid:function(){var t=this.getCacheValue("_centroid");if(void 0!==t)return t;t=this.rings;var r,y,x=[],z,v,w=Infinity,u=-Infinity,A=Infinity,G=-Infinity;q.forEach(t,function(F){B=r=y=0;q.forEach(F,function(H,L){L<F.length-1&&(z=F[L+1],v=H[0]*z[1]-z[0]*H[1],B+=(H[0]+z[0])*v,r+=(H[1]+z[1])*v,y+=v,H[0]<w&&(w=H[0]),H[0]>
u&&(u=H[0]),H[1]<A&&(A=H[1]),H[1]>G&&(G=H[1]))});0<y&&(y*=-1);y&&x.push([B,r,y/2])});x.sort(function(F,H){return F[2]-H[2]});var B=r=void 0;if(x[0]){var E=6*x[0][2];B=x[0][0]/E;r=x[0][1]/E;if(B<w||B>u||r<A||r>G)B=r=void 0}if(void 0===B||void 0===r)if(t=t[0]&&t[0].length?this._getLineCentroid(t[0]):null)B=t.x,r=t.y;t=isNaN(B)||isNaN(r)?null:new c(B,r,this.spatialReference);this.setCacheValue("_centroid",t);return t},_getLineCentroid:function(t){var r=0,y=0,x=0,z={x:0,y:0},v={x:0,y:0},w,u=t.length,
A;for(w=0;w<u-1;w++){var G=t[w];var B=t[w+1];if(G&&B){z.x=G[0];z.y=G[1];v.x=B[0];v.y=B[1];var E=k.getLength(z,v);0<E&&(r+=E,G=k.getMidpoint(G,B),y+=E*G[0],x+=E*G[1])}}0<r?A={x:y/r,y:x/r}:t[0]&&(A={x:t[0][0],y:t[0][1]});return A},isClockwise:function(t){var r=0,y,x=t.length,z=a.isArray(t[0])?function(v,w){return v[0]*w[1]-w[0]*v[1]}:function(v,w){return v.x*w.y-w.x*v.y};for(y=0;y<x;y++)r+=z(t[y],t[(y+1)%x]);return 0>=r/2},isSelfIntersecting:function(t){t=t||this;var r,y,x,z,v,w=t.rings.length;for(x=
0;x<w;x++){for(r=0;r<t.rings[x].length-1;r++){var u=[[t.rings[x][r][0],t.rings[x][r][1]],[t.rings[x][r+1][0],t.rings[x][r+1][1]]];for(y=x+1;y<w;y++)for(z=0;z<t.rings[y].length-1;z++){var A=[[t.rings[y][z][0],t.rings[y][z][1]],[t.rings[y][z+1][0],t.rings[y][z+1][1]]];if((v=k._getLineIntersection2(u,A))&&!(v[0]===u[0][0]&&v[1]===u[0][1]||v[0]===A[0][0]&&v[1]===A[0][1]||v[0]===u[1][0]&&v[1]===u[1][1]||v[0]===A[1][0]&&v[1]===A[1][1]))return!0}}z=t.rings[x].length;if(!(4>=z))for(r=0;r<z-3;r++){var G=z-
1;0===r&&(G=z-2);u=[[t.rings[x][r][0],t.rings[x][r][1]],[t.rings[x][r+1][0],t.rings[x][r+1][1]]];for(y=r+2;y<G;y++)if(A=[[t.rings[x][y][0],t.rings[x][y][1]],[t.rings[x][y+1][0],t.rings[x][y+1][1]]],(v=k._getLineIntersection2(u,A))&&!(v[0]===u[0][0]&&v[1]===u[0][1]||v[0]===A[0][0]&&v[1]===A[0][1]||v[0]===u[1][0]&&v[1]===u[1][1]||v[0]===A[1][0]&&v[1]===A[1][1]))return!0}}return!1},toJson:function(){var t={rings:h.clone3DArray(this.rings)},r=this.spatialReference;r&&(t.spatialReference=r.toJson());return t}});
m.prototype=p.prototype;n.prototype=new m;Object.defineProperty(n.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:h.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(t){this._ringsVal=t}});n.prototype.setupLazyUnquantization=function(t,r){this._unquantizeFn=t;this._ringsVal=r.rings};p.simpleConstructor=m;p.accessorConstructor=n;p.defaultProps=b;p.createEllipse=function(t){var r=t.center.x,y=t.center.y,
x=t.longAxis,z=t.shortAxis,v=t.numberOfPoints,w=t.map,u;t=[];var A=2*Math.PI/v;for(u=0;u<v;u++){var G=Math.cos(u*A);var B=Math.sin(u*A);G=w.toMap({x:x*G+r,y:z*B+y});t.push(G)}t.push(t[0]);r=new p(w.spatialReference);r.addRing(t);return r};p.createCircle=function(t){return p.createEllipse({center:t.center,longAxis:t.r,shortAxis:t.r,numberOfPoints:t.numberOfPoints,map:t.map})};p.fromExtent=function(t){var r=t.normalize();t=t.spatialReference;return new p({rings:q.map(r,function(y){return[[y.xmin,y.ymin],
[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]}),spatialReference:t?t.toJson():null})};a.setObject("geometry.Polygon",p,d);d.geometry.defaultPolygon=b;d.geometry.createEllipse=p.createEllipse;d.geometry.createCircle=p.createCircle;d.geometry.isClockwise=p.prototype.isClockwise;d.geometry.polygonSelfIntersecting=p.prototype.isSelfIntersecting;return p})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(D,q,a,b,d,h,f,g,c,e){function k(){}function l(){}a={type:"multipoint",points:null};D=D(f,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(m){this.points=[];m&&(m.points?d.mixin(this,m):this.spatialReference=m,this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(m){this.clearCache();q.isArray(m)?this.points.push(m):this.points.push([m.x,m.y]);return this},removePoint:function(m){if(this._validateInputs(m))return this.clearCache(),
new g(this.points.splice(m,1)[0],this.spatialReference)},getExtent:function(){var m=this.getCacheValue("_extent");if(m)return new c(m);m=this.points;var n=m.length;if(n){var p=m[0],t,r,y=t=p[0],x=r=p[1],z=Math.min,v=Math.max,w=this.spatialReference,u;for(u=0;u<n;u++){p=m[u];var A=p[0];p=p[1];y=z(y,A);x=z(x,p);t=v(t,A);r=v(r,p)}m={xmin:y,ymin:x,xmax:t,ymax:r,spatialReference:w?w.toJson():null};this.setCacheValue("_extent",m);return new c(m)}},_validateInputs:function(m){return null===m||0>m||m>=this.points.length?
!1:!0},getPoint:function(m){if(this._validateInputs(m))return m=this.points[m],new g(m[0],m[1],this.spatialReference)},setPoint:function(m,n){if(this._validateInputs(m))return this.clearCache(),this.points[m]=[n.x,n.y],this},toJson:function(){var m={points:d.clone2DArray(this.points)},n=this.spatialReference;n&&(m.spatialReference=n.toJson());return m}});k.prototype=D.prototype;l.prototype=new k;Object.defineProperty(l.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:d.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(m){this._pointsVal=m}});l.prototype.setupLazyUnquantization=function(m,n){this._unquantizeFn=m;this._pointsVal=n.points};D.simpleConstructor=k;D.accessorConstructor=l;D.defaultProps=a;q.setObject("geometry.Multipoint",D,b);b.geometry.defaultMultipoint=a;return D})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,q,a,b,d){function h(l,m,n){return l&&m?
l.getWidth()/m*(n||g)*39.37*c.screenDPI:0}function f(l,m,n,p,t){return l.expand(p*m/(39.37*((t?n:e.values[e[n]])||g)*c.screenDPI)/l.getWidth())}var g=6370997*Math.PI/180,c=b.defaults,e=d,k={getUnitValueForSR:function(l){return this.getUnitValue(l)||g},getUnitValue:function(l){if(l)if("object"===typeof l){var m=l.wkid;var n=l.wkt}else"number"===typeof l?m=l:"string"===typeof l&&(n=l);if(m)var p=e.values[e[m]];else n&&-1!==n.search(/^PROJCS/i)&&(l=/UNIT\[([^\]]+)\]\]$/i.exec(n))&&l[1]&&(p=parseFloat(l[1].split(",")[1]));
return p},getScale:function(l,m,n){if(1<arguments.length&&null!=m&&!m.declaredClass){var p=l;var t=m;m=null;var r=k.getUnitValue(n)}else p=m||l.extent,t=l.width,r=k.getUnitValue(p&&p.spatialReference);return h(p,t,r)},getExtentForScale:function(l,m,n){return f(n||l.extent,l.width,k.getUnitValue(l.spatialReference),m,!0)}};D.mixin(D.getObject("geometry",!0,a),k);a.geometry._getScale=h;a.geometry._getExtentForScale=f;return k})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(D,q,a,b){a=function(){return this}();var d={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(h,f){q.publish("esri.Error",[h])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};b.config=d;
D.noGlobals||(a.esriConfig=d);return d})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,q){var a,b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,
103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,
103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,
103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,
103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=
1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=
0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=
0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=
0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=
0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=
0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5896;5899>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=
0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=
0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7692;7696>=a;a++)b[a]=0;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=
0;for(a=8013;8032>=a;a++)b[a]=0;for(a=8065;8068>=a;a++)b[a]=1;for(a=8518;8529>=a;a++)b[a]=2;for(a=8533;8536>=a;a++)b[a]=2;for(a=8538;8540>=a;a++)b[a]=2;for(a=8677;8679>=a;a++)b[a]=0;for(a=8836;8840>=a;a++)b[a]=0;for(a=8857;8859>=a;a++)b[a]=0;for(a=8908;8910>=a;a++)b[a]=0;for(a=9154;9159>=a;a++)b[a]=0;for(a=9205;9218>=a;a++)b[a]=0;for(a=9271;9273>=a;a++)b[a]=0;for(a=9295;9297>=a;a++)b[a]=0;for(a=9356;9360>=a;a++)b[a]=0;for(a=9404;9407>=a;a++)b[a]=0;for(a=9476;9482>=a;a++)b[a]=0;for(a=9487;9494>=a;a++)b[a]=
0;for(a=9697;9699>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20904;20932>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21004;21032>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21207;21264>=a;a++)b[a]=0;for(a=21307;21364>=a;a++)b[a]=
0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21453;21463>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=
a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=
a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=
a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=
a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=
a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53034;53037>=a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54034;54037>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=54098;54101>=
a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102499>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=
a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=0;for(a=102605;102628>=a;a++)b[a]=0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102901;102933>=a;a++)b[a]=2;for(a=102934;102950>=a;a++)b[a]=13;for(a=102951;102960>=a;a++)b[a]=0;for(a=102965;102969>=
a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=2;for(a=103019;103021>=a;a++)b[a]=0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=
a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=0;for(a=103117;103120>=a;a++)b[a]=2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=
a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=0;for(a=103247;103249>=a;a++)b[a]=2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=
a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=0;for(a=103489;103491>=a;a++)b[a]=2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=
a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103595;103694>=a;a++)b[a]=0;for(a=103696;103699>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=2;for(a=103794;103872>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return q.WKIDUnitConversion=b})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,
q,a,b,d){var h={show:function(f){if(f=h.getNode(f))f.style.display="block"},getNode:function(f){return f&&f.domNode||f},hide:function(f){if(f=h.getNode(f))f.style.display="none"},toggle:function(f){if(f=h.getNode(f))f.style.display="none"===f.style.display?"block":"none"},documentBox:8>=d("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(f){if(f=this.getNode(f)){var g=0,c=0,e=0,k=0,l=0,m=0;return[q.connect(f,
"ontouchstart",function(n){g=n.touches[0].screenX;c=n.touches[0].screenY;e=f.scrollWidth;k=f.scrollHeight;l=f.clientWidth;m=f.clientHeight}),q.connect(f,"ontouchmove",function(n){n.preventDefault();var p=f.firstChild;p instanceof Text&&(p=f.childNodes[1]);var t=p._currentX||0,r=p._currentY||0;t+=n.touches[0].screenX-g;0<t?t=0:0>t&&Math.abs(t)+l>e&&(t=-1*(e-l));p._currentX=t;r+=n.touches[0].screenY-c;0<r?r=0:0>r&&Math.abs(r)+m>k&&(r=-1*(k-m));p._currentY=r;b.set(p,{"-webkit-transition-property":"-webkit-transform",
"-webkit-transform":"translate("+t+"px, "+r+"px)"});g=n.touches[0].screenX;c=n.touches[0].screenY})]}}};a.mixin(D,h);return h})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(D,q,a,b,d,h,f,g,c,e){var k={},l=g.defaults.io,m=/^[a-z][a-z0-9\+\-\.]*:/i,n=/^\s*http:/i,p=/^\s*https:/i,t=/:\d+$/,r=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;k.isHTTP=function(x){var z=
b.location.protocol;return null==x?"http:"===z||"https:"===z:x?"https:"===z:"http:"===z};k.getProtocolForWebResource=function(x){return k.isHTTP()?b.location.protocol:x?"https:":"http:"};k.urlToObject=function(x){var z={},v=new a(x),w=x.indexOf("?");null===v.query?z={path:x,query:null}:(z.path=x.substring(0,w),z.query=d.queryToObject(v.query));v.fragment&&(z.hash=v.fragment,null===v.query&&(z.path=z.path.substring(0,z.path.length-(v.fragment.length+1))));return z};k.getProxyUrl=function(x,z){var v=
D.isString(x)?0===D.trim(x).toLowerCase().indexOf("https:"):x,w=l.proxyUrl,u,A=e.io.proxyNotSet;D.isString(x)&&(u=k.getProxyRule(x))&&(w=u.proxyUrl);if(!w)throw Error(A);if(v&&!1!==z&&0!==b.location.href.toLowerCase().indexOf("https:")&&(v=w,0!==v.toLowerCase().indexOf("http")&&(v=k.getAbsoluteUrl(v)),v=v.replace(/^http:/i,"https:"),k.canUseXhr(v))){w=v;var G=1}w=k.urlToObject(w);w._xo=G;return w};k.addProxy=function(x){var z=k.getProxyRule(x),v;z?v=k.urlToObject(z.proxyUrl):l.alwaysUseProxy&&(v=
k.getProxyUrl());v&&(z=k.urlToObject(x),x=v.path+"?"+z.path,(v=d.objectToQuery(D.mixin(v.query||{},z.query)))&&(x+="?"+v));return x};k.addProxyRule=function(x){var z=x.urlPrefix=k.urlToObject(x.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),v=l.proxyRules,w,u=v.length,A=u;for(w=0;w<u;w++){var G=v[w].urlPrefix;if(0===z.indexOf(G)){if(z.length===G)return-1;A=w;break}else 0===G.indexOf(z)&&(A=w+1)}v.splice(A,0,x);return A};k.getProxyRule=function(x){var z=l.proxyRules,
v=z.length,w=k.urlToObject(x).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(x=0;x<v;x++)if(0===w.indexOf(z[x].urlPrefix)){var u=z[x];break}return u};k.hasSameOrigin=function(x,z,v){x=x.toLowerCase();z=z.toLowerCase();var w=b.location.href.toLowerCase();x=0===x.indexOf("http")?new a(x):w=new a(w);z=0===z.indexOf("http")?new a(z):D.isString(w)?new a(w):w;return(v||x.scheme===z.scheme)&&x.host===z.host&&x.port===z.port};k.canUseXhr=function(x,z){var v=c("esri-phonegap")?
!0:!1,w=k.hasSameOrigin,u=l.corsEnabledServers,A,G=-1;!v&&c("esri-cors")&&u&&u.length&&(v=q.some(u,function(B,E){var F=!B||"object"!==typeof B||B instanceof RegExp?B:B.host;if(F instanceof RegExp){if(F.test(x))return G=E,!0}else if(F&&(A=0!==F.trim().toLowerCase().indexOf("http"),w(x,A?"http://"+F:F)||A&&w(x,"https://"+F)))return G=E,!0;return!1}));return z?G:v};k.getAbsoluteUrl=function(x){var z=k.getProtocolForWebResource();return D.isString(x)&&!m.test(x)?0===x.indexOf("//")?z+x:0===x.indexOf("/")?
z+"//"+b.location.host+x:h._appBaseUrl+x:x};k.fixUrl=function(x){x=D.trim(x);x=k.getAbsoluteUrl(x);x=k.normalizeSlashes(x);x=x.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");x=k.downgradeToHTTP(x);return x=k.upgradeToHTTPS(x)};k.normalize=function(x){return k.fixUrl(x)};k.normalizeSlashes=function(x){if(/^https?:\/\//i.test(x)){var z=x.indexOf("?");if(-1<z){var v=x.slice(0,z);var w=x.slice(z+1)}else v=x;x=v.replace(/\/{2,}/g,"/");x=x.replace("/","//");w&&(x+="?"+w)}return x};k.downgradeToHTTP=
function(x){return k.isHTTP(!1)&&p.test(x)&&k.hasSameOrigin(b.location.href,x,!0)&&!k.canUseXhr(x)?x.replace(p,"http:"):x};k.upgradeToHTTPS=function(x){var z=l.httpsDomains,v=k.isHTTP(!1),w=k.isHTTP(!0);if(!n.test(x))return x;x=D.trim(x);var u=x.indexOf("/",7);u=-1===u?x:x.slice(0,u);u=u.toLowerCase().slice(7);if(t.test(u))if(f.endsWith(u,":80"))u=u.slice(0,-3),x=x.replace(":80","");else return x;if(v&&u===b.location.host&&(!r.test(x)||!k.canUseXhr(x)))return x;v=!1;if(w&&u===b.location.host)v=!0;
else if(z)for(var A=0;A<z.length;A++){var G=z[A];if(u===G||f.endsWith(u,"."+G)){v=!0;break}}v||!w||l.alwaysUseProxy||k.getProxyRule(x)||(v=!0);v&&(x=x.replace(n,"https:"));return x};g=e.widgets.popup;var y=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:g.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
appName:"Collector",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",
label:g.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:g.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:g.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:g.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:g.NLS_openLinkInApp}];k.getURIInfo=function(x){var z;q.some(y,function(v){v.pattern.test(x)&&(z=v);return!!z});return z};k.isKnownURI=
function(x){return!!k.getURIInfo(x)};k.base64UrlEncode=function(x){return btoa(String.fromCharCode.apply(null,x)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};D.mixin(h,k);h._getProxyUrl=k.getProxyUrl;h._getProxiedUrl=k.addProxy;h._hasSameOrigin=k.hasSameOrigin;h._canDoXOXHR=k.canUseXhr;h._getAbsoluteUrl=k.getAbsoluteUrl;h.fixUrl=k.fixUrl;return k})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p){var t=D([g],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(r,y){this._attrs={};r&&b.isString(r)?this._url=m.urlToObject(this.url=m.normalize(r)):(this.url=this._url=null,(y=y||r)&&(y.layerDefinition||y.query)&&(y=null));this.spatialReference=new n(4326);this.initialExtent=new p(-180,-90,180,90,new n(4326));this._map=this._div=
null;this.normalization=!0;y&&(y.id&&(this.id=y.id),this.arcgisProps=y.arcgisProps,this.parentLayer=y.parentLayer,!1===y.visible&&(this.visible=!1),e.isDefined(y.opacity)&&(this.opacity=y.opacity),e.isDefined(y.minScale)&&this.setMinScale(y.minScale),e.isDefined(y.maxScale)&&this.setMaxScale(y.maxScale),this.attributionDataUrl=y.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,e.isDefined(y.showAttribution)&&(this.showAttribution=y.showAttribution),this.className=y.className,
this.refreshInterval=y.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var x=this._setMap;this._setMap=function(z){var v=x.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var w=a.connect(z,"onLoad",this,function(){a.disconnect(w);w=null;this.evaluateSuspension()});return v}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(r){this.loaded||(this.loadError=r);this.onError(r)},_setMap:function(r,y,x,z){this._map=r;this._lyrZEHandle=a.connect(r,"onZoomEnd",this,this._processMapScale);if(r.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var v=a.connect(r,"onLoad",this,function(){a.disconnect(v);
v=null;this._processMapScale()})},_unsetMap:function(r,y){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(r)},_fireAttach:function(r){this.attached=!0;this.onAttach({map:r})},_fireDetach:function(r){this.attached=!1;this.onDetach({map:r})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(r,y){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(r,y),this._map&&this._map._decr())},_getToken:function(){var r=this._url,y=this.credential;return r&&r.query&&r.query.token||y&&y.token||void 0},_findCredential:function(){this.credential=c.id&&this._url&&c.id.findCredential(this._url.path)},_useSSL:function(){var r=this._url,y=/^http:/i;this.url&&(this.url=this.url.replace(y,"https:"));r&&r.path&&(r.path=r.path.replace(y,"https:"))},
refresh:function(r){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(r){this.setScaleRange(r)},setMaxScale:function(r){this.setScaleRange(null,r)},setScaleRange:function(r,y){var x=e.isDefined(r),z=e.isDefined(y);this.loaded||(this._hasMin=this._hasMin||x,this._hasMax=this._hasMax||z);var v=this.minScale,w=this.maxScale;this.minScale=(x?r:this.minScale)||0;this.maxScale=(z?y:this.maxScale)||0;if(v!==this.minScale||w!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var r=void 0===this._resumedOnce,y=this.className,x=this._attrs,z=this.getNode(),v;if(r){this._resumedOnce=!0;if(y&&z){var w=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+y+"(\\s|$)","i")).test(w)||z.setAttribute("class",w+((w?" ":"")+y))}if(x&&z)for(v in x)x.hasOwnProperty(v)&&z.setAttribute(v,x[v])}this._refreshRT();this.onResume({firstOccurrence:r});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var r=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();r!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(r){return r?t.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(r,y){if(!(r||this._map&&this._map.loaded))return!1;var x=this._map;r=r||x.getScale();var z=this.minScale,v=this.maxScale,w=!z,u=!v,A;y&&(A=x.width>x.height?x.width:x.height);w||(r<=z?w=!0:y&&(w=Math.abs(z-r)/z<1/
A));u||(r>=v?u=!0:y&&(u=Math.abs(v-r)/v<1/A));return w&&u},getAttributionData:function(){var r=this.attributionDataUrl,y=new d(l._dfdCanceller);this.hasAttributionData&&r?(y._pendingDfd=k({url:r,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),y._pendingDfd.then(function(x){y.callback(x)},function(x){y.errback(x)})):(r=Error("Layer does not have attribution data"),r.log=!!q.isDebug,y.errback(r));return y},getResourceInfo:function(){var r=this.resourceInfo;return b.isString(r)?h.fromJson(r):
b.clone(r)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(r,y){var x=this.getNode();if("data-reference"===r&&11>f("ie"))return this;x&&(null==y?x.removeAttribute(r):x.setAttribute(r,y));this._attrs&&(null==y?delete this._attrs[r]:this._attrs[r]=y);return this},setRefreshInterval:function(r){var y=this.refreshInterval;this.refreshInterval=r;this._toggleRT(!1);r&&this._toggleRT(!0);if(y!==r)this.onRefreshIntervalChange();return this},_toggleRT:function(r){r&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(r){var y=
this._refreshTS;y&&(r=this._reCheckTS.test(r)?r.replace(this._reReplaceTS,"$$$1"+y):r+((-1===r.indexOf("?")?"?":"\x26")+"_ts\x3d"+y));return r},setNormalization:function(r){this.normalization=r},setVisibility:function(r){this.visible!==r&&(this.visible=r,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",r?null:"")},onLoad:function(){},onAttach:function(r){},onDetach:function(r){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});b.setObject("layers.Layer",t,c);return t})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,q,a,b,d,h){D=D([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var f=this.constructor,g=this.constructor._meta.parents,
c=[{}],e={},k,l=function(n,p){q.isArray(n)||(n=[n]);for(var t=0;t<n.length;t++){var r=n[t];r._meta&&r._meta.parents&&l(r._meta.parents,p);r.prototype._eventMap&&p.push(q.mixin({},r.prototype._eventMap))}return p};if(!f._onMap){l(g,c);c.push(this._eventMap);g=q.mixin.apply(this,c);for(m in this)/^on\w/.test(m)&&q.isFunction(this[m])&&(c=this._hyphenLower(m).toLowerCase(),g[c]||(e[c]={method:m}));for(k in g){var m=this._onCamelCase(k);e[k]={method:m,argKeys:g[k]}}f._onMap=e;return f._onMap}},on:function(f,
g){if(-1<f.indexOf(",")){for(var c=f.split(/\s*,\s*/),e=c.length,k=[];e--;)k.push(this.on(c[e],g));k.remove=function(){for(var n=0;n<k.length;n++)k[n].remove()};return k}c=this.constructor._onMap||this.registerConnectEvents();e="string"==typeof f&&f.toLowerCase();var l=this._onCamelCase(e),m=c&&c[e];return(l=m&&m.method||this[l]&&q.isFunction(this[l])&&l)?m&&q.isArray(m.argKeys)?(c=this._onArr2Obj(g,c[e].argKeys),a.after(this,l,c,!0)):a.after(this,l,function(n){n=n||{};n.target||(n.target=this);g.call(this,
n)},!0):this.inherited(arguments)},emit:function(f,g){var c,e,k=f.toLowerCase();var l=this._onCamelCase(f);var m=this.constructor._onMap||this.registerConnectEvents();l=(e=m&&m[k]&&m[k].method||q.isFunction(this[l])&&l)&&this[e];e&&m&&m[k]&&this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},m[k].argKeys)(g);g=g||{};g.target||(g.target=this);if(l){var n=c&&c.length?c:[g];n=l.apply(this,n)}this.inherited(arguments,[f,g]);return n},_onObj2Arr:function(f,g){if(g){var c=this;return function(e){var k,
l=[],m=g.length;for(k=0;k<m;k++)l[k]=e[g[k]];f.apply(c,l)}}return f},_onArr2Obj:function(f,g){if(g){var c=this;return function(){var e,k={},l=arguments.length;for(e=0;e<l;e++)k[g[e]]=arguments[e];k.target||(k.target=c);f.call(c,k)}}return f},_hyphenLower:function(f){return f.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(g,c){return(c?"-":"")+g.toLowerCase()})},_onCamelCase:function(f){return"on"+f.substr(0,1).toUpperCase()+f.substr(1).replace(/\-([a-z])/g,function(g,c){return c.toUpperCase()})}});
return h.Evented=D})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y){function x(U){U=new h(U);return(U.host+(U.port?":"+U.port:"")).toLowerCase()}function z(U){return this._xhr?this._xhr.getResponseHeader(U):
null}function v(U,la){var V=l.objectToQuery(U.content);V&&(U.url+=(-1===U.url.indexOf("?")?"?":"\x26")+V);if(2E3<U.url.length){if("data:"!==U.url.toLowerCase().slice(0,5))return V=new b,V.reject(d.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),V;if(3E6<U.url.length)return V=new b,V.reject(d.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),V}var R=new Image;la.allowImageDataAccess&&
(R.crossOrigin=U.withCredentials?"use-credentials":"anonymous");var ha=!1,S=new b(function(X){ha=!0;R.onload=R.onerror=R.onabort=null;R.src=""});V=function(X){R.onload=R.onerror=R.onabort=null;ha||S.reject(Error("Unable to load the resource"))};R.onload=function(){R.onload=R.onerror=R.onabort=null;ha||S.resolve(this)};R.onerror=V;R.onabort=V;R.alt="";R.src=U.url;return S}function w(U,la,V,R){var ha=!1,S=!1,X=!1;if(t.isDefined(la))if(d.isObject(la)){ha=!!la.useProxy;S=!!la.usePost;X=!!la.returnProgress;
var ka=la.crossOrigin}else ha=!!la;U=d.mixin({},U);delete U._credential;U._ssl&&(U.url=U.url.replace(/^http:/i,"https:"));10>p("ie")&&!ca.test(U.url)&&(U.url=encodeURI(U.url));var oa=U.content,ta=U.url,xa=V&&U.form,O=L;ka=t.isDefined(ka)?ka:O.useCors;U.load=function(wa){if(wa){if(wa.error){var Na=d.mixin(Error(),wa.error);Na.log=!!a.isDebug}else"error"===wa.status&&(Na=d.mixin(Error(),wa),Na.log=!!a.isDebug);Na&&(U.failOk=!Na.log,t.isDefined(Na.httpCode)||(Na.httpCode=Na.code))}return Na||wa};U.error=
function(wa,Na){Na&&Na.xhr&&Na.xhr.abort();wa instanceof Error||(wa=d.mixin(Error(),wa));wa.log=!!a.isDebug;U.failOk=!wa.log;O.errorHandler(wa,Na);return wa};U._token&&(U.content=U.content||{},U.content.token=U._token);var Z=0;if(oa&&ta){var fa=l.objectToQuery(oa);Z=fa.length+ta.length+1;p("esri-url-encodes-apostrophe")&&(Z=fa.replace(/'/g,"%27").length+ta.length+1)}U.timeout=t.isDefined(U.timeout)?U.timeout:O.timeout;U.handleAs=U.handleAs||"json";try{var ra=ka&&r.canUseXhr(U.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(U.url),
pa=r.hasSameOrigin(U.url,window.location.href)||ra,W=S||V||Z>O.postLength?!0:!1,T=pa||-1===U.handleAs.indexOf("json")||!U.callbackParamName||V?!1:!0,da=r.getProxyRule(U.url)||O.alwaysUseProxy||ha||!("image"===U.handleAs&&!la.allowImageDataAccess||T&&!W||pa)?!0:!1;V&&!p("esri-file-upload")&&!da&&ra&&(da=!0);if(da){var na=r.getProxyUrl(ta,ka);var ja=na.path;na._xo&&(ra=!0);!W&&ja.length+1+Z>O.postLength&&(W=!0);U.url=ja+"?"+ta;if(W)U.content=d.mixin(na.query||{},oa);else{var N=l.objectToQuery(d.mixin(na.query||
{},oa));N&&(U.url+="?"+N);U.content=null}}if(!T||W||da){var P=U.headers;!ra||P&&P.hasOwnProperty("X-Requested-With")||(P=U.headers=P||{},P["X-Requested-With"]=null);if(V){var ba=U.callbackParamName||"callback.html",ia=U.callbackElementName||"textarea",qa,za,Ca=xa.elements?xa.elements.length:0;if(oa=U.content)for(qa in oa.token&&-1<ta.toLowerCase().indexOf("/sharing/servers/")&&(ta+=(-1===ta.indexOf("?")?"?":"\x26")+"token\x3d"+oa.token,U.url=da?ja+"?"+ta:ta,delete oa.token),oa){var Ha=oa[qa];if(t.isDefined(Ha)){var Da=
null;for(za=0;za<Ca;za++){var Ja=xa.elements[za];if(Ja.name===qa){Da=Ja;break}}Da?Da.value=Ha:R?xa.append(qa,Ha):xa.appendChild(k.create("input",{type:"hidden",name:qa,value:Ha}))}}if(p("esri-file-upload")){q.forEach(xa.elements,function(wa){wa.name===ba&&xa.removeChild(wa)});var va=R?xa:new FormData(xa);if(11<=p("safari")&&"entries"in va&&"delete"in va){R=[];for(var Ga=va.entries(),Aa=Ga.next();!Aa.done;){var Ea=Aa.value;Ea[1]instanceof File&&""===Ea[1].name&&R.push(Ea[0]);Aa=Ga.next()}R.forEach(function(wa){va["delete"](wa)})}U.contentType=
!1;U.postData=va;delete U.form}else{xa.enctype="multipart/form-data";9>p("ie")&&(xa.encoding="multipart/form-data");xa.method="post";q.some(xa.elements,function(wa){return wa.name===ba})||xa.appendChild(k.create("input",{type:"hidden",name:ba,value:ia}));if(-1!==ta.toLowerCase().indexOf("addattachment")||-1!==ta.toLowerCase().indexOf("updateattachment"))ta+=(-1===ta.indexOf("?")?"?":"\x26")+ba+"\x3d"+ia,U.url=da?ja+"?"+ta:ta;delete U.content}}if(ra&&!U.hasOwnProperty("withCredentials")&&"with-credentials"===
L.useCors){ta=da?ja:ta;var Wa=r.canUseXhr(ta,!0),Ia=-1<Wa?L.corsEnabledServers[Wa]:null;if(Ia&&Ia.hasOwnProperty("withCredentials"))Ia.withCredentials&&(U.withCredentials=!0);else if(m.id){var Qa=m.id.findServerInfo(ta);Qa&&Qa.webTierAuth&&(U.withCredentials=!0)}}U=H?H(U):U;if("image"===U.handleAs)return v(U,la);if(W){if(V&&!p("esri-file-upload")){var Ka=new b(function(){Oa.cancel()});var Oa=e.post(U.url,U).then(function(wa){Ka.resolve(wa)}).otherwise(function(wa){Ka.reject(wa)});Ka.addCallback(function(wa){return U.load(wa)});
Ka.addErrback(function(wa){return U.error(wa)});return Ka}!da&&p("safari")&&(U.url+=(-1===U.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+aa++);if(X){U.uploadProgress=!0;U.data=U.postData;U.query=U.content;Ka=new b(function(){Va.cancel()});var Va=g.post(U.url,U).then(function(wa){Ka.resolve(wa)},function(wa){Ka.reject(wa)},function(wa){Ka.progress({transferType:wa.transferType,loaded:wa.loaded,total:wa.total})});Ka.addCallback(function(wa){return U.load(wa)});Ka.addErrback(function(wa){return U.error(wa)});
return Ka}return f.post(U)}return f.get(U)}U=H?H(U):U;U.jsonp=U.callbackParamName;U.query=U.content;Ka=new b(function(){Pa.cancel()});var Pa=c.get(U.url,U).then(function(wa){Ka.resolve(wa)}).otherwise(function(wa){Ka.reject(wa)});Ka.addCallback(function(wa){return U.load(wa)});Ka.addErrback(function(wa){return U.error(wa)});return Ka}catch(wa){return Ka=new b,Ka.errback(U.error(wa)),Ka}}function u(U){var la=L.corsStatus,V=r.canUseXhr(U,!0);-1<V&&L.corsEnabledServers.splice(V,1);var R=new b;R.reject({log:!!a.isDebug});
la[x(U)]=R.promise;return V}function A(U){var la=L.corsStatus;try{var V=x(U);if(L.corsDetection&&L.useCors&&p("esri-cors")&&U&&-1!==U.toLowerCase().indexOf("/rest/services")&&!r.hasSameOrigin(U,window.location.href)&&!r.canUseXhr(U)){if(la[V]&&!la[V].isCanceled())return la[V];var R=new b(y._dfdCanceller);la[V]=R.promise;var ha=f.get({url:U.substring(0,U.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*L.corsDetectionTimeout});
R._pendingDfd=ha;ha.then(function(S){S?(r.canUseXhr(U)||L.corsEnabledServers.push(V),R.resolve()):R.reject()},function(S){R.reject(S)});return R.promise}}catch(S){}return ea}function G(U){H=U}function B(U,la,V,R){function ha(pa){pa._pendingDfd=w(V,R,O,xa);if(!pa._pendingDfd){pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;var W=Error("Deferred object is missing");W.log=!!a.isDebug;pa.errback(W);pa._pendingDfd=null;return pa}pa._pendingDfd.addCallback(function(T){if(!T)return T;var da=pa._pendingDfd&&
pa._pendingDfd.ioArgs&&pa._pendingDfd.ioArgs.xhr;if(!da)return T;if(da=da.getResponseHeader("Content-Type"))if(da=da.toLowerCase(),-1===da.indexOf("text/plain")&&-1===da.indexOf("application/json"))return T;if(T instanceof ArrayBuffer&&750>=T.byteLength)da=new Blob([T]);else if(T instanceof Blob&&750>=T.size)da=T;else return T;var na=new b,ja=new FileReader;ja.readAsText(da);ja.onloadend=function(){if(!ja.error)try{var N=JSON.parse(ja.result);if(N.error)var P=N.error}catch(ba){}P?(P=d.mixin(Error(),
P),P.log=!!a.isDebug,null==P.httpCode&&(P.httpCode=P.code),na.reject(P)):na.resolve(T)};return na.promise}).addCallback(function(T){pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;R.returnFullResponse&&(T={data:T,_xhr:pa.ioArgs&&pa.ioArgs.xhr,getHeader:z});pa.callback(T);pa._pendingDfd=null}).addErrback(function(T){if(T){var da=T.code;var na=T.subcode;var ja=(ja=T.messageCode)&&ja.toUpperCase()}if(T&&403==da&&(4==na||T.message&&-1<T.message.toLowerCase().indexOf("ssl")&&-1===T.message.toLowerCase().indexOf("permission"))){if(!V._ssl){V._ssl=
V._sslFromServer=!0;B(pa,!0,V,R);return}}else if(T&&415==T.status){if(u(V.url),!V._err415){V._err415=1;B(pa,!0,V,R);return}}else if(m.id&&-1!==q.indexOf(m.id._errorCodes,da)&&!m.id._isPublic(V.url)&&!X&&(403!=da||-1===q.indexOf(Q,ja)&&(!t.isDefined(na)||2==na&&V._token))){pa._pendingDfd=m.id.getCredential(V.url,{token:V._token,error:T});pa._pendingDfd.addCallback(function(N){V._token=N.token;V._credential=N;V._ssl=V._sslFromServer||N.ssl;B(pa,!0,V,R)}).addErrback(function(N){pa.errback(N);pa._pendingDfd=
null});return}pa.ioArgs=pa._pendingDfd&&pa._pendingDfd.ioArgs;pa.isFulfilled()||pa.errback(T);pa._pendingDfd=null}).then(null,null,function(T){pa.progress(T)})}var S=V.form,X=R.disableIdentityLookup,ka=R._preLookup,oa=!1;if(p("esri-workers")&&!1!==L.useWorkers)if(!0===R.useWorkers||!0===L.useWorkers)oa=!0;else if(R.workerOptions){var ta=R.workerOptions;if(ta.callback||ta.worker&&ta.worker.worker instanceof Worker)oa=!0}var xa=S&&p("esri-file-upload")&&S instanceof FormData,O=S&&(S.elements?q.some(S.elements,
function(pa){return"file"===pa.type}):xa),Z=-1!==V.url.toLowerCase().indexOf("token\x3d")||V.content&&V.content.token||O&&q.some(S.elements,function(pa){return"token"===pa.name})?1:0;if(!la){U.addCallback(function(pa){if((/\/sharing\/rest\/accounts\/self/i.test(V.url)||/\/sharing\/rest\/portals\/self/i.test(V.url))&&!Z&&!V._token&&pa&&pa.user&&pa.user.username){L.webTierAuthServers.push(x(V.url));pa=L.corsEnabledServers;var W=r.canUseXhr(V.url,!0),T={host:x(V.url),withCredentials:!0};if(-1===W)pa.push(T);
else{var da=pa[W];da instanceof RegExp?(T.host=da,pa.splice(W,1,T)):"object"===typeof da?da.withCredentials=!0:pa.splice(W,1,T)}}if(pa=V._credential)if(W=(W=m.id.findServerInfo(pa.server))&&W.owningSystemUrl)W=W.replace(/\/?$/,"/sharing"),(pa=m.id.findCredential(W,pa.userId))&&-1===m.id._getIdenticalSvcIdx(W,pa)&&pa.resources.splice(0,0,W)});U.addBoth(function(pa){delete V._credential;!pa||p("ie")&&pa.nodeType||(pa._ssl=V._ssl)});var fa=V.load,ra=V.error;fa&&U.addCallback(function(pa){var W=U._pendingDfd;
W=W&&W.ioArgs;return fa.call(W&&W.args,pa,W)});ra&&U.addErrback(function(pa){var W=U._pendingDfd;W=W&&W.ioArgs;return ra.call(W&&W.args,pa,W)})}!m.id||Z||V._token||m.id._isPublic(V.url)||X&&!ka||!(la=m.id.findCredential(V.url))||(V._token=la.token,V._ssl=la.ssl);oa?R.workerOptions&&R.workerOptions.worker?(F||(F=f),f=R.workerOptions.worker,ha(U)):D(["./workers/RequestClient"],function(pa){F||(F=f);if(R.workerOptions){var W=R.workerOptions;f=pa.getClient(W.callback,W.cbFunction)}else f=pa.getClient();
ha(U)}):(F&&(f=F,F=null),ha(U));return U}function E(U,la){U.url=r.fixUrl(U.url);la=la||{};var V=new b(y._dfdCanceller),R=A(U.url);V._pendingDfd=R;R.always(function(ha){ha&&"cancel"===ha.dojoType?V.reject(ha):B(V,!1,U,la)});return V}var F=null,H,L=n.defaults.io,Q=["COM_0056","COM_0057","SB_0008"],aa=0,ca=/%[0-9A-F]{2}/i,ea=function(){var U=new b;U.resolve();return U.promise}();E._makeRequest=w;E._processRequest=B;E._disableCors=u;E._detectCors=A;E.setRequestPreCallback=G;m.request=E;m._makeRequest=
w;m._processRequest=B;m._disableCors=u;m._detectCors=A;m.setRequestPreCallback=G;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,q,a,b,d,h){function f(){var r=document.createElement("iframe");r.name="esri_core_jsonp_iframe";r.style.display="none";r.setAttribute("sandbox","allow-scripts");if(!h("ff")&&"srcdoc"in r){var y=D.toUrl("dojo/dojo.js"),x=d.replace("../../../dojo/dojo.js",y);
y=y.slice(0,-7);x=x.replace("../../../dojo/",y);r.srcdoc=x}else x=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===x.indexOf("https:")&&(x=x.replace("https:","http:")),r.src=x;document.body.appendChild(r);return r}function g(){var r=new MessageChannel;r.port1.addEventListener("message",c);r.port1.start();return r}function c(r){var y=r.data;if("ready"===y){y=0;for(var x=p;y<x.length;y++)r=x[y],k(r,m);p=null}else if(r=t[y.id])delete t[y.id],y.isError?r.dfd.reject(Error(y.message)):r.dfd.resolve(y.response)}
function e(r,y){r.addEventListener("load",function(){r.contentWindow.postMessage("init","*",[y.port2])})}function k(r,y){t[r.message.id]=r;y.port1.postMessage(r.message)}Object.defineProperty(q,"__esModule",{value:!0});var l,m,n=0,p=[],t={};q.get=function(r,y){if(!h("esri-script-sandbox"))return b.get(r,y);var x=null;y&&(x={jsonp:y.jsonp,preventCache:y.preventCache,query:y.query,timeout:y.timeout});var z=new a(function(){if(p){var w=p.indexOf(v);-1<w&&p.splice(w,1)}else v.message.id in t&&delete t[v.message.id]}),
v={dfd:z,message:{id:"id"+(++n+Math.random()),url:r,options:x}};l||(l=f(),m=g(),e(l,m));p?p.push(v):k(v,m);return z.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,q,a,b,d,h,f,g,c,e,k){function l(A,G){A.canDelete&&r._remove(A.id,G.options.frameDoc,!0)}function m(A){u&&u.length&&(d.forEach(u,function(G){r._remove(G.id,G.frameDoc);G.frameDoc=null}),u=[]);
return A.options.jsonp?!A.data:!0}function n(A){return!!this.scriptLoaded}function p(A){return(A=A.options.checkString)&&eval("typeof("+A+') !\x3d\x3d "undefined"')}function t(A,G){if(this.canDelete){var B=this.response.options;u.push({id:this.id,frameDoc:B.ioArgs?B.ioArgs.frameDoc:B.frameDoc});B.ioArgs&&(B.ioArgs.frameDoc=null);B.frameDoc=null}G?this.reject(G):this.resolve(A)}function r(A,G,B){var E=a.parseArgs(A,a.deepCopy({},G));A=E.url;G=E.options;var F=a.deferred(E,l,m,G.jsonp?null:G.checkString?
p:n,t);h.mixin(F,{id:y+x++,canDelete:!1});G.jsonp&&((new RegExp("[?\x26]"+G.jsonp+"\x3d")).test(A)||(A+=(~A.indexOf("?")?"\x26":"?")+G.jsonp+"\x3d"+(G.frameDoc?"parent.":"")+y+"_callbacks."+F.id),F.canDelete=!0,w[F.id]=function(Q){E.data=Q;F.handleResponse(E)});a.notify&&a.notify.emit("send",E,F.promise.cancel);if(!G.canAttach||G.canAttach(F)){var H=r._attach(F.id,A,G.frameDoc,function(Q){if(!(Q instanceof Error)){var aa=Error("Error loading "+(Q.target?Q.target.src:"script"));aa.source=Q;Q=aa}F.reject(Q);
r._remove(F.id,G.frameDoc,!0)});if(!G.jsonp&&!G.checkString)var L=f(H,z,function(Q){if("load"===Q.type||v.test(H.readyState))L.remove(),F.scriptLoaded=Q})}q(F);return B?F:F.promise}e.add("script-readystatechange",function(A,G){return"undefined"!==typeof G.createElement("script").onreadystatechange&&("undefined"===typeof A.opera||"[object Opera]"!==A.opera.toString())});var y=D.id.replace(/[\/\.\-]/g,"_"),x=0,z=e("script-readystatechange")?"readystatechange":"load",v=/complete|loaded/,w=b.global[y+
"_callbacks"]={},u=[];r.get=r;r._attach=function(A,G,B,E){B=B||k.doc;var F=B.createElement("script");if(E)f.once(F,"error",E);F.type="text/javascript";try{F.src=G}catch(H){E&&E(F)}F.id=A;F.async=!0;F.charset="utf-8";return B.getElementsByTagName("head")[0].appendChild(F)};r._remove=function(A,G,B){c.destroy(g.byId(A,G));w[A]&&(B?w[A]=function(){delete w[A]}:delete w[A])};r._callbacksProperty=y+"_callbacks";return r})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l){function m(v){return!this.isFulfilled()}function n(v){return!!this._finished}function p(v,w){if(!w)try{var u=v.options,A=r.doc(r._frame),G=u.handleAs;if("html"!==G){if("xml"===G)if("html"===A.documentElement.tagName.toLowerCase()){g("a",A.documentElement).orphan();var B=A.documentElement.innerText||A.documentElement.textContent;B=B.replace(/>\s+</g,"\x3e\x3c");v.text=h.trim(B)}else v.data=A;else v.text=A.getElementsByTagName("textarea")[0].value;d(v)}else v.data=
A}catch(E){w=E}w?this.reject(w):this._finished?this.resolve(v):this.reject(Error("Invalid dojo/request/iframe request state"))}function t(v){this._callNext()}function r(v,w,u){var A=b.parseArgs(v,b.deepCreate(z,w),!0);v=A.url;w=A.options;if("GET"!==w.method&&"POST"!==w.method)throw Error(w.method+" not supported by dojo/request/iframe");r._frame||(r._frame=r.create(r._iframeName,x+"();"));v=b.deferred(A,null,m,n,p,t);v._callNext=function(){this._calledNext||(this._calledNext=!0,r._currentDfd=null,
r._fireNextRequest())};v._legacy=u;r._dfdQueue.push(v);r._fireNextRequest();a(v);return u?v:v.promise}var y=D.id.replace(/[\/\.\-]/g,"_"),x=y+"_onload";l.global[x]||(l.global[x]=function(){var v=r._currentDfd;if(v){var w=e.byId(v.response.options.form)||v._tmpForm;if(w){for(var u=v._contentToClean,A=0;A<u.length;A++)for(var G=u[A],B=0;B<w.childNodes.length;B++){var E=w.childNodes[B];if(E.name===G){k.destroy(E);break}}v._originalAction&&w.setAttribute("action",v._originalAction);v._originalMethod&&
(w.setAttribute("method",v._originalMethod),w.method=v._originalMethod);v._originalTarget&&(w.setAttribute("target",v._originalTarget),w.target=v._originalTarget)}v._tmpForm&&(k.destroy(v._tmpForm),delete v._tmpForm);v._finished=!0}else r._fireNextRequest()});var z={method:"POST"};r.create=function(v,w,u){if(l.global[v])return l.global[v];if(l.global.frames[v])return l.global.frames[v];u||(c("config-useXDomain")&&c("config-dojoBlankHtmlUrl"),u=c("config-dojoBlankHtmlUrl")||q.toUrl("dojo/resources/blank.html"));
w=k.place('\x3ciframe id\x3d"'+v+'" name\x3d"'+v+'" src\x3d"'+u+'" onload\x3d"'+w+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',l.body());return l.global[v]=w};r.doc=function(v){if(v.contentDocument)return v.contentDocument;var w=v.name;if(w){var u=l.doc.getElementsByTagName("iframe");if(v.document&&u[w].contentWindow&&u[w].contentWindow.document)return u[w].contentWindow.document;if(l.doc.frames[w]&&l.doc.frames[w].document)return l.doc.frames[w].document}return null};
r.setSrc=function(v,w,u){v=l.global.frames[v.name];v.contentWindow&&(v=v.contentWindow);try{u?v.location.replace(w):v.location=w}catch(A){}};r._iframeName=y+"_IoIframe";r._notifyStart=function(){};r._dfdQueue=[];r._currentDfd=null;r._fireNextRequest=function(){try{if(!r._currentDfd&&r._dfdQueue.length){do var v=r._currentDfd=r._dfdQueue.shift();while(v&&(v.canceled||v.isCanceled&&v.isCanceled())&&r._dfdQueue.length);if(!v||v.canceled||v.isCanceled&&v.isCanceled())r._currentDfd=null;else{var w=v.response,
u=w.options,A=v._contentToClean=[],G=e.byId(u.form),B=b.notify,E=u.data||null;if(!v._legacy&&"POST"===u.method&&!G)G=v._tmpForm=k.create("form",{name:y+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body());else if("GET"===u.method&&G&&-1<w.url.indexOf("?")){var F=w.url.slice(w.url.indexOf("?")+1);E=h.mixin(f.queryToObject(F),E)}if(G){if(!v._legacy){var H=G;do H=H.parentNode;while(H&&H!==l.doc.documentElement);H||(G.style.position="absolute",G.style.left="-1000px",G.style.top=
"-1000px",l.body().appendChild(G));G.name||(G.name=y+"_form")}if(E){H=function(la,V){k.create("input",{type:"hidden",name:la,value:V},G);A.push(la)};for(var L in E){var Q=E[L];if(h.isArray(Q)&&1<Q.length)for(F=0;F<Q.length;F++)H(L,Q[F]);else{var aa=g("input[name\x3d'"+L+"']",G);-1==aa.indexOf()?H(L,Q):aa.val(Q)}}}var ca=G.getAttributeNode("action"),ea=G.getAttributeNode("method"),U=G.getAttributeNode("target");w.url&&(v._originalAction=ca?ca.value:null,ca?ca.value=w.url:G.setAttribute("action",w.url));
v._legacy?ea&&ea.value||(ea?ea.value=u.method:G.setAttribute("method",u.method)):(v._originalMethod=ea?ea.value:null,ea?ea.value=u.method:G.setAttribute("method",u.method));v._originalTarget=U?U.value:null;U?U.value=r._iframeName:G.setAttribute("target",r._iframeName);G.target=r._iframeName;B&&B.emit("send",w,v.promise.cancel);r._notifyStart(w);G.submit()}else u="",w.options.data&&(u=w.options.data,"string"!==typeof u&&(u=f.objectToQuery(u))),H=w.url+(-1<w.url.indexOf("?")?"\x26":"?")+u,B&&B.emit("send",
w,v.promise.cancel),r._notifyStart(w),r.setSrc(r._frame,H,!0)}}}catch(la){v.reject(la)}};b.addCommonMethods(r,["GET","POST"]);return r})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(D,q,a,b,d){function h(c){for(;c.childNodes[0]&&1==c.childNodes[0].nodeType;)c=c.childNodes[0];return c}function f(c,e){"string"==typeof c?(c=b.toDom(c,e&&e.ownerDocument),11==c.nodeType&&(c=c.childNodes[0])):1==c.nodeType&&
c.parentNode&&(c=c.cloneNode(!1));return c}var g=D.NodeList;q.extend(g,{_placeMultiple:function(c,e){for(var k="string"==typeof c||c.nodeType?D(c):c,l=[],m=0;m<k.length;m++)for(var n=k[m],p=this.length,t=p-1,r;r=this[t];t--)0<m&&(r=this._cloneNode(r),l.unshift(r)),t==p-1?b.place(r,n,e):n.parentNode.insertBefore(r,n),n=r;l.length&&(l.unshift(0),l.unshift(this.length-1),Array.prototype.splice.apply(this,l));return this},innerHTML:function(c){return arguments.length?this.addContent(c,"only"):this[0].innerHTML},
text:function(c){if(arguments.length){for(var e=0,k;k=this[e];e++)1==k.nodeType&&d.set(k,"textContent",c);return this}var l="";for(e=0;k=this[e];e++)l+=d.get(k,"textContent");return l},val:function(c){if(arguments.length){for(var e=q.isArray(c),k=0,l;l=this[k];k++){var m=l.nodeName.toUpperCase(),n=l.type,p=e?c[k]:c;if("SELECT"==m)for(m=l.options,n=0;n<m.length;n++){var t=m[n];t.selected=l.multiple?-1!=a.indexOf(c,t.value):t.value==p}else"checkbox"==n||"radio"==n?l.checked=l.value==p:l.value=p}return this}if((l=
this[0])&&1==l.nodeType){c=l.value||"";if("SELECT"==l.nodeName.toUpperCase()&&l.multiple){c=[];m=l.options;for(n=0;n<m.length;n++)t=m[n],t.selected&&c.push(t.value);c.length||(c=null)}return c}},append:function(c){return this.addContent(c,"last")},appendTo:function(c){return this._placeMultiple(c,"last")},prepend:function(c){return this.addContent(c,"first")},prependTo:function(c){return this._placeMultiple(c,"first")},after:function(c){return this.addContent(c,"after")},insertAfter:function(c){return this._placeMultiple(c,
"after")},before:function(c){return this.addContent(c,"before")},insertBefore:function(c){return this._placeMultiple(c,"before")},remove:g.prototype.orphan,wrap:function(c){if(this[0]){c=f(c,this[0]);for(var e=0,k;k=this[e];e++){var l=this._cloneNode(c);k.parentNode&&k.parentNode.replaceChild(l,k);h(l).appendChild(k)}}return this},wrapAll:function(c){if(this[0]){c=f(c,this[0]);this[0].parentNode.replaceChild(c,this[0]);c=h(c);for(var e=0,k;k=this[e];e++)c.appendChild(k)}return this},wrapInner:function(c){if(this[0]){c=
f(c,this[0]);for(var e=0;e<this.length;e++){var k=this._cloneNode(c);this._wrap(q._toArray(this[e].childNodes),null,this._NodeListCtor).wrapAll(k)}}return this},replaceWith:function(c){c=this._normalize(c,this[0]);for(var e=0,k;k=this[e];e++)this._place(c,k,"before",0<e),k.parentNode.removeChild(k);return this},replaceAll:function(c){c=D(c);for(var e=this._normalize(this,this[0]),k=0,l;l=c[k];k++)this._place(e,l,"before",0<k),l.parentNode.removeChild(l);return this},clone:function(){for(var c=[],
e=0;e<this.length;e++)c.push(this._cloneNode(this[e]));return this._wrap(c,this,this._NodeListCtor)}});g.prototype.html||(g.prototype.html=g.prototype.innerHTML);return g})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,q,a){q={_dfdCanceller:function(b){b.canceled=!0;var d=b._pendingDfd;if(!b.isFulfilled()&&d&&!d.isFulfilled()){d.cancel();var h=d.results&&d.results[1]}b._pendingDfd=null;return h},_fixDfd:function(b){var d=b.then;b.then=function(h,f,g){if(h){var c=
h;h=function(e){return e&&e._argsArray?c.apply(null,e):c(e)}}return d.call(this,h,f,g)};return b},_resDfd:function(b,d,h){var f=d.length;1===f?h?b.errback(d[0]):b.callback(d[0]):1<f?(d._argsArray=!0,b.callback(d)):b.callback()}};D.mixin(a,q);return q})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(D,q,a,b,d,h,f,g,c){D=D(null,{declaredClass:"esri.layers.TileInfo",
constructor:function(e){q.mixin(this,e);this.width=this.cols;this.height=this.rows;this._levelToLOD={};e=this.spatialReference;var k=this.origin;e&&(e=this.spatialReference=new f(e.toJson?e.toJson():e));k&&(this.origin=new g(k.toJson?k.toJson():k),!k.spatialReference&&e&&this.origin.setSpatialReference(new f(e.toJson())));this.lods=a.map(this.lods,function(n){return new c(n)});a.forEach(this.lods,function(n){this._levelToLOD[n.level]=n},this);e=!1;k=this.spatialReference;var l=this.origin;if(k&&l){var m=
k._getInfo();m&&(e=k._isWrappable()&&Math.abs(m.origin[0]-l.x)<=m.dx)}this.isWrappable=e;this._initializeUpsampleLevels()},toJson:function(){return h.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(e){return e.toJson()})})},lodAt:function(e){return this._levelToLOD&&this._levelToLOD[e]||
null},updateTileInfo:function(e){var k=this.lodAt(e.level),l=k.resolution*this.width;k=k.resolution*this.height;e.id=e.level+"/"+e.row+"/"+e.col;e.extent||(e.extent=[0,0,0,0]);e.extent[0]=this.origin.x+e.col*l;e.extent[1]=this.origin.y-(e.row+1)*k;e.extent[2]=e.extent[0]+l;e.extent[3]=e.extent[1]+k},upsampleTile:function(e){var k=this._upsampleLevels[e.level];if(!k||-1===k.parentLevel)return!1;e.level=k.parentLevel;e.row=Math.floor(e.row/k.factor+.001);e.col=Math.floor(e.col/k.factor+.001);this.updateTileInfo(e);
return!0},_initializeUpsampleLevels:function(){var e=this.lods;this._upsampleLevels=[];for(var k=null,l=0;l<e.length;l++){var m=e[l];this._upsampleLevels[m.level]={parentLevel:k?k.level:-1,factor:k?k.resolution/m.resolution:0};k=m}}});q.setObject("layers.TileInfo",D,d);return D})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,q,a,b,d){D=D(null,{declaredClass:"esri.layers.LOD",constructor:function(h){q.mixin(this,h)},toJson:function(){return d.fixJson({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});q.setObject("layers.LOD",D,b);return D})},"esri/layers/unitBezier":function(){define([],function(){var D=function(a,b,d,h){function f(n,p){var t;p=null==p?1E-6:p;var r=n;for(t=0;8>t;t++){var y=((e*r+c)*r+g)*r-n;if(Math.abs(y)<p)return r;var x=(3*e*r+2*c)*r+g;if(1E-6>Math.abs(x))break;r-=y/x}x=0;t=1;r=n;if(r<x)return x;if(r>t)return t;for(;x<t;){y=((e*r+c)*r+g)*r;if(Math.abs(y-n)<p)break;n>y?x=r:t=r;r=.5*(t-x)+x}return r}var g=
3*a,c=3*(d-a)-g,e=1-g-c,k=3*b,l=3*(h-b)-k,m=1-k-l;return function(n,p){var t=f(n,p);return((m*t+l)*t+k)*t}},q=/^cubic-bezier\((.*)\)/;D.parse=function(a){var b=D[a]||null;!b&&(a=q.exec(a))&&(a=a[1].split(",").map(function(d){return parseFloat(d.trim())}),4!==a.length||a.some(function(d){return isNaN(d)})||(b=D.apply(D,a)));return b};D.ease=D(.25,.1,.25,1);D.linear=D(0,0,1,1);D.easeIn=D["ease-in"]=D(.42,0,1,1);D.easeOut=D["ease-out"]=D(0,0,.58,1);D.easeInOut=D["ease-in-out"]=D(.42,0,.58,1);return D})},
"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(D,q,a,b,d){return function(h,f){var g=b.mixin({},{url:h,failOk:!0},f);"array-buffer"===f.responseType?(g.handleAs="arraybuffer",delete g.responseType):f.responseType&&(g.handleAs=f.responseType,delete g.responseType);null!==f.query&&(g.content=g.query,delete g.query);if(f.hasOwnProperty("allowImageDataAccess")){var c={allowImageDataAccess:f.allowImageDataAccess};delete g.allowImageDataAccess}var e=
new d(function(){k.isFulfilled()||k.cancel()});var k=a(g,c).then(function(l){e.resolve({data:l})})["catch"](function(l){l&&null!=l.httpCode&&(l.details=l.details||{},l.details.httpStatus=l.httpCode);e.reject(l)});return e.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(D,q,a,b,d,h){function f(g){if(g){if("function"!==typeof g.forEach){var c=Object.keys(g),e=c.map(function(n){return g[n]});
return f(e).then(function(n){var p={};c.forEach(function(t,r){return p[t]=n[r]});return p})}var k=new a,l=[],m=g.length;0===m&&k.resolve(l);g.forEach(function(n){var p={promise:n};l.push(p);n.then(function(t){p.value=t})["catch"](function(t){p.error=t}).then(function(){--m;0===m&&k.resolve(l)})});return k.promise}}Object.defineProperty(q,"__esModule",{value:!0});q.all=function(g){return d(g)};q.filter=function(g,c){var e=g.slice();return d(g.map(function(k,l){return c(k,l)})).then(function(k){return e.filter(function(l,
m){return k[m]})})};q.eachAlways=f;q.create=function(g,c){var e=new a(c);g(function(k){void 0===k&&(k=null);return b(k).then(e.resolve)},e.reject);return e.promise};q.reject=function(g){var c=new a;c.reject(g);return c.promise};q.resolve=function(g){void 0===g&&(g=null);var c=new a;c.resolve(g);return c.promise};q.after=function(g,c){void 0===c&&(c=null);var e=0,k=new a(function(){e&&(clearTimeout(e),e=0)});e=setTimeout(function(){k.resolve(c)},g);return k.promise};q.timeout=function(g,c,e){var k=
0,l=new a(g.cancel);g.then(function(m){l.isFulfilled()||(l.resolve(m),k&&(clearTimeout(k),k=0))});g["catch"](function(m){l.isFulfilled()||(l.reject(m),k&&(clearTimeout(k),k=0))});k=setTimeout(function(){var m=e||new h("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");l.reject(m)},c);return l.promise};q.wrapCallback=function(g){var c=!1,e=new a(function(){return c=!0});g(function(k){c||e.resolve(k)});return e.promise};q.isThenable=function(g){return g&&"function"===typeof g.then};
q.when=function(g){return b(g)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,q,a,b){var d=D.some;return function(h){var f,g;q.isArray(h)?g=h:h&&"object"===typeof h&&(f=h);var c=[];if(f){g=[];for(var e in f)Object.hasOwnProperty.call(f,e)&&(c.push(e),g.push(f[e]));var k={}}else g&&(k=[]);if(!g||!g.length)return(new a).resolve(k);var l=new a;l.promise.always(function(){k=c=null});var m=g.length;d(g,function(n,p){f||c.push(p);b(n,function(t){l.isFulfilled()||
(k[c[p]]=t,0===--m&&l.resolve(k))},l.reject);return l.isFulfilled()});return l.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(D,q,a,b,d){D=function(h){function f(g,c,e){var k=h.call(this,g,c,e)||this;return k instanceof f?k:new f(g,c,e)}a(f,h);f.prototype.toJSON=function(){return{name:this.name,message:this.message,details:b.clone(this.details),dojoType:this.dojoType}};f.fromJSON=function(g){var c=
new f(g.name,g.message,g.details);null!=g.dojoType&&(c.dojoType=g.dojoType);return c};return f}(d);D.prototype.type="error";return D})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,a){q.__proto__=a}||function(q,a){for(var b in a)a.hasOwnProperty(b)&&(q[b]=a[b])};return function(q,a){function b(){this.constructor=q}D(q,a);q.prototype=null===a?Object.create(a):(b.prototype=
a.prototype,new b)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(D,q,a,b,d,h){function f(n){return void 0!==n&&null!==n}function g(n){return f(n)?n:""}function c(n,p,t){var r=t.match(/([^\(]+)(\([^\)]+\))?/i),y=q.trim(r[1]);t=p[n];r=JSON.parse((r[2]?q.trim(r[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,
'":"').replace(/'\s*(,|\})/gi,'"$1'));var x=r.utcOffset;if(-1===l.indexOf(y))y=q.getObject(y),q.isFunction(y)&&(t=y(t,n,p,r));else if("number"===typeof t||"string"===typeof t&&t&&!isNaN(Number(t)))switch(t=Number(t),y){case "NumberFormat":n=q.mixin({},r);p=parseFloat(n.places);if(isNaN(p)||0>p)n.places=Infinity;return b.format(t,n);case "DateString":t=new Date(t);if(r.local||r.systemLocale)return r.systemLocale?t.toLocaleDateString()+(r.hideTime?"":" "+t.toLocaleTimeString()):t.toDateString()+(r.hideTime?
"":" "+t.toTimeString());t=t.toUTCString();r.hideTime&&(t=t.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return t;case "DateFormat":return t=new Date(t),f(x)&&(t=a.add(t,"minute",t.getTimezoneOffset()-x)),d.format(t,r)}return g(t)}function e(n,p){var t;if(p)for(t in n)n.hasOwnProperty(t)&&(void 0===n[t]?delete n[t]:n[t]instanceof Object&&e(n[t],!0));else for(t in n)n.hasOwnProperty(t)&&void 0===n[t]&&delete n[t];return n}function k(n){if(!n||"object"!=typeof n||q.isFunction(n))return n;if(n instanceof
Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Int32Array||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Date)return new n.constructor(n);if(n instanceof ArrayBuffer)return n.slice(0,n.byteLength);if("function"===typeof n.clone)n=n.clone();else if("function"===typeof n.map&&"function"===typeof n.forEach)n=n.map(k);else if("function"===typeof n.notifyChange&&"function"===
typeof n.watch)n=n.clone();else{var p={},t,r={};for(t in n){var y=n[t];var x=!(t in r)||r[t]!==y;if(!(t in p)||p[t]!==y&&x)p[t]=k?k(y):y}n=p}return n}var l=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g;return{equals:function(n,p){return n===p||"number"===typeof n&&isNaN(n)&&"number"===typeof p&&isNaN(p)||q.isFunction((n||{}).getTime)&&q.isFunction((p||{}).getTime)&&n.getTime()==p.getTime()||q.isFunction((n||{}).equals)&&n.equals(p)||q.isFunction((p||{}).equals)&&p.equals(n)||!1},mixin:q.mixin,
valueOf:function(n,p){for(var t in n)if(n[t]==p)return t;return null},stripTags:function(n){if(n){var p=typeof n;if("string"===p)n=n.replace(m,"");else if("object"===p)for(var t in n)(p=n[t])&&"string"===typeof p&&(p=p.replace(m,"")),n[t]=p}return n},substitute:function(n,p,t){if(f(t))if(q.isObject(t)){var r=t.first;var y=t.dateFormat;var x=t.numberFormat}else r=t;if(p&&"{*}"!==p)return q.replace(p,q.hitch({obj:n},function(v,w){var u=w.split(":");return 1<u.length?(w=u[0],u.shift(),c(w,this.obj,u.join(":"))):
y&&-1!==(y.properties||[]).indexOf(w)?c(w,this.obj,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(w)?c(w,this.obj,x.formatter||"NumberFormat"):g(this.obj[w])}));p=[];var z;p.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(z in n)if(t=n[z],y&&-1!==(y.properties||[]).indexOf(z)?t=c(z,n,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(z)&&(t=c(z,n,x.formatter||"NumberFormat")),p.push("\x3ctr\x3e\x3cth\x3e"+z+"\x3c/th\x3e\x3ctd\x3e"+
g(t)+"\x3c/td\x3e\x3c/tr\x3e"),r)break;p.push("\x3c/tbody\x3e\x3c/table\x3e");return p.join("")},filter:function(n,p,t){p=[q.isString(n)?n.split(""):n,t||D.global,q.isString(p)?new Function("item","index","array",p):p];t={};var r;n=p[0];for(r in n)p[2].call(p[r],n[r],r,n)&&(t[r]=n[r]);return t},startsWith:function(n,p,t){t=t||0;return n.indexOf(p,t)===t},endsWith:function(n,p,t){if("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=p.length;n=n.indexOf(p,t);return-1!==
n&&n===t},isDefined:f,fixJson:e,clone:k}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(D,q,a){return function(){function b(d,h,f){this instanceof b&&(this.name=d,this.message=h&&a.substitute(h,f,function(g){return null==g?"":g})||"",this.details=f)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],
function(D,q,a,b){function d(z){return a.normalize(z)}function h(z){return"data:"===z.slice(0,5)}function f(z){return g(z)||y.test(z)}function g(z){return z&&"/"===z[0]&&"/"===z[1]}function c(z){return a.urlToObject(z)}function e(z){if("string"===typeof z)return new b(l(z));z.scheme||(z.scheme=q.appUrl.scheme);return z}function k(z){if(h(z))return null;var v=z.indexOf("://");if(-1===v&&g(z))v=2;else if(-1!==v)v+=3;else return null;v=z.indexOf("/",v);return-1===v?z:z.slice(0,v)}function l(z,v,w){void 0===
v&&(v=q.appBaseUrl);if(g(z))return w&&w.preserveProtocolRelative?z:"http"===q.appUrl.scheme&&q.appUrl.authority===k(z).slice(2)?"http:"+z:"https:"+z;if(y.test(z))return z;"/"===z[0]&&(w=v.indexOf("//"),w=v.indexOf("/",w+2),v=-1===w?v:v.slice(0,w));return n(v,z)}function m(z,v,w){void 0===w&&(w=!1);z=e(z);v=e(v);return w||z.scheme===v.scheme?z.host.toLowerCase()===v.host.toLowerCase()&&z.port===v.port:!1}function n(){for(var z=[],v=0;v<arguments.length;v++)z[v]=arguments[v];if(z&&z.length){v=[];if(f(z[0])){var w=
z[0],u=w.indexOf("//");v.push(w.slice(0,u+1));r.test(z[0])&&(v[0]+="/");z[0]=w.slice(u+2)}else"/"===z[0][0]&&v.push("");z=z.reduce(function(A,G){return G?A.concat(G.split("/")):A},[]);for(w=0;w<z.length;w++)u=z[w],".."===u&&0<v.length?v.pop():!u||"."===u&&0!==v.length||v.push(u);return v.join("/")}}function p(z,v,w){if(!(v&&w&&z&&f(z)))return z;var u=z.indexOf("//"),A=z.indexOf("/",u+2),G=z.indexOf(":",u+2);A=Math.min(0>A?z.length:A,0>G?z.length:G);if(z.slice(u+2,A).toLowerCase()!==v.toLowerCase())return z;
v=z.slice(0,u+2);z=z.slice(A);return""+v+w+z}function t(z,v,w){void 0===v&&(v=q.appBaseUrl);if(!f(z))return z;var u=d(z),A=u.toLowerCase();v=d(v).toLowerCase().replace(/\/+$/,"");if((w=w?d(w).toLowerCase().replace(/\/+$/,""):null)&&0!==v.indexOf(w))return z;for(var G=function(F,H,L){L=F.indexOf(H,L);return-1===L?F.length:L},B=G(A,"/",A.indexOf("//")+2),E=-1;A.slice(0,B+1)===v.slice(0,B)+"/";){E=B+1;if(B===A.length)break;B=G(A,"/",B+1)}if(-1===E||w&&E<w.length)return z;z=u.slice(E);u=v.slice(E-1).replace(/[^/]+/g,
"").length;if(0<u)for(A=0;A<u;A++)z="../"+z;else z="./"+z;return z}Object.defineProperty(q,"__esModule",{value:!0});q.normalize=d;q.canUseXhr=function(z){return a.canUseXhr(z)};q.removeTrailingSlash=function(z){return z.replace(/\/+$/,"")};D=Function("return this")();q.appUrl=new b(D.location);q.appBaseUrl=function(){var z=q.appUrl.path;z=z.substring(0,z.lastIndexOf(z.split("/")[z.split("/").length-1]));return q.appUrl.scheme+"://"+q.appUrl.host+(null!=q.appUrl.port?":"+q.appUrl.port:"")+z}();var r=
/^\s*file:/i,y=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;q.isDataProtocol=h;q.isAbsolute=f;q.isProtocolRelative=g;q.urlToObject=c;q.getOrigin=k;q.makeAbsolute=l;q.hasSameOrigin=m;q.join=n;q.removeFile=function(z){var v=0;if(f(z)){var w=z.indexOf("//");-1!==w&&(v=w+2)}w=z.lastIndexOf("/");return w<v?z:z.slice(0,w+1)};q.addProxy=function(z){return a.addProxy(z)};q.makeData=function(z){return z.isBase64?"data:"+z.mediaType+";base64,"+z.data:"data:"+z.mediaType+","+z.data};var x=/^data:(.*?)(;base64)?,(.*)$/;q.dataComponents=
function(z){return(z=z.match(x))?{mediaType:z[1],isBase64:!!z[2],data:z[3]}:null};q.changeDomain=p;q.read=function(z,v){var w=v&&v.url&&v.url.path;z&&w&&(z=l(z,w,{preserveProtocolRelative:!0}));w=z;var u=v&&v.portal;if(u&&!u.isPortal&&u.urlKey&&u.customBaseUrl){var A=u.urlKey+"."+u.customBaseUrl;w=m(q.appUrl,q.appUrl.scheme+"://"+A)?p(w,u.portalHostname,A):p(w,A,u.portalHostname)}return w};q.write=function(z,v){if(!z)return z;!f(z)&&v&&v.blockedRelativeUrls&&v.blockedRelativeUrls.push(z);var w=l(z);
if(v){var u=v.verifyItemRelativeUrls&&v.verifyItemRelativeUrls.rootPath||v.url&&v.url.path;u&&(w=t(w,u,u),w!==z&&v.verifyItemRelativeUrls&&v.verifyItemRelativeUrls.writtenUrls.push(w))}w=(u=v&&v.portal)&&!u.isPortal&&u.urlKey&&u.customBaseUrl?p(w,u.urlKey+"."+u.customBaseUrl,u.portalHostname):w;return w};q.makeRelative=t;q.removeQueryParameters=function(z){z=c(z);Object.keys(z.query||{});return z.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require",
"exports","./WKIDUnitConversion"],function(D,q,a){function b(c){return c.wkid&&!0===d[c.wkid]}Object.defineProperty(q,"__esModule",{value:!0});var d={102113:!0,102100:!0,3857:!0,3785:!0},h={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};D=[-2.0037508342788905E7,2.0037508342788905E7];var f=[-2.0037508342787E7,2.0037508342787E7],g={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:D,origin:f,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:D,origin:f,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:D,origin:f,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:D,origin:f,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};q.equals=function(c,e){if(e){if(c===e)return!0;if(null!=c.wkid||null!=e.wkid)return c.wkid===e.wkid||b(c)&&b(e)||null!=e.latestWkid&&c.wkid===e.latestWkid||null!=c.latestWkid&&e.wkid===c.latestWkid;if(c.wkt&&e.wkt)return c.wkt.toUpperCase()===e.wkt.toUpperCase()}return!1};q.getInfo=function(c){return c.wkid?g[c.wkid]:null};q.isGeographic=function(c){return c.wkid?null==a[c.wkid]:c.wkt?!!/^\s*GEOGCS/i.test(c.wkt):!1};q.isWGS84=function(c){return 4326===
c.wkid};q.isWebMercator=b;q.isWrappable=function(c){return c.wkid&&!0===h[c.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(D){return D})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(D,q,a,b,d,h,f){function g(l){l&&(l=f.getOrigin(l),f.canUseXhr(l)||
-1!==k.indexOf(l)||k.push(l))}function c(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];m=void 0;for(var n=0;n<l.length;++n)f.isProtocolRelative(l[n])?m&&(m=m.split("://")[0]+":"+l[n].trim()):m=f.isAbsolute(l[n])?l[n]:f.join(m,l[n]);return m}function e(l,m,n){var p;if("string"===typeof m){m=f.normalize(m);g(m);var t=f.urlToObject(m);t=d(t.path,{query:{f:"json"},responseType:"json"});var r=p=m}else t=h.resolve({data:m}),p=m.jsonUrl||null,r=n;return t.then(function(y){var x=y.data;y.ssl&&
(p&&(p=p.replace(/^http:/i,"https:")),r&&(r=r.replace(/^http:/i,"https:")));if(x.sources){l.styleUrl=p||null;y=r?f.removeFile(r):f.appBaseUrl;l.styleBase=y;l.style=x;l.styleUrl&&g(l.styleUrl);if(l.source)x=h.resolve();else{b:if(x=x.sources,x.esri)x=x.esri;else{for(var z=0,v=Object.keys(x);z<v.length;z++){var w=v[z];if("vector"===x[w].type){x=x[w];break b}}x=null}x=x.url?e(l,c(y,x.url)):e(l,x,y)}return x}if(x.sources)return h.reject("You must specify the URL or the JSON for a service or for a style.");
l.sourceUrl=p||null;y=r?f.removeTrailingSlash(r)+"/":f.appBaseUrl;l.sourceBase=y;l.source=x;if(x.hasOwnProperty("tileInfo"))z=x;else{z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}};w=(z.xmax-z.xmin)/512;v=[];for(var u=x.hasOwnProperty("minzoom")?parseFloat(x.minzoom):0,A=x.hasOwnProperty("maxzoom")?parseFloat(x.maxzoom):16;u<A;u++){var G=w/Math.pow(2,u);v.push({level:u,scale:Math.floor(3779.527559055118*G),
resolution:G})}w=0;for(A=x.tiles;w<A.length;w++)g(c(y,A[w]));z={capabilities:"TilesOnly",initialExtent:z,fullExtent:z,minScale:v[0].scale,maxScale:v[v.length-1].scale,tiles:x.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:v,spatialReference:{wkid:102100}}}}l.validatedSource=z;l.sourceUrl&&g(l.sourceUrl);x=l.style?h.resolve():null==x.defaultStyles?h.reject():"string"===typeof x.defaultStyles?e(l,c(y,x.defaultStyles,"root.json")):e(l,x.defaultStyles,
c(y,"root.json"));return x})}Object.defineProperty(q,"__esModule",{value:!0});var k=b.defaults&&b.defaults.io.corsEnabledServers||b.request.corsEnabledServers;q.loadMetadata=function(l){var m={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},n="string"===typeof l?[l,null]:[null,l.jsonUrl],p=n[0];n=n[1];var t=p?f.urlToObject(p):null;return e(m,l,n).then(function(){var r={layerDefinition:m.validatedSource,url:p,parsedUrl:t,serviceUrl:m.sourceUrl,
style:m.style,styleUrl:m.styleUrl,spriteUrl:m.style.sprite&&c(m.styleBase,m.style.sprite),glyphsUrl:m.style.glyphs&&c(m.styleBase,m.style.glyphs)};g(r.spriteUrl);g(r.glyphsUrl);return r})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(D){for(var q,a=1,b=arguments.length;a<b;a++){q=arguments[a];for(var d in q)Object.prototype.hasOwnProperty.call(q,d)&&(D[d]=q[d])}return D}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(D,q,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){var r=k.getLogger("esri.layers.support.TilemapCache");return function(y){function x(z){z=y.call(this)||this;z._handles=new e;z._pendingTilemapRequests={};z._availableLevels={};z.levels=5;z.cacheByteSize=2097152;z.request=f;return z}b(x,y);x.prototype.initialize=function(){var z=this;this._tilemapCache=new l(this.cacheByteSize,{sizeOfFunction:function(v){return v.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return z._initializeTilemapDefinition()}),
n.init(this,"layer.tileInfo.lods",function(v){return z._initializeAvailableLevels(v)},!0)]);this._initializeTilemapDefinition()};x.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};x.prototype.castLevels=function(z){return 2>=z?(r.error("Minimum levels for Tilemap is 3, but got ",z),3):z};Object.defineProperty(x.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});x.prototype.getTilemap=function(z,v,w){return this._tilemapFromCache(z,
v,w,this._tmpTilemapDefinition)};x.prototype.fetchTilemap=function(z,v,w,u){var A=this;if(!this._availableLevels[z])return m.reject(new c("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"));var G=this._tmpTilemapDefinition;if(z=this._tilemapFromCache(z,v,w,G))return m.resolve(z);var B=t.tilemapDefinitionId(G),E=this._pendingTilemapRequests[B];E||(E=t.Tilemap.fromDefinition(G,u).then(function(F){A._tilemapCache.set(B,F);delete A._pendingTilemapRequests[B];return F})["catch"](function(F){delete A._pendingTilemapRequests[B];
return m.reject(F)}),this._pendingTilemapRequests[B]=E);return m.create(function(F,H){E.then(F,H)})};x.prototype.getAvailability=function(z,v,w){return this._availableLevels[z]?(z=this.getTilemap(z,v,w))?z.getAvailability(v,w):"unknown":"unavailable"};x.prototype.getAvailabilityUpsample=function(z,v,w,u){u.level=z;u.row=v;u.col=w;z=this.layer.tileInfo;for(z.updateTileInfo(u);;)if(v=this.getAvailability(u.level,u.row,u.col),"unavailable"===v){if(!z.upsampleTile(u))return"unavailable"}else return v};
x.prototype.fetchAvailability=function(z,v,w,u){return this._availableLevels[z]?this.fetchTilemap(z,v,w,u).always(function(A){return A instanceof t.Tilemap?(A=A.getAvailability(v,w),"unavailable"===A?m.reject(new c("tile-map:tile-unavailable","Tile is not available",{level:z,row:v,col:w})):A):A&&"cancel"===A.dojoType?m.reject(A):"unknown"}):m.reject(new c("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"))};x.prototype.fetchAvailabilityUpsample=function(z,v,w,u,A){var G=
this;u.level=z;u.row=v;u.col=w;var B=this.layer.tileInfo;B.updateTileInfo(u);return this.fetchAvailability(z,v,w,A)["catch"](function(E){return E&&"cancel"===E.dojoType?m.reject(E):B.upsampleTile(u)?G.fetchAvailabilityUpsample(u.level,u.row,u.col,u):m.reject(E)})};x.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var z=this.layer.parsedUrl,v=z.query;v&&v.token||!this.layer.token||(v=a({},v,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition=
{service:{url:z.path,query:v?h.objectToQuery(v):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};x.prototype._tilemapFromCache=function(z,v,w,u){z=this._getTilemapDefinition(z,v,w,u);z=t.tilemapDefinitionId(z);return this._tilemapCache.get(z)};x.prototype._getTilemapDefinition=function(z,v,w,u){u.level=z;u.row=v-v%this.size;u.col=w-w%this.size;return u};x.prototype._initializeAvailableLevels=function(z){var v=
this;this._availableLevels={};z&&z.forEach(function(w){return v._availableLevels[w.level]=!0})};d([p.property({constructOnly:!0,type:Number})],x.prototype,"levels",void 0);d([p.cast("levels")],x.prototype,"castLevels",null);d([p.property({readOnly:!0,dependsOn:["levels"],type:Number})],x.prototype,"size",null);d([p.property({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0);d([p.property({constructOnly:!0})],x.prototype,"layer",void 0);d([p.property({constructOnly:!0})],x.prototype,
"request",void 0);return x=d([p.subclass("esri.layers.support.TilemapCache")],x)}(p.declared(g))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(D,q){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(D,q,a,b){var d=arguments.length,h=3>d?q:null===b?b=Object.getOwnPropertyDescriptor(q,a):b,f;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)h=Reflect.decorate(D,q,a,b);else for(var g=D.length-1;0<=g;g--)if(f=D[g])h=(3>d?f(h):3<d?f(q,a,h):f(q,a))||h;return 3<d&&h&&Object.defineProperty(q,a,h),h}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(D,q,a,b,d,h){q=q["default"];D.before(function(g,c){D.hasMixin(g,f)&&b.processPrototype(c)});D.after(function(g){D.hasMixin(g,
f)&&(b.processClass(g),Object.defineProperties(g.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var f=D(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===f)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new q(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var g=[],c=0;c<arguments.length;c++)g.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,g)}},__accessor__:null,postscript:function(g){var c=this.__accessor__;g=c.ctorArgs||g;if(null!=this.getDefaults){var e=this.getDefaults(g||{});this.set(e)}c.initialize();g&&(this.set(g),c.ctorArgs=null);c.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(g){}else h.removeTarget(this),this.__accessor__.destroy()},get:function(g){return a.get(this,g)},hasOwnProperty:function(g){return this.__accessor__?this.__accessor__.has(g):Object.prototype.hasOwnProperty.call(this,g)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(g,c){d.set(this,g,c);return this},watch:function(g,c,e){return h.watch(this,g,c,e)},_clearOverride:function(g){return this.__accessor__.clearOverride(g)},_override:function(g,c){return this.__accessor__.override(g,
c)},_isOverridden:function(g){return this.__accessor__.isOverridden(g)},notifyChange:function(g){this.__accessor__.propertyInvalidated(g)},_get:function(g){return this.__accessor__.internalGet(g)},_set:function(g,c){return this.__accessor__.internalSet(g,c)}});return f})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(D,q,a){function b(g,c){g&&!Array.isArray(g)&&"function"!==typeof g&&(c=g,g=null);g=g||[];c=c||{};return d([this].concat(g),
c)}function d(g,c){g&&!Array.isArray(g)&&"function"!==typeof g&&(c=g,g=null);"function"===typeof g?g=[g]:g||(g=[]);c=c||{};var e;var k=0;for(e=h.length;k<e;k++)h[k](g,c);var l=a(g,c);l.createSubclass=b;k=0;for(e=f.length;k<e;k++)f[k](l);return l}var h=[],f=[];(function(g){g.hasMixin=function(c,e){var k=Array.isArray(c)?c.reduce(function(m,n){return n._meta?m.concat(n._meta.bases):m},[]):c._meta?c._meta.bases:c;if(!k)return!1;if("string"===typeof e)for(var l=k.length-1;0<=l;l--)if(k[l].prototype.declaredClass===
e)return!0;return-1!==k.indexOf(e)};g.safeMixin=function(c,e){return a.safeMixin(c,e)};g.before=function(c){h.push(c)};g.after=function(c){f.push(c)}})(d||(d={}));return d})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");D=function(){function g(c){this.host=c;
this._origin=h.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new f["default"];c=this.host.constructor.__accessorMetadata__;this.metadatas=c.properties;this.autoDestroy=c.autoDestroy}g.prototype.initialize=function(){this.lifecycle=1;d.instanceCreated(this.host,this.metadatas)};g.prototype.constructed=function(){this.lifecycle=2};g.prototype.destroy=function(){this.destroyed=!0;var c=this.cursors;if(this.cursors)for(var e=
0,k=Object.getOwnPropertyNames(c);e<k.length;e++){var l=k[e],m=c[l];if(m){for(;0<m.length;)m.pop().propertyDestroyed(this,l);c[l]=null}}if(this.autoDestroy)for(l in this.metadatas)(c=this.internalGet(l))&&c&&"function"===typeof c.destroy&&(c.destroy(),this.metadatas[l].nonNullable||this.internalSet(l,null))};Object.defineProperty(g.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});g.prototype.clearOverride=function(c){this.isOverridden(c)&&(this.overridden[c]=
!1,this.propertyInvalidated(c))};g.prototype.get=function(c){var e=this.metadatas[c];if(this.store.has(c)&&!this.dirties[c])return this.store.get(c);var k=e.get;return k?(e=k.call(this.host),this.store.set(c,e,h.OriginId.COMPUTED),this.propertyCommitted(c),e):e.value};g.prototype.originOf=function(c){var e=this.store.originOf(c);return void 0===e&&(c=this.metadatas[c])&&c.hasOwnProperty("value")?"defaults":h.idToName(e)};g.prototype.has=function(c){return this.metadatas[c]?this.store.has(c):!1};g.prototype.internalGet=
function(c){if(this.metadatas[c]){var e=this.store;return e.has(c)?e.get(c):this.metadatas[c].value}};g.prototype.internalSet=function(c,e){this.metadatas[c]&&(this.propertyInvalidated(c),this.initialized?this.store.set(c,e,this._origin):this.store.set(c,e,h.OriginId.DEFAULTS),this.propertyCommitted(c))};g.prototype.isOverridden=function(c){return null!=this.overridden&&!0===this.overridden[c]};g.prototype.keys=function(){return this.store.keys()};g.prototype.override=function(c,e){if(this.metadatas[c]){this.overridden||
(this.overridden={});var k=this.metadatas[c];k.nonNullable&&null==e||((k=k.cast)&&(e=k.call(this.host,e)),this.overridden[c]=!0,this.internalSet(c,e))}};g.prototype.set=function(c,e){if(this.metadatas[c]){var k=this.metadatas[c];if(!k.nonNullable||null!=e){var l=k.set;(k=k.cast)&&(e=k.call(this.host,e));l?l.call(this.host,e):this.internalSet(c,e)}}};g.prototype.setDefaultOrigin=function(c){this._origin=h.nameToId(c)};g.prototype.propertyInvalidated=function(c){var e=this.dirties,k=this.isOverridden(c),
l=this.cursors&&this.cursors[c],m=this.metadatas[c].computes;if(l)for(var n=0;n<l.length;n++)l[n].propertyInvalidated(this,c);k||(e[c]=!0);if(m)for(c=0;c<m.length;c++)this.propertyInvalidated(m[c])};g.prototype.propertyCommitted=function(c){var e=this.cursors&&this.cursors[c];this.dirties[c]=!1;if(e)for(var k=0;k<e.length;k++)e[k].propertyCommitted(this,c)};g.prototype.addCursor=function(c,e){this.cursors||(this.cursors={});var k=this.cursors[c];k||(this.cursors[c]=k=[]);k.push(e)};g.prototype.removeCursor=
function(c,e){var k=this.cursors[c];this.cursors[c]&&(k.splice(k.indexOf(e),1),0===k.length&&(this.cursors[c]=null))};return g}();q["default"]=D})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(D,q,a){var b={info:0,warn:1,error:2};D=function(){function d(h){void 0===h&&(h={});this.module=h.module||"";this.writer=h.writer||null;this.level=h.level||null;null!=h.enabled&&(this.enabled=!!h.enabled);d._loggers[this.module]=this;h=this.module.lastIndexOf(".");
-1!==h&&(this.parent=d.getLogger(this.module.slice(0,h)))}d.prototype.log=function(h){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];this._isEnabled()&&this._matchLevel(h)&&(g=this._inheritedWriter())&&g.apply(void 0,[h,this.module].concat(f))};d.prototype.error=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];this.log.apply(this,["error"].concat(h))};d.prototype.warn=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];this.log.apply(this,["warn"].concat(h))};
d.prototype.info=function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];this.log.apply(this,["info"].concat(h))};d.prototype.getLogger=function(h){return d.getLogger(this.module+"."+h)};d.getLogger=function(h){var f=d._loggers[h];f||(f=new d({module:h}));return f};d.prototype._parentWithMember=function(h,f){for(var g=this;g&&null==g[h];)g=g.parent;return g?g[h]:f};d.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};d.prototype._consoleWriter=
function(h,f){for(var g=[],c=2;c<arguments.length;c++)g[c-2]=arguments[c];console[h].apply(console,["["+f+"]"].concat(g))};d.prototype._matchLevel=function(h){return b[this._parentWithMember("level","error")]<=b[h]};d.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};d._loggers={};return d}();D.getLogger("esri").level="warn";return D})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(D,q,a,b,d){Object.defineProperty(q,"__esModule",{value:!0});var h=[a["default"],b["default"],d["default"]];q.processPrototypeMetadatas=function(f,g){for(var c=Object.getOwnPropertyNames(f),e=0;e<h.length;e++){var k=h[e];if(k.processPrototypePropertyMetadata)for(var l=0,m=c;l<m.length;l++){var n=m[l];k.processPrototypePropertyMetadata(n,f[n],f,g)}}};q.processClassMetadatas=function(f,g){for(var c=Object.getOwnPropertyNames(f),e=0;e<h.length;e++){var k=
h[e];if(k.processClassPropertyMetadata)for(var l=0,m=c;l<m.length;l++){var n=m[l];k.processClassPropertyMetadata(n,f[n],f,g)}}};q.instanceCreated=function(f,g){for(var c=Object.getOwnPropertyNames(g),e=0;e<h.length;e++){var k=h[e];k.instanceCreated&&k.instanceCreated(f,g,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(D,q,a,b,d,h,f){function g(c,e,k){var l=h.getProperties(c);
return f.wire(c,k.aliasOf,function(){l.propertyInvalidated(e)})}Object.defineProperty(q,"__esModule",{value:!0});q.AliasedPropertyExtension={processClassPropertyMetadata:function(c,e,k,l){var m=e.aliasOf;if(m&&(c=m.split(".")[0],null!=k[c]&&!e.set&&!e.get)){var n;e.get=function(){var p=b["default"](this,m);if("function"===typeof p){n||(n=m.split(".").slice(0,-1).join("."));var t=b["default"](this,n);t&&(p=p.bind(t))}return p};e.readOnly||(e.set=function(p){return d["default"](this,m,p)})}},instanceCreated:function(c,
e,k){for(var l=0;l<k.length;l++){var m=k[l],n=e[m];n.aliasOf&&g(c,m,n)}}};q["default"]=q.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(D,q,a){function b(g,c,e){if(null!=e.getItemAt||Array.isArray(e)){var k=parseInt(g,10);if(!isNaN(k))return Array.isArray(e)?e[k]:e.getItemAt(k)}k=a.getProperties(e);return c?a.isPropertyDeclared(k,g)?k.get(g):e[g]:a.isPropertyDeclared(k,g)?k.internalGet(g):e[g]}function d(g,
c,e,k){if(null==g)return g;if((g=b(c[k],e,g))||!(k<c.length-1))return k===c.length-1?g:d(g,c,e,k+1)}function h(g,c,e,k){void 0===e&&(e=!1);void 0===k&&(k=0);return"string"===typeof c&&-1===c.indexOf(".")?b(c,e,g):d(g,a.pathToArray(c),e,k)}function f(g,c){return h(g,c,!0)}Object.defineProperty(q,"__esModule",{value:!0});q.valueOf=h;q.get=f;q.exists=function(g,c){return void 0!==h(c,g,!0)};q["default"]=f})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports",
"../lang"],function(D,q,a){function b(g,c){return c?Object.keys(c).reduce(function(e,k){if("value"===k)return e[k]=c[k],e;if(void 0===e[k])return e[k]=a.clone(c[k]),e;var l=e[k],m=c[k];if(l===m)return e;if(Array.isArray(m)||Array.isArray(e))l=l?Array.isArray(l)?e[k]=l.concat():e[k]=[l]:e[k]=[],m&&(Array.isArray(m)||(m=[m]),m.forEach(function(n){-1===l.indexOf(n)&&l.push(n)}));else if(m&&"object"===typeof m)e[k]=b(l,m);else if(!e.hasOwnProperty(k)||c.hasOwnProperty(k))e[k]=m;return e},g||{}):g}function d(g){return Array.isArray(g)?
g:g.split(".")}function h(g){if(Array.isArray(g)||-1<g.indexOf(",")){g=Array.isArray(g)?g:g.split(",");for(var c=0;c<g.length;c++)g[c]=g[c].trim();return 1===g.length?g[0]:g}return g.trim()}function f(g){var c=!1;return function(){c||(c=!0,g())}}Object.defineProperty(q,"__esModule",{value:!0});q.getProperties=function(g){return g?g.__accessor__?g.__accessor__:g.propertyInvalidated?g:null:null};q.isPropertyDeclared=function(g,c){return g&&g.metadatas&&null!=g.metadatas[c]};q.merge=b;q.pathToStringOrArray=
function(g){return g?"string"===typeof g&&-1===g.indexOf(".")?g:d(g):g};q.pathToArray=d;q.splitPath=h;q.parse=function(g,c,e,k){c=h(c);if(Array.isArray(c)){var l=c.map(function(m){return k(g,m.trim(),e)});return{remove:f(function(){return l.forEach(function(m){return m.remove()})})}}return k(g,c.trim(),e)};q.once=f})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(D,q,a,b,d){function h(f,g,c){if(f&&g)if("object"===
typeof g){c=0;for(var e=Object.getOwnPropertyNames(g);c<e.length;c++){var k=e[c];h(f,k,g[k])}}else"_"!==g[0]&&(-1!==g.indexOf(".")?(g=g.split("."),k=g.splice(g.length-1,1)[0],h(d["default"](f,g),k,c)):f[g]=c)}Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");q.set=h;q["default"]=h})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(D,q,a){function b(e,k,l){k=a.splitPath(k);if(Array.isArray(k)){for(var m=
[],n=0;n<k.length;n++)m.push((new d(k[n],l)).install(e));return new g(m)}e=(new d(k,l)).install(e);return new c(e)}Object.defineProperty(q,"__esModule",{value:!0});var d=function(){function e(k,l){this.path=k;this.callback=l;this.chain=null;this.path=k;-1<k.indexOf(".")&&(this.chain=a.pathToArray(k));this.callback=l;return this}e.prototype.install=function(k){k=this.chain?new f(this,k):new h(this,k);return k};e.prototype.notify=function(k){this.callback(k,this.path)};return e}(),h=function(){function e(k,
l){this.binding=k;this.target=l;a.getProperties(l).addCursor(this.binding.path,this)}e.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};e.prototype.propertyDestroyed=function(k,l){a.getProperties(this.target).removeCursor(l,this)};e.prototype.propertyInvalidated=function(k,l){this.binding&&this.binding.notify(this.target)};e.prototype.propertyCommitted=function(k,l){this.binding&&this.binding.notify(this.target)};
return e}(),f=function(){function e(k,l){this.binding=k;this.target=l;this.stack=[];this.properties=a.getProperties(l);this.stack.push({properties:this.properties,propertyName:k.chain[0]});this.properties.addCursor(k.chain[0],this);this.moveForward();return this}e.prototype.destroy=function(){for(;;){var k=this.stack.pop();if(null==k)break;k.properties.removeCursor(k.propertyName,this)}this.target=this.binding=null};e.prototype.propertyDestroyed=function(k,l){this.moveBackward(k,l)};e.prototype.propertyInvalidated=
function(k,l){this.binding&&this.binding.notify(this.target)};e.prototype.propertyCommitted=function(k,l){this.binding&&(this.moveBackward(k,l),this.moveForward(),this.binding.notify(this.target))};e.prototype.moveBackward=function(k,l){for(var m=this.stack,n=m[m.length-1];n.properties!==k&&n.propertyName!==l;)n.properties.removeCursor(n.propertyName,this),m.pop(),n=m[m.length-1]};e.prototype.moveForward=function(){var k=this.stack,l=k[k.length-1];l=l.properties.internalGet(l.propertyName);(l=a.getProperties(l))&&
k.length<this.binding.chain.length&&(k=this.binding.chain[k.length],this.stack.push({properties:l,propertyName:k}),l.addCursor(k,this),this.moveForward())};return e}(),g=function(){function e(k){this.cursors=k}e.prototype.remove=function(){for(var k=this.cursors;0<k.length;)k.pop().destroy();this.cursors=null};return e}(),c=function(){function e(k){this.cursor=k}e.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return e}();q.create=function(e,k){var l=a.splitPath(e);if(Array.isArray(l)){for(var m=
[],n=0;n<l.length;n++)m.push(new d(l[n],k));return function(t){for(var r=[],y=0;y<m.length;y++)r[y]=m[y].install(t);return new g(r)}}var p=new d(l,k);return function(t){return new c(p.install(t))}};q.wire=b;q["default"]=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(D,q,a,b,d,h){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");
q.ComputedPropertyExtension={processClassPropertyMetadata:function(f,g,c,e){g.dependsOn&&(c=void 0,c=g.dependsOn.slice())&&(g.wire=h.create(c,function(k){return d.getProperties(k).propertyInvalidated(f)}))},instanceCreated:function(f,g,c){for(var e=0;e<c.length;e++){var k=g[c[e]];k.wire&&k.wire(f)}}};q["default"]=q.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(D,q,a,b,d,h){function f(g,c,e){var k=g&&g.json;g&&g.json&&g.json.origins&&e&&(g=g.json.origins[e.origin])&&c in g&&(k=g);return k}Object.defineProperty(q,"__esModule",{value:!0});q.originSpecificReadPropertyDefinition=function(g,c){return f(g,"read",c)};q.originSpecificWritePropertyDefinition=function(g,c){return f(g,"write",c)};q.SerializablePropertyExtension={processPrototypePropertyMetadata:function(g,c,e,k){if(d.process(c)){a.process(c);e=c.type;for(k=0;Array.isArray(e);)e=e[0],k++;if(c.json.origins)for(var l in c.json.origins){var m=
c.json.origins[l];b.create(e,k,g,m);h.create(e,k,g,m)}b.create(e,k,g,c.json);h.create(e,k,g,c.json)}}};q["default"]=q.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,d={"web-document":["web-scene","web-map"]};a=function(f){if(b[f]){var g=b[f];d[f].forEach(function(c){b[c]=
g});delete b[f]}};for(var h in d)a(h)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(D,q,a,b){function d(l,m,n,p){if(1<m)return g(l,m);if(1===m)return c(l);if(e(l)){var t=c(l.prototype.itemType.Type);return function(r,y,x){return(r=t(r,y,x))?new l(r):r}}return h(l)}function h(l){return l.prototype.read?function(m,n,p){return null==m?m:(new l).read(m,p)}:l.fromJSON}function f(l,m,
n,p){return 0!==p&&Array.isArray(m)?m.map(function(t){return f(l,t,n,p-1)}):l(m,null,n)}function g(l,m){var n=h(l),p=f.bind(null,n);return function(t,r,y){if(null==t)return t;t=p(t,y,m);r=m;for(y=t;0<r&&Array.isArray(y);)r--,y=y[0];if(void 0!==y)for(y=0;y<r;y++)t=[t];return t}}function c(l){var m=h(l);return function(n,p,t){return null==n?n:Array.isArray(n)?n.map(function(r){return m(r,null,t)}):[m(n,null,t)]}}function e(l){return b.isCollection(l)?(l=l.prototype.itemType)&&l.Type&&"function"===typeof l.Type?
k(l.Type):!1:!1}function k(l){return!!l&&(!!l.prototype.read||!!l.fromJSON||e(l))}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(l,m,n,p){(!p.read||!p.read.reader&&!1!==p.read.enabled)&&k(l)&&a.setDeepValue("read.reader",d(l,m,n,p),p)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(D,q){function a(b,d,h){for(var f=0;f<b.length;f++){var g=b[f];if(!(g in h))if(d)h[g]={};else return;h=h[g]}return h}Object.defineProperty(q,"__esModule",{value:!0});
q.getDeepValue=function(b,d){return a(b.split("."),!1,d)};q.setDeepValue=function(b,d,h){var f=b.split(".");b=f.pop();(h=a(f,!0,h))&&b&&(h[b]=d)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(D,q){function a(d){"boolean"===typeof d.read?d.read={enabled:d.read}:"function"===typeof d.read?d.read={enabled:!0,reader:d.read}:d.read&&"object"===typeof d.read&&void 0===d.read.enabled&&(d.read.enabled=!0)}function b(d){"boolean"===typeof d.write?d.write={enabled:d.write}:"function"===typeof d.write?d.write={enabled:!0,writer:d.write}:d.write&&"object"===typeof d.write&&void 0===d.write.enabled&&(d.write.enabled=!0)}Object.defineProperty(q,"__esModule",{value:!0});q.process=
function(d){d.json||(d.json={});a(d.json);b(d.json);if(d.json.origins)for(var h in d.json.origins)a(d.json.origins[h]),b(d.json.origins[h]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(D,q,a,b){function d(e,k,l,m){a.setDeepValue(l,h(e,m),k)}function h(e,k){var l;return l=e&&"function"===typeof e.write?e.write({},k):e&&"function"===typeof e.toJSON?e.toJSON():"number"===
typeof e?-Infinity===e?-Number.MAX_VALUE:Infinity===e?Number.MAX_VALUE:isNaN(e)?null:e:e}function f(e,k,l,m){null===e?e=null:e&&"function"===typeof e.map?(e=e.map(function(n){return h(n,m)}),"function"===typeof e.toArray&&(e=e.toArray())):e=[h(e,m)];a.setDeepValue(l,e,k)}function g(e,k,l){return 0!==l&&Array.isArray(e)?e.map(function(m){return g(m,k,l-1)}):h(e,k)}function c(e){return function(k,l,m,n){if(null===k)k=null;else{k=g(k,n,e);n=e;for(var p=k;0<n&&Array.isArray(p);)n--,p=p[0];if(void 0!==
p)for(p=0;p<n;p++)k=[k]}a.setDeepValue(m,k,l)}}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(e,k,l,m){m.write&&!m.write.writer&&!1!==m.write.enabled&&(1===k||b.isCollection(e)?m.write.writer=f:m.write.writer=1<k?c(k):d)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(D,q){function a(h){switch(h){case "defaults":return d.DEFAULTS;case "service":return d.SERVICE;case "portal-item":return d.PORTAL_ITEM;case "web-scene":return d.WEB_SCENE;
case "web-map":return d.WEB_MAP;case "user":return d.USER}}function b(h){switch(h){case d.DEFAULTS:return"defaults";case d.SERVICE:return"service";case d.PORTAL_ITEM:return"portal-item";case d.WEB_SCENE:return"web-scene";case d.WEB_MAP:return"web-map";case d.USER:return"user"}}Object.defineProperty(q,"__esModule",{value:!0});var d;(function(h){h[h.DEFAULTS=0]="DEFAULTS";h[h.COMPUTED=1]="COMPUTED";h[h.SERVICE=2]="SERVICE";h[h.PORTAL_ITEM=3]="PORTAL_ITEM";h[h.WEB_SCENE=4]="WEB_SCENE";h[h.WEB_MAP=5]=
"WEB_MAP";h[h.USER=6]="USER";h[h.NUM=7]="NUM"})(d=q.OriginId||(q.OriginId={}));q.nameToId=a;q.idToName=b;q.readableNameToId=function(h){return a(h)};q.idToReadableName=function(h){return b(h)};q.writableNameToId=function(h){return a(h)};q.idToWritableName=function(h){return b(h)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function b(){this._values={}}
b.prototype.get=function(d){return this._values[d]};b.prototype.originOf=function(d){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(d,h){this._values[d]=h};b.prototype.clear=function(d){delete this._values[d]};b.prototype.has=function(d){return d in this._values};return b}();q["default"]=D})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(D,q,a,b,d,h,f,g){Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.hasOwnProperty,e=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,k={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},l=/^_(set|get)([a-zA-Z0-9]+)Attr$/;q.processPrototype=function(m){for(var n=m.declaredClass,p=m.properties||{},t=0,r=Object.getOwnPropertyNames(p);t<r.length;t++){var y=r[t],x=p[y],z=typeof x;null==x?h.setPropertyMetadata(m,y,{value:x}):
Array.isArray(x)?h.setPropertyMetadata(m,y,{type:[x[0]],value:null}):"object"===z?f.getProperties(x)||x instanceof Date?h.setPropertyMetadata(m,y,{type:x.constructor,value:x}):h.setPropertyMetadata(m,y,x):"boolean"===z?h.setPropertyMetadata(m,y,{type:Boolean,value:x}):"string"===z?h.setPropertyMetadata(m,y,{type:String,value:x}):"number"===z?h.setPropertyMetadata(m,y,{type:Number,value:x}):"function"===z&&h.setPropertyMetadata(m,y,{type:x,value:null})}t=0;for(r=Object.getOwnPropertyNames(m);t<r.length;t++){z=
r[t];x=m[z];p=y=void 0;var v=e.exec(z);if(v)y=v[1],p=k[v[2]];else if(v=l.exec(z))y=v[2][0].toLowerCase()+v[2].substr(1),p=v[1].toLowerCase();y&&p&&(y=h.getPropertyMetadata(m,y),a.setDeepValue(p,x,y))}t=0;for(r=Object.getOwnPropertyNames(h.getPropertiesMetadata(m));t<r.length;t++)if(y=r[t],x=h.getPropertyMetadata(m,y),p=x.type,z=x.types,void 0===x.value&&c.call(m,y)&&(x.value=m[y]),!x.cast&&p){y=x;x=0;for(z=p;Array.isArray(z);)z=z[0],x++;p=1===x?b.ensureArray(z):1<x?b.ensureNArray(z,x):b.ensureType(p);
y.cast=p}else!x.cast&&z&&(Array.isArray(z)?x.cast=b.ensureArrayTyped(b.ensureOneOfType(z[0])):x.cast=b.ensureOneOfType(z));d.processPrototypeMetadatas(h.getPropertiesMetadata(m),n);return h.getPropertiesMetadata(m)};q.processClass=function(m){for(var n=m.prototype,p=n.declaredClass,t=m._meta.bases,r={},y=t.length-1;0<=y;y--)f.merge(r,h.getMetadata(t[y].prototype));var x=r.properties;d.processClassMetadatas(x,p);Object.defineProperty(m,"__accessorMetadata__",{value:{properties:x,autoDestroy:!!r.autoDestroy}});
var z={};p=function(v){var w=x[v];z[v]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(v):w.value},set:function(u){var A=this.__accessor__;if(!A)Object.defineProperty(this,v,{enumerable:!0,configurable:!0,writable:!0,value:u});else if(!Object.isFrozen(this)){if(A.initialized&&w.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+v+"' of "+this.declaredClass);if(2===A.lifecycle&&w.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
v+"' of "+this.declaredClass);A.set(v,u)}}}};t=0;for(y=Object.getOwnPropertyNames(x);t<y.length;t++)p(y[t]);Object.defineProperties(m.prototype,z);if(r.parameters)for(m=0,p=Object.getOwnPropertyNames(r.parameters);m<p.length;m++)t=p[m],y=Object.getOwnPropertyDescriptor(n,t)||{value:n[t]},(y=g.autocastMethod(n,t,y))&&Object.defineProperty(n,t,y);return r}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(D,q,a){function b(v,w){return w.isInstanceOf?
w.isInstanceOf(v):w instanceof v}function d(v){return null==v?v:new Date(v)}function h(v){return null==v?v:!!v}function f(v){return null==v?v:v.toString()}function g(v){return null==v?v:parseFloat(v)}function c(v){return null==v?v:Math.round(parseFloat(v))}function e(v){return v&&v.constructor&&void 0!==v.constructor._meta}function k(v,w){return null!=w&&v&&!b(v,w)}function l(v,w){k(v,w)&&(e(w)?x.error("Accessor#set","Assigning an instance of '"+(w.declaredClass||"unknown")+"' which is not a subclass of '"+
(v&&v.prototype&&v.prototype.declaredClass||"unknown")+"'"):w=new v(w));return w}function m(v){switch(v){case Number:return g;case z:return c;case Boolean:return h;case String:return f;case Date:return d;default:return l.bind(null,v)}}function n(v,w){var u=m(v);return 1===arguments.length?u:u(w)}function p(v,w){return 1===arguments.length?p.bind(null,v):w?Array.isArray(w)?w.map(v):[v(w)]:w}function t(v,w,u){return 0!==w&&Array.isArray(u)?u.map(function(A){return t(v,w-1,A)}):v(u)}function r(v,w,u){if(2===
arguments.length)return r.bind(null,v,w);if(!u)return u;u=t(v,w,u);for(var A=w,G=u;0<A&&Array.isArray(G);)A--,G=G[0];if(void 0!==G)for(G=0;G<A;G++)u=[u];return u}function y(v,w){if(2===arguments.length)return y(v).call(null,w);var u={},A=[],G=[],B;for(B in v.typeMap){var E=v.typeMap[B];u[B]=n(E);A.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");G.push(B)}var F="string"===typeof v.key?function(H){return H[v.key]}:v.key;return function(H){if(v.base&&!k(v.base,H))return H;var L=F(H)||v.defaultKeyValue,
Q=u[L];if(!Q)return x.error("Accessor#set","Invalid property value, value needs to be one of '"+(A.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(G.join("', '")+"')")),null;if(!k(v.typeMap[L],H))return H;if("string"!==typeof v.key||e(H))return Q(H);L={};for(var aa in H)aa!==v.key&&(L[aa]=H[aa]);return Q(L)}}Object.defineProperty(q,"__esModule",{value:!0});var x=a.getLogger("esri.core.Accessor");q.isInstanceOf=b;q.ensureDate=d;q.ensureBoolean=h;q.ensureString=f;q.ensureNumber=
g;q.ensureInteger=c;q.isClassedType=e;q.requiresType=k;q.ensureClass=l;q.ensureType=n;q.ensureArrayTyped=p;q.ensureArray=function(v,w){return 1===arguments.length?p(n.bind(null,v)):p(n.bind(null,v),w)};q.ensureNArrayTyped=r;q.ensureNArray=function(v,w,u){return 2===arguments.length?r(n.bind(null,v),w):r(n.bind(null,v),w,u)};q.ensureOneOfType=y;var z=function(){return function(){}}();q.Integer=z;q["default"]=n})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(D,q){function a(g){return null!=g.__accessorMetadata__}function b(g){return a(g)&&null!=d(g).properties}function d(g){g.__accessorMetadata__||Object.defineProperty(g,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return g.__accessorMetadata__}function h(g){g=d(g);var c=g.properties;c||(c=g.properties={});return c}function f(g,c){var e=d(g),k=e.parameters;k||(k=e.parameters={});e=k[c];e||(e=[],k[c]=e);return e}Object.defineProperty(q,"__esModule",{value:!0});
q.hasMetadata=a;q.hasPropertiesMetadata=b;q.hasPropertyMetadata=function(g,c){return b(g)&&null!=h(g)[c]};q.hasParametersMetadata=function(g,c){return a(g)&&null!=d(g).parameters&&null!=d(g).parameters[c]};q.getMetadata=d;q.getPropertiesMetadata=h;q.getPropertyMetadata=function(g,c){var e=h(g),k=e[c];k||(k=e[c]={});return k};q.setPropertyMetadata=function(g,c,e){h(g)[c]=e};q.getParametersMetadata=f;q.getParameterMetadata=function(g,c,e){var k=f(g,c)[e];k||(f(g,c)[e]=k={index:e});return k}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(D,q,a,b){function d(e){var k="_meta"in e?a.ensureType(e):e;return function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];l.push(k);return"number"===typeof l[2]?f.apply(this,l):h.apply(this,l)}}function h(e,k,l,m){b.getPropertyMetadata(e,k).cast=m}function f(e,k,l,m){b.getParameterMetadata(e,k,l).cast=m}function g(e){return function(k,l,m){b.getPropertyMetadata(k,e).cast=k[l]}}Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.toString;
q.autocastMethod=function(e,k,l){if(b.hasParametersMetadata(e,k)){var m=b.getParametersMetadata(e,k).filter(function(p){return null!=p.cast});if(m.length){var n=l.value;l.value=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];for(t=0;t<m.length;t++){var r=m[t];p[r.index]=r.cast(p[r.index])}return n.apply(this,p)};return l}}};q.cast=function(){for(var e=[],k=0;k<arguments.length;k++)e[k]=arguments[k];if(3!==e.length||"string"!==typeof e[1]){if(1===e.length&&"[object Function]"===
c.call(e[0]))return d(e[0]);if(1===e.length&&"string"===typeof e[0])return g(e[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(D,q,a,b,d,h,f,g,c){function e(w){y.has(w)?x.splice(x.indexOf(w),1):y.add(w);x.push(w);z||(z=h.schedule(l))}function k(w){if(!w.removed){var u=w.callback,A=w.path,G=w.oldValue,B=w.target,E=f.valueOf(B,w.propertyPath,!0);b.equals(G,E)||
(w.oldValue=E,u.call(B,E,G,A,B))}}function l(){if(z){z=null;var w=x;x=r.acquire();y.clear();for(var u=r.acquire(),A=0;A<w.length;A++){var G=w[A];k(G);G.removed&&u.push(G)}for(A=0;A<x.length;A++)G=x[A],G.removed&&(u.push(G),y["delete"](G),x.splice(A,1),--A);for(A=0;A<u.length;A++)t.pool.release(u[A]);r.release(w);r.release(u);v.forEach(function(B){return B()})}}function m(w,u,A){var G=g.parse(w,u,A,function(B,E,F){var H=f.valueOf(B,E,!0),L,Q=c.wire(B,E,function(aa,ca){aa.__accessor__.destroyed?G.remove():
(L||(L=t.pool.acquire(aa,ca,H,F),H=null),e(L))});return{remove:g.once(function(){Q.remove();L&&(L.removed=!0,e(L),L=null);G=Q=H=null})}});return G}function n(w,u,A){var G=g.parse(w,u,A,function(B,E,F){var H=f.valueOf(B,E,!0),L=!1;return c.wire(B,E,function(Q,aa){if(Q.__accessor__.destroyed)G.remove();else if(!L){L=!0;var ca=f.valueOf(Q,aa,!0);b.equals(H,ca)||F.call(Q,ca,H,aa,Q);H=f.valueOf(Q,aa,!0);L=!1}})});return G}function p(w,u,A,G){void 0===G&&(G=!1);return!w.__accessor__||w.__accessor__.destroyed?
{remove:function(){}}:G?n(w,u,A):m(w,u,A)}Object.defineProperty(q,"__esModule",{value:!0});var t=function(){function w(u,A,G,B){this.target=u;this.path=A;this.oldValue=G;this.callback=B;this.removed=!1;this.propertyPath=g.pathToStringOrArray(A)}w.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};w.pool=new d(w,!0);return w}(),r=new a,y=new Set,x=r.acquire(),z;q.dispatchTarget=function(w){for(var u=r.copy(x),A=0;A<u.length;A++){var G=
u[A];G.target===w&&(k(G),y["delete"](G),x.splice(x.indexOf(G),1))}};q.removeTarget=function(w){for(var u=0;u<x.length;u++){var A=x[u];A.target===w&&(A.removed=!0)}};q.dispatch=l;var v=new Set;q.afterDispatch=function(w){v.add(w);return{remove:function(){v["delete"](w)}}};q.watch=p;q.isValueInUse=function(w){return x.some(function(u){return u.oldValue===w})};q["default"]=p})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(D,q,a){function b(f){f.length=
0}var d=Array.prototype.splice;D=function(){function f(g,c){void 0===g&&(g=50);void 0===c&&(c=50);this._pool=new a(Array,!1,b,c,g)}f.prototype.acquire=function(){return this._pool.acquire()};f.prototype.copy=function(g){var c=this.acquire();g.unshift(0,0);d.apply(c,g);g.splice(0,2);return c};f.prototype.release=function(g){this._pool.release(g)};f.acquire=function(){return h.acquire()};f.copy=function(g){return h.copy(g)};f.release=function(g){return h.release(g)};return f}();var h=new D(100);return D})},
"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(D,q){var a=function(){return function(){}}();return function(){function b(d,h,f,g,c){void 0===g&&(g=1);void 0===c&&(c=0);this.classConstructor=d;this.acquireFunctionOrWithConstructor=h;this.releaseFunction=f;this.growthSize=g;!0===h?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof h&&(this.acquireFunction=h);this._pool=Array(c);this._set=new Set;this._initialSize=c;for(d=0;d<c;d++)this._pool[d]=
new this.classConstructor;this.growthSize=Math.max(g,1)}b.prototype.acquire=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];h=this.classConstructor||a;if(0===this._pool.length)for(var f=this.growthSize,g=0;g<f;g++)this._pool[g]=new h;h=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[h].concat(d)):h&&h.acquire&&"function"===typeof h.acquire&&h.acquire.apply(h,d);this._set["delete"](h);return h};b.prototype.release=function(d){d&&!this._set.has(d)&&(this.releaseFunction?
this.releaseFunction(d):d&&d.release&&"function"===typeof d.release&&d.release(),this._pool.push(d),this._set.add(d))};b.prototype.prune=function(d){void 0===d&&(d=this._initialSize);if(!(this._pool.length<=d))for(var h;d>this._pool.length;)h=this._pool.shift(),this._set["delete"](h),h.dispose&&"function"===typeof h.dispose&&h.dispose()};b.prototype._constructorAcquireFunction=function(d){for(var h=[],f=1;f<arguments.length;f++)h[f-1]=arguments[f];(g=this.classConstructor).call.apply(g,[d].concat(h));
var g};return b}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(D,q,a,b,d){function h(u){void 0===u&&(u=q.now());q.debug.rafId=null;0<z.length&&(q.debug.rafId=f());if(0<m){var A=u-m;t=Math.min(A,t);if(A<n)return}q.debug.executeFrameTasks(u)}function f(){return q.debug.requestNextFrame?q.debug.requestNextFrame(e):e()}function g(){for(var u=0;u<z.length;){var A=z[u];u++;if(A.removed){z.splice(u-1,1);for(var G=
0;G<y.length;G++){var B=y[G];if(A.phases[B]){B=v[B];var E=B.indexOf(A);-1!==E&&B.splice(E,1)}}}}}function c(){for(;x.length;){var u=x.shift();u.isActive&&(u.isActive=!1,u.callback())}q.debug.willDispatch=!1}function e(){return d(h)}Object.defineProperty(q,"__esModule",{value:!0});q.now=b;var k=function(){return function(u){this.phases=u;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),l=function(){function u(A){this.callback=A;this.isActive=!0}u.prototype.remove=
function(){this.isActive=!1};return u}(),m=-1,n=0,p=0,t=Number.POSITIVE_INFINITY,r={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},y=["prepare","preRender","render","postRender","update"],x=[],z=[],v={prepare:[],preRender:[],render:[],postRender:[],update:[]},w=function(){function u(A){this._task=A}u.prototype.remove=function(){this._task.removed=!0};u.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=q.now())};u.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=q.now()-this._task.pausedAt))};return u}();q.FrameTaskHandle=w;q.debug={frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(u){void 0===u&&(u=!1);for(var A=0;A<z.length;A++)z[A].removed=!0;u&&g()},dispatch:c,executeFrameTasks:function(u){void 0===u&&(u=q.now());0>m&&(m=u);var A=u-m;m=u;for(var G=0;G<z.length;G++){var B=z[G];-1!==B.epoch&&(B.dt=A)}for(G=0;G<y.length;G++){A=y[G];for(var E=v[A],F=0;F<E.length;F++)B=
E[F],B.paused||B.removed||(0===G&&B.ticks++,-1===B.epoch&&(B.epoch=u),r.time=u,r.deltaTime=B.dt,r.elapsedFrameTime=q.now()-u,r.frameDuration=0<p?p:t,r.spendInTask=u-B.epoch,B.phases[A].call(B,r))}g()}};q.schedule=function(u){u=new l(u);x.push(u);q.debug.willDispatch||(q.debug.willDispatch=!0,a(c));return u};q.addFrameTask=function(u){var A=new k(u);z.push(A);for(var G=0,B=y;G<B.length;G++){var E=B[G];u[E]&&v[E].push(A)}q.debug.rafId||(m=-1,q.debug.rafId=f());return new w(A)};q.setFrameRate=function(u){if(0>=
u)p=n=0;else{var A=1.05*t;u=Math.ceil(1E3/u/A);n=(u-1)*A;p=u*t}};q.requestNextFrame=f})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(D,q,a){function b(){if(a.postMessage&&!a.importScripts){var h=a.onmessage,f=!0;a.onmessage=function(){f=!1};a.postMessage("","*");a.onmessage=h;return f}return!1}var d=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var h=function(e){a.process.nextTick(e)};else if(a.Promise)h=
function(e){a.Promise.resolve().then(e)};else if(d){var f=[],g=document.createElement("div");(new d(function(){for(;0<f.length;)f.shift()()})).observe(g,{attributes:!0});h=function(e){f.push(e);g.setAttribute("queueStatus","1")}}else if(b()){var c=[];a.addEventListener("message",function(e){if(e.source===a&&"esri-nexttick-message"===e.data)for(e.stopPropagation();c.length;)c.shift()()},!0);h=function(e){c.push(e);a.postMessage("esri-nexttick-message","*")}}else h=a.setImmediate?function(e){return a.setImmediate(e)}:
function(e){return a.setTimeout(e,0)};return h}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(D,q){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(D,q,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};
if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var d=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(D,q,a,b){var d=b();D=a.requestAnimationFrame;if(!D){q=["ms","moz","webkit","o"];for(var h=0;h<q.length&&!D;++h)D=a[q[h]+
"RequestAnimationFrame"];D||(D=function(f){var g=b(),c=Math.max(0,16-(g-d)),e=a.setTimeout(function(){f(b())},c);d=g+c;return e})}return D})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(D,q,a,b,d,h,f){return function(g){function c(e){e=g.call(this)||this;e._groups=new Map;return e}a(c,g);c.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(c.prototype,"size",{get:function(){var e=0;this._groups.forEach(function(k){e+=k.length});return e},enumerable:!0,configurable:!0});c.prototype.add=function(e,k){if(!this._isHandle(e)&&!Array.isArray(e)&&!h.isCollection(e))return this;var l=this._getOrCreateGroup(k);Array.isArray(e)||h.isCollection(e)?e.forEach(function(m){return l.push(m)}):l.push(e);this.notifyChange("size");return this};c.prototype.has=function(e){return this._groups.has(this._ensureGroupKey(e))};c.prototype.remove=
function(e){if(Array.isArray(e)||h.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var k=this._getGroup(e),l=0;l<k.length;l++)k[l].remove();this._deleteGroup(e);this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(e){for(var k=0;k<e.length;k++)e[k].remove()});this._groups.clear();this.notifyChange("size");return this};c.prototype._isHandle=function(e){return e&&!!e.remove};c.prototype._getOrCreateGroup=function(e){if(this.has(e))return this._getGroup(e);
var k=[];this._groups.set(this._ensureGroupKey(e),k);return k};c.prototype._getGroup=function(e){return this._groups.get(this._ensureGroupKey(e))};c.prototype._deleteGroup=function(e){return this._groups["delete"](this._ensureGroupKey(e))};c.prototype._ensureGroupKey=function(e){return e||"_default_"};b([f.property({readOnly:!0})],c.prototype,"size",null);return c=b([f.subclass("esri.core.Handles")],c)}(f.declared(d))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m){function n(B){return B?B.isInstanceOf&&B.isInstanceOf(G):!1}function p(B){return B?n(B)?B.toArray():B.length?Array.prototype.slice.apply(B):[]:[]}function t(B){if(B&&B.length)return B[0]}function r(B,E,F,H){E&&E.forEach(function(L,Q,aa){B.push(L);r(B,F.call(H,L,Q,aa),F,H)})}D=function(){function B(){this.target=null;this.defaultPrevented=this.cancellable=!1}B.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};B.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return B}();var y=function(){},x=new e(D,!0,function(B){B.item=null;B.target=null}),z=new Set,v=new Set,w=new Set,u=new Map,A=0,G=function(B){function E(H){H=B.call(this,H)||this;H._boundDispatch=H._dispatchColChange.bind(H);H._chgListeners=[];H._notifications=null;H._timer=null;H.length=0;H._items=[];Object.defineProperty(H,"uid",{value:A++});return H}a(E,B);var F=E;E.ofType=function(H){if(!H)return F;if(u.has(H))return u.get(H);if("function"===typeof H)var L=H.prototype.declaredClass;
else if(H.base)L=H.base.prototype.declaredClass;else for(var Q in H.typeMap){var aa=H.typeMap[Q].prototype.declaredClass;L=L?L+(" | "+aa):aa}L=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+L+"\x3e"});Q={Type:H,ensureType:"function"===typeof H?m.ensureType(H):m.ensureOneOfType(H)};Object.defineProperty(L.prototype,"itemType",{value:Q});u.set(H,L);return L};E.prototype.normalizeCtorArgs=function(H){return H?Array.isArray(H)||n(H)?{items:H}:H:{}};Object.defineProperty(E.prototype,"items",
{get:function(){return this._items},set:function(H){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(p(H))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(H,L){var Q;Array.isArray(H)?Q=H:-1<H.indexOf(",")&&(Q=H.split(/\s*,\s*/));if(Q){for(var aa=[],ca=0;ca<Q.length;ca++)aa.push(this.on(Q[ca],L));aa.remove=function(){for(var la=0;la<aa.length;la++)aa[la].remove()};return aa}if("change"===H){var ea=this._chgListeners,U={removed:!1,callback:L};
ea.push(U);this._notifications&&this._notifications.push({listeners:ea.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=y;U.removed=!0;ea.splice(ea.indexOf(U),1)}}}return d.after(this,"on"+H,L,!0)};E.prototype.hasEventListener=function(H){return"change"===H?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(H,L){if(this._emitBeforeChanges())return this;var Q=this.getNextIndex(L);this._splice(Q,0,H);this._emitAfterChanges();return this};
E.prototype.addMany=function(H,L){void 0===L&&(L=this._items.length);if(!H||!H.length||this._emitBeforeChanges())return this;var Q=this.getNextIndex(L);this._splice.apply(this,[Q,0].concat(p(H)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var H=this._splice(0,this.length)||[];this._emitAfterChanges();return H};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(c.clone)})};E.prototype.concat=
function(){for(var H=[],L=0;L<arguments.length;L++)H[L]=arguments[L];H=H.map(p);return this._createNewInstance({items:(Q=this._items).concat.apply(Q,H)});var Q};E.prototype.drain=function(H,L){if(this.length&&!this._emitBeforeChanges()){for(var Q=this._splice(0,this.length),aa=Q.length,ca=0;ca<aa;ca++)H.call(L,Q[ca],ca,Q);this._emitAfterChanges()}};E.prototype.every=function(H,L){return this._items.every(H,L)};E.prototype.filter=function(H,L){var Q=2===arguments.length?this._items.filter(H,L):this._items.filter(H);
return this._createNewInstance({items:Q})};E.prototype.find=function(H,L){if("function"!==typeof H)throw new TypeError(H+" is not a function");for(var Q=this._items,aa=Q.length,ca=0;ca<aa;ca++){var ea=Q[ca];if(H.call(L,ea,ca,Q))return ea}};E.prototype.findIndex=function(H,L){if("function"!==typeof H)throw new TypeError(H+" is not a function");for(var Q=this._items,aa=Q.length,ca=0;ca<aa;ca++)if(H.call(L,Q[ca],ca,Q))return ca;return-1};E.prototype.flatten=function(H,L){var Q=[];r(Q,this,H,L);return new F(Q)};
E.prototype.forEach=function(H,L){for(var Q=this._items,aa=Q.length,ca=0;ca<aa;ca++)H.call(L,Q[ca],ca,Q)};E.prototype.getItemAt=function(H){return this._items[H]};E.prototype.getNextIndex=function(H){var L=this.length;H=null==H?L:H;0>H?H=0:H>L&&(H=L);return H};E.prototype.includes=function(H,L){void 0===L&&(L=0);return arguments.length?-1!==this._items.indexOf(H,L):!1};E.prototype.indexOf=function(H,L){void 0===L&&(L=0);return this._items.indexOf(H,L)};E.prototype.join=function(H){void 0===H&&(H=
",");return this._items.join(H)};E.prototype.lastIndexOf=function(H,L){void 0===L&&(L=this.length-1);return this._items.lastIndexOf(H,L)};E.prototype.map=function(H,L){var Q=this._items.map(H,L);return new F({items:Q})};E.prototype.reorder=function(H,L){void 0===L&&(L=this.length-1);var Q=this.indexOf(H);if(-1!==Q){0>L?L=0:L>=this.length&&(L=this.length-1);if(Q!==L){if(this._emitBeforeChanges())return H;this._splice(Q,1);this._splice(L,0,H);this._emitAfterChanges()}return H}};E.prototype.pop=function(){if(this.length&&
!this._emitBeforeChanges()){var H=t(this._splice(this.length-1,1));this._emitAfterChanges();return H}};E.prototype.push=function(){for(var H=[],L=0;L<arguments.length;L++)H[L]=arguments[L];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(H));this._emitAfterChanges();return this.length};E.prototype.reduce=function(H,L){var Q=this._items;return 2===arguments.length?Q.reduce(H,L):Q.reduce(H)};E.prototype.reduceRight=function(H,L){var Q=this._items;return 2===
arguments.length?Q.reduceRight(H,L):Q.reduceRight(H)};E.prototype.remove=function(H){return this.removeAt(this.indexOf(H))};E.prototype.removeAt=function(H){if(!(0>H||H>=this.length||this._emitBeforeChanges()))return H=t(this._splice(H,1)),this._emitAfterChanges(),H};E.prototype.removeMany=function(H){if(!H||!H.length||this._emitBeforeChanges())return[];H=n(H)?H.toArray():H;for(var L=this._items,Q=[],aa=H.length,ca=0;ca<aa;ca++){var ea=L.indexOf(H[ca]);if(-1<ea){for(var U=ca+1,la=ea+1,V=Math.min(H.length-
U,L.length-la),R=0;R<V&&H[U+R]===L[la+R];)R++;U=1+R;(ea=this._splice(ea,U))&&0<ea.length&&Q.push.apply(Q,ea);ca+=U-1}}this._emitAfterChanges();return Q};E.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var H=this._splice(0,this.length);H&&(H.reverse(),this._splice.apply(this,[0,0].concat(H)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var H=t(this._splice(0,1));this._emitAfterChanges();return H}};E.prototype.slice=
function(H,L){void 0===H&&(H=0);void 0===L&&(L=this.length);return this._createNewInstance({items:this._items.slice(H,L)})};E.prototype.some=function(H,L){return this._items.some(H,L)};E.prototype.sort=function(H){if(!this.length||this._emitBeforeChanges())return this;var L=this._splice(0,this.length);arguments.length?L.sort(H):L.sort();this._splice.apply(this,[0,0].concat(L));return this};E.prototype.splice=function(H,L){for(var Q=[],aa=2;aa<arguments.length;aa++)Q[aa-2]=arguments[aa];if(this._emitBeforeChanges())return[];
Q=this._splice.apply(this,[H,L].concat(Q))||[];this._emitAfterChanges();return Q};E.prototype.toArray=function(){return this._items.slice()};E.prototype.toJSON=function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var H=[],L=0;L<arguments.length;L++)H[L]=arguments[L];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(H));
this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(H){return new this.constructor(H)};E.prototype._splice=function(H,L){for(var Q=[],aa=2;aa<arguments.length;aa++)Q[aa-2]=arguments[aa];aa=this._items;var ca=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=k.schedule(this._boundDispatch));
if(L){var ea=aa.splice(H,L);if(this.hasEventListener("before-remove")){var U=x.acquire();U.target=this;U.cancellable=!0;for(var la=0,V=ea.length;la<V;la++){var R=ea[la];U.reset(R);this.emit("before-remove",U);U.defaultPrevented&&(ea.splice(la,1),aa.splice(H,0,R),H+=1,--la,--V)}x.release(U)}this.length=this._items.length;if(this.hasEventListener("after-remove")){R=x.acquire();R.target=this;R.cancellable=!1;V=ea.length;for(la=0;la<V;la++)R.reset(ea[la]),this.emit("after-remove",R);x.release(R)}}if(Q&&
Q.length){if(ca){la=[];for(V=0;V<Q.length;V++)R=Q[V],U=ca.ensureType(R),null==U&&null!=R||la.push(U);Q=la}ca=this.hasEventListener("before-add");la=this.hasEventListener("after-add");V=H===this.length;if(ca||la){R=x.acquire();R.target=this;R.cancellable=!0;U=x.acquire();U.target=this;U.cancellable=!1;for(var ha=0,S=Q;ha<S.length;ha++){var X=S[ha];ca?(R.reset(X),this.emit("before-add",R),R.defaultPrevented||(V?aa.push(X):aa.splice(H++,0,X),this._set("length",aa.length),la&&(U.reset(X),this.emit("after-add",
U)))):(V?aa.push(X):aa.splice(H++,0,X),this._set("length",aa.length),U.reset(X),this.emit("after-add",U))}x.release(R)}else V?aa.push.apply(aa,Q):aa.splice.apply(aa,[H,0].concat(Q)),this._set("length",aa.length)}(Q&&Q.length||ea&&ea.length)&&this._notifyChangeEvent(Q,ea);return ea};E.prototype._emitBeforeChanges=function(){var H=!1;if(this.hasEventListener("before-changes")){var L=x.acquire();L.target=this;L.cancellable=!0;this.emit("before-changes",L);H=L.defaultPrevented;x.release(L)}return H};
E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var H=x.acquire();H.target=this;H.cancellable=!1;this.emit("after-changes",H);x.release(H)}};E.prototype._notifyChangeEvent=function(H,L){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:H,removed:L})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var H=this._notifications;this._notifications=
null;for(var L=function(ca){var ea=ca.changes;z.clear();v.clear();w.clear();for(var U=0;U<ea.length;U++){var la=ea[U],V=la.added;la=la.removed;if(V)if(0===w.size&&0===v.size)for(var R=0,ha=V;R<ha.length;R++)V=ha[R],z.add(V);else for(R=0,ha=V;R<ha.length;R++)V=ha[R],v.has(V)?(w.add(V),v["delete"](V)):w.has(V)||z.add(V);if(la)if(0===w.size&&0===z.size)for(R=0;R<la.length;R++)V=la[R],v.add(V);else for(R=0;R<la.length;R++)V=la[R],z.has(V)?z["delete"](V):(w["delete"](V),v.add(V))}var S=f.acquire();z.forEach(function(xa){S.push(xa)});
var X=f.acquire();v.forEach(function(xa){X.push(xa)});var ka=Q._items,oa=ca.items,ta=f.acquire();w.forEach(function(xa){oa.indexOf(xa)!==ka.indexOf(xa)&&ta.push(xa)});if(ca.listeners&&(S.length||X.length||ta.length))for(ea={target:Q,added:S,removed:X,moved:ta},U=ca.listeners.length,V=0;V<U;V++)la=ca.listeners[V],la.removed||la.callback.call(Q,ea);f.release(S);f.release(X);f.release(ta)},Q=this,aa=0;aa<H.length;aa++)L(H[aa]);z.clear();v.clear();w.clear()}};E.isCollection=n;b([l.property()],E.prototype,
"length",void 0);b([l.property()],E.prototype,"items",null);return E=F=b([l.subclass("esri.core.Collection")],E)}(l.declared(h,g));return G})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(D,q,a,b){function d(h,f,g,c){var e;Array.isArray(f)?e=f:-1<f.indexOf(",")&&(e=f.split(/\s*,\s*/));if(e){var k=[];for(f=0;f<e.length;f++)k.push(d(h,e[f],g,c));k.remove=function(){for(var l=0;l<k.length;l++)k[l].remove()};return k}return c(h,f)}return function(){function h(){}
h.prototype.emit=function(f,g){if(this.hasEventListener(f))return g=g||{},g.target||(g.target=this),b.emit(this,f,g)};h.prototype.on=function(f,g){return d(this,f,g,function(c,e){return a.after(c,"on"+e,g,!0)})};h.prototype.hasEventListener=function(f){f="on"+f;return!(!this[f]||!this[f].after)};return h}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k){function l(m){for(var n in m)q.hasOwnProperty(n)||(q[n]=m[n])}Object.defineProperty(q,"__esModule",{value:!0});l(a);l(b);l(d);l(h);l(f);l(g);l(c);l(e);l(k)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.aliasOf=function(b){return function(d,h){a.getPropertyMetadata(d,h).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.autoDestroy=function(){return function(b,d,h){a.getMetadata(b).autoDestroy=!0;return b[d]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.declared=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];d=function(){return this||{}};d.__bases__=[a].concat(b);return d}})},
"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(D,q,a,b,d,h){Object.defineProperty(q,"__esModule",{value:!0});d.getLogger("esri.core.accessorSupport.decorators.property");q.property=function(f){void 0===f&&(f={});return function(g,c){var e=g.constructor.prototype;if(e!==Function.prototype){var k=Object.getOwnPropertyDescriptor(g,c);k&&(k.get||k.set)?(f=b.clone(f),k.set&&(f.set=k.set),
k.get&&(f.get=k.get)):k&&k.hasOwnProperty("value")&&(f=b.clone(f),f.value=k.value);e=h.getPropertyMetadata(e,c);for(var l in f)k=f[l],Array.isArray(k)?e[l]=(e[l]||[]).concat(k):e[l]=k}}};q.propertyJSONMeta=function(f,g,c){f=h.getPropertyMetadata(f.constructor.prototype,c);f.json||(f.json={});f=f.json;void 0!==g&&(f.origins||(f.origins={}),f.origins[g]||(f.origins[g]={}),f=f.origins[g]);return f}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.reader=function(d,h,f){if(void 0===h||Array.isArray(h)){var g=d;f=h;var c=[void 0]}else g=h,c=Array.isArray(d)?d:[d];return function(e,k,l){var m=e.constructor.prototype;c.forEach(function(n){n=b.propertyJSONMeta(e,n,g);n.read&&"object"!==typeof n.read&&(n.read={});a.setDeepValue("read.reader",m[k],n);f&&(n.read.source=(n.read.source||[]).concat(f))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.shared=function(a){return function(b,d){b[d]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(D,q,a,b){function d(k,l){k.read&&("function"===typeof k.read?l.push(k.read):"object"===typeof k.read&&k.read.reader&&l.push(k.read.reader))}function h(k,l){k.write&&("function"===typeof k.write?l.push(k.write):"object"===typeof k.write&&
k.write.writer&&l.push(k.write.writer))}function f(k){var l=[];k=b.getPropertiesMetadata(k.prototype);if(!k)return l;for(var m in k){var n=k[m];n.cast&&l.push(n.cast);n.copy&&l.push(n.copy);if(n=n.json)if(d(n,l),h(n,l),n=n.origins)for(var p in n){var t=n[p];d(t,l);h(t,l)}}return l}function g(k){var l={values:{},descriptors:{}},m=["__bases__"],n=b.getPropertiesMetadata(k.prototype),p=f(k);Object.getOwnPropertyNames(k.prototype).filter(function(t){return-1!==m.indexOf(t)||n&&n.hasOwnProperty(t)||!e(Object.getOwnPropertyDescriptor(k.prototype,
t))&&-1!==p.indexOf(k.prototype[t])?!1:!0}).forEach(function(t){var r=Object.getOwnPropertyDescriptor(k.prototype,t);e(r)?l.descriptors[t]=r:l.values[t]=k.prototype[t]});return l}function c(k){var l=Object.getOwnPropertyNames(k),m=Object.getPrototypeOf(k.prototype).constructor,n=Object.getOwnPropertyNames(Function);n.push("__bases__");var p=Object.getOwnPropertyNames(m),t={values:{},descriptors:{}};l.filter(function(r){return-1!==n.indexOf(r)?!1:-1===p.indexOf(r)||m[r]!==k[r]?!0:!1}).forEach(function(r){var y=
Object.getOwnPropertyDescriptor(k,r);e(y)?t.descriptors[r]=y:t.values[r]=k[r]});return t}function e(k){return k&&!(!k.get&&!k.set)}Object.defineProperty(q,"__esModule",{value:!0});q.subclass=function(k){return function(l){var m=g(l),n=c(l);null!=k&&(m.values.declaredClass=k);l=a(l.__bases__,m.values);Object.defineProperties(l.prototype,m.descriptors);for(var p in n.values)l[p]=n.values[p];Object.defineProperties(l,n.descriptors);return l}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require",
"exports","../../object","./property"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.writer=function(d,h,f){if(void 0===h){var g=d;var c=[void 0]}else"string"!==typeof h?(g=d,c=[void 0],f=h):(g=h,c=Array.isArray(d)?d:[d]);return function(e,k,l){var m=e.constructor.prototype;c.forEach(function(n){n=b.propertyJSONMeta(e,n,g);n.write&&"object"!==typeof n.write&&(n.write={});f&&a.setDeepValue("write.target",f,n);a.setDeepValue("write.writer",m[k],n)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require",
"exports"],function(D,q){return function(){function a(b,d){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;d&&(d.disposeFunction&&(this.disposeFunction=d.disposeFunction),d.sizeOfFunction&&(this.sizeOfFunction=d.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(d,h){b.disposeFunction(h,d)});this._cache.clear();this._sizeOf=0};a.prototype["delete"]=function(b){var d=this._cache.get(b);return this._cache["delete"](b)?(this._sizeOf-=this.sizeOfFunction(d),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,d),!0):!1};a.prototype.forEach=
function(b,d){this._cache.forEach(b,d)};a.prototype.get=function(b){var d=this._cache.get(b);if(void 0!==d)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),d};a.prototype.has=function(b){return this._cache.has(b)};a.prototype.set=function(b,d){var h=this.get(b);void 0!==h?this._sizeOf-=this.sizeOfFunction(h):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(d);this._cache.set(b,d);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&
this._sizeOf>this._maxSize;){var b=this._queue.pop(),d=this._cache.get(b);this._cache["delete"](b)&&(this._sizeOf-=this.sizeOfFunction(d),this.disposeFunction&&this.disposeFunction(b,d))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(D,q,a,b){function d(p,t){Array.isArray(p)?p.forEach(t):t(p)}function h(p,t,r,y,x){x=p.watch(t,function(z,v,w,u){y&&!y(z)||r.call(p,z,v,w,u)},x);d(t,function(z){var v=p.get(z);
y&&y(v)&&r.call(p,v,v,z,p)});return x}function f(p,t,r,y,x){function z(){A&&(A.remove(),A=null)}var v=!1,w=new a(z),u=new b;u.cancel=w.cancel;u.isCanceled=w.isCanceled;u.isFulfilled=w.isFulfilled;u.isRejected=w.isRejected;u.isResolved=w.isResolved;u.then=w.then;u.remove=z;Object.freeze(u);var A=h(p,t,function(G,B,E,F){v=!0;z();r&&r.call(p,G,B,E,F);w.resolve({value:G,oldValue:B,propertyName:E,target:F})},y,x);v&&A.remove();return u}function g(p){return!!p}function c(p){return!p}function e(p){return!0===
p}function k(p){return!1===p}function l(p){return void 0!==p}function m(p){return void 0===p}function n(p,t,r,y){var x=Array.isArray(t)?t:-1<t.indexOf(",")?t.split(","):[t];t=p.watch(t,r,y);x.forEach(function(z){z=z.trim();var v=p.get(z);r.call(p,v,v,z,p)});return t}Object.defineProperty(q,"__esModule",{value:!0});q.init=n;q.watch=function(p,t,r,y){return p.watch(t,r,y)};q.once=function(p,t,r,y){return f(p,t,r,null,y)};q.when=function(p,t,r,y){return h(p,t,r,g,y)};q.whenOnce=function(p,t,r,y){return f(p,
t,r,g,y)};q.whenNot=function(p,t,r,y){return h(p,t,r,c,y)};q.whenNotOnce=function(p,t,r,y){return f(p,t,r,c,y)};q.whenTrue=function(p,t,r,y){return h(p,t,r,e,y)};q.whenTrueOnce=function(p,t,r,y){return f(p,t,r,e,y)};q.whenFalse=function(p,t,r,y){return h(p,t,r,k,y)};q.whenFalseOnce=function(p,t,r,y){return f(p,t,r,k,y)};q.whenDefined=function(p,t,r,y){return h(p,t,r,l,y)};q.whenDefinedOnce=function(p,t,r,y){return f(p,t,r,l,y)};q.whenUndefined=function(p,t,r,y){return h(p,t,r,m,y)};q.whenUndefinedOnce=
function(p,t,r,y){return f(p,t,r,m,y)};q.pausable=function(p,t,r,y){var x=!1,z=p.watch(t,function(v,w,u,A){x||r.call(p,v,w,u,A)},y);return{remove:function(){z.remove()},pause:function(){x=!0},resume:function(){x=!1}}};q.on=function(p,t,r,y,x,z,v){function w(G){var B=u[G];B&&(z&&z(B.target,G,p,r),B.handle.remove(),delete u[G])}var u={},A=n(p,t,function(G,B,E){w(E);G&&"function"===typeof G.on&&(u[E]={handle:G.on(r,y),target:G},x&&x(G,E,p,r))},v);return{remove:function(){A.remove();for(var G in u)w(G)}}}})},
"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(D,q,a,b,d,h,f){function g(c){if("vector-tile"===c.service.type)var e=c.service.url+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;else e=c.service.tileServers,e=(e&&e.length?e[c.row%e.length]:c.service.url)+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;(c=
c.service.query)&&(e=e+"?"+c);return e}Object.defineProperty(q,"__esModule",{value:!0});D=function(){function c(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}c.prototype.getAvailability=function(e,k){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";var l=(e-this.location.top)*this.location.width+(k-this.location.left),m=l>>3,n=this._tileAvailabilityBitSet;return 0>m||m>n.length?"unknown":n[m]&1<<l%8?"available":"unavailable"};c.prototype._updateFromData=
function(e){for(var k=!0,l=!0,m=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),n=0,p=0;p<e.length;p++){var t=p%8;e[p]?(l=!1,m[n]|=1<<t):k=!1;7===t&&++n}this._isAllUnvailable=l;this._isAllAvailable=k;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=m,this.byteSize+=m.length)};c.fromDefinition=function(e,k){var l=e.service.request||b,m=e.row,n=e.col,p=e.width,t=e.height,r={query:{f:"json"},callbackParamName:"callback"};k=k?a({},r,k):r;return l(g(e),k).then(function(y){return y.data})["catch"](function(y){if(y&&
y.details&&422===y.details.httpStatus){y=[];for(var x=0,z=p*t;x<z;x++)y[x]=0;return{location:{top:m,left:n,width:p,height:t},valid:!0,data:y}}return f.reject(y)}).then(function(y){if(y.location&&(y.location.top!==m||y.location.left!==n||y.location.width!==p||y.location.height!==t))throw new d("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:m,left:n,width:p,height:t}});return c.fromJSON(y)})};c.fromJSON=function(e){c.validateJSON(e);
var k=new c;k.location=Object.freeze(h.clone(e.location));k._updateFromData(e.data);return Object.freeze(k)};c.validateJSON=function(e){if(!e||!e.location)throw new d("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new d("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new d("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new d("tilemap:data-mismatch","Data must be an array of numbers");
if(e.data.length!==e.location.width*e.location.height)throw new d("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return c}();q.Tilemap=D;q.tilemapDefinitionId=function(c){return c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height};q.tilemapDefinitionUrl=g;q["default"]=D})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(D,q,a,b){return function(){function d(h,f){this.styleJSON=
h;this.version=parseFloat(h.version);this.sprite=f?f.spriteUrl:h.sprite;this.glyphs=f?f.glyphsUrl:h.glyphs;if(a("stable-symbol-rendering")){var g=(h.layers||[]).filter(function(c){return c.layout&&c.layout["text-font"]})[0];g&&(h.layers||[]).forEach(function(c){c.layout&&c.layout["text-font"]&&(c.layout["text-font"]=g.layout["text-font"])})}this.layers=(h.layers||[]).map(d._create);this._identifyRefLayers()}d.prototype._identifyRefLayers=function(){for(var h=[],f=[],g=0,c=0,e=this.layers;c<e.length;c++){var k=
e[c];if(1===k.type){var l=k,m=k.sourceLayer;m+="|"+JSON.stringify(k.minzoom);m+="|"+JSON.stringify(k.maxzoom);m+="|"+JSON.stringify(k.filter);if(l.hasDataDrivenFill||l.hasDataDrivenOutline)m+="|"+JSON.stringify(g);h.push({key:m,layer:k})}2===k.type&&(l=k,m=k.sourceLayer,m+="|"+JSON.stringify(k.minzoom),m+="|"+JSON.stringify(k.maxzoom),m+="|"+JSON.stringify(k.filter),m+="|"+JSON.stringify(k.layout&&k.layout["line-cap"]),m+="|"+JSON.stringify(k.layout&&k.layout["line-join"]),l.hasDataDrivenLine&&(m+=
"|"+JSON.stringify(g)),f.push({key:m,layer:k}));++g}this._assignRefLayers(h);this._assignRefLayers(f)};d.prototype._assignRefLayers=function(h){h.sort(function(n,p){return n.key<p.key?-1:n.key>p.key?1:0});for(var f,g,c=h.length,e=0;e<c;e++){var k=h[e];if(k.key===f)k.layer.refLayerId=g;else if(f=k.key,g=k.layer.id,1===k.layer.type&&!k.layer.getPaintProperty("fill-outline-color"))for(var l=e+1;l<c;l++){var m=h[l];if(m.key===f){if(m.layer.getPaintProperty("fill-outline-color")){h[e]=m;h[l]=k;g=m.layer.id;
break}}else break}}};d._create=function(h,f,g){f=1-1/(g.length+1)*(1+f);switch(h.type){case "background":return new b.BackgroundStyleLayer(0,h,f);case "fill":return new b.FillStyleLayer(1,h,f);case "line":return new b.LineStyleLayer(2,h,f);case "symbol":return new b.SymbolStyleLayer(3,h,f);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new b.CircleStyleLayer(4,h,f)}throw Error("Unknown vector tile layer");};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),
function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function g(c,e,k){this.type=c;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=k;switch(c){case 0:this._layoutDefinition=h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=h.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=h.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=h.StyleDefinition.circleLayoutDefinition,this._paintDefinition=h.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}g.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=d.createFilter(this.filter)};g.prototype.getLayoutProperty=function(c){var e=this._layoutProperties;if(e)return e[c]};g.prototype.getPaintProperty=function(c){var e=this._paintProperties;if(e)return e[c]};g.prototype.getLayoutValue=function(c,e,k){var l,m=this._layoutProperties;m&&(m=m[c])&&(l=m.getValue(e,k));c=this._layoutDefinition[c];
void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};g.prototype.getPaintValue=function(c,e,k){var l,m=this._paintProperties;m&&(m=m[c])&&(l=m.getValue(e,k));c=this._paintDefinition[c];void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};g.prototype._parseLayout=function(c){var e={},k;for(k in c){var l=this._layoutDefinition[k];l&&(e[k]=new f(k,l,c[k]))}return e};g.prototype._parsePaint=function(c){var e={},k;for(k in c){var l=this._paintDefinition[k];
l&&(e[k]=new f(k,l,c[k]))}return e};return g}();q.StyleLayer=D;b=function(g){function c(e,k,l){return g.call(this,e,k,l)||this}a(c,g);return c}(D);q.BackgroundStyleLayer=b;b=function(g){function c(e,k,l){e=g.call(this,e,k,l)||this;k=e.getPaintProperty("fill-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("fill-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;e.hasDataDrivenFill=e.hasDataDrivenColor||e.hasDataDrivenOpacity;k=e.getPaintProperty("fill-outline-color");e.outlineUsesFillColor=
!k;e.hasDataDrivenOutlineColor=k?k.isDataDriven:!1;e.hasDataDrivenOutline=(k?e.hasDataDrivenOutlineColor:e.hasDataDrivenColor)||e.hasDataDrivenOpacity;return e}a(c,g);return c}(D);q.FillStyleLayer=b;b=function(g){function c(e,k,l){e=g.call(this,e,k,l)||this;k=e.getPaintProperty("line-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("line-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("line-width");e.hasDataDrivenWidth=k?k.isDataDriven:!1;e.hasDataDrivenLine=
e.hasDataDrivenColor||e.hasDataDrivenOpacity||e.hasDataDrivenWidth;return e}a(c,g);return c}(D);q.LineStyleLayer=b;b=function(g){function c(e,k,l){e=g.call(this,e,k,l)||this;k=e.getPaintProperty("icon-color");e.hasDataDrivenIconColor=k?k.isDataDriven:!1;k=e.getPaintProperty("icon-opacity");e.hasDataDrivenIconOpacity=k?k.isDataDriven:!1;k=e.getLayoutProperty("icon-size");e.hasDataDrivenIconSize=k?k.isDataDriven:!1;e.hasDataDrivenIcon=e.hasDataDrivenIconColor||e.hasDataDrivenIconOpacity||e.hasDataDrivenIconSize;
k=e.getPaintProperty("text-color");e.hasDataDrivenTextColor=k?k.isDataDriven:!1;k=e.getPaintProperty("text-opacity");e.hasDataDrivenTextOpacity=k?k.isDataDriven:!1;k=e.getLayoutProperty("text-size");e.hasDataDrivenTextSize=k?k.isDataDriven:!1;e.hasDataDrivenText=e.hasDataDrivenTextColor||e.hasDataDrivenTextOpacity||e.hasDataDrivenTextSize;return e}a(c,g);return c}(D);q.SymbolStyleLayer=b;D=function(g){function c(e,k,l){e=g.call(this,e,k,l)||this;k=e.getPaintProperty("circle-radius");e.hasDataDrivenRadius=
k?k.isDataDriven:!1;k=e.getPaintProperty("circle-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-width");e.hasDataDrivenStrokeWidth=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-color");e.hasDataDrivenStrokeColor=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-opacity");e.hasDataDrivenStrokeOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-blur");e.hasDataDrivenBlur=
k?k.isDataDriven:!1;return e}a(c,g);return c}(D);q.CircleStyleLayer=D;D=function(){return function(g,c,e){this.cap=g.getLayoutValue("line-cap",c,e);this.join=g.getLayoutValue("line-join",c,e);this.miterLimit=g.getLayoutValue("line-miter-limit",c,e);this.roundLimit=g.getLayoutValue("line-round-limit",c,e)}}();q.LineLayout=D;D=function(){return function(g,c,e,k){this.allowOverlap=g.getLayoutValue("icon-allow-overlap",c,k);this.ignorePlacement=g.getLayoutValue("icon-ignore-placement",c,k);this.optional=
g.getLayoutValue("icon-optional",c,k);this.rotationAlignment=g.getLayoutValue("icon-rotation-alignment",c,k);this.size=g.getLayoutValue("icon-size",c,k);this.rotate=g.getLayoutValue("icon-rotate",c,k);this.padding=g.getLayoutValue("icon-padding",c,k);this.keepUpright=g.getLayoutValue("icon-keep-upright",c,k);this.offset=g.getLayoutValue("icon-offset",c,k);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();q.IconLayout=D;D=function(){return function(g,c,e,k){this.allowOverlap=g.getLayoutValue("text-allow-overlap",
c,k);this.ignorePlacement=g.getLayoutValue("text-ignore-placement",c,k);this.optional=g.getLayoutValue("text-optional",c,k);this.rotationAlignment=g.getLayoutValue("text-rotation-alignment",c,k);this.fontArray=g.getLayoutValue("text-font",c,k);this.maxWidth=g.getLayoutValue("text-max-width",c,k);this.lineHeight=g.getLayoutValue("text-line-height",c,k);this.letterSpacing=g.getLayoutValue("text-letter-spacing",c,k);this.justify=g.getLayoutValue("text-justify",c,k);this.anchor=g.getLayoutValue("text-anchor",
c,k);this.maxAngle=g.getLayoutValue("text-max-angle",c,k);this.size=g.getLayoutValue("text-size",c,k);this.rotate=g.getLayoutValue("text-rotate",c,k);this.padding=g.getLayoutValue("text-padding",c,k);this.keepUpright=g.getLayoutValue("text-keep-upright",c,k);this.transform=g.getLayoutValue("text-transform",c,k);this.offset=g.getLayoutValue("text-offset",c,k);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();q.TextLayout=D})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(D,q){return function(){function a(b,d,h){this._op=b;"$type"===d?(this._val=h instanceof Array?h.map(function(f){return a._types.indexOf(f)}):a._types.indexOf(h),this._op+=11):(this._key=d,this._val=h)}a.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=
this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var d=0,h=this._val;d<h.length;d++){var f=h[d];if(f.filter(b))return!0}return!1;case 10:d=0;for(h=this._val;d<h.length;d++)if(f=h[d],!f.filter(b))return!1;return!0;case 11:d=0;for(h=this._val;d<h.length;d++)if(f=h[d],f.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<
this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type);case 20:return void 0!==b.values[this._key];case 21:return void 0===b.values[this._key]}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var d=b[0];if(1>=b.length)return new a(0,void 0,"any"!==d);switch(d){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,
b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));case "has":return new a(20,b[1],void 0);case "!has":return new a(21,
b[1],void 0);default:throw Error("invalid operator: "+d);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(){}b.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],
"default":"visible"}};b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point",
"line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",
minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};b.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color",
"default":[0,0,0,1]},"background-pattern":{type:"string"}};b.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};b.linePaintDefinition=
{"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number",
"default":[]},"line-pattern":{type:"string"}};b.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number",
"default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};b.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},
"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"circle-stroke-width":{type:"number",minimum:0,"default":0},"circle-stroke-color":{type:"color","default":[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,"default":1}};return b}();q.StyleDefinition=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../Color","../GeometryUtils"],function(D,q,a,b){return function(){function d(h,f,g){this.isDataDriven=!1;switch(f.type){case "number":h=!0;break;case "color":h=!0;g=d._parseColor(g);break;case "array":h="number"===f.value;break;default:h=!1}null==g&&(g=f["default"]);h&&"interval"===g.type&&(h=!1);var c=g&&g.stops&&0<g.stops.length;if(c)for(var e=0,k=g.stops;e<k.length;e++){var l=k[e];l[1]=this._validate(l[1],f)}if(this.isDataDriven=g?!!g.property:!1)if(void 0!==g["default"]&&(g["default"]=
this._validate(g["default"],f)),c)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,f);break;case "categorical":this.getValue=this._buildCategorical(g,f);break;default:this.getValue=h?this._buildInterpolate(g,f):this._buildInterval(g,f)}else this.getValue=this._buildIdentity(g,f);else c?this.getValue=h?this._buildZoomInterpolate(g):this._buildZoomInterval(g):(g=this._validate(g,f),this.getValue=this._buildSimple(g))}d.prototype._validate=function(h,f){if("number"===f.type){if(h<f.minimum)return f.minimum;
if(h>f.maximum)return f.maximum}return h};d.prototype._buildSimple=function(h){return function(){return h}};d.prototype._buildIdentity=function(h,f){var g=this;return function(c,e){if(e){var k=e.values[h.property];"color"===f.type&&(k=d._parseColor(k))}void 0===k&&(k=h["default"]);return void 0!==k?g._validate(k,f):f["default"]}};d.prototype._buildCategorical=function(h,f){var g=this;return function(c,e){var k;e&&(k=e.values[h.property]);k=g._categorical(k,h.stops);return void 0!==k?k:void 0!==h["default"]?
h["default"]:f["default"]}};d.prototype._buildInterval=function(h,f){var g=this;return function(c,e){var k;e&&(k=e.values[h.property]);return"number"===typeof k?g._interval(k,h.stops):void 0!==h["default"]?h["default"]:f["default"]}};d.prototype._buildInterpolate=function(h,f){var g=this;return function(c,e){var k;e&&(k=e.values[h.property]);return"number"===typeof k?g._interpolate(k,h.stops,h.base||1):void 0!==h["default"]?h["default"]:f["default"]}};d.prototype._buildZoomInterpolate=function(h){var f=
this;return function(g){return f._interpolate(g,h.stops,h.base||1)}};d.prototype._buildZoomInterval=function(h){var f=this;return function(g){return f._interval(g,h.stops)}};d.prototype._categorical=function(h,f){for(var g=f.length,c=0;c<g;c++)if(f[c][0]===h)return f[c][1]};d.prototype._interval=function(h,f){for(var g=f.length,c=0,e=0;e<g;e++)if(f[e][0]<=h)c=e;else break;return f[c][1]};d.prototype._interpolate=function(h,f,g){for(var c,e,k=f.length,l=0;l<k;l++){var m=f[l];if(m[0]<=h)c=m;else{e=
m;break}}if(c&&e){l=e[0]-c[0];h-=c[0];g=1===g?h/l:(Math.pow(g,h)-1)/(Math.pow(g,l)-1);if(Array.isArray(c[1])){c=c[1];e=e[1];h=[];for(l=0;l<c.length;l++)h.push(b.interpolate(c[l],e[l],g));return h}return b.interpolate(c[1],e[1],g)}if(c)return c[1];if(e)return e[1]};d._isEmpty=function(h){for(var f in h)if(h.hasOwnProperty(f))return!1;return!0};d._parseColor=function(h){if(Array.isArray(h))return h;if("string"===typeof h){if(h=new a(h),!this._isEmpty(h))return a.toUnitRGBA(h)}else return h&&h["default"]&&
(h["default"]=d._parseColor(h["default"])),h&&h.stops&&(h.stops=h.stops.map(function(f){return[f[0],d._parseColor(f[1])]})),h};return d}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(D,q,a){function b(f){return Math.max(0,Math.min(q.ensureInteger(f),255))}var d=D([a],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new d(this.toRgba())}});
d.toJSON=function(f){return f&&[b(f.r),b(f.g),b(f.b),1<f.a?f.a:b(255*f.a)]};d.fromJSON=function(f){return f&&new d([f[0],f[1],f[2],f[3]/255])};d.toUnitRGB=function(f){return[f.r/255,f.g/255,f.b/255]};d.toUnitRGBA=function(f){return[f.r/255,f.g/255,f.b/255,null!=f.a?f.a:1]};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<h.length;D++)d[h[D]]=a[h[D]];d.named.rebeccapurple=[102,51,153];return d})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(D,q,a,b){var d={};q.setObject("dojo.colors",d);var h=function(g,c,e){0>e&&++e;1<e&&--e;var k=6*e;return 1>k?g+(c-g)*k:1>2*e?c:2>3*e?g+(c-g)*(2/3-e)*6:g};D.colorFromRgb=a.fromRgb=function(g,c){var e=g.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var k=e[2].split(/\s*,\s*/),l=k.length;e=e[1];if("rgb"==e&&3==l||"rgba"==e&&4==l)return e=k[0],"%"==e.charAt(e.length-1)?(e=b.map(k,function(p){return 2.56*parseFloat(p)}),4==l&&(e[3]=k[3]),a.fromArray(e,c)):a.fromArray(k,
c);if("hsl"==e&&3==l||"hsla"==e&&4==l){e=(parseFloat(k[0])%360+360)%360/360;var m=parseFloat(k[1])/100,n=parseFloat(k[2])/100;m=.5>=n?n*(m+1):n+m-n*m;n=2*n-m;e=[256*h(n,m,e+1/3),256*h(n,m,e),256*h(n,m,e-1/3),1];4==l&&(e[3]=k[3]);return a.fromArray(e,c)}}return null};var f=function(g,c,e){g=Number(g);return isNaN(g)?e:g<c?c:g>e?e:g};a.prototype.sanitize=function(){this.r=Math.round(f(this.r,0,255));this.g=Math.round(f(this.g,0,255));this.b=Math.round(f(this.b,0,255));this.a=f(this.a,0,1);return this};
d.makeGrey=a.makeGrey=function(g,c){return a.fromArray([g,g,g,c])};q.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(D,q){function a(d,h){d%=h;return 0<=d?d:d+h}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=
256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(d){return a(d*q.C_RAD_TO_256,256)};q.degToByte=function(d){return a(d*q.C_DEG_TO_256,256)};q.log2=function(d){return Math.log(d)*b};q.sqr=function(d){return d*d};q.clamp=function(d,h,f){return Math.min(Math.max(d,h),f)};q.interpolate=function(d,h,f){return d*(1-f)+h*f};q.between=function(d,h,f){return d>=h&&d<=f||d>=f&&d<=h}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l){return function(m){function n(){var p=m.call(this)||this;p.isInitialized=!1;p._displayWidth=0;p._displayHeight=0;p._pointToCallbacks=new Map;p._tileCoordinateScale=f.create();p._orientationVec=f.create();p._displayScale=f.create();p._orientationVec.set([0,0,1]);p._defaultTransform=h.create();return p}a(n,m);n.prototype.initialize=function(p,t,r,y){this._renderer=new l;this._renderer.initialize(p,t);this._tileInfoView=y;this._tileInfo=r;this.isInitialized=!0};n.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)};n.prototype.hittest=function(p,t){var r=this,y=[p,t];return d.create(function(x,z){r._pointToCallbacks.set(y,{resolve:x,reject:z});r.requestRender()},function(){r._pointToCallbacks.has(y)&&r._pointToCallbacks["delete"](y)})};n.prototype.prepareChildrenRenderParameters=function(p){var t=p.state;if(!t||!this._tileInfo||!this.isInitialized)return p;p.displayLevel=this._tileInfo.scaleToZoom(t.scale);p.requiredLevel=this._tileInfoView.getSmallestInfoForScale(t.scale).level;
p.renderer=this._renderer;return p};n.prototype.renderChildren=function(p){var t=this;if(0!==this.children.length&&this.isInitialized&&p&&p.state){var r=e["default"].toWGLDrawPhases(p.drawPhase);if(!(0<r.length&&r[0]===c.WGLDrawPhase.LABEL)){this.sortChildren(function(v,w){return v.key.level-w.key.level});r=this.children.length;for(var y=1;y<=r;y++){var x=this.children[y-1];x.attached&&(x.stencilData.reference=y,x.stencilData.mask=255)}this._updateTilesTransform(p.state,this._tileInfoView.getSmallestInfoForScale(p.state.scale).level,
this.children);r=p.context;r.setDepthWriteEnabled(!0);this._renderer.setStateParams(p.state,p.pixelRatio,p.displayLevel);this._renderer.drawClippingMasks(r,this.children);r.setStencilWriteMask(0);r.setBlendFunctionSeparate(1,771,1,771);r.setStencilOp(7680,7680,7681);r.setDepthFunction(515);r.setBlendingEnabled(!1);r.setStencilTestEnabled(!0);r.setDepthTestEnabled(!0);r.setDepthWriteEnabled(!0);p.drawphase=0;m.prototype.renderChildren.call(this,p);r.setDepthWriteEnabled(!1);r.setBlendingEnabled(!0);
p.drawphase=1;m.prototype.renderChildren.call(this,p);p.drawphase=2;m.prototype.renderChildren.call(this,p);r.setStencilTestEnabled(!1);r.setDepthTestEnabled(!1);if(b("esri-vector-tiles-debug"))for(y=0,x=this.children;y<x.length;y++){var z=x[y];z.attached&&z.visible&&this._renderer.renderTileInfo(r,z)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(v,w){v.resolve(t._hitTest(p,w[0],w[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
n.prototype.removeAllChildren=function(){for(var p=0;p<this.children.length;p++)this.children[p].dispose();m.prototype.removeAllChildren.call(this)};n.prototype._hitTest=function(p,t,r){var y=this._tileInfoView.getClosestInfoForScale(p.state.scale).level,x=[0,0];p.state.toMap(x,[t,r]);var z=p.state.clone(),v=z.viewpoint.clone(),w=v.targetGeometry;w.x=x[0];w.y=x[1];v.targetGeometry=w;z.viewpoint=v;z.size=[3,3];this._renderer.setStateParams(z,p.pixelRatio,p.displayLevel);return(p=this._renderer.hitTest({drawPhase:0,
pixelRatio:p.pixelRatio,stationary:p.stationary,opacity:p.opacity,context:p.context,displayLevel:p.displayLevel,requiredLevel:p.requiredLevel,renderer:p.renderer,layerOpacity:p.layerOpacity,state:z,drawphase:3,painter:null},t,r,this.children,y,3,this._updateTilesTransform.bind(this)))&&0!==p.length?p[0]:null};n.prototype._updateTilesTransform=function(p,t,r){var y=1/p.width,x=1/p.height,z=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(t).resolution,p.resolution,p.rotation,this._tileInfo.size[1],
4096,p.width,p.height,this._defaultTransform);for(var v=0;v<r.length;v++){var w=r[v];p.toScreen(z,w.coords);z[1]=p.height-z[1];w.tileTransform.displayCoord[0]=2*z[0]*y-1;w.tileTransform.displayCoord[1]=2*z[1]*x-1;w.key.level===t&&4096===w.coordRange?w.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(w.key.level).resolution,p.resolution,p.rotation,this._tileInfo.size[1],w.coordRange,p.width,p.height,w.tileTransform.transform)}};n.prototype._calculateRelativeViewProjMat=
function(p,t,r,y,x,z,v,w){var u=.125;512!==y&&4096!==x&&(u=y/x);p=p/t*u;this._tileCoordinateScale.set([p,p,1]);if(z!==this._displayWidth||v!==this._displayHeight)this._displayScale.set([2/z,-2/v,1]),this._displayWidth=z,this._displayHeight=v;h.identity(w);h.scale(w,w,this._tileCoordinateScale);h.rotate(w,w,-r*k.C_DEG_TO_RAD,this._orientationVec);h.scale(w,w,this._displayScale);h.transpose(w,w)};return n}(g)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(D){var q=
{scalar:{},SIMD:{},create:function(){var a=new D.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new D.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=
b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y){var x=new D.ARRAY_TYPE(16);x[0]=a;x[1]=b;x[2]=d;x[3]=h;x[4]=f;x[5]=g;x[6]=c;x[7]=e;x[8]=k;x[9]=l;x[10]=m;x[11]=n;x[12]=p;x[13]=t;x[14]=r;x[15]=y;return x},set:function(a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x){a[0]=b;a[1]=d;a[2]=h;a[3]=f;a[4]=g;a[5]=c;a[6]=e;a[7]=k;a[8]=l;a[9]=m;a[10]=n;a[11]=p;a[12]=t;a[13]=r;a[14]=y;a[15]=x;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};q.scalar.transpose=function(a,b){if(a===b){var d=b[1],h=b[2],f=b[3],g=b[6],c=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=h;a[9]=g;a[11]=b[14];a[12]=f;a[13]=c;a[14]=e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],
a[14]=b[11],a[15]=b[15];return a};q.SIMD.transpose=function(a,b){var d=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var f=SIMD.Float32x4.load(b,8);var g=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.shuffle(d,h,0,1,4,5);var e=SIMD.Float32x4.shuffle(f,g,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);c=SIMD.Float32x4.shuffle(c,e,1,3,5,7);SIMD.Float32x4.store(a,0,k);SIMD.Float32x4.store(a,4,c);c=SIMD.Float32x4.shuffle(d,h,2,3,6,7);e=SIMD.Float32x4.shuffle(f,g,2,3,6,7);d=SIMD.Float32x4.shuffle(c,
e,0,2,4,6);h=SIMD.Float32x4.shuffle(c,e,1,3,5,7);SIMD.Float32x4.store(a,8,d);SIMD.Float32x4.store(a,12,h);return a};q.transpose=D.USE_SIMD?q.SIMD.transpose:q.scalar.transpose;q.scalar.invert=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],t=b[11],r=b[12],y=b[13],x=b[14],z=b[15],v=d*e-h*c,w=d*k-f*c,u=d*l-g*c,A=h*k-f*e,G=h*l-g*e,B=f*l-g*k,E=m*y-n*r,F=m*x-p*r,H=m*z-t*r,L=n*x-p*y,Q=n*z-t*y,aa=p*z-t*x,ca=v*aa-w*Q+u*L+A*H-G*F+B*E;if(!ca)return null;ca=1/ca;
a[0]=(e*aa-k*Q+l*L)*ca;a[1]=(f*Q-h*aa-g*L)*ca;a[2]=(y*B-x*G+z*A)*ca;a[3]=(p*G-n*B-t*A)*ca;a[4]=(k*H-c*aa-l*F)*ca;a[5]=(d*aa-f*H+g*F)*ca;a[6]=(x*u-r*B-z*w)*ca;a[7]=(m*B-p*u+t*w)*ca;a[8]=(c*Q-e*H+l*E)*ca;a[9]=(h*H-d*Q-g*E)*ca;a[10]=(r*G-y*u+z*v)*ca;a[11]=(n*u-m*G-t*v)*ca;a[12]=(e*F-c*L-k*E)*ca;a[13]=(d*L-h*F+f*E)*ca;a[14]=(y*w-r*A-x*v)*ca;a[15]=(m*A-n*w+p*v)*ca;return a};q.SIMD.invert=function(a,b){var d=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var f=SIMD.Float32x4.load(b,8);var g=SIMD.Float32x4.load(b,
12);var c=SIMD.Float32x4.shuffle(d,h,0,1,4,5);var e=SIMD.Float32x4.shuffle(f,g,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,c,1,3,5,7);c=SIMD.Float32x4.shuffle(d,h,2,3,6,7);var l=SIMD.Float32x4.shuffle(f,g,2,3,6,7);var m=SIMD.Float32x4.shuffle(c,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,c,1,3,5,7);c=SIMD.Float32x4.mul(m,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.mul(e,c);h=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,
c),d);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);c=SIMD.Float32x4.mul(e,m);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d);g=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c));g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);m=SIMD.Float32x4.swizzle(m,
2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,c),d);f=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(m,c));f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);c=SIMD.Float32x4.mul(k,e);c=SIMD.Float32x4.swizzle(c,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,c),g);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),f);g=SIMD.Float32x4.sub(g,
SIMD.Float32x4.mul(m,c));c=SIMD.Float32x4.mul(k,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(m,c));f=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),f);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,c),h);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.mul(k,m);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.swizzle(c,2,
3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c));g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),g);k=SIMD.Float32x4.mul(k,d);k=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(k,2,3,0,1),k);k=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(k,1,0,3,2),k);c=SIMD.Float32x4.reciprocalApproximation(k);k=SIMD.Float32x4.sub(SIMD.Float32x4.add(c,c),SIMD.Float32x4.mul(k,SIMD.Float32x4.mul(c,c)));k=SIMD.Float32x4.swizzle(k,0,0,0,0);if(!k)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(k,d));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(k,h));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(k,f));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(k,g));return a};q.invert=D.USE_SIMD?q.SIMD.invert:q.scalar.invert;q.scalar.adjoint=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],t=b[11],r=b[12],y=b[13],x=b[14],z=b[15];a[0]=e*(p*z-t*x)-n*(k*z-l*x)+y*(k*t-l*p);a[1]=-(h*(p*z-t*x)-n*(f*z-g*x)+y*(f*t-g*p));a[2]=h*(k*z-l*x)-e*(f*z-g*x)+y*(f*l-g*k);a[3]=-(h*(k*t-l*p)-e*(f*t-g*p)+n*(f*
l-g*k));a[4]=-(c*(p*z-t*x)-m*(k*z-l*x)+r*(k*t-l*p));a[5]=d*(p*z-t*x)-m*(f*z-g*x)+r*(f*t-g*p);a[6]=-(d*(k*z-l*x)-c*(f*z-g*x)+r*(f*l-g*k));a[7]=d*(k*t-l*p)-c*(f*t-g*p)+m*(f*l-g*k);a[8]=c*(n*z-t*y)-m*(e*z-l*y)+r*(e*t-l*n);a[9]=-(d*(n*z-t*y)-m*(h*z-g*y)+r*(h*t-g*n));a[10]=d*(e*z-l*y)-c*(h*z-g*y)+r*(h*l-g*e);a[11]=-(d*(e*t-l*n)-c*(h*t-g*n)+m*(h*l-g*e));a[12]=-(c*(n*x-p*y)-m*(e*x-k*y)+r*(e*p-k*n));a[13]=d*(n*x-p*y)-m*(h*x-f*y)+r*(h*p-f*n);a[14]=-(d*(e*x-k*y)-c*(h*x-f*y)+r*(h*k-f*e));a[15]=d*(e*p-k*n)-c*
(h*p-f*n)+m*(h*k-f*e);return a};q.SIMD.adjoint=function(a,b){var d=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var f=SIMD.Float32x4.load(b,8);var g=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.shuffle(d,h,0,1,4,5);var e=SIMD.Float32x4.shuffle(f,g,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,c,1,3,5,7);c=SIMD.Float32x4.shuffle(d,h,2,3,6,7);h=SIMD.Float32x4.shuffle(f,g,2,3,6,7);d=SIMD.Float32x4.shuffle(c,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,c,1,3,5,7);
c=SIMD.Float32x4.mul(d,h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);f=SIMD.Float32x4.mul(e,c);g=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,c),f);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);c=SIMD.Float32x4.mul(e,d);c=SIMD.Float32x4.swizzle(c,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),f);var l=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(h,
c));l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,c),f);var m=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(d,c));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);c=SIMD.Float32x4.mul(k,e);c=SIMD.Float32x4.swizzle(c,
1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),m);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,c),l);c=SIMD.Float32x4.swizzle(c,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,c),m);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(d,c));c=SIMD.Float32x4.mul(k,h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(d,c));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),m);c=SIMD.Float32x4.swizzle(c,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,c),g);m=SIMD.Float32x4.sub(m,
SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.mul(k,d);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),g);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.swizzle(c,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(h,c));l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),l);SIMD.Float32x4.store(a,0,f);SIMD.Float32x4.store(a,4,g);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,l);return a};q.adjoint=D.USE_SIMD?q.SIMD.adjoint:q.scalar.adjoint;q.determinant=
function(a){var b=a[0],d=a[1],h=a[2],f=a[3],g=a[4],c=a[5],e=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11],t=a[12],r=a[13],y=a[14];a=a[15];return(b*c-d*g)*(n*a-p*y)-(b*e-h*g)*(m*a-p*r)+(b*k-f*g)*(m*y-n*r)+(d*e-h*c)*(l*a-p*t)-(d*k-f*c)*(l*y-n*t)+(h*k-f*e)*(l*r-m*t)};q.SIMD.multiply=function(a,b,d){var h=SIMD.Float32x4.load(b,0),f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.load(d,0);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,0,c);c=SIMD.Float32x4.load(d,4);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),g),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,4,c);c=SIMD.Float32x4.load(d,8);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,8,c);d=SIMD.Float32x4.load(d,12);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,12,h);return a};q.scalar.multiply=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7],n=b[8],p=b[9],t=b[10],r=b[11],y=b[12],x=b[13],z=b[14];b=b[15];var v=d[0],w=d[1],u=d[2],A=d[3];a[0]=v*h+w*e+u*n+A*y;a[1]=v*f+w*k+u*p+A*x;a[2]=v*g+w*
l+u*t+A*z;a[3]=v*c+w*m+u*r+A*b;v=d[4];w=d[5];u=d[6];A=d[7];a[4]=v*h+w*e+u*n+A*y;a[5]=v*f+w*k+u*p+A*x;a[6]=v*g+w*l+u*t+A*z;a[7]=v*c+w*m+u*r+A*b;v=d[8];w=d[9];u=d[10];A=d[11];a[8]=v*h+w*e+u*n+A*y;a[9]=v*f+w*k+u*p+A*x;a[10]=v*g+w*l+u*t+A*z;a[11]=v*c+w*m+u*r+A*b;v=d[12];w=d[13];u=d[14];A=d[15];a[12]=v*h+w*e+u*n+A*y;a[13]=v*f+w*k+u*p+A*x;a[14]=v*g+w*l+u*t+A*z;a[15]=v*c+w*m+u*r+A*b;return a};q.multiply=D.USE_SIMD?q.SIMD.multiply:q.scalar.multiply;q.mul=q.multiply;q.scalar.translate=function(a,b,d){var h=
d[0],f=d[1];d=d[2];if(b===a)a[12]=b[0]*h+b[4]*f+b[8]*d+b[12],a[13]=b[1]*h+b[5]*f+b[9]*d+b[13],a[14]=b[2]*h+b[6]*f+b[10]*d+b[14],a[15]=b[3]*h+b[7]*f+b[11]*d+b[15];else{var g=b[0];var c=b[1];var e=b[2];var k=b[3];var l=b[4];var m=b[5];var n=b[6];var p=b[7];var t=b[8];var r=b[9];var y=b[10];var x=b[11];a[0]=g;a[1]=c;a[2]=e;a[3]=k;a[4]=l;a[5]=m;a[6]=n;a[7]=p;a[8]=t;a[9]=r;a[10]=y;a[11]=x;a[12]=g*h+l*f+t*d+b[12];a[13]=c*h+m*f+r*d+b[13];a[14]=e*h+n*f+y*d+b[14];a[15]=k*h+p*f+x*d+b[15]}return a};q.SIMD.translate=
function(a,b,d){var h=SIMD.Float32x4.load(b,0),f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8),c=SIMD.Float32x4.load(b,12);d=SIMD.Float32x4(d[0],d[1],d[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,0,0,0,0));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(d,1,1,1,1));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(d,2,2,2,2));b=SIMD.Float32x4.add(h,SIMD.Float32x4.add(f,
SIMD.Float32x4.add(g,c)));SIMD.Float32x4.store(a,12,b);return a};q.translate=D.USE_SIMD?q.SIMD.translate:q.scalar.translate;q.scalar.scale=function(a,b,d){var h=d[0],f=d[1];d=d[2];a[0]=b[0]*h;a[1]=b[1]*h;a[2]=b[2]*h;a[3]=b[3]*h;a[4]=b[4]*f;a[5]=b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.SIMD.scale=function(a,b,d){d=SIMD.Float32x4(d[0],d[1],d[2],0);var h=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,
0,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,0,0,0,0)));h=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,1,1,1,1)));h=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.scale=D.USE_SIMD?q.SIMD.scale:q.scalar.scale;q.rotate=function(a,b,d,h){var f=h[0],g=h[1];h=h[2];var c=Math.sqrt(f*f+g*g+h*h);if(Math.abs(c)<D.EPSILON)return null;c=
1/c;f*=c;g*=c;h*=c;var e=Math.sin(d);var k=Math.cos(d);var l=1-k;d=b[0];c=b[1];var m=b[2];var n=b[3];var p=b[4];var t=b[5];var r=b[6];var y=b[7];var x=b[8];var z=b[9];var v=b[10];var w=b[11];var u=f*f*l+k;var A=g*f*l+h*e;var G=h*f*l-g*e;var B=f*g*l-h*e;var E=g*g*l+k;var F=h*g*l+f*e;var H=f*h*l+g*e;f=g*h*l-f*e;g=h*h*l+k;a[0]=d*u+p*A+x*G;a[1]=c*u+t*A+z*G;a[2]=m*u+r*A+v*G;a[3]=n*u+y*A+w*G;a[4]=d*B+p*E+x*F;a[5]=c*B+t*E+z*F;a[6]=m*B+r*E+v*F;a[7]=n*B+y*E+w*F;a[8]=d*H+p*f+x*g;a[9]=c*H+t*f+z*g;a[10]=m*H+
r*f+v*g;a[11]=n*H+y*f+w*g;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};q.scalar.rotateX=function(a,b,d){var h=Math.sin(d);d=Math.cos(d);var f=b[4],g=b[5],c=b[6],e=b[7],k=b[8],l=b[9],m=b[10],n=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=f*d+k*h;a[5]=g*d+l*h;a[6]=c*d+m*h;a[7]=e*d+n*h;a[8]=k*d-f*h;a[9]=l*d-g*h;a[10]=m*d-c*h;a[11]=n*d-e*h;return a};q.SIMD.rotateX=function(a,b,d){var h=SIMD.Float32x4.splat(Math.sin(d));
d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,d),SIMD.Float32x4.mul(f,h)));return a};q.rotateX=D.USE_SIMD?q.SIMD.rotateX:q.scalar.rotateX;q.scalar.rotateY=function(a,b,d){var h=Math.sin(d);d=Math.cos(d);
var f=b[0],g=b[1],c=b[2],e=b[3],k=b[8],l=b[9],m=b[10],n=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*d-k*h;a[1]=g*d-l*h;a[2]=c*d-m*h;a[3]=e*d-n*h;a[8]=f*h+k*d;a[9]=g*h+l*d;a[10]=c*h+m*d;a[11]=e*h+n*d;return a};q.SIMD.rotateY=function(a,b,d){var h=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,
0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,h),SIMD.Float32x4.mul(b,d)));return a};q.rotateY=D.USE_SIMD?q.SIMD.rotateY:q.scalar.rotateY;q.scalar.rotateZ=function(a,b,d){var h=Math.sin(d);d=Math.cos(d);var f=b[0],g=b[1],c=b[2],e=b[3],k=b[4],l=b[5],m=b[6],n=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
a[0]=f*d+k*h;a[1]=g*d+l*h;a[2]=c*d+m*h;a[3]=e*d+n*h;a[4]=k*d-f*h;a[5]=l*d-g*h;a[6]=m*d-c*h;a[7]=n*d-e*h;return a};q.SIMD.rotateZ=function(a,b,d){var h=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
d),SIMD.Float32x4.mul(f,h)));return a};q.rotateZ=D.USE_SIMD?q.SIMD.rotateZ:q.scalar.rotateZ;q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};q.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotation=function(a,b,d){var h=d[0],f=d[1];d=d[2];var g=Math.sqrt(h*h+
f*f+d*d);if(Math.abs(g)<D.EPSILON)return null;g=1/g;h*=g;f*=g;d*=g;g=Math.sin(b);b=Math.cos(b);var c=1-b;a[0]=h*h*c+b;a[1]=f*h*c+d*g;a[2]=d*h*c-f*g;a[3]=0;a[4]=h*f*c-d*g;a[5]=f*f*c+b;a[6]=d*f*c+h*g;a[7]=0;a[8]=h*d*c+f*g;a[9]=f*d*c-h*g;a[10]=d*d*c+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromXRotation=function(a,b){var d=Math.sin(b),h=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromYRotation=
function(a,b){var d=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromZRotation=function(a,b){var d=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotationTranslation=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=h+h,k=f+f,l=g+g;b=h*e;var m=h*k;h*=l;var n=f*k;f*=l;g*=l;e*=
c;k*=c;c*=l;a[0]=1-(n+g);a[1]=m+c;a[2]=h-k;a[3]=0;a[4]=m-c;a[5]=1-(b+g);a[6]=f+e;a[7]=0;a[8]=h+k;a[9]=f-e;a[10]=1-(b+n);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};q.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};q.getRotation=function(a,b){var d=b[0]+b[5]+b[10],h=0;0<d?(h=2*Math.sqrt(d+1),a[3]=.25*h,a[0]=(b[6]-b[9])/h,a[1]=(b[8]-b[2])/h,a[2]=(b[1]-b[4])/h):b[0]>b[5]&b[0]>b[10]?(h=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/h,a[0]=.25*h,a[1]=(b[1]+b[4])/
h,a[2]=(b[8]+b[2])/h):b[5]>b[10]?(h=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/h,a[0]=(b[1]+b[4])/h,a[1]=.25*h,a[2]=(b[6]+b[9])/h):(h=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/h,a[0]=(b[8]+b[2])/h,a[1]=(b[6]+b[9])/h,a[2]=.25*h);return a};q.fromRotationTranslationScale=function(a,b,d,h){var f=b[0],g=b[1],c=b[2],e=b[3],k=f+f,l=g+g,m=c+c;b=f*k;var n=f*l;f*=m;var p=g*l;g*=m;c*=m;k*=e;l*=e;e*=m;m=h[0];var t=h[1];h=h[2];a[0]=(1-(p+c))*m;a[1]=(n+e)*m;a[2]=(f-l)*m;a[3]=0;a[4]=(n-e)*t;a[5]=(1-(b+
c))*t;a[6]=(g+k)*t;a[7]=0;a[8]=(f+l)*h;a[9]=(g-k)*h;a[10]=(1-(b+p))*h;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};q.fromRotationTranslationScaleOrigin=function(a,b,d,h,f){var g=b[0],c=b[1],e=b[2],k=b[3],l=g+g,m=c+c,n=e+e;b=g*l;var p=g*m;g*=n;var t=c*m;c*=n;e*=n;l*=k;m*=k;k*=n;n=h[0];var r=h[1];h=h[2];var y=f[0],x=f[1];f=f[2];a[0]=(1-(t+e))*n;a[1]=(p+k)*n;a[2]=(g-m)*n;a[3]=0;a[4]=(p-k)*r;a[5]=(1-(b+e))*r;a[6]=(c+l)*r;a[7]=0;a[8]=(g+m)*h;a[9]=(c-l)*h;a[10]=(1-(b+t))*h;a[11]=0;a[12]=d[0]+
y-(a[0]*y+a[4]*x+a[8]*f);a[13]=d[1]+x-(a[1]*y+a[5]*x+a[9]*f);a[14]=d[2]+f-(a[2]*y+a[6]*x+a[10]*f);a[15]=1;return a};q.fromQuat=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=d+d,e=h+h,k=f+f;d*=c;var l=h*c;h*=e;var m=f*c,n=f*e;f*=k;c*=g;e*=g;g*=k;a[0]=1-h-f;a[1]=l+g;a[2]=m-e;a[3]=0;a[4]=l-g;a[5]=1-d-f;a[6]=n+c;a[7]=0;a[8]=m+e;a[9]=n-c;a[10]=1-d-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.frustum=function(a,b,d,h,f,g,c){var e=1/(d-b),k=1/(f-h),l=1/(g-c);a[0]=2*g*e;a[1]=0;a[2]=0;a[3]=0;a[4]=
0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(d+b)*e;a[9]=(f+h)*k;a[10]=(c+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*g*2*l;a[15]=0;return a};q.perspective=function(a,b,d,h,f){b=1/Math.tan(b/2);var g=1/(h-f);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+h)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*h*g;a[15]=0;return a};q.perspectiveFromFieldOfView=function(a,b,d,h){var f=Math.tan(b.upDegrees*Math.PI/180),g=Math.tan(b.downDegrees*Math.PI/180),c=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var e=2/(c+b),k=2/(f+g);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((c-b)*e*.5);a[9]=(f-g)*k*.5;a[10]=h/(d-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*d/(d-h);a[15]=0;return a};q.ortho=function(a,b,d,h,f,g,c){var e=1/(b-d),k=1/(h-f),l=1/(g-c);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+d)*e;a[13]=(f+h)*k;a[14]=(c+g)*l;a[15]=1;return a};q.lookAt=function(a,b,d,h){var f=b[0],g=b[1];b=b[2];var c=h[0];var e=h[1];var k=
h[2];var l=d[0];h=d[1];var m=d[2];if(Math.abs(f-l)<D.EPSILON&&Math.abs(g-h)<D.EPSILON&&Math.abs(b-m)<D.EPSILON)return q.identity(a);d=f-l;h=g-h;l=b-m;var n=1/Math.sqrt(d*d+h*h+l*l);d*=n;h*=n;l*=n;m=e*l-k*h;k=k*d-c*l;c=c*h-e*d;(n=Math.sqrt(m*m+k*k+c*c))?(n=1/n,m*=n,k*=n,c*=n):c=k=m=0;e=h*c-l*k;var p=l*m-d*c;var t=d*k-h*m;(n=Math.sqrt(e*e+p*p+t*t))?(n=1/n,e*=n,p*=n,t*=n):t=p=e=0;a[0]=m;a[1]=e;a[2]=d;a[3]=0;a[4]=k;a[5]=p;a[6]=h;a[7]=0;a[8]=c;a[9]=t;a[10]=l;a[11]=0;a[12]=-(m*f+k*g+c*b);a[13]=-(e*f+p*
g+t*b);a[14]=-(d*f+h*g+l*b);a[15]=1;return a};q.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],
2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};q.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];a[4]=b[4]+d[4];a[5]=b[5]+d[5];a[6]=b[6]+d[6];a[7]=b[7]+d[7];a[8]=b[8]+d[8];a[9]=b[9]+d[9];a[10]=b[10]+d[10];a[11]=b[11]+d[11];a[12]=b[12]+d[12];a[13]=b[13]+d[13];a[14]=b[14]+d[14];a[15]=b[15]+d[15];return a};q.subtract=function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=
b[8]-d[8];a[9]=b[9]-d[9];a[10]=b[10]-d[10];a[11]=b[11]-d[11];a[12]=b[12]-d[12];a[13]=b[13]-d[13];a[14]=b[14]-d[14];a[15]=b[15]-d[15];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12]*d;a[13]=b[13]*d;a[14]=b[14]*d;a[15]=b[15]*d;return a};q.multiplyScalarAndAdd=function(a,b,d,h){a[0]=b[0]+d[0]*h;a[1]=b[1]+d[1]*h;a[2]=b[2]+d[2]*h;a[3]=
b[3]+d[3]*h;a[4]=b[4]+d[4]*h;a[5]=b[5]+d[5]*h;a[6]=b[6]+d[6]*h;a[7]=b[7]+d[7]*h;a[8]=b[8]+d[8]*h;a[9]=b[9]+d[9]*h;a[10]=b[10]+d[10]*h;a[11]=b[11]+d[11]*h;a[12]=b[12]+d[12]*h;a[13]=b[13]+d[13]*h;a[14]=b[14]+d[14]*h;a[15]=b[15]+d[15]*h;return a};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};q.equals=
function(a,b){var d=a[0],h=a[1],f=a[2],g=a[3],c=a[4],e=a[5],k=a[6],l=a[7],m=a[8],n=a[9],p=a[10],t=a[11],r=a[12],y=a[13],x=a[14],z=a[15],v=b[0],w=b[1],u=b[2],A=b[3],G=b[4],B=b[5],E=b[6],F=b[7],H=b[8],L=b[9],Q=b[10],aa=b[11],ca=b[12],ea=b[13],U=b[14],la=b[15];return Math.abs(d-v)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(h-w)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(f-u)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(g-A)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&
Math.abs(c-G)<=D.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(e-B)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(k-E)<=D.EPSILON*Math.max(1,Math.abs(k),Math.abs(E))&&Math.abs(l-F)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(m-H)<=D.EPSILON*Math.max(1,Math.abs(m),Math.abs(H))&&Math.abs(n-L)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(p-Q)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(t-aa)<=D.EPSILON*Math.max(1,Math.abs(t),Math.abs(aa))&&Math.abs(r-
ca)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(ca))&&Math.abs(y-ea)<=D.EPSILON*Math.max(1,Math.abs(y),Math.abs(ea))&&Math.abs(x-U)<=D.EPSILON*Math.max(1,Math.abs(x),Math.abs(U))&&Math.abs(z-la)<=D.EPSILON*Math.max(1,Math.abs(z),Math.abs(la))};return q})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var D={EPSILON:1E-6};D.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;D.RANDOM=Math.random;D.ENABLE_SIMD=!1;D.SIMD_AVAILABLE=D.ARRAY_TYPE===Float32Array&&
"SIMD"in this;D.USE_SIMD=D.ENABLE_SIMD&&D.SIMD_AVAILABLE;D.setMatrixArrayType=function(a){D.ARRAY_TYPE=a};var q=Math.PI/180;D.toRadian=function(a){return a*q};D.equals=function(a,b){return Math.abs(a-b)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];
b[2]=a[2];return b},fromValues:function(a,b,d){var h=new D.ARRAY_TYPE(3);h[0]=a;h[1]=b;h[2]=d;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,h){a[0]=b;a[1]=d;a[2]=h;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};q.mul=q.multiply;q.divide=function(a,
b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};q.round=function(a,b){a[0]=
Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};q.scaleAndAdd=function(a,b,d,h){a[0]=b[0]+d[0]*h;a[1]=b[1]+d[1]*h;a[2]=b[2]+d[2]*h;return a};q.distance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1],f=b[2]-a[2];return Math.sqrt(d*d+h*h+f*f)};q.dist=q.distance;q.squaredDistance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1],f=b[2]-a[2];return d*d+h*h+f*f};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],d=
a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize=function(a,b){var d=b[0],h=b[1],f=b[2];d=d*d+h*h+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,
b,d){var h=b[0],f=b[1];b=b[2];var g=d[0],c=d[1];d=d[2];a[0]=f*d-b*c;a[1]=b*g-h*d;a[2]=h*c-f*g;return a};q.lerp=function(a,b,d,h){var f=b[0],g=b[1];b=b[2];a[0]=f+h*(d[0]-f);a[1]=g+h*(d[1]-g);a[2]=b+h*(d[2]-b);return a};q.hermite=function(a,b,d,h,f,g){var c=g*g,e=c*(2*g-3)+1,k=c*(g-2)+g,l=c*(g-1);g=c*(3-2*g);a[0]=b[0]*e+d[0]*k+h[0]*l+f[0]*g;a[1]=b[1]*e+d[1]*k+h[1]*l+f[1]*g;a[2]=b[2]*e+d[2]*k+h[2]*l+f[2]*g;return a};q.bezier=function(a,b,d,h,f,g){var c=1-g,e=c*c,k=g*g,l=e*c;e*=3*g;c*=3*k;g*=k;a[0]=b[0]*
l+d[0]*e+h[0]*c+f[0]*g;a[1]=b[1]*l+d[1]*e+h[1]*c+f[1]*g;a[2]=b[2]*l+d[2]*e+h[2]*c+f[2]*g;return a};q.random=function(a,b){b=b||1;var d=2*D.RANDOM()*Math.PI,h=2*D.RANDOM()-1,f=Math.sqrt(1-h*h)*b;a[0]=Math.cos(d)*f;a[1]=Math.sin(d)*f;a[2]=h*b;return a};q.transformMat4=function(a,b,d){var h=b[0],f=b[1];b=b[2];var g=d[3]*h+d[7]*f+d[11]*b+d[15];g=g||1;a[0]=(d[0]*h+d[4]*f+d[8]*b+d[12])/g;a[1]=(d[1]*h+d[5]*f+d[9]*b+d[13])/g;a[2]=(d[2]*h+d[6]*f+d[10]*b+d[14])/g;return a};q.transformMat3=function(a,b,d){var h=
b[0],f=b[1];b=b[2];a[0]=h*d[0]+f*d[3]+b*d[6];a[1]=h*d[1]+f*d[4]+b*d[7];a[2]=h*d[2]+f*d[5]+b*d[8];return a};q.transformQuat=function(a,b,d){var h=b[0],f=b[1],g=b[2];b=d[0];var c=d[1],e=d[2];d=d[3];var k=d*h+c*g-e*f,l=d*f+e*h-b*g,m=d*g+b*f-c*h;h=-b*h-c*f-e*g;a[0]=k*d+h*-b+l*-e-m*-c;a[1]=l*d+h*-c+m*-b-k*-e;a[2]=m*d+h*-e+k*-c-l*-b;return a};q.rotateX=function(a,b,d,h){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[0];g[1]=f[1]*Math.cos(h)-f[2]*Math.sin(h);g[2]=f[1]*Math.sin(h)+f[2]*
Math.cos(h);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};q.rotateY=function(a,b,d,h){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[2]*Math.sin(h)+f[0]*Math.cos(h);g[1]=f[1];g[2]=f[2]*Math.cos(h)-f[0]*Math.sin(h);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};q.rotateZ=function(a,b,d,h){var f=[],g=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];g[0]=f[0]*Math.cos(h)-f[1]*Math.sin(h);g[1]=f[0]*Math.sin(h)+f[1]*Math.cos(h);g[2]=f[2];a[0]=g[0]+d[0];a[1]=g[1]+d[1];
a[2]=g[2]+d[2];return a};q.forEach=function(){var a=q.create();return function(b,d,h,f,g,c){d||(d=3);h||(h=0);for(f=f?Math.min(f*d+h,b.length):b.length;h<f;h+=d)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],g(a,a,c),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}();q.angle=function(a,b){var d=q.fromValues(a[0],a[1],a[2]),h=q.fromValues(b[0],b[1],b[2]);q.normalize(d,d);q.normalize(h,h);d=q.dot(d,h);return 1<d?0:Math.acos(d)};q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]};q.equals=function(a,b){var d=a[0],h=a[1],f=a[2],g=b[0],c=b[1],e=b[2];return Math.abs(d-g)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(h-c)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(f-e)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))};return q})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(D,q,a,b){var d;(function(h){h[h.BEFORE=
0]="BEFORE";h[h.ATTACHING=1]="ATTACHING";h[h.DETACHING=2]="DETACHING";h[h.RENDERING=3]="RENDERING";h[h.AFTER=4]="AFTER";h[h.DONE=5]="DONE"})(d||(d={}));return function(h){function f(){var g=null!==h&&h.apply(this,arguments)||this;g._childrenSet=new Set;g._childrenToAttach=[];g._childrenToDetach=[];g._renderPhase=d.DONE;g.children=[];return g}a(f,h);Object.defineProperty(f.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});f.prototype.detach=function(g){var c=
this.children.concat(this._childrenToDetach);g=this.prepareChildrenRenderParameters(g);for(var e=0;e<c.length;e++){var k=c[e];k.attached&&(this.detachChild(k,g),k.attached=!1,k.parent=null)}};f.prototype.doRender=function(g){var c=this.prepareChildrenRenderParameters(g);this._renderPhase=d.BEFORE;this.beforeRenderChildren(g,c);this._renderPhase=d.ATTACHING;this.attachChildren(c);this._renderPhase=d.DETACHING;for(var e=this._childrenToDetach;0<e.length;){var k=e.shift();this.detachChild(k,c);k.attached=
!1;k.parent=null}this._renderPhase=d.RENDERING;this.renderChildren(c);this._renderPhase=d.AFTER;this.afterRenderChildren(g,c);this._renderPhase=d.DONE};f.prototype.addChild=function(g){return this.addChildAt(g,this.children.length)};f.prototype.addChildAt=function(g,c){void 0===c&&(c=this.numChildren);if(!g||this.contains(g))return g;var e=g.parent;e&&e!==this&&e.removeChild(g);c>=this.numChildren?this.children.push(g):this.children.splice(c,0,g);this._childrenSet.add(g);e=this._childrenToDetach.indexOf(g);
-1<e&&this._childrenToDetach.splice(e,1);this._childrenToAttach.push(g);this._renderPhase>=d.RENDERING&&this.requestRender();return g};f.prototype.contains=function(g){return this._childrenSet.has(g)};f.prototype.getChildIndex=function(g){return this.children.indexOf(g)};f.prototype.getChildAt=function(g){return 0>g||g>this.children.length?null:this.children[g]};f.prototype.removeAllChildren=function(){for(var g=this.numChildren;g--;)this.removeChildAt(0)};f.prototype.removeChild=function(g){return this.contains(g)?
this.removeChildAt(this.getChildIndex(g)):g};f.prototype.removeChildAt=function(g){if(0>g||g>=this.children.length)return null;g=this.children.splice(g,1)[0];this._childrenSet["delete"](g);if(g.attached)this._childrenToDetach.push(g),this._renderPhase>=d.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(g);-1<c&&this._childrenToAttach.splice(c,1)}return g};f.prototype.requestChildRender=function(g){g&&g.parent===this&&this._renderPhase>=d.RENDERING&&this.requestRender()};f.prototype.setChildIndex=
function(g,c){var e=this.getChildIndex(g);-1<e&&(this.children.splice(e,1),this.children.splice(c,0,g),this._renderPhase>=d.RENDERING&&this.requestRender())};f.prototype.sortChildren=function(g){this._renderPhase>d.RENDERING&&this.requestRender();return this.children.sort(g)};f.prototype.attachChildren=function(g){var c=this._childrenToAttach;if(0!==c.length)for(var e=0,k=!1;!k;)k=c[e],this.attachChild(k,g)?(k.attached=!0,k.parent=this,c.splice(e,1)):++e,k=c.length===e};f.prototype.renderChildren=
function(g){for(var c=this.children,e=c.length,k=0;k<e;k++){var l=c[k];l.attached&&this.renderChild(l,g)}};f.prototype.beforeRenderChildren=function(g,c){};f.prototype.attachChild=function(g,c){return g.attach(c)};f.prototype.detachChild=function(g,c){g.detach(c)};f.prototype.renderChild=function(g,c){g.processRender(c)};f.prototype.afterRenderChildren=function(g,c){};return f}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./Evented"],function(D,q,a,b){return function(d){function h(){var f=null!==d&&d.apply(this,arguments)||this;f._renderRequestedCalled=!1;f._attached=!1;f._opacity=1;f.renderRequested=!1;f._visible=!0;return f}a(h,d);Object.defineProperty(h.prototype,"attached",{get:function(){return this._attached},set:function(f){this._attached!==f&&((this._attached=f)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"opacity",{get:function(){return this._opacity},set:function(f){this._opacity!==f&&(this._opacity=f,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"visible",{get:function(){return this._visible},set:function(f){this._visible!==f&&(this._visible=f,this.requestRender())},enumerable:!0,configurable:!0});h.prototype.attach=function(f){return!0};h.prototype.detach=function(f){};h.prototype.processRender=function(f){this._renderRequestedCalled=!1;this.doRender(f);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};h.prototype.requestRender=function(){var f=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);f!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};h.prototype.dispose=function(){};return h}(b.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(D,q,a,b,d){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function h(){}h.prototype.on=function(f,g){return b.after(this,"on"+f,g,!0)};h.prototype.once=function(f,g){return d.once(this,f,g)};h.prototype.emit=function(f){d.emit(this,f,this)};h.prototype.hasEventListener=function(f){f="on"+f;return!(!this[f]||!this[f].after)};return h}();q.Evented=D;q.EventedMixin=function(h){return function(f){function g(){return null!==
f&&f.apply(this,arguments)||this}a(g,f);g.prototype.on=function(c,e){return b.after(this,"on"+c,e,!0)};g.prototype.once=function(c,e){return d.once(this,c,e)};g.prototype.emit=function(c,e){d.emit(this,c,e)};g.prototype.hasEventListener=function(c){c="on"+c;return!(!this[c]||!this[c].after)};return g}(h)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(q.WGLGeometryType||(q.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(q.WGLGeometryTransactionStatus||(q.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(q.WGLDrawPhase||(q.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(q.VVType||(q.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(q.WGLVVFlag||(q.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(q.WGLVVTarget||(q.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(q.CapType||(q.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(q.JoinType||(q.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(q.EsriSymbolType||(q.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(q.EsriSymbolTypeKebab||(q.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function v(){this._initialized=!1}v.prototype.registerPass=function(w,u){this._initialize();for(var A=0;A<u.length;A++)this._passMap.set(u[A],w);return this};v.prototype.getPaintPassTs=function(w){this._initialize();return this._passMap.has(w)?[this._passMap.get(w)]:[]};v.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return v}();q.WGLPainterOptions=
D;var x=new Uint8Array(4*c.C_HITTEST_SEARCH_SIZE*c.C_HITTEST_SEARCH_SIZE),z=new Uint32Array(x.buffer);D=function(){function v(){this._hlPainter=new r;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new g}v.allGeometryPhases=function(){return[h.WGLDrawPhase.FILL,
h.WGLDrawPhase.LINE,h.WGLDrawPhase.MARKER,h.WGLDrawPhase.TEXT]};v.toWGLDrawPhases=function(w){for(var u=[],A,G=0;G<h.WGLDrawPhase.NUM_DRAW_PHASES;G++)A=1<<G,A&w&&u.push(A);return u};Object.defineProperty(v.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});v.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(w){return w.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(w){return w.forEach(function(u){return u.dispose()})}),this._brushes.clear())};v.prototype.initialize=function(w){this.materialManager.initialize(w)};v.prototype.update=function(w,u){this._state=w;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/w.width,this._extrudeScaleVector[1]=-2/w.height,d.identity(this._extrudeMatrix),d.rotate(this._extrudeMatrix,this._extrudeMatrix,-w.rotation*f.C_DEG_TO_RAD,this._extrudeRotateVector),d.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),d.transpose(this._extrudeMatrix,this._extrudeMatrix),d.identity(this._extrudeNoRotationMatrix),d.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),d.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};v.prototype.getBrushes=function(w){if(!this._brushes){var u=new l["default"],A=new p["default"],G=new n["default"],B=new t["default"],E=new m["default"],F=new e["default"],H=new k["default"];this._brushes=new Map;this._brushes.set(h.WGLDrawPhase.FILL,[u]);
this._brushes.set(h.WGLDrawPhase.MARKER,[A]);this._brushes.set(h.WGLDrawPhase.LINE,[G]);this._brushes.set(h.WGLDrawPhase.TEXT,[B]);this._brushes.set(h.WGLDrawPhase.LABEL,[E]);this._brushes.set(h.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(h.WGLDrawPhase.HITTEST,[u,A,G,B]);this._brushes.set(h.WGLDrawPhase.HIGHLIGHT,[u,A,G,B]);this._brushes.set(h.WGLDrawPhase.CLIP,[H]);this._brushes.set(h.WGLDrawPhase.DEBUG,[F])}if(!this._brushes.has(w))throw Error("WGLPainter: Tried to get brush for unknown phase: "+
w);return this._brushes.get(w)};v.prototype.bindTextureManager=function(w){this.textureManager=w};v.prototype.draw=function(w,u,A,G){A[0]===h.WGLDrawPhase.LABEL_ALPHA&&A[0]===h.WGLDrawPhase.LABEL||this._drawClippingRects(w,u);var B=w.context;B.setBlendingEnabled(!0);B.setStencilWriteMask(0);B.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(w,u,A,G);this._debugTiles(w,u)};v.prototype.setHighlightOptions=function(w){this._hlPainter.setHighlightOptions(w)};v.prototype.highlight=function(w,u){var A=
w.context,G=A.getViewport();this._hlPainter.setup(A,G.width,G.height);this._hlPainter.startMaskDraw(A);this._drawClippingRects(w,u);A.setBlendingEnabled(!0);A.setStencilWriteMask(0);A.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(w,u,[h.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(A)};v.prototype.hitTest=function(w,u){var A=c.C_HITTEST_SEARCH_SIZE,G=[0,0],B=[0,0],E=w.state;E.toMap(G,[0,0]);E.toMap(B,[A,A]);if(0===u.filter(function(ea){return!(G[0]>ea.bounds[2]||B[0]<ea.bounds[0]||G[1]<ea.bounds[1]||
B[1]>ea.bounds[3])}).length)return[];E=w.context;this._hittestFBO||(this._hittestFBO=y.create(E,{colorTarget:0,depthStencilTarget:3,width:A,height:A}));var F=E.getViewport(),H=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,A,A);this._drawClippingRects(w,u);var L=E.gl;E.setClearColor(1,1,1,1);E.clear(L.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(w,u,[h.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,
0,A,A,6408,5121,x);A*=A;L=new Set;for(var Q=0;Q<A;Q++){var aa=z[Q];4294967295!==aa&&L.add(aa)}E.bindFramebuffer(H);E.setViewport(F.x,F.y,F.width,F.height);var ca=[];L.forEach(function(ea){ca.push(ea)});return ca};v.prototype._getPaintPass=function(w){this._passes||(this._passes=new Map);if(!this._passes.has(w))try{this._passes.set(w,new w)}catch(u){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+w+",\n"+u);}return this._passes.get(w)};v.prototype._getPaintPasses=function(w,
u){var A=this;return u.getPaintPassTs(w).map(function(G){return A._getPaintPass(G)})};v.prototype._drawPhases=function(w,u,A,G){w.context.setStencilTestEnabled(!0);for(var B=0;B<A.length;B++){var E=A[B],F=G?this._getPaintPasses(E,G):[];E=a({},w,{drawPhase:E});F.forEach(function(Q){return Q.preRender(w,w.rendererInfo)});for(var H=0,L=u;H<L.length;H++)L[H].doRender(E);F.reverse().forEach(function(Q){return Q.postRender(w,w.rendererInfo)})}w.context.setStencilTestEnabled(!1)};v.prototype._debugTiles=
function(w,u){b("esri-feature-tiles-debug")&&this._drawPhases(w,u,[h.WGLDrawPhase.DEBUG])};v.prototype._drawClippingRects=function(w,u){if(0!==u.length){var A=w.context;A.setDepthWriteEnabled(!1);A.setDepthTestEnabled(!1);A.setStencilTestEnabled(!0);A.setBlendingEnabled(!1);A.setColorMask(!1,!1,!1,!1);A.setStencilOp(7680,7680,7681);A.setClearStencil(0);A.clear(A.gl.STENCIL_BUFFER_BIT);A.setStencilWriteMask(255);A=0;for(var G=u.length;A<u.length;A++,G--){var B=u[A];B.attached&&(B.stencilRef=G)}this._drawPhases(w,
u,[h.WGLDrawPhase.CLIP]);w.context.setColorMask(!0,!0,!0,!0)}};return v}();q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(D,q){function a(d,h){d%=h;return 0<=d?d:d+h}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;
q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(d){return a(d*q.C_RAD_TO_256,256)};q.degToByte=function(d){return a(d*q.C_DEG_TO_256,256)};q.log2=function(d){return Math.log(d)*b};q.sqr=function(d){return d*d};q.clamp=function(d,h,f){return Math.min(Math.max(d,h),f)};q.interpolate=function(d,h,f){return d*(1-f)+h*f};q.between=function(d,h,f){return d>=h&&d<=f||d>=f&&d<=h}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(D,q,a,b,d,h,f,g,c,e){return function(){function k(){this._programRep=new Map;this.isInitialize=!1}k.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(l){return l.dispose()}),this._programRep.clear())};k.prototype.initialize=function(l){if(!this.isInitialize){var m=new e("label",["labelVS","labelFS"],[],f,l);m.addDefine("ID","ID",[!0,!0],"ID");m.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");m.addDefine("SDF","SDF",[!1,!1],"SDF");m.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");m.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");m.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");m.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");m.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");m.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");m.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");m.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");m.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");m.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var n=new e("text",["textVS","textFS"],[],c,l);n.addDefine("ID","ID",[!0,!0],"ID");n.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");n.addDefine("SDF","SDF",[!1,!1],"SDF");n.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");n.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");n.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");n.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");n.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");n.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");n.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");n.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");n.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");n.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var p=new e("icon",["iconVS","iconFS"],
[],h,l);p.addDefine("ID","ID",[!0,!0],"ID");p.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");p.addDefine("SDF","SDF",[!0,!0],"SDF");p.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");p.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");p.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");p.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");p.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");p.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");p.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");p.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var t=new e("fill",["fillVS","fillFS"],[],d,l);t.addDefine("ID","ID",[!0,!0],"ID");t.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");t.addDefine("SDF","SDF",
[!1,!1],"SDF");t.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");t.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");t.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");t.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");t.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");t.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");t.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");t.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");t.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");t.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");l=new e("line",["lineVS","lineFS"],[],g,l);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");l.addDefine("SDF","SDF",[!0,!0],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=m;this._textShaderVariations=n;this._fillShaderVariations=t;this._iconShaderVariations=p;this._lineShaderVariations=l;this.isInitialize=!0}};k.prototype.getProgram=function(l,m,n){l|=m===a.WGLDrawPhase.HITTEST?8:0;l|=m===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[l])return this._programRep[l];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
m=b.getMaterialVariations(l);switch(m.geometryType){case a.WGLGeometryType.MARKER:var p=this._iconShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.TEXT:p=this._textShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.LABEL:p=this._labelShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.FILL:p=this._fillShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.LINE:p=this._lineShaderVariations.getProgram(m.variations,
null,null,n)}p&&(this._programRep[l]=p);return p};return k}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(D,q,a,b,d){function h(g){var c=[];c[0]=g.sdf?!0:!1;c[1]=g.vvSizeMinMaxValue?!0:!1;c[2]=g.vvSizeScaleStops?!0:!1;c[3]=g.vvSizeFieldStops?!0:!1;c[4]=g.vvSizeUnitValue?!0:!1;c[5]=g.vvColor?!0:!1;c[6]=g.vvRotation?!0:!1;c[7]=g.vvOpacity?!0:!1;c[8]=g.visibility?!0:!1;c[9]=g.pattern?
!0:!1;c[10]=g.heatmap?!0:!1;return c.reduce(function(e,k,l){k&&(e|=1<<l+2);return e},0)}function f(g){if(g.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var c=h(g)<<3;return g.geometryType+c}Object.defineProperty(q,"__esModule",{value:!0});q.createTextMaterialInfo=function(g,c,e){var k=new b["default"],l=new d;l.geometryType=e;l.sdf=!0;l.pattern=!1;l.visibility=!1;l.heatmap=!1;k.texBindingInfo.push(new b.TexBindingInfo(2,g.page,"u_texture"));0===c?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=
l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(c&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(c&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(c&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(c&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=0!==(c&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(c&a.WGLVVFlag.COLOR),l.vvRotation=0!==(c&a.WGLVVFlag.ROTATION));k.materialKey=f(l);k.materialKeyInfo=l;return k};q.createMaterialInfo=function(g,c,e){var k=new b["default"],
l=new d;l.geometryType=c;g?(g=g.spriteMosaicItem,l.sdf=g.sdf,l.pattern=!0,k.texBindingInfo.push(new b.TexBindingInfo(1,g.page,"u_texture"))):(l.sdf=!1,l.pattern=!1);0===e?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(e&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(e&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(e&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(e&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=
0!==(e&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(e&a.WGLVVFlag.COLOR),l.vvRotation=0!==(e&a.WGLVVFlag.ROTATION));l.visibility=!1;k.materialKey=f(l);k.materialKeyInfo=l;return k};q.getMaterialKey=f;q.getMaterialVariations=function(g){var c=g&7;g>>=3;return{geometryType:c,variations:[0!==(g&1),0!==(g&2),0!==(g&4),0!==(g&8),0!==(g&16),0!==(g&32),0!==(g&64),0!==(g&128),0!==(g&256),0!==(g&512),0!==(g&1024),0!==(g&2048),0!==(g&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});var g=function(){function e(k,l,m){this.unit=k;this.pageId=l;this.semantic=m}e.prototype.clone=function(){return new e(this.unit,this.pageId,this.semantic)};e.prototype.serialize=function(k){k.writeInt32(this.unit);k.writeInt32(this.pageId);return k};e.deserialize=function(k){var l=k.readInt32();k=k.readInt32();return new e(l,k,"u_texture")};return e}();q.TexBindingInfo=g;var c=function(){function e(k,l){this.name=k;this.value=
l}e.prototype.clone=function(){return new e(this.name,this.value)};e.prototype.serialize=function(k){k.writeInt32(this.value);return k};e.deserialize=function(k){k=k.readInt32();return new e("u_my_param",k)};return e}();q.MaterialParam=c;D=function(){function e(){this.texBindingInfo=[];this.materialParams=[]}e.fromSprite=function(k,l,m){var n=new e,p=new h;p.geometryType=l;k?(p.sdf=k.sdf,p.pattern=!0,n.texBindingInfo.push(new g(1,k.page,"u_texture"))):(p.sdf=!1,p.pattern=!1);0===m?p.vvOpacity=p.vvSizeMinMaxValue=
p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(m&a.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(m&a.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(m&a.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(m&a.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=0!==(m&a.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(m&a.WGLVVFlag.COLOR),p.vvRotation=0!==(m&a.WGLVVFlag.ROTATION));p.visibility=!1;n.materialKey=b.getMaterialKey(p);n.materialKeyInfo=p;return n};
e.fromGlyph=function(k,l,m){var n=new e,p=new h;p.geometryType=l;p.sdf=!0;p.pattern=!1;p.visibility=!1;p.heatmap=!1;n.texBindingInfo.push(new g(2,k.page,"u_texture"));0===m?p.vvOpacity=p.vvSizeMinMaxValue=p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(m&a.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(m&a.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(m&a.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(m&a.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=
0!==(m&a.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(m&a.WGLVVFlag.COLOR),p.vvRotation=0!==(m&a.WGLVVFlag.ROTATION));n.materialKey=b.getMaterialKey(p);n.materialKeyInfo=p;return n};e.prototype.copy=function(k){this.materialParams=k.materialParams.map(function(l){return l.clone()});this.texBindingInfo=k.texBindingInfo.map(function(l){return l.clone()});k.materialKeyInfo&&(this.materialKeyInfo=new h,this.materialKeyInfo.copy(k.materialKeyInfo));this.materialKey=k.materialKey};e.prototype.serialize=function(k){k.writeInt32(this.materialKey);
f.serializeList(k,this.texBindingInfo);f.serializeList(k,this.materialParams);return k};e.deserialize=function(k){var l=new e;l.materialKey=k.readInt32();l.texBindingInfo=f.deserializeList(k,g);l.materialParams=f.deserializeList(k,c);l.materialKeyInfo=new h;d(l.materialKeyInfo,l.materialKey);return l};return e}();q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(D,q){return function(a,b){a.geometryType=
b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(D,q){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.serializeList=function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var d=0;d<b.length;d++)b[d].serialize(a);return a}};q.deserializeList=function(a,b,d){var h=a.readInt32();h=Array(h);for(var f=0;f<h.length;f++)h[f]=b.deserialize(a,d);return h}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(D,q,a){return function(){function b(d){if(d)for(var h in d)this[h]=d[h]}b.parse=function(d,h){for(var f=a.parse(d).getElementsByTagName("snippet"),g=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,c=/[\$\s]+/g,e=/\(([^\(\)]*)\)/,k=0;k<f.length;k++){for(var l=
f[k].getAttribute("name"),m=f[k].textContent;;){var n=m.match(g);if(null==n)break;var p=n[0].replace(c,""),t=p.match(e),r=void 0;t&&(r=t[1].split(",").map(function(y){return y.trim()}));p=p.replace(e,"");r=h._instantiate(p,r);m=m.replace(n[0],r)}h[l]=m}};b.prototype._instantiate=function(d,h){var f=this[d];for(h||(h=[]);;){var g=f.match(/\$(\d+)/);if(null==g)break;var c=parseInt(g[1],10);f=f.replace(g[0],h[c])}return f};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(D,q,a,b,d){function h(f){return f.reduce(function(g,
c,e){c&&(g|=1<<e);return g},0)}return function(){function f(g,c,e,k,l,m){"string"===typeof g?this._initParams(g,c,e,k,l,m):this._initObject({programNamePrefix:g.programNamePrefix,shaderSnippetPrefixes:g.shaderSnippetPrefixes,baseDefines:g.baseDefines,snippets:g.snippets,rctx:g.rctx,vertexAttribLocs:g.vertexAttribLocs})}f.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(g){return g.dispose()}),this._programCache.clear())};f.prototype._initObject=function(g){this._initParams(g.programNamePrefix,
g.shaderSnippetPrefixes,g.baseDefines,g.snippets,g.rctx,g.vertexAttribLocs)};f.prototype._initParams=function(g,c,e,k,l,m){this._defaultSnippets=k;this._defaultRctx=l;this._defaultVertexAttribLocs=m;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new b(g,c,e)};f.prototype.addDefine=function(g,c,e,k){this._shaderSourceVariator.addDefine(g,c,e,k)};f.prototype.addBinaryShaderSnippetSuffix=function(g,c,e){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(g,c,e)};
f.prototype.addNaryShaderSnippetSuffix=function(g,c){this._shaderSourceVariator.addNaryShaderSnippetSuffix(g,c)};f.prototype.getProgram=function(g,c,e,k){c=c||this._defaultSnippets;e=e||this._defaultRctx;k=k||this._defaultVertexAttribLocs;if(!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!e)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!k)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var l=h(g);if(this._programCache.has(l))return this._programCache.get(l);g=this._shaderSourceVariator.getShaderVariation(g);var m=g.shaderSnippetNames[0];var n=c[m];d.assert(null!=n,"shader snippet '"+m+"' does not exist");m=g.shaderSnippetNames[1];c=c[m];d.assert(null!=c,"shader snippet '"+m+"' does not exist");e=new a(e,n,c,k,g.defines);this._programCache.set(l,e);return e};f.prototype.getProgramByKey=function(g){if(this._programCache.has(g))return this._programCache.get(g);if(!this._variationInfo[g])return null;
var c=this._variationInfo[g],e=this._defaultSnippets,k=this._defaultRctx,l=this._defaultVertexAttribLocs;var m=c.shaderSnippetNames[0];var n=e[m];d.assert(null!=n,"shader snippet '"+m+"' does not exist");m=c.shaderSnippetNames[1];e=e[m];d.assert(null!=e,"shader snippet '"+m+"' does not exist");c=new a(k,n,e,l,c.defines);this._programCache.set(g,c);return c};f.prototype.getProgramInfo=function(g){var c=this._shaderSourceVariator.getShaderVariation(g);g=h(g);this._variationInfo[g]||(this._variationInfo[g]=
c);return{name:c.programName,key:g}};return f}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(D,q,a,b){return function(){function d(h,f,g,c,e){void 0===e&&(e={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=h;this._vertexShaderSource=f;this._fragmentShaderSource=g;if(Array.isArray(e))for(f=0;f<e.length;f++)this._defines[e[f]]="1";else this._defines=e;this._id=d._nextId++;this._locations=c;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(3)}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});d.prototype.getDefine=function(h){return this._defines[h]};d.prototype.dispose=function(){if(this._context){var h=this._context.gl;this._vShader&&(h.deleteShader(this._vShader),this._vShader=null);this._fShader&&(h.deleteShader(this._fShader),this._fShader=null);this._glName&&(h.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};d.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var h=this._context.gl,f=h.createProgram();h.attachShader(f,this._vShader);h.attachShader(f,this._fShader);for(var g in this._locations)h.bindAttribLocation(f,this._locations[g],g);h.linkProgram(f);h.getProgramParameter(f,h.LINK_STATUS);this._glName=f;this._initialized=!0}};d.prototype.getUniformLocation=function(h){this.initialize();void 0===this._nameToUniformLocation[h]&&
(this._nameToUniformLocation[h]=this._context.gl.getUniformLocation(this._glName,h));return this._nameToUniformLocation[h]};d.prototype.hasUniform=function(h){return null!==this.getUniformLocation(h)};d.prototype.getAttribLocation=function(h){this.initialize();void 0===this._nameToAttribLocation[h]&&(this._nameToAttribLocation[h]=this._context.gl.getAttribLocation(this._glName,h));return this._nameToAttribLocation[h]};d.prototype.setUniform1i=function(h,f){var g=this._nameToUniform1[h];if(void 0===
g||f!==g)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(h),f),this._nameToUniform1[h]=f};d.prototype.setUniform1f=function(h,f){var g=this._nameToUniform1[h];if(void 0===g||f!==g)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(h),f),this._nameToUniform1[h]=f};d.prototype.setUniform1fv=function(h,f){var g=this._nameToUniform2[h];void 0!==g&&d._arraysEqual(f,g)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(h),
f),void 0===g?this._nameToUniform2[h]=new Float32Array(f):g.set(f))};d.prototype.setUniform2f=function(h,f,g){var c=this._nameToUniform2[h];if(void 0===c||f!==c[0]||g!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(h),f,g),void 0===c?this._nameToUniform2[h]=new Float32Array([f,g]):(c[0]=f,c[1]=g)};d.prototype.setUniform2fv=function(h,f){var g=this._nameToUniform2[h];void 0!==g&&d._arraysEqual(f,g)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(h),
f),void 0===g?this._nameToUniform2[h]=new Float32Array(f):g.set(f))};d.prototype.setUniform3f=function(h,f,g,c){var e=this._nameToUniform3[h];if(void 0===e||f!==e[0]||g!==e[1]||c!==e[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(h),f,g,c),void 0===e?this._nameToUniform3[h]=new Float32Array([f,g,c]):(e[0]=f,e[1]=g,e[2]=c)};d.prototype.setUniform3fv=function(h,f){var g=this._nameToUniform3[h];void 0!==g&&d._arraysEqual(f,g)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(h),
f),void 0===g?this._nameToUniform3[h]=new Float32Array(f):g.set(f))};d.prototype.setUniform4f=function(h,f,g,c,e){var k=this._nameToUniform4[h];if(void 0===k||f!==k[0]||g!==k[1]||c!==k[2]||e!==k[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(h),f,g,c,e),void 0===k?this._nameToUniform4[h]=new Float32Array([f,g,c,e]):(k[0]=f,k[1]=g,k[2]=c,k[3]=e)};d.prototype.setUniform4fv=function(h,f){var g=this._nameToUniform4[h];void 0!==g&&d._arraysEqual(f,g)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(h),f),void 0===g?this._nameToUniform4[h]=new Float32Array(f):g.set(f))};d.prototype.setUniformMatrix3fv=function(h,f,g){void 0===g&&(g=!1);var c=this._nameToUniformMatrix3[h];void 0!==c&&(9===c.length?d._matrix3Equal(c,f):d._arraysEqual(f,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(h),g,f),void 0===c?this._nameToUniformMatrix3[h]=new Float32Array(f):c.set(f))};d.prototype.setUniformMatrix4fv=function(h,
f,g){void 0===g&&(g=!1);var c=this._nameToUniformMatrix4[h];void 0!==c&&(16===c.length?d._matrix4Equal(c,f):d._arraysEqual(f,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(h),g,f),void 0===c?this._nameToUniformMatrix4[h]=new Float32Array(f):c.set(f))};d._padToThree=function(h){var f=h.toString();1E3>h&&(f=("  "+h).slice(-3));return f};d.prototype._addLineNumbers=function(h){var f=2;return h.replace(/\n/g,function(){return"\n"+d._padToThree(f++)+":"})};
d.prototype._loadShader=function(h){var f=35633===h,g=f?this._vertexShaderSource:this._fragmentShaderSource,c="",e;for(e in this._defines)c+="#define "+e+" "+this._defines[e]+"\n";g=c+g;"webgl2"===this._context.contextVersion&&(g=b.transpileShader(g,f?"vertex":"fragment"));f=this._context.gl;h=f.createShader(h);f.shaderSource(h,g);f.compileShader(h);f.getShaderParameter(h,f.COMPILE_STATUS);return h};d._matrix4Equal=function(h,f){return h[0]===f[0]&&h[1]===f[1]&&h[2]===f[2]&&h[3]===f[3]&&h[4]===f[4]&&
h[5]===f[5]&&h[6]===f[6]&&h[7]===f[7]&&h[8]===f[8]&&h[9]===f[9]&&h[10]===f[10]&&h[11]===f[11]&&h[12]===f[12]&&h[13]===f[13]&&h[14]===f[14]&&h[15]===f[15]};d._matrix3Equal=function(h,f){return h[0]===f[0]&&h[1]===f[1]&&h[2]===f[2]&&h[3]===f[3]&&h[4]===f[4]&&h[5]===f[5]&&h[6]===f[6]&&h[7]===f[7]&&h[8]===f[8]};d._arraysEqual=function(h,f){if(h.length!==f.length)return!1;for(var g=0;g<h.length;++g)if(h[g]!==f[g])return!1;return!0};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(D,q,a,b){function d(c){return c.map(function(e){return"eof"!==e.type?e.data:""}).join("")}function h(c,e,k,l){l=l||k;for(var m=0;m<c.length;m++){var n=c[m];if("ident"===n.type&&n.data===k)return l in e?e[l]++:e[l]=0,h(c,e,l+"_"+e[l],l)}return k}function f(c,e,k){void 0===k&&(k="afterVersion");var l={data:"\n",type:"whitespace"},m=function(r){return r<c.length?/[^\r\n]$/.test(c[r].data):!1},n=function(r){for(var y=-1,x=0,z=-1,
v=0;v<r.length;v++){var w=r[v];"preprocessor"===w.type&&(w.data.match(/#(if|ifdef|ifndef)\s+.+/)?++x:w.data.match(/#endif\s*.*/)&&--x);("afterVersion"===k||"afterPrecision"===k)&&"preprocessor"===w.type&&/^#version/.test(w.data)&&(z=Math.max(z,v));if("afterPrecision"===k&&"keyword"===w.type&&"precision"===w.data){a:{for(w=v;w<r.length;w++){var u=r[w];if("operator"===u.type&&";"===u.data)break a}w=null}if(null===w)throw Error("precision statement not followed by any semicolons!");z=Math.max(z,w)}y<
z&&0===x&&(y=v)}return y+1}(c);m(n-1)&&c.splice(n++,0,l);for(var p=0;p<e.length;p++){var t=e[p];c.splice(n++,0,t)}m(n-1)&&m(n)&&c.splice(n,0,l)}Object.defineProperty(q,"__esModule",{value:!0});var g=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];q.transpileShader=function(c,e){var k=b(c);a:{var l="100";var m="300 es";void 0===l&&(l="100");void 0===m&&(m="300 es");for(var n=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,p=0;p<k.length;p++){var t=
k[p];if("preprocessor"===t.type){var r=n.exec(t.data);if(r)if(n=r[1].replace(/\s\s+/g," "),n===m){l=n;break a}else if(n===l){t.data="#version "+m;break a}else throw Error("unknown glsl version: "+n);}}k.splice(0,0,{type:"preprocessor",data:"#version "+m},{type:"whitespace",data:"\n"});l=null}if("300 es"===l)throw Error("shader is already glsl 300 es");n=t=null;p={};r={};for(l=0;l<k.length;++l)switch(m=k[l],m.type){case "keyword":"vertex"===e&&"attribute"===m.data?m.data="in":"varying"===m.data&&(m.data=
"vertex"===e?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(m.data.trim())&&(m.data=m.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===e&&"gl_FragColor"===m.data){if(!t){t=h(k,p,"fragColor");var y=void 0;void 0===y&&(y="lowp");f(k,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}m.data=
t}else"fragment"===e&&"gl_FragDepthEXT"===m.data&&(n||(n=h(k,p,"gl_FragDepth")),m.data=n);break;case "ident":if(0<=a.indexOf(m.data)){if(y="vertex"===e)a:{for(y=l-1;0<=y;y--){var x=k[y];if("whitespace"!==x.type&&"block-comment"!==x.type)if("keyword"===x.type){if("attribute"===x.data||"in"===x.data){y=!0;break a}}else break}y=!1}if(y)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");m.data in r||(r[m.data]=h(k,p,m.data));m.data=r[m.data]}}for(l=k.length-1;0<=
l;--l)m=k[l],"preprocessor"===m.type&&((t=m.data.match(/#extension\s+(.*):/))&&t[1]&&0<=g.indexOf(t[1].trim())&&(t=k[l+1],k.splice(l,t&&"whitespace"===t.type?2:1)),(t=m.data.match(/#ifdef\s+(.*)/))&&t[1]&&0<=g.indexOf(t[1].trim())&&(m.data="#if 1"),(t=m.data.match(/#ifndef\s+(.*)/))&&t[1]&&0<=g.indexOf(t[1].trim())&&(m.data="#if 0"));return d(k)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(D,q){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(D){"use strict;";return function(q){var a=D(),b=[];b=b.concat(a(q));return b=b.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(D,q,a){"use strict;";var b="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function d(B){B.length&&
y.push({type:b[n],data:B,position:v,line:x,column:z})}function h(){r=r.length?[]:r;if("/"===t&&"*"===p)return v=m+l-1,n=0,t=p,l+1;if("/"===t&&"/"===p)return v=m+l-1,n=1,t=p,l+1;if("#"===p)return n=2,v=m+l,l;if(/\s/.test(p))return n=9,v=m+l,l;w=/\d/.test(p);u=/[^\w_]/.test(p);v=m+l;n=w?4:u?3:9999;return l}function f(){if(("\r"===p||"\n"===p)&&"\\"!==t)return d(r.join("")),n=999,l;r.push(p);t=p;return l+1}function g(){if("."===t&&/\d/.test(p))return n=5,l;if("/"===t&&"*"===p)return n=0,l;if("/"===t&&
"/"===p)return n=1,l;if("."===p&&r.length){for(;c(r););n=5;return l}if(";"===p||")"===p||"("===p){if(r.length)for(;c(r););d(p);n=999;return l+1}var B=2===r.length&&"\x3d"!==p;if(/[\w_\d\s]/.test(p)||B){for(;c(r););n=999;return l}r.push(p);t=p;return l+1}function c(B){var E=0;do{var F=q.indexOf(B.slice(0,B.length+E).join(""));var H=q[F];if(-1===F){if(0<E--+B.length)continue;H=B.slice(0,1).join("")}d(H);v+=H.length;r=r.slice(H.length);return r.length}while(1)}function e(){if("."===p||/[eE]/.test(p))return r.push(p),
n=5,t=p,l+1;if("x"===p&&1===r.length&&"0"===r[0])return n=11,r.push(p),t=p,l+1;if(/[^\d]/.test(p))return d(r.join("")),n=999,l;r.push(p);t=p;return l+1}function k(){"f"===p&&(r.push(p),t=p,l+=1);if(/[eE]/.test(p)||"-"===p&&/[eE]/.test(t))return r.push(p),t=p,l+1;if(/[^\d]/.test(p))return d(r.join("")),n=999,l;r.push(p);t=p;return l+1}var l=0,m=0,n=999,p,t,r=[],y=[],x=1,z=0,v=0,w=!1,u=!1,A="",G;return function(B){y=[];if(null!==B){B=B.replace?B.replace(/\r\n/g,"\n"):B;l=0;A+=B;for(G=A.length;p=A[l],
l<G;){B=l;switch(n){case 0:"/"===p&&"*"===t?(r.push(p),d(r.join("")),n=999):(r.push(p),t=p);l+=1;break;case 1:l=f();break;case 2:l=f();break;case 3:l=g();break;case 4:l=e();break;case 11:/[^a-fA-F0-9]/.test(p)?(d(r.join("")),n=999):(r.push(p),t=p,l+=1);break;case 5:l=k();break;case 9999:if(/[^\d\w_]/.test(p)){var E=r.join("");n=-1<D.indexOf(E)?8:-1<a.indexOf(E)?7:6;d(r.join(""));n=999}else r.push(p),t=p,l+=1;break;case 9:/[^\s]/g.test(p)?(d(r.join("")),n=999):(r.push(p),t=p,l+=1);break;case 999:l=
h()}if(B!==l)switch(A[B]){case "\n":z=0;++x;break;default:++z}}m+=l;A=A.slice(l);return y}r.length&&d(r.join(""));n=10;d("(eof)");return y}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(D,q,a,b){return function(){function d(h,f,g){if("string"===typeof h)var c=h;else c=h.programNamePrefix,f=h.shaderSnippetPrefixes,g=h.baseDefines;b.assert(f,"you must specify shader snippet prefixes");b.assert(2===f.length,"you must specify shader snippet prefixes for vertex and fragment shaders");g&&0!==g.length||(g=[]);this.programNamePrefix=c;this.shaderSnippetPrefixes=
f;this.baseDefines=g;this.variables=[];this.sealed=!1}d.prototype.addDefine=function(h,f,g,c){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");b.assert(h,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",h],shaderNameSuffixes:c||h,defineStr:f,affectsShaderTypes:g||[!0,!0]})};d.prototype.addBinaryShaderSnippetSuffix=function(h,f,g){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
b.assert(h,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",h],shaderSnippetSuffixes:["",f],affectsShaderTypes:g||[!0,!0]})};d.prototype.addNaryShaderSnippetSuffix=function(h,f){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var g=h.map(function(c){b.assert(null!=c.value,"value must always be specified");return c.value});this.variables.push({values:g,programNameSuffixes:h.map(function(c,e){return null!=c.programNameSuffix?
c.programNameSuffix:g[e]}),shaderSnippetSuffixes:h.map(function(c,e){return null!=c.shaderSnippetSuffix?c.shaderSnippetSuffix:g[e]}),affectsShaderTypes:f||[!0,!0]})};d.prototype.getShaderVariation=function(h){b.assert(h.length===this.variables.length,"you must specify a value for each variable");for(var f=this.programNamePrefix,g=a.clone(this.shaderSnippetPrefixes),c=a.clone(this.shaderSnippetPrefixes),e=a.clone(this.baseDefines),k=0;k<this.variables.length;k++){var l=this.variables[k],m=h[k],n=void 0;
l.values?(n=l.values.indexOf(m),b.assert(0<=n,"invalid value "+m+" for variable "+k)):n=m?1:0;f+=l.programNameSuffixes[n];for(m=0;2>m;m++)l.affectsShaderTypes[m]&&(l.shaderSnippetSuffixes&&(g[m]+=l.shaderSnippetSuffixes[n],c[m]+=l.shaderSnippetSuffixes[n]),l.defineStr&&n&&(e.push(l.defineStr),c[m]+=l.shaderNameSuffixes))}return{programName:f,shaderSnippetNames:g,shaderNames:c,defines:e}};return d}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(D,q,a,b){return function(){function d(){}d.vertexCount=function(h,f){return h.vertexBuffers[f].size/d.getStride(h.layout[f])};d.getStride=function(h){return h[0].stride};d.getBytesPerElement=function(h){switch(h){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};d.addDescriptor=function(h,f,g,c,e,k){var l=d.getBytesPerElement(c);if(0<h.length){var m=
h[0].stride,n=m+l*g;h.forEach(function(p){return p.stride=n});h.push({name:f,count:g,type:c,offset:m,stride:n,normalized:e,divisor:k})}else h.push({name:f,count:g,type:c,offset:0,stride:l*g,normalized:e,divisor:k})};d.assertCompatibleVertexAttributeLocations=function(h,f){return h.locations===f.locations};d.hasAttribute=function(h,f){for(var g=0;g<h.length;g++)if(h[g].name===f)return!0;return!1};d.findAttribute=function(h,f){for(var g=0;g<h.length;g++)if(h[g].name===f)return h[g];return null};d.copyFramebufferToTexture=
function(h,f,g,c,e){void 0===e&&(e=0);var k=h.getBoundFramebufferObject(),l=h.getBoundTexture(0);h.bindFramebuffer(f);h.bindTexture(g,0);h.gl.copyTexImage2D(h.gl.TEXTURE_2D,e,g.descriptor.pixelFormat,c[0],c[1],c[2],c[3],0);h.gl.flush();h.bindFramebuffer(k);h.bindTexture(l,0)};d.assert=function(h,f){if(!h)throw new b(f);};d.setBaseInstanceOffset=function(h,f){var g={},c;for(c in h)g[c]=h[c].map(function(e){return e.divisor?a({},e,{baseInstance:f}):e});return g};d.bindVertexBufferLayout=function(h,
f,g,c,e){var k=h.gl,l=h.capabilities.instancing;h.bindBuffer(g);c.forEach(function(m){var n=f[m.name],p=(e?e:0+m.baseInstance?m.baseInstance:0)*m.stride;if(4>=m.count)k.vertexAttribPointer(n,m.count,m.type,m.normalized,m.stride,m.offset+p),k.enableVertexAttribArray(n),m.divisor&&0<m.divisor&&l&&l.vertexAttribDivisor(n,m.divisor);else if(9===m.count)for(var t=0;3>t;t++)k.vertexAttribPointer(n+t,3,m.type,m.normalized,m.stride,m.offset+12*t+p),k.enableVertexAttribArray(n+t),m.divisor&&0<m.divisor&&l&&
l.vertexAttribDivisor(n+t,m.divisor);else if(16===m.count)for(t=0;4>t;t++)k.vertexAttribPointer(n+t,4,m.type,m.normalized,m.stride,m.offset+16*t+p),k.enableVertexAttribArray(n+t),m.divisor&&0<m.divisor&&l&&l.vertexAttribDivisor(n+t,m.divisor)})};d.unbindVertexBufferLayout=function(h,f,g,c){var e=h.gl;h.bindBuffer(g);c.forEach(function(k){var l=f[k.name];if(4>=k.count)e.disableVertexAttribArray(l);else if(9===k.count)for(k=0;3>k;k++)e.disableVertexAttribArray(l+k);else if(16===k.count)for(k=0;4>k;k++)e.disableVertexAttribArray(l+
k)});h.unbindBuffer(34962)};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(D,q,a,b,d,h,f,g,c,e){function k(u){return u.map(function(A){return A.name})}function l(u){for(var A={},G=0;G<u.length;G++){var B=u[G];A[B.name]=B.strideInBytes}return A}function m(u,
A){switch(u){case c.WGLGeometryType.MARKER:return A?q.C_ICON_VERTEX_NAMES_VV:q.C_ICON_VERTEX_NAMES;case c.WGLGeometryType.FILL:return A?q.C_FILL_VERTEX_NAMES_VV:q.C_FILL_VERTEX_NAMES;case c.WGLGeometryType.LINE:return A?q.C_LINE_VERTEX_NAMES_VV:q.C_LINE_VERTEX_NAMES;case c.WGLGeometryType.TEXT:return A?q.C_TEXT_VERTEX_NAMES_VV:q.C_TEXT_VERTEX_NAMES;case c.WGLGeometryType.LABEL:return q.C_LABEL_VERTEX_NAMES}return null}function n(u){switch(u){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return u}function p(u){if(u=n(u.type)){switch(u){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function t(u){if(u=n(u.type)){switch(u){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function r(u){if(u=n(u.type)){switch(u){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function y(u){if(u=n(u.type)){switch(u){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(u){return u&&u.length||0}function z(u){return"string"===typeof u}Object.defineProperty(q,"__esModule",{value:!0});var v=d.getLogger("esri.views.2d.engine.webgl.Utils");q.C_HITTEST_SEARCH_SIZE=4;q.C_VBO_GEOMETRY="geometry";q.C_VBO_PERINSTANCE="per_instance";q.C_VBO_PERINSTANCE_VV="per_instance_vv";q.C_VBO_VISIBILITY="visibility";q.C_VBO_VISIBILITY_RANGE=
"visibilityRange";q.C_ICON_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];q.C_ICON_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];q.C_ICON_HEATMAP=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_FILL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];q.C_FILL_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];q.C_TEXT_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_TEXT_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_LABEL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:q.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];q.C_ICON_VERTEX_NAMES=k(q.C_ICON_VERTEX_DEF);
q.C_ICON_VERTEX_NAMES_VV=k(q.C_ICON_VERTEX_DEF_VV);q.C_FILL_VERTEX_NAMES=k(q.C_FILL_VERTEX_DEF);q.C_FILL_VERTEX_NAMES_VV=k(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_VERTEX_NAMES=k(q.C_LINE_VERTEX_DEF);q.C_LINE_VERTEX_NAMES_VV=k(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_VERTEX_NAMES=k(q.C_TEXT_VERTEX_DEF);q.C_TEXT_VERTEX_NAMES_VV=k(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_VERTEX_NAMES=k(q.C_LABEL_VERTEX_DEF);q.C_ICON_STRIDE_SPEC=l(q.C_ICON_VERTEX_DEF);q.C_ICON_STRIDE_SPEC_VV=l(q.C_ICON_VERTEX_DEF_VV);q.C_ICON_STRIDE_SPEC_HEATMAP=
l(q.C_ICON_HEATMAP);q.C_FILL_STRIDE_SPEC=l(q.C_FILL_VERTEX_DEF);q.C_FILL_STRIDE_SPEC_VV=l(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_STRIDE_SPEC=l(q.C_LINE_VERTEX_DEF);q.C_LINE_STRIDE_SPEC_VV=l(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_STRIDE_SPEC=l(q.C_TEXT_VERTEX_DEF);q.C_TEXT_STRIDE_SPEC_VV=l(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_STRIDE_SPEC=l(q.C_LABEL_VERTEX_DEF);q.getStrides=function(u,A,G){void 0===G&&(G=!1);switch(u){case c.WGLGeometryType.MARKER:return A?q.C_ICON_STRIDE_SPEC_VV:G?q.C_ICON_STRIDE_SPEC_HEATMAP:q.C_ICON_STRIDE_SPEC;
case c.WGLGeometryType.FILL:return A?q.C_FILL_STRIDE_SPEC_VV:q.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return A?q.C_LINE_STRIDE_SPEC_VV:q.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return A?q.C_TEXT_STRIDE_SPEC_VV:q.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return q.C_LABEL_STRIDE_SPEC}return null};q.getNamedBuffers=m;q.getSymbolGeometryType=function(u){return p(u)?c.WGLGeometryType.MARKER:r(u)?c.WGLGeometryType.LINE:t(u)?c.WGLGeometryType.FILL:y(u)?c.WGLGeometryType.TEXT:c.WGLGeometryType.UNKNOWN};
q.normalizeSymbolType=n;q.isMarkerSymbol=p;q.isFillSymbol=t;q.isLineSymbol=r;q.isPictureSymbol=function(u){if(u=n(u.type))switch(u){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};q.isTextSymbol=y;q.getTextProperties=function(u){return e.TextProperties.pool.acquire(u.color?g.copyAndPremultiply(u.color):[255,255,255,255],u.haloColor?g.copyAndPremultiply(u.haloColor):[255,255,255,255],h.pt2px(u.haloSize),h.pt2px(u.font.size),u.angle*Math.PI/180,u.xoffset/u.font.size,
u.yoffset/u.font.size,"left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5,"top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5)};q.isSameUniformValue=function(u,A){return!1};q.isSameMaterialInfo=function(u,A){if(u.materialKey!==A.materialKey||x(u.texBindingInfo)!==x(A.texBindingInfo)||x(u.materialParams)!==x(A.materialParams))return!1;for(var G=u.texBindingInfo.length,B=0;B<G;++B){var E=u.texBindingInfo[B],F=A.texBindingInfo[B];if(E.unit!==F.unit||E.pageId!==F.pageId||
E.semantic!==F.semantic)return!1}G=u.materialParams.length;for(B=0;B<G;)return!1;return!0};q.serializeString=function(u,A,G){for(var B=0,E=u.length,F=0;F<E;++F)A&&(A[G+B]=u.charCodeAt(F)),++B;A&&(A[G+B]=0);++B;return B};q.deserializeString=function(u,A,G){var B=0;u.s="";for(var E=!0;E;){var F=A[G+B];++B;0!==F?u.s+=String.fromCharCode(F):E=!1}return B};q.isDefined=function(u){return null!==u&&void 0!==u};q.isNumber=function(u){return"number"===typeof u};q.isString=z;q.isStringOrNull=function(u){return null==
u||z(u)};q.lerp=function(u,A,G){return u+(A-u)*G};D=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(A,G){this._arr.push(G)};u.prototype.getKeys=function(A){this._arr.length=0;A&&A.forEach(this._push);return this._arr};return u}();q.KeysGetter=D;D=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(A,G){this._arr.push(A)};u.prototype.getValues=function(A){this._arr.length=0;A&&A.forEach(this._push);return this._arr};
return u}();q.ValuesGetter=D;q.getCapType=function(u){switch(u){case "butt":return c.CapType.BUTT;case "round":return c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return v.error("Cannot interpret unknown cap: "+u),c.CapType.UNKNOWN}};q.getJoinType=function(u){switch(u){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return v.error("Cannot interpret unknown join: "+u),c.JoinType.UNKNOWN}};q.getVVType=function(u){switch(u){case "opacity":return c.VVType.OPACITY;
case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;case "size":return c.VVType.SIZE;default:return v.error("Cannot interpret unknown vv: "+u),null}};q.createArcadeFunction=function(u,A){var G=u.spatialReference,B=u.layer,E=f.createFunction(u.valueExpression),F=new b;return function(H,L){F.repurposeFromGraphicLikeObject(H.geometry,H.attributes,B);var Q=L&&new a({viewingMode:L.viewingMode,scale:L.scale});Q=f.executeFunction(E,{vars:{$feature:F,$view:Q||{}},spatialReference:G});
return A?A(Q):Q}};q.copyMeshData=function(u,A,G,B,E,F,H){for(var L in F){var Q=F[L].stride,aa=F[L].data,ca=G[L].data,ea=Q*E.vertexCount/4,U=Q*u/4,la=Q*E.vertexFrom/4;for(Q=0;Q<ea;++Q)ca[Q+U]=aa[Q+la]}G=E.indexCount;for(Q=0;Q<G;++Q)B[Q+A]=H[Q+E.indexFrom]-E.vertexFrom+u};q.C_VBO_INFO=(w={},w[q.C_VBO_GEOMETRY]=35044,w[q.C_VBO_VISIBILITY]=35044,w[q.C_VBO_VISIBILITY_RANGE]=35048,w);q.createGeometryData=function(u,A,G){for(var B=[],E=0;5>E;++E){for(var F={},H=0,L=m(E,u);H<L.length;H++){var Q=L[H];F[Q]=
{data:G(E,Q)}}B.push({data:A(E),buffers:F})}return B};var w})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(D,q,a){return a})},"esri/arcade/Dictionary":function(){define("require exports ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry".split(" "),function(D,q,a,b,d,h){function f(c,e){void 0===e&&(e=!1);if(null===c||void 0===c)return null;if(b.isNumber(c))return b.toNumber(c);if(b.isBoolean(c))return b.toBoolean(c);
if(b.isString(c))return b.toString(c);if(b.isDate(c))return b.toDate(c);if(b.isArray(c)){for(var k=[],l=0;l<c.length;l++)k.push(f(c[l],e));return k}l=new g;l.immutable=!1;for(var m=0,n=Object.keys(c);m<n.length;m++){var p=n[m];k=c[p];void 0!==k&&l.setField(p,f(k,e))}l.immutable=e;return l}var g=function(){function c(e){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof c?e.attributes:void 0===e?{}:null===e?{}:e}c.prototype.field=
function(e){var k=e.toLowerCase(),l=this.attributes[e];if(void 0!==l)return l;for(var m in this.attributes)if(m.toLowerCase()===k)return this.attributes[m];throw Error("Field not Found : "+e);};c.prototype.setField=function(e,k){if(this.immutable)throw Error("Dictionary is Immutable");var l=e.toLowerCase();if(void 0===this.attributes[e])for(var m in this.attributes)if(m.toLowerCase()===l){this.attributes[m]=k;return}this.attributes[e]=k};c.prototype.hasField=function(e){var k=e.toLowerCase();if(void 0!==
this.attributes[e])return!0;for(var l in this.attributes)if(l.toLowerCase()===k)return!0;return!1};c.prototype.keys=function(){var e=[],k;for(k in this.attributes)e.push(k);return e=e.sort()};c.prototype.castToText=function(){var e="",k;for(k in this.attributes){""!==e&&(e+=",");var l=this.attributes[k];null==l?e+=JSON.stringify(k)+":null":b.isBoolean(l)||b.isNumber(l)||b.isString(l)?e+=JSON.stringify(k)+":"+JSON.stringify(l):l instanceof h?e+=JSON.stringify(k)+":"+b.toStringExplicit(l):l instanceof
a?e+=JSON.stringify(k)+":"+b.toStringExplicit(l):l instanceof Array?e+=JSON.stringify(k)+":"+b.toStringExplicit(l):l instanceof Date?e+=JSON.stringify(k)+":"+JSON.stringify(l):null!==l&&"object"===typeof l&&void 0!==l.castToText&&(e+=JSON.stringify(k)+":"+l.castToText())}return"{"+e+"}"};c.convertObjectToArcadeDictionary=function(e,k){void 0===k&&(k=!0);var l=new c;l.immutable=!1;for(var m in e){var n=e[m];void 0!==n&&l.setField(m.toString(),f(n))}l.immutable=k;return l};c.convertJsonToArcade=function(e,
k){void 0===k&&(k=!1);return f(e,k)};c.prototype.castAsJson=function(e){void 0===e&&(e=null);var k={};for(m in this.attributes){var l=this.attributes[m];if(void 0!==l){if(null===e||void 0===e?0:e.keyTranslate)var m=e.keyTranslate(m);k[m]=b.castAsJson(l,e)}}return k};c.prototype.castDictionaryValueAsJsonAsync=function(e,k,l,m,n){void 0===m&&(m=null);return b.castAsJsonAsync(l,m,n).then(function(p){return e[k]=p})};c.prototype.castAsJsonAsync=function(e,k){void 0===e&&(e=null);void 0===k&&(k=null);
var l={},m=[];for(p in this.attributes){var n=this.attributes[p];if(null===k||void 0===k?0:k.keyTranslate)var p=k.keyTranslate(p);void 0!==n&&(b.isSimpleType(n)||n instanceof h||n instanceof Date?l[p]=b.castAsJson(n,k):m.push(this.castDictionaryValueAsJsonAsync(l,p,n,e,k)))}return 0<m.length?d.all(m).then(function(){return l}):d.resolve(l)};return c}();return g})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,q){return function(){function a(b){void 0===b&&(b=[]);
this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],d=0;d<this.length();d++)b.push(this.get(d));return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){function r(O,Z,fa){return""===Z||null===Z||void 0===Z||Z===fa||Z===fa?O:O=O.split(Z).join(fa)}function y(O){return O instanceof oa||O instanceof a||O instanceof ta}function x(O){return z(O)||w(O)||G(O)||v(O)||null===O||O===q.voidOperation||"number"===typeof O?!0:!1}function z(O){return"string"===typeof O||O instanceof String}function v(O){return"boolean"===typeof O}function w(O){return"number"===typeof O}function u(O){return O instanceof Array}function A(O){return O instanceof
b}function G(O){return O instanceof Date}function B(O,Z){if(!1===isNaN(O)){if(void 0===Z||null===Z||""===Z)return O.toString();Z=r(Z,"\u2030","");Z=r(Z,"\u00a4","");return p.format(O,{pattern:Z})}return O.toString()}function E(O,Z){var fa=n.DateTime.fromJSDate(O);return void 0===Z||null===Z||""===Z?fa.toISO({suppressMilliseconds:!0}):fa.toFormat(F(Z),{locale:t.locale,numberingSystem:"latn"})}function F(O){O=O.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var Z="",fa=0;for(O=O.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);fa<
O.length;fa++){var ra=O[fa];switch(ra){case "D":Z+="d";break;case "DD":Z+="dd";break;case "DDD":Z+="o";break;case "d":Z+="c";break;case "ddd":Z+="ccc";break;case "dddd":Z+="cccc";break;case "M":Z+="L";break;case "MM":Z+="LL";break;case "MMM":Z+="LLL";break;case "MMMM":Z+="LLLL";break;case "YY":Z+="yy";break;case "Y":case "YYYY":Z+="yyyy";break;case "Q":Z+="q";break;case "Z":Z+="ZZ";break;case "ZZ":Z+="ZZZ";break;case "S":Z+="'S'";break;case "SS":Z+="'SS'";break;case "SSS":Z+="u";break;case "A":case "a":Z+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Z+=ra;break;default:Z=2<=ra.length&&"["===ra.slice(0,1)&&"]"===ra.slice(-1)?Z+("'"+ra.slice(1,-1)+"'"):Z+("'"+ra+"'")}}return Z}function H(O,Z,fa){switch(fa){case "\x3e":return O>Z;case "\x3c":return O<Z;case "\x3e\x3d":return O>=Z;case "\x3c\x3d":return O<=Z}return!1}function L(O,Z){if(O===Z||null===O&&Z===q.voidOperation||null===Z&&O===q.voidOperation)return!0;if(G(O)&&G(Z))return O.getTime()===
Z.getTime();if(O instanceof d||O instanceof h)return O.equalityTest(Z);if(O instanceof k&&Z instanceof k){var fa=O.getCacheValue("_arcadeCacheId"),ra=Z.getCacheValue("_arcadeCacheId");if(void 0!==fa&&null!==fa)return fa===ra}return void 0!==O&&void 0!==Z&&null!==O&&null!==Z&&"object"===typeof O&&"object"===typeof Z&&(O._arcadeCacheId===Z._arcadeCacheId&&void 0!==O._arcadeCacheId&&null!==O._arcadeCacheId||O._underlyingGraphic===Z._underlyingGraphic&&void 0!==O._underlyingGraphic&&null!==O._underlyingGraphic)?
!0:!1}function Q(O,Z){if(z(O))return O;if(null===O)return"";if(w(O))return B(O,Z);if(v(O))return O.toString();if(G(O))return E(O,Z);if(O instanceof c)return JSON.stringify(O.toJson());if(u(O)){for(var fa=[],ra=0;ra<O.length;ra++)fa[ra]=ca(O[ra]);return"["+fa.join(",")+"]"}if(O instanceof b){fa=[];for(ra=0;ra<O.length();ra++)fa[ra]=ca(O.get(ra));return"["+fa.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():y(O)?"object, Function":""}function aa(O,Z){if(z(O))return O;
if(null===O)return"";if(w(O))return B(O,Z);if(v(O))return O.toString();if(G(O))return E(O,Z);if(O instanceof c)return O instanceof g?'{"xmin":'+O.xmin.toString()+',"ymin":'+O.ymin.toString()+","+(O.hasZ?'"zmin":'+O.zmin.toString()+",":"")+(O.hasM?'"mmin":'+O.mmin.toString()+",":"")+'"xmax":'+O.xmax.toString()+',"ymax":'+O.ymax.toString()+","+(O.hasZ?'"zmax":'+O.zmax.toString()+",":"")+(O.hasM?'"mmax":'+O.mmax.toString()+",":"")+'"spatialReference":'+V(O.spatialReference)+"}":V(O.toJson(),function(pa,
W){return pa.key===W.key?0:"spatialReference"===pa.key?1:"spatialReference"===W.key||pa.key<W.key?-1:pa.key>W.key?1:0});if(u(O)){for(var fa=[],ra=0;ra<O.length;ra++)fa[ra]=ca(O[ra]);return"["+fa.join(",")+"]"}if(O instanceof b){fa=[];for(ra=0;ra<O.length();ra++)fa[ra]=ca(O.get(ra));return"["+fa.join(",")+"]"}return null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():y(O)?"object, Function":""}function ca(O){return null===O?"null":v(O)||w(O)||z(O)?JSON.stringify(O):O instanceof c||
O instanceof b||O instanceof Array?aa(O):O instanceof Date?JSON.stringify(E(O,"")):null!==O&&"object"===typeof O&&void 0!==O.castToText?O.castToText():"null"}function ea(O,Z){return w(O)?O:null===O||""===O?0:G(O)?NaN:v(O)?O?1:0:u(O)||""===O||void 0===O?NaN:void 0!==Z&&z(O)?(Z=r(Z,"\u2030",""),Z=r(Z,"\u00a4",""),p.parse(O,{pattern:Z})):O===q.voidOperation?0:Number(O)}function U(O){var Z=/ (\d\d)/,fa=n.DateTime.fromISO(O);return fa.isValid||Z.test(O)&&(O=O.replace(Z,"T$1"),fa=n.DateTime.fromISO(O),
fa.isValid)?fa:null}function la(O,Z){var fa;Z.fields.some(function(ra){ra.name.toLowerCase()===O.toLowerCase()&&(fa=ra.domain);return!!fa});return fa}function V(O,Z){Z||(Z={});"function"===typeof Z&&(Z={cmp:Z});var fa="boolean"===typeof Z.cycles?Z.cycles:!1,ra=Z.cmp&&function(W){return function(T){return function(da,na){return W({key:da,value:T[da]},{key:na,value:T[na]})}}}(Z.cmp),pa=[];return function da(T){T&&T.toJson&&"function"===typeof T.toJson&&(T=T.toJson());if(void 0!==T){if("number"===typeof T)return isFinite(T)?
""+T:"null";if("object"!==typeof T)return JSON.stringify(T);var na;if(Array.isArray(T)){var ja="[";for(na=0;na<T.length;na++)na&&(ja+=","),ja+=da(T[na])||"null";return ja+"]"}if(null===T)return"null";if(-1!==pa.indexOf(T)){if(fa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var N=pa.push(T)-1,P=Object.keys(T).sort(ra&&ra(T));ja="";for(na=0;na<P.length;na++){var ba=P[na],ia=da(T[ba]);ia&&(ja&&(ja+=","),ja+=JSON.stringify(ba)+":"+ia)}pa.splice(N,1);
return"{"+ja+"}"}}(O)}function R(O,Z){if(Z instanceof k)O.push([Z.x,Z.y]);else throw Error("Invalid Argument");}function ha(O,Z){void 0===Z&&(Z=null);if(null!=O){if(v(O)||w(O)||z(O))return O;if(O instanceof c)return!0===(null===Z||void 0===Z?void 0:Z.keepGeometryType)?O:O.toJson();if(O instanceof b)return O.toArray().map(function(fa){return ha(fa,Z)});if(O instanceof Array)return O.map(function(fa){return ha(fa,Z)});if(O instanceof Date)return O;if(null!==O&&"object"===typeof O&&void 0!==O.castAsJson)return O.castAsJson(Z)}return null}
function S(O,Z,fa,ra,pa){return X(O,Z,fa).then(function(W){pa[ra]=W})}function X(O,Z,fa){void 0===Z&&(Z=null);void 0===fa&&(fa=null);O instanceof b&&(O=O.toArray());if(null!=O){if(x(O)||O instanceof c||O instanceof Date)return f.resolve(ha(O,fa));if(O instanceof Array){for(var ra=[],pa=[],W=0;W<O.length;W++){var T=O[W];null===T||x(T)||T instanceof c||T instanceof Date?pa.push(ha(T,fa)):(pa.push(null),ra.push(S(T,Z,fa,pa.length-1,pa)))}return 0<ra.length?f.all(ra).then(function(){return pa}):f.resolve(pa)}if(null!==
O&&"object"===typeof O&&void 0!==O.castAsJsonAsync)return O.castAsJsonAsync(Z,fa)}return f.resolve(null)}Object.defineProperty(q,"__esModule",{value:!0});q.castAsJsonAsync=q.castAsJson=q.binaryOperator=q.tick=q.toStringArray=q.autoCastArrayOfPointsToMultiPoint=q.autoCastArrayOfPointsToPolyline=q.autoCastArrayOfPointsToPolygon=q.autoCastFeatureToGeometry=q.stableStringify=q.getDomain=q.getDomainCode=q.getDomainValue=q.fixNullGeometry=q.fixSpatialReference=q.toBoolean=q.toDateTime=q.toDate=q.toNumber=
q.toStringExplicit=q.toNumberArray=q.toString=q.equalityTest=q.greaterThanLessThan=q.standardiseDateFormat=q.formatDate=q.formatNumber=q.generateUUID=q.absRound=q.pcCheck=q.isDate=q.isImmutableArray=q.isFeatureSetCollection=q.isFeatureSet=q.isArray=q.isInteger=q.isNumber=q.isBoolean=q.isString=q.defaultUndefined=q.isSimpleType=q.isFunctionParameter=q.multiReplace=q.continueResult=q.breakResult=q.voidOperation=q.SizzleFunction=q.ReturnResult=q.ImplicitResult=q.NativeFunction=q.SizzleFunctionE=q.NativeFunctionE=
q.ImplicitResultE=q.ReturnResultE=void 0;D=function(){return function(O){this.value=O}}();q.ReturnResultE=D;var ka=function(){return function(O){this.value=O}}();q.ImplicitResultE=ka;var oa=function(){return function(O){this.fn=O}}();q.NativeFunctionE=oa;var ta=function(){return function(O,Z){this.paramCount=Z;this.fn=O}}();q.SizzleFunctionE=ta;q.NativeFunction=oa;q.ImplicitResult=ka;q.ReturnResult=D;q.SizzleFunction=ta;q.voidOperation={type:"VOID"};q.breakResult={type:"BREAK"};q.continueResult={type:"CONTINUE"};
q.multiReplace=r;q.isFunctionParameter=y;q.isSimpleType=x;q.defaultUndefined=function(O,Z){return void 0===O?Z:O};q.isString=z;q.isBoolean=v;q.isNumber=w;q.isInteger=function(O){return"number"===typeof O&&isFinite(O)&&Math.floor(O)===O};q.isArray=u;q.isFeatureSet=function(O){return!0===(O&&O.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===O.declaredRootClass)};q.isFeatureSetCollection=function(O){return!0===(O&&O.declaredRootClass&&"esri.arcade.featureSetCollection"===O.declaredRootClass)};
q.isImmutableArray=A;q.isDate=G;q.pcCheck=function(O,Z,fa){if(O.length<Z||O.length>fa)throw Error("Function called with wrong number of Parameters");};q.absRound=function(O){return 0>O?-Math.round(-O):Math.round(O)};q.generateUUID=function(){var O=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){var fa=(O+16*Math.random())%16|0;O=Math.floor(O/16);return("x"===Z?fa:fa&3|8).toString(16)})};q.formatNumber=B;q.formatDate=E;q.standardiseDateFormat=F;q.greaterThanLessThan=
function(O,Z,fa){if(null===O){if(null===Z||Z===q.voidOperation)return H(null,null,fa);if(w(Z))return H(0,Z,fa);if(z(Z)||v(Z))return H(0,ea(Z),fa);if(G(Z))return H(0,Z.getTime(),fa)}if(O===q.voidOperation){if(null===Z||Z===q.voidOperation)return H(null,null,fa);if(w(Z))return H(0,Z,fa);if(z(Z)||v(Z))return H(0,ea(Z),fa);if(G(Z))return H(0,Z.getTime(),fa)}else if(w(O)){if(w(Z))return H(O,Z,fa);if(v(Z))return H(O,ea(Z),fa);if(null===Z||Z===q.voidOperation)return H(O,0,fa);if(z(Z))return H(O,ea(Z),fa);
if(G(Z))return H(O,Z.getTime(),fa)}else if(z(O)){if(z(Z))return H(Q(O),Q(Z),fa);if(G(Z))return H(ea(O),Z.getTime(),fa);if(w(Z))return H(ea(O),Z,fa);if(null===Z||Z===q.voidOperation)return H(ea(O),0,fa);if(v(Z))return H(ea(O),ea(Z),fa)}else if(G(O)){if(G(Z))return H(O,Z,fa);if(null===Z||Z===q.voidOperation)return H(O.getTime(),0,fa);if(w(Z))return H(O.getTime(),Z,fa);if(v(Z)||z(Z))return H(O.getTime(),ea(Z),fa)}else if(v(O)){if(v(Z))return H(O,Z,fa);if(w(Z))return H(ea(O),ea(Z),fa);if(G(Z))return H(ea(O),
Z.getTime(),fa);if(null===Z||Z===q.voidOperation)return H(ea(O),0,fa);if(z(Z))return H(ea(O),ea(Z),fa)}return!L(O,Z)||"\x3c\x3d"!==fa&&"\x3e\x3d"!==fa?!1:!0};q.equalityTest=L;q.toString=Q;q.toNumberArray=function(O){var Z=[];if(!1===u(O))return null;if(O instanceof b){for(var fa=0;fa<O.length();fa++)Z[fa]=ea(O.get(fa));return Z}for(fa=0;fa<O.length;fa++)Z[fa]=ea(O[fa]);return Z};q.toStringExplicit=aa;q.toNumber=ea;q.toDate=function(O){return G(O)?O:z(O)&&(O=U(O))?O.toJSDate():null};q.toDateTime=function(O){return G(O)?
n.DateTime.fromJSDate(O):z(O)?U(O):null};q.toBoolean=function(O){return v(O)?O:z(O)?(O=O.toLowerCase(),"true"===O?!0:!1):w(O)?0===O||isNaN(O)?!1:!0:!1};q.fixSpatialReference=function(O,Z){if(null===O||void 0===O)return null;if(null===O.spatialReference||void 0===O.spatialReference)O.spatialReference=Z;return O};q.fixNullGeometry=function(O){if(null===O)return null;if(O instanceof k)return"NaN"===O.x||null===O.x||isNaN(O.x)?null:O;if(O instanceof l){if(0===O.rings.length)return null;for(var Z=0,fa=
O.rings;Z<fa.length;Z++){var ra=fa[Z];if(0<ra.length)return O}return null}if(O instanceof m){if(0===O.paths.length)return null;Z=0;for(fa=O.paths;Z<fa.length;Z++)if(ra=fa[Z],0<ra.length)return O;return null}return O instanceof e?0===O.points.length?null:O:O instanceof g?"NaN"===O.xmin||null===O.xmin||isNaN(O.xmin)?null:O:null};q.getDomainValue=function(O,Z){if(!O||!O.domain)return Z;var fa=null;if("string"===O.field.type||"esriFieldTypeString"===O.field.type)Z=Q(Z);else{if(null===Z||void 0===Z)return null;
if(""===Z)return Z;Z=ea(Z)}for(var ra=0;ra<O.domain.codedValues.length;ra++){var pa=O.domain.codedValues[ra];pa.code===Z&&(fa=pa)}return null===fa?Z:fa.name};q.getDomainCode=function(O,Z){if(!O||!O.domain)return Z;var fa=null;Z=Q(Z);for(var ra=0;ra<O.domain.codedValues.length;ra++){var pa=O.domain.codedValues[ra];pa.name===Z&&(fa=pa)}return null===fa?Z:fa.code};q.getDomain=function(O,Z,fa,ra){void 0===fa&&(fa=null);if(!Z||!Z.fields)return null;for(var pa=null,W=0;W<Z.fields.length;W++){var T=Z.fields[W];
T.name.toLowerCase()===O.toString().toLowerCase()&&(pa=T)}if(null===pa)throw Error("Field not found");var da,na;ra||(ra=fa&&Z.typeIdField&&fa._field(Z.typeIdField));null!=ra&&Z.types.some(function(ja){return ja.id===ra?((da=ja.domains&&ja.domains[pa.name])&&"inherited"===da.type&&(da=la(pa.name,Z),na=!0),!0):!1});na||da||(da=la(O,Z));return{field:pa,domain:da}};q.stableStringify=V;q.autoCastFeatureToGeometry=function(O){if(null===O)return null;for(var Z=[],fa=0;fa<O.length;fa++){var ra=O[fa];ra&&
(ra.declaredClass&&"esri.arcade.Feature"===ra.declaredClass||"FeatureSetReader"===ra.type)?Z.push(ra.geometry()):Z.push(ra)}return Z};q.autoCastArrayOfPointsToPolygon=function(O,Z){if(u(O)||A(O)){var fa=!1,ra=!1,pa=[],W=Z;if(u(O)){for(var T=0;T<O.length;T++){var da=O[T];R(pa,da)}0<pa.length&&(W=O[0].spatialReference,fa=O[0].hasZ,ra=O[0].hasM)}else if(O instanceof h)pa=O._elements,0<pa.length&&(fa=O._hasZ,ra=O._hasM,W=O.get(0).spatialReference);else if(A(O)){T=0;for(var na=O.toArray();T<na.length;T++)da=
na[T],R(pa,da);0<pa.length&&(W=O.get(0).spatialReference,fa=!0===O.get(0).hasZ,ra=!0===O.get(0).hasM)}else throw Error("Invalid Argument");if(0===pa.length)return null;!1===(new l({rings:[],spatialReference:{wkid:4326}})).isClockwise(pa)&&(pa=pa.slice(0).reverse());return new l({rings:[pa],spatialReference:W,hasZ:fa,hasM:ra})}return O};q.autoCastArrayOfPointsToPolyline=function(O,Z){if(u(O)||A(O)){var fa=!1,ra=!1,pa=[],W=Z;if(u(O)){for(var T=0;T<O.length;T++){var da=O[T];R(pa,da)}0<pa.length&&(W=
O[0].spatialReference,fa=!0===O[0].hasZ,ra=!0===O[0].hasM)}else if(O instanceof h)pa=O._elements,0<pa.length&&(fa=O._hasZ,ra=O._hasM,W=O.get(0).spatialReference);else if(A(O)){T=0;for(var na=O.toArray();T<na.length;T++)da=na[T],R(pa,da);0<pa.length&&(W=O.get(0).spatialReference,fa=!0===O.get(0).hasZ,ra=!0===O.get(0).hasM)}return 0===pa.length?null:new m({paths:[pa],spatialReference:W,hasZ:fa,hasM:ra})}return O};q.autoCastArrayOfPointsToMultiPoint=function(O,Z){if(u(O)||A(O)){var fa=!1,ra=!1,pa=[],
W=Z;if(u(O)){for(var T=0;T<O.length;T++){var da=O[T];R(pa,da)}0<pa.length&&(W=O[0].spatialReference,fa=!0===O[0].hasZ,ra=!0===O[0].hasM)}else if(O instanceof h)pa=O._elements,0<pa.length&&(fa=O._hasZ,ra=O._hasM,W=O.get(0).spatialReference);else if(A(O)){T=0;for(var na=O.toArray();T<na.length;T++)da=na[T],R(pa,da);0<pa.length&&(W=O.get(0).spatialReference,fa=!0===O.get(0).hasZ,ra=!0===O.get(0).hasM)}return 0===pa.length?null:new e({points:pa,spatialReference:W,hasZ:fa,hasM:ra})}return O};q.toStringArray=
function(O,Z){void 0===Z&&(Z=!1);var fa=[];if(null===O)return fa;if(!0===u(O)){for(var ra=0;ra<O.length;ra++){var pa=Q(O[ra]);""===pa&&!0!==Z||fa.push(pa)}return fa}if(O instanceof b){for(ra=0;ra<O.length();ra++)pa=Q(O.get(ra)),""===pa&&!0!==Z||fa.push(pa);return fa}return x(O)?(pa=Q(O),""===pa&&!0!==Z||fa.push(pa),fa):[]};var xa=0;q.tick=function(O){xa++;return 0===xa%100?(xa=0,f.create(function(Z){setTimeout(function(){Z(O)},0)})):O};q.binaryOperator=function(O,Z,fa){switch(fa){case "\x26":return O&
Z;case "|":return O|Z;case "^":return O^Z;case "\x3c\x3c":return O<<Z;case "\x3e\x3e":return O>>Z;case "\x3e\x3e\x3e":return O>>>Z}};q.castAsJson=ha;q.castAsJsonAsync=X})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(D,q){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])};return q(a,b)};return function(a,b){function d(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(q,a,b,d){return function(h){function f(g,
c,e,k,l){g=h.call(this,g)||this;g._lazyPath=[];g._hasZ=!1;g._hasM=!1;g._hasZ=e;g._hasM=k;g._spRef=c;g._cacheId=l;return g}D(f,h);f.prototype.get=function(g){if(void 0===this._lazyPath[g]){var c=this._elements[g];if(void 0===c)return;this._lazyPath[g]=new d(c,this._spRef,this._hasZ,this._hasM,this._cacheId,g)}return this._lazyPath[g]};f.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof f?!1:g.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return f}(b)})},"esri/arcade/ImmutablePointArray":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])};return q(a,b)};return function(a,b){function d(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===
b?Object.create(b):(d.prototype=b.prototype,new d)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(q,a,b,d){return function(h){function f(g,c,e,k,l,m){g=h.call(this,g)||this;g._lazyPt=[];g._hasZ=!1;g._hasM=!1;g._spRef=c;g._hasZ=e;g._hasM=k;g._cacheId=l;g._partId=m;return g}D(f,h);f.prototype.get=function(g){if(void 0===this._lazyPt[g]){var c=this._elements[g];if(void 0===c)return;var e=this._hasZ,k=this._hasM,l=null;l=e&&!k?new d(c[0],c[1],c[2],void 0,this._spRef):
k&&!e?new d(c[0],c[1],void 0,c[2],this._spRef):e&&k?new d(c[0],c[1],c[2],c[3],this._spRef):new d(c[0],c[1],this._spRef);l.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+g.toString());this._lazyPt[g]=l}return this._lazyPt[g]};f.prototype.equalityTest=function(g){return g===this?!0:null===g||!1===g instanceof f?!1:g.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return f}(b)})},
"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(D,q,a,b){function d(c,e){var k=new a(e);c(function(l){return g(l).then(k.resolve)},k.reject);return k.promise}function h(c){if(c){if("function"!==typeof c.forEach){var e=Object.keys(c),k=e.map(function(m){return c[m]});return h(k).then(function(m){var n={};e.forEach(function(p,t){return n[p]=m[t]});return n})}var l=null;return d(function(m,n){var p=[],t=c.length;0===t&&m(p);c.forEach(function(r){var y=
{promise:r};p.push(y);r.then(function(x){y.value=x})["catch"](function(x){y.error=x}).then(function(){--t;0===t&&(l?n(Error("AbortError")):m(p))})})},function(m){l=m||"Invocation cancellation";c.forEach(function(n){return n.cancel(m)})})}}function f(c){void 0===c&&(c=void 0);var e=new a;e.resolve(c);return e.promise}function g(c){return c&&"function"===typeof c.then?c:f(c)}Object.defineProperty(q,"__esModule",{value:!0});q.createResolver=q.when=q.isPromiseLike=q.wrapCallback=q.timeout=q.after=q.resolve=
q.reject=q.first=q.eachAlwaysValues=q.eachAlways=q.createDeferred=q.create=q.filter=q.all=void 0;q.all=function(c){return b(c)};q.filter=function(c,e){var k=c.slice();return b(c.map(function(l,m){return e(l,m)})).then(function(l){return k.filter(function(m,n){return l[n]})})};q.create=d;q.createDeferred=function(c){var e=null;c=d(function(k,l){e={resolve:k,reject:l}},c);e.promise=c;e.cancel=function(){e.reject(Error("AbortError"))};return e};q.eachAlways=h;q.eachAlwaysValues=function(c){return h(c).then(function(e){return e.filter(function(k){return!!k.value}).map(function(k){return k.value})})};
q.first=function(c){return c&&c.length?d(function(e,k){for(var l=0;l<c.length;l++)c[l].then(e,k)}):f()};q.reject=function(c){var e=new a;e.reject(c);return e.promise};q.resolve=f;q.after=function(c,e){void 0===e&&(e=void 0);var k=0;return d(function(l){k=setTimeout(function(){l(e)},c)},function(){k&&(clearTimeout(k),k=0)})};q.timeout=function(c,e,k){var l=0,m=new a(c.cancel);c.then(function(n){m.isFulfilled()||(m.resolve(n),l&&(clearTimeout(l),l=0))});c["catch"](function(n){m.isFulfilled()||(m.reject(n),
l&&(clearTimeout(l),l=0))});l=setTimeout(function(){m.reject(k||Error("promiseUtils:timeout"))},e);return m.promise};q.wrapCallback=function(c){var e=!1;return d(function(){c(function(k){e||f(k)})},function(){return e=!0})};q.isPromiseLike=function(c){return c&&"function"===typeof c.then};q.when=g;q.createResolver=function(c){var e,k;c=d(function(m,n){e=m;k=n},c);var l=function(m){e(m)};l.resolve=function(m){return e(m)};l.reject=function(m){return k(m)};l.promise=c;return l}})},"esri/libs/luxon/luxon":function(){define(["exports"],
function(D){function q(I,K){for(var C=0;C<K.length;C++){var J=K[C];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(I,J.key,J)}}function a(I,K,C){K&&q(I.prototype,K);C&&q(I,C);return I}function b(){b=Object.assign||function(I){for(var K=1;K<arguments.length;K++){var C=arguments[K],J;for(J in C)Object.prototype.hasOwnProperty.call(C,J)&&(I[J]=C[J])}return I};return b.apply(this,arguments)}function d(I,K){I.prototype=Object.create(K.prototype);I.prototype.constructor=
I;f(I,K)}function h(I){h=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)};return h(I)}function f(I,K){f=Object.setPrototypeOf||function(C,J){C.__proto__=J;return C};return f(I,K)}function g(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}function c(I,K,C){c=g()?Reflect.construct:
function(J,M,Y){var ma=[null];ma.push.apply(ma,M);J=new (Function.bind.apply(J,ma));Y&&f(J,Y.prototype);return J};return c.apply(null,arguments)}function e(I){var K="function"===typeof Map?new Map:void 0;e=function(C){function J(){return c(C,arguments,h(this).constructor)}if(null===C||-1===Function.toString.call(C).indexOf("[native code]"))return C;if("function"!==typeof C)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof K){if(K.has(C))return K.get(C);
K.set(C,J)}J.prototype=Object.create(C.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}});return f(J,C)};return e(I)}function k(I,K){if(I){if("string"===typeof I)return l(I,K);var C=Object.prototype.toString.call(I).slice(8,-1);"Object"===C&&I.constructor&&(C=I.constructor.name);if("Map"===C||"Set"===C)return Array.from(I);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return l(I,K)}}function l(I,K){if(null==K||K>I.length)K=I.length;for(var C=0,J=
Array(K);C<K;C++)J[C]=I[C];return J}function m(I,K){var C="undefined"!==typeof Symbol&&I[Symbol.iterator]||I["@@iterator"];if(C)return(C=C.call(I)).next.bind(C);if(Array.isArray(I)||(C=k(I))||K&&I&&"number"===typeof I.length){C&&(I=C);var J=0;return function(){return J>=I.length?{done:!0}:{done:!1,value:I[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function n(I){return"undefined"===
typeof I}function p(I){return"number"===typeof I}function t(I){return"number"===typeof I&&0===I%1}function r(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(I){return!1}}function y(I,K,C){if(0!==I.length)return I.reduce(function(J,M){var Y=[K(M),M];return J?C(J[0],Y[0])===J[0]?J:Y:Y},null)[1]}function x(I,K){return K.reduce(function(C,J){C[J]=I[J];return C},{})}function z(I,K){return Object.prototype.hasOwnProperty.call(I,K)}function v(I,K,C){return t(I)&&I>=K&&I<=C}function w(I,
K){void 0===K&&(K=2);var C=0>I?"-":"",J=C?-1*I:I;J=J.toString().length<K?("0".repeat(K)+J).slice(-K):J.toString();return""+C+J}function u(I){if(!n(I)&&null!==I&&""!==I)return parseInt(I,10)}function A(I){if(!n(I)&&null!==I&&""!==I)return I=1E3*parseFloat("0."+I),Math.floor(I)}function G(I,K,C){void 0===C&&(C=!1);K=Math.pow(10,K);return(C?Math.trunc:Math.round)(I*K)/K}function B(I){return 0===I%4&&(0!==I%100||0===I%400)}function E(I,K){var C=K-1;C=C-12*Math.floor(C/12)+1;return 2===C?B(I+(K-C)/12)?
29:28:[31,null,31,30,31,30,31,31,30,31,30,31][C-1]}function F(I){var K=Date.UTC(I.year,I.month-1,I.day,I.hour,I.minute,I.second,I.millisecond);100>I.year&&0<=I.year&&(K=new Date(K),K.setUTCFullYear(K.getUTCFullYear()-1900));return+K}function H(I){var K=I-1;K=(K+Math.floor(K/4)-Math.floor(K/100)+Math.floor(K/400))%7;return 4===(I+Math.floor(I/4)-Math.floor(I/100)+Math.floor(I/400))%7||3===K?53:52}function L(I){return 99<I?I:60<I?1900+I:2E3+I}function Q(I,K,C,J){void 0===J&&(J=null);I=new Date(I);var M=
{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};J&&(M.timeZone=J);K=b({timeZoneName:K},M);return(C=(new Intl.DateTimeFormat(C,K)).formatToParts(I).find(function(Y){return"timezonename"===Y.type.toLowerCase()}))?C.value:null}function aa(I,K){var C=parseInt(I,10);Number.isNaN(C)&&(C=0);var J=parseInt(K,10)||0;J=0>C||Object.is(C,-0)?-J:J;return 60*C+J}function ca(I){var K=Number(I);if("boolean"===typeof I||""===I||Number.isNaN(K))throw new $a("Invalid unit value "+
I);return K}function ea(I,K){var C={},J;for(J in I)if(z(I,J)){var M=I[J];void 0!==M&&null!==M&&(C[K(J)]=ca(M))}return C}function U(I,K){var C=Math.trunc(Math.abs(I/60)),J=Math.trunc(Math.abs(I%60)),M=0<=I?"+":"-";switch(K){case "short":return""+M+w(C,2)+":"+w(J,2);case "narrow":return""+M+C+(0<J?":"+J:"");case "techie":return""+M+w(C,2)+w(J,2);default:throw new RangeError("Value format "+K+" is out of range for property format");}}function la(I){return x(I,["hour","minute","second","millisecond"])}
function V(I){switch(I){case "narrow":return[].concat(Pc);case "short":return[].concat(Sb);case "long":return[].concat(Qc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function R(I){switch(I){case "narrow":return[].concat(Rc);case "short":return[].concat(Tb);case "long":return[].concat(Ub);case "numeric":return"1234567".split("");default:return null}}function ha(I){switch(I){case "narrow":return[].concat(Sc);
case "short":return[].concat(Tc);case "long":return[].concat(Uc);default:return null}}function S(I,K,C,J){void 0===C&&(C="always");void 0===J&&(J=!1);var M={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Y=-1===["hours","minutes","seconds"].indexOf(I);if("auto"===C&&Y)switch(C="days"===I,K){case 1:return C?"tomorrow":"next "+M[I][0];case -1:return C?"yesterday":
"last "+M[I][0];case 0:return C?"today":"this "+M[I][0]}C=Object.is(K,-0)||0>K;K=Math.abs(K);Y=1===K;var ma=M[I];I=J?Y?ma[1]:ma[2]||ma[1]:Y?M[I][0]:I;return C?K+" "+I+" ago":"in "+K+" "+I}function X(I,K){for(var C="",J=m(I),M;!(M=J()).done;)M=M.value,C=M.literal?C+M.val:C+K(M.val);return C}function ka(I,K){var C;if(n(I)||null===I)return K;if(I instanceof jb)return I;if("string"===typeof I){var J=I.toLowerCase();return"local"===J||"system"===J?K:"utc"===J||"gmt"===J?ab.utcInstance:null!=(C=db.parseGMTOffset(I))?
ab.instance(C):db.isValidSpecifier(J)?db.create(I):ab.parseSpecifier(J)||new Cb(I)}return p(I)?ab.instance(I):"object"===typeof I&&I.offset&&"number"===typeof I.offset?I:new Cb(I)}function oa(I,K){void 0===K&&(K={});var C=JSON.stringify([I,K]),J=Db[C];J||(J=new Intl.DateTimeFormat(I,K),Db[C]=J);return J}function ta(I){for(var K=[],C=1;12>=C;C++){var J=Ra.utc(2016,C,1);K.push(I(J))}return K}function xa(I){for(var K=[],C=1;7>=C;C++){var J=Ra.utc(2016,11,13+C);K.push(I(J))}return K}function O(I,K,C,
J,M){I=I.listingMode(C);return"error"===I?null:"en"===I?J(K):M(K)}function Z(){for(var I=arguments.length,K=Array(I),C=0;C<I;C++)K[C]=arguments[C];I=K.reduce(function(J,M){return J+M.source},"");return RegExp("^"+I+"$")}function fa(){for(var I=arguments.length,K=Array(I),C=0;C<I;C++)K[C]=arguments[C];return function(J){return K.reduce(function(M,Y){var ma=M[0],sa=M[1],ua=Y(J,M[2]),ya=ua[1],Ba=ua[2];return[b({},ma,ua[0]),sa||ya,Ba]},[{},null,1]).slice(0,2)}}function ra(I){if(null==I)return[null,null];
for(var K=arguments.length,C=Array(1<K?K-1:0),J=1;J<K;J++)C[J-1]=arguments[J];for(K=0;K<C.length;K++){var M=C[K];J=M[1];if(M=M[0].exec(I))return J(M)}return[null,null]}function pa(){for(var I=arguments.length,K=Array(I),C=0;C<I;C++)K[C]=arguments[C];return function(J,M){var Y={},ma;for(ma=0;ma<K.length;ma++)Y[K[ma]]=u(J[M+ma]);return[Y,null,M+ma]}}function W(I,K,C){I=I[K];return n(I)?C:u(I)}function T(I,K){return[{year:W(I,K),month:W(I,K+1,1),day:W(I,K+2,1)},null,K+3]}function da(I,K){return[{hours:W(I,
K,0),minutes:W(I,K+1,0),seconds:W(I,K+2,0),milliseconds:A(I[K+3])},null,K+4]}function na(I,K){var C=!I[K]&&!I[K+1],J=aa(I[K+1],I[K+2]);return[{},C?null:ab.instance(J),K+3]}function ja(I,K){return[{},I[K]?db.create(I[K]):null,K+1]}function N(I){var K=I[2],C=I[3],J=I[4],M=I[5],Y=I[6],ma=I[7],sa=I[8],ua="-"===I[0][0],ya=ma&&"-"===ma[0],Ba=function(Ma,Fa){void 0===Fa&&(Fa=!1);return void 0!==Ma&&(Fa||Ma&&ua)?-Ma:Ma};return[{years:Ba(u(I[1])),months:Ba(u(K)),weeks:Ba(u(C)),days:Ba(u(J)),hours:Ba(u(M)),
minutes:Ba(u(Y)),seconds:Ba(u(ma),"-0"===ma),milliseconds:Ba(A(sa),ya)}]}function P(I,K,C,J,M,Y,ma){K={year:2===K.length?L(u(K)):u(K),month:Sb.indexOf(C)+1,day:u(J),hour:u(M),minute:u(Y)};ma&&(K.second=u(ma));I&&(K.weekday=3<I.length?Ub.indexOf(I)+1:Tb.indexOf(I)+1);return K}function ba(I){var K=I[8],C=I[9],J=I[10],M=I[11];I=P(I[1],I[4],I[3],I[2],I[5],I[6],I[7]);K=K?Vc[K]:C?0:aa(J,M);return[I,new ab(K)]}function ia(I){return[P(I[1],I[4],I[3],I[2],I[5],I[6],I[7]),ab.utcInstance]}function qa(I){return[P(I[1],
I[7],I[2],I[3],I[4],I[5],I[6]),ab.utcInstance]}function za(I,K,C){void 0===C&&(C=!1);I={values:C?K.values:b({},I.values,K.values||{}),loc:I.loc.clone(K.loc),conversionAccuracy:K.conversionAccuracy||I.conversionAccuracy};return new Xa(I)}function Ca(I,K,C,J,M){I=I[M][C];var Y=K[C]/I;Y=Math.sign(Y)!==Math.sign(J[M])&&0!==J[M]&&1>=Math.abs(Y)?0>Y?Math.floor(Y):Math.ceil(Y):Math.trunc(Y);J[M]+=Y;K[C]-=Y*I}function Ha(I,K){Wc.reduce(function(C,J){if(n(K[J]))return C;C&&Ca(I,K,C,K,J);return J},null)}function Da(I){if(p(I))return Xa.fromMillis(I);
if(Xa.isDuration(I))return I;if("object"===typeof I)return Xa.fromObject(I);throw new $a("Unknown duration argument "+I+" of type "+typeof I);}function Ja(I,K){var C=function(J){return J.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};C=C(K)-C(I);return Math.floor(Xa.fromMillis(C).as("days"))}function va(I,K,C){for(var J={},M,Y,ma=0,sa=[["years",function(Fa,La){return La.year-Fa.year}],["quarters",function(Fa,La){return La.quarter-Fa.quarter}],["months",function(Fa,La){return La.month-Fa.month+
12*(La.year-Fa.year)}],["weeks",function(Fa,La){var bb=Ja(Fa,La);return(bb-bb%7)/7}],["days",Ja]];ma<sa.length;ma++){var ua=sa[ma],ya=ua[0];ua=ua[1];if(0<=C.indexOf(ya)){var Ba;M=ya;ua=ua(I,K);Y=I.plus((Ba={},Ba[ya]=ua,Ba));if(Y>K){var Ma;I=I.plus((Ma={},Ma[ya]=ua-1,Ma));--ua}else I=Y;J[ya]=ua}}return[I,J,Y,M]}function Ga(I,K,C,J){var M=va(I,K,C);I=M[0];var Y=M[1],ma=M[2],sa=M[3];M=K-I;C=C.filter(function(Ba){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Ba)});if(0===C.length){if(ma<
K){var ua;ma=I.plus((ua={},ua[sa]=1,ua))}ma!==I&&(Y[sa]=(Y[sa]||0)+M/(ma-I))}K=Xa.fromObject(Y,J);if(0<C.length){var ya;return(ya=Xa.fromMillis(M,J)).shiftTo.apply(ya,C).plus(K)}return K}function Aa(I,K){var C=I.numberingSystem;void 0===K&&(K="");return new RegExp(""+Eb[C||"latn"]+K)}function Ea(I,K){void 0===K&&(K=function(C){return C});return{regex:I,deser:function(C){var J=K;C=C[0];var M=parseInt(C,10);if(isNaN(M)){M="";for(var Y=0;Y<C.length;Y++){var ma=C.charCodeAt(Y);if(-1!==C[Y].search(Eb.hanidec))M+=
Xc.indexOf(C[Y]);else for(ya in Vb){var sa=Vb[ya],ua=sa[0];sa=sa[1];ma>=ua&&ma<=sa&&(M+=ma-ua)}}var ya=parseInt(M,10)}else ya=M;return J(ya)}}}function Wa(I){return I.replace(/\./g,"\\.?").replace(Fb,Wb)}function Ia(I,K){return null===I?null:{regex:RegExp(I.map(Wa).join("|")),deser:function(C){var J=C[0];return I.findIndex(function(M){return J.replace(/\./g,"").replace(Fb," ").toLowerCase()===M.replace(/\./g,"").replace(Fb," ").toLowerCase()})+K}}}function Qa(I,K){return{regex:I,deser:function(C){return aa(C[1],
C[2])},groups:K}}function Ka(I){return{regex:I,deser:function(K){return K[0]}}}function Oa(I,K){var C=Aa(K),J=Aa(K,"{2}"),M=Aa(K,"{3}"),Y=Aa(K,"{4}"),ma=Aa(K,"{6}"),sa=Aa(K,"{1,2}"),ua=Aa(K,"{1,3}"),ya=Aa(K,"{1,6}"),Ba=Aa(K,"{1,9}"),Ma=Aa(K,"{2,4}"),Fa=Aa(K,"{4,6}"),La=function(Za){return{regex:RegExp(Za.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Yc){return Yc[0]},literal:!0}},bb=function(Za){if(I.literal)return La(Za);switch(Za.val){case "G":return Ia(K.eras("short",!1),
0);case "GG":return Ia(K.eras("long",!1),0);case "y":return Ea(ya);case "yy":return Ea(Ma,L);case "yyyy":return Ea(Y);case "yyyyy":return Ea(Fa);case "yyyyyy":return Ea(ma);case "M":return Ea(sa);case "MM":return Ea(J);case "MMM":return Ia(K.months("short",!0,!1),1);case "MMMM":return Ia(K.months("long",!0,!1),1);case "L":return Ea(sa);case "LL":return Ea(J);case "LLL":return Ia(K.months("short",!1,!1),1);case "LLLL":return Ia(K.months("long",!1,!1),1);case "d":return Ea(sa);case "dd":return Ea(J);
case "o":return Ea(ua);case "ooo":return Ea(M);case "HH":return Ea(J);case "H":return Ea(sa);case "hh":return Ea(J);case "h":return Ea(sa);case "mm":return Ea(J);case "m":return Ea(sa);case "q":return Ea(sa);case "qq":return Ea(J);case "s":return Ea(sa);case "ss":return Ea(J);case "S":return Ea(ua);case "SSS":return Ea(M);case "u":return Ka(Ba);case "a":return Ia(K.meridiems(),0);case "kkkk":return Ea(Y);case "kk":return Ea(Ma,L);case "W":return Ea(sa);case "WW":return Ea(J);case "E":case "c":return Ea(C);
case "EEE":return Ia(K.weekdays("short",!1,!1),1);case "EEEE":return Ia(K.weekdays("long",!1,!1),1);case "ccc":return Ia(K.weekdays("short",!0,!1),1);case "cccc":return Ia(K.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Qa(new RegExp("([+-]"+sa.source+")(?::("+J.source+"))?"),2);case "ZZZ":return Qa(new RegExp("([+-]"+sa.source+")("+J.source+")?"),2);case "z":return Ka(/[a-z_+-/]{1,256}?/i);default:return La(Za)}}(I)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};bb.token=
I;return bb}function Va(I){return["^"+I.map(function(K){return K.regex}).reduce(function(K,C){return K+"("+C.source+")"},"")+"$",I]}function Pa(I,K,C){if(I=I.match(K)){K={};var J=1,M;for(M in C)if(z(C,M)){var Y=C[M],ma=Y.groups?Y.groups+1:1;!Y.literal&&Y.token&&(K[Y.token.val[0]]=Y.deser(I.slice(J,J+ma)));J+=ma}return[I,K]}return[I,{}]}function wa(I){var K=function(J){switch(J){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";
case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};var C=n(I.Z)?n(I.z)?null:db.create(I.z):new ab(I.Z);n(I.q)||(I.M=3*(I.q-1)+1);n(I.h)||(12>I.h&&1===I.a?I.h+=12:12===I.h&&0===I.a&&(I.h=0));0===I.G&&I.y&&(I.y=-I.y);n(I.u)||(I.S=A(I.u));return[Object.keys(I).reduce(function(J,M){var Y=K(M);Y&&(J[Y]=I[M]);return J},{}),C]}function Na(){Gb||
(Gb=Ra.fromMillis(1555555555555));return Gb}function Hb(I,K){if(I.literal)return I;var C=fb.macroTokenToFormatOpts(I.val);if(!C)return I;var J=fb.create(K,C).formatDateTimeParts(Na()).map(function(M){var Y=M.type;M=M.value;"literal"===Y?Y={literal:!0,val:M}:(M=C[Y],Y=Zc[Y],"object"===typeof Y&&(Y=Y[M]),Y=Y?{literal:!1,val:Y}:void 0);return Y});return J.includes(void 0)?I:J}function eb(I,K){var C;return(C=Array.prototype).concat.apply(C,I.map(function(J){return Hb(J,K)}))}function tb(I,K,C){C=eb(fb.parseFormat(C),
I);var J=C.map(function(ua){return Oa(ua,I)}),M=J.find(function(ua){return ua.invalidReason});if(M)return{input:K,tokens:C,invalidReason:M.invalidReason};M=Va(J);J=RegExp(M[0],"i");var Y=Pa(K,J,M[1]);M=Y[0];var ma=(Y=Y[1])?wa(Y):[null,null],sa=ma[0];ma=ma[1];if(z(Y,"a")&&z(Y,"H"))throw new mb("Can't include meridiem when specifying 24-hour format");return{input:K,tokens:C,regex:J,rawMatches:M,matches:Y,result:sa,zone:ma}}function Ya(I,K){return new cb("unit out of range","you specified "+K+" (of type "+
typeof K+") as a "+I+", which is invalid")}function ub(I,K,C){I=(new Date(Date.UTC(I,K-1,C))).getUTCDay();return 0===I?7:I}function vb(I,K){var C=B(I)?Ib:Jb,J=C.findIndex(function(M){return M<K});return{month:J+1,day:K-C[J]}}function gb(I){var K=I.year,C=I.month,J=I.day;var M=J+(B(K)?Ib:Jb)[C-1];C=ub(K,C,J);M=Math.floor((M-C+10)/7);1>M?(--K,M=H(K)):M>H(K)&&(K+=1,M=1);return b({weekYear:K,weekNumber:M,weekday:C},la(I))}function wb(I){var K=I.weekYear,C=I.weekNumber,J=I.weekday,M=ub(K,1,4),Y=B(K)?366:
365;C=7*C+J-M-3;1>C?(Y=K-1,C+=B(Y)?366:365):C>Y?(Y=K+1,C-=B(K)?366:365):Y=K;K=vb(Y,C);return b({year:Y,month:K.month,day:K.day},la(I))}function nb(I){var K=I.year;var C=I.month;C=I.day+(B(K)?Ib:Jb)[C-1];return b({year:K,ordinal:C},la(I))}function Ta(I){var K=I.year,C=vb(K,I.ordinal);return b({year:K,month:C.month,day:C.day},la(I))}function Xb(I){var K=t(I.year),C=v(I.month,1,12),J=v(I.day,1,E(I.year,I.month));return K?C?J?!1:Ya("day",I.day):Ya("month",I.month):Ya("year",I.year)}function Yb(I){var K=
I.hour,C=I.minute,J=I.second;I=I.millisecond;var M=v(K,0,23)||24===K&&0===C&&0===J&&0===I,Y=v(C,0,59),ma=v(J,0,59),sa=v(I,0,999);return M?Y?ma?sa?!1:Ya("millisecond",I):Ya("second",J):Ya("minute",C):Ya("hour",K)}function xb(I){return new cb("unsupported zone",'the zone "'+I.name+'" is not supported')}function Kb(I){null===I.weekData&&(I.weekData=gb(I.c));return I.weekData}function ob(I,K){var C={ts:I.ts,zone:I.zone,c:I.c,o:I.o,loc:I.loc,invalid:I.invalid};return new Ra(b({},C,K,{old:C}))}function Zb(I,
K,C){var J=I-6E4*K,M=C.offset(J);if(K===M)return[J,K];J-=6E4*(M-K);K=C.offset(J);return M===K?[J,M]:[I-6E4*Math.min(M,K),Math.max(M,K)]}function $b(I,K){var C=new Date(I+6E4*K);return{year:C.getUTCFullYear(),month:C.getUTCMonth()+1,day:C.getUTCDate(),hour:C.getUTCHours(),minute:C.getUTCMinutes(),second:C.getUTCSeconds(),millisecond:C.getUTCMilliseconds()}}function yb(I,K,C){return Zb(F(I),K,C)}function ac(I,K){var C=I.o,J=I.c.year+Math.trunc(K.years),M=I.c.month+Math.trunc(K.months)+3*Math.trunc(K.quarters);
M=b({},I.c,{year:J,month:M,day:Math.min(I.c.day,E(J,M))+Math.trunc(K.days)+7*Math.trunc(K.weeks)});J=Xa.fromObject({years:K.years-Math.trunc(K.years),quarters:K.quarters-Math.trunc(K.quarters),months:K.months-Math.trunc(K.months),weeks:K.weeks-Math.trunc(K.weeks),days:K.days-Math.trunc(K.days),hours:K.hours,minutes:K.minutes,seconds:K.seconds,milliseconds:K.milliseconds}).as("milliseconds");M=F(M);M=Zb(M,C,I.zone);C=M[0];M=M[1];0!==J&&(C+=J,M=I.zone.offset(C));return{ts:C,o:M}}function pb(I,K,C,J,
M){var Y=C.setZone,ma=C.zone;return I&&0!==Object.keys(I).length?(I=Ra.fromObject(I,b({},C,{zone:K||ma})),Y?I:I.setZone(ma)):Ra.invalid(new cb("unparsable",'the input "'+M+"\" can't be parsed as "+J))}function kb(I,K,C){void 0===C&&(C=!0);return I.isValid?fb.create(Ua.create("en-US"),{allowZ:C,forceSimple:!0}).formatDateTimeFromString(I,K):null}function bc(I,K){var C=K.suppressSeconds,J=K.suppressMilliseconds;J=void 0===J?!1:J;var M=K.includeOffset,Y=K.includePrefix;Y=void 0===Y?!1:Y;var ma=K.includeZone;
ma=void 0===ma?!1:ma;var sa=K.spaceZone,ua=K.format;ua=void 0===ua?"extended":ua;var ya="basic"===ua?"HHmm":"HH:mm";void 0!==C&&C&&0===I.second&&0===I.millisecond||(ya+="basic"===ua?"ss":":ss",J&&0===I.millisecond||(ya+=".SSS"));(ma||M)&&(void 0===sa?0:sa)&&(ya+=" ");ma?ya+="z":M&&(ya+="basic"===ua?"ZZZ":"ZZ");C=kb(I,ya);Y&&(C="T"+C);return C}function cc(I){var K={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",
quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[I.toLowerCase()];if(!K)throw new dc(I);return K}function ec(I,K){var C=ka(K.zone,Sa.defaultZone),J=Ua.fromObject(K),M=Sa.now();if(!n(I.year)){var Y=m(fc);for(var ma;!(ma=Y()).done;)ma=ma.value,n(I[ma])&&(I[ma]=gc[ma]);if(Y=Xb(I)||
Yb(I))return Ra.invalid(Y);M=C.offset(M);Y=yb(I,M,C);M=Y[0];Y=Y[1]}return new Ra({ts:M,zone:C,loc:J,o:Y})}function hc(I,K,C){var J=n(C.round)?!0:C.round,M=function(ya,Ba){ya=G(ya,J||C.calendary?0:2,!0);return K.loc.clone(C).relFormatter(C).format(ya,Ba)},Y=function(ya){return C.calendary?K.hasSame(I,ya)?0:K.startOf(ya).diff(I.startOf(ya),ya).get(ya):K.diff(I,ya).get(ya)};if(C.unit)return M(Y(C.unit),C.unit);for(var ma=m(C.units),sa;!(sa=ma()).done;){sa=sa.value;var ua=Y(sa);if(1<=Math.abs(ua))return M(ua,
sa)}return M(I>K?-0:0,C.units[C.units.length-1])}function ic(I){var K={};0<I.length&&"object"===typeof I[I.length-1]?(K=I[I.length-1],I=Array.from(I).slice(0,I.length-1)):I=Array.from(I);return[K,I]}function qb(I){if(Ra.isDateTime(I))return I;if(I&&I.valueOf&&p(I.valueOf()))return Ra.fromJSDate(I);if(I&&"object"===typeof I)return Ra.fromObject(I);throw new $a("Unknown datetime argument: "+I+", of type "+typeof I);}var ib=function(I){function K(){return I.apply(this,arguments)||this}d(K,I);return K}(e(Error)),
$c=function(I){function K(C){return I.call(this,"Invalid DateTime: "+C.toMessage())||this}d(K,I);return K}(ib),ad=function(I){function K(C){return I.call(this,"Invalid Interval: "+C.toMessage())||this}d(K,I);return K}(ib),bd=function(I){function K(C){return I.call(this,"Invalid Duration: "+C.toMessage())||this}d(K,I);return K}(ib),mb=function(I){function K(){return I.apply(this,arguments)||this}d(K,I);return K}(ib),dc=function(I){function K(C){return I.call(this,"Invalid unit "+C)||this}d(K,I);return K}(ib),
$a=function(I){function K(){return I.apply(this,arguments)||this}d(K,I);return K}(ib),hb=function(I){function K(){return I.call(this,"Zone is an abstract class")||this}d(K,I);return K}(ib),Lb={year:"numeric",month:"numeric",day:"numeric"},jc={year:"numeric",month:"short",day:"numeric"},cd={year:"numeric",month:"short",day:"numeric",weekday:"short"},kc={year:"numeric",month:"long",day:"numeric"},lc={year:"numeric",month:"long",day:"numeric",weekday:"long"},mc={hour:"numeric",minute:"numeric"},nc={hour:"numeric",
minute:"numeric",second:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},qc={hour:"numeric",minute:"numeric",hourCycle:"h23"},rc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},tc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},uc={year:"numeric",
month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},wc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",
timeZoneName:"short"},zc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Cc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,Qc="January February March April May June July August September October November December".split(" "),
Sb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pc="JFMAMJJASOND".split(""),Ub="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Tb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Rc="MTWTFSS".split(""),Dc=["AM","PM"],Uc=["Before Christ","Anno Domini"],Tc=["BC","AD"],Sc=["B","A"],ed={D:Lb,DD:jc,DDD:kc,DDDD:lc,t:mc,tt:nc,ttt:oc,tttt:pc,T:qc,TT:rc,TTT:sc,TTTT:tc,f:uc,ff:wc,fff:yc,ffff:Ac,F:vc,FF:xc,FFF:zc,FFFF:Bc},fb=function(){function I(C,J){this.opts=J;this.loc=C;this.systemLoc=
null}I.create=function(C,J){void 0===J&&(J={});return new I(C,J)};I.parseFormat=function(C){for(var J=null,M="",Y=!1,ma=[],sa=0;sa<C.length;sa++){var ua=C.charAt(sa);"'"===ua?(0<M.length&&ma.push({literal:Y,val:M}),J=null,M="",Y=!Y):Y?M+=ua:ua===J?M+=ua:(0<M.length&&ma.push({literal:!1,val:M}),J=M=ua)}0<M.length&&ma.push({literal:Y,val:M});return ma};I.macroTokenToFormatOpts=function(C){return ed[C]};var K=I.prototype;K.formatWithSystemDefault=function(C,J){null===this.systemLoc&&(this.systemLoc=
this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(C,b({},this.opts,J)).format()};K.formatDateTime=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).format()};K.formatDateTimeParts=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).formatToParts()};K.resolvedOptions=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).resolvedOptions()};K.num=function(C,J){void 0===J&&(J=0);if(this.opts.forceSimple)return w(C,
J);var M=b({},this.opts);0<J&&(M.padTo=J);return this.loc.numberFormatter(M).format(C)};K.formatDateTimeFromString=function(C,J){var M=this,Y="en"===this.loc.listingMode(),ma=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,sa=function(Fa,La){return M.loc.extract(C,Fa,La)},ua=function(Fa){return C.isOffsetFixed&&0===C.offset&&Fa.allowZ?"Z":C.isValid?C.zone.formatOffset(C.ts,Fa.format):""},ya=function(Fa,La){return Y?V(Fa)[C.month-1]:sa(La?{month:Fa}:{month:Fa,day:"numeric"},"month")},
Ba=function(Fa,La){return Y?R(Fa)[C.weekday-1]:sa(La?{weekday:Fa}:{weekday:Fa,month:"long",day:"numeric"},"weekday")},Ma=function(Fa){return Y?ha(Fa)[0>C.year?0:1]:sa({era:Fa},"era")};return X(I.parseFormat(J),function(Fa){switch(Fa){case "S":return M.num(C.millisecond);case "u":case "SSS":return M.num(C.millisecond,3);case "s":return M.num(C.second);case "ss":return M.num(C.second,2);case "m":return M.num(C.minute);case "mm":return M.num(C.minute,2);case "h":return M.num(0===C.hour%12?12:C.hour%
12);case "hh":return M.num(0===C.hour%12?12:C.hour%12,2);case "H":return M.num(C.hour);case "HH":return M.num(C.hour,2);case "Z":return ua({format:"narrow",allowZ:M.opts.allowZ});case "ZZ":return ua({format:"short",allowZ:M.opts.allowZ});case "ZZZ":return ua({format:"techie",allowZ:M.opts.allowZ});case "ZZZZ":return C.zone.offsetName(C.ts,{format:"short",locale:M.loc.locale});case "ZZZZZ":return C.zone.offsetName(C.ts,{format:"long",locale:M.loc.locale});case "z":return C.zoneName;case "a":return Y?
Dc[12>C.hour?0:1]:sa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ma?sa({day:"numeric"},"day"):M.num(C.day);case "dd":return ma?sa({day:"2-digit"},"day"):M.num(C.day,2);case "c":return M.num(C.weekday);case "ccc":return Ba("short",!0);case "cccc":return Ba("long",!0);case "ccccc":return Ba("narrow",!0);case "E":return M.num(C.weekday);case "EEE":return Ba("short",!1);case "EEEE":return Ba("long",!1);case "EEEEE":return Ba("narrow",!1);case "L":return ma?sa({month:"numeric",day:"numeric"},
"month"):M.num(C.month);case "LL":return ma?sa({month:"2-digit",day:"numeric"},"month"):M.num(C.month,2);case "LLL":return ya("short",!0);case "LLLL":return ya("long",!0);case "LLLLL":return ya("narrow",!0);case "M":return ma?sa({month:"numeric"},"month"):M.num(C.month);case "MM":return ma?sa({month:"2-digit"},"month"):M.num(C.month,2);case "MMM":return ya("short",!1);case "MMMM":return ya("long",!1);case "MMMMM":return ya("narrow",!1);case "y":return ma?sa({year:"numeric"},"year"):M.num(C.year);
case "yy":return ma?sa({year:"2-digit"},"year"):M.num(C.year.toString().slice(-2),2);case "yyyy":return ma?sa({year:"numeric"},"year"):M.num(C.year,4);case "yyyyyy":return ma?sa({year:"numeric"},"year"):M.num(C.year,6);case "G":return Ma("short");case "GG":return Ma("long");case "GGGGG":return Ma("narrow");case "kk":return M.num(C.weekYear.toString().slice(-2),2);case "kkkk":return M.num(C.weekYear,4);case "W":return M.num(C.weekNumber);case "WW":return M.num(C.weekNumber,2);case "o":return M.num(C.ordinal);
case "ooo":return M.num(C.ordinal,3);case "q":return M.num(C.quarter);case "qq":return M.num(C.quarter,2);case "X":return M.num(Math.floor(C.ts/1E3));case "x":return M.num(C.ts);default:var La=I.macroTokenToFormatOpts(Fa);Fa=La?M.formatWithSystemDefault(C,La):Fa;return Fa}})};K.formatDurationFromString=function(C,J){var M=this,Y=function(ua){switch(ua[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";
case "y":return"year";default:return null}},ma=I.parseFormat(J),sa=ma.reduce(function(ua,ya){var Ba=ya.val;return ya.literal?ua:ua.concat(Ba)},[]);sa=C.shiftTo.apply(C,sa.map(Y).filter(function(ua){return ua}));return X(ma,function(ua){return function(ya){var Ba=Y(ya);return Ba?M.num(ua.get(Ba),ya.length):ya}}(sa))};return I}(),cb=function(){function I(K,C){this.reason=K;this.explanation=C}I.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return I}(),
jb=function(){function I(){}var K=I.prototype;K.offsetName=function(C,J){throw new hb;};K.formatOffset=function(C,J){throw new hb;};K.offset=function(C){throw new hb;};K.equals=function(C){throw new hb;};a(I,[{key:"type",get:function(){throw new hb;}},{key:"name",get:function(){throw new hb;}},{key:"isUniversal",get:function(){throw new hb;}},{key:"isValid",get:function(){throw new hb;}}]);return I}(),Mb=null,Ec=function(I){function K(){return I.apply(this,arguments)||this}d(K,I);var C=K.prototype;
C.offsetName=function(J,M){return Q(J,M.format,M.locale)};C.formatOffset=function(J,M){return U(this.offset(J),M)};C.offset=function(J){return-(new Date(J)).getTimezoneOffset()};C.equals=function(J){return"system"===J.type};a(K,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Mb&&(Mb=new K);
return Mb}}]);return K}(jb),fd=RegExp("^"+Cc.source+"$"),zb={},gd={year:0,month:1,day:2,hour:3,minute:4,second:5},Ab={},db=function(I){function K(J){var M=I.call(this)||this;M.zoneName=J;M.valid=K.isValidZone(J);return M}d(K,I);K.create=function(J){Ab[J]||(Ab[J]=new K(J));return Ab[J]};K.resetCache=function(){Ab={};zb={}};K.isValidSpecifier=function(J){return!(!J||!J.match(fd))};K.isValidZone=function(J){try{return(new Intl.DateTimeFormat("en-US",{timeZone:J})).format(),!0}catch(M){return!1}};K.parseGMTOffset=
function(J){return J&&(J=J.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(J[1]):null};var C=K.prototype;C.offsetName=function(J,M){return Q(J,M.format,M.locale,this.name)};C.formatOffset=function(J,M){return U(this.offset(J),M)};C.offset=function(J){J=new Date(J);if(isNaN(J))return NaN;var M=this.name;zb[M]||(zb[M]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:M,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));M=zb[M];if(M.formatToParts){M=
M.formatToParts(J);for(var Y=[],ma=0;ma<M.length;ma++){var sa=M[ma],ua=sa.value;sa=gd[sa.type];n(sa)||(Y[sa]=parseInt(ua,10))}M=Y}else M=M.format(J).replace(/\u200E/g,""),M=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(M),M=[M[3],M[1],M[2],M[4],M[5],M[6]];M=F({year:M[0],month:M[1],day:M[2],hour:M[3],minute:M[4],second:M[5],millisecond:0});J=+J;Y=J%1E3;return(M-(J-(0<=Y?Y:1E3+Y)))/6E4};C.equals=function(J){return"iana"===J.type&&J.name===this.name};a(K,[{key:"type",get:function(){return"iana"}},{key:"name",
get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return K}(jb),Nb=null,ab=function(I){function K(J){var M=I.call(this)||this;M.fixed=J;return M}d(K,I);K.instance=function(J){return 0===J?K.utcInstance:new K(J)};K.parseSpecifier=function(J){return J&&(J=J.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new K(aa(J[1],J[2])):null};var C=K.prototype;C.offsetName=function(){return this.name};C.formatOffset=function(J,
M){return U(this.fixed,M)};C.offset=function(){return this.fixed};C.equals=function(J){return"fixed"===J.type&&J.fixed===this.fixed};a(K,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+U(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Nb&&(Nb=new K(0));return Nb}}]);return K}(jb),Cb=function(I){function K(J){var M=I.call(this)||this;M.zoneName=
J;return M}d(K,I);var C=K.prototype;C.offsetName=function(){return null};C.formatOffset=function(){return""};C.offset=function(){return NaN};C.equals=function(){return!1};a(K,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return K}(jb),Fc=function(){return Date.now()},Gc="system",Hc=null,Ic=null,Jc=null,Kc,Sa=function(){function I(){}I.resetCaches=function(){Ua.resetCache();
db.resetCache()};a(I,null,[{key:"now",get:function(){return Fc},set:function(K){Fc=K}},{key:"defaultZone",get:function(){return ka(Gc,Ec.instance)},set:function(K){Gc=K}},{key:"defaultLocale",get:function(){return Hc},set:function(K){Hc=K}},{key:"defaultNumberingSystem",get:function(){return Ic},set:function(K){Ic=K}},{key:"defaultOutputCalendar",get:function(){return Jc},set:function(K){Jc=K}},{key:"throwOnInvalid",get:function(){return Kc},set:function(K){Kc=K}}]);return I}(),hd=["base"],Db={},
Ob={},Pb={},Bb=null,id=function(){function I(K,C,J){this.padTo=J.padTo||0;this.floor=J.floor||!1;if(!C){C={useGrouping:!1};0<J.padTo&&(C.minimumIntegerDigits=J.padTo);J=C;void 0===J&&(J={});C=JSON.stringify([K,J]);var M=Ob[C];M||(M=new Intl.NumberFormat(K,J),Ob[C]=M);this.inf=M}}I.prototype.format=function(K){if(this.inf)return this.inf.format(this.floor?Math.floor(K):K);K=this.floor?Math.floor(K):G(K,3);return w(K,this.padTo)};return I}(),jd=function(){function I(C,J,M){this.opts=M;if(C.zone.isUniversal){var Y=
C.offset/60*-1;Y=0<=Y?"Etc/GMT+"+Y:"Etc/GMT"+Y;var ma=db.isValidZone(Y);0!==C.offset&&ma?this.dt=C:(Y="UTC",this.dt=M.timeZoneName?C:0===C.offset?C:Ra.fromMillis(C.ts+6E4*C.offset))}else"system"===C.zone.type?this.dt=C:(this.dt=C,Y=C.zone.name);C=b({},this.opts);Y&&(C.timeZone=Y);this.dtf=oa(J,C)}var K=I.prototype;K.format=function(){return this.dtf.format(this.dt.toJSDate())};K.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};K.resolvedOptions=function(){return this.dtf.resolvedOptions()};
return I}(),kd=function(){function I(C,J,M){this.opts=b({style:"long"},M);if(!J&&r()){J=M;void 0===J&&(J={});M=J;M.base;if(null==M)M={};else{var Y={},ma=Object.keys(M),sa;for(sa=0;sa<ma.length;sa++){var ua=ma[sa];0<=hd.indexOf(ua)||(Y[ua]=M[ua])}M=Y}M=JSON.stringify([C,M]);Y=Pb[M];Y||(Y=new Intl.RelativeTimeFormat(C,J),Pb[M]=Y);this.rtf=Y}}var K=I.prototype;K.format=function(C,J){return this.rtf?this.rtf.format(C,J):S(J,C,this.opts.numeric,"long"!==this.opts.style)};K.formatToParts=function(C,J){return this.rtf?
this.rtf.formatToParts(C,J):[]};return I}(),Ua=function(){function I(C,J,M,Y){var ma=C.indexOf("-u-");if(-1===ma)C=[C];else{ma=C.substring(0,ma);try{var sa=oa(C).resolvedOptions()}catch(ua){sa=oa(ma).resolvedOptions()}C=sa;C=[ma,C.numberingSystem,C.calendar]}sa=C[1];ma=C[2];this.locale=C[0];this.numberingSystem=J||sa||null;this.outputCalendar=M||ma||null;J=this.locale;M=this.numberingSystem;if((C=this.outputCalendar)||M)J+="-u",C&&(J+="-ca-"+C),M&&(J+="-nu-"+M);this.intl=J;this.weekdaysCache={format:{},
standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Y;this.fastNumbersCached=null}I.fromOpts=function(C){return I.create(C.locale,C.numberingSystem,C.outputCalendar,C.defaultToEN)};I.create=function(C,J,M,Y){void 0===Y&&(Y=!1);C=C||Sa.defaultLocale;var ma;(ma=C)||(Y?Y="en-US":(Bb||(Bb=(new Intl.DateTimeFormat).resolvedOptions().locale),Y=Bb),ma=Y);return new I(ma,J||Sa.defaultNumberingSystem,M||Sa.defaultOutputCalendar,C)};I.resetCache=
function(){Bb=null;Db={};Ob={};Pb={}};I.fromObject=function(C){C=void 0===C?{}:C;return I.create(C.locale,C.numberingSystem,C.outputCalendar)};var K=I.prototype;K.listingMode=function(C){C=this.isEnglish();var J=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return C&&J?"en":"intl"};K.clone=function(C){return C&&0!==Object.getOwnPropertyNames(C).length?I.create(C.locale||this.specifiedLocale,C.numberingSystem||this.numberingSystem,
C.outputCalendar||this.outputCalendar,C.defaultToEN||!1):this};K.redefaultToEN=function(C){void 0===C&&(C={});return this.clone(b({},C,{defaultToEN:!0}))};K.redefaultToSystem=function(C){void 0===C&&(C={});return this.clone(b({},C,{defaultToEN:!1}))};K.months=function(C,J,M){var Y=this;void 0===J&&(J=!1);void 0===M&&(M=!0);return O(this,C,M,V,function(){var ma=J?{month:C,day:"numeric"}:{month:C},sa=J?"format":"standalone";Y.monthsCache[sa][C]||(Y.monthsCache[sa][C]=ta(function(ua){return Y.extract(ua,
ma,"month")}));return Y.monthsCache[sa][C]})};K.weekdays=function(C,J,M){var Y=this;void 0===J&&(J=!1);void 0===M&&(M=!0);return O(this,C,M,R,function(){var ma=J?{weekday:C,year:"numeric",month:"long",day:"numeric"}:{weekday:C},sa=J?"format":"standalone";Y.weekdaysCache[sa][C]||(Y.weekdaysCache[sa][C]=xa(function(ua){return Y.extract(ua,ma,"weekday")}));return Y.weekdaysCache[sa][C]})};K.meridiems=function(C){var J=this;void 0===C&&(C=!0);return O(this,void 0,C,function(){return Dc},function(){if(!J.meridiemCache){var M=
{hour:"numeric",hourCycle:"h12"};J.meridiemCache=[Ra.utc(2016,11,13,9),Ra.utc(2016,11,13,19)].map(function(Y){return J.extract(Y,M,"dayperiod")})}return J.meridiemCache})};K.eras=function(C,J){var M=this;void 0===J&&(J=!0);return O(this,C,J,ha,function(){var Y={era:C};M.eraCache[C]||(M.eraCache[C]=[Ra.utc(-40,1,1),Ra.utc(2017,1,1)].map(function(ma){return M.extract(ma,Y,"era")}));return M.eraCache[C]})};K.extract=function(C,J,M){return(C=this.dtFormatter(C,J).formatToParts().find(function(Y){return Y.type.toLowerCase()===
M}))?C.value:null};K.numberFormatter=function(C){void 0===C&&(C={});return new id(this.intl,C.forceSimple||this.fastNumbers,C)};K.dtFormatter=function(C,J){void 0===J&&(J={});return new jd(C,this.intl,J)};K.relFormatter=function(C){void 0===C&&(C={});return new kd(this.intl,this.isEnglish(),C)};K.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};K.equals=function(C){return this.locale===
C.locale&&this.numberingSystem===C.numberingSystem&&this.outputCalendar===C.outputCalendar};a(I,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var C=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=C}return this.fastNumbersCached}}]);return I}(),Lc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,
Mc=RegExp(""+Qb.source+Lc.source+"?"),Rb=RegExp("(?:T"+Mc.source+")?"),ld=pa("weekYear","weekNumber","weekDay"),md=pa("year","ordinal"),Nc=RegExp(Qb.source+" ?(?:"+Lc.source+"|("+Cc.source+"))?"),nd=RegExp("(?: "+Nc.source+")?"),od=RegExp("^T?"+Qb.source+"$"),pd=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Vc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},
qd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,rd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,sd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,td=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,
ud=Z(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Rb),vd=Z(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Rb),wd=Z(/(\d{4})-?(\d{3})/,Rb),xd=Z(Mc),yd=fa(T,da,na),zd=fa(ld,da,na),Ad=fa(md,da,na),Bd=fa(da,na),Cd=fa(da),Dd=Z(/(\d{4})-(\d\d)-(\d\d)/,nd),Ed=Z(Nc),Fd=fa(T,da,na,ja),Gd=fa(da,na,ja),Oc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},
seconds:{milliseconds:1E3}},Hd=b({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Oc),Id=b({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,
days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Oc),lb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Wc=lb.slice(0).reverse(),Xa=function(){function I(C){var J="longterm"===C.conversionAccuracy||!1;this.values=C.values;this.loc=C.loc||Ua.create();this.conversionAccuracy=J?"longterm":"casual";this.invalid=C.invalid||
null;this.matrix=J?Id:Hd;this.isLuxonDuration=!0}I.fromMillis=function(C,J){return I.fromObject({milliseconds:C},J)};I.fromObject=function(C,J){void 0===J&&(J={});if(null==C||"object"!==typeof C)throw new $a("Duration.fromObject: argument expected to be an object, got "+(null===C?"null":typeof C));return new I({values:ea(C,I.normalizeUnit),loc:Ua.fromObject(J),conversionAccuracy:J.conversionAccuracy})};I.fromISO=function(C,J){var M=ra(C,[pd,N])[0];return M?I.fromObject(M,J):I.invalid("unparsable",
'the input "'+C+"\" can't be parsed as ISO 8601")};I.fromISOTime=function(C,J){var M=ra(C,[od,Cd])[0];return M?I.fromObject(M,J):I.invalid("unparsable",'the input "'+C+"\" can't be parsed as ISO 8601")};I.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the Duration is invalid");var M=C instanceof cb?C:new cb(C,J);if(Sa.throwOnInvalid)throw new bd(M);return new I({invalid:M})};I.normalizeUnit=function(C){var J={year:"years",years:"years",quarter:"quarters",quarters:"quarters",
month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[C?C.toLowerCase():C];if(!J)throw new dc(C);return J};I.isDuration=function(C){return C&&C.isLuxonDuration||!1};var K=I.prototype;K.toFormat=function(C,J){void 0===J&&(J={});var M=b({},J,{floor:!1!==J.round&&!1!==J.floor});return this.isValid?fb.create(this.loc,M).formatDurationFromString(this,
C):"Invalid Duration"};K.toObject=function(){return this.isValid?b({},this.values):{}};K.toISO=function(){if(!this.isValid)return null;var C="P";0!==this.years&&(C+=this.years+"Y");if(0!==this.months||0!==this.quarters)C+=this.months+3*this.quarters+"M";0!==this.weeks&&(C+=this.weeks+"W");0!==this.days&&(C+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)C+="T";0!==this.hours&&(C+=this.hours+"H");0!==this.minutes&&(C+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)C+=G(this.seconds+this.milliseconds/1E3,3)+"S";"P"===C&&(C+="T0S");return C};K.toISOTime=function(C){void 0===C&&(C={});if(!this.isValid)return null;var J=this.toMillis();if(0>J||864E5<=J)return null;C=b({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},C);J=this.shiftTo("hours","minutes","seconds","milliseconds");var M="basic"===C.format?"hhmm":"hh:mm";C.suppressSeconds&&0===J.seconds&&0===J.milliseconds||(M+="basic"===C.format?"ss":":ss",C.suppressMilliseconds&&
0===J.milliseconds||(M+=".SSS"));J=J.toFormat(M);C.includePrefix&&(J="T"+J);return J};K.toJSON=function(){return this.toISO()};K.toString=function(){return this.toISO()};K.toMillis=function(){return this.as("milliseconds")};K.valueOf=function(){return this.toMillis()};K.plus=function(C){if(!this.isValid)return this;C=Da(C);for(var J={},M=m(lb),Y;!(Y=M()).done;)if(Y=Y.value,z(C.values,Y)||z(this.values,Y))J[Y]=C.get(Y)+this.get(Y);return za(this,{values:J},!0)};K.minus=function(C){if(!this.isValid)return this;
C=Da(C);return this.plus(C.negate())};K.mapUnits=function(C){if(!this.isValid)return this;for(var J={},M=0,Y=Object.keys(this.values);M<Y.length;M++){var ma=Y[M];J[ma]=ca(C(this.values[ma],ma))}return za(this,{values:J},!0)};K.get=function(C){return this[I.normalizeUnit(C)]};K.set=function(C){if(!this.isValid)return this;C=b({},this.values,ea(C,I.normalizeUnit));return za(this,{values:C})};K.reconfigure=function(C){var J=void 0===C?{}:C;C=J.conversionAccuracy;J={loc:this.loc.clone({locale:J.locale,
numberingSystem:J.numberingSystem})};C&&(J.conversionAccuracy=C);return za(this,J)};K.as=function(C){return this.isValid?this.shiftTo(C).get(C):NaN};K.normalize=function(){if(!this.isValid)return this;var C=this.toObject();Ha(this.matrix,C);return za(this,{values:C},!0)};K.shiftTo=function(){for(var C=arguments.length,J=Array(C),M=0;M<C;M++)J[M]=arguments[M];if(!this.isValid||0===J.length)return this;J=J.map(function(bb){return I.normalizeUnit(bb)});C={};M={};for(var Y=this.toObject(),ma,sa=m(lb),
ua;!(ua=sa()).done;)if(ua=ua.value,0<=J.indexOf(ua)){ma=ua;var ya=0,Ba;for(Ba in M)ya+=this.matrix[Ba][ua]*M[Ba],M[Ba]=0;p(Y[ua])&&(ya+=Y[ua]);var Ma=Math.trunc(ya);C[ua]=Ma;M[ua]=ya-Ma;for(var Fa in Y)lb.indexOf(Fa)>lb.indexOf(ua)&&Ca(this.matrix,Y,Fa,C,ua)}else p(Y[ua])&&(M[ua]=Y[ua]);for(var La in M)0!==M[La]&&(C[ma]+=La===ma?M[La]:M[La]/this.matrix[ma][La]);return za(this,{values:C},!0).normalize()};K.negate=function(){if(!this.isValid)return this;for(var C={},J=0,M=Object.keys(this.values);J<
M.length;J++){var Y=M[J];C[Y]=-this.values[Y]}return za(this,{values:C},!0)};K.equals=function(C){if(!this.isValid||!C.isValid||!this.loc.equals(C.loc))return!1;for(var J=m(lb),M;!(M=J()).done;){var Y=M.value;M=this.values[Y];Y=C.values[Y];M=void 0===M||0===M?void 0===Y||0===Y:M===Y;if(!M)return!1}return!0};a(I,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?
this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",
get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return I}(),rb=function(){function I(C){this.s=C.start;this.e=C.end;this.invalid=C.invalid||null;this.isLuxonInterval=
!0}I.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the Interval is invalid");var M=C instanceof cb?C:new cb(C,J);if(Sa.throwOnInvalid)throw new ad(M);return new I({invalid:M})};I.fromDateTimes=function(C,J){var M=qb(C),Y=qb(J);var ma=M&&M.isValid?Y&&Y.isValid?Y<M?rb.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+M.toISO()+" and end\x3d"+Y.toISO()):null:rb.invalid("missing or invalid end"):rb.invalid("missing or invalid start");
return null==ma?new I({start:M,end:Y}):ma};I.after=function(C,J){var M=Da(J),Y=qb(C);return I.fromDateTimes(Y,Y.plus(M))};I.before=function(C,J){var M=Da(J),Y=qb(C);return I.fromDateTimes(Y.minus(M),Y)};I.fromISO=function(C,J){var M=(C||"").split("/",2),Y=M[0];M=M[1];if(Y&&M){try{var ma=Ra.fromISO(Y,J);var sa=ma.isValid}catch(Ba){sa=!1}try{var ua=Ra.fromISO(M,J);var ya=ua.isValid}catch(Ba){ya=!1}if(sa&&ya)return I.fromDateTimes(ma,ua);if(sa){if(ua=Xa.fromISO(M,J),ua.isValid)return I.after(ma,ua)}else if(ya&&
(ma=Xa.fromISO(Y,J),ma.isValid))return I.before(ua,ma)}return I.invalid("unparsable",'the input "'+C+"\" can't be parsed as ISO 8601")};I.isInterval=function(C){return C&&C.isLuxonInterval||!1};var K=I.prototype;K.length=function(C){void 0===C&&(C="milliseconds");return this.isValid?this.toDuration.apply(this,[C]).get(C):NaN};K.count=function(C){void 0===C&&(C="milliseconds");if(!this.isValid)return NaN;var J=this.start.startOf(C),M=this.end.startOf(C);return Math.floor(M.diff(J,C).get(C))+1};K.hasSame=
function(C){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,C):!1};K.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};K.isAfter=function(C){return this.isValid?this.s>C:!1};K.isBefore=function(C){return this.isValid?this.e<=C:!1};K.contains=function(C){return this.isValid?this.s<=C&&this.e>C:!1};K.set=function(C){C=void 0===C?{}:C;return this.isValid?I.fromDateTimes(C.start||this.s,C.end||this.e):this};K.splitAt=function(){var C=this;if(!this.isValid)return[];for(var J=
arguments.length,M=Array(J),Y=0;Y<J;Y++)M[Y]=arguments[Y];J=M.map(qb).filter(function(ua){return C.contains(ua)}).sort();M=[];Y=this.s;for(var ma=0;Y<this.e;){var sa=J[ma]||this.e;sa=+sa>+this.e?this.e:sa;M.push(I.fromDateTimes(Y,sa));Y=sa;ma+=1}return M};K.splitBy=function(C){C=Da(C);if(!this.isValid||!C.isValid||0===C.as("milliseconds"))return[];for(var J=this.s,M=1,Y,ma=[];J<this.e;)Y=this.start.plus(C.mapUnits(function(sa){return sa*M})),Y=+Y>+this.e?this.e:Y,ma.push(I.fromDateTimes(J,Y)),J=Y,
M+=1;return ma};K.divideEqually=function(C){return this.isValid?this.splitBy(this.length()/C).slice(0,C):[]};K.overlaps=function(C){return this.e>C.s&&this.s<C.e};K.abutsStart=function(C){return this.isValid?+this.e===+C.s:!1};K.abutsEnd=function(C){return this.isValid?+C.e===+this.s:!1};K.engulfs=function(C){return this.isValid?this.s<=C.s&&this.e>=C.e:!1};K.equals=function(C){return this.isValid&&C.isValid?this.s.equals(C.s)&&this.e.equals(C.e):!1};K.intersection=function(C){if(!this.isValid)return this;
var J=this.s>C.s?this.s:C.s;C=this.e<C.e?this.e:C.e;return J>=C?null:I.fromDateTimes(J,C)};K.union=function(C){return this.isValid?I.fromDateTimes(this.s<C.s?this.s:C.s,this.e>C.e?this.e:C.e):this};I.merge=function(C){var J=C.sort(function(M,Y){return M.s-Y.s}).reduce(function(M,Y){var ma=M[0],sa=M[1];return sa?sa.overlaps(Y)||sa.abutsStart(Y)?[ma,sa.union(Y)]:[ma.concat([sa]),Y]:[ma,Y]},[[],null]);C=J[0];(J=J[1])&&C.push(J);return C};I.xor=function(C){var J,M=null,Y=0,ma=[];C=C.map(function(sa){return[{time:sa.s,
type:"s"},{time:sa.e,type:"e"}]});C=(J=Array.prototype).concat.apply(J,C).sort(function(sa,ua){return sa.time-ua.time});for(J=m(C);!(C=J()).done;)C=C.value,Y+="s"===C.type?1:-1,1===Y?M=C.time:(M&&+M!==+C.time&&ma.push(I.fromDateTimes(M,C.time)),M=null);return I.merge(ma)};K.difference=function(){for(var C=this,J=arguments.length,M=Array(J),Y=0;Y<J;Y++)M[Y]=arguments[Y];return I.xor([this].concat(M)).map(function(ma){return C.intersection(ma)}).filter(function(ma){return ma&&!ma.isEmpty()})};K.toString=
function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};K.toISO=function(C){return this.isValid?this.s.toISO(C)+"/"+this.e.toISO(C):"Invalid Interval"};K.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};K.toISOTime=function(C){return this.isValid?this.s.toISOTime(C)+"/"+this.e.toISOTime(C):"Invalid Interval"};K.toFormat=function(C,J){var M=(void 0===J?{}:J).separator;M=void 0===M?" \u2013 ":M;return this.isValid?
""+this.s.toFormat(C)+M+this.e.toFormat(C):"Invalid Interval"};K.toDuration=function(C,J){return this.isValid?this.e.diff(this.s,C,J):Xa.invalid(this.invalidReason)};K.mapEndpoints=function(C){return I.fromDateTimes(C(this.s),C(this.e))};a(I,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:
null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return I}(),sb=function(){function I(){}I.hasDST=function(K){void 0===K&&(K=Sa.defaultZone);var C=Ra.now().setZone(K).set({month:12});return!K.isUniversal&&C.offset!==C.set({month:6}).offset};I.isValidIANAZone=function(K){return db.isValidSpecifier(K)&&db.isValidZone(K)};I.normalizeZone=function(K){return ka(K,Sa.defaultZone)};I.months=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,M=
J.locale,Y=J.numberingSystem,ma=J.locObj;J=J.outputCalendar;return((void 0===ma?null:ma)||Ua.create(void 0===M?null:M,void 0===Y?null:Y,void 0===J?"gregory":J)).months(K)};I.monthsFormat=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,M=J.locale,Y=J.numberingSystem,ma=J.locObj;J=J.outputCalendar;return((void 0===ma?null:ma)||Ua.create(void 0===M?null:M,void 0===Y?null:Y,void 0===J?"gregory":J)).months(K,!0)};I.weekdays=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,M=J.locale,
Y=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Ua.create(void 0===M?null:M,void 0===Y?null:Y,null)).weekdays(K)};I.weekdaysFormat=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,M=J.locale,Y=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Ua.create(void 0===M?null:M,void 0===Y?null:Y,null)).weekdays(K,!0)};I.meridiems=function(K){K=(void 0===K?{}:K).locale;return Ua.create(void 0===K?null:K).meridiems()};I.eras=function(K,C){void 0===K&&(K="short");var J=(void 0===
C?{}:C).locale;return Ua.create(void 0===J?null:J,null,"gregory").eras(K)};I.features=function(){return{relative:r()}};return I}(),Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",
mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Vb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xc=Eb.hanidec.replace(/[\[|\]]/g,
"").split(""),Wb="( |"+String.fromCharCode(160)+")",Fb=new RegExp(Wb,"g"),Zc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Gb=null,Jb=[0,31,59,90,120,151,181,212,243,273,304,334],Ib=[0,31,60,91,121,152,182,213,244,274,305,335],gc={month:1,
day:1,hour:0,minute:0,second:0,millisecond:0},Jd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Kd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fc="year month day hour minute second millisecond".split(" "),Ld="weekYear weekNumber weekday hour minute second millisecond".split(" "),Md="year ordinal hour minute second millisecond".split(" "),Ra=function(){function I(C){var J=C.zone||Sa.defaultZone,M=C.invalid||(Number.isNaN(C.ts)?new cb("invalid input"):null)||(J.isValid?null:
xb(J));this.ts=n(C.ts)?Sa.now():C.ts;var Y=null,ma=null;M||(C.old&&C.old.ts===this.ts&&C.old.zone.equals(J)?(ma=[C.old.c,C.old.o],Y=ma[0],ma=ma[1]):(ma=J.offset(this.ts),Y=$b(this.ts,ma),Y=(M=Number.isNaN(Y.year)?new cb("invalid input"):null)?null:Y,ma=M?null:ma));this._zone=J;this.loc=C.loc||Ua.create();this.invalid=M;this.weekData=null;this.c=Y;this.o=ma;this.isLuxonDateTime=!0}I.now=function(){return new I({})};I.local=function(){var C=ic(arguments),J=C[1];return ec({year:J[0],month:J[1],day:J[2],
hour:J[3],minute:J[4],second:J[5],millisecond:J[6]},C[0])};I.utc=function(){var C=ic(arguments),J=C[0],M=C[1];C=M[0];var Y=M[1],ma=M[2],sa=M[3],ua=M[4],ya=M[5];M=M[6];J.zone=ab.utcInstance;return ec({year:C,month:Y,day:ma,hour:sa,minute:ua,second:ya,millisecond:M},J)};I.fromJSDate=function(C,J){void 0===J&&(J={});var M="[object Date]"===Object.prototype.toString.call(C)?C.valueOf():NaN;if(Number.isNaN(M))return I.invalid("invalid input");var Y=ka(J.zone,Sa.defaultZone);return Y.isValid?new I({ts:M,
zone:Y,loc:Ua.fromObject(J)}):I.invalid(xb(Y))};I.fromMillis=function(C,J){void 0===J&&(J={});if(p(C))return-864E13>C||864E13<C?I.invalid("Timestamp out of range"):new I({ts:C,zone:ka(J.zone,Sa.defaultZone),loc:Ua.fromObject(J)});throw new $a("fromMillis requires a numerical input, but received a "+typeof C+" with value "+C);};I.fromSeconds=function(C,J){void 0===J&&(J={});if(p(C))return new I({ts:1E3*C,zone:ka(J.zone,Sa.defaultZone),loc:Ua.fromObject(J)});throw new $a("fromSeconds requires a numerical input");
};I.fromObject=function(C,J){void 0===J&&(J={});C=C||{};var M=ka(J.zone,Sa.defaultZone);if(!M.isValid)return I.invalid(xb(M));var Y=Sa.now(),ma=M.offset(Y),sa=ea(C,cc),ua=!n(sa.ordinal),ya=!n(sa.year),Ba=!n(sa.month)||!n(sa.day);ya=ya||Ba;var Ma=sa.weekYear||sa.weekNumber,Fa=Ua.fromObject(J);if((ya||ua)&&Ma)throw new mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ba&&ua)throw new mb("Can't mix ordinal dates with month/day");Ba=Ma||sa.weekday&&!ya;Ma=$b(Y,ma);if(Ba){var La=
Ld;Y=Jd;Ma=gb(Ma)}else ua?(La=Md,Y=Kd,Ma=nb(Ma)):(La=fc,Y=gc);var bb=!1;La=m(La);for(var Za;!(Za=La()).done;)Za=Za.value,n(sa[Za])?sa[Za]=bb?Y[Za]:Ma[Za]:bb=!0;Ba?(Y=t(sa.weekYear),Ma=v(sa.weekNumber,1,H(sa.weekYear)),bb=v(sa.weekday,1,7),Y=Y?Ma?bb?!1:Ya("weekday",sa.weekday):Ya("week",sa.week):Ya("weekYear",sa.weekYear)):ua?(Y=t(sa.year),Ma=v(sa.ordinal,1,B(sa.year)?366:365),Y=Y?Ma?!1:Ya("ordinal",sa.ordinal):Ya("year",sa.year)):Y=Xb(sa);if(Y=Y||Yb(sa))return I.invalid(Y);ua=Ba?wb(sa):ua?Ta(sa):
sa;ma=yb(ua,ma,M);M=new I({ts:ma[0],zone:M,o:ma[1],loc:Fa});return sa.weekday&&ya&&C.weekday!==M.weekday?I.invalid("mismatched weekday","you can't specify both a weekday of "+sa.weekday+" and a date of "+M.toISO()):M};I.fromISO=function(C,J){void 0===J&&(J={});var M=ra(C,[ud,yd],[vd,zd],[wd,Ad],[xd,Bd]);return pb(M[0],M[1],J,"ISO 8601",C)};I.fromRFC2822=function(C,J){void 0===J&&(J={});var M=ra(C.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[qd,ba]);return pb(M[0],M[1],J,"RFC 2822",
C)};I.fromHTTP=function(C,J){void 0===J&&(J={});var M=ra(C,[rd,ia],[sd,ia],[td,qa]);return pb(M[0],M[1],J,"HTTP",J)};I.fromFormat=function(C,J,M){void 0===M&&(M={});if(n(C)||n(J))throw new $a("fromFormat requires an input string and a format");var Y=M,ma=Y.locale;Y=Y.numberingSystem;ma=Ua.fromOpts({locale:void 0===ma?null:ma,numberingSystem:void 0===Y?null:Y,defaultToEN:!0});ma=tb(ma,C,J);var sa=[ma.result,ma.zone,ma.invalidReason];ma=sa[0];Y=sa[1];return(sa=sa[2])?I.invalid(sa):pb(ma,Y,M,"format "+
J,C)};I.fromString=function(C,J,M){void 0===M&&(M={});return I.fromFormat(C,J,M)};I.fromSQL=function(C,J){void 0===J&&(J={});var M=ra(C,[Dd,Fd],[Ed,Gd]);return pb(M[0],M[1],J,"SQL",C)};I.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the DateTime is invalid");var M=C instanceof cb?C:new cb(C,J);if(Sa.throwOnInvalid)throw new $c(M);return new I({invalid:M})};I.isDateTime=function(C){return C&&C.isLuxonDateTime||!1};var K=I.prototype;K.get=function(C){return this[C]};
K.resolvedLocaleOptions=function(C){void 0===C&&(C={});C=fb.create(this.loc.clone(C),C).resolvedOptions(this);return{locale:C.locale,numberingSystem:C.numberingSystem,outputCalendar:C.calendar}};K.toUTC=function(C,J){void 0===C&&(C=0);void 0===J&&(J={});return this.setZone(ab.instance(C),J)};K.toLocal=function(){return this.setZone(Sa.defaultZone)};K.setZone=function(C,J){var M=void 0===J?{}:J,Y=M.keepLocalTime;Y=void 0===Y?!1:Y;M=M.keepCalendarTime;M=void 0===M?!1:M;C=ka(C,Sa.defaultZone);if(C.equals(this.zone))return this;
if(C.isValid){var ma=this.ts;if(Y||M)Y=C.offset(this.ts),M=this.toObject(),ma=yb(M,Y,C)[0];return ob(this,{ts:ma,zone:C})}return I.invalid(xb(C))};K.reconfigure=function(C){C=void 0===C?{}:C;C=this.loc.clone({locale:C.locale,numberingSystem:C.numberingSystem,outputCalendar:C.outputCalendar});return ob(this,{loc:C})};K.setLocale=function(C){return this.reconfigure({locale:C})};K.set=function(C){if(!this.isValid)return this;C=ea(C,cc);var J=!n(C.weekYear)||!n(C.weekNumber)||!n(C.weekday),M=!n(C.ordinal),
Y=!n(C.year),ma=!n(C.month)||!n(C.day),sa=C.weekYear||C.weekNumber;if((Y||ma||M)&&sa)throw new mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&M)throw new mb("Can't mix ordinal dates with month/day");J?J=wb(b({},gb(this.c),C)):n(C.ordinal)?(J=b({},this.toObject(),C),n(C.day)&&(J.day=Math.min(E(J.year,J.month),J.day))):J=Ta(b({},nb(this.c),C));C=yb(J,this.o,this.zone);return ob(this,{ts:C[0],o:C[1]})};K.plus=function(C){if(!this.isValid)return this;C=Da(C);return ob(this,
ac(this,C))};K.minus=function(C){if(!this.isValid)return this;C=Da(C).negate();return ob(this,ac(this,C))};K.startOf=function(C){if(!this.isValid)return this;var J={};C=Xa.normalizeUnit(C);switch(C){case "years":J.month=1;case "quarters":case "months":J.day=1;case "weeks":case "days":J.hour=0;case "hours":J.minute=0;case "minutes":J.second=0;case "seconds":J.millisecond=0}"weeks"===C&&(J.weekday=1);"quarters"===C&&(J.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(J)};K.endOf=function(C){var J;
return this.isValid?this.plus((J={},J[C]=1,J)).startOf(C).minus(1):this};K.toFormat=function(C,J){void 0===J&&(J={});return this.isValid?fb.create(this.loc.redefaultToEN(J)).formatDateTimeFromString(this,C):"Invalid DateTime"};K.toLocaleString=function(C,J){void 0===C&&(C=Lb);void 0===J&&(J={});return this.isValid?fb.create(this.loc.clone(J),C).formatDateTime(this):"Invalid DateTime"};K.toLocaleParts=function(C){void 0===C&&(C={});return this.isValid?fb.create(this.loc.clone(C),C).formatDateTimeParts(this):
[]};K.toISO=function(C){void 0===C&&(C={});return this.isValid?this.toISODate(C)+"T"+this.toISOTime(C):null};K.toISODate=function(C){C=(void 0===C?{}:C).format;C="basic"===(void 0===C?"extended":C)?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(C="+"+C);return kb(this,C)};K.toISOWeekDate=function(){return kb(this,"kkkk-'W'WW-c")};K.toISOTime=function(C){var J=void 0===C?{}:C;C=J.suppressMilliseconds;var M=J.suppressSeconds,Y=J.includeOffset,ma=J.includePrefix;J=J.format;return bc(this,{suppressSeconds:void 0===
M?!1:M,suppressMilliseconds:void 0===C?!1:C,includeOffset:void 0===Y?!0:Y,includePrefix:void 0===ma?!1:ma,format:void 0===J?"extended":J})};K.toRFC2822=function(){return kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};K.toHTTP=function(){return kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};K.toSQLDate=function(){return kb(this,"yyyy-MM-dd")};K.toSQLTime=function(C){var J=void 0===C?{}:C;C=J.includeOffset;J=J.includeZone;return bc(this,{includeOffset:void 0===C?!0:C,includeZone:void 0===J?!1:J,
spaceZone:!0})};K.toSQL=function(C){void 0===C&&(C={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(C):null};K.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};K.valueOf=function(){return this.toMillis()};K.toMillis=function(){return this.isValid?this.ts:NaN};K.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};K.toJSON=function(){return this.toISO()};K.toBSON=function(){return this.toJSDate()};K.toObject=function(C){void 0===C&&(C={});if(!this.isValid)return{};
var J=b({},this.c);C.includeConfig&&(J.outputCalendar=this.outputCalendar,J.numberingSystem=this.loc.numberingSystem,J.locale=this.loc.locale);return J};K.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};K.diff=function(C,J,M){void 0===J&&(J="milliseconds");void 0===M&&(M={});if(!this.isValid||!C.isValid)return Xa.invalid("created by diffing an invalid DateTime");M=b({locale:this.locale,numberingSystem:this.numberingSystem},M);var Y=(Array.isArray(J)?J:[J]).map(Xa.normalizeUnit);J=C.valueOf()>
this.valueOf();C=Ga(J?this:C,J?C:this,Y,M);return J?C.negate():C};K.diffNow=function(C,J){void 0===C&&(C="milliseconds");void 0===J&&(J={});return this.diff(I.now(),C,J)};K.until=function(C){return this.isValid?rb.fromDateTimes(this,C):this};K.hasSame=function(C,J){if(!this.isValid)return!1;var M=C.valueOf(),Y=this.setZone(C.zone,{keepLocalTime:!0});return Y.startOf(J)<=M&&M<=Y.endOf(J)};K.equals=function(C){return this.isValid&&C.isValid&&this.valueOf()===C.valueOf()&&this.zone.equals(C.zone)&&this.loc.equals(C.loc)};
K.toRelative=function(C){void 0===C&&(C={});if(!this.isValid)return null;var J=C.base||I.fromObject({},{zone:this.zone}),M=C.padding?this<J?-C.padding:C.padding:0,Y="years months days hours minutes seconds".split(" "),ma=C.unit;Array.isArray(C.unit)&&(Y=C.unit,ma=void 0);return hc(J,this.plus(M),b({},C,{numeric:"always",units:Y,unit:ma}))};K.toRelativeCalendar=function(C){void 0===C&&(C={});return this.isValid?hc(C.base||I.fromObject({},{zone:this.zone}),this,b({},C,{numeric:"auto",units:["years",
"months","days"],calendary:!0})):null};I.min=function(){for(var C=arguments.length,J=Array(C),M=0;M<C;M++)J[M]=arguments[M];if(!J.every(I.isDateTime))throw new $a("min requires all arguments be DateTimes");return y(J,function(Y){return Y.valueOf()},Math.min)};I.max=function(){for(var C=arguments.length,J=Array(C),M=0;M<C;M++)J[M]=arguments[M];if(!J.every(I.isDateTime))throw new $a("max requires all arguments be DateTimes");return y(J,function(Y){return Y.valueOf()},Math.max)};I.fromFormatExplain=
function(C,J,M){void 0===M&&(M={});var Y=M;M=Y.locale;Y=Y.numberingSystem;M=Ua.fromOpts({locale:void 0===M?null:M,numberingSystem:void 0===Y?null:Y,defaultToEN:!0});return tb(M,C,J)};I.fromStringExplain=function(C,J,M){void 0===M&&(M={});return I.fromFormatExplain(C,J,M)};a(I,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:
null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/
3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Kb(this).weekYear:NaN}},{key:"weekNumber",
get:function(){return this.isValid?Kb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Kb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?nb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?sb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?sb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?sb.weekdays("short",
{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?sb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",
get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return B(this.year)}},{key:"daysInMonth",get:function(){return E(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?B(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?H(this.weekYear):NaN}}],[{key:"DATE_SHORT",
get:function(){return Lb}},{key:"DATE_MED",get:function(){return jc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return cd}},{key:"DATE_FULL",get:function(){return kc}},{key:"DATE_HUGE",get:function(){return lc}},{key:"TIME_SIMPLE",get:function(){return mc}},{key:"TIME_WITH_SECONDS",get:function(){return nc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return oc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return pc}},{key:"TIME_24_SIMPLE",get:function(){return qc}},{key:"TIME_24_WITH_SECONDS",
get:function(){return rc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return sc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return tc}},{key:"DATETIME_SHORT",get:function(){return uc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return vc}},{key:"DATETIME_MED",get:function(){return wc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return xc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return dd}},{key:"DATETIME_FULL",get:function(){return yc}},{key:"DATETIME_FULL_WITH_SECONDS",
get:function(){return zc}},{key:"DATETIME_HUGE",get:function(){return Ac}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return I}();D.DateTime=Ra;D.Duration=Xa;D.FixedOffsetZone=ab;D.IANAZone=db;D.Info=sb;D.Interval=rb;D.InvalidZone=Cb;D.Settings=Sa;D.SystemZone=Ec;D.VERSION="2.0.2";D.Zone=jb;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(D,q,a){a.prototype.repurposeFromGraphicLikeObject=
function(b,d,h){void 0===h&&(h=null);null===d&&(d={});this.attributes=d;this.geometry=b;this._datesfixed=(this._layer=h)?!1:!0};return a})},"esri/arcade/Feature":function(){var D=this&&this.__assign||function(){D=Object.assign||function(q){for(var a,b=1,d=arguments.length;b<d;b++){a=arguments[b];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(q[h]=a[h])}return q};return D.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(q,a,b,d,h,f,g,c,e,k){return function(){function l(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}l.createFromGraphic=function(m){var n=new l;n._geometry=m.geometry?m.geometry:null;n.attributes=void 0===m.attributes?{}:null===m.attributes?{}:m.attributes;m._sourceLayer?(n._layer=m._sourceLayer,n._datesfixed=!1):m._layer?(n._layer=m._layer,n._datesfixed=!1):m.layer&&
"fields"in m.layer?(n._layer=m.layer,n._datesfixed=!1):m.sourceLayer&&"fields"in m.sourceLayer&&(n._layer=m.sourceLayer,n._datesfixed=!1);return n};l.createFromArcadeFeature=function(m){var n=new l;n._datesfixed=m._datesfixed;n.attributes=m.attributes;n._geometry=m._geometry;m._layer&&(n._layer=m._layer);return n};l.createFromArcadeDictionary=function(m){var n=new l;n.attributes=m.field("attributes");null!==n.attributes?n.attributes instanceof b?(n.attributes=n.attributes.attributes,null===n.attributes&&
(n.attributes={})):n.attributes={}:n.attributes={};n._geometry=m.field("geometry");null!==n._geometry&&(n._geometry instanceof b?n._geometry=l.parseGeometryFromDictionary(n._geometry):n._geometry instanceof g||(n._geometry=null));return n};l.createFromGraphicLikeObject=function(m,n,p){void 0===p&&(p=null);var t=new l;null===n&&(n={});t.attributes=n;t._geometry=m?m:null;t._layer=p;t._layer&&(t._datesfixed=!1);t._adapter=null;return t};l.prototype.repurposeFromGraphicLikeObject=function(m,n,p){void 0===
p&&(p=null);null===n&&(n={});this.attributes=n;this._geometry=m?m:null;this._datesfixed=(this._layer=p)?!1:!0};l.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var m="";!1===this._datesfixed&&this._fixDates();for(var n in this.attributes){""!==m&&(m+=",");var p=this.attributes[n];null==p?m+=JSON.stringify(n)+":null":h.isBoolean(p)||h.isNumber(p)||h.isString(p)?m+=JSON.stringify(n)+":"+JSON.stringify(p):p instanceof g?m+=JSON.stringify(n)+":"+h.toStringExplicit(p):
p instanceof d?m+=JSON.stringify(n)+":"+h.toStringExplicit(p):p instanceof Array?m+=JSON.stringify(n)+":"+h.toStringExplicit(p):p instanceof Date?m+=JSON.stringify(n)+":"+JSON.stringify(p):null!==p&&"object"===typeof p&&void 0!==p.castToText&&(m+=JSON.stringify(n)+":"+p.castToText())}return'{"geometry":'+(null===this.geometry()?"null":h.toStringExplicit(this.geometry()))+',"attributes":{'+m+"}}"};l.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{for(var m=[],n=0;n<this._layer.fields.length;n++){var p=this._layer.fields[n];"date"!==p.type&&"esriFieldTypeDate"!==p.type||m.push(p.name)}this._datefields=m;0<m.length&&this._fixDateFields(m)}this._datesfixed=!0};l.prototype._fixDateFields=function(m){this.attributes=D({},this.attributes);for(var n=0;n<m.length;n++){var p=this.attributes[m[n]];if(null!==p)if(void 0===p)for(var t in this.attributes){if(t.toLowerCase()===m[n].toLowerCase()){p=this.attributes[t];null===p||p instanceof Date||(this.attributes[t]=
new Date(p));break}}else p instanceof Date||(this.attributes[m[n]]=new Date(p))}};l.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof g||(this._geometry=e.fromJson(this._geometry));return this._geometry};l.prototype.field=function(m){if(this._adapter)return this._adapter.field(m);!1===this._datesfixed&&this._fixDates();var n=this.attributes[m];if(void 0!==n)return n;n=m.toLowerCase();for(var p in this.attributes)if(p.toLowerCase()===
n)return this.attributes[p];if(this._hasFieldDefinition(n))return null;throw Error("Field not Found : "+m);};l.prototype._hasFieldDefinition=function(m){if(null===this._layer)return!1;for(var n=0;n<this._layer.fields.length;n++)if(this._layer.fields[n].name.toLowerCase()===m)return!0;return!1};l.prototype._field=function(m){var n;if(this._adapter)return null!==(n=this._adapter.field(m))&&void 0!==n?n:null;!1===this._datesfixed&&this._fixDates();n=m.toLowerCase();m=this.attributes[m];if(void 0!==m)return m;
for(var p in this.attributes)if(p.toLowerCase()===n)return this.attributes[p];return null};l.prototype.setField=function(m,n){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(n))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(m,n);else{var p=m.toLowerCase();if(void 0===this.attributes[m])for(var t in this.attributes)if(t.toLowerCase()===p){this.attributes[t]=n;return}this.attributes[m]=n}};l.prototype.hasField=function(m){if(this._adapter)return this._adapter.hasField(m);
var n=m.toLowerCase();if(void 0!==this.attributes[m])return!0;for(var p in this.attributes)if(p.toLowerCase()===n)return!0;return this._hasFieldDefinition(n)?!0:!1};l.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var m=[],n={},p;for(p in this.attributes)m.push(p),n[p.toLowerCase()]=1;if(null!==this._layer)for(p=0;p<this._layer.fields.length;p++){var t=this._layer.fields[p];1!==n[t.name.toLowerCase()]&&m.push(t.name)}return m=m.sort()};l.parseGeometryFromDictionary=function(m){m=
l.convertDictionaryToJson(m,!0);void 0!==m.hasm&&(m.hasM=m.hasm,delete m.hasm);void 0!==m.hasz&&(m.hasZ=m.hasz,delete m.hasz);void 0!==m.spatialreference&&(m.spatialReference=m.spatialreference,delete m.spatialreference);void 0!==m.rings&&(m.rings=this.fixPathArrays(m.rings,!0===m.hasZ,!0===m.hasZ));void 0!==m.paths&&(m.paths=this.fixPathArrays(m.paths,!0===m.hasZ,!0===m.hasM));void 0!==m.points&&(m.points=this.fixPointArrays(m.points,!0===m.hasZ,!0===m.hasM));return e.fromJson(m)};l.fixPathArrays=
function(m,n,p){var t=[];if(m instanceof Array)for(var r=0;r<m.length;r++)t.push(this.fixPointArrays(m[r],n,p));else if(m instanceof d)for(r=0;r<m.length();r++)t.push(this.fixPointArrays(m.get(r),n,p));return t};l.fixPointArrays=function(m,n,p){var t=[];if(m instanceof Array)for(var r=0;r<m.length;r++){var y=m[r];y instanceof c?n&&p?t.push([y.x,y.y,y.z,y.m]):n?t.push([y.x,y.y,y.z]):p?t.push([y.x,y.y,y.m]):t.push([y.x,y.y]):y instanceof d?t.push(y.toArray()):t.push(y)}else if(m instanceof d)for(r=
0;r<m.length();r++)y=m.get(r),y instanceof c?n&&p?t.push([y.x,y.y,y.z,y.m]):n?t.push([y.x,y.y,y.z]):p?t.push([y.x,y.y,y.m]):t.push([y.x,y.y]):y instanceof d?t.push(y.toArray()):t.push(y);return t};l.convertDictionaryToJson=function(m,n){void 0===n&&(n=!1);var p={},t;for(t in m.attributes){var r=m.attributes[t];r instanceof b&&(r=l.convertDictionaryToJson(r));n?p[t.toLowerCase()]=r:p[t]=r}return p};l.parseAttributesFromDictionary=function(m){var n={},p;for(p in m.attributes){var t=m.attributes[p];
if(h.isSimpleType(t))n[p]=t;else throw Error("Illegal Argument");}return n};l.fromJson=function(m){var n=null;null!==m.geometry&&void 0!==m.geometry&&(n=e.fromJson(m.geometry));var p={};if(null!==m.attributes&&void 0!==m.attributes)for(var t in m.attributes){var r=m.attributes[t];if(null===r)p[t]=r;else if(h.isString(r)||h.isNumber(r)||h.isBoolean(r)||h.isDate(r))p[t]=r;else throw Error("Illegal Argument");}return l.createFromGraphicLikeObject(n,p,null)};l.prototype.fullDomain=function(m,n){return null!==
this._layer&&this._layer.fields?h.getDomain(m,this._layer,this,n):null};l.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(m){return{name:m.name,code:m.id}}):[]}:null:null};l.prototype.domainValueLookup=function(m,n,p){if(null===this._layer||!this._layer.fields)return null;p=h.getDomain(m,this._layer,this,p);if(void 0===n)try{n=this.field(m)}catch(t){return null}return h.getDomainValue(p,
n)};l.prototype.gdbVersion=function(){if(null===this._layer)return"";var m=this._layer.gdbVersion;return void 0===m?"":""===m&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":m};l.prototype.domainCodeLookup=function(m,n,p){if(null===this._layer||!this._layer.fields)return null;if(void 0===n){try{n=this.field(m)}catch(t){return null}return n}m=h.getDomain(m,this._layer,this,p);return h.getDomainCode(m,n)};l.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var m=[],n=0,p=this._layer.fields;n<p.length;n++)m.push(k.esriFieldToJson(p[n]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===k.layerGeometryEsriRestConstants[this._layer.geometryType]?"":k.layerGeometryEsriRestConstants[this._layer.geometryType],fields:m}};l.prototype.castAsJson=function(m){void 0===m&&(m=null);var n={attributes:{},geometry:!0===(null===m||void 0===m?void 0:m.keepGeometryType)?this.geometry():this.geometry().toJson()},
p;for(p in this.attributes){var t=this.attributes[p];void 0!==t&&(n.attributes[p]=h.castAsJson(t,m))}return n};l.prototype.castAsJsonAsync=function(m,n){void 0===m&&(m=null);void 0===n&&(n=null);return f.resolve(this.castAsJson(n))};return l}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,q,a,b,d,h,f,g,c){function e(n,p,t){var r=n.rings||n.paths,y,x;var z=0;for(y=r.length;z<y;z++){var v=
r[z];var w=0;for(x=v.length;w<x;w++){var u=v[w];if(0<w)A+=u[0],G+=u[1];else{var A=u[0];var G=u[1]}u[0]=p(A);u[1]=t(G)}}return n}var k={esriGeometryPoint:function(n,p,t){n.x=p(n.x);n.y=t(n.y);return n},esriGeometryPolyline:e,esriGeometryPolygon:e,esriGeometryEnvelope:function(n,p,t){n.xmin=p(n.xmin);n.ymin=t(n.ymin);n.xmax=p(n.xmax);n.ymax=t(n.ymax);return n},esriGeometryMultipoint:function(n,p,t){var r=n.points,y;var x=0;for(y=r.length;x<y;x++){var z=r[x];if(0<x)v+=z[0],w+=z[1];else{var v=z[0];var w=
z[1]}z[0]=p(v);z[1]=t(w)}return n}},l={esriGeometryPoint:function(n,p,t){n.x=p(n.x);n.y=t(n.y);return n}},m={createInstance:function(n,p){var t=new n;p&&b.mixin(t,p);return t},fromJson:function(n){if(void 0!==n.x&&void 0!==n.y)return new d(n);if(void 0!==n.paths)return new h(n);if(void 0!==n.rings)return new f(n);if(void 0!==n.points)return new g(n);if(void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax)return new c(n)},getJsonType:function(n){return n instanceof d?"esriGeometryPoint":
n instanceof h?"esriGeometryPolyline":n instanceof f?"esriGeometryPolygon":n instanceof c?"esriGeometryEnvelope":n instanceof g?"esriGeometryMultipoint":null},getGeometryType:function(n){return"esriGeometryPoint"===n?d:"esriGeometryPolyline"===n?h:"esriGeometryPolygon"===n?f:"esriGeometryEnvelope"===n?c:"esriGeometryMultipoint"===n?g:null},supportsLazyUnquantization:function(n){return"esriGeometryPoint"===n||"esriGeometryPolyline"===n||"esriGeometryPolygon"===n||"esriGeometryMultipoint"===n},unquantizeFunction:function(n,
p){if(n&&p){var t=p.translate[0],r=p.translate[1],y=p.scale[0],x=p.scale[1],z=function(u){return u*y+t},v=function(u){return r-u*x},w=k[n];return function(u){return u?w(u,z,v):null}}},unquantize:function(n,p,t){if(p=m.unquantizeFunction(p,t)){var r=n.length;for(t=0;t<r;t++)p(n[t].geometry)}},quantizeFunction:function(n,p){if(n&&"esriGeometryPoint"===n&&p){var t=p.translate[0],r=p.translate[1],y=p.scale[0],x=p.scale[1],z=function(u){return Math.round((u-t)/y)},v=function(u){return Math.round((r-u)/
x)},w=l[n];return function(u){return u?w(u,z,v):null}}},quantize:function(n,p,t){if(p=m.quantizeFunction(p,t)){var r=n.length;for(t=0;t<r;t++)p(n[t].geometry)}}};D.mixin(D.getObject("geometry",!0,a),m);return m})},"esri/arcade/featureset/support/shared":function(){var D=this&&this.__assign||function(){D=Object.assign||function(q){for(var a,b=1,d=arguments.length;b<d;b++){a=arguments[b];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(q[h]=a[h])}return q};return D.apply(this,arguments)};
define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(q,a,b,d,h){function f(c){var e=null;c.domain&&(e="range"===c.domain.type?{type:"range",range:[c.domain.minValue,c.domain.maxValue]}:{type:"codedValue",codedValues:c.domain.toJson().codedValues});return D(D({name:c.name,type:c.type,alias:c.alias},void 0!==c.length?{length:c.length}:{}),{editable:!0===c.editable,nullable:!0===c.nullable,domain:e})}function g(c){return c instanceof Date}
Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=
void 0;(function(c){c[c.Standardised=0]="Standardised";c[c.StandardisedNoInterval=1]="StandardisedNoInterval";c[c.SqlServer=2]="SqlServer";c[c.Oracle=3]="Oracle";c[c.Postgres=4]="Postgres";c[c.PGDB=5]="PGDB";c[c.FILEGDB=6]="FILEGDB";c[c.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(c){return new h(f(c))};a.esriFieldToJson=f;(function(c){c[c.InFeatureSet=0]="InFeatureSet";c[c.NotInFeatureSet=1]="NotInFeatureSet";c[c.Unknown=
2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(c){return"string"===typeof c||c instanceof String};a.isBoolean=function(c){return"boolean"===typeof c};a.isNumber=function(c){return"number"===typeof c};a.isArray=function(c){return c instanceof Array};a.isDate=g;a.equalityTest=function(c,e){return c===e?!0:g(c)&&g(e)?c.getTime()===e.getTime():!1};a.cloneAttributes=function(c){var e={},k;for(k in c)e[k]=c[k];return e};a.convertSquareUnitsToCode=function(c){if(void 0===c)return null;if("number"===
typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(c){if(null===c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.getExtent();case "point":return new d({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};a.convertLinearUnitsToCode=function(c){if(void 0===
c)return null;if("number"===typeof c||"number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(c,e){return c===e||"point"===c&&"esriGeometryPoint"===e||"polyline"===c&&"esriGeometryPolyline"===e||"polygon"===c&&"esriGeometryPolygon"===e||"extent"===c&&"esriGeometryEnvelope"===e||"multipoint"===c&&"esriGeometryMultipoint"===e||"point"===
e&&"esriGeometryPoint"===c||"polyline"===e&&"esriGeometryPolyline"===c||"polygon"===e&&"esriGeometryPolygon"===c||"extent"===e&&"esriGeometryEnvelope"===c||"multipoint"===e&&"esriGeometryMultipoint"===c?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(c){return function(e){c.reject(e)}};a.callback=function(c,e){return function(){try{c.apply(null,arguments)}catch(k){e.reject(k)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",
esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",
esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",
esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",
esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(c){switch(c){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(c,e){return b.create(function(k,l){var m=b.resolve(!0);c.reduce(function(n,p,t,r){return n.then(function(y){try{return e(y,p,t,r)}catch(x){return b.reject(x)}},function(y){return b.reject(y)})},
m).then(k,l)})};a.extractServiceUrl=function(c){if(void 0===c)return"";c=c.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");c=c.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return c=c.split("?")[0]};a.stableStringify=function(c,e){e||(e={});"function"===typeof e&&(e={cmp:e});var k="boolean"===typeof e.cycles?e.cycles:!1,l=e.cmp&&function(n){return function(p){return function(t,r){return n({key:t,value:p[t]},{key:r,value:p[r]})}}}(e.cmp),m=[];return function t(p){p&&p.toJson&&"function"===typeof p.toJson&&
(p=p.toJson());if(void 0!==p){if("number"===typeof p)return isFinite(p)?""+p:"null";if("object"!==typeof p)return JSON.stringify(p);var r;if(Array.isArray(p)){var y="[";for(r=0;r<p.length;r++)r&&(y+=","),y+=t(p[r])||"null";return y+"]"}if(null===p)return"null";if(-1!==m.indexOf(p)){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var x=m.push(p)-1,z=Object.keys(p).sort(l&&l(p));y="";for(r=0;r<z.length;r++){var v=z[r],w=t(p[v]);w&&(y&&(y+=","),y+=
JSON.stringify(v)+":"+w)}m.splice(x,1);return"{"+y+"}"}}(c)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(D,q,a,b,d,h,f){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(g){if(g&&q.isObject(g)&&(this.name=g.name,this.type=g.type,this.alias=g.alias,this.length=g.length,this.editable=g.editable,this.nullable=g.nullable,this.defaultValue=g.defaultValue,this.description=g.description?
JSON.parse(g.description):null,this.isViewOverride=!!g.isViewOverride,(g=g.domain)&&q.isObject(g)))switch(g.type){case "range":this.domain=new h(g);break;case "codedValue":this.domain=new f(g)}},toJson:function(){return d.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||
void 0})},toJSON:function(){return this.toJson()}});q.setObject("layers.Field",D,b);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,q,a,b,d,h){D=D([h],{declaredClass:"esri.layers.RangeDomain",constructor:function(f){f&&q.isObject(f)&&(this.minValue=f.range[0],this.maxValue=f.range[1])},toJson:function(){var f=this.inherited(arguments);f.range=[this.minValue,this.maxValue];return d.fixJson(f)}});
q.setObject("layers.RangeDomain",D,b);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,q,a,b,d){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(h){h&&q.isObject(h)&&(this.name=h.name,this.type=h.type)},toJson:function(){return d.fixJson({name:this.name,type:this.type})}});q.setObject("layers.Domain",D,b);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(D,q,a,b,d,h,f){D=D([f],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(g){g&&q.isObject(g)&&(this.codedValues=g.codedValues)},getName:function(g){var c;a.some(this.codedValues,function(e){e.code==g&&(c=e.name);return!!c});return c},toJson:function(){var g=this.inherited(arguments);g.codedValues=q.clone(this.codedValues);return h.fixJson(g)}});q.setObject("layers.CodedValueDomain",D,d);return D})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],
function(D,q){function a(d){return d?72*d/q.DPI:0}Object.defineProperty(q,"__esModule",{value:!0});var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;q.DPI=96;q.pt2px=function(d){return d?d/72*q.DPI:0};q.px2pt=a;q.toPt=function(d){if("string"===typeof d){if(b.test(d)){var h=d.match(b),f=Number(h[1]);h=h[3]&&h[3].toLowerCase();d="-"===d.charAt(0);f="px"===h?a(f):f;return d?-f:f}return null}return d}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils",
"esri/arcade/Dictionary"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.createSyntaxTree=function(d){return a.createSyntaxTree(d)};q.createFunction=function(d,h){return a.createFunction(d,h)};q.createExecContext=function(d,h){return a.createExecContext(d,h)};q.executeFunction=function(d,h){return a.executeFunction(d,h)};q.extractFieldNames=function(d){return a.extractFieldNames(d)};q.getViewInfo=function(d){if(d&&d.viewingMode&&null!=d.scale&&d.spatialReference)return{view:new b({viewingMode:d.viewingMode,
scale:d.scale}),sr:d.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(D,q,a,b){D.setObject("renderer.arcadeUtils",b,a);return b})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,q,a,b,d,h,f){function g(l){return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var c={vars:{$feature:"any",
$view:"any"}},e=/^\$(feature|aggregatedFeatures)\./i,k={_getSyntaxTree:function(l){return"string"===typeof l?k.createSyntaxTree(l):l},createSyntaxTree:function(l){try{var m=l?h.parseScript(l):null}catch(n){m=null}return m},createFunction:function(l,m){m=m||D.clone(c);var n=k._getSyntaxTree(l);try{var p=n?h.compileScript(n,m):null}catch(t){p=null}return p},createExecContext:function(l,m){return{vars:{$feature:l?f.createFromGraphic(l):new f,$view:m&&m.view},spatialReference:m&&m.sr}},evalSyntaxTree:function(l,
m){try{var n=h.executeScript(l,m)}catch(p){n=null}return n},executeFunction:function(l,m){try{var n=l?l(m):null}catch(p){n=null}return n},executeAsyncFunction:function(l,m){try{var n=l?l(m):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(p){n=(new b).reject(p)}return n},extractFieldNames:function(l,m){var n=k._getSyntaxTree(l);n=h.extractExpectedFieldLiterals(n);var p=[];q.forEach(n,function(r){e.test(r)&&(r=r.replace(e,""),p.push(r))});
var t=q.filter(p,function(r){return-1!==r.indexOf("*")});p=q.filter(p,function(r){return-1===t.indexOf(r)});m&&q.forEach(t,function(r){var y=new RegExp("^"+r.split(/\*+/).map(g).join(".*")+"$","i");q.forEach(m,function(x){y.test(x)&&p.push(x)})});p.sort();return q.filter(p,function(r,y){return 0===y||p[y-1]!==r})},dependsOnView:function(l){return k.hasVariable(l,"$view")},hasGeometryFunctions:function(l){return(l=k._getSyntaxTree(l))?h.scriptTouchesGeometry(l):!1},hasGeometryOperations:function(l){return(l=
k._getSyntaxTree(l))?h.scriptUsesGeometryEngine(l):!1},enableGeometryOperations:function(){return h.enableGeometrySupport()},hasVariable:function(l,m){var n=k._getSyntaxTree(l);return n?h.referencesMember(n,m):!1},hasFunction:function(l,m){var n=k._getSyntaxTree(l);return n?h.referencesFunction(n,m):!1},createFeatureSetFromLayer:function(l,m){m=m||{};var n=h.featureSetUtils();return n?n.constructFeatureSet(l,m.spatialReference,m.outFields,m.returnGeometry,m.cache):null},createFeatureSetFromLayerUrl:function(l,
m){m=m||{};var n=h.featureSetUtils();return n?n.constructFeatureSetFromUrlRaw(l,m.spatialReference,m.outFields,m.returnGeometry,m.cache):null},createFeatureSetCollectionFromMap:function(l,m){var n=h.featureSetUtils();return n?n.createFeatureSetCollectionFromMap(l,l.spatialReference,m&&m.cache):null},createFeatureSetCollectionFromServiceUrl:function(l,m){m=m||{};var n=h.featureSetUtils();return n?n.createFeatureSetCollectionFromService(l,m.spatialReference,m.cache):null},hasFeatureSetOperations:function(l){return(l=
k._getSyntaxTree(l))?h.scriptUsesFeatureSet(l):!1},enableFeatureSetOperations:function(){return h.enableFeatureSetSupport().then(function(){var l=h.featureSetUtils();l&&l.initialiseMetaDataCache()})},enableAsyncOperations:function(){return h.enableAsyncSupport()}};D.setObject("support.expressionUtils",k,d);return k})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils".split(" "),function(D,q,a,b,d,h,f,
g){function c(L,Q){if(null===A)throw Error("Async Arcade must be enabled for this script");return f("esri-csp-restrictions")||!1===v?function(aa){return A.executeScript(L,aa)}:a.compileScript(L,Q,!0)}function e(L,Q){void 0===Q&&(Q=[]);return d.parseScript(L,Q)}function k(L,Q){if(!0===Q.useAsync||!0===L.isAsync){if(null===A)throw Error("Async Arcade must be enabled for this script");return A.executeScript(L,Q)}return b.executeScript(L,Q)}function l(L,Q){return b.referencesMember(L,Q)}function m(L,
Q){void 0===Q&&(Q=[]);void 0===L.usesGeometry&&h.findScriptDependencies(L,Q);return!0===L.usesGeometry}function n(){return B?B:B=g.create(function(L,Q){D(["../geometry/geometryEngine","./functions/geomsync"],function(aa,ca){u=!0;ca.setGeometryEngine(aa);L(!0)},function(aa){Q(aa)})})}function p(){return null!==E?E:E=a.enableAsyncSupport().then(function(){return g.create(function(L,Q){D(["./arcadeAsyncRuntime"],function(aa){try{A=aa;aa=0;for(var ca=G;aa<ca.length;aa++){var ea=ca[aa];A.extend(ea);a.extend(ea,
"async")}G=null;L(!0)}catch(U){Q(U)}},Q)})})}function t(){return A?!0:!1}function r(){return F?F:F=p().then(function(){return g.create(function(L,Q){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(aa,ca,ea,U,la){try{H=aa,A.extend([ca,ea,U,la]),a.extend([ca,ea,U,la],"async"),w=!0,L(!0)}catch(V){Q(V)}},Q)})})}function y(L,Q){void 0===Q&&(Q=[]);void 0===L.usesFeatureSet&&h.findScriptDependencies(L,
Q);return!0===L.usesFeatureSet}function x(L,Q){if(Q)for(var aa=0;aa<Q.length;aa++)if(l(L,Q[aa]))return!0;return!1}Object.defineProperty(q,"__esModule",{value:!0});q.featureSetUtils=q.scriptTouchesGeometry=q.loadScriptDependencies=q.scriptIsAsync=q.scriptUsesFeatureSet=q.enableFeatureSetSupport=q.isGeometryEnabled=q.isAsyncEnabled=q.isFeatureSetSupportEnabled=q.enableAsyncSupport=q.enableGeometrySupport=q.scriptUsesGeometryEngine=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.referencesFunction=
q.referencesMember=q.executeScript=q.parseAndExecuteScript=q.scriptCheck=q.validateScript=q.parseScript=q.extend=q.compileScript=void 0;var z="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),v=function(){if(f("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(L){return!1}}(),w=!1,u=!1,A=null,G=[];q.compileScript=function(L,Q){return!0===Q.useAsync||!0===L.isAsync?c(L,Q):f("esri-csp-restrictions")?
function(aa){return b.executeScript(L,aa)}:a.compileScript(L,Q)};q.extend=function(L){b.extend(L);a.extend(L,"sync");null===A?G.push(L):(a.extend(L,"async"),A.extend(L))};q.parseScript=e;q.validateScript=function(L,Q,aa){void 0===aa&&(aa="");return d.validateScript(L,Q,aa)};q.scriptCheck=function(L,Q,aa,ca){void 0===ca&&(ca="");return d.scriptCheck(L,Q,aa,ca)};q.parseAndExecuteScript=function(L,Q,aa){void 0===aa&&(aa=[]);L=d.parseScript(L,aa);return k(L,Q)};q.executeScript=k;q.referencesMember=l;
q.referencesFunction=function(L,Q){return b.referencesFunction(L,Q)};q.extractFieldLiterals=function(L,Q){void 0===Q&&(Q=!1);return d.extractFieldLiterals(L,Q)};q.extractExpectedFieldLiterals=function(L){return d.extractExpectedFieldLiterals(L)};q.scriptUsesGeometryEngine=m;var B=null;q.enableGeometrySupport=n;var E=null;q.enableAsyncSupport=p;q.isFeatureSetSupportEnabled=function(){return w};q.isAsyncEnabled=t;q.isGeometryEnabled=function(){return u};var F=null;q.enableFeatureSetSupport=r;q.scriptUsesFeatureSet=
y;q.scriptIsAsync=function(L,Q){void 0===Q&&(Q=[]);void 0===L.isAsync&&h.findScriptDependencies(L,Q);return!0===L.isAsync};q.loadScriptDependencies=function(L,Q,aa,ca){void 0===aa&&(aa=[]);void 0===ca&&(ca=!1);return g.create(function(ea,U){var la="string"===typeof L?e(L):L,V=[];la&&(!1===u&&(m(la)||ca)&&V.push(n()),!1===t()&&(!0===la.isAsync||Q)&&V.push(p()),!1===w&&(y(la)||x(la,aa))&&V.push(r()));V.length?g.all(V).then(function(){ea(!0)},U):ea(!0)})};q.scriptTouchesGeometry=function(L){if(m(L))return!0;
L=h.findFunctionCalls(L);for(var Q=!1,aa=0;aa<L.length;aa++)if(-1<z.indexOf(L[aa])){Q=!0;break}return Q};var H=null;q.featureSetUtils=function(){return H}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x,z,v,w,u,A,G){function B(N,P,ba){try{return ba(N,null,P.arguments)}catch(ia){throw ia;}}function E(N){return N instanceof Error?y.reject(N):y.reject(Error(N))}function F(N,P){try{switch(P.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ca(N,P);case "VariableDeclaration":for(var ba=[],ia=0;ia<P.declarations.length;ia++)ba.push(F(N,P.declarations[ia]));return ba.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return aa(N,P);case "FunctionDeclaration":var qa=P.id.name.toLowerCase(),za={isAsync:N.isAsync,spatialReference:N.spatialReference,console:N.console,lrucache:N.lrucache,interceptor:N.interceptor,services:N.services,symbols:N.symbols,mangleMap:N.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:N.depthCounter+1,globalScope:N.globalScope};if(64<za.depthCounter)throw Error("Exceeded maximum function depth");ba="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(ia=0;ia<P.params.length;ia++){var Ca=P.params[ia].name.toLowerCase(),Ha=ka(N);za.localScope._SymbolsMap[Ca]=Ha;za.mangleMap[Ca]=Ha;ba+="lscope['"+Ha+"']\x3darguments["+ia.toString()+"];\n"}!0===N.isAsync?(ba=ba+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(aa(za,P.body)+"\n return lastStatement; "),ba=ba+"});  }, runtimeCtx),"+(P.params.length+")")):ba+=aa(za,P.body)+"\n return lastStatement; }, runtimeCtx),"+P.params.length+")";ba+="\n lastStatement \x3d lc.voidOperation; \n";
if(void 0!==N.globalScope[qa])var Da="gscope['"+qa+"']\x3d"+ba;else void 0!==N.globalScope._SymbolsMap[qa]?Da="gscope['"+N.globalScope._SymbolsMap[qa]+"']\x3d"+ba:(Ha=ka(N),N.globalScope._SymbolsMap[qa]=Ha,N.mangleMap[qa]=Ha,Da="gscope['"+Ha+"']\x3d"+ba);return Da;case "ReturnStatement":var Ja=null===P.argument?"return lc.voidOperation":"return "+F(N,P.argument);return Ja;case "IfStatement":if("AssignmentExpression"===P.test.type||"UpdateExpression"===P.test.type)throw Error(e.nodeErrorMessage(P.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var va=F(N,P.test),Ga=oa(N),Aa="var "+Ga+" \x3d "+va+";\n if ("+Ga+" \x3d\x3d\x3d true) {\n"+Q(N,P.consequent)+"\n }\n";Aa=null!==P.alternate?Aa+("else if ("+Ga+"\x3d\x3d\x3dfalse)   { \n"+Q(N,P.alternate)+"}\n"):Aa+("else if ("+Ga+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Aa+="else { lang.error({type: '"+P.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ea="AssignmentExpression"===
P.expression.type?"lastStatement \x3d lc.voidOperation; "+F(N,P.expression)+"; \n ":"lastStatement \x3d "+F(N,P.expression)+"; ";return Ea;case "AssignmentExpression":return L(N,P);case "UpdateExpression":return H(N,P);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Wa=[];qa=Da=0;for(ia=P.quasis;qa<ia.length;qa++){var Ia=ia[qa];Wa.push(Ia.value?JSON.stringify(Ia.value.cooked):JSON.stringify(""));!1===Ia.tail&&(Wa.push(P.expressions[Da]?
"lang.castString(lang.aCheck("+F(N,P.expressions[Da])+", 'TemplateLiteral'))":""),Da++)}ba="(["+Wa.join(",")+"]).join('')"}catch(Ta){throw Ta;}return ba;case "TemplateElement":return JSON.stringify(P.value?P.value.cooked:"");case "ForStatement":ba="lastStatement \x3d lc.voidOperation; \n";null!==P.init&&(ba+=F(N,P.init)+"; ");var Qa=oa(N),Ka=oa(N);ba+="var "+Qa+" \x3d true; \n do { ";null!==P.update&&(ba+=" if ("+Qa+"\x3d\x3d\x3dfalse) {\n "+F(N,P.update)+"  \n}\n "+Qa+"\x3dfalse; \n");null!==P.test&&
(ba+="var "+Ka+" \x3d "+F(N,P.test)+"; ",ba+="if ("+Ka+"\x3d\x3d\x3dfalse) { break; } else if ("+Ka+"!\x3d\x3dtrue) { lang.error({type: '"+P.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");ba+=F(N,P.body);null!==P.update&&(ba+="\n "+F(N,P.update));return ba+("\n"+Qa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Oa=oa(N),Va=oa(N),Pa=oa(N),wa="var "+Oa+" \x3d "+F(N,P.right)+";\n";"VariableDeclaration"===P.left.type&&(wa+=F(N,P.left));
var Na="VariableDeclaration"===P.left.type?P.left.declarations[0].id.name:P.left.name;Na=Na.toLowerCase();ba="";null!==N.localScope&&(void 0!==N.localScope[Na]?ba="lscope['"+Na+"']":void 0!==N.localScope._SymbolsMap[Na]&&(ba="lscope['"+N.localScope._SymbolsMap[Na]+"']"));""===ba&&(void 0!==N.globalScope[Na]?ba="gscope['"+Na+"']":void 0!==N.globalScope._SymbolsMap[Na]&&(ba="gscope['"+N.globalScope._SymbolsMap[Na]+"']"));wa=wa+("if ("+Oa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Oa+") || lc.isString("+Oa+")) {var ")+(Va+"\x3d"+Oa+".length; \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Va+"; "+Pa+"++) {\n");wa+=ba+"\x3d"+Pa+";\n";wa+=F(N,P.body);wa+="\n}\n";wa+=" lastStatement \x3d lc.voidOperation; \n";wa+=" \n}\n";wa+="else if (lc.isImmutableArray("+Oa+")) {";wa=wa+("var "+Va+"\x3d"+Oa+".length(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Va+"; "+Pa+"++) {\n");wa+=ba+"\x3d"+Pa+";\n";wa+=F(N,P.body);wa+="\n}\n";wa+=" lastStatement \x3d lc.voidOperation; \n";wa+=" \n}\n";wa+="else if (( "+
Oa+" instanceof lang.Dictionary) || ( "+Oa+" instanceof lang.Feature)) {";wa=wa+("var "+Va+"\x3d"+Oa+".keys(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Va+".length; "+Pa+"++) {\n");wa+=ba+"\x3d"+Va+"["+Pa+"];\n";wa+=F(N,P.body);wa+="\n}\n";wa+=" lastStatement \x3d lc.voidOperation; \n";wa+=" \n}\n";N.isAsync&&(wa+="else if (lc.isFeatureSet("+Oa+")) {",wa=wa+("var "+Va+"\x3d"+Oa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Pa+"\x3dlang. graphicToFeature( yield "+Va+".next(),"+Oa+"); "+Pa+"!\x3dnull; "+
Pa+"\x3dlang. graphicToFeature( yield "+Va+".next(),"+Oa+")) {\n")+(ba+"\x3d"+Pa+";\n"),wa+=F(N,P.body),wa+="\n}\n",wa+=" lastStatement \x3d lc.voidOperation; \n",wa+=" \n}\n");return wa+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return U(N,P);case "MemberExpression":try{ba=void 0;ba=!0===P.computed?F(N,P.property):"'"+P.property.name+"'";var Hb="lang.member("+F(N,P.object)+","+ba+")"}catch(Ta){throw Ta;}return Hb;case "Literal":return null===P.value||void 0===P.value?"null":
JSON.stringify(P.value);case "ThisExpression":throw Error(e.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==P.callee.type)throw Error(e.nodeErrorMessage(P,"RUNTIME","ONLYNODESSUPPORTED"));var eb=P.callee.name.toLowerCase();ba="";null!==N.localScope&&(void 0!==N.localScope[eb]?ba="lscope['"+eb+"']":void 0!==N.localScope._SymbolsMap[eb]&&(ba="lscope['"+N.localScope._SymbolsMap[eb]+"']"));""===ba&&(void 0!==N.globalScope[eb]?ba="gscope['"+eb+"']":void 0!==N.globalScope._SymbolsMap[eb]&&
(ba="gscope['"+N.globalScope._SymbolsMap[eb]+"']"));if(""!==ba){ia="[";for(Ia=0;Ia<P.arguments.length;Ia++)0<Ia&&(ia+=", "),ia+=F(N,P.arguments[Ia]);ia+="]";Wa=N.isAsync?"(yield lang.callfunc("+ba+","+ia+",runtimeCtx) )":"lang.callfunc("+ba+","+ia+",runtimeCtx)"}else throw Error(e.nodeErrorMessage(P,"RUNTIME","NOTFOUND"));}catch(Ta){throw Ta;}return Wa;case "UnaryExpression":try{var tb="lang.unary("+F(N,P.argument)+",'"+P.operator+"')"}catch(Ta){throw Ta;}return tb;case "BinaryExpression":try{var Ya=
"lang.binary("+F(N,P.left)+","+F(N,P.right)+",'"+P.operator+"')"}catch(Ta){throw Ta;}return Ya;case "LogicalExpression":try{if("AssignmentExpression"===P.left.type||"UpdateExpression"===P.left.type)throw Error(e.nodeErrorMessage(P.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===P.right.type||"UpdateExpression"===P.right.type)throw Error(e.nodeErrorMessage(P.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===P.operator||"||"===P.operator)var ub=
"(lang.logicalCheck("+F(N,P.left)+") "+P.operator+" lang.logicalCheck("+F(N,P.right)+"))";else throw Error(e.nodeErrorMessage(P,"RUNTIME","ONLYORORAND"));}catch(Ta){throw Ta;}return ub;case "ConditionalExpression":throw Error(e.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{ba=[];for(ia=0;ia<P.elements.length;ia++)"Literal"===P.elements[ia].type?ba.push(F(N,P.elements[ia])):ba.push("lang.aCheck("+F(N,P.elements[ia])+",'ArrayExpression')");var vb="["+ba.join(",")+"]"}catch(Ta){throw Ta;
}return vb;case "ObjectExpression":ba="lang.dictionary([";for(ia=0;ia<P.properties.length;ia++){var gb=P.properties[ia],wb="Identifier"===gb.key.type?"'"+gb.key.name+"'":F(N,gb.key),nb=F(N,gb.value);0<ia&&(ba+=",");ba+="lang.strCheck("+wb+",'ObjectExpression'),lang.aCheck("+nb+", 'ObjectExpression')"}return ba+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(P,"RUNTIME","NOTSUPPORTED"));default:throw Error(e.nodeErrorMessage(P,"RUNTIME","UNREOGNISED"));
}}catch(Ta){throw Ta;}}function H(N,P){var ba=null,ia="";if("MemberExpression"===P.argument.type)return ba=F(N,P.argument.object),ia=!0===P.argument.computed?F(N,P.argument.property):"'"+P.argument.property.name+"'","lang.memberupdate("+ba+","+ia+",'"+P.operator+"',"+P.prefix+")";ba=P.argument.name.toLowerCase();if(null!==N.localScope){if(void 0!==N.localScope[ba])return"lang.update(lscope, '"+ba+"','"+P.operator+"',"+P.prefix+")";if(void 0!==N.localScope._SymbolsMap[ba])return"lang.update(lscope, '"+
N.localScope._SymbolsMap[ba]+"','"+P.operator+"',"+P.prefix+")"}if(void 0!==N.globalScope[ba])return"lang.update(gscope, '"+ba+"','"+P.operator+"',"+P.prefix+")";if(void 0!==N.globalScope._SymbolsMap[ba])return"lang.update(gscope, '"+N.globalScope._SymbolsMap[ba]+"','"+P.operator+"',"+P.prefix+")";throw Error("Variable not recognised");}function L(N,P){var ba=F(N,P.right),ia=null,qa="";if("MemberExpression"===P.left.type)return ia=F(N,P.left.object),qa=!0===P.left.computed?F(N,P.left.property):"'"+
P.left.property.name+"'","lang.assignmember("+ia+","+qa+",'"+P.operator+"',"+ba+")";ia=P.left.name.toLowerCase();if(null!==N.localScope){if(void 0!==N.localScope[ia])return"lscope['"+ia+"']\x3dlang.assign("+ba+",'"+P.operator+"', lscope['"+ia+"'])";if(void 0!==N.localScope._SymbolsMap[ia])return"lscope['"+N.localScope._SymbolsMap[ia]+"']\x3dlang.assign("+ba+",'"+P.operator+"', lscope['"+N.localScope._SymbolsMap[ia]+"'])"}if(void 0!==N.globalScope[ia])return"gscope['"+ia+"']\x3dlang.assign("+ba+",'"+
P.operator+"', gscope['"+ia+"'])";if(void 0!==N.globalScope._SymbolsMap[ia])return"gscope['"+N.globalScope._SymbolsMap[ia]+"']\x3dlang.assign("+ba+",'"+P.operator+"', gscope['"+N.globalScope._SymbolsMap[ia]+"'])";throw Error("Variable not recognised");}function Q(N,P){return"BlockStatement"===P.type?F(N,P):"ReturnStatement"===P.type||"BreakStatement"===P.type||"ContinueStatement"===P.type?F(N,P)+"; ":"UpdateExpression"===P.type?"lastStatement \x3d "+F(N,P)+"; ":"ExpressionStatement"===P.type?F(N,
P):"ObjectExpression"===P.type?"lastStatement \x3d "+F(N,P)+"; ":F(N,P)+"; "}function aa(N,P){for(var ba="",ia=0;ia<P.body.length;ia++)ba="ReturnStatement"===P.body[ia].type?ba+(F(N,P.body[ia])+"; \n"):"BreakStatement"===P.body[ia].type?ba+(F(N,P.body[ia])+"; \n"):"ContinueStatement"===P.body[ia].type?ba+(F(N,P.body[ia])+"; \n"):"UpdateExpression"===P.body[ia].type?ba+("lastStatement \x3d "+F(N,P.body[ia])+"; \n"):"ObjectExpression"===P.body[ia].type?ba+("lastStatement \x3d "+F(N,P.body[ia])+"; \n"):
ba+(F(N,P.body[ia])+" \n");return ba}function ca(N,P){var ba=null===P.init?null:F(N,P.init);ba===c.voidOperation&&(ba=null);var ia=P.id.name.toLowerCase();if(null!==N.localScope){if(void 0!==N.localScope[ia])return"lscope['"+ia+"']\x3d"+ba+"; ";if(void 0!==N.localScope._SymbolsMap[ia])return"lscope['"+N.localScope._SymbolsMap[ia]+"']\x3d"+ba+"; ";var qa=ka(N);N.localScope._SymbolsMap[ia]=qa;N.mangleMap[ia]=qa;return"lscope['"+qa+"']\x3d"+ba+"; "}if(void 0!==N.globalScope[ia])return"gscope['"+ia+"']\x3d"+
ba+"; ";if(void 0!==N.globalScope._SymbolsMap[ia])return"gscope['"+N.globalScope._SymbolsMap[ia]+"']\x3d"+ba+"; ";qa=ka(N);N.globalScope._SymbolsMap[ia]=qa;N.mangleMap[ia]=qa;return"gscope['"+qa+"']\x3d"+ba+"; "}function ea(N,P,ba){P=P.toLowerCase();switch(P){case "hasz":return N=N.hasZ,void 0===N?!1:N;case "hasm":return N=N.hasM,void 0===N?!1:N;case "spatialreference":return P=N.spatialReference._arcadeCacheId,void 0===P&&(ba=!0,Object.freeze&&Object.isFrozen(N.spatialReference)&&(ba=!1),ba&&(fa++,
P=N.spatialReference._arcadeCacheId=fa)),N=new d({wkt:N.spatialReference.wkt,wkid:N.spatialReference.wkid}),void 0!==P&&(N._arcadeCacheId="SPREF"+P.toString()),N}switch(N.type){case "extent":switch(P){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return N=N[P],void 0!==N?N:null;case "type":return"Extent"}break;case "polygon":switch(P){case "rings":return P=N.getCacheValue("_arcadeCacheId"),void 0===P&&(fa++,P=fa,N.setCacheValue("_arcadeCacheId",P)),
N=new f(N.rings,N.spatialReference,!0===N.hasZ,!0===N.hasM,P);case "type":return"Polygon"}break;case "point":switch(P){case "x":case "y":case "z":case "m":return void 0!==N[P]?N[P]:null;case "type":return"Point"}break;case "polyline":switch(P){case "paths":return P=N.getCacheValue("_arcadeCacheId"),void 0===P&&(fa++,P=fa,N.setCacheValue("_arcadeCacheId",P)),N=new f(N.paths,N.spatialReference,!0===N.hasZ,!0===N.hasM,P);case "type":return"Polyline"}break;case "multipoint":switch(P){case "points":return P=
N.getCacheValue("_arcadeCacheId"),void 0===P&&(fa++,P=fa,N.setCacheValue("_arcadeCacheId",P)),N=new g(N.points,N.spatialReference,!0===N.hasZ,!0===N.hasM,P,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(ba,"RUNTIME","PROPERTYNOTFOUND"));}function U(N,P){try{var ba=P.name.toLowerCase();if(null!==N.localScope){if(void 0!==N.localScope[ba])return"lscope['"+ba+"']";if(void 0!==N.localScope._SymbolsMap[ba])return"lscope['"+N.localScope._SymbolsMap[ba]+"']"}if(void 0!==N.globalScope[ba])return"gscope['"+
ba+"']";if(void 0!==N.globalScope._SymbolsMap[ba])return"gscope['"+N.globalScope._SymbolsMap[ba]+"']";throw Error(e.nodeErrorMessage(P,"RUNTIME","VARIABLENOTFOUND"));}catch(ia){throw ia;}}function la(N){return null===N?"":c.isArray(N)||c.isImmutableArray(N)?"Array":c.isDate(N)?"Date":c.isString(N)?"String":c.isBoolean(N)?"Boolean":c.isNumber(N)?"Number":N instanceof b?"Attachment":N instanceof a?"Portal":N instanceof d?"Dictionary":N instanceof h?"Feature":N instanceof w?"Point":N instanceof u?"Polygon":
N instanceof A?"Polyline":N instanceof v?"Multipoint":N instanceof x?"Extent":c.isFunctionParameter(N)?"Function":c.isFeatureSet(N)?"FeatureSet":c.isFeatureSetCollection(N)?"FeatureSetCollection":N===c.voidOperation?"":"number"===typeof N&&isNaN(N)?"Number":"Unrecognised Type"}function V(N,P,ba,ia){try{if(c.equalityTest(P[ba],ia))return P[ba+1];var qa=P.length-ba;return 1===qa?P[ba]:2===qa?null:3===qa?P[ba+2]:V(N,P,ba+2,ia)}catch(za){throw za;}}function R(N,P,ba,ia){try{if(!0===ia)return P[ba+1];
if(3===P.length-ba)return P[ba+2];var qa=P[ba+2];if(!1===c.isBoolean(qa))throw Error("WHEN needs boolean test conditions");return R(N,P,ba+2,qa)}catch(za){throw za;}}function ha(N,P){var ba=N.length,ia=Math.floor(ba/2);if(0===ba)return[];if(1===ba)return[N[0]];var qa=ha(N.slice(0,ia),P);ba=ha(N.slice(ia,ba),P);for(ia=[];0<qa.length||0<ba.length;)if(0<qa.length&&0<ba.length){var za=P(qa[0],ba[0]);isNaN(za)&&(za=0);0>=za?(ia.push(qa[0]),qa=qa.slice(1)):(ia.push(ba[0]),ba=ba.slice(1))}else 0<qa.length?
(ia.push(qa[0]),qa=qa.slice(1)):0<ba.length&&(ia.push(ba[0]),ba=ba.slice(1));return ia}function S(N,P){try{var ba=N.length,ia=Math.floor(ba/2);if(0===ba)return y.resolve([]);if(1===ba)return y.resolve([N[0]]);var qa=[S(N.slice(0,ia),P),S(N.slice(ia,ba),P)];return y.all(qa).then(function(za){return X(za[0],za[1],P,[])})}catch(za){return y.reject(za)}}function X(N,P,ba,ia){return y.create(function(qa,za){0<N.length||0<P.length?0<N.length&&0<P.length?ba(N[0],P[0]).then(function(Ca){try{isNaN(Ca)&&(Ca=
1),0>=Ca?(ia.push(N[0]),N=N.slice(1)):(ia.push(P[0]),P=P.slice(1)),X(N,P,ba,ia).then(function(Ha){qa(Ha)},za)}catch(Ha){za(Ha)}},za):0<N.length?(ia.push(N[0]),N=N.slice(1),X(N,P,ba,ia).then(function(Ca){qa(Ca)},za)):0<P.length&&(ia.push(P[0]),P=P.slice(1),X(N,P,ba,ia).then(function(Ca){qa(Ca)},za)):qa(ia)})}function ka(N){N.symbols.symbolCounter++;return"_T"+N.symbols.symbolCounter.toString()}function oa(N){N.symbols.symbolCounter++;return"_Tvar"+N.symbols.symbolCounter.toString()}function ta(N,P,
ba){var ia={};N||(N={});ba||(ba={});ia._SymbolsMap={};ia.textformatting=1;ia.infinity=1;ia.pi=1;for(var qa in P)ia[qa]=1;for(qa in ba)ia[qa]=1;for(qa in N)ia[qa]=1;return ia}function xa(N,P){for(var ba={mode:P,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:B,standardFunctionAsync:B,evaluateIdentifier:O},ia=0;ia<N.length;ia++)N[ia].registerFunctions(ba);if("sync"===P){for(var qa in ba.functions)ra[qa]=new c.NativeFunction(ba.functions[qa]),T.prototype[qa]=ra[qa];for(ia=0;ia<
ba.signatures.length;ia++)e.addFunctionDeclaration(ba.signatures[ia],"sync")}else{for(qa in ba.functions)pa[qa]=new c.NativeFunction(ba.functions[qa]),da.prototype[qa]=pa[qa];for(ia=0;ia<ba.signatures.length;ia++)e.addFunctionDeclaration(ba.signatures[ia],"async")}}function O(N,P){var ba=P.name;if("_SymbolsMap"===ba)throw"Illegal";if(0<N.localStack.length){if("_t"!==ba.substr(0,2).toLowerCase()&&void 0!==N.localStack[N.localStack.length-1][ba])return N.localStack[N.localStack.length-1][ba];var ia=
N.mangleMap[ba];if(void 0!==ia&&void 0!==N.localStack[N.localStack.length-1][ia])return N.localStack[N.localStack.length-1][ia]}if("_t"!==ba.substr(0,2).toLowerCase()&&void 0!==N.globalScope[ba]||1===N.globalScope._SymbolsMap[ba])return N.globalScope[ba];ba=N.mangleMap[ba];if(void 0!==ba)return N.globalScope[ba]}function Z(N){}Object.defineProperty(q,"__esModule",{value:!0});q.enableAsyncSupport=q.compileScript=q.referencesFunction=q.referencesMember=q.validateScript=q.extractExpectedFieldLiterals=
q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var fa=0,ra={};l.registerFunctions(ra,B);r.registerFunctions(ra,B);p.registerFunctions(ra,B);m.registerFunctions(ra,B);t.registerFunctions(ra,B);ra["typeof"]=function(N,P){return B(N,P,function(ba,ia,qa){c.pcCheck(qa,1,1);ba=la(qa[0]);if("Unrecognised Type"===ba)throw Error("Unrecognised Type");return ba})};ra.iif=function(N,P){try{return B(N,P,function(ba,ia,qa){c.pcCheck(qa,3,3);if(!1===c.isBoolean(qa[0]))throw Error("IF Function must have a boolean test condition");
return qa[0]?qa[1]:qa[2]})}catch(ba){throw ba;}};ra.decode=function(N,P){try{return B(N,P,function(ba,ia,qa){if(2>qa.length)throw Error("Missing Parameters");if(2===qa.length)return qa[1];if(0===(qa.length-1)%2)throw Error("Must have a default value result.");return V(N,qa,1,qa[0])})}catch(ba){throw ba;}};ra.when=function(N,P){try{return B(N,P,function(ba,ia,qa){if(3>qa.length)throw Error("Missing Parameters");if(0===qa.length%2)throw Error("Must have a default value result.");ba=qa[0];if(!1===c.isBoolean(ba))throw Error("WHEN needs boolean test conditions");
return R(N,qa,0,ba)})}catch(ba){throw ba;}};ra.top=function(N,P){return B(N,P,function(ba,ia,qa){c.pcCheck(qa,2,2);if(c.isArray(qa[0]))return c.toNumber(qa[1])>=qa[0].length?qa[0].slice(0):qa[0].slice(0,c.toNumber(qa[1]));if(c.isImmutableArray(qa[0]))return c.toNumber(qa[1])>=qa[0].length()?qa[0].slice(0):qa[0].slice(0,c.toNumber(qa[1]));throw Error("Top cannot accept this parameter type");})};ra.first=function(N,P){return B(N,P,function(ba,ia,qa){c.pcCheck(qa,1,1);return c.isArray(qa[0])?0===qa[0].length?
null:qa[0][0]:c.isImmutableArray(qa[0])?0===qa[0].length()?null:qa[0].get(0):null})};ra.sort=function(N,P){return B(N,P,function(ba,ia,qa){c.pcCheck(qa,1,2);ia=qa[0];c.isImmutableArray(ia)&&(ia=ia.toArray());if(!1===c.isArray(ia))throw Error("Illegal Argument");if(1<qa.length){if(!1===c.isFunctionParameter(qa[1]))throw Error("Illegal Argument");var za=function(va,Ga){return ja.callfunc(qa[1],[va,Ga],ba)};return N.isAsync?S(ia,za):ia=ha(ia,function(va,Ga){return za(va,Ga)})}if(0===ia.length)return[];
for(var Ca={},Ha=0;Ha<ia.length;Ha++){var Da=la(ia[Ha]);""!==Da&&(Ca[Da]=!0)}if(!0===Ca.Array||!0===Ca.Dictionary||!0===Ca.Feature||!0===Ca.Point||!0===Ca.Polygon||!0===Ca.Polyline||!0===Ca.Multipoint||!0===Ca.Extent||!0===Ca.Function)return ia.slice(0);Ha=0;Da="";for(var Ja in Ca)Ha++,Da=Ja;return ia=1<Ha||"String"===Da?ha(ia,function(va,Ga){if(null===va||void 0===va||va===c.voidOperation)return null===Ga||void 0===Ga||Ga===c.voidOperation?0:1;if(null===Ga||void 0===Ga||Ga===c.voidOperation)return-1;
var Aa=c.toString(va),Ea=c.toString(Ga);return Aa<Ea?-1:Aa===Ea?0:1}):"Number"===Da?ha(ia,function(va,Ga){return va-Ga}):"Boolean"===Da?ha(ia,function(va,Ga){return va===Ga?0:Ga?-1:1}):"Date"===Da?ha(ia,function(va,Ga){return Ga-va}):ia.slice(0)})};var pa={},W;for(W in ra)pa[W]=new c.NativeFunction(ra[W]);n.registerFunctions(ra,B);for(W in ra)ra[W]=new c.NativeFunction(ra[W]);var T=function(){};T.prototype=ra;var da=function(){};da.prototype=pa;q.functionHelper={fixSpatialReference:c.fixSpatialReference,
parseArguments:function(N,P){for(var ba=[],ia=0;ia<P.arguments.length;ia++)ba.push(F(N,P.arguments[ia]));return ba},standardFunction:B};q.extend=xa;xa([k],"sync");xa([k],"async");q.executeScript=function(N,P){return N(P)};q.extractFieldLiterals=function(N,P){void 0===P&&(P=!1);return e.findFieldLiterals(N)};q.extractExpectedFieldLiterals=function(N){return e.findExpectedFieldLiterals(N)};q.validateScript=function(N,P){return e.validateScript(N,P,"sync")};q.referencesMember=function(N,P){return e.referencesMember(N,
P)};q.referencesFunction=function(N,P){return e.referencesFunction(N,P)};var na=0,ja={error:function(N,P,ba){throw Error(e.nodeErrorMessage(N,P,ba));},__awaiter:function(N,P,ba,ia){return y.create(function(qa,za){function Ca(Ja){try{Da(ia.next(Ja))}catch(va){za(va)}}function Ha(Ja){try{Da(ia["throw"](Ja))}catch(va){za(va)}}function Da(Ja){Ja.done?qa(Ja.value):Ja.value&&Ja.value.then?Ja.value.then(Ca,Ha):(na++,0===na%100?setTimeout(function(){na=0;Ca(Ja.value)},0):Ca(Ja.value))}Da((ia=ia.apply(N,P||
[])).next())})},functionDepthchecker:function(N,P){return function(){P.depthCounter++;P.localStack.push([]);if(64<P.depthCounter)throw Error("Exceeded maximum function depth");var ba=N.apply(this,arguments);if(y.isPromiseLike(ba))return ba.then(function(ia){P.depthCounter--;--P.localStack.length;return ia});P.depthCounter--;--P.localStack.length;return ba}},castString:function(N){return c.toString(N)},aCheck:function(N,P){if(c.isFunctionParameter(N))throw Error(e.nodeErrorMessage({type:P},"RUNTIME",
"FUNCTIONCONTEXTILLEGAL"));return N===c.voidOperation?null:N},Dictionary:d,Feature:h,dictionary:function(N){for(var P={},ba=0;ba<N.length;ba+=2){if(c.isFunctionParameter(N[ba+1]))throw Error("Illegal Argument");if(!1===c.isString(N[ba]))throw Error("Illegal Argument");P[N[ba].toString()]=N[ba+1]===c.voidOperation?null:N[ba+1]}N=new d(P);N.immutable=!1;return N},strCheck:function(N){if(!1===c.isString(N))throw Error("Illegal Argument");return N},unary:function(N,P){if(c.isBoolean(N)){if("!"===P)return!N;
if("-"===P)return-1*c.toNumber(N);if("+"===P)return 1*c.toNumber(N);if("~"===P)return~c.toNumber(N);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:P,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===P)return-1*c.toNumber(N);if("+"===P)return 1*c.toNumber(N);if("~"===P)return~c.toNumber(N);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:P,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(N){if(!1===
c.isBoolean(N))throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return N},logical:function(N,P,ba){if(c.isBoolean(N)&&c.isBoolean(P))switch(ba){case "||":return N||P;case "\x26\x26":return N&&P}throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(N,P,ba){switch(ba){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(N),
c.toNumber(P),ba);case "\x3d\x3d":return c.equalityTest(N,P);case "\x3d":return c.equalityTest(N,P);case "!\x3d":return!c.equalityTest(N,P);case "\x3c":return c.greaterThanLessThan(N,P,ba);case "\x3e":return c.greaterThanLessThan(N,P,ba);case "\x3c\x3d":return c.greaterThanLessThan(N,P,ba);case "\x3e\x3d":return c.greaterThanLessThan(N,P,ba);case "+":return c.isString(N)||c.isString(P)?c.toString(N)+c.toString(P):c.toNumber(N)+c.toNumber(P);case "-":return c.toNumber(N)-c.toNumber(P);case "*":return c.toNumber(N)*
c.toNumber(P);case "/":return c.toNumber(N)/c.toNumber(P);case "%":return c.toNumber(N)%c.toNumber(P);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression",operator:ba,left:N,right:P},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(N,P,ba){switch(P){case "\x3d":return N===c.voidOperation?null:N;case "/\x3d":return c.toNumber(ba)/c.toNumber(N);case "*\x3d":return c.toNumber(ba)*c.toNumber(N);case "-\x3d":return c.toNumber(ba)-c.toNumber(N);case "+\x3d":return c.isString(ba)||c.isString(N)?
c.toString(ba)+c.toString(N):c.toNumber(ba)+c.toNumber(N);case "%\x3d":return c.toNumber(ba)%c.toNumber(N);default:throw Error(e.nodeErrorMessage({type:"AssignmentExpression",operator:P,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(N,P,ba,ia){var qa=c.toNumber(N[P]);N[P]="++"===ba?qa+1:qa-1;return!1===ia?qa:"++"===ba?qa+1:qa-1},graphicToFeature:function(N,P){return null===N?null:h.createFromGraphicLikeObject(N.geometry,N.attributes,P)},memberupdate:function(N,P,ba,ia){if(c.isArray(N))if(c.isNumber(P)){0>
P&&(P=N.length+P);if(0>P||P>=N.length)throw Error("Assignment outside of array bounds");var qa=c.toNumber(N[P]);N[P]="++"===ba?qa+1:qa-1}else throw Error("Invalid Parameter");else if(N instanceof d){if(!1===c.isString(P))throw Error("Dictionary accessor must be a string");if(!0===N.hasField(P))qa=c.toNumber(N.field(P)),N.setField(P,"++"===ba?qa+1:qa-1);else throw Error("Invalid Parameter");}else if(N instanceof h){if(!1===c.isString(P))throw Error("Feature accessor must be a string");if(!0===N.hasField(P))qa=
c.toNumber(N.field(P)),N.setField(P,"++"===ba?qa+1:qa-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(N))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===ia?qa:"++"===ba?qa+1:qa-1},assignmember:function(N,P,ba,ia){if(c.isArray(N))if(c.isNumber(P)){0>P&&(P=N.length+P);if(0>P||P>N.length)throw Error("Assignment outside of array bounds");if(P===N.length&&"\x3d"!==ba)throw Error("Invalid Parameter");N[P]=this.assign(ia,ba,N[P])}else throw Error("Invalid Parameter");
else if(N instanceof d){if(!1===c.isString(P))throw Error("Dictionary accessor must be a string");if(!0===N.hasField(P))N.setField(P,this.assign(ia,ba,N.field(P)));else{if("\x3d"!==ba)throw Error("Invalid Parameter");N.setField(P,this.assign(ia,ba,null))}}else if(N instanceof h){if(!1===c.isString(P))throw Error("Feature accessor must be a string");if(!0===N.hasField(P))N.setField(P,this.assign(ia,ba,N.field(P)));else{if("\x3d"!==ba)throw Error("Invalid Parameter");N.setField(P,this.assign(ia,ba,
null))}}else{if(c.isImmutableArray(N))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(N,P){if(null===N)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(N instanceof d||N instanceof h){if(c.isString(P))return N.field(P);throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(N instanceof z){if(c.isString(P))return ea(N,
P,"MemberExpression");throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isArray(N)){if(c.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length+P);if(P>=N.length||0>P)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return N[P]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(c.isString(N)){if(c.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length+P);if(P>=N.length||0>P)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return N[P]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(N)&&c.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length()+P);if(P>=N.length()||0>P)throw Error(e.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return N.get(P)}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(N,P,ba){return N instanceof c.NativeFunction?N.fn(ba,{arguments:P,preparsed:!0}):N instanceof c.SizzleFunction?N.fn.apply(this,P):N.apply(this,P)}};q.compileScript=function(N,P,ba){void 0===P&&(P=null);void 0===ba&&(ba=!1);null===P&&(P={vars:{},customfunctions:{}});P={isAsync:ba,
globalScope:ta(P.vars,ba?pa:ra,P.customfunctions),localScope:null,mangleMap:{},console:Z,lrucache:P.lrucache,interceptor:P.interceptor,services:P.services,symbols:{symbolCounter:0}};N=F(P,N.body[0].body);""===N&&(N="lc.voidOperation; ");P={lc:c,lang:ja,mangles:P.mangleMap,postProcess:function(ia){ia instanceof c.ReturnResult&&(ia=ia.value);ia instanceof c.ImplicitResult&&(ia=ia.value);ia===c.voidOperation&&(ia=null);if(ia===c.breakResult)throw Error("Cannot return BREAK");if(ia===c.continueResult)throw Error("Cannot return CONTINUE");
if(c.isFunctionParameter(ia))throw Error("Cannot return FUNCTION");return ia},prepare:function(ia,qa){var za=ia.spatialReference;if(null===za||void 0===za)za=new G({wkid:102100});var Ca=ia.vars,Ha=ia.customfunctions,Da=qa?new da:new T;Ca||(Ca={});Ha||(Ha={});var Ja=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Ja.immutable=!1;Da._SymbolsMap={textformatting:1,infinity:1,pi:1};Da.textformatting=Ja;Da.infinity=Number.POSITIVE_INFINITY;Da.pi=Math.PI;
for(var va in Ha)Da[va]=Ha[va],Da._SymbolsMap[va]=1;for(va in Ca)Da._SymbolsMap[va]=1,Da[va]=Ca[va]&&"esri.Graphic"===Ca[va].declaredClass?h.createFromGraphic(Ca[va]):Ca[va];return{localStack:[],isAsync:qa,mangleMap:this.mangles,spatialReference:za,globalScope:Da,abortSignal:void 0===ia.abortSignal||null===ia.abortSignal?{aborted:!1}:ia.abortSignal,localScope:null,services:ia.services,console:ia.console?ia.console:Z,lrucache:ia.lrucache,interceptor:ia.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};
return(new Function("context","spatialReference",ba?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+N+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
N+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(P)};q.enableAsyncSupport=function(){return y.create(function(N,P){D(["./functions/geomasync"],function(ba){xa([ba],"async");N(!0)},function(ba){P(ba)})})}})},"esri/arcade/ArcadePortal":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])};
return q(a,b)};return function(a,b){function d(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();define(["require","exports","./Dictionary"],function(q,a,b){return function(d){function h(f){var g=d.call(this)||this;g.immutable=!1;g.setField("url",f);g.immutable=!0;return g}D(h,d);return h}(b)})},"esri/arcade/Attachment":function(){var D=
this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])};return q(a,b)};return function(a,b){function d(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();define(["require",
"exports","./Dictionary"],function(q,a,b){return function(d){function h(f,g,c,e,k,l){var m=d.call(this)||this;m.attachmentUrl=k;m.immutable=!1;m.setField("id",f);m.setField("name",g);m.setField("contenttype",c);m.setField("size",e);m.setField("exifinfo",l);m.immutable=!0;return m}D(h,d);return h}(b)})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(D,q){function a(v,w){return"0"!==v.min&&w.length<Number(v.min)||"*"!==v.max&&w.length>Number(v.max)?-2:1}function b(v,w,u){if(null!==
u.localScope&&void 0!==u.localScope[v.toLowerCase()]){var A=u.localScope[v.toLowerCase()];if("FormulaFunction"===A.type||"any"===A.type)return void 0===A.signature&&(A.signature={min:"0",max:"*"}),a(A.signature,w)}return void 0!==u.globalScope[v.toLowerCase()]&&(A=u.globalScope[v.toLowerCase()],"FormulaFunction"===A.type||"any"===A.type)?(void 0===A.signature&&(A.signature={min:"0",max:"*"}),a(A.signature,w)):-1}function d(v,w){if(v)for(var u=0;u<v.length;u++)h(v[u],w)}function h(v,w){if(v&&!1!==
w(v))switch(v.type){case "ArrayExpression":d(v.elements,w);break;case "AssignmentExpression":case "BinaryExpression":h(v.left,w);h(v.right,w);break;case "BlockStatement":d(v.body,w);break;case "CallExpression":h(v.callee,w);d(v.arguments,w);break;case "ExpressionStatement":h(v.expression,w);break;case "ForInStatement":h(v.left,w);h(v.right,w);h(v.body,w);break;case "ForStatement":h(v.init,w);h(v.test,w);h(v.update,w);h(v.body,w);break;case "FunctionDeclaration":h(v.id,w);d(v.params,w);h(v.body,w);
break;case "IfStatement":h(v.test,w);h(v.consequent,w);h(v.alternate,w);break;case "LogicalExpression":h(v.left,w);h(v.right,w);break;case "MemberExpression":h(v.object,w);h(v.property,w);break;case "ObjectExpression":d(v.properties,w);break;case "Program":d(v.body,w);break;case "Property":h(v.key,w);h(v.value,w);break;case "ReturnStatement":h(v.argument,w);break;case "UnaryExpression":h(v.argument,w);break;case "UpdateExpression":h(v.argument,w);break;case "VariableDeclaration":d(v.declarations,
w);break;case "VariableDeclarator":h(v.id,w);h(v.init,w);break;case "TemplateLiteral":d(v.expressions,w),d(v.quasis,w)}}function f(v,w){void 0===w&&(w=!0);var u=m(v,"SYNTAX","UNREOGNISED");try{switch(v.type){case "VariableDeclarator":return"Identifier"!==v.id.type?m(v,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==v.init?f(v.init,!1):"";case "VariableDeclaration":for(var A=0;A<v.declarations.length;A++)if(u=f(v.declarations[A],w),""!==u)return u;return"";case "ForInStatement":u=f(v.left,w);if(""!==
u)break;if("VariableDeclaration"===v.left.type){if(1<v.left.declarations.length)return m(v,"SYNTAX","ONLY1VAR");if(null!==v.left.declarations[0].init)return m(v,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==v.left.type)return m(v,"SYNTAX","LEFTNOTVAR");u=f(v.right,w);if(""!==u)break;u=f(v.body,w);if(""!==u)break;return"";case "ForStatement":if(null!==v.test&&(u=f(v.test,w),""!==u))break;if(null!==v.init&&(u=f(v.init,w),""!==u))break;if(null!==v.update&&(u=f(v.update,w),""!==u))break;if(null!==
v.body&&(u=f(v.body,w),""!==u))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":u=f(v.test,w);if(""!==u)break;if(null!==v.consequent&&(u=f(v.consequent,!1),""!==u))break;if(null!==v.alternate&&(u=f(v.alternate,!1),""!==u))break;return"";case "BlockStatement":var G=[];for(A=0;A<v.body.length;A++)"EmptyStatement"!==v.body[A].type&&G.push(v.body[A]);v.body=G;for(A=0;A<v.body.length;A++)if(u=f(v.body[A],w),""!==u)return u;
return"";case "FunctionDeclaration":return!1===w?m(v,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==v.id.type?m(v,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):f(v.body,!1);case "ReturnStatement":return null!==v.argument?f(v.argument,w):"";case "UpdateExpression":return"Identifier"!==v.argument.type&&"MemberExpression"!==v.argument.type?m(v,"SYNTAX","ASSIGNMENTTOVARSONLY"):f(v.argument,w);case "AssignmentExpression":if("Identifier"!==v.left.type&&"MemberExpression"!==v.left.type)return m(v,"SYNTAX","ASSIGNMENTTOVARSONLY");
u=f(v.left,w);if(""!==u)break;switch(v.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return m(v,"SYNTAX","OPERATORNOTRECOGNISED")}return f(v.right,!1);case "ExpressionStatement":return f(v.expression,!1);case "Identifier":u="";break;case "MemberExpression":u=f(v.object,w);if(""!==u)break;return!0===v.computed?f(v.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==v.callee.type)return m(v,
"SYNTAX","ONLYNODESSUPPORTED");u="";for(A=0;A<v.arguments.length;A++)if(u=f(v.arguments[A],w),""!==u)return u;return"";case "UnaryExpression":u=f(v.argument,w);break;case "BinaryExpression":u=f(v.left,w);if(""!==u)break;u=f(v.right,w);if(""!==u)break;switch(v.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return m(v,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":u=f(v.left,w);if(""!==u)break;u=f(v.right);if(""!==u)break;switch(v.operator){case "\x26\x26":case "||":break;default:return m(v,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":u="";for(A=0;A<v.elements.length&&(u=f(v.elements[A],w),""===u);A++);break;case "TemplateLiteral":u="";for(A=0;A<v.quasis.length;A++)if(u=f(v.quasis[A],w),""!==u)return u;for(A=0;A<v.expressions.length&&(u=f(v.expressions[A],
w),""===u);A++);break;case "ObjectExpression":u="";for(A=0;A<v.properties.length;A++){u="";if(null!==v.properties[A].key&&("Literal"!==v.properties[A].key.type&&"Identifier"!==v.properties[A].key.type&&(u=m(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===v.properties[A].key.type)){G=v.properties[A].key;var B="value"in G?G.value:null;"string"===typeof B||B instanceof String||(u=m(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=f(v.properties[A],w));if(""!==u)break}break;case "Property":if("Literal"!==
v.key.type&&"Identifier"!==v.key.type)return m(v,"SYNTAX","ONLYLITERAL");if("Identifier"!==v.key.type&&(u=f(v.key,w),""!==u))break;u=f(v.value,w)}return u}catch(E){throw E;}}function g(v,w){var u=m(v,"SYNTAX","UNREOGNISED"),A=null,G="";try{switch(v.type){case "VariableDeclarator":var B=null===v.init?"":g(v.init,w);if(""!==B)return B;"Identifier"===v.id.type&&(null===w.localScope?w.globalScope[v.id.name.toLowerCase()]={type:"any"}:w.localScope[v.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":A=
e(v.id.name.toLowerCase(),v);G=k(v,w);if(""!==G)return G;if(null!==w.localScope)return m(v,"SYNTAX","GLOBALFUNCTIONSONLY");A.isnative=!1;w.globalScope[v.id.name.toLowerCase()]={type:"FormulaFunction",signature:[A]};return"";case "VariableDeclaration":u="";for(var E=0;E<v.declarations.length&&(u=g(v.declarations[E],w),""===u);E++);break;case "IfStatement":u=g(v.test,w);if(""!==u)break;if("AssignmentExpression"===v.test.type||"UpdateExpression"===v.test.type)return m(v.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==v.consequent&&(u=g(v.consequent,w),""!==u))break;if(null!==v.alternate&&(u=g(v.alternate,w),""!==u))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<v.body.length;E++)if(u=g(v.body[E],w),""!==u)return u;return"";case "ReturnStatement":return null!==v.argument?g(v.argument,w):"";case "ForInStatement":if("VariableDeclaration"===v.left.type){if(1<v.left.declarations.length)return m(v,"SYNTAX","ONLY1VAR");if(null!==v.left.declarations[0].init)return m(v,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==v.left.type)return m(v,"SYNTAX","LEFTNOTVAR");u=g(v.left,w);if(""!==u)break;u=g(v.right,w);if(""!==u)break;u=g(v.body,w);if(""!==u)break;return"";case "ForStatement":if(null!==v.init&&(u=g(v.init,w),""!==u))break;if(null!==v.test&&(u=g(v.test,w),""!==u))break;if(null!==v.body&&(u=g(v.body,w),""!==u))break;if(null!==v.update&&(u=g(v.update,w),""!==u))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
v.argument.type&&"MemberExpression"!==v.argument.type)return m(v,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=!1;if("MemberExpression"===v.argument.type)return g(v.argument,w);null!==w.localScope&&void 0!==w.localScope[v.argument.name.toLowerCase()]&&(F=!0);void 0!==w.globalScope[v.argument.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+v.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==v.left.type&&"MemberExpression"!==v.left.type)return m(v,"SYNTAX","ASSIGNMENTTOVARSONLY");
var H=g(v.right,w);if(""!==H)return H;F=!1;if("MemberExpression"===v.left.type)return H=g(v.left,w),""!==H?H:"";null!==w.localScope&&void 0!==w.localScope[v.left.name.toLowerCase()]&&(F=!0);void 0!==w.globalScope[v.left.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+v.left.name+" has not been declared.":"";case "ExpressionStatement":return g(v.expression,w);case "Identifier":var L=v.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[L])return"";u=void 0!==w.globalScope[L]?"":
m(v,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":u=g(v.object,w);if(""!==u)break;return!0===v.computed?g(v.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==v.callee.type)return m(v,"SYNTAX","ONLYNODESSUPPORTED");u="";for(E=0;E<v.arguments.length;E++)if(u=g(v.arguments[E],w),""!==u)return u;var Q=b(v.callee.name,v.arguments,w);-1===Q&&(u=m(v,"SYNTAX","NOTFOUND"));-2===Q&&(u=m(v,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":u=
g(v.argument,w);break;case "BinaryExpression":u=g(v.left,w);if(""!==u)break;u=g(v.right,w);if(""!==u)break;return"";case "LogicalExpression":u=g(v.left,w);if(""!==u)break;if("AssignmentExpression"===v.left.type||"UpdateExpression"===v.left.type)return m(v.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");u=g(v.right,w);if(""!==u)break;return"AssignmentExpression"===v.right.type||"UpdateExpression"===v.right.type?m(v.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":u=
"";for(E=0;E<v.elements.length&&(u=g(v.elements[E],w),""===u);E++);break;case "TemplateLiteral":u="";for(E=0;E<v.quasis.length;E++)if(u=g(v.quasis[E],w),""!==u)return u;for(E=0;E<v.expressions.length&&(u=g(v.expressions[E],w),""===u);E++);break;case "ObjectExpression":u="";for(E=0;E<v.properties.length;E++){u="";if(null!==v.properties[E].key&&("Literal"!==v.properties[E].key.type&&"Identifier"!==v.properties[E].key.type&&(u=m(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===v.properties[E].key.type)){var aa=
v.properties[E].key,ca="value"in aa?aa.value:null;"string"===typeof ca||ca instanceof String||(u=m(v,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=g(v.properties[E],w));if(""!==u)break}break;case "Property":if("Literal"!==v.key.type&&"Identifier"!==v.key.type)return m(v,"SYNTAX","ONLYLITERAL");if("Identifier"!==v.key.type&&(u=g(v.key,w),""!==u))break;u=g(v.value,w)}return u}catch(ea){throw ea;}}function c(v,w){var u=!1,A=w.toLowerCase();h(v,function(G){if(u)return!1;"Identifier"===G.type&&G.name&&
G.name.toLowerCase()===A&&(u=!0);return!0});return u}function e(v,w){var u=[];if(void 0!==w.params&&null!==w.params)for(var A=0;A<w.params.length;A++)u.push("any");return{name:v,"return":"any",params:u}}function k(v,w){for(var u={globalScope:w.globalScope,localScope:{}},A=0;A<v.params.length;A++)u.localScope[v.params[A].name.toLowerCase()]={type:"any"};return g(v.body,u)}function l(v,w,u,A){var G={};if(void 0===v||null===v)v={};if(void 0===u||null===u)u={};G.infinity={type:"any"};G.textformatting=
{type:"any"};G.pi={type:"any"};for(var B in w)"sync"===A&&void 0!==w[B].min?G[B]={type:"FormulaFunction",signature:{min:w[B].min,max:w[B].max}}:"sync"!==A&&void 0!==w[B].fmin&&(G[B]={type:"FormulaFunction",signature:{min:w[B].fmin,max:w[B].fmax}});for(w=0;w<u.length;w++)B=u[w],G[B.name]={type:"FormulaFunction",signature:B};for(B in v)G[B]=v[B],G[B].type="any";return G}function m(v,w,u){var A="";switch(w){case "SYNTAX":A="Syntax Error: ";break;case "RUNTIME":A="Runtime Error: ";break;default:A="Syntax Error: "}try{switch(v.type){case "IfStatement":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":A+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":A+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(u){case "GLOBALFUNCTIONSONLY":A+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":A+=" Function Definition must have an identifier"}break;case "VariableDeclaration":A+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(u){case "FUNCTIONVARIABLEDECLARATOR":A+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":A+=" Variable Definition must have an identifier"}break;case "Identifier":A+=" Identifier Not Found. ";A+=v.name;break;case "ObjectExpression":switch(u){case "OBJECTPROPERTYMUSTBESTRING":A+=
" Property name must be a string"}break;case "ForStatement":switch(u){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(u){case "ONLY1VAR":A+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":A+=" Can only declare value for use with IN";break;case "LEFTNOVAR":A+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":A+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":A+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(u){case "PROPERTYNOTFOUND":A+="Cannot find member property. ";A+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "OUTOFBOUNDS":A+="Out of Bounds. ";A+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "NOTFOUND":A+="Cannot call member method on null. ";A+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":"";break;case "INVALIDTYPE":A+="Cannot call member property on object of this type. ",
A+=!1===v.computed?"Identifier"===v.property.type?v.property.name:"":""}break;case "Property":switch(u){case "ONLYLITERAL":A+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(u){case "WRONGSIGNATURE":A+="Function signature does not match: ";A+="Identifier"===v.callee.type?v.callee.name:"";break;case "ONLYNODESUPPORTED":A+="Functions must be declared.";A+="Identifier"===v.callee.type?v.callee.name:"";break;case "NOTAFUNCTION":A+="Not a Function: ";
A+="Identifier"===v.callee.type?v.callee.name:"";break;case "NOTFOUND":A+="Function Not Found: "+("Identifier"===v.callee.type?v.callee.name:"")}break;case "UnaryExpression":switch(u){case "NOTSUPPORTEDUNARYOPERATOR":A+="Operator "+v.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":A+="Unary operator "+v.operator+" cannot be used with this argument."}case "BinaryExpression":switch(u){case "OPERATORNOTRECOGNISED":A+="Binary Operator not recognised "+
v.operator}break;case "LogicalExpression":switch(u){case "ONLYBOOLEAN":A+="Operator "+v.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":A+="Logical Expression "+v.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(u){case "FUNCTIONCONTEXTILLEGAL":A+=" Cannot Put Function inside Array."}break;default:A+="Expression contains unrecognised code structures."}}catch(G){throw G;}return A}function n(v,w,u){return{line:v.loc.start.line,
character:v.loc.start.column,reason:m(v,w,u)}}function p(v,w,u,A){w={globalScope:w.globalScope,localScope:{}};for(var G=0;G<v.params.length;G++)w.localScope[v.params[G].name.toLowerCase()]={type:"any"};t(v.body,w,u,A,!1)}function t(v,w,u,A,G){void 0===G&&(G=!0);if(null===v)throw Error("Unnexpexted Expression Syntax");var B=null;try{switch(v.type){case "VariableDeclarator":"Identifier"!==v.id.type?A.push(n(v,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(v.id.name.toLowerCase(),null===w.localScope?w.globalScope[v.id.name.toLowerCase()]=
{type:"any"}:w.localScope[v.id.name.toLowerCase()]={type:"any"});null!==v.init&&t(v.init,w,u,A,G);break;case "FunctionDeclaration":!1===G&&A.push(n(v,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==v.id.type&&A.push(n(v,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));B=e("",v);p(v,w,u,A);null!==w.localScope&&A.push(n(v,"SYNTAX","GLOBALFUNCTIONSONLY"));B.isnative=!1;"Identifier"===v.id.type&&(w.globalScope[v.id.name.toLowerCase()]={type:"FormulaFunction",signature:[B]});break;case "VariableDeclaration":for(var E=
0;E<v.declarations.length;E++)t(v.declarations[E],w,u,A,G);break;case "IfStatement":null!==v.test&&(t(v.test,w,u,A,G),"AssignmentExpression"!==v.test.type&&"UpdateExpression"!==v.test.type||A.push(n(v.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==v.consequent&&t(v.consequent,w,u,A,G);null!==v.alternate&&t(v.alternate,w,u,A,G);break;case "EmptyStatement":break;case "BlockStatement":if(null!==v.body)for(E=0;E<v.body.length;E++)t(v.body[E],w,u,A,G);break;case "ReturnStatement":null!==
v.argument&&t(v.argument,w,u,A,G);break;case "ForInStatement":"VariableDeclaration"===v.left.type?(1<v.left.declarations.length&&A.push(n(v,"SYNTAX","ONLY1VAR")),null!==v.left.declarations[0].init&&A.push(n(v,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==v.left.type&&A.push(n(v,"SYNTAX","LEFTNOTVAR"));t(v.left,w,u,A,G);t(v.right,w,u,A,G);t(v.body,w,u,A,G);break;case "ForStatement":null!==v.init&&t(v.init,w,u,A,G);null!==v.test&&t(v.test,w,u,A,G);null!==v.body&&t(v.body,w,u,A,G);null!==v.update&&t(v.update,
w,u,A,G);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==v.argument.type&&"MemberExpression"!==v.argument.type)A.push(n(v,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===v.argument.type){var F=!1;!1===u&&(null!==w.localScope&&void 0!==w.localScope[v.argument.name.toLowerCase()]&&(F=!0),void 0!==w.globalScope[v.argument.name.toLowerCase()]&&(F=!0),!1===F&&A.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,
reason:"Identifier "+v.argument.name+" has not been declared."}))}"MemberExpression"===v.argument.type&&t(v.argument,w,u,A,G)}break;case "AssignmentExpression":"Identifier"!==v.left.type&&"MemberExpression"!==v.left.type&&A.push(n(v,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(v.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:A.push(n(v,"SYNTAX","OPERATORNOTRECOGNISED"))}t(v.right,w,u,A,G);F=!1;"Identifier"===v.left.type&&(null!==w.localScope&&void 0!==
w.localScope[v.left.name.toLowerCase()]&&(F=!0),void 0!==w.globalScope[v.left.name.toLowerCase()]&&(F=!0),!1===u&&!1===F&&A.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,reason:"Identifier "+v.left.name+" has not been declared."}));"MemberExpression"===v.left.type&&t(v.left,w,u,A,G);break;case "ExpressionStatement":t(v.expression,w,u,A,G);break;case "Identifier":var H=v.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[H]||void 0!==w.globalScope[H])break;
!1===u&&A.push(n(v,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":t(v.object,w,u,A,G);!0===v.computed&&t(v.property,w,u,A,G);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==v.callee.type&&A.push(n(v,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<v.arguments.length;E++)t(v.arguments[E],w,u,A,G);if("Identifier"===v.callee.type){var L=b(v.callee.name,v.arguments,w);!1===u&&-1===L&&A.push(n(v,"SYNTAX","NOTFOUND"));-2===L&&A.push(n(v,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":t(v.argument,w,u,A,G);break;case "BinaryExpression":t(v.left,w,u,A,G);t(v.right,w,u,A,G);switch(v.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:A.push(n(v,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(v.operator){case "\x26\x26":case "||":break;default:A.push(n(v,
"SYNTAX","OPERATORNOTRECOGNISED"))}t(v.left,w,u,A,G);"AssignmentExpression"!==v.left.type&&"UpdateExpression"!==v.left.type||A.push(n(v,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(v.right,w,u,A,G);"AssignmentExpression"!==v.right.type&&"UpdateExpression"!==v.right.type||A.push(n(v,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(E=0;E<v.elements.length;E++)t(v.elements[E],w,u,A,G);break;case "TemplateLiteral":for(E=0;E<v.quasis.length;E++)t(v.quasis[E],w,u,A,
G);for(E=0;E<v.expressions.length;E++)t(v.expressions[E],w,u,A,G);break;case "ObjectExpression":for(E=0;E<v.properties.length;E++)t(v.properties[E],w,u,A,G);break;case "Property":"Literal"!==v.key.type&&"Identifier"!==v.key.type&&A.push(n(v,"SYNTAX","ONLYLITERAL"));"Literal"===v.key.type&&t(v.key,w,u,A,G);t(v.value,w,u,A,G);break;default:A.push(n(v,"SYNTAX","UNRECOGNISED"))}}catch(Q){A.push({line:null===v?0:v.loc.start.line,character:null===v?0:v.loc.start.column,reason:"Unnexpected Syntax"})}}function r(v){var w=
[];h(v,function(u){"CallExpression"===u.type&&"Identifier"===u.callee.type&&w.push(u.callee.name.toLowerCase());return!0});return w}Object.defineProperty(q,"__esModule",{value:!0});q.scriptUsesFeatureSet=q.findScriptDependencies=q.findFunctionCalls=q.checkScript=q.extractAllIssues=q.extractAllIssuesInFunction=q.makeError=q.nodeErrorMessage=q.validateLanguage=q.validateScript=q.constructGlobalScope=q.validateFunction=q.extractFunctionDeclaration=q.findExpectedFieldLiterals=q.findFieldLiterals=q.referencesFunction=
q.referencesMember=q.testValidityOfExpression=q.validateLanguageNode=q.walk=q.findFunction=q.checkFunctionSignature=q.addFunctionDeclaration=q.functionDecls=void 0;q.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var y in q.functionDecls)q.functionDecls[y].fmin=q.functionDecls[y].min,q.functionDecls[y].fmax=q.functionDecls[y].max;var x="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
z="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");q.addFunctionDeclaration=function(v,w){var u=q.functionDecls[v.name.toLowerCase()];void 0===u?"sync"===w?q.functionDecls[v.name.toLowerCase()]={min:v.min,max:v.max}:q.functionDecls[v.name.toLowerCase()]=
{fmin:v.min,fmax:v.max}:"sync"===w?(u.min=v.min,u.max=v.max):(u.fmin=v.min,u.fmax=v.max)};q.checkFunctionSignature=a;q.findFunction=b;q.walk=h;q.validateLanguageNode=f;q.testValidityOfExpression=g;q.referencesMember=c;q.referencesFunction=function(v,w){var u=!1,A=w.toLowerCase();h(v,function(G){return u?!1:"CallExpression"===G.type&&"Identifier"===G.callee.type&&G.callee.name&&G.callee.name.toLowerCase()===A?(u=!0,!1):!0});return u};q.findFieldLiterals=function(v){var w=[];h(v,function(u){if("MemberExpression"!==
u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?w.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===typeof u.property.value&&w.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());return!1});return w};q.findExpectedFieldLiterals=function(v){var w=[];h(v,function(u){if("CallExpression"===
u.type&&"Identifier"===u.callee.type&&"expects"===u.callee.name.toLowerCase()){for(var A="",G=0;G<(u.arguments||[]).length;G++)if(0===G)"Identifier"===u.arguments[G].type&&(A=u.arguments[G].name.toLowerCase());else{var B;if(B=A&&"Literal"===u.arguments[G].type)B=u.arguments[G].value,B="string"===typeof B||B instanceof String;B&&w.push(A+"."+u.arguments[G].value.toLowerCase())}return!1}if("MemberExpression"!==u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&
"Identifier"===u.property.type&&u.property.name?w.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===typeof u.property.value&&w.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());return!1});return w};q.extractFunctionDeclaration=e;q.validateFunction=k;q.constructGlobalScope=l;q.validateScript=function(v,w,u,A){void 0===u&&(u="async");void 0===A&&(A=q.functionDecls);w={globalScope:l(w.vars,
A,w.customFunctions,u),localScope:null};return g(v.body[0].body,w)};q.validateLanguage=function(v){return"BlockStatement"!==v.body[0].body.type?"Invalid formula content.":f(v.body[0].body)};q.nodeErrorMessage=m;q.makeError=n;q.extractAllIssuesInFunction=p;q.extractAllIssues=t;q.checkScript=function(v,w,u,A,G){void 0===A&&(A="async");void 0===G&&(G=q.functionDecls);var B=[];if("BlockStatement"!==v.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===w||void 0===w)w={vars:{},
customFunctions:[]};w={globalScope:l(w.vars,G,w.customFunctions,A),localScope:null};try{t(v.body[0].body,w,u,B)}catch(E){}return B};q.findFunctionCalls=r;q.findScriptDependencies=function(v,w){void 0===w&&(w=[]);var u=null;if(void 0===v.usesFeatureSet){null===u&&(u=r(v));v.usesFeatureSet=!1;for(var A=0;A<u.length;A++)-1<x.indexOf(u[A])&&(v.usesFeatureSet=!0,v.isAsync=!0);if(!1===v.usesFeatureSet&&w&&0<w.length){A=0;for(var G=w;A<G.length;A++)if(c(v,G[A])){v.usesFeatureSet=!0;v.isAsync=!0;break}}}if(void 0===
v.usesGeometry)for(v.usesGeometry=!1,null===u&&(u=r(v)),A=0;A<u.length;A++)-1<z.indexOf(u[A])&&(v.usesGeometry=!0)};q.scriptUsesFeatureSet=function(v){v=r(v);for(var w=0;w<v.length;w++)if(-1<x.indexOf(v[w]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),function(D,q,a,b,d,h){Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=
function(f){function g(e,k){if(k instanceof a)return f.arcadeCustomFunctionHandler(k);if(k instanceof d.NativeFunction)return function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];return k.fn(e,{preparsed:!0,arguments:l})};if(k instanceof d.SizzleFunction)return function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];if(l.length!==k.paramCount)throw Error("Invalid parameters");return k.fn.apply(k,l)};throw Error("Invalid Parameter");}function c(e){if(e instanceof b)return e.toArray();
if(d.isArray(e))return e;throw Error("Invalid Parameter");}f.functions.array=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,1,2);l=d.toNumber(n[0]);if(isNaN(l)||!1===d.isInteger(l))throw Error("Invalid Parameter");n=d.defaultUndefined(n[1],null);l=Array(l);l.fill(n);return l})};f.functions.front=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,1,1);if(d.isImmutableArray(n[0])){if(0>=n[0].length())throw Error("Array is empty");return n[0].get(0)}if(d.isArray(n[0])){if(0>=
n[0].length)throw Error("Array is empty");return n[0][0]}throw Error("Invalid Parameter");})};f.functions.back=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,1,1);if(d.isImmutableArray(n[0])){if(0>=n[0].length())throw Error("Array is empty");return n[0].get(n[0].length()-1)}if(d.isArray(n[0])){if(0>=n[0].length)throw Error("Array is empty");return n[0][n[0].length-1]}throw Error("Invalid Parameter");})};f.functions.push=function(e,k){return f.standardFunction(e,k,function(l,
m,n){d.pcCheck(n,1,2);if(d.isArray(n[0]))return n[0][n[0].length]=n[1],n[0].length;throw Error("Invalid Parameter");})};f.functions.pop=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,1,1);if(d.isArray(n[0])){if(0>=n[0].length)throw Error("Array is empty");l=n[0][n[0].length-1];--n[0].length;return l}throw Error("Invalid Parameter");})};f.functions.erase=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);if(d.isArray(n[0])){l=d.toNumber(n[1]);if(isNaN(l)||
!1===d.isInteger(l))throw Error("Invalid Parameter");n=n[0];if(0>=n.length)throw Error("Array is empty");0>l&&(l=n.length+l);if(0>l)throw Error("Element not found");if(l>=n.length)throw Error("Index is greater than array");n.splice(l,1);return d.voidOperation}throw Error("Invalid Parameter");})};f.functions.insert=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,3,3);if(d.isArray(n[0])){l=d.toNumber(n[1]);if(isNaN(l)||!1===d.isInteger(l))throw Error("Invalid Parameter");m=n[2];
n=n[0];if(l>n.length)throw Error("Index is greater than array");if(0>l&&l<-1*n.length)throw Error("Index is greater than array");if(l===n.length)return n[l]=m,d.voidOperation;n.splice(l,0,m);return d.voidOperation}throw Error("Invalid Parameter");})};f.functions.resize=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,3);if(d.isArray(n[0])){m=d.toNumber(n[1]);if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");if(0>m)throw Error("Size cannot be negative");l=d.defaultUndefined(n[2],
null);n=n[0];if(n.length>=m)return n.length=m,d.voidOperation;var p=n.length;n.length=m;for(m=p;m<n.length;m++)n[m]=l;return d.voidOperation}throw Error("Invalid Parameter");})};f.functions.includes=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);if(d.isArray(n[0])){var p=n[1];l=n[0];return-1<l.findIndex(function(r){return d.equalityTest(r,p)})?!0:!1}if(d.isImmutableArray(n[0])){var t=n[1];l=n[0].toArray();return-1<l.findIndex(function(r){return d.equalityTest(r,t)})?
!0:!1}throw Error("Invalid Parameter");})};f.functions.slice=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,1,3);if(d.isArray(n[0])){l=d.toNumber(d.defaultUndefined(n[1],0));m=d.toNumber(d.defaultUndefined(n[2],n[0].length));if(isNaN(l)||!1===d.isInteger(l))throw Error("Invalid Parameter");if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");var p=n[0];return p.slice(l,m)}if(d.isImmutableArray(n[0])){p=n[0];l=d.toNumber(d.defaultUndefined(n[1],0));m=d.toNumber(d.defaultUndefined(n[2],
p.length()));if(isNaN(l)||!1===d.isInteger(l))throw Error("Invalid Parameter");if(isNaN(m)||!1===d.isInteger(m))throw Error("Invalid Parameter");return p.toArray().slice(l,m)}throw Error("Invalid Parameter");})};f.functions.splice=function(e,k){return f.standardFunction(e,k,function(l,m,n){l=[];for(m=0;m<n.length;m++)d.isArray(n[m])?l.push.apply(l,n[m]):d.isImmutableArray(n[m])?l.push.apply(l,n[m].toArray()):l.push(n[m]);return l})};"sync"===f.mode&&(f.functions.any=function(e,k){return f.standardFunction(e,
k,function(l,m,n){d.pcCheck(n,2,2);l=g(e,n[1]);m=0;for(n=c(n[0]);m<n.length;m++){var p=l(n[m]);if(d.isBoolean(p)&&!0===p)return!0}return!1})},f.functions.all=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);l=g(e,n[1]);m=0;for(n=c(n[0]);m<n.length;m++)if(!0!==l(n[m]))return!1;return!0})},f.functions.none=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);l=g(e,n[1]);m=0;for(n=c(n[0]);m<n.length;m++)if(!0===l(n[m]))return!1;return!0})},f.functions.reduce=
function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,3);var p=g(e,n[1]);l=c(n[0]);return 2===n.length?0===l.length?null:l.reduce(function(t,r){var y=p(t,r);return t=void 0!==y&&y!==d.voidOperation?y:null}):l.reduce(function(t,r){var y=p(t,r);return t=void 0!==y&&y!==d.voidOperation?y:null},n[2])})},f.functions.map=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);l=g(e,n[1]);m=[];var p=0;for(n=c(n[0]);p<n.length;p++){var t=l(n[p]);void 0!==t&&t!==d.voidOperation?
m.push(t):m.push(null)}return m})},f.functions.filter=function(e,k){return f.standardFunction(e,k,function(l,m,n){d.pcCheck(n,2,2);l=g(e,n[1]);m=[];var p=0;for(n=c(n[0]);p<n.length;p++){var t=n[p];!0===l(t)&&m.push(t)}return m})});"async"===f.mode&&(f.functions.any=function(e,k){return f.standardFunctionAsync(e,k,function(l,m,n){d.pcCheck(n,2,2);var p=g(e,n[1]),t=!1;return c(n[0]).reduce(function(r,y,x){return r.then(function(z){0<x&&!0===z&&(t=!0);if(!0===t)return h.resolve(!0);z=p(y);return h.isPromiseLike(z)?
z:h.resolve(z)})},Promise.resolve(!1)).then(function(r){!0===r&&(t=!0);return t})})},f.functions.all=function(e,k){return f.standardFunctionAsync(e,k,function(l,m,n){d.pcCheck(n,2,2);var p=g(e,n[1]),t=!0;return c(n[0]).reduce(function(r,y,x){return r.then(function(z){0<x&&!0!==z&&(t=!1);if(!1===t)return h.resolve(!1);z=p(y);return h.isPromiseLike(z)?z:h.resolve(z)})},Promise.resolve(!0)).then(function(r){!0!==r&&(t=!1);return t})})},f.functions.none=function(e,k){return f.standardFunctionAsync(e,
k,function(l,m,n){d.pcCheck(n,2,2);var p=g(e,n[1]),t=!0;return c(n[0]).reduce(function(r,y,x){return r.then(function(z){0<x&&!0===z&&(t=!1);if(!1===t)return h.resolve(!0);z=p(y);return h.isPromiseLike(z)?z:h.resolve(z)})},Promise.resolve(!1)).then(function(r){!0===r&&(t=!1);return t})})},f.functions.filter=function(e,k){return f.standardFunctionAsync(e,k,function(l,m,n){d.pcCheck(n,2,2);var p=g(e,n[1]),t=c(n[0]),r=[];return t.reduce(function(y,x,z){return y.then(function(v){0<z&&!0===v&&r.push(t[z-
1]);v=p(x);return h.isPromiseLike(v)?v:h.resolve(v)})},Promise.resolve(!1)).then(function(y){!0===y&&0<t.length&&r.push(t[t.length-1]);return r})})},f.functions.reduce=function(e,k){return f.standardFunctionAsync(e,k,function(l,m,n){d.pcCheck(n,2,3);var p=g(e,n[1]);l=c(n[0]);m=null;if(2<n.length)n=d.defaultUndefined(n[2],null),m=l.reduce(function(t,r){return t.then(function(y){if(void 0===y||y===d.voidOperation)y=null;y=p(y,r);return h.isPromiseLike(y)?y:h.resolve(y)})},Promise.resolve(n));else{if(0===
l.length)return null;m=l.reduce(function(t,r,y){return 1>=y?(t=p(t,r),h.isPromiseLike(t)?t:h.resolve(t)):t.then(function(x){if(void 0===x||x===d.voidOperation)x=null;x=p(x,r);return h.isPromiseLike(x)?x:h.resolve(x)})})}return m.then(function(t){return void 0!==t&&t!==d.voidOperation?t:null})})},f.functions.map=function(e,k){return f.standardFunctionAsync(e,k,function(l,m,n){d.pcCheck(n,2,2);var p=g(e,n[1]),t=c(n[0]),r=[];return t.reduce(function(y,x,z){return y.then(function(v){0<z&&(void 0!==v&&
v!==d.voidOperation?r.push(v):r.push(null));v=p(x);return h.isPromiseLike(v)?v:h.resolve(v)})},Promise.resolve()).then(function(y){0<t.length&&(void 0!==y&&y!==d.voidOperation?r.push(y):r.push(null));return r})})})}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,q,a,b,d){function h(k){k=new Date(k.getTime());var l=k.getFullYear(),m=new Date(0);m.setFullYear(l+1,0,4);m.setHours(0,0,0,0);m=f(m);var n=
new Date(0);n.setFullYear(l,0,4);n.setHours(0,0,0,0);n=f(n);return k.getTime()>=m.getTime()?l+1:k.getTime()>=n.getTime()?l:l-1}function f(k){k=new Date(k.getTime());var l=k.getDay();l=(1>l?7:0)+l-1;k.setDate(k.getDate()-l);k.setHours(0,0,0,0);return k}function g(k){return null===k?k:isNaN(k.getTime())?null:k}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;var c=[0,31,59,90,120,151,181,212,243,273,304,334],e=[0,31,60,91,121,152,182,213,244,274,305,335];q.registerFunctions=
function(k,l){k.today=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,0,0);p=new Date;p.setHours(0,0,0,0);return p})};k.now=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,0,0);return new Date})};k.timestamp=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,0,0);p=new Date;return p=new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())})};k.toutc=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,
1,1);p=a.toDate(r[0]);return null===p?null:new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())})};k.tolocal=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?null:b.DateTime.utc(p.getFullYear(),p.getMonth()+1,p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()).toJSDate()})};k.day=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);
return null===p?NaN:p.getDate()})};k.month=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMonth()})};k.year=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getFullYear()})};k.hour=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getHours()})};k.second=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?
NaN:p.getSeconds()})};k.millisecond=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMilliseconds()})};k.minute=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMinutes()})};k.week=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,2);p=a.toDate(r[0]);if(null===p)return NaN;r=a.toNumber(a.defaultUndefined(r[1],0));if(0>r||6<r)throw Error("Invalid Parameter");t=p.getDate();var y=p.getMonth(),
x=p.getFullYear();p=p.getDay();t=t+(0!==x%4||0===x%100&&0!==x%400?c:e)[y]-1;y=Math.floor(t/7);return p-r+(0>p-r?7:0)<t-7*y?y+1:y})};k.weekday=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getDay()})};k.isoweekday=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);if(null===p)return NaN;p=p.getDay();0===p&&(p=7);return p})};k.isomonth=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===
p?NaN:p.getMonth()+1})};k.isoweek=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);t=a.toDate(r[0]);if(null===t)return NaN;p=f(t).getTime();t=h(t);r=new Date(0);r.setFullYear(t,0,4);r.setHours(0,0,0,0);t=f(r);p-=t.getTime();return Math.round(p/6048E5)+1})};k.isoyear=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:h(p)})};k.date=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,0,7);if(3===r.length)return g(new Date(a.toNumber(r[0]),
a.toNumber(r[1]),a.toNumber(r[2]),0,0,0,0));if(4===r.length)return g(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),0,0,0));if(5===r.length)return g(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),a.toNumber(r[4]),0,0));if(6===r.length)return g(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),a.toNumber(r[4]),a.toNumber(r[5]),0));if(7===r.length)return g(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),
a.toNumber(r[3]),a.toNumber(r[4]),a.toNumber(r[5]),a.toNumber(r[6])));if(2===r.length){p=a.toString(r[1]);if(""===p)return null;p=a.standardiseDateFormat(p);t=void 0;t="X"===p?b.DateTime.fromSeconds(a.toNumber(r[0])):"x"===p?b.DateTime.fromMillis(a.toNumber(r[0])):b.DateTime.fromFormat(a.toString(r[0]),p,{locale:d.locale,numberingSystem:"latn"});return t.isValid?t.toJSDate():null}if(1===r.length){if(a.isString(r[0])){if(""===r[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===
/^[0-9][0-9][0-9][0-9]$/.test(r[0]))return a.toDate(r[0]+"-01-01")}p=a.toNumber(r[0]);return!1===isNaN(p)?g(new Date(p)):a.toDate(r[0])}if(0===r.length)return new Date})};k.datediff=function(m,n){return l(m,n,function(p,t,r){a.pcCheck(r,2,3);p=a.toDateTime(r[0]);t=a.toDateTime(r[1]);if(null===p||null===t)return NaN;switch(a.toString(r[2]).toLowerCase()){case "days":case "day":case "d":return p.diff(t,"days").days;case "months":case "month":return p.diff(t,"months").months;case "minutes":case "minute":case "m":return"M"===
r[2]?p.diff(t,"months").months:p.diff(t,"minutes").minutes;case "seconds":case "second":case "s":return p.diff(t,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return p.diff(t).milliseconds;case "hours":case "hour":case "h":return p.diff(t,"hours").hours;case "years":case "year":case "y":return p.diff(t,"years").years;default:return p.diff(t).milliseconds}})};k.dateadd=function(m,n){return l(m,n,function(p,t,r){var y;a.pcCheck(r,2,3);p=a.toDateTime(r[0]);if(null===p)return null;
t=a.toNumber(r[1]);if(isNaN(t))return p.toJSDate();var x="milliseconds";switch(a.toString(r[2]).toLowerCase()){case "days":case "day":case "d":x="days";t=a.absRound(t);break;case "months":case "month":x="months";t=a.absRound(t);break;case "minutes":case "minute":case "m":x="M"===r[2]?"months":"minutes";break;case "seconds":case "second":case "s":x="seconds";break;case "milliseconds":case "millisecond":case "ms":x="milliseconds";break;case "hours":case "hour":case "h":x="hours";break;case "years":case "year":case "y":x=
"years"}return p.plus((y={},y[x]=t,y)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m,n){function p(t){return t&&(t instanceof b||"object"===typeof t&&"FeatureSetReader"===t.type)}
Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(t,r){t.ringisclockwise=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=[];if(null===w[0])return!1;if(h.isArray(w[0])){var u=0;for(w=w[0];u<w.length;u++)if(v=w[u],v instanceof e)z.push([v.x,v.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof d)z=w[0]._elements;else if(h.isImmutableArray(w[0])){u=0;for(var A=w[0].toArray();u<A.length;u++)if(v=A[u],v instanceof e)z.push([v.x,
v.y]);else throw Error("Invalid Argument");0<z.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>z.length?!1:(new k({rings:[],spatialReference:{wkid:4326}})).isClockwise(z)})};t.polygon=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof k)throw Error("Illegal Parameter");}else z=w[0]instanceof k?n.fromJson(w[0].toJson()):h.fixSpatialReference(new k(JSON.parse(w[0])),
y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.polyline=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof l)throw Error("Illegal Parameter");}else z=w[0]instanceof l?n.fromJson(w[0].toJson()):
h.fixSpatialReference(new l(JSON.parse(w[0])),y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.point=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof e)throw Error("Illegal Parameter");
}else z=w[0]instanceof e?n.fromJson(w[0].toJson()):h.fixSpatialReference(new e(JSON.parse(w[0])),y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.multipoint=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),
!1===z instanceof c)throw Error("Illegal Parameter");}else z=w[0]instanceof c?n.fromJson(w[0].toJson()):h.fixSpatialReference(new c(JSON.parse(w[0])),y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.extent=function(y,x){return r(y,x,function(z,v,w){w=h.autoCastFeatureToGeometry(w);h.pcCheck(w,1,1);z=null;w[0]instanceof a?
z=h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference):w[0]instanceof e?(z={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(z.zmin=w.z,z.zmax=w.z):w.hasM&&(z.mmin=w.m,z.mmax=w.m),z=n.fromJson(z)):z=w[0]instanceof k?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof l?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof c?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof f?n.fromJson(w[0].toJson()):h.fixSpatialReference(new f(JSON.parse(w[0])),
y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.geometry=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,1,1);z=null;if(null===w[0])return null;z=p(w[0])?h.fixSpatialReference(w[0].geometry(),y.spatialReference):w[0]instanceof a?h.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference):h.fixSpatialReference(n.fromJson(JSON.parse(w[0])),
y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(z)})};t.setgeometry=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,2,2);if(p(w[0])){if(!0===w[0].immutable)throw Error("Feature is Immutable");if(w[1]instanceof g||null===w[1])w[0]._geometry=w[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return h.voidOperation})};
t.feature=function(y,x){return r(y,x,function(z,v,w){if(0===w.length)throw Error("Missing Parameters");z=null;if(1===w.length)if(h.isString(w[0]))z=b.fromJson(JSON.parse(w[0]));else if(p(w[0]))z=b.createFromArcadeFeature(w[0]);else if(w[0]instanceof g)z=b.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof a)z=w[0].hasField("geometry")?w[0].field("geometry"):null,v=w[0].hasField("attributes")?w[0].field("attributes"):null,null!==z&&z instanceof a&&(z=b.parseGeometryFromDictionary(z)),
null!==v&&(v=b.parseAttributesFromDictionary(v)),z=b.createFromGraphicLikeObject(z,v,null);else throw Error("Illegal Argument");else{if(2===w.length){v=z=null;if(null!==w[0])if(w[0]instanceof g)z=w[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof a)v=b.parseAttributesFromDictionary(w[1]);else throw Error("Illegal Argument");}else{z=null;v={};if(null!==w[0])if(w[0]instanceof g)z=w[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(w[0]);
else throw Error("Illegal Argument");for(var u=1;u<w.length;u+=2){var A=h.toString(w[u]),G=w[u+1];if(null===G||void 0===G||h.isString(G)||isNaN(G)||h.isDate(G)||h.isNumber(G)||h.isBoolean(G)){if(h.isFunctionParameter(G)||!1===h.isSimpleType(G))throw Error("Illegal Argument");v[A]=G===h.voidOperation?null:G}else throw Error("Illegal Argument");}}z=b.createFromGraphicLikeObject(z,v,null)}z._geometry=h.fixSpatialReference(z.geometry(),y.spatialReference);z.immutable=!1;return z})};t.dictionary=function(y,
x){return r(y,x,function(z,v,w){if(0===w.length)return w=new a,w.immutable=!1,w;if(1===w.length&&h.isString(w[0]))try{var u=JSON.parse(w[0]),A=a.convertObjectToArcadeDictionary(u,!1);A.immutable=!1;return A}catch(G){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");z={};for(v=0;v<w.length;v+=2)if(u=h.toString(w[v]),A=w[v+1],null===A||void 0===A||h.isString(A)||isNaN(A)||h.isDate(A)||h.isNumber(A)||h.isBoolean(A)||h.isArray(A)||h.isImmutableArray(A)){if(h.isFunctionParameter(A))throw Error("Illegal Argument");
z[u]=A===h.voidOperation?null:A}else throw Error("Illegal Argument");w=new a(z);w.immutable=!1;return w})};t.haskey=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,2,2);z=h.toString(w[1]);if(p(w[0])||w[0]instanceof a)return w[0].hasField(z);throw Error("Illegal Argument");})};t.indexof=function(y,x){return r(y,x,function(z,v,w){h.pcCheck(w,2,2);z=w[1];if(h.isArray(w[0])){for(v=0;v<w[0].length;v++)if(h.equalityTest(z,w[0][v]))return v;return-1}if(h.isImmutableArray(w[0])){var u=w[0].length();
for(v=0;v<u;v++)if(h.equalityTest(z,w[0].get(v)))return v;return-1}throw Error("Illegal Argument");})};t.angle=function(y,x){return r(y,x,function(z,v,w){w=h.autoCastFeatureToGeometry(w);h.pcCheck(w,2,3);if(!(w[0]instanceof e))throw Error("Illegal Argument");if(!(w[1]instanceof e))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof e))throw Error("Illegal Argument");return 2===w.length?m.angle2D(w[0],w[1]):m.angleBetween2D(w[0],w[1],w[2])})};t.bearing=function(y,x){return r(y,x,function(z,
v,w){w=h.autoCastFeatureToGeometry(w);h.pcCheck(w,2,3);if(!(w[0]instanceof e))throw Error("Illegal Argument");if(!(w[1]instanceof e))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof e))throw Error("Illegal Argument");return 2===w.length?m.bearing2D(w[0],w[1]):m.bearingBetween2D(w[0],w[1],w[2])})};t.isselfintersecting=function(y,x){return r(y,x,function(z,v,w){w=h.autoCastFeatureToGeometry(w);h.pcCheck(w,1,1);z=w[0];if(z instanceof k)return z.isSelfIntersecting(z);if(z instanceof l)return z=
z.paths,m.pathsSelfIntersecting(z);if(z instanceof c)for(v=z.points,w=0;w<v.length;w++)for(var u=0;u<v.length;u++)if(u!==w){for(var A=!0,G=0;G<v[w].length;G++)if(v[w][G]!==v[u][G]){A=!1;break}if(!0===A)return!0}return h.isArray(z)||h.isImmutableArray(z)?(z=h.autoCastArrayOfPointsToPolyline(z,y.spatialReference),null!==z&&(z=z.paths),m.pathsSelfIntersecting(z)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,q,a){function b(k,l,m){var n=
{x:0,y:0};l&&(n.z=0);m&&(n.m=0);for(var p=0,t=k[0],r=0;r<k.length;r++){var y=k[r];a:if(y.length!==t.length)var x=!1;else{for(x=0;x<y.length;x++)if(y[x]!==t[x]){x=!1;break a}x=!0}if(!1===x){x=d(t,y,l);var z=y,v=l,w=m,u={x:(t[0]+z[0])/2,y:(t[1]+z[1])/2};v&&(u.z=(t[2]+z[2])/2);v&&w?u.m=(t[3]+z[3])/2:w&&(u.m=(t[2]+z[2])/2);t=u;t.x*=x;t.y*=x;n.x+=t.x;n.y+=t.y;l&&(t.z*=x,n.z+=t.z);m&&(t.m*=x,n.m+=t.m);p+=x;t=y}}0<p?(n.x/=p,n.y/=p,l&&(n.z/=p),m&&(n.m/=p)):(n.x=k[0][0],n.y=k[0][1],l&&(n.z=k[0][2]),m&&l?n.m=
k[0][3]:m&&(n.m=k[0][2]));return n}function d(k,l,m){var n=l[0]-k[0];k=l[1]-k[1];return m?(l=l[2]-l[2],Math.sqrt(n*n+k*k+l*l)):Math.sqrt(n*n+k*k)}function h(k,l,m){for(void 0===m&&(m=0);k<m;)k+=l;for(m+=l;k>=m;)k-=l;return k}function f(k,l){return Math.atan2(l.y-k.y,l.x-k.x)}function g(k,l,m){var n=k.x-l.x;k=k.y-l.y;var p=m.x-l.x;l=m.y-l.y;return Math.atan2(n*l-p*k,n*p+k*l)}function c(k,l,m,n,p){var t=k[0];k=k[1];var r=l[0];l=l[1];var y=m[0],x=m[1];m=n[0]-y;y=t-y;var z=r-t;n=n[1]-x;x=k-x;var v=l-
k,w=n*z-m*v;if(0===w)return!1;m=(m*x-n*y)/w;y=(z*x-v*y)/w;return 0<=m&&1>=m&&0<=y&&1>=y?(p&&(p[0]=t+m*(r-t),p[1]=k+m*(l-k)),!0):!1}Object.defineProperty(q,"__esModule",{value:!0});q.pathsSelfIntersecting=q.bearingBetween2D=q.angleBetween2D=q.angleBetweenRad=q.bearing2D=q.angle2D=q.angleRad=q.centroidMultiPoint=q.centroidPolyline=void 0;q.centroidPolyline=function(k){for(var l={x:0,y:0,spatialReference:k.spatialReference.toJson()},m={x:0,y:0,spatialReference:k.spatialReference.toJson()},n=0,p=0,t=
0;t<k.paths.length;t++)if(0!==k.paths[t].length){var r=k.paths[t];var y=!0===k.hasZ;if(1>=r.length)r=0;else{for(var x=0,z=1;z<r.length;z++)x+=d(r[z-1],r[z],y);r=x}0===r?(y=b(k.paths[t],!0===k.hasZ,!0===k.hasM),l.x+=y.x,l.y+=y.y,!0===k.hasZ&&(l.z+=y.z),!0===k.hasM&&(l.m+=y.m),++n):(y=b(k.paths[t],!0===k.hasZ,!0===k.hasM),m.x+=y.x*r,m.y+=y.y*r,!0===k.hasZ&&(m.z+=y.z*r),!0===k.hasM&&(m.m+=y.m*r),p+=r)}return 0<p?(m.x/=p,m.y/=p,!0===k.hasZ&&(m.z/=p),!0===k.hasM&&(m.m/=p),new a(m)):0<n?(l.x/=n,l.y/=n,
!0===k.hasZ&&(m.z/=n),!0===k.hasM&&(l.m/=n),new a(l)):null};q.centroidMultiPoint=function(k){if(0===k.points.length)return null;for(var l=0,m=0,n=0,p=0,t=0;t<k.points.length;t++){var r=k.getPoint(t);!0===r.hasZ&&(n+=r.z);!0===r.hasM&&(p+=r.m);l+=r.x;m+=r.y;p+=r.m}l={x:l/k.points.length,y:m/k.points.length,spatialReference:null};l.spatialReference=k.spatialReference.toJson();!0===k.hasZ&&(l.z=n/k.points.length);!0===k.hasM&&(l.m=p/k.points.length);return new a(l)};q.angleRad=f;q.angle2D=function(k,
l){return h(f(k,l),2*Math.PI)*(180/Math.PI)};q.bearing2D=function(k,l){return h(Math.PI/2-f(k,l),2*Math.PI)*(180/Math.PI)};q.angleBetweenRad=g;q.angleBetween2D=function(k,l,m){return h(g(k,l,m),2*Math.PI)*(180/Math.PI)};q.bearingBetween2D=function(k,l,m){return h(-1*g(k,l,m),2*Math.PI)*(180/Math.PI)};var e=[0,0];q.pathsSelfIntersecting=function(k){for(var l=0;l<k.length;l++){for(var m=k[l],n=0;n<m.length-1;n++)for(var p=m[n],t=m[n+1],r=l+1;r<k.length;r++)for(var y=0;y<k[r].length-1;y++){var x=k[r][y],
z=k[r][y+1],v=c(p,t,x,z,e);if(v&&!(e[0]===p[0]&&e[1]===p[1]||e[0]===x[0]&&e[1]===x[1]||e[0]===t[0]&&e[1]===t[1]||e[0]===z[0]&&e[1]===z[1]))return!0}y=m.length;if(!(3>y))for(n=0;n<=y-2;n++)for(p=m[n],t=m[n+1],r=n+2;r<=y-2;r++)if(x=m[r],z=m[r+1],(v=c(p,t,x,z,e))&&!(e[0]===p[0]&&e[1]===p[1]||e[0]===x[0]&&e[1]===x[1]||e[0]===t[0]&&e[1]===t[1]||e[0]===z[0]&&e[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m){function n(t){return 0===a.version.indexOf("4.")?k.fromExtent(t):new k({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=q.setGeometryEngine=void 0;var p=null;q.setGeometryEngine=function(t){p=t};q.registerFunctions=function(t,r){function y(x){d.pcCheck(x,2,2);if(!(x[0]instanceof g&&x[1]instanceof g||x[0]instanceof g&&
null===x[1]||x[1]instanceof g&&null===x[0]||null===x[0]&&null===x[1]))throw Error("Illegal Argument");}t.disjoint=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!0:p.disjoint(u[0],u[1])})};t.intersects=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:p.intersects(u[0],u[1])})};t.touches=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);
return null===u[0]||null===u[1]?!1:p.touches(u[0],u[1])})};t.crosses=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:p.crosses(u[0],u[1])})};t.within=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:p.within(u[0],u[1])})};t.contains=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:p.contains(u[0],u[1])})};
t.overlaps=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:p.overlaps(u[0],u[1])})};t.equals=function(x,z){return r(x,z,function(v,w,u){d.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof g&&u[1]instanceof g?p.equals(u[0],u[1]):d.isDate(u[0])&&d.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};t.relate=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,3,3);if(u[0]instanceof g&&u[1]instanceof
g)return p.relate(u[0],u[1],d.toString(u[2]));if(u[0]instanceof g&&null===u[1]||u[1]instanceof g&&null===u[0]||null===u[0]&&null===u[1])return!1;throw Error("Illegal Argument");})};t.intersection=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?null:p.intersect(u[0],u[1])})};t.union=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);v=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");
if(1===u.length)if(d.isArray(u[0]))for(u=d.autoCastFeatureToGeometry(u[0]),w=0;w<u.length;w++){if(null!==u[w]){if(!(u[w]instanceof g))throw Error("Illegal Argument");v.push(u[w])}}else if(d.isImmutableArray(u[0]))for(u=d.autoCastFeatureToGeometry(u[0].toArray()),w=0;w<u.length;w++){if(null!==u[w]){if(!(u[w]instanceof g))throw Error("Illegal Argument");v.push(u[w])}}else{if(u[0]instanceof g)return d.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");
}else for(w=0;w<u.length;w++)if(null!==u[w]){if(!(u[w]instanceof g))throw Error("Illegal Argument");v.push(u[w])}return 0===v.length?null:p.union(v)})};t.difference=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null!==u[0]&&null===u[1]?b.cloneGeometry(u[0]):null===u[0]?null:p.difference(u[0],u[1])})};t.symmetricdifference=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);y(u);return null===u[0]&&null===u[1]?null:null===u[0]?b.cloneGeometry(u[1]):
null===u[1]?b.cloneGeometry(u[0]):p.symmetricDifference(u[0],u[1])})};t.clip=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,2);if(!(u[1]instanceof f)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");return null===u[1]?null:p.clip(u[0],u[1])})};t.cut=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,2);if(!(u[1]instanceof l)&&null!==u[1])throw Error("Illegal Argument");
if(null===u[0])return[];if(!(u[0]instanceof g))throw Error("Illegal Argument");return null===u[1]?[b.cloneGeometry(u[0])]:p.cut(u[0],u[1])})};t.area=function(x,z){return r(x,z,function(v,w,u){d.pcCheck(u,1,2);u=d.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(d.isArray(u[0])||d.isImmutableArray(u[0]))return v=d.autoCastArrayOfPointsToPolygon(u[0],x.spatialReference),null===v?0:p.planarArea(v,b.convertSquareUnitsToCode(d.defaultUndefined(u[1],-1)));if(!(u[0]instanceof g))throw Error("Illegal Argument");
return p.planarArea(u[0],b.convertSquareUnitsToCode(d.defaultUndefined(u[1],-1)))})};t.areageodetic=function(x,z){return r(x,z,function(v,w,u){d.pcCheck(u,1,2);u=d.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(d.isArray(u[0])||d.isImmutableArray(u[0]))return v=d.autoCastArrayOfPointsToPolygon(u[0],x.spatialReference),null===v?0:p.geodesicArea(v,b.convertSquareUnitsToCode(d.defaultUndefined(u[1],-1)));if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.geodesicArea(u[0],b.convertSquareUnitsToCode(d.defaultUndefined(u[1],
-1)))})};t.length=function(x,z){return r(x,z,function(v,w,u){d.pcCheck(u,1,2);u=d.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(d.isArray(u[0])||d.isImmutableArray(u[0]))return v=d.autoCastArrayOfPointsToPolyline(u[0],x.spatialReference),null===v?0:p.planarLength(v,b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)));if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.planarLength(u[0],b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)))})};t.length3d=function(x,z){return r(x,
z,function(v,w,u){d.pcCheck(u,1,2);u=d.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(d.isArray(u[0])||d.isImmutableArray(u[0]))return v=d.autoCastArrayOfPointsToPolyline(u[0],x.spatialReference),null===v?0:p.planarLength(v,b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)));if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.planarLength(u[0],b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)))})};t.lengthgeodetic=function(x,z){return r(x,z,function(v,w,u){d.pcCheck(u,
1,2);u=d.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(d.isArray(u[0])||d.isImmutableArray(u[0]))return v=d.autoCastArrayOfPointsToPolyline(u[0],x.spatialReference),null===v?0:p.geodesicLength(v,b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)));if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.geodesicLength(u[0],b.convertLinearUnitsToCode(d.defaultUndefined(u[1],-1)))})};t.distance=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,
2,3);v=u[0];if(d.isArray(u[0])||d.isImmutableArray(u[0]))v=d.autoCastArrayOfPointsToMultiPoint(u[0],x.spatialReference);w=u[1];if(d.isArray(u[1])||d.isImmutableArray(u[1]))w=d.autoCastArrayOfPointsToMultiPoint(u[1],x.spatialReference);if(!(v instanceof g))throw Error("Illegal Argument");if(!(w instanceof g))throw Error("Illegal Argument");return p.distance(v,w,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1)))})};t.distancegeodetic=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);
d.pcCheck(u,2,3);v=u[0];w=u[1];if(!(v instanceof e))throw Error("Illegal Argument");if(!(w instanceof e))throw Error("Illegal Argument");var A=new l({paths:[],spatialReference:v.spatialReference});A.addPath([v,w]);return p.geodesicLength(A,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1)))})};t.densify=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");v=d.toNumber(u[1]);
if(isNaN(v))throw Error("Illegal Argument");if(0>=v)throw Error("Illegal Argument");return u[0]instanceof k||u[0]instanceof l?p.densify(u[0],v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1))):u[0]instanceof f?p.densify(n(u[0]),v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1))):u[0]})};t.densifygeodetic=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");v=d.toNumber(u[1]);
if(isNaN(v))throw Error("Illegal Argument");if(0>=v)throw Error("Illegal Argument");return u[0]instanceof k||u[0]instanceof l?p.geodesicDensify(u[0],v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1))):u[0]instanceof f?p.geodesicDensify(n(u[0]),v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1))):u[0]})};t.generalize=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");
v=d.toNumber(u[1]);if(isNaN(v))throw Error("Illegal Argument");return p.generalize(u[0],v,d.toBoolean(d.defaultUndefined(u[2],!0)),b.convertLinearUnitsToCode(d.defaultUndefined(u[3],-1)))})};t.buffer=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");v=d.toNumber(u[1]);if(isNaN(v))throw Error("Illegal Argument");return 0===v?b.cloneGeometry(u[0]):p.buffer(u[0],v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],
-1)))})};t.buffergeodetic=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");v=d.toNumber(u[1]);if(isNaN(v))throw Error("Illegal Argument");return 0===v?b.cloneGeometry(u[0]):p.geodesicBuffer(u[0],v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1)))})};t.offset=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,6);if(null===u[0])return null;
if(!(u[0]instanceof k||u[0]instanceof l))throw Error("Illegal Argument");v=d.toNumber(u[1]);if(isNaN(v))throw Error("Illegal Argument");w=d.toNumber(d.defaultUndefined(u[4],10));if(isNaN(w))throw Error("Illegal Argument");var A=d.toNumber(d.defaultUndefined(u[5],0));if(isNaN(A))throw Error("Illegal Argument");return p.offset(u[0],v,b.convertLinearUnitsToCode(d.defaultUndefined(u[2],-1)),d.toString(d.defaultUndefined(u[3],"round")).toLowerCase(),w,A)})};t.rotate=function(x,z){return r(x,z,function(v,
w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,2,3);v=u[0];if(null===v)return null;if(!(v instanceof g))throw Error("Illegal Argument");v instanceof f&&(v=k.fromExtent(v));w=d.toNumber(u[1]);if(isNaN(w))throw Error("Illegal Argument");u=d.defaultUndefined(u[2],null);if(null===u)return p.rotate(v,w);if(u instanceof e)return p.rotate(v,w,u);throw Error("Illegal Argument");})};t.centroid=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,1,1);if(null===u[0])return null;
v=u[0];if(d.isArray(u[0])||d.isImmutableArray(u[0]))v=d.autoCastArrayOfPointsToMultiPoint(u[0],x.spatialReference);if(null===v)return null;if(!(v instanceof g))throw Error("Illegal Argument");return v instanceof e?d.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference):v instanceof k?v.getCentroid():v instanceof l?h.centroidPolyline(v):v instanceof c?h.centroidMultiPoint(v):v instanceof f?v.getCenter():null})};t.multiparttosinglepart=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);
d.pcCheck(u,1,1);w=[];if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");if(u[0]instanceof e||u[0]instanceof f)return[d.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference)];v=p.simplify(u[0]);if(v instanceof k){w=[];var A=[];for(u=0;u<v.rings.length;u++)if(v.isClockwise(v.rings[u])){var G=m.fromJson({rings:[v.rings[u]],hasZ:!0===v.hasZ,hasM:!0===v.hasM,spatialReference:v.spatialReference.toJson()});w.push(G)}else A.push({ring:v.rings[u],pt:v.getPoint(u,0)});
for(v=0;v<A.length;v++)for(u=0;u<w.length;u++)if(w[u].contains(A[v].pt)){w[u].addRing(A[v].ring);break}return w}if(v instanceof l){w=[];for(u=0;u<v.paths.length;u++)A=m.fromJson({paths:[v.paths[u]],hasZ:!0===v.hasZ,hasM:!0===v.hasM,spatialReference:v.spatialReference.toJson()}),w.push(A);return w}if(u[0]instanceof c){v=d.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference);for(u=0;u<v.points.length;u++)w.push(v.getPoint(u));return w}return null})};t.issimple=function(x,z){return r(x,z,function(v,
w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.isSimple(u[0])})};t.simplify=function(x,z){return r(x,z,function(v,w,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof g))throw Error("Illegal Argument");return p.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,q,a,b){Object.defineProperty(q,
"__esModule",{value:!0});q.cloneGeometry=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=void 0;q.convertSquareUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;d=d.toLowerCase();d=d.replace(/\s/g,"");d=d.replace(/-/g,"");switch(d){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};q.shapeExtent=function(d){if(null===d)return null;switch(d.type){case "polygon":case "multipoint":case "polyline":return d.extent;
case "point":return new a({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference});case "extent":return d}return null};q.convertLinearUnitsToCode=function(d){if(void 0===d)return null;if("number"===typeof d)return d;d=d.toLowerCase();d=d.replace(/\s/g,"");d=d.replace(/-/g,"");switch(d){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};q.sameGeomType=function(d,h){return d===h||"point"===d&&"esriGeometryPoint"===h||"polyline"===d&&"esriGeometryPolyline"===h||"polygon"===d&&"esriGeometryPolygon"===h||"extent"===d&&"esriGeometryEnvelope"===
h||"multipoint"===d&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===d||"polyline"===h&&"esriGeometryPolyline"===d||"polygon"===h&&"esriGeometryPolygon"===d||"extent"===h&&"esriGeometryEnvelope"===d||"multipoint"===h&&"esriGeometryMultipoint"===d?!0:!1};q.cloneGeometry=function(d){if(null===d)return null;var h=b.fromJson(d.toJson());d.getCacheValue("_geVersion")&&h.setCacheValue("_geVersion",d.getCacheValue("_geVersion"));return h}})},"esri/arcade/functions/maths":function(){define(["require",
"exports","../languageUtils","dojo/number"],function(D,q,a,b){function d(h,f,g){if("undefined"===typeof g||0===+g)return Math[h](f);f=+f;g=+g;if(isNaN(f)||"number"!==typeof g||0!==g%1)return NaN;f=f.toString().split("e");f=Math[h](+(f[0]+"e"+(f[1]?+f[1]-g:-g)));f=f.toString().split("e");return+(f[0]+"e"+(f[1]?+f[1]+g:g))}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(h,f){function g(c,e,k){c=a.toNumber(c);return isNaN(c)?c:isNaN(e)||isNaN(k)||
e>k?NaN:c<e?e:c>k?k:c}h.number=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,2);k=m[0];return a.isNumber(k)?k:null===k?0:a.isDate(k)||a.isBoolean(k)?Number(k):a.isArray(k)?NaN:""===k||void 0===k?Number(k):a.isString(k)?void 0!==m[1]?(m=a.multiReplace(m[1],"\u2030",""),m=a.multiReplace(m,"\u00a4",""),b.parse(k,{pattern:m})):Number(k.trim()):Number(k)})};h.abs=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.abs(a.toNumber(m[0]))})};h.acos=function(c,e){return f(c,
e,function(k,l,m){a.pcCheck(m,1,1);return Math.acos(a.toNumber(m[0]))})};h.asin=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.asin(a.toNumber(m[0]))})};h.atan=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.atan(a.toNumber(m[0]))})};h.atan2=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,2,2);return Math.atan2(a.toNumber(m[0]),a.toNumber(m[1]))})};h.ceil=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),
isNaN(k)&&(k=0),d("ceil",a.toNumber(m[0]),-1*k)):Math.ceil(a.toNumber(m[0]))})};h.round=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),isNaN(k)&&(k=0),d("round",a.toNumber(m[0]),-1*k)):Math.round(a.toNumber(m[0]))})};h.floor=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),isNaN(k)&&(k=0),d("floor",a.toNumber(m[0]),-1*k)):Math.floor(a.toNumber(m[0]))})};h.cos=function(c,e){return f(c,e,function(k,
l,m){a.pcCheck(m,1,1);return Math.cos(a.toNumber(m[0]))})};h.isnan=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return"number"===typeof m[0]&&isNaN(m[0])})};h.exp=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.exp(a.toNumber(m[0]))})};h.log=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.log(a.toNumber(m[0]))})};h.pow=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,2,2);return Math.pow(a.toNumber(m[0]),a.toNumber(m[1]))})};h.random=
function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,0,0);return Math.random()})};h.sin=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.sin(a.toNumber(m[0]))})};h.sqrt=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.sqrt(a.toNumber(m[0]))})};h.tan=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.tan(a.toNumber(m[0]))})};h.defaultvalue=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,2,2);return null===m[0]||""===m[0]||
void 0===m[0]?m[1]:m[0]})};h.isempty=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return null===m[0]||""===m[0]||void 0===m[0]?!0:!1})};h["boolean"]=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,1,1);return a.toBoolean(m[0])})};h.constrain=function(c,e){return f(c,e,function(k,l,m){a.pcCheck(m,3,3);k=a.toNumber(m[1]);l=a.toNumber(m[2]);if(a.isArray(m[0])){var n=[],p=0;for(m=m[0];p<m.length;p++)n.push(g(m[p],k,l));return n}if(a.isImmutableArray(m[0])){n=[];for(p=0;p<m[0].length();p++)n.push(g(m[0].get(p),
k,l));return n}return g(m[0],k,l)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(D,q,a,b){function d(h,f,g,c){if(1===c.length){if(a.isArray(c[0]))return b.calculateStat(h,c[0],-1);if(a.isImmutableArray(c[0]))return b.calculateStat(h,c[0].toArray(),-1)}return b.calculateStat(h,c,-1)}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(h,f){h.stdev=function(g,c){return f(g,c,
function(e,k,l){return d("stdev",e,k,l)})};h.variance=function(g,c){return f(g,c,function(e,k,l){return d("variance",e,k,l)})};h.average=function(g,c){return f(g,c,function(e,k,l){return d("mean",e,k,l)})};h.mean=function(g,c){return f(g,c,function(e,k,l){return d("mean",e,k,l)})};h.sum=function(g,c){return f(g,c,function(e,k,l){return d("sum",e,k,l)})};h.min=function(g,c){return f(g,c,function(e,k,l){return d("min",e,k,l)})};h.max=function(g,c){return f(g,c,function(e,k,l){return d("max",e,k,l)})};
h.distinct=function(g,c){return f(g,c,function(e,k,l){return d("distinct",e,k,l)})};h.count=function(g,c){return f(g,c,function(e,k,l){a.pcCheck(l,1,1);if(a.isArray(l[0])||a.isString(l[0]))return l[0].length;if(a.isImmutableArray(l[0]))return l[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,q,a){function b(h){for(var f=0,g=0;g<h.length;g++)f+=h[g];return f/h.length}function d(h){for(var f=
b(h),g=0,c=0;c<h.length;c++)g+=Math.pow(f-h[c],2);return g/h.length}Object.defineProperty(q,"__esModule",{value:!0});q.calculateStat=q.decodeStatType=void 0;q.decodeStatType=function(h){switch(h.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};q.calculateStat=function(h,f,g){void 0===
g&&(g=1E3);switch(h.toLowerCase()){case "distinct":a:{h=g;g=[];for(var c={},e=[],k=0;k<f.length;k++){if(void 0!==f[k]&&null!==f[k]&&f[k]!==a.voidOperation){var l=f[k];if(a.isNumber(l)||a.isString(l))void 0===c[l]&&(g.push(l),c[l]=1);else{for(var m=!1,n=0;n<e.length;n++)!0===a.equalityTest(e[n],l)&&(m=!0);!1===m&&(e.push(l),g.push(l))}}if(g.length>=h&&-1!==h){f=g;break a}}f=g}return f;case "avg":case "mean":return b(a.toNumberArray(f));case "min":return Math.min.apply(Math,a.toNumberArray(f));case "sum":f=
a.toNumberArray(f);for(g=h=0;g<f.length;g++)h+=f[g];return h;case "max":return Math.max.apply(Math,a.toNumberArray(f));case "stdev":case "stddev":return Math.sqrt(d(a.toNumberArray(f)));case "var":case "variance":return d(a.toNumberArray(f));case "count":return f.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){function r(y,x,z){if(null===y)x.updateUint8Array([0,139]);else if(f.isArray(y)){x.updateUint8Array([61]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);for(var v=0;v<y.length;v++){var w=y[v];r(w,x,z)}z.map["delete"](y);z.currentLength--}x.updateUint8Array([199])}else if(f.isImmutableArray(y)){x.updateUint8Array([61]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);
v=0;for(var u=y.toArray();v<u.length;v++)w=u[v],r(w,x,z);z.map["delete"](y);z.currentLength--}x.updateUint8Array([199])}else if(f.isDate(y))x.updateIntArray([y.getTime()]),x.updateUint8Array([241]);else if(f.isString(y))x.updateIntArray([y.length]),x.updateWithString(y),x.updateUint8Array([41]);else if(f.isBoolean(y))x.updateUint8Array([!0===y?1:0,113]);else if(f.isNumber(y))x.updateFloatArray([y]),x.updateUint8Array([173]);else{if(y instanceof b)throw Error("Type not supported in Hash");if(y instanceof
a)throw Error("Type not supported in Hash");if(y instanceof d){x.updateUint8Array([223]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);v=0;for(u=y.keys();v<u.length;v++)w=u[v],x.updateIntArray([w.length]),x.updateWithString(w),x.updateUint8Array([251]),w=y.field(w),r(w,x,z),x.updateUint8Array([239]);z.map["delete"](y);z.currentLength--}x.updateUint8Array([73])}else{if(y instanceof h)throw Error("Type not supported in Hash");if(y instanceof m)x.updateIntArray([3833836621]),
x.updateIntArray([0]),x.updateFloatArray([y.x]),x.updateIntArray([1]),x.updateFloatArray([y.y]),x.updateIntArray([3765347959]),r(y.spatialReference.wkid,x,z);else if(y instanceof n){x.updateIntArray([1266616829]);for(v=0;v<y.rings.length;v++){u=y.rings[v];var A=[],G=null,B=null;for(w=0;w<u.length;w++){var E=y.getPoint(v,w);if(0===w)G=E;else if(B.x===E.x&&B.y===E.y)continue;B=E;w===u.length-1&&G.x===E.x&&G.y===E.y||A.push(E)}x.updateIntArray([1397116793,A.length]);for(w=0;w<A.length;w++)E=A[w],x.updateIntArray([3962308117,
w]),r(E,x,z),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([3878477243]);r(y.spatialReference.wkid,x,z)}else if(y instanceof p){x.updateIntArray([4106883559]);for(v=0;v<y.paths.length;v++){u=y.paths[v];x.updateIntArray([1397116793,u.length]);for(w=0;w<u.length;w++)x.updateIntArray([3962308117,w]),r(y.getPoint(v,w),x,z),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([2568784753]);r(y.spatialReference.wkid,x,z)}else if(y instanceof l){x.updateIntArray([588535921,
y.points.length]);for(w=0;w<y.points.length;w++)v=y.getPoint(w),x.updateIntArray([w]),r(v,x,z);x.updateIntArray([1700171621]);r(y.spatialReference.wkid,x,z)}else if(y instanceof k)x.updateIntArray([3483648373]),x.updateIntArray([0]),x.updateFloatArray([y.xmax]),x.updateIntArray([1]),x.updateFloatArray([y.xmin]),x.updateIntArray([2]),x.updateFloatArray([y.ymax]),x.updateIntArray([3]),x.updateFloatArray([y.ymin]),x.updateIntArray([3622027469]),r(y.spatialReference.wkid,x,z);else if(y instanceof t)x.updateIntArray([14]),
void 0!==y.wkid&&null!==y.wkid&&x.updateIntArray([y.wkid]),y.wkt&&x.updateWithString(y.wkt);else{if(f.isFunctionParameter(y))throw Error("Type not supported in Hash");if(f.isFeatureSet(y))throw Error("Type not supported in Hash");f.isFeatureSetCollection(y);throw Error("Type not supported in Hash");}}}}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(y,x){y.portal=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);return new a(f.toString(A[0]))})};
y.trim=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);return f.toString(A[0]).trim()})};y.tohex=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);w=f.toNumber(A[0]);return isNaN(w)?w:w.toString(16)})};y.upper=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);return f.toString(A[0]).toUpperCase()})};y.proper=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,2);w=1;2===A.length&&"firstword"===f.toString(A[1]).toLowerCase()&&(w=2);u=/\s/;A=f.toString(A[0]);for(var G=
"",B=!0,E=0;E<A.length;E++){var F=A[E];u.test(F)?1===w&&(B=!0):F.toUpperCase()!==F.toLowerCase()&&(B?(F=F.toUpperCase(),B=!1):F=F.toLowerCase());G+=F}return G})};y.lower=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);return f.toString(A[0]).toLowerCase()})};y.guid=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,0,1);if(0<A.length)switch(f.toString(A[0]).toLowerCase()){case "digits":return f.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return f.generateUUID();
case "digits-hyphen-parentheses":return"("+f.generateUUID()+")"}return"{"+f.generateUUID()+"}"})};y.console=function(z,v){return x(z,v,function(w,u,A){0!==A.length&&(1===A.length?z.console(f.toString(A[0])):z.console(f.toString(A)));return f.voidOperation})};y.mid=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,3);w=f.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);if(2===A.length)return f.toString(A[0]).substr(w);u=f.toNumber(A[2]);if(isNaN(u))return"";0>u&&(u=0);return f.toString(A[0]).substr(w,
u)})};y.find=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,3);w=0;if(2<A.length){w=f.toNumber(f.defaultUndefined(A[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return f.toString(A[1]).indexOf(f.toString(A[0]),w)})};y.left=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,2);w=f.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);return f.toString(A[0]).substr(0,w)})};y.right=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,2);w=f.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);return f.toString(A[0]).substr(-1*
w,w)})};y.split=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,4);w=f.toNumber(f.defaultUndefined(A[2],-1));u=f.toBoolean(f.defaultUndefined(A[3],!1));-1===w||null===w||!0===u?A=f.toString(A[0]).split(f.toString(A[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),A=f.toString(A[0]).split(f.toString(A[1]),w));if(!1===u)return A;u=[];for(var G=0;G<A.length&&!(-1!==w&&u.length>=w);G++)""!==A[G]&&void 0!==A[G]&&u.push(A[G]);return u})};y.text=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,2);return f.toStringExplicit(A[0],
A[1])})};y.concatenate=function(z,v){return x(z,v,function(w,u,A){w=[];if(1>A.length)return"";if(f.isArray(A[0])){u=f.defaultUndefined(A[2],"");for(var G=0;G<A[0].length;G++)w[G]=f.toStringExplicit(A[0][G],u);return 1<A.length?w.join(A[1]):w.join("")}if(f.isImmutableArray(A[0])){u=f.defaultUndefined(A[2],"");for(G=0;G<A[0].length();G++)w[G]=f.toStringExplicit(A[0].get(G),u);return 1<A.length?w.join(A[1]):w.join("")}for(G=0;G<A.length;G++)w[G]=f.toStringExplicit(A[G]);return w.join("")})};y.reverse=
function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(f.isArray(A[0]))return w=A[0].slice(0),w.reverse(),w;if(f.isImmutableArray(A[0]))return w=A[0].toArray().slice(0),w.reverse(),w;throw Error("Invalid Parameter");})};y.replace=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,3,4);w=f.toString(A[0]);u=f.toString(A[1]);var G=f.toString(A[2]);return(4===A.length?f.toBoolean(A[3]):1)?f.multiReplace(w,u,G):w.replace(u,G)})};y.schema=function(z,v){return x(z,v,function(w,u,A){if(A[0]instanceof
h)return(w=A[0].schema())?d.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};y.subtypes=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(A[0]instanceof h)return(w=A[0].subtypes())?d.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};y.subtypecode=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(A[0]instanceof h){u=A[0].subtypes();if(!u)return null;if(u.subtypeField&&A[0].hasField(u.subtypeField))for(A=A[0].field(u.subtypeField),
w=0,u=u.subtypes;w<u.length;w++){var G=u[w];if(G.code===A)return G.code}return null}throw Error("Invalid Parameter");})};y.subtypename=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(A[0]instanceof h){u=A[0].subtypes();if(!u)return"";if(u.subtypeField&&A[0].hasField(u.subtypeField))for(A=A[0].field(u.subtypeField),w=0,u=u.subtypes;w<u.length;w++){var G=u[w];if(G.code===A)return G.name}return""}throw Error("Invalid Parameter");})};y.gdbversion=function(z,v){return x(z,v,function(w,u,
A){f.pcCheck(A,1,1);if(A[0]instanceof h)return A[0].gdbVersion();throw Error("Invalid Parameter");})};y.domain=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,3);if(A[0]instanceof h)return(w=A[0].fullDomain(f.toString(A[1]),void 0===A[2]?void 0:f.toNumber(A[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?d.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:g.layerFieldEsriConstants[w.field.type],codedValues:w.domain.codedValues.map(function(G){return{name:G.name,
code:G.code}})}):d.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:g.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max}):null;throw Error("Invalid Parameter");})};y.domainname=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,4);if(A[0]instanceof h)return A[0].domainValueLookup(f.toString(A[1]),A[2],void 0===A[3]?void 0:f.toNumber(A[3]));throw Error("Invalid Parameter");})};y.domaincode=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,2,
4);if(A[0]instanceof h)return A[0].domainCodeLookup(f.toString(A[1]),A[2],void 0===A[3]?void 0:f.toNumber(A[3]));throw Error("Invalid Parameter");})};y.urlencode=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(null===A[0])return"";if(A[0]instanceof d){w="";u=0;for(var G=A[0].keys();u<G.length;u++){var B=G[u],E=A[0].field(B);""!==w&&(w+="\x26");w=null===E?w+(encodeURIComponent(B)+"\x3d"):w+(encodeURIComponent(B)+"\x3d"+encodeURIComponent(E))}return w}return encodeURIComponent(f.toString(A[0]))})};
y.hash=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);w=new e.XXH(0);r(A[0],w,{map:new Map,currentLength:0});return w.digest()})};y.convertdirection=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,3,3);return c.convertDirection(A[0],A[1],A[2])})};y.fromjson=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,1);if(!1===f.isString(A[0]))throw Error("Invalid Parameter");return d.convertJsonToArcade(JSON.parse(f.toString(A[0])))})};y.expects=function(z,v){return x(z,v,function(w,
u,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");return f.voidOperation})};y.tocharcode=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,2);w=f.toNumber(f.defaultUndefined(A[1],0));u=f.toString(A[0]);if(0===u.length&&1===A.length)return null;if(u.length<=w||0>w)throw Error("Illegal argument");return u.charCodeAt(w)})};y.tocodepoint=function(z,v){return x(z,v,function(w,u,A){f.pcCheck(A,1,2);w=f.toNumber(f.defaultUndefined(A[1],0));u=f.toString(A[0]);if(0===
u.length&&1===A.length)return null;if(u.length<=w||0>w)throw Error("Illegal argument");return u.codePointAt(w)})};y.fromcharcode=function(z,v){return x(z,v,function(w,u,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");w=A.map(function(G){return Math.trunc(f.toNumber(G))}).filter(function(G){return 0<=G&&65535>=G});return 0===w.length?null:String.fromCharCode.apply(null,w)})};y.fromcodepoint=function(z,v){return x(z,v,function(w,u,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");
try{var G=A.map(function(B){return Math.trunc(f.toNumber(B))}).filter(function(B){return 1114111>=B&&B>>>0===B})}catch(B){return null}return 0===G.length?null:String.fromCodePoint.apply(null,G)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,q,a,b){function d(S){if(!1===b.isString(S))throw Error("Invalid Parameter");return S}function h(S,X){var ka=Math.pow(10,X);return Math.round(S*ka)/ka}function f(S){S=+S;return isFinite(S)?
S-S%1||(0>S?-0:0===S?S:0):S}function g(S){var X=parseFloat(S.toString().replace(f(S).toString(),"0"))*((0<S)-(0>S)||+S);return 0>S?{fraction:X,integer:Math.ceil(S)}:{fraction:X,integer:Math.floor(S)}}function c(S,X){switch(S){case 0:return"SHORT"===X?"N":"North";case 1:return"SHORT"===X?"E":"East";case 2:return"SHORT"===X?"S":"South";case 3:return"SHORT"===X?"W":"West"}}function e(S,X,ka){for(;S.length<ka;)S=X+S;return S}function k(S,X){return S-Math.floor(S/X)*X}function l(S){switch(S){case 6:case 1:return 360;
case 4:return F;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function m(S){switch(S.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function n(S){switch(S.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function p(S,X,ka){var oa=null;switch(X){case 1:oa=q.preciseMultiply(S,3600);break;case 2:oa=S;break;case 5:oa=q.preciseMultiply(S,3240);break;case 4:oa=q.preciseMultiply(S,H);break;default:throw Error("Unnexpected evaluation");
}switch(ka){case 1:return q.preciseDivide(oa,3600);case 2:return oa;case 5:return q.preciseDivide(oa,3240);case 4:return oa/H;default:throw Error("Unnexpected evaluation");}}function t(S){switch(S){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function r(S){switch(b.toNumber(S)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function y(S){switch(S.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function x(S){S=parseFloat(S);if(b.isNumber(S)){if(isNaN(S))throw Error("Invalid conversion");return S}throw Error("Invalid conversion");}function z(S,X,ka){var oa=3===ka,ta=null,xa=null,O=0,Z=0;Z=0;if(oa){if(2>S.length)throw Error("Conversion Error");Z=1;(xa=r(b.toString(S[S.length-1])))?(ta=xa.first,xa=xa.second):(O=1,ta=y(b.toString(S[0])),xa=y(b.toString(S[S.length-1])));if(null===ta||null===
xa)throw Error("Invalid Conversion");}switch(X){case 1:case 4:case 5:if(0===S.length)throw Error("Invalid Conversion");return oa?V.createFromAngleMeridianAndDirection(R.createFromAngleAndUnits(x(S[O]),t(X)),ta,xa):V.createFromAngleAndDirection(R.createFromAngleAndUnits(x(S[O]),t(X)),ka);case 3:Z=S.length-Z-O;if(3===Z)return S=R.createFromDegreesMinutesSeconds(x(S[O]),x(S[O+1]),x(S[O+2])),oa?V.createFromAngleMeridianAndDirection(S,ta,xa):V.createFromAngleAndDirection(S,ka);if(1===Z)return S=x(S[O]),
S=U.number_to_dms(S),S=R.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),oa?V.createFromAngleMeridianAndDirection(S,ta,xa):V.createFromAngleAndDirection(S,ka)}throw Error("Conversion Error");}function v(S){for(var X=[" ","-","/","'",'"',"\\","^","\u00b0",L,"\t","\r","\n","*"],ka="",oa=0;oa<S.length;oa++){var ta=S.charAt(oa);ka=-1!==X.indexOf(ta)?ka+"RRSPLITRRSPLITRR":ka+ta}return ka.split("RRSPLITRRSPLITRR").filter(function(xa){return""!==xa})}function w(S,X,ka){for(var oa={padding:0,
rounding:0,newpos:X},ta=!1;X<S.length;){var xa=S[X];if(xa===ka)ta?oa.rounding++:oa.padding++,X++;else if("."===xa)ta=!0,X++;else break}oa.newpos=X-1;return oa}Object.defineProperty(q,"__esModule",{value:!0});q.convertDirection=q.preciseDivide=q.preciseMultiply=q.preciseMinus=q.preciseAdd=void 0;var u=function(S){return function(X,ka,oa){oa=oa||14;return+S(X,ka).toFixed(oa)}},A=function(S,X){return S+X},G=function(S,X){return S-X},B=function(S,X){return S*X},E=function(S,X){return S/X};q.preciseAdd=
function(S,X,ka){return u(A)(S,X,ka)};q.preciseMinus=function(S,X,ka){return u(G)(S,X,ka)};q.preciseMultiply=function(S,X,ka){return u(B)(S,X,ka)};q.preciseDivide=function(S,X,ka){return u(E)(S,X,ka)};var F=2*Math.PI,H=648E3/Math.PI,L=String.fromCharCode(7501),Q;(function(S){S[S.north=0]="north";S[S.east=1]="east";S[S.south=2]="south";S[S.west=3]="west"})(Q||(Q={}));var aa;(function(S){S[S.decimal_degrees=1]="decimal_degrees";S[S.seconds=2]="seconds";S[S.degrees_minutes_seconds=3]="degrees_minutes_seconds";
S[S.radians=4]="radians";S[S.gradians=5]="gradians";S[S.truncated_degrees=6]="truncated_degrees";S[S.fractional_degree_minutes=7]="fractional_degree_minutes";S[S.fractional_minute_seconds=8]="fractional_minute_seconds"})(aa||(aa={}));var ca;(function(S){S[S.north_azimuth=1]="north_azimuth";S[S.polar=2]="polar";S[S.quadrant=3]="quadrant";S[S.south_azimuth=4]="south_azimuth"})(ca||(ca={}));var ea;(function(S){S[S.meridian=0]="meridian";S[S.direction=1]="direction"})(ea||(ea={}));var U=function(){function S(X,
ka,oa){this.m_degrees=X;this.m_minutes=ka;this.m_seconds=oa}S.prototype.get_field=function(X){switch(X){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};S.seconds_to_DMS=function(X){var ka=g(X).fraction;X=g(X).integer;var oa=Math.floor(X/3600);X-=3600*oa;var ta=Math.floor(X/60);return new S(oa,ta,X-60*ta+ka)};S.number_to_dms=function(X){var ka=g(X).fraction;X=g(X).integer;var oa=q.preciseMultiply(g(100*
ka).fraction,100);ka=g(100*ka).integer;return new S(X,ka,oa)};S.prototype.format=function(X,ka){var oa=h(this.m_seconds,ka),ta=this.m_minutes,xa=this.m_degrees;if(2===X||8===X)60<=oa&&(oa-=60,++ta),60<=ta&&(ta=0,++xa),360<=xa&&(xa=0);else if(7===X)oa=0,ta=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,xa=this.m_degrees,60<=ta&&(ta=0,++xa),360<=xa&&(xa=0);else if(1===X||6===X)oa=q.preciseDivide(this.m_seconds,3600),ta=q.preciseDivide(this.m_minutes,60),xa=Math.round(this.m_degrees+ta+oa),oa=ta=
0;return new S(xa,ta,oa)};S.DMS_to_seconds=function(X,ka,oa){return 3600*X+60*ka+oa};return S}(),la=function(){function S(X,ka,oa){this.meridian=X;this.angle=ka;this.direction=oa}S.prototype.fetch_azimuth=function(X){return 0===X?this.meridian:this.direction};return S}(),V=function(){function S(X){this.m_angle=X}S.createFromAngleAndDirection=function(X,ka){return new S(new R(S.convertDirectionFormat(X.extract_angular_units(2),ka,1)))};S.prototype.getAngle=function(X){var ka=this.m_angle.extract_angular_units(2);
switch(X){case 1:case 4:case 2:return X=new R(S.convertDirectionFormat(ka,1,X));case 3:return X=S.seconds_north_azimuth_to_quadrant(ka),X=new R(X.angle)}};S.prototype.getMeridian=function(X){var ka=this.m_angle.extract_angular_units(2);switch(X){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return S.seconds_north_azimuth_to_quadrant(ka).meridian}};S.prototype.getDirection=function(X){var ka=this.m_angle.extract_angular_units(2);switch(X){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return S.seconds_north_azimuth_to_quadrant(ka).direction}};
S.seconds_north_azimuth_to_quadrant=function(X){var ka=324E3>=X||972E3<=X?0:2;return new la(ka,0===ka?Math.min(1296E3-X,X):Math.abs(X-648E3),648E3<X?3:1)};S.createFromAngleMeridianAndDirection=function(X,ka,oa){return new S(new R(S.secondsQuadrantToNorthAzimuth(X.extract_angular_units(2),ka,oa)))};S.secondsQuadrantToNorthAzimuth=function(X,ka,oa){return 0===ka?1===oa?X:1296E3-X:1===oa?648E3-X:648E3+X};S.convertDirectionFormat=function(X,ka,oa){var ta=0;switch(ka){case 1:ta=X;break;case 2:ta=324E3-
X;break;case 3:throw Error("Unnexpected evaluation");case 4:ta=X+648E3}X=0;switch(oa){case 1:X=ta;break;case 2:X=324E3-ta;break;case 3:throw Error("Unnexpected evaluation");case 4:X=ta-648E3}X%=1296E3;return 0>X?1296E3+X:X};return S}(),R=function(){function S(X){this.m_seconds=X}S.createFromAngleAndUnits=function(X,ka){return new S(p(X,ka,2))};S.prototype.extract_angular_units=function(X){return p(this.m_seconds,2,t(X))};S.createFromDegreesMinutesSeconds=function(X,ka,oa){return new S(q.preciseAdd(q.preciseAdd(q.preciseMultiply(X,
3600),q.preciseMultiply(ka,60)),oa))};return S}(),ha=function(){function S(X,ka,oa,ta){this.m_view=X;this.m_angle=ka;this.m_merdian=oa;this.m_direction=ta;this.m_formatted_dms=this.m_dms=null}S.createFromStringAndBearing=function(X,ka,oa){return new S(X,ka.getAngle(oa),ka.getMeridian(oa),ka.getDirection(oa))};S.prototype.fetch_angle=function(){return this.m_angle};S.prototype.fetch_meridian=function(){return this.m_merdian};S.prototype.fetch_direction=function(){return this.m_direction};S.prototype.fetch_m_view=
function(){return this.m_view};S.prototype.fetch_dms=function(){null===this.m_dms&&this.calculate_dms();return this.m_dms};S.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};S.prototype.calculate_dms=function(){var X=null,ka=6,oa=0;for(X=0;X<this.m_view.length;X++){var ta=this.m_view[X];switch(ta){case "m":X=w(this.m_view,X,ta);ka=6===ka?7:ka;X=X.newpos;continue;case "s":X=w(this.m_view,X,ta),ka=8,oa=oa<X.rounding?X.rounding:oa,
X=X.newpos}}this.m_dms=U.seconds_to_DMS(this.m_angle.extract_angular_units(2));this.m_formatted_dms=U.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(ka,oa)};return S}();q.convertDirection=function(S,X,ka){if(!(X instanceof a))throw Error("Invalid Parameter");if(!1===X.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===X.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var oa=m(d(X.field("directiontype")));X=n(d(X.field("angletype")));
if(b.isNumber(S)){S=b.toNumber(S);if(3===oa)throw Error("Conversion error");3===X?(S=U.number_to_dms(S),X=V.createFromAngleAndDirection(R.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),oa)):X=V.createFromAngleAndDirection(R.createFromAngleAndUnits(S,t(X)),oa)}else if(b.isString(S))X=z(v(S),X,oa);else if(b.isArray(S))X=z(S,X,oa);else if(b.isImmutableArray(S))X=z(S.toArray(),X,oa);else throw Error("Conversion Error");if(!(ka instanceof a))throw Error("Invalid Parameter");if(!1===
ka.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ka.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");oa=m(d(ka.field("directiontype")));S=ka.hasField("angleType")?n(d(ka.field("angletype"))):null;var ta=d(ka.field("outputType")).toUpperCase().trim();if(!oa||!ta)throw Error("Conversion error");if(!(S||"TEXT"===ta&&ka.hasField("format")))throw Error("Invalid unit");switch(ta){case "VALUE":if(3===oa||3===S)return ka=X,X=ka.getAngle(oa),
3===oa&&3===S?(S=U.seconds_to_DMS(X.extract_angular_units(2)),oa=[c(ka.getMeridian(oa),"SHORT"),S.m_degrees,S.m_minutes,S.m_seconds,c(ka.getDirection(oa),"SHORT")]):3===S?(S=U.seconds_to_DMS(X.extract_angular_units(2)),oa=[S.m_degrees,S.m_minutes,S.m_seconds]):oa=3===oa?[c(ka.getMeridian(oa),"SHORT"),X.extract_angular_units(S),c(ka.getDirection(oa),"SHORT")]:[X.extract_angular_units(S)],oa;ka=X;if((X=t(S))&&3!==S)oa=ka.getAngle(oa).extract_angular_units(X);else throw Error("Conversion Error");return oa;
case "TEXT":ta="";ka.hasField("format")&&(ta=b.toString(ka.field("format")));if(null===ta||""===ta){ka="";switch(S){case 1:ka=3===oa?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ka=3===oa?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:ka="R.RR";break;case 5:ka="GGG.GG"+L;break;default:throw Error("Conversion error");}3===oa&&(ka="p "+ka+" b");ta=ka}ka=X;S=ta;var xa="",O=null,Z=null;X=ha.createFromStringAndBearing(S,ka,oa);ta={D:1,d:6,m:7,s:8,R:4,G:5};for(Z=0;Z<S.length;Z++){var fa=S[Z];switch(fa){case "[":O=
S;fa={escaped:"",newpos:Z};for(Z++;Z<O.length;){var ra=O[Z];Z++;if("]"===ra)break;fa.escaped+=ra}fa.newpos=Z-1;O=fa;xa+=O.escaped;Z=O.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":O=w(S,Z,fa);Z=ka.getAngle(oa);a:{fa=ta[fa];ra=O.padding;var pa=O.rounding,W=X,T=null;switch(fa){case 1:case 4:case 5:T=k(h(Z.extract_angular_units(fa),pa),l(fa));Z=e(T.toFixed(pa),"0",ra+pa+(0<pa?1:0));break a;case 6:case 7:T=k(W.fetch_formatted_dms().get_field(fa),l(fa));Z=e(T.toFixed(pa),"0",ra+
pa+(0<pa?1:0));break a;case 8:T=k(h(W.fetch_dms().get_field(fa),pa),l(fa));Z=e(T.toFixed(pa),"0",ra+pa+(0<pa?1:0));break a;default:throw Error("Unnexepected evaluation");}}xa+=Z;Z=O.newpos;continue;case "P":case "p":xa+=c(X.fetch_meridian(),"p"===fa?"SHORT":"LONG");continue;case "B":case "b":xa+=c(X.fetch_direction(),"b"===fa?"SHORT":"LONG");continue;default:xa+=fa}}return xa;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(D,
q){function a(d){for(var h=[],f=0,g=d.length;f<g;f++){var c=d.charCodeAt(f);128>c?h.push(c):2048>c?h.push(192|c>>6,128|c&63):55296>c||57344<=c?h.push(224|c>>12,128|c>>6&63,128|c&63):(f++,c=65536+((c&1023)<<10|d.charCodeAt(f)&1023),h.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return new Uint8Array(h)}Object.defineProperty(q,"__esModule",{value:!0});q.XXH=void 0;var b=function(){function d(h){this.seed=h;this.totallen=0;this.bufs=[];this.init()}d.prototype.init=function(){this.bufs=[];this.totallen=
0;return this};d.prototype.updateFloatArray=function(h){for(var f=[],g=0;g<h.length;g++){var c=h[g];isNaN(c)?f.push("NaN"):Infinity===c?f.push("Infinity"):-Infinity===c?f.push("-Infinity"):0===c?f.push("0"):f.push(c.toString(16))}this.update(a(f.join("")))};d.prototype.updateIntArray=function(h){h=Int32Array.from(h);this.update(new Uint8Array(h.buffer))};d.prototype.updateUint8Array=function(h){this.update(Uint8Array.from(h))};d.prototype.updateWithString=function(h){return this.update(a(h))};d.prototype.update=
function(h){this.bufs.push(h);this.totallen+=h.length;return this};d.prototype.digest=function(){for(var h=new Uint8Array(this.totallen),f=0,g=0,c=this.bufs;g<c.length;g++){var e=c[g];h.set(e,f);f+=e.length}this.init();return this.xxHash32(h,this.seed)};d.prototype.xxHash32=function(h,f){void 0===f&&(f=0);var g=f+374761393&4294967295,c=0;if(16<=h.length){g=[f+2654435761+2246822519&4294967295,f+2246822519&4294967295,f+0&4294967295,f-2654435761&4294967295];var e=h.length-16,k=0;for(c=0;(c&4294967280)<=
e;c+=4){var l=c,m=h[l+0]+(h[l+1]<<8);l=h[l+2]+(h[l+3]<<8);m=g[k]+(2246822519*m+(2246822519*l<<16))&4294967295;m=m<<13|m>>>19;g[k]=2654435761*(m&65535)+(2654435761*(m>>>16)<<16)&4294967295;k=k+1&3}g=(g[0]<<1|g[0]>>>31)+(g[1]<<7|g[1]>>>25)+(g[2]<<12|g[2]>>>20)+(g[3]<<18|g[3]>>>14)&4294967295}g=g+h.length&4294967295;for(k=h.length-4;c<=k;c+=4)l=c,m=h[l+0]+(h[l+1]<<8),l=h[l+2]+(h[l+3]<<8),g=g+(3266489917*m+(3266489917*l<<16))&4294967295,g=g<<17|g>>>15,g=668265263*(g&65535)+(668265263*(g>>>16)<<16)&4294967295;
for(;c<h.length;++c)k=h[c],g+=374761393*k,g=g<<11|g>>>21,g=2654435761*(g&65535)+(2654435761*(g>>>16)<<16)&4294967295;g^=g>>>15;g=(2246822519*(g&65535)&4294967295)+(2246822519*(g>>>16)<<16);g^=g>>>13;g=(3266489917*(g&65535)&4294967295)+(3266489917*(g>>>16)<<16);g^=g>>>16;return 0>g?g+4294967296:g};return d}();q.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x,z,v,w,u,A,G){function B(W,T){for(var da=[],na=0;na<T.arguments.length;na++)da.push(F(W,T.arguments[na]));return da}function E(W,T,da){try{return!0===T.preparsed?da(W,null,T.arguments):da(W,T,B(W,T))}catch(na){throw na;}}function F(W,T){try{switch(T.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var da=null===T.init?null:F(W,T.init);da===e.voidOperation&&(da=null);if("Identifier"!==T.id.type)throw Error("Can only assign a regular variable");
var na=T.id.name.toLowerCase();null!==W.localScope?W.localScope[na]={value:da,valueset:!0,node:T.init}:W.globalScope[na]={value:da,valueset:!0,node:T.init};return e.voidOperation;case "VariableDeclaration":for(var ja=0;ja<T.declarations.length;ja++)F(W,T.declarations[ja]);return e.voidOperation;case "BlockStatement":a:{var N=e.voidOperation;for(ja=0;ja<T.body.length;ja++)if(N=F(W,T.body[ja]),N instanceof e.ReturnResult||N===e.breakResult||N===e.continueResult){var P=N;break a}P=N}return P;case "FunctionDeclaration":var ba=
T.id.name.toLowerCase();W.globalScope[ba]={valueset:!0,node:null,value:new f(T,W)};return e.voidOperation;case "ReturnStatement":if(null===T.argument)var ia=new e.ReturnResult(e.voidOperation);else{var qa=F(W,T.argument);ia=new e.ReturnResult(qa)}return ia;case "IfStatement":if("AssignmentExpression"===T.test.type||"UpdateExpression"===T.test.type)throw Error(k.nodeErrorMessage(T.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var za=F(W,T.test);if(!0===za)var Ca=F(W,T.consequent);else if(!1===
za)Ca=null!==T.alternate?F(W,T.alternate):e.voidOperation;else throw Error(k.nodeErrorMessage(T,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ca;case "ExpressionStatement":if("AssignmentExpression"===T.expression.type||"UpdateExpression"===T.expression.type)var Ha=F(W,T.expression);else{var Da=F(W,T.expression);Ha=Da===e.voidOperation?e.voidOperation:new e.ImplicitResult(Da)}return Ha;case "AssignmentExpression":var Ja=F(W,T.right);ja=null;var va="";if("MemberExpression"===T.left.type){ja=
F(W,T.left.object);!0===T.left.computed?va=F(W,T.left.property):"Identifier"===T.left.property.type&&(va=T.left.property.name);if(e.isArray(ja))if(e.isNumber(va)){0>va&&(va=ja.length+va);if(0>va||va>ja.length)throw Error("Assignment outside of array bounds");if(va===ja.length&&"\x3d"!==T.operator)throw Error("Invalid Parameter");ja[va]=L(Ja,T.operator,ja[va],T)}else throw Error("Invalid Parameter");else if(ja instanceof d){if(!1===e.isString(va))throw Error("Dictionary accessor must be a string");
if(!0===ja.hasField(va))ja.setField(va,L(Ja,T.operator,ja.field(va),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");ja.setField(va,L(Ja,T.operator,null,T))}}else if(ja instanceof h){if(!1===e.isString(va))throw Error("Feature accessor must be a string");if(!0===ja.hasField(va))ja.setField(va,L(Ja,T.operator,ja.field(va),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");ja.setField(va,L(Ja,T.operator,null,T))}}else{if(e.isImmutableArray(ja))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Ga=e.voidOperation}else if(ja=T.left.name.toLowerCase(),null!==W.localScope&&void 0!==W.localScope[ja])W.localScope[ja]={value:L(Ja,T.operator,W.localScope[ja].value,T),valueset:!0,node:T.right},Ga=e.voidOperation;else if(void 0!==W.globalScope[ja])W.globalScope[ja]={value:L(Ja,T.operator,W.globalScope[ja].value,T),valueset:!0,node:T.right},Ga=e.voidOperation;else throw Error("Variable not recognised");return Ga;case "UpdateExpression":ja=null;va="";if("MemberExpression"===
T.argument.type){ja=F(W,T.argument.object);!0===T.argument.computed?va=F(W,T.argument.property):"Identifier"===T.argument.property.type&&(va=T.argument.property.name);if(e.isArray(ja))if(e.isNumber(va)){0>va&&(va=ja.length+va);if(0>va||va>=ja.length)throw Error("Assignment outside of array bounds");var Aa=e.toNumber(ja[va]);ja[va]="++"===T.operator?Aa+1:Aa-1}else throw Error("Invalid Parameter");else if(ja instanceof d){if(!1===e.isString(va))throw Error("Dictionary accessor must be a string");if(!0===
ja.hasField(va))Aa=e.toNumber(ja.field(va)),ja.setField(va,"++"===T.operator?Aa+1:Aa-1);else throw Error("Invalid Parameter");}else if(ja instanceof h){if(!1===e.isString(va))throw Error("Feature accessor must be a string");if(!0===ja.hasField(va))Aa=e.toNumber(ja.field(va)),ja.setField(va,"++"===T.operator?Aa+1:Aa-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(ja))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Ea=!1===T.prefix?Aa:"++"===T.operator?Aa+
1:Aa-1}else{ja="Identifier"===T.argument.type?T.argument.name.toLowerCase():"";if(!ja)throw Error("Invalid identifier");if(null!==W.localScope&&void 0!==W.localScope[ja])Aa=e.toNumber(W.localScope[ja].value),W.localScope[ja]={value:"++"===T.operator?Aa+1:Aa-1,valueset:!0,node:T},Ea=!1===T.prefix?Aa:"++"===T.operator?Aa+1:Aa-1;else if(void 0!==W.globalScope[ja])Aa=e.toNumber(W.globalScope[ja].value),W.globalScope[ja]={value:"++"===T.operator?Aa+1:Aa-1,valueset:!0,node:T},Ea=!1===T.prefix?Aa:"++"===
T.operator?Aa+1:Aa-1;else throw Error("Variable not recognised");}return Ea;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "TemplateElement":return T.value?T.value.cooked:"";case "TemplateLiteral":var Wa="",Ia=0;Ga=0;for(ja=T.quasis;Ga<ja.length;Ga++)if(va=ja[Ga],Wa+=va.value?va.value.cooked:"",!1===va.tail){var Qa=T.expressions[Ia]?e.toString(F(W,T.expressions[Ia])):"";Wa+=Qa;Ia++}return Wa;case "ForStatement":null!==T.init&&F(W,T.init);Ia={testResult:!0,
lastAction:e.voidOperation};do b:{ja=W;va=T;Qa=Ia;if(null!==va.test){Qa.testResult=F(ja,va.test);if(!1===Qa.testResult)break b;if(!0!==Qa.testResult)throw Error(k.nodeErrorMessage(va,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Qa.lastAction=F(ja,va.body);Qa.lastAction===e.breakResult?Qa.testResult=!1:Qa.lastAction instanceof e.ReturnResult?Qa.testResult=!1:null!==va.update&&F(ja,va.update)}while(!0===Ia.testResult);Wa=Ia.lastAction instanceof e.ReturnResult?Ia.lastAction:e.voidOperation;return Wa;
case "ForInStatement":return H(W,T);case "Identifier":return la(W,T);case "MemberExpression":return aa(W,T);case "Literal":return T.value;case "CallExpression":return V(W,T);case "UnaryExpression":return ca(W,T);case "BinaryExpression":return ea(W,T);case "LogicalExpression":return U(W,T);case "ArrayExpression":try{for(ja=[],va=0;va<T.elements.length;va++){var Ka=F(W,T.elements[va]);if(e.isFunctionParameter(Ka))throw Error(k.nodeErrorMessage(T,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Ka===e.voidOperation?
ja.push(null):ja.push(Ka)}}catch(Pa){throw Pa;}return ja;case "ObjectExpression":ja={};for(va=0;va<T.properties.length;va++){var Oa=F(W,T.properties[va]);if(e.isFunctionParameter(Oa.value))throw Error("Illegal Argument");if(!1===e.isString(Oa.key))throw Error("Illegal Argument");ja[Oa.key.toString()]=Oa.value===e.voidOperation?null:Oa.value}var Va=new d(ja);Va.immutable=!1;return Va;case "Property":return{key:"Identifier"===T.key.type?T.key.name:F(W,T.key),value:F(W,T.value)};default:throw Error(k.nodeErrorMessage(T,
"RUNTIME","UNREOGNISED"));}}catch(Pa){throw Pa;}}function H(W,T){var da=F(W,T.right);"VariableDeclaration"===T.left.type&&F(W,T.left);var na=null,ja="";if("VariableDeclaration"===T.left.type){var N=T.left.declarations[0].id;"Identifier"===N.type&&(ja=N.name)}else"Identifier"===T.left.type&&(ja=T.left.name);if(!ja)throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDVARIABLE"));ja=ja.toLowerCase();null!==W.localScope&&void 0!==W.localScope[ja]&&(na=W.localScope[ja]);null===na&&void 0!==W.globalScope[ja]&&
(na=W.globalScope[ja]);if(null===na)throw Error(k.nodeErrorMessage(T,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(da)||e.isString(da)){da=da.length;for(N=0;N<da;N++){na.value=N;ja=F(W,T.body);if(ja===e.breakResult)break;if(ja instanceof e.ReturnResult)return ja}return e.voidOperation}if(e.isImmutableArray(da)){for(N=0;N<da.length();N++){na.value=N;ja=F(W,T.body);if(ja===e.breakResult)break;if(ja instanceof e.ReturnResult)return ja}return e.voidOperation}if(da instanceof d||da instanceof h)for(da=
da.keys(),N=0;N<da.length;N++){na.value=da[N];ja=F(W,T.body);if(ja===e.breakResult)break;if(ja instanceof e.ReturnResult)return ja}else return e.voidOperation}function L(W,T,da,na){switch(T){case "\x3d":return W===e.voidOperation?null:W;case "/\x3d":return e.toNumber(da)/e.toNumber(W);case "*\x3d":return e.toNumber(da)*e.toNumber(W);case "-\x3d":return e.toNumber(da)-e.toNumber(W);case "+\x3d":return e.isString(da)||e.isString(W)?e.toString(da)+e.toString(W):e.toNumber(da)+e.toNumber(W);case "%\x3d":return e.toNumber(da)%
e.toNumber(W);default:throw Error(k.nodeErrorMessage(na,"RUNTIME","OPERATORNOTRECOGNISED"));}}function Q(W,T,da){T=T.toLowerCase();switch(T){case "hasz":return W=W.hasZ,void 0===W?!1:W;case "hasm":return W=W.hasM,void 0===W?!1:W;case "spatialreference":return T=W.spatialReference._arcadeCacheId,void 0===T&&(da=!0,Object.freeze&&Object.isFrozen(W.spatialReference)&&(da=!1),da&&(Z++,T=W.spatialReference._arcadeCacheId=Z)),W=new d({wkt:W.spatialReference.wkt,wkid:W.spatialReference.wkid}),void 0!==T&&
(W._arcadeCacheId="SPREF"+T.toString()),W}switch(W.type){case "extent":switch(T){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return W=W[T],void 0!==W?W:null;case "type":return"Extent"}break;case "polygon":switch(T){case "rings":return T=W.getCacheValue("_arcadeCacheId"),void 0===T&&(Z++,T=Z,W.setCacheValue("_arcadeCacheId",T)),W=new g(W.rings,W.spatialReference,!0===W.hasZ,!0===W.hasM,T);case "type":return"Polygon"}break;case "point":switch(T){case "x":case "y":case "z":case "m":return void 0!==
W[T]?W[T]:null;case "type":return"Point"}break;case "polyline":switch(T){case "paths":return T=W.getCacheValue("_arcadeCacheId"),void 0===T&&(Z++,T=Z,W.setCacheValue("_arcadeCacheId",T)),W=new g(W.paths,W.spatialReference,!0===W.hasZ,!0===W.hasM,T);case "type":return"Polyline"}break;case "multipoint":switch(T){case "points":return T=W.getCacheValue("_arcadeCacheId"),void 0===T&&(Z++,T=Z,W.setCacheValue("_arcadeCacheId",T)),W=new c(W.points,W.spatialReference,!0===W.hasZ,!0===W.hasM,T,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(da,
"RUNTIME","PROPERTYNOTFOUND"));}function aa(W,T){try{var da=F(W,T.object);if(null===da)throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));if(!1===T.computed){if("Identifier"===T.property.type){if(da instanceof d||da instanceof h)return da.field(T.property.name);if(da instanceof z)return Q(da,T.property.name,T)}throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}var na=F(W,T.property);if(da instanceof d||da instanceof h){if(e.isString(na))return da.field(na);throw Error(k.nodeErrorMessage(T,
"RUNTIME","INVALIDTYPE"));}if(da instanceof z){if(e.isString(na))return Q(da,na,T);throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(e.isArray(da)){if(e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length+na);if(na>=da.length||0>na)throw Error(k.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return da[na]}throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(e.isString(da)){if(e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length+na);if(na>=da.length||
0>na)throw Error(k.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return da[na]}throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(da)&&e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length()+na);if(na>=da.length()||0>na)throw Error(k.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return da.get(na)}throw Error(k.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}catch(ja){throw ja;}}function ca(W,T){try{var da=F(W,T.argument);if(e.isBoolean(da)){if("!"===T.operator)return!da;
if("-"===T.operator)return-1*e.toNumber(da);if("+"===T.operator)return 1*e.toNumber(da);if("~"===T.operator)return~e.toNumber(da);throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===T.operator)return~e.toNumber(da);if("-"===T.operator)return-1*e.toNumber(da);if("+"===T.operator)return 1*e.toNumber(da);throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(na){throw na;}}function ea(W,T){try{var da=[F(W,T.left),F(W,T.right)],na=da[0],ja=da[1];
switch(T.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return e.binaryOperator(e.toNumber(na),e.toNumber(ja),T.operator);case "\x3d\x3d":return e.equalityTest(na,ja);case "!\x3d":return!e.equalityTest(na,ja);case "\x3c":return e.greaterThanLessThan(na,ja,T.operator);case "\x3e":return e.greaterThanLessThan(na,ja,T.operator);case "\x3c\x3d":return e.greaterThanLessThan(na,ja,T.operator);case "\x3e\x3d":return e.greaterThanLessThan(na,ja,T.operator);case "+":return e.isString(na)||
e.isString(ja)?e.toString(na)+e.toString(ja):e.toNumber(na)+e.toNumber(ja);case "-":return e.toNumber(na)-e.toNumber(ja);case "*":return e.toNumber(na)*e.toNumber(ja);case "/":return e.toNumber(na)/e.toNumber(ja);case "%":return e.toNumber(na)%e.toNumber(ja);default:throw Error(k.nodeErrorMessage(T,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(N){throw N;}}function U(W,T){try{if("AssignmentExpression"===T.left.type||"UpdateExpression"===T.left.type)throw Error(k.nodeErrorMessage(T.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("AssignmentExpression"===T.right.type||"UpdateExpression"===T.right.type)throw Error(k.nodeErrorMessage(T.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var da=F(W,T.left);if(e.isBoolean(da))switch(T.operator){case "||":if(!0===da)return da;var na=F(W,T.right);if(e.isBoolean(na))return na;throw Error(k.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===da)return da;na=F(W,T.right);if(e.isBoolean(na))return na;throw Error(k.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));
default:throw Error(k.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));}throw Error(k.nodeErrorMessage(T,"RUNTIME","ONLYBOOLEAN"));}catch(ja){throw ja;}}function la(W,T){try{var da=T.name.toLowerCase();if(null!==W.localScope&&void 0!==W.localScope[da]){var na=W.localScope[da];if(!0===na.valueset)return na.value;na.value=F(W,na.node);na.valueset=!0;return na.value}if(void 0!==W.globalScope[da]){na=W.globalScope[da];if(!0===na.valueset)return na.value;na.value=F(W,na.node);na.valueset=!0;return na.value}throw Error(k.nodeErrorMessage(T,
"RUNTIME","VARIABLENOTFOUND"));}catch(ja){throw ja;}}function V(W,T){try{if("Identifier"!==T.callee.type)throw Error(k.nodeErrorMessage(T,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==W.localScope&&void 0!==W.localScope[T.callee.name.toLowerCase()]){var da=W.localScope[T.callee.name.toLowerCase()];if(da.value instanceof e.NativeFunction)return da.value.fn(W,T);if(da.value instanceof f)return oa(W,T,da.value.definition);throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}if(void 0!==W.globalScope[T.callee.name.toLowerCase()]){da=
W.globalScope[T.callee.name.toLowerCase()];if(da.value instanceof e.NativeFunction)return da.value.fn(W,T);if(da.value instanceof f)return oa(W,T,da.value.definition);throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));}catch(na){throw na;}}function R(W){return null==W?"":e.isArray(W)||e.isImmutableArray(W)?"Array":e.isDate(W)?"Date":e.isString(W)?"String":e.isBoolean(W)?"Boolean":e.isNumber(W)?"Number":W instanceof b?"Attachment":W instanceof
a?"Portal":W instanceof d?"Dictionary":W instanceof h?"Feature":W instanceof w?"Point":W instanceof u?"Polygon":W instanceof A?"Polyline":W instanceof v?"Multipoint":W instanceof x?"Extent":e.isFunctionParameter(W)?"Function":e.isFeatureSet(W)?"FeatureSet":e.isFeatureSetCollection(W)?"FeatureSetCollection":W===e.voidOperation?"":"number"===typeof W&&isNaN(W)?"Number":"Unrecognised Type"}function ha(W,T,da,na){try{var ja=F(W,T.arguments[da]);if(e.equalityTest(ja,na))return F(W,T.arguments[da+1]);var N=
T.arguments.length-da;return 1===N?F(W,T.arguments[da]):2===N?null:3===N?F(W,T.arguments[da+2]):ha(W,T,da+2,na)}catch(P){throw P;}}function S(W,T,da,na){try{if(!0===na)return F(W,T.arguments[da+1]);if(3===T.arguments.length-da)return F(W,T.arguments[da+2]);var ja=F(W,T.arguments[da+2]);if(!1===e.isBoolean(ja))throw Error("WHEN needs boolean test conditions");return S(W,T,da+2,ja)}catch(N){throw N;}}function X(W,T){var da=W.length,na=Math.floor(da/2);if(0===da)return[];if(1===da)return[W[0]];var ja=
X(W.slice(0,na),T);da=X(W.slice(na,da),T);for(na=[];0<ja.length||0<da.length;)if(0<ja.length&&0<da.length){var N=T(ja[0],da[0]);isNaN(N)&&(N=0);0>=N?(na.push(ja[0]),ja=ja.slice(1)):(na.push(da[0]),da=da.slice(1))}else 0<ja.length?(na.push(ja[0]),ja=ja.slice(1)):0<da.length&&(na.push(da[0]),da=da.slice(1));return na}function ka(W,T,da){try{var na=W.body;if(da.length!==W.params.length)throw Error("Invalid Parameter calls to function.");for(var ja=0;ja<da.length;ja++)T.localScope[W.params[ja].name.toLowerCase()]=
{value:da[ja],valueset:!0,node:null};var N=F(T,na);if(N instanceof e.ReturnResult)return N.value;if(N===e.breakResult)throw Error("Cannot Break from a Function");if(N===e.continueResult)throw Error("Cannot Continue from a Function");return N instanceof e.ImplicitResult?N.value:N}catch(P){throw P;}}function oa(W,T,da){return E(W,T,function(na,ja,N){na={spatialReference:W.spatialReference,globalScope:W.globalScope,depthCounter:W.depthCounter+1,console:W.console,lrucache:W.lrucache,interceptor:W.interceptor,
localScope:{}};if(64<na.depthCounter)throw Error("Exceeded maximum function depth");return ka(da,na,N)})}function ta(W){return function(){var T={spatialReference:W.context.spatialReference,console:W.context.console,lrucache:W.context.lrucache,interceptor:W.context.interceptor,localScope:{},depthCounter:W.context.depthCounter+1,globalScope:W.context.globalScope};if(64<T.depthCounter)throw Error("Exceeded maximum function depth");return ka(W.definition,T,arguments)}}function xa(W){}function O(W){for(var T=
{mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:E,evaluateIdentifier:la,arcadeCustomFunctionHandler:ta},da=0;da<W.length;da++)W[da].registerFunctions(T);for(var na in T.functions)fa[na]={value:new e.NativeFunction(T.functions[na]),valueset:!0,node:null},pa.prototype[na]=fa[na];for(da=0;da<T.signatures.length;da++)k.addFunctionDeclaration(T.signatures[da],"async")}Object.defineProperty(q,"__esModule",{value:!0});q.findFunctionCalls=q.referencesFunction=q.referencesMember=q.validateScript=
q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var Z=0,fa={};m.registerFunctions(fa,E);y.registerFunctions(fa,E);t.registerFunctions(fa,E);n.registerFunctions(fa,E);r.registerFunctions(fa,E);p.registerFunctions(fa,E);fa["typeof"]=function(W,T){return E(W,T,function(da,na,ja){e.pcCheck(ja,1,1);da=R(ja[0]);if("Unrecognised Type"===da)throw Error("Unrecognised Type");return da})};fa.iif=function(W,T){try{e.pcCheck(null===T.arguments?[]:T.arguments,
3,3);var da=F(W,T.arguments[0]);if(!1===e.isBoolean(da))throw Error("IF Function must have a boolean test condition");var na=F(W,T.arguments[1]),ja=F(W,T.arguments[2]);return!0===da?na:ja}catch(N){throw N;}};fa.decode=function(W,T){try{if(2>T.arguments.length)throw Error("Missing Parameters");if(2===T.arguments.length)return F(W,T.arguments[1]);if(0===(T.arguments.length-1)%2)throw Error("Must have a default value result.");var da=F(W,T.arguments[0]);return ha(W,T,1,da)}catch(na){throw na;}};fa.when=
function(W,T){try{if(3>T.arguments.length)throw Error("Missing Parameters");if(0===T.arguments.length%2)throw Error("Must have a default value result.");var da=F(W,T.arguments[0]);if(!1===e.isBoolean(da))throw Error("WHEN needs boolean test conditions");return S(W,T,0,da)}catch(na){throw na;}};fa.top=function(W,T){return E(W,T,function(da,na,ja){e.pcCheck(ja,2,2);if(e.isArray(ja[0]))return e.toNumber(ja[1])>=ja[0].length?ja[0].slice(0):ja[0].slice(0,e.toNumber(ja[1]));if(e.isImmutableArray(ja[0]))return e.toNumber(ja[1])>=
ja[0].length()?ja[0].slice(0):ja[0].slice(0,e.toNumber(ja[1]));throw Error("Top cannot accept this parameter type");})};fa.first=function(W,T){return E(W,T,function(da,na,ja){e.pcCheck(ja,1,1);return e.isArray(ja[0])?0===ja[0].length?null:ja[0][0]:e.isImmutableArray(ja[0])?0===ja[0].length()?null:ja[0].get(0):null})};fa.sort=function(W,T){return E(W,T,function(da,na,ja){e.pcCheck(ja,1,2);da=ja[0];e.isImmutableArray(da)&&(da=da.toArray());if(!1===e.isArray(da))throw Error("Illegal Argument");if(1<
ja.length){if(!1===e.isFunctionParameter(ja[1]))throw Error("Illegal Argument");var N=ta(ja[1]);return da=X(da,function(ia,qa){return N(ia,qa)})}if(0===da.length)return[];ja={};for(na=0;na<da.length;na++){var P=R(da[na]);""!==P&&(ja[P]=!0)}if(!0===ja.Array||!0===ja.Dictionary||!0===ja.Feature||!0===ja.Point||!0===ja.Polygon||!0===ja.Polyline||!0===ja.Multipoint||!0===ja.Extent||!0===ja.Function)return da.slice(0);na=0;P="";for(var ba in ja)na++,P=ba;return da=1<na||"String"===P?X(da,function(ia,qa){if(null===
ia||void 0===ia||ia===e.voidOperation)return null===qa||void 0===qa||qa===e.voidOperation?0:1;if(null===qa||void 0===qa||qa===e.voidOperation)return-1;var za=e.toString(ia),Ca=e.toString(qa);return za<Ca?-1:za===Ca?0:1}):"Number"===P?X(da,function(ia,qa){return ia-qa}):"Boolean"===P?X(da,function(ia,qa){return ia===qa?0:qa?-1:1}):"Date"===P?X(da,function(ia,qa){return qa-ia}):da.slice(0)})};for(var ra in fa)fa[ra]={value:new e.NativeFunction(fa[ra]),valueset:!0,node:null};var pa=function(){};pa.prototype=
fa;pa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};pa.prototype.pi={value:Math.PI,valueset:!0,node:null};q.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:B,standardFunction:E};q.extend=O;O([l]);q.executeScript=function(W,T){var da=T.spatialReference;if(null===da||void 0===da)da=new G({wkid:102100});var na=T.vars,ja=T.customfunctions,N=new pa;na||(na={});ja||(ja={});var P=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",
backwardslash:"\\"});P.immutable=!1;N.textformatting={value:P,valueset:!0,node:null};for(var ba in ja)N[ba]={value:new e.NativeFunction(ja[ba]),"native":!0,valueset:!0,node:null};for(ba in na)N[ba]=na[ba]&&"esri.Graphic"===na[ba].declaredClass?{value:h.createFromGraphic(na[ba]),valueset:!0,node:null}:{value:na[ba],valueset:!0,node:null};da=F({spatialReference:da,globalScope:N,localScope:null,console:T.console?T.console:xa,lrucache:T.lrucache,interceptor:T.interceptor,depthCounter:1},W.body[0].body);
da instanceof e.ReturnResult&&(da=da.value);da instanceof e.ImplicitResult&&(da=da.value);da===e.voidOperation&&(da=null);if(da===e.breakResult)throw Error("Cannot return BREAK");if(da===e.continueResult)throw Error("Cannot return CONTINUE");if(da instanceof f)throw Error("Cannot return FUNCTION");if(da instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return da};q.extractFieldLiterals=function(W,T){void 0===T&&(T=!1);return k.findFieldLiterals(W)};q.extractExpectedFieldLiterals=function(W){return k.findExpectedFieldLiterals(W)};
q.validateScript=function(W,T){return k.validateScript(W,T,"simple")};q.referencesMember=function(W,T){return k.referencesMember(W,T)};q.referencesFunction=function(W,T){return k.referencesFunction(W,T)};q.findFunctionCalls=function(W){return k.findFunctionCalls(W)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.referencesFunction=q.referencesMember=q.extractExpectedFieldLiterals=
q.validateScript=q.extractFieldLiterals=q.scriptCheck=q.parseScript=void 0;q.parseScript=function(d,h){void 0===h&&(h=[]);var f=b.parse("function _() { "+d+"\n}");if(null===f.body||void 0===f.body)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if(0===f.body.length)throw Error("No formula provided.");if("BlockStatement"!==f.body[0].body.type)throw Error("Invalid formula content.");var g=a.validateLanguage(f);if(""!==g)throw Error(g);a.findScriptDependencies(f,
h);return f};q.scriptCheck=function(d,h,f,g,c){var e=[];d="function _() { \n"+d+"\n}";try{var k=b.parse(d,{tolerant:!0,loc:!0,range:!0}),l=k.errors;if(0<l.length)for(var m=0;m<l.length;m++)e.push({line:l[m].lineNumber-2,character:l[m].column,reason:l[m].description});var n=a.checkScript(k,h,f,g,c);for(h=0;h<n.length;h++)n[h].line-=2,n[h].range&&(n[h].range=[n[h][0]-15,n[h][1]-15]),n[h].loc&&(n[h].loc.start.line-=2,n[h].loc.end.line-=2),e.push(n[h])}catch(t){try{if("Unexpected token }"===t.description){var p=
d.split("\n").length;t.lineNumber===p?(t.index=d.length-1,e.push({line:t.lineNumber-4,character:t.column,reason:"Unexpected end of script"})):(t.index=d.length-1,e.push({line:t.lineNumber-2,character:t.column,reason:"Unexpected end of script"}))}else e.push({line:t.lineNumber-2,character:t.column,reason:t.description})}catch(r){}}return e};q.extractFieldLiterals=function(d,h){void 0===h&&(h=!1);return a.findFieldLiterals(d)};q.validateScript=function(d,h,f){return a.validateScript(d,h,f)};q.extractExpectedFieldLiterals=
function(d){return a.findExpectedFieldLiterals(d)};q.referencesMember=function(d,h){return a.referencesMember(d,h)};q.referencesFunction=function(d,h){return a.referencesFunction(d,h)}})},"esri/arcade/lib/arcade-parser":function(){var D=this&&this.__createBinding||(Object.create?function(a,b,d,h){void 0===h&&(h=d);Object.defineProperty(a,h,{enumerable:!0,get:function(){return b[d]}})}:function(a,b,d,h){void 0===h&&(h=d);a[h]=b[d]}),q=this&&this.__exportStar||function(a,b){for(var d in a)"default"===
d||Object.prototype.hasOwnProperty.call(b,d)||D(b,a,d)};define("require exports ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(a,b,d,h,f,g,c,e){Object.defineProperty(b,"__esModule",{value:!0});b.version=b.Syntax=b.tokenize=b.parse=void 0;b.parse=function(k,l,m){var n=null,p=function(x,z){m&&m(x,z);n&&n.visit(x,z)},t="function"===typeof m?p:void 0,r=!1;if(l){r="boolean"===typeof l.comment&&l.comment;var y="boolean"===typeof l.attachComment&&l.attachComment;if(r||
y)n=new d.CommentHandler,n.attach=y,l.comment=!0,t=p}k=new h.Parser(k,l,t);l=k.parseScript();r&&n&&(l.comments=n.comments);k.config.tokens&&(l.tokens=k.tokens);k.config.tolerant&&(l.errors=k.errorHandler.errors);return l};b.tokenize=function(k,l,m){k=new f.Tokenizer(k,l);l=[];var n=void 0;try{for(;;){var p=k.getNextToken();if(!p)break;m&&(p=m(p));l.push(p)}}catch(t){k.errorHandler.tolerate(t)}k.errorHandler.tolerant&&(n=k.errors());return{tokens:l,errors:n}};Object.defineProperty(b,"Syntax",{enumerable:!0,
get:function(){return g.Syntax}});q(c,b);q(e,b);b.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.CommentHandler=void 0;D=function(){function b(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}b.prototype.insertInnerComments=function(d,h){if(d.type===a.Syntax.BlockStatement&&0===d.body.length){for(var f=[],g=this.leading.length-1;0<=g;--g){var c=
this.leading[g];h.end.offset>=c.start&&(f.unshift(c.comment),this.leading.splice(g,1),this.trailing.splice(g,1))}f.length&&(d.innerComments=f)}};b.prototype.findTrailingComments=function(d){var h=[];if(0<this.trailing.length){for(var f=this.trailing.length-1;0<=f;--f){var g=this.trailing[f];g.start>=d.end.offset&&h.unshift(g.comment)}this.trailing.length=0;return h}(f=this.stack[this.stack.length-1])&&f.node.trailingComments&&(g=f.node.trailingComments[0])&&g.range[0]>=d.end.offset&&(h=f.node.trailingComments,
delete f.node.trailingComments);return h};b.prototype.findLeadingComments=function(d){for(var h=[],f;0<this.stack.length;){var g=this.stack[this.stack.length-1];if(g&&g.start>=d.start.offset)f=g.node,this.stack.pop();else break}if(f){for(var c=(f.leadingComments?f.leadingComments.length:0)-1;0<=c;--c)g=f.leadingComments[c],g.range[1]<=d.start.offset&&(h.unshift(g),f.leadingComments.splice(c,1));f.leadingComments&&0===f.leadingComments.length&&delete f.leadingComments;return h}for(c=this.leading.length-
1;0<=c;--c)g=this.leading[c],g.start<=d.start.offset&&(h.unshift(g.comment),this.leading.splice(c,1));return h};b.prototype.visitNode=function(d,h){if(!(d.type===a.Syntax.Program&&0<d.body.length)){this.insertInnerComments(d,h);var f=this.findTrailingComments(h),g=this.findLeadingComments(h);0<g.length&&(d.leadingComments=g);0<f.length&&(d.trailingComments=f);this.stack.push({node:d,start:h.start.offset})}};b.prototype.visitComment=function(d,h){this.comments.push(d);if(this.attach){var f={comment:{type:d.type,
value:d.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};d.loc&&(f.comment.loc=d.loc);this.leading.push(f);this.trailing.push(f)}};b.prototype.visit=function(d,h){"Line"===d.type||"Block"===d.type?this.visitComment(d,h):this.attach&&this.visitNode(d,h)};return b}();q.CommentHandler=D})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Syntax=void 0;q.Syntax={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",
MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),
function(D,q,a,b,d,h,f,g,c){Object.defineProperty(q,"__esModule",{value:!0});q.Parser=void 0;D=function(){function e(k,l,m){void 0===l&&(l={});this.config={range:"boolean"===typeof l.range&&l.range,loc:"boolean"===typeof l.loc&&l.loc,source:null,tokens:"boolean"===typeof l.tokens&&l.tokens,comment:"boolean"===typeof l.comment&&l.comment,tolerant:"boolean"===typeof l.tolerant&&l.tolerant,globalReturn:!!l.globalReturn};this.config.loc&&l.source&&null!==l.source&&(this.config.source=String(l.source));
this.delegate=m;this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new f.Scanner(k,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",
lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}}e.prototype.tolerateError=function(k){for(var l=[],m=1;m<arguments.length;m++)l[m-1]=arguments[m];var n=l.slice();l=k.replace(/%(\d)/g,function(p,t){a.assert(t<n.length,"Message reference must be in range");return n[t]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,l)};e.prototype.unexpectedTokenError=function(k,l){var m=l||d.Messages.UnexpectedToken;if(k){l||(m=2===k.type?d.Messages.UnexpectedEOS:3===k.type?d.Messages.UnexpectedIdentifier:
6===k.type?d.Messages.UnexpectedNumber:8===k.type?d.Messages.UnexpectedString:10===k.type?d.Messages.UnexpectedTemplate:d.Messages.UnexpectedToken);var n=k.value.toString()}else n="ILLEGAL";m=m.replace("%0",n);return k&&"number"===typeof k.lineNumber?this.errorHandler.createError(k.start,k.lineNumber,k.start-(this.lastMarker.index-this.lastMarker.column)+1,m):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,m)};e.prototype.throwUnexpectedToken=function(k,
l){throw this.unexpectedTokenError(k,l);};e.prototype.tolerateUnexpectedToken=function(k,l){this.errorHandler.tolerate(this.unexpectedTokenError(k,l))};e.prototype.collectComments=function(){if(this.config.comment){var k=this.scanner.scanComments();if(k&&0<k.length&&this.delegate)for(var l=0;l<k.length;++l){var m=k[l],n=new h.Comment(m.multiLine?"Block":"Line",this.scanner.source.slice(m.slice[0],m.slice[1]));this.config.range&&(n.range=m.range);this.config.loc&&(n.loc=m.loc);this.delegate(n,{start:{line:m.loc.start.line,
column:m.loc.start.column,offset:m.range[0]},end:{line:m.loc.end.line,column:m.loc.end.column,offset:m.range[1]}})}}else this.scanner.scanComments()};e.prototype.peekAhead=function(k){var l=this,m=this.scanner.saveState();k.call(this,function(){l.scanner.scanComments();return l.scanner.lex()});this.scanner.restoreState(m)};e.prototype.getTokenRaw=function(k){return this.scanner.source.slice(k.start,k.end)};e.prototype.convertToken=function(k){var l={type:c.TokenName[k.type],value:this.getTokenRaw(k)};
this.config.range&&(l.range=[k.start,k.end]);this.config.loc&&(l.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===k.type&&(l.regex={pattern:k.pattern,flags:k.flags});return l};e.prototype.nextToken=function(){var k=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();
this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var l=this.scanner.lex();this.hasLineTerminator=k.lineNumber!==l.lineNumber;this.lookahead=l;this.config.tokens&&2!==l.type&&this.tokens.push(this.convertToken(l));return k};e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};
e.prototype.startNode=function(k,l){void 0===l&&(l=0);var m=k.start-k.lineStart,n=k.lineNumber;0>m&&(m+=l,n--);return{index:k.start,line:n,column:m}};e.prototype.finalize=function(k,l){this.config.range&&(l.range=[k.index,this.lastMarker.index]);this.config.loc&&(l.loc={start:{line:k.line,column:k.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(l.loc.source=this.config.source));this.delegate&&this.delegate(l,{start:{line:k.line,column:k.column,offset:k.index},
end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return l};e.prototype.expect=function(k){var l=this.nextToken();7===l.type&&l.value===k||this.throwUnexpectedToken(l)};e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var k=this.lookahead;7===k.type&&","===k.value?this.nextToken():7===k.type&&";"===k.value?(this.nextToken(),this.tolerateUnexpectedToken(k)):this.tolerateUnexpectedToken(k,d.Messages.UnexpectedToken)}else this.expect(",")};
e.prototype.expectKeyword=function(k){var l=this.nextToken();4===l.type&&l.value.toString().toLowerCase()===k.toLowerCase()||this.throwUnexpectedToken(l)};e.prototype.match=function(k){return 7===this.lookahead.type&&this.lookahead.value===k};e.prototype.matchKeyword=function(k){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===k.toLowerCase()};e.prototype.matchContextualKeyword=function(k){return 3===this.lookahead.type&&this.lookahead.value===k};e.prototype.matchAssign=function(){return 7!==
this.lookahead.type?!1:h.AssignmentOperators.includes(this.lookahead.value)};e.prototype.isolateCoverGrammar=function(k){var l=this.context.isBindingElement,m=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;k=k.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=
l;this.context.isAssignmentTarget=m;this.context.firstCoverInitializedNameError=n;return k};e.prototype.inheritCoverGrammar=function(k){var l=this.context.isBindingElement,m=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;k=k.call(this);this.context.isBindingElement=this.context.isBindingElement&&l;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&
m;this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError;return k};e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};e.prototype.parsePrimaryExpression=function(){var k=this.createNode();switch(this.lookahead.type){case 3:k=
this.finalize(k,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var l=this.nextToken();var m=this.getTokenRaw(l);k=this.finalize(k,new h.Literal(l.value,m));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.nextToken();m=this.getTokenRaw(l);k=this.finalize(k,new h.Literal("true"===l.value.toString().toLowerCase(),m));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;l=this.nextToken();m=this.getTokenRaw(l);k=this.finalize(k,new h.Literal(null,m));break;case 10:k=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;k=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":k=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":k=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:k=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;k=this.throwUnexpectedToken(this.nextToken());break;default:k=this.throwUnexpectedToken(this.nextToken())}return k};e.prototype.parseArrayInitializer=function(){var k=this.createNode(),l=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),l.push(null)):(l.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(k,new h.ArrayExpression(l))};e.prototype.parseObjectPropertyKey=
function(){var k=this.createNode(),l=this.nextToken();switch(l.type){case 8:case 6:k=this.finalize(k,new h.Literal(l.value,this.getTokenRaw(l)));break;case 3:case 1:case 5:case 4:k=this.finalize(k,new h.Identifier(l.value));break;default:k=this.throwUnexpectedToken(l)}return k};e.prototype.parseObjectProperty=function(){var k=this.createNode(),l=this.lookahead,m=!1,n=!1,p=null;if(3===l.type){var t=l.value;this.nextToken();m=this.match("[");p=this.finalize(k,new h.Identifier(t))}else this.match("*")?
this.nextToken():(m=this.match("["),p=this.parseObjectPropertyKey());p||this.throwUnexpectedToken(this.lookahead);t=null;this.match(":")?(this.nextToken(),t=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===l.type?(t=this.finalize(k,new h.Identifier(l.value)),n=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(k,new h.Property("init",p,m,t,!1,n))};e.prototype.parseObjectInitializer=function(){var k=this.createNode();this.expect("{");for(var l=[];!this.match("}");)l.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(k,new h.ObjectExpression(l))};e.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var k=this.createNode(),l=this.nextToken();return this.finalize(k,new h.TemplateElement({raw:l.value,cooked:l.cooked},l.tail))};e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var k=this.createNode(),l=this.nextToken();
return this.finalize(k,new h.TemplateElement({raw:l.value,cooked:l.cooked},l.tail))};e.prototype.parseTemplateLiteral=function(){var k=this.createNode(),l=[],m=[],n=this.parseTemplateHead();for(m.push(n);!n.tail;)l.push(this.parseExpression()),n=this.parseTemplateElement(),m.push(n);return this.finalize(k,new h.TemplateLiteral(m,l))};e.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var k=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");
this.context.isBindingElement=!1;return k};e.prototype.parseArguments=function(){this.expect("(");var k=[];if(!this.match(")"))for(;;){var l=this.isolateCoverGrammar(this.parseAssignmentExpression);k.push(l);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return k};e.prototype.isIdentifierName=function(k){return 3===k.type||4===k.type||1===k.type||5===k.type};e.prototype.parseIdentifierName=function(){var k=this.createNode(),l=this.nextToken();this.isIdentifierName(l)||
this.throwUnexpectedToken(l);return this.finalize(k,new h.Identifier(l.value))};e.prototype.parseLeftHandSideExpressionAllowCall=function(){var k=this.lookahead,l=this.context.allowIn;this.context.allowIn=!0;for(var m=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var n=this.parseArguments();m=this.finalize(this.startNode(k),new h.CallExpression(m,n))}else if(this.match("["))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!0,this.expect("["),n=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),m=this.finalize(this.startNode(k),new h.ComputedMemberExpression(m,n));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),m=this.finalize(this.startNode(k),new h.StaticMemberExpression(m,n));else break;this.context.allowIn=l;return m};e.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,
"callee of new expression always allow in keyword.");for(var k=this.startNode(this.lookahead),l=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var m=this.isolateCoverGrammar(this.parseExpression);this.expect("]");l=this.finalize(k,new h.ComputedMemberExpression(l,m))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),m=this.parseIdentifierName(),
l=this.finalize(k,new h.StaticMemberExpression(l,m));else break;return l};e.prototype.parseUpdateExpression=function(){var k=this.lookahead;if(this.match("++")||this.match("--")){k=this.startNode(k);var l=this.nextToken();var m=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment);m=this.finalize(k,new h.UpdateExpression(l.value,m,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else m=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),
this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,l=this.nextToken().value,m=this.finalize(this.startNode(k),new h.UpdateExpression(l,m,!1)));return m};e.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var k=this.startNode(this.lookahead),l=this.nextToken();
var m=this.inheritCoverGrammar(this.parseUnaryExpression);m=this.finalize(k,new h.UnaryExpression(l.value,m));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else m=this.parseUpdateExpression();return m};e.prototype.binaryPrecedence=function(k){var l=k.value;return 7===k.type?this.operatorPrecedence[l]||0:4===k.type?this.context.allowIn&&"in"===l?12:0:0};e.prototype.parseBinaryExpression=function(){var k=this.lookahead,l=this.inheritCoverGrammar(this.parseUnaryExpression),m=this.lookahead,
n=this.binaryPrecedence(m);if(0<n){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;k=[k,this.lookahead];var p=this.inheritCoverGrammar(this.parseUnaryExpression);m=[l,m.value,p];for(var t=[n];;){n=this.binaryPrecedence(this.lookahead);if(0>=n)break;for(;2<m.length&&n<=t[t.length-1];){p=m.pop();var r=m.pop();t.pop();l=m.pop();k.pop();var y=k[k.length-1],x=this.startNode(y,y.lineStart);m.push(this.finalize(x,new h.BinaryExpression(r,l,p)))}m.push(this.nextToken().value);
t.push(n);k.push(this.lookahead);m.push(this.inheritCoverGrammar(this.parseUnaryExpression))}n=m.length-1;l=m[n];for(r=k.pop();1<n;){y=k.pop();if(!y)break;x=this.startNode(y,r&&r.lineStart);r=m[n-1];l=this.finalize(x,new h.BinaryExpression(r,m[n-2],l));n-=2;r=y}}return l};e.prototype.parseAssignmentExpression=function(){var k=this.lookahead,l=k,m=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(d.Messages.InvalidLHSInAssignment);
this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);l=this.nextToken();l=l.value;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);m=this.finalize(this.startNode(k),new h.AssignmentExpression(l,m,n));this.context.firstCoverInitializedNameError=null}return m};e.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};e.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=
!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var k=this.parseFunctionDeclaration();break;default:k=this.parseStatement()}else k=this.parseStatement();return k};e.prototype.parseBlock=function(){var k=this.createNode();this.expect("{");for(var l=[];!this.match("}");)l.push(this.parseStatementListItem());this.expect("}");return this.finalize(k,new h.BlockStatement(l))};e.prototype.parseObjectStatement=function(){var k=this.createNode(),l=this.parseObjectInitializer();return this.finalize(k,
new h.ExpressionStatement(l))};e.prototype.parseBlockOrObjectStatement=function(){var k="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(l){var m=l();if(3===m.type||8===m.type)m=l(),7===m.type&&":"===m.value&&(k=!0)});return k?this.parseObjectStatement():this.parseBlock()};e.prototype.parseVariableIdentifier=function(){var k=this.createNode(),l=this.nextToken();3!==l.type&&this.throwUnexpectedToken(l,d.Messages.IdentiferExpected);return this.finalize(k,
new h.Identifier(l.value))};e.prototype.parseVariableDeclaration=function(k){var l=this.createNode(),m=this.parseVariableIdentifier(),n=null;this.match("\x3d")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):m.type===g.Syntax.Identifier||k.inFor||this.expect("\x3d");return this.finalize(l,new h.VariableDeclarator(m,n))};e.prototype.parseVariableDeclarationList=function(k){for(var l=[this.parseVariableDeclaration(k)];this.match(",");)this.nextToken(),l.push(this.parseVariableDeclaration(k));
return l};e.prototype.parseVariableStatement=function(){var k=this.createNode();this.expectKeyword("var");var l=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(k,new h.VariableDeclaration(l,"var"))};e.prototype.parseEmptyStatement=function(){var k=this.createNode();this.expect(";");return this.finalize(k,new h.EmptyStatement)};e.prototype.parseExpressionStatement=function(){var k=this.createNode(),l=this.parseExpression();this.consumeSemicolon();return this.finalize(k,
new h.ExpressionStatement(l))};e.prototype.parseIfClause=function(){var k=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var l=this.parseStatement();this.context.curlyParsing=k;return l};e.prototype.parseIfStatement=function(){var k=this.createNode(),l=null;this.expectKeyword("if");this.expect("(");var m=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var n=this.finalize(this.createNode(),new h.EmptyStatement)}else this.expect(")"),
n=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),l=this.parseIfClause());return this.finalize(k,new h.IfStatement(m,n,l))};e.prototype.parseForStatement=function(){var k=null,l=null,m=null,n=null,p=null,t=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var r=this.createNode();this.nextToken();var y=this.context.allowIn;this.context.allowIn=!1;var x=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=
y;1===x.length&&this.matchKeyword("in")?(x[0].init&&this.tolerateError(d.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(r,new h.VariableDeclaration(x,"var")),this.nextToken(),p=this.parseExpression()):(k=this.finalize(r,new h.VariableDeclaration(x,"var")),this.expect(";"))}else{r=this.context.isBindingElement;x=this.context.isAssignmentTarget;var z=this.context.firstCoverInitializedNameError;y=this.context.allowIn;this.context.allowIn=!1;k=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=y;this.matchKeyword("in")?(this.context.isAssignmentTarget&&k.type!==g.Syntax.AssignmentExpression||this.tolerateError(d.Messages.InvalidLHSInForIn),this.nextToken(),n=k,p=this.parseExpression(),k=null):(this.context.isBindingElement=r,this.context.isAssignmentTarget=x,this.context.firstCoverInitializedNameError=z,this.expect(";"))}n||(this.match(";")||(l=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(m=this.isolateCoverGrammar(this.parseExpression)));
!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),r=this.context.inIteration,x=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",y=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=x,this.context.inIteration=r);return n&&p?this.finalize(t,new h.ForInStatement(n,p,y)):this.finalize(t,new h.ForStatement(k,l,m,y))};e.prototype.parseContinueStatement=
function(){var k=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(k,new h.ContinueStatement)};e.prototype.parseBreakStatement=function(){var k=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(k,new h.BreakStatement)};e.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(d.Messages.IllegalReturn);var k=this.createNode();this.expectKeyword("return");
var l=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(k,new h.ReturnStatement(l))};e.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var k=this.parseExpressionStatement();break;case 7:k=this.lookahead.value;k="{"===k?this.parseBlockOrObjectStatement():"("===k?this.parseExpressionStatement():
";"===k?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":k=this.parseBreakStatement();break;case "continue":k=this.parseContinueStatement();break;case "for":k=this.parseForStatement();break;case "function":k=this.parseFunctionDeclaration();break;case "if":k=this.parseIfStatement();break;case "return":k=this.parseReturnStatement();break;case "var":k=this.parseVariableStatement();break;default:k=this.parseExpressionStatement()}break;
default:k=this.throwUnexpectedToken(this.lookahead)}return k};e.prototype.parseFunctionSourceElements=function(){var k=this.createNode();this.expect("{");var l=this.context.inIteration,m=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var n=[];2!==this.lookahead.type&&!this.match("}");)n.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=l;this.context.inFunctionBody=m;return this.finalize(k,new h.BlockStatement(n))};e.prototype.parseFormalParameters=
function(){var k=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){k.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return k};e.prototype.parseFunctionDeclaration=function(){var k=this.createNode();this.expectKeyword("function");var l=this.parseVariableIdentifier(),m=this.parseFormalParameters(),n=this.parseFunctionSourceElements();return this.finalize(k,new h.FunctionDeclaration(l,m,n))};e.prototype.parseScript=
function(){for(var k=this.createNode(),l=[];2!==this.lookahead.type;)l.push(this.parseStatementListItem());return this.finalize(k,new h.Program(l))};return e}();q.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.assert=void 0;q.assert=function(a,b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",
{value:!0});q.ErrorHandler=void 0;var a=function(){function b(){this.errors=[];this.tolerant=!1}b.prototype.recordError=function(d){this.errors.push(d)};b.prototype.tolerate=function(d){if(this.tolerant)this.recordError(d);else throw d;};b.prototype.constructError=function(d,h){var f=Error(d);try{throw f;}catch(g){Object.create&&Object.defineProperty&&(f=Object.create(g),Object.defineProperty(f,"column",{value:h}))}return f};b.prototype.createError=function(d,h,f,g){f=this.constructError("Line "+
h+": "+g,f);f.index=d;f.lineNumber=h;f.description=g;return f};b.prototype.throwError=function(d,h,f,g){throw this.createError(d,h,f,g);};b.prototype.tolerateError=function(d,h,f,g){d=this.createError(d,h,f,g);if(this.tolerant)this.recordError(d);else throw d;};return b}();q.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Messages=void 0;q.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])};return q(a,b)};return function(a,b){function d(){this.constructor=
a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();define(["require","exports","./syntax"],function(q,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.VariableDeclarator=a.VariableDeclaration=a.UpdateExpression=a.UpdateOperators=a.UnaryExpression=a.UnaryOperators=a.TemplateLiteral=a.TemplateElement=a.Program=a.ReturnStatement=a.Property=a.ObjectExpression=
a.Literal=a.IfStatement=a.Identifier=a.FunctionDeclaration=a.ForStatement=a.ForInStatement=a.ExpressionStatement=a.EmptyStatement=a.ContinueStatement=a.StaticMemberExpression=a.ComputedMemberExpression=a.CallExpression=a.BreakStatement=a.BlockStatement=a.BinaryExpression=a.BinaryOperators=a.LogicalOperators=a.AssignmentExpression=a.AssignmentOperators=a.ArrayExpression=a.Comment=void 0;q=function(){return function(){}}();var d=function(h){function f(g,c){var e=h.call(this)||this;e.type=g;e.value=
c;return e}D(f,h);return f}(q);a.Comment=d;d=function(h){function f(g){var c=h.call(this)||this;c.elements=g;c.type=b.Syntax.ArrayExpression;return c}D(f,h);return f}(q);a.ArrayExpression=d;a.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");d=function(h){function f(g,c,e){var k=h.call(this)||this;k.operator=g;k.left=c;k.right=e;k.type=b.Syntax.AssignmentExpression;return k}D(f,h);return f}(q);a.AssignmentExpression=d;a.LogicalOperators=["||","\x26\x26"];a.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");
d=function(h){function f(g,c,e){var k=h.call(this)||this;k.operator=g;k.left=c;k.right=e;k.type=a.LogicalOperators.includes(g)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;return k}D(f,h);return f}(q);a.BinaryExpression=d;d=function(h){function f(g){var c=h.call(this)||this;c.body=g;c.type=b.Syntax.BlockStatement;return c}D(f,h);return f}(q);a.BlockStatement=d;d=function(h){function f(){var g=null!==h&&h.apply(this,arguments)||this;g.type=b.Syntax.BreakStatement;return g}D(f,h);return f}(q);
a.BreakStatement=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.callee=g;e.args=c;e.type=b.Syntax.CallExpression;e.arguments=c;return e}D(f,h);return f}(q);a.CallExpression=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.object=g;e.property=c;e.type=b.Syntax.MemberExpression;e.computed=!0;return e}D(f,h);return f}(q);a.ComputedMemberExpression=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.object=g;e.property=c;e.type=b.Syntax.MemberExpression;e.computed=!1;return e}
D(f,h);return f}(q);a.StaticMemberExpression=d;d=function(h){function f(){var g=null!==h&&h.apply(this,arguments)||this;g.type=b.Syntax.ContinueStatement;return g}D(f,h);return f}(q);a.ContinueStatement=d;d=function(h){function f(){var g=null!==h&&h.apply(this,arguments)||this;g.type=b.Syntax.EmptyStatement;return g}D(f,h);return f}(q);a.EmptyStatement=d;d=function(h){function f(g){var c=h.call(this)||this;c.expression=g;c.type=b.Syntax.ExpressionStatement;return c}D(f,h);return f}(q);a.ExpressionStatement=
d;d=function(h){function f(g,c,e){var k=h.call(this)||this;k.left=g;k.right=c;k.body=e;k.type=b.Syntax.ForInStatement;k.each=!1;return k}D(f,h);return f}(q);a.ForInStatement=d;d=function(h){function f(g,c,e,k){var l=h.call(this)||this;l.init=g;l.test=c;l.update=e;l.body=k;l.type=b.Syntax.ForStatement;return l}D(f,h);return f}(q);a.ForStatement=d;d=function(h){function f(g,c,e){var k=h.call(this)||this;k.id=g;k.params=c;k.body=e;k.type=b.Syntax.FunctionDeclaration;k.generator=!1;k.expression=!1;k.async=
!1;return k}D(f,h);return f}(q);a.FunctionDeclaration=d;d=function(h){function f(g){var c=h.call(this)||this;c.name=g;c.type=b.Syntax.Identifier;return c}D(f,h);return f}(q);a.Identifier=d;d=function(h){function f(g,c,e){var k=h.call(this)||this;k.test=g;k.consequent=c;k.alternate=e;k.type=b.Syntax.IfStatement;return k}D(f,h);return f}(q);a.IfStatement=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.value=g;e.raw=c;e.type=b.Syntax.Literal;return e}D(f,h);return f}(q);a.Literal=d;d=function(h){function f(g){var c=
h.call(this)||this;c.properties=g;c.type=b.Syntax.ObjectExpression;return c}D(f,h);return f}(q);a.ObjectExpression=d;d=function(h){function f(g,c,e,k,l,m){var n=h.call(this)||this;n.kind=g;n.key=c;n.computed=e;n.value=k;n.method=l;n.shorthand=m;n.type=b.Syntax.Property;return n}D(f,h);return f}(q);a.Property=d;d=function(h){function f(g){var c=h.call(this)||this;c.argument=g;c.type=b.Syntax.ReturnStatement;return c}D(f,h);return f}(q);a.ReturnStatement=d;d=function(h){function f(g){var c=h.call(this)||
this;c.body=g;c.type=b.Syntax.Program;return c}D(f,h);return f}(q);a.Program=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.value=g;e.tail=c;e.type=b.Syntax.TemplateElement;return e}D(f,h);return f}(q);a.TemplateElement=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.quasis=g;e.expressions=c;e.type=b.Syntax.TemplateLiteral;return e}D(f,h);return f}(q);a.TemplateLiteral=d;a.UnaryOperators=["-","+","!","~"];d=function(h){function f(g,c){var e=h.call(this)||this;e.operator=g;e.argument=
c;e.type=b.Syntax.UnaryExpression;e.prefix=!0;return e}D(f,h);return f}(q);a.UnaryExpression=d;a.UpdateOperators=["++","--"];d=function(h){function f(g,c,e){var k=h.call(this)||this;k.operator=g;k.argument=c;k.prefix=e;k.type=b.Syntax.UpdateExpression;return k}D(f,h);return f}(q);a.UpdateExpression=d;d=function(h){function f(g,c){var e=h.call(this)||this;e.declarations=g;e.kind=c;e.type=b.Syntax.VariableDeclaration;return e}D(f,h);return f}(q);a.VariableDeclaration=d;q=function(h){function f(g,c){var e=
h.call(this)||this;e.id=g;e.init=c;e.type=b.Syntax.VariableDeclarator;return e}D(f,h);return f}(q);a.VariableDeclarator=q})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(D,q,a,b,d){Object.defineProperty(q,"__esModule",{value:!0});q.Scanner=void 0;D=function(){function h(f,g){this.source=f;this.errorHandler=g;this.isModule=this.trackComment=!1;this.length=f.length;this.index=0;this.lineNumber=0<f.length?1:0;this.lineStart=0;this.curlyStack=
[]}h.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};h.prototype.restoreState=function(f){this.index=f.index;this.lineNumber=f.lineNumber;this.lineStart=f.lineStart;this.curlyStack=f.curlyStack};h.prototype.eof=function(){return this.index>=this.length};h.prototype.throwUnexpectedToken=function(f){void 0===f&&(f=d.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,
this.index-this.lineStart+1,f)};h.prototype.tolerateUnexpectedToken=function(f){void 0===f&&(f=d.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,f)};h.prototype.skipSingleLineComment=function(f){var g=[],c=0,e=null;this.trackComment&&(g=[],c=this.index-f,e={start:{line:this.lineNumber,column:this.index-this.lineStart-f},end:{line:0,column:0}});for(;!this.eof();){var k=this.source.charCodeAt(this.index);++this.index;if(b.Character.isLineTerminator(k))return e&&
(e.end={line:this.lineNumber,column:this.index-this.lineStart-1},f={multiLine:!1,slice:[c+f,this.index-1],range:[c,this.index-1],loc:e},g.push(f)),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,g}e&&(e.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!1,slice:[c+f,this.index],range:[c,this.index],loc:e},g.push(f));return g};h.prototype.skipMultiLineComment=function(){var f=[],g=0,c=null;this.trackComment&&(g=this.index-
2,c={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var e=this.source.charCodeAt(this.index);if(b.Character.isLineTerminator(e))13===e&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===e&&47===this.source.charCodeAt(this.index+1))return this.index+=2,c&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!0,slice:[g+2,this.index-2],range:[g,
this.index],loc:c},f.push(g)),f;++this.index}}c&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!0,slice:[g+2,this.index],range:[g,this.index],loc:c},f.push(g));this.tolerateUnexpectedToken();return f};h.prototype.scanComments=function(){var f=null;this.trackComment&&(f=[]);for(var g=0===this.index;!this.eof();){var c=this.source.charCodeAt(this.index);if(b.Character.isWhiteSpace(c))++this.index;else if(b.Character.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,g=!0;else if(47===c)if(c=this.source.charCodeAt(this.index+1),47===c)this.index+=2,c=this.skipSingleLineComment(2),f&&(f=f.concat(c)),g=!0;else if(42===c)this.index+=2,c=this.skipMultiLineComment(),f&&(f=f.concat(c));else break;else if(g&&45===c)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,c=this.skipSingleLineComment(3),f&&(f=f.concat(c));else break;else if(60!==c||this.isModule)break;
else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,c=this.skipSingleLineComment(4),f&&(f=f.concat(c));else break}return f};h.prototype.isKeyword=function(f){f=f.toLowerCase();switch(f.length){case 2:return"if"===f||"in"===f;case 3:return"var"===f||"for"===f;case 4:return"else"===f;case 5:return"break"===f;case 6:return"return"===f;case 8:return"function"===f||"continue"===f;default:return!1}};h.prototype.codePointAt=function(f){var g=this.source.charCodeAt(f);55296<=g&&56319>=
g&&(f=this.source.charCodeAt(f+1),56320<=f&&57343>=f&&(g=1024*(g-55296)+f-56320+65536));return g};h.prototype.scanHexEscape=function(f){f="u"===f?4:2;for(var g=0,c=0;c<f;++c)if(!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index)))g=16*g+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(g)};h.prototype.scanUnicodeCodePointEscape=function(){var f=this.source[this.index],g=0;for("}"===f&&this.throwUnexpectedToken();!this.eof();){f=
this.source[this.index++];if(!b.Character.isHexDigit(f.charCodeAt(0)))break;g=16*g+"0123456789abcdef".indexOf(f.toLowerCase())}(1114111<g||"}"!==f)&&this.throwUnexpectedToken();return b.Character.fromCodePoint(g)};h.prototype.getIdentifier=function(){for(var f=this.index++;!this.eof();){var g=this.source.charCodeAt(this.index);if(92===g||55296<=g&&57343>g)return this.index=f,this.getComplexIdentifier();if(b.Character.isIdentifierPart(g))++this.index;else break}return this.source.slice(f,this.index)};
h.prototype.getComplexIdentifier=function(){var f=this.codePointAt(this.index),g=b.Character.fromCodePoint(f);this.index+=g.length;if(92===f){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var c=this.scanUnicodeCodePointEscape()}else c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierStart(c.charCodeAt(0))||this.throwUnexpectedToken();g=c}for(;!this.eof();){f=this.codePointAt(this.index);if(!b.Character.isIdentifierPart(f))break;
c=b.Character.fromCodePoint(f);g+=c;this.index+=c.length;92===f&&(g=g.substr(0,g.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,c=this.scanUnicodeCodePointEscape()):(c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierPart(c.charCodeAt(0))||this.throwUnexpectedToken()),g+=c)}return g};h.prototype.octalToDecimal=function(f){var g="0"!==f,c="01234567".indexOf(f);!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(g=!0,c=8*c+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(f)&&!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(c=8*c+"01234567".indexOf(this.source[this.index++])));return{code:c,octal:g}};h.prototype.scanIdentifier=function(){var f=this.index,g=92===this.source.charCodeAt(f)?this.getComplexIdentifier():this.getIdentifier();var c=1===g.length?3:this.isKeyword(g)?4:"null"===g.toLowerCase()?5:"true"===g.toLowerCase()||"false"===g.toLowerCase()?1:3;if(3!==
c&&f+g.length!==this.index){var e=this.index;this.index=f;this.tolerateUnexpectedToken(d.Messages.InvalidEscapedReservedWord);this.index=e}return{type:c,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanPunctuator=function(){var f=this.index,g=this.source[this.index];switch(g){case "(":case "{":"{"===g&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;
break;default:g=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===g?this.index+=4:(g=g.substr(0,3),"\x3d\x3d\x3d"===g||"!\x3d\x3d"===g||"\x3e\x3e\x3e"===g||"\x3c\x3c\x3d"===g||"\x3e\x3e\x3d"===g||"**\x3d"===g?this.index+=3:(g=g.substr(0,2),"\x26\x26"===g||"||"===g||"\x3d\x3d"===g||"!\x3d"===g||"+\x3d"===g||"-\x3d"===g||"*\x3d"===g||"/\x3d"===g||"++"===g||"--"===g||"\x3c\x3c"===g||"\x3e\x3e"===g||"\x26\x3d"===g||"|\x3d"===g||"^\x3d"===g||"%\x3d"===g||"\x3c\x3d"===g||"\x3e\x3d"===g||"\x3d\x3e"===
g||"**"===g?this.index+=2:(g=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(g)&&++this.index)))}this.index===f&&this.throwUnexpectedToken();return{type:7,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanHexLiteral=function(f){for(var g="";!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];0===g.length&&this.throwUnexpectedToken();b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+g,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanBinaryLiteral=function(f){for(var g="";!this.eof();){var c=this.source[this.index];if("0"!==c&&"1"!==c)break;g+=this.source[this.index++]}0===g.length&&this.throwUnexpectedToken();this.eof()||(c=this.source.charCodeAt(this.index),(b.Character.isIdentifierStart(c)||b.Character.isDecimalDigit(c))&&this.throwUnexpectedToken());return{type:6,
value:parseInt(g,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanOctalLiteral=function(f,g){var c="",e=!1;b.Character.isOctalDigit(f.charCodeAt(0))?(e=!0,c="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];e||0!==c.length||this.throwUnexpectedToken();(b.Character.isIdentifierStart(this.source.charCodeAt(this.index))||b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&
this.throwUnexpectedToken();return{type:6,value:parseInt(c,8),octal:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};h.prototype.scanNumericLiteral=function(){var f=this.index,g=this.source[f];a.assert(b.Character.isDecimalDigit(g.charCodeAt(0))||"."===g,"Numeric literal must start with a decimal digit or a decimal point");var c="";if("."!==g){c=this.source[this.index++];g=this.source[this.index];if("0"===c){if("x"===g||"X"===g)return++this.index,this.scanHexLiteral(f);
if("b"===g||"B"===g)return++this.index,this.scanBinaryLiteral(f);if("o"===g||"O"===g)return this.scanOctalLiteral(g,f)}for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];g=this.source[this.index]}if("."===g){for(c+=this.source[this.index++];b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];g=this.source[this.index]}if("e"===g||"E"===g){c+=this.source[this.index++];g=this.source[this.index];if("+"===g||"-"===
g)c+=this.source[this.index++];if(b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];else this.throwUnexpectedToken()}b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(c),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanStringLiteral=function(){var f=this.index,g=this.source[f];
a.assert("'"===g||'"'===g,"String literal must starts with a quote");++this.index;for(var c=!1,e="";!this.eof();){var k=this.source[this.index++];if(k===g){g="";break}if("\\"===k)if((k=this.source[this.index++])&&b.Character.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case "u":"{"===this.source[this.index]?(++this.index,e+=this.scanUnicodeCodePointEscape()):(k=this.scanHexEscape(k),null===k&&this.throwUnexpectedToken(),
e+=k);break;case "x":k=this.scanHexEscape(k);null===k&&this.throwUnexpectedToken(d.Messages.InvalidHexEscapeSequence);e+=k;break;case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\x0B";break;case "8":case "9":e+=k;this.tolerateUnexpectedToken();break;default:k&&b.Character.isOctalDigit(k.charCodeAt(0))?(k=this.octalToDecimal(k),c=k.octal||c,e+=String.fromCharCode(k.code)):e+=k}else if(b.Character.isLineTerminator(k.charCodeAt(0)))break;
else e+=k}""!==g&&(this.index=f,this.throwUnexpectedToken());return{type:8,value:e,octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.scanTemplate=function(){var f="",g=!1,c=this.index,e="`"===this.source[c],k=!1,l=2;for(++this.index;!this.eof();){var m=this.source[this.index++];if("`"===m){l=1;g=k=!0;break}if("$"===m){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;g=!0;break}f+=m}else if("\\"===m)if(m=this.source[this.index++],
b.Character.isLineTerminator(m.charCodeAt(0)))++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(m){case "n":f+="\n";break;case "r":f+="\r";break;case "t":f+="\t";break;case "u":if("{"===this.source[this.index])++this.index,f+=this.scanUnicodeCodePointEscape();else{var n=this.index,p=this.scanHexEscape(m);null!==p?f+=p:(this.index=n,f+=m)}break;case "x":m=this.scanHexEscape(m);null===m&&this.throwUnexpectedToken(d.Messages.InvalidHexEscapeSequence);
f+=m;break;case "b":f+="\b";break;case "f":f+="\f";break;case "v":f+="\v";break;default:"0"===m?(b.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(d.Messages.TemplateOctalLiteral),f+="\x00"):b.Character.isOctalDigit(m.charCodeAt(0))?this.throwUnexpectedToken(d.Messages.TemplateOctalLiteral):f+=m}else b.Character.isLineTerminator(m.charCodeAt(0))?(++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,f+="\n"):f+=m}g||
this.throwUnexpectedToken();e||this.curlyStack.pop();return{type:10,value:this.source.slice(c+1,this.index-l),cooked:f,head:e,tail:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};h.prototype.testRegExp=function(f,g){var c=this,e=f;0<=g.indexOf("u")&&(e=e.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(k,l,m){k=parseInt(l||m,16);1114111<k&&c.throwUnexpectedToken(d.Messages.InvalidRegExp);return 65535>=k?String.fromCharCode(k):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"\uffff"));try{RegExp(e)}catch(k){this.throwUnexpectedToken(d.Messages.InvalidRegExp)}try{return new RegExp(f,g)}catch(k){return null}};h.prototype.scanRegExpBody=function(){var f=this.source[this.index];a.assert("/"===f,"Regular expression literal must start with a slash");for(var g=this.source[this.index++],c=!1,e=!1;!this.eof();)if(f=this.source[this.index++],g+=f,"\\"===f)f=this.source[this.index++],b.Character.isLineTerminator(f.charCodeAt(0))&&this.throwUnexpectedToken(d.Messages.UnterminatedRegExp),
g+=f;else if(b.Character.isLineTerminator(f.charCodeAt(0)))this.throwUnexpectedToken(d.Messages.UnterminatedRegExp);else if(c)"]"===f&&(c=!1);else{if("/"===f){e=!0;break}"["===f&&(c=!0)}e||this.throwUnexpectedToken(d.Messages.UnterminatedRegExp);return g.substr(1,g.length-2)};h.prototype.scanRegExpFlags=function(){for(var f="";!this.eof();){var g=this.source[this.index];if(!b.Character.isIdentifierPart(g.charCodeAt(0)))break;++this.index;if("\\"!==g||this.eof())f+=g;else{g=this.source[this.index];
if("u"===g){++this.index;g=this.index;var c=this.scanHexEscape("u");if(null!==c)for(f+=c;g<this.index;++g);else this.index=g,f+="u"}this.tolerateUnexpectedToken()}}return f};h.prototype.scanRegExp=function(){var f=this.index,g=this.scanRegExpBody(),c=this.scanRegExpFlags(),e=this.testRegExp(g,c);return{type:9,value:"",pattern:g,flags:c,regex:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};h.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,
lineStart:this.lineStart,start:this.index,end:this.index};var f=this.source.charCodeAt(this.index);return b.Character.isIdentifierStart(f)?this.scanIdentifier():40===f||41===f||59===f?this.scanPunctuator():39===f||34===f?this.scanStringLiteral():46===f?b.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():b.Character.isDecimalDigit(f)?this.scanNumericLiteral():96===f||125===f&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=f&&57343>f&&b.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return h}();q.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
q.Character={fromCodePoint:function(d){return 65536>d?String.fromCharCode(d):String.fromCharCode(55296+(d-65536>>10))+String.fromCharCode(56320+(d-65536&1023))},isWhiteSpace:function(d){return 32===d||9===d||11===d||12===d||160===d||5760<=d&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(d)},isLineTerminator:function(d){return 10===d||13===d||8232===d||8233===d},isIdentifierStart:function(d){return 36===d||95===d||65<=d&&90>=d||97<=d&&122>=d||92===d||
128<=d&&a.test(q.Character.fromCodePoint(d))},isIdentifierPart:function(d){return 36===d||95===d||65<=d&&90>=d||97<=d&&122>=d||48<=d&&57>=d||92===d||128<=d&&b.test(q.Character.fromCodePoint(d))},isDecimalDigit:function(d){return 48<=d&&57>=d},isHexDigit:function(d){return 48<=d&&57>=d||65<=d&&70>=d||97<=d&&102>=d},isOctalDigit:function(d){return 48<=d&&55>=d}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.TokenName=
q.TokenType=void 0;var a=q.TokenType||(q.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";q.TokenName={};q.TokenName[1]="Boolean";q.TokenName[2]="\x3cend\x3e";q.TokenName[3]="Identifier";q.TokenName[4]="Keyword";
q.TokenName[5]="Null";q.TokenName[6]="Numeric";q.TokenName[7]="Punctuator";q.TokenName[8]="String";q.TokenName[9]="RegularExpression";q.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){var D=this&&this.__spreadArray||function(q,a){for(var b=0,d=a.length,h=q.length;b<d;b++,h++)q[h]=a[b];return q};define("require exports ./error-handler ./nodes ./scanner ./token".split(" "),function(q,a,b,d,h,f){Object.defineProperty(a,"__esModule",{value:!0});a.Tokenizer=void 0;var g=function(){function c(){this.values=
[];this.curly=this.paren=-1}c.prototype.beforeFunctionExpression=function(e){return 0<=D(D(D(D(["(","{","[","return",","],d.AssignmentOperators),d.BinaryOperators),d.LogicalOperators),d.UnaryOperators).indexOf(e)};c.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],k=null!==e;switch(e){case "this":case "]":k=!1;break;case ")":e=this.values[this.paren-1];k="if"===e||"while"===e||"for"===e||"with"===e;break;case "}":k=!0,"function"===this.values[this.curly-3]?k=(e=this.values[this.curly-
4])?!this.beforeFunctionExpression(e):!1:"function"===this.values[this.curly-4]&&(k=(e=this.values[this.curly-5])?!this.beforeFunctionExpression(e):!0)}return k};c.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)};return c}();q=function(){function c(e,k){this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=k?"boolean"===typeof k.tolerant&&k.tolerant:
!1;this.scanner=new h.Scanner(e,this.errorHandler);this.scanner.trackComment=k?"boolean"===typeof k.comment&&k.comment:!1;this.trackRange=k?"boolean"===typeof k.range&&k.range:!1;this.trackLoc=k?"boolean"===typeof k.loc&&k.loc:!1;this.buffer=[];this.reader=new g}c.prototype.errors=function(){return this.errorHandler.errors};c.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(e)for(var k=0;k<e.length;++k){var l=e[k],m=this.scanner.source.slice(l.slice[0],
l.slice[1]);m={type:l.multiLine?"BlockComment":"LineComment",value:m};this.trackRange&&(m.range=l.range);this.trackLoc&&(m.loc=l.loc);this.buffer.push(m)}if(!this.scanner.eof()){e=null;this.trackLoc&&(e={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});k=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){l=this.scanner.saveState();try{k=this.scanner.scanRegExp()}catch(n){this.scanner.restoreState(l),k=this.scanner.lex()}}else k=
this.scanner.lex();this.reader.push(k);l={type:f.TokenName[k.type],value:this.scanner.source.slice(k.start,k.end)};this.trackRange&&(l.range=[k.start,k.end]);this.trackLoc&&e&&(e.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=e);9===k.type&&(l.regex={pattern:k.pattern,flags:k.flags});this.buffer.push(l)}}return this.buffer.shift()};return c}();a.Tokenizer=q})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],
function(D,q,a){function b(f,g){Array.isArray(g)?(f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3]):(f[0]=g.r,f[1]=g.g,f[2]=g.b,f[3]=g.a);return f}function d(f,g,c){void 0===g&&(g=0);void 0===c&&(c=!1);var e=f[g+3];f[g+0]*=e;f[g+1]*=e;f[g+2]*=e;c||(f[g+3]*=255);return f}Object.defineProperty(q,"__esModule",{value:!0});q.white=[255,255,255,1];var h=[0,0,0,0];q.premultiplyAlpha=d;q.copyAndPremultiply=function(f){return d(b([],f))};q.premultiplyAlphaUint32=function(f){d(b(h,f));return a.i8888to32(h[0],h[1],h[2],
h[3])};q.premultiplyAlphaRGBA=function(f){if(!f)return 0;var g=f.a;return a.i8888to32(f.r*g,f.g*g,f.b*g,255*g)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Float32Array(1),b=new Uint32Array(a.buffer);q.nextHighestPowerOfTwo=function(d){d--;d|=d>>1;d|=d>>2;d|=d>>4;d|=d>>8;d|=d>>16;d++;return d};q.toUint32=function(d){a[0]=d;return b[0]};q.i1616to32=function(d,h){return 65535&
d|h<<16};q.i8888to32=function(d,h,f,g){return d&255|(h&255)<<8|(f&255)<<16|g<<24};q.i8816to32=function(d,h,f){return d&255|(h&255)<<8|f<<16};q.numTo32=function(d){return d|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function b(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=
this.offsetY=this.offsetX=this.angle=0}b.prototype.acquire=function(d,h,f,g,c,e,k,l,m){this.color=d;this.haloColor=h;this.haloSize=f;this.size=g;this.angle=c;this.offsetX=e;this.offsetY=k;this.hAnchor=l;this.vAnchor=m};b.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};b.pool=new a(b);return b}();q.TextProperties=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f,g,c,e,k){Object.defineProperty(q,"__esModule",{value:!0});D=function(l){function m(){var n=l.call(this)||this;n._initialized=
!1;n._maxWidth=0;n._color=new Float32Array([1,0,0,1]);return n}a(m,l);m.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=
null};m.prototype.draw=function(n,p){var t=n.context;if(p.status!==f.TileStatus.INITIALIZED){this._initialized||this._initialize(t);t.bindVAO(this._outlineVertexArrayObject);t.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",p.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",p.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);t.setLineWidth(2);t.drawArrays(3,0,4);t.bindVAO();var r=this._getTexture(t,p);r&&(t.bindVAO(this._tileInfoVertexArrayObject),t.bindProgram(this._tileInfoProgram),t.bindTexture(r,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",p.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",p.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",r.descriptor.width,r.descriptor.height),t.drawArrays(5,0,4),t.bindVAO())}};m.prototype._initialize=function(n){if(this._initialized)return!0;var p={a_pos:0},t=new c(n,h.backgroundVS,h.backgroundFS,p),r=new c(n,h.tileInfoVS,h.tileInfoFS,p),y={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},x=new Int8Array([0,0,1,0,1,1,0,1]);x=g.createVertex(n,35044,x);x=new k(n,p,y,{geometry:x});var z=new Int8Array([0,0,1,
0,0,1,1,1]);z=g.createVertex(n,35044,z);n=new k(n,p,y,{geometry:z});this._outlineProgram=t;this._tileInfoProgram=r;this._outlineVertexArrayObject=x;this._tileInfoVertexArrayObject=n;return this._initialized=!0};m.prototype._getTexture=function(n,p){if(p.texture)return p.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var t=p.key.id,r=this._canvas.getContext("2d");r.font="24px sans-serif";r.textAlign="left";r.textBaseline="middle";var y=r.measureText(t);y=Math.pow(2,Math.ceil(b.log2(y.width+2)));y>this._maxWidth&&(this._maxWidth=y);r.clearRect(0,0,this._maxWidth,32);r.fillStyle="blue";r.fillText(t,0,16);p.texture=new e(n,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return p.texture};return m}(d["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require",
"exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){return function(){}}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(D,q,a,b,d,h,f){D=new f;f.parse(a,D);f.parse(b,D);f.parse(d,D);f.parse(h,D);return D})},
"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=q.TileStatus||(q.TileStatus={});a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(D,q,a){return function(){function b(d,h,f,g,c){this._glName=this._context=
null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=d;this._bufferType=h;this._usage=f;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&d.instanceCounter.incrementCount(1);g&&this.setData(g,c)}b.createIndex=function(d,h,f,g){return new b(d,34963,h,f,g)};b.createVertex=function(d,h,f){return new b(d,34962,h,f)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};b.prototype.setData=function(d,h){if(d){if("number"===typeof d){if(34963===
this._bufferType&&h)switch(this._indexType=h,this._size=d,h){case 5123:d*=2;break;case 5125:d*=4}}else{var f=d.byteLength;d instanceof Uint16Array&&(f/=2,this._indexType=5123);d instanceof Uint32Array&&(f/=4,this._indexType=5125);this._size=f;ArrayBuffer.isView(d)&&(d=d.buffer)}f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,d,this._usage);this._context.bindVAO(f)}};b.prototype.setSubData=function(d,h,f,g){void 0===
h&&(h=0);void 0===f&&(f=0);if(d){var c=g,e=d.byteLength;d instanceof Uint16Array&&(e/=2,h*=2,f*=2,c*=2);d instanceof Uint32Array&&(e/=4,h*=4,f*=4,c*=4);void 0===g&&(g=e-1);g=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);e=this._context.gl;d=ArrayBuffer.isView(d)?d.buffer:d;e.bufferSubData(this._bufferType,h,d.slice(f,c));this._context.bindVAO(g)}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports",
"dojo/has"],function(D,q,a){return function(){function b(d,h,f){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=d;this._desc={pixelFormat:h.pixelFormat,internalFormat:h.internalFormat,dataType:h.dataType,target:h.target?h.target:3553,samplingMode:h.samplingMode?h.samplingMode:9729,wrapMode:h.wrapMode?h.wrapMode:10497,maxAnisotropy:h.maxAnisotropy,flipped:void 0!==h.flipped?h.flipped:!1,hasMipmap:void 0!==
h.hasMipmap?h.hasMipmap:!1,level:void 0!==h.level?h.level:0,unpackAlignment:h.unpackAlignment?h.unpackAlignment:4,width:h.width,height:h.height,preMultiplyAlpha:void 0!==h.preMultiplyAlpha?h.preMultiplyAlpha:!1};this._id=++b._nextId;a("esri-webgl-debug")&&d.instanceCounter.incrementCount(0);this.setData(f)}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});b.prototype.dispose=function(){var d=this;if(this._context){if(this._glName){var h=this._context.gl;this._boundToUnits.forEach(function(f){d._context.bindTexture(null,f)});h.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};b.prototype.resize=function(d,h){var f=this._desc;if(f.width!==
d||f.height!==h)f.width=d,f.height=h,this.setData(null)};b.prototype.setData=function(d){var h=this._context.gl;this._glName||(this._glName=h.createTexture());void 0===d&&(d=null);null===d&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var g=this._desc;b._validateTexture(g);h.pixelStorei(h.UNPACK_ALIGNMENT,g.unpackAlignment);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
g.preMultiplyAlpha);if(d instanceof ImageData||d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement)h.texImage2D(h.TEXTURE_2D,g.level,g.internalFormat?g.internalFormat:g.pixelFormat,g.pixelFormat,g.dataType,d),void 0===this._desc.width&&(this._desc.width=d.width),void 0===this._desc.height&&(this._desc.height=d.height);else{var c=g.internalFormat?g.internalFormat:g.pixelFormat,e=g.pixelFormat;h.DEPTH24_STENCIL8&&c===h.DEPTH_STENCIL&&(c=h.DEPTH24_STENCIL8);h.texImage2D(h.TEXTURE_2D,
g.level,c,g.width,g.height,0,e,g.dataType,d)}g.hasMipmap&&this.generateMipmap();b._applySamplingMode(h,this._desc);b._applyWrapMode(h,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(f,0)};b.prototype.updateData=function(d,h,f,g,c,e){var k=this._context.gl,l=this._desc,m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?
k.texSubImage2D(k.TEXTURE_2D,d,h,f,l.pixelFormat,l.dataType,e):k.texSubImage2D(k.TEXTURE_2D,d,h,f,g,c,l.pixelFormat,l.dataType,e);this._context.bindTexture(m,0)};b.prototype.generateMipmap=function(){var d=this._desc;d.hasMipmap||(d.hasMipmap=!0,b._validateTexture(d));9729===d.samplingMode?(this._samplingModeDirty=!0,d.samplingMode=9985):9728===d.samplingMode&&(this._samplingModeDirty=!0,d.samplingMode=9984);d=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._context.gl;
h.generateMipmap(h.TEXTURE_2D);this._context.bindTexture(d,0)};b.prototype.setSamplingMode=function(d){d!==this._desc.samplingMode&&(this._desc.samplingMode=d,b._validateTexture(this._desc),this._samplingModeDirty=!0)};b.prototype.setWrapMode=function(d){d!==this._desc.wrapMode&&(this._desc.wrapMode=d,b._validateTexture(this._desc),this._wrapModeDirty=!0)};b.prototype.applyChanges=function(){var d=this._context.gl,h=this._desc;this._samplingModeDirty&&(b._applySamplingMode(d,h),this._samplingModeDirty=
!1);this._wrapModeDirty&&(b._applyWrapMode(d,h),this._wrapModeDirty=!1)};b.prototype.setBoundToUnit=function(d,h){h?this._boundToUnits.add(d):this._boundToUnits["delete"](d)};b._isPowerOfTwo=function(d){return 0===(d&d-1)};b._validateTexture=function(d){b._isPowerOfTwo(d.width)&&b._isPowerOfTwo(d.height)};b._applySamplingMode=function(d,h){var f=h.samplingMode;if(9985===f||9987===f)f=9729;else if(9984===f||9986===f)f=9728;d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,f);d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_MIN_FILTER,h.samplingMode)};b._applyWrapMode=function(d,h){d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,h.wrapMode);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,h.wrapMode)};b._applyAnisotropicFilteringParameters=function(d,h){if(null!=h.maxAnisotropy){var f=d.capabilities.textureFilterAnisotropic;if(f){var g=d.gl;g.texParameterf(g.TEXTURE_2D,f.TEXTURE_MAX_ANISOTROPY,h.maxAnisotropy)}}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require",
"exports","dojo/has","./Util"],function(D,q,a,b){return function(){function d(h,f,g,c,e){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=h;this._layout=g;this._buffers=c;this._locations=f;e&&(this._indexBuffer=e);this._id=d._nextId++;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(2)}Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){var h=this;return Object.keys(this._buffers).reduce(function(f,g){return f+h._buffers[g].size},this._indexBuffer?this._indexBuffer.size:
0)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});d.prototype.dispose=function(h){void 0===h&&(h=!0);if(this._context){var f=this._context.capabilities.vao;f&&this._glName&&(f.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);
if(h){for(var g in this._buffers)this._buffers[g].dispose(),delete this._buffers[g];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};d.prototype.initialize=function(){if(!this._initialized){var h=this._context.capabilities.vao;if(h){var f=h.createVertexArray();h.bindVertexArray(f);this._bindLayout();h.bindVertexArray(null);this._glName=f}this._initialized=!0}};d.prototype.bind=function(){this.initialize();
var h=this._context.capabilities.vao;h?h.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};d.prototype._bindLayout=function(){var h=this._buffers,f=!!this._context.capabilities.vao,g=this._layout,c=this._indexBuffer,e=this._context.gl,k;for(k in h)b.bindVertexBufferLayout(this._context,this._locations,h[k],g[k]);c&&(f?e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c.glName):this._context.bindBuffer(c))};d.prototype.unbind=function(){this.initialize();var h=this._context.capabilities.vao;
h?h.bindVertexArray(null):this._unbindLayout()};d.prototype._unbindLayout=function(){var h=this._buffers,f=this._layout,g;for(g in h)b.unbindVertexBufferLayout(this._context,this._locations,h[g],f[g]);(h=this._indexBuffer)&&this._context.unbindBuffer(h.bufferType)};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c){Object.defineProperty(q,"__esModule",{value:!0});D=function(e){function k(){var l=e.call(this)||this;l._color=b.create();l._initialized=!1;l._color.set([1,0,0,1]);return l}a(k,e);k.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};k.prototype.draw=function(l,m){var n=l.context;this._initialized||this._initialize(n);
n.setStencilFunctionSeparate(1032,519,m.stencilRef,255);n.bindVAO(this._solidVertexArrayObject);n.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);n.drawArrays(5,0,4);n.bindVAO()};k.prototype._initialize=
function(l){if(this._initialized)return!0;var m={a_pos:0},n=new g(l,h.backgroundVS,h.backgroundFS,m);if(!n)return!1;var p=new Int8Array([0,0,1,0,0,1,1,1]);p=f.createVertex(l,35044,p);l=new c(l,m,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:p});this._solidProgram=n;this._solidVertexArrayObject=l;return this._initialized=!0};return k}(d["default"]);q["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],
function(D){var q={create:function(){var a=new D.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,h){var f=new D.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=d;f[3]=h;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,h,f){a[0]=b;a[1]=d;a[2]=h;a[3]=f;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},
subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};q.mul=q.multiply;q.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=
Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*
d;a[2]=b[2]*d;a[3]=b[3]*d;return a};q.scaleAndAdd=function(a,b,d,h){a[0]=b[0]+d[0]*h;a[1]=b[1]+d[1]*h;a[2]=b[2]+d[2]*h;a[3]=b[3]+d[3]*h;return a};q.distance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return Math.sqrt(d*d+h*h+f*f+g*g)};q.dist=q.distance;q.squaredDistance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1],f=b[2]-a[2],g=b[3]-a[3];return d*d+h*h+f*f+g*g};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],d=a[1],h=a[2];a=a[3];return Math.sqrt(b*b+d*d+h*h+a*a)};q.len=
q.length;q.squaredLength=function(a){var b=a[0],d=a[1],h=a[2];a=a[3];return b*b+d*d+h*h+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};q.normalize=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=d*d+h*h+f*f+g*g;0<c&&(c=1/Math.sqrt(c),a[0]=d*c,a[1]=h*c,a[2]=f*c,a[3]=g*c);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,
b,d,h){var f=b[0],g=b[1],c=b[2];b=b[3];a[0]=f+h*(d[0]-f);a[1]=g+h*(d[1]-g);a[2]=c+h*(d[2]-c);a[3]=b+h*(d[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=D.RANDOM();a[1]=D.RANDOM();a[2]=D.RANDOM();a[3]=D.RANDOM();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,d){var h=b[0],f=b[1],g=b[2];b=b[3];a[0]=d[0]*h+d[4]*f+d[8]*g+d[12]*b;a[1]=d[1]*h+d[5]*f+d[9]*g+d[13]*b;a[2]=d[2]*h+d[6]*f+d[10]*g+d[14]*b;a[3]=d[3]*h+d[7]*f+d[11]*g+d[15]*b;return a};q.transformQuat=function(a,b,d){var h=
b[0],f=b[1],g=b[2],c=d[0],e=d[1],k=d[2];d=d[3];var l=d*h+e*g-k*f,m=d*f+k*h-c*g,n=d*g+c*f-e*h;h=-c*h-e*f-k*g;a[0]=l*d+h*-c+m*-k-n*-e;a[1]=m*d+h*-e+n*-c-l*-k;a[2]=n*d+h*-k+l*-e-m*-c;a[3]=b[3];return a};q.forEach=function(){var a=q.create();return function(b,d,h,f,g,c){d||(d=4);h||(h=0);for(f=f?Math.min(f*d+h,b.length):b.length;h<f;h+=d)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],g(a,a,c),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};q.equals=function(a,b){var d=a[0],h=a[1],f=a[2],g=a[3],c=b[0],e=b[1],k=b[2],l=b[3];return Math.abs(d-c)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(c))&&Math.abs(h-e)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(e))&&Math.abs(f-k)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(g-l)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))};return q})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});D=function(g){function c(){var e=null!==g&&g.apply(this,arguments)||this;e._isInitialized=!1;e._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};e._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};e._spritesTextureSize=new Float32Array(2);return e}a(c,g);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.FILL};c.prototype.drawGeometry=
function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,t=e.requiredLevel,r=e.stationary,y=l.indexCount,x=l.indexFrom;this._initialize();var z=l.materialInfo.materialKeyInfo,v=z.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(v=e.painter.materialManager.getProgram(l.materialInfo.materialKey,e.drawPhase,v)){m.bindProgram(v);var w=this._getVAO(m,k,z.hasVV());m.bindVAO(w);if(0<l.materialInfo.texBindingInfo.length){l=l.materialInfo.texBindingInfo[0];w=l.pageId;var u=e.painter.textureManager.sprites;
this._spritesTextureSize[0]=u.getWidth(w);this._spritesTextureSize[1]=u.getHeight(w);v.setUniform1f("u_zoomFactor",1/Math.pow(2,t-k.key.level)/e.pixelRatio);n.textureManager.bindSpritePage(m,w,l.unit,r?9728:9729);v.setUniform1i(l.semantic,l.unit);v.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}v.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform);v.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);v.setUniform1f("u_opacity",1);z.vvColor&&(v.setUniform1fv("u_vvColorValues",
p.vvColorValues),v.setUniform4fv("u_vvColors",p.vvColors));z.vvOpacity&&(v.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),v.setUniform1fv("u_vvOpacities",p.vvOpacities));m.drawElements(4,y,5125,4*x);m.bindVAO(null)}};c.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};c.prototype._getVAO=function(e,k,l){if(k.fillGeometry.vao)return k.fillGeometry.vao;var m=k.fillGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],n=k.fillGeometry.indexBuffer;if(!m||!n)return null;k.fillGeometry.vao=l?new f(e,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:m},n):new f(e,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:m},n);return k.fillGeometry.vao};return c}(h["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(D,q,a,b,d){Object.defineProperty(q,"__esModule",{value:!0});D=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}
a(f,h);f.prototype.draw=function(g,c){var e=this;if(c.canDisplay){var k=this.getGeometryType(),l=c.getDisplayList(g.drawPhase),m=c.getGeometry(k);m&&d.forEachIter(l.ofType(k),function(n){return e.drawGeometry(g,c,n,m)})}};return f}(b["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.forEachIter=function(a,b){for(;;){var d=a.next();if(d.done)break;b(d.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});D=function(g){function c(){var e=null!==g&&g.apply(this,arguments)||this;e._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};e._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};e._glyphsTextureSize=new Float32Array(2);return e}a(c,g);c.prototype.dispose=function(){};c.prototype.drawGeometry=function(e,k,l,m){if(e.requiredLevel===k.key.level){m=e.context;var n=e.painter,p=e.drawPhase,t=l.materialInfo,r=l.indexCount;l=l.indexFrom;var y=this._attributeLocations,x=e.drawPhase===b.WGLDrawPhase.LABEL_ALPHA,z=t.materialKey;
x&&(z|=8);if(p=n.materialManager.getProgram(z,p,y))m.setStencilTestEnabled(!1),m.bindProgram(p),y=this._getVAO(m,k),m.bindVAO(y),x?(m.setBlendingEnabled(!1),p.setUniform1f("u_fadeStep",e.labelStep)):(t=t.texBindingInfo[0],n.textureManager.bindGlyphsPage(m,t.pageId,t.unit),p.setUniform1i(t.semantic,t.unit)),t=n.textureManager.glyphs,this._glyphsTextureSize[0]=t.width/4,this._glyphsTextureSize[1]=t.height/4,n=n.extrudeNoRotationMatrix,m.bindTexture(e.labelFBO.colorTexture,3),p.setUniform1i("u_referenceTex",
3),p.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),p.setUniformMatrix4fv("u_extrudeMatrix",n),p.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),p.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),p.setUniform1f("u_pixelRatio",e.pixelRatio),p.setUniform1f("u_opacity",1),p.setUniform1f("u_zoomLevel",10*e.displayLevel),p.setUniform1f("u_mapRotation",e.state.rotation),p.setUniform1f("u_mapAligned",0),p.setUniform2fv("u_screenSize",e.state.size),m.drawElements(4,
r,5125,4*l),m.bindVAO(null),m.setStencilTestEnabled(!0),m.setBlendingEnabled(!0)}};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LABEL};c.prototype._getVAO=function(e,k){var l=k.labelGeometry;if(l&&l.vao)return l.vao;var m=l.vertexBufferMap[d.C_VBO_GEOMETRY],n=l.vertexBufferMap[d.C_VBO_VISIBILITY_RANGE],p=l.indexBuffer;if(!m||!p||!n)return null;l.vao=new f(e,this._attributeLocations,this._vertexAttributeLayout,{geometry:m,visibility:l.vertexBufferMap[d.C_VBO_VISIBILITY],visibilityRange:n},
p);return l.vao};return c}(h["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",{value:!0});D=function(g){function c(){var e=null!==g&&g.apply(this,arguments)||this;e._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};e._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};e._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};e._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};e._spritesTextureSize=new Float32Array(2);return e}a(c,g);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LINE};c.prototype.drawGeometry=function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,t=e.requiredLevel,r=e.drawPhase,y=l.indexFrom,x=l.indexCount,z=l.materialInfo;l=z.materialKeyInfo;var v=l.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(r=n.materialManager.getProgram(z.materialKey,
r,v)){m.bindProgram(r);v=this._getVAO(m,k,l.hasVV());m.bindVAO(v);v=1/e.pixelRatio;if(0<z.texBindingInfo.length){z=z.texBindingInfo[0];var w=z.pageId,u=n.textureManager.sprites;this._spritesTextureSize[0]=u.getWidth(w);this._spritesTextureSize[1]=u.getHeight(w);n.textureManager.bindSpritePage(m,w,z.unit);r.setUniform1i(z.semantic,z.unit);r.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}e=Math.pow(2,t-k.key.level)/e.pixelRatio;r.setUniform1f("u_zoomFactor",e);r.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform);r.setUniformMatrix4fv("u_extrudeMatrix",n.extrudeMatrix);r.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);r.setUniform1f("u_opacity",1);r.setUniform1f("u_blur",0+v);r.setUniform1f("u_antialiasing",v);r.setUniform1f("u_zoomFactor",e);l.vvSizeMinMaxValue&&r.setUniform4fv("u_vvSizeMinMaxValue",p.vvSizeMinMaxValue);l.vvSizeScaleStops&&r.setUniform1f("u_vvSizeScaleStopsValue",p.vvSizeScaleStopsValue);l.vvSizeFieldStops&&(r.setUniform1fv("u_vvSizeFieldStopsValues",
p.vvSizeFieldStopsValues),r.setUniform1fv("u_vvSizeFieldStopsSizes",p.vvSizeFieldStopsSizes));l.vvSizeUnitValue&&r.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",p.vvSizeUnitValueToPixelsRatio);l.vvColor&&(r.setUniform1fv("u_vvColorValues",p.vvColorValues),r.setUniform4fv("u_vvColors",p.vvColors));l.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),r.setUniform1fv("u_vvOpacities",p.vvOpacities));m.setFaceCullingEnabled(!0);m.setFrontFace(2305);m.setCullFace(1029);m.drawElements(4,
x,5125,4*y);m.setFaceCullingEnabled(!1);m.bindVAO(null)}};c.prototype._getVAO=function(e,k,l){if(k.lineGeometry.vao)return k.lineGeometry.vao;var m=k.lineGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],n=k.lineGeometry.indexBuffer;if(!m||!n)return null;k.lineGeometry.vao=l?new f(e,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:m},n):new f(e,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:m},n);return k.lineGeometry.vao};return c}(h["default"]);q["default"]=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f,g){Object.defineProperty(q,"__esModule",{value:!0});D=function(c){function e(){var k=null!==c&&c.apply(this,arguments)||this;k._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};k._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};k._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};k._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};k._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};k._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};k._spritesTextureSize=new Float32Array(2);return k}a(e,c);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return b.WGLGeometryType.MARKER};e.prototype.drawGeometry=
function(k,l,m,n){n=k.context;var p=k.painter,t=k.rendererInfo,r=k.drawPhase;k=m.indexCount;var y=m.indexFrom,x=m.materialInfo;m=x.materialKeyInfo;var z=m.heatmap,v=m.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(r=p.materialManager.getProgram(x.materialKey,r,v))n.bindProgram(r),v=this._getVAO(n,l,m.hasVV(),z),n.bindVAO(v),z?(x=this._getIntensityTexture(n,t.heatmapParameters),n.bindTexture(x,1),r.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(t.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(t.heatmapParameters.radius)):(z=x.texBindingInfo[0],x=z.pageId,p.textureManager.bindSpritePage(n,x,z.unit),r.setUniform1i(z.semantic,z.unit),z=p.textureManager.sprites,this._spritesTextureSize[0]=z.getWidth(x)/4,this._spritesTextureSize[1]=z.getHeight(x)/4),p=t.vvMaterialParameters.vvRotationEnabled&&"geographic"===t.vvMaterialParameters.vvRotationType?p.extrudeMatrix:p.extrudeNoRotationMatrix,r.setUniformMatrix4fv("u_transformMatrix",l.tileTransform.transform),
r.setUniformMatrix4fv("u_extrudeMatrix",p),r.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),r.setUniform2fv("u_mosaicSize",this._spritesTextureSize),r.setUniform1f("u_opacity",1),m.vvSizeMinMaxValue&&r.setUniform4fv("u_vvSizeMinMaxValue",t.vvSizeMinMaxValue),m.vvSizeScaleStops&&r.setUniform1f("u_vvSizeScaleStopsValue",t.vvSizeScaleStopsValue),m.vvSizeFieldStops&&(r.setUniform1fv("u_vvSizeFieldStopsValues",t.vvSizeFieldStopsValues),r.setUniform1fv("u_vvSizeFieldStopsSizes",t.vvSizeFieldStopsSizes)),
m.vvSizeUnitValue&&r.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",t.vvSizeUnitValueToPixelsRatio),m.vvColor&&(r.setUniform1fv("u_vvColorValues",t.vvColorValues),r.setUniform4fv("u_vvColors",t.vvColors)),m.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",t.vvOpacityValues),r.setUniform1fv("u_vvOpacities",t.vvOpacities)),m.vvRotation&&r.setUniform1f("u_vvRotationType","geographic"===t.vvMaterialParameters.vvRotationType?0:1),n.drawElements(4,k,5125,4*y),n.bindVAO(null)};e.prototype._getVAO=function(k,
l,m,n){if(l.iconGeometry.vao)return l.iconGeometry.vao;var p=l.iconGeometry.vertexBufferMap[d.C_VBO_GEOMETRY],t=l.iconGeometry.indexBuffer;if(!p||!t)return null;l.iconGeometry.vao=m?new g(k,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:p},t):n?new g(k,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:p},t):new g(k,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:p},t);return l.iconGeometry.vao};e.prototype._getIntensityTexture=
function(k,l){if(l.intensityKernel&&!l.refreshIntensityKernel)return l.intensityKernel;l.intensityKernel&&(l.intensityKernel.dispose(),l.intensityKernel=null);for(var m=l.radius,n=l.kernelSize,p=l.blurRadius,t=m*m,r=[],y=-1;++y<n;)r[y]=Math.exp(-Math.pow(y-p,2)/(2*t))/(m/2*Math.sqrt(2*Math.PI));m=[];for(var x,z=0;z<n;z++)for(t=r[z],y=0;y<n;y++)x=z*n+y,p=r[y],m[4*x]=t*p,m[4*x+1]=0,m[4*x+2]=0,m[4*x+3]=1;n=new f(k,{target:3553,pixelFormat:6408,internalFormat:k.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:k.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:n,height:n},new Float32Array(m));l.intensityKernel=n;l.refreshIntensityKernel=!1;return n};return e}(h["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f){Object.defineProperty(q,"__esModule",
{value:!0});D=function(g){function c(){var e=null!==g&&g.apply(this,arguments)||this;e._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};e._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};e._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};e._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};e._glyphsTextureSize=new Float32Array(2);return e}a(c,g);c.prototype.dispose=function(){};c.prototype.getGeometryType=
function(){return b.WGLGeometryType.TEXT};c.prototype.drawGeometry=function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,t=l.materialInfo,r=l.indexCount;l=l.indexFrom;var y=t.materialKeyInfo,x=y.vvSizeMinMaxValue||y.vvSizeScaleStops||y.vvSizeFieldStops||y.vvSizeUnitValue||y.vvColor||y.vvRotation||y.vvOpacity;if(e=n.materialManager.getProgram(t.materialKey,e.drawPhase,x?this._attributeLocationsVV:this._attributeLocations))m.bindProgram(e),x=this._getVAO(m,k,x,this.getGeometryType()),m.bindVAO(x),
t=t.texBindingInfo[0],n.textureManager.bindGlyphsPage(m,t.pageId,t.unit),e.setUniform1i(t.semantic,t.unit),t=n.textureManager.glyphs,this._glyphsTextureSize[0]=t.width/4,this._glyphsTextureSize[1]=t.height/4,n=p.vvMaterialParameters.vvRotationEnabled&&"geographic"===p.vvMaterialParameters.vvRotationType?n.extrudeMatrix:n.extrudeNoRotationMatrix,e.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),e.setUniformMatrix4fv("u_extrudeMatrix",n),e.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),
e.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),e.setUniform1f("u_pixelRatio",1),e.setUniform1f("u_opacity",1),y.vvSizeMinMaxValue&&e.setUniform4fv("u_vvSizeMinMaxValue",p.vvSizeMinMaxValue),y.vvSizeScaleStops&&e.setUniform1f("u_vvSizeScaleStopsValue",p.vvSizeScaleStopsValue),y.vvSizeFieldStops&&(e.setUniform1fv("u_vvSizeFieldStopsValues",p.vvSizeFieldStopsValues),e.setUniform1fv("u_vvSizeFieldStopsSizes",p.vvSizeFieldStopsSizes)),y.vvSizeUnitValue&&e.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
p.vvSizeUnitValueToPixelsRatio),y.vvColor&&(e.setUniform1fv("u_vvColorValues",p.vvColorValues),e.setUniform4fv("u_vvColors",p.vvColors)),y.vvOpacity&&(e.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),e.setUniform1fv("u_vvOpacities",p.vvOpacities)),y.vvRotation&&e.setUniform1f("u_vvRotationType","geographic"===p.vvMaterialParameters.vvRotationType?0:1),m.drawElements(4,r,5125,4*l),m.bindVAO(null)};c.prototype._getVAO=function(e,k,l,m){if((k=k.getGeometry(m))&&k.vao)return k.vao;m=k.vertexBufferMap[d.C_VBO_GEOMETRY];
var n=k.vertexBufferMap[d.C_VBO_VISIBILITY],p=k.indexBuffer;if(!m||!p)return null;k.vao=l?new f(e,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:m,visibility:n},p):new f(e,this._attributeLocations,this._vertexAttributeLayout,{geometry:m,visibility:n},p);return k.vao};return c}(h["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(D,q,a,b,d){return function(){function h(){this._hlRenderer=new b;this._hlSurfaces=new d;this._height=this._width=void 0}h.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};h.prototype.setup=function(f,g,c){var e=g%4,k=c%4;g+=2>e?-e:4-e;c+=2>k?-k:4-k;this._width=g;this._height=c;this._boundFBO=f.getBoundFramebufferObject();g=Math.round(.75*g);c=Math.round(.75*c);this._hlRenderer.setup(f,g,c);this._hlSurfaces.setup(f,
g,c)};h.prototype.setHighlightOptions=function(f){this._hlRenderer.setHighlightOptions({fillColor:f.fillColor,outlineColor:f.outlineColor,outlineWidth:.75*f.outlineWidth,outerHaloWidth:.75*f.outerHaloWidth,innerHaloWidth:.75*f.innerHaloWidth,outlinePosition:.75*f.outlinePosition})};h.prototype.startMaskDraw=function(f){f.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);f.setClearColor(0,0,0,0);f.setClearStencil(0);f.clear(f.gl.COLOR_BUFFER_BIT|f.gl.STENCIL_BUFFER_BIT);f.setViewport(0,0,.75*this._width,
.75*this._height)};h.prototype.draw=function(f){f.setStencilTestEnabled(!1);f.setBlendingEnabled(!1);f.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);f.setClearColor(0,0,0,0);f.clear(f.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(f,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(f.bindFramebuffer(null),f.clear(f.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(f,this._hlSurfaces.sharedBlur2Tex)):(f.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),f.setClearColor(0,0,0,0),f.clear(f.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(f,this._hlSurfaces.sharedBlur2Tex),f.bindFramebuffer(this._boundFBO),f.setBlendingEnabled(!0),f.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(f,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return h}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f){var g=[void 0,void 0,void 0,1],c=[3,4],e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function l(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}l.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};l.prototype.preBlur=function(m,n){m.bindTexture(n,c[0]);m.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",e);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype.finalBlur=function(m,n){m.bindTexture(n,c[0]);m.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype.renderHighlight=function(m,n){m.bindTexture(n,c[0]);m.bindTexture(this._resources.shadeTex,c[1]);m.bindProgram(this._resources.highlightProgram);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype._initialize=function(m,n,p){this._width=n;this._height=
p;n=new b(m,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);p=new f(m,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:n});var t=(new d("hl",["texturedVS","highlightFS"],[],a,m,{a_position:0,a_texcoord:1})).getProgram([]),r=(new d("hl",["texturedVS","blurFS"],[],a,m,{a_position:0,a_texcoord:1})).getProgram([]);
t.setUniform1i("u_texture",c[0]);t.setUniform1i("u_shade",c[1]);t.setUniform4fv("u_sigmas",g);r.setUniform1i("u_texture",c[0]);r.setUniform4fv("u_sigmas",g);m=new h(m,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:n,quadVAO:p,highlightProgram:t,blurProgram:r,shadeTex:m}};l.prototype.setHighlightOptions=function(m){function n(u,A,G){v[0]=(1-G)*u[0]+G*A[0];v[1]=(1-G)*u[1]+G*A[1];v[2]=(1-G)*u[2]+G*A[2];v[3]=(1-G)*u[3]+G*
A[3]}this._highlightOptions=m;if(this._resources){for(var p=m.outlinePosition-m.outlineWidth/2-m.outerHaloWidth,t=m.outlinePosition-m.outlineWidth/2,r=m.outlinePosition+m.outlineWidth/2,y=m.outlinePosition+m.outlineWidth/2+m.innerHaloWidth,x=new Uint8Array(1024),z,v=[void 0,void 0,void 0,void 0],w=0;256>w;++w)z=p+w/255*(y-p),z<p?(x[4*w]=0,x[4*w+1]=0,x[4*w+2]=0,x[4*w+3]=0):z<t?n([0,0,0,0],m.outlineColor,(z-p)/(t-p)):z<r?(v[0]=m.outlineColor[0],v[1]=m.outlineColor[1],v[2]=m.outlineColor[2],v[3]=m.outlineColor[3]):
z<y?n(m.outlineColor,m.fillColor,(z-r)/(y-r)):(x[4*w]=m.fillColor[0],x[4*w+1]=m.fillColor[1],x[4*w+2]=m.fillColor[2],x[4*w+3]=m.fillColor[3]),x[4*w]=255*v[0]*v[3],x[4*w+1]=255*v[1]*v[3],x[4*w+2]=255*v[2]*v[3],x[4*w+3]=255*v[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[p,y]);this._resources.shadeTex.updateData(0,0,0,256,1,x)}};l.prototype.setup=function(m,n,p){this._resources?(this._width=n,this._height=p):(this._initialize(m,n,p),this.setHighlightOptions(this._highlightOptions))};
return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(D,q,a,b){function d(h,f,g){f=new b(h,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:f,height:g,samplingMode:9729});h=a.createWithAttachments(h,f,{colorTarget:0,depthStencilTarget:2});return[f,h]}return function(){function h(){this._height=this._width=void 0;this._resources=null}h.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};h.prototype._initialize=function(f,
g,c){this._width=g;this._height=c;var e=d(f,g,c),k=e[0];e=e[1];f=d(f,g,c);this._resources={sharedBlur1Tex:k,sharedBlur1Fbo:e,sharedBlur2Tex:f[0],sharedBlur2Fbo:f[1]}};h.prototype.setup=function(f,g,c){!this._resources||this._width===g&&this._height===c||this.dispose();this._resources||this._initialize(f,g,c)};Object.defineProperty(h.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return h}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(D,q,a,b,d){return function(){function h(f,
g,c,e){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=f;this._desc={colorTarget:g.colorTarget,depthStencilTarget:g.depthStencilTarget,width:g.width,height:g.height,multisampled:g.multisampled};this._id=h._nextId++;a("esri-webgl-debug")&&f.instanceCounter.incrementCount(4);c&&(f=void 0,c instanceof d?(this._colorAttachment=c,f=c.descriptor):(f=c,this._colorAttachment=new d(this._context,f)),h._validateTextureDimensions(f,
this._desc));if(e instanceof b){if(2===g.depthStencilTarget)this._stencilAttachment=e;else if(1===g.depthStencilTarget||3===g.depthStencilTarget)this._depthAttachment=e;h._validateBufferDimensions(e.descriptor,this._desc)}else e&&(g=void 0,e instanceof d?(this._depthStencilTexture=e,g=this._depthStencilTexture.descriptor):(g=e,this._depthStencilTexture=new d(this._context,g)),h._validateTextureDimensions(g,this._desc))}h.create=function(f,g){return new h(f,g)};h.createWithAttachments=function(f,g,
c,e){return new h(f,c,g,e)};Object.defineProperty(h.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof d?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});h.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};h.prototype.attachColorTexture=function(f){if(f){h._validateTextureDimensions(f.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f.glName,0)}this._colorAttachment=f}};h.prototype.detachColorTexture=
function(){var f=void 0;if(this._colorAttachment instanceof d){f=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;this._context.gl.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,null,0)}this._colorAttachment=null}return f};h.prototype.attachDepthStencilTexture=function(f){if(f){h._validateTextureDimensions(f.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,f.glName,0)}this._depthStencilTexture=f}};h.prototype.detachDepthStencilTexture=function(){var f=this._depthStencilTexture;if(f&&this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;this._context.gl.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return f};
h.prototype.attachDepthStencilBuffer=function(f){if(f){var g=f.descriptor;h._validateBufferDimensions(g,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===g.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),g=this._context.gl,g.framebufferRenderbuffer(g.FRAMEBUFFER,1===this._desc.depthStencilTarget?g.DEPTH_ATTACHMENT:g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,f.glName));this._depthAttachment=f}};h.prototype.detachDepthStencilBuffer=function(){var f=
this._context.gl,g=this._depthAttachment;g&&this._initialized&&(this._context.bindFramebuffer(this),f.framebufferRenderbuffer(f.FRAMEBUFFER,1===this._desc.depthStencilTarget?f.DEPTH_ATTACHMENT:f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,null));this._depthAttachment=null;return g};h.prototype.copyToTexture=function(f,g,c,e,k,l,m){var n=this._context;n.bindTexture(m);n.bindFramebuffer(this);n.gl.copyTexSubImage2D(3553,0,k,l,f,g,c,e)};h.prototype.readPixels=function(f,g,c,e,k,l,m){this._context.bindFramebuffer(this);
this._context.gl.readPixels(f,g,c,e,k,l,m)};h.prototype.resize=function(f,g){var c=this._desc;if(c.width!==f||c.height!==g)if(this._initialized)c.width=f,c.height=g,this._colorAttachment instanceof d?(e=this._colorAttachment,c=e.descriptor,c.width=f,c.height=g,this._colorAttachment.dispose(),this._colorAttachment=new d(this._context,c),h._validateTextureDimensions(e.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(c=this._depthStencilTexture.descriptor,
c.width=f,c.height=g,this._depthStencilTexture.dispose(),this._depthStencilTexture=new d(this._context,c)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{c.width=f;c.height=g;if(this._colorAttachment instanceof d){var e=this._colorAttachment;e.resize(f,g)}this._depthStencilTexture&&this._depthStencilTexture.resize(f,g)}};h.prototype.initialize=function(){if(this._initialized)return!1;
var f=this._context.gl;this._glName&&f.deleteFramebuffer(this._glName);var g=f.createFramebuffer(),c=this._desc;f.bindFramebuffer(f.FRAMEBUFFER,g);if(!this._colorAttachment)if(0===c.colorTarget)this._colorAttachment=new d(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height});else{var e=new b(this._context,{internalFormat:32854,width:c.width,height:c.height});f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,
e.glName);this._colorAttachment=e}this._colorAttachment instanceof d&&f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this._colorAttachment.glName,0);switch(c.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new b(this._context,{internalFormat:1===c.depthStencilTarget?33189:34041,width:c.width,height:c.height}));f.framebufferRenderbuffer(f.FRAMEBUFFER,1===c.depthStencilTarget?f.DEPTH_ATTACHMENT:f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new b(this._context,{internalFormat:36168,width:c.width,height:c.height}));f.framebufferRenderbuffer(f.FRAMEBUFFER,f.STENCIL_ATTACHMENT,f.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new d(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height})),f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,
f.TEXTURE_2D,this._depthStencilTexture.glName,0)}f.checkFramebufferStatus(f.FRAMEBUFFER);this._glName=g;return this._initialized=!0};h.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof d){var f=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var g=this._context.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,null,0)}f.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(f=this._colorAttachment,g=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(f));this._colorAttachment=null};h.prototype._disposeDepthStencilAttachments=function(){var f=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),f.framebufferRenderbuffer(f.FRAMEBUFFER,1===this._desc.depthStencilTarget?f.DEPTH_ATTACHMENT:f.DEPTH_STENCIL_ATTACHMENT,
f.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.STENCIL_ATTACHMENT,f.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};h._validateBufferDimensions=function(f,g){void 0!==g.width&&0<=g.width&&void 0!==g.height&&0<=g.height||(g.width=f.width,g.height=f.height)};h._validateTextureDimensions=function(f,g){void 0!==g.width&&0<=g.width&&void 0!==g.height&&0<=g.height||(g.width=f.width,g.height=f.height)};h._nextId=0;return h}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(D,q,a){return function(){function b(d,h){this._context=
d;this._desc=h;this._glName=null;this._id=-1;var f=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++b._nextId;this._glName=f.createRenderbuffer();this._context.bindRenderbuffer(this);f.renderbufferStorage(f.RENDERBUFFER,h.internalFormat,h.width,h.height)}Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});b.prototype.resize=function(d,h){var f=this._context.gl,g=this._desc;if(g.width!==d||g.height!==h)g.width=d,g.height=h,this._context.bindRenderbuffer(this),f.renderbufferStorage(f.RENDERBUFFER,g.internalFormat,g.width,g.height)};b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l){return function(){function m(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}m.prototype.initialize=function(n,p,t){void 0===t&&(t=!0);this._SpriteMosaic=n;this._glyphMosaic=p;this._ignoreSpeed=!t;this._backgroundRenderer=new d;this._lineRenderer=new c;this._fillRenderer=new g;this._symbolRenderer=new e;this._circleRenderer=new h;this._tileInfoRenderer=new k;this._fadeRecorder=new f.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};m.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};m.prototype.setStateParams=function(n,p,t){this._fadeRecorder.recordLevel(t);this._state=n;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/n.width,this._extrudeScaleVector[1]=-2/n.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,
this._extrudeMatrix,-n.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};m.prototype.drawClippingMasks=function(n,p){if(0!==p.length){n.setDepthWriteEnabled(!1);n.setDepthTestEnabled(!1);n.setStencilTestEnabled(!0);n.setBlendingEnabled(!1);n.setColorMask(!1,!1,!1,!1);n.setStencilOp(7680,7680,7681);n.setStencilWriteMask(255);n.setClearStencil(0);n.clear(n.gl.STENCIL_BUFFER_BIT);for(var t=0;t<p.length;t++){var r=p[t];r.attached&&r.visible&&(n.setStencilFunctionSeparate(1032,519,r.stencilData.reference,r.stencilData.mask),this._backgroundRenderer.renderSolidColor(n,
{u_matrix:r.tileTransform.transform,u_normalized_origin:r.tileTransform.displayCoord,u_coord_range:r.coordRange,u_depth:0,u_color:this._backgroundColor}))}n.setColorMask(!0,!0,!0,!0);n.setBlendingEnabled(!0)}};m.prototype.renderDebug=function(n,p){var t=p.key;this._backgroundColor.set([t.col%2,t.row%2,0===t.col%2&&0===t.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(n,{u_matrix:p.tileTransform.transform,u_normalized_origin:p.tileTransform.displayCoord,u_coord_range:p.coordRange,u_depth:0,
u_color:this._backgroundColor})};m.prototype.renderBucket=function(n,p,t,r,y,x,z,v){if(!(void 0!==z.minzoom&&z.minzoom>=t+1E-6||void 0!==z.maxzoom&&z.maxzoom<t-1E-6))switch(p.type){case 0:2!==y&&this._renderBackground(n,p,t,y,x,z,v);break;case 1:2!==y&&this._renderFill(n,p,t,y,x,z,v);break;case 2:1!==y&&3!==y||this._renderLine(n,p,t,y,x,z,v);break;case 3:2!==y&&3!==y||this._renderSymbol(n,p,t,y,r,x,z,v);break;case 4:2!==y&&3!==y||this._renderCircle(n,p,t,y,r,x,z,v)}};m.prototype.renderTileInfo=function(n,
p){this._tileInfoRenderer.render(n,p)};m.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};m.prototype.hitTest=function(n,p,t,r,y,x,z){var v=[0,0],w=[0,0],u=n.state;u.toMap(v,[0,0]);u.toMap(w,[x,x]);p=r.filter(function(B){return!(v[0]>B.bounds[2]||w[0]<B.bounds[0]||v[1]<B.bounds[3]||w[1]>B.bounds[1])});if(0===p.length)return[];p.sort(function(B,E){return B.key.level-E.key.level});t=p.length;for(r=1;r<=t;r++){var A=p[r-1];A.attached&&(A.stencilData.reference=r,A.stencilData.mask=
255)}z(u,y,p);y=n.context;this._hittestFBO||(this._hittestFBO=l.create(y,{colorTarget:0,depthStencilTarget:3,width:x,height:x}));z=y.getViewport();u=y.getBoundFramebufferObject();y.bindFramebuffer(this._hittestFBO);y.setViewport(0,0,x,x);r=y.gl;y.setDepthWriteEnabled(!0);y.setStencilWriteMask(255);y.setClearColor(1,1,1,1);y.setClearDepth(1);y.setClearStencil(0);y.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT);y.setDepthWriteEnabled(!1);this.drawClippingMasks(y,p);y.setBlendingEnabled(!1);
y.setStencilWriteMask(0);y.setStencilOp(7680,7680,7681);y.setDepthFunction(515);y.setDepthTestEnabled(!0);y.setDepthWriteEnabled(!0);y.setStencilTestEnabled(!0);for(r=0;r<t;r++)A=p[r],A.attached&&A.doRender(n);y.setStencilTestEnabled(!1);y.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*x*x),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,x,x,6408,5121,this._readbackBuffer);n=new Set;x*=x;p=this._readbackBuffer32[Math.round(x/
2)];4294967295!==p&&n.add(p);for(r=0;r<x;r++)p=this._readbackBuffer32[r],4294967295!==p&&n.add(p);y.bindFramebuffer(u);y.setViewport(z.x,z.y,z.width,z.height);var G=[];n.forEach(function(B){G.push(B)});return G};m.prototype._renderBackground=function(n,p,t,r,y,x,z){this._backgroundRenderer.render(n,p,t,r,y,x,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,z)};m.prototype._renderLine=function(n,p,t,r,y,x,z){this._lineRenderer.render(n,p,t,r,this._state,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
z)};m.prototype._renderFill=function(n,p,t,r,y,x,z){this._fillRenderer.render(n,p,t,this._state.rotation,r,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,z)};m.prototype._renderCircle=function(n,p,t,r,y,x,z,v){var w=!0;y===x.key.level&&(w=!1);n.setStencilTestEnabled(w);this._circleRenderer.render(n,p,t,r,this._state.rotation,x,z,this._extrudeMatrix,v)};m.prototype._renderSymbol=function(n,p,t,r,y,x,z,v){var w=!0;y===x.key.level&&(w=!1);n.setStencilTestEnabled(w);this._symbolRenderer.render(n,
p,t,r,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),x,z,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,v)};return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e){return function(){function k(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=a.create();this._color=b.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}k.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};k.prototype.renderSolidColor=function(l,m){this._solidrendererInitialized||this._initializeSolidRenderer(l);l.bindVAO(this._solidVertexArrayObject);var n=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);l.bindProgram(n);n.setUniformMatrix4fv("u_transformMatrix",m.u_matrix);n.setUniform2fv("u_normalized_origin",m.u_normalized_origin);n.setUniform1f("u_coord_range",m.u_coord_range||4096);n.setUniform1f("u_depth",m.u_depth||0);n.setUniform4fv("u_color",m.u_color||
this._color);l.drawArrays(5,0,4);l.bindVAO()};k.prototype.render=function(l,m,n,p,t,r,y,x,z){this._rendererInitialized||this._initialize(l);var v=r.getPaintValue("background-color",n);z*=r.getPaintValue("background-opacity",n);var w=r.getPaintValue("background-pattern",n),u=void 0!==w,A=v[3]*z,G=u||1>A;if(!G||0!==p)if(G||1!==p){G=3===p;p=this._shaderVariations.getProgram([u,G],void 0,void 0,this._attributeLocations);l.bindVAO(this._vertexArrayObject);l.bindProgram(p);p.setUniform1f("u_coord_range",
t.coordRange);p.setUniform1f("u_depth",r.z||0);p.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform);p.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord);if(u){r=y.getMosaicItemPosition(w,!0);if(!r)return;n=512*Math.pow(2,Math.floor(n)-t.key.level)*x;a.identity(this._patternMatrix);t=n/r.size[1];this._patternMatrix[0]=n/r.size[0];this._patternMatrix[4]=t;y.bind(l,9729,r.page||0);p.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);p.setUniform1f("u_opacity",
z);p.setUniform2f("u_pattern_tl",r.tl[0],r.tl[1]);p.setUniform2f("u_pattern_br",r.br[0],r.br[1]);p.setUniform1i("u_texture",0)}else this._color[0]=A*v[0],this._color[1]=A*v[1],this._color[2]=A*v[2],this._color[3]=A,p.setUniform4fv("u_color",this._color);G&&(m=h.int32To4Bytes(m.layerID),p.setUniform4f("u_id",m[0],m[1],m[2],m[3]));l.drawArrays(5,0,4);l.bindVAO()}};k.prototype._initializeSolidRenderer=function(l){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var m=new c("background",
["backgroundVS","backgroundFS"],[],f,l);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m}m=new Int8Array([0,0,1,0,0,1,1,1]);m=g.createVertex(l,35044,m);this._solidVertexArrayObject=new e(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:m});return this._solidrendererInitialized=!0};k.prototype._initialize=function(l){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var m=
new c("background",["backgroundVS","backgroundFS"],[],f,l);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m}m=[];m.push(d.i1616to32(0,0));m.push(d.i1616to32(1,0));m.push(d.i1616to32(0,1));m.push(d.i1616to32(1,1));m=new Uint32Array(m);m=g.createVertex(l,35044,m);this._vertexArrayObject=new e(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:m});return this._rendererInitialized=
!0};return k}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new D.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,d,h,f,g,c,e,k){var l=new D.ARRAY_TYPE(9);l[0]=a;l[1]=b;l[2]=d;l[3]=h;l[4]=f;l[5]=g;l[6]=c;l[7]=e;l[8]=k;return l},set:function(a,b,d,h,f,g,c,e,k,l){a[0]=b;a[1]=d;a[2]=h;a[3]=f;a[4]=g;a[5]=c;a[6]=e;a[7]=k;a[8]=l;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],
h=b[2],f=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=h;a[7]=f}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=m*c-e*l,p=-m*g+e*k,t=l*g-c*k,r=d*n+h*p+f*t;if(!r)return null;r=1/r;a[0]=n*r;a[1]=(-m*h+f*l)*r;a[2]=(e*h-f*c)*r;a[3]=p*r;a[4]=(m*d-f*k)*r;a[5]=(-e*d+f*g)*r;a[6]=t*r;a[7]=(-l*d+h*k)*r;a[8]=(c*d-h*g)*r;return a},adjoint:function(a,b){var d=b[0],
h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8];a[0]=c*m-e*l;a[1]=f*l-h*m;a[2]=h*e-f*c;a[3]=e*k-g*m;a[4]=d*m-f*k;a[5]=f*g-d*e;a[6]=g*l-c*k;a[7]=h*k-d*l;a[8]=d*c-h*g;return a},determinant:function(a){var b=a[3],d=a[4],h=a[5],f=a[6],g=a[7],c=a[8];return a[0]*(c*d-h*g)+a[1]*(-c*b+h*f)+a[2]*(g*b-d*f)},multiply:function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=d[0],p=d[1],t=d[2],r=d[3],y=d[4],x=d[5],z=d[6],v=d[7];d=d[8];a[0]=n*h+p*c+t*l;a[1]=n*f+p*e+t*m;a[2]=
n*g+p*k+t*b;a[3]=r*h+y*c+x*l;a[4]=r*f+y*e+x*m;a[5]=r*g+y*k+x*b;a[6]=z*h+v*c+d*l;a[7]=z*f+v*e+d*m;a[8]=z*g+v*k+d*b;return a}};q.mul=q.multiply;q.translate=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=d[0];d=d[1];a[0]=h;a[1]=f;a[2]=g;a[3]=c;a[4]=e;a[5]=k;a[6]=n*h+d*c+l;a[7]=n*f+d*e+m;a[8]=n*g+d*k+b;return a};q.rotate=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=Math.sin(d);d=Math.cos(d);a[0]=d*h+n*c;a[1]=d*f+n*e;
a[2]=d*g+n*k;a[3]=d*c-n*h;a[4]=d*e-n*f;a[5]=d*k-n*g;a[6]=l;a[7]=m;a[8]=b;return a};q.scale=function(a,b,d){var h=d[0];d=d[1];a[0]=h*b[0];a[1]=h*b[1];a[2]=h*b[2];a[3]=d*b[3];a[4]=d*b[4];a[5]=d*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};q.fromRotation=function(a,b){var d=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=d;a[2]=0;a[3]=-d;a[4]=h;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};q.fromQuat=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=d+d,e=h+h,k=f+f;d*=c;var l=h*c;h*=e;var m=f*c,n=f*e;f*=k;c*=g;e*=g;g*=k;a[0]=1-h-f;a[3]=l-g;a[6]=m+e;a[1]=l+g;a[4]=1-d-f;a[7]=n-c;a[2]=m-e;a[5]=n+c;a[8]=1-d-h;return a};q.normalFromMat4=function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],
k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],t=b[11],r=b[12],y=b[13],x=b[14],z=b[15],v=d*e-h*c,w=d*k-f*c,u=d*l-g*c,A=h*k-f*e,G=h*l-g*e,B=f*l-g*k,E=m*y-n*r,F=m*x-p*r;m=m*z-t*r;var H=n*x-p*y;n=n*z-t*y;p=p*z-t*x;t=v*p-w*n+u*H+A*m-G*F+B*E;if(!t)return null;t=1/t;a[0]=(e*p-k*n+l*H)*t;a[1]=(k*m-c*p-l*F)*t;a[2]=(c*n-e*m+l*E)*t;a[3]=(f*n-h*p-g*H)*t;a[4]=(d*p-f*m+g*F)*t;a[5]=(h*m-d*n-g*E)*t;a[6]=(y*B-x*G+z*A)*t;a[7]=(x*u-r*B-z*w)*t;a[8]=(r*G-y*u+z*v)*t;return a};q.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};q.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];a[4]=b[4]+d[4];a[5]=b[5]+d[5];a[6]=b[6]+d[6];a[7]=b[7]+d[7];a[8]=b[8]+d[8];return a};q.subtract=function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=
b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=b[8]-d[8];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*d;return a};q.multiplyScalarAndAdd=function(a,b,d,h){a[0]=b[0]+d[0]*h;a[1]=b[1]+d[1]*h;a[2]=b[2]+d[2]*h;a[3]=b[3]+d[3]*h;a[4]=b[4]+d[4]*h;a[5]=b[5]+d[5]*h;a[6]=b[6]+d[6]*h;a[7]=b[7]+d[7]*h;a[8]=b[8]+d[8]*h;return a};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};q.equals=function(a,b){var d=a[0],h=a[1],f=a[2],g=a[3],c=a[4],e=a[5],k=a[6],l=a[7],m=a[8],n=b[0],p=b[1],t=b[2],r=b[3],y=b[4],x=b[5],z=a[6],v=b[7],w=b[8];return Math.abs(d-n)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(h-p)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(f-t)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(g-r)<=D.EPSILON*Math.max(1,Math.abs(g),
Math.abs(r))&&Math.abs(c-y)<=D.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(e-x)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(k-z)<=D.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-v)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(m-w)<=D.EPSILON*Math.max(1,Math.abs(m),Math.abs(w))};return q})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._array=[];this._stride=
b}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(b,d){return 65535&b|d<<16};a.i8888to32=function(b,d,h,f){return b&255|(d&255)<<8|(h&255)<<16|f<<24};a.i8816to32=function(b,d,h){return b&255|(d&255)<<8|h<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Uint32Array(1),b=
new Uint8Array(a.buffer);q.int32To4Bytes=function(d){a[0]=d|0;return[b[0],b[1],b[2],b[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k){D=new k;k.parse(b,D);k.parse(a,D);k.parse(h,D);k.parse(c,D);k.parse(g,D);k.parse(f,D);k.parse(e,D);k.parse(d,D);return D})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,
d,h,f,g,c,e){return function(){function k(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._color=d.create();this._strokeColor=d.create()}k.prototype.dispose=function(){};k.prototype.render=function(l,m,n,p,t,r,y,x,z){if(0!==m.triangleElementCount){this._initialized||this._initialize(l);var v=y.hasDataDrivenRadius?1:y.getPaintValue("circle-radius",n),w=y.hasDataDrivenColor?[1,1,1,1]:y.getPaintValue("circle-color",
n),u=y.hasDataDrivenOpacity?1:y.getPaintValue("circle-opacity",n),A=y.hasDataDrivenStrokeWidth?1:y.getPaintValue("circle-stroke-width",n),G=y.hasDataDrivenStrokeColor?[1,1,1,1]:y.getPaintValue("circle-stroke-color",n),B=y.hasDataDrivenStrokeOpacity?1:y.getPaintValue("circle-stroke-opacity",n),E=y.hasDataDrivenBlur?0:y.getPaintValue("circle-blur",n);u=u*w[3]*z;this._color[0]=u*w[0];this._color[1]=u*w[1];this._color[2]=u*w[2];this._color[3]=u;u=B*G[3]*z;this._strokeColor[0]=u*G[0];this._strokeColor[1]=
u*G[1];this._strokeColor[2]=u*G[2];this._strokeColor[3]=u;z=r.tileTransform.transform;w=y.getPaintValue("circle-translate",n);if(0!==w[0]||0!==w[1])a.copy(this._viewProjMat,r.tileTransform.transform),z=w[0],w=w[1],B=G=0,B=(1<<r.key.level)/Math.pow(2,n)*(r.coordRange/512),1===y.getPaintValue("circle-translate-anchor",n)?(t*=-h.C_DEG_TO_RAD,n=Math.sin(t),t=Math.cos(t),G=B*(z*t-w*n),B*=z*n+w*t):(G=B*z,B*=w),this._offsetVector[0]=G,this._offsetVector[1]=B,this._offsetVector[2]=0,a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),z=this._viewProjMat;if(n=this._getCircleVAO(l,r))l.bindVAO(n),n=3===p,p=this._shaderVariations.getProgram([n],void 0,void 0,this._attributeLocations),l.bindProgram(p),p.setUniformMatrix4fv("u_transformMatrix",z),p.setUniformMatrix4fv("u_extrudeMatrix",x),p.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord),p.setUniform1f("u_depth",y.z),p.setUniform1f("u_radius",v),p.setUniform4fv("u_color",this._color),p.setUniform1f("u_blur",E),p.setUniform1f("u_stroke_width",
A),p.setUniform4fv("u_stroke_color",this._strokeColor),p.setUniform1f("u_antialiasingWidth",1.2),n&&(r=f.int32To4Bytes(m.layerID),p.setUniform4f("u_id",r[0],r[1],r[2],r[3])),l.drawElements(4,m.triangleElementCount,5125,12*m.triangleElementStart),l.bindVAO()}};k.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("circle",["circleVS","circleFS"],[],g,l);l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};k.prototype._getCircleVAO=function(l,m){if(m.circleVertexArrayObject)return m.circleVertexArrayObject;var n=m.circleVertexBuffer,p=m.circleIndexBuffer;if(!n||!p)return null;m.circleVertexArrayObject=
new e(l,this._attributeLocations,this._vertexAttributes,{geometry:n},p);return m.circleVertexArrayObject};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});(function(){return function(b,d){this.level=b;this.now=d}})();D=function(){return function(b,d,h,f){this.fadeSpeed=b;this.minfadeLevel=d;this.maxfadeLevel=h;this.fadeChange=f}}();q.FadeProperties=
D;D=function(){function b(d){void 0===d&&(d=300);this._levelSnapshots=[];this._duration=d}b.prototype.recordLevel=function(d){var h=a(),f=this._levelSnapshots;0===f.length&&(f.push({level:d,now:0}),f.push({level:d,now:0}));2!==f.length&&f[0].level===d||f.push({level:d,now:h})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var d=this._duration,h=this._levelSnapshots,f=h.length,g=h[f-1],c=-1;f>c+1&&h[c+1].now+d<g.now;)c++;for(0>c&&(c=0);c<f;c++)if(h[c].level!==g.level)return!0;
return!1};b.prototype.getFadeValues=function(d){void 0===d&&(d=!1);for(var h=this._duration,f=a(),g=this._levelSnapshots;3<g.length&&g[1].now+h<f;)g.shift();g[1].now+h<f&&(g[0].level=g[1].level);var c=g[0].level,e=g[g.length-1],k=e.level,l=Math.min(c,k);c=Math.max(c,k);g=(e.level-g[1].level)/((e.now-g[1].now)/h);return d?{fadeSpeed:0,minfadeLevel:l,maxfadeLevel:c,fadeChange:0}:{fadeSpeed:g,minfadeLevel:l,maxfadeLevel:c,fadeChange:(f-e.now)/h*g}};return b}();q.FadeRecorder=D})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k){var l=1/65536;return function(){function m(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=d.create();this._patternMatrix=a.create();this._color=h.create();this._outlineColor=h.create()}m.prototype.dispose=function(){};
m.prototype.render=function(n,p,t,r,y,x,z,v,w,u,A){if(0!==p.triangleElementCount){this._initialized||this._initialize(n);var G=void 0!==z.getPaintValue("fill-pattern",t),B=z.hasDataDrivenColor?[1,1,1,1]:z.getPaintValue("fill-color",t),E=z.hasDataDrivenOpacity?1:z.getPaintValue("fill-opacity",t),F=E*B[3]*A;this._color[0]=F*B[0];this._color[1]=F*B[1];this._color[2]=F*B[2];this._color[3]=F;B=3===y;var H;B&&(H=g.int32To4Bytes(p.layerID));F=x.tileTransform.transform;var L=x.coordRange/512,Q=z.getPaintValue("fill-translate",
t);if(0!==Q[0]||0!==Q[1]){b.copy(this._viewProjMat,x.tileTransform.transform);F=Q[0];Q=Q[1];var aa=0,ca=0;L*=(1<<x.key.level)/Math.pow(2,t);1===z.getPaintValue("fill-translate-anchor",t)?(aa=-f.C_DEG_TO_RAD*r,r=Math.sin(aa),ca=Math.cos(aa),aa=L*(F*ca-Q*r),ca=L*(F*r+Q*ca)):(aa=L*F,ca=L*Q);this._offsetVector[0]=aa;this._offsetVector[1]=ca;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);F=this._viewProjMat}this._drawFill(n,p,t,y,x,z,v,F,u,A,B,H);if(z.getPaintValue("fill-antialias",
t)&&!G&&0<p.outlineElementCount&&(1===y||3===y)){y=z.hasDataDrivenOutline;if(z.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else t=z.hasDataDrivenOutlineColor?[1,1,1,1]:z.getPaintValue("fill-outline-color",t),A*=E*t[3],this._outlineColor[0]=A*t[0],this._outlineColor[1]=A*t[1],this._outlineColor[2]=A*t[2],this._outlineColor[3]=A;u=.75/u;if(A=this._getOutlineVAO(n,
x,y))n.bindVAO(A),A=this._outlineShaderVariations.getProgram([y,B],void 0,void 0,y?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),n.bindProgram(A),A.setUniformMatrix4fv("u_transformMatrix",F),A.setUniformMatrix4fv("u_extrudeMatrix",w),A.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord),A.setUniform1f("u_depth",z.z+l),A.setUniform1f("u_outline_width",u),A.setUniform4fv("u_color",this._outlineColor),B&&A.setUniform4f("u_id",H[0],H[1],H[2],H[3]),n.drawElements(4,p.outlineElementCount,
5125,12*p.outlineElementStart),n.bindVAO()}}};m.prototype._initialize=function(n){if(this._initialized)return!0;var p=new e("fill",["fillVS","fillFS"],[],c,n);p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("DD","DD",[!0,!1],"DD");p.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=p;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};n=new e("outline",["outlineVS","outlineFS"],[],c,n);n.addDefine("DD","DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=n;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};m.prototype._drawFill=function(n,p,t,r,y,x,z,v,w,u,A,G){var B=x.getPaintValue("fill-pattern",
t),E=void 0!==B,F=x.hasDataDrivenOpacity?1:u*x.getPaintValue("fill-opacity",t),H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("fill-color",t);u*=F*H[3];this._color[0]=u*H[0];this._color[1]=u*H[1];this._color[2]=u*H[2];this._color[3]=u;H=x.hasDataDrivenFill;F=!1;!E&&(H?0:1===u)&&(F=!0);if(!E||0!==r)if(!F||1!==r)if(E||F||0!==r)if(r=this._getFillVAO(n,y,H))n.bindVAO(r),r=this._fillShaderVariations.getProgram([E,H,A],void 0,void 0,H?this._fillAttributeLocationsDD:this._fillAttributeLocations),n.bindProgram(r),
E&&(B=z.getMosaicItemPosition(B,!0))&&(t=y.coordRange/512/Math.pow(2,Math.round(t)-y.key.level)/w,a.identity(this._patternMatrix),w=1/(B.size[1]*t),this._patternMatrix[0]=1/(B.size[0]*t),this._patternMatrix[4]=w,z.bind(n,9729,B.page,1),r.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),r.setUniform2f("u_pattern_tl",B.tl[0],B.tl[1]),r.setUniform2f("u_pattern_br",B.br[0],B.br[1]),r.setUniform1i("u_texture",1)),r.setUniformMatrix4fv("u_transformMatrix",v),r.setUniform2fv("u_normalized_origin",
y.tileTransform.displayCoord),r.setUniform1f("u_depth",x.z+l),r.setUniform4fv("u_color",this._color),A&&r.setUniform4f("u_id",G[0],G[1],G[2],G[3]),n.drawElements(4,p.triangleElementCount,5125,12*p.triangleElementStart),n.bindVAO()};m.prototype._getFillVAO=function(n,p,t){if(t){if(p.fillDDVertexArrayObject)return p.fillDDVertexArrayObject;t=p.fillDDVertexBuffer;var r=p.fillIndexBuffer;if(!t||!r)return null;p.fillDDVertexArrayObject=new k(n,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:t},r);return p.fillDDVertexArrayObject}if(p.fillVertexArrayObject)return p.fillVertexArrayObject;t=p.fillVertexBuffer;r=p.fillIndexBuffer;if(!t||!r)return null;p.fillVertexArrayObject=new k(n,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:t},r);return p.fillVertexArrayObject};m.prototype._getOutlineVAO=function(n,p,t){if(t){if(p.outlineDDVertexArrayObject)return p.outlineDDVertexArrayObject;t=p.outlineDDVertexBuffer;var r=p.outlineIndexBuffer;if(!t||!r)return null;p.outlineDDVertexArrayObject=
new k(n,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:t},r);return p.outlineDDVertexArrayObject}if(p.outlineVertexArrayObject)return p.outlineVertexArrayObject;t=p.outlineVertexBuffer;r=p.outlineIndexBuffer;if(!t||!r)return null;p.outlineVertexArrayObject=new k(n,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:t},r);return p.outlineVertexArrayObject};return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k){return function(){function l(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=d.create();this._color=h.create();this._dashArray=b.create()}l.prototype.dispose=function(){};l.prototype.render=function(m,n,p,t,r,y,x,z,v,w,u){if(0!==n.triangleElementCount){this._initialized||
this._initialize(m);var A=y.tileTransform.transform,G=y.coordRange/512,B=x.getPaintValue("line-translate",p);if(0!==B[0]||0!==B[1]){a.copy(this._viewProjMat,y.tileTransform.transform);A=B[0];B=B[1];var E=0,F=0;F=(1<<y.key.level)/Math.pow(2,p)*G;r=r.rotation;if(1===x.getPaintValue("line-translate-anchor",p)){E=-f.C_DEG_TO_RAD*r;r=Math.sin(E);var H=Math.cos(E);E=F*(A*H-B*r);F*=A*r+B*H}else E=F*A,F*=B;this._offsetVector[0]=E;this._offsetVector[1]=F;this._offsetVector[2]=0;a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);A=this._viewProjMat}B=x.getPaintValue("line-pattern",p);F=void 0!==B;w=1/w;r=x.getPaintValue("line-blur",p);H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("line-color",p);var L=x.hasDataDrivenOpacity?1:x.getPaintValue("line-opacity",p);E=x.hasDataDrivenWidth?1:x.getPaintValue("line-width",p);u*=L*H[3];this._color[0]=u*H[0];this._color[1]=u*H[1];this._color[2]=u*H[2];this._color[3]=u;u=x.hasDataDrivenLine;t=3===t;var Q;t&&(Q=g.int32To4Bytes(n.layerID));if(H=
this._getLineVAO(m,y,u)){m.bindVAO(H);u=this._shaderVariations.getProgram([F,u,t],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);m.bindProgram(u);u.setUniformMatrix4fv("u_transformMatrix",A);u.setUniformMatrix4fv("u_extrudeMatrix",v);u.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);u.setUniform1f("u_depth",x.z);u.setUniform1f("u_blur",r);u.setUniform1f("u_antialiasing",w);u.setUniform4fv("u_color",this._color);u.setUniform1f("u_width",E);t&&u.setUniform4f("u_id",
Q[0],Q[1],Q[2],Q[3]);if(F){if(p=z.getMosaicItemPosition(B,!0))z.bind(m,9729,p.page,1),u.setUniform2f("u_pattern_tl",p.tl[0],p.br[1]),u.setUniform2f("u_pattern_br",p.br[0],p.tl[1]),u.setUniform2f("u_spriteSize",G*p.size[0],p.size[1]),u.setUniform1i("u_texture",1)}else z=x.getPaintValue("line-dasharray",p),2>z.length&&(z=[1,-1]),this._dashArray[0]=G*z[0],this._dashArray[1]=G*z[1],u.setUniform2fv("u_dasharray",this._dashArray);m.drawElements(4,n.triangleElementCount,5125,12*n.triangleElementStart);m.bindVAO()}}};
l.prototype._initialize=function(m){if(this._initialized)return!0;m=new e("line",["lineVS","lineFS"],[],c,m);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("DD","DD",[!0,!1],"DD");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};l.prototype._getLineVAO=function(m,n,p){if(p){if(n.lineDDVertexArrayObject)return n.lineDDVertexArrayObject;p=n.lineDDVertexBuffer;var t=n.lineIndexBuffer;if(!p||!t)return null;n.lineDDVertexArrayObject=new k(m,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:p},t);return n.lineDDVertexArrayObject}if(n.lineVertexArrayObject)return n.lineVertexArrayObject;p=n.lineVertexBuffer;t=n.lineIndexBuffer;if(!p||!t)return null;n.lineVertexArrayObject=new k(m,this._attributeLocations,this._vertexAttributes,
{geometry:p},t);return n.lineVertexArrayObject};return l}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new D.ARRAY_TYPE(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+
d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a};q.mul=q.multiply;q.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};
q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};q.scaleAndAdd=function(a,b,d,h){a[0]=b[0]+d[0]*h;a[1]=b[1]+d[1]*h;return a};q.distance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1];return Math.sqrt(d*d+h*h)};q.dist=q.distance;q.squaredDistance=function(a,b){var d=b[0]-a[0],h=b[1]-a[1];return d*d+h*h};q.sqrDist=q.squaredDistance;q.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};q.normalize=function(a,b){var d=b[0],h=b[1];d=d*d+h*h;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};q.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};
q.lerp=function(a,b,d,h){var f=b[0];b=b[1];a[0]=f+h*(d[0]-f);a[1]=b+h*(d[1]-b);return a};q.random=function(a,b){b=b||1;var d=2*D.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};q.transformMat2=function(a,b,d){var h=b[0];b=b[1];a[0]=d[0]*h+d[2]*b;a[1]=d[1]*h+d[3]*b;return a};q.transformMat2d=function(a,b,d){var h=b[0];b=b[1];a[0]=d[0]*h+d[2]*b+d[4];a[1]=d[1]*h+d[3]*b+d[5];return a};q.transformMat3=function(a,b,d){var h=b[0];b=b[1];a[0]=d[0]*h+d[3]*b+d[6];a[1]=d[1]*h+d[4]*b+d[7];return a};
q.transformMat4=function(a,b,d){var h=b[0];b=b[1];a[0]=d[0]*h+d[4]*b+d[12];a[1]=d[1]*h+d[5]*b+d[13];return a};q.forEach=function(){var a=q.create();return function(b,d,h,f,g,c){d||(d=2);h||(h=0);for(f=f?Math.min(f*d+h,b.length):b.length;h<f;h+=d)a[0]=b[h],a[1]=b[h+1],g(a,a,c),b[h]=a[0],b[h+1]=a[1];return b}}();q.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};q.equals=function(a,b){var d=a[0],h=a[1],f=b[0],g=b[1];return Math.abs(d-f)<=
D.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(h-g)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))};return q})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(D,q,a,b){return function(){function d(){this._iconRenderer=new a;this._sdfRenderer=new b}d.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};d.prototype.render=function(h,f,g,c,e,k,l,m,n,p,t,r,y,x){f.hasData()&&(0<f.markerPerPageElementsMap.size&&this._iconRenderer.render(h,f,g,c,e,k,l,m,n,t,r,x),0<f.glyphPerPageElementsMap.size&&this._sdfRenderer.render(h,f,g,c,e,k,l,m,p,t,r,y,x))};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e){return function(){function k(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._extrudeMat=a.create();this._color=d.create()}k.prototype.dispose=function(){};k.prototype.render=function(l,m,n,p,t,r,y,x,z,v,w,u){var A=this;
this._initialized||this._initialize(l);var G=x.hasDataDrivenIconSize?1:x.getLayoutValue("icon-size",n),B=x.hasDataDrivenIconColor?[1,1,1,1]:x.getPaintValue("icon-color",n),E=x.hasDataDrivenIconOpacity?1:x.getPaintValue("icon-opacity",n);u*=B[3]*E;this._color[0]=u*B[0];this._color[1]=u*B[1];this._color[2]=u*B[2];this._color[3]=u;B=x.getLayoutValue("icon-rotation-alignment",n);2===B&&(B=1===x.getLayoutValue("symbol-placement",n)?0:1);var F=0===B;u=m.isSDF;E=x.hasDataDrivenIcon;p=3===p;B=h.degToByte(t);
var H=y.tileTransform.transform,L=x.getPaintValue("icon-translate",n);if(0!==L[0]||0!==L[1]){a.copy(this._viewProjMat,y.tileTransform.transform);H=L[0];L=L[1];var Q=0,aa=0;aa=(1<<y.key.level)/Math.pow(2,n)*(y.coordRange/512);if(1===x.getPaintValue("icon-translate-anchor",n)){Q=-h.C_DEG_TO_RAD*t;t=Math.sin(Q);var ca=Math.cos(Q);Q=aa*(H*ca-L*t);aa*=H*t+L*ca}else Q=aa*H,aa*=L;this._offsetVector[0]=Q;this._offsetVector[1]=aa;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
H=this._viewProjMat}F?a.copy(this._extrudeMat,v):a.copy(this._extrudeMat,w);if(v=this._getIconVAO(l,y,E)){l.bindVAO(v);var ea=this._shaderVariations.getProgram([u,E,p],void 0,void 0,E?this._attributeLocationsDD:this._attributeLocations);l.bindProgram(ea);u&&(v=x.getPaintValue("icon-halo-color",n),w=x.getPaintValue("icon-halo-width",n),ea.setUniform4f("u_outlineColor",v[0],v[1],v[2],v[3]),ea.setUniform1f("u_outlineSize",w));ea.setUniformMatrix4fv("u_transformMatrix",H);ea.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);ea.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);ea.setUniform1f("u_depth",x.z);ea.setUniform1f("u_mapRotation",B);ea.setUniform1f("u_keepUpright",0);ea.setUniform1f("u_level",10*n);ea.setUniform1f("u_fadeSpeed",10*r.fadeSpeed);ea.setUniform1f("u_minfadeLevel",10*r.minfadeLevel);ea.setUniform1f("u_maxfadeLevel",10*r.maxfadeLevel);ea.setUniform1f("u_fadeChange",10*(n+r.fadeChange));ea.setUniform1i("u_texture",1);ea.setUniform1f("u_size",G);ea.setUniform4fv("u_color",
this._color);p&&(n=f.int32To4Bytes(m.layerID),ea.setUniform4f("u_id",n[0],n[1],n[2],n[3]));m.markerPerPageElementsMap.forEach(function(U,la){A._spritesTextureSize[0]=z.getWidth(la)/4;A._spritesTextureSize[1]=z.getHeight(la)/4;ea.setUniform2fv("u_mosaicSize",A._spritesTextureSize);z.bind(l,9729,la,1);l.drawElements(4,U[1],5125,12*U[0])});l.bindVAO()}};k.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("icon",["iconVS","iconFS"],[],g,l);l.addDefine("SDF","SDF",[!0,!0],"SDF");
l.addDefine("DD","DD",[!0,!1],"DD");l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",
count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};k.prototype._getIconVAO=
function(l,m,n){if(n){if(m.iconDDVertexArrayObject)return m.iconDDVertexArrayObject;n=m.iconDDVertexBuffer;var p=m.iconIndexBuffer;if(!n||!p)return null;m.iconDDVertexArrayObject=new e(l,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:n},p);return m.iconDDVertexArrayObject}if(m.iconVertexArrayObject)return m.iconVertexArrayObject;n=m.iconVertexBuffer;p=m.iconIndexBuffer;if(!n||!p)return null;m.iconVertexArrayObject=new e(l,this._attributeLocations,this._vertexAttributes,{geometry:n},
p);return m.iconVertexArrayObject};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f,g,c,e,k){var l=1/65536;return function(){function m(){this._attributeLocations={a_pos:0,a_vertexOffset:1,
a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=d.create();this._extrudeMat=b.create();this._haloColor=h.create();this._sdfColor=h.create();this._scaleVec=d.create()}m.prototype.dispose=function(){};m.prototype.render=function(n,p,t,r,y,x,z,v,w,u,A,G,B){var E=this;if(!a("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(n);var F=f.degToByte(y),
H=v.getLayoutValue("text-rotation-alignment",t);2===H&&(H=1===v.getLayoutValue("symbol-placement",t)?0:1);var L=0===H;H=v.getLayoutValue("text-keep-upright",t)&&L;r=3===r;G=.8*3/G;var Q=v.hasDataDrivenTextSize?1:v.getLayoutValue("text-size",t),aa=v.hasDataDrivenTextColor?[1,1,1,1]:v.getPaintValue("text-color",t),ca=v.hasDataDrivenTextOpacity?1:v.getPaintValue("text-opacity",t),ea=aa[3]*ca*B;this._sdfColor[0]=ea*aa[0];this._sdfColor[1]=ea*aa[1];this._sdfColor[2]=ea*aa[2];this._sdfColor[3]=ea;this._glyphTextureSize||
(this._glyphTextureSize=new Float32Array([w.width/4,w.height/4]));aa=z.tileTransform.transform;ea=v.getPaintValue("text-translate",t);if(0!==ea[0]||0!==ea[1]){b.copy(this._viewProjMat,z.tileTransform.transform);aa=ea[0];ea=ea[1];var U=0,la=0;la=(1<<z.key.level)/Math.pow(2,t)*(z.coordRange/512);if(1===v.getPaintValue("text-translate-anchor",t)){U=-f.C_DEG_TO_RAD*y;y=Math.sin(U);var V=Math.cos(U);U=la*(aa*V-ea*y);la*=aa*y+ea*V}else U=la*aa,la*=ea;this._offsetVector[0]=U;this._offsetVector[1]=la;this._offsetVector[2]=
0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);aa=this._viewProjMat}L?b.copy(this._extrudeMat,u):b.copy(this._extrudeMat,A);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);u=v.hasDataDrivenText;if(A=this._getSDFVAO(n,z,u)){n.bindVAO(A);var R=this._shaderVariations.getProgram([u,r],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);n.bindProgram(R);R.setUniformMatrix4fv("u_transformMatrix",
aa);R.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat);R.setUniform2fv("u_normalized_origin",z.tileTransform.displayCoord);R.setUniform1f("u_depth",v.z+l);R.setUniform2fv("u_mosaicSize",this._glyphTextureSize);R.setUniform1f("u_mapRotation",F);R.setUniform1f("u_keepUpright",H?1:0);R.setUniform1f("u_level",10*t);R.setUniform1f("u_fadeSpeed",10*x.fadeSpeed);R.setUniform1f("u_minfadeLevel",10*x.minfadeLevel);R.setUniform1f("u_maxfadeLevel",10*x.maxfadeLevel);R.setUniform1f("u_fadeChange",10*(t+
x.fadeChange));R.setUniform1i("u_texture",0);R.setUniform1f("u_size",Q);R.setUniform1f("u_antialiasingWidth",G);r&&(x=g.int32To4Bytes(p.layerID),R.setUniform4f("u_id",x[0],x[1],x[2],x[3]));p.glyphPerPageElementsMap.forEach(function(ha,S){w.bind(n,9729,S,0);var X=v.getPaintValue("text-halo-color",t),ka=v.getPaintValue("text-halo-width",t);if(0<X[3]&&0<ka){var oa=X[3]*ca*B;E._haloColor[0]=oa*X[0];E._haloColor[1]=oa*X[1];E._haloColor[2]=oa*X[2];E._haloColor[3]=oa;X=3*v.getPaintValue("text-halo-blur",
t);ka*=3;R.setUniform4fv("u_color",E._haloColor);R.setUniform1f("u_halo",1);R.setUniform1f("u_edgeDistance",ka);R.setUniform1f("u_edgeBlur",X);n.drawElements(4,ha[1],5125,12*ha[0])}0<E._sdfColor[3]&&(R.setUniform4fv("u_color",E._sdfColor),R.setUniform1f("u_halo",0),R.setUniform1f("u_edgeDistance",0),R.setUniform1f("u_edgeBlur",0),n.drawElements(4,ha[1],5125,12*ha[0]))});n.bindVAO()}}};m.prototype._initialize=function(n){if(this._initialized)return!0;n=new e("text",["textVS","textFS"],[],c,n);n.addDefine("DD",
"DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};m.prototype._getSDFVAO=function(n,
p,t){if(t){if(p.textDDVertexArrayObject)return p.textDDVertexArrayObject;t=p.textDDVertexBuffer;var r=p.textIndexBuffer;if(!t||!r)return null;p.textDDVertexArrayObject=new k(n,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:t},r);return p.textDDVertexArrayObject}if(p.textVertexArrayObject)return p.textVertexArrayObject;t=p.textVertexBuffer;r=p.textIndexBuffer;if(!t||!r)return null;p.textVertexArrayObject=new k(n,this._attributeLocations,this._vertexAttributes,{geometry:t},r);return p.textVertexArrayObject};
return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h,f,g){return function(){function c(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}c.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=
null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)};c.prototype.render=function(e,k){this._initialized||this._initialize(e);e.bindVAO(this._outlineVertexArrayObject);e.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",k.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);e.setLineWidth(2);e.drawArrays(3,0,4);e.bindVAO();var l=this._getTexture(e,k);l&&(e.bindVAO(this._tileInfoVertexArrayObject),e.bindProgram(this._tileInfoProgram),e.bindTexture(l,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",k.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",l.descriptor.width,l.descriptor.height),e.drawArrays(5,0,4),e.bindVAO())};c.prototype._initialize=function(e){if(this._initialized)return!0;var k={a_pos:0},l=new h(e,b.backgroundVS,
b.backgroundFS,k),m=new h(e,b.tileInfoVS,b.tileInfoFS,k),n={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},p=new Int8Array([0,0,1,0,1,1,0,1]);p=d.createVertex(e,35044,p);p=new g(e,k,n,{geometry:p});var t=new Int8Array([0,0,1,0,0,1,1,1]);t=d.createVertex(e,35044,t);e=new g(e,k,n,{geometry:t});this._outlineProgram=l;this._tileInfoProgram=m;this._outlineVertexArrayObject=p;this._tileInfoVertexArrayObject=e;return this._initialized=!0};c.prototype._getTexture=function(e,
k){if(k.texture)return k.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var l=k.key.id,m=this._canvas.getContext("2d");m.font="24px sans-serif";m.textAlign="left";m.textBaseline="middle";var n=m.measureText(l);n=Math.pow(2,Math.ceil(a.log2(n.width+2)));n>this._maxWidth&&(this._maxWidth=n);m.clearRect(0,
0,this._maxWidth,32);m.fillStyle=k.key.level>k.refKey.level?"red":"blue";m.fillText(l,0,16);k.texture=new f(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return k.texture};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l){var m="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(n){function p(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];r=n.call(this)||this;r._renderBuckets=[];r._vectorTileData=
null;r._symbolUpdateData=null;r.status=c.TileStatus.INITIALIZED;r.coords=[0,0];r.bounds=[0,0,0,0];r.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};r.stencilData={mask:0,reference:0};r.status=c.TileStatus.INITIALIZED;r.tileTransform.transform=d.create();r.tileTransform.displayCoord=h.create();0<t.length&&(y=r.acquire).call.apply(y,[r].concat(t));return r;var y}a(p,n);p.prototype.reset=function(){e.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=c.TileStatus.INITIALIZED};p.prototype.acquire=function(t,r,y,x,z){this.key=t;this.refKey=r;r=y.lodAt(t.level).resolution;
var v=y.size[0]*r,w=y.origin,u=t.col*v,A=t.row*v,G=y.spatialReference,B=0;G&&(G._isWrappable?G._isWrappable():G.isWrappable)&&(G=f.getInfo(G),B=G.valid[1]-G.valid[0]);u=w.x+u+t.world*B;w=w.y-A;this.coords[0]=u;this.coords[1]=w;this.bounds[0]=u;this.bounds[1]=w;this.bounds[2]=u+v;this.bounds[3]=w-v;this.widthInPixels=y.size[1];this.coordRange=4096;this.resolution=r;this.rotation=z;this.styleLayers=x;this.id=t.id};p.prototype.setData=function(t,r){this._vectorTileData=t;this.client=r;t&&t.bufferDataInfo||
(this.status=c.TileStatus.NO_DATA)};p.prototype.updateSymbolData=function(t){t&&(this._symbolUpdateData=t,this.requestRender())};p.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=c.TileStatus.INITIALIZED};p.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(t,
r){return t+r.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};p.prototype.getGpuMemoryUsage=function(){var t=this,r=m.reduce(function(y,x){return t[x]?y+t[x].size:y},0);this.texture&&(r+=this.texture.descriptor.width*this.texture.descriptor.height*4);return r};p.prototype.attach=function(t){if(this.status!==c.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var r=new Uint32Array(this._vectorTileData.bucketDataInfo),
y=r.length,x=0;x<y;){var z=r[x],v=r[x+1];if(0===v)v=new k.BackgroundRenderBucket,v.layerID=z,this._renderBuckets.push(v),x+=2;else if(1===v)v=new k.FillRenderBucket,v.layerID=z,v.triangleElementStart=r[x+2],v.triangleElementCount=r[x+3],v.outlineElementStart=r[x+4],v.outlineElementCount=r[x+5],this._renderBuckets.push(v),x+=6;else if(2===v)v=new k.LineRenderBucket,v.layerID=z,v.triangleElementStart=r[x+2],v.triangleElementCount=r[x+3],this._renderBuckets.push(v),x+=4;else if(3===v){v=new k.SymbolRenderBucket;
v.layerID=z;v.isSDF=0!==r[x+2];var w=x+3;z=r[w];w++;if(0<z)for(var u=void 0,A=void 0,G=void 0,B=0;B<z;B++)u=r[w],A=r[w+1],G=r[w+2],v.markerPerPageElementsMap.set(u,[A,G]),w+=3;var E=r[w];w++;if(0<E)for(G=A=u=void 0,B=0;B<E;B++)u=r[w],A=r[w+1],G=r[w+2],v.glyphPerPageElementsMap.set(u,[A,G]),w+=3;this._renderBuckets.push(v);x+=5+3*z+3*E}else 4===v&&(v=new k.CircleRenderBucket,v.layerID=z,v.triangleElementStart=r[x+2],v.triangleElementCount=r[x+3],this._renderBuckets.push(v),x+=4)}t=t.context;r=new Uint32Array(this._vectorTileData.bufferDataInfo);
y=r.length;for(v=x=0;v<y;v+=2,x++)if(!(0>=r[v+1]||0===this._vectorTileData.bufferData[x].byteLength))switch(r[v]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillDDVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineDDVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineDDVertexBuffer=l.createVertex(t,
35044,this._vectorTileData.bufferData[x]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.iconDDVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.textVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.textDDVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.textIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.circleVertexBuffer=l.createVertex(t,35044,this._vectorTileData.bufferData[x]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[x]):
this.circleIndexBuffer=l.createIndex(t,35044,this._vectorTileData.bufferData[x])}this._vectorTileData=null;this.status=c.TileStatus.READY;return!0};p.prototype.detach=function(t){this.client&&this.status!==c.TileStatus.INVALID&&this.status!==c.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();n.prototype.detach.call(this,t)};p.prototype.doRender=function(t){if(this.visible&&this.status===c.TileStatus.READY){var r=t.context,y=t.renderer;if(r&&y){var x=t.drawphase;
this._symbolUpdateData&&this._updateSymbolData(t);r.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var z=this.styleLayers,v=void 0!==t.layerOpacity?t.layerOpacity:1;if(0!==v){var w=this._renderBuckets.length,u=0;if(0===x)for(u=w-1;0<=u;u--){var A=this._renderBuckets[u];3!==A.type&&4!==A.type&&A.hasData()&&y.renderBucket(r,A,t.displayLevel,t.requiredLevel,x,this,z.layers[A.layerID],v)}else for(u=0;u<w;u++)A=this._renderBuckets[u],A.hasData()&&y.renderBucket(r,A,t.displayLevel,
t.requiredLevel,x,this,z.layers[A.layerID],v)}}}};p.prototype._updateSymbolData=function(t){if(!this._symbolUpdateData.bucketDataInfo)return!0;var r=new Uint32Array(this._symbolUpdateData.bucketDataInfo),y=r.length;if(0===y)return this._symbolUpdateData=null,!0;if(this.status!==c.TileStatus.READY)return this.requestRender(),!1;t=t.context;for(var x=new Uint32Array(this._symbolUpdateData.bufferDataInfo),z=x.length,v=0,w=0;w<z;w+=2,v++)switch(x[w]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=l.createVertex(t,35044,this._symbolUpdateData.bufferData[v]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=l.createVertex(t,35044,this._symbolUpdateData.bufferData[v]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=l.createIndex(t,35044,this._symbolUpdateData.bufferData[v]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=l.createVertex(t,35044,this._symbolUpdateData.bufferData[v]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=l.createVertex(t,35044,this._symbolUpdateData.bufferData[v]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=l.createIndex(t,35044,this._symbolUpdateData.bufferData[v])}t=
this._renderBuckets.length;for(x=0;x<t;x++)this._renderBuckets[x]instanceof k.SymbolRenderBucket&&(z=this._renderBuckets[x],z.markerPerPageElementsMap.clear(),z.glyphPerPageElementsMap.clear());for(t=0;t<y;){z=r[t];v=-1;w=this._renderBuckets.length;for(x=0;x<w;x++)if(this._renderBuckets[x].layerID===z){v=x;break}x=this._renderBuckets[v];x||(x=new k.SymbolRenderBucket,x.layerID=z,x.isSDF=0!==r[t+2],this._renderBuckets.push(x));var u=t+3;z=r[u];u++;if(0<z)for(var A=w=v=void 0,G=0;G<z;G++)v=r[u],w=r[u+
1],A=r[u+2],x.markerPerPageElementsMap.set(v,[w,A]),u+=3;var B=r[u];u++;if(0<B)for(A=w=v=void 0,G=0;G<B;G++)v=r[u],w=r[u+1],A=r[u+2],x.glyphPerPageElementsMap.set(v,[w,A]),u+=3;t+=5+3*z+3*B}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};p.pool=new b(p);return p}(g)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(D,q,a){return function(){function b(d,h,f,g){this.set(d,h,f,g)}b.from=function(d,h,f,g){return b.pool.acquire(d,h,f,g)};b.getId=function(d,h,f,g){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+h+"/"+f+"/"+
g};Object.defineProperty(b.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(d,h,f,g){null==d?this.world=this.col=this.row=this.level=0:"object"===
typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),h=d[1],f=d[2],g=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(h),this.col=parseFloat(f),this.world=parseFloat(g)):(this.level=+d,this.row=+h,this.col=+f,this.world=+g||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.prototype.getChildKeys=function(){var d=this.level+1,h=this.row<<1,f=this.col<<1,g=this.world;
return[b.pool.acquire(d,h,f,g),b.pool.acquire(d,h,f+1,g),b.pool.acquire(d,h+1,f,g),b.pool.acquire(d,h+1,f+1,g)]};b.prototype._compare=function(d){return this.row<d.row?-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};b.sort=function(d){return d.map(function(h){return b.from(h)}).sort(function(h,f){return h._compare(f)}).map(function(h){return h.id})};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});D=function(){return function(d){this.type=d}}();q.RenderBucket=D;b=function(d){function h(){var f=d.call(this,2)||this;f.triangleElementStart=0;f.triangleElementCount=0;return f}a(h,d);h.prototype.hasData=function(){return 0<this.triangleElementCount};return h}(D);q.LineRenderBucket=b;b=function(d){function h(){var f=d.call(this,1)||this;f.triangleElementStart=
0;f.triangleElementCount=0;f.outlineElementStart=0;f.outlineElementCount=0;return f}a(h,d);h.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return h}(D);q.FillRenderBucket=b;b=function(d){function h(){var f=d.call(this,3)||this;f.markerPerPageElementsMap=new Map;f.glyphPerPageElementsMap=new Map;f.isSDF=!1;return f}a(h,d);h.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return h}(D);q.SymbolRenderBucket=
b;b=function(d){function h(){var f=d.call(this,4)||this;f.triangleElementStart=0;f.triangleElementCount=0;return f}a(h,d);h.prototype.hasData=function(){return 0<this.triangleElementCount};return h}(D);q.CircleRenderBucket=b;D=function(d){function h(){return d.call(this,0)||this}a(h,d);h.prototype.hasData=function(){return!0};return h}(D);q.BackgroundRenderBucket=D})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x){var z=new f(10),v=new Map;return function(){function w(u,A,G,B,E){void 0===B&&(B=!1);this.devicePixelRatio=G;this.allowUpdates=B;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=u;this._styleRepository=u.styleRepository;this._requestUpdate=A}w.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(w.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});w.prototype.start=function(){var u=this;this.stop();var A=this._styleRepository,G=new t(A.sprite,this.devicePixelRatio);G.devicePixelRatio=this.devicePixelRatio;var B=G.load().then(function(){u._spriteMosaic=new p(1024,1024,250);u._spriteMosaic.setSpriteSource(G);b("stable-symbol-rendering")&&u._spriteMosaic.preloadSpriteItems()}),
E=new n(A.glyphs);this._glyphMosaic=new m(1024,1024,E);var F=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),H=e.open(c.getAbsMid("./WorkerTileHandler",D,x),{client:this}).then(function(Q){u._connection=Q}),L=new a(function(Q){B.isFulfilled()||B.cancel();F.isFulfilled()||F.cancel();H.isFulfilled()||H.cancel()});d([B,F,H]).then(function(Q){d(u._connection.broadcast("setLayers",A.styleJSON)).then(function(){L.resolve()})});return this._broadcastPromise=L.promise};w.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(u){return u.cancel()});this._ongoingRequests.forEach(function(u){return u.cancel()});this._connection&&(this._connection.close(),this._connection=null)};w.prototype.updateTile=function(u,A){var G=this;if(!this.allowUpdates)return g.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return g.reject(Error("no connection"));var B=Math.round(l.degToByte(A.state.rotation));if(u.rotation===
B)return g.resolve(null);var E=u.key;if(this._updateQueue.has(E.id)){var F=this._updateQueue.get(E.id);F.cancel()}u.rotation=B;F=this._connection.invoke("update",{key:u.id,rotation:B},null,{client:u.client}).then(function(H){u.updateSymbolData(H);return H}).always(function(){G._updateQueue["delete"](E.id)});this._updateQueue.set(u.id,F);return F};w.prototype.getVectorTileWithLRC=function(u,A,G,B){var E=this;void 0===B&&(B=0);var F=new k(u,A,G,0);return this.getRefKey(F).then(function(H){var L=new y(F,
H,E._vectorTileLayer.tileInfo,E._styleRepository,0);if(H)return E.getTileData(L.key,0).then(function(Q){L.setData(Q.tileData,Q.client);return L});L.setData(null,null);return L})};w.prototype.getTileData=function(u,A){var G=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(u).then(function(B){if(!B)return g.resolve(null);var E=Math.round(l.degToByte(A));return G._getTileData(G._connection,u,B,E).then(function(F){return F&&F.tileData?{tileData:F.tileData,client:F.client}:
g.reject("No data")})}):g.reject(Error("no connection"))};w.prototype.getRefKey=function(u){return this._tileIndex?this._tileIndex.dataKey(u):g.resolve(u)};w.prototype.fetchTileData=function(u){u=k.pool.acquire(u);var A=this._vectorTileLayer.getTileUrl(u.level,u.row,u.col);k.pool.release(u);return h(A,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(G){return{result:G.data,transferList:[G.data]}})};w.prototype.getSprites=function(u){return this._spriteMosaic.getSpriteItems(u)};
w.prototype.getGlyphs=function(u){return this._glyphMosaic.getGlyphItems(u.tileID,u.font,u.codePoints)};w.prototype.getStyleRepository=function(){return this._styleRepository};w.prototype.getTileIndex=function(){return this._tileIndex};w.prototype._getTileData=function(u,A,G,B){var E=this,F={client:null};if(u=this._ongoingRequests.get(A.id))return u;u=this._connection.invoke("getTile",{key:A.id,refKey:G.id,rotation:B,cacheTile:this.allowUpdates},null,F).then(function(H){E._ongoingRequests["delete"](A.id);
return{tileData:H,client:F.client}})["catch"](function(H){E._ongoingRequests["delete"](A.id);E._connection.invoke("destructTileData",A.id,null,F);return g.reject(H)});this._ongoingRequests.set(A.id,u);return u};w.prototype._fetchTileMap=function(u){var A=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new r(this._vectorTileLayer.tilemapCache),g.resolve();if(!u)return g.resolve();if(z.has(u))return this._tileIndex=z.use(u),
g.resolve();if(v.has(u))return v.get(u).then(function(B){A._tileIndex=new r(B.data)});var G=h(u,{callbackParamName:"callback",responseType:"json"});G.then(function(B){A._tileIndex=new r(B.data);v["delete"](u);z.insert(u,A._tileIndex)});v.set(u,G);return G};return w}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
b}a.prototype.has=function(b){return void 0!==this._cache[b]};a.prototype.insert=function(b,d){null!==this.use(b)?this._cache[b]=d:(this._collect(),this._cache[b]=d,this._lruQueue.unshift(b))};a.prototype.use=function(b){var d=this._cache[b];if(!d)return null;this._lruQueue.splice(this._lruQueue.indexOf(b),1);this._lruQueue.unshift(b);return d};a.prototype.print=function(){for(var b=0,d=this._lruQueue;b<d.length;b++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var b=
this._lruQueue.pop(),d=this._cache[b];d&&d.release&&d.release();delete this._cache[b]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(D,q,a){function b(d,h){if(Array.isArray(h)){var f=new a;d(h,function(){for(var g=[],c=0;c<arguments.length;c++)g[c]=arguments[c];f.resolve(g)});return f.promise}return b(d,[h]).then(function(g){return g[0]})}Object.defineProperty(q,"__esModule",{value:!0});q.when=b;q.getAbsMid=function(d,
h,f){return h.toAbsMid?h.toAbsMid(d):f.id.replace(/\/[^\/]*$/gi,"/")+d}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});for(var b in a)q.hasOwnProperty(b)||(q[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(D,q,a,b,d,h,
f,g,c){function e(){if(t)return t;for(var r=k+l,y=[],x=function(v){var w=c.create(v).then(function(u){return p[v]=u});y.push(w)},z=0;z<r;z++)x(z);return t=b(y).then(function(){})}Object.defineProperty(q,"__esModule",{value:!0});q.Connection=f;q.RemoteClient=g;(f=navigator.hardwareConcurrency)||(f=a("safari")&&a("mac")||a("trident")?8:2);var k=a("esri-workers-debug")?1:Math.max(1,Math.ceil(f/2)),l=a("esri-workers-debug")?1:Math.max(1,Math.floor(f/2)),m=d.getLogger("esri.core.workers"),n=0,p=[];q.initialize=
function(){e()};q.open=function(r,y,x){void 0===y&&(y={});if(Array.isArray(r))return new q.Connection(r.map(function(w){return new q.RemoteClient(w,y.client)}));if("string"!==typeof r){m.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var z=r;r=y;y={client:z,strategy:x?"dedicated":"distributed"}}var v=y.strategy||"distributed";return"local"===v?h.create(function(w){D([r],function(u){w(q.RemoteClient.connect(u))})}).then(function(w){return new q.Connection([new q.RemoteClient(w,
y.client)])}):e().then(function(){if("dedicated"===v){var w=k+n++;n%=l;return p[w].open(r).then(function(u){return new q.Connection([new q.RemoteClient(u,y.client)])})}return h.all(p.map(function(u){return u.open(r)})).then(function(u){return new q.Connection(u.map(function(A){return new q.RemoteClient(A,y.client)}))})})};q.terminate=function(){for(var r=0;r<p.length;r++)p[r]&&p[r].terminate();p.length=0};var t})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(D,q,a){return function(){function b(d){this._clientIdx=0;this._clients=d}b.prototype.broadcast=function(d,h,f){for(var g=[],c=0,e=this._clients;c<e.length;c++)g.push(e[c].invoke(d,h,f));return g};b.prototype.close=function(){for(var d=0,h=this._clients;d<h.length;d++)h[d].close();this._clients=[]};b.prototype.invoke=function(d,h,f,g){var c=g&&g.client;if(!this._clients||!this._clients.length)return a.reject(Error("Connection closed"));null!=c&&-1!==this._clients.indexOf(c)||
this._clients.some(function(e){return e.isBusy()?!1:(c=e,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,c=this._clients[this._clientIdx]);d=c.invoke(d,h,f);g&&(g.client=c);return d};b.prototype.openPorts=function(){return a.all(this._clients.map(function(d){return d.openPort()}))};return b}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(D,q,a,b,d,h){function f(n,p){n["delete"](p)}
var g=h.MessageType.CLOSE,c=h.MessageType.CANCEL,e=h.MessageType.INVOKE,k=h.MessageType.RESPONSE,l=h.MessageType.OPEN_PORT,m=function(){function n(p){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=p;this._timer=null;this._process=this._process.bind(this)}n.prototype.push=function(p){p.type===h.MessageType.CANCEL?this._cancelledJobIds.add(p.jobId):(this._invokeMessages.push(p),null===this._timer&&(this._timer=setTimeout(this._process,0)))};n.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};n.prototype._process=function(){this._timer=null;for(var p=0,t=this._invokeMessages;p<t.length;p++){var r=t[p];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return n}();return function(){function n(p,t,r){this._outJobs=new Map;this._inJobs=new Map;this._queue=new m(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=t;this._port=p;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=r}n.connect=function(p){var t=new MessageChannel;p="function"===typeof p?new p:"default"in p&&"function"===typeof p["default"]?new p["default"]:p;p.remoteClient=new n(t.port1,p,t);return t.port2};n.prototype.close=function(){this._post({type:g});this._close()};n.prototype.isBusy=function(){return 0<this._outJobs.size};n.prototype.invoke=function(p,t,r){var y=this;if(!this._port)return d.reject(new b("remote-client:port-closed","Can't invoke(), port is closed"));
var x=h.newJobId(),z=new a(function(){f(y._outJobs,x);y._post({type:c,jobId:x})});this._outJobs.set(x,z);this._post({type:e,jobId:x,methodName:p},t,r);return z.promise};n.prototype.openPort=function(){var p=this,t=h.newJobId(),r=new a(function(){f(p._outJobs,t);p._post({type:c,jobId:t})});this._outJobs.set(t,r);this._post({type:l,jobId:t});return r.promise};n.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(p){p.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};n.prototype._onMessage=function(p){if(p=h.receiveMessage(p))switch(p.type){case k:this._onResponse(p);break;case e:this._queue.push(p);break;case c:this._onCancel(p);break;case g:this._close();break;case l:this._onOpenPort(p)}};n.prototype._onCancel=function(p){var t=this._inJobs,r=p.jobId,y=t.get(r);this._queue.push(p);y&&(f(t,r),y.cancel())};n.prototype._onInvoke=
function(p){var t=this,r=p.methodName,y=p.jobId;p=p.data;var x=this._inJobs,z=this._client,v=z[r];try{if(!v&&r&&-1!==r.indexOf("."))for(var w=r.split("."),u=0;u<w.length-1;u++)z=z[w[u]],v=z[w[u+1]];if("function"!==typeof v)throw new TypeError(r+" is not a function");var A=v.call(z,p,this)}catch(G){this._post({type:k,jobId:y,error:h.toInvokeError(G)});return}d.isThenable(A)?(x.set(y,A),A.then(function(G){x.has(y)&&(f(x,y),t._post({type:k,jobId:y},G))})["catch"](function(G){x.has(y)&&(f(x,y),G&&"cancel"===
G.dojoType||t._post({type:k,jobId:y,error:h.toInvokeError(G||{message:"Error encountered at method "+r})}))})):this._post({type:k,jobId:y},A)};n.prototype._onOpenPort=function(p){var t=new MessageChannel;new n(t.port1,this._client);this._post({type:k,jobId:p.jobId},t.port2,[t.port2])};n.prototype._onResponse=function(p){var t=p.jobId,r=p.error;p=p.data;var y=this._outJobs;if(y.has(t)){var x=y.get(t);f(y,t);r?x.reject(b.fromJSON(JSON.parse(r))):x.resolve(p)}};n.prototype._post=function(p,t,r){return h.postMessage(this._port,
p,t,r)};return n}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(D,q,a){function b(h){return h&&"object"===typeof h&&("result"in h||"transferList"in h)}Object.defineProperty(q,"__esModule",{value:!0});(function(h){h[h.HANDSHAKE=0]="HANDSHAKE";h[h.CONFIGURE=1]="CONFIGURE";h[h.CONFIGURED=2]="CONFIGURED";h[h.OPEN=3]="OPEN";h[h.OPENED=4]="OPENED";h[h.RESPONSE=5]="RESPONSE";h[h.INVOKE=6]="INVOKE";h[h.CANCEL=7]="CANCEL";h[h.CLOSE=8]="CLOSE";
h[h.OPEN_PORT=9]="OPEN_PORT"})(q.MessageType||(q.MessageType={}));var d=0;q.newJobId=function(){return d++};q.isTranferableResult=b;q.toInvokeError=function(h){return h?h.toJSON?JSON.stringify(h):JSON.stringify({name:h.name,message:h.message,details:h.details,stack:h.stack}):null};q.postMessage=function(h,f,g,c){2===arguments.length||void 0===g&&void 0===c?h.postMessage(f):(a("esri-workers-supports-transfer-arraybuffer")||(c?(c=c.filter(function(e){return!(e instanceof ArrayBuffer)}),c.length||(c=
null)):b(g)&&g.transferList&&(g.transferList=g.transferList.filter(function(e){return!(e instanceof ArrayBuffer)}),g.transferList.length||(g.transferList=null))),c?(f.data=g,h.postMessage(f,c)):b(g)?(f.data=g.result,g.transferList?h.postMessage(f,g.transferList):h.postMessage(f)):(f.data=g,h.postMessage(f)))};q.receiveMessage=function(h){return h?(h=h.data)?"string"===typeof h?JSON.parse(h):h:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(D,q,a,b,d,h,f,g,c){var e=h.getLogger("esri.core.workers"),k=g.MessageType.CANCEL,l=g.MessageType.INVOKE,m=g.MessageType.OPEN,n=g.MessageType.OPENED,p=g.MessageType.RESPONSE;return function(){function t(r,y){this._outJobs=new Map;this._inJobs=new Map;this.worker=r;this.id=y;r.addEventListener("message",this._onMessage.bind(this));r.addEventListener("error",function(x){x.preventDefault();e.error(x)})}t.create=function(r){return c.createWorker().then(function(y){return new t(y,r)})};t.prototype.terminate=
function(){this.worker.terminate()};t.prototype.open=function(r){var y=this,x=g.newJobId(),z=new a(function(v){y._outJobs["delete"](x);y._post({type:k,jobId:x})});this._outJobs.set(x,z);this._post({type:m,jobId:x,modulePath:r});return z.promise};t.prototype._onMessage=function(r){if(r=g.receiveMessage(r))switch(r.type){case n:case p:this._onResponse(r);break;case k:this._onCancel(r);break;case l:this._onInvoke(r)}};t.prototype._onCancel=function(r){(r=this._inJobs.get(r.jobId))&&r.cancel()};t.prototype._onInvoke=
function(r){var y=this,x=r.methodName,z=r.jobId;r=r.data;var v=this._inJobs,w=b.workerMessages[x];try{if("function"!==typeof w)throw new TypeError(x+" is not a function");var u=w.call(null,r)}catch(A){this._post({type:p,jobId:z,error:g.toInvokeError(A)});return}f.isThenable(u)?(v.set(z,u),u.then(function(A){v["delete"](z);y._post({type:p,jobId:z},A)})["catch"](function(A){v["delete"](z);A||(A={message:"Error encountered at method"+x});A.dojoType&&"cancel"===A.dojoType||y._post({type:p,jobId:z,error:g.toInvokeError(A)})})):
this._post({type:p,jobId:z},u)};t.prototype._onResponse=function(r){var y=r.jobId,x=r.error;r=r.data;var z=this._outJobs.get(y);z&&(this._outJobs["delete"](y),x?z.reject(d.fromJSON(JSON.parse(x))):z.resolve(r))};t.prototype._post=function(r,y,x){return g.postMessage(this.worker,r,y,x)};return t}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(D,q,a,b){return function(){function d(){}Object.defineProperty(d,"id",{get:function(){return a.id?
b:null},enumerable:!0,configurable:!0});d.workerMessages={};return d}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.findCredential=function(b){return a.findCredential(b)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,q,a,b){D=new D;q.id=b.safeMixin(D,a);return q.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){q=q([p],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(r){d.mixin(this,
r);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(r,y,x){this._nls||(this._nls=t.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,v=x&&x.error,w=x&&x.token,u=new b(function(){z.onCancel()});if(z.open)return r=Error("BUSY"),r.name="identity-manager:busy",r.code="IdentityManager.1",r.log=!!a.isDebug,u.errback(r),u;m.hide(z.errMsg_);v&&403==v.code&&w&&(f.set(z.errMsg_,"innerHTML",this._nls.forbidden),
m.show(z.errMsg_));z.dfd_=u;z.serverInfo_=y;z.resUrl_=r;z.admin_=x&&x.isAdmin;f.set(z.resLink_,{title:r,innerHTML:"("+(this.getResourceName(r)||this._nls.lblItem)+")"});f.set(z.serverLink_,{title:y.server,innerHTML:(-1!==y.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":y.server)+" "});z.txtPwd_.set("value","");z.show();return u},_createLoginDialog:function(){var r=this._nls,y=l.substitute(r,this._dialogContent);y=l.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},y);var x=new e({title:r.title,content:y,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===g.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),v=this.txtPwd_.get("value"),w=this.dfd_,u=this;if(this.form_.validate()&&z&&v){this.btnSubmit_.set("label",r.lblSigning);var A=k.id.findCredential(u.resUrl_,z),G=function(B){u.btnSubmit_.set("label",
r.lblOk);u.btnSubmit_.set("disabled",!1);m.hide(u.errMsg_);u.hide();e._DialogLevelManager.hide(u);var E=u.serverInfo_;u.dfd_=u.serverInfo_=u.generateDfd_=u.resUrl_=null;var F=A;if(B){var H=B.token;var L=l.isDefined(B.expires)?Number(B.expires):null;var Q=!!B.ssl;F?(F.userId=z,F.token=H,F.expires=L,F.validity=B.validity,F.ssl=Q,F.creationTime=(new Date).getTime()):F=new n({userId:z,server:E.server,token:H,expires:L,ssl:Q,isAdmin:u.admin_,validity:B.validity})}w.callback(F)};A&&!A._enqueued?G():(u.btnSubmit_.set("disabled",
!0),u.generateDfd_=k.id.generateToken(this.serverInfo_,{username:z,password:v},{isAdmin:this.admin_}).addCallback(G).addErrback(function(B){u.btnSubmit_.set("disabled",!1);u.generateDfd_=null;u.btnSubmit_.set("label",r.lblOk);f.set(u.errMsg_,"innerHTML",B&&B.code?r.invalidUser:r.noAuthService);m.show(u.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var z=x.dfd_,v=x.resUrl_,w=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;
m.hide(x.errMsg_);e._DialogLevelManager.hide(x);x.esriIdMgr_.onDialogCancel({resourceUrl:v,serverInfo:w});v=Error("ABORTED");v.name="identity-manager:user-aborted";v.code="IdentityManager.2";v.log=!!a.isDebug;z.errback(v)}});y=x.domNode;x.form_=c.byNode(D.query(".esriIdForm",y)[0]);x.txtUser_=c.byNode(D.query(".esriIdUser",y)[0]);x.txtPwd_=c.byNode(D.query(".esriIdPwd",y)[0]);x.btnSubmit_=c.byNode(D.query(".esriIdSubmit",y)[0]);x.btnCancel_=c.byNode(D.query(".esriIdCancel",y)[0]);x.resLink_=D.query(".resLink",
y)[0];x.serverLink_=D.query(".serverLink",y)[0];x.errMsg_=D.query(".esriErrorMsg",y)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}});return k.IdentityManagerDialog=k.IdentityManager=q})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x,z,v,w,u,A,G,B,E,F,H,L,Q){function aa(){}var ca=new d;ca.resolve(!0);w=b("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[A,B,E,G],{templateString:Q,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(V){this._set("draggable",V)},maxRatio:.9,
closable:!0,_setClosableAttr:function(V){this.closeButtonNode.style.display=V?"":"none";this._set("closable",V)},postMixInProperties:function(){var V=k.getLocalization("dijit","common");m.mixin(this,V);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",m.hitch(this,"hide"),!0);a.after(this,"onCancel",m.hitch(this,"hide"),!0);n(this.closeButtonNode,
r.press,function(V){V.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&U.isTop(this)&&(this._getFocusItems(),v.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();v.focus(this._firstFocusItem)},_endDrag:function(){var V=g.position(this.domNode),R=y.getBox(this.ownerDocument);V.y=Math.min(Math.max(V.y,0),R.h-V.h);V.x=Math.min(Math.max(V.x,0),R.w-V.w);this._relativePosition=V;this._position()},_setup:function(){var V=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?z:x)(V,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",m.hitch(this,"_endDrag"),!0)):f.add(V,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":q.map(this["class"].split(/\s/),function(R){return R+"_underlay"}).join(" "),_onKeyDown:m.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!f.contains(this.ownerDocumentBody,"dojoMove")){var V=
this.domNode,R=y.getBox(this.ownerDocument),ha=this._relativePosition,S=g.position(V);c.set(V,{left:Math.floor(R.l+(ha?Math.min(ha.x,R.w-S.w):(R.w-S.w)/2))+"px",top:Math.floor(R.t+(ha?Math.min(ha.y,R.h-S.h):(R.h-S.h)/2))+"px"})}},_onKey:function(V){if(V.keyCode==l.TAB){this._getFocusItems();var R=V.target;this._firstFocusItem==this._lastFocusItem?(V.stopPropagation(),V.preventDefault()):R==this._firstFocusItem&&V.shiftKey?(v.focus(this._lastFocusItem),V.stopPropagation(),V.preventDefault()):R!=this._lastFocusItem||
V.shiftKey||(v.focus(this._firstFocusItem),V.stopPropagation(),V.preventDefault())}else this.closable&&V.keyCode==l.ESCAPE&&(this.onCancel(),V.stopPropagation(),V.preventDefault())},show:function(){if(this.open)return ca.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),U.hide(this));var V=y.get(this.ownerDocument);this._modalconnects.push(n(V,"scroll",m.hitch(this,"resize",null)));this._modalconnects.push(n(this.domNode,
"keydown",m.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new d(m.hitch(this,function(){R.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,aa);V=this._fadeInDeferred.promise;var R=e.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){U.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&U.isTop(this)&&(this._getFocusItems(),
v.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return V},hide:function(){if(!this._alreadyInitialized||!this.open)return ca.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new d(m.hitch(this,function(){R.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,aa);this._fadeOutDeferred.then(m.hitch(this,"onHide"));var V=this._fadeOutDeferred.promise;var R=e.fadeOut({node:this.domNode,duration:this.duration,
onEnd:m.hitch(this,function(){this.domNode.style.display="none";U.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ha;ha=this._modalconnects.pop();)ha.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return V},resize:function(V){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!V){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),q.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(X){X&&c.set(X,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var R=y.getBox(this.ownerDocument);R.w*=this.maxRatio;R.h*=this.maxRatio;var ha=g.position(this.domNode);this._shrunk=!1;ha.w>=R.w&&(V={w:R.w},g.setMarginBox(this.domNode,V),ha=g.position(this.domNode),
this._shrunk=!0);ha.h>=R.h&&(V||(V={w:ha.w}),V.h=R.h,this._shrunk=!0);V&&(V.w||(V.w=ha.w),V.h||(V.h=ha.h))}if(V){g.setMarginBox(this.domNode,V);R=[];this.titleBar&&R.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&R.push({domNode:this.actionBarNode,region:"bottom"});ha={domNode:this.containerNode,region:"center"};R.push(ha);var S=L.marginBox2contentBox(this.domNode,V);L.layoutChildren(this.domNode,S,R);this._singleChild?(R=L.marginBox2contentBox(this.containerNode,ha),this._singleChild.resize({w:R.w,
h:R.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();t("touch")||V||this._position()}},_layoutChildren:function(){q.forEach(this.getChildren(),function(V){V.resize&&V.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var V;V=this._modalconnects.pop();)V.remove();U.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&
(w=b("dijit._DialogBase",w,{_setTitleAttr:function(V){this._set("title",V);this.titleNode.innerHTML=V;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(V){this._created&&this.textDir!=V&&(this._set("textDir",V),this.set("title",this.title))}}));var ea=b("dijit.Dialog",[H,w],{});ea._DialogBase=w;var U=ea._DialogLevelManager={_beginZIndex:950,show:function(V,R){la[la.length-1].focus=v.curNode;var ha=la[la.length-1].dialog?la[la.length-1].zIndex+2:ea._DialogLevelManager._beginZIndex;c.set(V.domNode,
"zIndex",ha);F.show(R,ha-1);la.push({dialog:V,underlayAttrs:R,zIndex:ha})},hide:function(V){if(la[la.length-1].dialog==V){la.pop();var R=la[la.length-1];1==la.length?F.hide():F.show(R.underlayAttrs,R.zIndex-1);if(V.refocus&&(V=R.focus,!R.dialog||V&&h.isDescendant(V,R.dialog.domNode)||(R.dialog._getFocusItems(),V=R.dialog._firstFocusItem),V))try{V.focus()}catch(ha){}}else R=q.indexOf(q.map(la,function(ha){return ha.dialog}),V),-1!=R&&la.splice(R,1)},isTop:function(V){return la[la.length-1].dialog==
V}},la=ea._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];v.watch("curNode",function(V,R,ha){V=la[la.length-1].dialog;if(ha&&V&&!V._fadeOutDeferred&&ha.ownerDocument==V.ownerDocument){do if(ha==V.domNode||f.contains(ha,"dijitPopup"))return;while(ha=ha.parentNode);V.focus()}});t("dijit-legacy-requires")&&p(0,function(){D(["dijit/TooltipDialog"])});return ea})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(D,q){var a=q.prototype.onMove;return D("dojo.dnd.TimedMoveable",
q,{timeout:40,constructor:function(b,d){d||(d={});d.timeout&&"number"==typeof d.timeout&&0<=d.timeout&&(this.timeout=d.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));q.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,d){b._leftTop=d;if(!b._timer){var h=this;b._timer=setTimeout(function(){b._timer=null;a.call(h,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,q,a,b,d,h){return q("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(f){var g=[];D.forEach(f||this.getChildren(),function(c){"value"in c?g.push(c):g=g.concat(this._getDescendantFormWidgets(c.getChildren()))},this);return g},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(f){f.reset&&f.reset()})},validate:function(){var f=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(g){g._hasBeenBlurred=!0;var c=g.disabled||!g.validate||
g.validate();c||f||(h.scrollIntoView(g.containerNode||g.domNode),g.focus(),f=!0);return c}),function(g){return g})},setValues:function(f){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",f)},_setValueAttr:function(f){var g={};D.forEach(this._getDescendantFormWidgets(),function(l){l.name&&(g[l.name]||(g[l.name]=[])).push(l)});for(var c in g)if(g.hasOwnProperty(c)){var e=g[c],k=b.getObject(c,!1,f);void 0!==k&&(k=[].concat(k),
"boolean"==typeof e[0].checked?D.forEach(e,function(l){l.set("value",-1!=D.indexOf(k,l._get("value")))}):e[0].multiple?e[0].set("value",k):D.forEach(e,function(l,m){l.set("value",k[m])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var f={};D.forEach(this._getDescendantFormWidgets(),function(g){var c=g.name;if(c&&!g.disabled){var e=g.get("value");"boolean"==typeof g.checked?
/Radio/.test(g.declaredClass)?!1!==e?b.setObject(c,e,f):(e=b.getObject(c,!1,f),void 0===e&&b.setObject(c,null,f)):(g=b.getObject(c,!1,f),g||(g=[],b.setObject(c,g,f)),!1!==e&&g.push(e)):(g=b.getObject(c,!1,f),"undefined"!=typeof g?b.isArray(g)?g.push(e):b.setObject(c,[g,e],f):b.setObject(c,e,f))}});return f},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var f=D.map(this._descendants,function(g){return g.get("state")||""});return 0<=D.indexOf(f,"Error")?
"Error":0<=D.indexOf(f,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(f){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(g){g._started||g.startup()});f||this._onChildChange()},_onChildChange:function(f){f&&"state"!=f&&"disabled"!=f||this._set("state",this._getState());f&&"value"!=f&&"disabled"!=f&&"checked"!=f||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var f=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(g){g.target!=f.domNode&&f._onChildChange(g.type.replace("attrmodified-",""))}));this.watch("state",function(g,c,e){this.onValidStateChange(""==e)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,q){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=q._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l){var m=D("dijit.DialogUnderlay",[g,c],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(n){b.set(this.node,"id",n+"_underlay");this._set("dialogId",n)},_setClassAttr:function(n){this.node.className="dijitDialogUnderlay "+n;this._set("class",n)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(h(this.domNode,"keydown",q.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var n=this.node.style,p=this.domNode.style;p.display="none";var t=f.getBox(this.ownerDocument);p.top=t.t+"px";p.left=t.l+"px";n.width=t.w+"px";n.height=t.h+"px";p.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new e(this.domNode);var n=f.get(this.ownerDocument);this._modalConnects=[k.on("resize",q.hitch(this,"layout")),h(n,"scroll",
q.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});m.show=function(n,p){var t=m._singleton;!t||t._destroyed?t=l._underlay=m._singleton=new m(n):n&&t.set(n);d.set(t.domNode,"zIndex",p);t.open||t.show()};m.hide=function(){var n=
m._singleton;n&&!n._destroyed&&n.hide()};return m})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){return c("dijit.layout.ContentPane",[a,b,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(r,
y,x){var z=new x(r,y);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(r,y){if(!(r&&r.template||!y||"href"in r||"content"in r)){y=k.byId(y);for(var x=y.ownerDocument.createDocumentFragment();y.firstChild;)x.appendChild(y.firstChild);r=q.delegate(r,{content:x})}this.inherited(arguments,[r,y])},postMixInProperties:function(){this.inherited(arguments);var r=p.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,r);this.errorMessage=h.substitute(this.errorMessage,r)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),
function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},setHref:function(r){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",r)},_setHrefAttr:function(r){this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,
"onLoad"));this._set("href",r);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(r){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",r)},_setContentAttr:function(r){this._set("href","");this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._setContent(r||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(r){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var r=this,y={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};q.isObject(this.ioArgs)&&q.mixin(y,this.ioArgs);var x=this._xhrDfd=(this.ioMethod||n.get)(y),z;x.then(function(v){z=v;try{return r._isDownloaded=!0,r._setContent(v,!1)}catch(w){r._onError("Content",
w)}},function(v){x.canceled||r._onError("Download",v);delete r._xhrDfd;return v}).then(function(){r.onDownloadEnd();delete r._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(r){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(r)}catch(y){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(r){}},destroyDescendants:function(r){this.isLoaded&&this._onUnloadHandler();var y=this._contentSetter;g.forEach(this.getChildren(),function(x){x.destroyRecursive?
x.destroyRecursive(r):x.destroy&&x.destroy(r);x._destroyed=!0});y&&(g.forEach(y.parseResults,function(x){x._destroyed||(x.destroyRecursive?x.destroyRecursive(r):x.destroy&&x.destroy(r),x._destroyed=!0)}),delete y.parseResults);r||m.empty(this.containerNode);delete this._singleChild},_setContent:function(r,y){r=this.preprocessContent(r);this.destroyDescendants();var x=this._contentSetter;x&&x instanceof f._ContentSetter||(x=this._contentSetter=new f._ContentSetter({node:this.containerNode,_onError:q.hitch(this,
this._onError),onContentError:q.hitch(this,function(w){w=this.onContentError(w);try{this.containerNode.innerHTML=w}catch(u){}})}));var z=q.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!r.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=x.set(q.isObject(r)&&r.domNode?r.domNode:r,z);var v=this;return t(z&&z.then?z:x.parseDeferred,function(){delete v._contentSetterParams;
y||(v._started&&(v._startChildren(),v._scheduleLayout()),v._onLoadHandler(r))})},preprocessContent:function(r){return r},_onError:function(r,y,x){this.onLoadDeferred.reject(y);r=this["on"+r+"Error"].call(this,y);x||r&&this._setContent(r,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,q,a,b,d,h,f,g,c,e){return q("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var k=this.getParent();this._childOfLayoutWidget=k&&k.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var k=[],l=!1;f("\x3e *",this.containerNode).some(function(m){var n=
g.byNode(m);n&&n.resize?k.push(n):!/script|link|style/i.test(m.nodeName)&&m.offsetHeight&&(l=!0)});this._singleChild=1!=k.length||l?null:k[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(k,l){this._resizeCalled=!0;this._scheduleLayout(k,l)},_scheduleLayout:function(k,l){this._isShown()?this._layout(k,l):(this._needLayout=!0,this._changeSize=k,this._resultSize=l)},_layout:function(k,l){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
k&&b.setMarginBox(this.domNode,k);var m=this.containerNode;if(m===this.domNode){var n=l||{};h.mixin(n,k||{});"h"in n&&"w"in n||(n=h.mixin(b.getMarginBox(m),n));this._contentBox=e.marginBox2contentBox(m,n)}else this._contentBox=b.getContentBox(m);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var k=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:k.w,h:k.h})}else{k=this.getChildren();for(var l,
m=0;l=k[m++];)l.resize&&l.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var k=this.domNode,l=this.domNode.parentNode;return"none"!=k.style.display&&"hidden"!=k.style.visibility&&!a.contains(k,"dijitHidden")&&l&&l.style&&"none"!=l.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,q,a,b,d){function h(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function f(c,e){var k=c.resize?c.resize(e):a.setMarginBox(c.domNode,e);k?d.mixin(c,k):(d.mixin(c,a.getMarginBox(c.domNode)),d.mixin(c,e))}var g={marginBox2contentBox:function(c,e){var k=b.getComputedStyle(c),l=a.getMarginExtents(c,k),m=a.getPadBorderExtents(c,k);return{l:b.toPixelValue(c,k.paddingLeft),t:b.toPixelValue(c,k.paddingTop),w:e.w-
(l.w+m.w),h:e.h-(l.h+m.h)}},layoutChildren:function(c,e,k,l,m){e=d.mixin({},e);q.add(c,"dijitLayoutContainer");k=D.filter(k,function(n){return"center"!=n.region&&"client"!=n.layoutAlign}).concat(D.filter(k,function(n){return"center"==n.region||"client"==n.layoutAlign}));D.forEach(k,function(n){var p=n.domNode,t=n.region||n.layoutAlign;if(!t)throw Error("No region setting for "+n.id);var r=p.style;r.left=e.l+"px";r.top=e.t+"px";r.position="absolute";q.add(p,"dijitAlign"+h(t));p={};l&&l==n.id&&(p["top"==
n.region||"bottom"==n.region?"h":"w"]=m);"leading"==t&&(t=n.isLeftToRight()?"left":"right");"trailing"==t&&(t=n.isLeftToRight()?"right":"left");"top"==t||"bottom"==t?(p.w=e.w,f(n,p),e.h-=n.h,"top"==t?e.t+=n.h:r.top=e.t+e.h+"px"):"left"==t||"right"==t?(p.h=e.h,f(n,p),e.w-=n.w,"left"==t?e.l+=n.w:r.left=e.l+e.w+"px"):"client"!=t&&"center"!=t||f(n,e)})}};d.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,q,a,b,d,h,f){var g=0,c={_secureForInnerHtml:function(e){return e.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(e,k){h.empty(e);if(k)if("number"==typeof k&&(k=k.toString()),"string"==typeof k&&(k=h.toDom(k,e.ownerDocument)),!k.nodeType&&q.isArrayLike(k))for(var l=k.length,m=0;m<k.length;m=l==k.length?m+1:0)h.place(k[m],e,"last");else h.place(k,e,"last");return e},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(e,k){q.mixin(this,e||{});k=this.node=d.byId(this.node||k);this.id||(this.id=["Setter",k?k.id||k.tagName:"",g++].join("_"))},set:function(e,k){void 0!==e&&(this.content=e);"number"==typeof e&&(e=e.toString());k&&this._mixin(k);this.onBegin();this.setContent();var l=this.onEnd();return l&&l.then?l:this.node},setContent:function(){var e=this.node;if(!e)throw Error(this.declaredClass+
": setContent given no node");try{e=c._setNodeContent(e,this.content)}catch(l){var k=this.onContentError(l);try{e.innerHTML=k}catch(m){}}this.node=e},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(e){e.destroy&&e.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var e=this.content;if(q.isString(e)&&(this.cleanContent&&
(e=c._secureForInnerHtml(e)),this.extractContent)){var k=e.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);k&&(e=k[1])}this.empty();this.content=e;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(e){return"Error occurred setting content: "+e},onExecError:function(e){return"Error occurred executing scripts: "+e},_mixin:function(e){var k=
{},l;for(l in e)l in k||(this[l]=e[l])},_parse:function(){var e=this.node;try{var k={};a.forEach(["dir","lang","textDir"],function(m){this[m]&&(k[m]=this[m])},this);var l=this;this.parseDeferred=f.parse({rootNode:e,noStart:!this.startup,inherited:k,scope:this.parserScope}).then(function(m){return l.parseResults=m},function(m){l._onError("Content",m,"Error parsing in _ContentSetter#"+l.id)})}catch(m){this._onError("Content",m,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(e,k,l){e=
this["on"+e+"Error"].call(this,k);l||e&&c._setNodeContent(this.node,e,!0)}}),set:function(e,k,l){void 0==k&&(k="");"number"==typeof k&&(k=k.toString());return l?(new c._ContentSetter(q.mixin(l,{content:k,node:e}))).set():c._setNodeContent(e,k,!0)}};q.setObject("dojo.html",c);return c})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t){function r(w){return eval("("+w+")")}function y(w){var u=w._nameCaseMap,A=w.prototype;if(!u||u._extendCnt<z){u=w._nameCaseMap={};for(var G in A)"_"!==G.charAt(0)&&(u[G.toLowerCase()]=G);u._extendCnt=z}return u}function x(w,u){u||(u=D);var A=u._dojoParserCtorMap||(u._dojoParserCtorMap={}),G=w.join();if(!A[G]){for(var B=[],E=0,F=w.length;E<F;E++){var H=w[E];B[B.length]=A[H]=A[H]||a.getObject(H)||~H.indexOf("/")&&u(H)}E=B.shift();A[G]=B.length?E.createSubclass?
E.createSubclass(B):E.extend.apply(E,B):E}return A[G]}new Date("X");var z=0;c.after(a,"extend",function(){z++},!0);var v={_clearCache:function(){z++;_ctorMap={}},_functionFromScript:function(w,u){var A="",G="",B=w.getAttribute(u+"args")||w.getAttribute("args"),E=w.getAttribute("with");B=(B||"").split(/\s*,\s*/);E&&E.length&&b.forEach(E.split(/\s*,\s*/),function(F){A+="with("+F+"){";G+="}"});return new Function(B,A+w.innerHTML+G)},instantiate:function(w,u,A){u=u||{};A=A||{};var G=(A.scope||q._scopeName)+
"Type",B="data-"+(A.scope||q._scopeName)+"-",E=B+"type",F=B+"mixins",H=[];b.forEach(w,function(L){var Q=G in u?u[G]:L.getAttribute(E)||L.getAttribute(G);if(Q){var aa=L.getAttribute(F);Q=aa?[Q].concat(aa.split(/\s*,\s*/)):[Q];H.push({node:L,types:Q})}});return this._instantiate(H,u,A)},_instantiate:function(w,u,A,G){function B(E){u._started||A.noStart||b.forEach(E,function(F){"function"!==typeof F.startup||F._started||F.startup()});return E}w=b.map(w,function(E){var F=E.ctor||x(E.types,A.contextRequire);
if(!F)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(F,E.node,u,A,E.scripts,E.inherited)},this);return G?e(w).then(B):B(w)},construct:function(w,u,A,G,B,E){function F(ta){la&&a.setObject(la,ta);for(ea=0;ea<S.length;ea++)c[S[ea].advice||"after"](ta,S[ea].method,a.hitch(ta,S[ea].func),!0);for(ea=0;ea<X.length;ea++)X[ea].call(ta);for(ea=0;ea<ka.length;ea++)ta.watch(ka[ea].prop,ka[ea].func);for(ea=0;ea<oa.length;ea++)p(ta,oa[ea].event,oa[ea].func);return ta}
var H=w&&w.prototype;G=G||{};var L={};G.defaults&&a.mixin(L,G.defaults);E&&a.mixin(L,E);if(m("dom-attributes-explicit"))var Q=u.attributes;else m("dom-attributes-specified-flag")?Q=b.filter(u.attributes,function(ta){return ta.specified}):(E=(/^input$|^img$/i.test(u.nodeName)?u:u.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),Q=b.map(E.split(/\s+/),function(ta){var xa=ta.toLowerCase();return{name:ta,value:"LI"==u.nodeName&&
"value"==ta||"enctype"==xa?u.getAttribute(xa):u.getAttributeNode(xa).value}}));var aa=G.scope||q._scopeName;E="data-"+aa+"-";var ca={};"dojo"!==aa&&(ca[E+"props"]="data-dojo-props",ca[E+"type"]="data-dojo-type",ca[E+"mixins"]="data-dojo-mixins",ca[aa+"type"]="dojotype",ca[E+"id"]="data-dojo-id");var ea=0,U;aa=[];for(var la,V;U=Q[ea++];){var R=U.name,ha=R.toLowerCase();U=U.value;switch(ca[ha]||ha){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":V=U;break;
case "data-dojo-id":case "jsid":la=U;break;case "data-dojo-attach-point":case "dojoattachpoint":L.dojoAttachPoint=U;break;case "data-dojo-attach-event":case "dojoattachevent":L.dojoAttachEvent=U;break;case "class":L["class"]=u.className;break;case "style":L.style=u.style&&u.style.cssText;break;default:if(R in H||(R=y(w)[ha]||R),R in H)switch(typeof H[R]){case "string":L[R]=U;break;case "number":L[R]=U.length?Number(U):NaN;break;case "boolean":L[R]="false"!=U.toLowerCase();break;case "function":""===
U||-1!=U.search(/[^\w\.]+/i)?L[R]=new Function(U):L[R]=a.getObject(U,!1)||new Function(U);aa.push(R);break;default:ha=H[R],L[R]=ha&&"length"in ha?U?U.split(/\s*,\s*/):[]:ha instanceof Date?""==U?new Date(""):"now"==U?new Date:k.fromISOString(U):ha instanceof g?q.baseUrl+U:r(U)}else L[R]=U}}for(Q=0;Q<aa.length;Q++)ca=aa[Q].toLowerCase(),u.removeAttribute(ca),u[ca]=null;if(V)try{V=r.call(G.propsThis,"{"+V+"}"),a.mixin(L,V)}catch(ta){throw Error(ta.toString()+" in data-dojo-props\x3d'"+V+"'");}a.mixin(L,
A);B||(B=w&&(w._noScript||H._noScript)?[]:n("\x3e script[type^\x3d'dojo/']",u));var S=[],X=[],ka=[],oa=[];if(B)for(ea=0;ea<B.length;ea++)ca=B[ea],u.removeChild(ca),A=ca.getAttribute(E+"event")||ca.getAttribute("event"),G=ca.getAttribute(E+"prop"),V=ca.getAttribute(E+"method"),aa=ca.getAttribute(E+"advice"),Q=ca.getAttribute("type"),ca=this._functionFromScript(ca,E),A?"dojo/connect"==Q?S.push({method:A,func:ca}):"dojo/on"==Q?oa.push({event:A,func:ca}):L[A]=ca:"dojo/aspect"==Q?S.push({method:V,advice:aa,
func:ca}):"dojo/watch"==Q?ka.push({prop:G,func:ca}):X.push(ca);w=(B=w.markupFactory||H.markupFactory)?B(L,u,w):new w(L,u);return w.then?w.then(F):F(w)},scan:function(w,u){function A(S){if(!S.inherited){S.inherited={};var X=S.node,ka=A(S.parent);X={dir:X.getAttribute("dir")||ka.dir,lang:X.getAttribute("lang")||ka.lang,textDir:X.getAttribute(Q)||ka.textDir};for(var oa in X)X[oa]&&(S.inherited[oa]=X[oa])}return S.inherited}var G=[],B=[],E={},F=(u.scope||q._scopeName)+"Type",H="data-"+(u.scope||q._scopeName)+
"-",L=H+"type",Q=H+"textdir";H+="mixins";var aa=w.firstChild,ca=u.inherited;if(!ca){ca=function oa(X,ka){return X.getAttribute&&X.getAttribute(ka)||X.parentNode&&oa(X.parentNode,ka)};ca={dir:ca(w,"dir"),lang:ca(w,"lang"),textDir:ca(w,Q)};for(var ea in ca)ca[ea]||delete ca[ea]}ca={inherited:ca};for(var U,la;;)if(aa)if(1!=aa.nodeType)aa=aa.nextSibling;else if(U&&"script"==aa.nodeName.toLowerCase())(V=aa.getAttribute("type"))&&/^dojo\/\w/i.test(V)&&U.push(aa),aa=aa.nextSibling;else if(la)aa=aa.nextSibling;
else{var V=aa.getAttribute(L)||aa.getAttribute(F);ea=aa.firstChild;if(V||ea&&(3!=ea.nodeType||ea.nextSibling)){la=null;if(V){var R=aa.getAttribute(H);U=R?[V].concat(R.split(/\s*,\s*/)):[V];try{la=x(U,u.contextRequire)}catch(S){}la||b.forEach(U,function(S){~S.indexOf("/")&&!E[S]&&(E[S]=!0,B[B.length]=S)});R=la&&!la.prototype._noScript?[]:null;ca={types:U,ctor:la,parent:ca,node:aa,scripts:R};ca.inherited=A(ca);G.push(ca)}else ca={node:aa,scripts:U,parent:ca};U=R;la=aa.stopParser||la&&la.prototype.stopParser&&
!u.template;aa=ea}else aa=aa.nextSibling}else{if(!ca||!ca.node)break;aa=ca.node.nextSibling;la=!1;ca=ca.parent;U=ca.scripts}var ha=new l;B.length?(u.contextRequire||D)(B,function(){ha.resolve(b.filter(G,function(S){if(!S.ctor)try{S.ctor=x(S.types,u.contextRequire)}catch(oa){}for(var X=S.parent;X&&!X.types;)X=X.parent;var ka=S.ctor&&S.ctor.prototype;S.instantiateChildren=!(ka&&ka.stopParser&&!u.template);S.instantiate=!X||X.instantiate&&X.instantiateChildren;return S.instantiate}))}):ha.resolve(G);
return ha.promise},_require:function(w,u){var A=r("{"+w.innerHTML+"}"),G=[],B=[],E=new l,F=u&&u.contextRequire||D,H;for(H in A)G.push(H),B.push(A[H]);F(B,function(){for(var L=0;L<G.length;L++)a.setObject(G[L],arguments[L]);E.resolve(arguments)});return E.promise},_scanAmd:function(w,u){var A=new l,G=A.promise;A.resolve(!0);var B=this;n("script[type\x3d'dojo/require']",w).forEach(function(E){G=G.then(function(){return B._require(E,u)});E.parentNode.removeChild(E)});return G},parse:function(w,u){!w||
"string"==typeof w||"nodeType"in w||(u=w,w=u.rootNode);var A=w?h.byId(w):f.body();u=u||{};var G=u.template?{template:!0}:{},B=[],E=this,F=this._scanAmd(A,u).then(function(){return E.scan(A,u)}).then(function(H){return E._instantiate(H,G,u,!0)}).then(function(H){return B=B.concat(H)}).otherwise(function(H){throw H;});a.mixin(B,F);return B}};q.parser=v;d.parseOnLoad&&t(100,v,"parse");return v})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],
function(D,q,a,b){D=D(b.Credential,{});return a.Credential=D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x){var z={},v=function(B){var E=(new h(B.owningSystemUrl)).host;B=(new h(B.server)).host;
var F=/.+\.arcgis\.com$/i;return F.test(E)&&F.test(B)},w=function(B,E){return!!(v(B)&&E&&b.some(E,function(F){return F.test(B.server)}))},u=null,A=null;try{u=window.localStorage,A=window.sessionStorage}catch(B){}f=D(r,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();c(window,"pageshow",a.hitch(this,
this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:n.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,
customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",
tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(B){var E=this.serverInfos;E?(B=b.filter(B,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=E.concat(B)):
this.serverInfos=B;b.forEach(B,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var H=k.defaults.io.corsEnabledServers,L=this._getOrigin(F.tokenServiceUrl);n.canUseXhr(F.server)||H.push(F.server.replace(/^https?:\/\//i,""));n.canUseXhr(L)||H.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(B){var E=this.oAuthInfos;E?(b.forEach(B,function(F){(F=this.findOAuthInfo(F.portalUrl))&&E.splice(E.indexOf(F),1)},this),
this.oAuthInfos=E.concat(B)):this.oAuthInfos=B},registerToken:function(B){B=l.mixin({},B);var E=this._sanitizeUrl(B.server),F=this.findServerInfo(E),H=!0,L;F||(F=new m,F.server=this._getServerInstanceRoot(E),F.tokenServiceUrl=this._getTokenSvcUrl(E),F.hasPortal=!0,this.registerServers([F]));(L=this.findCredential(E,B.userId))?(delete B.server,a.mixin(L,B),H=!1):(L=new G({userId:B.userId,server:F.server,token:B.token,expires:B.expires,ssl:B.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),L.resources=
[E],this.credentials.push(L));L.onTokenChange(!1);H||L.refreshServerTokens()},toJson:function(){return l.fixJson({serverInfos:b.map(this.serverInfos,function(B){return B.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(B){return B.toJson()}),credentials:b.map(this.credentials,function(B){return B.toJson()})})},initialize:function(B){if(B){a.isString(B)&&(B=JSON.parse(B));var E=B.serverInfos,F=B.oAuthInfos;B=B.credentials;if(E){var H=[];b.forEach(E,function(Q){Q.server&&Q.tokenServiceUrl&&H.push(Q.declaredClass?
Q:new m(Q))});H.length&&this.registerServers(H)}if(F){var L=[];b.forEach(F,function(Q){Q.appId&&L.push(Q.declaredClass?Q:new x(Q))});L.length&&this.registerOAuthInfos(L)}B&&b.forEach(B,function(Q){Q.userId&&Q.server&&Q.token&&Q.expires&&Q.expires>(new Date).getTime()&&(Q=Q.declaredClass?Q:new G(Q),Q.onTokenChange(),this.credentials.push(Q))},this)}},findServerInfo:function(B){var E;B=this._sanitizeUrl(B);b.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,B)&&(E=F);return!!E},
this);return E},findOAuthInfo:function(B){var E;B=this._sanitizeUrl(B);b.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,B)&&(E=F);return!!E},this);return E},findCredential:function(B,E){var F;B=this._sanitizeUrl(B);var H=this._isServerRsrc(B)?"server":"portal";E?b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,B)&&E===L.userId&&L.scope===H&&(F=L);return!!F},this):b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,B)&&-1!==this._getIdenticalSvcIdx(B,
L)&&L.scope===H&&(F=L);return!!F},this);return F},getCredential:function(B,E){var F=!0;if(l.isDefined(E))if(a.isObject(E)){var H=!!E.token;var L=E.error;F=!1!==E.prompt}else H=E;B=this._sanitizeUrl(B);var Q=new d(p._dfdCanceller),aa=this._isAdminResource(B);if((H=H?this.findCredential(B):null)&&L&&498===L.code)H.destroy();else if(H)return F=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+B),F.name="identity-manager:not-authorized",F.code="IdentityManagerBase.1",
F.httpCode=L&&L.httpCode,F.messageCode=L?L.messageCode:null,F.subcode=L?L.subcode:null,F.details=L?L.details:null,F.log=!!q.isDebug,Q.errback(F),Q;if(L=this._findCredential(B,E))return Q.callback(L),Q;var ca=this.findServerInfo(B);if(ca)!ca.hasServer&&this._isServerRsrc(B)&&(ca._restInfoDfd=this._getTokenSvcUrl(B,!0),ca.hasServer=!0);else{L=this._getTokenSvcUrl(B);if(!L)return F=Error("Unknown resource - could not find token service endpoint."),F.name="identity-manager:unknown-resource",F.code="IdentityManagerBase.2",
F.log=!!q.isDebug,Q.errback(F),Q;ca=new m;ca.server=this._getServerInstanceRoot(B);a.isString(L)?(ca.tokenServiceUrl=L,ca.hasPortal=!0):(ca._restInfoDfd=L,ca.hasServer=!0);this.registerServers([ca])}ca.hasPortal&&void 0===ca._selfReq&&(F||n.hasSameOrigin(ca.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(ea){return ea.tokenServiceUrl===ca.tokenServiceUrl}))&&(ca._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(ca.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),B)});return this._enqueue(B,ca,E,Q,aa)},getResourceName:function(B){return this._isRESTService(B)?B.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(B)&&B.replace(this._gwUser,"$1")||this._gwItem.test(B)&&B.replace(this._gwItem,"$1")||this._gwGroup.test(B)&&B.replace(this._gwGroup,"$1")||""},generateToken:function(B,E,F){var H=this._rePortalTokenSvc.test(B.tokenServiceUrl),L=new h(window.location.href.toLowerCase()),Q=!E;var aa=B.shortLivedTokenValidity;
if(E){var ca=e.id.tokenValidity||aa||e.id.defaultTokenValidity;ca>aa&&(ca=aa)}if(F){var ea=F.isAdmin;var U=F.serverUrl;var la=F.token;var V=F.ssl;B.customParameters=F.customParameters}if(ea)aa=B.adminTokenServiceUrl;else{aa=B.tokenServiceUrl;var R=new h(aa.toLowerCase());B.webTierAuth&&F&&F.serverUrl&&!V&&"http"===L.scheme&&(n.hasSameOrigin(L.uri,aa,!0)||"https"===R.scheme&&L.host===R.host&&"7080"===L.port&&"7443"===R.port)&&(aa=aa.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));Q&&H&&(aa=
aa.replace(/\/rest/i,""))}ea=a.mixin({url:aa,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:U,token:la,expiration:ca,referer:ea||H?window.location.host:null,client:ea?"referer":null,f:"json"},B.customParameters),handleAs:"json",callbackParamName:Q?"callback":void 0},F&&F.ioArgs);F={usePost:!Q,disableIdentityLookup:!0,useProxy:this._useProxy(B,F)};H||(ea.withCredentials=!1);H=t(ea,F);H.addCallback(function(ha){if(!ha||!ha.token)return ha=Error("Unable to generate token"),
ha.name="identity-manager:authentication-failed",ha.code="IdentityManagerBase.3",ha.log=!!q.isDebug,ha;var S=B.server;z[S]||(z[S]={});E&&(z[S][E.username]=E.password);ha.validity=ca;return ha});H.addErrback(function(ha){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(B){var E=new d;this.checkAppAccess(B,"").then(function(F){E.resolve(F.credential)})["catch"](function(F){E.reject(F)});return E},checkAppAccess:function(B,E,F){var H=this,L=!1;return this.getCredential(B,
{prompt:!1}).then(function(Q){var aa={f:"json"};if("portal"===Q.scope)if(E&&(H._doPortalSignIn(B)||F&&F.force)){var ca=Q.server+"/sharing/rest/oauth2/validateAppAccess";aa.client_id=E}else if(Q.token)ca=Q.server+"/sharing/rest";else return{credential:Q};else if(Q.token)ca=Q.server+"/rest/services";else return{credential:Q};Q.token&&(aa.token=Q.token);return t({url:ca,content:aa,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(ea){if(!1===ea.valid){var U=Error("You are currently signed in as: '"+
Q.userId+"'.  You do not have access to this app: '"+E+"'.");U.name="identity-manager:not-authorized";U.code="IdentityManagerBase.1";U.log=!!q.isDebug;U.details=ea;throw U;}L=!!ea.viewOnlyUserTypeApp;return{credential:Q}})["catch"](function(ea){if("IdentityManagerBase.1"===ea.code||400===ea.code)throw 400===ea.code&&(ea.name="identity-manager:invalid-request"),ea;if(498===ea.code)throw Q.destroy(),ea=Error("User is not signed in."),ea.name="identity-manager:not-authenticated",ea.code="IdentityManagerBase.6",
ea.log=!!q.isDebug,ea;return{credential:Q}})}).then(function(Q){return{credential:Q.credential,viewOnly:L}})},setProtocolErrorHandler:function(B){this._protocolFunc=B},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var B=this.credentials.slice();b.forEach(B,function(E){E.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(B){B||(B="https://www.arcgis.com/sharing/rest");
this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=c(window,"message",function(E){(E.origin===window.location.origin||l.endsWith(E.origin,".arcgis.com"))&&E.data&&"arcgis:auth:requestCredential"===E.data.type&&this.getCredential(B).then(function(F){E.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},E.origin)})["catch"](function(F){E.source.postMessage({type:"arcgis:auth:error",
error:{name:F.name,message:F.message}},E.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var B=window.location.hash;if(B){"#"===B.charAt(0)&&(B=B.substring(1));B=g.queryToObject(B);var E=!1;if(B.access_token&&B.expires_in&&B.state&&B.hasOwnProperty("username"))try{B.state=JSON.parse(B.state),B.state.portalUrl&&(this._oAuthLocationParams=B,E=!0)}catch(H){}else if(B.error&&
B.error_description&&"access_denied"===B.error&&(E=!0,B.state))try{B.state=JSON.parse(B.state)}catch(H){}E&&(window.location.hash=B.state&&B.state.hash||"")}if(B=window.location.search){"?"===B.charAt(0)&&(B=B.substring(1));B=g.queryToObject(B);E=!1;if(B.code&&B.state)try{B.state=JSON.parse(B.state),B.state.portalUrl&&B.state.uid&&(this._oAuthLocationParams=B,E=!0)}catch(H){}else if(B.error&&B.error_description&&"access_denied"===B.error&&(E=!0,B.state))try{B.state=JSON.parse(B.state)}catch(H){}if(E){var F=
l.mixin({},B);"code error error_description message_code persist state".split(" ").forEach(function(H){delete F[H]});E=g.objectToQuery(F);window.history.replaceState(window.history.state,"",window.location.pathname+(E?"?"+E:"")+(B.state&&B.state.hash||""))}}},_getOAuthToken:function(B,E,F,H,L){B=B.replace(/^http:/i,"https:");return t({url:B+"/sharing/rest/oauth2/token",content:H&&L?{grant_type:"authorization_code",code:E,redirect_uri:H,client_id:F,code_verifier:L}:{grant_type:"refresh_token",refresh_token:E,
client_id:F}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(B){B.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(B=Error("ABORTED"),B.name="identity-manager:user-aborted",B.code="IdentityManager.2",B.log=!!q.isDebug,this._errbackFunc(B))},_findCredential:function(B,E){var F=-1,H,L,Q=E&&E.token;var aa=E&&E.resource;var ca=this._isServerRsrc(B)?"server":"portal",ea=b.filter(this.credentials,function(R){return this._hasSameServerInstance(R.server,B)&&R.scope===ca},this);
B=aa||B;if(ea.length)if(1===ea.length){aa=ea[0];var U=(H=(L=this.findServerInfo(aa.server))&&L.owningSystemUrl)&&this.findCredential(H,aa.userId);F=this._getIdenticalSvcIdx(B,aa);if(Q)-1!==F&&(aa.resources.splice(F,1),this._removeResource(B,U));else return-1===F&&aa.resources.push(B),this._addResource(B,U),aa}else{var la,V;b.some(ea,function(R){V=this._getIdenticalSvcIdx(B,R);return-1!==V?(la=R,U=(H=(L=this.findServerInfo(la.server))&&L.owningSystemUrl)&&this.findCredential(H,la.userId),F=V,!0):!1},
this);if(Q)la&&(la.resources.splice(F,1),this._removeResource(B,U));else if(la)return this._addResource(B,U),la}},_findOAuthInfo:function(B){var E=this.findOAuthInfo(B);E||b.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,B)&&(E=F);return!!E},this);return E},_addResource:function(B,E){E&&-1===this._getIdenticalSvcIdx(B,E)&&E.resources.push(B)},_removeResource:function(B,E){var F=-1;E&&(F=this._getIdenticalSvcIdx(B,E),-1<F&&E.resources.splice(F,1))},_useProxy:function(B,E){return E&&
E.isAdmin&&!n.hasSameOrigin(B.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(B.tokenServiceUrl)&&10.1==B.currentVersion&&!n.hasSameOrigin(B.tokenServiceUrl,window.location.href)},_getOrigin:function(B){B=new h(B);return B.scheme+"://"+B.host+(l.isDefined(B.port)?":"+B.port:"")},_getServerInstanceRoot:function(B){var E=B.toLowerCase(),F=E.indexOf(this._agsRest);-1===F&&this._isAdminResource(B)&&(F=this._agsAdmin.test(B)?B.replace(this._agsAdmin,"$1").length:B.search(this._adminSvcs));
-1===F&&(F=E.indexOf("/sharing"));-1===F&&"/"===E.substr(-1)&&(F=E.length-1);return-1<F?B.substring(0,F):B},_hasSameServerInstance:function(B,E){"/"===B.substr(-1)&&(B=B.slice(0,-1));B=B.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();B=this._normalizeAGOLorgDomain(B);E=this._normalizeAGOLorgDomain(E);B=B.substr(B.indexOf(":"));E=E.substr(E.indexOf(":"));return B===E},_normalizeAGOLorgDomain:function(B){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(B)?B=B.replace(E,"https://www.arcgis.com"):F.test(B)?B=B.replace(F,"https://devext.arcgis.com"):H.test(B)&&(B=B.replace(H,"https://qaext.arcgis.com"));return B},_sanitizeUrl:function(B){var E=(k.defaults.io.proxyUrl||"").toLowerCase(),F=E?B.toLowerCase().indexOf(E+"?"):-1;-1!==F&&(B=B.substring(F+E.length+1));B=n.normalize(B);return n.urlToObject(B).path},_isRESTService:function(B){return-1<B.indexOf(this._agsRest)},_isAdminResource:function(B){return this._agsAdmin.test(B)||
this._adminSvcs.test(B)},_isServerRsrc:function(B){return this._isRESTService(B)||this._isAdminResource(B)},_isIdenticalService:function(B,E){if(this._isRESTService(B)&&this._isRESTService(E)){var F=this._getSuffix(B).toLowerCase(),H=this._getSuffix(E).toLowerCase();var L=F===H;L||(L=/(.*)\/(MapServer|FeatureServer).*/ig,L=F.replace(L,"$1")===H.replace(L,"$1"))}else this._isAdminResource(B)&&this._isAdminResource(E)?L=!0:this._isServerRsrc(B)||this._isServerRsrc(E)||!this._isPortalDomain(B)||(L=!0);
return L},_isPortalDomain:function(B){var E=new h(B.toLowerCase()),F=this._portalConfig;B=b.some(this._gwDomains,function(H){return H.regex.test(E.uri)});!B&&F&&(B=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),E.uri));B||(!this._arcgisUrl&&(F=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new h(F)).authority),this._arcgisUrl&&(B=this._arcgisUrl.toLowerCase()===E.authority));B||(B=b.some(this._portals,function(H){return this._hasSameServerInstance(H,E.uri)},
this));return B=B||this._agsPortal.test(E.path)},_isIdProvider:function(B,E){var F=-1,H=-1;b.forEach(this._gwDomains,function(ca,ea){-1===F&&ca.regex.test(B)&&(F=ea);-1===H&&ca.regex.test(E)&&(H=ea)});var L=!1;if(-1<F&&-1<H)if(0===F||4===F){if(0===H||4===H)L=!0}else if(1===F){if(1===H||2===H)L=!0}else 2===F?2===H&&(L=!0):3===F&&3===H&&(L=!0);if(!L){var Q=this.findServerInfo(E),aa=Q&&Q.owningSystemUrl;aa&&v(Q)&&this._isPortalDomain(aa)&&this._isIdProvider(B,aa)&&(L=!0)}return L},_isPublic:function(B){B=
this._sanitizeUrl(B);return b.some(this._publicUrls,function(E){return E.test(B)})},_getIdenticalSvcIdx:function(B,E){var F=-1;b.some(E.resources,function(H,L){return this._isIdenticalService(B,H)?(F=L,!0):!1},this);return F},_getSuffix:function(B){return B.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(B){if(this._isRESTService(B)||this._isAdminResource(B)){var E=this._getServerInstanceRoot(B);var F=E+"/admin/generateToken";B=E+"/rest/info";E=t({url:B,
content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=F;return E}if(this._isPortalDomain(B)){var H="";b.some(this._gwDomains,function(L){L.regex.test(B)&&(H=L.tokenServiceUrl);return!!H});H||b.some(this._portals,function(L){this._hasSameServerInstance(L,B)&&(H=L+this._gwTokenUrl);return!!H},this);H||(F=B.toLowerCase().indexOf("/sharing"),-1!==F&&(H=B.substring(0,F)+this._gwTokenUrl));H||(H=this._getOrigin(B)+this._gwTokenUrl);H&&(F=(new h(B)).port,/^http:\/\//i.test(B)&&"7080"===
F&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==B.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(B,E,F){return t({url:B+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(B,E){B=B.replace(/^http:/i,"https:");return t({url:B+"/sharing/rest/oauth2/platformSelf",
content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":E,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(B,E){var F="";b.some(this._gwDomains,function(L){L.regex.test(B)&&(F=L.customBaseUrl);return!!F});if(F){var H=new d;H.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0});return H}"https:"===window.location.protocol?B=B.replace(/^http:/i,
"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(B=B.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return t({url:B,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_doPortalSignIn:function(B){var E=this._portalConfig,F=window.location.href,H=this.findServerInfo(B);return(E||this._isPortalDomain(F))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(B))&&(this._isIdProvider(F,B)||
E&&(this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),B)||this._isIdProvider(E.restBaseUrl,B))||n.hasSameOrigin(F,B,!0))?!0:!1},_checkProtocol:function(B,E,F,H){var L=!0;H=H?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||k.defaults.io.useCors&&(n.canUseXhr(H)||n.canUseXhr(n.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:B,serverInfo:E}):!1,L||(B=
Error("Aborted the Sign-In process to avoid sending password over insecure connection."),B.name="identity-manager:aborted",B.code="IdentityManagerBase.4",B.log=!!q.isDebug,F(B)));return L},_enqueue:function(B,E,F,H,L,Q){H||(H=new d(p._dfdCanceller));H.resUrl_=B;H.sinfo_=E;H.options_=F;H.admin_=L;H.refresh_=Q;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(B),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):
this._doSignIn(H);return H},_doSignIn:function(B){this._busy=B;this._rejectOnPersistedPageShow=!1;var E=this,F=function(U){var la=B.options_&&B.options_.resource,V=B.resUrl_,R=B.refresh_,ha=!1;-1===b.indexOf(E.credentials,U)&&(R&&-1!==b.indexOf(E.credentials,R)?(R.userId=U.userId,R.token=U.token,R.expires=U.expires,R.validity=U.validity,R.ssl=U.ssl,R.creationTime=U.creationTime,ha=!0,U=R):E.credentials.push(U));U.resources||(U.resources=[]);-1===U.resources.indexOf(la||V)&&U.resources.push(la||V);
U.scope=E._isServerRsrc(V)?"server":"portal";U.onTokenChange();la=E._soReqs;var S={};E._soReqs=[];b.forEach(la,function(X){if(!this._isIdenticalService(V,X.resUrl_)){var ka=this._getSuffix(X.resUrl_);S[ka]||(S[ka]=!0,U.resources.push(X.resUrl_))}},E);B.callback(U);b.forEach(la,function(X){this._hasSameServerInstance(this._getServerInstanceRoot(V),X.resUrl_)?X.callback(U):this._soReqs.push(X)},E);E._busy=B.resUrl_=B.sinfo_=B.refresh_=null;if(!ha)E.onCredentialCreate({credential:U});E._soReqs.length?
E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},H=function(U){B.errback(U);E._busy=B.resUrl_=B.sinfo_=B.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},L=function(U,la,V,R){var ha=B.sinfo_,S=!B.options_||!1!==B.options_.prompt,X=ha.hasPortal&&E._findOAuthInfo(B.resUrl_);if(U)F(new G({userId:U,server:ha.server,token:V||null,expires:l.isDefined(R)?Number(R):null,ssl:!!la}));else if(window!==window.parent&&
E._appUrlObj.query&&E._appUrlObj.query["arcgis-auth-origin"]&&E._appUrlObj.query["arcgis-auth-portal"]&&E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]),B.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},E._appUrlObj.query["arcgis-auth-origin"]);var ka=c(window,"message",function(fa){if(fa.source===window.parent&&fa.data)if("arcgis:auth:credential"===fa.data.type&&fa.data.credential.expires<Date.now()&&(fa.data.type="arcgis:auth:error",
fa.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===fa.data.type)ka.remove(),F(new G(fa.data.credential));else if("arcgis:auth:error"===fa.data.type){ka.remove();fa=fa.data.error;switch(fa.name){case "identity-manager:busy":case "identity-manager:not-authorized":var ra="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":ra="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":ra=
"IdentityManager.3";"tokenExpiredError"===fa.name&&(fa.name="identity-manager:credential-request-failed",fa.message="Parent application's token has expired.");break;case "identity-manager:aborted":ra="IdentityManager.4";break;case "identity-manager:not-authenticated":ra="IdentityManager.6";break;case "identity-manager:invalid-request":ra=400}var pa=Error(fa.message);pa.name=fa.name;pa.code=ra;pa.log=!!q.isDebug;H(pa)}})}else if(X){var oa=X._oAuthCred;oa||(U=new y(X,u),la=new y(X,A),U.isValid()&&la.isValid()?
U.expires>la.expires?(oa=U,la.destroy()):(oa=la,U.destroy()):oa=U.isValid()?U:la,X._oAuthCred=oa);if(oa.isValid()){var ta=new G({userId:oa.userId,server:ha.server,token:oa.token,expires:oa.expires,ssl:oa.ssl,_oAuthCred:oa});var xa=X.appId!==oa.appId&&E._doPortalSignIn(B.resUrl_);xa||oa.refreshToken?(oa.refreshToken?B._pendingDfd=E._getOAuthToken(ha.server,oa.refreshToken,oa.appId).then(function(fa){ta.expires=Date.now()+1E3*fa.expires_in;ta.token=fa.access_token;return ta}):(U=new d,U.resolve(ta),
B._pendingDfd=U),B._pendingDfd.then(function(fa){return xa?E._exchangeToken(fa.server,X.appId,fa.token).then(function(ra){fa.token=ra;return fa})["catch"](function(){return fa}):fa}).then(function(fa){F(fa)})["catch"](function(){oa.destroy();L()})):F(ta)}else if(E._oAuthLocationParams&&E._hasSameServerInstance(X.portalUrl,E._oAuthLocationParams.state.portalUrl)&&(E._oAuthLocationParams.access_token||E._oAuthLocationParams.code&&E._oAuthLocationParams.state.uid===oa.stateUID&&oa.codeVerifier))U=E._oAuthLocationParams,
E._oAuthLocationParams=null,B._pendingDfd=E._processOAuthResponseParams(U,X,ha).then(function(fa){F(fa)})["catch"](H);else{var O=function(){S?B._pendingDfd=E.oAuthSignIn(B.resUrl_,ha,X,B.options_).addCallbacks(F,H):(Z=Error("User is not signed in."),Z.name="identity-manager:not-authenticated",Z.code="IdentityManagerBase.6",Z.log=!!q.isDebug,H(Z))};E._doPortalSignIn(B.resUrl_)?B._pendingDfd=E._getPlatformSelf(ha.server,X.appId).then(function(fa){var ra=fa.portalUrl;!ra||n.hasSameOrigin(ra,window.location.origin,
!0)?(ta=new G({userId:fa.username,server:ha.server,expires:Date.now()+1E3*fa.expires_in,token:fa.token}),F(ta)):O()})["catch"](O):O()}}else if(S)E._checkProtocol(B.resUrl_,ha,H,B.admin_)&&(U=B.options_,B.admin_&&(U=U||{},U.isAdmin=!0),B._pendingDfd=E.signIn(B.resUrl_,ha,U).addCallbacks(F,H));else{var Z=Error("User is not signed in.");Z.name="identity-manager:not-authenticated";Z.code="IdentityManagerBase.6";Z.log=!!q.isDebug;H(Z)}},Q=function(){var U=B.sinfo_,la=U.owningSystemUrl,V=B.options_,R;if(V){var ha=
V.token;var S=V.error;var X=V.prompt}(R=E._findCredential(la,{token:ha,resource:B.resUrl_}))||b.some(E.credentials,function(ka){this._isIdProvider(la,ka.server)&&(R=ka);return!!R},E);R?(V=E.findCredential(B.resUrl_,R.userId))?F(V):w(U,E._legacyFed)?(V=R.toJson(),V.server=U.server,V.resources=null,F(new G(V))):(B._pendingDfd=E.generateToken(E.findServerInfo(R.server),null,{serverUrl:B.resUrl_,token:R.token,ssl:R.ssl})).addCallbacks(function(ka){F(new G({userId:R.userId,server:U.server,token:ka.token,
expires:l.isDefined(ka.expires)?Number(ka.expires):null,ssl:!!ka.ssl,isAdmin:B.admin_,validity:ka.validity}))},H):(E._busy=null,ha&&(B.options_.token=null),(B._pendingDfd=E.getCredential(la.replace(/\/?$/,"/sharing"),{resource:B.resUrl_,owningTenant:U.owningTenant,token:ha,error:S,prompt:X})).addCallbacks(function(ka){E._enqueue(B.resUrl_,B.sinfo_,B.options_,B,B.admin_)},function(ka){H(ka)}))};this._errbackFunc=H;var aa=B.sinfo_.owningSystemUrl,ca=this._isServerRsrc(B.resUrl_),ea=B.sinfo_._restInfoDfd;
ea?ea.addCallbacks(function(U){var la=B.sinfo_;la._restInfoDfd&&(la.adminTokenServiceUrl=la._restInfoDfd.adminUrl_,la._restInfoDfd=null,la.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,U)||a.getObject("authInfo.tokenServiceUrl",!1,U)||a.getObject("tokenServiceUrl",!1,U),la.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,U),la.currentVersion=U.currentVersion,la.owningTenant=U.owningTenant,(U=la.owningSystemUrl=U.owningSystemUrl)&&E._portals.push(U));ca&&la.owningSystemUrl?
Q():L()},function(){B.sinfo_._restInfoDfd=null;var U=Error("Unknown resource - could not find token service endpoint.");U.name="identity-manager:server-identification-failed";U.code="IdentityManagerBase.2";U.log=!!q.isDebug;H(U)}):ca&&aa?Q():B.sinfo_._selfReq?B.sinfo_._selfReq.selfDfd.then(function(U){var la={};if(U){var V=U.user&&U.user.username;la.username=V;la.allSSL=U.allSSL;var R=U.supportsOAuth;var ha=parseFloat(U.currentVersion);if("multitenant"===U.portalMode)var S=U.customBaseUrl;B.sinfo_.currentVersion=
ha}B.sinfo_.webTierAuth=!!V;return V&&E.normalizeWebTierAuth?E.generateToken(B.sinfo_,null,{ssl:la.allSSL}).addBoth(function(X){la.portalToken=X&&X.token;la.tokenExpiration=X&&X.expires;return la}):!V&&R&&4.4<=ha&&!E._findOAuthInfo(B.resUrl_)?E._generateOAuthInfo({portalUrl:B.sinfo_.server,customBaseUrl:S,owningTenant:B.sinfo_._selfReq.owningTenant}).always(function(){return la}):la}).always(function(U){B.sinfo_._selfReq=null;U?L(U.username,U.allSSL,U.portalToken,U.tokenExpiration):L()}):L()},_generateOAuthInfo:function(B){var E=
this,F=B.portalUrl,H=B.customBaseUrl,L=B.owningTenant;if(B=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var Q=window.location.href;var aa=Q.indexOf("?");-1<aa&&(Q=Q.slice(0,aa));aa=Q.search(/\/(apps|home)\//);Q=-1<aa?Q.slice(0,aa):null}B&&Q?(this._hasTestedIfAppIsOnPortal=!0,B=t({url:Q+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new x({appId:"arcgisonline",popupCallbackUrl:Q+"/home/oauth-callback.html"})})):(B=new d,
B.resolve(),B=B.promise);return B.then(function(){if(E.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),t({url:F+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:L,client_id:E.defaultOAuthInfo.appId,redirect_uri:n.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ca){if(ca.valid){var ea=E.defaultOAuthInfo.clone();ea.portalUrl=ca.urlKey&&H?"https://"+ca.urlKey.toLowerCase()+"."+H:F;ea.popup=window!==window.top||
!(n.hasSameOrigin(F,window.location.origin)||E._gwDomains.some(function(U){return U.regex.test(F)&&U.regex.test(window.location.origin)}));E.oAuthInfos.push(ea)}})})}});var G=D(r,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(B){a.mixin(this,B);this.resources=this.resources||[];l.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var B=this,E=this.resources&&this.resources[0],F=e.id.findServerInfo(this.server),
H=F&&F.owningSystemUrl,L=!!H&&"server"===this.scope,Q=L&&w(F,e.id._legacyFed),aa=L&&e.id.findServerInfo(H),ca,ea=(ca=F.webTierAuth)&&e.id.normalizeWebTierAuth,U=z[this.server];U=U&&U[this.userId];var la={username:this.userId,password:U};if(!ca||ea)if(L&&!aa&&b.some(e.id.serverInfos,function(ha){e.id._isIdProvider(H,ha.server)&&(aa=ha);return!!aa}),ca=aa&&e.id.findCredential(aa.server,this.userId),!L||ca)if(Q)ca.refreshToken();else{if(L)var V={serverUrl:E,token:ca&&ca.token,ssl:ca&&ca.ssl};else if(ea)la=
null,V={ssl:this.ssl};else if(U)this.isAdmin&&(V={isAdmin:!0});else{if(E){E=e.id._sanitizeUrl(E);this._enqueued=1;var R=e.id._enqueue(E,F,null,null,this.isAdmin,this);R.addCallback(function(){B._enqueued=0;B.refreshServerTokens()}).addErrback(function(){B._enqueued=0})}return R}return e.id.generateToken(L?aa:F,L?null:la,V).addCallback(function(ha){B.token=ha.token;B.expires=l.isDefined(ha.expires)?Number(ha.expires):null;B.creationTime=(new Date).getTime();B.validity=ha.validity;B.onTokenChange();
B.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(e.id.credentials,function(B){var E=e.id.findServerInfo(B.server),F=E&&E.owningSystemUrl;B!==this&&B.userId===this.userId&&F&&"server"===B.scope&&(e.id._hasSameServerInstance(this.server,F)||e.id._isIdProvider(F,this.server))&&(w(E,e.id._legacyFed)?(B.token=this.token,B.expires=this.expires,B.creationTime=this.creationTime,B.validity=this.validity,B.onTokenChange()):B.refreshToken())},
this)},onTokenChange:function(B){clearTimeout(this._refreshTimer);var E=this.server&&e.id.findServerInfo(this.server),F=(E=E&&E.owningSystemUrl)&&e.id.findServerInfo(E);!1!==B&&(!E||"portal"===this.scope||F&&F.webTierAuth&&!e.id.normalizeWebTierAuth)&&(l.isDefined(this.expires)||l.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),
this._oAuthCred=null);var B=b.indexOf(e.id.credentials,this);-1<B&&e.id.credentials.splice(B,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var B=l.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(B.resources=E.slice());return B},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);
var B=6E4*this.tokenRefreshBuffer,E=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>E&&(F=E);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),F>B?F-B:F)}});f.Credential=G;return e.IdentityManagerBase=f})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,q,a,b,d){D=D(null,{declaredClass:"esri.ServerInfo",constructor:function(h){q.mixin(this,h)},toJson:function(){return d.fixJson({server:this.server,
tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=D})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(D,q,a){q=q(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,
storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(b,d){this.oAuthInfo=b;this.storage=d;this._init()},isValid:function(){var b=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)b=!0;else{var d=Date.now();this.expires>d&&(this.expires-d)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(b=!0)}return b},save:function(){if(!this.storage)return!1;var b=this._load(),
d=this.oAuthInfo;if(d&&d.authNamespace&&d.portalUrl){var h=b[d.authNamespace];h||(h=b[d.authNamespace]={});this.appId||(this.appId=d.appId);h[d.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(f){return!1}return!0}return!1},destroy:function(){var b=this._load(),d=this.oAuthInfo;if(d&&d.appId&&d.portalUrl&&
(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var h=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",f=new FormData;f.append("f","json");f.append("auth_token",this.refreshToken||this.token);f.append("client_id",d.appId);f.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(h,f);else{var g=new XMLHttpRequest;g.open("POST",h);g.send(f)}}if(d&&d.authNamespace&&
d.portalUrl&&this.storage&&(h=b[d.authNamespace])){delete h[d.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(c){}}d&&(this.oAuthInfo=d._oAuthCred=null)},_init:function(){var b=this._load(),d=this.oAuthInfo;d&&d.authNamespace&&d.portalUrl&&(b=b[d.authNamespace])&&(b=b[d.portalUrl])&&(this.appId=b.appId,this.codeVerifier=b.codeVerifier,this.expires=b.expires,this.refreshToken=b.refreshToken,this.ssl=b.ssl,this.stateUID=b.stateUID,this.token=b.token,this.userId=b.userId)},
_load:function(){var b={};if(this.storage){var d=this.storage.getItem("esriJSAPIOAuth");if(d)try{b=JSON.parse(d)}catch(h){}}return b}});return D.OAuthCredential=q})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(D,q,a,b,d){var h=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(f){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,
popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},f)},_oAuthCred:null,toJson:function(){return q.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,
preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new h(this.toJson())}});b.setObject("arcgis.OAuthInfo",h,D);return h})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(D,q,a,b,d,h,f,g){return D("dijit.form.Form",[d,h,f,g],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(c){q.set(this.domNode,"encType",c);b("ie")&&(this.domNode.encoding=c);this._set("encType",c)},reset:function(c){var e={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:c?c.target:this.domNode,target:c?c.target:this.domNode};!1!==this.onReset(e)&&e.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(c){this.reset(c);c.stopPropagation();c.preventDefault();return!1},_onSubmit:function(c){var e=this.constructor.prototype;if(this.execute!=e.execute||this.onExecute!=e.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(c)&&(c.stopPropagation(),c.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(D,q,a,b,d,h,f,g,c,e,k,l,m){var n=null,p=null;try{n=window.localStorage,p=window.sessionStorage}catch(r){}var t=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(r){this._oAuthRedirectFunc=r},oAuthSignIn:function(r,y,x,z){var v=this._oAuthDfd=new g;v.resUrl_=r;v.sinfo_=y;v.oinfo_=x;var w=x._oAuthCred;if(w.storage&&("authorization-code"===x.flowType||"auto"===x.flowType&&!x.popup&&8.4<=y.currentVersion)){var u=t.getRandomValues(new Uint8Array(32));var A=b.base64UrlEncode(u);w.codeVerifier=A;u=t.getRandomValues(new Uint8Array(32));w.stateUID=b.base64UrlEncode(u);w.save()||(w.codeVerifier=A=null)}else w.codeVerifier=null;var G=
this;this._getCodeChallenge(A).then(function(B){var E=!z||!1!==z.oAuthPopupConfirmation;if(!x.popup||!E)return G._doOAuthSignIn(r,y,x,B),v;v.codeChallenge_=B;G._nls||(G._nls=k.identity);G.oAuthDialog||(G.oAuthDialog=G._createOAuthDialog());B=G.oAuthDialog;E=z&&z.error;var F=z&&z.token;q.hide(B.errMsg_);E&&403==E.code&&F&&(e.set(B.errMsg_,"innerHTML",G._nls.forbidden),q.show(B.errMsg_));e.set(B.serverLink_,{title:y.server,innerHTML:-1!==y.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
y.server});B.show()});return v},setOAuthResponseHash:function(r){r&&("#"===r.charAt(0)&&(r=r.substring(1)),this._processOAuthPopupParams(l.queryToObject(r)))},_createOAuthDialog:function(){var r=this._nls,y=a.substitute(r,this._oAuthDialogContent);y=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},y);var x=new d({title:r.title,content:y,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=x.esriIdMgr_._oAuthDfd;
x.hide_();x.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_,z.codeChallenge_)},cancel_:function(){var z=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var v=Error("ABORTED");v.code="IdentityManager.2";v.log=!!f.isDebug;z.errback(v)},hide_:function(){q.hide(x.errMsg_);x.hide();d._DialogLevelManager.hide(x)}});r=x.domNode;x.btnSubmit_=h.byNode(c.query(".esriIdSubmit",r)[0]);x.btnCancel_=h.byNode(c.query(".esriIdCancel",r)[0]);x.serverLink_=c.query(".serverLink",r)[0];x.errMsg_=c.query(".esriErrorMsg",
r)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(r,y,x,z){var v=this,w=x._oAuthCred,u={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(u.hash=window.location.hash);w.stateUID&&(u.uid=w.stateUID);u={client_id:x.appId,response_type:w.codeVerifier?"code":"token",state:JSON.stringify(u),expiration:x.expiration,locale:x.locale,redirect_uri:this._getRedirectURI(x,
!!w.codeVerifier)};x.forceLogin&&(u.force_login=!0);x.forceUserId&&x.userId&&(u.prepopulatedusername=x.userId);!x.popup&&this._doPortalSignIn(r)&&(u.redirectToUserOrgUrl=!0);w.codeVerifier&&(u.code_challenge=z||w.codeVerifier,u.code_challenge_method=z?"S256":"plain");z=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";w=z+"?"+l.objectToQuery(u);if(x.popup){var A=window.open(w,"esriJSAPIOAuth",x.popupWindowFeatures);A?(A.focus(),this._oAuthDfd.oAuthWin_=A,this._oAuthIntervalId=setInterval(function(){if(A.closed){clearInterval(v._oAuthIntervalId);
v._oAuthOnPopupHandle.remove();var G=v._oAuthDfd;if(G){var B=Error("ABORTED");B.code="IdentityManager.2";B.log=!!f.isDebug;G.errback(B)}}},500),v._oAuthOnPopupHandle=m.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(G){"arcgis:auth:hash"===G.type?v.setOAuthResponseHash(G.detail):v._setOAuthResponseQueryString(G.detail)})):(r=Error("ABORTED"),r.name="identity-manager:user-aborted",r.code="IdentityManager.2",r.log=!!f.isDebug,this._oAuthDfd.errback(r))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:u,authorizeUrl:z,resourceUrl:r,serverInfo:y,oAuthInfo:x}):window.location.href=w},_getCodeChallenge:function(r){if(r&&window.isSecureContext)return r=(new TextEncoder).encode(r),t.subtle.digest("SHA-256",r).then(function(y){return b.base64UrlEncode(new Uint8Array(y))});r=new g;r.resolve(null);return r},_getRedirectURI:function(r,y){var x=window.location.href.replace(/#.*$/,"");if(r.popup)return b.getAbsoluteUrl(r.popupCallbackUrl);
if(y){var z=b.urlToObject(x);if(z.query)return"code error error_description message_code persist state".split(" ").forEach(function(v){delete z.query[v]}),(x=l.objectToQuery(z.query))?z.path+"?"+x:z.path}return x},_processOAuthPopupParams:function(r){var y=this._oAuthDfd;this._oAuthDfd=null;if(y)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),r.error){var x="access_denied"===r.error;r=Error(x?"ABORTED":"OAuth: "+r.error+" - "+r.error_description);
r.name=x?"identity-manager:user-aborted":"identity-manager:authentication-failed";r.code="IdentityManagerBase."+(x?2:3);r.log=!!f.isDebug;y.errback(r)}else this._processOAuthResponseParams(r,y.oinfo_,y.sinfo_).then(function(z){y.resolve(z)})["catch"](function(z){y.reject(z)})},_processOAuthResponseParams:function(r,y,x){var z=y._oAuthCred;if(r.code){var v=z.codeVerifier;z.codeVerifier=null;z.stateUID=null;z.save();return this._getOAuthToken(x.server,r.code,y.appId,this._getRedirectURI(y,!0),v).then(function(u){var A=
new D({userId:u.username,server:x.server,token:u.access_token,expires:Date.now()+1E3*u.expires_in,ssl:u.ssl,oAuthState:r.state,_oAuthCred:z});y.userId=A.userId;z.storage=u.persist?n:p;z.refreshToken=u.refresh_token;z.token=null;z.expires=u.refresh_token_expires_in?Date.now()+1E3*u.refresh_token_expires_in:null;z.userId=A.userId;z.ssl=A.ssl;z.save();return A})}v=new D({userId:r.username,server:x.server,token:r.access_token,expires:Date.now()+1E3*Number(r.expires_in),ssl:"true"===r.ssl,oAuthState:r.state,
_oAuthCred:z});y.userId=v.userId;z.storage=r.persist?n:p;z.refreshToken=null;z.token=v.token;z.expires=v.expires;z.userId=v.userId;z.ssl=v.ssl;z.save();var w=new g;w.resolve(v);return w},_setOAuthResponseQueryString:function(r){r&&("?"===r.charAt(0)&&(r=r.substring(1)),this._processOAuthPopupParams(l.queryToObject(r)))}}})},"esri/core/events":function(){define([],function(){return{on:function(D,q,a){if(!D||"function"!==typeof D.on&&"function"!==typeof D.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in D)return D.on(q,a);if(Array.isArray(q)){for(var b=q.slice(),d=0;d<b.length;d++)D.addEventListener(b[d],a);return{remove:function(){for(var h=0;h<b.length;h++)D.removeEventListener(b[h],a)}}}D.addEventListener(q,a);return{remove:function(){D.removeEventListener(q,a)}}}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m){function n(w){return g.create(function(u){function A(B){if(B=l.receiveMessage(B))switch(B.type){case v:B=w;var E=d.workers.loaderUrl||k.DEFAULT_LOADER_URL;if(null!=d["default"]){var F=a({},d);delete F["default"];F=JSON.parse(JSON.stringify(F))}else F=JSON.parse(JSON.stringify(d));var H=d.workers.loaderConfig;H=k["default"]({baseUrl:H.baseUrl,locale:b.locale,has:a({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":c("esri-secure-context"),
"esri-workers-supports-transfer-arraybuffer":c("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},H.has),map:a({},H.map),paths:a({},H.paths),packages:H.packages||[]});B.postMessage({type:z,configure:{esriConfig:F,loaderUrl:E,loaderConfig:H}});break;case x:w.removeEventListener("message",A),w.removeEventListener("error",G),u(w)}}function G(B){B.preventDefault();w.removeEventListener("message",A);w.removeEventListener("error",G);r.warn("Failed to create Worker. Fallback to execute module in main thread",
B);w=new m;w.addEventListener("message",A);w.addEventListener("error",G)}w.addEventListener("message",A);w.addEventListener("error",G)})}Object.defineProperty(q,"__esModule",{value:!0});var p=e.normalize(D.toUrl("./worker.js")),t=!e.hasSameOrigin(p,location.href),r=f.getLogger("esri.core.workers"),y=null,x=l.MessageType.CONFIGURED,z=l.MessageType.CONFIGURE,v=l.MessageType.HANDSHAKE;q.createWorker=function(){if(!c("esri-workers"))return n(new m);if(!t){var w=void 0;try{w=new Worker(p)}catch(u){r.warn("Failed to create Worker. Fallback to execute module in main thread",
event),w=new m}return n(w)}y||(y=h(p,{responseType:"text"}));return y.then(function(u){return new Worker(URL.createObjectURL(new Blob([u.data],{type:"text/javascript"})))})["catch"](function(u){r.warn("Failed to create Worker. Fallback to execute module in main thread",u);return new m}).then(function(u){return n(u)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(D,q,a,b,d){function h(){var e={available:!1,
version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},k=document.createElement("canvas");if(!k)return e;var l=d.createContext(k,{failIfMajorPerformanceCaveat:!0},"webgl");!l&&(l=d.createContext(k,{},"webgl"))&&(e.majorPerformanceCaveat=!0);if(!l)return e;k=l.getParameter(l.VERSION);if(!k)return e;if(k=k.match(/^WebGL\s+([\d.]*)/))e.version=parseFloat(k[1]),e.available=.94<=e.version,k=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,
l.HIGH_FLOAT),e.supportsHighPrecisionFragment=k&&0<k.precision,e.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS),e.supportsElementIndexUint=null!==l.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==l.getExtension("OES_standard_derivatives");return e}function f(){var e={available:!1,version:0},k=document.createElement("canvas");if(!k)return e;k=d.createContext(k,{},"webgl2");if(!k)return e;e.available=!0;k=k.getParameter(k.VERSION);if(!k)return e;
if(k=k.match(/^WebGL\s+([\d.]*)/))e.version=parseFloat(k[1]);return e}(function(){var e=navigator.userAgent,k=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);e=e.match(/iPhone/i);k&&a.add("esri-mobile",k);e&&a.add("esri-iPhone",e);a.add("esri-phonegap",!!b.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);a.add("esri-geolocation",function(){return!!navigator.geolocation});a.add("esri-canvas-svg-support",function(){return!(a("trident")||
a("ie"))});a.add("esri-secure-context",function(){if("isSecureContext"in b)return b.isSecureContext;if(b.location&&b.location.origin)return 0===b.location.origin.indexOf("https:")});a.add("esri-wasm","WebAssembly"in b);a("host-webworker")||(a.add("esri-workers","Worker"in b),a.add("esri-script-sandbox",function(){return"MessageChannel"in b&&"HTMLIFrameElement"in b&&"sandbox"in HTMLIFrameElement.prototype}),a.add("esri-url-encodes-apostrophe",function(){var l=b.document.createElement("a");l.href="?'";
return-1<l.href.indexOf("?%27")}),g||(g=h()),a.add("esri-webgl",g.available),a.add("esri-webgl-high-precision-fragment",g.supportsHighPrecisionFragment),a.add("esri-webgl-vertex-shader-samplers",g.supportsVertexShaderSamplers),a.add("esri-webgl-element-index-uint",g.supportsElementIndexUint),a.add("esri-webgl-standard-derivatives",g.supportsStandardDerivatives),a.add("esri-webgl-major-performance-caveat",g.majorPerformanceCaveat),a.add("esri-featurelayer-webgl-labeling",!0),c||(c=f()),a.add("esri-webgl2",
c.available))})();var g=null,c=null;return a})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(D,q){function a(f,g,c){void 0===g&&(g={});switch(c){case "webgl":var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":e=["webgl2"];break;default:e=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var k=0;k<e.length;k++){var l=e[k];try{c=f.getContext(l,g)}catch(m){}if(c)break}return c}function b(f,g){var c=f.parentNode;
c&&(c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+g+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(q,"__esModule",{value:!0});q.createContextOrErrorHTML=function(f,g,c){void 0===g&&(g={});if(!window.WebGLRenderingContext)return b(f,d),null;g=a(f,g,c);return g?g:(b(f,h),null)};q.createContext=
a;var d='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',h='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(D,q,a,b,d){Object.defineProperty(q,
"__esModule",{value:!0});q.DEFAULT_LOADER_URL=d.makeAbsolute(d.removeQueryParameters(D.toUrl("./worker-init.js")));q.DEFAULT_CONFIG={baseUrl:function(){var h=d.removeQueryParameters(D.toUrl("dojo/x.js"));return d.makeAbsolute(h.slice(0,h.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",
main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};q["default"]=function(h){var f={async:h.async,isDebug:h.isDebug,locale:h.locale,baseUrl:h.baseUrl,has:a({},h.has),map:a({},h.map),packages:h.packages&&h.packages.concat()||[],paths:a({},h.paths)};h.hasOwnProperty("async")||
(f.async=!0);h.hasOwnProperty("isDebug")||(f.isDebug=!1);h.baseUrl||(f.baseUrl=q.DEFAULT_CONFIG.baseUrl);q.DEFAULT_CONFIG.packages.forEach(function(k){a:{for(var l=f.packages,m=0;m<l.length;m++)if(l[m].name===k.name)break a;k=a({},k);m=d.removeQueryParameters(D.toUrl(k.name+"/x.js"));m=m.slice(0,m.length-5);k.location=d.makeAbsolute(m);l.push(k)}});h=f.map=f.map||{};for(var g=0,c=Object.keys(q.DEFAULT_CONFIG.map);g<c.length;g++){var e=c[g];h[e]||(h[e]=q.DEFAULT_CONFIG.map[e])}return f}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(D,q,a,b,d){var h=function(){return function(){var c=this,e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(k){c[k]=function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];return e[k].apply(e,l)}})}}(),f=b.MutationObserver||b.WebKitMutationObserver,g=function(){if(b.process&&b.process.nextTick)var c=function(l){b.process.nextTick(l)};else if(b.Promise)c=function(l){b.Promise.resolve().then(l)};
else if(f){var e=[],k=document.createElement("div");(new f(function(){for(;0<e.length;)e.shift()()})).observe(k,{attributes:!0});c=function(l){e.push(l);k.setAttribute("queueStatus","1")}}return c}();return function(){function c(){this._dispatcher=new h;this._isInitialized=!1;this._workerPostMessage({type:d.MessageType.HANDSHAKE})}c.prototype.terminate=function(){};Object.defineProperty(c.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=e)&&this.addEventListener("message",e)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=e)&&this.addEventListener("error",e)},enumerable:!0,configurable:!0});c.prototype.postMessage=function(e,k){var l=this;g(function(){l._workerMessageHandler(new MessageEvent("message",
{data:e}))})};c.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)};c.prototype.addEventListener=function(e,k,l){this._dispatcher.addEventListener(e,k,l)};c.prototype.removeEventListener=function(e,k,l){this._dispatcher.removeEventListener(e,k,l)};c.prototype._workerPostMessage=function(e,k){var l=this;g(function(){l.dispatchEvent(new MessageEvent("message",{data:e}))})};c.prototype._workerMessageHandler=function(e){var k=this;if(e=d.receiveMessage(e)){var l=e.jobId;switch(e.type){case d.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:d.MessageType.CONFIGURED});break;case d.MessageType.OPEN:e=e.modulePath,a("esri-webpack")?D(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline","esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",e],function(m,n,p,t,r,y,x,z){switch(z){case "esri/views/vectorTiles/WorkerTileHandler":break;
case "esri/views/2d/layers/features/Pipeline":n=p;break;case "esri/views/3d/layers/PointCloudWorker":n=t;break;case "esri/views/3d/layers/SceneLayerWorker":n=r;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":n=y;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":n=x;break;default:n=z}m=m.connect(n);k._workerPostMessage({type:d.MessageType.OPENED,jobId:l,data:m})}):D(["./RemoteClient",e],function(m,n){var p=m.connect(n);k._workerPostMessage({type:d.MessageType.OPENED,
jobId:l,data:p})})}}};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(D,q,a,b,d,h,f){var g;a("stable-symbol-rendering")&&(g=new Set);return function(){function c(e,k,l){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=e;this.height=k;this._glyphSource=
l;this._binPack=new h(e-4,k-4);this._glyphData.push(new Uint8Array(e*k));this._dirties.push(!0);this._textures.push(void 0)}c.prototype.getGlyphItems=function(e,k,l){var m=this,n=[],p=this._glyphSource,t=new Set;e=1/256;for(var r=0;r<l.length;r++)t.add(Math.floor(l[r]*e));var y=[];t.forEach(function(x){if(256>=x){var z=k+x;m._rangePromises.has(z)?y.push(m._rangePromises.get(z)):(x=p.getRange(k,x).always(function(){m._rangePromises["delete"](z)}),m._rangePromises.set(z,x),y.push(x))}});return b.all(y).then(function(x){x=
m._glyphIndex[k];x||(x={},m._glyphIndex[k]=x);if(a("stable-symbol-rendering")){g.clear();for(var z=0;z<l.length;z++){var v=l[z];g.add(v)}var w=[];t.forEach(function(ea){w.push(ea)});w.sort();v=[];for(z=0;z<w.length;z++)for(var u=w[z],A=0;256>A;++A)v.push(256*u+A)}else v=l;z=0;for(u=v;z<u.length;z++)if(v=u[z],A=x[v]){if(!a("stable-symbol-rendering")||g.has(v))n[v]={rect:A.rect,metrics:A.metrics,page:A.page}}else{var G=p.getGlyph(k,v);if(G&&G.metrics){A=G.metrics;var B=void 0;if(0===A.width)B=new d(0,
0,0,0);else{var E=A.width+6,F=A.height+6,H=E%4?4-E%4:4,L=F%4?4-F%4:4;1===H&&(H=5);1===L&&(L=5);B=m._binPack.allocate(E+H,F+L);B.isEmpty&&(m._dirties[m._currentPage]||(m._glyphData[m._currentPage]=null),m._currentPage=m._glyphData.length,m._glyphData.push(new Uint8Array(m.width*m.height)),m._dirties.push(!0),m._textures.push(void 0),m._binPack=new h(m.width-4,m.height-4),B=m._binPack.allocate(E+H,F+L));H=m._glyphData[m._currentPage];G=G.bitmap;var Q=L=void 0;if(G)for(var aa=0;aa<F;aa++){L=E*aa;Q=m.width*
(B.y+aa+1)+B.x;for(var ca=0;ca<E;ca++)H[Q+ca+1]=G[L+ca]}}x[v]={rect:B,metrics:A,tileIDs:null,page:m._currentPage};if(!a("stable-symbol-rendering")||g.has(v))n[v]={rect:B,metrics:A,page:m._currentPage};m._dirties[m._currentPage]=!0}}return n})};c.prototype.removeGlyphs=function(e){for(var k in this._glyphIndex){var l=this._glyphIndex[k];if(l){var m=void 0,n;for(n in l)if(m=l[n],m.tileIDs["delete"](e),0===m.tileIDs.size){for(var p=this._glyphData[m.page],t=m.rect,r=void 0,y=void 0,x=0;x<t.height;x++)for(r=
this.width*(t.y+x)+t.x,y=0;y<t.width;y++)p[r+y]=0;delete l[n];this._dirties[m.page]=!0}}}};c.prototype.bind=function(e,k,l,m){void 0===m&&(m=0);this._textures[l]||(this._textures[l]=new f(e,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var n=this._textures[l];n.setSamplingMode(k);this._dirties[l]&&n.setData(this._glyphData[l]);e.bindTexture(n,m);this._dirties[l]=!1};c.prototype.dispose=function(){this._binPack=null;for(var e=0,k=this._textures;e<
k.length;e++){var l=k[e];l&&l.dispose()}this._textures.length=0};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(D,q){return function(){function a(b,d,h,f){void 0===b&&(b=0);void 0===d&&(d=0);void 0===h&&(h=0);void 0===f&&(f=0);this.x=b;this.y=d;this.width=h;this.height=f}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require",
"exports","./Rect"],function(D,q,a){return function(){function b(d,h){this._height=this._width=0;this._free=[];this._width=d;this._height=h;this._free.push(new a(0,0,d,h))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(d,h){if(d>this._width||h>this._height)return new a;for(var f=null,g=-1,c=0;c<
this._free.length;++c){var e=this._free[c];d<=e.width&&h<=e.height&&(null===f||e.y<=f.y&&e.x<=f.x)&&(f=e,g=c)}if(null===f)return new a;this._free.splice(g,1);f.width<f.height?(f.width>d&&this._free.push(new a(f.x+d,f.y,f.width-d,h)),f.height>h&&this._free.push(new a(f.x,f.y+h,f.width,f.height-h))):(f.width>d&&this._free.push(new a(f.x+d,f.y,f.width-d,f.height)),f.height>h&&this._free.push(new a(f.x,f.y+h,d,f.height-h)));return new a(f.x,f.y,d,h)};b.prototype.release=function(d){for(var h=0;h<this._free.length;++h){var f=
this._free[h];if(f.y===d.y&&f.height===d.height&&f.x+f.width===d.x)f.width+=d.width;else if(f.x===d.x&&f.width===d.width&&f.y+f.height===d.y)f.height+=d.height;else if(d.y===f.y&&d.height===f.height&&d.x+d.width===f.x)f.x=d.x,f.width+=d.width;else if(d.x===f.x&&d.width===f.width&&d.y+d.height===f.y)f.y=d.y,f.height+=d.height;else continue;this._free.splice(h,1);this.release(d)}this._free.push(d)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports",
"../../request","../../core/pbf","../../core/promiseUtils"],function(D,q,a,b,d){var h=function(){function g(c){this._metrics=[];this._bitmaps=[];if(c)for(;c.next();)switch(c.tag()){case 1:for(var e=c.getMessage();e.next();)switch(e.tag()){case 3:for(var k=e.getMessage(),l=void 0,m=void 0,n=void 0,p=void 0,t=void 0,r=void 0,y=void 0;k.next();)switch(k.tag()){case 1:l=k.getUInt32();break;case 2:m=k.getBytes();break;case 3:n=k.getUInt32();break;case 4:p=k.getUInt32();break;case 5:t=k.getSInt32();break;
case 6:r=k.getSInt32();break;case 7:y=k.getUInt32();break;default:k.skip()}l&&(this._metrics[l]={width:n,height:p,left:t,top:r,advance:y},this._bitmaps[l]=m);break;default:e.skip()}break;default:c.skip()}}g.prototype.getMetrics=function(c){return this._metrics[c]};g.prototype.getBitmap=function(c){return this._bitmaps[c]};return g}(),f=function(){function g(){this._ranges=[]}g.prototype.getRange=function(c){return this._ranges[c]};g.prototype.addRange=function(c,e){this._ranges[c]=e};return g}();
return function(){function g(c){this._glyphInfo={};this._baseURL=c}g.prototype.getRange=function(c,e){var k=this._getFontStack(c);if(k.getRange(e))return d.resolve();var l=256*e,m=l+255;l=this._baseURL.replace("{fontstack}",c).replace("{range}",l+"-"+m);return a(l,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(n){k.addRange(e,new h(new b(new Uint8Array(n.data),new DataView(n.data))))})["catch"](function(){k.addRange(e,new h)})};g.prototype.getGlyph=function(c,e){var k=this._getFontStack(c);
if(k){var l=Math.floor(e/256);if(!(256<l)&&(k=k.getRange(l)))return{metrics:k.getMetrics(e),bitmap:k.getBitmap(e)}}};g.prototype._getFontStack=function(c){var e=this._glyphInfo[c];e||(e=this._glyphInfo[c]=new f);return e};return g}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(D,q){return function(){function a(b,d,h,f){this._tag=0;this._dataType=99;this._data=b;this._dataView=d;this._pos=h||0;this._end=f||b.byteLength}a.prototype.clone=function(){return new a(this._data,
this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!b||b===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=
function(){var b=4294967295;b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=
function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var b=this._dataView,d=this._pos;b=b.getUint32(d,!0)+4294967296*b.getUint32(d+4,!0);this._skip(8);return b};a.prototype.getSFixed64=function(){var b=this._dataView,d=this._pos;b=b.getUint32(d,!0)+4294967296*
b.getInt32(d+4,!0);this._skip(8);return b};a.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};a.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};a.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};a.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};a.prototype.getString=function(){var b=this._getLength(),
d=this._pos;d=this._toString(this._data,d,d+b);this._skip(b);return d};a.prototype.getBytes=function(){var b=this._getLength(),d=this._pos;d=this._toBytes(this._data,d,d+b);this._skip(b);return d};a.prototype.getMessage=function(){var b=this._getLength(),d=this._pos;d=new a(this._data,this._dataView,d,d+b);this._skip(b);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);
break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};a.prototype._decodeVarint=function(){var b=this._data,d=this._pos,h=0;if(10<=this._end-d){var f=b[d++];h|=f&127;if(0!==(f&128)&&(f=b[d++],h|=(f&127)<<7,0!==(f&128)&&(f=b[d++],h|=(f&127)<<14,0!==(f&128)&&(f=b[d++],h|=(f&127)<<21,0!==(f&128)&&(f=b[d++],h+=268435456*(f&127),0!==(f&128)&&(f=b[d++],h+=34359738368*(f&127),0!==(f&128)&&
(f=b[d++],h+=4398046511104*(f&127),0!==(f&128)&&(f=b[d++],h+=562949953421312*(f&127),0!==(f&128)&&(f=b[d++],h+=72057594037927936*(f&127),0!==(f&128)&&(f=b[d++],h+=0x7fffffffffffffff*(f&127),0!==(f&128)))))))))))throw Error("Varint too long!");}else{for(var g=1;d!==this._end;){f=b[d];if(0===(f&128))break;++d;h+=(f&127)*g;g*=128}if(d===this._end)throw Error("Varint overrun!");++d;h+=f*g}this._pos=d;return h};a.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};a.prototype._getLength=
function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(b,d,h){var f="",g="";for(h=Math.min(this._end,h);d<h;++d){var c=b[d];c&128?g+="%"+c.toString(16):(f+=decodeURIComponent(g)+String.fromCharCode(c),g="")}g.length&&(f+=decodeURIComponent(g));return f};a.prototype._toBytes=function(b,d,h){h=Math.min(this._end,h);return new Uint8Array(b.buffer,d,h-d)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(D,q,a,b,d,h){return function(){function f(g,c,e){void 0===e&&(e=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=g;this._pageHeight=c;0<e&&(this._maxItemSize=e);this._binPack=new d(g-4,c-4)}f.prototype.getWidth=function(g){return g>=this._size.length?-1:this._size[g][0]};f.prototype.getHeight=function(g){return g>=this._size.length?-1:this._size[g][1]};
f.prototype.setSpriteSource=function(g){this.dispose();this.pixelRatio=g.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new d(this._pageWidth-4,this._pageHeight-4);var c=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=c;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=g};f.prototype.getSpriteItem=function(g,c){void 0===c&&(c=!1);var e=this._mosaicRects[g];if(e)return e;
if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;e=this._sprites.getSpriteInfo(g);if(!e||!e.width||!e.height||0>e.width||0>e.height)return null;var k=e.width,l=e.height,m=this._allocateImage(k,l),n=m[0],p=m[1];if(0>=n.width)return null;this._copy(n,e,p,m[2],c);e={rect:n,width:k,height:l,anchorX:0,anchorY:0,sdf:e.sdf,pixelRatio:e.pixelRatio,page:p};return this._mosaicRects[g]=e};f.prototype.preloadSpriteItems=function(){for(var g=0,c=this._sprites.spriteNames;g<c.length;g++)this.getSpriteItem(c[g],
!0)};f.prototype.getSpriteItems=function(g){for(var c={},e=0;e<g.length;e++){var k=g[e];c[k]=this.getSpriteItem(k)}return c};f.prototype.getMosaicItemPosition=function(g,c){var e=this.getSpriteItem(g,c),k=e&&e.rect;if(!k)return null;k.width=e.width;k.height=e.height;return{size:[e.width,e.height],tl:[(k.x+2)/this._size[e.page][0],(k.y+2)/this._size[e.page][1]],br:[(k.x+2+e.width)/this._size[e.page][0],(k.y+2+e.height)/this._size[e.page][1]],page:e.page}};f.prototype.bind=function(g,c,e,k){void 0===
e&&(e=0);void 0===k&&(k=0);this._textures[e]||(this._textures[e]=new h(g,{pixelFormat:6408,dataType:5121,width:this._size[e][0],height:this._size[e][1]},new Uint8Array(this._mosaicsData[e].buffer)));var l=this._textures[e];l.setSamplingMode(c);this._dirties[e]&&l.setData(new Uint8Array(this._mosaicsData[e].buffer));g.bindTexture(l,k);this._dirties[e]=!1};f._copyBits=function(g,c,e,k,l,m,n,p,t,r,y){var x=k*c+e;n=p*m+n;if(y)for(n-=m,y=-1;y<=r;y++,x=((y+r)%r+k)*c+e,n+=m)for(p=-1;p<=t;p++)l[n+p]=g[x+
(p+t)%t];else for(y=0;y<r;y++){for(p=0;p<t;p++)l[n+p]=g[x+p];x+=c;n+=m}};f.prototype._copy=function(g,c,e,k,l,m){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(e>=this._mosaicsData.length)){var n=new Uint32Array(m?m.buffer:this._sprites.image.buffer);f._copyBits(n,m?c.width:this._sprites.width,c.x,c.y,this._mosaicsData[e],k[0],g.x+2,g.y+2,c.width,c.height,l);this._dirties[e]=!0}};f.prototype._allocateImage=function(g,c){g+=2;c+=2;var e=Math.max(g,c);if(this._maxItemSize&&this._maxItemSize<
e){e=Math.pow(2,Math.ceil(a.log2(g)));var k=Math.pow(2,Math.ceil(a.log2(c))),l=new b(0,0,g,c);this._mosaicsData.push(new Uint32Array(e*k));this._dirties.push(!0);this._size.push([e,k]);this._textures.push(void 0);return[l,this._mosaicsData.length-1,[e,k]]}e=g%4?4-g%4:4;k=c%4?4-c%4:4;1===e&&(e=5);1===k&&(k=5);e=this._binPack.allocate(g+e,c+k);return 0>=e.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*
this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new d(this._pageWidth-4,this._pageHeight-4),this._allocateImage(g,c)):[e,this._currentPage,[this._pageWidth,this._pageHeight]]};f.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var g=0,c=this._textures;g<c.length;g++){var e=c[g];e&&e.dispose()}this._textures.length=0};return f}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(D,q,a,b,d,h,f,g,c){return function(){function e(k,l){this.baseURL=k;this.devicePixelRatio=l;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(e.prototype,"spriteNames",{get:function(){var k=[],l;for(l in this._spritesData)k.push(l);k.sort();return k},enumerable:!0,configurable:!0});e.prototype.getSpriteInfo=function(k){return this._spritesData[k]};e.prototype.load=function(){var k=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){k.loadStatus="loaded";return k})["catch"](function(l){k.loadStatus="failed";return k}):g.resolve(this)};e.prototype._loadSprites=function(){var k=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var l=this.baseURL,m=this._isRetina?"@2x":"";return f(l+m+".json",{callbackParamName:"callback",responseType:"json"}).then(function(n){var p=Object.keys(n.data);if(!p||0===p.length||1===p.length&&"_ssl"===p[0])return g.resolve(null);k._spritesData=
n.data;var t=new d,r=new Image;r.crossOrigin="anonymous";r.onload=function(){r.onload=null;k.width=r.width;k.height=r.height;var y=document.createElement("canvas");y.width=r.width;y.height=r.height;y=y.getContext("2d");y.drawImage(r,0,0,r.width,r.height);y=y.getImageData(0,0,r.width,r.height);y=new Uint8Array(y.data);for(var x,z=0;z<y.length;z+=4)x=y[z+3]/255,y[z]*=x,y[z+1]*=x,y[z+2]*=x;k.image=y;t.resolve()};r.onerror=function(){k._spritesData=null;t.reject()};n=""+l+m+".png";h.id&&(p=h.id.findCredential(n))&&
p.token&&(n+="?token\x3d"+p.token);r.src=c.addProxy(n);return t})};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(D,q,a,b,d){return function(){function h(f){if(f instanceof b)this._tilemapCache=f;else if(f&&"index"in f)this._tilemap=f.index;else throw Error("Invalid tilemap!");}h.prototype.dataKey=function(f){if(this._tilemapCache){var g=f.level,
c=f.row,e=f.col,k=new d(f);return this._tilemapCache.fetchAvailabilityUpsample(g,c,e,k).then(function(){return k})["catch"](function(l){if(l&&"cancel"===l.dojoType)throw l;k.level=g;k.row=c;k.col=e;return k})}return this._getIndexedDataKey(f)};h.prototype.forEach=function(f,g,c,e,k){this._callback=k;this._maxLevel=g+f;this._forEach(this._tilemap,g,c,e)};h.prototype._forEach=function(f,g,c,e){0!==f&&(this._callback(g,c,e),g!==this._maxLevel&&"object"===typeof f&&(this._forEach(f[0],g+1,2*c,2*e),this._forEach(f[1],
g+1,2*c,2*e+1),this._forEach(f[2],g+1,2*c+1,2*e),this._forEach(f[3],g+1,2*c+1,2*e+1)))};h.prototype._getIndexedDataKey=function(f){var g=[f];if(0>f.level||0>f.row||0>f.col||0<f.row>>f.level||0<f.col>>f.level)return a.resolve(null);for(;0!==f.level;)f=new d(f.level-1,f.row>>1,f.col>>1,f.world),g.push(f);f=this._tilemap;var c=g.pop();if(1===f)return a.resolve(c);for(;g.length;){var e=g.pop();var k=(e.col&1)+((e.row&1)<<1);if(f)if(0===f[k]){c=null;break}else if(1===f[k]){c=e;break}else c=e,f=f[k]}return a.resolve(c)};
return h}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x,z,v){function w(A){return{state:A.state,pixelRatio:A.pixelRatio,stationary:A.stationary}}var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(A){function G(){var B=null!==A&&A.apply(this,arguments)||this;B._clipData=new Float32Array(8);B._upperLeft=n.create();B._upperRight=n.create();B._lowerLeft=n.create();B._lowerRight=n.create();B._mat2=m.create();B._clipRendererInitialized=!1;B._contextVersion=null;B._labelFader=new f["default"](B);
return B}a(G,A);Object.defineProperty(G.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});G.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};G.prototype.createElement=function(){var B=document.createElement("canvas");B.setAttribute("class","esri-display-object");return B};G.prototype.setElement=function(B){this.element=B};G.prototype.useContextVersion=function(B){this._renderingContext||(this._contextVersion=B)};G.prototype.attach=
function(B){if(this.attached)return!0;this._resizeCanvas(B);var E=r.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new z(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=w(B);this._painter||(this._painter=new e["default"],this._painter.initialize(this._renderingContext));return A.prototype.attach.call(this,B)};G.prototype.detach=function(B){A.prototype.detach.call(this,
B);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};G.prototype.renderChildren=function(B){var E=this.children;B.drawPhase=c.WGLDrawPhase.FILL|c.WGLDrawPhase.LINE|c.WGLDrawPhase.MARKER|c.WGLDrawPhase.TEXT;for(var F=E.length,H=0;H<F;H++){var L=E[H];L.attached&&this.renderChild(L,B)}if(b("esri-featurelayer-webgl-labeling")){var Q=B.context,aa=Q.getBoundFramebufferObject();Q.bindFramebuffer(this._labelsFBO2);H=B.stationary;Q.setClearColor(0,
0,0,H?0:1);Q.clear(Q.gl.COLOR_BUFFER_BIT);if(H)for(B.drawPhase=c.WGLDrawPhase.LABEL_ALPHA,B.labelFBO=this._labelsFBO1,B.labelStep=this._labelFader.step(),H=0;H<F;H++)L=E[H],L.attached&&this.renderChild(L,B);else this._labelFader.reset();Q.bindFramebuffer(aa);B.labelFBO=this._labelsFBO2;B.drawPhase=c.WGLDrawPhase.LABEL;for(H=0;H<F;H++)L=E[H],L.attached&&this.renderChild(L,B);B=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=B}};G.prototype.beforeRenderChildren=function(B,E){var F=
E.context,H=E.state,L=E.pixelRatio,Q=this._painter;if(Q){F.enforceState();Q.update(H,L);var aa=H.width;Q=H.height;var ca=H.rotation;aa=Math.round(aa*L);Q=Math.round(Q*L);this._boundFBO=F.getBoundFramebufferObject();!b("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===aa&&this._labelsFBO1.height===Q||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=y.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:aa,height:Q},{colorTarget:0,depthStencilTarget:0}),F.bindFramebuffer(this._labelsFBO1),F.setDepthWriteEnabled(!0),F.setStencilWriteMask(255),F.setClearColor(0,0,0,0),F.setClearDepth(1),F.setClearStencil(0),F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT),F.setDepthWriteEnabled(!1),F.bindFramebuffer(this._boundFBO),this._labelsFBO2=y.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:aa,height:Q},{colorTarget:0,depthStencilTarget:0}));if(H.spatialReference&&(H.spatialReference._isWrappable?H.spatialReference._isWrappable():H.spatialReference.isWrappable)){var ea=l.toRadian(ca),U=Math.abs(Math.cos(ea)),la=Math.abs(Math.sin(ea)),V=Math.round(H.worldScreenWidth);if(Math.round(aa*U+Q*la)<=V)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===aa&&this._clipFBO.height===Q||(this._clipFBO=new y(F,{colorTarget:0,depthStencilTarget:3,width:aa,height:Q}));
var R=.5*aa,ha=.5*Q;H=1/aa;var S=1/Q;L*=.5*V;var X=.5*(aa*la+Q*U);aa=this._upperLeft;U=this._upperRight;la=this._lowerLeft;V=this._lowerRight;n.set(aa,-L,-X);n.set(U,L,-X);n.set(la,-L,X);n.set(V,L,X);m.identity(this._mat2);m.translate(this._mat2,this._mat2,[R,ha]);0!==ca&&m.rotate(this._mat2,this._mat2,ea);n.transformMat2d(aa,aa,this._mat2);n.transformMat2d(U,U,this._mat2);n.transformMat2d(la,la,this._mat2);n.transformMat2d(V,V,this._mat2);ca=this._clipData;ca.set([2*la[0]*H-1,2*(Q-la[1])*S-1,2*V[0]*
H-1,2*(Q-V[1])*S-1,2*aa[0]*H-1,2*(Q-aa[1])*S-1,2*U[0]*H-1,2*(Q-U[1])*S-1]);this._clipRendererInitialized||this._initializeClipRenderer(F);this._clipVBO.setData(ca);this._boundFBO=F.getBoundFramebufferObject();F.bindFramebuffer(this._clipFBO);F.setDepthWriteEnabled(!0);F.setStencilWriteMask(255);F.setClearColor(0,0,0,0);F.setClearDepth(1);F.setClearStencil(0);F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT);F.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=
!1}};G.prototype.afterRenderChildren=function(B,E){if(this._clipFrame&&this._clipRendererInitialized){var F=this._renderingContext;F.bindFramebuffer(this._boundFBO);this._boundFBO=null;F.bindVAO(this._clipVAO);F.bindProgram(this._clipStencilProgram);F.setDepthWriteEnabled(!1);F.setDepthTestEnabled(!1);F.setStencilTestEnabled(!0);F.setBlendingEnabled(!1);F.setColorMask(!1,!1,!1,!1);F.setStencilOp(7680,7680,7681);F.setStencilWriteMask(255);F.setStencilFunction(519,1,255);F.drawElements(4,6,5123,0);
F.bindVAO();F.setColorMask(!0,!0,!0,!0);F.setBlendingEnabled(!0);F.setStencilFunction(514,1,255);this._blitRenderer.render(F,this._clipFBO.colorTexture,9728,1);F.setStencilTestEnabled(!1)}};G.prototype.doRender=function(B){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(B),A.prototype.doRender.call(this,B),this._cachedRenderParams=w(B)):E.display="none"};G.prototype.takeScreenshot=function(B){void 0===B&&(B={});var E=B.pixelRatio||1;this._cachedRenderParams.pixelRatio=
E;var F=Math.round(E*this._cachedRenderParams.state.width),H=Math.round(E*this._cachedRenderParams.state.height),L=0,Q=0,aa=F,ca=H,ea=F,U=H;if(ea=B.area)L=Math.round(E*ea.x),Q=Math.round(E*ea.y),aa=Math.round(E*ea.width),ca=Math.round(E*ea.height);void 0!==B.width&&void 0!==B.height?(ea=B.width/B.height,ca*ea<aa?(ea*=ca,L+=Math.floor((aa-ea)/2),aa=Math.floor(ea)):(ea=aa/ea,Q+=Math.floor((ca-ea)/2),ca=Math.floor(ea)),ea=B.width,U=B.height):(ea=aa,U=ca);E=document.createElement("canvas");E.width=ea;
E.height=U;var la=E.getContext("2d"),V=new Uint8Array(aa*ca*4),R=this._renderingContext,ha=y.create(R,{colorTarget:1,depthStencilTarget:3,width:F,height:H});R.bindFramebuffer(ha);R.setViewport(0,0,F,H);var S=this._cachedRenderParams,X=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(X.COLOR_BUFFER_BIT|X.DEPTH_BUFFER_BIT|X.STENCIL_BUFFER_BIT);S.context=this._renderingContext;
S.painter=this._painter;this.beforeRenderChildren(S,S);if(void 0!==B.rotation&&null!==B.rotation){X=S.state;var ka=X.clone();ka.viewpoint.rotation=B.rotation;S.state=ka;this.renderChildren(S);S.state=X}else this.renderChildren(S);this.afterRenderChildren(S,S);ha.readPixels(L,H-(Q+ca),aa,ca,6408,5121,V);R.bindFramebuffer();R=la.getImageData(0,0,ea,U);if(0!==L||0!==Q||aa!==F||ca!==H||ea!==F||U!==H)p.resampleHermite(V,aa,ca,R.data,ea,U,!0);else{Q=ca-1;ca=0;ha=4*aa;for(ka=X=L=H=F=aa=S=void 0;ca<Q;){X=
ca*ha;ka=Q*ha;for(S=0;S<ha;S+=4)aa=V[X+S],F=V[X+S+1],H=V[X+S+2],L=V[X+S+3],V[X+S]=V[ka+S],V[X+S+1]=V[ka+S+1],V[X+S+2]=V[ka+S+2],V[X+S+3]=V[ka+S+3],V[ka+S]=aa,V[ka+S+1]=F,V[ka+S+2]=H,V[ka+S+3]=L;ca++;Q--}aa=R.data;F=V.length;for(Q=0;Q<F;Q++)aa[Q]=V[Q]}V=R.data;ca=V.length;for(Q=0;Q<ca;Q+=4)L=V[Q+3],0<L&&(H=L/255,aa=Math.floor(V[Q+0]/H),F=Math.floor(V[Q+1]/H),H=Math.floor(V[Q+2]/H),V[Q+0]=255>=aa?aa:255,V[Q+1]=255>=F?F:255,V[Q+2]=255>=H?H:255);la.putImageData(R,0,0);la=u[B.format?B.format.toLowerCase():
"png"];V=1;void 0!==B.quality&&(V=B.quality/100);B=E.toDataURL(la,V);return d.resolve({dataURL:B,x:0,y:0,width:ea,height:U})};G.prototype.prepareChildrenRenderParameters=function(B){if(!this.attached||!this._renderingContext)return null;B=w(B);var E=this._renderingContext,F=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,
this.element.height);E.setDepthWriteEnabled(!1);B.context=E;B.painter=this._painter;return B};G.prototype.attachChild=function(B,E){return B.attach(E)};G.prototype.detachChild=function(B,E){return B.detach(E)};G.prototype.renderChild=function(B,E){return B.processRender(E)};G.prototype._resizeCanvas=function(B){var E=this.element,F=E.style,H=B.state,L=B.pixelRatio;B=Math.round(H.width*L);L=Math.round(H.height*L);if(E.width!==B||E.height!==L)E.width=B,E.height=L;F.width=H.width+"px";F.height=H.height+
"px"};G.prototype._initializeClipRenderer=function(B){if(this._clipRendererInitialized)return!0;this._blitRenderer=new g;var E={a_pos:0},F=new x(B,k.stencilVS,k.stencilFS,E);if(!F)return!1;var H=t.createVertex(B,35040,32),L=new Uint16Array([0,1,2,2,1,3]);L=t.createIndex(B,35044,L);B=new v(B,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:H},L);this._clipStencilProgram=F;this._clipVBO=H;this._clipVAO=B;return this._clipRendererInitialized=!0};return G}(h)})},
"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(d,h){void 0===h&&(h=250);this.duration=h;this._startTime=this._lastTime=0;this._parent=d}b.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};b.prototype.step=function(){var d=performance.now();if(0===this._lastTime)return this._lastTime=d,this._parent.requestRender(),0;var h=d-this._lastTime;
this._lastTime=d;d-this._startTime<2*this.duration&&this._parent.requestRender();return h/this.duration};return b}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,d,h){return function(){function f(){this._initialized=!1}f.prototype.dispose=function(){this._program&&(this._program.dispose(),
this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};f.prototype.render=function(g,c,e,k){g&&(this._initialized||this._initialize(g),g.setBlendFunctionSeparate(1,771,1,771),g.bindVAO(this._vertexArrayObject),g.bindProgram(this._program),c.setSamplingMode(e),g.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",k),g.drawArrays(5,0,4),g.bindVAO())};f.prototype._initialize=function(g){if(this._initialized)return!0;
var c={a_pos:0,a_tex:1},e=new d(g,a.bitblitVS,a.bitblitFS,c);if(!e)return!1;var k=new Int8Array(16);k[0]=-1;k[1]=-1;k[2]=0;k[3]=0;k[4]=1;k[5]=-1;k[6]=1;k[7]=0;k[8]=-1;k[9]=1;k[10]=0;k[11]=1;k[12]=1;k[13]=1;k[14]=1;k[15]=1;g=new h(g,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(g,35044,k)});this._program=e;this._vertexArrayObject=g;return this._initialized=
!0};return f}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!D)var D=1E-6;if(!q)var q="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:D,GLMAT_ARRAY_TYPE:q,GLMAT_RANDOM:a,setMatrixArrayType:function(f){b.GLMAT_ARRAY_TYPE=f}},d=Math.PI/180,h=180/Math.PI;b.toRadian=function(f){return f*d};b.toDegree=function(f){return f*h};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(D){var q=D.GLMAT_ARRAY_TYPE;D={create:function(){var a=new q(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new q(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var d=b[0],h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=d*g-h*f;if(!k)return null;k=1/k;a[0]=g*k;a[1]=
-h*k;a[2]=-f*k;a[3]=d*k;a[4]=(f*e-g*c)*k;a[5]=(h*c-d*e)*k;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4];b=b[5];var k=d[0],l=d[1],m=d[2],n=d[3],p=d[4];d=d[5];a[0]=h*k+g*l;a[1]=f*k+c*l;a[2]=h*m+g*n;a[3]=f*m+c*n;a[4]=h*p+g*d+e;a[5]=f*p+c*d+b;return a}};D.mul=D.multiply;D.rotate=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4];b=b[5];var k=Math.sin(d);d=Math.cos(d);a[0]=h*d+g*k;a[1]=f*d+c*k;a[2]=h*-k+g*d;a[3]=f*-k+c*
d;a[4]=e;a[5]=b;return a};D.scale=function(a,b,d){var h=b[1],f=b[2],g=b[3],c=b[4],e=b[5],k=d[0];d=d[1];a[0]=b[0]*k;a[1]=h*k;a[2]=f*d;a[3]=g*d;a[4]=c;a[5]=e;return a};D.translate=function(a,b,d){var h=b[0],f=b[1],g=b[2],c=b[3],e=b[4];b=b[5];var k=d[0];d=d[1];a[0]=h;a[1]=f;a[2]=g;a[3]=c;a[4]=h*k+g*d+e;a[5]=f*k+c*d+b;return a};D.fromRotation=function(a,b){var d=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=d;a[2]=-d;a[3]=h;a[4]=0;a[5]=0;return a};D.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];
a[4]=0;a[5]=0;return a};D.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};D.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};D.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return D})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var q=D.GLMAT_ARRAY_TYPE,a=D.GLMAT_RANDOM,
b={create:function(){var d=new q(2);d[0]=0;d[1]=0;return d},clone:function(d){var h=new q(2);h[0]=d[0];h[1]=d[1];return h},fromValues:function(d,h){var f=new q(2);f[0]=d;f[1]=h;return f},copy:function(d,h){d[0]=h[0];d[1]=h[1];return d},set:function(d,h,f){d[0]=h;d[1]=f;return d},add:function(d,h,f){d[0]=h[0]+f[0];d[1]=h[1]+f[1];return d},subtract:function(d,h,f){d[0]=h[0]-f[0];d[1]=h[1]-f[1];return d}};b.sub=b.subtract;b.multiply=function(d,h,f){d[0]=h[0]*f[0];d[1]=h[1]*f[1];return d};b.mul=b.multiply;
b.divide=function(d,h,f){d[0]=h[0]/f[0];d[1]=h[1]/f[1];return d};b.div=b.divide;b.min=function(d,h,f){d[0]=Math.min(h[0],f[0]);d[1]=Math.min(h[1],f[1]);return d};b.max=function(d,h,f){d[0]=Math.max(h[0],f[0]);d[1]=Math.max(h[1],f[1]);return d};b.scale=function(d,h,f){d[0]=h[0]*f;d[1]=h[1]*f;return d};b.scaleAndAdd=function(d,h,f,g){d[0]=h[0]+f[0]*g;d[1]=h[1]+f[1]*g;return d};b.distance=function(d,h){var f=h[0]-d[0],g=h[1]-d[1];return Math.sqrt(f*f+g*g)};b.dist=b.distance;b.squaredDistance=function(d,
h){var f=h[0]-d[0],g=h[1]-d[1];return f*f+g*g};b.sqrDist=b.squaredDistance;b.length=function(d){var h=d[0];d=d[1];return Math.sqrt(h*h+d*d)};b.len=b.length;b.squaredLength=function(d){var h=d[0];d=d[1];return h*h+d*d};b.sqrLen=b.squaredLength;b.negate=function(d,h){d[0]=-h[0];d[1]=-h[1];return d};b.inverse=function(d,h){d[0]=1/h[0];d[1]=1/h[1];return d};b.normalize=function(d,h){var f=h[0],g=h[1];f=f*f+g*g;0<f&&(f=1/Math.sqrt(f),d[0]=h[0]*f,d[1]=h[1]*f);return d};b.dot=function(d,h){return d[0]*h[0]+
d[1]*h[1]};b.cross=function(d,h,f){h=h[0]*f[1]-h[1]*f[0];d[0]=d[1]=0;d[2]=h;return d};b.lerp=function(d,h,f,g){var c=h[0];h=h[1];d[0]=c+g*(f[0]-c);d[1]=h+g*(f[1]-h);return d};b.random=function(d,h){h=h||1;var f=2*a()*Math.PI;d[0]=Math.cos(f)*h;d[1]=Math.sin(f)*h;return d};b.transformMat2=function(d,h,f){var g=h[0];h=h[1];d[0]=f[0]*g+f[2]*h;d[1]=f[1]*g+f[3]*h;return d};b.transformMat2d=function(d,h,f){var g=h[0];h=h[1];d[0]=f[0]*g+f[2]*h+f[4];d[1]=f[1]*g+f[3]*h+f[5];return d};b.transformMat3=function(d,
h,f){var g=h[0];h=h[1];d[0]=f[0]*g+f[3]*h+f[6];d[1]=f[1]*g+f[4]*h+f[7];return d};b.transformMat4=function(d,h,f){var g=h[0];h=h[1];d[0]=f[0]*g+f[4]*h+f[12];d[1]=f[1]*g+f[5]*h+f[13];return d};b.forEach=function(){var d=b.create();return function(h,f,g,c,e,k){f||(f=2);g||(g=0);for(c=c?Math.min(c*f+g,h.length):h.length;g<c;g+=f)d[0]=h[g],d[1]=h[g+1],e(d,d,k),h[g]=d[0],h[g+1]=d[1];return h}}();b.str=function(d){return"vec2("+d[0]+", "+d[1]+")"};return b})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.adjustScreenshotSettings=function(b,d){b=a({format:"png",quality:100},b);if(b.includePadding){var h=d.width;var f=d.height}else h=d.width-d.padding.left-d.padding.right,f=d.height-d.padding.top-d.padding.bottom;var g=h/f;void 0!==b.width&&void 0===b.height?b.height=b.width/g:void 0!==b.height&&void 0===b.width&&(b.width=g*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==
b.width&&(b.width=Math.floor(b.width));b.area||b.includePadding||(b.area={x:d.padding.left,y:d.padding.top,width:h,height:f});return b};q.resampleHermite=function(b,d,h,f,g,c,e){void 0===e&&(e=!0);var k=d/g;h/=c;for(var l=Math.ceil(k/2),m=Math.ceil(h/2),n=0;n<c;n++)for(var p=0;p<g;p++){for(var t=4*(p+(e?c-n-1:n)*g),r=0,y=0,x=0,z=0,v=0,w=0,u=0,A=(n+.5)*h,G=Math.floor(n*h);G<(n+1)*h;G++){var B=Math.abs(A-(G+.5))/m,E=(p+.5)*k;B*=B;for(var F=Math.floor(p*k);F<(p+1)*k;F++){var H=Math.abs(E-(F+.5))/l;r=
Math.sqrt(B+H*H);-1<=r&&1>=r&&(r=2*r*r*r-3*r*r+1,0<r&&(H=4*(F+G*d),u+=r*b[H+3],x+=r,255>b[H+3]&&(r=r*b[H+3]/250),z+=r*b[H],v+=r*b[H+1],w+=r*b[H+2],y+=r))}}f[t]=z/y;f[t+1]=v/y;f[t+2]=w/y;f[t+3]=u/x}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(D,q,a,b,d,h,f){return function(){function g(c,e){this.gl=null;this._blendEnabled=!1;this._blendColorState=
{r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=
this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=h["default"](c)?"webgl2":"webgl";
this.gl=c;c instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=f.loadCapabilities(c,e);var k=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:k[0],y:k[1],width:k[2],height:k[3]};k=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),
maxMaxAnisotropy:k?this.gl.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new d);this.enforceState()}Object.defineProperty(g.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});g.prototype.dispose=
function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};g.prototype.setBlendingEnabled=function(c){this._blendEnabled!==c&&(!0===c?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=c)};g.prototype.setBlendColor=function(c,e,k,l){if(c!==this._blendColorState.r||e!==this._blendColorState.g||k!==this._blendColorState.b||l!==this._blendColorState.a)this.gl.blendColor(c,
e,k,l),this._blendColorState.r=c,this._blendColorState.g=e,this._blendColorState.b=k,this._blendColorState.a=l};g.prototype.setBlendFunction=function(c,e){if(c!==this._blendFunctionState.srcRGB||e!==this._blendFunctionState.dstRGB)this.gl.blendFunc(c,e),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e};g.prototype.setBlendFunctionSeparate=function(c,e,k,l){if(this._blendFunctionState.srcRGB!==c||this._blendFunctionState.srcAlpha!==
k||this._blendFunctionState.dstRGB!==e||this._blendFunctionState.dstAlpha!==l)this.gl.blendFuncSeparate(c,e,k,l),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=k,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=l};g.prototype.setBlendEquation=function(c){this._blendEquationState.mode!==c&&(this.gl.blendEquation(c),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=c)};g.prototype.setBlendEquationSeparate=function(c,e){if(this._blendEquationState.mode!==
c||this._blendEquationState.modeAlpha!==e)this.gl.blendEquationSeparate(c,e),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=e};g.prototype.setColorMask=function(c,e,k,l){if(this._colorMaskState.r!==c||this._colorMaskState.g!==e||this._colorMaskState.b!==k||this._colorMaskState.a!==l)this.gl.colorMask(c,e,k,l),this._colorMaskState.r=c,this._colorMaskState.g=e,this._colorMaskState.b=k,this._colorMaskState.a=l};g.prototype.setClearColor=function(c,e,k,l){if(this._clearColor.r!==c||
this._clearColor.g!==e||this._clearColor.b!==k||this._clearColor.a!==l)this.gl.clearColor(c,e,k,l),this._clearColor.r=c,this._clearColor.g=e,this._clearColor.b=k,this._clearColor.a=l};g.prototype.setFaceCullingEnabled=function(c){this._polygonCullingEnabled!==c&&(!0===c?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=c)};g.prototype.setPolygonOffsetFillEnabled=function(c){this._polygonOffsetFillEnabled!==c&&(!0===c?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=c)};g.prototype.setPolygonOffset=function(c,e){if(this._polygonOffset[0]!==c||this._polygonOffset[1]!==e)this._polygonOffset[0]=c,this._polygonOffset[1]=e,this.gl.polygonOffset(c,e)};g.prototype.setCullFace=function(c){this._cullFace!==c&&(this.gl.cullFace(c),this._cullFace=c)};g.prototype.setFrontFace=function(c){this._frontFace!==c&&(this.gl.frontFace(c),this._frontFace=c)};g.prototype.setScissorTestEnabled=function(c){this._scissorTestEnabled!==
c&&(!0===c?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=c)};g.prototype.setScissorRect=function(c,e,k,l){if(this._scissorRect.x!==c||this._scissorRect.y!==e||this._scissorRect.width!==k||this._scissorRect.height!==l)this.gl.scissor(c,e,k,l),this._scissorRect.x=c,this._scissorRect.y=e,this._scissorRect.width=k,this._scissorRect.height=l};g.prototype.setDepthTestEnabled=function(c){this._depthTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=c)};g.prototype.setClearDepth=function(c){this._clearDepth!==c&&(this.gl.clearDepth(c),this._clearDepth=c)};g.prototype.setDepthFunction=function(c){this._depthFunction!==c&&(this.gl.depthFunc(c),this._depthFunction=c)};g.prototype.setDepthWriteEnabled=function(c){this._depthWriteEnabled!==c&&(this.gl.depthMask(c),this._depthWriteEnabled=c)};g.prototype.setDepthRange=function(c,e){if(this._depthRange.zNear!==c||this._depthRange.zFar!==e)this.gl.depthRange(c,
e),this._depthRange.zNear=c,this._depthRange.zFar=e};g.prototype.setStencilTestEnabled=function(c){this._stencilTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=c)};g.prototype.setClearStencil=function(c){c!==this._clearStencil&&(this.gl.clearStencil(c),this._clearStencil=c)};g.prototype.setStencilFunction=function(c,e,k){if(this._stencilFunction.func!==c||this._stencilFunction.ref!==e||this._stencilFunction.mask!==k)this.gl.stencilFunc(c,
e,k),this._stencilFunction.face=1032,this._stencilFunction.func=c,this._stencilFunction.ref=e,this._stencilFunction.mask=k};g.prototype.setStencilFunctionSeparate=function(c,e,k,l){if(this._stencilFunction.face!==c||this._stencilFunction.func!==e||this._stencilFunction.ref!==k||this._stencilFunction.mask!==l)this.gl.stencilFuncSeparate(c,e,k,l),this._stencilFunction.face=c,this._stencilFunction.func=e,this._stencilFunction.ref=k,this._stencilFunction.mask=l};g.prototype.setStencilWriteMask=function(c){this._stencilWriteMask!==
c&&(this.gl.stencilMask(c),this._stencilWriteMask=c)};g.prototype.setStencilOp=function(c,e,k){if(this._stencilOperation.fail!==c||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==k)this.gl.stencilOp(c,e,k),this._stencilOperation.face=1032,this._stencilOperation.fail=c,this._stencilOperation.zFail=e,this._stencilOperation.zPass=k};g.prototype.setStencilOpSeparate=function(c,e,k,l){if(this._stencilOperation.face!==c||this._stencilOperation.fail!==e||this._stencilOperation.zFail!==k||
this._stencilOperation.zPass!==l)this.gl.stencilOpSeparate(c,e,k,l),this._stencilOperation.face=c,this._stencilOperation.face=c,this._stencilOperation.fail=e,this._stencilOperation.zFail=k,this._stencilOperation.zPass=l};g.prototype.setLineWidth=function(c){var e=this._lineWidth;this._lineWidth!==c&&(this.gl.lineWidth(c),this._lineWidth=c);return e};g.prototype.setActiveTexture=function(c){var e=this._activeTextureUnit;0<=c&&c!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+
c),this._activeTextureUnit=c);return e};g.prototype.clear=function(c){c&&this.gl.clear(c)};g.prototype.drawArrays=function(c,e,k){this.gl.drawArrays(c,e,k)};g.prototype.drawElements=function(c,e,k,l){5123===k?this.gl.drawElements(c,e,k,l):5125===k&&this.gl.drawElements(c,e,k,l)};Object.defineProperty(g.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});g.prototype.setViewport=function(c,e,k,l){var m=this._viewport;if(m.x!==c||m.y!==e||m.width!==k||
m.height!==l)m.x=c,m.y=e,m.width=k,m.height=l,this.gl.viewport(c,e,k,l)};g.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};g.prototype.bindProgram=function(c){c?this._activeShaderProgram!==c&&(c.initialize(),this.gl.useProgram(c.glName),this._activeShaderProgram=c):(this.gl.useProgram(null),this._activeShaderProgram=null)};g.prototype.bindTexture=function(c,e){void 0===e&&(e=0);-1===g._MAX_TEXTURE_IMAGE_UNITS&&
(g._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var k=this._textureUnitMap[e];this.setActiveTexture(e);null==c||null==c.glName?(null!=k&&(this.gl.bindTexture(k.descriptor.target,null),k.setBoundToUnit(e,!1)),this._textureUnitMap[e]=null):k&&k.id===c.id?c.applyChanges():(this.gl.bindTexture(c.descriptor.target,c.glName),c.setBoundToUnit(e,!0),c.applyChanges(),this._textureUnitMap[e]=c)};g.prototype.bindFramebuffer=function(c){c?this._activeFramebuffer!==c&&(c.initialize()||
this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c.glName),this._activeFramebuffer=c):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};g.prototype.bindBuffer=function(c){c&&(34962===c.bufferType?this._activeVertexBuffer=g._bindBuffer(this.gl,c,c.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=g._bindBuffer(this.gl,c,c.bufferType,this._activeIndexBuffer))};g.prototype.bindRenderbuffer=function(c){var e=this.gl;c||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=
null);this._activeRenderbuffer!==c&&(e.bindRenderbuffer(e.RENDERBUFFER,c.glName),this._activeRenderbuffer=c)};g.prototype.unbindBuffer=function(c){34962===c?this._activeVertexBuffer=g._bindBuffer(this.gl,null,c,this._activeVertexBuffer):this._activeIndexBuffer=g._bindBuffer(this.gl,null,c,this._activeIndexBuffer)};g.prototype.bindVAO=function(c){c?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===c.id||(c.bind(),this._activeVertexArrayObject=c):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null)};g.prototype.getBoundTexture=function(c){return this._textureUnitMap[c]};g.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};g.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};g.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var c=0;c<this.parameters.maxTextureImageUnits;c++)this.bindTexture(null,c);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};g.prototype.enforceState=function(){var c=this.gl,e=this._capabilities.vao;e&&e.bindVertexArray(null);for(var k=0;k<this.parameters.maxVertexAttributes;k++)c.disableVertexAttribArray(k);this._activeVertexBuffer?c.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
c.bindBuffer(34962,null);this._activeIndexBuffer?c.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):c.bindBuffer(34963,null);if(e&&this._activeVertexArrayObject){if(e=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(e)}c.bindFramebuffer(c.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);c.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);c.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);c.bindRenderbuffer(c.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?c.enable(this.gl.BLEND):c.disable(this.gl.BLEND);c.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);c.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);c.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);c.clearDepth(this._clearDepth);c.clearStencil(this._clearStencil);c.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);c.cullFace(this._cullFace);c.depthFunc(this._depthFunction);c.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthMask(this._depthWriteEnabled);c.frontFace(this._frontFace);c.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);c.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?c.enable(c.POLYGON_OFFSET_FILL):c.disable(c.POLYGON_OFFSET_FILL);c.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?c.enable(c.SCISSOR_TEST):c.disable(c.SCISSOR_TEST);c.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
c.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST);c.stencilMask(this._stencilWriteMask);for(e=0;e<this.parameters.maxTextureImageUnits;e++)c.activeTexture(b.BASE_TEXTURE_UNIT+e),c.bindTexture(3553,null),(k=this._textureUnitMap[e])&&c.bindTexture(k.descriptor.target,k.glName);c.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);
c.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};g._bindBuffer=function(c,e,k,l){if(!e)return c.bindBuffer(k,null),null;if(l===e)return l;c.bindBuffer(k,e.glName);return e};g._MAX_TEXTURE_IMAGE_UNITS=-1;return g}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(D,q){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],
function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q["default"]=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(D,q,a,b,d,h){function f(g,c,e,k,l){if(k&&d["default"](g))return!0;if(c[e])return!1;for(c=0;c<l.length;c++)if(g.getExtension(l[c]))return!0;return!1}
Object.defineProperty(q,"__esModule",{value:!0});q.loadCapabilities=function(g,c){var e=c&&c.disabledExtensions||{},k=b.load(g,e),l=h.load(g,e);var m=e.compressedTextureS3TC?null:(m=g.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:m.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:m.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:m.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:m.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var n=e.textureFilterAnisotropic?
null:(n=g.getExtension("EXT_texture_filter_anisotropic")||g.getExtension("MOZ_EXT_texture_filter_anisotropic")||g.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:n.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:n.TEXTURE_MAX_ANISOTROPY_EXT}:null;var p=a.load(g,e);if(d["default"](g))var t=e.colorBufferFloat||!g.getExtension("EXT_color_buffer_float")?null:{R16F:g.R16F,RG16F:g.RG16F,RGBA16F:g.RGBA16F,R32F:g.R32F,RG32F:g.RG32F,RGBA32F:g.RGBA32F,R11F_G11F_B10F:g.R11F_G11F_B10F};
else if(g instanceof WebGLRenderingContext){t=!e.colorBufferFloat&&g.getExtension("EXT_color_buffer_half_float");var r=!e.colorBufferFloat&&g.getExtension("WEBGL_color_buffer_float");t=t||r?{RGBA16F:t?t.RGBA16F_EXT:void 0,RGBA32F:r?r.RGBA32F_EXT:void 0}:null}else t=void 0;r=d["default"](g)?{MIN:g.MIN,MAX:g.MAX}:e.blendMinMax?null:(r=g.getExtension("EXT_blend_minmax"))?{MIN:r.MIN_EXT,MAX:r.MAX_EXT}:null;return{instancing:k,vao:l,compressedTextureS3TC:m,textureFilterAnisotropic:n,disjointTimerQuery:p,
colorBufferFloat:t,blendMinMax:r,depthTexture:f(g,e,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:f(g,e,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:f(g,e,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:f(g,e,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:f(g,e,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require",
"exports","./isWebGL2Context"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,d){if(d.disjointTimerQuery)return null;var h=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return h?a["default"](b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(f){return b.getQueryParameter(f,b.QUERY_RESULT_AVAILABLE)},getResult:function(f){return b.getQueryParameter(f,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(h.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(f){return b.beginQuery(h.TIME_ELAPSED_EXT,f)},endTimeElapsed:function(){return b.endQuery(h.TIME_ELAPSED_EXT)},createTimestamp:function(f){return h.queryCounterEXT(f,h.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(h.TIMESTAMP_EXT,h.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return h.createQueryEXT()},resultAvailable:function(f){return h.getQueryObjectEXT(f,h.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(f){return h.getQueryObjectEXT(f,h.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(h.GPU_DISJOINT_EXT)},beginTimeElapsed:function(f){return h.beginQueryEXT(h.TIME_ELAPSED_EXT,f)},endTimeElapsed:function(){return h.endQueryEXT(h.TIME_ELAPSED_EXT)},createTimestamp:function(f){return h.queryCounterEXT(f,h.TIMESTAMP_EXT)},timestampBits:function(){return h.getQueryEXT(h.TIMESTAMP_EXT,h.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(D,
q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,d){if(a["default"](b))return{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)};if(d.angleInstancedArrays)return null;var h=b.getExtension("ANGLE_instanced_arrays");return h?{drawArraysInstanced:h.drawArraysInstancedANGLE.bind(h),drawElementsInstanced:h.drawElementsInstancedANGLE.bind(h),vertexAttribDivisor:h.vertexAttribDivisorANGLE.bind(h)}:
null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,d){if(a["default"](b))return{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)};if(d.vao)return null;var h=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||
b.getExtension("WEBKIT_OES_vertex_array_object");return h?{createVertexArray:h.createVertexArrayOES.bind(h),deleteVertexArray:h.deleteVertexArrayOES.bind(h),bindVertexArray:h.bindVertexArrayOES.bind(h)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(D,q,a,b,d,h,f){var g=new h("0/0/0/0"),c=function(){function k(l,m,n,p,t,r,y,x){this.x=
l;this.ymin=m;this.ymax=n;this.invM=p;this.leftAdjust=t;this.rightAdjust=r;this.leftBound=y;this.rightBound=x}k.create=function(l,m){if(l[1]>m[1]){var n=[m,l];l=n[0];m=n[1]}n=l[0];var p=l[1],t=m[0],r=m[1],y=t-n,x=r-p;x=0!==x?y/x:0;var z=(Math.ceil(p)-p)*x,v=(Math.floor(p)-p)*x;return new k(n,Math.floor(p),Math.ceil(r),x,0>y?z:v,0>y?v:z,0>y?t:n,0>y?n:t)};k.prototype.incrRow=function(){this.x+=this.invM};k.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};k.prototype.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return k}(),e=[[0,0],[0,0],[0,0],[0,0]];return function(){function k(l,m){var n=this;this.tileInfo=l;this.fullExtent=m;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var p=l.lods.slice();p.sort(function(r,y){return y.scale-r.scale});var t=this._lodInfos=p.map(function(r){return b.create(l,r,m)});p.forEach(function(r,y){n._infoByLevel[r.level]=t[y];n._infoByScale[r.scale]=t[y];n.scales[y]=r.scale},this);
this._wrap=l.isWrappable}k.prototype.getLODInfoAt=function(l){return this._infoByLevel[l.level]};k.prototype.getTileBounds=function(l,m,n){void 0===n&&(n=!1);g.set(m);return(m=this._infoByLevel[g.level])?m.getTileBounds(l,g,n):l};k.prototype.getTileCoords=function(l,m,n){void 0===n&&(n=!1);g.set(m);return(m=this._infoByLevel[g.level])?m.getTileCoords(l,g,n):l};k.prototype.getTileCoverage=function(l,m,n){void 0===m&&(m=192);void 0===n&&(n="closest");n="closest"===n?this.getClosestInfoForScale(l.scale):
this.getSmallestInfoForScale(l.scale);var p=d.pool.acquire(n),t=this._wrap;var r=Infinity;var y=-Infinity,x=p.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-m;e[1][0]=e[2][0]=l.size[0]+m;e[2][1]=e[3][1]=l.size[1]+m;for(m=0;m<e.length;m++){var z=e[m];l.toMap(z,z);z[0]=n.getColumnForX(z[0]);z[1]=n.getRowForY(z[1])}l=[];z=3;for(m=0;4>m;m++){if(e[m][1]!==e[z][1]){var v=c.create(e[m],e[z]);r=Math.min(v.ymin,r);y=Math.max(v.ymax,y);void 0===l[v.ymin]&&(l[v.ymin]=[]);l[v.ymin].push(v)}z=m}if(null==r||null==y||100<
y-r)return null;for(z=[];r<y;){null!=l[r]&&(z=z.concat(l[r]));var w=Infinity;var u=-Infinity;for(m=z.length-1;0<=m;m--)v=z[m],w=Math.min(w,v.getLeftCol()),u=Math.max(u,v.getRightCol());w=Math.floor(w);u=Math.floor(u);if(r>=n.first[1]&&r<=n.last[1])if(t)if(n.size[0]<n.worldSize[0])for(v=Math.floor(u/n.worldSize[0]),m=Math.floor(w/n.worldSize[0]);m<=v;m++)x.push(new f(r,Math.max(n.getFirstColumnForWorld(m),w),Math.min(n.getLastColumnForWorld(m),u)));else x.push(new f(r,w,u));else w>n.last[0]||u<n.first[0]||
(w=Math.max(w,n.first[0]),u=Math.min(u,n.last[0]),x.push(new f(r,w,u)));r+=1;for(m=z.length-1;0<=m;m--)v=z[m],v.ymax>=r?v.incrRow():z.splice(m,1)}return p};k.prototype.getTileIdAtParent=function(l,m){var n=h.pool.acquire(m),p=this._infoByLevel[n.level];if(l.resolution<p.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+l.resolution+" is not a parent resolution of "+p.resolution);return l.resolution===p.resolution?n.id:h.getId(l.level,Math.floor(n.row*p.resolution/
l.resolution+.01),Math.floor(n.col*p.resolution/l.resolution+.01),n.world)};k.prototype.getTileParentId=function(l){l=h.pool.acquire(l);var m=this._lodInfos.indexOf(this._infoByLevel[l.level])-1;if(0>m)return h.pool.release(l),null;m=this.getTileIdAtParent(this._lodInfos[m],l);h.pool.release(l);return m};k.prototype.getTileResolution=function(l){return(l=this._infoByLevel[l.level])?l.resolution:-1};k.prototype.getTileScale=function(l){return(l=this._infoByLevel[l.level])?l.scale:-1};k.prototype.intersects=
function(l,m){var n=h.pool.acquire(m),p=this._infoByLevel[n.level],t=l.lodInfo;if(t.resolution>p.resolution){var r=h.pool.acquire(this.getTileIdAtParent(t,n)),y=t.denormalizeCol(r.col,r.world),x=l.spans.some(function(E){return E.row===r.row&&E.colFrom<=y&&E.colTo>=y});h.pool.release(n);h.pool.release(r);return x}if(t.resolution<p.resolution){var z=l.spans.reduce(function(E,F){E[0]=Math.min(E[0],F.row);E[1]=Math.max(E[1],F.row);E[2]=Math.min(E[2],F.colFrom);E[3]=Math.max(E[3],F.colTo);return E},[Infinity,
-Infinity,Infinity,-Infinity]);x=z[0];var v=z[1],w=z[2];z=z[3];var u=p.denormalizeCol(n.col,n.world),A=t.getColumnForX(p.getXForColumn(u)),G=t.getRowForY(p.getYForRow(n.row));u=t.getColumnForX(p.getXForColumn(u+1))-1;p=t.getRowForY(p.getYForRow(n.row+1))-1;h.pool.release(n);return!(A>z||u<w||G>v||p<x)}var B=t.denormalizeCol(n.col,n.world);x=l.spans.some(function(E){return E.row===n.row&&E.colFrom<=B&&E.colTo>=B});h.pool.release(n);return x};k.prototype.normalizeBounds=function(l,m,n){l[0]=m[0];l[1]=
m[1];l[2]=m[2];l[3]=m[3];this._wrap&&(m=a.getInfo(this.tileInfo.spatialReference),n=-n*(m.valid[1]-m.valid[0]),l[0]+=n,l[2]+=n);return l};k.prototype.getSmallestInfoForScale=function(l){var m=this.scales;if(this._infoByScale[l])return this._infoByScale[l];if(l>m[0])return this._infoByScale[m[0]];for(var n=1;n<m.length-1;n++)if(l>m[n]+1E-6)return this._infoByScale[m[n-1]];return this._infoByScale[m[m.length-1]]};k.prototype.getClosestInfoForScale=function(l){var m=this.scales;this._infoByScale[l]||
(l=m.reduce(function(n,p,t,r){return Math.abs(p-l)<Math.abs(n-l)?p:n},m[0]));return this._infoByScale[l]};return k}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(D,q,a,b){function d(f,g,c){f[0]=g;f[1]=c;return f}var h=new b("0/0/0/0");return function(){function f(g,c,e,k,l,m,n,p,t,r,y,x){this.level=g;this.resolution=c;this.scale=e;this.origin=k;this.first=l;this.last=m;this.size=
n;this.norm=p;this.worldStart=t;this.worldEnd=r;this.worldSize=y;this.wrap=x}f.create=function(g,c,e){var k=a.getInfo(g.spatialReference),l=[g.origin.x,g.origin.y],m=[g.size[0]*c.resolution,g.size[1]*c.resolution],n=[-Infinity,-Infinity],p=[Infinity,Infinity],t=[Infinity,Infinity];e&&(d(n,Math.max(0,Math.floor((e.xmin-l[0])/m[0])),Math.max(0,Math.floor((l[1]-e.ymax)/m[1]))),d(p,Math.max(0,Math.floor((e.xmax-l[0])/m[0])),Math.max(0,Math.floor((l[1]-e.ymin)/m[1]))),d(t,p[0]-n[0]+1,p[1]-n[1]+1));if(g.isWrappable){g=
[Math.ceil(Math.round(2*k.origin[1]/c.resolution)/g.size[0]),t[1]];k=[Math.floor((k.origin[0]-l[0])/m[0]),n[1]];e=[g[0]+k[0]-1,p[1]];var r=!0}else k=n,e=p,g=t,r=!1;return new f(c.level,c.resolution,c.scale,l,n,p,t,m,k,e,g,r)};f.prototype.normalizeCol=function(g){if(!this.wrap)return g;var c=this.worldSize[0];return 0>g?c-1-Math.abs((g+1)%c):g%c};f.prototype.denormalizeCol=function(g,c){return this.wrap?this.worldSize[0]*c+g:g};f.prototype.getWorldForColumn=function(g){return this.wrap?Math.floor(g/
this.worldSize[0]):0};f.prototype.getFirstColumnForWorld=function(g){return g*this.worldSize[0]+this.first[0]};f.prototype.getLastColumnForWorld=function(g){return g*this.worldSize[0]+this.first[0]+this.size[0]-1};f.prototype.getColumnForX=function(g){return(g-this.origin[0])/this.norm[0]};f.prototype.getXForColumn=function(g){return this.origin[0]+g*this.norm[0]};f.prototype.getRowForY=function(g){return(this.origin[1]-g)/this.norm[1]};f.prototype.getYForRow=function(g){return this.origin[1]-g*this.norm[1]};
f.prototype.getTileBounds=function(g,c,e){void 0===e&&(e=!1);h.set(c);var k=e?h.col:this.denormalizeCol(h.col,h.world),l=h.row;c=this.getXForColumn(k);e=this.getYForRow(l+1);k=this.getXForColumn(k+1);l=this.getYForRow(l);g[0]=c;g[1]=e;g[2]=k;g[3]=l;return g};f.prototype.getTileCoords=function(g,c,e){void 0===e&&(e=!1);h.set(c);c=e?h.col:this.denormalizeCol(h.col,h.world);Array.isArray(g)?d(g,this.getXForColumn(c),this.getYForRow(h.row)):(g.x=this.getXForColumn(c),g.y=this.getYForRow(h.row));return g};
return f}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(D,q,a,b,d){return function(){function h(f){this.lodInfo=f;this.spans=a.acquire()}h.prototype.release=function(){for(var f=0,g=this.spans;f<g.length;f++)d.pool.release(g[f]);a.release(this.spans)};h.prototype.forEach=function(f,g){var c=this.spans,e=this.lodInfo,k=e.level;if(0!==c.length)for(var l=0;l<c.length;l++){var m=
c[l],n=m.row,p=m.colTo;for(m=m.colFrom;m<=p;m++)f.call(g,k,n,e.normalizeCol(m),e.getWorldForColumn(m))}};h.pool=new b(h,!0);return h}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(D,q,a){return function(){function b(d,h,f){this.row=d;this.colFrom=h;this.colTo=f}b.pool=new a(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./enums","./TileKey"],function(D,q,a,b,d){var h=new d(0,0,0,0),f=new Map,g=[],c=[];return function(){function e(k){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=k.acquireTile;this.releaseTile=k.releaseTile;this.tileInfoView=k.tileInfoView;k.cachePolicy&&(this.cachePolicy=k.cachePolicy);k.coveragePolicy&&(this.coveragePolicy=k.coveragePolicy);null!=k.buffer&&(this.buffer=
k.buffer)}e.prototype.destroy=function(){this.clear()};e.prototype.update=function(k){var l=this,m=this.tileIndex,n=this.tileInfoView.getTileCoverage(k.state,this.buffer,this.coveragePolicy);if(n){var p=n.spans,t=n.lodInfo,r=t.level,y=k.state.resolution,x=!k.stationary&&y>this._previousResolution;this._previousResolution=y;m.forEach(function(E){return E.visible=!0});this.tiles.length=0;f.clear();var z=0,v=0;if(0<p.length)for(var w=0;w<p.length;w++){k=p[w];for(var u=k.row,A=k.colTo,G=k.colFrom;G<=
A;G++)z++,k=h.set(r,u,t.normalizeCol(G),t.getWorldForColumn(G)).id,m.has(k)?(y=m.get(k),y.status!==b.TileStatus.INITIALIZED&&v++,y.attached?f.set(k,y):y.attached||x||this._addParentTile(k,f)):(y=this.acquireTile(h),this.tileIndex.set(k,y),x||this._addParentTile(k,f))}var B=v===z;c.length=0;g.length=0;m.forEach(function(E,F){h.set(F);if(!f.has(F)){var H=l.tileInfoView.intersects(n,h);!H||!x&&B?"purge"===l.cachePolicy&&E.status!==b.TileStatus.MODIFIED&&E.status!==b.TileStatus.READY?g.push(F):(h.level>
r||!H)&&g.push(F):E.attached?c.push(F):h.level>r&&g.push(F)}});for(p=0;p<c.length;p++)k=c[p],(y=m.get(k))&&y.attached&&f.set(k,y);for(p=0;p<g.length;p++)k=g[p],y=m.get(k),this.releaseTile(y),m["delete"](k);f.forEach(function(E){return l.tiles.push(E)});m.forEach(function(E){f.has(E.key.id)||(E.visible=!1)});c.length=0;g.length=0;f.clear();return B}};e.prototype.clear=function(){var k=this,l=this.tileIndex;l.forEach(function(m){k.releaseTile(m)});l.clear()};e.prototype._addParentTile=function(k,l){for(var m=
k,n=null;;){m=this.tileInfoView.getTileParentId(m);if(!m)break;if(this.tileIndex.has(m)&&(n=this.tileIndex.get(m))&&n.attached){l.has(n.key.id)||l.set(n.key.id,n);break}}};return e}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(D,q,a,b){function d(c,e){c.length=0;e.forEach(function(k){return c.push(k)});return c}var h=new Set,f=[],g=new Map;return function(){function c(e){var k=this;
this._keysToRequests=new Map;this.tileInfoView=null;var l=e.strategy&&"scale-first"!==e.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=e.tileInfoView;this._queues=e.tileServers&&0<e.tileServers.length?e.tileServers.map(function(m){return new a({concurrency:e.concurrency||6,process:function(n){n=k._keysToRequests.get(n);return e.process(n,m)},peeker:l})}):[new a({concurrency:e.concurrency||6,process:function(m){m=k._keysToRequests.get(m);return e.process(m)},
peeker:l})]}Object.defineProperty(c.prototype,"length",{get:function(){return this._queues.reduce(function(e,k){return e+k.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});c.prototype.clear=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].clear();this._keysToRequests.clear()};c.prototype.find=function(e,k){for(var l=this,m=0,n=this._queues;m<n.length;m++){var p=n[m].find(function(t){return e(l._keysToRequests.get(t).key)});
if(p)return p}};c.prototype.get=function(e){e="string"===typeof e?e:e.id;for(var k=0,l=this._queues;k<l.length;k++){var m=l[k].get(e);if(m)return m}};c.prototype.getRequest=function(e){return this._keysToRequests.get("string"===typeof e?e:e.id)};c.prototype.has=function(e){return"string"===typeof e?this._keysToRequests.has(e):this._keysToRequests.has(e.id)};c.prototype.isOngoing=function(e){var k="string"===typeof e?e:e.id;return this.has(k)&&this._queues.some(function(l){return l.isOngoing(k)})};
c.prototype.pause=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].pause()};c.prototype.push=function(e){var k=this,l=e.key.id,m=this._queues[e.key.row%this._queues.length].push(l);this._keysToRequests.set(l,e);m.then(function(){k._keysToRequests["delete"](l)});m["catch"](function(){k._keysToRequests["delete"](l)});return m};c.prototype.reset=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].reset()};c.prototype.resume=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].resume()};
c.prototype._peekByScaleFirst=function(e){if(!this.state)return e[0];for(var k=this.tileInfoView,l=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var p=this._keysToRequests.get(e[n]),t=this.tileInfoView.getTileScale(p.key);g.has(t)||(g.set(t,[]),l=Math.max(t,l),m=Math.min(t,m));g.get(t).push(p.key);h.add(t)}var r=this.state.scale;g.has(r)||(d(f,h),f.sort(),r=f.reduce(function(v,w,u,A){return Math.abs(w-r)<Math.abs(v-r)?w:v},f[0]));r=Math.min(r,l);r=Math.max(r,m);e=g.get(r);
var y=k.getClosestInfoForScale(r),x=y.getColumnForX(this.state.center[0]),z=y.getRowForY(this.state.center[1]);e.sort(function(v,w){var u=y.denormalizeCol(v.col,v.world),A=y.denormalizeCol(w.col,w.world);return Math.sqrt((x-u)*(x-u)+(z-v.row)*(z-v.row))-Math.sqrt((x-A)*(x-A)+(z-w.row)*(z-w.row))});h.clear();g.clear();return e[0].id};c.prototype._peekByCenterFirst=function(e){if(!this.state)return e[0];for(var k=this.tileInfoView,l=this.state.center,m=[0,0],n=Number.POSITIVE_INFINITY,p=null,t=0;t<
e.length;t++){var r=this._keysToRequests.get(e[t]);k.getTileCoords(m,r.key);var y=b.distance(m,l);y<n&&(n=y,p=r.key)}return p.id};return c}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(D,q,a,b,d){return function(){function h(f){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;f.concurrency&&(this.concurrency=f.concurrency);
this.ordered=!!f.ordered;this._queue=new b(f.peeker?{peeker:f.peeker}:void 0);this.process=f.process}Object.defineProperty(h.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});h.prototype.clear=function(){this._queue.clear();var f=[];this._processingItems.forEach(function(g){return f.push(g.resultPromise)});this._processingItems.clear();f.forEach(function(g){return g.cancel()});f.length=0;this._apiPromises.forEach(function(g){return f.push(g)});
this._apiPromises.clear();f.forEach(function(g){return g.cancel()});this._cancelNext()};h.prototype.find=function(f,g){var c=this,e=void 0;this._apiPromises.forEach(function(k,l){f.call(g,l)&&(e=c._apiPromises.get(l).promise)});return e};h.prototype.get=function(f){return(f=this._apiPromises.get(f))&&f.promise||void 0};h.prototype.isOngoing=function(f){return this._processingItems.has(f)};h.prototype.has=function(f){return this._apiPromises.has(f)};h.prototype.pause=function(){this._isPaused||(this._isPaused=
!0,this._cancelNext())};h.prototype.push=function(f){var g=this;if(this._apiPromises.has(f))return this._apiPromises.get(f).promise;var c=new a(function(e){var k=g._processingItems.get(f);k?k.resultPromise.cancel(e):(g._remove(f),g._scheduleNext())});this._add(f,c);this._scheduleNext();return c.promise};h.prototype.reset=function(){var f=[];this._processingItems.forEach(function(e){return f.push(e)});this._processingItems.clear();for(var g=0;g<f.length;g++){var c=f[g];c.resultPromise.isFulfilled()?
this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};h.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};h.prototype._scheduleNext=function(){var f=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=d.schedule(function(){f._scheduledNextHandle=null;f._next()}))};h.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};h.prototype._processResult=function(f,
g){this._remove(f.item);this._scheduleNext();f.dfd.resolve(g)};h.prototype._processError=function(f,g){f.isReset?this._processReset(f):(this._remove(f.item),this._scheduleNext(),f.dfd.reject(g))};h.prototype._processReset=function(f){this._remove(f.item);this._add(f.item,f.dfd);this._scheduleNext()};h.prototype._processOrdered=function(f,g){var c=this,e=!1;if(f.isReset)this._processReset(f);else{f.result=g;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(n){e||
(n.result?c._itemsToProcess.push(n):e=!0)});for(var k=0,l=this._itemsToProcess;k<l.length;k++){var m=l[k];!1===m.result.ok?this._processError(m,m.result.error):this._processResult(m,m.result.value)}this._itemsToProcess.length=0}};h.prototype._process=function(f){var g=this;if(null!=f){var c=this._apiPromises.get(f),e=this.process(f);if(e&&"function"===typeof e.then){var k={item:f,resultPromise:e,result:null,dfd:c,isReset:!1};this._processingItems.set(f,k);this.ordered?e.then(function(l){return g._processOrdered(k,
{ok:!0,value:l})},function(l){return g._processOrdered(k,{ok:!1,error:l})}):e.then(function(l){return g._processResult(k,l)},function(l){return g._processError(k,l)})}else c.resolve(e),this._remove(f)}};h.prototype._add=function(f,g){this._apiPromises.set(f,g);this._queue.push(f)};h.prototype._remove=function(f){this._queue.remove(f);this._apiPromises["delete"](f);this._processingItems["delete"](f)};h.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),
this._scheduledNextHandle=null)};return h}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._items=[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=
function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(b){this.contains(b)||this._add(b)};a.prototype.contains=function(b){return 0<this._length&&this._itemSet.has(b)};a.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};a.prototype.remove=function(b){this.contains(b)&&this._remove(b)};a.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};a.prototype._remove=function(b){this._itemSet["delete"](b);
this._items.splice(this._items.indexOf(b),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var D=function(q,a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,h=0;h<b.length;++h){try{d=q.getContext(b[h],a)}catch(f){}if(d)break}return d};return{create3DContext:D,setupWebGL:function(q,a){function b(h){var f=q.parentNode;f&&(f.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
h+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var d=D(q,a);return d?[d]:(b('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){try{var q=window.WebGLRenderingContext}catch(b){q=[!1,0]}try{var a=D(document.createElement("canvas"))}catch(b){a=[!1,1]}q?a?(q=a,q=[!0,{VERSION:q.getParameter(q.VERSION),SHADING_LANGUAGE_VERSION:q.getParameter(q.SHADING_LANGUAGE_VERSION),VENDOR:q.getParameter(q.VENDOR),RENDERER:q.getParameter(q.RENDERER),
EXTENSIONS:q.getSupportedExtensions(),MAX_TEXTURE_SIZE:q.getParameter(q.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:q.getParameter(q.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):q=[!1,1]:q=[!1,0];return q}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(D){D(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(D,
q,a,b,d,h,f,g,c,e,k,l,m,n,p,t,r,y,x,z,v,w,u,A,G,B,E,F,H,L,Q,aa,ca){var ea=r.ease;f=p.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" "),_eventMap:{"style-change":["style"]},constructor:function(R,ha){this._frame=this._frame.bind(this);
this._params=ha||{};ha&&ha.tileServers&&ha.tileServers.length&&(this.tileServers=ha.tileServers=ha.tileServers.map(function(S){return m.getAbsoluteUrl(S)},this));ha&&ha.copyright&&(this.copyright=ha.copyright);this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(S,X){var ka=this.center[1]+this.resolution*this.height*.5;S[0]=(X[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;S[1]=(ka-
X[1])/this.resolution;return S},toMap:function(S,X){var ka=this.center[1]+this.resolution*this.height*.5;S[0]=this.center[0]-this.resolution*this.width*.5+X[0]*this.resolution;S[1]=ka-X[1]*this.resolution;return S}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";ha&&ha.resourceInfo?(this._stopDisplay(),this._applyMetadata(ha.resourceInfo)):
this.setStyle(R);this.registerConnectEvents()},setStyle:function(R){return this.loadStyle(R)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(R){if(this.opacity!=R)this.onOpacityChange(this.opacity=R)},onOpacityChange:function(){},_pinching:!1,getTileUrl:function(R,ha,S){var X=this._url&&this._url.query,ka=this.tileServers[ha%this.tileServers.length];ka=ka.replace(/\{z\}/gi,R.toString()).replace(/\{level\}/gi,R.toString()).replace(/\{y\}/gi,
ha.toString()).replace(/\{row\}/gi,ha.toString()).replace(/\{x\}/gi,S.toString()).replace(/\{col\}/gi,S.toString());X&&(ka+="?"+d.objectToQuery(X));ka=this.addTimestampToURL(ka);return m.addProxy(ka)},loadStyle:function(R){if(this._loadingPromise&&"string"===typeof R&&this.url===R)return this._loadingPromise;this._stopDisplay();var ha=this._loadingPromise;this._loadingPromise=w.loadMetadata(R).then(function(S){this._applyMetadata(S)}.bind(this)).otherwise(function(S){this._errorHandler(S);throw S;
}.bind(this));ha&&!ha.isFulfilled()&&ha.cancel();return this._loadingPromise},_applyMetadata:function(R){this.url=R.url;this._url=R.parsedUrl;!this._url&&R.styleUrl&&(this._url=z.urlToObject(R.styleUrl));this.currentStyleInfo={glyphsUrl:R.glyphsUrl,serviceUrl:R.serviceUrl,spriteUrl:R.spriteUrl,styleUrl:R.styleUrl,style:R.style,layerDefinition:R.layerDefinition};this.styleRepository=new A(R.style,R);this._read(R.layerDefinition);this.onStyleChange(this.getStyle());this.loaded||(this._findCredential(),
this.loaded=!0,this.onLoad(this));this.suspended||this._tileHandler||this._startDisplay()},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(R){return this._stageGL?this._stageGL.takeScreenshot(R):x.reject("No valid GL context!")},_setMap:function(R,ha,S){this.inherited(arguments);this._map=R;var X=this._div=a.create("div",null,ha);b.set(X,{position:"absolute",width:R.width+"px",height:R.height+
"px",overflow:"visible",opacity:this.opacity});this.attr("data-vectortiles",!0);this._onResizeHandle=R.on("resize",D.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",D.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",D.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",D.hitch(this,function(){}));R.acquireWebGLContext(this);this._stageGL=new F;this._stageGL.setElement(this._stageGL.createElement());
this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!R.loaded)var ka=R.on("load",D.hitch(this,function(){ka.remove();this.evaluateSuspension()}));return X},_unsetMap:function(R,ha){R.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;
a.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(S){S.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(R){this.version=
R.currentVersion||R.version;this.copyright=this.copyright||R.copyrightText;this.fullExtent=new h(R.fullExtent);this.initialExtent=new h(R.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new t(R.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(S){return S.scale});this.tileInfo.scaleToZoom=function(S){for(var X=
this.scales,ka=X.length-1,oa=0;oa<ka;oa++){var ta=X[oa],xa=X[oa+1];if(ta<=S)break;if(xa===S)return oa+1;if(ta>S&&xa<S)return oa+1-(S-xa)/(ta-xa)}return oa};this._hasMin||this.setMinScale(R.minScale);this._hasMax||this.setMaxScale(R.maxScale);R.tileMap&&(this.tileIndexUrl=z.join(this.currentStyleInfo.serviceUrl,R.tileMap));if(!this._params.tileServers){var ha=R.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&ha.forEach(function(S,X,ka){z.isAbsolute(S)?ka[X]=S:ka[X]=z.join(this.currentStyleInfo.serviceUrl,
S)}.bind(this));this.tileServers=ha}ha=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=z.urlToObject(this.currentStyleInfo.serviceUrl),ha=this._getDefaultAttribution(this.parsedUrl.path));ha?(this.attributionDataUrl=ha,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(R);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new u({layer:this}):null},_getCapabilities:function(R){var ha=R.hasOwnProperty("exportTilesAllowed")?
R.exportTilesAllowed:!1;R=R.capabilities?-1!==R.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:ha,supportsTileMapIndexing:R}},_getDefaultAttribution:function(R){var ha=R.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(ha&&(R=ha[3])){ha=ha[2]||"";R=R.toLowerCase();for(var S=0,X=this._mapsWithAttribution.length;S<X;S++){var ka=this._mapsWithAttribution[S];if(-1<ka.toLowerCase().indexOf(R))return R=
window.location.protocol,("http:"===R||"https:"===R?R:"https:")+"//static.arcgis.com/attribution/Vector"+ha+"/"+ka}}},_startDisplay:function(){var R={capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._vectorTileContainer=new G;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new H(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new E(R,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._allTilesAreHandled=!1;this._tileHandlerPromise=this._tileHandler.start().then(function(){this._fetchQueue=
new aa({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new L({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&!this._tileHandlerPromise.isFulfilled()&&
this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(R){R.cancel("cancel")}),this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null,this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=
null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,V(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*g.getUnitValueForSR(this.spatialReference)*96);var R=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&(R=v.getInfo(this._viewState.spatialReference),
R=R.valid[1]-R.valid[0]);this._viewState.worldScreenWidth=Math.round(R/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._allTilesAreHandled=this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},
_setViewState:function(R){R=D.mixin(this._viewState,R);R.center.type&&(R.center=[R.center.x,R.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(R,ha){var S=ha.immediate||0===e.defaults.map.zoomDuration;this._animation=null;if(S)this._setViewState(R);else{S=this._viewState;var X=e.defaults.map.zoomDuration,ka=U()+16,oa=S.center[0],ta=S.center[1],xa=S.scale,O=Array.isArray(R.center)?R.center[0]:R.center.x,Z=Array.isArray(R.center)?R.center[1]:R.center.y,fa=R.scale||
S.scale,ra=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var pa=(U()+16-ka)/X;1<=pa&&(pa=1,this.running=!1);pa=ea(pa);ra._setViewState({center:[oa+(O-oa)*pa,ta+(Z-ta)*pa],scale:xa+(fa-xa)*pa})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var R=!0;this._tileRequests.forEach(function(ha){R|=ha.isFulfilled()});R&&this._tileStrategy&&(R=this._allTilesAreHandled);R?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(R){var ha=
Q.pool.acquire();ha.set(R.level,R.row,R.col,R.world);R=this._tileHandler.getStyleRepository();var S=B.pool.acquire(ha,ha,this.tileInfo,R,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var X=this._tileHandler.getRefKey(ha).then(function(ka){S.refKey=ka;return this._fetchQueue.push(ha).then(function(oa){S.setData(oa.tileData,oa.workerId,oa.connection);S.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(S)}.bind(this))}.bind(this));this._tileRequests.set(ha.id,
X)}.bind(this));return S},_releaseTile:function(R){var ha=R.key.id,S=this._tileRequests.get(ha);S.isFulfilled()||S.cancel();this._tileRequests["delete"](ha);this._vectorTileContainer.removeChild(R);this._scheduleUpdate();R.once("detach",function(){B.pool.release(R)})},_getTileData:function(R){return this._tileHandler.getTileData(R,0)},onStyleChange:function(R){},_opacityChangeHandler:function(R){this._div&&(this._div.style.opacity=R.opacity)},_onResizeHandler:function(R){var ha=this._div&&this._div.style;
ha&&(ha.width=R.width+"px",ha.height=R.height+"px",this._setViewState({center:R.extent.getCenter(),width:R.width,height:R.height,size:[R.width,R.height]}))},onResume:function(){var R=this._map;this.inherited(arguments);l.show(this._div);this._setViewState({center:R.extent.getCenter(),scale:R.getScale(),width:R.width,height:R.height,size:[R.width,R.height],spatialReference:R.spatialReference});this._handles=[R.on("pan-end",D.hitch(this,this._onPanEndHandler)),R.on("pan",D.hitch(this,this._onPanExtentChangeHandler)),
R.on("extent-change",D.hitch(this,this._onExtentChangeHandler)),R.on("scale",D.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);l.hide(this._div);this._handles.forEach(function(R){R.remove()});this._handles=null},_onPanEndHandler:function(R){this._panning=!1;this._setViewState({center:R.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(R){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:R.extent.getCenter(),
scale:this._map.getScale()})},_onExtentChangeHandler:function(R){var ha=this._pinching||R.immediate;this._animateViewState({center:R.extent.getCenter(),scale:R.lod.scale},{immediate:ha});this._pinching=!1},_onScaleHandler:function(R){this._animation&&(this._animation.stop(),this._animation=null);var ha=this._map;if(ha._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:ha._zoomAnimDiv.extent.getCenter(),scale:ha._zoomAnimDiv.newLod.scale},{immediate:R.immediate});else{var S=
ha.navigationManager,X=S._dragOrigin;R=ha.extent.getCenter();var ka=X.x-.5*ha.width;X=X.y-.5*ha.height;var oa=ha.extent.getWidth()/ha.width;if(S._pinchScale){this._pinching=!0;S=S._pinchScale;var ta=oa/S;R.x-=ka*(ta-oa);R.y+=X*(ta-oa);ha=ha.__LOD.scale/S;this._setViewState({center:R,scale:ha})}else S._zoomEndExtent&&(this._pinching=!1,S=ha.getScale()/ha.navigationManager._zoomEndLod.scale,ta=oa/S,R.x-=ka*(ta-oa),R.y+=X*(ta-oa),ha=ha.navigationManager._zoomEndLod.scale,this._animateViewState({center:R,
scale:ha},{immediate:!1}))}}});f.ACCESS_TOKEN=null;f.supported=function(){return ca.detectWebGL()[0]};var U=function(){var R=window.performance||{},ha=R.now||R.webkitNow||R.msNow||R.oNow||R.mozNow;if(void 0!==ha)return function(){return ha.call(R)};var S=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-S}}();c=q("ff");k=q("ie");n=q("webkit");q=q("opera");
var la=(new Date).getTime(),V=window.requestAnimationFrame;V||(V=window[(n&&"webkit"||c&&"moz"||q&&"o"||k&&"ms")+"RequestAnimationFrame"])||(V=function(R){var ha=U(),S=Math.max(0,16-(ha-la)),X=window.setTimeout(function(){R(U())},S);la=ha+S;return X});return f});