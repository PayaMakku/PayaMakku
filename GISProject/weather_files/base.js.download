// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.40/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(D,B){D.bundle=B;return D})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,B,a){D=function(){return this}();var c=D.location,h=c.pathname;a=c.protocol;c={version:"3.40",_appBaseUrl:a+"//"+c.host+h.substring(0,h.lastIndexOf(h.split("/")[h.split("/").length-1]))};B.noGlobals||(D.esri=c);(c.dijit=c.dijit||{})._arcgisUrl=("http:"===a||"https:"===
a?a:"http:")+"//www.arcgis.com/sharing/rest";return c})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(D,B,a,c){a=function(){return this}();var h={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,
zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(g,e){B.publish("esri.Error",[g])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com",
"js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com",
"cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};c.config=h;D.noGlobals||(a.esriConfig=h);return h})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,B,a){var c=D("ff"),h=D("ie"),g=void 0===h&&7<=D("trident"),e=D("edge"),l=D("webkit"),r=D("opera"),k=D("chrome"),f=D("safari"),b=navigator.userAgent,d;(d=b.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(d[2].replace("_",".")));(d=b.match(/Android\s+(\d+(\.\d+)*)/i))&&
D.add("esri-android",parseFloat(d[1]));(d=b.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(d[1]));0<=b.indexOf("BlackBerry")&&0<=b.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(c||l)&&(document.createTouch||"ontouchstart"in B||B.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(d=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&D.add("esri-mobile",!!d);D.add("esri-pointer",
!c&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!B.PointerEvent));a._getDOMAccessor=function(m){var n="";c?n="Moz":l?n="Webkit":h?n="ms":r&&(n="O");return n+m.charAt(0).toUpperCase()+m.substr(1)};D.add("esri-phonegap",!!B.cordova);D.add("esri-cors",D("esri-phonegap")||B.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",B.FormData&&B.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in B&&"HTMLIFrameElement"in B&&"sandbox"in HTMLIFrameElement.prototype});
D.add("esri-secure-context",function(){if("isSecureContext"in B)return B.isSecureContext;if(B.location&&B.location.origin)return 0===B.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in B);D.add("esri-workers",B.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(b=D("esri-featurelayer-webgl")){var q=D("esri-mobile");d=q?1:2;q=q?1:3;"object"===typeof b?(b.maxDrillLevel=null==b.maxDrillLevel?d:b.maxDrillLevel,b.maxRecordCountFactor=null==b.maxRecordCountFactor?q:b.maxRecordCountFactor,
b.enablePBFQuery=null==b.enablePBFQuery?!0:b.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:d,maxRecordCountFactor:q,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!h||10<=h);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",g||e||9<=h||3.5<=c||4<=k||3.1<=f||10.5<=r||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",g||e||10<=h||4<=c||4<=k||3.1<=f||10.5<=r||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",
g||e||10<=c||12<=k||4<=f||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!B.document)return!1;var m=B.document.createElement("a");m.href="?'";return-1<m.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=k||11.1<=f));a._css=function(m){var n=D("esri-transforms3d");void 0!==m&&null!==m?n=m:n&&(k||f&&!D("esri-iphone"))&&
(n=!1);var t=n?"translate3d(":"translate(",z=n?k?",-1px)":",0px)":")",w=n?"scale3d(":"scale(",y=n?",1)":")",x=n?"rotate3d(0,0,1,":"rotate(",A=n?"matrix3d(":"matrix(",v=n?",0,0,":",",u=n?",0,0,0,0,1,0,":",",C=n?",0,1)":")";return{names:{transition:l&&"-webkit-transition"||c&&"MozTransition"||r&&"OTransition"||h&&"msTransition"||"transition",transform:l&&"-webkit-transform"||c&&"MozTransform"||r&&"OTransform"||h&&"msTransform"||"transform",transformName:l&&"-webkit-transform"||c&&"-moz-transform"||
r&&"-o-transform"||h&&"-ms-transform"||"transform",origin:l&&"-webkit-transform-origin"||c&&"MozTransformOrigin"||r&&"OTransformOrigin"||h&&"msTransformOrigin"||"transformOrigin",endEvent:l&&"webkitTransitionEnd"||c&&"transitionend"||r&&"oTransitionEnd"||h&&"MSTransitionEnd"||"transitionend"},translate:function(E,F){return t+E+"px,"+F+"px"+z},scale:function(E){return w+E+","+E+y},rotate:function(E){return x+E+"deg)"},matrix:function(E){return A+E.xx+","+E.xy+v+E.yx+","+E.yy+u+E.dx.toFixed(10)+(c&&
59>=c?"px,":",")+E.dy.toFixed(10)+(c&&59>=c?"px":"")+C},getScaleFromMatrix:function(E){if(!E)return 1;E=E.toLowerCase();var F=-1<E.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(E.substring(F.length,E.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=
D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,B,a,c,h){var g={show:function(e){if(e=g.getNode(e))e.style.display="block"},
getNode:function(e){return e&&e.domNode||e},hide:function(e){if(e=g.getNode(e))e.style.display="none"},toggle:function(e){if(e=g.getNode(e))e.style.display="none"===e.style.display?"block":"none"},documentBox:8>=h("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(e){if(e=this.getNode(e)){var l=0,r=0,k=0,f=0,b=0,d=0;return[B.connect(e,"ontouchstart",function(q){l=q.touches[0].screenX;r=q.touches[0].screenY;
k=e.scrollWidth;f=e.scrollHeight;b=e.clientWidth;d=e.clientHeight}),B.connect(e,"ontouchmove",function(q){q.preventDefault();var m=e.firstChild;m instanceof Text&&(m=e.childNodes[1]);var n=m._currentX||0,t=m._currentY||0;n+=q.touches[0].screenX-l;0<n?n=0:0>n&&Math.abs(n)+b>k&&(n=-1*(k-b));m._currentX=n;t+=q.touches[0].screenY-r;0<t?t=0:0>t&&Math.abs(t)+d>f&&(t=-1*(f-d));m._currentY=t;c.set(m,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+n+"px, "+t+"px)"});l=q.touches[0].screenX;
r=q.touches[0].screenY})]}}};a.mixin(D,g);return g})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,B,a,c,h,g,e,l,r){function k(z,w,y,x){(w=w&&w[z])?w={formatType:w.formatType,options:w}:x&&-1!==D.indexOf(x.properties||"",z)?w={formatType:x.formatter||"DateString",options:null}:y&&-1!==D.indexOf(y.properties||"",z)&&(w={formatType:y.formatter||"NumberFormat",options:null});
return w}function f(z,w,y){return[c.isString(z)?z.split(""):z,w||a.global,c.isString(y)?new Function("item","index","array",y):y]}function b(z){return void 0!==z&&null!==z}function d(z){return b(z)?z:""}function q(z,w,y,x){var A=y.match(/([^\(]+)(\([^\)]+\))?/i);y=c.trim(A[1]);var v=A[2]?c.trim(A[2]):null;A=w[z];x=x||(v?B.fromJson(v.replace(/^\(/,"({").replace(/\)$/,"})")):{});v=x.utcOffset;if(-1===D.indexOf(n,y))y=c.getObject(y),c.isFunction(y)&&(A=y(A,z,w,x));else if("number"===typeof A||"string"===
typeof A&&A&&!isNaN(Number(A)))switch(A=Number(A),y){case "NumberFormat":return e.format(A,x);case "DateString":z=new Date(A);if(x.local||x.systemLocale)return x.systemLocale?z.toLocaleDateString()+(x.hideTime?"":" "+z.toLocaleTimeString()):z.toDateString()+(x.hideTime?"":" "+z.toTimeString());z=z.toUTCString();x.hideTime&&(z=z.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return z;case "DateFormat":return z=new Date(A),b(v)&&(z=h.add(z,"minute",z.getTimezoneOffset()-v)),l.format(z,x)}return d(A)}
function m(z,w){var y;if(w)for(y in z)z.hasOwnProperty(y)&&(void 0===z[y]?delete z[y]:z[y]instanceof Object&&m(z[y],!0));else for(y in z)z.hasOwnProperty(y)&&void 0===z[y]&&delete z[y];return z}var n=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;g={valueOf:function(z,w){for(var y in z)if(z[y]==w)return y;return null},stripTags:function(z){if(z){var w=typeof z;if("string"===w)z=z.replace(t,"");else if("object"===w)for(var y in z)(w=z[y])&&"string"===typeof w&&(w=w.replace(t,"")),z[y]=
w}return z},substitute:function(z,w,y){if(b(y))if(c.isObject(y)){var x=y.first;var A=y.dateFormat;var v=y.numberFormat;var u=y.format}else x=y;if(w&&"${*}"!==w)return c.replace(w,c.hitch({obj:z},function(E,F){var G=F.split(":"),H;return 1<G.length?(F=G[0],G.shift(),(H=u&&u[G[0]])?G=H.formatType:(G=G.join(":"),H=null),q(F,this.obj,G,H)):(H=k(F,u,v,A))?q(F,this.obj,H.formatType,H.options):d(this.obj[F])}),/\$\{([^\}]+)\}/g);w=[];for(var C in z)if(y=(y=k(C,u,v,A))?q(C,z,y.formatType,y.options):z[C],
w.push(C+" \x3d "+d(y)+"\x3cbr/\x3e"),x)break;return w.join("")},filter:function(z,w,y){w=f(z,y,w);y={};var x;z=w[0];for(x in z)w[2].call(w[x],z[x],x,z)&&(y[x]=z[x]);return y},startsWith:function(z,w,y){y=y||0;return z.indexOf(w,y)===y},endsWith:function(z,w,y){if("number"!==typeof y||!isFinite(y)||Math.floor(y)!==y||y>z.length)y=z.length;y-=w.length;z=z.indexOf(w,y);return-1!==z&&z===y},isDefined:b,fixJson:m,isObject:function(z){return z&&"object"===typeof z},isString:function(z){return"string"===
typeof z},mixin:function(z,w){for(var y in w)w.hasOwnProperty(y)&&(z[y]=w[y]);return z},clone2DArray:function(z){if(z=z?z.slice(0):null){var w,y=z.length;for(w=0;w<y;w++)z[w]=z[w]?z[w].slice(0):null}return z},clone3DArray:function(z){if(z=z?z.slice(0):null){var w,y=z.length;for(w=0;w<y;w++){z[w]=z[w]?z[w].slice(0):null;var x=z[w];if(x){var A,v=x.length;for(A=0;A<v;A++)x[A]=x[A]?x[A].slice(0):null}}}return z}};c.mixin(r,g);r._isDefined=b;r._getParts=f;r._sanitize=m;return g})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(D,B,a,c,h,g,e,l,r,k){var f={},b=l.defaults.io,d=/^[a-z][a-z0-9\+\-\.]*:/i,q=/^\s*http:/i,m=/^\s*https:/i,n=/:\d+$/,t=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;f.isHTTP=function(w){var y=c.location.protocol;return null==w?"http:"===y||"https:"===y:w?"https:"===y:"http:"===y};f.getProtocolForWebResource=function(w){return f.isHTTP()?c.location.protocol:w?"https:":"http:"};f.urlToObject=function(w){var y={},x=new a(w),A=w.indexOf("?");null===x.query?y={path:w,query:null}:(y.path=w.substring(0,
A),y.query=h.queryToObject(x.query));x.fragment&&(y.hash=x.fragment,null===x.query&&(y.path=y.path.substring(0,y.path.length-(x.fragment.length+1))));return y};f.getProxyUrl=function(w,y){var x=D.isString(w)?0===D.trim(w).toLowerCase().indexOf("https:"):w,A=b.proxyUrl,v,u=k.io.proxyNotSet;D.isString(w)&&(v=f.getProxyRule(w))&&(A=v.proxyUrl);if(!A)throw Error(u);if(x&&!1!==y&&0!==c.location.href.toLowerCase().indexOf("https:")&&(x=A,0!==x.toLowerCase().indexOf("http")&&(x=f.getAbsoluteUrl(x)),x=x.replace(/^http:/i,
"https:"),f.canUseXhr(x))){A=x;var C=1}A=f.urlToObject(A);A._xo=C;return A};f.addProxy=function(w){var y=f.getProxyRule(w),x;y?x=f.urlToObject(y.proxyUrl):b.alwaysUseProxy&&(x=f.getProxyUrl());x&&(y=f.urlToObject(w),w=x.path+"?"+y.path,(x=h.objectToQuery(D.mixin(x.query||{},y.query)))&&(w+="?"+x));return w};f.addProxyRule=function(w){var y=w.urlPrefix=f.urlToObject(w.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),x=b.proxyRules,A,v=x.length,u=v;for(A=0;A<v;A++){var C=
x[A].urlPrefix;if(0===y.indexOf(C)){if(y.length===C)return-1;u=A;break}else 0===C.indexOf(y)&&(u=A+1)}x.splice(u,0,w);return u};f.getProxyRule=function(w){var y=b.proxyRules,x=y.length,A=f.urlToObject(w).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(w=0;w<x;w++)if(0===A.indexOf(y[w].urlPrefix)){var v=y[w];break}return v};f.hasSameOrigin=function(w,y,x){w=w.toLowerCase();y=y.toLowerCase();var A=c.location.href.toLowerCase();w=0===w.indexOf("http")?new a(w):A=new a(A);
y=0===y.indexOf("http")?new a(y):D.isString(A)?new a(A):A;return(x||w.scheme===y.scheme)&&w.host===y.host&&w.port===y.port};f.canUseXhr=function(w,y){var x=r("esri-phonegap")?!0:!1,A=f.hasSameOrigin,v=b.corsEnabledServers,u,C=-1;!x&&r("esri-cors")&&v&&v.length&&(x=B.some(v,function(E,F){var G=!E||"object"!==typeof E||E instanceof RegExp?E:E.host;if(G instanceof RegExp){if(G.test(w))return C=F,!0}else if(G&&(u=0!==G.trim().toLowerCase().indexOf("http"),A(w,u?"http://"+G:G)||u&&A(w,"https://"+G)))return C=
F,!0;return!1}));return y?C:x};f.getAbsoluteUrl=function(w){var y=f.getProtocolForWebResource();return D.isString(w)&&!d.test(w)?0===w.indexOf("//")?y+w:0===w.indexOf("/")?y+"//"+c.location.host+w:g._appBaseUrl+w:w};f.fixUrl=function(w){w=D.trim(w);w=f.getAbsoluteUrl(w);w=f.normalizeSlashes(w);w=w.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");w=f.downgradeToHTTP(w);return w=f.upgradeToHTTPS(w)};f.normalize=function(w){return f.fixUrl(w)};f.normalizeSlashes=function(w){if(/^https?:\/\//i.test(w)){var y=
w.indexOf("?");if(-1<y){var x=w.slice(0,y);var A=w.slice(y+1)}else x=w;w=x.replace(/\/{2,}/g,"/");w=w.replace("/","//");A&&(w+="?"+A)}return w};f.downgradeToHTTP=function(w){return f.isHTTP(!1)&&m.test(w)&&f.hasSameOrigin(c.location.href,w,!0)&&!f.canUseXhr(w)?w.replace(m,"http:"):w};f.upgradeToHTTPS=function(w){var y=b.httpsDomains,x=f.isHTTP(!1),A=f.isHTTP(!0);if(!q.test(w))return w;w=D.trim(w);var v=w.indexOf("/",7);v=-1===v?w:w.slice(0,v);v=v.toLowerCase().slice(7);if(n.test(v))if(e.endsWith(v,
":80"))v=v.slice(0,-3),w=w.replace(":80","");else return w;if(x&&v===c.location.host&&(!t.test(w)||!f.canUseXhr(w)))return w;x=!1;if(A&&v===c.location.host)x=!0;else if(y)for(var u=0;u<y.length;u++){var C=y[u];if(v===C||e.endsWith(v,"."+C)){x=!0;break}}x||!A||b.alwaysUseProxy||f.getProxyRule(w)||(x=!0);x&&(w=w.replace(q,"https:"));return w};l=k.widgets.popup;var z=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:l.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:l.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:l.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:l.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:l.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:l.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:l.NLS_openLinkInApp}];f.getURIInfo=function(w){var y;B.some(z,function(x){x.pattern.test(w)&&(y=x);return!!y});return y};f.isKnownURI=function(w){return!!f.getURIInfo(w)};f.base64UrlEncode=function(w){return btoa(String.fromCharCode.apply(null,w)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};D.mixin(g,f);g._getProxyUrl=f.getProxyUrl;g._getProxiedUrl=f.addProxy;g._hasSameOrigin=f.hasSameOrigin;g._canDoXOXHR=f.canUseXhr;g._getAbsoluteUrl=f.getAbsoluteUrl;
g.fixUrl=f.fixUrl;return f})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z){function w(L){L=new g(L);return(L.host+(L.port?":"+L.port:"")).toLowerCase()}function y(L){return this._xhr?this._xhr.getResponseHeader(L):
null}function x(L,K){var Q=b.objectToQuery(L.content);Q&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+Q);if(2E3<L.url.length){if("data:"!==L.url.toLowerCase().slice(0,5))return Q=new c,Q.reject(h.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),Q;if(3E6<L.url.length)return Q=new c,Q.reject(h.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),Q}var W=new Image;K.allowImageDataAccess&&(W.crossOrigin=
L.withCredentials?"use-credentials":"anonymous");var ba=!1,S=new c(function(X){ba=!0;W.onload=W.onerror=W.onabort=null;W.src=""});Q=function(X){W.onload=W.onerror=W.onabort=null;ba||S.reject(Error("Unable to load the resource"))};W.onload=function(){W.onload=W.onerror=W.onabort=null;ba||S.resolve(this)};W.onerror=Q;W.onabort=Q;W.alt="";W.src=L.url;return S}function A(L,K,Q,W){var ba=!1,S=!1,X=!1;if(n.isDefined(K))if(h.isObject(K)){ba=!!K.useProxy;S=!!K.usePost;X=!!K.returnProgress;var aa=K.crossOrigin}else ba=
!!K;L=h.mixin({},L);delete L._credential;L._ssl&&(L.url=L.url.replace(/^http:/i,"https:"));10>m("ie")&&!O.test(L.url)&&(L.url=encodeURI(L.url));var M=L.content,da=L.url,ea=Q&&L.form,Z=J;aa=n.isDefined(aa)?aa:Z.useCors;L.load=function(Ma){if(Ma){if(Ma.error){var eb=h.mixin(Error(),Ma.error);eb.log=!!a.isDebug}else"error"===Ma.status&&(eb=h.mixin(Error(),Ma),eb.log=!!a.isDebug);eb&&(L.failOk=!eb.log,n.isDefined(eb.httpCode)||(eb.httpCode=eb.code))}return eb||Ma};L.error=function(Ma,eb){eb&&eb.xhr&&
eb.xhr.abort();Ma instanceof Error||(Ma=h.mixin(Error(),Ma));Ma.log=!!a.isDebug;L.failOk=!Ma.log;Z.errorHandler(Ma,eb);return Ma};L._token&&(L.content=L.content||{},L.content.token=L._token);var ka=0;if(M&&da){var va=b.objectToQuery(M);ka=va.length+da.length+1;m("esri-url-encodes-apostrophe")&&(ka=va.replace(/'/g,"%27").length+da.length+1)}L.timeout=n.isDefined(L.timeout)?L.timeout:Z.timeout;L.handleAs=L.handleAs||"json";try{var Ea=aa&&t.canUseXhr(L.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(L.url),
Ga=t.hasSameOrigin(L.url,window.location.href)||Ea,na=S||Q||ka>Z.postLength?!0:!1,ma=Ga||-1===L.handleAs.indexOf("json")||!L.callbackParamName||Q?!1:!0,ya=t.getProxyRule(L.url)||Z.alwaysUseProxy||ba||!("image"===L.handleAs&&!K.allowImageDataAccess||ma&&!na||Ga)?!0:!1;Q&&!m("esri-file-upload")&&!ya&&Ea&&(ya=!0);if(ya){var za=t.getProxyUrl(da,aa);var Ba=za.path;za._xo&&(Ea=!0);!na&&Ba.length+1+ka>Z.postLength&&(na=!0);L.url=Ba+"?"+da;if(na)L.content=h.mixin(za.query||{},M);else{var ha=b.objectToQuery(h.mixin(za.query||
{},M));ha&&(L.url+="?"+ha);L.content=null}}if(!ma||na||ya){var qa=L.headers;!Ea||qa&&qa.hasOwnProperty("X-Requested-With")||(qa=L.headers=qa||{},qa["X-Requested-With"]=null);if(Q){var T=L.callbackParamName||"callback.html",Ha=L.callbackElementName||"textarea",Ja,fa,Ya=ea.elements?ea.elements.length:0;if(M=L.content)for(Ja in M.token&&-1<da.toLowerCase().indexOf("/sharing/servers/")&&(da+=(-1===da.indexOf("?")?"?":"\x26")+"token\x3d"+M.token,L.url=ya?Ba+"?"+da:da,delete M.token),M){var Xa=M[Ja];if(n.isDefined(Xa)){var Ca=
null;for(fa=0;fa<Ya;fa++){var Y=ea.elements[fa];if(Y.name===Ja){Ca=Y;break}}Ca?Ca.value=Xa:W?ea.append(Ja,Xa):ea.appendChild(f.create("input",{type:"hidden",name:Ja,value:Xa}))}}if(m("esri-file-upload")){B.forEach(ea.elements,function(Ma){Ma.name===T&&ea.removeChild(Ma)});var la=W?ea:new FormData(ea);if(11<=m("safari")&&"entries"in la&&"delete"in la){W=[];for(var sa=la.entries(),U=sa.next();!U.done;){var ia=U.value;ia[1]instanceof File&&""===ia[1].name&&W.push(ia[0]);U=sa.next()}W.forEach(function(Ma){la["delete"](Ma)})}L.contentType=
!1;L.postData=la;delete L.form}else{ea.enctype="multipart/form-data";9>m("ie")&&(ea.encoding="multipart/form-data");ea.method="post";B.some(ea.elements,function(Ma){return Ma.name===T})||ea.appendChild(f.create("input",{type:"hidden",name:T,value:Ha}));if(-1!==da.toLowerCase().indexOf("addattachment")||-1!==da.toLowerCase().indexOf("updateattachment"))da+=(-1===da.indexOf("?")?"?":"\x26")+T+"\x3d"+Ha,L.url=ya?Ba+"?"+da:da;delete L.content}}if(Ea&&!L.hasOwnProperty("withCredentials")&&"with-credentials"===
J.useCors){da=ya?Ba:da;var ua=t.canUseXhr(da,!0),wa=-1<ua?J.corsEnabledServers[ua]:null;if(wa&&wa.hasOwnProperty("withCredentials"))wa.withCredentials&&(L.withCredentials=!0);else if(d.id){var Fa=d.id.findServerInfo(da);Fa&&Fa.webTierAuth&&(L.withCredentials=!0)}}L=H?H(L):L;if("image"===L.handleAs)return x(L,K);if(na){if(Q&&!m("esri-file-upload")){var Da=new c(function(){La.cancel()});var La=k.post(L.url,L).then(function(Ma){Da.resolve(Ma)}).otherwise(function(Ma){Da.reject(Ma)});Da.addCallback(function(Ma){return L.load(Ma)});
Da.addErrback(function(Ma){return L.error(Ma)});return Da}!ya&&m("safari")&&(L.url+=(-1===L.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+R++);if(X){L.uploadProgress=!0;L.data=L.postData;L.query=L.content;Da=new c(function(){Wa.cancel()});var Wa=l.post(L.url,L).then(function(Ma){Da.resolve(Ma)},function(Ma){Da.reject(Ma)},function(Ma){Da.progress({transferType:Ma.transferType,loaded:Ma.loaded,total:Ma.total})});Da.addCallback(function(Ma){return L.load(Ma)});Da.addErrback(function(Ma){return L.error(Ma)});
return Da}return e.post(L)}return e.get(L)}L=H?H(L):L;L.jsonp=L.callbackParamName;L.query=L.content;Da=new c(function(){Va.cancel()});var Va=r.get(L.url,L).then(function(Ma){Da.resolve(Ma)}).otherwise(function(Ma){Da.reject(Ma)});Da.addCallback(function(Ma){return L.load(Ma)});Da.addErrback(function(Ma){return L.error(Ma)});return Da}catch(Ma){return Da=new c,Da.errback(L.error(Ma)),Da}}function v(L){var K=J.corsStatus,Q=t.canUseXhr(L,!0);-1<Q&&J.corsEnabledServers.splice(Q,1);var W=new c;W.reject({log:!!a.isDebug});
K[w(L)]=W.promise;return Q}function u(L){var K=J.corsStatus;try{var Q=w(L);if(J.corsDetection&&J.useCors&&m("esri-cors")&&L&&-1!==L.toLowerCase().indexOf("/rest/services")&&!t.hasSameOrigin(L,window.location.href)&&!t.canUseXhr(L)){if(K[Q]&&!K[Q].isCanceled())return K[Q];var W=new c(z._dfdCanceller);K[Q]=W.promise;var ba=e.get({url:L.substring(0,L.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*J.corsDetectionTimeout});
W._pendingDfd=ba;ba.then(function(S){S?(t.canUseXhr(L)||J.corsEnabledServers.push(Q),W.resolve()):W.reject()},function(S){W.reject(S)});return W.promise}}catch(S){}return P}function C(L){H=L}function E(L,K,Q,W){function ba(Ga){Ga._pendingDfd=A(Q,W,Z,ea);if(!Ga._pendingDfd){Ga.ioArgs=Ga._pendingDfd&&Ga._pendingDfd.ioArgs;var na=Error("Deferred object is missing");na.log=!!a.isDebug;Ga.errback(na);Ga._pendingDfd=null;return Ga}Ga._pendingDfd.addCallback(function(ma){if(!ma)return ma;var ya=Ga._pendingDfd&&
Ga._pendingDfd.ioArgs&&Ga._pendingDfd.ioArgs.xhr;if(!ya)return ma;if(ya=ya.getResponseHeader("Content-Type"))if(ya=ya.toLowerCase(),-1===ya.indexOf("text/plain")&&-1===ya.indexOf("application/json"))return ma;if(ma instanceof ArrayBuffer&&750>=ma.byteLength)ya=new Blob([ma]);else if(ma instanceof Blob&&750>=ma.size)ya=ma;else return ma;var za=new c,Ba=new FileReader;Ba.readAsText(ya);Ba.onloadend=function(){if(!Ba.error)try{var ha=JSON.parse(Ba.result);if(ha.error)var qa=ha.error}catch(T){}qa?(qa=
h.mixin(Error(),qa),qa.log=!!a.isDebug,null==qa.httpCode&&(qa.httpCode=qa.code),za.reject(qa)):za.resolve(ma)};return za.promise}).addCallback(function(ma){Ga.ioArgs=Ga._pendingDfd&&Ga._pendingDfd.ioArgs;W.returnFullResponse&&(ma={data:ma,_xhr:Ga.ioArgs&&Ga.ioArgs.xhr,getHeader:y});Ga.callback(ma);Ga._pendingDfd=null}).addErrback(function(ma){if(ma){var ya=ma.code;var za=ma.subcode;var Ba=(Ba=ma.messageCode)&&Ba.toUpperCase()}if(ma&&403==ya&&(4==za||ma.message&&-1<ma.message.toLowerCase().indexOf("ssl")&&
-1===ma.message.toLowerCase().indexOf("permission"))){if(!Q._ssl){Q._ssl=Q._sslFromServer=!0;E(Ga,!0,Q,W);return}}else if(ma&&415==ma.status){if(v(Q.url),!Q._err415){Q._err415=1;E(Ga,!0,Q,W);return}}else if(d.id&&-1!==B.indexOf(d.id._errorCodes,ya)&&!d.id._isPublic(Q.url)&&!X&&(403!=ya||-1===B.indexOf(I,Ba)&&(!n.isDefined(za)||2==za&&Q._token))){Ga._pendingDfd=d.id.getCredential(Q.url,{token:Q._token,error:ma});Ga._pendingDfd.addCallback(function(ha){Q._token=ha.token;Q._credential=ha;Q._ssl=Q._sslFromServer||
ha.ssl;E(Ga,!0,Q,W)}).addErrback(function(ha){Ga.errback(ha);Ga._pendingDfd=null});return}Ga.ioArgs=Ga._pendingDfd&&Ga._pendingDfd.ioArgs;Ga.isFulfilled()||Ga.errback(ma);Ga._pendingDfd=null}).then(null,null,function(ma){Ga.progress(ma)})}var S=Q.form,X=W.disableIdentityLookup,aa=W._preLookup,M=!1;if(m("esri-workers")&&!1!==J.useWorkers)if(!0===W.useWorkers||!0===J.useWorkers)M=!0;else if(W.workerOptions){var da=W.workerOptions;if(da.callback||da.worker&&da.worker.worker instanceof Worker)M=!0}var ea=
S&&m("esri-file-upload")&&S instanceof FormData,Z=S&&(S.elements?B.some(S.elements,function(Ga){return"file"===Ga.type}):ea),ka=-1!==Q.url.toLowerCase().indexOf("token\x3d")||Q.content&&Q.content.token||Z&&B.some(S.elements,function(Ga){return"token"===Ga.name})?1:0;if(!K){L.addCallback(function(Ga){if((/\/sharing\/rest\/accounts\/self/i.test(Q.url)||/\/sharing\/rest\/portals\/self/i.test(Q.url))&&!ka&&!Q._token&&Ga&&Ga.user&&Ga.user.username){J.webTierAuthServers.push(w(Q.url));Ga=J.corsEnabledServers;
var na=t.canUseXhr(Q.url,!0),ma={host:w(Q.url),withCredentials:!0};if(-1===na)Ga.push(ma);else{var ya=Ga[na];ya instanceof RegExp?(ma.host=ya,Ga.splice(na,1,ma)):"object"===typeof ya?ya.withCredentials=!0:Ga.splice(na,1,ma)}}if(Ga=Q._credential)if(na=(na=d.id.findServerInfo(Ga.server))&&na.owningSystemUrl)na=na.replace(/\/?$/,"/sharing"),(Ga=d.id.findCredential(na,Ga.userId))&&-1===d.id._getIdenticalSvcIdx(na,Ga)&&Ga.resources.splice(0,0,na)});L.addBoth(function(Ga){delete Q._credential;!Ga||m("ie")&&
Ga.nodeType||(Ga._ssl=Q._ssl)});var va=Q.load,Ea=Q.error;va&&L.addCallback(function(Ga){var na=L._pendingDfd;na=na&&na.ioArgs;return va.call(na&&na.args,Ga,na)});Ea&&L.addErrback(function(Ga){var na=L._pendingDfd;na=na&&na.ioArgs;return Ea.call(na&&na.args,Ga,na)})}!d.id||ka||Q._token||d.id._isPublic(Q.url)||X&&!aa||!(K=d.id.findCredential(Q.url))||(Q._token=K.token,Q._ssl=K.ssl);M?W.workerOptions&&W.workerOptions.worker?(G||(G=e),e=W.workerOptions.worker,ba(L)):D(["./workers/RequestClient"],function(Ga){G||
(G=e);if(W.workerOptions){var na=W.workerOptions;e=Ga.getClient(na.callback,na.cbFunction)}else e=Ga.getClient();ba(L)}):(G&&(e=G,G=null),ba(L));return L}function F(L,K){L.url=t.fixUrl(L.url);K=K||{};var Q=new c(z._dfdCanceller),W=u(L.url);Q._pendingDfd=W;W.always(function(ba){ba&&"cancel"===ba.dojoType?Q.reject(ba):E(Q,!1,L,K)});return Q}var G=null,H,J=q.defaults.io,I=["COM_0056","COM_0057","SB_0008"],R=0,O=/%[0-9A-F]{2}/i,P=function(){var L=new c;L.resolve();return L.promise}();F._makeRequest=A;
F._processRequest=E;F._disableCors=v;F._detectCors=u;F.setRequestPreCallback=C;d.request=F;d._makeRequest=A;d._processRequest=E;d._disableCors=v;d._detectCors=u;d.setRequestPreCallback=C;return F})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,B,a,c,h,g){function e(){var t=document.createElement("iframe");t.name="esri_core_jsonp_iframe";t.style.display="none";t.setAttribute("sandbox","allow-scripts");
if(!g("ff")&&"srcdoc"in t){var z=D.toUrl("dojo/dojo.js"),w=h.replace("../../../dojo/dojo.js",z);z=z.slice(0,-7);w=w.replace("../../../dojo/",z);t.srcdoc=w}else w=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===w.indexOf("https:")&&(w=w.replace("https:","http:")),t.src=w;document.body.appendChild(t);return t}function l(){var t=new MessageChannel;t.port1.addEventListener("message",r);t.port1.start();return t}function r(t){var z=t.data;if("ready"===z){z=0;for(var w=m;z<w.length;z++)t=
w[z],f(t,d);m=null}else if(t=n[z.id])delete n[z.id],z.isError?t.dfd.reject(Error(z.message)):t.dfd.resolve(z.response)}function k(t,z){t.addEventListener("load",function(){t.contentWindow.postMessage("init","*",[z.port2])})}function f(t,z){n[t.message.id]=t;z.port1.postMessage(t.message)}Object.defineProperty(B,"__esModule",{value:!0});var b,d,q=0,m=[],n={};B.get=function(t,z){if(!g("esri-script-sandbox"))return c.get(t,z);var w=null;z&&(w={jsonp:z.jsonp,preventCache:z.preventCache,query:z.query,
timeout:z.timeout});var y=new a(function(){if(m){var A=m.indexOf(x);-1<A&&m.splice(A,1)}else x.message.id in n&&delete n[x.message.id]}),x={dfd:y,message:{id:"id"+(++q+Math.random()),url:t,options:w}};b||(b=e(),d=l(),k(b,d));m?m.push(x):f(x,d);return y.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){function b(u,C){u.canDelete&&t._remove(u.id,
C.options.frameDoc,!0)}function d(u){v&&v.length&&(h.forEach(v,function(C){t._remove(C.id,C.frameDoc);C.frameDoc=null}),v=[]);return u.options.jsonp?!u.data:!0}function q(u){return!!this.scriptLoaded}function m(u){return(u=u.options.checkString)&&eval("typeof("+u+') !\x3d\x3d "undefined"')}function n(u,C){if(this.canDelete){var E=this.response.options;v.push({id:this.id,frameDoc:E.ioArgs?E.ioArgs.frameDoc:E.frameDoc});E.ioArgs&&(E.ioArgs.frameDoc=null);E.frameDoc=null}C?this.reject(C):this.resolve(u)}
function t(u,C,E){var F=a.parseArgs(u,a.deepCopy({},C));u=F.url;C=F.options;var G=a.deferred(F,b,d,C.jsonp?null:C.checkString?m:q,n);g.mixin(G,{id:z+w++,canDelete:!1});C.jsonp&&((new RegExp("[?\x26]"+C.jsonp+"\x3d")).test(u)||(u+=(~u.indexOf("?")?"\x26":"?")+C.jsonp+"\x3d"+(C.frameDoc?"parent.":"")+z+"_callbacks."+G.id),G.canDelete=!0,A[G.id]=function(I){F.data=I;G.handleResponse(F)});a.notify&&a.notify.emit("send",F,G.promise.cancel);if(!C.canAttach||C.canAttach(G)){var H=t._attach(G.id,u,C.frameDoc,
function(I){if(!(I instanceof Error)){var R=Error("Error loading "+(I.target?I.target.src:"script"));R.source=I;I=R}G.reject(I);t._remove(G.id,C.frameDoc,!0)});if(!C.jsonp&&!C.checkString)var J=e(H,y,function(I){if("load"===I.type||x.test(H.readyState))J.remove(),G.scriptLoaded=I})}B(G);return E?G:G.promise}k.add("script-readystatechange",function(u,C){return"undefined"!==typeof C.createElement("script").onreadystatechange&&("undefined"===typeof u.opera||"[object Opera]"!==u.opera.toString())});var z=
D.id.replace(/[\/\.\-]/g,"_"),w=0,y=k("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,A=c.global[z+"_callbacks"]={},v=[];t.get=t;t._attach=function(u,C,E,F){E=E||f.doc;var G=E.createElement("script");if(F)e.once(G,"error",F);G.type="text/javascript";try{G.src=C}catch(H){F&&F(G)}G.id=u;G.async=!0;G.charset="utf-8";return E.getElementsByTagName("head")[0].appendChild(G)};t._remove=function(u,C,E){r.destroy(l.byId(u,C));A[u]&&(E?A[u]=function(){delete A[u]}:delete A[u])};t._callbacksProperty=
z+"_callbacks";return t})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(x){return!this.isFulfilled()}function q(x){return!!this._finished}function m(x,A){if(!A)try{var v=x.options,u=t.doc(t._frame),C=v.handleAs;if("html"!==
C){if("xml"===C)if("html"===u.documentElement.tagName.toLowerCase()){l("a",u.documentElement).orphan();var E=u.documentElement.innerText||u.documentElement.textContent;E=E.replace(/>\s+</g,"\x3e\x3c");x.text=g.trim(E)}else x.data=u;else x.text=u.getElementsByTagName("textarea")[0].value;h(x)}else x.data=u}catch(F){A=F}A?this.reject(A):this._finished?this.resolve(x):this.reject(Error("Invalid dojo/request/iframe request state"))}function n(x){this._callNext()}function t(x,A,v){var u=c.parseArgs(x,
c.deepCreate(y,A),!0);x=u.url;A=u.options;if("GET"!==A.method&&"POST"!==A.method)throw Error(A.method+" not supported by dojo/request/iframe");t._frame||(t._frame=t.create(t._iframeName,w+"();"));x=c.deferred(u,null,d,q,m,n);x._callNext=function(){this._calledNext||(this._calledNext=!0,t._currentDfd=null,t._fireNextRequest())};x._legacy=v;t._dfdQueue.push(x);t._fireNextRequest();a(x);return v?x:x.promise}var z=D.id.replace(/[\/\.\-]/g,"_"),w=z+"_onload";b.global[w]||(b.global[w]=function(){var x=
t._currentDfd;if(x){var A=k.byId(x.response.options.form)||x._tmpForm;if(A){for(var v=x._contentToClean,u=0;u<v.length;u++)for(var C=v[u],E=0;E<A.childNodes.length;E++){var F=A.childNodes[E];if(F.name===C){f.destroy(F);break}}x._originalAction&&A.setAttribute("action",x._originalAction);x._originalMethod&&(A.setAttribute("method",x._originalMethod),A.method=x._originalMethod);x._originalTarget&&(A.setAttribute("target",x._originalTarget),A.target=x._originalTarget)}x._tmpForm&&(f.destroy(x._tmpForm),
delete x._tmpForm);x._finished=!0}else t._fireNextRequest()});var y={method:"POST"};t.create=function(x,A,v){if(b.global[x])return b.global[x];if(b.global.frames[x])return b.global.frames[x];v||(r("config-useXDomain")&&r("config-dojoBlankHtmlUrl"),v=r("config-dojoBlankHtmlUrl")||B.toUrl("dojo/resources/blank.html"));A=f.place('\x3ciframe id\x3d"'+x+'" name\x3d"'+x+'" src\x3d"'+v+'" onload\x3d"'+A+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
b.body());return b.global[x]=A};t.doc=function(x){if(x.contentDocument)return x.contentDocument;var A=x.name;if(A){var v=b.doc.getElementsByTagName("iframe");if(x.document&&v[A].contentWindow&&v[A].contentWindow.document)return v[A].contentWindow.document;if(b.doc.frames[A]&&b.doc.frames[A].document)return b.doc.frames[A].document}return null};t.setSrc=function(x,A,v){x=b.global.frames[x.name];x.contentWindow&&(x=x.contentWindow);try{v?x.location.replace(A):x.location=A}catch(u){}};t._iframeName=
z+"_IoIframe";t._notifyStart=function(){};t._dfdQueue=[];t._currentDfd=null;t._fireNextRequest=function(){try{if(!t._currentDfd&&t._dfdQueue.length){do var x=t._currentDfd=t._dfdQueue.shift();while(x&&(x.canceled||x.isCanceled&&x.isCanceled())&&t._dfdQueue.length);if(!x||x.canceled||x.isCanceled&&x.isCanceled())t._currentDfd=null;else{var A=x.response,v=A.options,u=x._contentToClean=[],C=k.byId(v.form),E=c.notify,F=v.data||null;if(!x._legacy&&"POST"===v.method&&!C)C=x._tmpForm=f.create("form",{name:z+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},b.body());else if("GET"===v.method&&C&&-1<A.url.indexOf("?")){var G=A.url.slice(A.url.indexOf("?")+1);F=g.mixin(e.queryToObject(G),F)}if(C){if(!x._legacy){var H=C;do H=H.parentNode;while(H&&H!==b.doc.documentElement);H||(C.style.position="absolute",C.style.left="-1000px",C.style.top="-1000px",b.body().appendChild(C));C.name||(C.name=z+"_form")}if(F){H=function(K,Q){f.create("input",{type:"hidden",name:K,value:Q},C);u.push(K)};for(var J in F){var I=
F[J];if(g.isArray(I)&&1<I.length)for(G=0;G<I.length;G++)H(J,I[G]);else{var R=l("input[name\x3d'"+J+"']",C);-1==R.indexOf()?H(J,I):R.val(I)}}}var O=C.getAttributeNode("action"),P=C.getAttributeNode("method"),L=C.getAttributeNode("target");A.url&&(x._originalAction=O?O.value:null,O?O.value=A.url:C.setAttribute("action",A.url));x._legacy?P&&P.value||(P?P.value=v.method:C.setAttribute("method",v.method)):(x._originalMethod=P?P.value:null,P?P.value=v.method:C.setAttribute("method",v.method));x._originalTarget=
L?L.value:null;L?L.value=t._iframeName:C.setAttribute("target",t._iframeName);C.target=t._iframeName;E&&E.emit("send",A,x.promise.cancel);t._notifyStart(A);C.submit()}else v="",A.options.data&&(v=A.options.data,"string"!==typeof v&&(v=e.objectToQuery(v))),H=A.url+(-1<A.url.indexOf("?")?"\x26":"?")+v,E&&E.emit("send",A,x.promise.cancel),t._notifyStart(A),t.setSrc(t._frame,H,!0)}}}catch(K){x.reject(K)}};c.addCommonMethods(t,["GET","POST"]);return t})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(D,B,a,c,h){function g(r){for(;r.childNodes[0]&&1==r.childNodes[0].nodeType;)r=r.childNodes[0];return r}function e(r,k){"string"==typeof r?(r=c.toDom(r,k&&k.ownerDocument),11==r.nodeType&&(r=r.childNodes[0])):1==r.nodeType&&r.parentNode&&(r=r.cloneNode(!1));return r}var l=D.NodeList;B.extend(l,{_placeMultiple:function(r,k){for(var f="string"==typeof r||r.nodeType?D(r):r,b=[],d=0;d<f.length;d++)for(var q=f[d],m=this.length,n=m-1,t;t=this[n];n--)0<d&&(t=this._cloneNode(t),b.unshift(t)),n==m-
1?c.place(t,q,k):q.parentNode.insertBefore(t,q),q=t;b.length&&(b.unshift(0),b.unshift(this.length-1),Array.prototype.splice.apply(this,b));return this},innerHTML:function(r){return arguments.length?this.addContent(r,"only"):this[0].innerHTML},text:function(r){if(arguments.length){for(var k=0,f;f=this[k];k++)1==f.nodeType&&h.set(f,"textContent",r);return this}var b="";for(k=0;f=this[k];k++)b+=h.get(f,"textContent");return b},val:function(r){if(arguments.length){for(var k=B.isArray(r),f=0,b;b=this[f];f++){var d=
b.nodeName.toUpperCase(),q=b.type,m=k?r[f]:r;if("SELECT"==d)for(d=b.options,q=0;q<d.length;q++){var n=d[q];n.selected=b.multiple?-1!=a.indexOf(r,n.value):n.value==m}else"checkbox"==q||"radio"==q?b.checked=b.value==m:b.value=m}return this}if((b=this[0])&&1==b.nodeType){r=b.value||"";if("SELECT"==b.nodeName.toUpperCase()&&b.multiple){r=[];d=b.options;for(q=0;q<d.length;q++)n=d[q],n.selected&&r.push(n.value);r.length||(r=null)}return r}},append:function(r){return this.addContent(r,"last")},appendTo:function(r){return this._placeMultiple(r,
"last")},prepend:function(r){return this.addContent(r,"first")},prependTo:function(r){return this._placeMultiple(r,"first")},after:function(r){return this.addContent(r,"after")},insertAfter:function(r){return this._placeMultiple(r,"after")},before:function(r){return this.addContent(r,"before")},insertBefore:function(r){return this._placeMultiple(r,"before")},remove:l.prototype.orphan,wrap:function(r){if(this[0]){r=e(r,this[0]);for(var k=0,f;f=this[k];k++){var b=this._cloneNode(r);f.parentNode&&f.parentNode.replaceChild(b,
f);g(b).appendChild(f)}}return this},wrapAll:function(r){if(this[0]){r=e(r,this[0]);this[0].parentNode.replaceChild(r,this[0]);r=g(r);for(var k=0,f;f=this[k];k++)r.appendChild(f)}return this},wrapInner:function(r){if(this[0]){r=e(r,this[0]);for(var k=0;k<this.length;k++){var f=this._cloneNode(r);this._wrap(B._toArray(this[k].childNodes),null,this._NodeListCtor).wrapAll(f)}}return this},replaceWith:function(r){r=this._normalize(r,this[0]);for(var k=0,f;f=this[k];k++)this._place(r,f,"before",0<k),f.parentNode.removeChild(f);
return this},replaceAll:function(r){r=D(r);for(var k=this._normalize(this,this[0]),f=0,b;b=r[f];f++)this._place(k,b,"before",0<f),b.parentNode.removeChild(b);return this},clone:function(){for(var r=[],k=0;k<this.length;k++)r.push(this._cloneNode(this[k]));return this._wrap(r,this,this._NodeListCtor)}});l.prototype.html||(l.prototype.html=l.prototype.innerHTML);return l})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,B,a){B={_dfdCanceller:function(c){c.canceled=
!0;var h=c._pendingDfd;if(!c.isFulfilled()&&h&&!h.isFulfilled()){h.cancel();var g=h.results&&h.results[1]}c._pendingDfd=null;return g},_fixDfd:function(c){var h=c.then;c.then=function(g,e,l){if(g){var r=g;g=function(k){return k&&k._argsArray?r.apply(null,k):r(k)}}return h.call(this,g,e,l)};return c},_resDfd:function(c,h,g){var e=h.length;1===e?g?c.errback(h[0]):c.callback(h[0]):1<e?(h._argsArray=!0,c.callback(h)):c.callback()}};D.mixin(a,B);return B})},"esri/tileUtils":function(){define(["dojo/_base/array",
"dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(D,B,a,c,h){B={_addFrameInfo:function(g,e){var l,r,k=2*e.origin[1],f=e.origin[0],b=g.origin.x,d=g.width,q;D.forEach(g.lods,function(m){l=Math.round(k/m.resolution);r=Math.ceil(l/d);q=Math.floor((f-b)/(d*m.resolution));m._frameInfo||(m._frameInfo=[r,q,q+r-1,l])})},getContainingTileCoords:function(g,e,l){var r=g.origin;l=l.resolution;return{row:Math.floor((r.y-e.y)/(g.height*l)),col:Math.floor((e.x-r.x)/(g.width*l))}},getCandidateTileInfo:function(g,
e,l){var r=g.width;var k=g.height,f=l.xmax-l.xmin,b=l.ymax-l.ymin,d=g.__tileInfo===e,q=d?g.getMinZoom():-1;d=d?g.getMaxZoom():-1;var m=-1,n=e.lods,t=Math.abs,z;d=-1<d?d:n.length-1;for(q=-1<q?q:0;q<=d;q++)if(z=n[q]){var w=f>b?t(b-k*z.resolution):t(f-r*z.resolution);if(0>m||w<=m){var y=z;m=w}else break}r=y;y=r.resolution;k=(l.xmin+l.xmax)/2;f=(l.ymin+l.ymax)/2;b=g.width/2*y;y*=g.height/2;k=new h(k-b,f-y,k+b,f+y,l.spatialReference);l=new c(k.xmin,k.ymax,l.spatialReference);d=r.resolution;b=e.width;f=
e.height;e=e.origin;g=g.__visibleDelta;y=Math.floor;n=b*d;t=f*d;d=y((e.y-l.y)/t);m=y((l.x-e.x)/n);q=e.y-d*t;e=y(Math.abs((l.x-(e.x+m*n))*b/n))+g.x;g=y(Math.abs((l.y-q)*f/t))+g.y;return{tile:{point:l,coords:{row:d,col:m},offsets:{x:e,y:g}},lod:r,extent:k}},getTileExtent:function(g,e,l,r){var k=g.origin;e=g.lods[e].resolution;var f=g.width,b=g.height;return new h(r*e*f+k.x,k.y-(l+1)*e*b,(r+1)*e*f+k.x,k.y-l*e*b,g.spatialReference)}};return a.TileUtils=B})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),
function(D,B,a,c,h,g,e,l){function r(q,m){89.99999<m?m=89.99999:-89.99999>m&&(m=-89.99999);var n=.017453292519943*m;return[111319.49079327169*q,3189068.5*Math.log((1+Math.sin(n))/(1-Math.sin(n)))]}function k(q,m,n){q=q/6378137*57.29577951308232;return n?[q,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]:[q-360*Math.floor((q+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]}function f(){}function b(){}function d(q){var m=q._json;q._unquantizeFn?
(m=q._unquantizeFn({x:m.x,y:m.y}),q._xVal=m.x,q._yVal=m.y,q._unquantizeFn=null):(q._xVal=m.x,q._yVal=m.y);q._json=null}a={type:"point",x:0,y:0};D=D(e,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(q,m,n){B.isArray(q)?(this.x=q[0],this.y=q[1],this.spatialReference=m):h.isObject(q)?(h.mixin(this,q),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference))):
(this.x=q,this.y=m,this.spatialReference=n);this.verifySR()},offset:function(q,m){return new this.constructor(this.x+q,this.y+m,this.spatialReference)},setX:function(q){this.x=q;this.clearCache();return this},setY:function(q){this.y=q;this.clearCache();return this},setLongitude:function(q){var m=this.spatialReference;m&&(m._isWebMercator()?this.setX(r(q,this.y)[0]):4326===m.wkid&&this.setX(q));return this},setLatitude:function(q){var m=this.spatialReference;m&&(m._isWebMercator()?this.setY(r(this.x,
q)[1]):4326===m.wkid&&this.setY(q));return this},getLongitude:function(){var q=this.spatialReference;if(q)if(q._isWebMercator())var m=k(this.x,this.y)[0];else 4326===q.wkid&&(m=this.x);return m},getLatitude:function(){var q=this.spatialReference;if(q)if(q._isWebMercator())var m=k(this.x,this.y)[1];else 4326===q.wkid&&(m=this.y);return m},update:function(q,m){this.x=q;this.y=m;this.clearCache();return this},normalize:function(){var q=this.x,m=this.spatialReference;if(m){var n=m._getInfo();n&&(q=this._normalizeX(q,
n))}return new this.constructor(q,this.y,m)},_normalizeX:function(q,m){var n=m.valid[0],t=m.valid[1],z=2*t;q>t?(n=Math.ceil(Math.abs(q-t)/z),q-=n*z):q<n&&(n=Math.ceil(Math.abs(q-n)/z),q+=n*z);return q},toJson:function(){var q={x:this.x,y:this.y},m=this.spatialReference;m&&(q.spatialReference=m.toJson());return q}});f.prototype=D.prototype;b.prototype=new f;Object.defineProperty(b.prototype,"x",{get:function(){this._json&&d(this);return this._xVal},set:function(q){this._xVal=q}});Object.defineProperty(b.prototype,
"y",{get:function(){this._json&&d(this);return this._yVal},set:function(q){this._yVal=q}});b.prototype.setupLazyUnquantization=function(q,m){this._unquantizeFn=q;this._json=m};D.simpleConstructor=f;D.accessorConstructor=b;D.lngLatToXY=r;D.xyToLngLat=k;D.defaultProps=a;D.metersPerDegree=6378137*Math.PI/180;B.setObject("geometry.Point",D,c);c.geometry.defaultPoint=a;return D})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(D,
B,a,c,h){function g(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var e=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(l){l&&(h.isObject(l)?h.mixin(this,l):h.isString(l)?this.wkt=l:this.wkid=l)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:e,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:e,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:e,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:e,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==B.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==B.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(l){var r=!1;l&&(r=this.isWebMercator()&&4326===l.wkid||l.isWebMercator()&&4326===this.wkid);return r},isWebMercator:function(){return this._isWebMercator()},equals:function(l){var r=!1;l&&(this===l&&
(r=!0),this.wkid||l.wkid?r=this.wkid===l.wkid||this.isWebMercator()&&l.isWebMercator()||this.wkid===l.latestWkid||l.wkid===this.latestWkid:this.wkt&&l.wkt&&(r=this.wkt.toUpperCase()===l.wkt.toUpperCase()));return r},toJson:function(){var l=null;null!=this.wkid?l={wkid:this.wkid}:null!=this.wkt&&(l={wkt:this.wkt});l&&null!=this.latestWkid&&(l.latestWkid=this.latestWkid);return l}});g.prototype=D.prototype;D.simpleConstructor=g;return c.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(g){this.spatialReference=g;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new h(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(g){return this.cache&&this.cache[g]},setCacheValue:function(g,e){this.cache||
(this.cache={});this.cache[g]=e}});B.setObject("geometry.Geometry",D,c);return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,B,a,c,h){function g(e){var l=!1;e&&(e.ics||e.icsid)&&(l=!0);return l}c={isICS:g,createSpatialReference:function(e){var l=null;e&&(l=g(e)?new B(e):new D(e));return l}};h.mixin(a,c);return c})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.ImageSpatialReference",constructor:function(e){e&&B.isObject(e)&&B.mixin(this,e)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(e){var l=!1;if(e)if(this.icsid&&e.icsid){if(l=this.icsid===e.icsid,this.icsns||e.icsns)l=l&&this.icsns===e.icsns}else this.ics&&e.ics&&(l=this.ics===e.ics);return l},toJson:function(e){var l=null,r=h.isDefined;e=r(e)?e:!0;r(this.icsid)?(l={icsid:this.icsid},
r(this.icsns)&&(l.icsns=this.icsns)):r(this.ics)&&(l={ics:this.ics});r(this.url)&&r(l)&&e&&(l.url=this.url);return l}});return c.ImageSpatialReference=D})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(){}c={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var q=D(l,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(m,n,t,z,w){g.isObject(m)?(g.mixin(this,m),this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference))):this.update(m,n,t,z,w);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new r((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new r(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new r(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new r(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new r(this.xmax,this.ymin,this.spatialReference)},centerAt:function(m){var n=this.getCenter(),t=m.x-n.x;m=m.y-n.y;return new q(this.xmin+t,this.ymin+m,this.xmax+t,this.ymax+m,this.spatialReference)},update:function(m,n,t,z,w){this.xmin=m;this.ymin=n;this.xmax=t;this.ymax=
z;this.spatialReference=w;this.clearCache();return this},offset:function(m,n){return new q(this.xmin+m,this.ymin+n,this.xmax+m,this.ymax+n,this.spatialReference)},expand:function(m){var n=(1-m)/2;m=this.getWidth()*n;n*=this.getHeight();return new q(this.xmin+m,this.ymin+n,this.xmax-m,this.ymax-n,this.spatialReference)},intersects:function(m){if(!m)return!1;var n=m.type,t=this.spatialReference,z=m.spatialReference;t&&z&&!t.equals(z)&&t._canProject(z)&&(m=t.isWebMercator()?k.geographicToWebMercator(m):
k.webMercatorToGeographic(m,!0));switch(n){case "point":return this.contains(m);case "multipoint":return this._intersectsMultipoint(m);case "extent":return this._intersectsExtent(m);case "polygon":return this._intersectsPolygon(m);case "polyline":return this._intersectsPolyline(m)}},normalize:function(){var m=this._normalize(!1,!0);a.isArray(m)||(m=[m]);return m},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var m=this.spatialReference,n=m&&m._getInfo(),t=[],z=0;if(n&&
this._isOutOfBounds(n)){var w=this;z=w.xmin;var y=w.ymin,x=w.ymax,A=n.valid[0],v=n.valid[1];w.getWidth()>2*v&&(w=w.getCenter(),w=new q(w.x-v,y,w.x+v,x,new e(m.toJson())));z=w.xmin-z;var u=this._normalizeX(w.xmin,n);n=this._normalizeX(w.xmax,n);u.frameId===n.frameId?t.push(new q(u.x,y,n.x,x,new e(m.toJson()))):t.push(new q(u.x,y,v,x,new e(m.toJson())),new q(A,y,n.x,x,new e(m.toJson())))}else t.push(this.getExtent());return{extents:t,marginLeft:z}},_intersectsMultipoint:function(m){var n=m.points.length,
t;for(t=0;t<n;t++)if(this.contains(m.getPoint(t)))return!0;return!1},_intersectsExtent:function(m){var n,t,z=!1;if(this.xmin<=m.xmin){var w=m.xmin;this.xmax<w?z=!0:n=Math.min(this.xmax,m.xmax)-w}else w=this.xmin,m.xmax<w?z=!0:n=Math.min(this.xmax,m.xmax)-w;if(this.ymin<=m.ymin){var y=m.ymin;this.ymax<y?z=!0:t=Math.min(this.ymax,m.ymax)-y}else y=this.ymin,m.ymax<y?z=!0:t=Math.min(this.ymax,m.ymax)-y;return z?null:new q(w,y,w+n,y+t,this.spatialReference)},_intersectsPolygon:function(m){var n=[this.xmin,
this.ymax],t=[this.xmax,this.ymax],z=[this.xmin,this.ymin],w=[this.xmax,this.ymin],y=[n,t,z,w];n=[[z,n],[n,t],[t,w],[w,z]];z=m.rings;w=z.length;var x=new r(0,0,this.spatialReference);var A=y.length;for(t=0;t<A;t++)if(x.update(y[t][0],y[t][1]),m.contains(x))return!0;x.setSpatialReference(m.spatialReference);for(t=0;t<w;t++)if(y=z[t],A=y.length){var v=y[0];x.update(v[0],v[1]);if(this.contains(x))return!0;for(m=1;m<A;m++){var u=y[m];x.update(u[0],u[1]);if(this.contains(x)||this._intersectsLine([v,u],
n))return!0;v=u}}return!1},_intersectsPolyline:function(m){var n=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],t,z=m.paths,w=z.length,y,x=new r(0,0,m.spatialReference);for(m=0;m<w;m++){var A=z[m];if(y=A.length){var v=A[0];x.update(v[0],v[1]);if(this.contains(x))return!0;for(t=1;t<y;t++){var u=A[t];x.update(u[0],u[1]);if(this.contains(x)||this._intersectsLine([v,
u],n))return!0;v=u}}}return!1},_intersectsLine:function(m,n){var t=f._getLineIntersection2,z,w=n.length;for(z=0;z<w;z++)if(t(m,n[z]))return!0;return!1},contains:function(m){if(!m)return!1;var n=m.type;if("point"===n){var t=this.spatialReference,z=m.spatialReference;n=m.x;m=m.y;t&&z&&!t.equals(z)&&t._canProject(z)&&(m=t.isWebMercator()?r.lngLatToXY(n,m):r.xyToLngLat(n,m,!0),n=m[0],m=m[1]);return n>=this.xmin&&n<=this.xmax&&m>=this.ymin&&m<=this.ymax}return"extent"===n?this._containsExtent(m):!1},_containsExtent:function(m){var n=
m.xmin,t=m.ymin,z=m.xmax,w=m.ymax,y=m.spatialReference;m=new r(n,t,y);n=new r(n,w,y);w=new r(z,w,y);t=new r(z,t,y);return this.contains(m)&&this.contains(n)&&this.contains(w)&&this.contains(t)?!0:!1},union:function(m){return new q(Math.min(this.xmin,m.xmin),Math.min(this.ymin,m.ymin),Math.max(this.xmax,m.xmax),Math.max(this.ymax,m.ymax),this.spatialReference)},getExtent:function(){var m=this.spatialReference;return new q(this.xmin,this.ymin,this.xmax,this.ymax,m&&new e(m.toJson()))},_shiftCM:function(m){var n=
this.getCacheValue("_shifted");if(!n){n=new q(this.toJson());var t=n.spatialReference;if(m=m||t._getInfo()){var z=this._getCM(m);if(z){var w=t._isWebMercator()?k.webMercatorToGeographic(z):z;n.xmin-=z.x;n.xmax-=z.x;t._isWebMercator()||(w.x=this._normalizeX(w.x,m).x);n.setSpatialReference(new e(g.substitute({Central_Meridian:w.x},4326===t.wkid?m.altTemplate:m.wkTemplate)))}}this.setCacheValue("_shifted",n)}return n},_getCM:function(m){var n;this._isOutOfBounds(m)&&(n=this.getCenter());return n},_isOutOfBounds:function(m){var n=
m.valid[0];m=m.valid[1];var t=this.xmin,z=this.xmax;return!(t>=n&&t<=m&&z>=n&&z<=m)},_normalize:function(m,n,t){var z=new q(this.toJson()),w=z.spatialReference;if(w&&(t=t||w._getInfo())){var y=B.map(this._getParts(t),function(x){return x.extent});return 2<y.length?m?this._shiftCM(t):z.update(t.valid[0],z.ymin,t.valid[1],z.ymax,w):2===y.length?m?this._shiftCM(t):n?y:{rings:B.map(y,function(x){return[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]}),spatialReference:w}:
y[0]||z}return z},_getParts:function(m){var n=this.getCacheValue("_parts");if(!n){n=[];var t=this.xmin,z=this.xmax,w=this.ymin,y=this.ymax,x=this.spatialReference,A=this.getWidth(),v=t,u=z,C=0,E=0;m=m||x._getInfo();var F=m.valid[0];var G=m.valid[1];E=this._normalizeX(t,m);t=E.x;C=E.frameId;E=this._normalizeX(z,m);z=E.x;E=E.frameId;m=t===z&&0<A;if(A>2*G){A=new q(v<u?t:z,w,G,y,x);t=new q(F,w,v<u?z:t,y,x);G=new q(0,w,G,y,x);w=new q(F,w,0,y,x);x=[];F=[];A.contains(G)&&x.push(C);A.contains(w)&&F.push(C);
t.contains(G)&&x.push(E);t.contains(w)&&F.push(E);for(y=C+1;y<E;y++)x.push(y),F.push(y);n.push({extent:A,frameIds:[C]},{extent:t,frameIds:[E]},{extent:G,frameIds:x},{extent:w,frameIds:F})}else t>z||m?n.push({extent:new q(t,w,G,y,x),frameIds:[C]},{extent:new q(F,w,z,y,x),frameIds:[E]}):n.push({extent:new q(t,w,z,y,x),frameIds:[C]});this.setCacheValue("_parts",n)}return n},_normalizeX:function(m,n){var t=0,z=n.valid[0],w=n.valid[1],y=2*w;m>w?(t=Math.ceil(Math.abs(m-w)/y),m-=t*y):m<z&&(t=Math.ceil(Math.abs(m-
z)/y),m+=t*y,t=-t);return{x:m,frameId:t}},toJson:function(){var m={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},n=this.spatialReference;n&&(m.spatialReference=n.toJson());return m}});d.prototype=q.prototype;q.simpleConstructor=d;q.defaultProps=c;a.setObject("geometry.Extent",q,h);h.geometry.defaultExtent=c;return q})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,B,a,c,h,g){function e(r,
k,f,b){if("point"===r.type){var d=k(r.x,r.y,b);return new r.constructor(d[0],d[1],new h(f))}if("extent"===r.type){d=k(r.xmin,r.ymin,b);var q=k(r.xmax,r.ymax,b);return new r.constructor(d[0],d[1],q[0],q[1],new h(f))}if("polyline"===r.type||"polygon"===r.type){d="polyline"===r.type;var m=[],n;D.forEach(d?r.paths:r.rings,function(z){m.push(n=[]);D.forEach(z,function(w){n.push(k(w[0],w[1],b))})});return d?new r.constructor({paths:m,spatialReference:new h(f)}):new r.constructor({rings:m,spatialReference:new h(f)})}if("multipoint"===
r.type){var t=[];D.forEach(r.points,function(z){t.push(k(z[0],z[1],b))});return new r.constructor({points:t,spatialReference:new h(f)})}}function l(r,k){var f=r&&(null!=r.wkid?r:r.spatialReference),b=k&&(null!=k.wkid?k:k.spatialReference);return f&&b?b.equals(f)?!0:b._canProject(f):!1}a={canProject:l,project:function(r,k){var f=r&&r.spatialReference,b=k&&(null!=k.wkid?k:k.spatialReference);f&&b?f.equals(b)?r=new r.constructor(r.toJson()):l(f,b)?b.isWebMercator()?r=e(r,g.lngLatToXY,{wkid:102100}):
4326===b.wkid&&(r=e(r,g.xyToLngLat,{wkid:4326})):r=null:r=null;return r},lngLatToXY:g.lngLatToXY,xyToLngLat:g.xyToLngLat,metersPerDegree:g.metersPerDegree,geographicToWebMercator:function(r){return e(r,g.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(r,k){return e(r,g.xyToLngLat,{wkid:4326},k)}};B.mixin(B.getObject("geometry",!0,c),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,B,a,c){function h(l,r,k){return l instanceof
c?new c(l.x+k*(r.x-l.x),l.y+k*(r.y-l.y)):[l[0]+k*(r[0]-l[0]),l[1]+k*(r[1]-l[1])]}function g(l,r){return 1E-8>Math.abs(l-r)}function e(l,r,k,f){var b=g(l[0],r[0])?1E10:(l[1]-r[1])/(l[0]-r[0]),d=g(k[0],f[0])?1E10:(k[1]-f[1])/(k[0]-f[0]),q=l[1]-b*l[0],m=k[1]-d*k[0];if(g(b,d)){if(g(q,m)){if(g(l[0],r[0]))if(Math.min(l[1],r[1])<Math.max(k[1],f[1])||Math.max(l[1],r[1])>Math.min(k[1],f[1])){l=(l[1]+r[1]+k[1]+f[1]-Math.min(l[1],r[1],k[1],f[1])-Math.max(l[1],r[1],k[1],f[1]))/2;var n=(l-q)/b}else return null;
else if(Math.min(l[0],r[0])<Math.max(k[0],f[0])||Math.max(l[0],r[0])>Math.min(k[0],f[0]))n=(l[0]+r[0]+k[0]+f[0]-Math.min(l[0],r[0],k[0],f[0])-Math.max(l[0],r[0],k[0],f[0]))/2,l=b*n+q;else return null;return[n,l]}return null}g(b,1E10)?(n=l[0],l=d*n+m):g(d,1E10)?(n=k[0],l=b*n+q):(n=-(q-m)/(b-d),l=l[1]===r[1]?l[1]:k[1]===f[1]?k[1]:b*n+q);return[n,l]}B={getLength:function(l,r){var k=r.x-l.x,f=r.y-l.y;return Math.sqrt(k*k+f*f)},_getLength:function(l,r){var k=r[0]-l[0],f=r[1]-l[1];return Math.sqrt(k*k+
f*f)},getPointOnLine:h,getMidpoint:function(l,r){return h(l,r,.5)},_equals:g,_getLineIntersection:e,getLineIntersection:function(l,r,k,f,b){(l=e([l.x,l.y],[r.x,r.y],[k.x,k.y],[f.x,f.y]))&&(l=new c(l[0],l[1],b));return l},_getLineIntersection2:function(l,r){var k=l[0],f=l[1],b=r[0],d=r[1],q=k[0];k=k[1];var m=f[0];f=f[1];var n=b[0],t=b[1];b=d[0]-n;n=q-n;var z=m-q;d=d[1]-t;t=k-t;var w=f-k,y=d*z-b*w;if(0===y)return!1;b=(b*t-d*n)/y;n=(z*t-w*n)/y;return 0<=b&&1>=b&&0<=n&&1>=n?[q+b*(m-q),k+b*(f-k)]:!1},
_pointLineDistance:function(l,r){var k=r[0],f=r[1],b=k[0],d=k[1];k=l[0];var q=l[1],m=f[0]-b,n=f[1]-d,t=k-b,z=q-d;f=Math.sqrt;var w=Math.pow,y=f(w(m,2)+w(n,2));t=(t*m+z*n)/(y*y);d+=t*n;return f(w(k-(b+t*m),2)+w(q-d,2))}};D.mixin(D.getObject("geometry",!0,a),B);return B})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(D,B,a,c,h){a={graphicsExtent:function(g){if(!g||!g.length)return null;var e=null,l,r=g.length;for(l=
0;l<r;l++){var k=g[l].geometry;if(k){var f=k.getExtent();f||"point"!==k.type||null==k.x||null==k.y||(f=new h(k.x,k.y,k.x,k.y,k.spatialReference));f&&(e=e?e.union(f):f)}}return 0>e.getWidth()&&0>e.getHeight()?null:e},getGeometries:function(g){return B.map(g,function(e){return e.geometry})},_encodeGraphics:function(g,e){return B.map(g,function(l,r){var k=l.toJson(),f={};if(k.geometry){var b=e&&e[r];f.geometry=b&&b.toJson()||k.geometry}k.attributes&&(f.attributes=k.attributes);return f})}};D.mixin(c,
a);return a})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(D,B,a,c,h){c={_serializeLayerDefinitions:function(g,e){var l=[],r=/[:;]/;if(g&&(B.forEach(g,function(f,b){f&&(l.push([b,f]),!e&&r.test(f)&&(e=!0))}),0<l.length)){if(e){var k={};B.forEach(l,function(f){k[f[0]]=f[1]});k=a.toJson(k)}else k=[],B.forEach(l,function(f){k.push(f[0]+":"+f[1])}),k=k.join(";");return k}return null},_serializeTimeOptions:function(g,e){if(g){var l=
[];B.forEach(g,function(r,k){if(r){var f=r.toJson();e&&-1!==B.indexOf(e,k)&&(f.useTime=!1);l.push('"'+k+'":'+a.toJson(f))}});if(l.length)return"{"+l.join(",")+"}"}},_getVisibleLayers:function(g,e){var l=[],r;if(!g)return l;if(e)for(l=e.concat(),r=0;r<g.length;r++){var k=g[r];var f=B.indexOf(g,k.id);k.subLayerIds&&-1<f&&(l.splice(f,1),l=l.concat(k.subLayerIds))}else l=this._getDefaultVisibleLayers(g);return l},_getDefaultVisibleLayers:function(g){var e=[],l;if(!g)return e;for(l=0;l<g.length;l++)0<=
g[l].parentLayerId&&-1===B.indexOf(e,g[l].parentLayerId)&&B.some(g,function(r){return r.id===g[l].parentLayerId})||g[l].defaultVisibility&&e.push(g[l].id);return e},_getLayersForScale:function(g,e){var l=[];if(0<g&&e){var r;for(r=0;r<e.length;r++)if(!(0<=e[r].parentLayerId&&-1===B.indexOf(l,e[r].parentLayerId)&&B.some(e,function(d){return d.id===e[r].parentLayerId}))&&0<=e[r].id){var k=!0,f=e[r].maxScale,b=e[r].minScale;if(0<f||0<b)0<f&&0<b?k=f<=g&&g<=b:0<f?k=f<=g:0<b&&(k=g<=b);k&&l.push(e[r].id)}}return l}};
D.mixin(h,c);return c})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(u,C){return Math.ceil((u-C)/(2*C))}function q(u,C){var E=u.paths||u.rings,F,G,H=E.length;for(F=0;F<H;F++){var J=E[F].length;for(G=0;G<J;G++){var I=u.getPoint(F,G);u.setPoint(F,G,I.offset(C,0))}}return u}function m(u,
C){if(!(u instanceof r||u instanceof k))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var E=u instanceof r,F=[],G;D.forEach(E?u.paths:u.rings,function(H){F.push(G=[]);G.push([H[0][0],H[0][1]]);var J,I;for(J=0;J<H.length-1;J++){var R=H[J][0];var O=H[J][1];var P=H[J+1][0];var L=H[J+1][1];var K=Math.sqrt((P-R)*(P-R)+(L-O)*(L-O));var Q=(L-O)/K;var W=(P-R)/K;var ba=K/C;if(1<ba){for(I=1;I<=ba-1;I++){var S=I*C;var X=W*S+R;S=Q*S+O;G.push([X,S])}I=(K+Math.floor(ba-
1)*C)/2;X=W*I+R;S=Q*I+O;G.push([X,S])}G.push([P,L])}});return E?new r({paths:F,spatialReference:u.spatialReference}):new k({rings:F,spatialReference:u.spatialReference})}function n(u,C,E){C&&(u=m(u,1E6),u=f.webMercatorToGeographic(u,!0));E&&(u=q(u,E));return u}function t(u,C,E){var F=u.x||u[0];if(F>C){var G=d(F,C);u.x?u=u.offset(-2*G*C,0):u[0]=F+-2*G*C}else F<E&&(G=d(F,E),u.x?u=u.offset(-2*G*E,0):u[0]=F+-2*G*E);return u}function z(u,C){var E=-1;D.forEach(C.cutIndexes,function(F,G){var H=C.geometries[G];
D.forEach(H.rings||H.paths,function(J,I){D.some(J,function(R){if(!(180>R[0])){R=0;var O,P=J.length;for(O=0;O<P;O++){var L=J[O][0];R=L>R?L:R}R=Number(R.toFixed(9));R=-360*d(R,180);P=J.length;for(O=0;O<P;O++)L=H.getPoint(I,O),H.setPoint(I,O,L.offset(R,0))}return!0})});F===E?H.rings?D.forEach(H.rings,function(J){u[F]=u[F].addRing(J)}):D.forEach(H.paths,function(J){u[F]=u[F].addPath(J)}):(E=F,u[F]=H)});return u}function w(u,C,E,F){var G=new a;G.addCallbacks(E,F);C=C||g.defaults.geometryService;var H=
[],J=[],I,R,O,P,L,K,Q,W,ba=0;D.forEach(u,function(M){if(M)if(I||(I=M.spatialReference,R=I._getInfo(),P=(O=I._isWebMercator())?2.0037508342788905E7:180,L=O?-2.0037508342788905E7:-180,K=O?102100:4326,Q=new r({paths:[[[P,L],[P,P]]],spatialReference:{wkid:K}}),W=new r({paths:[[[L,L],[L,P]]],spatialReference:{wkid:K}})),R){var da=b.fromJson(M.toJson()),ea=M.getExtent();"point"===M.type?H.push(t(da,P,L)):"multipoint"===M.type?(da.points=D.map(da.points,function(Z){return t(Z,P,L)}),H.push(da)):"extent"===
M.type?(da=ea._normalize(null,null,R),H.push(da.rings?new k(da):da)):ea?(M=2*d(ea.xmin,L)*P,da=0===M?da:q(da,M),ea=ea.offset(M,0),ea.intersects(Q)&&ea.xmax!==P?(ba=ea.xmax>ba?ea.xmax:ba,da=n(da,O),J.push(da),H.push("cut")):ea.intersects(W)&&ea.xmin!==L?(ba=2*ea.xmax*P>ba?2*ea.xmax*P:ba,da=n(da,O,360),J.push(da),H.push("cut")):H.push(da)):H.push(da)}else H.push(M);else H.push(M)});E=new r;F=d(ba,P);for(var S=-90,X=F;0<F;){var aa=-180+360*F;E.addPath([[aa,S],[aa,-1*S]]);S*=-1;F--}0<J.length&&0<X?C?
C.cut(J,E,function(M){J=z(J,M);var da=[];D.forEach(H,function(ea,Z){if("cut"===ea){var ka=J.shift();u[Z].rings&&1<u[Z].rings.length&&ka.rings.length>=u[Z].rings.length?(H[Z]="simplify",da.push(ka)):H[Z]=!0===O?f.geographicToWebMercator(ka):ka}});0<da.length?C.simplify(da,function(ea){D.forEach(H,function(Z,ka){"simplify"===Z&&(H[ka]=!0===O?f.geographicToWebMercator(ea.shift()):ea.shift())});G.callback(H)},function(ea){G.errback(ea)}):G.callback(H)},function(M){G.errback(M)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):
(D.forEach(H,function(M,da){if("cut"===M){var ea=J.shift();H[da]=!0===O?f.geographicToWebMercator(ea):ea}}),G.callback(H));return G}function y(u,C,E,F){var G=!1,H;B.isObject(u)&&u&&(B.isArray(u)?u.length&&((H=u[0]&&u[0].declaredClass)&&-1!==H.indexOf("Graphic")?(u=D.map(u,function(J){return J.geometry}),G=u.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0)):(H=u.declaredClass)&&-1!==H.indexOf("FeatureSet")?(u=D.map(u.features||[],function(J){return J.geometry}),G=u.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&
(G=!0));G&&C.push({index:E,property:F,value:u})}function x(u,C){var E=[];D.forEach(C,function(F){var G=F.i,H=u[G];F=F.p;var J;if(B.isObject(H)&&H)if(F)if("*"===F[0])for(J in H)H.hasOwnProperty(J)&&y(H[J],E,G,J);else D.forEach(F,function(I){y(B.getObject(I,!1,H),E,G,I)});else y(H,E,G)});return E}function A(u,C){var E=0,F={};D.forEach(C,function(G){var H=G.index,J=G.property,I=G.value,R=I.length||1,O=u.slice(E,E+R);B.isArray(I)||(O=O[0]);E+=R;delete G.value;J?(F[H]=F[H]||{},F[H][J]=O):F[H]=O});return F}
function v(u){for(var C=[],E=0,F=0,G=Math.min,H=Math.max,J=0;J<u.length;J++){for(var I=u[J],R=null,O=0;O<I.length;O++)R=I[O],C.push(R),0===O?F=E=R[0]:(E=G(E,R[0]),F=H(F,R[0]));R&&C.push([(E+F)/2,0])}return C}c={normalizeCentralMeridian:w,_foldCutResults:z,_prepareGeometryForCut:n,_offsetMagnitude:d,_pointNormalization:t,_updatePolyGeometry:q,_straightLineDensify:m,_createWrappers:function(u){var C=B.isObject(u)?u.prototype:B.getObject(u+".prototype");D.forEach(C.__msigns,function(E){var F=C[E.n];
C[E.n]=function(){var G=this,H=[],J,I=new a(e._dfdCanceller);E.f&&e._fixDfd(I);for(J=0;J<E.c;J++)H[J]=arguments[J];var R={dfd:I};H.push(R);var O=[],P;if(G.normalization&&!G._isTable){var L=x(H,E.a);D.forEach(L,function(K){O=O.concat(K.value)});O.length&&(P=w(O))}P?(I._pendingDfd=P,P.addCallbacks(function(K){I.canceled||(R.assembly=A(K,L),I._pendingDfd=F.apply(G,H))},function(K){var Q=G.declaredClass;Q&&-1!==Q.indexOf("FeatureLayer")?G._resolve([K],null,H[E.e],I,!0):G._errorHandler(K,H[E.e],I)})):
I._pendingDfd=F.apply(G,H);return I}})},_disassemble:x,_addToBucket:y,_reassemble:A,getDenormalizedExtent:function(u){if(!u)return null;var C=u.getExtent();if(!C)return null;var E=u.spatialReference&&u.spatialReference._getInfo();if(!E)return C;var F=E.valid[0];E=E.valid[1];var G=2*E,H=C.getWidth(),J=C.xmax,I=C.xmin;if("extent"===u.type||0===H||H<=E||H>G||J<F||I>E)return C;switch(u.type){case "polygon":if(1<u.rings.length)var R=v(u.rings);else return C;break;case "polyline":if(1<u.paths.length)R=
v(u.paths);else return C;break;case "multipoint":R=u.points}u=Math.min;F=Math.max;G=new l(C.toJson());for(var O=0;O<R.length;O++){var P=R[O][0];0>P?(P+=E,I=F(P,I)):(P-=E,J=u(P,J))}G.xmin=J;G.xmax=I;return G.getWidth()<H?(G.xmin-=E,G.xmax-=E,G):C}};B.mixin(B.getObject("geometry",!0,h),c);return c})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
B,a,c,h,g,e,l,r,k,f){function b(){}function d(){}c={type:"polyline",paths:null};D=D(l,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(q){this.paths=[];this._path=0;q&&(a.isArray(q)?this.paths=a.isArray(q[0][0])?q:[q]:q.paths?g.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(q){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(q[0])?B.forEach(q,this._addPointArr,this):B.forEach(q,this._addPoint,this);return this},_addPointArr:function(q){this.paths[this._path].push(q)},_addPoint:function(q){this.paths[this._path].push([q.x,q.y])},_insertPoints:function(q,m){this.clearCache();this._path=m;this.paths[this._path]||(this.paths[this._path]=[]);B.forEach(q,this._addPoint,this)},_validateInputs:function(q,m){return null!==q&&void 0!==q&&(0>q||q>=this.paths.length)||null!==m&&void 0!==q&&(0>m||m>=this.paths[q].length)?
!1:!0},getPoint:function(q,m){if(this._validateInputs(q,m))return new r(this.paths[q][m],this.spatialReference)},setPoint:function(q,m,n){if(this._validateInputs(q,m))return this.clearCache(),this.paths[q][m]=[n.x,n.y],this},insertPoint:function(q,m,n){if(this._validateInputs(q)&&null!=m&&0<=m&&m<=this.paths[q].length)return this.clearCache(),this.paths[q].splice(m,0,[n.x,n.y]),this},removePath:function(q){if(this._validateInputs(q,null)){this.clearCache();q=this.paths.splice(q,1)[0];var m,n=q.length,
t=this.spatialReference;for(m=0;m<n;m++)q[m]=new r(q[m],t);return q}},removePoint:function(q,m){if(this._validateInputs(q,m))return this.clearCache(),new r(this.paths[q].splice(m,1)[0],this.spatialReference)},getExtent:function(){var q=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(q)return q=new k(q),q._partwise=m,q;q=this.paths;var n=q.length;if(n&&q[0].length){var t,z,w,y,x=t=q[0][0][0],A=z=q[0][0][1],v=Math.min,u=Math.max,C=this.spatialReference;m=[];var E,F;for(w=0;w<
n;w++){var G=q[w];var H=E=G[0]&&G[0][0];var J=F=G[0]&&G[0][1];var I=G.length;for(y=0;y<I;y++){var R=G[y];var O=R[0];R=R[1];x=v(x,O);A=v(A,R);t=u(t,O);z=u(z,R);H=v(H,O);J=v(J,R);E=u(E,O);F=u(F,R)}m.push(new k({xmin:H,ymin:J,xmax:E,ymax:F,spatialReference:C?C.toJson():null}))}q={xmin:x,ymin:A,xmax:t,ymax:z,spatialReference:C?C.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",q);this.setCacheValue("_partwise",m);q=new k(q);q._partwise=m;return q}},toJson:function(){var q={paths:g.clone3DArray(this.paths)},
m=this.spatialReference;m&&(q.spatialReference=m.toJson());return q}});b.prototype=D.prototype;d.prototype=new b;Object.defineProperty(d.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:g.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(q){this._pathsVal=q}});d.prototype.setupLazyUnquantization=function(q,m){this._unquantizeFn=q;this._pathsVal=m.paths};D.simpleConstructor=b;D.accessorConstructor=d;D.defaultProps=
c;a.setObject("geometry.Polyline",D,h);h.geometry.defaultPolyline=c;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(){}function q(){}c={type:"polygon",rings:null};var m=D(l,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(n){this.rings=[];this._ring=
0;n&&(a.isArray(n)?this.rings=a.isArray(n[0][0])?n:[n]:n.rings?g.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(n){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(n[0])?B.forEach(n,this._addPointArr,this):B.forEach(n,this._addPoint,this);return this},_addPointArr:function(n){this.rings[this._ring].push(n)},_addPoint:function(n){this.rings[this._ring].push([n.x,
n.y])},_insertPoints:function(n,t){this.clearCache();this._ring=t;this.rings[this._ring]||(this.rings[this._ring]=[]);B.forEach(n,this._addPoint,this)},_validateInputs:function(n,t){return null!==n&&void 0!==n&&(0>n||n>=this.rings.length)||null!==t&&void 0!==n&&(0>t||t>=this.rings[n].length)?!1:!0},getPoint:function(n,t){if(this._validateInputs(n,t))return new r(this.rings[n][t],this.spatialReference)},setPoint:function(n,t,z){if(this._validateInputs(n,t))return this.clearCache(),this.rings[n][t]=
[z.x,z.y],this},insertPoint:function(n,t,z){if(this._validateInputs(n)&&null!=t&&0<=t&&t<=this.rings[n].length)return this.clearCache(),this.rings[n].splice(t,0,[z.x,z.y]),this},removeRing:function(n){if(this._validateInputs(n,null)){this.clearCache();n=this.rings.splice(n,1)[0];var t,z=n.length,w=this.spatialReference;for(t=0;t<z;t++)n[t]=new r(n[t],w);return n}},removePoint:function(n,t){if(this._validateInputs(n,t))return this.clearCache(),new r(this.rings[n].splice(t,1)[0],this.spatialReference)},
getExtent:function(){var n=this.getCacheValue("_extent");var t=this.getCacheValue("_partwise");if(n)return n=new k(n),n._partwise=t,n;n=this.rings;var z=n.length;if(z&&n[0].length){var w,y,x,A,v=w=n[0][0][0],u=y=n[0][0][1],C=Math.min,E=Math.max,F=this.spatialReference;t=[];var G,H;for(x=0;x<z;x++){var J=n[x];var I=G=J[0]&&J[0][0];var R=H=J[0]&&J[0][1];var O=J.length;for(A=0;A<O;A++){var P=J[A];var L=P[0];P=P[1];v=C(v,L);u=C(u,P);w=E(w,L);y=E(y,P);I=C(I,L);R=C(R,P);G=E(G,L);H=E(H,P)}t.push(new k({xmin:I,
ymin:R,xmax:G,ymax:H,spatialReference:F?F.toJson():null}))}n={xmin:v,ymin:u,xmax:w,ymax:y,spatialReference:F?F.toJson():null};t=1<t.length?t:null;this.setCacheValue("_extent",n);this.setCacheValue("_partwise",t);n=new k(n);n._partwise=t;return n}},contains:function(n){var t=this.rings,z=!1,w,y,x,A=t.length;var v=this.spatialReference;var u=n.spatialReference;var C=n.x;n=n.y;v&&u&&!v.equals(u)&&v._canProject(u)&&(n=v.isWebMercator()?r.lngLatToXY(C,n):r.xyToLngLat(C,n,!0),C=n[0],n=n[1]);for(x=0;x<A;x++){v=
t[x];var E=v.length;for(y=w=0;y<E;y++){w++;w===E&&(w=0);u=v[y];var F=v[w];(u[1]<n&&F[1]>=n||F[1]<n&&u[1]>=n)&&u[0]+(n-u[1])/(F[1]-u[1])*(F[0]-u[0])<C&&(z=!z)}}return z},getCentroid:function(){var n=this.getCacheValue("_centroid");if(void 0!==n)return n;n=this.rings;var t,z,w=[],y,x,A=Infinity,v=-Infinity,u=Infinity,C=-Infinity;B.forEach(n,function(G){E=t=z=0;B.forEach(G,function(H,J){J<G.length-1&&(y=G[J+1],x=H[0]*y[1]-y[0]*H[1],E+=(H[0]+y[0])*x,t+=(H[1]+y[1])*x,z+=x,H[0]<A&&(A=H[0]),H[0]>v&&(v=H[0]),
H[1]<u&&(u=H[1]),H[1]>C&&(C=H[1]))});0<z&&(z*=-1);z&&w.push([E,t,z/2])});w.sort(function(G,H){return G[2]-H[2]});var E=t=void 0;if(w[0]){var F=6*w[0][2];E=w[0][0]/F;t=w[0][1]/F;if(E<A||E>v||t<u||t>C)E=t=void 0}if(void 0===E||void 0===t)if(n=n[0]&&n[0].length?this._getLineCentroid(n[0]):null)E=n.x,t=n.y;n=isNaN(E)||isNaN(t)?null:new r(E,t,this.spatialReference);this.setCacheValue("_centroid",n);return n},_getLineCentroid:function(n){var t=0,z=0,w=0,y={x:0,y:0},x={x:0,y:0},A,v=n.length,u;for(A=0;A<
v-1;A++){var C=n[A];var E=n[A+1];if(C&&E){y.x=C[0];y.y=C[1];x.x=E[0];x.y=E[1];var F=f.getLength(y,x);0<F&&(t+=F,C=f.getMidpoint(C,E),z+=F*C[0],w+=F*C[1])}}0<t?u={x:z/t,y:w/t}:n[0]&&(u={x:n[0][0],y:n[0][1]});return u},isClockwise:function(n){var t=0,z,w=n.length,y=a.isArray(n[0])?function(x,A){return x[0]*A[1]-A[0]*x[1]}:function(x,A){return x.x*A.y-A.x*x.y};for(z=0;z<w;z++)t+=y(n[z],n[(z+1)%w]);return 0>=t/2},isSelfIntersecting:function(n){n=n||this;var t,z,w,y,x,A=n.rings.length;for(w=0;w<A;w++){for(t=
0;t<n.rings[w].length-1;t++){var v=[[n.rings[w][t][0],n.rings[w][t][1]],[n.rings[w][t+1][0],n.rings[w][t+1][1]]];for(z=w+1;z<A;z++)for(y=0;y<n.rings[z].length-1;y++){var u=[[n.rings[z][y][0],n.rings[z][y][1]],[n.rings[z][y+1][0],n.rings[z][y+1][1]]];if((x=f._getLineIntersection2(v,u))&&!(x[0]===v[0][0]&&x[1]===v[0][1]||x[0]===u[0][0]&&x[1]===u[0][1]||x[0]===v[1][0]&&x[1]===v[1][1]||x[0]===u[1][0]&&x[1]===u[1][1]))return!0}}y=n.rings[w].length;if(!(4>=y))for(t=0;t<y-3;t++){var C=y-1;0===t&&(C=y-2);
v=[[n.rings[w][t][0],n.rings[w][t][1]],[n.rings[w][t+1][0],n.rings[w][t+1][1]]];for(z=t+2;z<C;z++)if(u=[[n.rings[w][z][0],n.rings[w][z][1]],[n.rings[w][z+1][0],n.rings[w][z+1][1]]],(x=f._getLineIntersection2(v,u))&&!(x[0]===v[0][0]&&x[1]===v[0][1]||x[0]===u[0][0]&&x[1]===u[0][1]||x[0]===v[1][0]&&x[1]===v[1][1]||x[0]===u[1][0]&&x[1]===u[1][1]))return!0}}return!1},toJson:function(){var n={rings:g.clone3DArray(this.rings)},t=this.spatialReference;t&&(n.spatialReference=t.toJson());return n}});d.prototype=
m.prototype;q.prototype=new d;Object.defineProperty(q.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:g.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(n){this._ringsVal=n}});q.prototype.setupLazyUnquantization=function(n,t){this._unquantizeFn=n;this._ringsVal=t.rings};m.simpleConstructor=d;m.accessorConstructor=q;m.defaultProps=c;m.createEllipse=function(n){var t=n.center.x,z=n.center.y,w=n.longAxis,
y=n.shortAxis,x=n.numberOfPoints,A=n.map,v;n=[];var u=2*Math.PI/x;for(v=0;v<x;v++){var C=Math.cos(v*u);var E=Math.sin(v*u);C=A.toMap({x:w*C+t,y:y*E+z});n.push(C)}n.push(n[0]);t=new m(A.spatialReference);t.addRing(n);return t};m.createCircle=function(n){return m.createEllipse({center:n.center,longAxis:n.r,shortAxis:n.r,numberOfPoints:n.numberOfPoints,map:n.map})};m.fromExtent=function(n){var t=n.normalize();n=n.spatialReference;return new m({rings:B.map(t,function(z){return[[z.xmin,z.ymin],[z.xmin,
z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]}),spatialReference:n?n.toJson():null})};a.setObject("geometry.Polygon",m,h);h.geometry.defaultPolygon=c;h.geometry.createEllipse=m.createEllipse;h.geometry.createCircle=m.createCircle;h.geometry.isClockwise=m.prototype.isClockwise;h.geometry.polygonSelfIntersecting=m.prototype.isSelfIntersecting;return m})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(D,B,a,c,h,g,e,l,r){function k(q,m,n){var t=q.rings||q.paths,z,w;var y=0;for(z=t.length;y<z;y++){var x=t[y];var A=0;for(w=x.length;A<w;A++){var v=x[A];if(0<A)u+=v[0],C+=v[1];else{var u=v[0];var C=v[1]}v[0]=m(u);v[1]=n(C)}}return q}var f={esriGeometryPoint:function(q,m,n){q.x=m(q.x);q.y=n(q.y);return q},esriGeometryPolyline:k,esriGeometryPolygon:k,esriGeometryEnvelope:function(q,m,n){q.xmin=m(q.xmin);q.ymin=n(q.ymin);q.xmax=m(q.xmax);q.ymax=n(q.ymax);return q},esriGeometryMultipoint:function(q,
m,n){var t=q.points,z;var w=0;for(z=t.length;w<z;w++){var y=t[w];if(0<w)x+=y[0],A+=y[1];else{var x=y[0];var A=y[1]}y[0]=m(x);y[1]=n(A)}return q}},b={esriGeometryPoint:function(q,m,n){q.x=m(q.x);q.y=n(q.y);return q}},d={createInstance:function(q,m){var n=new q;m&&c.mixin(n,m);return n},fromJson:function(q){if(void 0!==q.x&&void 0!==q.y)return new h(q);if(void 0!==q.paths)return new g(q);if(void 0!==q.rings)return new e(q);if(void 0!==q.points)return new l(q);if(void 0!==q.xmin&&void 0!==q.ymin&&void 0!==
q.xmax&&void 0!==q.ymax)return new r(q)},getJsonType:function(q){return q instanceof h?"esriGeometryPoint":q instanceof g?"esriGeometryPolyline":q instanceof e?"esriGeometryPolygon":q instanceof r?"esriGeometryEnvelope":q instanceof l?"esriGeometryMultipoint":null},getGeometryType:function(q){return"esriGeometryPoint"===q?h:"esriGeometryPolyline"===q?g:"esriGeometryPolygon"===q?e:"esriGeometryEnvelope"===q?r:"esriGeometryMultipoint"===q?l:null},supportsLazyUnquantization:function(q){return"esriGeometryPoint"===
q||"esriGeometryPolyline"===q||"esriGeometryPolygon"===q||"esriGeometryMultipoint"===q},unquantizeFunction:function(q,m){if(q&&m){var n=m.translate[0],t=m.translate[1],z=m.scale[0],w=m.scale[1],y=function(v){return v*z+n},x=function(v){return t-v*w},A=f[q];return function(v){return v?A(v,y,x):null}}},unquantize:function(q,m,n){if(m=d.unquantizeFunction(m,n)){var t=q.length;for(n=0;n<t;n++)m(q[n].geometry)}},quantizeFunction:function(q,m){if(q&&"esriGeometryPoint"===q&&m){var n=m.translate[0],t=m.translate[1],
z=m.scale[0],w=m.scale[1],y=function(v){return Math.round((v-n)/z)},x=function(v){return Math.round((t-v)/w)},A=b[q];return function(v){return v?A(v,y,x):null}}},quantize:function(q,m,n){if(m=d.quantizeFunction(m,n)){var t=q.length;for(n=0;n<t;n++)m(q[n].geometry)}}};D.mixin(D.getObject("geometry",!0,a),d);return d})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
B,a,c,h,g,e,l,r,k){function f(){}function b(){}a={type:"multipoint",points:null};D=D(e,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(d){this.points=[];d&&(d.points?h.mixin(this,d):this.spatialReference=d,this.spatialReference&&(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(d){this.clearCache();B.isArray(d)?this.points.push(d):this.points.push([d.x,d.y]);return this},removePoint:function(d){if(this._validateInputs(d))return this.clearCache(),
new l(this.points.splice(d,1)[0],this.spatialReference)},getExtent:function(){var d=this.getCacheValue("_extent");if(d)return new r(d);d=this.points;var q=d.length;if(q){var m=d[0],n,t,z=n=m[0],w=t=m[1],y=Math.min,x=Math.max,A=this.spatialReference,v;for(v=0;v<q;v++){m=d[v];var u=m[0];m=m[1];z=y(z,u);w=y(w,m);n=x(n,u);t=x(t,m)}d={xmin:z,ymin:w,xmax:n,ymax:t,spatialReference:A?A.toJson():null};this.setCacheValue("_extent",d);return new r(d)}},_validateInputs:function(d){return null===d||0>d||d>=this.points.length?
!1:!0},getPoint:function(d){if(this._validateInputs(d))return d=this.points[d],new l(d[0],d[1],this.spatialReference)},setPoint:function(d,q){if(this._validateInputs(d))return this.clearCache(),this.points[d]=[q.x,q.y],this},toJson:function(){var d={points:h.clone2DArray(this.points)},q=this.spatialReference;q&&(d.spatialReference=q.toJson());return d}});f.prototype=D.prototype;b.prototype=new f;Object.defineProperty(b.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:h.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(d){this._pointsVal=d}});b.prototype.setupLazyUnquantization=function(d,q){this._unquantizeFn=d;this._pointsVal=q.points};D.simpleConstructor=f;D.accessorConstructor=b;D.defaultProps=a;B.setObject("geometry.Multipoint",D,c);c.geometry.defaultMultipoint=a;return D})},"arcgisonline/init":function(){define(["dojo","dijit","dojox","dojo/require!dojo/DeferredList,arcgisonline/sharing/dijit/_Empty,esri/libs/sanitizer/Sanitizer,arcgisonline/pages/utils/organization,arcgisonline/pages/utils/user"],
function(D,B,a){D.provide("arcgisonline.init");D.require("dojo.DeferredList");D.require("arcgisonline.sharing.dijit._Empty");D.require("esri.libs.sanitizer.Sanitizer");D.require("arcgisonline.pages.utils.organization");D.require("arcgisonline.pages.utils.user");D.mixin(arcgisonline.init,{labels:null,feeds:[],currentFeed:null,allSSL:!1,isOrg:!1,isSingleTenant:!1,settings:null,galleryNodeMap:{},sanitizer:null,orgUtil:arcgisonline.pages.utils.organization,userUtil:arcgisonline.pages.utils.user,loadLabels:function(){var c=
arcgisonline.init;c.labels=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(c.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").homePage);D.mixin(c.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").emptyStates);D.attr("viewerLink","innerHTML",c.labels.viewerLink);D.attr("viewerDescription","innerHTML",c.labels.viewerDescription);D.attr("signUpLink","innerHTML",c.labels.signUpLink);D.attr("signUpDescription","innerHTML",c.labels.signUpDescription);D.attr("featuredVideosLink",
"innerHTML",c.labels.featuredVideosLink);D.attr("featuredVideosDescription","innerHTML",c.labels.featuredVideosDescription);D.attr("lnkExplore","innerHTML",c.labels.explorerLink);D.attr("pExplore","innerHTML",c.labels.explorerDescription);D.attr("signUpImg","alt",c.labels.signUpLink);D.attr("signUpImg","title",c.labels.signUpLink);D.attr("mapImg","alt",c.labels.viewerLink);D.attr("mapImg","title",c.labels.viewerLink);D.attr("developersImg","alt",c.labels.explorerLink);D.attr("developersImg","title",
c.labels.explorerLink);D.attr("videosImg","alt",c.labels.featuredVideosLink);D.attr("videosImg","title",c.labels.featuredVideosLink);D.attr("next","aria-label",esriGeowConfig.isRightToLeft?c.labels.previous:c.labels.next);D.attr("prev","aria-label",esriGeowConfig.isRightToLeft?c.labels.next:c.labels.previous);D.attr("skipToContent","innerHTML",c.labels.skipToContent)},initialize:function(c){var h=arcgisonline.init;h.credential=c;esri.i18nBundle=D.i18n.getLocalization("arcgisonline","arcgisonline");
h.loadLabels();h.initSanitizer();D.byId("logoImg")&&D.attr("logoImg","src",arcgisonline.sharing.util.relativeToExplicitUrl("images/logo-pod.jpg"));D.byId("featuredVideosLink").href=esriGeowConfig.learnArcGIS;h.isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&null!==esriGeowConfig.isMultiTenant&&!1===esriGeowConfig.isMultiTenant;this.userUtil.getUserProperties(esriGeowConfig.userInfo).then(function(g){esriGeowConfig.userProperties=g;arcgisonline.sharing.geow.Account.getSelf(D.hitch(h,arcgisonline.init.initPage),
D.hitch(arcgisonline.init,arcgisonline.init.initPage))})},unhide:function(){document.body.classList.remove("hide")},initSanitizer:function(){var c=arcgisonline.init;c.sanitizer=new esri.libs.sanitizer.Sanitizer(c.orgUtil.orgSettingsSanitizerParams,!0);c.sanitizer.sanitizeUrl=c.orgUtil.sanitizeUrlOrgOverride;c.orgUtil.adjustSanitizerForOrgSettingsUse(c.sanitizer)},overrideSettings:function(c){var h=arcgisonline.init;h.settings=c;h.isPortal=arcgisonline.sharing.util.isPortal();if(h.settings.id&&0<h.settings.id.length){h.isOrg=
!0;var g=D.byId("headerTitle");g&&g.parentNode.removeChild(g)}h.isPortal&&h.getFederatedServers();c.allSSL&&(h.allSSL=c.allSSL);c.portalName&&(esriGeowConfig.portalName=c.portalName);c.portalHostname&&(esriGeowConfig.portalHostname=c.portalHostname);c.portalHeaderImage&&(esriGeowConfig.portalHeaderImage=c.portalHeaderImage);c.homePageFeaturedContent?esriGeowConfig.homePageFeaturedContent=c.homePageFeaturedContent:h.isOrg&&(esriGeowConfig.homePageFeaturedContent=null);esri.isDefined(c.homePageFeaturedContentCount)&&
(esriGeowConfig.homePageFeaturedContentCount=c.homePageFeaturedContentCount);if(c.rotatorPanels)if(h.isOrg){esriGeowConfig.rotatorPanels=c.rotatorPanels;g=esriGeowConfig.rotatorPanels;for(var e,l,r,k=0;k<g.length;k++)e=g[k],h.isPortal&&"7443"===location.port&&-1===esriGeowConfig.self.portalHostname.indexOf(":7443")&&(l=new RegExp(esriGeowConfig.self.portalHostname,"gi"),l.test(e.innerHTML)&&(r=esriGeowConfig.self.portalHostname.split("/"),r[0]+=":7443",r[1]="arcgis",e.innerHTML=e.innerHTML.replace(l,
r.join("/")))),g[k].innerHTML=e.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl)}else D.create("div",{id:"homeCalciteBanner"},D.byId("matrixLayout")),D.addClass(D.byId("details"),"calcite_home calcite_home_details"),D.addClass(D.byId("matrixLayout"),"calcite_home calcite_home_matrixLayout"),D.addClass(D.byId("homeCalciteBanner"),"calcite_home calcite_home_banner"),D.addClass(D.byId("featuredMaps"),"calcite_home calcite_home_featuredMaps"),D.addClass(D.byId("bottomContent"),"calcite_home calcite_home_bottomContent");
else h.isOrg&&(esriGeowConfig.rotatorPanels=null);h=c.showHomePageDescription;esriGeowConfig.showHomePageDescription=void 0!==h&&null!==h?c.showHomePageDescription:!1},getFederatedServers:function(){var c=arcgisonline.sharing.util.getUser();!esriGeowConfig.federatedServers&&c&&arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/"+esriGeowConfig.self.id+"/servers"}).then(D.hitch(this,function(h){arcgisonline.sharing.util.setFederatedServers((h||{}).servers||[])}))},initOrganization:function(){var c=
arcgisonline.init;esri.hide(D.byId("bottomSection"));if(esriGeowConfig.explorerOnline){var h="http://developers.arcgis.com",g=c.labels.explorerLink,e=c.labels.explorerDescription;c.isSingleTenant&&(h=esriGeowConfig.explorerOnline,g=c.labels.explorerLinkPortal,e=c.labels.explorerDescriptionPortal);D.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'+h+'" target\x3d"_blank" \x3e'+g+'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e'+
e+"\x3c/p\x3e"},D.byId("topRow2"))}h=c.settings.name;g=c.settings.description;e=esriGeowConfig.showHomePageDescription;e=void 0!==e&&null!==e&&!1===e?!1:!0;var l=esri.isDefined(g)&&"\x3cbr\x3e"!==g&&"\x3cbr/\x3e"!==g&&"\x3cbr /\x3e"!==g&&""!==g;l&&e?(D.attr(D.byId("orgDetails"),"innerHTML",c.sanitizer.sanitize(g)),esri.show(D.byId("organizationSection"))):!arcgisonline.sharing.util.isPortal()||l||e||(g='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+(c.settings.helpBase+c.settings.helpMap.m["120000837"])+
'" target\x3d"_blank"\x3e',D.attr(D.byId("orgDetails"),"innerHTML",esri.substitute({linkStart:g,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},c.labels.portalDefaultDesc)),esri.show(D.byId("organizationSection")));g=(g=arcgisonline.sharing.util.getToken())?"?token\x3d"+g:"";e=c.settings.backgroundImage;esri.isDefined(e)?"none"!==e?0===e.indexOf("images/")?D.query("body").addClass("defaultBackground"):(e=esriGeowConfig.restBaseUrl+"portals/self/resources/"+e+g,l=D.query("body.esri")[0],D.style(l,"backgroundImage",
"url('"+e+"')"),D.style(l,"backgroundPosition","top center"),D.style(l,"backgroundRepeat","repeat-x")):D.query("body").addClass("calciteBackground"):D.query("body").addClass("calciteBackground");if(esriGeowConfig.rotatorPanels){D.addClass(D.byId("matrixLayout"),"matrixLayoutShort");D.addClass(D.byId("details"),"detailsShort");h=arcgisonline.sharing.util.getToken();e=esriGeowConfig.rotatorPanels;for(l=0;l<e.length;l++)g=e[l],g.id&&(g.innerHTML=c.allSSL||c.isPortal&&"https:"===location.protocol?g.innerHTML.replace(/http:/g,
"https:"):g.innerHTML),g.innerHTML=g.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl),g.innerHTML=g.innerHTML.replace("SECURITY_TOKEN",h?h:""),g.innerHTML=c.expandPredefinedImageUrls(g.innerHTML),g.innerHTML=c.expandProtocolAgnosticUrls(g.innerHTML),g.innerHTML=c.sanitizer.sanitize(g.innerHTML);c.createRotator(e)}else e=esriGeowConfig.portalHeaderImage?esriGeowConfig.portalHeaderImage:arcgisonline.sharing.util.relativeToExplicitUrl("images/organizationSplash.jpg"),D.create("img",{id:"headerImage",
src:e},D.byId("matrixLayout")),D.addClass(D.byId("headerImage"),"portalImage"),e=D.create("div",{id:"logoDisplay"},D.byId("matrixLayout")),l="",c.settings&&c.settings.thumbnail&&(l=esriGeowConfig.restBaseUrl+"portals/self/resources/"+c.settings.thumbnail+g,D.create("img",{src:l,alt:h},e)),D.create("span",{innerHTML:h},e),D.addClass(D.byId("matrixLayout"),"matrixLayoutShort"),D.addClass(D.byId("details"),"detailsShort");c.unhide()},expandPredefinedImageUrls:function(c){var h=window.location.href.substring(0,
window.location.href.lastIndexOf("/")+1);c=this.expandPredefinedImageUrl(c,"images/banner-1.jpg",h);c=this.expandPredefinedImageUrl(c,"images/banner-2.jpg",h);c=this.expandPredefinedImageUrl(c,"images/banner-3.jpg",h);c=this.expandPredefinedImageUrl(c,"images/banner-4.jpg",h);c=this.expandPredefinedImageUrl(c,"images/banner-5.jpg",h);c=this.expandPredefinedImageUrl(c,"images/organizationSplash.jpg",h);return c=this.expandPredefinedImageUrl(c,"images/arcgis_background.jpg",h)},expandPredefinedImageUrl:function(c,
h,g){return c.replace('src\x3d"'+h+'"','src\x3d"'+g+h+'"').replace("src\x3d'"+h+"'","src\x3d'"+g+h+"'")},expandProtocolAgnosticUrls:function(c){var h=window.location.protocol;return c.replace('src\x3d"//','src\x3d"'+h+"//").replace("src\x3d'//","src\x3d'"+h+"//")},initPage:function(c,h){var g=arcgisonline.init;esriGeowConfig.userInfo&&g.credential&&(esriGeowConfig.userInfo.credential=g.credential,esriGeowConfig.userInfo.token=g.credential.token);!c||c.code||c.message||g.overrideSettings(c);var e=
arcgisonline.sharing.util.getUser();if(g.isSingleTenant||e&&e.accountId)g.isOrg=!0,(e=D.byId("headerTitle"))&&e.parentNode.removeChild(e);g.isOrg?document.title=g.settings.name:(document.title=esriGeowConfig.portalName||g.labels.arcgis,D.query("body").addClass("defaultBackground"),esriGeowConfig.portalHeaderImage?((e=D.byId("headerTitle"))&&e.parentNode.removeChild(e),D.create("img",{id:"headerImage",src:esriGeowConfig.portalHeaderImage},D.byId("matrixLayout")),D.addClass(D.byId("headerImage"),"portalImage")):
g.createRotator(esriGeowConfig.rotatorPanels));e="";(e=arcgisonline.sharing.util.getUser())&&!e.accountId?(D.attr("signUpLink","innerHTML",g.labels.readyToUse),D.attr("signUpDescription","innerHTML",g.labels.readyToUseDescription),D.query("#signUpLink").attr("href",location.protocol+"//www.esri.com/software/apps")):(-1===esriGeowConfig.signin.indexOf("http")?(e=esriGeowConfig.baseUrl+esriGeowConfig.signin,!1!==esriGeowConfig.useSSL&&(e=e.replace("http:","https:"))):e=esriGeowConfig.signin,D.query("#signUpLink").attr("href",
e));esriGeowConfig.explorerOnline?D.query(".explorerLink").attr("href","http://developers.arcgis.com"):(D.style(D.byId("bottom3Grid"),"display","none"),D.removeClass(D.byId("bottomRow2"),"middle"),D.addClass(D.byId("bottomRow2"),"last"),D.addClass(D.byId("bottom2Grid"),"grid_6"),D.addClass(D.byId("bottom1Grid"),"grid_6"));D.style("page-border","visibility","visible");esriGeowConfig.homePageFeaturedContent?g.getGroup(esriGeowConfig.homePageFeaturedContent):esri.hide(D.byId("featuredMaps"));g.isOrg?
g.initOrganization():g.unhide()},createRotator:function(c){var h=new a.widget.AutoRotator({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:c,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},D.byId("imgRotator"));new a.widget.rotator.Controller({rotator:h,commands:"#"},D.byId("categories"));c&&1===c.length&&D.style("categories","display","none")},getNextElementSibling:function(c){if(c.nextElementSibling)return c.nextElementSibling;for(;c.nextSibling;){if(1===c.nextSibling.nodeType)return c.nextSibling;
c=c.nextSibling}},getGroup:function(c){c={q:c,f:"json",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/groups",content:c}).then(D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent),D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent))},getGroupContent:function(c){if(c&&c.results&&c.results[0]){for(var h=0,g=c.results[h];c.results.length>h+1&&!(-1<c.query.indexOf('"'+g.title+'"'));)h++,g=c.results[h];D.byId("galleryTitle").innerHTML=
g.title;0===esriGeowConfig.homePageFeaturedContentCount?this.showAllGroupItems(g):(c={q:"group:"+g.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:esriGeowConfig.homePageFeaturedContentCount,sortField:g.sortField?g.sortField:"modified",sortOrder:g.sortOrder?g.sortOrder:"desc",ts:(new Date).getTime()},arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:c}).then(D.hitch(arcgisonline.init,
arcgisonline.init.createGallery),function(e){}))}else esri.hide(D.byId("featuredMaps"))},showAllGroupItems:function(c){var h={q:"group:"+c.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:100,sortField:c.sortField?c.sortField:"modified",sortOrder:c.sortOrder?c.sortOrder:"desc",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:h}).then(D.hitch(this,
function(g){var e={results:g.results},l=0;l=0;if(0<g.nextStart){l=g.total-g.results.length;l=Math.ceil(l/100);var r=[];g=g.nextStart;for(var k=0;k<l;k++)h.start=g+100*k,r.push(arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:h}));(new D.DeferredList(r)).then(D.hitch(this,function(f){D.forEach(f,D.hitch(this,function(b){b[1]&&b[1].results&&(e.results=e.results.concat(b[1].results))}));this.createGallery(e)}),D.hitch(this,function(f){this.createGallery(e)}))}else this.createGallery(e)}),
function(g){})},createGallery:function(c,h){var g=c.results,e=new arcgisonline.sharing.dijit.Gallery({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:D.string.substitute(arcgisonline.sharing.dijit._Empty,{message:arcgisonline.init.labels.noContentAvailable,width:96})},"gallery");D.connect(e,"onContentChange",function(){g.length<=e.nodesPerPage&&(esriGeowConfig.isRightToLeft?(D.removeClass("next","prevButtonEnabled"),D.addClass("next",
"prevButtonDisabled")):(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")))});e.set("items",g);esriGeowConfig.isRightToLeft?(D.connect(D.byId("prev"),"click, keyup",e,e.nextPage),D.connect(D.byId("next"),"click, keyup",e,e.prevPage),D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.connect(D.byId("prev"),"click, keyup",e,e.prevPage),D.connect(D.byId("next"),"click, keyup",e,e.nextPage),D.removeClass("prev","prevButtonEnabled"),D.addClass("prev",
"prevButtonDisabled"));D.connect(e,"onPageChange",function(l){arcgisonline.init.galleryNodeMap={};esriGeowConfig.isRightToLeft?(1===l?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")),l===e.pageCount?(D.removeClass("prev","prevButtonEnabled"),D.addClass("prev","prevuttonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled"))):(1===l?(D.removeClass("prev",
"prevButtonEnabled"),D.addClass("prev","prevButtonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled")),l===e.pageCount?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")))});D.connect(e,"onNodeMouseEnter",function(l,r){var k=arcgisonline.init,f=l.currentTarget,b=arcgisonline.sharing.util.getUser();D.query("a",f).forEach(function(d){if(!k.galleryNodeMap[r.id]){var q=
arcgisonline.sharing.util.getHomePageGalleryLinkInfo(r),m=!1;q.href&&-1<q.href.toLowerCase().indexOf("javascript")&&r.url&&("Web Mapping Application"===r.type||"Mobile Application"===r.type||"Document Link"===r.type||"Site Application"===r.type||"Hub Site Application"===r.type||"StoryMap"===r.type)&&(q.href=r.url,m=!0);if("CityEngine Web Scene"===r.type||"Dashboard"===r.type||"Operation View"===r.type)m=!0;if(q&&q.href&&"JavaScript:void(0)"===q.href&&q.onclick)D.connect(d,"onclick",q.onclick);else{if(!b&&
"self"!==r.contentOrigin&&"public"===r.access&&q.href){var n=q.href.indexOf("/apps/");0===n?q.href="https://"+esriGeowConfig.self.portalHostname+q.href:0<q.href.indexOf(window.location.host+arcgisonline.sharing.util.getHomeAppContext())&&0<n?q.href="https://"+esriGeowConfig.self.portalHostname+q.href.substring(n):-1<q.href.indexOf(".arcgis.com")&&(n=q.href.split(".arcgis.com"),q.href="https://"+esriGeowConfig.self.portalHostname+n[n.length-1])}D.attr(d,"href",q.href)}D.attr(d,"target",m?"_blank":
"");k.galleryNodeMap[r.id]=!0}})})}})})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(D,B,a){D.DeferredList=function(c,h,g,e,l){var r=[];B.call(this);var k=this;0!==c.length||h||this.resolve([0,[]]);var f=0;a.forEach(c,function(b,d){function q(m,n){r[d]=[m,n];f++;f===c.length&&k.resolve(r)}b.then(function(m){h?k.resolve([d,m]):q(!0,m)},function(m){g?k.reject(m):q(!1,m);if(e)return null;throw m;})})};D.DeferredList.prototype=new B;D.DeferredList.prototype.gatherResults=
function(c){c=new D.DeferredList(c,!1,!0,!1);c.addCallback(function(h){var g=[];a.forEach(h,function(e){g.push(e[1])});return g});return c};return D.DeferredList})},"arcgisonline/sharing/dijit/_Empty":function(){define(["dojo/text!./templates/_Empty.html"],function(D){return D})},"esri/libs/sanitizer/Sanitizer":function(){!function(D,B){"object"==typeof exports&&"undefined"!=typeof module?module.exports=B():"function"==typeof define&&define.amd?define(B):(D="undefined"!=typeof globalThis?globalThis:
D||self).Sanitizer=B()}(this,function(){function D(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,
"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,
"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,
"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,
cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,"float":!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,
"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,
"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,
"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,
"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,
"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,
"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,
"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,
"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function B(na){var ma=na||{},ya={},za;for(za in ma)ya[za]=ma[za];(na=ya).whiteList=na.whiteList||H.whiteList;na.onAttr=na.onAttr||H.onAttr;na.onIgnoreAttr=na.onIgnoreAttr||H.onIgnoreAttr;na.safeAttrValue=na.safeAttrValue||H.safeAttrValue;this.options=na}function a(na){return na.replace(L,"\x26lt;").replace(K,"\x26gt;")}function c(na){return na.replace(Q,"\x26quot;")}function h(na){return na.replace(W,'"')}function g(na){return na.replace(ba,
function(ma,ya){return"x"===ya[0]||"X"===ya[0]?String.fromCharCode(parseInt(ya.substr(1),16)):String.fromCharCode(parseInt(ya,10))})}function e(na){return na.replace(S,":").replace(X," ")}function l(na){for(var ma="",ya=0,za=na.length;ya<za;ya++)ma+=32>na.charCodeAt(ya)?" ":na.charAt(ya);return O.trim(ma)}function r(na){return na=l(na=e(na=g(na=h(na))))}function k(na){return na=a(na=c(na))}function f(na,ma){for(;ma<na.length;ma++){var ya=na[ma];if(" "!==ya)return"\x3d"===ya?ma:-1}}function b(na,ma){for(;0<
ma;ma--){var ya=na[ma];if(" "!==ya)return"\x3d"===ya?ma:-1}}function d(na){return'"'===na[0]&&'"'===na[na.length-1]||"'"===na[0]&&"'"===na[na.length-1]?na.substr(1,na.length-2):na}function q(na){var ma=na||{},ya={},za;for(za in ma)ya[za]=ma[za];(na=ya).stripIgnoreTag&&(na.onIgnoreTag=va.onIgnoreTagStripAll);na.whiteList=na.whiteList||va.whiteList;na.onTag=na.onTag||va.onTag;na.onTagAttr=na.onTagAttr||va.onTagAttr;na.onIgnoreTag=na.onIgnoreTag||va.onIgnoreTag;na.onIgnoreTagAttr=na.onIgnoreTagAttr||
va.onIgnoreTagAttr;na.safeAttrValue=na.safeAttrValue||va.safeAttrValue;na.escapeHtml=na.escapeHtml||va.escapeHtml;this.options=na;!1===na.css?this.cssFilter=!1:(na.css=na.css||{},this.cssFilter=new ka(na.css))}var m,n,t=Object.prototype,z=Function.prototype.toString,w=t.hasOwnProperty,y=z.call(Object),x=t.toString,A=(m=Object.getPrototypeOf,n=Object,function(na){return m(n(na))}),v=function(na){var ma;if(!(ma=!na||"object"!=typeof na||"[object Object]"!=x.call(na))&&(ma=!1,null!=na&&"function"!=typeof na.toString))try{ma=
!!(na+"")}catch(ya){}if(ma)return!1;na=A(na);if(null===na)return!0;na=w.call(na,"constructor")&&na.constructor;return"function"==typeof na&&na instanceof na&&z.call(na)==y},u={exports:{}},C={};t={exports:{}};var E={},F=/javascript\s*:/gim;E.whiteList=D();E.getDefaultWhiteList=D;E.onAttr=function(na,ma,ya){};E.onIgnoreAttr=function(na,ma,ya){};E.safeAttrValue=function(na,ma){return F.test(ma)?"":ma};var G={indexOf:function(na,ma){var ya;if(Array.prototype.indexOf)return na.indexOf(ma);var za=0;for(ya=
na.length;za<ya;za++)if(na[za]===ma)return za;return-1},forEach:function(na,ma,ya){var za;if(Array.prototype.forEach)return na.forEach(ma,ya);var Ba=0;for(za=na.length;Ba<za;Ba++)ma.call(ya,na[Ba],Ba,na)},trim:function(na){return String.prototype.trim?na.trim():na.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(na){return String.prototype.trimRight?na.trimRight():na.replace(/(\s*$)/g,"")}},H=E,J=function(na,ma){function ya(){if(!Ba){var Ja=G.trim(na.slice(ha,qa)),fa=Ja.indexOf(":");if(-1!==fa){var Ya=
G.trim(Ja.slice(0,fa));fa=G.trim(Ja.slice(fa+1));Ya&&(Ja=ma(ha,T.length,Ya,fa,Ja))&&(T+=Ja+"; ")}}ha=qa+1}";"!==(na=G.trimRight(na))[na.length-1]&&(na+=";");for(var za=na.length,Ba=!1,ha=0,qa=0,T="";qa<za;qa++){var Ha=na[qa];if("/"===Ha&&"*"===na[qa+1]){Ha=na.indexOf("*/",qa+2);if(-1===Ha)break;ha=(qa=Ha+1)+1;Ba=!1}else"("===Ha?Ba=!0:")"===Ha?Ba=!1:";"===Ha?Ba||ya():"\n"===Ha&&ya()}return G.trim(T)};B.prototype.process=function(na){if(!(na=(na=na||"").toString()))return"";var ma=this.options,ya=ma.whiteList,
za=ma.onAttr,Ba=ma.onIgnoreAttr,ha=ma.safeAttrValue;return J(na,function(qa,T,Ha,Ja,fa){var Ya=ya[Ha],Xa=!1;if(!0===Ya?Xa=Ya:"function"==typeof Ya?Xa=Ya(Ja):Ya instanceof RegExp&&(Xa=Ya.test(Ja)),!0!==Xa&&(Xa=!1),Ja=ha(Ha,Ja)){var Ca;qa={position:T,sourcePosition:qa,source:fa,isWhite:Xa};return Xa?null==(Ca=za(Ha,Ja,qa))?Ha+":"+Ja:Ca:null==(Ca=Ba(Ha,Ja,qa))?void 0:Ca}})};!function(na,ma){for(var ya in(ma=na.exports=function(za,Ba){return(new B(Ba)).process(za)}).FilterCSS=B,E)ma[ya]=E[ya]}(t,t.exports);
var I={indexOf:function(na,ma){var ya;if(Array.prototype.indexOf)return na.indexOf(ma);var za=0;for(ya=na.length;za<ya;za++)if(na[za]===ma)return za;return-1},forEach:function(na,ma,ya){var za;if(Array.prototype.forEach)return na.forEach(ma,ya);var Ba=0;for(za=na.length;Ba<za;Ba++)ma.call(ya,na[Ba],Ba,na)},trim:function(na){return String.prototype.trim?na.trim():na.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(na){return(na=/\s|\n|\t/.exec(na))?na.index:-1}},R=t.exports.getDefaultWhiteList,O=
I,P=new t.exports.FilterCSS,L=/</g,K=/>/g,Q=/"/g,W=/&quot;/g,ba=/&#([a-zA-Z0-9]*);?/gim,S=/&colon;?/gim,X=/&newline;?/gim,aa=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,M=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,da=/u\s*r\s*l\s*\(.*/gi;C.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],
bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],
strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};C.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords",
"href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width",
"height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};
C.onTag=function(na,ma,ya){};C.onIgnoreTag=function(na,ma,ya){};C.onTagAttr=function(na,ma,ya){};C.onIgnoreTagAttr=function(na,ma,ya){};C.safeAttrValue=function(na,ma,ya,za){if(ya=r(ya),"href"===ma||"src"===ma){if("#"===(ya=O.trim(ya)))return"#";if("http://"!==ya.substr(0,7)&&"https://"!==ya.substr(0,8)&&"mailto:"!==ya.substr(0,7)&&"tel:"!==ya.substr(0,4)&&"data:image/"!==ya.substr(0,11)&&"ftp://"!==ya.substr(0,6)&&"./"!==ya.substr(0,2)&&"../"!==ya.substr(0,3)&&"#"!==ya[0]&&"/"!==ya[0])return""}else if("background"===
ma){if(aa.lastIndex=0,aa.test(ya))return""}else if("style"===ma){if((M.lastIndex=0,M.test(ya))||(da.lastIndex=0,da.test(ya)&&(aa.lastIndex=0,aa.test(ya))))return"";!1!==za&&(ya=(za=za||P).process(ya))}return ya=k(ya)};C.escapeHtml=a;C.escapeQuote=c;C.unescapeQuote=h;C.escapeHtmlEntities=g;C.escapeDangerHtml5Entities=e;C.clearNonPrintableCharacter=l;C.friendlyAttrValue=r;C.escapeAttrValue=k;C.onIgnoreTagStripAll=function(){return""};C.StripTagBody=function(na,ma){"function"!=typeof ma&&(ma=function(){});
var ya=!Array.isArray(na),za=[],Ba=!1;return{onIgnoreTag:function(ha,qa,T){return ya||-1!==O.indexOf(na,ha)?T.isClosing?(za.push([!1!==Ba?Ba:T.position,T.position+10]),Ba=!1,"[/removed]"):(Ba||(Ba=T.position),"[removed]"):ma(ha,qa,T)},remove:function(ha){var qa="",T=0;return O.forEach(za,function(Ha){qa+=ha.slice(T,Ha[0]);T=Ha[1]}),qa+=ha.slice(T)}}};C.stripCommentTag=function(na){for(var ma="",ya=0;ya<na.length;){var za=na.indexOf("\x3c!--",ya);if(-1===za){ma+=na.slice(ya);break}ma+=na.slice(ya,
za);ya=na.indexOf("--\x3e",za);if(-1===ya)break;ya+=3}return ma};C.stripBlankChar=function(na){na=na.split("");return(na=na.filter(function(ma){ma=ma.charCodeAt(0);return 127!==ma&&(!(31>=ma)||10===ma||13===ma)})).join("")};C.cssFilter=P;C.getDefaultCSSWhiteList=R;var ea={},Z=/[^a-zA-Z0-9_:\.\-]/gim;ea.parseTag=function(na,ma,ya){var za="",Ba=0,ha=!1,qa=!1,T=0,Ha=na.length,Ja="",fa="";T=0;a:for(;T<Ha;T++)if(fa=na.charAt(T),!1===ha)"\x3c"===fa&&(ha=T);else if(!1===qa)if("\x3c"===fa)za+=ya(na.slice(Ba,
T)),Ba=ha=T;else if("\x3e"===fa)za+=ya(na.slice(Ba,ha)),Ba=fa=na.slice(ha,T+1),Ja=I.spaceIndex(Ba),Ba=-1===Ja?Ba.slice(1,-1):Ba.slice(1,Ja+1),Ja=("/"===(Ba=I.trim(Ba).toLowerCase()).slice(0,1)&&(Ba=Ba.slice(1)),"/"===Ba.slice(-1)&&(Ba=Ba.slice(0,-1)),Ba),za+=ma(ha,za.length,Ja,fa,"\x3c/"===fa.slice(0,2)),Ba=T+1,ha=!1;else{if('"'===fa||"'"===fa){Ja=1;for(var Ya=na.charAt(T-Ja);""===Ya.trim()||"\x3d"===Ya;){if("\x3d"===Ya){qa=fa;continue a}Ya=na.charAt(T-++Ja)}}}else fa===qa&&(qa=!1);return Ba<na.length&&
(za+=ya(na.substr(Ba))),za};ea.parseAttr=function(na,ma){function ya(Ja,fa){if(!(1>(Ja=(Ja=I.trim(Ja)).replace(Z,"").toLowerCase()).length)){var Ya=ma(Ja,fa||"");Ya&&Ba.push(Ya)}}for(var za=0,Ba=[],ha=!1,qa=na.length,T=0;T<qa;T++){var Ha=na.charAt(T);if(!1!==ha||"\x3d"!==Ha)if(!1===ha||T!==za||'"'!==Ha&&"'"!==Ha||"\x3d"!==na.charAt(T-1))/\s|\n|\t/.test(Ha)&&((na=na.replace(/\s|\n|\t/g," "),!1===ha)?-1===(Ha=f(na,T))?(ya(I.trim(na.slice(za,T))),ha=!1,za=T+1):T=Ha-1:-1===(Ha=b(na,T-1))&&(ya(ha,d(I.trim(na.slice(za,
T)))),ha=!1,za=T+1));else{if(-1===(Ha=na.indexOf(Ha,T+1)))break;ya(ha,I.trim(na.slice(za+1,Ha)));ha=!1;za=(T=Ha)+1}else ha=na.slice(za,T),za=T+1}return za<na.length&&(!1===ha?ya(na.slice(za)):ya(ha,d(I.trim(na.slice(za))))),I.trim(Ba.join(" "))};var ka=t.exports.FilterCSS,va=C,Ea=ea.parseTag,Ga=ea.parseAttr;q.prototype.process=function(na){if(!(na=(na=na||"").toString()))return"";var ma=this.options,ya=ma.whiteList,za=ma.onTag,Ba=ma.onIgnoreTag,ha=ma.onTagAttr,qa=ma.onIgnoreTagAttr,T=ma.safeAttrValue,
Ha=ma.escapeHtml,Ja=this.cssFilter;ma.stripBlankChar&&(na=va.stripBlankChar(na));ma.allowCommentTag||(na=va.stripCommentTag(na));var fa=!1;ma.stripIgnoreTagBody&&(fa=va.StripTagBody(ma.stripIgnoreTagBody,Ba),Ba=fa.onIgnoreTag);na=Ea(na,function(Ya,Xa,Ca,Y,la){Xa={sourcePosition:Ya,position:Xa,isClosing:la,isWhite:ya.hasOwnProperty(Ca)};if(null!=(Ya=za(Ca,Y,Xa)))return Ya;if(Xa.isWhite){if(Xa.isClosing)return"\x3c/"+Ca+"\x3e";Ya=function(U){var ia=I.spaceIndex(U);if(-1===ia)return{html:"",closing:"/"===
U[U.length-2]};ia="/"===(U=I.trim(U.slice(ia+1,-1)))[U.length-1];return ia&&(U=I.trim(U.slice(0,-1))),{html:U,closing:ia}}(Y);var sa=ya[Ca];Xa=Ga(Ya.html,function(U,ia){var ua,wa=-1!==I.indexOf(sa,U);return null==(ua=ha(Ca,U,ia,wa))?wa?(ia=T(Ca,U,ia,Ja))?U+'\x3d"'+ia+'"':U:null==(ua=qa(Ca,U,ia,wa))?void 0:ua:ua});Y="\x3c"+Ca;return Xa&&(Y+=" "+Xa),Ya.closing&&(Y+=" /"),Y+="\x3e"}return null==(Ya=Ba(Ca,Y,Xa))?Ha(Y):Ya},Ha);return fa&&(na=fa.remove(na)),na};return function(na,ma){function ya(ha,qa){return(new za(qa)).process(ha)}
var za=q,Ba;for(Ba in(ma=na.exports=ya).filterXSS=ya,ma.FilterXSS=za,C)ma[Ba]=C[Ba];for(Ba in ea)ma[Ba]=ea[Ba];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=na.exports)}(u,u.exports),function(){function na(ma,ya){var za,Ba=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],
em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:"alt border height src style width".split(" "),li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:"border cellpadding cellspacing height style width".split(" "),tbody:[],tr:["align","height","style","valign"],td:"align colspan height nowrap rowspan style valign width".split(" "),
th:"align colspan height nowrap rowspan style valign width".split(" "),u:[],ul:[],video:"autoplay controls height loop muted poster preload width".split(" ")};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there arcgis-quickcapture mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");this.arcgisFilterOptions={allowCommentTag:!0,
safeAttrValue:function(ha,qa,T,Ha){return"a"===ha&&"href"===qa||("img"===ha||"source"===ha)&&"src"===qa?Ba.sanitizeUrl(T):u.exports.safeAttrValue(ha,qa,T,Ha)}};ma&&!ya?za=ma:ma&&ya?(za=Object.create(this.arcgisFilterOptions),Object.keys(ma).forEach(function(ha){"whiteList"===ha?za.whiteList=Ba._extendObjectOfArrays([Ba.arcgisWhiteList,ma.whiteList||{}]):za[ha]=ma[ha]})):(za=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=za;this._xssFilter=new u.exports.FilterXSS(za)}
return na.prototype.sanitize=function(ma,ya){switch(void 0===ya&&(ya={}),typeof ma){case "number":return isNaN(ma)||!isFinite(ma)?null:ma;case "boolean":return ma;case "string":return this._xssFilter.process(ma);case "object":return this._iterateOverObject(ma,ya);default:if(!ya.allowUndefined||void 0!==ma)return null}},na.prototype.sanitizeUrl=function(ma){var ya=this._trim(ma.substring(0,ma.indexOf(":")));return"/"===ma||"#"===ma||"#"===ma[0]||-1<this.allowedProtocols.indexOf(ya.toLowerCase())?u.exports.escapeAttrValue(ma):
""},na.prototype.sanitizeHTMLAttribute=function(ma,ya,za,Ba){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(ma,ya,za,Ba):u.exports.safeAttrValue(ma,ya,za,Ba)},na.prototype.validate=function(ma,ya){void 0===ya&&(ya={});var za=this.sanitize(ma,ya);return{isValid:ma===za,sanitized:za}},na.prototype._extendObjectOfArrays=function(ma){var ya={};return ma.forEach(function(za){Object.keys(za).forEach(function(Ba){Array.isArray(za[Ba])&&Array.isArray(ya[Ba])?
ya[Ba]=ya[Ba].concat(za[Ba]):ya[Ba]=za[Ba]})}),ya},na.prototype._iterateOverObject=function(ma,ya){var za=this;void 0===ya&&(ya={});try{var Ba=!1,ha=void 0;if(Array.isArray(ma))ha=ma.reduce(function(qa,T){var Ha=za.validate(T,ya);return Ha.isValid?qa.concat([T]):(Ba=!0,qa.concat([Ha.sanitized]))},[]);else{if(!v(ma))return ya.allowUndefined&&void 0===ma?void 0:null;ha=Object.keys(ma).reduce(function(qa,T){var Ha=ma[T],Ja=za.validate(Ha,ya);return Ja.isValid?qa[T]=Ha:(Ba=!0,qa[T]=Ja.sanitized),qa},
{})}return Ba?ha:ma}catch(qa){return null}},na.prototype._trim=function(ma){return String.prototype.trim?ma.trim():ma.replace(/(^\s*)|(\s*$)/g,"")},na}()})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/kernel moment/moment ../../esriGeowConfig ./formatters ./arrays ./subscription ../../sharing/geow/Roles ../../sharing/util".split(" "),function(D,B,a,c,h,g,e,
l,r,k,f,b,d,q,m,n,t){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);var z=D.toUrl("arcgisonline/sharing/dijit")+"/css/images/app-icons/";return function(){function w(){}w.isMobile=function(){return 720>=window.innerWidth};w.getCompatibleUserTypes=
function(y,x,A){var v=[];x.forEach(function(u){var C=!1,E=!1;y.isPro&&u.apps.forEach(function(I){I.isAppBundle||I.entitlements.forEach(function(R){if(-1!==w._proKeys.indexOf(R)){-1!==w._proKeys.indexOf(y.key)&&(E=!0);var O=null===A||void 0===A?void 0:A.filter(function(P){return P.key===R})[0];O&&w.isProExtension(y.key)&&-1!==O.extNotSupported.indexOf(y.key)&&(C=!0)}})});var F=!1,G=!1,H=!1,J=(y.isEsriApp||y.isAppBundle)&&u.preventSignInFromNonUTEsriApps;u.apps.forEach(function(I){y.isAppBundle&&I.isAppBundle&&
I.id===y.itemId&&(F=!0);y.isAppBundle||I.isAppBundle||I.id!==y.itemId||-1===I.entitlements.indexOf(y.key)?!y.isAppBundle&&I.isAppBundle&&I.apps.some(function(O){return-1!==O.entitlements.indexOf(y.key)})&&(G=!0):G=!0;var R=y.requiredListings;0<(null===R||void 0===R?void 0:R.length)?I.isAppBundle?I.apps.some(function(O){return-1<R.indexOf(O.id)})&&(H=!0):-1<R.indexOf(I.id)&&(H=!0):H=!0});-1===y.allowedLevels.indexOf(u.level)&&0!==y.allowedLevels.length||C||E||F||G||!(0<u.maxUsers)||!H||u.supportsSignInOnlyFromUTApps||
J||v.push(u)});return v};w.isBusinessAnalyst=function(y){return"ArcGIS Business Analyst Web and Mobile Apps"===y||-1<this.baKeys.indexOf(y)};w.isDrone2Map=function(y){return"ArcGIS Drone2Map"===y||-1<this.droneKeys.indexOf(y)};w.userTypePassesRequired=function(y,x){var A=x.requiredListings;if(!A||0===A.length)return!0;var v=!1;return y.apps.some(function(u){u.isAppBundle?u.apps.some(function(C){return-1<A.indexOf(C.id)})&&(v=!0):-1<A.indexOf(u.id)&&(v=!0);return v})};w.checkPasswordStrength=function(y){return t["default"].request({url:t["default"].getSecureUrl(b["default"].restBaseUrl+
"portals/checkPasswordStrength"),content:{password:y}},{usePost:!0})};w.getSubscriptionInfo=function(){return t["default"].request({url:t["default"].getSecureUrl(b["default"].restBaseUrl+"portals/self/subscriptionInfo")})};w.filterRoles=function(y,x,A,v,u){var C=[],E=a.__spreadArray(a.__spreadArray([],n["default"].extraLevelOnePrivileges),x.privileges);"11"===v&&E.push("features:user:edit");y.forEach(function(F){if(A||!A&&x&&F.privileges&&!n["default"].exceedsRolePrivileges(E,F.privileges))u?C.push(F):
C.push({name:F.name,role:F.id,description:F.description})});return C};w.alreadyIncludedInUserType=function(y,x){var A,v=0<y.apps.filter(function(u){return x.itemId===u.id}).length;y.apps.forEach(function(u){u.isAppBundle&&u.apps.forEach(function(C){C.id===x.itemId&&(v=!0)})});(null!==(A=y.extensions)&&void 0!==A?A:[]).some(function(u){(u=u.id===x.itemId)&&(v=!0);return u});return v};w.convertAppBundletoEntitlement=function(y){return y.map(function(x){return{key:x.appBundleItemId,itemId:x.appBundleItemId,
title:x.name,used:x.assigned,total:x.maxUsers,isAppBundle:!0,apps:x.apps,allowedLevels:x.allowedLevels,usernames:x.usernames}})};w.transformAppBundleApps=function(y,x){var A=[];y.forEach(function(v){var u,C,E;1>=(null===(u=v.entitlements)||void 0===u?void 0:u.length)?(u=((null===(C=w._appSwitcherResponse)||void 0===C?void 0:C.apps)||[]).filter(function(F){return F.entitlement===v.entitlements[0]})[0],C="Classic Story Maps"===v.title&&x,null!==u&&void 0!==u&&u.hidden||C||(u&&(v.title=u.shortLabel||
u.title||v.title||""),A.push(v))):null===(E=v.entitlements)||void 0===E?void 0:E.forEach(function(F){var G,H=((null===(G=w._appSwitcherResponse)||void 0===G?void 0:G.apps)||[]).filter(function(J){return F&&J.entitlement===F})[0];(null===H||void 0===H?0:H.title)&&!H.hidden&&(G=a.__assign(a.__assign({},v),{title:H.shortLabel||H.title}),A.push(G))})});return A};w.initLicensesConfig=function(y){var x=new c["default"];y||x.resolve();w.queryAppSwitcherItem(y).then(function(A){var v;0<(null===(v=A.items)||
void 0===v?void 0:v.length)?(A=A.items[0],w.licensesConfigItem=A,w.getAppSwitcherConfig(A,y).then(function(){x.resolve()})):x.resolve()});return x};w.clearLicensesConfigCache=function(){w._appSwitcherSearchResponse=void 0;w._appSwitcherSearchDfd=void 0;w._appSwitcherResponse=void 0;w._appSwitcherConfigDfd=void 0};w.queryAppSwitcherItem=function(y){var x=new c["default"];w._appSwitcherSearchResponse?x.resolve(w._appSwitcherSearchResponse):w._appSwitcherSearchDfd?w._appSwitcherSearchDfd.then(function(A){x.resolve(A)}):
(w._appSwitcherSearchDfd=x,y.queryItems(b["default"].licensesItemQuery,!0).then(function(A){w._appSwitcherSearchResponse=A;x.resolve(A)},function(A){w._appSwitcherSearchResponse={};x.resolve({})}));return x};w.getAppSwitcherConfig=function(y,x){var A=new c["default"];w._appSwitcherResponse?A.resolve(w._appSwitcherResponse):w._appSwitcherConfigDfd?w._appSwitcherConfigDfd.then(function(v){A.resolve(v)}):(w._appSwitcherConfigDfd=A,t["default"].request({url:y.itemDataUrl}).then(function(v){w._appSwitcherResponse=
v;w.licensesConfig=v;v.appSwitcher&&(w._apps=v.appSwitcher.apps);A.resolve(v)},function(){w._appSwitcherResponse={};A.resolve({})}));return A};w.isEntitlement=function(y){return void 0!==y.key||void 0!==y.itemId};w.getAppIconDir=function(){return z};w.getAppIcon=function(y,x){function A(R){F.imagePath="svg-app-icon.svg";F.abbr=R.title.substring(0,1);F.showAbbr=!0;F.abbrClass="";F.ordinal=1;F.shapeClass=""}function v(R){var O=J.filter(function(P){var L,K;return P.entitlement&&1===(null===(L=R.entitlements)||
void 0===L?void 0:L.length)&&P.entitlement===(null===(K=R.entitlements)||void 0===K?void 0:K[0])||P.title&&P.title===R.title||P.shortLabel&&P.shortLabel===R.title})[0];-1!==R.title.indexOf("ArcGIS Pro")?(F.imagePath="arcgis-pro.png",F.ordinal=0):(null===O||void 0===O?0:O.image)?(F.imagePath=""+H+O.image,F.ordinal=0,G=!0):O&&!O.image?A(R):(F.imagePath="fieldmapsmobile"===R.id?z+"fieldmaps.png":I?""+H+R.title.replace(/\s/g,"_")+"/icon.png":z+"generic-app.png",F.shapeClass="not-hex",G=!0)}function u(R){var O,
P,L=J.filter(function(K){return K.entitlement&&K.entitlement===R.key||K.title&&K.title===R.title||K.label&&K.label===R.title||K.shortLabel&&K.shortLabel===R.title})[0];R.isPro||-1!==R.title.indexOf("ArcGIS Pro")?(F.imagePath="arcgis-pro.png",F.ordinal=0):(null===L||void 0===L?0:L.image)?(F.imagePath=""+H+L.image,F.ordinal=0,G=!0):L&&!L.image?A(R):(F.shapeClass="not-hex",R.icon?(F.imagePath=b["default"].restBaseUrl+"portals/self/resources/"+R.icon+"?token\x3d"+b["default"].userInfo.token,G=!0,F.ordinal=
2):(null===(P=null===(O=R.properties)||void 0===O?void 0:O.appSwitcher)||void 0===P?0:P.image)?(F.imagePath="https://"+b["default"].self.portalHostname+"/sharing/rest/content/items/"+R.itemId+"/resources/"+R.properties.appSwitcher.image+"?token\x3d"+b["default"].userInfo.token,G=!0,F.ordinal=2):"esri"===R.owner||"esri_apps"===R.owner||R.isAppBundle?(F.imagePath=I?""+H+R.title.replace(/\s/g,"_")+"/icon.png":z+"generic-app.png",G=!0):(F.imagePath=x,F.showAbbr=!0,F.abbrClass="",F.ordinal=3))}var C,E,
F={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},G=!1,H=b["default"].restBaseUrl+"content/items/"+(null===(C=w.licensesConfigItem)||void 0===C?void 0:C.id)+"/resources/",J=(null===(E=w._appSwitcherResponse)||void 0===E?void 0:E.apps)||[];if("User License Type Extension"===y.type){C=J.filter(function(R){return R.entitlement&&R.entitlement===y.key||R.title&&R.title===y.title})[0];E=t["default"].isPortal()?z+"user-type-extension.png":z+"user-type-extension-online.png";if(null===C||void 0===C?0:
C.image)E=""+H+C.image;return a.__assign(a.__assign({},F),{imagePath:E,ordinal:0})}if("Application SDK"===y.type)return a.__assign(a.__assign({},F),{imagePath:z+"runtime.png",ordinal:0});if(y.isExtension)return a.__assign(a.__assign({},F),{imagePath:z+"pro-extension.png",ordinal:0});C=w._getAppSwitcherIcon(y,x);var I=w.licensesConfigItem;x&&0!==x.length||(x="svg-app-circle.svg");C?F=C:(C=a.__assign({},y),-1<C.title.indexOf("ArcGIS Drone2Map")&&(C.title="ArcGIS Drone2Map"),w.isEntitlement(C)?u(C):
v(C));G||(F.imagePath=z+F.imagePath);F.isAppBundle=y.isAppBundle;return F};w.getEmptyAppIcon=function(){return z+"svg-app-icon.svg"};w._getAppSwitcherIcon=function(y,x){if(w._apps){x="svg-app-icon.svg";var A=w._apps.filter(function(u){var C=u.title&&u.title===y.title;w.isEntitlement(y)&&!C&&(C=u.itemId&&u.itemId===y.itemId);return C})[0];if(A){var v={};A.image?(v.imagePath=A.image,v.ordinal=0,v.abbrClass="hide",v.showAbbr=!1,v.abbr=""):(v.imagePath=x,v.abbr=A.abbr,v.showAbbr=!0,v.abbrClass="",v.ordinal=
1);v.shapeClass="";return v}}};w.getUserTypesContainingPro=function(y){return y.filter(function(x){return x.apps?x.apps.some(function(A){return"ArcGIS Pro"===A.title}):!1})};w.userTypeIncludesPro=function(y){var x;return null===(x=null===y||void 0===y?void 0:y.apps)||void 0===x?void 0:x.some(function(A){return"ArcGIS Pro"===A.title})};w.getProFromUserTypes=function(y){var x;y.forEach(function(A){A.apps&&(x=q["default"].find(A.apps,function(v){if("ArcGIS Pro"===v.title)return v}))});return x};w.getProFromAppBundles=
function(y){var x;y.forEach(function(A){x=q["default"].find(A.apps,function(v){if("ArcGIS Pro"===v.title)return v})});return x};w.getProExtensions=function(y){return y.filter(function(x){return-1!==w._proExtensionKeys.indexOf(x.key)})};w.isProExtension=function(y){return-1!==w._proExtensionKeys.indexOf(y)};w.isProKey=function(y){return-1!==w._proKeys.indexOf(y)};w.getProKeys=function(){return w._proKeys};w.filterOutProExtensions=function(y){return y.filter(function(x){return-1===w._proExtensionKeys.indexOf(x.key)})};
w.getProEntitlements=function(y){y=y.filter(function(x){return x.isPro&&-1<w._proKeys.indexOf(x.key)});y.forEach(function(x){"desktopBasicN"===x.key?x.ordinal=0:"desktopStdN"===x.key?x.ordinal=1:"desktopAdvN"===x.key&&(x.ordinal=2)});y.sort(function(x,A){return x.ordinal>A.ordinal?1:x.ordinal<A.ordinal?-1:0});return y};w.getUserRole=function(y){var x;return null!==(x=null===y||void 0===y?void 0:y.userRole)&&void 0!==x?x:{}};w.shouldShowMFA=function(y,x){var A=w.getUserRole(x).isAdmin(),v=!1;!y.isPortal&&
y.subscriptionInfo?(v=m["default"].isDeveloperSubscription(y.subscriptionInfo.type,y.isPortal),v=A&&b["default"].multiFactorEnabled&&y.mfaEnabled&&!v):v=y.isPortal&&y.supportsEmail&&A&&y.mfaEnabled;return v};w.canViewLastLogin=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewUsers()};w.canLoadLicensesUI=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewOrgUsers()&&y.canManageLicenses()};w.canLoadMembersCard=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewUsers()};
w.canManageMembers=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewUsers()&&(y.canUpdateUsers()||y.canDeleteUsers()||y.canChangeUserRoles()||y.canManageLicenses())};w.canGetUserTypes=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canInviteUsers()||y.canManageRoles()||y.canManageLicenses()};w.canGetUsersGroups=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewUsers()&&y.canViewOrgGroups()};w.canGetLicenseTypes=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canManageLicenses()||
y.canInviteUsers()};w.canSelectMembers=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canViewOrgUsers()&&(y.canDisableUsers()||y.canManageLicenses()||y.canAssignUsersToOrgGroups()||y.canReassignOrgItems())};w.canUseMemberActions=function(y){y=w.getUserRole(y);return y.isAdmin()||y.canUpdateUsers()||y.canDeleteUsers()||y.canDisableUsers()||y.canChangeUserRoles()};w.checkUserCultureSetting=function(y,x){var A=new c["default"],v=r["default"].queryToObject(window.location.search.substring(1)),u=
function(C){var E=-1<["hi"].indexOf(C);!C||k["default"].locale===C.toLowerCase()||E||v.locale?A.resolve():(E=b["default"].userInfo.culture,b["default"].userInfo.username===y.username&&(E&&(null===E||void 0===E?void 0:E.toLowerCase())===C.toLowerCase()||(b["default"].userInfo.culture=C.toLowerCase(),h["default"]("arcgisLocale",b["default"].userInfo.culture,{sameSite:"Strict"})),A.resolve(),window.location.reload()))};x?t["default"].request({url:b["default"].restBaseUrl+"community/users/"+y.username}).then(function(C){return u(C.culture)},
function(){return A.resolve()}):u(y.culture);return A};w.hasRequestedLegacyHomePageExtension=function(y){var x;return!y.isPortal&&!0===(null===(x=y.portalProperties)||void 0===x?void 0:x.extendLegacyHomePage)};w.hasModernHomePageEnabled=function(y){var x,A,v;return y.isPortal?"modern"===(null===(A=y.portalProperties)||void 0===A?void 0:A.homePage)||"modernOnly"===(null===(v=y.portalProperties)||void 0===v?void 0:v.homePage):"modern"===(null===(x=y.portalProperties)||void 0===x?void 0:x.homePage)||
w.isOrgPastLegacyHomePageCutOffDate(y)};w.hasTransitionalHomePageEnabled=function(y){var x;return y.isPortal?!1:"transitional"===(null===(x=y.portalProperties)||void 0===x?void 0:x.homePage)};w.isOrgPastLegacyHomePageCutOffDate=function(y){var x=(new Date("June 30, 2020")).getTime();return y.isPortal?!1:y.created>=x};w.isEnterpriseSetToModernHomePageOnly=function(y){var x;return y.isPortal&&"modernOnly"===(null===(x=y.portalProperties)||void 0===x?void 0:x.homePage)};w.hasLegacyHomePageDefaults=function(y){var x,
A=null===(x=y.rotatorPanels)||void 0===x?void 0:x[0];x=!y.homePageFeaturedContent;var v=!y.description;y=!y.backgroundImage;A=!A||"banner-2"===(null===A||void 0===A?void 0:A.id)&&-1<A.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<A.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===A||void 0===A?void 0:A.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return v&&y&&A&&x};w.neverLoggedInLabel=function(y,x){return e["default"].substitute(l["default"].myOrganization.notYetTooltip,{date:x})};w.lastLoginDate=function(y){var x=f["default"](new Date).diff(f["default"](y),"days"),A=f["default"](new Date).isSame(y,"day");return A?l["default"].filters.today:!A&&2>x?l["default"].myOrganization.membersTab.yesterday:0===y||-1===y||1E3===y?l["default"].myOrganization.notYet:d["default"].fullDate(y)};
w.disabledStyle=function(y){return y?"org-member-disabled":""};w.disabledStyleAllowEvents=function(y){return y?"org-member-disabled__allow-events":""};w.disabledLinkClass=function(y){return y?"org-member-disable-link":""};w.shouldShowOnboard=function(y,x){var A=t["default"].getCookie("esri_onboard",!0)||{},v=t["default"].isPortal(),u=!!b["default"].isDebug;u=v||u?document.domain:".arcgis.com";x||(x=new Date("June 30, 2019"));var C=!A[y]&&new Date<x;!v&&A[y]&&new Date>=x&&(delete A[y],h["default"]("esri_onboard",
g["default"].stringify(A),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:u,sameSite:"Strict"}));return C};w.createOnboardCookie=function(y){var x,A=t["default"].getCookie("esri_onboard")||{},v=t["default"].isPortal(),u=!!b["default"].isDebug;v=v||u?document.domain:".arcgis.com";h["default"]("esri_onboard",g["default"].stringify(a.__assign(a.__assign({},A),(x={},x[y]=!0,x))),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:v,sameSite:"Strict"})};w.createCookie=
function(y,x,A,v){var u=t["default"].isPortal(),C=!!b["default"].isDebug;v=v||!b["default"].self.urlKey?".arcgis.com":b["default"].self.urlKey+"."+b["default"].self.customBaseUrl;u=u||C?document.domain:v;A*=864E5;h["default"](y,g["default"].stringify(a.__assign({},x)),{expires:new Date((new Date).getTime()+A),path:"/",domain:u})};w.isSearchTermValid=function(y,x){var A=/^[^%()';]+$/,v=/^[a-zA-Z0-9@._]+$/;return("username"===x?v:A).test(y)||0===y.length};w.generateSearchErrorMessage=function(y,x){return{firstname:l["default"].myOrganization.restrictedFirstNameCharacters,
lastname:l["default"].myOrganization.restrictedLastNameCharacters,username:l["default"].createAccount.errors.restrictedCharacters,fullname:l["default"].myOrganization.restrictedFullNameCharacters}[x]||l["default"].controlBar.invalidSyntax};w.addBuiltInRolesAndTranslate=function(y,x){var A=[{id:"org_publisher",name:l["default"].myOrganization.formatters.rolePublisher},{id:"org_admin",name:l["default"].myOrganization.formatters.roleAdmin},{id:"org_user",name:l["default"].myOrganization.formatters.roleUser}];
A=a.__spreadArray(a.__spreadArray([],y),A);A.forEach(function(v){var u=x.filter(function(C){return C.id===v.id})[0];u&&(v.name=u.name)});return A};w.highlight=function(y,x){if(x){var A=x.textContent.replace(new RegExp("("+y+")","ig"),'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e');x.innerHTML=A}};w.categorizeEntitlements=function(y){var x=w.getProExtensions(y);y=w.filterOutProExtensions(y);var A=w.getProEntitlements(y),v=[],u=[],C=[],E=[];y.forEach(function(F){"User License Type Extension"===
F.type?C.push(F):"Application SDK"===F.type?E.push(F):F.type&&(-1<F.type.indexOf("Application")||-1<F.type.indexOf("Web AppBuilder Widget"))?v.push(F):F.type&&-1===F.type.indexOf("Applcation")&&-1===F.type.indexOf("Web AppBuilder Widget")&&u.push(F)});return{pro:A,proExtensions:x,apps:v,data:u,userTypeExtensions:C,runtime:E}};w.pickRandomHomePageStockImage=function(){return""+Math.floor(2*Math.random()+1)};w.getTitleColorBasedOnStockImage=function(y){return q["default"].includes(["4","5","6"],y)?
"white-ramp":"dark-ramp"};w.isAdminRole=function(y){var x=!1;y.privileges?x=y.privileges.some(function(A){return-1<A.indexOf(":admin")}):"org_admin"===y.id&&(x=!0);return x};w.filterIncludedEntitlements=function(y){var x;return y.entitlements&&null!==(x=y.licenseType)&&void 0!==x&&x.apps?y.entitlements.filter(function(A){var v,u=!1;u=null===(v=y.licenseType)||void 0===v?void 0:v.apps.some(function(C){return C.isAppBundle?C.apps.some(function(E){return-1<E.entitlements.indexOf(A)}):-1<C.entitlements.indexOf(A)});
return!u}):y.entitlements};w.isIncludedThroughUserType=function(y,x){var A;return null===(A=y.licenseType)||void 0===A?void 0:A.apps.some(function(v){return v.isAppBundle?v.apps.some(function(u){return-1<u.entitlements.indexOf(x)}):-1<v.entitlements.indexOf(x)})};w.getAppTitle=function(y){var x,A=((null===(x=w._appSwitcherResponse)||void 0===x?void 0:x.apps)||[]).filter(function(v){return v.entitlement===y.entitlements[0]})[0];return 1===y.entitlements.length?(null===A||void 0===A?void 0:A.title)||
y.title||"":y.title||""};w.getClearEmptyFieldsStateForHelperService=function(y){return""===y?!0:void 0};w.adjustSanitizerForOrgSettingsUse=function(y){Object.keys(y._xssFilter.cssFilter.options.whiteList).forEach(function(x){y._xssFilter.cssFilter.options.whiteList[x]=!0});y._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;y._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=!0};w.sanitizeUrlOrgOverride=function(y){return y};
w.canShowDistributedCollaborations=function(y,x,A){if(y)return!0;var v=m["default"].isPersonalUse(A,y);y=m["default"].isDeveloperSubscription(A,y)||m["default"].isTrialSubscription(A,y);x=x>=(new Date("June 29, 2021")).getTime();return!(v||y&&x)};w.checkForAutoMigratedOrgHomePage=function(y){var x=new c["default"],A=null===y||void 0===y?void 0:y.portalUser,v=null===A||void 0===A?void 0:A.userRole;A=!(null===A||void 0===A||!A.orgId);v=!!((null===v||void 0===v?0:v.isAdmin())||(null===v||void 0===v?
0:v.canManageWebsite()));var u=w.hasModernHomePageEnabled(y),C=w.hasTransitionalHomePageEnabled(y),E=w.hasLegacyHomePageDefaults(y),F=w.hasRequestedLegacyHomePageExtension(y);!A||!v||u||C||F||E?x.resolve():w.markOrgHomePageAsMigrated(y,!0).then(function(){x.resolve()},function(){x.resolve()});return x};w.isTransitionalHomePage=function(y){var x,A=(null===y||void 0===y?void 0:y.portalUser)||(null===y||void 0===y?void 0:y.user),v=!(null===A||void 0===A||!A.orgId);A=!A&&0<(null===(x=y.id)||void 0===
x?void 0:x.length);x=w.hasModernHomePageEnabled(y);var u=w.hasTransitionalHomePageEnabled(y),C=w.hasLegacyHomePageDefaults(y),E=w.hasRequestedLegacyHomePageExtension(y),F=(new Date("June 30, 2020")).getTime();y=y.created<F;return(v||A)&&(u||!x&&!E&&!C&&y)};w.markOrgHomePageAsMigrated=function(y,x){var A=new c["default"],v=t["default"].getSecureUrl(b["default"].restBaseUrl)+"portals/self/update",u=a.__assign(a.__assign({},y.portalProperties),{homePage:x?"transitional":"modern"}),C={portalProperties:JSON.stringify(u)};
t["default"].request({url:v,content:C},{usePost:!0}).then(function(E){null!==E&&void 0!==E&&E.code||(b["default"].self.portalProperties=y.portalProperties=u);A.resolve()},function(E){A.resolve()});return A};w.calculateHomePageLoadingProperties=function(y){var x,A,v,u=r["default"].queryToObject(window.location.search.slice(1)),C=y.isPortal||0<(null===(A=null===(x=y.user)||void 0===x?void 0:x.orgId)||void 0===A?void 0:A.length)||0<(null===(v=y.id)||void 0===v?void 0:v.length);x=w.hasModernHomePageEnabled(y);
A=w.hasLegacyHomePageDefaults(y);y=w.isTransitionalHomePage(y);u=C&&(!x||x&&!A)&&"true"===u.legacy;return{showModern:!C||C&&(x||A||y)&&!u,previewLegacy:u}};w.getBuyLink=function(y){if(!y.isPortal){if(y.subscriptionInfo){var x=y.subscriptionInfo.type;if("Personal Use"===x||"Student Use"===x)return(y=y.ipCntryCode?b["default"].purchaseUrls[y.ipCntryCode.toLowerCase()]:void 0)?y:b["default"].purchaseUrls.renew}if(y.ipCntryCode)return y=y.ipCntryCode.toLowerCase(),b["default"].purchaseUrls[y]}};w.baKeys=
["BusinessAnlyst","baStdN","businessanlyst"];w.droneKeys=["drone2MapStdN","drone2MapAdvN"];w._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];w._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN indoorsN".split(" ");
w.orgSettingsSanitizerParams={whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv",
"charset"],p:["id","class"],span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],
section:["id","class","style"],summary:["id","class","style"],time:["id","class","style"]}};return w}()})},"tslib/tslib":function(){var D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u;(function(C){function E(G,H){G!==F&&("function"===typeof Object.create?Object.defineProperty(G,"__esModule",{value:!0}):G.__esModule=!0);return function(J,I){return G[J]=H?H(J,I):I}}var F="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?
define("tslib",["exports"],function(G){C(E(F,E(G)))}):"object"===typeof module&&"object"===typeof module.exports?C(E(F,E(module.exports))):C(E(F))})(function(C){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,H){G.__proto__=H}||function(G,H){for(var J in H)Object.prototype.hasOwnProperty.call(H,J)&&(G[J]=H[J])};D=function(G,H){function J(){this.constructor=G}if("function"!==typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");
E(G,H);G.prototype=null===H?Object.create(H):(J.prototype=H.prototype,new J)};B=Object.assign||function(G){for(var H,J=1,I=arguments.length;J<I;J++){H=arguments[J];for(var R in H)Object.prototype.hasOwnProperty.call(H,R)&&(G[R]=H[R])}return G};a=function(G,H){var J={},I;for(I in G)Object.prototype.hasOwnProperty.call(G,I)&&0>H.indexOf(I)&&(J[I]=G[I]);if(null!=G&&"function"===typeof Object.getOwnPropertySymbols){var R=0;for(I=Object.getOwnPropertySymbols(G);R<I.length;R++)0>H.indexOf(I[R])&&Object.prototype.propertyIsEnumerable.call(G,
I[R])&&(J[I[R]]=G[I[R]])}return J};c=function(G,H,J,I){var R=arguments.length,O=3>R?H:null===I?I=Object.getOwnPropertyDescriptor(H,J):I,P;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)O=Reflect.decorate(G,H,J,I);else for(var L=G.length-1;0<=L;L--)if(P=G[L])O=(3>R?P(O):3<R?P(H,J,O):P(H,J))||O;return 3<R&&O&&Object.defineProperty(H,J,O),O};h=function(G,H){return function(J,I){H(J,I,G)}};g=function(G,H){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(G,
H)};e=function(G,H,J,I){function R(O){return O instanceof J?O:new J(function(P){P(O)})}return new (J||(J=Promise))(function(O,P){function L(W){try{Q(I.next(W))}catch(ba){P(ba)}}function K(W){try{Q(I["throw"](W))}catch(ba){P(ba)}}function Q(W){W.done?O(W.value):R(W.value).then(L,K)}Q((I=I.apply(G,H||[])).next())})};l=function(G,H){function J(Q){return function(W){return I([Q,W])}}function I(Q){if(O)throw new TypeError("Generator is already executing.");for(;R;)try{if(O=1,P&&(L=Q[0]&2?P["return"]:Q[0]?
P["throw"]||((L=P["return"])&&L.call(P),0):P.next)&&!(L=L.call(P,Q[1])).done)return L;if(P=0,L)Q=[Q[0]&2,L.value];switch(Q[0]){case 0:case 1:L=Q;break;case 4:return R.label++,{value:Q[1],done:!1};case 5:R.label++;P=Q[1];Q=[0];continue;case 7:Q=R.ops.pop();R.trys.pop();continue;default:if(!(L=R.trys,L=0<L.length&&L[L.length-1])&&(6===Q[0]||2===Q[0])){R=0;continue}if(3===Q[0]&&(!L||Q[1]>L[0]&&Q[1]<L[3]))R.label=Q[1];else if(6===Q[0]&&R.label<L[1])R.label=L[1],L=Q;else if(L&&R.label<L[2])R.label=L[2],
R.ops.push(Q);else{L[2]&&R.ops.pop();R.trys.pop();continue}}Q=H.call(G,R)}catch(W){Q=[6,W],P=0}finally{O=L=0}if(Q[0]&5)throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}var R={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},O,P,L,K;return K={next:J(0),"throw":J(1),"return":J(2)},"function"===typeof Symbol&&(K[Symbol.iterator]=function(){return this}),K};r=function(G,H){for(var J in G)"default"===J||Object.prototype.hasOwnProperty.call(H,J)||u(H,G,J)};u=Object.create?function(G,
H,J,I){void 0===I&&(I=J);Object.defineProperty(G,I,{enumerable:!0,get:function(){return H[J]}})}:function(G,H,J,I){void 0===I&&(I=J);G[I]=H[J]};k=function(G){var H="function"===typeof Symbol&&Symbol.iterator,J=H&&G[H],I=0;if(J)return J.call(G);if(G&&"number"===typeof G.length)return{next:function(){G&&I>=G.length&&(G=void 0);return{value:G&&G[I++],done:!G}}};throw new TypeError(H?"Object is not iterable.":"Symbol.iterator is not defined.");};f=function(G,H){var J="function"===typeof Symbol&&G[Symbol.iterator];
if(!J)return G;var I=J.call(G),R,O=[];try{for(;(void 0===H||0<H--)&&!(R=I.next()).done;)O.push(R.value)}catch(L){var P={error:L}}finally{try{R&&!R.done&&(J=I["return"])&&J.call(I)}finally{if(P)throw P.error;}}return O};b=function(){for(var G=[],H=0;H<arguments.length;H++)G=G.concat(f(arguments[H]));return G};d=function(){for(var G=0,H=0,J=arguments.length;H<J;H++)G+=arguments[H].length;G=Array(G);var I=0;for(H=0;H<J;H++)for(var R=arguments[H],O=0,P=R.length;O<P;O++,I++)G[I]=R[O];return G};q=function(G,
H){for(var J=0,I=H.length,R=G.length;J<I;J++,R++)G[R]=H[J];return G};m=function(G){return this instanceof m?(this.v=G,this):new m(G)};n=function(G,H,J){function I(ba){K[ba]&&(Q[ba]=function(S){return new Promise(function(X,aa){1<W.push([ba,S,X,aa])||R(ba,S)})})}function R(ba,S){try{var X=K[ba](S);X.value instanceof m?Promise.resolve(X.value.v).then(O,P):L(W[0][2],X)}catch(aa){L(W[0][3],aa)}}function O(ba){R("next",ba)}function P(ba){R("throw",ba)}function L(ba,S){(ba(S),W.shift(),W.length)&&R(W[0][0],
W[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=J.apply(G,H||[]),Q,W=[];return Q={},I("next"),I("throw"),I("return"),Q[Symbol.asyncIterator]=function(){return this},Q};t=function(G){function H(R,O){J[R]=G[R]?function(P){return(I=!I)?{value:m(G[R](P)),done:"return"===R}:O?O(P):P}:O}var J,I;return J={},H("next"),H("throw",function(R){throw R;}),H("return"),J[Symbol.iterator]=function(){return this},J};z=function(G){function H(O){R[O]=G[O]&&function(P){return new Promise(function(L,
K){P=G[O](P);J(L,K,P.done,P.value)})}}function J(O,P,L,K){Promise.resolve(K).then(function(Q){O({value:Q,done:L})},P)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=G[Symbol.asyncIterator],R;return I?I.call(G):(G="function"===typeof k?k(G):G[Symbol.iterator](),R={},H("next"),H("throw"),H("return"),R[Symbol.asyncIterator]=function(){return this},R)};w=function(G,H){Object.defineProperty?Object.defineProperty(G,"raw",{value:H}):G.raw=H;return G};var F=Object.create?
function(G,H){Object.defineProperty(G,"default",{enumerable:!0,value:H})}:function(G,H){G["default"]=H};y=function(G){if(G&&G.__esModule)return G;var H={};if(null!=G)for(var J in G)"default"!==J&&Object.prototype.hasOwnProperty.call(G,J)&&u(H,G,J);F(H,G);return H};x=function(G){return G&&G.__esModule?G:{"default":G}};A=function(G,H,J,I){if("a"===J&&!I)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof H?G!==H||!I:!H.has(G))throw new TypeError("Cannot read private member from an object whose class did not declare it");
return"m"===J?I:"a"===J?I.call(G):I?I.value:H.get(G)};v=function(G,H,J,I,R){if("m"===I)throw new TypeError("Private method is not writable");if("a"===I&&!R)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof H?G!==H||!R:!H.has(G))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===I?R.call(G,J):R?R.value=J:H.set(G,J),J};C("__extends",D);C("__assign",B);C("__rest",a);C("__decorate",c);C("__param",h);C("__metadata",
g);C("__awaiter",e);C("__generator",l);C("__exportStar",r);C("__createBinding",u);C("__values",k);C("__read",f);C("__spread",b);C("__spreadArrays",d);C("__spreadArray",q);C("__await",m);C("__asyncGenerator",n);C("__asyncDelegator",t);C("__asyncValues",z);C("__makeTemplateObject",w);C("__importStar",y);C("__importDefault",x);C("__classPrivateFieldGet",A);C("__classPrivateFieldSet",v)})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(D,B){D.cookie=function(a,c,h){var g=document.cookie;
if(1==arguments.length)var e=(e=g.match(new RegExp("(?:^|; )"+B.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(e[1]):void 0;else{h=h||{};g=h.expires;if("number"==typeof g){var l=new Date;l.setTime(l.getTime()+864E5*g);g=h.expires=l}g&&g.toUTCString&&(h.expires=g.toUTCString());c=encodeURIComponent(c);g=a+"\x3d"+c;for(var r in h)g+="; "+r,l=h[r],!0!==l&&(g+="\x3d"+l);document.cookie=g}return e};D.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),
navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return D.cookie})},"moment/moment":function(){(function(D,B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define(B):D.moment=B()})(this,function(){function D(){return md.apply(null,arguments)}function B(N){return N instanceof Array||"[object Array]"===Object.prototype.toString.call(N)}
function a(N){return null!=N&&"[object Object]"===Object.prototype.toString.call(N)}function c(N,ca){return Object.prototype.hasOwnProperty.call(N,ca)}function h(N){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(N).length;for(var ca in N)if(c(N,ca))return!1;return!0}function g(N){return void 0===N}function e(N){return"number"===typeof N||"[object Number]"===Object.prototype.toString.call(N)}function l(N){return N instanceof Date||"[object Date]"===Object.prototype.toString.call(N)}
function r(N,ca){var ra=[],Aa;for(Aa=0;Aa<N.length;++Aa)ra.push(ca(N[Aa],Aa));return ra}function k(N,ca){for(var ra in ca)c(ca,ra)&&(N[ra]=ca[ra]);c(ca,"toString")&&(N.toString=ca.toString);c(ca,"valueOf")&&(N.valueOf=ca.valueOf);return N}function f(N,ca,ra,Aa){return Va(N,ca,ra,Aa,!0).utc()}function b(N){null==N._pf&&(N._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],
era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return N._pf}function d(N){if(null==N._isValid){var ca=b(N),ra=Mb.call(ca.parsedDateParts,function(Aa){return null!=Aa});ra=!isNaN(N._d.getTime())&&0>ca.overflow&&!ca.empty&&!ca.invalidEra&&!ca.invalidMonth&&!ca.invalidWeekday&&!ca.weekdayMismatch&&!ca.nullInput&&!ca.invalidFormat&&!ca.userInvalidated&&(!ca.meridiem||ca.meridiem&&ra);N._strict&&(ra=ra&&0===ca.charsLeftOver&&0===ca.unusedTokens.length&&void 0===ca.bigHour);if(null!=Object.isFrozen&&
Object.isFrozen(N))return ra;N._isValid=ra}return N._isValid}function q(N){var ca=f(NaN);null!=N?k(b(ca),N):b(ca).userInvalidated=!0;return ca}function m(N,ca){var ra;g(ca._isAMomentObject)||(N._isAMomentObject=ca._isAMomentObject);g(ca._i)||(N._i=ca._i);g(ca._f)||(N._f=ca._f);g(ca._l)||(N._l=ca._l);g(ca._strict)||(N._strict=ca._strict);g(ca._tzm)||(N._tzm=ca._tzm);g(ca._isUTC)||(N._isUTC=ca._isUTC);g(ca._offset)||(N._offset=ca._offset);g(ca._pf)||(N._pf=b(ca));g(ca._locale)||(N._locale=ca._locale);
if(0<ja.length)for(ra=0;ra<ja.length;ra++){var Aa=ja[ra];var Qa=ca[Aa];g(Qa)||(N[Aa]=Qa)}return N}function n(N){m(this,N);this._d=new Date(null!=N._d?N._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Sa&&(Sa=!0,D.updateOffset(this),Sa=!1)}function t(N){return N instanceof n||null!=N&&null!=N._isAMomentObject}function z(N,ca){var ra=!0;return k(function(){null!=D.deprecationHandler&&D.deprecationHandler(null,N);if(ra){var Aa=[],Qa,db;for(Qa=0;Qa<arguments.length;Qa++){var fb="";if("object"===
typeof arguments[Qa]){fb+="\n["+Qa+"] ";for(db in arguments[0])c(arguments[0],db)&&(fb+=db+": "+arguments[0][db]+", ");fb=fb.slice(0,-2)}else fb=arguments[Qa];Aa.push(fb)}Array.prototype.slice.call(Aa).join("");ra=!1}return ca.apply(this,arguments)},ca)}function w(N,ca){null!=D.deprecationHandler&&D.deprecationHandler(N,ca);Pa[N]||(Pa[N]=!0)}function y(N){return"undefined"!==typeof Function&&N instanceof Function||"[object Function]"===Object.prototype.toString.call(N)}function x(N,ca){var ra=k({},
N),Aa;for(Aa in ca)c(ca,Aa)&&(a(N[Aa])&&a(ca[Aa])?(ra[Aa]={},k(ra[Aa],N[Aa]),k(ra[Aa],ca[Aa])):null!=ca[Aa]?ra[Aa]=ca[Aa]:delete ra[Aa]);for(Aa in N)c(N,Aa)&&!c(ca,Aa)&&a(N[Aa])&&(ra[Aa]=k({},ra[Aa]));return ra}function A(N){null!=N&&this.set(N)}function v(N,ca,ra){var Aa=""+Math.abs(N);return(0<=N?ra?"+":"":"-")+Math.pow(10,Math.max(0,ca-Aa.length)).toString().substr(1)+Aa}function u(N,ca,ra,Aa){var Qa=Aa;"string"===typeof Aa&&(Qa=function(){return this[Aa]()});N&&(Oa[N]=Qa);ca&&(Oa[ca[0]]=function(){return v(Qa.apply(this,
arguments),ca[1],ca[2])});ra&&(Oa[ra]=function(){return this.localeData().ordinal(Qa.apply(this,arguments),N)})}function C(N){return N.match(/\[[\s\S]/)?N.replace(/^\[|\]$/g,""):N.replace(/\\/g,"")}function E(N){var ca=N.match(Na),ra;var Aa=0;for(ra=ca.length;Aa<ra;Aa++)ca[Aa]=Oa[ca[Aa]]?Oa[ca[Aa]]:C(ca[Aa]);return function(Qa){var db="",fb;for(fb=0;fb<ra;fb++)db+=y(ca[fb])?ca[fb].call(Qa,N):ca[fb];return db}}function F(N,ca){if(!N.isValid())return N.localeData().invalidDate();ca=G(ca,N.localeData());
Ta[ca]=Ta[ca]||E(ca);return Ta[ca](N)}function G(N,ca){function ra(Qa){return ca.longDateFormat(Qa)||Qa}var Aa=5;for(Ua.lastIndex=0;0<=Aa&&Ua.test(N);)N=N.replace(Ua,ra),Ua.lastIndex=0,--Aa;return N}function H(N,ca){var ra=N.toLowerCase();Za[ra]=Za[ra+"s"]=Za[ca]=N}function J(N){return"string"===typeof N?Za[N]||Za[N.toLowerCase()]:void 0}function I(N){var ca={},ra,Aa;for(Aa in N)c(N,Aa)&&(ra=J(Aa))&&(ca[ra]=N[Aa]);return ca}function R(N){var ca=[],ra;for(ra in N)c(N,ra)&&ca.push({unit:ra,priority:bb[ra]});
ca.sort(function(Aa,Qa){return Aa.priority-Qa.priority});return ca}function O(N){return 0===N%4&&0!==N%100||0===N%400}function P(N){return 0>N?Math.ceil(N)||0:Math.floor(N)}function L(N){N=+N;var ca=0;0!==N&&isFinite(N)&&(ca=P(N));return ca}function K(N,ca){return function(ra){return null!=ra?(W(this,N,ra),D.updateOffset(this,ca),this):Q(this,N)}}function Q(N,ca){return N.isValid()?N._d["get"+(N._isUTC?"UTC":"")+ca]():NaN}function W(N,ca,ra){if(N.isValid()&&!isNaN(ra))if("FullYear"===ca&&O(N.year())&&
1===N.month()&&29===N.date())ra=L(ra),N._d["set"+(N._isUTC?"UTC":"")+ca](ra,N.month(),ea(ra,N.month()));else N._d["set"+(N._isUTC?"UTC":"")+ca](ra)}function ba(N,ca,ra){Wc[N]=y(ca)?ca:function(Aa,Qa){return Aa&&ra?ra:ca}}function S(N,ca){return c(Wc,N)?Wc[N](ca._strict,ca._locale):new RegExp(X(N))}function X(N){return aa(N.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(ca,ra,Aa,Qa,db){return ra||Aa||Qa||db}))}function aa(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}
function M(N,ca){var ra,Aa=ca;"string"===typeof N&&(N=[N]);e(ca)&&(Aa=function(Qa,db){db[ca]=L(Qa)});for(ra=0;ra<N.length;ra++)Sc[N[ra]]=Aa}function da(N,ca){M(N,function(ra,Aa,Qa,db){Qa._w=Qa._w||{};ca(ra,Qa._w,Qa,db)})}function ea(N,ca){if(isNaN(N)||isNaN(ca))return NaN;var ra=(ca%12+12)%12;return 1===ra?O(N+(ca-ra)/12)?29:28:31-ra%7%2}function Z(N,ca){if(!N.isValid())return N;if("string"===typeof ca)if(/^\d+$/.test(ca))ca=L(ca);else if(ca=N.localeData().monthsParse(ca),!e(ca))return N;var ra=Math.min(N.date(),
ea(N.year(),ca));N._d["set"+(N._isUTC?"UTC":"")+"Month"](ca,ra);return N}function ka(N){return null!=N?(Z(this,N),D.updateOffset(this,!0),this):Q(this,"Month")}function va(){function N(fb,qb){return qb.length-fb.length}var ca=[],ra=[],Aa=[],Qa;for(Qa=0;12>Qa;Qa++){var db=f([2E3,Qa]);ca.push(this.monthsShort(db,""));ra.push(this.months(db,""));Aa.push(this.months(db,""));Aa.push(this.monthsShort(db,""))}ca.sort(N);ra.sort(N);Aa.sort(N);for(Qa=0;12>Qa;Qa++)ca[Qa]=aa(ca[Qa]),ra[Qa]=aa(ra[Qa]);for(Qa=
0;24>Qa;Qa++)Aa[Qa]=aa(Aa[Qa]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+Aa.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+ra.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+ca.join("|")+")","i")}function Ea(N,ca,ra,Aa,Qa,db,fb){100>N&&0<=N?(ca=new Date(N+400,ca,ra,Aa,Qa,db,fb),isFinite(ca.getFullYear())&&ca.setFullYear(N)):ca=new Date(N,ca,ra,Aa,Qa,db,fb);return ca}function Ga(N){if(100>N&&0<=N){var ca=Array.prototype.slice.call(arguments);ca[0]=N+400;ca=
new Date(Date.UTC.apply(null,ca));isFinite(ca.getUTCFullYear())&&ca.setUTCFullYear(N)}else ca=new Date(Date.UTC.apply(null,arguments));return ca}function na(N,ca,ra){ra=7+ca-ra;return-((7+Ga(N,0,ra).getUTCDay()-ca)%7)+ra-1}function ma(N,ca,ra,Aa,Qa){ra=(7+ra-Aa)%7;Aa=na(N,Aa,Qa);Aa=1+7*(ca-1)+ra+Aa;0>=Aa?(ca=N-1,N=(O(ca)?366:365)+Aa):Aa>(O(N)?366:365)?(ca=N+1,N=Aa-(O(N)?366:365)):(ca=N,N=Aa);return{year:ca,dayOfYear:N}}function ya(N,ca,ra){var Aa=na(N.year(),ca,ra);Aa=Math.floor((N.dayOfYear()-Aa-
1)/7)+1;1>Aa?(N=N.year()-1,ca=Aa+za(N,ca,ra)):Aa>za(N.year(),ca,ra)?(ca=Aa-za(N.year(),ca,ra),N=N.year()+1):(N=N.year(),ca=Aa);return{week:ca,year:N}}function za(N,ca,ra){var Aa=na(N,ca,ra);ca=na(N+1,ca,ra);return((O(N)?366:365)-Aa+ca)/7}function Ba(N,ca){return N.slice(ca,7).concat(N.slice(0,ca))}function ha(N,ca,ra){var Aa;N=N.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Aa=0;7>Aa;++Aa){var Qa=f([2E3,1]).day(Aa);this._minWeekdaysParse[Aa]=
this.weekdaysMin(Qa,"").toLocaleLowerCase();this._shortWeekdaysParse[Aa]=this.weekdaysShort(Qa,"").toLocaleLowerCase();this._weekdaysParse[Aa]=this.weekdays(Qa,"").toLocaleLowerCase()}if(ra)ca="dddd"===ca?Nb.call(this._weekdaysParse,N):"ddd"===ca?Nb.call(this._shortWeekdaysParse,N):Nb.call(this._minWeekdaysParse,N);else if("dddd"===ca){ca=Nb.call(this._weekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._shortWeekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._minWeekdaysParse,N)}else if("ddd"===
ca){ca=Nb.call(this._shortWeekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._weekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._minWeekdaysParse,N)}else{ca=Nb.call(this._minWeekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._weekdaysParse,N);if(-1!==ca)return ca;ca=Nb.call(this._shortWeekdaysParse,N)}return-1!==ca?ca:null}function qa(){function N(vb,Lb){return Lb.length-vb.length}var ca=[],ra=[],Aa=[],Qa=[],db;for(db=0;7>db;db++){var fb=f([2E3,1]).day(db);var qb=aa(this.weekdaysMin(fb,
""));var Eb=aa(this.weekdaysShort(fb,""));fb=aa(this.weekdays(fb,""));ca.push(qb);ra.push(Eb);Aa.push(fb);Qa.push(qb);Qa.push(Eb);Qa.push(fb)}ca.sort(N);ra.sort(N);Aa.sort(N);Qa.sort(N);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Qa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+Aa.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+ra.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+ca.join("|")+")","i")}function T(){return this.hours()%
12||12}function Ha(N,ca){u(N,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),ca)})}function Ja(N,ca){return ca._meridiemParse}function fa(N){return N?N.toLowerCase().replace("_","-"):N}function Ya(N){var ca=null;if(void 0===Hb[N]&&"undefined"!==typeof module&&module&&module.exports)try{ca=Cc._abbr;var ra=require;ra("./locale/"+N);Xa(ca)}catch(Aa){Hb[N]=null}return Hb[N]}function Xa(N,ca){var ra;N&&(ra=g(ca)?Y(N):Ca(N,ca))&&(Cc=ra);return Cc._abbr}function Ca(N,ca){if(null!==
ca){var ra=$b;ca.abbr=N;if(null!=Hb[N])w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),ra=Hb[N]._config;else if(null!=ca.parentLocale)if(null!=Hb[ca.parentLocale])ra=Hb[ca.parentLocale]._config;else if(ra=Ya(ca.parentLocale),null!=ra)ra=ra._config;else return Dc[ca.parentLocale]||(Dc[ca.parentLocale]=
[]),Dc[ca.parentLocale].push({name:N,config:ca}),null;Hb[N]=new A(x(ra,ca));Dc[N]&&Dc[N].forEach(function(Aa){Ca(Aa.name,Aa.config)});Xa(N);return Hb[N]}delete Hb[N];return null}function Y(N){var ca;N&&N._locale&&N._locale._abbr&&(N=N._locale._abbr);if(!N)return Cc;if(!B(N)){if(ca=Ya(N))return ca;N=[N]}a:{ca=0;for(var ra,Aa,Qa,db;ca<N.length;){db=fa(N[ca]).split("-");ra=db.length;for(Aa=(Aa=fa(N[ca+1]))?Aa.split("-"):null;0<ra;){if(Qa=Ya(db.slice(0,ra).join("-"))){N=Qa;break a}if(Qa=Aa&&Aa.length>=
ra){b:{Qa=void 0;var fb=Math.min(db.length,Aa.length);for(Qa=0;Qa<fb;Qa+=1)if(db[Qa]!==Aa[Qa])break b;Qa=fb}Qa=Qa>=ra-1}if(Qa)break;ra--}ca++}N=Cc}return N}function la(N){var ca;(ca=N._a)&&-2===b(N).overflow&&(ca=0>ca[rc]||11<ca[rc]?rc:1>ca[oc]||ca[oc]>ea(ca[Wb],ca[rc])?oc:0>ca[Ob]||24<ca[Ob]||24===ca[Ob]&&(0!==ca[Pb]||0!==ca[Qb]||0!==ca[cc])?Ob:0>ca[Pb]||59<ca[Pb]?Pb:0>ca[Qb]||59<ca[Qb]?Qb:0>ca[cc]||999<ca[cc]?cc:-1,b(N)._overflowDayOfYear&&(ca<Wb||ca>oc)&&(ca=oc),b(N)._overflowWeeks&&-1===ca&&(ca=
Xc),b(N)._overflowWeekday&&-1===ca&&(ca=ed),b(N).overflow=ca);return N}function sa(N){var ca;var ra=N._i;var Aa=fd.exec(ra)||gd.exec(ra);if(Aa){b(N).iso=!0;ra=0;for(ca=Kc.length;ra<ca;ra++)if(Kc[ra][1].exec(Aa[1])){var Qa=Kc[ra][0];var db=!1!==Kc[ra][2];break}if(null==Qa)N._isValid=!1;else{if(Aa[3]){ra=0;for(ca=Jb.length;ra<ca;ra++)if(Jb[ra][1].exec(Aa[3])){var fb=(Aa[2]||" ")+Jb[ra][0];break}if(null==fb){N._isValid=!1;return}}if(db||null==fb){if(Aa[4])if(hd.exec(Aa[4]))var qb="Z";else{N._isValid=
!1;return}N._f=Qa+(fb||"")+(qb||"");Fa(N)}else N._isValid=!1}}else N._isValid=!1}function U(N){var ca=Yc.exec(N._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(ca){var ra=ca[3],Aa=ca[2],Qa=ca[5],db=ca[6],fb=ca[7],qb=parseInt(ca[4],10);ra=[49>=qb?2E3+qb:999>=qb?1900+qb:qb,Lc.indexOf(ra),parseInt(Aa,10),parseInt(Qa,10),parseInt(db,10)];fb&&ra.push(parseInt(fb,10));a:{if(fb=ca[1])if(fb=fc.indexOf(fb),Aa=(new Date(ra[0],ra[1],ra[2])).getDay(),
fb!==Aa){b(N).weekdayMismatch=!0;fb=N._isValid=!1;break a}fb=!0}fb&&(N._a=ra,(fb=ca[8])?ca=Zc[fb]:ca[9]?ca=0:(ca=parseInt(ca[10],10),fb=ca%100,ca=(ca-fb)/100*60+fb),N._tzm=ca,N._d=Ga.apply(null,N._a),N._d.setUTCMinutes(N._d.getUTCMinutes()-N._tzm),b(N).rfc2822=!0)}else N._isValid=!1}function ia(N){var ca=nd.exec(N._i);null!==ca?N._d=new Date(+ca[1]):(sa(N),!1===N._isValid&&(delete N._isValid,U(N),!1===N._isValid&&(delete N._isValid,N._strict?N._isValid=!1:D.createFromInputFallback(N))))}function ua(N,
ca,ra){return null!=N?N:null!=ca?ca:ra}function wa(N){var ca=[];if(!N._d){var ra=new Date(D.now());ra=N._useUTC?[ra.getUTCFullYear(),ra.getUTCMonth(),ra.getUTCDate()]:[ra.getFullYear(),ra.getMonth(),ra.getDate()];if(N._w&&null==N._a[oc]&&null==N._a[rc]){var Aa=N._w;if(null!=Aa.GG||null!=Aa.W||null!=Aa.E){var Qa=1;var db=4;var fb=ua(Aa.GG,N._a[Wb],ya(Ma(),1,4).year);var qb=ua(Aa.W,1);var Eb=ua(Aa.E,1);if(1>Eb||7<Eb)var vb=!0}else if(Qa=N._locale._week.dow,db=N._locale._week.doy,qb=ya(Ma(),Qa,db),fb=
ua(Aa.gg,N._a[Wb],qb.year),qb=ua(Aa.w,qb.week),null!=Aa.d){if(Eb=Aa.d,0>Eb||6<Eb)vb=!0}else if(null!=Aa.e){if(Eb=Aa.e+Qa,0>Aa.e||6<Aa.e)vb=!0}else Eb=Qa;1>qb||qb>za(fb,Qa,db)?b(N)._overflowWeeks=!0:null!=vb?b(N)._overflowWeekday=!0:(vb=ma(fb,qb,Eb,Qa,db),N._a[Wb]=vb.year,N._dayOfYear=vb.dayOfYear)}if(null!=N._dayOfYear){vb=ua(N._a[Wb],ra[Wb]);if(N._dayOfYear>(O(vb)?366:365)||0===N._dayOfYear)b(N)._overflowDayOfYear=!0;vb=Ga(vb,0,N._dayOfYear);N._a[rc]=vb.getUTCMonth();N._a[oc]=vb.getUTCDate()}for(vb=
0;3>vb&&null==N._a[vb];++vb)N._a[vb]=ca[vb]=ra[vb];for(;7>vb;vb++)N._a[vb]=ca[vb]=null==N._a[vb]?2===vb?1:0:N._a[vb];24===N._a[Ob]&&0===N._a[Pb]&&0===N._a[Qb]&&0===N._a[cc]&&(N._nextDay=!0,N._a[Ob]=0);N._d=(N._useUTC?Ga:Ea).apply(null,ca);ca=N._useUTC?N._d.getUTCDay():N._d.getDay();null!=N._tzm&&N._d.setUTCMinutes(N._d.getUTCMinutes()-N._tzm);N._nextDay&&(N._a[Ob]=24);N._w&&"undefined"!==typeof N._w.d&&N._w.d!==ca&&(b(N).weekdayMismatch=!0)}}function Fa(N){if(N._f===D.ISO_8601)sa(N);else if(N._f===
D.RFC_2822)U(N);else{N._a=[];b(N).empty=!0;var ca=""+N._i,ra,Aa,Qa=ca.length,db=0;var fb=G(N._f,N._locale).match(Na)||[];for(ra=0;ra<fb.length;ra++){var qb=fb[ra];if(Aa=(ca.match(S(qb,N))||[])[0]){var Eb=ca.substr(0,ca.indexOf(Aa));0<Eb.length&&b(N).unusedInput.push(Eb);ca=ca.slice(ca.indexOf(Aa)+Aa.length);db+=Aa.length}if(Oa[qb]){if(Aa?b(N).empty=!1:b(N).unusedTokens.push(qb),Eb=N,null!=Aa&&c(Sc,qb))Sc[qb](Aa,Eb._a,Eb,qb)}else N._strict&&!Aa&&b(N).unusedTokens.push(qb)}b(N).charsLeftOver=Qa-db;
0<ca.length&&b(N).unusedInput.push(ca);12>=N._a[Ob]&&!0===b(N).bigHour&&0<N._a[Ob]&&(b(N).bigHour=void 0);b(N).parsedDateParts=N._a.slice(0);b(N).meridiem=N._meridiem;ca=N._a;ra=Ob;Qa=N._locale;fb=N._a[Ob];db=N._meridiem;null!=db&&(null!=Qa.meridiemHour?fb=Qa.meridiemHour(fb,db):null!=Qa.isPM&&((Qa=Qa.isPM(db))&&12>fb&&(fb+=12),Qa||12!==fb||(fb=0)));ca[ra]=fb;ca=b(N).era;null!==ca&&(N._a[Wb]=N._locale.erasConvertYear(ca,N._a[Wb]));wa(N);la(N)}}function Da(N){if(!N._d){var ca=I(N._i);N._a=r([ca.year,
ca.month,void 0===ca.day?ca.date:ca.day,ca.hour,ca.minute,ca.second,ca.millisecond],function(ra){return ra&&parseInt(ra,10)});wa(N)}}function La(N){var ca=N._i,ra=N._f;N._locale=N._locale||Y(N._l);if(null===ca||void 0===ra&&""===ca)return q({nullInput:!0});"string"===typeof ca&&(N._i=ca=N._locale.preparse(ca));if(t(ca))return new n(la(ca));if(l(ca))N._d=ca;else if(B(ra)){var Aa=!1;if(0===N._f.length)b(N).invalidFormat=!0,N._d=new Date(NaN);else{for(ca=0;ca<N._f.length;ca++){ra=0;var Qa=!1;var db=
m({},N);null!=N._useUTC&&(db._useUTC=N._useUTC);db._f=N._f[ca];Fa(db);d(db)&&(Qa=!0);ra+=b(db).charsLeftOver;ra+=10*b(db).unusedTokens.length;b(db).score=ra;if(Aa)ra<fb&&(fb=ra,qb=db);else if(null==fb||ra<fb||Qa){var fb=ra;var qb=db;Qa&&(Aa=!0)}}k(N,qb||db)}}else ra?Fa(N):Wa(N);d(N)||(N._d=null);return N}function Wa(N){var ca=N._i;g(ca)?N._d=new Date(D.now()):l(ca)?N._d=new Date(ca.valueOf()):"string"===typeof ca?ia(N):B(ca)?(N._a=r(ca.slice(0),function(ra){return parseInt(ra,10)}),wa(N)):a(ca)?Da(N):
e(ca)?N._d=new Date(ca):D.createFromInputFallback(N)}function Va(N,ca,ra,Aa,Qa){var db={};if(!0===ca||!1===ca)Aa=ca,ca=void 0;if(!0===ra||!1===ra)Aa=ra,ra=void 0;if(a(N)&&h(N)||B(N)&&0===N.length)N=void 0;db._isAMomentObject=!0;db._useUTC=db._isUTC=Qa;db._l=ra;db._i=N;db._f=ca;db._strict=Aa;N=new n(la(La(db)));N._nextDay&&(N.add(1,"d"),N._nextDay=void 0);return N}function Ma(N,ca,ra,Aa){return Va(N,ca,ra,Aa,!1)}function eb(N,ca){var ra;1===ca.length&&B(ca[0])&&(ca=ca[0]);if(!ca.length)return Ma();
var Aa=ca[0];for(ra=1;ra<ca.length;++ra)if(!ca[ra].isValid()||ca[ra][N](Aa))Aa=ca[ra];return Aa}function ib(N){var ca=I(N);N=ca.year||0;var ra=ca.quarter||0,Aa=ca.month||0,Qa=ca.week||ca.isoWeek||0,db=ca.day||0,fb=ca.hour||0,qb=ca.minute||0,Eb=ca.second||0,vb=ca.millisecond||0;a:{var Lb,tc=!1;for(Lb in ca)if(c(ca,Lb)&&(-1===Nb.call(Mc,Lb)||null!=ca[Lb]&&isNaN(ca[Lb]))){ca=!1;break a}for(Lb=0;Lb<Mc.length;++Lb)if(ca[Mc[Lb]]){if(tc){ca=!1;break a}parseFloat(ca[Mc[Lb]])!==L(ca[Mc[Lb]])&&(tc=!0)}ca=!0}this._isValid=
ca;this._milliseconds=+vb+1E3*Eb+6E4*qb+36E5*fb;this._days=+db+7*Qa;this._months=+Aa+3*ra+12*N;this._data={};this._locale=Y();this._bubble()}function lb(N){return N instanceof ib}function rb(N){return 0>N?-1*Math.round(-1*N):Math.round(N)}function sb(N,ca){u(N,0,0,function(){var ra=this.utcOffset(),Aa="+";0>ra&&(ra=-ra,Aa="-");return Aa+v(~~(ra/60),2)+ca+v(~~ra%60,2)})}function tb(N,ca){var ra=(ca||"").match(N);if(null===ra)return null;ra=((ra[ra.length-1]||[])+"").match(od)||["-",0,0];var Aa=+(60*
ra[1])+L(ra[2]);return 0===Aa?0:"+"===ra[0]?Aa:-Aa}function Ab(N,ca){if(ca._isUTC){var ra=ca.clone();var Aa=(t(N)||l(N)?N.valueOf():Ma(N).valueOf())-ra.valueOf();ra._d.setTime(ra._d.valueOf()+Aa);D.updateOffset(ra,!1);return ra}return Ma(N).local()}function Cb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function nb(N,ca){var ra=N,Aa=null;lb(N)?ra={ms:N._milliseconds,d:N._days,M:N._months}:e(N)||!isNaN(+N)?(ra={},ca?ra[ca]=+N:ra.milliseconds=+N):(Aa=pd.exec(N))?(ra="-"===Aa[1]?-1:1,ra=
{y:0,d:L(Aa[oc])*ra,h:L(Aa[Ob])*ra,m:L(Aa[Pb])*ra,s:L(Aa[Qb])*ra,ms:L(rb(1E3*Aa[cc]))*ra}):(Aa=Rb.exec(N))?(ra="-"===Aa[1]?-1:1,ra={y:yb(Aa[2],ra),M:yb(Aa[3],ra),w:yb(Aa[4],ra),d:yb(Aa[5],ra),h:yb(Aa[6],ra),m:yb(Aa[7],ra),s:yb(Aa[8],ra)}):null==ra?ra={}:"object"===typeof ra&&("from"in ra||"to"in ra)&&(Aa=Ma(ra.from),ra=Ma(ra.to),Aa.isValid()&&ra.isValid()?(ra=Ab(ra,Aa),Aa.isBefore(ra)?ra=Fb(Aa,ra):(ra=Fb(ra,Aa),ra.milliseconds=-ra.milliseconds,ra.months=-ra.months),Aa=ra):Aa={milliseconds:0,months:0},
ra={},ra.ms=Aa.milliseconds,ra.M=Aa.months);ra=new ib(ra);lb(N)&&c(N,"_locale")&&(ra._locale=N._locale);lb(N)&&c(N,"_isValid")&&(ra._isValid=N._isValid);return ra}function yb(N,ca){var ra=N&&parseFloat(N.replace(",","."));return(isNaN(ra)?0:ra)*ca}function Fb(N,ca){var ra={};ra.months=ca.month()-N.month()+12*(ca.year()-N.year());N.clone().add(ra.months,"M").isAfter(ca)&&--ra.months;ra.milliseconds=+ca-+N.clone().add(ra.months,"M");return ra}function gc(N,ca){return function(ra,Aa){if(null!==Aa&&!isNaN(+Aa)){w(ca,
"moment()."+ca+"(period, number) is deprecated. Please use moment()."+ca+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Qa=ra;ra=Aa;Aa=Qa}Qa=nb(ra,Aa);Sb(this,Qa,N);return this}}function Sb(N,ca,ra,Aa){var Qa=ca._milliseconds,db=rb(ca._days);ca=rb(ca._months);N.isValid()&&(Aa=null==Aa?!0:Aa,ca&&Z(N,Q(N,"Month")+ca*ra),db&&W(N,"Date",Q(N,"Date")+db*ra),Qa&&N._d.setTime(N._d.valueOf()+Qa*ra),Aa&&D.updateOffset(N,db||ca))}function Kb(N){return"string"===
typeof N||N instanceof String}function uc(N){var ca=B(N),ra=!1;ca&&(ra=0===N.filter(function(Aa){return!e(Aa)&&Kb(N)}).length);return ca&&ra}function Ib(N,ca){if(N.date()<ca.date())return-Ib(ca,N);var ra=12*(ca.year()-N.year())+(ca.month()-N.month()),Aa=N.clone().add(ra,"months");if(0>ca-Aa){var Qa=N.clone().add(ra-1,"months");Aa=(ca-Aa)/(Aa-Qa)}else Qa=N.clone().add(ra+1,"months"),Aa=(ca-Aa)/(Qa-Aa);return-(ra+Aa)||0}function dc(N){if(void 0===N)return this._locale._abbr;N=Y(N);null!=N&&(this._locale=
N);return this}function hc(){return this._locale}function Zb(N,ca){return(N%ca+ca)%ca}function vc(N,ca,ra){return 100>N&&0<=N?new Date(N+400,ca,ra)-Tc:(new Date(N,ca,ra)).valueOf()}function ic(N,ca,ra){return 100>N&&0<=N?Date.UTC(N+400,ca,ra)-Tc:Date.UTC(N,ca,ra)}function jc(N,ca){return ca.erasAbbrRegex(N)}function Ac(){var N=[],ca=[],ra=[],Aa=[],Qa,db=this.eras();var fb=0;for(Qa=db.length;fb<Qa;++fb)ca.push(aa(db[fb].name)),N.push(aa(db[fb].abbr)),ra.push(aa(db[fb].narrow)),Aa.push(aa(db[fb].name)),
Aa.push(aa(db[fb].abbr)),Aa.push(aa(db[fb].narrow));this._erasRegex=new RegExp("^("+Aa.join("|")+")","i");this._erasNameRegex=new RegExp("^("+ca.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+N.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+ra.join("|")+")","i")}function wc(N,ca){u(0,[N,N.length],0,ca)}function Ec(N,ca,ra,Aa,Qa){if(null==N)return ya(this,Aa,Qa).year;var db=za(N,Aa,Qa);ca>db&&(ca=db);N=ma(N,ca,ra,Aa,Qa);N=Ga(N.year,0,N.dayOfYear);this.year(N.getUTCFullYear());this.month(N.getUTCMonth());
this.date(N.getUTCDate());return this}function Nc(N,ca){ca[cc]=L(1E3*("0."+N))}function Fc(N){return N}function kc(N,ca,ra,Aa){var Qa=Y();ca=f().set(Aa,ca);return Qa[ra](ca,N)}function ac(N,ca,ra){e(N)&&(ca=N,N=void 0);N=N||"";if(null!=ca)return kc(N,ca,ra,"month");var Aa=[];for(ca=0;12>ca;ca++)Aa[ca]=kc(N,ca,ra,"month");return Aa}function Gc(N,ca,ra,Aa){"boolean"!==typeof N&&(ra=ca=N,N=!1);e(ca)&&(ra=ca,ca=void 0);ca=ca||"";var Qa=Y();N=N?Qa._week.dow:0;Qa=[];if(null!=ra)return kc(ca,(ra+N)%7,Aa,
"day");for(ra=0;7>ra;ra++)Qa[ra]=kc(ca,(ra+N)%7,Aa,"day");return Qa}function ec(N,ca,ra,Aa){ca=nb(ca,ra);N._milliseconds+=Aa*ca._milliseconds;N._days+=Aa*ca._days;N._months+=Aa*ca._months;return N._bubble()}function Oc(N){return 0>N?Math.floor(N):Math.ceil(N)}function Vb(N){return function(){return this.as(N)}}function lc(N){return function(){return this.isValid()?this._data[N]:NaN}}function Xb(N,ca,ra,Aa,Qa){return Qa.relativeTime(ca||1,!!ra,N,Aa)}function Yb(N){return(0<N)-(0>N)||+N}function xc(){if(!this.isValid())return this.localeData().invalidDate();
var N=$c(this._milliseconds)/1E3,ca=$c(this._days),ra=$c(this._months),Aa=this.asSeconds();if(!Aa)return"P0D";var Qa=P(N/60);var db=P(Qa/60);N%=60;Qa%=60;var fb=P(ra/12);ra%=12;var qb=N?N.toFixed(3).replace(/\.?0+$/,""):"";var Eb=0>Aa?"-":"";var vb=Yb(this._months)!==Yb(Aa)?"-":"";var Lb=Yb(this._days)!==Yb(Aa)?"-":"";Aa=Yb(this._milliseconds)!==Yb(Aa)?"-":"";return Eb+"P"+(fb?vb+fb+"Y":"")+(ra?vb+ra+"M":"")+(ca?Lb+ca+"D":"")+(db||Qa||N?"T":"")+(db?Aa+db+"H":"")+(Qa?Aa+Qa+"M":"")+(N?Aa+qb+"S":"")}
var Mb=Array.prototype.some?Array.prototype.some:function(N){var ca=Object(this),ra=ca.length>>>0,Aa;for(Aa=0;Aa<ra;Aa++)if(Aa in ca&&N.call(this,ca[Aa],Aa,ca))return!0;return!1};var ja=D.momentProperties=[],Sa=!1,Pa={};D.suppressDeprecationWarnings=!1;D.deprecationHandler=null;var Ka=Object.keys?Object.keys:function(N){var ca,ra=[];for(ca in N)c(N,ca)&&ra.push(ca);return ra};var Na=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Ua=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ta={},Oa={},Za={},bb={},cb=/\d/,jb=/\d\d/,$a=/\d{3}/,kb=/\d{4}/,mb=/[+-]?\d{6}/,ob=/\d\d?/,Ub=/\d\d\d\d?/,Hc=/\d\d\d\d\d\d?/,yc=/\d{1,3}/,Bc=/\d{1,4}/,Gb=/[+-]?\d{1,6}/,mc=/\d+/,bc=/[+-]?\d+/,Pc=/Z|[+-]\d\d:?\d\d/gi,Qc=/Z|[+-]\d\d(?::?\d\d)?/gi,Ic=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Wc={};var Sc={},Wb=0,rc=1,oc=2,Ob=3,Pb=4,Qb=5,cc=
6,Xc=7,ed=8;var Nb=Array.prototype.indexOf?Array.prototype.indexOf:function(N){var ca;for(ca=0;ca<this.length;++ca)if(this[ca]===N)return ca;return-1};u("M",["MM",2],"Mo",function(){return this.month()+1});u("MMM",0,0,function(N){return this.localeData().monthsShort(this,N)});u("MMMM",0,0,function(N){return this.localeData().months(this,N)});H("month","M");bb.month=8;ba("M",ob);ba("MM",ob,jb);ba("MMM",function(N,ca){return ca.monthsShortRegex(N)});ba("MMMM",function(N,ca){return ca.monthsRegex(N)});
M(["M","MM"],function(N,ca){ca[rc]=L(N)-1});M(["MMM","MMMM"],function(N,ca,ra,Aa){Aa=ra._locale.monthsParse(N,Aa,ra._strict);null!=Aa?ca[rc]=Aa:b(ra).invalidMonth=N});var Lc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;u("Y",0,0,function(){var N=this.year();return 9999>=N?v(N,4):"+"+N});u(0,["YY",2],0,function(){return this.year()%100});u(0,["YYYY",4],0,"year");u(0,["YYYYY",5],0,"year");u(0,["YYYYYY",6,!0],0,"year");H("year","y");bb.year=1;ba("Y",
bc);ba("YY",ob,jb);ba("YYYY",Bc,kb);ba("YYYYY",Gb,mb);ba("YYYYYY",Gb,mb);M(["YYYYY","YYYYYY"],Wb);M("YYYY",function(N,ca){ca[Wb]=2===N.length?D.parseTwoDigitYear(N):L(N)});M("YY",function(N,ca){ca[Wb]=D.parseTwoDigitYear(N)});M("Y",function(N,ca){ca[Wb]=parseInt(N,10)});D.parseTwoDigitYear=function(N){return L(N)+(68<L(N)?1900:2E3)};var Rc=K("FullYear",!0);u("w",["ww",2],"wo","week");u("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");bb.week=5;bb.isoWeek=5;ba("w",ob);ba("ww",ob,jb);ba("W",
ob);ba("WW",ob,jb);da(["w","ww","W","WW"],function(N,ca,ra,Aa){ca[Aa.substr(0,1)]=L(N)});u("d",0,"do","day");u("dd",0,0,function(N){return this.localeData().weekdaysMin(this,N)});u("ddd",0,0,function(N){return this.localeData().weekdaysShort(this,N)});u("dddd",0,0,function(N){return this.localeData().weekdays(this,N)});u("e",0,0,"weekday");u("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");bb.day=11;bb.weekday=11;bb.isoWeekday=11;ba("d",ob);ba("e",ob);ba("E",ob);ba("dd",function(N,
ca){return ca.weekdaysMinRegex(N)});ba("ddd",function(N,ca){return ca.weekdaysShortRegex(N)});ba("dddd",function(N,ca){return ca.weekdaysRegex(N)});da(["dd","ddd","dddd"],function(N,ca,ra,Aa){Aa=ra._locale.weekdaysParse(N,Aa,ra._strict);null!=Aa?ca.d=Aa:b(ra).invalidWeekday=N});da(["d","e","E"],function(N,ca,ra,Aa){ca[Aa]=L(N)});var fc="Sun Mon Tue Wed Thu Fri Sat".split(" ");u("H",["HH",2],0,"hour");u("h",["hh",2],0,T);u("k",["kk",2],0,function(){return this.hours()||24});u("hmm",0,0,function(){return""+
T.apply(this)+v(this.minutes(),2)});u("hmmss",0,0,function(){return""+T.apply(this)+v(this.minutes(),2)+v(this.seconds(),2)});u("Hmm",0,0,function(){return""+this.hours()+v(this.minutes(),2)});u("Hmmss",0,0,function(){return""+this.hours()+v(this.minutes(),2)+v(this.seconds(),2)});Ha("a",!0);Ha("A",!1);H("hour","h");bb.hour=13;ba("a",Ja);ba("A",Ja);ba("H",ob);ba("h",ob);ba("k",ob);ba("HH",ob,jb);ba("hh",ob,jb);ba("kk",ob,jb);ba("hmm",Ub);ba("hmmss",Hc);ba("Hmm",Ub);ba("Hmmss",Hc);M(["H","HH"],Ob);
M(["k","kk"],function(N,ca,ra){N=L(N);ca[Ob]=24===N?0:N});M(["a","A"],function(N,ca,ra){ra._isPm=ra._locale.isPM(N);ra._meridiem=N});M(["h","hh"],function(N,ca,ra){ca[Ob]=L(N);b(ra).bigHour=!0});M("hmm",function(N,ca,ra){var Aa=N.length-2;ca[Ob]=L(N.substr(0,Aa));ca[Pb]=L(N.substr(Aa));b(ra).bigHour=!0});M("hmmss",function(N,ca,ra){var Aa=N.length-4,Qa=N.length-2;ca[Ob]=L(N.substr(0,Aa));ca[Pb]=L(N.substr(Aa,2));ca[Qb]=L(N.substr(Qa));b(ra).bigHour=!0});M("Hmm",function(N,ca,ra){ra=N.length-2;ca[Ob]=
L(N.substr(0,ra));ca[Pb]=L(N.substr(ra))});M("Hmmss",function(N,ca,ra){ra=N.length-4;var Aa=N.length-2;ca[Ob]=L(N.substr(0,ra));ca[Pb]=L(N.substr(ra,2));ca[Qb]=L(N.substr(Aa))});var ad=K("Hours",!0),$b={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",
ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Lc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekdaysShort:fc,meridiemParse:/[ap]\.?m?\.?/i},Hb={},Dc={},Cc,fd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hd=/Z|[+-]\d\d(?::?\d\d)?/,Kc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",
/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",
/\d\d/]],nd=/^\/?Date\((-?\d+)/i,Yc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};D.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(N){N._d=new Date(N._i+(N._useUTC?" UTC":""))});D.ISO_8601=function(){};D.RFC_2822=function(){};var bd=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var N=Ma.apply(null,arguments);return this.isValid()&&N.isValid()?N<this?this:N:q()}),Uc=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var N=Ma.apply(null,arguments);return this.isValid()&&N.isValid()?N>this?
this:N:q()}),Mc="year quarter month week day hour minute second millisecond".split(" ");sb("Z",":");sb("ZZ","");ba("Z",Qc);ba("ZZ",Qc);M(["Z","ZZ"],function(N,ca,ra){ra._useUTC=!0;ra._tzm=tb(Qc,N)});var od=/([\+\-]|\d\d)/gi;D.updateOffset=function(){};var pd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;nb.fn=ib.prototype;
nb.invalid=function(){return nb(NaN)};var jd=gc(1,"add"),cd=gc(-1,"subtract");D.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";D.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var dd=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(N){return void 0===N?this.localeData():this.locale(N)}),Tc=126227808E5;u("N",0,0,"eraAbbr");u("NN",0,0,"eraAbbr");u("NNN",0,0,"eraAbbr");u("NNNN",0,0,"eraName");u("NNNNN",0,0,"eraNarrow");
u("y",["y",1],"yo","eraYear");u("y",["yy",2],0,"eraYear");u("y",["yyy",3],0,"eraYear");u("y",["yyyy",4],0,"eraYear");ba("N",jc);ba("NN",jc);ba("NNN",jc);ba("NNNN",function(N,ca){return ca.erasNameRegex(N)});ba("NNNNN",function(N,ca){return ca.erasNarrowRegex(N)});M(["N","NN","NNN","NNNN","NNNNN"],function(N,ca,ra,Aa){(ca=ra._locale.erasParse(N,Aa,ra._strict))?b(ra).era=ca:b(ra).invalidEra=N});ba("y",mc);ba("yy",mc);ba("yyy",mc);ba("yyyy",mc);ba("yo",function(N,ca){return ca._eraYearOrdinalRegex||
mc});M(["y","yy","yyy","yyyy"],Wb);M(["yo"],function(N,ca,ra,Aa){var Qa;ra._locale._eraYearOrdinalRegex&&(Qa=N.match(ra._locale._eraYearOrdinalRegex));ca[Wb]=ra._locale.eraYearOrdinalParse?ra._locale.eraYearOrdinalParse(N,Qa):parseInt(N,10)});u(0,["gg",2],0,function(){return this.weekYear()%100});u(0,["GG",2],0,function(){return this.isoWeekYear()%100});wc("gggg","weekYear");wc("ggggg","weekYear");wc("GGGG","isoWeekYear");wc("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");bb.weekYear=
1;bb.isoWeekYear=1;ba("G",bc);ba("g",bc);ba("GG",ob,jb);ba("gg",ob,jb);ba("GGGG",Bc,kb);ba("gggg",Bc,kb);ba("GGGGG",Gb,mb);ba("ggggg",Gb,mb);da(["gggg","ggggg","GGGG","GGGGG"],function(N,ca,ra,Aa){ca[Aa.substr(0,2)]=L(N)});da(["gg","GG"],function(N,ca,ra,Aa){ca[Aa]=D.parseTwoDigitYear(N)});u("Q",0,"Qo","quarter");H("quarter","Q");bb.quarter=7;ba("Q",cb);M("Q",function(N,ca){ca[rc]=3*(L(N)-1)});u("D",["DD",2],"Do","date");H("date","D");bb.date=9;ba("D",ob);ba("DD",ob,jb);ba("Do",function(N,ca){return N?
ca._dayOfMonthOrdinalParse||ca._ordinalParse:ca._dayOfMonthOrdinalParseLenient});M(["D","DD"],oc);M("Do",function(N,ca){ca[oc]=L(N.match(ob)[0])});var kd=K("Date",!0);u("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");bb.dayOfYear=4;ba("DDD",yc);ba("DDDD",$a);M(["DDD","DDDD"],function(N,ca,ra){ra._dayOfYear=L(N)});u("m",["mm",2],0,"minute");H("minute","m");bb.minute=14;ba("m",ob);ba("mm",ob,jb);M(["m","mm"],Pb);var qd=K("Minutes",!1);u("s",["ss",2],0,"second");H("second","s");bb.second=15;
ba("s",ob);ba("ss",ob,jb);M(["s","ss"],Qb);var ld=K("Seconds",!1);u("S",0,0,function(){return~~(this.millisecond()/100)});u(0,["SS",2],0,function(){return~~(this.millisecond()/10)});u(0,["SSS",3],0,"millisecond");u(0,["SSSS",4],0,function(){return 10*this.millisecond()});u(0,["SSSSS",5],0,function(){return 100*this.millisecond()});u(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});u(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});u(0,["SSSSSSSS",8],0,function(){return 1E5*
this.millisecond()});u(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");bb.millisecond=16;ba("S",yc,cb);ba("SS",yc,jb);ba("SSS",yc,$a);var zc;for(zc="SSSS";9>=zc.length;zc+="S")ba(zc,mc);for(zc="S";9>=zc.length;zc+="S")M(zc,Nc);var rd=K("Milliseconds",!1);u("z",0,0,"zoneAbbr");u("zz",0,0,"zoneName");var hb=n.prototype;hb.add=jd;hb.calendar=function(N,ca){if(1===arguments.length)if(arguments[0]){var ra=arguments[0],Aa;if(!(Aa=t(ra)||l(ra)||Kb(ra)||e(ra)||uc(ra))){Aa=
a(ra)&&!h(ra);var Qa=!1,db="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),fb;for(fb=0;fb<db.length;fb+=1){var qb=db[fb];Qa=Qa||c(ra,qb)}Aa=Aa&&Qa}if(Aa||null===ra||void 0===ra)N=arguments[0],ca=void 0;else{ra=arguments[0];Aa=a(ra)&&!h(ra);Qa=!1;db="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(fb=0;fb<db.length;fb+=1)qb=db[fb],Qa=Qa||c(ra,qb);Aa&&Qa&&(ca=arguments[0],N=void 0)}}else ca=
N=void 0;ra=N||Ma();Aa=Ab(ra,this).startOf("day");Aa=D.calendarFormat(this,Aa)||"sameElse";Qa=ca&&(y(ca[Aa])?ca[Aa].call(this,ra):ca[Aa]);return this.format(Qa||this.localeData().calendar(Aa,this,Ma(ra)))};hb.clone=function(){return new n(this)};hb.diff=function(N,ca,ra){if(!this.isValid())return NaN;N=Ab(N,this);if(!N.isValid())return NaN;var Aa=6E4*(N.utcOffset()-this.utcOffset());ca=J(ca);switch(ca){case "year":ca=Ib(this,N)/12;break;case "month":ca=Ib(this,N);break;case "quarter":ca=Ib(this,N)/
3;break;case "second":ca=(this-N)/1E3;break;case "minute":ca=(this-N)/6E4;break;case "hour":ca=(this-N)/36E5;break;case "day":ca=(this-N-Aa)/864E5;break;case "week":ca=(this-N-Aa)/6048E5;break;default:ca=this-N}return ra?ca:P(ca)};hb.endOf=function(N){N=J(N);if(void 0===N||"millisecond"===N||!this.isValid())return this;var ca=this._isUTC?ic:vc;switch(N){case "year":var ra=ca(this.year()+1,0,1)-1;break;case "quarter":ra=ca(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":ra=ca(this.year(),
this.month()+1,1)-1;break;case "week":ra=ca(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":ra=ca(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":ra=ca(this.year(),this.month(),this.date()+1)-1;break;case "hour":ra=this._d.valueOf();ra+=36E5-Zb(ra+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":ra=this._d.valueOf();ra+=6E4-Zb(ra,6E4)-1;break;case "second":ra=this._d.valueOf(),ra+=1E3-Zb(ra,1E3)-1}this._d.setTime(ra);
D.updateOffset(this,!0);return this};hb.format=function(N){N||(N=this.isUtc()?D.defaultFormatUtc:D.defaultFormat);N=F(this,N);return this.localeData().postformat(N)};hb.from=function(N,ca){return this.isValid()&&(t(N)&&N.isValid()||Ma(N).isValid())?nb({to:this,from:N}).locale(this.locale()).humanize(!ca):this.localeData().invalidDate()};hb.fromNow=function(N){return this.from(Ma(),N)};hb.to=function(N,ca){return this.isValid()&&(t(N)&&N.isValid()||Ma(N).isValid())?nb({from:this,to:N}).locale(this.locale()).humanize(!ca):
this.localeData().invalidDate()};hb.toNow=function(N){return this.to(Ma(),N)};hb.get=function(N){N=J(N);return y(this[N])?this[N]():this};hb.invalidAt=function(){return b(this).overflow};hb.isAfter=function(N,ca){var ra=t(N)?N:Ma(N);if(!this.isValid()||!ra.isValid())return!1;ca=J(ca)||"millisecond";return"millisecond"===ca?this.valueOf()>ra.valueOf():ra.valueOf()<this.clone().startOf(ca).valueOf()};hb.isBefore=function(N,ca){var ra=t(N)?N:Ma(N);if(!this.isValid()||!ra.isValid())return!1;ca=J(ca)||
"millisecond";return"millisecond"===ca?this.valueOf()<ra.valueOf():this.clone().endOf(ca).valueOf()<ra.valueOf()};hb.isBetween=function(N,ca,ra,Aa){N=t(N)?N:Ma(N);ca=t(ca)?ca:Ma(ca);if(!(this.isValid()&&N.isValid()&&ca.isValid()))return!1;Aa=Aa||"()";return("("===Aa[0]?this.isAfter(N,ra):!this.isBefore(N,ra))&&(")"===Aa[1]?this.isBefore(ca,ra):!this.isAfter(ca,ra))};hb.isSame=function(N,ca){var ra=t(N)?N:Ma(N);if(!this.isValid()||!ra.isValid())return!1;ca=J(ca)||"millisecond";if("millisecond"===ca)return this.valueOf()===
ra.valueOf();ra=ra.valueOf();return this.clone().startOf(ca).valueOf()<=ra&&ra<=this.clone().endOf(ca).valueOf()};hb.isSameOrAfter=function(N,ca){return this.isSame(N,ca)||this.isAfter(N,ca)};hb.isSameOrBefore=function(N,ca){return this.isSame(N,ca)||this.isBefore(N,ca)};hb.isValid=function(){return d(this)};hb.lang=dd;hb.locale=dc;hb.localeData=hc;hb.max=Uc;hb.min=bd;hb.parsingFlags=function(){return k({},b(this))};hb.set=function(N,ca){if("object"===typeof N){N=I(N);var ra=R(N),Aa;for(Aa=0;Aa<ra.length;Aa++)this[ra[Aa].unit](N[ra[Aa].unit])}else if(N=
J(N),y(this[N]))return this[N](ca);return this};hb.startOf=function(N){N=J(N);if(void 0===N||"millisecond"===N||!this.isValid())return this;var ca=this._isUTC?ic:vc;switch(N){case "year":var ra=ca(this.year(),0,1);break;case "quarter":ra=ca(this.year(),this.month()-this.month()%3,1);break;case "month":ra=ca(this.year(),this.month(),1);break;case "week":ra=ca(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":ra=ca(this.year(),this.month(),this.date()-(this.isoWeekday()-1));
break;case "day":case "date":ra=ca(this.year(),this.month(),this.date());break;case "hour":ra=this._d.valueOf();ra-=Zb(ra+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":ra=this._d.valueOf();ra-=Zb(ra,6E4);break;case "second":ra=this._d.valueOf(),ra-=Zb(ra,1E3)}this._d.setTime(ra);D.updateOffset(this,!0);return this};hb.subtract=cd;hb.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};hb.toObject=function(){return{years:this.year(),
months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};hb.toDate=function(){return new Date(this.valueOf())};hb.toISOString=function(N){if(!this.isValid())return null;var ca=(N=!0!==N)?this.clone().utc():this;return 0>ca.year()||9999<ca.year()?F(ca,N?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):y(Date.prototype.toISOString)?N?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",
F(ca,"Z")):F(ca,N?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};hb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var N="moment",ca="";this.isLocal()||(N=0===this.utcOffset()?"moment.utc":"moment.parseZone",ca="Z");N="["+N+'("]';var ra=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(N+ra+"-MM-DD[T]HH:mm:ss.SSS"+(ca+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol["for"]&&(hb[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+
this.format()+"\x3e"});hb.toJSON=function(){return this.isValid()?this.toISOString():null};hb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};hb.unix=function(){return Math.floor(this.valueOf()/1E3)};hb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};hb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};hb.eraName=function(){var N,ca=this.localeData().eras();var ra=
0;for(N=ca.length;ra<N;++ra){var Aa=this.clone().startOf("day").valueOf();if(ca[ra].since<=Aa&&Aa<=ca[ra].until||ca[ra].until<=Aa&&Aa<=ca[ra].since)return ca[ra].name}return""};hb.eraNarrow=function(){var N,ca=this.localeData().eras();var ra=0;for(N=ca.length;ra<N;++ra){var Aa=this.clone().startOf("day").valueOf();if(ca[ra].since<=Aa&&Aa<=ca[ra].until||ca[ra].until<=Aa&&Aa<=ca[ra].since)return ca[ra].narrow}return""};hb.eraAbbr=function(){var N,ca=this.localeData().eras();var ra=0;for(N=ca.length;ra<
N;++ra){var Aa=this.clone().startOf("day").valueOf();if(ca[ra].since<=Aa&&Aa<=ca[ra].until||ca[ra].until<=Aa&&Aa<=ca[ra].since)return ca[ra].abbr}return""};hb.eraYear=function(){var N,ca=this.localeData().eras();var ra=0;for(N=ca.length;ra<N;++ra){var Aa=ca[ra].since<=ca[ra].until?1:-1;var Qa=this.clone().startOf("day").valueOf();if(ca[ra].since<=Qa&&Qa<=ca[ra].until||ca[ra].until<=Qa&&Qa<=ca[ra].since)return(this.year()-D(ca[ra].since).year())*Aa+ca[ra].offset}return this.year()};hb.year=Rc;hb.isLeapYear=
function(){return O(this.year())};hb.weekYear=function(N){return Ec.call(this,N,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};hb.isoWeekYear=function(N){return Ec.call(this,N,this.isoWeek(),this.isoWeekday(),1,4)};hb.quarter=hb.quarters=function(N){return null==N?Math.ceil((this.month()+1)/3):this.month(3*(N-1)+this.month()%3)};hb.month=ka;hb.daysInMonth=function(){return ea(this.year(),this.month())};hb.week=hb.weeks=function(N){var ca=this.localeData().week(this);
return null==N?ca:this.add(7*(N-ca),"d")};hb.isoWeek=hb.isoWeeks=function(N){var ca=ya(this,1,4).week;return null==N?ca:this.add(7*(N-ca),"d")};hb.weeksInYear=function(){var N=this.localeData()._week;return za(this.year(),N.dow,N.doy)};hb.weeksInWeekYear=function(){var N=this.localeData()._week;return za(this.weekYear(),N.dow,N.doy)};hb.isoWeeksInYear=function(){return za(this.year(),1,4)};hb.isoWeeksInISOWeekYear=function(){return za(this.isoWeekYear(),1,4)};hb.date=kd;hb.day=hb.days=function(N){if(!this.isValid())return null!=
N?this:NaN;var ca=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=N){var ra=this.localeData();"string"===typeof N&&(isNaN(N)?(N=ra.weekdaysParse(N),N="number"===typeof N?N:null):N=parseInt(N,10));return this.add(N-ca,"d")}return ca};hb.weekday=function(N){if(!this.isValid())return null!=N?this:NaN;var ca=(this.day()+7-this.localeData()._week.dow)%7;return null==N?ca:this.add(N-ca,"d")};hb.isoWeekday=function(N){if(!this.isValid())return null!=N?this:NaN;if(null!=N){var ca=this.localeData();
N="string"===typeof N?ca.weekdaysParse(N)%7||7:isNaN(N)?null:N;return this.day(this.day()%7?N:N-7)}return this.day()||7};hb.dayOfYear=function(N){var ca=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==N?ca:this.add(N-ca,"d")};hb.hour=hb.hours=ad;hb.minute=hb.minutes=qd;hb.second=hb.seconds=ld;hb.millisecond=hb.milliseconds=rd;hb.utcOffset=function(N,ca,ra){var Aa=this._offset||0,Qa;if(!this.isValid())return null!=N?this:NaN;if(null!=N){if("string"===typeof N){if(N=
tb(Qc,N),null===N)return this}else 16>Math.abs(N)&&!ra&&(N*=60);!this._isUTC&&ca&&(Qa=-Math.round(this._d.getTimezoneOffset()));this._offset=N;this._isUTC=!0;null!=Qa&&this.add(Qa,"m");Aa!==N&&(!ca||this._changeInProgress?Sb(this,nb(N-Aa,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,D.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?Aa:-Math.round(this._d.getTimezoneOffset())};hb.utc=function(N){return this.utcOffset(0,N)};hb.local=function(N){this._isUTC&&
(this.utcOffset(0,N),this._isUTC=!1,N&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};hb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var N=tb(Pc,this._i);null!=N?this.utcOffset(N):this.utcOffset(0,!0)}return this};hb.hasAlignedHourOffset=function(N){if(!this.isValid())return!1;N=N?Ma(N).utcOffset():0;return 0===(this.utcOffset()-N)%60};hb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||
this.utcOffset()>this.clone().month(5).utcOffset()};hb.isLocal=function(){return this.isValid()?!this._isUTC:!1};hb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};hb.isUtc=Cb;hb.isUTC=Cb;hb.zoneAbbr=function(){return this._isUTC?"UTC":""};hb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};hb.dates=z("dates accessor is deprecated. Use date instead.",kd);hb.months=z("months accessor is deprecated. Use month instead",ka);hb.years=z("years accessor is deprecated. Use year instead",
Rc);hb.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(N,ca){return null!=N?("string"!==typeof N&&(N=-N),this.utcOffset(N,ca),this):-this.utcOffset()});hb.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!g(this._isDSTShifted))return this._isDSTShifted;var N={};m(N,this);N=La(N);if(N._a){var ca=N._isUTC?f(N._a):Ma(N._a);var ra;if(ra=this.isValid()){N=
N._a;ca=ca.toArray();ra=Math.min(N.length,ca.length);var Aa=Math.abs(N.length-ca.length),Qa=0,db;for(db=0;db<ra;db++)L(N[db])!==L(ca[db])&&Qa++;ra=0<Qa+Aa}this._isDSTShifted=ra}else this._isDSTShifted=!1;return this._isDSTShifted});var zb=A.prototype;zb.calendar=function(N,ca,ra){N=this._calendar[N]||this._calendar.sameElse;return y(N)?N.call(ca,ra):N};zb.longDateFormat=function(N){var ca=this._longDateFormat[N],ra=this._longDateFormat[N.toUpperCase()];if(ca||!ra)return ca;this._longDateFormat[N]=
ra.match(Na).map(function(Aa){return"MMMM"===Aa||"MM"===Aa||"DD"===Aa||"dddd"===Aa?Aa.slice(1):Aa}).join("");return this._longDateFormat[N]};zb.invalidDate=function(){return this._invalidDate};zb.ordinal=function(N){return this._ordinal.replace("%d",N)};zb.preparse=Fc;zb.postformat=Fc;zb.relativeTime=function(N,ca,ra,Aa){var Qa=this._relativeTime[ra];return y(Qa)?Qa(N,ca,ra,Aa):Qa.replace(/%d/i,N)};zb.pastFuture=function(N,ca){var ra=this._relativeTime[0<N?"future":"past"];return y(ra)?ra(ca):ra.replace(/%s/i,
ca)};zb.set=function(N){var ca;for(ca in N)if(c(N,ca)){var ra=N[ca];y(ra)?this[ca]=ra:this["_"+ca]=ra}this._config=N;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};zb.eras=function(N,ca){var ra,Aa=this._eras||Y("en")._eras;var Qa=0;for(ra=Aa.length;Qa<ra;++Qa){switch(typeof Aa[Qa].since){case "string":var db=D(Aa[Qa].since).startOf("day");Aa[Qa].since=db.valueOf()}switch(typeof Aa[Qa].until){case "undefined":Aa[Qa].until=
Infinity;break;case "string":db=D(Aa[Qa].until).startOf("day").valueOf(),Aa[Qa].until=db.valueOf()}}return Aa};zb.erasParse=function(N,ca,ra){var Aa,Qa=this.eras();N=N.toUpperCase();var db=0;for(Aa=Qa.length;db<Aa;++db){var fb=Qa[db].name.toUpperCase();var qb=Qa[db].abbr.toUpperCase();var Eb=Qa[db].narrow.toUpperCase();if(ra)switch(ca){case "N":case "NN":case "NNN":if(qb===N)return Qa[db];break;case "NNNN":if(fb===N)return Qa[db];break;case "NNNNN":if(Eb===N)return Qa[db]}else if(0<=[fb,qb,Eb].indexOf(N))return Qa[db]}};
zb.erasConvertYear=function(N,ca){var ra=N.since<=N.until?1:-1;return void 0===ca?D(N.since).year():D(N.since).year()+(ca-N.offset)*ra};zb.erasAbbrRegex=function(N){c(this,"_erasAbbrRegex")||Ac.call(this);return N?this._erasAbbrRegex:this._erasRegex};zb.erasNameRegex=function(N){c(this,"_erasNameRegex")||Ac.call(this);return N?this._erasNameRegex:this._erasRegex};zb.erasNarrowRegex=function(N){c(this,"_erasNarrowRegex")||Ac.call(this);return N?this._erasNarrowRegex:this._erasRegex};zb.months=function(N,
ca){return N?B(this._months)?this._months[N.month()]:this._months[(this._months.isFormat||id).test(ca)?"format":"standalone"][N.month()]:B(this._months)?this._months:this._months.standalone};zb.monthsShort=function(N,ca){return N?B(this._monthsShort)?this._monthsShort[N.month()]:this._monthsShort[id.test(ca)?"format":"standalone"][N.month()]:B(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};zb.monthsParse=function(N,ca,ra){var Aa;if(this._monthsParseExact){a:{N=N.toLocaleLowerCase();
if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Aa=0;12>Aa;++Aa){var Qa=f([2E3,Aa]);this._shortMonthsParse[Aa]=this.monthsShort(Qa,"").toLocaleLowerCase();this._longMonthsParse[Aa]=this.months(Qa,"").toLocaleLowerCase()}if(ra)ca="MMM"===ca?Nb.call(this._shortMonthsParse,N):Nb.call(this._longMonthsParse,N);else if("MMM"===ca){ca=Nb.call(this._shortMonthsParse,N);if(-1!==ca)break a;ca=Nb.call(this._longMonthsParse,N)}else{ca=Nb.call(this._longMonthsParse,
N);if(-1!==ca)break a;ca=Nb.call(this._shortMonthsParse,N)}ca=-1!==ca?ca:null}return ca}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(Aa=0;12>Aa;Aa++)if(Qa=f([2E3,Aa]),ra&&!this._longMonthsParse[Aa]&&(this._longMonthsParse[Aa]=new RegExp("^"+this.months(Qa,"").replace(".","")+"$","i"),this._shortMonthsParse[Aa]=new RegExp("^"+this.monthsShort(Qa,"").replace(".","")+"$","i")),ra||this._monthsParse[Aa]||(Qa="^"+this.months(Qa,"")+"|^"+this.monthsShort(Qa,
""),this._monthsParse[Aa]=new RegExp(Qa.replace(".",""),"i")),ra&&"MMMM"===ca&&this._longMonthsParse[Aa].test(N)||ra&&"MMM"===ca&&this._shortMonthsParse[Aa].test(N)||!ra&&this._monthsParse[Aa].test(N))return Aa};zb.monthsRegex=function(N){if(this._monthsParseExact)return c(this,"_monthsRegex")||va.call(this),N?this._monthsStrictRegex:this._monthsRegex;c(this,"_monthsRegex")||(this._monthsRegex=Ic);return this._monthsStrictRegex&&N?this._monthsStrictRegex:this._monthsRegex};zb.monthsShortRegex=function(N){if(this._monthsParseExact)return c(this,
"_monthsRegex")||va.call(this),N?this._monthsShortStrictRegex:this._monthsShortRegex;c(this,"_monthsShortRegex")||(this._monthsShortRegex=Ic);return this._monthsShortStrictRegex&&N?this._monthsShortStrictRegex:this._monthsShortRegex};zb.week=function(N){return ya(N,this._week.dow,this._week.doy).week};zb.firstDayOfYear=function(){return this._week.doy};zb.firstDayOfWeek=function(){return this._week.dow};zb.weekdays=function(N,ca){var ra=B(this._weekdays)?this._weekdays:this._weekdays[N&&!0!==N&&this._weekdays.isFormat.test(ca)?
"format":"standalone"];return!0===N?Ba(ra,this._week.dow):N?ra[N.day()]:ra};zb.weekdaysMin=function(N){return!0===N?Ba(this._weekdaysMin,this._week.dow):N?this._weekdaysMin[N.day()]:this._weekdaysMin};zb.weekdaysShort=function(N){return!0===N?Ba(this._weekdaysShort,this._week.dow):N?this._weekdaysShort[N.day()]:this._weekdaysShort};zb.weekdaysParse=function(N,ca,ra){var Aa;if(this._weekdaysParseExact)return ha.call(this,N,ca,ra);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=
[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(Aa=0;7>Aa;Aa++){var Qa=f([2E3,1]).day(Aa);ra&&!this._fullWeekdaysParse[Aa]&&(this._fullWeekdaysParse[Aa]=new RegExp("^"+this.weekdays(Qa,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Aa]=new RegExp("^"+this.weekdaysShort(Qa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Aa]=new RegExp("^"+this.weekdaysMin(Qa,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[Aa]||(Qa="^"+this.weekdays(Qa,"")+"|^"+this.weekdaysShort(Qa,
"")+"|^"+this.weekdaysMin(Qa,""),this._weekdaysParse[Aa]=new RegExp(Qa.replace(".",""),"i"));if(ra&&"dddd"===ca&&this._fullWeekdaysParse[Aa].test(N)||ra&&"ddd"===ca&&this._shortWeekdaysParse[Aa].test(N)||ra&&"dd"===ca&&this._minWeekdaysParse[Aa].test(N)||!ra&&this._weekdaysParse[Aa].test(N))return Aa}};zb.weekdaysRegex=function(N){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||qa.call(this),N?this._weekdaysStrictRegex:this._weekdaysRegex;c(this,"_weekdaysRegex")||(this._weekdaysRegex=
Ic);return this._weekdaysStrictRegex&&N?this._weekdaysStrictRegex:this._weekdaysRegex};zb.weekdaysShortRegex=function(N){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||qa.call(this),N?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ic);return this._weekdaysShortStrictRegex&&N?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};zb.weekdaysMinRegex=function(N){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||
qa.call(this),N?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ic);return this._weekdaysMinStrictRegex&&N?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};zb.isPM=function(N){return"p"===(N+"").toLowerCase().charAt(0)};zb.meridiem=function(N,ca,ra){return 11<N?ra?"pm":"PM":ra?"am":"AM"};Xa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",
narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(N){var ca=N%10;ca=1===L(N%100/10)?"th":1===ca?"st":2===ca?"nd":3===ca?"rd":"th";return N+ca}});D.lang=z("moment.lang is deprecated. Use moment.locale instead.",Xa);D.langData=z("moment.langData is deprecated. Use moment.localeData instead.",Y);var sc=Math.abs,sd=Vb("ms"),td=Vb("s"),ud=Vb("m"),vd=Vb("h"),wd=Vb("d"),xd=Vb("w"),yd=Vb("M"),zd=Vb("Q"),Ad=Vb("y"),Bd=lc("milliseconds"),Cd=lc("seconds"),Dd=lc("minutes"),
Ed=lc("hours"),Fd=lc("days"),Gd=lc("months"),Hd=lc("years"),pc=Math.round,Jc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},$c=Math.abs,wb=ib.prototype;wb.isValid=function(){return this._isValid};wb.abs=function(){var N=this._data;this._milliseconds=sc(this._milliseconds);this._days=sc(this._days);this._months=sc(this._months);N.milliseconds=sc(N.milliseconds);N.seconds=sc(N.seconds);N.minutes=sc(N.minutes);N.hours=sc(N.hours);N.months=sc(N.months);N.years=sc(N.years);return this};wb.add=function(N,ca){return ec(this,
N,ca,1)};wb.subtract=function(N,ca){return ec(this,N,ca,-1)};wb.as=function(N){if(!this.isValid())return NaN;var ca=this._milliseconds;N=J(N);if("month"===N||"quarter"===N||"year"===N){var ra=this._days+ca/864E5;ra=this._months+4800*ra/146097;switch(N){case "month":return ra;case "quarter":return ra/3;case "year":return ra/12}}else switch(ra=this._days+Math.round(146097*this._months/4800),N){case "week":return ra/7+ca/6048E5;case "day":return ra+ca/864E5;case "hour":return 24*ra+ca/36E5;case "minute":return 1440*
ra+ca/6E4;case "second":return 86400*ra+ca/1E3;case "millisecond":return Math.floor(864E5*ra)+ca;default:throw Error("Unknown unit "+N);}};wb.asMilliseconds=sd;wb.asSeconds=td;wb.asMinutes=ud;wb.asHours=vd;wb.asDays=wd;wb.asWeeks=xd;wb.asMonths=yd;wb.asQuarters=zd;wb.asYears=Ad;wb.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*L(this._months/12):NaN};wb._bubble=function(){var N=this._milliseconds,ca=this._days,ra=this._months,Aa=this._data;
0<=N&&0<=ca&&0<=ra||0>=N&&0>=ca&&0>=ra||(N+=864E5*Oc(146097*ra/4800+ca),ra=ca=0);Aa.milliseconds=N%1E3;N=P(N/1E3);Aa.seconds=N%60;N=P(N/60);Aa.minutes=N%60;N=P(N/60);Aa.hours=N%24;ca+=P(N/24);N=P(4800*ca/146097);ra+=N;ca-=Oc(146097*N/4800);N=P(ra/12);Aa.days=ca;Aa.months=ra%12;Aa.years=N;return this};wb.clone=function(){return nb(this)};wb.get=function(N){N=J(N);return this.isValid()?this[N+"s"]():NaN};wb.milliseconds=Bd;wb.seconds=Cd;wb.minutes=Dd;wb.hours=Ed;wb.days=Fd;wb.weeks=function(){return P(this.days()/
7)};wb.months=Gd;wb.years=Hd;wb.humanize=function(N,ca){if(!this.isValid())return this.localeData().invalidDate();var ra=!1,Aa=Jc;"object"===typeof N&&(ca=N,N=!1);"boolean"===typeof N&&(ra=N);"object"===typeof ca&&(Aa=Object.assign({},Jc,ca),null!=ca.s&&null==ca.ss&&(Aa.ss=ca.s-1));var Qa=this.localeData();var db=!ra;var fb=nb(this).abs(),qb=pc(fb.as("s")),Eb=pc(fb.as("m")),vb=pc(fb.as("h")),Lb=pc(fb.as("d")),tc=pc(fb.as("M")),Vc=pc(fb.as("w"));fb=pc(fb.as("y"));qb=qb<=Aa.ss&&["s",qb]||qb<Aa.s&&["ss",
qb]||1>=Eb&&["m"]||Eb<Aa.m&&["mm",Eb]||1>=vb&&["h"]||vb<Aa.h&&["hh",vb]||1>=Lb&&["d"]||Lb<Aa.d&&["dd",Lb];null!=Aa.w&&(qb=qb||1>=Vc&&["w"]||Vc<Aa.w&&["ww",Vc]);qb=qb||1>=tc&&["M"]||tc<Aa.M&&["MM",tc]||1>=fb&&["y"]||["yy",fb];qb[2]=db;qb[3]=0<+this;qb[4]=Qa;db=Xb.apply(null,qb);ra&&(db=Qa.pastFuture(+this,db));return Qa.postformat(db)};wb.toISOString=xc;wb.toString=xc;wb.toJSON=xc;wb.locale=dc;wb.localeData=hc;wb.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
xc);wb.lang=dd;u("X",0,0,"unix");u("x",0,0,"valueOf");ba("x",bc);ba("X",/[+-]?\d+(\.\d{1,3})?/);M("X",function(N,ca,ra){ra._d=new Date(1E3*parseFloat(N))});M("x",function(N,ca,ra){ra._d=new Date(L(N))});D.version="2.29.1";var md=Ma;D.fn=hb;D.min=function(){var N=[].slice.call(arguments,0);return eb("isBefore",N)};D.max=function(){var N=[].slice.call(arguments,0);return eb("isAfter",N)};D.now=function(){return Date.now?Date.now():+new Date};D.utc=f;D.unix=function(N){return Ma(1E3*N)};D.months=function(N,
ca){return ac(N,ca,"months")};D.isDate=l;D.locale=Xa;D.invalid=q;D.duration=nb;D.isMoment=t;D.weekdays=function(N,ca,ra){return Gc(N,ca,ra,"weekdays")};D.parseZone=function(){return Ma.apply(null,arguments).parseZone()};D.localeData=Y;D.isDuration=lb;D.monthsShort=function(N,ca){return ac(N,ca,"monthsShort")};D.weekdaysMin=function(N,ca,ra){return Gc(N,ca,ra,"weekdaysMin")};D.defineLocale=Ca;D.updateLocale=function(N,ca){if(null!=ca){var ra=$b;if(null!=Hb[N]&&null!=Hb[N].parentLocale)Hb[N].set(x(Hb[N]._config,
ca));else{var Aa=Ya(N);null!=Aa&&(ra=Aa._config);ca=x(ra,ca);null==Aa&&(ca.abbr=N);Aa=new A(ca);Aa.parentLocale=Hb[N];Hb[N]=Aa}Xa(N)}else null!=Hb[N]&&(null!=Hb[N].parentLocale?(Hb[N]=Hb[N].parentLocale,N===Xa()&&Xa(N)):null!=Hb[N]&&delete Hb[N]);return Hb[N]};D.locales=function(){return Ka(Hb)};D.weekdaysShort=function(N,ca,ra){return Gc(N,ca,ra,"weekdaysShort")};D.normalizeUnits=J;D.relativeTimeRounding=function(N){return void 0===N?pc:"function"===typeof N?(pc=N,!0):!1};D.relativeTimeThreshold=
function(N,ca){if(void 0===Jc[N])return!1;if(void 0===ca)return Jc[N];Jc[N]=ca;"s"===N&&(Jc.ss=ca-1);return!0};D.calendarFormat=function(N,ca){var ra=N.diff(ca,"days",!0);return-6>ra?"sameElse":-1>ra?"lastWeek":0>ra?"lastDay":1>ra?"sameDay":2>ra?"nextDay":7>ra?"nextWeek":"sameElse"};D.prototype=hb;D.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",
WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return D})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],function(D,B){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./icons dojo/i18n!../../nls/arcgisonline dojo/date/locale dojo/number dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){c=a.__importDefault(c);
h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);return function(){function q(){}q.timeFromPresent=function(m){return d["default"].utc(m).fromNow()};q.fullDate=function(m){return m&&-1<m?l["default"].format(new Date(m),{selector:"date",formatLength:"medium"}):""};q.timeOnly=function(m){return m&&-1<m?l["default"].format(new Date(m),{selector:"time",
formatLength:"short"}):""};q.dayOfWeek=function(m){return m&&-1<m?l["default"].format(new Date(m),{selector:"date",datePattern:"EEEE"}):""};q.fullDateEnhanced=function(m){var n=d["default"](new Date).diff(d["default"](m),"days"),t=d["default"](new Date).isSame(m,"day");return t?e["default"].filters.today:!t&&2>n?e["default"].myOrganization.membersTab.yesterday:15>n?b["default"].substitute(e["default"].myOrganization.membersTab.daysAgo,{num:n}):this.fullDate(m)};q.completeDate=function(m){return m&&
-1<m?l["default"].format(new Date(m),{formatLength:"long"}):""};q.capitalize=function(m){return m.charAt(0).toUpperCase()+m.slice(1)};q.shortenNumber=function(m){return 1E6<=m?r["default"].format(Math.round(m/1E5)/10)+"M":1E3<=m?r["default"].format(Math.round(m/100)/10)+"K":""+m};q.empty=function(m){return null!==m&&void 0!==m?m:""};q.hide=function(m){return m?"":"hide"};q.show=function(m){return m?"hide":""};q.firstChar=function(m){var n;return null!==(n=null===m||void 0===m?void 0:m.charAt(0).toUpperCase())&&
void 0!==n?n:""};q.stripHTML=function(m){var n,t;m=(new DOMParser).parseFromString(m,"text/html");return null!==(t=m.body&&(null!==(n=m.body.textContent)&&void 0!==n?n:m.body.innerText))&&void 0!==t?t:""};q.formatCategoryChip=function(m){var n=m;"/"===(null===m||void 0===m?void 0:m[0])&&(n=m.slice(1));return n=n.split("/").join(" / ")};q.lowerCase=function(m){var n;return null!==(n=(null===m||void 0===m?void 0:m.toLowerCase)&&m.toLowerCase())&&void 0!==n?n:""};q.hyphenate=function(m){return(m||"").replace(/\s+/g,
"-")};q.formatDisplayName=function(m,n,t){var z=(null===m||void 0===m?void 0:m.portal)&&m.portal.portalUser&&m.portal.portalUser.userRole;z=m&&(m.isAdminView?z&&z.canUpdateOrgItems():m.canUpdate);var w="Data Store"===(null===m||void 0===m?void 0:m.type);m&&z&&n&&!m.isUtilityNetwork&&(m.isHostedService?t+=" ("+(m.isDataView?e["default"].viewsWidget.hostedView:"Feature Service"===m.type?e["default"].viewsWidget.hostedData:e["default"].viewsWidget.hostedService)+")":m.isLocatorView?t+=" ("+e["default"].viewsWidget.locatorView+
")":m.isPhotoLocations&&(t+=" ("+e["default"].viewsWidget.photoLocations+")"));w&&(t=c["default"].formatDataStoreItem(t,m.typeKeywords));return t};q.formatNumViews=function(m){return r["default"].format(null!==m&&void 0!==m?m:0,{pattern:"#,###,###,##0"})};q.formatViewsLabel=function(m){m="file"!==m.classification||h["default"].includes(m.types,"is-views")||h["default"].includes(m.types,"is-pdf")?"viewsColon":"downloadsLbl";return e["default"].viewsWidget[m]};q.formatOwnerText=function(m,n,t){var z,
w,y;if(n)return null!==(w=null===(z=m.verified)||void 0===z?void 0:z.name)&&void 0!==w?w:m.owner;n=(null===(y=m.verified)||void 0===y?void 0:y.name)&&m.verified.url;y=b["default"].substitute(k["default"],{item:m,i18n:e["default"]});return n?(m=b["default"].substitute(f["default"],{item:m,i18n:e["default"]}),t?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'+m.replace("js-owner-section","")+' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e'+e["default"].itemProperties.managedByOwner+
" "+y.replace("js-owner-section","")+"\x3c/div\x3e":m):y};q.getAccess=function(m){return e["default"].itemSharingLabel[m]};q.getAccessIcon=function(m){return{"private":g["default"].lock["16"],shared:g["default"].users["16"],org:g["default"].organization["16"],"public":g["default"].globe["16"]}[m]};q.getGroupAccess=function(m){return{"public":e["default"].groupsPage.everyone,"private":e["default"].groupsPage.groupMembers,org:e["default"].groupsPage.organization}[m]};q.getGroupAccessIcon=function(m){return{"public":g["default"].inline.globe["16"],
"private":g["default"].inline.lock["16"],org:g["default"].inline.organization["16"]}[m]};return q}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./dijit/Alert ./utils/arrays ./utils/strings ./utils/dom ./utils/clone ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/registry dijit/Dialog dojo/_base/kernel dojo/dom-attr dojo/dom-construct dojo/Deferred dojo/on dojo/hash dojo/string dojo/number dojo/query dojo/sniff dojo/keys dojo/promise/all dojo/io-query esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O,P){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);
v=a.__importDefault(v);u=a.__importDefault(u);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);J=a.__importDefault(J);I=a.__importDefault(I);R=a.__importDefault(R);O=a.__importDefault(O);P=a.__importDefault(P);return function(){function L(){}L.editorDefaults=function(K){return{id:K,"aria-label":K,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList",
"insertUnorderedList","|","createEsriLink","unlink","insertEsriImage","removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize","class":"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: '"+("vi"===(c["default"].userInfo&&c["default"].userInfo.culture)?"SST Vietnamese":"Avenir Next")+"', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};L.tagDefaults=function(K){return{id:K,
minWidth:"100%",maxWidth:"100%"}};L.getQueryParams=function(){return F["default"].queryToObject(window.location.search.slice(1))};L.setQueryParams=function(K,Q){L[Q?"pushCurrentLocation":"replaceCurrentLocation"](window.location.pathname+"?"+F["default"].objectToQuery(K)+window.location.hash)};L.updateQueryParams=function(K,Q){L.setQueryParams(a.__assign(a.__assign({},L.getQueryParams()),K),Q)};L.removeQueryParams=function(K,Q){var W=L.getQueryParams();K.forEach(function(ba){return delete W[ba]});
L.setQueryParams(W,Q)};L.clearAllQueryParams=function(){L.setQueryParams({})};L.replaceCurrentLocation=function(K){history&&history.replaceState&&history.replaceState({},document.title,K)};L.pushCurrentLocation=function(K){null===history||void 0===history?void 0:history.pushState({},document.title,K)};L.applyCSSClassToStringMatch=function(K,Q,W){var ba=Q.indexOf(K),S=Q.slice(0,ba),X=Q.slice(ba,ba+K.length),aa=Q.slice(ba+K.length);return-1<ba?0===ba?(K=Q.slice(0,K.length),'\x3cspan class\x3d"'+W+'"\x3e'+
K+"\x3c/span\x3e"+aa):S+'\x3cspan class\x3d"'+W+'"\x3e'+X+"\x3c/span\x3e"+aa:Q};L.isEmptyObject=function(K){for(var Q in K)if(Object.prototype.hasOwnProperty.call(K,Q))return!1;return!0};L.isJson=function(K){try{JSON.parse(K)}catch(Q){return!1}return!0};L.extentToString=function(K){return K=K instanceof Array&&2===K.length&&2===K[0].length&&2===K[1].length?[K[0].join(","),K[1].join(",")].join():K&&K+""||""};L.getClosestValue=function(K,Q,W){return W-K>=Q-W?Q:K};L.findClosestValue=function(K,Q){if(Q<=
K[0])return K[0];if(Q>=K[K.length-1])return K[K.length-1];for(var W=0,ba=K.length,S=0;W<ba;){S=Math.floor((W+ba)/2);if(K[S]===Q)break;if(Q<K[S]){if(0<S&&Q>K[S-1])return L.getClosestValue(K[S-1],K[S],Q);ba=S}else{if(S<K.length-1&&Q<K[S+1])return L.getClosestValue(K[S],K[S+1],Q);W=S+1}}return K[S]};L.isFavorite=function(K){var Q=K.portal,W=Q.getPortalUser();W=W&&W.favGroupId;var ba=new z["default"];G["default"].isDefined(K.isFavorite)?ba.resolve(K.isFavorite):W?(K.isFavorite=!1,Q.queryItems('(group:"'+
W+'" AND id:"'+K.id+'")',!0).then(function(S){K.isFavorite=0<(null===S||void 0===S?void 0:S.total);ba.resolve(K.isFavorite)},function(){ba.resolve(!1)})):(K.isFavorite=!1,ba.resolve(!1));return ba};L.isConfigurableApplication=function(K){var Q,W=new z["default"],ba=K.owner,S=K.itemData||{},X=-1<(null===(Q=K.itemControl)||void 0===Q?void 0:Q.indexOf("admin"));Q=K.typeKeywords||[];var aa=Q.some(function(M){return M.match(/(sourceId#).*/gi)});G["default"].isDefined(K.isConfigurableApp)?W.resolve(K.isConfigurableApp):
K.portal.isPortal&&!K.isOwner&&X&&-1<ba.indexOf("esri_")?(K.isConfigurableApp=!1,W.resolve(!1)):K.type&&(0===K.type.indexOf("Hub")&&!["Hub Initiative Template","Hub Event","Hub Project"].includes(K.type)||"Site Application"===K.type)?(K.isConfigurableApp=K.canUpdate,W.resolve(K.isConfigurableApp)):K.canUpdate&&"Web Mapping Application"===K.type?(K.isConfigurableApp=!1,e["default"].includes(Q,"WABTemplate")?(K.isConfigurableApp=!1,W.resolve(!1)):e["default"].includes(Q,"selfConfigured")?(K.isConfigurableApp=
S&&(S.source||f["default"].isHostedTemplateItem(K.url)||!aa),W.resolve(K.isConfigurableApp)):e["default"].includes(Q,"configurableApp")?(K.isConfigurableApp=!0,W.resolve(K.isConfigurableApp)):(null===S||void 0===S?0:S.source)?f["default"].request({url:K.portal.url+"content/items/"+S.source+"/data"}).then(function(M){K.isConfigurableApp=!(null===M||void 0===M||!M.configurationSettings);W.resolve(K.isConfigurableApp)},function(){K.isConfigurableApp=!1;W.resolve(K.isConfigurableApp)}):W.resolve(!1)):
(K.isConfigurableApp=!1,W.resolve(!1));return W};L.isFilePublishableByUser=function(K){var Q,W,ba,S=new z["default"],X=K.portal,aa=X.getPortalUser(),M=null===aa||void 0===aa?void 0:aa.userRole,da=X.supportsHostedServices;aa=G["default"].isDefined(null===(W=null===(Q=X.helperServices)||void 0===Q?void 0:Q.rasterAnalytics)||void 0===W?void 0:W.url);Q=M&&M.canCreateItem();W=(Q=da&&Q&&K.isAdmin)&&M.canPublishTiles();da=Q&&M.canPublishFeatures();M=Q&&M.canPublishScenes();var ea=(null===(ba=K.resultData)||
void 0===ba?void 0:ba.length)||null;ba=X.isPortal&&Q&&aa;aa=!X.isPortal||X.supportsSceneServices;X=X.isPortal;X=G["default"].isDefined(K.canPublishFile)?K.canPublishFile:da&&(e["default"].includes(K.types,"is-feature")||e["default"].includes(K.types,"is-featureCollection")&&!ea&&!K.isMarkup)||W&&e["default"].includes(K.types,"is-tile")||M&&aa&&e["default"].includes(K.types,"is-scene-package")||W&&e["default"].includes(K.types,"is-vector-tile")||ba&&e["default"].includes(K.types,"is-image-collection")||
Q&&e["default"].includes(K.typeKeywords,"Photo locations")||X&&K.typeKeywords.includes("GeoPackage")||Q&&e["default"].includes(K.types,"is-notebook")?!0:!1;K.canPublishFile=X;S.resolve(X);return S};L.isServicePublishableByUser=function(K,Q){var W=new z["default"],ba=K.portal.getPortalUser();ba=(ba=null===ba||void 0===ba?void 0:ba.userRole)&&ba.canCreateItem();var S=K.serviceInfo||{},X=K.isSDS,aa=K.isTable&&!Q,M=K.isLocationTrackingService;ba=!(K.isMultiServicesView||S.isMultiServicesView||!K.isHostedService||
"Feature Service"!==K.type||!ba||!X||aa||M);K.canPublish=ba;W.resolve(ba);return W};L.canPublishTileServiceFromFeatureService=function(K){var Q=new z["default"],W=K.portal.getPortalUser();W=null===W||void 0===W?void 0:W.userRole;var ba=L.isServicePublishableByUser(K)&&K.isAdmin&&W.canPublishTiles(),S=e["default"].includes(K.typeKeywords,"Spatiotemporal"),X=(K.resultData||[]).filter(function(M){return"Map Service"===M.type});W=K.featureLayers;var aa=K.isHostedService&&(W||[]).every(function(M){return L.canUseForPublish(K,
M,!0)});L.isServicePublishableByUser(K).then(function(M){M=!(!(M&&ba&&aa)||S||X&&X.length);K.canPublishTiles=M;Q.resolve(M)});return Q};L.canPublishVectorTileServiceFromFeatureService=function(K){var Q=new z["default"],W=null===c["default"]||void 0===c["default"]?void 0:c["default"].publishVectorTilesFromFeaturesEnabled,ba=(K.resultData||[]).filter(function(S){return"Vector Tile Service"===S.type});L.isServicePublishableByUser(K).then(function(S){S=!(!W||!S||ba&&ba.length);K.canPublishVectorTiles=
S;Q.resolve(S)});return Q};L.canPublishWFSServiceFromFeatureService=function(K){var Q=new z["default"],W=K.portal,ba=W.getPortalUser();ba=null===ba||void 0===ba?void 0:ba.userRole;var S=e["default"].includes(K.typeKeywords,"Spatiotemporal"),X=L.isServicePublishableByUser(K),aa=X&&(!W.isPortal||W.isPortal&&!S),M=X&&K.isAdmin&&ba.canPublishFeatures(),da=(K.resultData||[]).filter(function(ea){return"WFS"===ea.type});L.isServicePublishableByUser(K).then(function(ea){ea=!(!(ea&&aa&&M)||!W.isPortal&&S||
da&&da.length);K.canPublishWFS=ea;Q.resolve(ea)});return Q};L.canPublishOGCFeatureServerFromFeatureService=function(K){var Q=new z["default"],W=K.portal.isPortal,ba=K.portal.getPortalUser();ba=null===ba||void 0===ba?void 0:ba.userRole;var S=L.isServicePublishableByUser(K)&&!W&&K.isAdmin&&ba.canPublishFeatures(),X=(K.resultData||[]).filter(function(M){return"OGCFeatureServer"===M.type}),aa=e["default"].includes(K.typeKeywords,"Spatiotemporal");L.isServicePublishableByUser(K).then(function(M){M=!(!M||
!S||aa||X&&X.length);K.canPublishOGCFeatures=M;Q.resolve(M)});return Q};L.canPublishSceneServiceFromFeatureService=function(K){var Q=this,W=new z["default"],ba=K.portal,S=ba.getPortalUser();S=null===S||void 0===S?void 0:S.userRole;var X=L.isServicePublishableByUser(K),aa=ba&&!ba.isPortal&&X&&K.isAdmin&&S.canPublishScenes();ba=K.featureLayers||[];var M=K.isHostedService&&ba.every(function(va){return Q.canUseForPublish(K,va,!0,"scene")}),da=K.tables||[],ea=ba.every(function(va){return"esriGeometryPoint"===
(null===va||void 0===va?void 0:va.geometryType)}),Z=ba.every(function(va){return"esriGeometryMultiPatch"===(null===va||void 0===va?void 0:va.geometryType)}),ka=(K.resultData||[]).filter(function(va){return"Scene Service"===va.type});L.isServicePublishableByUser(K).then(function(va){va=!(!(va&&aa&&M&&(ea||Z))||ka&&ka.length||da.length||K.hasGeocodeReviewTable);K.canPublishScenes=va;W.resolve(va)});return W};L.canPublishViewServiceFromFeatureService=function(K){var Q=new z["default"],W=K.portal||{},
ba=W.getPortalUser();ba=null===ba||void 0===ba?void 0:ba.userRole;var S=K.isAdmin&&ba.canPublishFeatures(),X=L.isMultipatchFeatureService(K),aa=K.isLocationTrackingService&&!W.isPortal,M=e["default"].includes(K.typeKeywords,"View Service");L.isServicePublishableByUser(K,!0).then(function(da){da=X||!da||!S||M||aa?!1:!0;K.canPublishView=da;Q.resolve(da)});return Q};L.canPublishImageServiceAsTiled=function(K){var Q,W=new z["default"],ba=L.canPublishFromImageService(K),S=null===(Q=K.portal.getPortalUser())||
void 0===Q?void 0:Q.userRole.canPublishTiledImagery();K.canPublishImageServiceAsTiled=ba&&S&&!L.isTiledOnlyImageryService(K.serviceInfo);W.resolve(K.canPublishImageServiceAsTiled);return W};L.canPublishImageServiceAsDynamic=function(K){var Q,W=new z["default"],ba=L.canPublishFromImageService(K),S=null===(Q=K.portal.getPortalUser())||void 0===Q?void 0:Q.userRole.canPublishDynamicImagery();K.canPublishImageServiceAsDynamic=ba&&S&&L.isTiledOnlyImageryService(K.serviceInfo);W.resolve(K.canPublishImageServiceAsDynamic);
return W};L.canExportImagery=function(K){var Q,W=new z["default"],ba=L.canPublishFromImageService(K),S=null===(Q=K.portal.getPortalUser())||void 0===Q?void 0:Q.userRole.canPublishTiledImagery();K.canExportImagery=ba&&S&&L.isTiledOnlyImageryService(K.serviceInfo);W.resolve(K.canExportImagery);return W};L.canEnableAttachments=function(K){var Q,W=new z["default"],ba=K.isDataView,S=K.isLocationTrackingService,X=-1<(null===(Q=K.typeKeywords)||void 0===Q?void 0:Q.indexOf("Spatiotemporal"));Q=G["default"].isDefined(K.canEnableAttachments)?
K.canEnableAttachments:!(!K.isHostedService||ba||S||X||!K.canUpdate);K.canEnableAttachments=Q;W.resolve(Q);return W};L.canEditViewAttachments=function(K){G["default"].isDefined(K.canEditViewAttachments)||(K.canEditViewAttachments=!!(K.isHostedService&&K.isDataView&&K.canUpdate));return K.canEditViewAttachments};L.canAppendData=function(K){var Q,W=new z["default"],ba=e["default"].includes(K.typeKeywords,"View Service"),S=e["default"].includes(K.typeKeywords,"Cloud Drive"),X=K.isLocationTrackingService;
ba=!S&&!ba&&!X&&K.isAdmin&&K.isHostedService&&(K.portal.isPortal&&(null===(Q=K.serviceInfo)||void 0===Q?void 0:Q.supportsAppend)||!K.portal.isPortal&&(K.layers||[]).some(function(aa){return aa.supportsAppend}));K.canAppendData=ba;W.resolve(ba);return W};L.canUseForPublish=function(K,Q,W,ba){var S;K=(null===(S=K.itemData)||void 0===S?void 0:S.layers)||[];S=e["default"].find(K,function(X){return X.id===Q.id});K=k["default"](Q);if(null===S||void 0===S?0:S.layerDefinition)K.drawingInfo=a.__assign(a.__assign({},
K.drawingInfo),S.layerDefinition.drawingInfo);return h["default"](a.__assign({},K),W,ba)};L.canPublishFromImageService=function(K){var Q,W=K.portal,ba=K.isAdmin,S=K.isOwner,X=K.isHostedService,aa=K.serviceInfo,M=K.type,da=null===(Q=W.getPortalUser())||void 0===Q?void 0:Q.userRole;Q=ba||S;W=X&&!W.isPortal;return"Image Service"===M&&(null===aa||void 0===aa?void 0:aa.bandCount)&&!e["default"].includes(K.typeKeywords,"Elevation 3D Layer")&&Q&&W&&(null===da||void 0===da?void 0:da.canCreateItem())&&(null===
da||void 0===da?void 0:da.canPublishImageCollection())};L.isTiledOnlyImageryService=function(K){K=K.capabilities.split(",").map(function(Q){return Q.toLowerCase().trim()});return e["default"].includes(K,"tilesonly")};L.isTiledImageryService=function(K){var Q=new z["default"];K="Image Service"===K.type&&e["default"].includesSome(K.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);Q.resolve(K);return Q};L.isServiceEditableByUser=function(K){var Q,W=K.isOrgItem,ba=K.isHostedService,S=K.serviceInfo,
X=K.canEditService,aa=K.portal,M=new z["default"],da=aa.getPortalUser();aa=null===(Q=null===da||void 0===da?void 0:da.userRole)||void 0===Q?void 0:Q.canEditFeaturesFullControl();Q=da&&W;W=-1<((null===S||void 0===S?void 0:S.capabilities)||"").indexOf("Editing");S=null===S||void 0===S?void 0:S.isMultiServicesView;G["default"].isDefined(X)||(K.canEditService=!(!ba||S||!(K.canUpdate||W&&aa&&Q)));M.resolve(K.canEditService);return M};L.isExportableByUser=function(K){var Q,W=K.portal,ba=K.serviceInfo,S=
K.isLocationTrackingService,X=K.isHostedService,aa=K.isAdmin,M=K.type,da=new z["default"],ea=W.getPortalUser();ba=!!(-1<(null===(Q=null===ba||void 0===ba?void 0:ba.capabilities)||void 0===Q?void 0:Q.indexOf("Extract")));Q=(null===ea||void 0===ea?void 0:ea.userRole)&&ea.userRole.canCreateItem();Q=ea&&ba&&(!ea.isOrgUser||Q);G["default"].isDefined(K.canExport)||(K.canExport=!(!X||!ea||W.isPortal&&(!W.isPortal||S)||!("Feature Service"===M&&aa||Q)));da.resolve(K.canExport);return da};L.isOverwriteableService=
function(K,Q){var W,ba,S=K.type,X=K.serviceInfo,aa=K.adminServiceInfo,M=K.isPortal,da=K.isSDS,ea=K.typeKeywords,Z=K.sourceData,ka=new z["default"],va={shapefile:1,"file geodatabase":1,geojson:1};aa=null===(W=M&&!da?X:aa)||void 0===W?void 0:W.capabilities;W=l["default"].stringToArray(aa||"",",",!0);W=e["default"].includes(W,"ChangeTracking");!Q&&e["default"].includes(ea,"Cloud Drive")&&ka.resolve(!1);K.isHostedService&&"Feature Service"===S&&K.serviceInfo&&!1===K.serviceInfo.sourceSchemaChangesAllowed&&
ka.resolve(!1);!K.isAdmin||!K.isHostedService||"Feature Service"!==S||X.syncEnabled||K.isDataView||W?ka.resolve(!1):Z&&Z.owner===K.owner&&(null===(ba=Z.type)||void 0===ba?void 0:ba.toLowerCase())in va?ka.resolve(!0):!Z||"CSV"!==Z.type&&"Microsoft Excel"!==Z.type?ka.resolve(!1):L.fetchPublishParameters(K).then(function(Ea){K.publishParameters=Ea;ka.resolve(!!Ea)});return ka};L.isOverwriteableCloudService=function(K){var Q=new z["default"],W=K.cloudProviderInfo,ba=K.sourceData;if(e["default"].includes(K.typeKeywords,
"Cloud Drive")&&W&&W.mimeType){var S=!ba;K.sourceData=ba||{type:-1!==W.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};L.isOverwriteableService(K,!0).then(function(X){S&&(K.sourceData=null);Q.resolve(!!X)})}else Q.resolve(!1);return Q};L.isApplicationCreateableFromItem=function(K){var Q=new z["default"],W=K.portal.getPortalUser(),ba=null===W||void 0===W?void 0:W.userRole;ba=ba&&ba.canCreateItem()||W&&!W.isOrgUser;var S=!1;if(G["default"].isDefined(K.isApplicationCreateableFromItem))Q.resolve(K.isApplicationCreateableFromItem);
else{K.isApplicationCreateableFromItem=S;if(ba)if(e["default"].includes(K.types,"is-map")||e["default"].includes(K.types,"is-scene"))K.isApplicationCreateableFromItem=!0,K.privileges.push("can-create-app"),e["default"].includes(K.types,"is-map")&&c["default"].showCreateDashboard&&W&&W.isOrgUser&&K.privileges.push("can-create-dashboard-item"),S=!0;else if(e["default"].includes(K.typeKeywords,"Configurable")&&e["default"].includes(K.typeKeywords,"createAppWithoutMap")&&!e["default"].includes(K.typeKeywords,
"Web AppBuilder for ArcGIS")||e["default"].includes(K.typeKeywords,"Web AppBuilder for ArcGIS")&&W.isOrgUser)K.isApplicationCreateableFromItem=!0,K.types.push("is-hostedTemplate"),S=!0;Q.resolve(S)}return Q};L.isMultipatchFeatureService=function(K){var Q=K.isHostedService,W=K.typeKeywords,ba=K.serviceInfo;K="Feature Service"===K.type&&(Q||e["default"].includes(W,"Hosted"));ba=((null===ba||void 0===ba?void 0:ba.layers)||[]).some(function(S){return"esriGeometryMultiPatch"===(null===S||void 0===S?void 0:
S.geometryType)});return K&&ba};L.registerItemActions=function(K,Q,W,ba,S){v["default"]("[class*\x3djs-action-]",Q).forEach(function(X){var aa=n["default"].get(X,"data-action");W[aa]&&K.own(w["default"](X,"click",function(M){M.preventDefault();if(S&&S(aa))M.stopPropagation();else W[aa](a.__assign({evt:M,item:K.item,user:K.portalUser,page:ba,scope:K}))}))},K)};L.calculateExpectedTiles=function(K,Q,W){var ba=new J["default"](Q.xmax,Q.ymin,Q.spatialReference);Q=new J["default"](Q.xmin,Q.ymax,Q.spatialReference);
Q=I["default"].getContainingTileCoords(K,Q,W);K=I["default"].getContainingTileCoords(K,ba,W);K=(K.row+1-Q.row)*(K.col+1-Q.col);return 0>=K?1:K};L.sizeInMB=function(K){var Q=K||0;0<K&&(Q=K/1048567);Q=Math.round(100*Q)/100;return A["default"].format(Q)};L.getHashParts=function(){return y["default"]().split("/")};L.splitHashParts=function(K){return K?K.split("/"):[""]};L.removeUrlQueryParameter=function(K,Q){var W;if(K){var ba=R["default"].urlToObject(K),S=ba.path,X=y["default"]()?"#"+y["default"]():
"";if(!(Q&&(null===(W=ba.query)||void 0===W?0:W[Q])))return K;delete ba.query[Q];W=0;for(var aa in ba.query)Object.prototype.hasOwnProperty.call(ba.query,aa)&&aa!==Q&&(S=""+S+(0===W?"?":"\x26")+aa+"\x3d"+encodeURIComponent(ba.query[aa]),W++);return S+X}return K};L.needsToken=function(K,Q){var W,ba,S=null===(W=K.portal)||void 0===W?void 0:W.getPortalUser();W=K.serverToken||(null===(ba=null===S||void 0===S?void 0:S.credential)||void 0===ba?void 0:ba.token)||(null===S||void 0===S?void 0:S.token);return K&&
"WFS"!==K.type&&"OGCFeatureServer"!==K.type&&S&&((K.isServiceProxy||K.hasKMLItemData)&&"public"!==K.access||K.isHostedService&&(K.isAdmin||"public"!==K.access)||K.isFeatureCollection&&"public"!==K.access)?Q+(W?"?token\x3d"+W:""):Q};L.getNeededToken=function(K){var Q,W,ba=null===(Q=K.portal)||void 0===Q?void 0:Q.getPortalUser();Q=K.serverToken||(null===(W=null===ba||void 0===ba?void 0:ba.credential)||void 0===W?void 0:W.token)||(null===ba||void 0===ba?void 0:ba.token);return K&&"WFS"!==K.type&&ba&&
((K.isServiceProxy||K.hasKMLItemData)&&"public"!==K.access||K.isHostedService&&(K.isAdmin||"public"!==K.access)||K.isFeatureCollection&&"public"!==K.access)?Q:null};L.addToken=function(K){K=L.needsToken(K,K.url);return-1<(null===K||void 0===K?void 0:K.indexOf("?token\x3d"))};L.needsSSL=function(K,Q){return K.portal.allSSL||-1<window.location.protocol.indexOf("https:")?f["default"].getSecureUrl(K.url):Q};L.registerKeystrokeHandler=function(K,Q){return w["default"](K,10>=u["default"]("ie")||7>u["default"]("trident")?
"keydown":"keyup",Q)};L.registerEnterSpaceKeystrokeHandler=function(K,Q){return w["default"](K,"keyup",function(W){W.keyCode!==C["default"].ENTER&&W.keyCode!==C["default"].SPACE||Q(W)})};L.sendAllResources=function(K,Q,W,ba,S,X){var aa=new z["default"];W=k["default"](W);var M=[],da=W.splice(0,Q);for(G["default"].isDefined(X)||(X=!0);0<(null===da||void 0===da?void 0:da.length);)M.push(f["default"].request({url:K,content:ba(da)},a.__assign({usePost:X},S||{}))),da=W.splice(0,Q);E["default"](M).then(function(ea){return aa.resolve(ea)},
function(ea){return aa.reject(ea)});return aa};L.sendAllResourcesWithDelay=function(K,Q,W,ba,S){function X(){setTimeout(function(){va=M.splice(0,Q);0<(null===va||void 0===va?void 0:va.length)&&(f["default"].request({url:K,content:ba(va)},{usePost:!0}).then(function(Ea){Z++;da.push(Ea);Z>=aa&&ea.resolve(da)},function(Ea){Z++;Z>=aa&&ea.reject(Ea)}),ka++,X())},0===ka?0:S)}var aa=Math.ceil(W.length/Q),M=k["default"](W),da=[],ea=new z["default"],Z=0,ka=0,va;X();return ea};L.sendAllResourcesSerially=function(K,
Q,W,ba){function S(){ea=aa.splice(0,Q);0<(null===ea||void 0===ea?void 0:ea.length)&&f["default"].request({url:K,content:ba(ea)},{usePost:!0}).then(function(ka){Z++;M.push(ka);Z>=X?da.resolve(M):S()},function(ka){Z++;Z>=X?da.reject(ka):S()})}var X=Math.ceil(W.length/Q),aa=k["default"](W),M=[],da=new z["default"],ea,Z=0;S();return da};L.fetchAllResources=function(K,Q,W){var ba=new z["default"],S=1,X=[],aa=100,M,da,ea,Z;Q=Q||{};W=W||"results";Q.start=S;!Q.num||Q.num>aa?Q.num=aa:aa=Q.num;f["default"].request({url:K,
content:Q}).then(function(ka){if(null===ka||void 0===ka?0:ka[W]){X=X.concat(ka[W]);S=ka.nextStart;M=ka.total-X.length;da=Math.ceil(M/aa);ea=[];if(-1<S)for(Z=0;Z<da;Z++)Q.start=S+Z*aa,ea.push(f["default"].request({url:K,content:Q}));E["default"](ea).then(function(va){va.forEach(function(Ea){X=X.concat(Ea[W])});ba.resolve(X)},function(va){return ba.reject(va)})}else ba.resolve(X)},function(ka){return ba.reject(ka)});return ba};L.deleteItem=function(K){var Q=K.userItemUrl+"/delete";if("Deep Learning Package"===
(null===K||void 0===K?void 0:K.type)){var W=new z["default"];L.uninstallDeepLearningPackage(K).then(function(ba){"uninstallFail"===(null===ba||void 0===ba?void 0:ba.messageCode)?W.resolve(ba):f["default"].request({url:Q},{usePost:!0}).then(function(S){return W.resolve(S)})});return W}return f["default"].request({url:Q},{usePost:!0})};L.uninstallDeepLearningPackage=function(K){var Q,W,ba=K.portal,S=new z["default"],X=null===(Q=ba.helperServices)||void 0===Q?void 0:Q.rasterAnalytics;Q=K.portal.getPortalUser()||
{};Q=(null===(W=Q.credential)||void 0===W?void 0:W.token)||Q.token;var aa={messageCode:"uninstallFail"},M={messageCode:"uninstallSuccess"};if((null===ba||void 0===ba?0:ba.isPortal)&&X&&G["default"].isDefined(X.url)){W={modelItemId:JSON.stringify({itemId:K.id})};var da=X.url+"/UninstallDeepLearningModel";S=(new O["default"](da+(Q?"?token\x3d"+Q:""))).submitJob(W).then(function(ea){var Z,ka,va=null===(ka=null===(Z=null===ea||void 0===ea?void 0:ea.results)||void 0===Z?void 0:Z.uninstallSucceed)||void 0===
ka?void 0:ka.paramUrl;ea=ea.jobId;return va&&ea?f["default"].request({url:da+"/jobs/"+ea+"/"+va},{usePost:!0}).then(function(Ea){return(Ea=null===Ea||void 0===Ea?void 0:Ea.value)&&Ea===K.id?M:aa}):aa},function(){return aa})}else S.resolve(M);return S};L.getUserProfile=function(K){K="string"===typeof K?{username:K}:K;var Q=c["default"].restBaseUrl+"community/users/"+K.username,W=f["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");return f["default"].request({url:Q}).then(function(ba){var S=
ba.thumbnail?H["default"].PortalUtil.formatUrl(Q+"/info/"+ba.thumbnail):W;return a.__assign(a.__assign(a.__assign({},ba),{thumbnailUrl:S}),K)})};L.getItemSharing=function(K){var Q=new z["default"],W=K.portal,ba=K.itemOwner,S=K.access,X=K.canUpdate,aa=K.isOwner,M=K.userItemUrl,da=W.getPortalUser(),ea=(null===da||void 0===da?void 0:da.canShareOthers)&&K.isOwnedByMyOrg,Z={access:S};X&&(aa||(null===da||void 0===da?0:da.canViewOthersOrgItems))||ea?f["default"].request({url:M}).then(function(ka){Z=ka.sharing;
var va=null===Z||void 0===Z?void 0:Z.groups;"shared"===Z.access&&1===(null===va||void 0===va?void 0:va.length)&&va[0]===da.favGroupId&&(Z={access:"private"});va&&(ka={userGroups:da.getGroups(),ownerGroups:K.isOwner?null:ba.getGroups()},E["default"](ka).then(function(Ea){(Ea=(Ea.userGroups||[]).concat(Ea.ownerGroups||[]).filter(function(Ga){return e["default"].find(va,function(na){return Ga.id===na})}).map(function(Ga){return'id: "'+Ga.id+'"'}))&&Ea.length?W.queryGroups({q:Ea.join(" OR "),num:100},
!0).then(function(Ga){Z.groups=(Ga.results||[]).sort(function(na,ma){return ma.title.localeCompare(na.title)});Z.total=Ga.total;K=a.__assign(a.__assign({},K),{sharing:Z});Q.resolve(Z)}):(delete Z.groups,K=a.__assign(a.__assign({},K),{sharing:Z}),Q.resolve(Z))}))}):(K=a.__assign(a.__assign({},K),{sharing:Z}),Q.resolve(Z));return Q};L.protectItem=function(K){return f["default"].request({url:K.userItemUrl+"/protect"},{usePost:!0})};L.unprotectItem=function(K){return f["default"].request({url:K.userItemUrl+
"/unprotect"},{usePost:!0})};L.protectGroup=function(K){return f["default"].request({url:c["default"].restBaseUrl+"community/groups/"+K.id+"/protect"},{usePost:!0})};L.unprotectGroup=function(K){return f["default"].request({url:c["default"].restBaseUrl+"community/groups/"+K.id+"/unprotect"},{usePost:!0})};L.fetchPublishParameters=function(K){var Q=K.sourceData;K=K.itemUrl;var W=new z["default"];K+="/info/publishParameters.json";!Q||"CSV"!==Q.type&&"Microsoft Excel"!==Q.type?W.resolve(!1):f["default"].request({url:K}).then(function(ba){return W.resolve(ba)},
function(){return W.resolve(!1)});return W};L.fetchRegisteredAppInfo=function(K){K=f["default"].getSecureUrl(K.userItemUrl+"/registeredAppInfo");return f["default"].request({url:K})};L.refreshAppSecret=function(K){K=f["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/apps/"+K+"/resetSecret";return f["default"].request({url:K},{usePost:!0})};L.registerApp=function(K,Q){var W=Q?"apps/"+K.client_id+"/update":"registerApp";W=f["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/"+W;return f["default"].request({url:W,
content:K},{usePost:!0})};L.unregisterApp=function(K){K=f["default"].getSecureUrl(c["default"].restBaseUrl)+"oauth2/apps/"+K+"/unregister";return f["default"].request({url:K},{usePost:!0})};L.enableAttachments=function(K,Q,W){return f["default"].request({url:K.adminUrl+"/"+Q.id+"/updateDefinition",content:{updateDefinition:JSON.stringify({hasAttachments:!!W})}},{usePost:!0}).then(function(){return Q.hasAttachments=W})};L.isItemListable=function(K){var Q=K.portal.getPortalUser().userRole,W=Q&&Q.isCustom()&&
Q.canManageMarketplace();Q=Q&&Q.isAdmin()||W;W=e["default"].includes(K.typeKeywords,"Service Proxy")&&K.sourceUrl&&(-1<K.sourceUrl.indexOf(".arcgis.com")||-1<K.sourceUrl.indexOf(".esri.com"));var ba=c["default"].self,S=ba.canListApps;ba=ba.canListData;!K.listed&&c["default"].self&&Q?ba&&W?(Q=new z["default"],Q.resolve("Geoprocessing Service"===K.type)):S&&(e["default"].includes(K.typeKeywords,"Registered App")||e["default"].includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],K.type))?(Q=new z["default"],
Q.resolve(!0)):ba&&"Rule Package"===K.type?(Q=new z["default"],Q.resolve(!0)):ba?Q=L.isServiceListable(K):(Q=new z["default"],Q.resolve(!1)):(Q=new z["default"],Q.resolve(!1));return Q};L.isServiceListable=function(K){var Q=c["default"].restBaseUrl+"portals/isServerRegistered",W=K.type?K.type.toLowerCase():"",ba=K.url&&f["default"].parseUrl(K.url);"web map"===W?(K=new z["default"],K.resolve(!0)):e["default"].includes(["feature service","map service","image service","scene service"],W)?f["default"].isHostedServiceItem(K)?
(K=new z["default"],K.resolve(!0)):ba&&G["default"].isDefined(ba.protocol)&&G["default"].isDefined(ba.host)?K=f["default"].request({url:Q,content:{serverUrl:ba.protocol+"://"+ba.host}}).then(function(S){return S.registered}):(K=new z["default"],K.resolve(!1)):(K=new z["default"],K.resolve(!1));return K};L.findLayer=function(K,Q){var W=parseInt(K,10);if(G["default"].isDefined(W))return(Q||[]).filter(function(ba){return ba.id===W}).shift()};L.getServiceNameFromUrl=function(K){var Q=K.url||"",W=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,
ba=Q.replace(W,"").replace(/^.*\//,"").replace(/\?.*$/,"");Q=Q.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(W);try{return Q?decodeURI(ba):K.title}catch(S){return ba}};L.getAppPurpose=function(K){K=K.typeKeywords;if(e["default"].includes(K,"Ready To Use")||e["default"].includes(K,"Ready to Use"))return P["default"].itemProperties.readyToUse;if(e["default"].includes(K,"selfConfigured"))return P["default"].itemProperties.selfConfigurable;if(e["default"].includes(K,
"Configurable"))return P["default"].itemProperties.configurable;if(e["default"].includes(K,"Code Sample"))return P["default"].itemProperties.codeSample};L.getAppApi=function(K){var Q={"Windows Mobile":P["default"].common.mobile,"ArcGIS for iPhone":P["default"].common.ios,"ArcGIS for Windows Phone":P["default"].common.windowsPhone,"ArcGIS for Windows Store":P["default"].common.windowsStore,"ArcGIS for Windows Universal":P["default"].common.windowsUniversal,"ArcGIS for Android":P["default"].common.Android,
Flex:P["default"].common.Flex,JavaScript:P["default"].common.JavaScript,Silverlight:P["default"].common.Silverlight,"Web ADF":P["default"].common.WebADF,Other:P["default"].common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(Q).reduce(function(W,ba){e["default"].includes(K.typeKeywords,ba)&&(W=Q[ba]);return W},"")};L.linkify=function(K){K=f["default"].htmlEncode(K);for(var Q=K.indexOf("http"),W;-1<Q;){W=K.substring(Q,Q+8);
if(-1<W.indexOf("http://")||-1<W.indexOf("https://")){if(W=!0,6<Q&&"href\x3d"===K.substring(Q-6,Q-1).toLowerCase()&&(W=!1,Q=Q+K.toLowerCase().substring("/a",Q).length+1),W){W=K.indexOf(" ",Q);-1===W&&(W=K.length);var ba=K.substring(Q,W),S='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+ba+'" target\x3d"_blank"\x3e'+ba+"\x3c/a\x3e\x3c/span\x3e";K=""+K.substring(0,Q)+S+K.substring(W,K.length);Q=Q+S.length-ba.length+5}}else Q+=1;Q=K.indexOf("http",Q)}return K};L.includeTimestampInRequest=function(K){if(10>=
u["default"]("ie")||7>u["default"]("trident"))K.ts=(new Date).getTime();return K};L.fetchIDPConfig=function(){var K=f["default"].getSecureUrl(c["default"].restBaseUrl)+"portals/self/idp";return f["default"].request({url:K})};L.checkEnterpriseGroupStore=function(){var K=new z["default"],Q=f["default"].getPortalAdminBaseUrl()+"/security/config";f["default"].request({url:Q}).then(function(W){W=null===W||void 0===W?void 0:W.groupStoreConfig;var ba=!1,S=null;if(null===W||void 0===W?0:W.type)S=null===W||
void 0===W?void 0:W.type.toLowerCase(),"builtin"!==S&&"saml"!==S&&(ba=!0);K.resolve({storeType:S,supportsEnterpriseGroups:ba})},function(){K.resolve({supportsEnterpriseGroups:!1})});return K};L.enterpriseGroupMatches=function(K,Q){return!(!G["default"].isDefined(K)||!G["default"].isDefined(Q)||K.toLowerCase()!==Q.toLowerCase())};L.isAmazonBasedTileService=function(K){return!f["default"].isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(K)};L.createDialogWrapper=function(K,Q){var W=(new q["default"](K)).placeAt(document.body);
W.setContent(Q);w["default"].once(W,"hide",function(){return W.destroyRecursive()});return W};L.createSpecifiedDialog=function(K,Q,W){var ba=Q?new K(Q):new K,S=ba._dialog||ba.dialog;if(S)w["default"].once(S,"hide",function(){var X;S.destroyRecursive();ba.destroyRecursive();null===(X=null===W||void 0===W?void 0:W.focus)||void 0===X?void 0:X.call(W)});return ba};L.showAlert=function(K,Q,W,ba){void 0===W&&(W="");void 0===ba&&(ba=!1);L.clearAlerts();return new g["default"]({type:K,text:Q,cssClasses:W,
preventAutoDimiss:ba},t["default"].create("div",null,document.body))};L.clearAlerts=function(){r["default"].forEachNode(document.querySelectorAll(".alert"),function(K){var Q,W;null===(W=null===(Q=d["default"].byNode(K))||void 0===Q?void 0:Q.destroy)||void 0===W?void 0:W.call(Q)})};L.showAlertList=function(K,Q){var W=Q.reduce(function(ba,S){return ba+"\x3cli\x3e"+S+"\x3c/li\x3e"},"");return new g["default"]({type:K,text:"",listHTML:"\x3cul\x3e"+W+"\x3c/ul\x3e"},t["default"].create("div",null,document.body))};
L.getPageRangeString=function(K,Q){var W=m["default"].locale?m["default"].locale.substring(0,2):"en",ba=Q?Q:P["default"].common.pageRange;K.total&&1E4<=K.total&&(K.total="10000+");return x["default"].substitute(ba["en"===W?"en":"other"],K)};L.sortListByStrProp=function(K,Q,W){K.sort(function(ba,S){var X=ba[Q].toLowerCase(),aa=S[Q].toLowerCase();return W?X<aa?1:X>aa?-1:0:X<aa?-1:X>aa?1:0})};L.formatDataStoreItem=function(K,Q){if((Q||[]).length)if(Q.some(function(W){return e["default"].includes(W.toLowerCase(),
"cloud")}))K+=" ("+P["default"].AddDatastoreDlg.cloud+")";else if(-1!==Q.indexOf("egdb"))K+=" ("+P["default"].AddDatastoreDlg.database+")";else if(-1!==Q.indexOf("folder"))K+=" ("+P["default"].AddDatastoreDlg.folder+")";else if(-1!==Q.indexOf("fileShare")||-1!==Q.indexOf("hdfs")||-1!==Q.indexOf("hive")||-1!==Q.indexOf("dataStore"))K+=" ("+P["default"].AddDatastoreDlg.bigdata+")";return K};L.downloadImage=function(K){var Q,W;K=K.item;var ba=K.portal,S=new b["default"],X=new z["default"],aa=null===
(Q=ba.helperServices)||void 0===Q?void 0:Q.rasterUtilities;Q=K.portal.getPortalUser()||{};Q=(null===(W=Q.credential)||void 0===W?void 0:W.token)||Q.token;if((null===ba||void 0===ba?0:ba.isPortal)&&(null===aa||void 0===aa?0:aa.url)){W={inputImageLayer:JSON.stringify({itemId:K.id})};var M=aa.url+"/DownloadRaster",da=Q?"?token\x3d"+Q:"";X=(new O["default"](M+da)).submitJob(W,function(ea){var Z,ka="esriJobSucceeded"===(null===ea||void 0===ea?void 0:ea.jobStatus)&&(null===(Z=ea.results)||void 0===Z?void 0:
Z.outputRaster);ea=ea.jobId;S.updateMessage(P["default"].downloadImageDlg.succeeded);return ka&&ea?(S.hide(),f["default"].request({url:M+"/jobs/"+ea+"/results/outputRaster"},{usePost:!0}).then(function(va){var Ea;return null===(Ea=null===va||void 0===va?void 0:va.value)||void 0===Ea?void 0:Ea[0]})):""},function(ea){S.setCancelUrl(aa.url+"/DownloadRaster/jobs/"+ea.jobId+"/cancel"+da)});S.show();S.updateMessage(P["default"].downloadImageDlg.message)}else X.resolve("");return X};L.cancelDownloadImage=
function(K,Q){(new O["default"](K)).cancelJob(Q,null,null)};L.goToPage=function(K,Q){var W=Q.username,ba=Q.orgId,S=f["default"].getUser(),X=null===S||void 0===S?void 0:S.userRole,aa=(null===S||void 0===S?void 0:S.username)===W;W=("groups"===K&&(null===X||void 0===X?0:X.canViewOrgGroups())||"content"===K&&(null===X||void 0===X?0:X.canManageItems())||(null===X||void 0===X?0:X.isAdmin())||aa)&&ba===S.orgId?""+c["default"].baseUrl+K+".html"+(aa?"":"?user\x3d"+W):c["default"].baseUrl+"search.html?q\x3downer:%22"+
W+"%22\x26t\x3d"+K+"\x26restrict\x3dfalse";window.open(W,"_blank")};return L}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["dojo/_base/array"],function(D){function B(c,h){if("esriGeometryMultiPatch"===c.geometryType)return!1;var g=c.drawingInfo.renderer,e=c.drawingInfo.labelingInfo,l=c.featureReduction,r=c.fields;if("heatmap"===g.type||"esriGeometryPolygon"===c.geometryType&&g.uniqueValueInfos&&g.visualVariables&&D.some(g.visualVariables,function(f){if("sizeInfo"===f.type&&!f.target)return!0}))return!1;
var k=D.map(D.filter(r,function(f){return"esriFieldTypeDate"===f.type}),function(f){return f.name});return k.length&&(-1<D.indexOf(k,g.field)||-1<D.indexOf(k,g.field1)||g.visualVariables&&D.some(g.visualVariables,function(f){if(f.field&&-1<D.indexOf(k,f.field))return!0}))||l||!h&&e&&e.length?!1:!0}function a(c,h){var g=c.drawingInfo.renderer,e=c.drawingInfo.labelingInfo,l=c.featureReduction,r=c.fields,k;if(-1===D.indexOf(["esriGeometryPoint","esriGeometryMultiPatch"],c.geometryType)||g.observationRenderer||
g.latestObservationRenderer||"heatmap"===g.type||g.valueExpression&&g.valueExpression.length)return!1;if(g.visualVariables)for(k=0;k<g.visualVariables.length;k++)if(g.visualVariables[k].valueExpression&&g.visualVariables[k].valueExpression.length)return!1;var f=D.map(D.filter(r,function(b){return"esriFieldTypeDate"===b.type}),function(b){return b.name});return f.length&&(-1<D.indexOf(f,g.field)||-1<D.indexOf(f,g.field1)||g.visualVariables&&D.some(g.visualVariables,function(b){if(b.field&&-1<D.indexOf(f,
b.field))return!0}))||l||!h&&e&&e.length?!1:!0}return function(c,h,g){return"Feature Layer"===c.type&&c.drawingInfo?"scene"===g?a(c,h):B(c,h):!1}})},"arcgisonline/pages/dijit/Alert":function(){define("require exports tslib ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/text!./Alert/Alert.html dojo/i18n!../../nls/arcgisonline ../utils/icons dojo/_base/lang".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);
e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);return function(){function b(d,q){this.templateString=l["default"];this.i18n=r["default"];this.icons=k["default"];this.cssClasses="";this.preventAutoDimiss=!1}b.prototype.postMixInProperties=function(){"success"===this.type?(this.modifier="green",this.icon=k["default"]["check-circle"]["32"],this.iconAltText=r["default"].GroupWidget.successIcon):"error"===this.type?(this.modifier="red",
this.icon=k["default"]["exclamation-mark-circle"]["32"],this.iconAltText=r["default"].GroupWidget.errorIcon):"warning"===this.type?(this.modifier="yellow",this.icon=k["default"]["exclamation-mark-triangle"]["32"],this.iconAltText=r["default"].GroupWidget.warningIcon):"info"===this.type&&(this.modifier="info",this.iconAltText=this.icon="")};b.prototype.postCreate=function(){var d=this;this.inherited(arguments);this.listHTML&&(this._listContainer.innerHTML=this.listHTML);this._addEventListeners();"success"!==
this.type||this.preventAutoDimiss||this._setAlertTimer();setTimeout(function(){d.domNode&&d.domNode.classList.add("is-active")},10)};b.prototype._addEventListeners=function(){"success"===this.type&&this.own(e["default"](this.domNode).on("mouseover",f["default"].hitch(this,this._clearAlertTimer)),e["default"](this.domNode).on("mouseout",f["default"].hitch(this,this._setAlertTimer)));this.own(e["default"](".js-alert-close",this.domNode).on("click",f["default"].hitch(this,this._dismiss)))};b.prototype._setAlertTimer=
function(){var d=this;this._timeout||(this._timeout=window.setTimeout(function(){d._dismiss()},4E3))};b.prototype._clearAlertTimer=function(){clearTimeout(this._timeout);this._timeout=null};b.prototype._dismiss=function(d){var q=this;d&&d.preventDefault();this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){q.destroy()},300)};b.prototype.dismiss=function(){var d=this;this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){d.destroy()},300)};return b=
a.__decorate([c["default"](h["default"],g["default"])],b)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);B["default"]=function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return function(e){return c["default"](h,e.prototype)}}})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],
function(D,B,a,c){function h(r){var k,f,b=r.paths,d=r.size,q=r.direction,m=r.rtl,n=r.title,t=r.titleId;r=r.inline?"icon-inline--on-"+(null!==q&&void 0!==q?q:"left"):"";q=null!==(f=null===(k=c["default"].locale)||void 0===k?void 0:k.split("-")[0])&&void 0!==f?f:"en";k="icon-inline "+r+" "+(!0===m||m===q?"icon-inline--flip-rtl":"");b=Array.isArray(b)?g(b):'\x3cpath d\x3d"'+b+'"/\x3e';f=n&&t;return'\x3csvg viewBox\x3d"0 0 '+d+" "+d+'" width\x3d"'+d+'" height\x3d"'+d+'" class\x3d"'+k+'" '+(f?'aria-labelledby\x3d"'+
t+'"':'role\x3d"none" focusable\x3d"false" aria-hidden\x3d"true"')+"\x3e\n    "+(f?'\x3ctitle id\x3d"'+t+'" \x3e'+n+"\x3c/title\x3e":"")+"\n    "+b+"\n  \x3c/svg\x3e"}function g(r){return r.reduce(function(k,f){return k+" \x3cpath "+(f.opacity?'opacity\x3d"'+f.opacity+'" ':"")+' d\x3d"'+f.d+'" /\x3e'},"")}c=a.__importDefault(c);var e={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{16:"M6 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 5H2V2h4zm4 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4V2h4zm-4 9h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4v-4h4zM6 9H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm0 5H2v-4h4z",24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},"caret-down":{16:"M13.1 6L8 11.1 2.9 6z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},group:{16:"M7.5 5h2a1.497 1.497 0 0 1 1.486 1.359 3.452 3.452 0 0 1 .969-.304 2.498 2.498 0 0 0-1.6-1.895 2.5 2.5 0 1 0-3.71 0 2.498 2.498 0 0 0-1.6 1.895 3.452 3.452 0 0 1 .97.304A1.497 1.497 0 0 1 7.5 5zm1-4A1.5 1.5 0 1 1 7 2.5 1.502 1.502 0 0 1 8.5 1zm5.855 10.16a2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 9 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34zM12.5 8A1.5 1.5 0 1 1 11 9.5 1.502 1.502 0 0 1 12.5 8zm2.5 7h-5v-1.5a1.517 1.517 0 0 1 1.5-1.5h2a1.517 1.517 0 0 1 1.5 1.5zM1 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34 2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 1 13.5zM7 15H2v-1.5A1.517 1.517 0 0 1 3.5 12h2A1.517 1.517 0 0 1 7 13.5zM4.5 8A1.5 1.5 0 1 1 3 9.5 1.502 1.502 0 0 1 4.5 8z",
32:"M16 9a4 4 0 1 0-4-4 4.005 4.005 0 0 0 4 4zm0-7a3 3 0 1 1-3 3 3.003 3.003 0 0 1 3-3zm3.101 16a4.944 4.944 0 0 0 .323 1h-6.848a4.944 4.944 0 0 0 .323-1zm-8.588-5.297a4.945 4.945 0 0 0-.908-.415A4.485 4.485 0 0 1 13.5 10h5a4.485 4.485 0 0 1 3.895 2.288 4.945 4.945 0 0 0-.908.415A3.49 3.49 0 0 0 18.5 11h-5a3.49 3.49 0 0 0-2.987 1.703zM12 17a4 4 0 1 0-4 4 4.005 4.005 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm-7 6.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5h-5A4.505 4.505 0 0 0 1 26.5zm9.5-3.5a3.504 3.504 0 0 1 3.5 3.5V30H2v-3.5A3.504 3.504 0 0 1 5.5 23zM24 13a4 4 0 1 0 4 4 4.005 4.005 0 0 0-4-4zm0 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm2.5 2h-5a4.505 4.505 0 0 0-4.5 4.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5zm3.5 8H18v-3.5a3.504 3.504 0 0 1 3.5-3.5h5a3.504 3.504 0 0 1 3.5 3.5z"},
home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},
imagePlus:{16:"M7 14v1H0V1h16v9h-1V2H1v8.2l1.4-1.4a.377.377 0 0 1 .533 0 .377.377 0 0 0 .534 0l2.69-2.69a.377.377 0 0 1 .508-.023L9.37 8.343a.377.377 0 0 0 .468.012L10 8.234v1.133a1.326 1.326 0 0 1-1.269-.256L6.461 7.22 4.173 9.509a1.37 1.37 0 0 1-.973.402 1.387 1.387 0 0 1-.429-.068L1 11.614V14zm4.5-9.5a1 1 0 1 0-1 1 1 1 0 0 0 1-1zM13 16v-3h3v-1h-3V9h-1v3H9v1h3v3z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z",24:"M22 4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1h-2zm-8 18v-5h-4v5H3V5h3V3h5v2h10v17zM5 11h4V7H5zm1-3h2v2H6zm4 3h4V7h-4zm1-3h2v2h-2zm4 3h4V7h-4zm1-3h2v2h-2zM5 16h4v-4H5zm1-3h2v2H6zm4 3h4v-4h-4zm1-3h2v2h-2zm4 3h4v-4h-4zm1-3h2v2h-2z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},
pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},
plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",
24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",
24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",
32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},users:{16:"M6.5 7a3.49 3.49 0 0 1 .663.067A3.97 3.97 0 0 0 7.8 8.375 2.475 2.475 0 0 0 6.5 8h-3A2.503 2.503 0 0 0 1 10.5V12h4.068a4.642 4.642 0 0 0-.218 1H0v-2.5A3.504 3.504 0 0 1 3.5 7zm1.456-3.564a3.969 3.969 0 0 0-.857 1.702A2.996 2.996 0 1 1 8 3a2.964 2.964 0 0 1-.044.436zM7 3a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm5.5 7a3.504 3.504 0 0 1 3.5 3.5V16H6v-2.5A3.504 3.504 0 0 1 9.5 10zm-3 1A2.503 2.503 0 0 0 7 13.5V15h8v-1.5a2.503 2.503 0 0 0-2.5-2.5zM8 6a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2z",
24:"M7.5 9A3.5 3.5 0 1 0 4 5.5 3.504 3.504 0 0 0 7.5 9zm0-6A2.5 2.5 0 1 1 5 5.5 2.503 2.503 0 0 1 7.5 3zm2.713 14a5.456 5.456 0 0 0-.188 1H2v-3.5A4.505 4.505 0 0 1 6.5 10h2a4.503 4.503 0 0 1 4.414 3.649 5.518 5.518 0 0 0-.936.632A3.495 3.495 0 0 0 8.5 11h-2A3.504 3.504 0 0 0 3 14.5V17zm6.287-4A3.5 3.5 0 1 0 13 9.5a3.504 3.504 0 0 0 3.5 3.5zm0-6A2.5 2.5 0 1 1 14 9.5 2.503 2.503 0 0 1 16.5 7zM22 18.5a4.505 4.505 0 0 0-4.5-4.5h-2a4.505 4.505 0 0 0-4.5 4.5V22h11zM21 21h-9v-2.5a3.504 3.504 0 0 1 3.5-3.5h2a3.504 3.504 0 0 1 3.5 3.5z",
32:"M10.5 11A4.5 4.5 0 1 0 6 6.5a4.505 4.505 0 0 0 4.5 4.5zm0-8A3.5 3.5 0 1 1 7 6.5 3.504 3.504 0 0 1 10.5 3zm1.166 19a6.98 6.98 0 0 0-.14 1H2v-5.5A5.506 5.506 0 0 1 7.5 12h6a5.464 5.464 0 0 1 2.65.683 5.985 5.985 0 0 0-.138 1.085A4.474 4.474 0 0 0 13.5 13h-6A4.505 4.505 0 0 0 3 17.5V22zm9.834-4a4.5 4.5 0 1 0-4.5-4.5 4.505 4.505 0 0 0 4.5 4.5zm0-8a3.5 3.5 0 1 1-3.5 3.5 3.504 3.504 0 0 1 3.5-3.5zm3 9h-6a5.506 5.506 0 0 0-5.5 5.5V30h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM29 29H14v-4.5a4.505 4.505 0 0 1 4.5-4.5h6a4.505 4.505 0 0 1 4.5 4.5z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},l={inline:{},"inline-end":{},getIconWithTitle:function(r,k,f,b){r=e[r];return h({paths:r[k],size:k,rtl:r.rtl,title:f,titleId:b})}};Object.keys(e).forEach(function(r){Object.keys(e[r]).filter(function(k){return"rtl"!==k}).forEach(function(k){var f,b,d,q=e[r],m=q.rtl;l[r]=null!==(f=l[r])&&void 0!==f?f:{};l.inline[r]=
null!==(b=l.inline[r])&&void 0!==b?b:{};l["inline-end"][r]=null!==(d=l["inline-end"][r])&&void 0!==d?d:{};l[r][k]=h({paths:q[k],size:k,rtl:m});l.inline[r][k]=h({paths:q[k],size:k,inline:!0,rtl:m});l["inline-end"][r][k]=h({paths:q[k],size:k,inline:!0,direction:"right",rtl:m})})});return l})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.includes=function(c,h){return-1<(null===c||void 0===c?void 0:c.indexOf(h))};a.find=function(c,
h){if(null===c||void 0===c?0:c.length)for(var g=void 0,e=0;e<c.length;e++)if(g=c[e],h(g,e))return g};a.findIndex=function(c,h){if(null===c||void 0===c?0:c.length)for(var g=0;g<c.length;g++)if(h(c[g],g))return g;return-1};a.toArray=function(c){return Object.keys(c).map(function(h){return c[h]})};a.includesSome=function(c,h){return c&&(null===h||void 0===h?void 0:h.some(function(g){return-1<c.indexOf(g)}))};a.includesAll=function(c,h){return c&&(null===h||void 0===h?void 0:h.every(function(g){return-1<
c.indexOf(g)}))};a.filterOut=function(c,h){var g;return null!==(g=h&&(null===c||void 0===c?void 0:c.filter(function(e){return-1===h.indexOf(e)})))&&void 0!==g?g:[]};a.concatUnique=function(c,h){var g=[].concat(null!==c&&void 0!==c?c:[]);h&&h.forEach(function(e){e&&-1===g.indexOf(e)&&g.push(e)});return g};a.from=function(c){if(Array.from)return Array.from(c);for(var h=[],g=0;g<c.length;g++)h.push(c[g]);return h};a.batch=function(c,h){void 0===h&&(h=100);return(null!==c&&void 0!==c?c:[]).reduce(function(g,
e,l){0===l%h&&g.push(c.slice(l,l+h));return g},[])};return a}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.isString=function(c){return(null===c||void 0===c?void 0:c.constructor)===String};a.startsWith=function(c,h){return h&&0===(null===c||void 0===c?void 0:c.indexOf(h))};a.endsWith=function(c,h){if(c&&h){var g=c.lastIndexOf(h);return-1<g&&c.length>=h.length&&g===c.length-h.length}return!1};a.includes=function(c,h){return h&&
-1<(null===c||void 0===c?void 0:c.indexOf(h))};a.isSet=function(c){return!!(0<(null===c||void 0===c?void 0:c.length))};a.areEqual=function(c,h){var g=this.isSet(c),e=this.isSet(h);return!g&&!e||g&&e&&c.trim()===h.trim()};a.replaceAll=function(c,h,g){return c.replace(new RegExp(this.escapeRegExp(h),"g"),g)};a.escapeRegExp=function(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};a.escapeQuestionMarks=function(c){return c.replace(/[?\\]/g,"\\$\x26")};a.stringToArray=function(c,h,g){c=c instanceof
Array?c:c.split(h);return g?c.map(function(e){return e.trim()}):c};a.isValidHex=function(c){return/[0-9A-Fa-f]{6}/g.test(c)};a.stringToHex=function(c){for(var h=0,g=0;g<c.length;g++)h=c.charCodeAt(g)+((h<<5)-h);c="#";for(g=0;3>g;g++)c+=("00"+(h>>8*g&255).toString(16)).substr(-2);return c};a.hexToRgb=function(c){c=c.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,g,e,l){return g+g+e+e+l+l});return(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(c[1],16),g:parseInt(c[2],16),
b:parseInt(c[3],16)}:null};a.htmlDecode=function(c){var h=document.createElement("textarea");h.innerHTML=c;return h.value};a.encodeWhitespace=function(c){return c?c.replace(/\s/g,"%20"):""};a.encodeAngleBrackets=function(c){var h;return null!==(h=null===c||void 0===c?void 0:c.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==h?h:""};a.decodeAngleBrackets=function(c){var h;return null!==(h=null===c||void 0===c?void 0:c.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==h?h:""};a.shouldStripHTML=
function(c){var h;if(!c)return!1;c=null!==(h=null===c||void 0===c?void 0:c.split("\x3c"))&&void 0!==h?h:[];return 1<c.length&&c.some(function(g){return-1<g.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};a.stripHTML=function(c){if(!c)return"";var h=document.createElement("div");h.innerHTML=c;return h.textContent};a.addHyperlinks=function(c){return c.replace(/(https?:\/\/[^\s]+)/g,function(h){return'\x3ca href\x3d"'+h+'" target\x3d"_blank"\x3e'+h+"\x3c/a\x3e"})};a.escapeNewlines=function(c){return null===c||void 0===
c?void 0:c.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};a.restoreNewlines=function(c){return null===c||void 0===c?void 0:c.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};a.insertHTMLLineBreaks=function(c){return null===c||void 0===c?void 0:c.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};a.containsHTTPProtocol=function(c){var h;return-1<(null!==(h=null===c||void 0===c?void 0:c.toLowerCase())&&void 0!==h?h:"").indexOf("http://")};return a}()})},"arcgisonline/pages/utils/dom":function(){define(["require",
"exports","tslib","./strings","dojo/dom-style"],function(D,B,a,c,h){c=a.__importDefault(c);h=a.__importDefault(h);return function(){function g(){}g.createElement=function(e,l,r){r||(r=document.createElement("div"),document.body.appendChild(r));var k=document.createElement(e);Object.keys(l||{}).forEach(function(f){k[f]=l[f]});r.appendChild(k);return k};g.addStylesheet=function(e){var l=document.createElement("link");l.rel="stylesheet";l.type="text/css";l.href=e;document.head.appendChild(l)};g.isHidden=
function(e){var l=["none","none !important","none!important"],r=["hidden","hidden !important","hidden!important"],k=""+h["default"].get(e,"visibility"),f=""+h["default"].get(e,"display");return e&&(-1<l.indexOf(f)||-1<r.indexOf(k))};g.hideNode=function(e){null===e||void 0===e?void 0:e.classList.add("hide")};g.hideNodes=function(e){if(e)if(e.forEach)e.forEach(this.hideNode);else for(var l=0;l<e.length;l++)this.hideNode(e[l])};g.showNode=function(e){null===e||void 0===e?void 0:e.classList.remove("hide")};
g.showNodes=function(e){if(e)if(e.forEach)e.forEach(this.showNode);else for(var l=0;l<e.length;l++)this.showNode(e[l])};g.showHide=function(e,l){null===e||void 0===e?void 0:e.classList[l?"remove":"add"]("hide")};g.showHideAll=function(e,l){var r=this;null===e||void 0===e?void 0:e.forEach(function(k){return r.showHide(k,l)})};g.addRemoveClass=function(e,l,r){null===e||void 0===e?void 0:e.classList[r?"add":"remove"](l)};g.addRemoveClassAll=function(e,l,r){var k=this;null===e||void 0===e?void 0:e.forEach(function(f){return k.addRemoveClass(f,
l,r)})};g.setVisibility=function(e,l){null===e||void 0===e?void 0:e.classList[l?"remove":"add"]("visibility-hidden")};g.toggleHide=function(e){null===e||void 0===e?void 0:e.classList.toggle("hide")};g.toggleHideAll=function(e){null===e||void 0===e?void 0:e.forEach(function(l){l.classList.toggle("hide")})};g.activateNode=function(e){null===e||void 0===e?void 0:e.classList.add("is-active")};g.deactivateNode=function(e){null===e||void 0===e?void 0:e.classList.remove("is-active")};g.canBeDisabled=function(e){return e instanceof
HTMLInputElement||e instanceof HTMLButtonElement||e instanceof HTMLFieldSetElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement};g.isDisabled=function(e){var l;return null!==(l=null===e||void 0===e?void 0:e.disabled)&&void 0!==l?l:!1};g.disableNode=function(e,l){e&&(e.disabled=l)};g.disableNodes=function(e,l){var r=this;null===e||void 0===e?void 0:e.forEach(function(k){r.disableNode(k,l)})};g.isNodeVisible=function(e){return 0!==
(null===e||void 0===e?void 0:e.offsetHeight)};g.isChecked=function(e){var l;return null!==(l=null===e||void 0===e?void 0:e.checked)&&void 0!==l?l:!1};g.checkNode=function(e,l){e&&(e.checked=l)};g.selectOption=function(e,l){if(e)for(var r=0;r<e.length;r++){var k=e[r];if(c["default"].areEqual(k.value,l)){k.selected=!0;break}}};g.getSelectedOption=function(e){if(e)for(var l=0;l<e.length;l++){var r=e[l];if(r.selected)return r}return null};g.addClasses=function(e,l){e&&(null===l||void 0===l?0:l.length)&&
l.forEach(function(r){e.classList.add(r)})};g.removeClasses=function(e,l){e&&(null===l||void 0===l?0:l.length)&&l.forEach(function(r){e.classList.remove(r)})};g.setModifierClass=function(e,l,r){var k,f=null===(k=e.className.match(new RegExp("(^| )"+l+"\\S+","g")))||void 0===k?void 0:k[0].replace(/ +/g,"");f&&e.classList.remove(f);e.classList.add(""+l+r)};g.appendChildren=function(e,l){var r=document.createDocumentFragment();null===e||void 0===e?void 0:e.forEach(function(k){r.appendChild(k)});null===
l||void 0===l?void 0:l.appendChild(r)};g.forEachNode=function(e,l,r){for(var k=0;k<e.length;k++)null===l||void 0===l?void 0:l.call(r,e[k],k)};g.nodeListToArray=function(e){return Array.prototype.slice.call(e)};g.querySelectorAllAsArray=function(e,l){return this.nodeListToArray(l.querySelectorAll(e))};return g}()})},"arcgisonline/pages/utils/clone":function(){define(["require","exports"],function(D,B){function a(g){for(var e=Object.keys(g),l=Array(e.length),r=0;r<e.length;++r)l[r]=c(g[r]);return l}
function c(g){return"object"!==typeof g||null===g?g:Array.isArray(g)?a(g):g instanceof Map?new Map(a(Array.from(g))):g instanceof Set?new Set(a(Array.from(g))):ArrayBuffer.isView(g)?new g.constructor(g.buffer.slice(),g.byteOffset,g.length):g instanceof Node&&g.cloneNode?g.cloneNode(!0):h(g)}function h(g){if("object"!==typeof g||null===g)return g;if(g instanceof Date)return new Date(g);if(Array.isArray(g))return a(g);if(g instanceof Map)return new Map(a(Array.from(g)));if(g instanceof Set)return new Set(a(Array.from(g)));
if(g instanceof Node&&g.cloneNode)return g.cloneNode(!0);var e={},l;for(l in g)e[l]=c(g[l]);return e}Object.defineProperty(B,"__esModule",{value:!0});B["default"]=h})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,arcgisonline/pages/utils/mapViewer,arcgisonline/pages/utils/storage,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(D,B,a){D.provide("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");D.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");D.require("dojo.request.xhr");D.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");D.require("arcgisonline.pages.utils.mapViewer");D.require("arcgisonline.pages.utils.storage");D.require("esri.IdentityManager");D.require("esri.libs.sanitizer.Sanitizer");D.require("dojo.sniff");D.require("dojo.has");D.require("dojo.json");
D.require("dojo.cookie");arcgisonline.sharing.util={i18n:D.mixin({},D.i18n.getLocalization("arcgisonline","arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,storageUtil:arcgisonline.pages.utils.storage,mapViewerUtil:arcgisonline.pages.utils.mapViewer,getSocialNetworkBadges:function(c,h){var g={},e=D.create,l=arcgisonline.sharing.util.socialNetworkTitle(c.title),r=unescape(window.location.href);if(!1===c.isOrganization||!0===c.isOrganization)r=arcgisonline.sharing.util.urlToObject(window.location.href).path+
"?id\x3d"+c.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<r.indexOf(esriGeowConfig.self.customBaseUrl)&&(r=r.replace(location.host,esriGeowConfig.self.portalHostname));var k=e("span",{"class":"esriItemLinks"}),f=encodeURI("socialnetwork.html?t\x3d"+l+"\x26n\x3dfb\x26u\x3d"+r),b=esri.i18nBundle.itemLinks.shareFacebook,d=e("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Facebook"),href:f,alt:b,title:b},k);e("span",{"class":"facebookBadge dijitInline"},
d);f=e("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Facebook"),href:f,alt:b,title:b},k);e("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},f);g.facebook=k;k=e("span",{"class":"esriItemLinks"});f=encodeURI("socialnetwork.html?t\x3d"+l+"\x26n\x3dtw\x26u\x3d"+r);b=esri.i18nBundle.itemLinks.shareTwitter;d=e("a",{target:"_blank",onclick:D.partial(this._checkShare,c,"Twitter"),href:f,alt:b,title:b},k);e("span",{"class":"twitterBadge dijitInline"},d);f=e("a",{target:"_blank",onclick:D.partial(this._checkShare,
c,"Twitter"),href:f,alt:b,title:b},k);e("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},f);g.twitter=k;h(g)},socialNetworkTitle:function(c){100<c.length&&(c=c.substring(0,97)+"...");return encodeURIComponent(c.replace(/ /g,"+"))},shortenUrl:function(c,h,g){var e=esriGeowConfig.bitlyUrl,l,r=new D.Deferred;this.request({url:e,content:{longUrl:c,format:"json"}}).then(function(k){(l=k&&k.data&&k.data.url||null)?h?h(l):r.resolve(l):g?g(k,args):r.reject(k,args)},function(k){g?g({},{}):r.reject(k)});
return r},_checkShare:function(c,h,g){h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();g=c&&esri.isDefined(c.isInvitationOnly);c.access&&"public"!==c.access&&h.show({title:esri.i18nBundle.itemLinks[g?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[g?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){esriGeowConfig.userInfo=esriGeowConfig.userInfo||""},isLoggedIn:function(){return null==
this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;esriGeowConfig.isSilverlightInstalled=!1;if(D.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(c){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&
-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var c="";-1==esriGeowConfig.signin.indexOf("http")&&(c=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(c=arcgisonline.sharing.util.getSecureUrl(c)));c+=esriGeowConfig.signin;window.location!==c&&(c+="?returnUrl\x3d"+escape(window.location));window.location=c+"\x26error\x3d403";return!1},htmlHasText:function(c){if(c&&0<c.length){c=D.trim(c);for(var h=!1,g=0;g<c.length;g++){var e=
c.charAt(g);if("\x3c"==e)h=!0;else if("\x3e"==e)h=!1;else if(!h&&""!==e)return!0}}return!1},endsWith:function(c,h){return null==c||null==h?!1:c.toLowerCase().lastIndexOf(h.toLowerCase())==c.length-h.length},toFullDateString:function(c){c=new Date(parseFloat(c));return D.date.locale.format(c,{selector:"date",formatLength:"long"})},toDateTimeString:function(c){c=new Date(parseFloat(c));return D.date.locale.format(c,{formatLength:"medium"})},capitalize:function(c){return c.charAt(0).toUpperCase()+c.substr(1).toLowerCase()},
getItemDetailsLinkInfo:function(c){var h=null,g=null,e=null;esri.isDefined(c.isInvitationOnly)?(h=esriGeowConfig.baseUrl+"group.html?owner\x3d"+c.owner+"\x26title\x3d"+encodeURIComponent(c.title),g=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewGroupDetails):(h=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails);return null!==h&&null!==g?{link:h,label:g,tip:e}:null},_isOperationsViewSupportedBrowser:function(c){var h=
navigator.userAgent.toLowerCase(),g=/Chrome\/[.0-9]* (?!Mobile)/i,e=/Chrome\/[.0-9]* Mobile/i;e=D.has("iphone")||D.has("ipod")||D.has("android")&&e.test(h)||-1<h.indexOf("android")&&-1<h.indexOf("mobile")||-1<h.indexOf("windows phone")||D.has("bb");c&&(e=e||h.match(/ipad/i)||D.has("android")&&g.test(h));return e?!1:void 0!==D.has("chrome")?(c=D.has("chrome"),!isNaN(c)&&19<=c):void 0!==D.has("ff")?4<=D.has("ff"):h.match(/fxios/i)?(c=parseFloat(h.split("fxios/")[1]),!isNaN(c)&&1<=c):void 0!==D.has("ie")?
9<=D.has("ie"):void 0!==D.has("edge")?1<=D.has("edge"):void 0!==D.has("trident")?5<=D.has("trident"):void 0!==D.has("safari")?(c=parseFloat(h.split("version/")[1]),h=parseFloat(h.split("crios/")[1]),isNaN(c)&&isNaN(h)||!isNaN(c)&&5.1>c||!isNaN(h)&&31>h?!1:!0):!1},_isPremiumService:function(c){return c.owner&&-1<c.owner.toLowerCase().indexOf("esri")&&(-1<D.indexOf(c.typeKeywords,"Requires Subscription")||-1<D.indexOf(c.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(c){var h=c.type?
c.type:"",g="",e="",l="",r=null;e=this.getUser();g=!1;g=null;esriGeowConfig.portalHostname&&(g=esriGeowConfig.portalHostname);g&&(l=g.split("."),1<l.length&&(g=l[l.length-2]+"."+l[l.length-1]));if("Web Map"==h)g=!e&&this._isPremiumService(c),e='JavaScript:arcgisonline.map.mapUtil.openMap("'+c.id+'",'+g+")",l=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),g=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===h)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPage",g),l=esri.i18nBundle.itemLinks.viewApp,g=esri.i18nBundle.itemLinks.open;else if("Web Scene"===h&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+c.id,e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPage",g,!0),l=esri.i18nBundle.itemLinks.openSceneViewer,
g=esri.i18nBundle.itemLinks.open;else if("Scene Service"===h&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,g,!0),l=esri.i18nBundle.itemLinks.addToSceneViewer,g=esri.i18nBundle.itemLinks.open;else if("Operation View"===h){g=window.location;h=arcgisonline.sharing.util.isPortal();e=g.protocol+
"//"+(h?esriGeowConfig.self.portalHostname:g.host);g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+c.id;l=-1<D.indexOf(c.typeKeywords,"TabletLayout");D.indexOf(c.typeKeywords,"DesktopLayout");var k=-1<D.indexOf(c.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!k?r=D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,e+(h?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id):
!k&&l&&this._isOperationsViewSupportedBrowser()&&(r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,g,!1));e="JavaScript:void(0)";l=esri.i18nBundle.itemLinks.openOperationViewDesktop;g=esri.i18nBundle.itemLinks.open}else"Map Service"==h||"Feature Service"==h||"Image Service"==h||"KML"==h||"Feature Collection"==h||"Stream Service"==h||"Vector Tile Service"===h?(l=c&&c.extraUrlParams?!0:!1,g=!e&&this._isPremiumService(c),e='JavaScript:arcgisonline.map.mapUtil.addToMap("'+c.id+'",'+g+","+l+
")",g=esri.i18nBundle.itemLinks.open,l=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===h&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer")&&(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,l=esri.i18nBundle.itemLinks.addToSceneViewer,g=esri.i18nBundle.itemLinks.open)):"WMS"==h||"WFS"===h||"WMTS"===
h?(e=c.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+c.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+c.id+'")',g=esri.i18nBundle.itemLinks.open,l=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==h?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url+"?f\x3dlyr\x26v\x3d9.3"),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):
this.couldHaveArcGISDesktop()&&("Map Package"==h||"Basemap Package"===h||"Mobile Map Package"==h||"Mobile Basemap Package"===h||"Layer Package"==h||"Pro Map"==h||"Layout"==h||-1<D.indexOf(c.typeKeywords,"lyrx"))?c&&c.name.indexOf(".mmpk")&&c.name.indexOf(".bpk")&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&-1===c.name.indexOf(".mapx")&&-1===c.name.indexOf(".pagx")?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,
this.getItemPkgPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=h&&"Geoprocessing Service"!=h&&"Locator Package"!=h&&"Tile Package"!=h&&"Vector Tile Package"!=h&&"Scene Package"!==h?!this.couldHaveArcGISDesktop()||"Map Document"!=h&&"Published Map"!=
h&&"Globe Document"!=h&&"Scene Document"!=h&&"Layer"!=h?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=h&&"ArcGIS Pro Add In"!==h?!this.isSilverlightInstalled()||"Explorer Map"!=h&&"Explorer Layer"!=h&&"Explorer Add In"!=h?"File Geodatabase"===h||"CSV Collection"===h||"KML Collection"===h||"Rule Package"===h||"GeoJson"===h||"Shapefile"===h||"CSV"===h||"Map Template"===h||"Code Sample"===h||"Geoprocessing Sample"===h||"Service Definition"===h||"Workflow Manager Package"===h||"Windows Viewer Add-in"===
h||"ArcPad Package"===h||"Operations Dashboard Addin"===h||"CAD Drawing"===h||"Microsoft Word"===h||"Raster function template"===h||"Microsoft PowerPoint"===h||"Microsoft Powerpoint"===h||"Microsoft Excel"===h||"iWork Pages"===h||"iWork Keynote"===h||"iWork Numbers"===h||"Image"===h||"Visio Document"===h||"PDF"===h||"Desktop Application"===h||"Task File"===h||"Project Package"===h||"ArcGIS Pro Configuration"===h||"Project Template"===h||"Desktop Style"===h||"Native Application Installer"===h||"360 VR Experience"==
h?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"!=h&&"Application"!=h&&"Native Application"!==h&&"Native Application Template"!==h&&"Hub Initiative"!==h&&"Hub Page"!==h&&"Hub Site Application"!==h||-1!==D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==h?-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl")&&c.url&&0<
c.url.length?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),l=esri.i18nBundle.itemLinks.viewApp,g=esri.i18nBundle.itemLinks.open):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==h?c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||g&&-1<c.url.indexOf(g))&&(c.originalUrl=c.originalUrl||
D.clone(c.url),c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.getApp):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==h?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,
l=esri.i18nBundle.itemLinks.download):"Document Link"===h?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),g=l=esri.i18nBundle.itemLinks.open):"Form"===h&&e&&e.accountId?(e="arcgis-survey123://?itemId\x3d"+c.id+"\x26username\x3d"+e.username,l=esri.i18nBundle.itemLinks.openInSurvey123,g=esri.i18nBundle.itemLinks.open):"Workforce Project"===h?(e=(h=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
e=window.location.protocol+"//"+e+((h?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),l=esri.i18nBundle.itemLinks.openWorkforce,g=esri.i18nBundle.itemLinks.open):"Insights Workbook"===h||"Insights Page"===h||"Insights Model"===h?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",e="Insights Model"===h?e+("?model\x3d"+c.id):"Insights Page"===h?e+("view/"+c.id):e+c.id,l=esri.i18nBundle.itemLinks.openInsights,g=
esri.i18nBundle.itemLinks.open):"Dashboard"===h?(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+c.id,e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,r),l=esri.i18nBundle.itemLinks.dashboardView,g=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails):(h=arcgisonline.sharing.util.isHostedTemplateItem(c.url),
c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||g&&-1<c.url.indexOf(g))&&-1===c.url.indexOf(".opendata")&&(c.originalUrl=c.originalUrl||D.clone(c.url),c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),c.access&&"public"!==c.access&&h&&!arcgisonline.sharing.util.isPortal()&&(r=arcgisonline.sharing.util.parseUrl(c.url),c.url=c.url.replace(r.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(r=
esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===c.url.indexOf(r)&&(c.url=r+c.url)),e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),l=esri.i18nBundle.itemLinks.viewApp,g=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails)):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),
g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openExplorer):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),g=esri.i18nBundle.itemLinks.open,
l="Task File"!==h?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:g,href:e,target:"",tip:l,onclick:r}},getMapViewerLink:function(c){return c===this.mapViewerUtil.MapViewerType.Classic?esriGeowConfig.baseUrl+"webmap/viewer.html":esriGeowConfig.newMapViewerUrl},getHomePageGalleryLinkInfo:function(c){var h=c.type?c.type:"",g="",e="",l="",r=null;g=this.getUser();e=!1;l=this.mapViewerUtil.determineMapViewerSetting();e=null;esriGeowConfig.portalHostname&&(e=
esriGeowConfig.portalHostname);if(e){var k=e.split(".");1<k.length&&(e=k[k.length-2]+"."+k[k.length-1])}if("Web Map"==h)l=this.getMapViewerLink(l)+"?webmap\x3d"+c.id,k=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(l),e=(e=!g&&this._isPremiumService(c))?k:l,l=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),g=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===h)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,l=esri.i18nBundle.itemLinks.viewApp,g=esri.i18nBundle.itemLinks.open;else if("Web Scene"===h&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+c.id,l=esri.i18nBundle.itemLinks.openSceneViewer,g=esri.i18nBundle.itemLinks.open;else if("Scene Service"===h&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,l=esri.i18nBundle.itemLinks.addToSceneViewer,g=esri.i18nBundle.itemLinks.open;else if("Operation View"===h){e=window.location;h=arcgisonline.sharing.util.isPortal();g=-1<D.indexOf(c.typeKeywords,"V2");e=e.protocol+"//"+(h?esriGeowConfig.self.portalHostname:e.host);l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+c.id;k=this.couldHaveArcGISDesktop();
if(g)return null;if(k)e=e+(h?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id;else if(this._isOperationsViewSupportedBrowser())e=l;else return null;l=esri.i18nBundle.itemLinks.openOperationViewDesktop;g=esri.i18nBundle.itemLinks.open}else if("Map Service"==h||"Feature Service"==h||"Image Service"==h||"KML"==h||"Stream Service"==h||"Vector Tile Service"===h||"Feature Collection"==h){l=this.getMapViewerLink(l)+"?layers\x3d"+c.id;if("KML"==h||"Stream Service"==
h||"Feature Collection"==h)l=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+c.id;k=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(l);e=(e=!g&&this._isPremiumService(c))?k:l;g=esri.i18nBundle.itemLinks.open;l=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer);esriGeowConfig.sceneViewerEnabled&&"Image Service"===h&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer")&&(e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,l=esri.i18nBundle.itemLinks.addToSceneViewer,g=esri.i18nBundle.itemLinks.open)}else"WMS"==h||"WFS"===h||"WMTS"===h?(e=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+c.id,g=esri.i18nBundle.itemLinks.open,l=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==h?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,
"openPageAndCount",c.id,c.url+"?f\x3dlyr\x26v\x3d9.3"),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==h||"Mobile Map Package"==h||"Basemap Package"===h||"Mobile Basemap Package"===h||"Layer Package"==h||"Pro Map"==h||"Layout"==h||-1<D.indexOf(c.typeKeywords,"lyrx"))?c&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".mmpk")&&-1===c.name.indexOf(".bpk")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&
-1===c.name.indexOf(".mapx")&&-1===c.name.indexOf(".pagx")?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=h&&"Locator Package"!=h&&"Tile Package"!=h&&"Vector Tile Package"!=h?
!this.couldHaveArcGISDesktop()||"Map Document"!=h&&"Published Map"!=h&&"Globe Document"!=h&&"Scene Document"!=h&&"Layer"!=h?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=h&&"ArcGIS Pro Add In"!==h?!this.isSilverlightInstalled()||"Explorer Map"!=h&&"Explorer Layer"!=h&&"Explorer Add In"!=h?"File Geodatabase"===h||"CSV Collection"===h||"KML Collection"===h||"Rule Package"===h||"GeoJson"===h||"Shapefile"===h||"CSV"===h||"Map Template"===h||"Code Sample"===h||"Geoprocessing Sample"===h||"Service Definition"===
h||"Workflow Manager Package"===h||"Windows Viewer Add-in"===h||"ArcPad Package"===h||"Operations Dashboard Addin"===h||"Microsoft Word"===h||"CAD Drawing"===h||"Raster function template"===h||"Microsoft PowerPoint"===h||"Microsoft Powerpoint"===h||"Microsoft Excel"===h||"iWork Pages"===h||"iWork Keynote"===h||"iWork Numbers"===h||"Image"===h||"Visio Document"===h||"PDF"===h||"Desktop Application"===h||"Task File"===h||"Project Package"===h||"ArcGIS Pro Configuration"===h||"Project Template"===h||
"Desktop Style"===h||"Native Application Installer"===h||"360 VR Experience"==h?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==h?-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl")&&c.url&&0<c.url.length?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),g=l=esri.i18nBundle.itemLinks.open):(e="JavaScript:void(0)",
r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==h&&-1===D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===h||"Hub Page"===h||"Hub Site Application"===h?(h=arcgisonline.sharing.util.isHostedTemplateItem(c.url),c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||e&&-1<c.url.indexOf(e))&&-1===c.url.indexOf(".opendata")&&(c.url=
esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),c.access&&"public"!==c.access&&h&&!arcgisonline.sharing.util.isPortal()&&(r=arcgisonline.sharing.util.parseUrl(c.url),c.url=c.url.replace(r.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(r=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===c.url.indexOf(r)&&(c.url=r+c.url)),e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",
c.id,c.url),l=esri.i18nBundle.itemLinks.viewApp,g=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==h?c.url&&0<c.url.length?(esriGeowConfig.urlKey&&(-1<c.url.indexOf(esriGeowConfig.urlKey)||e&&-1<c.url.indexOf(e))&&(c.url=esriGeowConfig.allSSL?c.url.replace("http:","https:"):c.url),e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),
g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.getApp):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==h?(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.download):"Document Link"===h?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),g=l=esri.i18nBundle.itemLinks.open):
"Form"===h&&(!g||g&&g.accountId)?(e=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+c.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),l=esri.i18nBundle.itemLinks.openSurvey123,g=esri.i18nBundle.itemLinks.open):"Workforce Project"===h?(g=(h=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
e=window.location.protocol+"//"+g+((h?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),l=esri.i18nBundle.itemLinks.openWorkforce,g=esri.i18nBundle.itemLinks.open):"Insights Workbook"===h||"Insights Page"===h||"Insights Model"===h?(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",e=g="Insights Model"===h?g+("?model\x3d"+c.id):"Insights Page"===h?g+("view/"+c.id):g+c.id,l=esri.i18nBundle.itemLinks.openInsights,
g=esri.i18nBundle.itemLinks.open):"Dashboard"===h?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+c.id,l=esri.i18nBundle.itemLinks.dashboardView,g=esri.i18nBundle.itemLinks.open):"StoryMap"===h?(e="JavaScript:void(0)",r=D.hitch(arcgisonline.sharing.util,"openPageAndCount",c.id,c.url),g=l=esri.i18nBundle.itemLinks.open):"Web Experience"===h&&c.webExperienceUrl?(e=c.webExperienceUrl,g=l=esri.i18nBundle.itemLinks.open):
(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+c.id,g=esri.i18nBundle.itemLinks.details,l=esri.i18nBundle.itemLinks.viewDetails):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openExplorer,l=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):
(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c)),g=esri.i18nBundle.itemLinks.open,l=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",r=D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c)),g=esri.i18nBundle.itemLinks.open,l="Task File"!==h?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:g,href:e,target:"",tip:l,onclick:r}},getItemOpenLinkObjects:function(c,h){var g=this.isSilverlightInstalled(),e=[],l=
c.type?c.type:"",r=this.getUser(),k=!1;if("Web Map"==l&&-1==D.indexOf(c.typeKeywords,"ArcGIS Online")&&g&&esriGeowConfig.explorerOnline)e.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,c.id,k)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))});else if("Web Map"==l)k=!r&&this._isPremiumService(c),e.push({label:esri.substitute({appTitle:""},
esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,c.id,k)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/presentation/index.html?webmap\x3d"+c.id,-1<D.indexOf(c.typeKeywords,"Presentation Map")?(e.push({label:esri.i18nBundle.aboutPanel.viewPresentation,
onClick:D.partial(arcgisonline.sharing.util.openPage,l)}),h&&e.push({label:esri.i18nBundle.aboutPanel.editPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,l+"\x26builder",!0)})):h&&e.push({label:esri.i18nBundle.aboutPanel.createPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,l+"\x26builder",!0)});else if("Map Service"==l||"Vector Tile Service"===l)k=!r&&this._isPremiumService(c),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),
onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id,k)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,c.id,k)}),esriGeowConfig.sceneViewerEnabled&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),"Vector Tile Service"!==l?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(c)&&(-1<D.indexOf(c.typeKeywords,"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(c.url)||arcgisonline.sharing.util.isPortal()&&
arcgisonline.sharing.util.onFederatedServer(c.url)?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):c.url&&-1!==c.url.indexOf(".arcgis.com/")&&-1!==c.url.indexOf("//landscape")?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")})),
this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(c)&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))})):(l=c.access&&"public"!==c.access&&r&&r.token?"\x26token\x3d"+r.token:"",r=(c&&c.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+c.id:c.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(c.hasResources)&&(h&&c&&c.hasResources&&e.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,
r+"\x26download\x3dtrue"+l,!0)}),(h&&c&&c.hasResources||c.url&&-1<c.url.indexOf("/VectorTileServer"))&&e.push({label:esri.i18nBundle.itemLinks.viewStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,r+l,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==l)e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==l||"Feature Service"==l||"KML"==l||"Feature Collection"==
l||"Stream Service"==l){g=c&&c.extraUrlParams?!0:!1;k=!r&&this._isPremiumService(c);if("Image Service"!==l||"Image Service"===l&&-1===D.indexOf(c.typeKeywords,"Elevation 3D Layer"))e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id,k,g)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,
c.id,k,g)});if("KML"==l)this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Image Service"===l||"Feature Service"===l)esriGeowConfig.sceneViewerEnabled&&-1===D.indexOf(c.typeKeywords,"Table")&&("Feature Service"===l&&-1===D.indexOf(c.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===
l&&-1<D.indexOf(c.typeKeywords,"Elevation 3D Layer"))&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===l&&(c.url&&-1!==c.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(c.url)||
arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(c.url)?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))}):e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===l&&this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,
"_fetchItemData",c,this.getPItemPath(c))})}else if("Geoprocessing Service"===l&&this.couldHaveArcGISDesktop())e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))});else if("WMS"==l||"WFS"===l||"WMTS"===l)c.noWebMercator?e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnGCSMap,c.id)}):(e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,c.id)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,c.id)})),esriGeowConfig.sceneViewerEnabled&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,!0)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getPItemPath(c))});else if("File Geodatabase"===l||"CSV Collection"===l||"KML Collection"===l||"Rule Package"==l||"CSV"==l||"GeoJson"===l||"Shapefile"==l||"Service Definition"==l||"ArcPad Package"===l||"Operations Dashboard Addin"===l)e.push({label:esri.i18nBundle.itemLinks.download,
onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Map Package"==l||"Mobile Map Package"===l||"Basemap Package"===l||"Mobile Basemap Package"===l||"Layer Package"==l||"Pro Map"==l||"Layout"==l||-1<D.indexOf(c.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&c&&-1===c.name.indexOf(".bpkx")&&-1===c.name.indexOf(".mmpk")&&-1===c.name.indexOf(".bpk")&&-1===c.name.indexOf(".lpkx")&&-1===c.name.indexOf(".mpkx")&&-1===c.name.indexOf(".lyrx")&&-1===c.name.indexOf(".mapx")&&-1===
c.name.indexOf(".pagx")&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Geoprocessing Package"==l||"Locator Package"==l||"Tile Package"==l||"Vector Tile Package"==l||"Project Package"===l||"Project Template"===l)this.couldHaveArcGISDesktop()&&"Task File"!==l&&"Project Package"!==l&&"Project Template"!==l&&
e.push({label:"Task File"!==l?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:D.hitch(this,"_fetchItemData",c,this.getItemPkgPath(c))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Scene Package"==l)e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=l&&"Published Map"!=
l&&"Globe Document"!=l&&"Scene Document"!=l&&"Layer"!=l)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=l&&"ArcGIS Pro Add In"!==l)if("Explorer Layer"==l||"Explorer Add In"==l||"Explorer Map"==l)e.push({label:esri.i18nBundle.itemLinks.openExplorer,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Map Template"===l||"Code Sample"===l||"Geoprocessing Sample"===l||"Workflow Manager Package"===l||"Windows Viewer Add In"===l||"Microsoft Word"===l||"CAD Drawing"===l||"Raster function template"===
l||"Microsoft PowerPoint"===l||"Microsoft Powerpoint"===l||"Microsoft Excel"===l||"iWork Pages"===l||"iWork Keynote"===l||"iWork Numbers"===l||"Image"===l||"Visio Document"===l||"PDF"===l||"Desktop Application"===l||"Task File"===l||"Desktop Style"===l||"Native Application Installer"===l||"360 VR Experience"==l||"ArcGIS Pro Configuration"===l)e.push({label:"PDF"!==l?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});
else if("Desktop Application Template"===l)(l=-1<D.indexOf(c.typeKeywords,"desktopApplicationTemplateUrl"))&&c.url&&c.url.length&&(l=!0,e.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url)})),l||e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Web Mapping Application"==l&&-1===D.indexOf(c.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==l||"Application"==
l||"Native Application"===l||"Native Application Template"===l||"Hub Initiative"===l||"Hub Page"===l||"Hub Site Application"===l)arcgisonline.sharing.util.isHostedTemplateItem(c.url),r=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==l&&(r=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&c.url&&0===c.url.indexOf("/")&&(l=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===c.url.indexOf(l)&&(c.url=l+c.url)),c.url&&0<c.url.length&&
e.push({label:r,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url)}),-1<D.indexOf(c.typeKeywords,"Web AppBuilder")&&h&&(l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/webappbuilder/index.html?id\x3d"+c.id,l="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(l):arcgisonline.sharing.util.getHttpUrl(l),e.push({label:esri.i18nBundle.itemLinks.editApp,onClick:D.partial(arcgisonline.sharing.util.openPage,
l,!0)}));else if("Windows Mobile Package"==l)e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("CityEngine Web Scene"==l)l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+c.id,e.push({label:esri.i18nBundle.itemLinks.viewApp,onClick:D.partial(arcgisonline.sharing.util.openPage,l)}),e.push({label:esri.i18nBundle.itemLinks.download,
onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else if("Web Scene"===l&&esriGeowConfig.sceneViewerEnabled)l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+c.id,e.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPage,l,!0)});else if("Scene Service"===l&&esriGeowConfig.sceneViewerEnabled)l=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+c.id,e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,l,!0)});else if("Operation View"===l){l=window.location;r=arcgisonline.sharing.util.isPortal();k=l.protocol+"//"+(r?esriGeowConfig.self.portalHostname:l.host);g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+
c.id;var f=-1<D.indexOf(c.typeKeywords,"TabletLayout");D.indexOf(c.typeKeywords,"DesktopLayout");var b=-1<D.indexOf(c.typeKeywords,"V2"),d=this.couldHaveArcGISDesktop();l=this._isOperationsViewSupportedBrowser();d&&!b&&e.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,onClick:D.partial(arcgisonline.sharing.util.openPage,k+(r?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+c.id)});!b&&f&&l&&e.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,
onClick:D.partial(arcgisonline.sharing.util.openPage,g,!1)})}else"Document Link"===l?e.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,c.id,c.url)}):"Form"===l&&r&&r.accountId?e.push({label:esri.i18nBundle.itemLinks.openSurvey123,onClick:D.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+c.id+"\x26username\x3d"+r.username,!0)}):"Workforce Project"===l?(l=(r=arcgisonline.sharing.util.isPortal())?window.location.host+
arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",e.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:D.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+l+((r?"/apps/workforce/#":"")+("/projects/"+c.id+"/dispatch/assignments")),!0)})):"Insights Workbook"===l||"Insights Page"===l||"Insights Model"===l?(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",r="Insights Model"===l?r+("?model\x3d"+
c.id):"Insights Page"===l?r+("view/"+c.id):r+c.id,e.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:D.partial(arcgisonline.sharing.util.openPage,r,!0)})):"Dashboard"===l&&(r=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/",l=this._isOperationsViewSupportedBrowser(!0),r+=c.id,k=r+"?edit\x3dtrue",e.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:D.partial(arcgisonline.sharing.util.openPage,r,!1)}),
h&&l&&e.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:D.partial(arcgisonline.sharing.util.openPage,k,!1)}));else e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});else e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",c,this.getItemDataPath(c))});return e},getGroupLinks:function(c){var h=D.create,g=h("span",{"class":"esriItemLinks",style:"white-space: nowrap"});h("a",{href:esriGeowConfig.baseUrl+
"group.html?id\x3d"+c.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},g);return g},getItemDataPath:function(c){var h=arcgisonline.sharing.util.getToken(),g=h?"?token\x3d"+h:"",e=esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/data";return"KML"==c.type&&(g="public"!==c.access&&h?"?token\x3d"+h:"",c.url&&-1===c.url.indexOf(e))?c.url+g:e+g},getItemPkgPath:function(c){var h=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/item.pkinfo"+(h?"?token\x3d"+h:"")},getPItemPath:function(c){var h=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/item.pitem"+(h?"?token\x3d"+h:"")},getItemZipPath:function(c){var h=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/data?f\x3dzip"+(h?"\x26token\x3d"+h:"")},getUser:function(){return esriGeowConfig.userInfo||null},meetsPasswordStrength:function(c){return 8<=
c.length&&c.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(c,h){var g={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};if(h&&0<h.length){c.minLength&&(g.minLength=h.length>=c.minLength);if(c.minLetter){var e=h.match(/[A-Za-z]/g);g.minLetter=!!(e&&e.length>=c.minLetter)}c.minUpper&&(e=h.match(/[A-Z]/g),g.minUpper=
!!(e&&e.length>=c.minUpper));c.minLower&&(e=h.match(/[a-z]/g),g.minLower=!!(e&&e.length>=c.minLower));c.minDigit&&(e=h.match(/[0-9]/g),g.minDigit=!!(e&&e.length>=c.minDigit));c.minOther&&(e=h.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),g.minOther=!!(e&&e.length>=c.minOther))}else c.minLength&&(g.minLength=!1),c.minLetter&&(g.minLetter=!1),c.minUpper&&(g.minUpper=!1),c.minLower&&(g.minLower=!1),c.minDigit&&(g.minDigit=!1),c.minOther&&(g.minOther=!1);return g},userPreferences:function(c,
h,g){var e=D.cookie(h||"esri_prefs");if(c)e&&(c=D.mixin(D.json.parse(e),c)),D.cookie(h||"esri_prefs",D.json.stringify(c),{path:"/",expires:1E4,sameSite:"Strict"}),c.contentMode&&g&&this.getUser()?(e=D.create,g=e("form",{method:"POST"},D.body()),e("input",{type:"hidden",name:"preferredView",value:c.contentMode},g),e("input",{type:"hidden",name:"clearEmptyFields",value:"false"},g),arcgisonline.sharing.geow.Community.updateProfile(g,function(l){D.publish("esri/userPreferences"+(h||"user_prefs"),[c])})):
D.publish("esri/userPreferences"+(h||"user_prefs"),[c]);else return g="contentModePrefs"===h?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=e?D.json.parse(e):g?{contentMode:g}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.credential&&esriGeowConfig.userInfo.credential.token||esriGeowConfig.userInfo.token},callPage:function(c){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+c)},openPageAndCount:function(c,h,g){c=
esriGeowConfig.restBaseUrl+"content/items/"+c+"/data";var e=arcgisonline.sharing.util.getToken(),l={f:"json"};null!=e&&""!==e&&(l.token=e);esri.request({url:c,content:l,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(h,"boolean"===typeof g?g:!1)},openPage:function(c,h){h?window.location=c:window.open(c)},fix:function(c){null!=c&&1==c.length&&null!=c[0]&&0<c[0].length&&(c=c[0]);return c.replace(/&lt;/g,"\x3c")},stripHTML:function(c){return c?-1<c.indexOf("\x3c")&&-1<c.indexOf("\x3e")?
c.replace(/<[^>]+>/g,""):c:c},urlToObject:function(c){c=esri.urlToObject(c);c.query=c.query||{};for(var h in c.query)c.query.hasOwnProperty(h)&&(Array.isArray(c.query[h])||(c.query[h]=c.query[h].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return c},linkifyText:function(c){c=c.split(" ");for(var h=0;h<c.length;h++)if(0===c[h].indexOf("http://")||0===c[h].indexOf("https://"))c[h]="\x3ca href\x3d'"+c[h]+"' target\x3d'_blank'\x3e"+c[h]+"\x3c/a\x3e";return c.join(" ")},removeHTMLTags:function(c){if(null==
c)return"";c=c.replace(/&(lt|gt);/g,function(h,g){return"lt"==g?"\x3c":"\x3e"});return c.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(c){var h={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(c).replace(/[&<>"'\/]/g,function(g){return h[g]})},unescapeHTML:function(c){return String(c).replace("\x26lt;","\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;",
"\x26")},getSnippet:function(c,h){if(null==c||0===c.length)h=arcgisonline.sharing.util.removeHTMLTags(h),c=180<h.length?h.substring(0,180)+" ...":h;return c},trimTags:function(c){for(;-1<c.indexOf("  ");)c=c.replace(/  /g," ");for(;-1<c.indexOf(",,");)c=c.replace(/,,/g,",");return c=D.trim(c.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(c){c=0<=c.indexOf("?")?c+"\x26f\x3djson":c+"?f\x3djson";var h=this.getToken();null!=h&&""!==h&&(c=c+"\x26token\x3d"+h);return this.useSSL(c)},
replaceSSL:function(c){return!1===esriGeowConfig.useSSL?c:c.replace("http://","https://")},useSSL:function(c){return"https:"===window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?c.replace("http:","https:"):c},errorHandler:function(c,h,g,e){c&&c.code&&"IdentityManagerBase.5"===c.code&&(c.code=498);if(-1<g.indexOf(esriGeowConfig.restBaseUrl)&&c.code&&498==c.code||403==c.code||400==c.code&&"Invalid account"==c.message)if(403==c.code&&!0===this.isLoggedIn())g&&-1<g.toLowerCase().indexOf("/generatetoken")?
window.location.href=esriGeowConfig.baseUrl+"signin.html":g&&-1<g.indexOf("/invitations/")&&e?e(c,h):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==c.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(c)&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccessDeniedResource"));else{if(!(403===c.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(c)||403===c.code&&
!1===esriGeowConfig.isMultiTenant&&-1<D.indexOf(["COM_0056","COM_0057","SB_0008"],c.messageCode))){esriGeowConfig.userInfo=null;D.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.arcgis_auth&&delete arcgisonline.sharing.util._cookies.arcgis_auth;
h="";-1==esriGeowConfig.signin.indexOf("http")&&(h=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(h=h.replace("http:","https:")));h+=esriGeowConfig.signin;g="";e=h+("?error\x3d"+c.code);var l=D.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(e)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,
!1),g="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):g="\x26returnUrl\x3d"+encodeURIComponent(l?l:window.location):l&&(g="\x26returnUrl\x3d"+encodeURIComponent(l));e+=g;0>window.location.href.indexOf(e)?window.location=e:"User not part of this account"===c.message&&(window.location=h+"?error\x3d400"+g)}}else e&&e(c,h)},checkSubscriptionStatus:function(c){return-1!==D.indexOf(["SB_0001","SB_0002","SB_0003","SB_0004"],c.messageCode)?
(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),!1):-1!==D.indexOf(["SB_0005","SB_0006","SB_0007"],c.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(c.messageCode),!1):!0},isValidSubscriptionState:function(){var c=esriGeowConfig.self.subscriptionInfo,h=["cancelled","expired","suspended","restricted"];return!c||-1===h.indexOf(c.state)},checkError:function(c){var h;
return-1!==D.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),c.messageCode)?(c=(h=D.mixin({},D.i18n.getLocalization("arcgisonline","arcgisonline").common))&&h.errors&&h.errors[c.messageCode]?{message:h.errors[c.messageCode]}:c,c=D.mixin(D.mixin({},h.errors.genericError),c),esriGeowConfig.hideDefaultCheckErrorMessage||(h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),h.show(c)),!1):!0},handler:function(c,h,g,e,l){c.error&&
""!==c.error?arcgisonline.sharing.util.errorHandler(c.error,h,g,l):e&&e(c,h)},getJson:function(c,h,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:c},{},h,g)},getJsonWithContent:function(c,h,g,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:c,content:h},{},g,e)},postJson:function(c,h,g,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:c},{usePost:!0},g,e)},postJsonCheckProxy:function(c,h,g,e){return"http:"===window.location.protocol&&-1<h.indexOf("https://")?
arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:c},{usePost:!0,useProxy:!0},g,e):arcgisonline.sharing.util._requestWithAppHandlers({url:h,content:c},{usePost:!0},g,e)},postForm:function(c,h,g,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:h,form:c},{usePost:!0},g,e)},_requestWithAppHandlers:function(c,h,g,e){var l=arcgisonline.sharing.util.request(c,h);l.then(function(r,k){arcgisonline.sharing.util.handler(r||{},l.ioArgs,c.url,g,e);return r},function(r,k){arcgisonline.sharing.util.errorHandler(r||
{},l.ioArgs,c.url,e);throw r;});return l},request:function(c,h){var g=c.url,e=c.content||{},l=arcgisonline.sharing.util.getToken();h=h||{};var r=arcgisonline.sharing.util.urlToObject(g).query||{};e.f||r.f||h.removeFormatProp||(e=D.mixin(e,{f:"json"}));l&&!e.token&&!1!==h.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(c.url)||(e.token=l):!1===h.addToken&&delete e.token;
c=D.mixin({},{url:!1===h.addSSL?g:arcgisonline.sharing.util.useSSL(g),content:e,form:c.form,callbackParamName:c.form?c.callbackParamName||null:c.callbackParamName||"callback",timeout:h&&h.timeout||0});var k=esri.request(c,h);k.addErrback(function(f){"IdentityManagerBase.1"===f.code&&(f.code=f.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(f,k);arcgisonline.sharing.util.checkSubscriptionStatus(f)||(k.canceled=!0);arcgisonline.sharing.util.isUnlicensed(f)&&(k.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&
(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(f)&&(k.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(f)&&(k.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));arcgisonline.sharing.util.isOldLicense(f)&&(k.canceled=
!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));arcgisonline.sharing.util.isInvalidUser(f)&&(k.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(f)&&(k.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));arcgisonline.sharing.util.checkError(f)||
(k.canceled=!0);throw f;});return k},_fetchItemData:function(c,h){var g=this.getUser(),e=this.getItemDataPath(c);"admin"===c.itemControl||g&&g.username===c.owner?this.openPage(h,!0):this._canAccessUrl(e).then(D.hitch(this,function(){this.openPage(h,!0)}),D.hitch(this,function(l){l&&403===l.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(h,!0)}))},_canAccessUrl:function(c){var h=new D.Deferred;D.xhr("HEAD",{url:c,
handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(g){h.resolve(!0)},function(g){h.reject(g)});return h},_showError:function(c){var h=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),g=c||{};g.code=c.code||0;g=D.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[c.code]||c);h.show(g).then(D.hitch(this,function(){h.hide()}))},checkSoftwareAuthError:function(c,h){var g=["COM_0056",
"COM_0057"];!1===esriGeowConfig.isMultiTenant&&c.code&&403===c.code&&c.messageCode&&-1!==D.indexOf(g,c.messageCode)&&-1===window.location.href.indexOf("error.html")&&(h.canceled=!0,"COM_0056"===c.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===c.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0006"===
c.messageCode},isInsufficientLevel:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0012"===c.messageCode},isUnlicensed:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0013"===c.messageCode},isOldLicense:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&503===c.code&&c.messageCode&&"GWM_0014"===c.messageCode},isInvalidUser:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&404===c.code&&
c.messageCode&&"POR_205244"===c.messageCode},isDisabledEnterpriseUser:function(c){return!1===esriGeowConfig.isMultiTenant&&c.code&&403===c.code&&c.messageCode&&"SB_0008"===c.messageCode},isNode:function(c){return"object"===typeof Node?c instanceof Node:c&&"object"===typeof c&&"number"===typeof c.nodeType&&"string"===typeof c.nodeName},isElement:function(c){return"object"===typeof HTMLElement?c instanceof HTMLElement:c&&"object"===typeof c&&1===c.nodeType&&"string"===typeof c.nodeName},isHostedService:function(c){if(!c)return!1;
var h=(new D._Url(esriGeowConfig.restBaseUrl)).authority,g=!1===esriGeowConfig.isMultiTenant,e=-1!==c.indexOf(".arcgis.com/"),l=-1!==c.indexOf("//services")||-1!==c.indexOf("//tiles")||-1!==c.indexOf("//features")||-1!==c.indexOf("//locationservices")||-1!==c.indexOf("//iservices")||-1!==c.indexOf("//tiledimageservices");c=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==c.indexOf(h)&&!g;return e&&l||!e&&c},isHostedServiceItem:function(c){return arcgisonline.sharing.util.isHostedService(c.item)||
arcgisonline.sharing.util.isHostedService(c.url)},isHostedTemplateItem:function(c){c=c?c.split("?")[0]:"";var h=c.match(/http.+(arcgis.com\/apps)\/?/ig);c=c.match(/http.+(opendata)\/?/ig);return h&&h.length&&!c?!0:!1},isAgolService:function(c){return c?-1!==c.indexOf("/services.arcgisonline.com/")||-1!==c.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(c){if(!c)return!1;var h=!1;D.forEach(esriGeowConfig.httpsDomains,function(e){if(-1<c.indexOf("."+e+"/")||-1<c.indexOf("/"+e+"/"))h=
!0});if(!h){var g=esriGeowConfig.self.portalHostname;-1<g.indexOf("/")&&(g=g.substring(0,g.indexOf("/")));-1<c.indexOf(g)&&(h=!0)}return h},isArcGISServer:function(c){var h=/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/ig,g=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig;return(c=(c=c&&c.split("?")[0])&&c.replace(h,"").match(g))&&c.length?c[0].split("/")[1]:null},getStaticImagesUrl:function(){var c=esriGeowConfig.staticImagesUrl||
esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&c?c.replace("http:","https:"):c},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(c){var h=document.createElement("a");h.href=c;for(var g=h.protocol.replace(":",""),e=h.hostname||window.location.host,l=h.port,r=h.search,k={},f=h.search.replace(/^\?/,"").split("\x26"),b=f.length,
d=0,q;d<b;d++)f[d]&&(q=f[d].split("\x3d"),k[q[0]]=q[1]);return{source:c,protocol:g,host:e,port:l,query:r,params:k,file:(h.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:h.hash.replace("#",""),path:h.pathname.replace(/^([^\/])/,"/$1"),relative:(h.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:h.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(c){var h;return c?(h||(h=document.createElement("a")),h.href=c,h.href):c},ellipse:function(c,h){c&&c.length>h&&0<h-4&&(c=c.substring(0,
h-4)+"...");return c},appendTags:function(c,h){var g=c.get("value");h=g?h.split(",").concat(g.split(",")):h.split(",");c.set("value",arcgisonline.sharing.util.getUniqueArray(h).join(","));D.style(c.domNode,"color","#000000")},getUniqueArray:function(c){var h={};return D.filter(c,function(g){return h[g]?!1:h[g]=!0})},relativeToExplicitUrl:function(c){esriGeowConfig.cdnServerUrl=D.baseUrl.substring(0,D.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-
1?esriGeowConfig.cdnServerUrl+c:esriGeowConfig.cdnServerUrl+"/"+c},getCookie:function(c,h){c="esri_auth"===c?"arcgis_auth":c;var g=this._cookies&&this._cookies[c]||null;if(!g||h)(g=(g=D.cookie(c))?D.json.parse(g):-1)&&g.role&&(g.role=g.role?g.role.replace("org_","account_"):g.role),g&&(this._cookies||(this._cookies={}),this._cookies[c]=g);return-1===g||esriGeowConfig.ignoreCookie?null:g},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?
!0:esriGeowConfig.self.canSharePublic},getSecureUrl:function(c){c||(c=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(c=c.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(c=c.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):c=c.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),
c=c.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(c)):c.replace("http:","https:")},htmlEncode:function(c){return c?c.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):c},htmlDecode:function(c){return c?c.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):c},getHttpUrl:function(c){c||(c=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&
esriGeowConfig.self.httpPort?(location.port?(c=c.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(c=c.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):c=c.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),c=c.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(c)):c.replace("https:","http:")},cleanPorts:function(c){return c.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===
esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(c){for(var h=!1,g=0;g<esriGeowConfig.httpsDomains.length;g++)if(c&&-1<c.indexOf(esriGeowConfig.httpsDomains[g])){h=!0;break}return h},onFederatedServer:function(c){var h=!1,g=!1;c&&0<c.length&&
esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&(h=D.some(esriGeowConfig.federatedServers,D.hitch(this,function(e){var l=-1<c.indexOf(":6080")?c.replace("http:","https:").replace(":6080",":6443"):c,r=e.url?arcgisonline.sharing.util.getUrlWithoutScheme(e.url):e.url,k=e.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(e.adminUrl):e.adminUrl;r=-1<r.indexOf(":")?e.url:r;k=-1<k.indexOf(":")?e.adminUrl:k;g=l!==c;return-1<c.indexOf(r)||-1<c.indexOf(k)||g&&(-1<l.indexOf(r)||
-1<l.indexOf(k))})));return h},getUrlWithoutScheme:function(c){if(esri.isDefined(c)){if(0===c.indexOf("http://"))return c.substring(7);if(0===c.indexOf("https://"))return c.substring(8)}return c},isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&
esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var c=window.location.pathname,h=c.indexOf("/home");if(0<h)return c.substring(0,h)}return""},normalizeOrgRole:function(c){return c?c.replace("org_","account_"):c},checkForIAA:function(){var c=new D.Deferred,h=!!esriGeowConfig.isDebug,g=arcgisonline.sharing.util.getPortalAdminBaseUrl(),e=arcgisonline.sharing.util.getUser();D.xhrGet({url:g+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(D.hitch(this,
function(l){l&&l.status&&"error"===l.status&&l.code&&503===l.code?c.resolve({hasIAA:!0,error:l}):l&&(!l.error&&!e||l.error&&l.error.code&&(!e&&499!==l.error.code&&498!==l.error.code||e&&499!==l.error.code&&498!==l.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):c.resolve({hasIAA:!1}):c.resolve({hasIAA:!0})}),D.hitch(this,function(l){!h&&(l.status&&499!==
l.status||l&&(!l.error&&!e||l.error&&l.error.code&&(!e&&499!==l.error.code&&498!==l.error.code||e&&499!==l.error.code&&498!==l.error.code)))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):c.resolve({hasIAA:!1}):c.resolve({hasIAA:!0,error:l})}));return c},getBridgeUrl:function(c,h){var g=esriGeowConfig.bridgeUrl+"?url\x3d"+encodeURIComponent(c);return h&&h.expires?g+
"\x26exp\x3d"+Math.ceil((new Date(h.expires)-new Date)/1E3):g},getUserDisplayName:function(c){var h=c&&c.fullName||"";c=c.firstName||h;-1<h.indexOf("_")?c=h.split("_")[0]:-1<h.indexOf(",")?c=h.split(",").slice(1).join(" "):-1<h.indexOf(" ")&&(c=h.split(" ")[0]);return c.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},isProApp:function(c){return c&&"ArcGIS Pro"===c.title&&"esri_apps"===c.owner&&c.tags&&-1<D.indexOf(c.tags,"pro")},findProListing:function(){var c=new D.Deferred,h=!1,
g=!1,e;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(D.hitch(this,function(l){l.purchases?(D.forEach(l.purchases,D.hitch(this,function(r){!g&&r.listing&&"ArcGIS Pro"===r.listing.title&&"esri_apps"===r.listing.owner&&"licenseByUser"===r.listing.licenseBy&&(h=D.some(r.listing.tags,D.hitch(this,function(k){return k&&"pro"===k.toLowerCase()})))&&(e=r,g=!0)})),c.resolve(g?e:null)):c.resolve(null)}),D.hitch(this,function(l){c.reject(l)}));return c},findLicenseByUserProducts:function(){var c=
new D.Deferred,h=esriGeowConfig.restBaseUrl+"portals/self/purchases",g=!1,e=!1,l={pro:null,products:null};this.isPortal();var r=D.hitch(this,function(k){if(k.listing&&"licenseByUser"===k.listing.licenseBy)if(g=!0,"ArcGIS Pro"===k.listing.title&&"esri_apps"===k.listing.owner){if(e=D.some(k.listing.tags,D.hitch(this,function(f){return f&&"pro"===f.toLowerCase()})))l.pro=k}else k&&k.provision&&(l.products?l.products.push(k):l.products=[k])});arcgisonline.sharing.util.request({url:h}).then(D.hitch(this,
function(k){k.purchases||k.trials?(k.purchases&&D.forEach(k.purchases,r),k.trials&&D.forEach(k.trials,r),c.resolve(g?l:null)):c.resolve(null)}),D.hitch(this,function(k){c.reject(k)}));return c},isEsriWorldGeocoder:function(c){var h=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(c);c=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(c);return h||c},isEsriWorldGeocoderNoProxy:function(c){return(c=c.url||"")&&!!c.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig)},
isEsriWorldGeocoderThroughProxy:function(c){var h=c.url||"";return c.isAGOWorldLocator||h&&!!h.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig)},filterBatchGeocoders:function(c,h){return D.filter(c,D.hitch(this,function(g){var e=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(g),l=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(g);if(e||l)esri.isDefined(g.name)?"Esri World Geocoder"===g.name&&(g.name=esri.i18nBundle.common.esriWorldGeocoder):g.name=esri.i18nBundle.common.esriWorldGeocoder;
return e&&(arcgisonline.sharing.util.isPortal()||h)?!1:esri.isDefined(g.batch)?!!g.batch:e||l}))},filterNonWorldGeocoders:function(c){return D.filter(c,D.hitch(this,function(h){var g=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(h),e=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(h);return!g&&!e&&h.url}))},downloadWebMappingApp:function(c){var h="Mobile Application"!==c.type?"WMA2Code":"MobileApp2Code",g=esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/relatedItems";h=c.relatedItems||
arcgisonline.sharing.util.request({url:g,content:{relationshipType:h}}).then(D.hitch(this,function(e){c.relatedItems=e&&e.relatedItems||[];return c.relatedItems}));return D.when(h,D.hitch(this,function(e){var l=e||[],r,k=D.filter(l,function(f){return f&&null!==f.url});e=k&&k.length?k[0]:l&&0<l.length?l[0]:e;e.id&&(r=e.url||arcgisonline.sharing.util.getItemDataPath(e));e.url?window.open(r):window.location=r;B.byId("share-map-stack")&&B.byId("share-map-stack").selectChild(B.byId("share-map-application-help"))}),
D.hitch(this,function(e){}))},loadUserTags:function(c){var h=new D.Deferred;c?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+c+"/tags",content:{ts:(new Date).getTime()}}).then(D.hitch(this,function(g){var e=[];g&&g.tags&&(e=g.tags);e=e.map(function(l){l.tag=arcgisonline.sharing.util.sanitizer.sanitize(l.tag);return l}.bind(this));h.resolve(e)}),D.hitch(this,function(g){h.resolve([])})):h.resolve([]);return h},loadUserProperties:function(c){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+
"community/users/"+c+"/properties"})},isValidEmailAddress:function(c){var h=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/ig;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(c)&&h.test(c)?!0:!1},groupUsedInOrgSettings:function(c){return(c=c?"id:"+c:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(c)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(c)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(c)||esriGeowConfig.self.featuredItemsGroupQuery&&-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(c)||
esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(c)||esriGeowConfig.self.homePageFeaturedContent&&-1<esriGeowConfig.self.homePageFeaturedContent.indexOf(c)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(c)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(c)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(c)||
esriGeowConfig.self.symbolSetsGroupQuery&&-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(c)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(c)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(c))},canShowSocialMediaLinks:function(){var c=arcgisonline.sharing.util.isPortal(),h=arcgisonline.sharing.util.canSharePublic(),g=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
e=g&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(c?h&&e:h&&(!g||e))},getPortalAdminBaseUrl:function(){var c=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(c)},formatPortalOrgUrl:function(c,h,g){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?c+"/orgs/"+
g+h:c+h},getLevelSpan:function(c,h){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+c+" "+h+'"\x3e'+h+"\x3c/span\x3e"},getLevelSpanProperties:function(c,h){return{"class":"license-level-badge",innerHTML:h,"aria-label":c+" "+h}},createLevelSpan:function(c,h,g,e){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(c,h),e||{}),g)},createLevelSpanAndPlace:function(c,h,g,e,l){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(c,h),
e||{}),g,l)},getFullDomain:function(c){c=c.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=c&&2<c.length&&"string"===typeof c[2]&&0<c[2].length?c[2]:null},isValidOnlineReturnUrl:function(c){var h=decodeURI(c),g=arcgisonline.sharing.util.parseUrl(window.location.href);c=arcgisonline.sharing.util.parseUrl(h);var e=(h=0===h.indexOf("http://")||0===h.indexOf("https://"))&&c.host?c.host.lastIndexOf(".arcgis.com"):-1,l=h&&c.host?c.host.lastIndexOf(".esri.com"):-1,r=h&&c.host?c.host.lastIndexOf(g.host):
-1;e=-1<e&&e+11-1===c.host.length-1;l=-1<l&&l+9-1===c.host.length-1;g=-1<r&&r+g.host.length-1===c.host.length-1;return h&&c.host&&(e||l||g)?!0:!1},isValidPortalReturnUrl:function(c){var h=decodeURI(c),g=arcgisonline.sharing.util.parseUrl(window.location.href);c=arcgisonline.sharing.util.parseUrl(h);h=0===h.indexOf("http://")||0===h.indexOf("https://");var e=c.host?c.host.lastIndexOf(g.host):-1;g=-1<e&&e+g.host.length-1===c.host.length-1;return h&&c.host&&g?!0:!1},isSameUrl:function(c,h,g){var e=c,
l=h;g&&c&&h&&(e=c.substring(c.indexOf("://")+3),l=h.substring(h.indexOf("://")+3));return e===l},overrideDojoAriaLabel:function(c,h){c&&(D.attr(c,"aria-label",h),c.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(c,h){return{"class":"stepProgressBar stepProgressBar--"+h+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(c/h*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(c,h,g,e){g=
D.create("div",{"class":"progressBarContainer"},g,e);D.create("div",D.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(c,h)),g,"first");D.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+c+"  "+esri.i18nBundle.common.steppedProgress.of+" "+h+"\x3c/span\x3e",g,"last");return g},clearProgressBars:function(){D.query(".progressBarContainer").forEach(function(c){D.destroy(c)})},isServiceProxyGeocoder:function(c){var h=(c||"").toLowerCase();c=
-1<h.indexOf("/geocodeserver")&&-1<h.indexOf("/servers/")&&-1<h.indexOf("/rest/services/");var g=arcgisonline.sharing.util.isPortal()&&-1<h.indexOf(esriGeowConfig.self.portalHostname.toLowerCase());h=!arcgisonline.sharing.util.isPortal()&&h.indexOf("utility")&&-1<h.indexOf(".arcgis.com");return c&&(g||h)},applyChrome62ButtonRepaintFix:function(c){D.has&&61<D.has("chrome")&&c&&(D.style(c,"display","none"),setTimeout(function(){D.style(c,"display","")},1))},isValidUrl:function(c){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(c)},
setFederatedServers:function(c){esriGeowConfig.federatedServers=c},shouldUseProxy:function(c){c=(((c||"").split("//")[1]||"").split("/")[0]||"").toLowerCase();return!!esriGeowConfig.self.isPortal&&c!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){var m=B("arcgisonline.sharing.dijit.dialog.GeneralDlg",[g,e,l,a],{baseClass:"esriThumbnailDlg",templateString:q,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=c.mixin({},d.common,d.generalDlg)},postCreate:function(){this.loadConnections()},show:function(n){this.clear();this.setTitle(n.title);this.setMessage(n.message);this.setContent(n.content);this.key=n.key;n.hideTitleBar&&k.set(r(".dijitDialogTitleBar")[0],
"display","none");n.error&&r("#general-dialog-content").addClass("error");n.buttonText&&(this._dialog.domNode.querySelector("#button_general-close_label").textContent=n.buttonText);this._dialog.show()},showWide:function(n){k.set(this._dialog,"width","700px");this.show(n)},destroy:function(){this.inherited(arguments);m.prototype.statics._instance&&(m.prototype.statics._instance=null)},clear:function(){this.setTitle("");r("#general-dialog-content").attr("innerHTML","");r("#general-dialog-content").removeClass("error")},
loadConnections:function(){r(".jevent").on("click",function(t){t.preventDefault()});r("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(c.hitch(this,function(t){f.set(t,"title",this.i18n.close)}));var n=this._dialog;this.own(b(n,"cancel",c.hitch(this,function(t){t&&t instanceof Event&&t.preventDefault();this.onCancel()})),b(n,"hide",c.hitch(this,function(t){t&&t instanceof Event&&t.preventDefault();this.onHide()})))},setTitle:function(n){n&&this._dialog.set("title",n)},setMessage:function(n){n&&
r("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+n+"\x3c/p\x3e")},setContent:function(n){n&&r("#general-dialog-content").attr("innerHTML",n)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(n){this._okBtn.setLabel(n)},hide:function(){this._dialog.hide()},onOkClick:function(n){this._dialog.hide()}});m.prototype.statics={getInstance:function(){this._instance||(this._instance=new m);return this._instance}};return m})},
"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(D,B,a){return function(c,h,g){var e=B.isString(c);e?g.declaredClass=c:(g=h,h=c);h=D(h,g);e&&a(c,h);return h}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,B,a){return function(c,h){var g=c.substring(c.indexOf(".")+1);D.setObject(g,h,a)}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,
B,a,c,h,g){D=D([c],{declaredClass:"esri.Evented",registerConnectEvents:function(){var e=this.constructor,l=this.constructor._meta.parents,r=[{}],k={},f,b=function(q,m){B.isArray(q)||(q=[q]);for(var n=0;n<q.length;n++){var t=q[n];t._meta&&t._meta.parents&&b(t._meta.parents,m);t.prototype._eventMap&&m.push(B.mixin({},t.prototype._eventMap))}return m};if(!e._onMap){b(l,r);r.push(this._eventMap);l=B.mixin.apply(this,r);for(d in this)/^on\w/.test(d)&&B.isFunction(this[d])&&(r=this._hyphenLower(d).toLowerCase(),
l[r]||(k[r]={method:d}));for(f in l){var d=this._onCamelCase(f);k[f]={method:d,argKeys:l[f]}}e._onMap=k;return e._onMap}},on:function(e,l){if(-1<e.indexOf(",")){for(var r=e.split(/\s*,\s*/),k=r.length,f=[];k--;)f.push(this.on(r[k],l));f.remove=function(){for(var q=0;q<f.length;q++)f[q].remove()};return f}r=this.constructor._onMap||this.registerConnectEvents();k="string"==typeof e&&e.toLowerCase();var b=this._onCamelCase(k),d=r&&r[k];return(b=d&&d.method||this[b]&&B.isFunction(this[b])&&b)?d&&B.isArray(d.argKeys)?
(r=this._onArr2Obj(l,r[k].argKeys),a.after(this,b,r,!0)):a.after(this,b,function(q){q=q||{};q.target||(q.target=this);l.call(this,q)},!0):this.inherited(arguments)},emit:function(e,l){var r,k,f=e.toLowerCase();var b=this._onCamelCase(e);var d=this.constructor._onMap||this.registerConnectEvents();b=(k=d&&d[f]&&d[f].method||B.isFunction(this[b])&&b)&&this[k];k&&d&&d[f]&&this._onObj2Arr(function(){r=Array.prototype.slice.call(arguments)},d[f].argKeys)(l);l=l||{};l.target||(l.target=this);if(b){var q=
r&&r.length?r:[l];q=b.apply(this,q)}this.inherited(arguments,[e,l]);return q},_onObj2Arr:function(e,l){if(l){var r=this;return function(k){var f,b=[],d=l.length;for(f=0;f<d;f++)b[f]=k[l[f]];e.apply(r,b)}}return e},_onArr2Obj:function(e,l){if(l){var r=this;return function(){var k,f={},b=arguments.length;for(k=0;k<b;k++)f[l[k]]=arguments[k];f.target||(f.target=r);e.call(r,f)}}return e},_hyphenLower:function(e){return e.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(l,r){return(r?"-":"")+l.toLowerCase()})},
_onCamelCase:function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/\-([a-z])/g,function(l,r){return r.toUpperCase()})}});return g.Evented=D})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I){function R(){}var O=new h;O.resolve(!0);A=c("dijit._DialogBase"+(n("dojo-bidi")?"_NoBidi":""),[u,E,F,C],{templateString:I,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:A.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(Q){this._set("draggable",Q)},maxRatio:.9,
closable:!0,_setClosableAttr:function(Q){this.closeButtonNode.style.display=Q?"":"none";this._set("closable",Q)},postMixInProperties:function(){var Q=f.getLocalization("dijit","common");d.mixin(this,Q);this.inherited(arguments)},postCreate:function(){r.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",d.hitch(this,"hide"),!0);a.after(this,"onCancel",d.hitch(this,"hide"),!0);q(this.closeButtonNode,
t.press,function(Q){Q.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&L.isTop(this)&&(this._getFocusItems(),x.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();x.focus(this._firstFocusItem)},_endDrag:function(){var Q=l.position(this.domNode),W=z.getBox(this.ownerDocument);Q.y=Math.min(Math.max(Q.y,0),W.h-Q.h);Q.x=Math.min(Math.max(Q.x,0),W.w-Q.w);this._relativePosition=Q;this._position()},_setup:function(){var Q=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==n("ie")?y:w)(Q,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",d.hitch(this,"_endDrag"),!0)):e.add(Q,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":B.map(this["class"].split(/\s/),function(W){return W+"_underlay"}).join(" "),_onKeyDown:d.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!e.contains(this.ownerDocumentBody,"dojoMove")){var Q=
this.domNode,W=z.getBox(this.ownerDocument),ba=this._relativePosition,S=l.position(Q);r.set(Q,{left:Math.floor(W.l+(ba?Math.min(ba.x,W.w-S.w):(W.w-S.w)/2))+"px",top:Math.floor(W.t+(ba?Math.min(ba.y,W.h-S.h):(W.h-S.h)/2))+"px"})}},_onKey:function(Q){if(Q.keyCode==b.TAB){this._getFocusItems();var W=Q.target;this._firstFocusItem==this._lastFocusItem?(Q.stopPropagation(),Q.preventDefault()):W==this._firstFocusItem&&Q.shiftKey?(x.focus(this._lastFocusItem),Q.stopPropagation(),Q.preventDefault()):W!=this._lastFocusItem||
Q.shiftKey||(x.focus(this._firstFocusItem),Q.stopPropagation(),Q.preventDefault())}else this.closable&&Q.keyCode==b.ESCAPE&&(this.onCancel(),Q.stopPropagation(),Q.preventDefault())},show:function(){if(this.open)return O.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),L.hide(this));var Q=z.get(this.ownerDocument);this._modalconnects.push(q(Q,"scroll",d.hitch(this,"resize",null)));this._modalconnects.push(q(this.domNode,
"keydown",d.hitch(this,"_onKey")));r.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new h(d.hitch(this,function(){W.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,R);Q=this._fadeInDeferred.promise;var W=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:d.hitch(this,function(){L.show(this,this.underlayAttrs)}),onEnd:d.hitch(this,function(){this.autofocus&&L.isTop(this)&&(this._getFocusItems(),
x.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return Q},hide:function(){if(!this._alreadyInitialized||!this.open)return O.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new h(d.hitch(this,function(){W.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,R);this._fadeOutDeferred.then(d.hitch(this,"onHide"));var Q=this._fadeOutDeferred.promise;var W=k.fadeOut({node:this.domNode,duration:this.duration,
onEnd:d.hitch(this,function(){this.domNode.style.display="none";L.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ba;ba=this._modalconnects.pop();)ba.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return Q},resize:function(Q){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!Q){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),B.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(X){X&&r.set(X,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var W=z.getBox(this.ownerDocument);W.w*=this.maxRatio;W.h*=this.maxRatio;var ba=l.position(this.domNode);this._shrunk=!1;ba.w>=W.w&&(Q={w:W.w},l.setMarginBox(this.domNode,Q),ba=l.position(this.domNode),
this._shrunk=!0);ba.h>=W.h&&(Q||(Q={w:ba.w}),Q.h=W.h,this._shrunk=!0);Q&&(Q.w||(Q.w=ba.w),Q.h||(Q.h=ba.h))}if(Q){l.setMarginBox(this.domNode,Q);W=[];this.titleBar&&W.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&W.push({domNode:this.actionBarNode,region:"bottom"});ba={domNode:this.containerNode,region:"center"};W.push(ba);var S=J.marginBox2contentBox(this.domNode,Q);J.layoutChildren(this.domNode,S,W);this._singleChild?(W=J.marginBox2contentBox(this.containerNode,ba),this._singleChild.resize({w:W.w,
h:W.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();n("touch")||Q||this._position()}},_layoutChildren:function(){B.forEach(this.getChildren(),function(Q){Q.resize&&Q.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var Q;Q=this._modalconnects.pop();)Q.remove();L.hide(this);this.inherited(arguments)}});n("dojo-bidi")&&
(A=c("dijit._DialogBase",A,{_setTitleAttr:function(Q){this._set("title",Q);this.titleNode.innerHTML=Q;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(Q){this._created&&this.textDir!=Q&&(this._set("textDir",Q),this.set("title",this.title))}}));var P=c("dijit.Dialog",[H,A],{});P._DialogBase=A;var L=P._DialogLevelManager={_beginZIndex:950,show:function(Q,W){K[K.length-1].focus=x.curNode;var ba=K[K.length-1].dialog?K[K.length-1].zIndex+2:P._DialogLevelManager._beginZIndex;r.set(Q.domNode,
"zIndex",ba);G.show(W,ba-1);K.push({dialog:Q,underlayAttrs:W,zIndex:ba})},hide:function(Q){if(K[K.length-1].dialog==Q){K.pop();var W=K[K.length-1];1==K.length?G.hide():G.show(W.underlayAttrs,W.zIndex-1);if(Q.refocus&&(Q=W.focus,!W.dialog||Q&&g.isDescendant(Q,W.dialog.domNode)||(W.dialog._getFocusItems(),Q=W.dialog._firstFocusItem),Q))try{Q.focus()}catch(ba){}}else W=B.indexOf(B.map(K,function(ba){return ba.dialog}),Q),-1!=W&&K.splice(W,1)},isTop:function(Q){return K[K.length-1].dialog==Q}},K=P._dialogStack=
[{dialog:null,focus:null,underlayAttrs:null}];x.watch("curNode",function(Q,W,ba){Q=K[K.length-1].dialog;if(ba&&Q&&!Q._fadeOutDeferred&&ba.ownerDocument==Q.ownerDocument){do if(ba==Q.domNode||e.contains(ba,"dijitPopup"))return;while(ba=ba.parentNode);Q.focus()}});n("dijit-legacy-requires")&&m(0,function(){D(["dijit/TooltipDialog"])});return P})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(D,B){var a=B.prototype.onMove;return D("dojo.dnd.TimedMoveable",B,{timeout:40,
constructor:function(c,h){h||(h={});h.timeout&&"number"==typeof h.timeout&&0<=h.timeout&&(this.timeout=h.timeout)},onMoveStop:function(c){c._timer&&(clearTimeout(c._timer),a.call(this,c,c._leftTop));B.prototype.onMoveStop.apply(this,arguments)},onMove:function(c,h){c._leftTop=h;if(!c._timer){var g=this;c._timer=setTimeout(function(){c._timer=null;a.call(g,c,c._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,B,a,c,h,g){return B("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var l=[];D.forEach(e||this.getChildren(),function(r){"value"in r?l.push(r):l=l.concat(this._getDescendantFormWidgets(r.getChildren()))},this);return l},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(e){e.reset&&e.reset()})},validate:function(){var e=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(l){l._hasBeenBlurred=!0;var r=l.disabled||!l.validate||
l.validate();r||e||(g.scrollIntoView(l.containerNode||l.domNode),l.focus(),e=!0);return r}),function(l){return l})},setValues:function(e){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",e)},_setValueAttr:function(e){var l={};D.forEach(this._getDescendantFormWidgets(),function(b){b.name&&(l[b.name]||(l[b.name]=[])).push(b)});for(var r in l)if(l.hasOwnProperty(r)){var k=l[r],f=c.getObject(r,!1,e);void 0!==f&&(f=[].concat(f),
"boolean"==typeof k[0].checked?D.forEach(k,function(b){b.set("value",-1!=D.indexOf(f,b._get("value")))}):k[0].multiple?k[0].set("value",f):D.forEach(k,function(b,d){b.set("value",f[d])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var e={};D.forEach(this._getDescendantFormWidgets(),function(l){var r=l.name;if(r&&!l.disabled){var k=l.get("value");"boolean"==typeof l.checked?
/Radio/.test(l.declaredClass)?!1!==k?c.setObject(r,k,e):(k=c.getObject(r,!1,e),void 0===k&&c.setObject(r,null,e)):(l=c.getObject(r,!1,e),l||(l=[],c.setObject(r,l,e)),!1!==k&&l.push(k)):(l=c.getObject(r,!1,e),"undefined"!=typeof l?c.isArray(l)?l.push(k):c.setObject(r,[l,k],e):c.setObject(r,k,e))}});return e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=D.map(this._descendants,function(l){return l.get("state")||""});return 0<=D.indexOf(e,"Error")?
"Error":0<=D.indexOf(e,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(l){l._started||l.startup()});e||this._onChildChange()},_onChildChange:function(e){e&&"state"!=e&&"disabled"!=e||this._set("state",this._getState());e&&"value"!=e&&"disabled"!=e&&"checked"!=e||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var e=this;this.own(h(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(l){l.target!=e.domNode&&e._onChildChange(l.type.replace("attrmodified-",""))}));this.watch("state",function(l,r,k){this.onValidStateChange(""==k)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,B){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=B._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b){var d=D("dijit.DialogUnderlay",[l,r],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(q){c.set(this.node,"id",q+"_underlay");this._set("dialogId",q)},_setClassAttr:function(q){this.node.className="dijitDialogUnderlay "+q;this._set("class",q)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(g(this.domNode,"keydown",B.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var q=this.node.style,m=this.domNode.style;m.display="none";var n=e.getBox(this.ownerDocument);m.top=n.t+"px";m.left=n.l+"px";q.width=n.w+"px";q.height=n.h+"px";m.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new k(this.domNode);var q=e.get(this.ownerDocument);this._modalConnects=[f.on("resize",B.hitch(this,"layout")),g(q,"scroll",
B.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});d.show=function(q,m){var n=d._singleton;!n||n._destroyed?n=b._underlay=d._singleton=new d(q):q&&n.set(q);h.set(n.domNode,"zIndex",m);n.open||n.show()};d.hide=function(){var q=
d._singleton;q&&!q._destroyed&&q.hide()};return d})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n){return r("dijit.layout.ContentPane",[a,c,h],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(t,
z,w){var y=new w(t,z);return!y.href&&y._contentSetter&&y._contentSetter.parseDeferred&&!y._contentSetter.parseDeferred.isFulfilled()?y._contentSetter.parseDeferred.then(function(){return y}):y},create:function(t,z){if(!(t&&t.template||!z||"href"in t||"content"in t)){z=f.byId(z);for(var w=z.ownerDocument.createDocumentFragment();z.firstChild;)w.appendChild(z.firstChild);t=B.delegate(t,{content:w})}this.inherited(arguments,[t,z])},postMixInProperties:function(){this.inherited(arguments);var t=m.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=g.substitute(this.loadingMessage,t);this.errorMessage=g.substitute(this.errorMessage,t)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&l.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},_startChildren:function(){l.forEach(this.getChildren(),
function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)});this._contentSetter&&l.forEach(this._contentSetter.parseResults,function(t){t._started||t._destroyed||!B.isFunction(t.startup)||(t.startup(),t._started=!0)},this)},setHref:function(t){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",t)},_setHrefAttr:function(t){this.cancel();this.onLoadDeferred=new k(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,
"onLoad"));this._set("href",t);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(t){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",t)},_setContentAttr:function(t){this._set("href","");this.cancel();this.onLoadDeferred=new k(B.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._setContent(t||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(t){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new k(B.hitch(this,"cancel"));this.onLoadDeferred.then(B.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var t=this,z={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};B.isObject(this.ioArgs)&&B.mixin(z,this.ioArgs);var w=this._xhrDfd=(this.ioMethod||q.get)(z),y;w.then(function(x){y=x;try{return t._isDownloaded=!0,t._setContent(x,!1)}catch(A){t._onError("Content",
A)}},function(x){w.canceled||t._onError("Download",x);delete t._xhrDfd;return x}).then(function(){t.onDownloadEnd();delete t._xhrDfd;return y});delete this._hrefChanged},_onLoadHandler:function(t){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(t)}catch(z){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(t){}},destroyDescendants:function(t){this.isLoaded&&this._onUnloadHandler();var z=this._contentSetter;l.forEach(this.getChildren(),function(w){w.destroyRecursive?
w.destroyRecursive(t):w.destroy&&w.destroy(t);w._destroyed=!0});z&&(l.forEach(z.parseResults,function(w){w._destroyed||(w.destroyRecursive?w.destroyRecursive(t):w.destroy&&w.destroy(t),w._destroyed=!0)}),delete z.parseResults);t||d.empty(this.containerNode);delete this._singleChild},_setContent:function(t,z){t=this.preprocessContent(t);this.destroyDescendants();var w=this._contentSetter;w&&w instanceof e._ContentSetter||(w=this._contentSetter=new e._ContentSetter({node:this.containerNode,_onError:B.hitch(this,
this._onError),onContentError:B.hitch(this,function(A){A=this.onContentError(A);try{this.containerNode.innerHTML=A}catch(v){}})}));var y=B.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!t.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});y=w.set(B.isObject(t)&&t.domNode?t.domNode:t,y);var x=this;return n(y&&y.then?y:w.parseDeferred,function(){delete x._contentSetterParams;
z||(x._started&&(x._startChildren(),x._scheduleLayout()),x._onLoadHandler(t))})},preprocessContent:function(t){return t},_onError:function(t,z,w){this.onLoadDeferred.reject(z);t=this["on"+t+"Error"].call(this,z);w||t&&this._setContent(t,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,B,a,c,h,g,e,l,r,k){return B("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var f=this.getParent();this._childOfLayoutWidget=f&&f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(r.on("resize",g.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var f=[],b=!1;e("\x3e *",this.containerNode).some(function(d){var q=
l.byNode(d);q&&q.resize?f.push(q):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(b=!0)});this._singleChild=1!=f.length||b?null:f[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(f,b){this._resizeCalled=!0;this._scheduleLayout(f,b)},_scheduleLayout:function(f,b){this._isShown()?this._layout(f,b):(this._needLayout=!0,this._changeSize=f,this._resultSize=b)},_layout:function(f,b){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
f&&c.setMarginBox(this.domNode,f);var d=this.containerNode;if(d===this.domNode){var q=b||{};g.mixin(q,f||{});"h"in q&&"w"in q||(q=g.mixin(c.getMarginBox(d),q));this._contentBox=k.marginBox2contentBox(d,q)}else this._contentBox=c.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var f=this._contentBox||c.getContentBox(this.containerNode);this._singleChild.resize({w:f.w,h:f.h})}else{f=this.getChildren();for(var b,
d=0;b=f[d++];)b.resize&&b.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var f=this.domNode,b=this.domNode.parentNode;return"none"!=f.style.display&&"hidden"!=f.style.visibility&&!a.contains(f,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,B,a,c,h){function g(r){return r.substring(0,1).toUpperCase()+r.substring(1)}function e(r,k){var f=r.resize?r.resize(k):a.setMarginBox(r.domNode,k);f?h.mixin(r,f):(h.mixin(r,a.getMarginBox(r.domNode)),h.mixin(r,k))}var l={marginBox2contentBox:function(r,k){var f=c.getComputedStyle(r),b=a.getMarginExtents(r,f),d=a.getPadBorderExtents(r,f);return{l:c.toPixelValue(r,f.paddingLeft),t:c.toPixelValue(r,f.paddingTop),w:k.w-
(b.w+d.w),h:k.h-(b.h+d.h)}},layoutChildren:function(r,k,f,b,d){k=h.mixin({},k);B.add(r,"dijitLayoutContainer");f=D.filter(f,function(q){return"center"!=q.region&&"client"!=q.layoutAlign}).concat(D.filter(f,function(q){return"center"==q.region||"client"==q.layoutAlign}));D.forEach(f,function(q){var m=q.domNode,n=q.region||q.layoutAlign;if(!n)throw Error("No region setting for "+q.id);var t=m.style;t.left=k.l+"px";t.top=k.t+"px";t.position="absolute";B.add(m,"dijitAlign"+g(n));m={};b&&b==q.id&&(m["top"==
q.region||"bottom"==q.region?"h":"w"]=d);"leading"==n&&(n=q.isLeftToRight()?"left":"right");"trailing"==n&&(n=q.isLeftToRight()?"right":"left");"top"==n||"bottom"==n?(m.w=k.w,e(q,m),k.h-=q.h,"top"==n?k.t+=q.h:t.top=k.t+k.h+"px"):"left"==n||"right"==n?(m.h=k.h,e(q,m),k.w-=q.w,"left"==n?k.l+=q.w:t.left=k.l+k.w+"px"):"client"!=n&&"center"!=n||e(q,k)})}};h.setObject("dijit.layout.utils",l);return l})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,B,a,c,h,g,e){var l=0,r={_secureForInnerHtml:function(k){return k.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:g.empty,_setNodeContent:function(k,f){g.empty(k);if(f)if("number"==typeof f&&(f=f.toString()),"string"==typeof f&&(f=g.toDom(f,k.ownerDocument)),!f.nodeType&&B.isArrayLike(f))for(var b=f.length,d=0;d<f.length;d=b==f.length?d+1:0)g.place(f[d],k,"last");else g.place(f,k,"last");return k},_ContentSetter:c("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(k,f){B.mixin(this,k||{});f=this.node=h.byId(this.node||f);this.id||(this.id=["Setter",f?f.id||f.tagName:"",l++].join("_"))},set:function(k,f){void 0!==k&&(this.content=k);"number"==typeof k&&(k=k.toString());f&&this._mixin(f);this.onBegin();this.setContent();var b=this.onEnd();return b&&b.then?b:this.node},setContent:function(){var k=this.node;if(!k)throw Error(this.declaredClass+
": setContent given no node");try{k=r._setNodeContent(k,this.content)}catch(b){var f=this.onContentError(b);try{k.innerHTML=f}catch(d){}}this.node=k},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(k){k.destroy&&k.destroy()}),delete this.parseResults);g.empty(this.node)},onBegin:function(){var k=this.content;if(B.isString(k)&&(this.cleanContent&&
(k=r._secureForInnerHtml(k)),this.extractContent)){var f=k.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(k=f[1])}this.empty();this.content=k;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(k){return"Error occurred setting content: "+k},onExecError:function(k){return"Error occurred executing scripts: "+k},_mixin:function(k){var f=
{},b;for(b in k)b in f||(this[b]=k[b])},_parse:function(){var k=this.node;try{var f={};a.forEach(["dir","lang","textDir"],function(d){this[d]&&(f[d]=this[d])},this);var b=this;this.parseDeferred=e.parse({rootNode:k,noStart:!this.startup,inherited:f,scope:this.parserScope}).then(function(d){return b.parseResults=d},function(d){b._onError("Content",d,"Error parsing in _ContentSetter#"+b.id)})}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(k,f,b){k=
this["on"+k+"Error"].call(this,f);b||k&&r._setNodeContent(this.node,k,!0)}}),set:function(k,f,b){void 0==f&&(f="");"number"==typeof f&&(f=f.toString());return b?(new r._ContentSetter(B.mixin(b,{content:f,node:k}))).set():r._setNodeContent(k,f,!0)}};B.setObject("dojo.html",r);return r})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n){function t(A){return eval("("+A+")")}function z(A){var v=A._nameCaseMap,u=A.prototype;if(!v||v._extendCnt<y){v=A._nameCaseMap={};for(var C in u)"_"!==C.charAt(0)&&(v[C.toLowerCase()]=C);v._extendCnt=y}return v}function w(A,v){v||(v=D);var u=v._dojoParserCtorMap||(v._dojoParserCtorMap={}),C=A.join();if(!u[C]){for(var E=[],F=0,G=A.length;F<G;F++){var H=A[F];E[E.length]=u[H]=u[H]||a.getObject(H)||~H.indexOf("/")&&v(H)}F=E.shift();u[C]=E.length?F.createSubclass?
F.createSubclass(E):F.extend.apply(F,E):F}return u[C]}new Date("X");var y=0;r.after(a,"extend",function(){y++},!0);var x={_clearCache:function(){y++;_ctorMap={}},_functionFromScript:function(A,v){var u="",C="",E=A.getAttribute(v+"args")||A.getAttribute("args"),F=A.getAttribute("with");E=(E||"").split(/\s*,\s*/);F&&F.length&&c.forEach(F.split(/\s*,\s*/),function(G){u+="with("+G+"){";C+="}"});return new Function(E,u+A.innerHTML+C)},instantiate:function(A,v,u){v=v||{};u=u||{};var C=(u.scope||B._scopeName)+
"Type",E="data-"+(u.scope||B._scopeName)+"-",F=E+"type",G=E+"mixins",H=[];c.forEach(A,function(J){var I=C in v?v[C]:J.getAttribute(F)||J.getAttribute(C);if(I){var R=J.getAttribute(G);I=R?[I].concat(R.split(/\s*,\s*/)):[I];H.push({node:J,types:I})}});return this._instantiate(H,v,u)},_instantiate:function(A,v,u,C){function E(F){v._started||u.noStart||c.forEach(F,function(G){"function"!==typeof G.startup||G._started||G.startup()});return F}A=c.map(A,function(F){var G=F.ctor||w(F.types,u.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+F.types.join()+"'");return this.construct(G,F.node,v,u,F.scripts,F.inherited)},this);return C?k(A).then(E):E(A)},construct:function(A,v,u,C,E,F){function G(da){K&&a.setObject(K,da);for(P=0;P<S.length;P++)r[S[P].advice||"after"](da,S[P].method,a.hitch(da,S[P].func),!0);for(P=0;P<X.length;P++)X[P].call(da);for(P=0;P<aa.length;P++)da.watch(aa[P].prop,aa[P].func);for(P=0;P<M.length;P++)m(da,M[P].event,M[P].func);return da}var H=A&&A.prototype;C=
C||{};var J={};C.defaults&&a.mixin(J,C.defaults);F&&a.mixin(J,F);if(d("dom-attributes-explicit"))var I=v.attributes;else d("dom-attributes-specified-flag")?I=c.filter(v.attributes,function(da){return da.specified}):(F=(/^input$|^img$/i.test(v.nodeName)?v:v.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),I=c.map(F.split(/\s+/),function(da){var ea=da.toLowerCase();return{name:da,value:"LI"==v.nodeName&&"value"==da||"enctype"==
ea?v.getAttribute(ea):v.getAttributeNode(ea).value}}));var R=C.scope||B._scopeName;F="data-"+R+"-";var O={};"dojo"!==R&&(O[F+"props"]="data-dojo-props",O[F+"type"]="data-dojo-type",O[F+"mixins"]="data-dojo-mixins",O[R+"type"]="dojotype",O[F+"id"]="data-dojo-id");var P=0,L;R=[];for(var K,Q;L=I[P++];){var W=L.name,ba=W.toLowerCase();L=L.value;switch(O[ba]||ba){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Q=L;break;case "data-dojo-id":case "jsid":K=L;break;
case "data-dojo-attach-point":case "dojoattachpoint":J.dojoAttachPoint=L;break;case "data-dojo-attach-event":case "dojoattachevent":J.dojoAttachEvent=L;break;case "class":J["class"]=v.className;break;case "style":J.style=v.style&&v.style.cssText;break;default:if(W in H||(W=z(A)[ba]||W),W in H)switch(typeof H[W]){case "string":J[W]=L;break;case "number":J[W]=L.length?Number(L):NaN;break;case "boolean":J[W]="false"!=L.toLowerCase();break;case "function":""===L||-1!=L.search(/[^\w\.]+/i)?J[W]=new Function(L):
J[W]=a.getObject(L,!1)||new Function(L);R.push(W);break;default:ba=H[W],J[W]=ba&&"length"in ba?L?L.split(/\s*,\s*/):[]:ba instanceof Date?""==L?new Date(""):"now"==L?new Date:f.fromISOString(L):ba instanceof l?B.baseUrl+L:t(L)}else J[W]=L}}for(I=0;I<R.length;I++)O=R[I].toLowerCase(),v.removeAttribute(O),v[O]=null;if(Q)try{Q=t.call(C.propsThis,"{"+Q+"}"),a.mixin(J,Q)}catch(da){throw Error(da.toString()+" in data-dojo-props\x3d'"+Q+"'");}a.mixin(J,u);E||(E=A&&(A._noScript||H._noScript)?[]:q("\x3e script[type^\x3d'dojo/']",
v));var S=[],X=[],aa=[],M=[];if(E)for(P=0;P<E.length;P++)O=E[P],v.removeChild(O),u=O.getAttribute(F+"event")||O.getAttribute("event"),C=O.getAttribute(F+"prop"),Q=O.getAttribute(F+"method"),R=O.getAttribute(F+"advice"),I=O.getAttribute("type"),O=this._functionFromScript(O,F),u?"dojo/connect"==I?S.push({method:u,func:O}):"dojo/on"==I?M.push({event:u,func:O}):J[u]=O:"dojo/aspect"==I?S.push({method:Q,advice:R,func:O}):"dojo/watch"==I?aa.push({prop:C,func:O}):X.push(O);A=(E=A.markupFactory||H.markupFactory)?
E(J,v,A):new A(J,v);return A.then?A.then(G):G(A)},scan:function(A,v){function u(S){if(!S.inherited){S.inherited={};var X=S.node,aa=u(S.parent);X={dir:X.getAttribute("dir")||aa.dir,lang:X.getAttribute("lang")||aa.lang,textDir:X.getAttribute(I)||aa.textDir};for(var M in X)X[M]&&(S.inherited[M]=X[M])}return S.inherited}var C=[],E=[],F={},G=(v.scope||B._scopeName)+"Type",H="data-"+(v.scope||B._scopeName)+"-",J=H+"type",I=H+"textdir";H+="mixins";var R=A.firstChild,O=v.inherited;if(!O){O=function M(X,aa){return X.getAttribute&&
X.getAttribute(aa)||X.parentNode&&M(X.parentNode,aa)};O={dir:O(A,"dir"),lang:O(A,"lang"),textDir:O(A,I)};for(var P in O)O[P]||delete O[P]}O={inherited:O};for(var L,K;;)if(R)if(1!=R.nodeType)R=R.nextSibling;else if(L&&"script"==R.nodeName.toLowerCase())(Q=R.getAttribute("type"))&&/^dojo\/\w/i.test(Q)&&L.push(R),R=R.nextSibling;else if(K)R=R.nextSibling;else{var Q=R.getAttribute(J)||R.getAttribute(G);P=R.firstChild;if(Q||P&&(3!=P.nodeType||P.nextSibling)){K=null;if(Q){var W=R.getAttribute(H);L=W?[Q].concat(W.split(/\s*,\s*/)):
[Q];try{K=w(L,v.contextRequire)}catch(S){}K||c.forEach(L,function(S){~S.indexOf("/")&&!F[S]&&(F[S]=!0,E[E.length]=S)});W=K&&!K.prototype._noScript?[]:null;O={types:L,ctor:K,parent:O,node:R,scripts:W};O.inherited=u(O);C.push(O)}else O={node:R,scripts:L,parent:O};L=W;K=R.stopParser||K&&K.prototype.stopParser&&!v.template;R=P}else R=R.nextSibling}else{if(!O||!O.node)break;R=O.node.nextSibling;K=!1;O=O.parent;L=O.scripts}var ba=new b;E.length?(v.contextRequire||D)(E,function(){ba.resolve(c.filter(C,function(S){if(!S.ctor)try{S.ctor=
w(S.types,v.contextRequire)}catch(M){}for(var X=S.parent;X&&!X.types;)X=X.parent;var aa=S.ctor&&S.ctor.prototype;S.instantiateChildren=!(aa&&aa.stopParser&&!v.template);S.instantiate=!X||X.instantiate&&X.instantiateChildren;return S.instantiate}))}):ba.resolve(C);return ba.promise},_require:function(A,v){var u=t("{"+A.innerHTML+"}"),C=[],E=[],F=new b,G=v&&v.contextRequire||D,H;for(H in u)C.push(H),E.push(u[H]);G(E,function(){for(var J=0;J<C.length;J++)a.setObject(C[J],arguments[J]);F.resolve(arguments)});
return F.promise},_scanAmd:function(A,v){var u=new b,C=u.promise;u.resolve(!0);var E=this;q("script[type\x3d'dojo/require']",A).forEach(function(F){C=C.then(function(){return E._require(F,v)});F.parentNode.removeChild(F)});return C},parse:function(A,v){!A||"string"==typeof A||"nodeType"in A||(v=A,A=v.rootNode);var u=A?g.byId(A):e.body();v=v||{};var C=v.template?{template:!0}:{},E=[],F=this,G=this._scanAmd(u,v).then(function(){return F.scan(u,v)}).then(function(H){return F._instantiate(H,C,v,!0)}).then(function(H){return E=
E.concat(H)}).otherwise(function(H){throw H;});a.mixin(E,G);return E}};B.parser=x;h.parseOnLoad&&n(100,x,"parse");return x})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,B,a,c){var h=D.some;return function(g){var e,l;B.isArray(g)?l=g:g&&"object"===typeof g&&(e=g);var r=[];if(e){l=[];for(var k in e)Object.hasOwnProperty.call(e,k)&&(r.push(k),l.push(e[k]));var f={}}else l&&(f=[]);if(!l||!l.length)return(new a).resolve(f);var b=new a;b.promise.always(function(){f=
r=null});var d=l.length;h(l,function(q,m){e||r.push(m);c(q,function(n){b.isFulfilled()||(f[r[m]]=n,0===--d&&b.resolve(f))},b.reject);return b.isFulfilled()});return b.promise}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(D,B,a,c,h){return a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var g=
this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);h.parse(g,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(c.hitch(this,function(e){this._startupWidgets=e;for(var l=0;l<e.length;l++)this._processTemplateNode(e[l],function(r,k){return r[k]},function(r,k,f){return k in r?r.connect(r,k,f):r.on(k,f,!0)});this.containerNode&&
this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(g,e,l){return e(g,"dojoType")||e(g,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){D.forEach(this._startupWidgets,function(g){g&&!g._started&&
g.startup&&g.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(D,B,a){D.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");D.require("dijit.Dialog");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dijit.form.Button");D.require("dojo.cookie");D.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",
[B._Widget,B._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(c){this.clear();this.setSubscriptionState(c);this.setActionMessage(c);this.subscriptionStatusDlg.show()},showOther:function(c){this.clear();this.setOtherSubscriptionStatus(c);D.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(c){if(c&&c.state){var h=this.i18n.subscriptionStatusExpiredMsg;c=c.state.toLowerCase();"expired"===c?h=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===c?h=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===c?h=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===c&&(h=this.i18n.subscriptionStatusRestrictedMsgNoLink);D.attr(this.subscriptionStateDiv,"innerHTML",h)}},setOtherSubscriptionStatus:function(c){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var h=this.i18n.expiredStatus;
c&&("SB_0005"===c?h=this.i18n.suspendedStatus:"SB_0006"===c?h=this.i18n.cancelledStatus:"SB_0007"===c&&(h=this.i18n.expiredStatus));c=esri.substitute({subscriptionState:h},this.i18n.otherSubscriptionStatusMsg);D.attr(this.subscriptionStateDiv,"innerHTML",c)},setActionMessage:function(c){var h=this.getUser();h&&h.role&&("org_admin"===h.role||"account_admin"===h.role)?((c.type||"").toLowerCase(),c.state.toLowerCase(),c=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),D.attr(this.actionNeededDiv,"innerHTML",c)):D.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){D.query(".jevent").connect("onclick",function(c){c.preventDefault()});D.connect(this.subscriptionStatusDlg,"onCancel",D.hitch(this,function(c){this.onCancel(c)}));D.connect(this.subscriptionStatusDlg,"hide",D.hitch(this,function(c){this.onHide(c)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);D.attr(this.subscriptionStateDiv,"innerHTML","");D.attr(this.actionNeededDiv,"innerHTML","");D.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(c){B.byId("subscription-status-dialog").hide()},getUser:function(){var c=D.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(c)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(D,B,a,c,h,g,e){g.extend(D,{waiRole:"",waiState:""});return h("dijit._Templated",[B,a],{constructor:function(){e.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(l,r){var k=this.inherited(arguments),f=r(l,"waiRole");f&&l.setAttribute("role",f);(f=r(l,"waiState"))&&c.forEach(f.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),l.setAttribute("aria-"+b[0],b[1]))});
return k}})})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(D,B,a){return D("arcgisonline/sharing/dijit/dialog/ConfirmDialog",[B,a],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){return D("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",b,{actionBarTemplate:q,buttonOkLabel:d.common.ok,_setButtonOkLabelAttr:function(m){this.okButton.set("label",m)},buttonCancelLabel:d.common.cancel,_setButtonCancelLabelAttr:function(m){this.cancelButton.set("label",m)},busyMessage:d.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(m){e.set(this.cancelButton.domNode,"display",m?"":"none")},
_setHelpLinkInfoAttr:function(m){var n=r(".dijitDialogTitle",this.domNode).shift();g.create("a",{className:"icon-ui-question margin-left-half font-size--1",title:m.title,href:m.url||"#",target:"_blank"},n)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(m){var n=new a;m&&m.message&&(this._messageNode||(this._messageNode=g.create("p",{innerHTML:m,"class":"esriMessageNode trailer-0"},r(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",m.title||""),h.set(this._messageNode,
"innerHTML",m.message||""));this.closeButtonNode&&(this.closeButtonNode.tabIndex=0);this.own(c(this,"hide",B.hitch(this,function(t){n.isResolved()||n.resolve("onCancel");this.destroyRecursive()})),c(this.okButton,"click",B.hitch(this,function(t){t.preventDefault();k.publish("/dlg/onOk");n.isResolved()||n.resolve("onOk");this.onOk()})),c(this.cancelButton,"click",B.hitch(this,function(t){t.preventDefault();k.publish("/dlg/onCancel");n.isResolved()||n.resolve("onCancel");this.onCancel();this.hide()})),
c(this.domNode,"keypress",B.hitch(this,function(t){if(t&&t.keyCode===f.ENTER)this.okButton.onClick(t)})),k.subscribe("/dlg/busyMessage",B.hitch(this,function(t){this.set("busyMessage",t)})),k.subscribe("/esri/disable",B.hitch(this,function(t,z){this.set("busyMessage",z||this.busyMessage||d.common.pleaseWait);this.set("disabled",t)})));this.inherited(arguments);return n},_setDisabledAttr:function(m){r(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(n){n.set("disabled",m)});dojo[m?
"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},"arcgisonline/pages/utils/mapViewer":function(){define(["require","exports","tslib","../../esriGeowConfig","./subscription"],function(D,B,a,c,h){function g(b){return-1<[f.Modern,f.Classic].indexOf(b)}function e(b,d){var q=(new Date("April 13, 2021")).getTime();return d?!1:b>=q}function l(b){var d,q;if(b.isPortal)return b.mapViewer||f.Classic;if(g(b.mapViewer))return b.mapViewer;if(b.subscriptionInfo){var m=e(b.created,b.isPortal);return h.isTrialSubscription(null===
(d=b.subscriptionInfo)||void 0===d?void 0:d.type,b.isPortal)?f.Classic:h.isDeveloperSubscription(null===(q=b.subscriptionInfo)||void 0===q?void 0:q.type,b.isPortal)||m?f.Modern:f.Classic}}function r(b){var d;if(b.isSignedIn){var q=null===(d=b.properties)||void 0===d?void 0:d.mapViewer;if(g(q))return q;if(!b.isViewingOrg)return f.Classic}else if(!b.isViewingOrg)return f.Modern}function k(b){var d,q,m,n,t=!!c["default"].self,z=!(!c["default"].userInfo||!c["default"].userInfo.username&&!c["default"].userInfo.email);
b=r({isSignedIn:z,isViewingOrg:t&&!!c["default"].self.id,properties:b||c["default"].userProperties});var w=null===(q=null===(d=c["default"].self)||void 0===d?void 0:d.portalProperties)||void 0===q?void 0:q.mapViewer;d=c["default"].self.id&&l({mapViewer:w,created:null===(m=c["default"].self)||void 0===m?void 0:m.created,subscriptionInfo:t&&c["default"].self.subscriptionInfo,isPortal:null===(n=c["default"].self)||void 0===n?void 0:n.isPortal});return b||d||(z?f.Classic:f.Modern)}Object.defineProperty(B,
"__esModule",{value:!0});B.determineMapViewerSetting=B.determineUserMapViewer=B.determineOrgMapViewer=B.isOrgPastMapViewerCutOffDate=B.MapViewerType=void 0;c=a.__importDefault(c);var f;(function(b){b.Modern="modern";b.Classic="classic"})(f=B.MapViewerType||(B.MapViewerType={}));B.isOrgPastMapViewerCutOffDate=e;B.determineOrgMapViewer=l;B.determineUserMapViewer=r;B.determineMapViewerSetting=k;B["default"]={MapViewerType:f,isValidMapViewerType:g,isOrgPastMapViewerCutOffDate:e,determineOrgMapViewer:l,
determineUserMapViewer:r,determineMapViewerSetting:k}})},"arcgisonline/pages/utils/subscription":function(){define(["require","exports"],function(D,B){function a(e,l){return l?!1:-1<[B.SubscriptionTypes.TrialDeveloper,B.SubscriptionTypes.DeveloperSubscription,B.SubscriptionTypes.Developer].indexOf(null===e||void 0===e?void 0:e.toLowerCase())}function c(e,l){return l?!1:-1<[B.SubscriptionTypes.Trial,B.SubscriptionTypes.TrialPress].indexOf(e.toLowerCase())}function h(e,l){return l?!1:B.SubscriptionTypes.PersonalUse.toLowerCase()===
e.toLowerCase()}function g(e,l){return l?!1:B.SubscriptionTypes.StudentUse.toLowerCase()===e.toLowerCase()}Object.defineProperty(B,"__esModule",{value:!0});B.isStudentUse=B.isPersonalUse=B.isTrialSubscription=B.isDeveloperSubscription=B.SubscriptionTypes=void 0;B.SubscriptionTypes={Developer:"developer",DeveloperSubscription:"developer subscription",PersonalUse:"Personal Use",StudentUse:"Student Use",Trial:"trial",TrialDeveloper:"trial developer",TrialPress:"trial press"};B.isDeveloperSubscription=
a;B.isTrialSubscription=c;B.isPersonalUse=h;B.isStudentUse=g;B["default"]={isDeveloperSubscription:a,isPersonalUse:h,isStudentUse:g,isTrialSubscription:c}})},"arcgisonline/pages/utils/storage":function(){define(["require","exports","tslib","./strings"],function(D,B,a,c){c=a.__importDefault(c);return function(){function h(){}h.setCookie=function(g,e,l,r){this.writeCookie(g,r?JSON.stringify(e):e,l)};h.getCookie=function(g,e){var l=this.readCookie(g);return l&&e?JSON.parse(l):l};h.setLocalStorageItem=
function(g,e,l){try{window.localStorage.setItem(g,l?JSON.stringify(e):e)}catch(r){}};h.getLocalStorageItem=function(g,e){try{var l=window.localStorage.getItem(g);return l&&e?JSON.parse(l):l}catch(r){}};h.removeLocalStorageItem=function(g){try{window.localStorage.removeItem(g)}catch(e){}};h.setSessionStorageItem=function(g,e,l){try{window.sessionStorage.setItem(g,l?JSON.stringify(e):e)}catch(r){}};h.getSessionStorageItem=function(g,e){try{var l=window.sessionStorage.getItem(g);return l&&e?JSON.parse(l):
l}catch(r){}};h.removeSessionStorageItem=function(g){try{window.sessionStorage.removeItem(g)}catch(e){}};h.readCookie=function(g){var e=document.cookie;g=new RegExp("(?:^|; )"+c["default"].escapeRegExp(g)+"\x3d([^;]*)");return(e=e.match(g))?decodeURIComponent(e[1]):void 0};h.writeCookie=function(g,e,l){l=l||{};var r=null===l||void 0===l?void 0:l.expires;if("number"===typeof r){var k=new Date;r*=864E5;k.setTime(Date.now()+r);r=l.expires=k}"string"!==typeof r&&(null===r||void 0===r?0:r.toUTCString)&&
(l.expires=r.toUTCString());g=g+"\x3d"+encodeURIComponent(e);for(var f in l)g+="; "+f,e=l[f],!0!==e&&(g+="\x3d"+e);document.cookie=g};return h}()})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,B,a,c){D=new D;B.id=c.safeMixin(D,a);return B.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n){B=B([m],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(t){h.mixin(this,t);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(t,z,w){this._nls||(this._nls=n.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var y=this._loginDialog,x=w&&w.error,A=w&&w.token,v=new c(function(){y.onCancel()});if(y.open)return t=Error("BUSY"),t.name="identity-manager:busy",t.code="IdentityManager.1",t.log=!!a.isDebug,v.errback(t),v;d.hide(y.errMsg_);x&&403==x.code&&A&&(e.set(y.errMsg_,"innerHTML",this._nls.forbidden),
d.show(y.errMsg_));y.dfd_=v;y.serverInfo_=z;y.resUrl_=t;y.admin_=w&&w.isAdmin;e.set(y.resLink_,{title:t,innerHTML:"("+(this.getResourceName(t)||this._nls.lblItem)+")"});e.set(y.serverLink_,{title:z.server,innerHTML:(-1!==z.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":z.server)+" "});y.txtPwd_.set("value","");y.show();return v},_createLoginDialog:function(){var t=this._nls,z=b.substitute(t,this._dialogContent);z=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},z);var w=new k({title:t.title,content:z,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(y){y.charOrCode===l.ENTER&&this.execute_()},execute_:function(){var y=this.txtUser_.get("value"),x=this.txtPwd_.get("value"),A=this.dfd_,v=this;if(this.form_.validate()&&y&&x){this.btnSubmit_.set("label",t.lblSigning);var u=f.id.findCredential(v.resUrl_,y),C=function(E){v.btnSubmit_.set("label",
t.lblOk);v.btnSubmit_.set("disabled",!1);d.hide(v.errMsg_);v.hide();k._DialogLevelManager.hide(v);var F=v.serverInfo_;v.dfd_=v.serverInfo_=v.generateDfd_=v.resUrl_=null;var G=u;if(E){var H=E.token;var J=b.isDefined(E.expires)?Number(E.expires):null;var I=!!E.ssl;G?(G.userId=y,G.token=H,G.expires=J,G.validity=E.validity,G.ssl=I,G.creationTime=(new Date).getTime()):G=new q({userId:y,server:F.server,token:H,expires:J,ssl:I,isAdmin:v.admin_,validity:E.validity})}A.callback(G)};u&&!u._enqueued?C():(v.btnSubmit_.set("disabled",
!0),v.generateDfd_=f.id.generateToken(this.serverInfo_,{username:y,password:x},{isAdmin:this.admin_}).addCallback(C).addErrback(function(E){v.btnSubmit_.set("disabled",!1);v.generateDfd_=null;v.btnSubmit_.set("label",t.lblOk);e.set(v.errMsg_,"innerHTML",E&&E.code?t.invalidUser:t.noAuthService);d.show(v.errMsg_)}))}},cancel_:function(){w.generateDfd_&&w.generateDfd_.cancel();var y=w.dfd_,x=w.resUrl_,A=w.serverInfo_;w.btnSubmit_.set("disabled",!1);w.dfd_=w.serverInfo_=w.generateDfd_=w.resUrl_=null;
d.hide(w.errMsg_);k._DialogLevelManager.hide(w);w.esriIdMgr_.onDialogCancel({resourceUrl:x,serverInfo:A});x=Error("ABORTED");x.name="identity-manager:user-aborted";x.code="IdentityManager.2";x.log=!!a.isDebug;y.errback(x)}});z=w.domNode;w.form_=r.byNode(D.query(".esriIdForm",z)[0]);w.txtUser_=r.byNode(D.query(".esriIdUser",z)[0]);w.txtPwd_=r.byNode(D.query(".esriIdPwd",z)[0]);w.btnSubmit_=r.byNode(D.query(".esriIdSubmit",z)[0]);w.btnCancel_=r.byNode(D.query(".esriIdCancel",z)[0]);w.resLink_=D.query(".resLink",
z)[0];w.serverLink_=D.query(".serverLink",z)[0];w.errMsg_=D.query(".esriErrorMsg",z)[0];w.connect(w.txtUser_,"onKeyPress",w.keypressed_);w.connect(w.txtPwd_,"onKeyPress",w.keypressed_);w.connect(w.btnSubmit_,"onClick",w.execute_);w.connect(w.btnCancel_,"onClick",w.onCancel);w.connect(w,"onCancel",w.cancel_);return w}});return f.IdentityManagerDialog=f.IdentityManager=B})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(D,B,a,c){D=D(c.Credential,
{});return a.Credential=D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w){var y={},x=function(E){var F=(new g(E.owningSystemUrl)).host;E=(new g(E.server)).host;var G=/.+\.arcgis\.com$/i;
return G.test(F)&&G.test(E)},A=function(E,F){return!!(x(E)&&F&&c.some(F,function(G){return G.test(E.server)}))},v=null,u=null;try{v=window.localStorage,u=window.sessionStorage}catch(E){}e=D(t,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();r(window,"pageshow",a.hitch(this,this._pageShowHandler))},
defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:q.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",
tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(E){var F=this.serverInfos;F?(E=c.filter(E,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=F.concat(E)):
this.serverInfos=E;c.forEach(E,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var H=f.defaults.io.corsEnabledServers,J=this._getOrigin(G.tokenServiceUrl);q.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));q.canUseXhr(J)||H.push(J.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(E){var F=this.oAuthInfos;F?(c.forEach(E,function(G){(G=this.findOAuthInfo(G.portalUrl))&&F.splice(F.indexOf(G),1)},this),
this.oAuthInfos=F.concat(E)):this.oAuthInfos=E},registerToken:function(E){E=b.mixin({},E);var F=this._sanitizeUrl(E.server),G=this.findServerInfo(F),H=!0,J;G||(G=new d,G.server=this._getServerInstanceRoot(F),G.tokenServiceUrl=this._getTokenSvcUrl(F),G.hasPortal=!0,this.registerServers([G]));(J=this.findCredential(F,E.userId))?(delete E.server,a.mixin(J,E),H=!1):(J=new C({userId:E.userId,server:G.server,token:E.token,expires:E.expires,ssl:E.ssl,scope:this._isServerRsrc(F)?"server":"portal"}),J.resources=
[F],this.credentials.push(J));J.onTokenChange(!1);H||J.refreshServerTokens()},toJson:function(){return b.fixJson({serverInfos:c.map(this.serverInfos,function(E){return E.toJson()}),oAuthInfos:c.map(this.oAuthInfos,function(E){return E.toJson()}),credentials:c.map(this.credentials,function(E){return E.toJson()})})},initialize:function(E){if(E){a.isString(E)&&(E=JSON.parse(E));var F=E.serverInfos,G=E.oAuthInfos;E=E.credentials;if(F){var H=[];c.forEach(F,function(I){I.server&&I.tokenServiceUrl&&H.push(I.declaredClass?
I:new d(I))});H.length&&this.registerServers(H)}if(G){var J=[];c.forEach(G,function(I){I.appId&&J.push(I.declaredClass?I:new w(I))});J.length&&this.registerOAuthInfos(J)}E&&c.forEach(E,function(I){I.userId&&I.server&&I.token&&I.expires&&I.expires>(new Date).getTime()&&(I=I.declaredClass?I:new C(I),I.onTokenChange(),this.credentials.push(I))},this)}},findServerInfo:function(E){var F;E=this._sanitizeUrl(E);c.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,E)&&(F=G);return!!F},
this);return F},findOAuthInfo:function(E){var F;E=this._sanitizeUrl(E);c.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,E)&&(F=G);return!!F},this);return F},findCredential:function(E,F){var G;E=this._sanitizeUrl(E);var H=this._isServerRsrc(E)?"server":"portal";F?c.some(this.credentials,function(J){this._hasSameServerInstance(J.server,E)&&F===J.userId&&J.scope===H&&(G=J);return!!G},this):c.some(this.credentials,function(J){this._hasSameServerInstance(J.server,E)&&-1!==this._getIdenticalSvcIdx(E,
J)&&J.scope===H&&(G=J);return!!G},this);return G},getCredential:function(E,F){var G=!0;if(b.isDefined(F))if(a.isObject(F)){var H=!!F.token;var J=F.error;G=!1!==F.prompt}else H=F;E=this._sanitizeUrl(E);var I=new h(m._dfdCanceller),R=this._isAdminResource(E);if((H=H?this.findCredential(E):null)&&J&&498===J.code)H.destroy();else if(H)return G=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+E),G.name="identity-manager:not-authorized",G.code="IdentityManagerBase.1",
G.httpCode=J&&J.httpCode,G.messageCode=J?J.messageCode:null,G.subcode=J?J.subcode:null,G.details=J?J.details:null,G.log=!!B.isDebug,I.errback(G),I;if(J=this._findCredential(E,F))return I.callback(J),I;var O=this.findServerInfo(E);if(O)!O.hasServer&&this._isServerRsrc(E)&&(O._restInfoDfd=this._getTokenSvcUrl(E,!0),O.hasServer=!0);else{J=this._getTokenSvcUrl(E);if(!J)return G=Error("Unknown resource - could not find token service endpoint."),G.name="identity-manager:unknown-resource",G.code="IdentityManagerBase.2",
G.log=!!B.isDebug,I.errback(G),I;O=new d;O.server=this._getServerInstanceRoot(E);a.isString(J)?(O.tokenServiceUrl=J,O.hasPortal=!0):(O._restInfoDfd=J,O.hasServer=!0);this.registerServers([O])}O.hasPortal&&void 0===O._selfReq&&(G||q.hasSameOrigin(O.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(P){return P.tokenServiceUrl===O.tokenServiceUrl}))&&(O._selfReq={owningTenant:F&&F.owningTenant,selfDfd:this._getPortalSelf(O.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
E)});return this._enqueue(E,O,F,I,R)},getResourceName:function(E){return this._isRESTService(E)?E.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(E)&&E.replace(this._gwUser,"$1")||this._gwItem.test(E)&&E.replace(this._gwItem,"$1")||this._gwGroup.test(E)&&E.replace(this._gwGroup,"$1")||""},generateToken:function(E,F,G){var H=this._rePortalTokenSvc.test(E.tokenServiceUrl),J=new g(window.location.href.toLowerCase()),I=!F;var R=E.shortLivedTokenValidity;if(F){var O=
k.id.tokenValidity||R||k.id.defaultTokenValidity;O>R&&(O=R)}if(G){var P=G.isAdmin;var L=G.serverUrl;var K=G.token;var Q=G.ssl;E.customParameters=G.customParameters}if(P)R=E.adminTokenServiceUrl;else{R=E.tokenServiceUrl;var W=new g(R.toLowerCase());E.webTierAuth&&G&&G.serverUrl&&!Q&&"http"===J.scheme&&(q.hasSameOrigin(J.uri,R,!0)||"https"===W.scheme&&J.host===W.host&&"7080"===J.port&&"7443"===W.port)&&(R=R.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));I&&H&&(R=R.replace(/\/rest/i,""))}P=a.mixin({url:R,
content:a.mixin({request:"getToken",username:F&&F.username,password:F&&F.password,serverUrl:L,token:K,expiration:O,referer:P||H?window.location.host:null,client:P?"referer":null,f:"json"},E.customParameters),handleAs:"json",callbackParamName:I?"callback":void 0},G&&G.ioArgs);G={usePost:!I,disableIdentityLookup:!0,useProxy:this._useProxy(E,G)};H||(P.withCredentials=!1);H=n(P,G);H.addCallback(function(ba){if(!ba||!ba.token)return ba=Error("Unable to generate token"),ba.name="identity-manager:authentication-failed",
ba.code="IdentityManagerBase.3",ba.log=!!B.isDebug,ba;var S=E.server;y[S]||(y[S]={});F&&(y[S][F.username]=F.password);ba.validity=O;return ba});H.addErrback(function(ba){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(E){var F=new h;this.checkAppAccess(E,"").then(function(G){F.resolve(G.credential)})["catch"](function(G){F.reject(G)});return F},checkAppAccess:function(E,F,G){var H=this,J=!1;return this.getCredential(E,{prompt:!1}).then(function(I){var R={f:"json"};if("portal"===
I.scope)if(F&&(H._doPortalSignIn(E)||G&&G.force)){var O=I.server+"/sharing/rest/oauth2/validateAppAccess";R.client_id=F}else if(I.token)O=I.server+"/sharing/rest";else return{credential:I};else if(I.token)O=I.server+"/rest/services";else return{credential:I};I.token&&(R.token=I.token);return n({url:O,content:R,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(P){if(!1===P.valid){var L=Error("You are currently signed in as: '"+I.userId+"'.  You do not have access to this app: '"+
F+"'.");L.name="identity-manager:not-authorized";L.code="IdentityManagerBase.1";L.log=!!B.isDebug;L.details=P;throw L;}J=!!P.viewOnlyUserTypeApp;return{credential:I}})["catch"](function(P){if("IdentityManagerBase.1"===P.code||400===P.code)throw 400===P.code&&(P.name="identity-manager:invalid-request"),P;if(498===P.code)throw I.destroy(),P=Error("User is not signed in."),P.name="identity-manager:not-authenticated",P.code="IdentityManagerBase.6",P.log=!!B.isDebug,P;return{credential:I}})}).then(function(I){return{credential:I.credential,
viewOnly:J}})},setProtocolErrorHandler:function(E){this._protocolFunc=E},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var E=this.credentials.slice();c.forEach(E,function(F){F.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(E){E||(E="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
r(window,"message",function(F){(F.origin===window.location.origin||b.endsWith(F.origin,".arcgis.com"))&&F.data&&"arcgis:auth:requestCredential"===F.data.type&&this.getCredential(E).then(function(G){F.source.postMessage({type:"arcgis:auth:credential",credential:{expires:G.expires,server:G.server,ssl:G.ssl,token:G.token,userId:G.userId}},F.origin)})["catch"](function(G){F.source.postMessage({type:"arcgis:auth:error",error:{name:G.name,message:G.message}},F.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var E=window.location.hash;if(E){"#"===E.charAt(0)&&(E=E.substring(1));E=l.queryToObject(E);var F=!1;if(E.access_token&&E.expires_in&&E.state&&E.hasOwnProperty("username"))try{E.state=JSON.parse(E.state),E.state.portalUrl&&(this._oAuthLocationParams=E,F=!0)}catch(H){}else if(E.error&&E.error_description&&"access_denied"===E.error&&(F=!0,E.state))try{E.state=JSON.parse(E.state)}catch(H){}F&&
(window.location.hash=E.state&&E.state.hash||"")}if(E=window.location.search){"?"===E.charAt(0)&&(E=E.substring(1));E=l.queryToObject(E);F=!1;if(E.code&&E.state)try{E.state=JSON.parse(E.state),E.state.portalUrl&&E.state.uid&&(this._oAuthLocationParams=E,F=!0)}catch(H){}else if(E.error&&E.error_description&&"access_denied"===E.error&&(F=!0,E.state))try{E.state=JSON.parse(E.state)}catch(H){}if(F){var G=b.mixin({},E);"code error error_description message_code persist state".split(" ").forEach(function(H){delete G[H]});
F=l.objectToQuery(G);window.history.replaceState(window.history.state,"",window.location.pathname+(F?"?"+F:"")+(E.state&&E.state.hash||""))}}},_getOAuthToken:function(E,F,G,H,J){E=E.replace(/^http:/i,"https:");return n({url:E+"/sharing/rest/oauth2/token",content:H&&J?{grant_type:"authorization_code",code:F,redirect_uri:H,client_id:G,code_verifier:J}:{grant_type:"refresh_token",refresh_token:F,client_id:G}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(E){E.persisted&&this.isBusy()&&
this._rejectOnPersistedPageShow&&(E=Error("ABORTED"),E.name="identity-manager:user-aborted",E.code="IdentityManager.2",E.log=!!B.isDebug,this._errbackFunc(E))},_findCredential:function(E,F){var G=-1,H,J,I=F&&F.token;var R=F&&F.resource;var O=this._isServerRsrc(E)?"server":"portal",P=c.filter(this.credentials,function(W){return this._hasSameServerInstance(W.server,E)&&W.scope===O},this);E=R||E;if(P.length)if(1===P.length){R=P[0];var L=(H=(J=this.findServerInfo(R.server))&&J.owningSystemUrl)&&this.findCredential(H,
R.userId);G=this._getIdenticalSvcIdx(E,R);if(I)-1!==G&&(R.resources.splice(G,1),this._removeResource(E,L));else return-1===G&&R.resources.push(E),this._addResource(E,L),R}else{var K,Q;c.some(P,function(W){Q=this._getIdenticalSvcIdx(E,W);return-1!==Q?(K=W,L=(H=(J=this.findServerInfo(K.server))&&J.owningSystemUrl)&&this.findCredential(H,K.userId),G=Q,!0):!1},this);if(I)K&&(K.resources.splice(G,1),this._removeResource(E,L));else if(K)return this._addResource(E,L),K}},_findOAuthInfo:function(E){var F=
this.findOAuthInfo(E);F||c.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,E)&&(F=G);return!!F},this);return F},_addResource:function(E,F){F&&-1===this._getIdenticalSvcIdx(E,F)&&F.resources.push(E)},_removeResource:function(E,F){var G=-1;F&&(G=this._getIdenticalSvcIdx(E,F),-1<G&&F.resources.splice(G,1))},_useProxy:function(E,F){return F&&F.isAdmin&&!q.hasSameOrigin(E.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(E.tokenServiceUrl)&&10.1==E.currentVersion&&!q.hasSameOrigin(E.tokenServiceUrl,
window.location.href)},_getOrigin:function(E){E=new g(E);return E.scheme+"://"+E.host+(b.isDefined(E.port)?":"+E.port:"")},_getServerInstanceRoot:function(E){var F=E.toLowerCase(),G=F.indexOf(this._agsRest);-1===G&&this._isAdminResource(E)&&(G=this._agsAdmin.test(E)?E.replace(this._agsAdmin,"$1").length:E.search(this._adminSvcs));-1===G&&(G=F.indexOf("/sharing"));-1===G&&"/"===F.substr(-1)&&(G=F.length-1);return-1<G?E.substring(0,G):E},_hasSameServerInstance:function(E,F){"/"===E.substr(-1)&&(E=E.slice(0,
-1));E=E.toLowerCase();F=this._getServerInstanceRoot(F).toLowerCase();E=this._normalizeAGOLorgDomain(E);F=this._normalizeAGOLorgDomain(F);E=E.substr(E.indexOf(":"));F=F.substr(F.indexOf(":"));return E===F},_normalizeAGOLorgDomain:function(E){var F=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;F.test(E)?E=E.replace(F,"https://www.arcgis.com"):G.test(E)?E=E.replace(G,"https://devext.arcgis.com"):
H.test(E)&&(E=E.replace(H,"https://qaext.arcgis.com"));return E},_sanitizeUrl:function(E){var F=(f.defaults.io.proxyUrl||"").toLowerCase(),G=F?E.toLowerCase().indexOf(F+"?"):-1;-1!==G&&(E=E.substring(G+F.length+1));E=q.normalize(E);return q.urlToObject(E).path},_isRESTService:function(E){return-1<E.indexOf(this._agsRest)},_isAdminResource:function(E){return this._agsAdmin.test(E)||this._adminSvcs.test(E)},_isServerRsrc:function(E){return this._isRESTService(E)||this._isAdminResource(E)},_isIdenticalService:function(E,
F){if(this._isRESTService(E)&&this._isRESTService(F)){var G=this._getSuffix(E).toLowerCase(),H=this._getSuffix(F).toLowerCase();var J=G===H;J||(J=/(.*)\/(MapServer|FeatureServer).*/ig,J=G.replace(J,"$1")===H.replace(J,"$1"))}else this._isAdminResource(E)&&this._isAdminResource(F)?J=!0:this._isServerRsrc(E)||this._isServerRsrc(F)||!this._isPortalDomain(E)||(J=!0);return J},_isPortalDomain:function(E){var F=new g(E.toLowerCase()),G=this._portalConfig;E=c.some(this._gwDomains,function(H){return H.regex.test(F.uri)});
!E&&G&&(E=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),F.uri));E||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new g(G)).authority),this._arcgisUrl&&(E=this._arcgisUrl.toLowerCase()===F.authority));E||(E=c.some(this._portals,function(H){return this._hasSameServerInstance(H,F.uri)},this));return E=E||this._agsPortal.test(F.path)},_isIdProvider:function(E,F){var G=-1,H=-1;c.forEach(this._gwDomains,function(O,P){-1===G&&O.regex.test(E)&&
(G=P);-1===H&&O.regex.test(F)&&(H=P)});var J=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)J=!0}else if(1===G){if(1===H||2===H)J=!0}else 2===G?2===H&&(J=!0):3===G&&3===H&&(J=!0);if(!J){var I=this.findServerInfo(F),R=I&&I.owningSystemUrl;R&&x(I)&&this._isPortalDomain(R)&&this._isIdProvider(E,R)&&(J=!0)}return J},_isPublic:function(E){E=this._sanitizeUrl(E);return c.some(this._publicUrls,function(F){return F.test(E)})},_getIdenticalSvcIdx:function(E,F){var G=-1;c.some(F.resources,function(H,J){return this._isIdenticalService(E,
H)?(G=J,!0):!1},this);return G},_getSuffix:function(E){return E.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(E){if(this._isRESTService(E)||this._isAdminResource(E)){var F=this._getServerInstanceRoot(E);var G=F+"/admin/generateToken";E=F+"/rest/info";F=n({url:E,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});F.adminUrl_=G;return F}if(this._isPortalDomain(E)){var H="";c.some(this._gwDomains,function(J){J.regex.test(E)&&(H=J.tokenServiceUrl);
return!!H});H||c.some(this._portals,function(J){this._hasSameServerInstance(J,E)&&(H=J+this._gwTokenUrl);return!!H},this);H||(G=E.toLowerCase().indexOf("/sharing"),-1!==G&&(H=E.substring(0,G)+this._gwTokenUrl));H||(H=this._getOrigin(E)+this._gwTokenUrl);H&&(G=(new g(E)).port,/^http:\/\//i.test(E)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==E.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(E,
F,G){return n({url:E+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:F,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(E,F){E=E.replace(/^http:/i,"https:");return n({url:E+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":F,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(E,
F){var G="";c.some(this._gwDomains,function(J){J.regex.test(E)&&(G=J.customBaseUrl);return!!G});if(G){var H=new h;H.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0});return H}"https:"===window.location.protocol?E=E.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(F)&&(E=E.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return n({url:E,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},
_doPortalSignIn:function(E){var F=this._portalConfig,G=window.location.href,H=this.findServerInfo(E);return(F||this._isPortalDomain(G))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(E))&&(this._isIdProvider(G,E)||F&&(this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),E)||this._isIdProvider(F.restBaseUrl,E))||q.hasSameOrigin(G,E,!0))?!0:!1},_checkProtocol:function(E,F,G,H){var J=!0;H=H?F.adminTokenServiceUrl:F.tokenServiceUrl;0!==
a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||f.defaults.io.useCors&&(q.canUseXhr(H)||q.canUseXhr(q.getProxyUrl(!0).path))||(J=this._protocolFunc?!!this._protocolFunc({resourceUrl:E,serverInfo:F}):!1,J||(E=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),E.name="identity-manager:aborted",E.code="IdentityManagerBase.4",E.log=!!B.isDebug,G(E)));return J},_enqueue:function(E,F,G,H,J,I){H||(H=new h(m._dfdCanceller));
H.resUrl_=E;H.sinfo_=F;H.options_=G;H.admin_=J;H.refresh_=I;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(E),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(E){this._busy=E;this._rejectOnPersistedPageShow=!1;var F=this,G=function(L){var K=E.options_&&E.options_.resource,Q=E.resUrl_,W=E.refresh_,ba=!1;-1===c.indexOf(F.credentials,L)&&(W&&-1!==
c.indexOf(F.credentials,W)?(W.userId=L.userId,W.token=L.token,W.expires=L.expires,W.validity=L.validity,W.ssl=L.ssl,W.creationTime=L.creationTime,ba=!0,L=W):F.credentials.push(L));L.resources||(L.resources=[]);-1===L.resources.indexOf(K||Q)&&L.resources.push(K||Q);L.scope=F._isServerRsrc(Q)?"server":"portal";L.onTokenChange();K=F._soReqs;var S={};F._soReqs=[];c.forEach(K,function(X){if(!this._isIdenticalService(Q,X.resUrl_)){var aa=this._getSuffix(X.resUrl_);S[aa]||(S[aa]=!0,L.resources.push(X.resUrl_))}},
F);E.callback(L);c.forEach(K,function(X){this._hasSameServerInstance(this._getServerInstanceRoot(Q),X.resUrl_)?X.callback(L):this._soReqs.push(X)},F);F._busy=E.resUrl_=E.sinfo_=E.refresh_=null;if(!ba)F.onCredentialCreate({credential:L});F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&F._doSignIn(F._xoReqs.shift())},H=function(L){E.errback(L);F._busy=E.resUrl_=E.sinfo_=E.refresh_=null;F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&F._doSignIn(F._xoReqs.shift())},
J=function(L,K,Q,W){var ba=E.sinfo_,S=!E.options_||!1!==E.options_.prompt,X=ba.hasPortal&&F._findOAuthInfo(E.resUrl_);if(L)G(new C({userId:L,server:ba.server,token:Q||null,expires:b.isDefined(W)?Number(W):null,ssl:!!K}));else if(window!==window.parent&&F._appUrlObj.query&&F._appUrlObj.query["arcgis-auth-origin"]&&F._appUrlObj.query["arcgis-auth-portal"]&&F._hasSameServerInstance(F._getServerInstanceRoot(F._appUrlObj.query["arcgis-auth-portal"]),E.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},
F._appUrlObj.query["arcgis-auth-origin"]);var aa=r(window,"message",function(va){if(va.source===window.parent&&va.data)if("arcgis:auth:credential"===va.data.type&&va.data.credential.expires<Date.now()&&(va.data.type="arcgis:auth:error",va.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===va.data.type)aa.remove(),G(new C(va.data.credential));else if("arcgis:auth:error"===va.data.type){aa.remove();va=va.data.error;switch(va.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Ea=
"IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Ea="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":Ea="IdentityManager.3";"tokenExpiredError"===va.name&&(va.name="identity-manager:credential-request-failed",va.message="Parent application's token has expired.");break;case "identity-manager:aborted":Ea=
"IdentityManager.4";break;case "identity-manager:not-authenticated":Ea="IdentityManager.6";break;case "identity-manager:invalid-request":Ea=400}var Ga=Error(va.message);Ga.name=va.name;Ga.code=Ea;Ga.log=!!B.isDebug;H(Ga)}})}else if(X){var M=X._oAuthCred;M||(L=new z(X,v),K=new z(X,u),L.isValid()&&K.isValid()?L.expires>K.expires?(M=L,K.destroy()):(M=K,L.destroy()):M=L.isValid()?L:K,X._oAuthCred=M);if(M.isValid()){var da=new C({userId:M.userId,server:ba.server,token:M.token,expires:M.expires,ssl:M.ssl,
_oAuthCred:M});var ea=X.appId!==M.appId&&F._doPortalSignIn(E.resUrl_);ea||M.refreshToken?(M.refreshToken?E._pendingDfd=F._getOAuthToken(ba.server,M.refreshToken,M.appId).then(function(va){da.expires=Date.now()+1E3*va.expires_in;da.token=va.access_token;return da}):(L=new h,L.resolve(da),E._pendingDfd=L),E._pendingDfd.then(function(va){return ea?F._exchangeToken(va.server,X.appId,va.token).then(function(Ea){va.token=Ea;return va})["catch"](function(){return va}):va}).then(function(va){G(va)})["catch"](function(){M.destroy();
J()})):G(da)}else if(F._oAuthLocationParams&&F._hasSameServerInstance(X.portalUrl,F._oAuthLocationParams.state.portalUrl)&&(F._oAuthLocationParams.access_token||F._oAuthLocationParams.code&&F._oAuthLocationParams.state.uid===M.stateUID&&M.codeVerifier))L=F._oAuthLocationParams,F._oAuthLocationParams=null,E._pendingDfd=F._processOAuthResponseParams(L,X,ba).then(function(va){G(va)})["catch"](H);else{var Z=function(){S?E._pendingDfd=F.oAuthSignIn(E.resUrl_,ba,X,E.options_).addCallbacks(G,H):(ka=Error("User is not signed in."),
ka.name="identity-manager:not-authenticated",ka.code="IdentityManagerBase.6",ka.log=!!B.isDebug,H(ka))};F._doPortalSignIn(E.resUrl_)?E._pendingDfd=F._getPlatformSelf(ba.server,X.appId).then(function(va){var Ea=va.portalUrl;!Ea||q.hasSameOrigin(Ea,window.location.origin,!0)?(da=new C({userId:va.username,server:ba.server,expires:Date.now()+1E3*va.expires_in,token:va.token}),G(da)):Z()})["catch"](Z):Z()}}else if(S)F._checkProtocol(E.resUrl_,ba,H,E.admin_)&&(L=E.options_,E.admin_&&(L=L||{},L.isAdmin=
!0),E._pendingDfd=F.signIn(E.resUrl_,ba,L).addCallbacks(G,H));else{var ka=Error("User is not signed in.");ka.name="identity-manager:not-authenticated";ka.code="IdentityManagerBase.6";ka.log=!!B.isDebug;H(ka)}},I=function(){var L=E.sinfo_,K=L.owningSystemUrl,Q=E.options_,W;if(Q){var ba=Q.token;var S=Q.error;var X=Q.prompt}(W=F._findCredential(K,{token:ba,resource:E.resUrl_}))||c.some(F.credentials,function(aa){this._isIdProvider(K,aa.server)&&(W=aa);return!!W},F);W?(Q=F.findCredential(E.resUrl_,W.userId))?
G(Q):A(L,F._legacyFed)?(Q=W.toJson(),Q.server=L.server,Q.resources=null,G(new C(Q))):(E._pendingDfd=F.generateToken(F.findServerInfo(W.server),null,{serverUrl:E.resUrl_,token:W.token,ssl:W.ssl})).addCallbacks(function(aa){G(new C({userId:W.userId,server:L.server,token:aa.token,expires:b.isDefined(aa.expires)?Number(aa.expires):null,ssl:!!aa.ssl,isAdmin:E.admin_,validity:aa.validity}))},H):(F._busy=null,ba&&(E.options_.token=null),(E._pendingDfd=F.getCredential(K.replace(/\/?$/,"/sharing"),{resource:E.resUrl_,
owningTenant:L.owningTenant,token:ba,error:S,prompt:X})).addCallbacks(function(aa){F._enqueue(E.resUrl_,E.sinfo_,E.options_,E,E.admin_)},function(aa){H(aa)}))};this._errbackFunc=H;var R=E.sinfo_.owningSystemUrl,O=this._isServerRsrc(E.resUrl_),P=E.sinfo_._restInfoDfd;P?P.addCallbacks(function(L){var K=E.sinfo_;K._restInfoDfd&&(K.adminTokenServiceUrl=K._restInfoDfd.adminUrl_,K._restInfoDfd=null,K.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,L)||a.getObject("authInfo.tokenServiceUrl",!1,
L)||a.getObject("tokenServiceUrl",!1,L),K.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,L),K.currentVersion=L.currentVersion,K.owningTenant=L.owningTenant,(L=K.owningSystemUrl=L.owningSystemUrl)&&F._portals.push(L));O&&K.owningSystemUrl?I():J()},function(){E.sinfo_._restInfoDfd=null;var L=Error("Unknown resource - could not find token service endpoint.");L.name="identity-manager:server-identification-failed";L.code="IdentityManagerBase.2";L.log=!!B.isDebug;H(L)}):O&&R?
I():E.sinfo_._selfReq?E.sinfo_._selfReq.selfDfd.then(function(L){var K={};if(L){var Q=L.user&&L.user.username;K.username=Q;K.allSSL=L.allSSL;var W=L.supportsOAuth;var ba=parseFloat(L.currentVersion);if("multitenant"===L.portalMode)var S=L.customBaseUrl;E.sinfo_.currentVersion=ba}E.sinfo_.webTierAuth=!!Q;return Q&&F.normalizeWebTierAuth?F.generateToken(E.sinfo_,null,{ssl:K.allSSL}).addBoth(function(X){K.portalToken=X&&X.token;K.tokenExpiration=X&&X.expires;return K}):!Q&&W&&4.4<=ba&&!F._findOAuthInfo(E.resUrl_)?
F._generateOAuthInfo({portalUrl:E.sinfo_.server,customBaseUrl:S,owningTenant:E.sinfo_._selfReq.owningTenant}).always(function(){return K}):K}).always(function(L){E.sinfo_._selfReq=null;L?J(L.username,L.allSSL,L.portalToken,L.tokenExpiration):J()}):J()},_generateOAuthInfo:function(E){var F=this,G=E.portalUrl,H=E.customBaseUrl,J=E.owningTenant;if(E=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var I=window.location.href;var R=I.indexOf("?");-1<R&&(I=I.slice(0,
R));R=I.search(/\/(apps|home)\//);I=-1<R?I.slice(0,R):null}E&&I?(this._hasTestedIfAppIsOnPortal=!0,E=n({url:I+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){F.defaultOAuthInfo=new w({appId:"arcgisonline",popupCallbackUrl:I+"/home/oauth-callback.html"})})):(E=new h,E.resolve(),E=E.promise);return E.then(function(){if(F.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),n({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:J,client_id:F.defaultOAuthInfo.appId,
redirect_uri:q.getAbsoluteUrl(F.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(O){if(O.valid){var P=F.defaultOAuthInfo.clone();P.portalUrl=O.urlKey&&H?"https://"+O.urlKey.toLowerCase()+"."+H:G;P.popup=window!==window.top||!(q.hasSameOrigin(G,window.location.origin)||F._gwDomains.some(function(L){return L.regex.test(G)&&L.regex.test(window.location.origin)}));F.oAuthInfos.push(P)}})})}});var C=D(t,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,
constructor:function(E){a.mixin(this,E);this.resources=this.resources||[];b.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var E=this,F=this.resources&&this.resources[0],G=k.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,J=!!H&&"server"===this.scope,I=J&&A(G,k.id._legacyFed),R=J&&k.id.findServerInfo(H),O,P=(O=G.webTierAuth)&&k.id.normalizeWebTierAuth,L=y[this.server];L=L&&L[this.userId];var K={username:this.userId,password:L};
if(!O||P)if(J&&!R&&c.some(k.id.serverInfos,function(ba){k.id._isIdProvider(H,ba.server)&&(R=ba);return!!R}),O=R&&k.id.findCredential(R.server,this.userId),!J||O)if(I)O.refreshToken();else{if(J)var Q={serverUrl:F,token:O&&O.token,ssl:O&&O.ssl};else if(P)K=null,Q={ssl:this.ssl};else if(L)this.isAdmin&&(Q={isAdmin:!0});else{if(F){F=k.id._sanitizeUrl(F);this._enqueued=1;var W=k.id._enqueue(F,G,null,null,this.isAdmin,this);W.addCallback(function(){E._enqueued=0;E.refreshServerTokens()}).addErrback(function(){E._enqueued=
0})}return W}return k.id.generateToken(J?R:G,J?null:K,Q).addCallback(function(ba){E.token=ba.token;E.expires=b.isDefined(ba.expires)?Number(ba.expires):null;E.creationTime=(new Date).getTime();E.validity=ba.validity;E.onTokenChange();E.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&c.forEach(k.id.credentials,function(E){var F=k.id.findServerInfo(E.server),G=F&&F.owningSystemUrl;E!==this&&E.userId===this.userId&&G&&"server"===E.scope&&(k.id._hasSameServerInstance(this.server,
G)||k.id._isIdProvider(G,this.server))&&(A(F,k.id._legacyFed)?(E.token=this.token,E.expires=this.expires,E.creationTime=this.creationTime,E.validity=this.validity,E.onTokenChange()):E.refreshToken())},this)},onTokenChange:function(E){clearTimeout(this._refreshTimer);var F=this.server&&k.id.findServerInfo(this.server),G=(F=F&&F.owningSystemUrl)&&k.id.findServerInfo(F);!1!==E&&(!F||"portal"===this.scope||G&&G.webTierAuth&&!k.id.normalizeWebTierAuth)&&(b.isDefined(this.expires)||b.isDefined(this.validity))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var E=c.indexOf(k.id.credentials,this);-1<E&&k.id.credentials.splice(E,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var E=b.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),F=this.resources;F&&0<F.length&&(E.resources=F.slice());return E},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var E=6E4*this.tokenRefreshBuffer,F=Math.pow(2,31)-1,G=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>G?G=0:G>F&&(G=F);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),G>E?G-E:G)}});e.Credential=C;return k.IdentityManagerBase=
e})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.ServerInfo",constructor:function(g){B.mixin(this,g)},toJson:function(){return h.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,
hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return c.ServerInfo=D})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(D,B,a){B=B(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(c,h){this.oAuthInfo=c;this.storage=h;this._init()},isValid:function(){var c=!1;if(this.oAuthInfo&&
this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)c=!0;else{var h=Date.now();this.expires>h&&(this.expires-h)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(c=!0)}return c},save:function(){if(!this.storage)return!1;var c=this._load(),h=this.oAuthInfo;if(h&&h.authNamespace&&h.portalUrl){var g=c[h.authNamespace];g||(g=c[h.authNamespace]={});this.appId||(this.appId=h.appId);g[h.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,
ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(c))}catch(e){return!1}return!0}return!1},destroy:function(){var c=this._load(),h=this.oAuthInfo;if(h&&h.appId&&h.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var g=h.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",e=new FormData;e.append("f","json");e.append("auth_token",this.refreshToken||this.token);
e.append("client_id",h.appId);e.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(g,e);else{var l=new XMLHttpRequest;l.open("POST",g);l.send(e)}}if(h&&h.authNamespace&&h.portalUrl&&this.storage&&(g=c[h.authNamespace])){delete g[h.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(c))}catch(r){}}h&&(this.oAuthInfo=h._oAuthCred=null)},_init:function(){var c=this._load(),h=this.oAuthInfo;h&&h.authNamespace&&
h.portalUrl&&(c=c[h.authNamespace])&&(c=c[h.portalUrl])&&(this.appId=c.appId,this.codeVerifier=c.codeVerifier,this.expires=c.expires,this.refreshToken=c.refreshToken,this.ssl=c.ssl,this.stateUID=c.stateUID,this.token=c.token,this.userId=c.userId)},_load:function(){var c={};if(this.storage){var h=this.storage.getItem("esriJSAPIOAuth");if(h)try{c=JSON.parse(h)}catch(g){}}return c}});return D.OAuthCredential=B})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang",
"dojo/has"],function(D,B,a,c,h){var g=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(e){c.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},e)},_oAuthCred:null,toJson:function(){return B.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,
minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new g(this.toJson())}});c.setObject("arcgis.OAuthInfo",g,D);return g})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(D,B,a,c,h,g,e,l){return D("dijit.form.Form",[h,g,e,l],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(r){B.set(this.domNode,
"encType",r);c("ie")&&(this.domNode.encoding=r);this._set("encType",r)},reset:function(r){var k={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:r?r.target:this.domNode,target:r?r.target:this.domNode};!1!==this.onReset(k)&&k.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(r){this.reset(r);r.stopPropagation();r.preventDefault();return!1},_onSubmit:function(r){var k=this.constructor.prototype;if(this.execute!=
k.execute||this.onExecute!=k.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(r)&&(r.stopPropagation(),r.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d){var q=null,m=null;try{q=window.localStorage,m=window.sessionStorage}catch(t){}var n=window.crypto||window.msCrypto;return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(t){this._oAuthRedirectFunc=t},oAuthSignIn:function(t,z,w,y){var x=this._oAuthDfd=new l;x.resUrl_=t;x.sinfo_=z;x.oinfo_=w;var A=w._oAuthCred;if(A.storage&&("authorization-code"===w.flowType||"auto"===w.flowType&&!w.popup&&8.4<=z.currentVersion)){var v=n.getRandomValues(new Uint8Array(32));var u=c.base64UrlEncode(v);A.codeVerifier=u;v=n.getRandomValues(new Uint8Array(32));A.stateUID=c.base64UrlEncode(v);A.save()||(A.codeVerifier=u=null)}else A.codeVerifier=null;var C=
this;this._getCodeChallenge(u).then(function(E){var F=!y||!1!==y.oAuthPopupConfirmation;if(!w.popup||!F)return C._doOAuthSignIn(t,z,w,E),x;x.codeChallenge_=E;C._nls||(C._nls=f.identity);C.oAuthDialog||(C.oAuthDialog=C._createOAuthDialog());E=C.oAuthDialog;F=y&&y.error;var G=y&&y.token;B.hide(E.errMsg_);F&&403==F.code&&G&&(k.set(E.errMsg_,"innerHTML",C._nls.forbidden),B.show(E.errMsg_));k.set(E.serverLink_,{title:z.server,innerHTML:-1!==z.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":
z.server});E.show()});return x},setOAuthResponseHash:function(t){t&&("#"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(b.queryToObject(t)))},_createOAuthDialog:function(){var t=this._nls,z=a.substitute(t,this._oAuthDialogContent);z=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},z);var w=new h({title:t.title,content:z,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var y=w.esriIdMgr_._oAuthDfd;
w.hide_();w.esriIdMgr_._doOAuthSignIn(y.resUrl_,y.sinfo_,y.oinfo_,y.codeChallenge_)},cancel_:function(){var y=w.esriIdMgr_._oAuthDfd;w.esriIdMgr_._oAuthDfd=null;w.hide_();var x=Error("ABORTED");x.code="IdentityManager.2";x.log=!!e.isDebug;y.errback(x)},hide_:function(){B.hide(w.errMsg_);w.hide();h._DialogLevelManager.hide(w)}});t=w.domNode;w.btnSubmit_=g.byNode(r.query(".esriIdSubmit",t)[0]);w.btnCancel_=g.byNode(r.query(".esriIdCancel",t)[0]);w.serverLink_=r.query(".serverLink",t)[0];w.errMsg_=r.query(".esriErrorMsg",
t)[0];w.connect(w.btnSubmit_,"onClick",w.execute_);w.connect(w.btnCancel_,"onClick",w.onCancel);w.connect(w,"onCancel",w.cancel_);return w},_doOAuthSignIn:function(t,z,w,y){var x=this,A=w._oAuthCred,v={portalUrl:w.portalUrl};!w.popup&&w.preserveUrlHash&&window.location.hash&&(v.hash=window.location.hash);A.stateUID&&(v.uid=A.stateUID);v={client_id:w.appId,response_type:A.codeVerifier?"code":"token",state:JSON.stringify(v),expiration:w.expiration,locale:w.locale,redirect_uri:this._getRedirectURI(w,
!!A.codeVerifier)};w.forceLogin&&(v.force_login=!0);w.forceUserId&&w.userId&&(v.prepopulatedusername=w.userId);!w.popup&&this._doPortalSignIn(t)&&(v.redirectToUserOrgUrl=!0);A.codeVerifier&&(v.code_challenge=y||A.codeVerifier,v.code_challenge_method=y?"S256":"plain");y=w.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";A=y+"?"+b.objectToQuery(v);if(w.popup){var u=window.open(A,"esriJSAPIOAuth",w.popupWindowFeatures);u?(u.focus(),this._oAuthDfd.oAuthWin_=u,this._oAuthIntervalId=setInterval(function(){if(u.closed){clearInterval(x._oAuthIntervalId);
x._oAuthOnPopupHandle.remove();var C=x._oAuthDfd;if(C){var E=Error("ABORTED");E.code="IdentityManager.2";E.log=!!e.isDebug;C.errback(E)}}},500),x._oAuthOnPopupHandle=d.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(C){"arcgis:auth:hash"===C.type?x.setOAuthResponseHash(C.detail):x._setOAuthResponseQueryString(C.detail)})):(t=Error("ABORTED"),t.name="identity-manager:user-aborted",t.code="IdentityManager.2",t.log=!!e.isDebug,this._oAuthDfd.errback(t))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:v,authorizeUrl:y,resourceUrl:t,serverInfo:z,oAuthInfo:w}):window.location.href=A},_getCodeChallenge:function(t){if(t&&window.isSecureContext)return t=(new TextEncoder).encode(t),n.subtle.digest("SHA-256",t).then(function(z){return c.base64UrlEncode(new Uint8Array(z))});t=new l;t.resolve(null);return t},_getRedirectURI:function(t,z){var w=window.location.href.replace(/#.*$/,"");if(t.popup)return c.getAbsoluteUrl(t.popupCallbackUrl);
if(z){var y=c.urlToObject(w);if(y.query)return"code error error_description message_code persist state".split(" ").forEach(function(x){delete y.query[x]}),(w=b.objectToQuery(y.query))?y.path+"?"+w:y.path}return w},_processOAuthPopupParams:function(t){var z=this._oAuthDfd;this._oAuthDfd=null;if(z)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),t.error){var w="access_denied"===t.error;t=Error(w?"ABORTED":"OAuth: "+t.error+" - "+t.error_description);
t.name=w?"identity-manager:user-aborted":"identity-manager:authentication-failed";t.code="IdentityManagerBase."+(w?2:3);t.log=!!e.isDebug;z.errback(t)}else this._processOAuthResponseParams(t,z.oinfo_,z.sinfo_).then(function(y){z.resolve(y)})["catch"](function(y){z.reject(y)})},_processOAuthResponseParams:function(t,z,w){var y=z._oAuthCred;if(t.code){var x=y.codeVerifier;y.codeVerifier=null;y.stateUID=null;y.save();return this._getOAuthToken(w.server,t.code,z.appId,this._getRedirectURI(z,!0),x).then(function(v){var u=
new D({userId:v.username,server:w.server,token:v.access_token,expires:Date.now()+1E3*v.expires_in,ssl:v.ssl,oAuthState:t.state,_oAuthCred:y});z.userId=u.userId;y.storage=v.persist?q:m;y.refreshToken=v.refresh_token;y.token=null;y.expires=v.refresh_token_expires_in?Date.now()+1E3*v.refresh_token_expires_in:null;y.userId=u.userId;y.ssl=u.ssl;y.save();return u})}x=new D({userId:t.username,server:w.server,token:t.access_token,expires:Date.now()+1E3*Number(t.expires_in),ssl:"true"===t.ssl,oAuthState:t.state,
_oAuthCred:y});z.userId=x.userId;y.storage=t.persist?q:m;y.refreshToken=null;y.token=x.token;y.expires=x.expires;y.userId=x.userId;y.ssl=x.ssl;y.save();var A=new l;A.resolve(x);return A},_setOAuthResponseQueryString:function(t){t&&("?"===t.charAt(0)&&(t=t.substring(1)),this._processOAuthPopupParams(b.queryToObject(t)))}}})},"esri/core/events":function(){define([],function(){return{on:function(D,B,a){if(!D||"function"!==typeof D.on&&"function"!==typeof D.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in D)return D.on(B,a);if(Array.isArray(B)){for(var c=B.slice(),h=0;h<c.length;h++)D.addEventListener(c[h],a);return{remove:function(){for(var g=0;g<c.length;g++)D.removeEventListener(c[g],a)}}}D.addEventListener(B,a);return{remove:function(){D.removeEventListener(B,a)}}}}})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),
function(D,B,a,c,h,g,e){return D([c,h,g],{templateString:a,widgetsInTemplate:!0,_i18nStrings:B,constructor:function(l,r){D.safeMixin(this,l)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(l){this.message.innerHTML=l},setCancelUrl:function(l){this.cancelUrl=l;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&e.request({url:this.cancelUrl});
this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(D,B,a,c,h,g,e,l){function r(w,y){var x=w.indexOf(y);return 0<=x?w.substring(x+1):""}function k(){return r(location.href,"#")}function f(){g.publish("/dojo/hashchange",k())}function b(){k()!==m&&(m=k(),f())}function d(w){if(n)if(n.isTransitioning())setTimeout(h.hitch(null,d,w),z);else{var y=n.iframe.location.href,x=y.indexOf("?");n.iframe.location.replace(y.substring(0,
x)+"?"+w)}else y=location.href.replace(/#.*/,""),location.replace(y+"#"+w),!t&&b()}function q(){function w(){m=k();A=E?m:r(F.href,"?");v=!1;u=null}var y=document.createElement("iframe"),x=a.dojoBlankHtmlUrl||B.toUrl("./resources/blank.html");y.id="dojo-hash-iframe";y.src=x+"?"+k();y.style.display="none";document.body.appendChild(y);this.iframe=D.global["dojo-hash-iframe"];var A,v,u,C,E,F=this.iframe.location;this.isTransitioning=function(){return v};this.pollLocation=function(){if(!E)try{var G=r(F.href,
"?");document.title!=C&&(C=this.iframe.document.title=document.title)}catch(J){E=!0}var H=k();if(v&&m===H)if(E||G===u)w(),f();else{setTimeout(h.hitch(this,this.pollLocation),0);return}else if(m!==H||!E&&A!==G){if(m!==H){m=H;v=!0;u=H;y.src=x+"?"+u;E=!1;setTimeout(h.hitch(this,this.pollLocation),0);return}E||(location.href="#"+F.search.substring(1),w(),f())}setTimeout(h.hitch(this,this.pollLocation),z)};w();setTimeout(h.hitch(this,this.pollLocation),z)}D.hash=function(w,y){if(!arguments.length)return k();
"#"==w.charAt(0)&&(w=w.substring(1));y?d(w):location.hash="#"+w;return w};var m,n,t,z=a.hashPollFrequency||100;e(function(){"onhashchange"in D.global&&(!l("ie")||8<=l("ie")&&"BackCompat"!=document.compatMode)?t=c.after(D.global,"onhashchange",f,!0):document.addEventListener?(m=k(),setInterval(b,z)):document.attachEvent&&(n=new q)});return D.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b){var d={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},q=function(u){function C(E){u[E]||(u[E]=function(){var F=arguments;return c.when(u,function(G){Array.prototype.unshift.call(F,G.results||G);return q(h[E].apply(h,F))})})}if(!u)return u;u.then&&(u=B.delegate(u));u.total||(u.total=c.when(u,function(E){return r.isDefined(E.total)?E.total:E.length||0}));C("forEach");C("filter");C("map");C("some");C("every");return u},m={useSSL:function(u,C){var E=d&&
d.self||{};if(E&&!E.isPortal)return-1!==u.indexOf("https:")||E.allSSL?C.replace("http:","https:"):C;var F=m.getLocation(C);if(-1<E.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&F.port&&"80"!==F.port&&"443"!==F.port){var G=F.pathname;G=0===G.indexOf("/")?G:"/"+G;return E.allSSL||-1<u.indexOf("https:")?"https://"+F.hostname+(E.httpsPort&&"443"!==E.httpsPort?":"+E.httpsPort:"")+G+F.search:"http://"+F.hostname+(E.httpPort&&"80"!==E.httpPort?":"+E.httpPort:"")+G+F.search}return-1!==u.indexOf("https:")||
E.allSSL?C.replace("http:","https:"):C},formatUrl:function(u){var C=d.currentToken;return-1!==u.indexOf("null")?null:m.useSSL(window.location.protocol,C?u+(-1!==u.indexOf("?")?"\x26":"?")+("token\x3d"+C):u)},getLocation:function(u){var C=document.createElement("a");C.href=u;return{protocol:C.protocol,hostname:C.hostname,port:C.port,pathname:C.pathname,search:C.search,hash:C.hash,host:C.host}},resultsToTypedArray:function(u,C,E){E=E?E.listings||E.notifications||E.userInvitations||E.tags||E.items||
E.groups||E.comments||E.provisions||E.results||E:[];return h.map(E,function(F){F=B.mixin(F,C||{});return u?new u(F):F})},clearFieldsFromObject:function(u,C){var E,F=u.length;if(B.isArray(u))for(E=0;E<F;E++)delete C[u[E]];else for(E in u)delete C[E];return C},requestToTypedArray:function(u,C,E,F,G){return q(m.request(u,C,E).then(B.partial(m.resultsToTypedArray,F,G)))},request:function(u,C,E){C&&C.portal&&delete C.portal;if(C&&C.form){var F=C.form;delete C.form}C=B.mixin(B.mixin({},C||{}),d.requestParams);
E=B.mixin(E||{},d.options);return k({url:m.useSSL(window.location.protocol,u.url||u),content:C,callbackParamName:"callback",timeout:E&&E.timeout||0,form:F},E)},formatQueryParams:function(u,C,E){u=B.mixin(B.mixin({},u),B.isString(C)?{q:C}:C||{});u.q=!E&&d.extraQuery?"("+u.q+")"+d.extraQuery:u.q;return u}},n=D([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(u){B.mixin(this,u);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),
t=D([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(u){B.mixin(this,u);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),z=D([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(u){B.mixin(this,u);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+
(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=m.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=m.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var u=this.type;return{source:-1<
h.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===u?u:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(u){var C=B.isString(u)?{comment:u}:u;return m.request(this.itemUrl+"/addComment",C,{usePost:!0}).then(B.hitch(this,function(E){return new n(B.mixin(C,{id:E.commentId,item:this}))}))},updateComment:function(u){if(u&&u.url&&u.comment)return m.request(u.url+"/update",{comment:u.comment},
{usePost:!0}).then(function(C){u.id=C.commentId;return u});throw Error();},getComments:function(){return m.requestToTypedArray(this.itemUrl+"/comments",null,null,n,{item:this})},deleteComment:function(u){if(u&&u.url)return m.request(u.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(u){var C=B.isObject(u)?u:{rating:parseFloat(u)};return m.request(this.itemUrl+"/addRating",C,{usePost:!0}).then(B.hitch(this,function(E){return new t(B.mixin(C,{id:E.ratingId,item:this}))}))},getRating:function(){return m.request(this.itemUrl+
"/rating").then(B.hitch(this,function(u){return new t(B.mixin(u,{item:this}))}))},deleteRating:function(){return m.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var u=this.type,C=this.typeKeywords||[],E=u;"Feature Service"===u||"Feature Collection"===u?E=-1<h.indexOf(C,"Table")?"Table":-1<h.indexOf(C,"Route Layer")?"Route Layer":-1<h.indexOf(C,"Markup")?"Markup":"Feature Layer":"Image Service"===u?E=-1<h.indexOf(C,"Elevation 3D Layer")?"Elevation Layer":-1<h.indexOf(C,
"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===u?E="Scene Layer":"Media Service"===u?E="Media Layer":"Scene Package"===u?E="Scene Layer Package":"Stream Service"===u?E="Feature Layer":"Geoprocessing Service"===u&&this.portal&&this.portal.isPortal?E=-1<h.indexOf(C,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===u?E="GeoEnrichment Service":"Geocoding Service"===u?E="Locator":"Microsoft Powerpoint"===u?E="Microsoft PowerPoint":"GeoJson"===u?this.type=E=
"GeoJSON":"Globe Service"===u?E="Globe Layer":"Vector Tile Service"===u?E="Tile Layer":"netCDF"===u?E="NetCDF":"Map Service"===u?E=-1===h.indexOf(C,"Spatiotemporal")&&(-1<h.indexOf(C,"Hosted Service")||-1<h.indexOf(C,"Tiled"))&&-1===h.indexOf(C,"Relational")?"Tile Layer":"Map Image Layer":u&&-1<u.toLowerCase().indexOf("add in")?E=u.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===u?E="Big Data File Share":"Compact Tile Package"===u?E="Tile Package (tpkx)":"Raster function template"===
u?E="Raster Function Template":"OGCFeatureServer"===u?E="OGC Feature Layer":"web mapping application"===u&&-1<h.indexOf(C,"configurableApp")&&(E="Instant App");return E},_getIconUrl:function(){var u=this.type&&this.type.toLowerCase()||"",C=this.typeKeywords||[],E=!1,F=!1,G=!1,H=!1,J=!1,I=!1;F=!1;0<u.indexOf("service")||"feature collection"===u||"kml"===u||"wms"===u||"wmts"===u||"wfs"===u?(E=-1<h.indexOf(C,"Hosted Service"),"feature service"===u||"feature collection"===u||"kml"===u||"wfs"===u?(H=-1<
h.indexOf(C,"Table"),F=-1<h.indexOf(C,"Route Layer"),G=-1<h.indexOf(C,"Markup"),J=-1!==h.indexOf(C,"Spatiotemporal"),I=-1!==h.indexOf(C,"UtilityNetwork"),u=J&&H?"spatiotemporaltable":H?"table":F?"routelayer":G?"markup":J?"spatiotemporal":I?"utilitynetwork":E?"featureshosted":"features"):"map service"===u||"wms"===u||"wmts"===u?(J=-1!==h.indexOf(C,"Spatiotemporal"),F=-1!==h.indexOf(C,"Relational"),u=J||F?"mapimages":E||-1<h.indexOf(C,"Tiled")||"wmts"===u?"maptiles":"mapimages"):u="scene service"===
u?-1<h.indexOf(C,"Line")?"sceneweblayerline":-1<h.indexOf(C,"3DObject")?"sceneweblayermultipatch":-1<h.indexOf(C,"Point")?"sceneweblayerpoint":-1<h.indexOf(C,"IntegratedMesh")?"sceneweblayermesh":-1<h.indexOf(C,"PointCloud")?"sceneweblayerpointcloud":-1<h.indexOf(C,"Polygon")?"sceneweblayerpolygon":-1<h.indexOf(C,"Building")?"sceneweblayerbuilding":-1<h.indexOf(C,"Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===u?-1<h.indexOf(C,"Elevation 3D Layer")?"elevationlayer":-1<h.indexOf(C,
"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===u?"streamlayer":"vector tile service"===u?"vectortile":"datastore catalog service"===u?"datastorecollection":"geocoding service"===u?"geocodeservice":"media service"===u?"mediaservice":"geoprocessing service"===u?-1<h.indexOf(C,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):u="web map"===u||"cityengine web scene"===u?"maps":"web scene"===u?-1<h.indexOf(C,"ViewingMode-Local")?"webscenelocal":"websceneglobal":
"web mapping application"===u&&-1<h.indexOf(C,"configurableApp")?"instantapps":"web mapping application"===u||"mobile application"===u||"application"===u||"operation view"===u||"desktop application"===u?"apps":"map document"===u||"map package"===u||"published map"===u||"scene document"===u||"globe document"===u||"basemap package"===u||"mobile basemap package"===u||"mobile map package"===u||"project package"===u||"project template"===u||"pro map"===u||"layout"===u||"layer"===u&&-1<h.indexOf(C,"ArcGIS Pro")||
"explorer map"===u&&h.indexOf(C,"Explorer Document")?"mapsgray":"service definition"===u||"csv"===u||"shapefile"===u||"cad drawing"===u||"geojson"===u||"360 vr experience"===u||"netcdf"===u||"administrative report"===u?"datafiles":"explorer add in"===u||"desktop add in"===u||"windows viewer add in"===u||"windows viewer configuration"===u?"appsgray":"arcgis pro add in"===u||"arcgis pro configuration"===u?"addindesktop":"rule package"===u||"file geodatabase"===u||"sqlite geodatabase"===u||"csv collection"===
u||"kml collection"===u||"windows mobile package"===u||"map template"===u||"desktop application template"===u||"gml"===u||"arcpad package"===u||"code sample"===u||"form"===u||"document link"===u||"earth configuration"===u||"operations dashboard add in"===u||"rules package"===u||"image"===u||"workflow manager package"===u||"explorer map"===u&&-1<h.indexOf(C,"Explorer Mapping Application")||-1<h.indexOf(C,"Document")?"datafilesgray":"network analysis service"===u||"geoprocessing service"===u||"geodata service"===
u||"geometry service"===u||"geoprocessing package"===u||"locator package"===u||"geoprocessing sample"===u||"workflow manager service"===u?"toolsgray":"layer"===u||"layer package"===u||"explorer layer"===u?"layersgray":"scene package"===u?"scenepackage":"mobile scene package"===u?"mobilescenepackage":"tile package"===u||"compact tile package"===u?"tilepackage":"task file"===u?"taskfile":"report template"===u?"report-template":"statistical data collection"===u?"statisticaldatacollection":"insights workbook"===
u?"workbook":"insights model"===u?"insightsmodel":"insights page"===u?"insightspage":"insights theme"===u?"insightstheme":"hub initiative"===u?"hubinitiative":"hub page"===u?"hubpage":"hub site application"===u?"hubsite":"hub event"===u?"hubevent":"hub project"===u?"hubproject":"relational database connection"===u?"relationaldatabaseconnection":"big data file share"===u?"datastorecollection":"image collection"===u?"imagecollection":"desktop style"===u?"desktopstyle":"style"===u?"style":"dashboard"===
u?"dashboard":"raster function template"===u?"rasterprocessingtemplate":"vector tile package"===u?"vectortilepackage":"ortho mapping project"===u?"orthomappingproject":"ortho mapping template"===u?"orthomappingtemplate":"solution"===u?"solutions":"geopackage"===u?"geopackage":"deep learning package"===u?"deeplearningpackage":"real time analytic"===u?"realtimeanalytics":"big data analytic"===u?"bigdataanalytics":"feed"===u?"feed":"excalibur imagery project"===u?"excaliburimageryproject":"notebook"===
u?"notebook":"storymap"===u?"storymap":"survey123 add in"===u?"survey123addin":"mission"===u?"mission":"mission report"===u?"missionreport":"quickcapture project"===u?"quickcaptureproject":"pro report"===u?"proreport":"urban model"===u?"urbanmodel":"web experience"===u?"experiencebuilder":"web experience template"===u?"webexperiencetemplate":"experience builder widget"===u?"experiencebuilderwidget":"experience builder widget package"===u?"experiencebuilderwidgetpackage":"workflow"===u?"workflow":
"kernel gateway connection"===u?"kernelgatewayconnection":"insights script"===u?"insightsscript":"hub initiative template"===u?"hubinitiativetemplate":"storymap theme"===u?"storymaptheme":"knowledge graph"===u?"knowledgegraph":"native application"===u?"nativeapp":"native application installer"===u?"nativeappinstaller":"link chart"===u?"linkchart":"investigation"===u?"investigation":"ogcfeatureserver"===u?"features":"pro project"===u?"proproject":"insights workbook package"===u?"insightsworkbookpackage":
"apache parquet"===u?"apacheparquet":"maps";return u?e.toUrl("../css/images/item_type_icons/"+u+"16.png"):null},_getIsPremiumContent:function(){var u=this.typeKeywords,C=!1;if(-1<h.indexOf(u,"Requires Subscription")||-1<h.indexOf(u,"Requires Credits"))C=!0;return C},_getPremiumIconUrl:function(){var u=this.typeKeywords,C;this.isPremiumContent&&(C=-1<h.indexOf(u,"Requires Credits")?"premiumcredits":"premiumitem");return C?e.toUrl("../css/images/item_type_icons/"+C+"16.png"):null},getThumbnailUrl:function(u){var C=
this.thumbnailUrl;C&&u&&(C+=(-1===C.indexOf("?")?"?":"\x26")+"w\x3d"+u);return C}}),w=D([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(u){B.mixin(this,u);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?m.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?m.formatUrl(this.url+
"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?m.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var C in this.listingProperties)this[C]&&(this.listingProperties[C]=this[C]);this.properties=this.properties||
{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=h.map(this.screenshots,B.hitch(this,function(E){return m.formatUrl(this.url+"/info/"+E)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?m.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):m.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return m.requestToTypedArray(this.commentsUrl,null,null,n,{item:this})},
getVendor:function(){return this.vendor}}),y=D([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(u){B.mixin(this,u);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=u.listing?new w(B.mixin(u.listing,{portal:this.portal})):null}}),x=D([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(u){B.mixin(this,u);this.url=(this.portal&&
this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=m.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return m.request(this.url+"/users")},queryItems:function(u,C){u=m.formatQueryParams({},u,C);u.q="group:"+this.id+(u.q?" "+u.q:"");return this.portal.queryItems(u)},getThumbnailUrl:function(u){var C=this.thumbnailUrl;C&&u&&(C+=(-1===C.indexOf("?")?"?":"\x26")+
"w\x3d"+u);return C}}),A=D([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(u){B.mixin(this,u);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return m.requestToTypedArray(this.url,null,null,z,{portal:this.portal,folderId:this.id})}}),v=D([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(u){B.mixin(this,u);this.url=(this.portal&&this.portal.portalUrl)+
"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?m.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return q(m.request(this.url).then(B.hitch(this,function(u){return m.resultsToTypedArray(x,{portal:this.portal},u.groups)})))},getNotifications:function(){return m.requestToTypedArray(this.url+
"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return m.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return m.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return q(this.getContent(null,{num:1}).then(function(u){return u.folders}))},getItems:function(u){return q(this.getContent(u).then(function(C){return C.items}))},getItem:function(u){return m.request(this.portal.portalUrl+
"content/items/"+u).then(B.hitch(this,function(C){return new z(B.mixin(C,{portal:this.portal}))}))},getContent:function(u,C){var E=this.url.replace("/community/","/content/")+(u?"/"+u:"");return m.request(E,C).then(B.hitch(this,function(F){F.folders=m.resultsToTypedArray(A,{portal:this.portal},F.folders);F.items=m.resultsToTypedArray(z,{portal:this.portal,folderId:u},F.items);return F}))},getThumbnailUrl:function(u){var C=this.thumbnailUrl;C&&u&&(C+=(-1===C.indexOf("?")?"?":"\x26")+"w\x3d"+u);return C}});
D={Portal:D([b],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(u){u=B.isObject(u)?u:{url:u};this.registerConnectEvents();d={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};u.self?(d.self=u.self,B.mixin(this,{url:u.url||f.getProtocolForWebResource()+"//"+(u.self.urlKey?u.self.urlKey+"."+u.self.customBaseUrl:u.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",u=u.self.user?this.signIn():
this.init(this.url)):(u.url&&B.mixin(this,{url:u.url}),u=this.init(this.url));u.then(B.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(u,C){u=(u||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==u.indexOf("/sharing")?u+"/":u+"/sharing/rest/";return this._getSelf(this.portalUrl).then(B.hitch(this,function(E){d.self=B.mixin({},E);(E=E.user)&&C&&(d.currentToken=C&&C.token,d.loggedInUser=new v(B.mixin(E,{portal:this,credential:C})));d.self.id&&!1===d.self.canSearchPublic&&
(d.extraQuery=" AND orgid:"+d.self.id);B.mixin(this,d.self);this.thumbnailUrl=m.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),B.hitch(this,function(E){this.onError(E);throw E;}))},signIn:function(){var u=new c,C=B.hitch(this,function(){this._onSignIn().then(B.hitch(this,function(){u.resolve(d.loggedInUser)}),
B.hitch(this,function(E){u.reject(E)}))});if(d&&d.self)d&&d.loggedInUser?setTimeout(function(){u.resolve(d.loggedInUser)},0):C();else this.on("load",B.hitch(this,function(){C()}));return u},signOut:function(){d.loggedInUser.credential&&d.loggedInUser.credential.destroy();d.loggedInUser=null;d.options.disableIdentityLookup=!0;m.clearFieldsFromObject(d.self,this);d.self=null;return this.init(this.url)},getPortalUser:function(){return d.loggedInUser},addResource:function(u,C){return m.request(this.portalUrl+
"portals/self/addResource",{key:u,text:C},{usePost:!0})},update:function(u){return m.request(this.portalUrl+"portals/self/update",u,{usePost:!0})},queryGroups:function(u,C){return this._queryPortal(this.portalUrl+"community/groups",m.formatQueryParams({},u,C),x)},queryItems:function(u,C){return this._queryPortal(this.portalUrl+"search",m.formatQueryParams({},u,C),z)},queryListings:function(u){u=m.formatQueryParams({},u,!0);var C="";u.q&&-1<u.q.toLowerCase().indexOf("mylistings:true")?(u.q=u.q.toLowerCase().replace("mylistings:true",
""),C="?mylistings\x3dtrue"):u.q||(u.q='""');return this._queryPortal(this.portalUrl+"content/listings"+C,u,w)},queryCustomerList:function(u,C){var E=m.formatQueryParams({},u,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",E)},getProvisions:function(){return this.getCustomers().then(B.hitch(this,function(u){return u.purchases}))},getInterests:function(){return this.getCustomers().then(B.hitch(this,function(u){return u.interests}))},getTrials:function(){return this.getCustomers().then(B.hitch(this,
function(u){return u.trials}))},getCustomers:function(u){return m.request(this.portalUrl+"portals/self/customers",{status:u||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(u){return u.purchases})},getMyInterests:function(){return this.getPurchases().then(function(u){return u.interests})},getPurchases:function(){return m.request(this.portalUrl+"portals/self/purchases").then(B.hitch(this,function(u){u.interests=h.map(u.interests,function(C){return B.mixin(C.provision,{listing:C.listing})});
u.purchases=h.map(u.purchases,function(C){return B.mixin(C.provision,{listing:C.listing})});u.trials=h.map(u.trials,function(C){return B.mixin(C.provision,{listing:C.listing})});u.interests=m.resultsToTypedArray(y,{portal:this},u.interests);u.trials=m.resultsToTypedArray(y,{portal:this},u.trials);u.purchases=m.resultsToTypedArray(y,{portal:this},u.purchases);return u}))},queryUsers:function(u,C){return this._queryPortal(this.portalUrl+"community/users",m.formatQueryParams({sortField:"username"},u,
C),v)},_onSignIn:function(){d.options.disableIdentityLookup=!1;d.self=null;return l.id.getCredential(this.portalUrl).then(B.hitch(this,"init",this.url)).then(function(){return d.loggedInUser},B.hitch(this,function(u){d.options.disableIdentityLookup=!0;this.onError(u);throw u;}))},_getSelf:function(u){u+="portals/self";if(d.self){var C=new c;setTimeout(function(){C.resolve(d.self)},0)}else C=m.request(u,{culture:a.locale});return C},_queryPortal:function(u,C,E){var F=B.mixin({num:10,start:0,sortField:"title",
sortOrder:"asc"},C),G=["start","query","num","nextStart"];u=m.request(u,F).then(B.hitch(this,function(H){H.results=m.resultsToTypedArray(E,{portal:this},H);H.queryParams=B.mixin({},F);H.nextQueryParams=B.mixin(F,{start:H.nextStart});return m.clearFieldsFromObject(G,H)}));u=B.delegate(u);u.queryParams=B.mixin({},F);u.nextQueryParams=c.when(u,function(H){return H.nextQueryParams});return q(u)}}),PortalFolder:A,PortalGroup:x,PortalItem:z,PortalUser:v,PortalComment:n,PortalRating:t,PortalUtil:m,PortalResult:q,
PortalListing:w};B.mixin(B.getObject("arcgis",!0,l),D);return D})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),function(D,B,a,c,h,
g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v){D=D(b,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(u){this._jobUpdateHandler=B.hitch(this,this._jobUpdateHandler);this._getJobStatus=B.hitch(this,this._getJobStatus);this._getResultDataHandler=
B.hitch(this,this._getResultDataHandler);this._getResultImageHandler=B.hitch(this,this._getResultImageHandler);this._executeHandler=B.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(u){this.updateDelay=u},setProcessSpatialReference:function(u){this.processSpatialReference=u},setOutputSpatialReference:function(u){this._setOutSR(u)},setOutSpatialReference:function(u){this._setOutSR(u)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(u){this.outSpatialReference=this.outputSpatialReference=u},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(u,C,E){for(var F in u){var G=u[F];B.isArray(G)?u[F]=h.toJson(a.map(G,function(H){return this._gpEncode({item:H},!0).item},this)):G instanceof Date&&(u[F]=G.getTime())}return this._encode(u,C,E)},_decode:function(u){var C=u.dataType,
E=new y(u);if(-1!==a.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],C))return E;if("GPLinearUnit"===C)E.value=new n(E.value);else if("GPFeatureRecordSetLayer"===C||"GPRecordSet"===C)E.value=new d(E.value);else if("GPDataFile"===C)E.value=new t(E.value);else if("GPDate"===C)u=E.value,B.isString(u)?E.value=new w({date:u}):E.value=new Date(u);else if("GPRasterData"===C||"GPRasterDataLayer"===C)u=u.value.mapImage,E.value=u?new v(u):new z(E.value);else if(-1!==C.indexOf("GPMultiValue:")){var F=C.split(":")[1];
u=E.value;E.value=a.map(u,function(G){return this._decode({paramName:"_name",dataType:F,value:G}).value},this)}else E=null;return E},submitJob:function(u,C,E,F,G){var H=this._getOutSR(),J=G.assembly;u=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||h.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||h.toJson(this.processSpatialReference.toJson()):null},u),null,J&&J[0]);var I=this._jobUpdateHandler,R=this._errorHandler;
return r({url:this._url.path+"/submitJob",content:u,callbackParamName:"callback",load:function(O,P){I(O,P,!1,C,E,G.dfd)},error:function(O){R(O,F,G.dfd)}})},_jobUpdateHandler:function(u,C,E,F,G,H){var J=u.jobId;C=new q(u);this._successHandler([C],"onStatusUpdate",G,E&&H);if(!E)switch(clearTimeout(this._updateTimers[J]),this._updateTimers[J]=null,H&&H.progress(C),u.jobStatus){case q.STATUS_SUBMITTED:case q.STATUS_EXECUTING:case q.STATUS_WAITING:case q.STATUS_NEW:var I=this._getJobStatus;this._updateTimers[J]=
setTimeout(function(){I(J,E,F,G,H)},this.updateDelay);break;default:this._successHandler([C],"onJobComplete",F,H)}},_getJobStatus:function(u,C,E,F,G){var H=this._jobUpdateHandler;r({url:this._url.path+"/jobs/"+u,content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,I){H(J,I,C,E,F,G)},error:this._errorHandler})},_getResultDataHandler:function(u,C,E,F,G){try{var H=this._decode(u);this._successHandler([H],"onGetResultDataComplete",E,G)}catch(J){this._errorHandler(J,
F,G)}},getResultData:function(u,C,E,F){var G=this._getResultDataHandler,H=this._errorHandler,J=new c(k._dfdCanceller);J._pendingDfd=r({url:this._url.path+"/jobs/"+u+"/results/"+C,content:B.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(I,R){G(I,R,E,F,J)},error:function(I){H(I,F,J)}});return J},checkJobStatus:function(u,C,E){var F=this._jobUpdateHandler,G=this._errorHandler,H=new c(k._dfdCanceller);H._pendingDfd=r({url:this._url.path+"/jobs/"+u,content:B.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(J,I){F(J,I,!0,null,C,H)},error:function(J){G(J,E,H)}});return H},cancelJob:function(u,C,E){var F=this._errorHandler,G=new c(k._dfdCanceller);G._pendingDfd=r({url:this._url.path+"/jobs/"+u+"/cancel",content:B.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:B.hitch(this,function(H,J){this._successHandler([H],"onJobCancel",C,G)}),error:function(H){F(H,E,G)}});return G},execute:function(u,C,E,F){var G=this._getOutSR(),
H=F.assembly;u=this._gpEncode(B.mixin({},this._url.query,{f:"json","env:outSR":G?G.wkid||h.toJson(G.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||h.toJson(this.processSpatialReference.toJson()):null},u),null,H&&H[0]);var J=this._executeHandler,I=this._errorHandler;return r({url:this._url.path+"/execute",content:u,callbackParamName:"callback",load:function(R,O){J(R,O,C,E,F.dfd)},error:function(R){I(R,E,F.dfd)}})},_executeHandler:function(u,C,E,F,G){try{var H=
u.results,J,I=u.messages;var R=0;for(J=H.length;R<J;R++)H[R]=this._decode(H[R]);R=0;for(J=I.length;R<J;R++)I[R]=new m(I[R]);this._successHandler([H,I],"onExecuteComplete",E,G)}catch(O){this._errorHandler(O,F,G)}},_getResultImageHandler:function(u,C,E,F,G){try{var H=this._decode(u);this._successHandler([H],"onGetResultImageComplete",E,G)}catch(J){this._errorHandler(J,F,G)}},getResultImage:function(u,C,E,F,G){var H=this._getResultImageHandler,J=this._errorHandler;E=this._gpEncode(B.mixin({},this._url.query,
{f:"json"},E.toJson()));var I=new c(k._dfdCanceller);I._pendingDfd=r({url:this._url.path+"/jobs/"+u+"/results/"+C,content:E,callbackParamName:"callback",load:function(R,O){H(R,O,F,G,I)},error:function(R){J(R,G,I)}});return I},cancelJobStatusUpdates:function(u){clearTimeout(this._updateTimers[u]);this._updateTimers[u]=null},getResultImageLayer:function(u,C,E,F){if(null==C){var G=this._url.path.indexOf("/GPServer/");u=this._url.path.substring(0,G)+"/MapServer/jobs/"+u}else u=this._url.path+"/jobs/"+
u+"/results/"+C;this._url.query&&(u+="?"+e.objectToQuery(this._url.query));C=null==C?new A(u,{imageParameters:E}):new x(u,{imageParameters:E},!0);this.onGetResultImageLayerComplete(C);F&&F(C);return C},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});f._createWrappers(D);B.setObject("tasks.Geoprocessor",D,l);return D})},
"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(D,B,a,c,h,g,e,l){D=D(l,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(r,k){r&&B.isString(r)&&(this._url=e.urlToObject(this.url=r));k&&k.requestOptions&&(this.requestOptions=k.requestOptions);this.normalization=!0;this._errorHandler=B.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var r=this._url,k=/^http:/i;this.url&&(this.url=this.url.replace(k,"https:"));r&&r.path&&(r.path=r.path.replace(k,"https:"))},_encode:function(r,k,f){var b={},d;for(d in r)if("declaredClass"!==d){var q=r[d];var m=typeof q;if(null!==q&&void 0!==q&&"function"!==m)if(B.isArray(q)){b[d]=[];var n=q.length;for(m=0;m<n;m++)b[d][m]=this._encode(q[m])}else"object"===m?q.toJson&&(m=q.toJson(f&&f[d]),"esri.tasks.FeatureSet"===q.declaredClass&&m.spatialReference&&(m.sr=m.spatialReference,delete m.spatialReference),
b[d]=k?m:a.toJson(m)):b[d]=q}return b},_successHandler:function(r,k,f,b){k&&this[k].apply(this,r);f&&f.apply(null,r);b&&g._resDfd(b,r)},_errorHandler:function(r,k,f){this.onError(r);k&&k(r);f&&f.errback(r)},setNormalization:function(r){this.normalization=r},onError:function(){}});return h.Task=D})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b){D=D(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(d,q){if(d){B.mixin(this,d);var m=this.features=this.features||[],n=d.spatialReference;n=this.spatialReference=f.createInstance(l.simpleConstructor,n);var t=f.getGeometryType(d.geometryType);this.geometryType=d.geometryType;d.fields&&(this.fields=d.fields);var z=f.supportsLazyUnquantization(this.geometryType),w=f.unquantizeFunction(this.geometryType,this.transform),y=!!(q&&z&&w),x=t&&(y?t.accessorConstructor:
t.simpleConstructor);a.forEach(m,function(A,v){var u=f.createInstance(e.simpleConstructor),C=A.geometry;if(t&&C){var E=u.geometry=f.createInstance(x,y?null:C);E.setSpatialReference(C.spatialReference?f.createInstance(l.simpleConstructor,C.spatialReference):n);y&&E.setupLazyUnquantization(w,C)}u.symbol=A.symbol?b.fromJson(A.symbol):null;u.attributes=A.attributes;m[v]=u});y||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(d){var q=
{};this.displayFieldName&&(q.displayFieldName=this.displayFieldName);this.fields&&(q.fields=this.fields);this.spatialReference?q.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(q.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(q.geometryType=f.getJsonType(this.features[0].geometry)),q.features=r._encodeGraphics(this.features,d));q.geometryType=q.geometryType||this.geometryType;q.exceededTransferLimit=
this.exceededTransferLimit;q.transform=this.transform;return g.fixJson(q)},_hydrate:function(){f.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(d){if(!this.geometryType)return this.transform=null,this;var q=d.translate[0],m=d.translate[1],n=d.scale[0],t=d.scale[1],z=this.features,w=function(v,u,C){var E,F=[];var G=0;for(E=v.length;G<E;G++){var H=v[G];if(0<G){var J=u(H[0]);H=C(H[1]);if(J!==I||H!==R){F.push([J-I,H-R]);var I=J;var R=H}}else I=u(H[0]),
R=C(H[1]),F.push([I,R])}return 0<F.length?F:null},y=function(v,u,C){if("esriGeometryPoint"===v)return function(E){E.x=u(E.x);E.y=C(E.y);return E};if("esriGeometryPolyline"===v||"esriGeometryPolygon"===v)return function(E){var F;var G=E.rings||E.paths;var H=[];var J=0;for(F=G.length;J<F;J++){var I=G[J];(I=w(I,u,C))&&H.push(I)}return 0<H.length?(E.rings?E.rings=H:E.paths=H,E):null};if("esriGeometryMultipoint"===v)return function(E){var F=w(E.points,u,C);return 0<F.length?(E.points=F,E):null};if("esriGeometryEnvelope"===
v)return function(E){return E}}(this.geometryType,function(v){return Math.round((v-q)/n)},function(v){return Math.round((m-v)/t)}),x;var A=0;for(x=z.length;A<x;A++)z[A].geometry&&(y(z[A].geometry)||z[A].setGeometry(null));this.transform=d;return this}});D.createGraphics=function(d){var q=d.geometryType,m=f.createInstance(l.simpleConstructor,d.spatialReference),n=f.getGeometryType(q).accessorConstructor,t=f.unquantizeFunction(q,d.transform);return a.map(d.features,function(z,w){var y=f.createInstance(e.simpleConstructor),
x=z.geometry;if(x){var A=y.geometry=f.createInstance(n);A.setSpatialReference(m);A.setupLazyUnquantization(t,x)}y.attributes=z.attributes;return y})};D.createPolygon=function(d,q,m){if(d){var n=f.createInstance(k.accessorConstructor);n.setSpatialReference(q);q=f.unquantizeFunction("esriGeometryPolygon",m);n.setupLazyUnquantization(q,d)}return n};B.setObject("tasks.FeatureSet",D,h);return D})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(D,B,a,c,h,g,e,l,r){function k(){}D=D(null,{declaredClass:"esri.Graphic",constructor:function(f,b,d,q){this._construct();f&&!f.declaredClass?(this.geometry=f.geometry?l.fromJson(f.geometry):null,this.symbol=f.symbol?r.fromJson(f.symbol):null,this.attributes=f.attributes||null,this.infoTemplate=f.infoTemplate?new e(f.infoTemplate):null):(this.geometry=f,this.symbol=b,this.attributes=d,this.infoTemplate=q)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,
_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(f){this._parentGraphic=f},setSize:function(f){this.size=f;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(f){this._aggregationSourceLayer=
f;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(f){this._aggregationInfo=f;return this},getChildGraphics:function(){var f=this.getAggregationSourceLayer();return f?f.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var f=[];this._shape&&f.push(this._shape);this._bgShape&&f.push(this._bgShape);return f},getNode:function(){var f=this._shape&&this._shape.getNode();
return f&&f.nodeType?f:null},getNodes:function(){var f=this.getShapes(),b,d,q=f.length,m=[];for(d=0;d<q;d++)(b=f[d]&&f[d].getNode())&&b.nodeType&&m.push(b);return m},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var f=new this.constructor(this.toJson());f.visible=this.visible;f._layer=this._layer;f._sourceLayer=this._sourceLayer;f._aggregationSourceLayer=this._aggregationSourceLayer;f._aggregationInfo=this._aggregationInfo;
f._resolution=this._resolution;return f},draw:function(){var f=this._graphicsLayer;f&&f._draw(this,!0);return this},setGeometry:function(f){this.geometry=f;this._geomVersion++;var b=this._graphicsLayer;b&&(b._updateExtent(this),this.draw(),f&&"polyline"===f.type&&b._updateSVGMarkers());return this},setResolution:function(f){this._resolution=f;return this},getResolution:function(){return this._resolution},setSymbol:function(f,b){var d=this._graphicsLayer,q=this._shape;this.symbol=f;d&&(b&&q&&d._removeShape(this),
this.draw());return this},setAttributes:function(f){this.attributes=f;this.clearCache();return this},setInfoTemplate:function(f){this.infoTemplate=f;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var f=this.getLayer();return this.infoTemplate||f&&f.infoTemplate},getTitle:function(){var f=this.getInfoTemplate(),b=f&&f.title;if(B.isFunction(b))b=b.call(f,this);else if(B.isString(b)){var d=(f=this.getLayer())&&f._getDateOpts;b=g.substitute(this.attributes,
b,{first:!0,dateFormat:d&&d.call(f)})}return b},getContent:function(){var f=this.getInfoTemplate(),b=f&&f.content;if(B.isFunction(b))b=b.call(f,this);else if(B.isString(b)){var d=(f=this.getLayer())&&f._getDateOpts;b=g.substitute(this.attributes,b,{dateFormat:d&&d.call(f)})}return b},attr:function(f,b){null==b||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[f]=b,this._setDataAttr(f,b));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var f;if(this.getShapes().length){var b=this.getNodes();var d=b.length;for(f=0;f<d;f++)h.show(b[f])}else this.draw();(b=this._graphicsLayer)&&b._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var f=this._graphicsLayer,b,d;if(f){if("canvas-2d"===f.surfaceType)f._removeShape(this);else{var q=this.getNodes();if(d=q.length)for(b=
0;b<d;b++)h.hide(q[b])}f._graphicVisibilityChanged(this)}return this},toJson:function(){var f={};this.geometry&&(f.geometry=this.geometry.toJson());this.attributes&&(f.attributes=B.mixin({},this.attributes));this.symbol&&(f.symbol=this.symbol.toJson());this.infoTemplate&&(f.infoTemplate=this.infoTemplate.toJson());return f},_setDataAttr:function(f,b){var d=this.getNodes(),q,m=d.length;for(q=0;q<m;q++)this._setDOMDataAttr(d[q],f,b)},_setDOMDataAttr:function(f,b,d){null==d?f.removeAttribute(b):f.setAttribute(b,
d)},_applyDataAttrs:function(){var f=this._dataAttrs;if(f){var b=this.getNodes(),d,q=b.length;for(d=0;d<q;d++)for(var m in f)this._setDOMDataAttr(b[d],m,f[m])}},_getViewInfo:function(f){return(f=(f=f||this.getLayer())&&f.getMap())&&f.getViewInfo()},evaluateExpression:function(f,b){return this._getDataValue(f._attributeDef,f._attributeCache,null,null,f,b)},_getDataValue:function(f,b,d,q,m,n){var t=b.id,z=this.attributes,w=f.field,y=b.isNumeric,x=null;if(t){var A=this._computedAttributes,v=this._computedVersion,
u=this._computedGeomVersion;q=this._getViewInfo(q);var C=!(!m||!m.async),E=n&&n.skipCache||C,F=!n||!1!==n.strictReturnType,G=b.dependsOnView||b.isJSFunc,H=b.dependsOnGeometry;A||(A=this._computedAttributes={});G&&!v&&(v=this._computedVersion={});H&&!u&&(u=this._computedGeomVersion={});var J=G&&v[t]!==q.version||H&&u[t]!==this._geomVersion;x=A[t];if(void 0===x||J||E)x=null,b.hasExpr?x=m?m.evaluate(n&&n.context):d.executeFunction(b.compiledFunc,d.createExecContext(this,q)):b.isJSFunc?x=w(this,f):z&&
(x=z[w],y&&this._isValidNumber(x)&&(b=f.normalizationType||"field",d=x,x=null,m=f.normalizationTotal,f=z[f.normalizationField],"log"===b&&0!==d?x=Math.log(d)*Math.LOG10E:"percent-of-total"===b&&this._isValidNumber(m)&&0!==m?x=d/m*100:"field"===b&&this._isValidNumber(f)&&0!==f&&(x=d/f))),F&&(C?y&&(this._construct(),x=x.then(this._sanitizeNumericValue)):x=this._sanitizeValue(x,y)),E||(A[t]=x,G&&(v[t]=q.version),H&&(u[t]=this._geomVersion))}else z&&(x=this._sanitizeValue(z[w],y));return x},_sanitizeValue:function(f,
b){b&&!this._isValidNumber(f)&&(f=null);return f},_sanitizeNumericValue:function(f){return this._sanitizeValue(f,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=B.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(f){return"number"===typeof f&&!isNaN(f)&&Infinity!==f&&-Infinity!==f},clearCache:function(f){if(null!=f){var b=this._computedAttributes,d=this._computedVersion,q=this._computedGeomVersion;b&&(b[f]=void 0);d&&(d[f]=void 0);q&&(q[f]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});D.prototype.getShape=D.prototype.getDojoShape;k.prototype=D.prototype;D.simpleConstructor=k;return c.Graphic=D})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.InfoTemplate",constructor:function(g,e){g&&B.isObject(g)&&!B.isFunction(g)?B.mixin(this,g):(this.title=g||"${*}",this.content=e||"${*}")},
setTitle:function(g){this.title=g;return this},setContent:function(g){this.content=g;return this},toJson:function(){return h.fixJson({title:this.title,content:this.content})}});return c.InfoTemplate=D})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){var b={createDefaultSymbol:function(d){switch(d){case "esriGeometryPoint":case "esriGeometryMultipoint":var q=
b.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":q=b.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":q=b.createDefaultFillSymbol()}return q},createDefaultMarkerSymbol:function(){return new h},createDefaultLineSymbol:function(){return new e},createDefaultFillSymbol:function(){return new r},getFirstSupportedSymbol:function(d){var q;B.some(d,function(m){m&&-1<b.supportedSymbolTypes.indexOf(m.type)&&(q=m);return!!q});
return q},isPointSymbol:function(d){return d?-1<b.supportedPointSymbolTypes.indexOf(d.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(d,q){var m=null;switch(d.type){case "esriSMS":m=new h(d);break;case "esriPMS":m=new g(d);break;case "esriTS":m=new f(d);break;case "esriSLS":m=void 0!==d.cap?new l(d):new e(d);break;case "esriCLS":m=new l(d);break;case "esriSFS":m=new r(d);break;
case "esriPFS":m=new k(d);break;default:m=(m=q&&q.geometryType)?b.createDefaultSymbol(m):null}return m},getShapeDescriptors:function(d){return d&&d.getShapeDescriptors?d.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};D.mixin(D.getObject("symbol",!0,c),b);return b})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(D,B,a,c,h,g,
e,l,r){var k={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},f={style:k.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};D=D(l,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(b,d,q,m){b?B.isString(b)?(this.style=b,d&&(this.size=d),q&&(this.outline=q),m&&(this.color=m)):(this.style=e.valueOf(this._styles,this.style),b.outline&&(this.outline=new r(b.outline))):(B.mixin(this,f),this.size=h.pt2px(this.size),this.outline=new r(this.outline),this.color=new a(this.color));this.style||(this.style=k.STYLE_CIRCLE)},setStyle:function(b){this.style=b;return this},setPath:function(b){this.path=b;this.setStyle(k.STYLE_PATH);return this},setOutline:function(b){this.outline=
b;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(b,d,q){this._targetWidth=b;this._targetHeight=d;this._spikeSize=q},getShapeDescriptors:function(){var b,d=this.style,q=(this.size||h.pt2px(f.size))/2,m=0-q,n=0+q,t=0-q,z=0+q;switch(d){case k.STYLE_CIRCLE:var w={type:"circle",cx:0,cy:0,r:q};var y=this.getFill();if(b=this.getStroke())b.style=b.style||"Solid";break;case k.STYLE_CROSS:w={type:"path",path:"M "+m+",0 L "+
n+",0 M 0,"+t+" L 0,"+z+" E"};y=null;b=this.getStroke();break;case k.STYLE_DIAMOND:w={type:"path",path:"M "+m+",0 L 0,"+t+" L "+n+",0 L 0,"+z+" L "+m+",0 Z"};y=this.getFill();b=this.getStroke();break;case k.STYLE_SQUARE:w={type:"path",path:"M "+m+","+z+" L "+m+","+t+" L "+n+","+t+" L "+n+","+z+" L "+m+","+z+" Z"};y=this.getFill();b=this.getStroke();break;case k.STYLE_TRIANGLE:w={type:"path",path:"M "+m+","+z+" L 0,"+t+" L "+n+","+z+" L "+m+","+z+" Z"};y=this.getFill();b=this.getStroke();break;case k.STYLE_X:w=
{type:"path",path:"M "+m+","+z+" L "+n+","+t+" M "+m+","+t+" L "+n+","+z+" E"};y=null;b=this.getStroke();break;case k.STYLE_PATH:w={type:"path",path:this.path||""},y=this.getFill(),b=this.getStroke()}return{defaultShape:w,fill:y,stroke:b}},toJson:function(){var b=this.style,d=this.outline,q=B.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[b]||"esriSMSCircle"});d&&(q.outline=d.toJson());"x"===b||"cross"===b?delete q.color:"target"===b&&(q.style="esriSMSSquare",delete q.color,
0<this._targetHeight&&0<this._targetWidth&&(q.size=h.px2pt(Math.max(this._targetHeight,this._targetWidth))));q.path=this.path;return e.fixJson(q)}});B.mixin(D,k);D.defaultProps=f;B.setObject("symbol.SimpleMarkerSymbol",D,g);g.symbol.defaultSimpleMarkerSymbol=f;return D})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(D,B,a,c,h,g,e,l,r){var k=
B.getObject("dojox.gfx",!0),f=k._base={};k._hasClass=function(t,z){var w=t.getAttribute("className");return w&&0<=(" "+w+" ").indexOf(" "+z+" ")};k._addClass=function(t,z){var w=t.getAttribute("className")||"";(!w||0>(" "+w+" ").indexOf(" "+z+" "))&&t.setAttribute("className",w+(w?" ":"")+z)};k._removeClass=function(t,z){var w=t.getAttribute("className");w&&t.setAttribute("className",w.replace(new RegExp("(^|\\s+)"+z+"(\\s+|$)"),"$1$2"))};f._getFontMeasurements=function(){var t={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},z;if(c("ie")){var w=h.doc.documentElement.style.fontSize||"";w||(h.doc.documentElement.style.fontSize="100%")}var y=l.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},h.body());for(z in t)y.style.fontSize=z,t[z]=16*Math.round(12*y.offsetHeight/16)/12/1E3;c("ie")&&(h.doc.documentElement.style.fontSize=
w);h.body().removeChild(y);return t};var b=null;f._getCachedFontMeasurements=function(t){if(t||!b)b=f._getFontMeasurements();return b};var d=null,q={};f._getTextBox=function(t,z,w){var y=arguments.length,x;d||(d=l.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},h.body()));var A=d;A.className="";var v=A.style;v.borderWidth="0";v.margin="0";v.padding="0";v.outline="0";if(1<y&&z)for(x in z)x in q||(v[x]=z[x]);2<y&&w&&(A.className=w);A.innerHTML=t;A.getBoundingClientRect?
(v=A.getBoundingClientRect(),v={l:v.left,t:v.top,w:v.width||v.right-v.left,h:v.height||v.bottom-v.top}):v=r.getMarginBox(A);A.innerHTML="";return v};f._computeTextLocation=function(t,z,w,y){var x={};switch(t.align){case "end":x.x=t.x-z;break;case "middle":x.x=t.x-z/2;break;default:x.x=t.x}x.y=t.y-w*(y?.75:1);return x};f._computeTextBoundingBox=function(t){if(!k._base._isRendered(t))return{x:0,y:0,width:0,height:0};var z=t.getShape();var w=t.getFont()||k.defaultFont;t=t.getTextWidth();w=k.normalizedLength(w.size);
z=f._computeTextLocation(z,t,w,!0);return{x:z.x,y:z.y,width:t,height:w}};f._isRendered=function(t){for(t=t.parent;t&&t.getParent;)t=t.parent;return null!==t};var m=0;f._getUniqueId=function(){do var t=D._scopeName+"xUnique"+ ++m;while(e.byId(t));return t};var n=c("pointer-events")?"touchAction":c("MSPointer")?"msTouchAction":null;f._fixMsTouchAction=n?function(t){t.rawNode.style[n]="none"}:function(){};B.mixin(k,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var t={};return function(z){var w=t[z];if(w)return new w;w=t[z]=
function(){};w.prototype=k["default"+z];return new w}}(),normalizeColor:function(t){return t instanceof a?t:new a(t)},normalizeParameters:function(t,z){var w;if(z){var y={};for(w in t)w in z&&!(w in y)&&(t[w]=z[w])}return t},makeParameters:function(t,z){var w=null;if(!z)return B.delegate(t);var y={};for(w in t)w in y||(y[w]=B.clone(w in z?z[w]:t[w]));return y},formatNumber:function(t,z){var w=t.toString();if(0<=w.indexOf("e"))w=t.toFixed(4);else{var y=w.indexOf(".");0<=y&&5<w.length-y&&(w=t.toFixed(4))}return 0>
t?w:z?" "+w:w},makeFontString:function(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+" "+t.family},splitFontString:function(t){var z=k.getDefault("Font");t=t.split(/\s+/);if(!(5>t.length)){z.style=t[0];z.variant=t[1];z.weight=t[2];var w=t[3].indexOf("/");z.size=0>w?t[3]:t[3].substring(0,w);var y=4;0>w&&("/"==t[4]?y=6:"/"==t[4].charAt(0)&&(y=5));y<t.length&&(z.family=t.slice(y).join(" "))}return z},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return k._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(t){return t*k.px_in_pt()},px2pt:function(t){return t/k.px_in_pt()},normalizedLength:function(t){if(0===t.length)return 0;if(2<t.length){var z=k.px_in_pt(),w=parseFloat(t);switch(t.slice(-2)){case "px":return w;case "pt":return w*z;case "in":return 72*w*z;case "pc":return 12*w*z;case "mm":return w*k.mm_in_pt*z;case "cm":return w*k.cm_in_pt*z}}return parseFloat(t)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(t,z){return t&&z&&t===z},switchTo:function(t){var z="string"==typeof t?k[t]:t;z&&(g.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(w){k[w]=z[w]}),"string"==typeof t?k.renderer=t:g.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(w){return k.renderer=k[w]&&k[w].Surface===k.Surface?w:null}))}});return k})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(D,B,a){B.switchTo(a);return B})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(D,B,a,c,h){var g=null;a.add("vml",function(e,l,r){r.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';e="adj"in r.firstChild;r.innerHTML="";return e});return{load:function(e,l,r){function k(){l(["dojox/gfx/"+f],function(q){D.renderer=f;g=q;r(q)})}if(g&&"force"!=e)r(g);else{var f=h.forceGfxRenderer;e=!f&&(B.isString(h.gfxRenderer)?
h.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var b,d;!f&&e.length;)switch(e.shift()){case "svg":"SVGAngle"in c.global&&(f="svg");break;case "vml":a("vml")&&(f="vml");break;case "silverlight":try{a("ie")?(b=new ActiveXObject("AgControl.AgControl"),b.IsVersionSupported("1.0"))&&(d=!0):navigator.plugins["Silverlight Plug-In"]&&(d=!0)}catch(q){d=!1}finally{b=null}d&&(f="silverlight");break;case "canvas":c.global.CanvasRenderingContext2D&&(f="canvas")}"canvas"===f&&!1!==h.canvasEvents&&(f=
"canvasWithEvents");"svg"==f&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(k):k()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(u,C){return a.doc.createElementNS?a.doc.createElementNS(u,C):a.doc.createElement(C)}function q(u,C,E,F){return u.setAttributeNS?u.setAttributeNS(C,
E,F):u.setAttribute(E,F)}function m(u){return n.useSvgWeb?a.doc.createTextNode(u,!0):a.doc.createTextNode(u)}var n=k.svg={};n.useSvgWeb="undefined"!=typeof window.svgweb;var t=navigator.userAgent,z=B("ios"),w=B("android"),y=B("chrome")||w&&4<=w?"auto":"optimizeLegibility";n.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};n.getRef=function(u){return u&&"none"!=u?u.match(/^url\(#.+\)$/)?c.byId(u.slice(5,-1)):u.match(/^#dojoUnique\d+$/)?c.byId(u.slice(1)):null:null};n.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var x=0;n.Shape=h("dojox.gfx.svg.Shape",f.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var u=this.rawNode.getAttribute("fill");(u=n.getRef(u))&&u.parentNode.removeChild(u)}this.clip&&(u=this.rawNode.getAttribute("clip-path"))&&(u=c.byId(u.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);
f.Shape.prototype.destroy.apply(this,arguments)},setFill:function(u){if(!u)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var C=function(F){this.setAttribute(F,E[F].toFixed(8))};if("object"==typeof u&&"type"in u){switch(u.type){case "linear":var E=k.makeParameters(k.defaultLinearGradient,u);u=this._setFillObject(E,"linearGradient");g.forEach(["x1","y1","x2","y2"],C,u);break;case "radial":E=k.makeParameters(k.defaultRadialGradient,
u);u=this._setFillObject(E,"radialGradient");g.forEach(["cx","cy","r"],C,u);break;case "pattern":E=k.makeParameters(k.defaultPattern,u),u=this._setFillObject(E,"pattern"),g.forEach(["x","y","width","height"],C,u)}this.fillStyle=E;return this}this.fillStyle=E=k.normalizeColor(u);this.rawNode.setAttribute("fill",E.toCss());this.rawNode.setAttribute("fill-opacity",E.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(u){var C=this.rawNode;if(!u)return this.strokeStyle=
null,C.setAttribute("stroke","none"),C.setAttribute("stroke-opacity",0),this;if("string"==typeof u||D.isArray(u)||u instanceof r)u={color:u};u=this.strokeStyle=k.makeParameters(k.defaultStroke,u);u.color=k.normalizeColor(u.color);if(u){var E=0>u.width?0:u.width;C.setAttribute("stroke",u.color.toCss());C.setAttribute("stroke-opacity",u.color.a);C.setAttribute("stroke-width",E);C.setAttribute("stroke-linecap",u.cap);"number"==typeof u.join?(C.setAttribute("stroke-linejoin","miter"),C.setAttribute("stroke-miterlimit",
u.join)):C.setAttribute("stroke-linejoin",u.join);var F=u.style.toLowerCase();F in n.dasharray&&(F=n.dasharray[F]);if(F instanceof Array){F=D._toArray(F);var G;for(G=0;G<F.length;++G)F[G]*=E;if("butt"!=u.cap){for(G=0;G<F.length;G+=2)F[G]-=E,1>F[G]&&(F[G]=1);for(G=1;G<F.length;G+=2)F[G]+=E}F=F.join(",")}C.setAttribute("stroke-dasharray",F);C.setAttribute("dojoGfxStrokeStyle",u.style)}return this},_getParentSurface:function(){for(var u=this.parent;u&&!(u instanceof k.Surface);u=u.parent);return u},
_setFillObject:function(u,C){var E=n.xmlns.svg;this.fillStyle=u;var F=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=n.getRef(G))if(G.tagName.toLowerCase()!=C.toLowerCase()){var H=G.id;G.parentNode.removeChild(G);G=d(E,C);G.setAttribute("id",H);F.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);else G=d(E,C),G.setAttribute("id",k._base._getUniqueId()),F.appendChild(G);if("pattern"==C)G.setAttribute("patternUnits","userSpaceOnUse"),E=d(E,"image"),
E.setAttribute("x",0),E.setAttribute("y",0),E.setAttribute("width",(0>u.width?0:u.width).toFixed(8)),E.setAttribute("height",(0>u.height?0:u.height).toFixed(8)),q(E,n.xmlns.xlink,"xlink:href",u.src),G.appendChild(E);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),F=0;F<u.colors.length;++F){H=u.colors[F];var J=d(E,"stop"),I=H.color=k.normalizeColor(H.color);J.setAttribute("offset",H.offset.toFixed(8));J.setAttribute("stop-color",I.toCss());J.setAttribute("stop-opacity",I.a);G.appendChild(J)}this.rawNode.setAttribute("fill",
"url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var u=this.matrix;this.rawNode.setAttribute("transform","matrix("+u.xx.toFixed(8)+","+u.yx.toFixed(8)+","+u.xy.toFixed(8)+","+u.yy.toFixed(8)+","+u.dx.toFixed(8)+","+u.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(u){u=this.rawNode=u;"image"!=this.shape.type&&u.setAttribute("fill",
"none");u.setAttribute("fill-opacity",0);u.setAttribute("stroke","none");u.setAttribute("stroke-opacity",0);u.setAttribute("stroke-width",1);u.setAttribute("stroke-linecap","butt");u.setAttribute("stroke-linejoin","miter");u.setAttribute("stroke-miterlimit",4);u.__gfxObject__=this},setShape:function(u){this.shape=k.makeParameters(this.shape,u);for(var C in this.shape)if("type"!=C){u=this.shape[C];if("width"===C||"height"===C)u=0>u?0:u;this.rawNode.setAttribute(C,u)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(u){this.inherited(arguments);var C=u?"width"in u?"rect":"cx"in u?"ellipse":"points"in u?"polyline":"d"in u?"path":null:null;if(u&&!C)return this;"polyline"===C&&(u=D.clone(u),u.points=u.points.join(","));var E,F=l.get(this.rawNode,"clip-path");F&&(E=c.byId(F.match(/gfx_clip[\d]+/)[0]))&&E.removeChild(E.childNodes[0]);u?(E?(C=d(n.xmlns.svg,C),E.appendChild(C)):
(F="gfx_clip"+ ++x,this.rawNode.setAttribute("clip-path","url(#"+F+")"),E=d(n.xmlns.svg,"clipPath"),C=d(n.xmlns.svg,C),E.appendChild(C),this.rawNode.parentNode.insertBefore(E,this.rawNode),l.set(E,"id",F)),l.set(C,u)):(this.rawNode.removeAttribute("clip-path"),E&&E.parentNode.removeChild(E));return this},_removeClipNode:function(){var u,C=l.get(this.rawNode,"clip-path");C&&(u=c.byId(C.match(/gfx_clip[\d]+/)[0]))&&u.parentNode.removeChild(u);return u}});n.Group=h("dojox.gfx.svg.Group",n.Shape,{constructor:function(){f.Container._init.call(this)},
setRawNode:function(u){this.rawNode=u;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);n.Shape.prototype.destroy.apply(this,arguments)}});n.Group.nodeType="g";n.Rect=h("dojox.gfx.svg.Rect",[n.Shape,f.Rect],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;for(var C in this.shape)if("type"!=C&&"r"!=C){u=this.shape[C];if("width"===C||"height"===C)u=0>u?0:u;this.rawNode.setAttribute(C,u)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});n.Rect.nodeType="rect";n.Ellipse=h("dojox.gfx.svg.Ellipse",[n.Shape,f.Ellipse],{});n.Ellipse.nodeType="ellipse";n.Circle=h("dojox.gfx.svg.Circle",[n.Shape,f.Circle],{});n.Circle.nodeType="circle";n.Line=h("dojox.gfx.svg.Line",[n.Shape,f.Line],{});n.Line.nodeType="line";n.Polyline=h("dojox.gfx.svg.Polyline",[n.Shape,f.Polyline],{setShape:function(u,C){u&&u instanceof Array?(this.shape=k.makeParameters(this.shape,{points:u}),C&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=k.makeParameters(this.shape,u);this.bbox=null;this._normalizePoints();for(var E=[],F=this.shape.points,G=0;G<F.length;++G)E.push(F[G].x.toFixed(8),F[G].y.toFixed(8));this.rawNode.setAttribute("points",E.join(" "));return this}});n.Polyline.nodeType="polyline";n.Image=h("dojox.gfx.svg.Image",[n.Shape,f.Image],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;for(var C in this.shape)if("type"!=C&&"src"!=
C){var E=this.shape[C];if("width"===C||"height"===C)E=0>E?0:E;u.setAttribute(C,E)}u.setAttribute("preserveAspectRatio","none");q(u,n.xmlns.xlink,"xlink:href",this.shape.src);u.__gfxObject__=this;return this}});n.Image.nodeType="image";n.Text=h("dojox.gfx.svg.Text",[n.Shape,f.Text],{setShape:function(u){this.shape=k.makeParameters(this.shape,u);this.bbox=null;u=this.rawNode;var C=this.shape;u.setAttribute("x",C.x);u.setAttribute("y",C.y);u.setAttribute("text-anchor",C.align);u.setAttribute("text-decoration",
C.decoration);u.setAttribute("rotate",C.rotated?90:0);u.setAttribute("kerning",C.kerning?"auto":0);u.setAttribute("text-rendering",y);u.firstChild?u.firstChild.nodeValue=C.text:u.appendChild(m(C.text));return this},getTextWidth:function(){var u=this.rawNode,C=u.parentNode;u=u.cloneNode(!0);u.style.visibility="hidden";var E=0,F=u.firstChild.nodeValue;C.appendChild(u);if(""!=F)for(;!E;)E=u.getBBox?parseInt(u.getBBox().width):68;C.removeChild(u);return E},getBoundingBox:function(){var u=null;if(this.getShape().text)try{u=
this.rawNode.getBBox()}catch(C){u={x:0,y:0,width:0,height:0}}return u}});n.Text.nodeType="text";n.Path=h("dojox.gfx.svg.Path",[n.Shape,b.Path],{_updateWithSegment:function(u){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(u){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});n.Path.nodeType="path";n.TextPath=h("dojox.gfx.svg.TextPath",
[n.Shape,b.TextPath],{_updateWithSegment:function(u){this.inherited(arguments);this._setTextPath()},setShape:function(u){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var u=this.rawNode;if(!u.firstChild){var C=d(n.xmlns.svg,"textPath"),E=m("");C.appendChild(E);u.appendChild(C)}C=(C=u.firstChild.getAttributeNS(n.xmlns.xlink,"href"))&&n.getRef(C);if(!C&&(E=this._getParentSurface())){E=E.defNode;C=d(n.xmlns.svg,"path");var F=k._base._getUniqueId();
C.setAttribute("id",F);E.appendChild(C);q(u.firstChild,n.xmlns.xlink,"xlink:href","#"+F)}C&&C.setAttribute("d",this.shape.path)}},_setText:function(){var u=this.rawNode;if(!u.firstChild){var C=d(n.xmlns.svg,"textPath"),E=m("");C.appendChild(E);u.appendChild(C)}u=u.firstChild;C=this.text;u.setAttribute("alignment-baseline","middle");switch(C.align){case "middle":u.setAttribute("text-anchor","middle");u.setAttribute("startOffset","50%");break;case "end":u.setAttribute("text-anchor","end");u.setAttribute("startOffset",
"100%");break;default:u.setAttribute("text-anchor","start"),u.setAttribute("startOffset","0%")}u.setAttribute("baseline-shift","0.5ex");u.setAttribute("text-decoration",C.decoration);u.setAttribute("rotate",C.rotated?90:0);u.setAttribute("kerning",C.kerning?"auto":0);u.firstChild.data=C.text}});n.TextPath.nodeType="text";var A=534<function(){var u=/WebKit\/(\d*)/.exec(t);return u?u[1]:0}();n.Surface=h("dojox.gfx.svg.Surface",f.Surface,{constructor:function(){f.Container._init.call(this)},destroy:function(){f.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(u,C){if(!this.rawNode)return this;var E=0>u?0:u,F=0>C?0:C;this.rawNode.setAttribute("width",E);this.rawNode.setAttribute("height",F);A&&(this.rawNode.style.width=E,this.rawNode.style.height=F);return this},getDimensions:function(){return this.rawNode?{width:k.normalizedLength(this.rawNode.getAttribute("width")),height:k.normalizedLength(this.rawNode.getAttribute("height"))}:null}});n.createSurface=function(u,C,E){var F=new n.Surface;
F.rawNode=d(n.xmlns.svg,"svg");F.rawNode.setAttribute("overflow","hidden");C&&F.rawNode.setAttribute("width",0>C?0:C);E&&F.rawNode.setAttribute("height",0>E?0:E);C=d(n.xmlns.svg,"defs");F.rawNode.appendChild(C);F.defNode=C;F._parent=c.byId(u);F._parent.appendChild(F.rawNode);k._base._fixMsTouchAction(F);return F};B={_setFont:function(){var u=this.fontStyle;this.rawNode.setAttribute("font-style",u.style);this.rawNode.setAttribute("font-variant",u.variant);this.rawNode.setAttribute("font-weight",u.weight);
this.rawNode.setAttribute("font-size",u.size);this.rawNode.setAttribute("font-family",u.family)}};var v=f.Container;h=n.Container={openBatch:function(){if(!this._batch){var u=n.useSvgWeb?a.doc.createDocumentFragment(!0):a.doc.createDocumentFragment();this.fragment=u}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(u){this!=u.getParent()&&(this.fragment?
this.fragment.appendChild(u.rawNode):this.rawNode.appendChild(u.rawNode),v.add.apply(this,arguments),u.setClip(u.clip));return this},remove:function(u,C){this==u.getParent()&&(this.rawNode==u.rawNode.parentNode&&this.rawNode.removeChild(u.rawNode),this.fragment&&this.fragment==u.rawNode.parentNode&&this.fragment.removeChild(u.rawNode),u._removeClipNode(),v.remove.apply(this,arguments));return this},clear:function(){for(var u=this.rawNode;u.lastChild;)u.removeChild(u.lastChild);var C=this.defNode;
if(C){for(;C.lastChild;)C.removeChild(C.lastChild);u.appendChild(C)}return v.clear.apply(this,arguments)},getBoundingBox:v.getBoundingBox,_moveChildToFront:v._moveChildToFront,_moveChildToBack:v._moveChildToBack};b=n.Creator={createObject:function(u,C){if(!this.rawNode)return null;var E=new u,F=d(n.xmlns.svg,u.nodeType);E.setRawNode(F);E.setShape(C);this.add(E);return E}};D.extend(n.Text,B);D.extend(n.TextPath,B);D.extend(n.Group,h);D.extend(n.Group,f.Creator);D.extend(n.Group,b);D.extend(n.Surface,
h);D.extend(n.Surface,f.Creator);D.extend(n.Surface,b);n.fixTarget=function(u,C){u.gfxTarget||(u.gfxTarget=z&&u.target.wholeText?u.target.parentElement.__gfxObject__:u.target.__gfxObject__);return!0};n.useSvgWeb&&(n.createSurface=function(u,C,E){var F=new n.Surface;C=0>C?0:C;E=0>E?0:E;if(!C||!E){var G=e.position(u);C=C||G.w;E=E||G.h}u=c.byId(u);G=u.id?u.id+"_svgweb":k._base._getUniqueId();var H=d(n.xmlns.svg,"svg");H.id=G;H.setAttribute("width",C);H.setAttribute("height",E);svgweb.appendChild(H,u);
H.addEventListener("SVGLoad",function(){F.rawNode=this;F.isLoaded=!0;var J=d(n.xmlns.svg,"defs");F.rawNode.appendChild(J);F.defNode=J;if(F.onLoad)F.onLoad(F)},!1);F.isLoaded=!1;return F},n.Surface.extend({destroy:function(){var u=this.rawNode;svgweb.removeChild(u,u.parentNode)}}),B={connect:function(u,C,E){"on"===u.substring(0,2)&&(u=u.substring(2));E=2==arguments.length?C:D.hitch(C,E);this.getEventSource().addEventListener(u,E,!1);return[this,u,E]},disconnect:function(u){this.getEventSource().removeEventListener(u[1],
u[2],!1);delete u[0]}},D.extend(n.Shape,B),D.extend(n.Surface,B));return n})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(D,B,a,c,h,g,e,l,r,k){function f(d,q){for(var m=d.length-1;q<m;)d[q]=d[++q];d.length=m}var b=D.shape={};b.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(h("gfxRegistry")){var d=b.register(this);this.getUID=function(){return d}}},destroy:function(){h("gfxRegistry")&&b.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var d=this.getBoundingBox();if(!d)return null;var q=this._getRealMatrix();return[k.multiplyPoint(q,d.x,d.y),k.multiplyPoint(q,d.x+d.width,d.y),k.multiplyPoint(q,d.x+d.width,d.y+d.height),k.multiplyPoint(q,d.x,d.y+d.height)]},getEventSource:function(){return this.rawNode},setClip:function(d){this.clip=d},getClip:function(){return this.clip},setShape:function(d){this.shape=D.makeParameters(this.shape,d);this.bbox=null;
return this},setFill:function(d){if(!d)return this.fillStyle=null,this;var q=null;if("object"==typeof d&&"type"in d)switch(d.type){case "linear":q=D.makeParameters(D.defaultLinearGradient,d);break;case "radial":q=D.makeParameters(D.defaultRadialGradient,d);break;case "pattern":q=D.makeParameters(D.defaultPattern,d)}else q=D.normalizeColor(d);this.fillStyle=q;return this},setStroke:function(d){if(!d)return this.strokeStyle=null,this;if("string"==typeof d||B.isArray(d)||d instanceof r)d={color:d};d=
this.strokeStyle=D.makeParameters(D.defaultStroke,d);d.color=D.normalizeColor(d.color);return this},setTransform:function(d){this.matrix=k.clone(d?k.normalize(d):k.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var d=this.getParent();d&&(d._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var d=this.getParent();d&&(d._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(d){return d?this.setTransform([this.matrix,d]):this},applyLeftTransform:function(d){return d?this.setTransform([d,this.matrix]):this},applyTransform:function(d){return d?this.setTransform([this.matrix,d]):this},removeShape:function(d){this.parent&&this.parent.remove(this,d);return this},_setParent:function(d,q){this.parent=d;return this._updateParentMatrix(q)},_updateParentMatrix:function(d){this.parentMatrix=d?k.clone(d):null;return this._applyTransform()},_getRealMatrix:function(){for(var d=
this.matrix,q=this.parent;q;)q.matrix&&(d=k.multiply(q.matrix,d)),q=q.parent;return d}});b._eventsProcessing={on:function(d,q){return g(this.getEventSource(),d,b.fixCallback(this,D.fixTarget,q))},connect:function(d,q,m){"on"==d.substring(0,2)&&(d=d.substring(2));return this.on(d,m?B.hitch(q,m):q)},disconnect:function(d){return d.remove()}};b.fixCallback=function(d,q,m,n){n||(n=m,m=null);if(B.isString(n)){m=m||c.global;if(!m[n])throw['dojox.gfx.shape.fixCallback: scope["',n,'"] is null (scope\x3d"',
m,'")'].join("");return function(t){return q(t,d)?m[n].apply(m,arguments||[]):void 0}}return m?function(t){return q(t,d)?n.apply(m,arguments||[]):void 0}:function(t){return q(t,d)?n.apply(m,arguments):void 0}};B.extend(b.Shape,b._eventsProcessing);b.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(d){var q=d.getParent();q&&q.remove(d,!0);this.children.push(d);return d._setParent(this,this._getRealMatrix())},
remove:function(d,q){for(var m=0;m<this.children.length;++m)if(this.children[m]==d){q||(d.parent=null,d.parentMatrix=null);f(this.children,m);break}return this},clear:function(d){for(var q,m=0;m<this.children.length;++m)q=this.children[m],q.parent=null,q.parentMatrix=null,d&&q.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var d=null;e.forEach(this.children,function(q){var m=q.getBoundingBox();m&&((q=q.getTransform())&&(m=k.multiplyRectangle(q,m)),d?(d.x=Math.min(d.x,
m.x),d.y=Math.min(d.y,m.y),d.endX=Math.max(d.endX,m.x+m.width),d.endY=Math.max(d.endY,m.y+m.height)):d={x:m.x,y:m.y,endX:m.x+m.width,endY:m.y+m.height})});d&&(d.width=d.endX-d.x,d.height=d.endY-d.y);return d}return null},_moveChildToFront:function(d){for(var q=0;q<this.children.length;++q)if(this.children[q]==d){f(this.children,q);this.children.push(d);break}return this},_moveChildToBack:function(d){for(var q=0;q<this.children.length;++q)if(this.children[q]==d){f(this.children,q);this.children.unshift(d);
break}return this}};b.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){e.forEach(this._nodes,l.destroy);this._nodes=[];e.forEach(this._events,function(d){d&&d.remove()});this._events=[];this.rawNode=null;if(h("ie"))for(;this._parent.lastChild;)l.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(d){},whenLoaded:function(d,q){var m=B.hitch(d,q);if(this.isLoaded)m(this);else g.once(this,"load",function(n){m(n)})}});B.extend(b.Surface,b._eventsProcessing);b.Rect=a("dojox.gfx.shape.Rect",b.Shape,{constructor:function(d){this.shape=D.getDefault("Rect");this.rawNode=d},getBoundingBox:function(){return this.shape}});b.Ellipse=a("dojox.gfx.shape.Ellipse",b.Shape,{constructor:function(d){this.shape=D.getDefault("Ellipse");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=
this.shape;this.bbox={x:d.cx-d.rx,y:d.cy-d.ry,width:2*d.rx,height:2*d.ry}}return this.bbox}});b.Circle=a("dojox.gfx.shape.Circle",b.Shape,{constructor:function(d){this.shape=D.getDefault("Circle");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=this.shape;this.bbox={x:d.cx-d.r,y:d.cy-d.r,width:2*d.r,height:2*d.r}}return this.bbox}});b.Line=a("dojox.gfx.shape.Line",b.Shape,{constructor:function(d){this.shape=D.getDefault("Line");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=
this.shape;this.bbox={x:Math.min(d.x1,d.x2),y:Math.min(d.y1,d.y2),width:Math.abs(d.x2-d.x1),height:Math.abs(d.y2-d.y1)}}return this.bbox}});b.Polyline=a("dojox.gfx.shape.Polyline",b.Shape,{constructor:function(d){this.shape=D.getDefault("Polyline");this.rawNode=d},setShape:function(d,q){d&&d instanceof Array?(this.inherited(arguments,[{points:d}]),q&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[d]);return this},_normalizePoints:function(){var d=
this.shape.points,q=d&&d.length;if(q&&"number"==typeof d[0]){for(var m=[],n=0;n<q;n+=2)m.push({x:d[n],y:d[n+1]});this.shape.points=m}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var d=this.shape.points,q=d.length,m=d[0],n=m.x,t=m.y,z=m.x,w=m.y,y=1;y<q;++y)m=d[y],n>m.x&&(n=m.x),z<m.x&&(z=m.x),t>m.y&&(t=m.y),w<m.y&&(w=m.y);this.bbox={x:n,y:t,width:z-n,height:w-t}}return this.bbox}});b.Image=a("dojox.gfx.shape.Image",b.Shape,{constructor:function(d){this.shape=D.getDefault("Image");
this.rawNode=d},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});b.Text=a(b.Shape,{constructor:function(d){this.fontStyle=null;this.shape=D.getDefault("Text");this.rawNode=d},getFont:function(){return this.fontStyle},setFont:function(d){this.fontStyle="string"==typeof d?D.splitFontString(d):D.makeParameters(D.defaultFont,d);this._setFont();return this},getBoundingBox:function(){var d=null;this.getShape().text&&(d=D._base._computeTextBoundingBox(this));
return d}});b.Creator={createShape:function(d){switch(d.type){case D.defaultPath.type:return this.createPath(d);case D.defaultRect.type:return this.createRect(d);case D.defaultCircle.type:return this.createCircle(d);case D.defaultEllipse.type:return this.createEllipse(d);case D.defaultLine.type:return this.createLine(d);case D.defaultPolyline.type:return this.createPolyline(d);case D.defaultImage.type:return this.createImage(d);case D.defaultText.type:return this.createText(d);case D.defaultTextPath.type:return this.createTextPath(d)}return null},
createGroup:function(){return this.createObject(D.Group)},createRect:function(d){return this.createObject(D.Rect,d)},createEllipse:function(d){return this.createObject(D.Ellipse,d)},createCircle:function(d){return this.createObject(D.Circle,d)},createLine:function(d){return this.createObject(D.Line,d)},createPolyline:function(d){return this.createObject(D.Polyline,d)},createImage:function(d){return this.createObject(D.Image,d)},createText:function(d){return this.createObject(D.Text,d)},createPath:function(d){return this.createObject(D.Path,
d)},createTextPath:function(d){return this.createObject(D.TextPath,{}).setText(d)},createObject:function(d,q){return null}};return b})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(D,B){var a=D.matrix={},c={};a._degToRad=function(h){return c[h]||(c[h]=Math.PI*h/180)};a._radToDeg=function(h){return h/Math.PI*180};a.Matrix2D=function(h){if(h)if("number"==typeof h)this.xx=this.yy=h;else if(h instanceof Array){if(0<h.length){for(var g=a.normalize(h[0]),e=1;e<h.length;++e){var l=
g,r=a.normalize(h[e]);g=new a.Matrix2D;g.xx=l.xx*r.xx+l.xy*r.yx;g.xy=l.xx*r.xy+l.xy*r.yy;g.yx=l.yx*r.xx+l.yy*r.yx;g.yy=l.yx*r.xy+l.yy*r.yy;g.dx=l.xx*r.dx+l.xy*r.dy+l.dx;g.dy=l.yx*r.dx+l.yy*r.dy+l.dy}B.mixin(this,g)}}else B.mixin(this,h)};B.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});B.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(h,g){return 1<arguments.length?new a.Matrix2D({dx:h,dy:g}):
new a.Matrix2D({dx:h.x,dy:h.y})},scale:function(h,g){return 1<arguments.length?new a.Matrix2D({xx:h,yy:g}):"number"==typeof h?new a.Matrix2D({xx:h,yy:h}):new a.Matrix2D({xx:h.x,yy:h.y})},rotate:function(h){var g=Math.cos(h);h=Math.sin(h);return new a.Matrix2D({xx:g,xy:-h,yx:h,yy:g})},rotateg:function(h){return a.rotate(a._degToRad(h))},skewX:function(h){return new a.Matrix2D({xy:Math.tan(h)})},skewXg:function(h){return a.skewX(a._degToRad(h))},skewY:function(h){return new a.Matrix2D({yx:Math.tan(h)})},
skewYg:function(h){return a.skewY(a._degToRad(h))},reflect:function(h,g){1==arguments.length&&(g=h.y,h=h.x);var e=h*h,l=g*g,r=e+l,k=2*h*g/r;return new a.Matrix2D({xx:2*e/r-1,xy:k,yx:k,yy:2*l/r-1})},project:function(h,g){1==arguments.length&&(g=h.y,h=h.x);var e=h*h,l=g*g,r=e+l,k=h*g/r;return new a.Matrix2D({xx:e/r,xy:k,yx:k,yy:l/r})},normalize:function(h){return h instanceof a.Matrix2D?h:new a.Matrix2D(h)},isIdentity:function(h){return 1==h.xx&&0==h.xy&&0==h.yx&&1==h.yy&&0==h.dx&&0==h.dy},clone:function(h){var g=
new a.Matrix2D,e;for(e in h)"number"==typeof h[e]&&"number"==typeof g[e]&&g[e]!=h[e]&&(g[e]=h[e]);return g},invert:function(h){h=a.normalize(h);var g=h.xx*h.yy-h.xy*h.yx;return h=new a.Matrix2D({xx:h.yy/g,xy:-h.xy/g,yx:-h.yx/g,yy:h.xx/g,dx:(h.xy*h.dy-h.yy*h.dx)/g,dy:(h.yx*h.dx-h.xx*h.dy)/g})},_multiplyPoint:function(h,g,e){return{x:h.xx*g+h.xy*e+h.dx,y:h.yx*g+h.yy*e+h.dy}},multiplyPoint:function(h,g,e){h=a.normalize(h);return"number"==typeof g&&"number"==typeof e?a._multiplyPoint(h,g,e):a._multiplyPoint(h,
g.x,g.y)},multiplyRectangle:function(h,g){var e=a.normalize(h);g=g||{x:0,y:0,width:0,height:0};if(a.isIdentity(e))return{x:g.x,y:g.y,width:g.width,height:g.height};var l=a.multiplyPoint(e,g.x,g.y),r=a.multiplyPoint(e,g.x,g.y+g.height),k=a.multiplyPoint(e,g.x+g.width,g.y);e=a.multiplyPoint(e,g.x+g.width,g.y+g.height);var f=Math.min(l.x,r.x,k.x,e.x),b=Math.min(l.y,r.y,k.y,e.y);return{x:f,y:b,width:Math.max(l.x,r.x,k.x,e.x)-f,height:Math.max(l.y,r.y,k.y,e.y)-b}},multiply:function(h){for(var g=a.normalize(h),
e=1;e<arguments.length;++e){var l=g,r=a.normalize(arguments[e]);g=new a.Matrix2D;g.xx=l.xx*r.xx+l.xy*r.yx;g.xy=l.xx*r.xy+l.xy*r.yy;g.yx=l.yx*r.xx+l.yy*r.yx;g.yy=l.yx*r.xy+l.yy*r.yy;g.dx=l.xx*r.dx+l.xy*r.dy+l.dx;g.dy=l.yx*r.dx+l.yy*r.dy+l.dy}return g},_sandwich:function(h,g,e){return a.multiply(a.translate(g,e),h,a.translate(-g,-e))},scaleAt:function(h,g,e,l){switch(arguments.length){case 4:return a._sandwich(a.scale(h,g),e,l);case 3:return"number"==typeof e?a._sandwich(a.scale(h),g,e):a._sandwich(a.scale(h,
g),e.x,e.y)}return a._sandwich(a.scale(h),g.x,g.y)},rotateAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.rotate(h),g,e):a._sandwich(a.rotate(h),g.x,g.y)},rotategAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.rotateg(h),g,e):a._sandwich(a.rotateg(h),g.x,g.y)},skewXAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.skewX(h),g,e):a._sandwich(a.skewX(h),g.x,g.y)},skewXgAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.skewXg(h),g,e):a._sandwich(a.skewXg(h),g.x,
g.y)},skewYAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.skewY(h),g,e):a._sandwich(a.skewY(h),g.x,g.y)},skewYgAt:function(h,g,e){return 2<arguments.length?a._sandwich(a.skewYg(h),g,e):a._sandwich(a.skewYg(h),g.x,g.y)}});D.Matrix2D=a.Matrix2D;return a})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(D,B,a,c,h){h=a("dojox.gfx.path.Path",h.Shape,{constructor:function(g){this.shape=B.clone(D.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=g;this.segmented=!1},setAbsoluteMode:function(g){this._confirmSegmented();this.absolute="string"==typeof g?"absolute"==g:g;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var g=this.bbox,e=this._getRealMatrix();this.bbox=null;for(var l=0,r=this.segments.length;l<r;++l)this._updateWithSegment(this.segments[l],e);e=this.bbox;this.bbox=g;return this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,y:e.b},{x:e.l,y:e.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(g,e,l){l&&(e=c.multiplyPoint(l,
g,e),g=e.x,e=e.y);this.bbox&&"l"in this.bbox?(this.bbox.l>g&&(this.bbox.l=g),this.bbox.r<g&&(this.bbox.r=g),this.bbox.t>e&&(this.bbox.t=e),this.bbox.b<e&&(this.bbox.b=e)):this.bbox={l:g,b:e,r:g,t:e}},_updateWithSegment:function(g,e){var l=g.args,r=l.length,k;switch(g.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(k=0;k<r;k+=2)this._updateBBox(l[k],l[k+1],e);this.last.x=l[r-2];this.last.y=l[r-1];this.absolute=!0;break;case "H":for(k=0;k<r;++k)this._updateBBox(l[k],this.last.y,e);
this.last.x=l[r-1];this.absolute=!0;break;case "V":for(k=0;k<r;++k)this._updateBBox(this.last.x,l[k],e);this.last.y=l[r-1];this.absolute=!0;break;case "m":k=0;"x"in this.last||(this._updateBBox(this.last.x=l[0],this.last.y=l[1],e),k=2);for(;k<r;k+=2)this._updateBBox(this.last.x+=l[k],this.last.y+=l[k+1],e);this.absolute=!1;break;case "l":case "t":for(k=0;k<r;k+=2)this._updateBBox(this.last.x+=l[k],this.last.y+=l[k+1],e);this.absolute=!1;break;case "h":for(k=0;k<r;++k)this._updateBBox(this.last.x+=
l[k],this.last.y,e);this.absolute=!1;break;case "v":for(k=0;k<r;++k)this._updateBBox(this.last.x,this.last.y+=l[k],e);this.absolute=!1;break;case "c":for(k=0;k<r;k+=6)this._updateBBox(this.last.x+l[k],this.last.y+l[k+1],e),this._updateBBox(this.last.x+l[k+2],this.last.y+l[k+3],e),this._updateBBox(this.last.x+=l[k+4],this.last.y+=l[k+5],e);this.absolute=!1;break;case "s":case "q":for(k=0;k<r;k+=4)this._updateBBox(this.last.x+l[k],this.last.y+l[k+1],e),this._updateBBox(this.last.x+=l[k+2],this.last.y+=
l[k+3],e);this.absolute=!1;break;case "A":for(k=0;k<r;k+=7)this._updateBBox(l[k+5],l[k+6],e);this.last.x=l[r-2];this.last.y=l[r-1];this.absolute=!0;break;case "a":for(k=0;k<r;k+=7)this._updateBBox(this.last.x+=l[k+5],this.last.y+=l[k+6],e);this.absolute=!1}var f=[g.action];for(k=0;k<r;++k)f.push(D.formatNumber(l[k],!0));if("string"==typeof this.shape.path)this.shape.path+=f.join("");else for(k=0,r=f.length;k<r;++k)this.shape.path.push(f[k])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},
_pushSegment:function(g,e){this.tbbox=null;var l=this._validSegments[g.toLowerCase()];"number"==typeof l&&(l?e.length>=l&&(l={action:g,args:e.slice(0,e.length-e.length%l)},this.segments.push(l),this._updateWithSegment(l)):(l={action:g,args:[]},this.segments.push(l),this._updateWithSegment(l)))},_collectArgs:function(g,e){for(var l=0;l<e.length;++l){var r=e[l];"boolean"==typeof r?g.push(r?1:0):"number"==typeof r?g.push(r):r instanceof Array?this._collectArgs(g,r):"x"in r&&"y"in r&&g.push(r.x,r.y)}},
moveTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"M":"m",g);return this},lineTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"L":"l",g);return this},hLineTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"H":"h",g);return this},vLineTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);
this._pushSegment(this.absolute?"V":"v",g);return this},curveTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"C":"c",g);return this},smoothCurveTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"S":"s",g);return this},qCurveTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"Q":"q",g);return this},qSmoothCurveTo:function(){this._confirmSegmented();
var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"T":"t",g);return this},arcTo:function(){this._confirmSegmented();var g=[];this._collectArgs(g,arguments);this._pushSegment(this.absolute?"A":"a",g);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var g=this.shape.path;this.shape.path=[];this._setPath(g);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(g){g=
B.isArray(g)?g:g.match(D.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(g){for(var e="",l=[],r=g.length,k=0;k<r;++k){var f=g[k],b=parseFloat(f);isNaN(b)?(e&&this._pushSegment(e,l),l=[],e=f):l.push(b)}this._pushSegment(e,l)}},setShape:function(g){this.inherited(arguments,["string"==typeof g?{path:g}:g]);this.segmented=!1;this.segments=[];D.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",h,{constructor:function(g){"text"in
this||(this.text=B.clone(D.defaultTextPath));"fontStyle"in this||(this.fontStyle=B.clone(D.defaultFont))},getText:function(){return this.text},setText:function(g){this.text=D.makeParameters(this.text,"string"==typeof g?{text:g}:g);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(g){this.fontStyle="string"==typeof g?D.splitFontString(g):D.makeParameters(D.defaultFont,g);this._setFont();return this}});return D.path={Path:h,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang",
"dojo/_base/array"],function(D,B){var a={},c={x:"0%",y:"0%",width:"100%",height:"100%"},h={};a.createFilter=function(b,d){var q=D.mixin({},c,b);q.primitives||(q.primitives=[]);d&&Array.prototype.push.apply(q.primitives,d);return q};var g=function(b,d,q){d instanceof Array&&(q=d,d=null);d=D.mixin({},d);d.children=q;d.tag=b;return d};B.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(b){a[b]=function(d,q){return g(b,d,q)}});a.feMerge=function(b,d){if("string"===typeof b){for(var q=[],m=0;m<arguments.length;++m)q.push(a.feMergeNode({"in":arguments[m]}));return g("feMerge",{},q)}return g("feMerge",b,d)};var e=a.createFilter;h.convolutions=[e({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),e({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
e({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),e({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])]),e({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),e({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])])];B.forEach(h.convolutions,function(b){D.mixin(b,c)});h.shadows=[e({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur",
"SourceGraphic")]),e({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"smallDropShadowLight"},
[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var l={x:"-10%",y:"-10%",width:"125%",height:"125%"};B.forEach(h.shadows,function(b){D.mixin(b,l)});h.blurs=[e({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),e({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),e({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),e({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),e({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",
slope:10})])])];h.colors=[e({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),e({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"grayscale"},
[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),e({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",
tableValues:"0,0"})])]),e({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),e({_gfxName:"hueRotate120"},[a.feColorMatrix({type:"hueRotate",values:120})]),e({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),e({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];B.forEach(h.colors,function(b){D.mixin(b,c)});h.miscs=[e({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur",
"litPaint")]),e({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),e({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),e({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),e({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),e({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),e({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];h.reliefs=[e({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),e({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),e({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),e({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),e({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];h.textures=[e({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),
a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var r in h)if(h.hasOwnProperty(r)){a[r]={};for(var k=
h[r],f=0;f<k.length;++f)(function(){var b=k[f];a[r][b._gfxName]=function(d){return D.delegate(b,d)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(D,B,a,c,h){function g(l,r){var k=r.ownerDocument.createElementNS(h.xmlns.svg,l.tag);r.appendChild(k);for(var f in l)f in e||k.setAttribute(f,l[f]);l.children&&B.forEach(l.children,function(b){g(b,k)});return k}a=c.svgext={};var e={primitives:null,tag:null,children:null};
h.Shape.extend({addRenderingOption:function(l,r){this.rawNode.setAttribute(l,r);return this},setFilter:function(l){if(!l)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=l;l.id=l.id||c._base._getUniqueId();var r=D.byId(l.id);if(!r){r=this.rawNode.ownerDocument.createElementNS(h.xmlns.svg,"filter");r.setAttribute("filterUnits","userSpaceOnUse");for(var k in l)k in e||r.setAttribute(k,l[k]);B.forEach(l.primitives,function(f){g(f,r)});(k=this._getParentSurface())&&k.defNode.appendChild(r)}this.rawNode.setAttribute("filter",
"url(#"+l.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(D,B,a,c,h,g,e,l,r,k){function f(q,m){var n=b(m);n&&D.utils.forEach(q,function(t){if(t instanceof D.Surface||t instanceof D.Group)t.textDir=n;t instanceof D.Text&&t.setShape({textDir:n});t instanceof D.TextPath&&t.setText({textDir:n})},
q);return q}function b(q){var m=["ltr","rtl","auto"];return q&&(q=q.toLowerCase(),0>g.indexOf(m,q))?null:q}B.getObject("dojox.gfx._gfxBidiSupport",!0);switch(D.renderer){case "vml":D.isVml=!0;break;case "svg":D.isSvg=!0;D.svg.useSvgWeb&&(D.isSvgWeb=!0);break;case "silverlight":D.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":D.isCanvas=!0}var d=new k;B.extend(D.shape.Surface,{textDir:"",setTextDir:function(q){f(this,q)},getTextDir:function(){return this.textDir}});B.extend(D.Group,{textDir:"",
setTextDir:function(q){f(this,q)},getTextDir:function(){return this.textDir}});B.extend(D.Text,{textDir:"",formatText:function(q,m){if(m&&q&&1<q.length){var n="ltr",t=m;if("auto"==t){if(D.isVml)return q;t=d.checkContextual(q)}if(D.isVml)return n=d.checkContextual(q),t!=n?"rtl"==t?d.hasBidiChar(q)?"\u200f\u200f"+q:d.bidiTransform(q,"IRNNN","ILNNN"):"\u200e"+q:q;if(D.isSvgWeb)return"rtl"==t?d.bidiTransform(q,"IRNNN","ILNNN"):q;if(D.isSilverlight)return"rtl"==t?d.bidiTransform(q,"IRNNN","VLYNN"):d.bidiTransform(q,
"ILNNN","VLYNN");if(D.isCanvas)return"rtl"==t?"\u202b"+q+"\u202c":"\u202a"+q+"\u202c";if(D.isSvg)return 4>a("ff")?"rtl"==t?d.bidiTransform(q,"IRYNN","VLNNN"):d.bidiTransform(q,"ILYNN","VLNNN"):"\u200e"+("rtl"==t?"\u202b":"\u202a")+q+"\u202c"}return q},bidiPreprocess:function(q){return q}});B.extend(D.TextPath,{textDir:"",formatText:function(q,m){if(m&&q&&1<q.length){var n="ltr",t=m;if("auto"==t){if(D.isVml)return q;t=d.checkContextual(q)}if(D.isVml)return n=d.checkContextual(q),t!=n?"rtl"==t?d.hasBidiChar(q)?
"\u200f\u200f"+q:d.bidiTransform(q,"IRNNN","ILNNN"):"\u200e"+q:q;if(D.isSvgWeb)return"rtl"==t?d.bidiTransform(q,"IRNNN","ILNNN"):q;D.isSvg&&(q=a("opera")||4<=a("ff")?"\u200e"+("rtl"==t?"\u202b":"\u202a")+q+"\u202c":"rtl"==t?d.bidiTransform(q,"IRYNN","VLNNN"):d.bidiTransform(q,"ILYNN","VLNNN"))}return q},bidiPreprocess:function(q){q&&"string"==typeof q&&(this.origText=q,q=this.formatText(q,this.textDir));return q}});e=function(q,m,n,t){var z=q.prototype[m];q.prototype[m]=function(){var w;n&&(w=n.apply(this,
arguments));w=z.call(this,w);t&&(w=t.call(this,w,arguments));return w}};l=function(q){q&&(q.textDir&&(q.textDir=b(q.textDir)),q.text&&q.text instanceof Array&&(q.text=q.text.join(",")));!q||void 0==q.text&&!q.textDir||this.textDir==q.textDir&&q.text==this.origText||(this.origText=void 0!=q.text?q.text:this.origText,q.textDir&&(this.textDir=q.textDir),q.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(q)};e(D.Text,"setShape",l,null);e(D.TextPath,"setText",l,null);l=function(q){(q=
B.clone(q))&&this.origText&&(q.text=this.origText);return q};e(D.Text,"getShape",null,l);e(D.TextPath,"getText",null,l);l=function(q,m){var n;m&&m[0]&&(n=b(m[0]));q.setTextDir(n?n:this.textDir);return q};e(D.Surface,"createGroup",null,l);e(D.Group,"createGroup",null,l);l=function(q){if(q){var m=q.textDir?b(q.textDir):this.textDir;m&&(q.textDir=m)}return q};e(D.Surface,"createText",l,null);e(D.Surface,"createTextPath",l,null);e(D.Group,"createText",l,null);e(D.Group,"createTextPath",l,null);D.createSurface=
function(q,m,n,t){m=D[D.renderer].createSurface(q,m,n);t=b(t);if(D.isSvgWeb)return m.textDir=t?t:h.style(c.byId(q),"direction"),m;if(D.isVml||D.isSvg||D.isCanvas)m.textDir=t?t:h.style(m.rawNode,"direction");D.isSilverlight&&(m.textDir=t?t:h.style(m._nodes[1],"direction"));return m};return D})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f){var b=a.utils={};B.mixin(b,{forEach:function(d,q,m){m=m||D.global;q.call(m,d);(d instanceof a.Surface||d instanceof a.Group)&&h.forEach(d.children,function(n){b.forEach(n,q,m)})},serialize:function(d){var q={},m;if((m=d instanceof a.Surface)||d instanceof a.Group){if(q.children=h.map(d.children,b.serialize),m)return q.children}else q.shape=d.getShape();d.getTransform&&(m=d.getTransform())&&(q.transform=m);d.getStroke&&(m=d.getStroke())&&(q.stroke=m);d.getFill&&(m=d.getFill())&&
(q.fill=m);d.getFont&&(m=d.getFont())&&(q.font=m);return q},toJson:function(d,q){return e.toJson(b.serialize(d),q)},deserialize:function(d,q){if(q instanceof Array)return h.map(q,B.hitch(null,b.deserialize,d));var m="shape"in q?d.createShape(q.shape):d.createGroup();"transform"in q&&m.setTransform(q.transform);"stroke"in q&&m.setStroke(q.stroke);"fill"in q&&m.setFill(q.fill);"font"in q&&m.setFont(q.font);"children"in q&&h.forEach(q.children,B.hitch(null,b.deserialize,m));return m},fromJson:function(d,
q){return b.deserialize(d,e.fromJson(q))},toSvg:function(d){var q=new l;if("svg"===a.renderer)try{var m=b._cleanSvg(b._innerXML(d.rawNode));q.callback(m)}catch(t){q.errback(t)}else{b._initSvgSerializerDeferred||b._initSvgSerializer();var n=b.toJson(d);m=function(){try{var t=d.getDimensions(),z=t.width,w=t.height,y=b._gfxSvgProxy.document.createElement("div");b._gfxSvgProxy.document.body.appendChild(y);g.withDoc(b._gfxSvgProxy.document,function(){c.style(y,"width",z);c.style(y,"height",w)},this);b._gfxSvgProxy[dojox._scopeName].gfx.createSurface(y,
z,w).whenLoaded(null,function(x){try{b._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(x,n);var A=b._cleanSvg(y.innerHTML);x.clear();x.destroy();b._gfxSvgProxy.document.body.removeChild(y);q.callback(A)}catch(v){q.errback(v)}})}catch(x){q.errback(x)}};0<b._initSvgSerializerDeferred.fired?m():b._initSvgSerializerDeferred.addCallback(m)}return q},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){b._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!b._initSvgSerializerDeferred){b._initSvgSerializerDeferred=
new l;var d=g.doc.createElement("iframe");c.style(d,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var q;r("ie")?d.onreadystatechange=function(){"complete"==d.contentWindow.document.readyState&&(d.onreadystatechange=function(){},q=setInterval(function(){d.contentWindow[D.scopeMap.dojo[1]._scopeName]&&d.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&d.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(q),d.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
d.contentWindow,d.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:d.onload=function(){d.onload=function(){};q=setInterval(function(){d.contentWindow[D.scopeMap.dojo[1]._scopeName]&&d.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&d.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(q),d.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=d.contentWindow,d.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var m=f.dojoxGfxSvgProxyFrameUrl||k.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");d.setAttribute("src",m.toString());g.body().appendChild(d)}},_innerXML:function(d){return d.innerXML?d.innerXML:d.xml?d.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(d):null},_cleanSvg:function(d){d&&(-1==d.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(d=d.substring(4,d.length),d='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+d),-1==d.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(d=d.substring(4,d.length),d='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+d),-1===d.indexOf("xlink:href")&&(d=d.replace(/href\s*=/g,"xlink:href\x3d")),d=d.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),d=d.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),d=d.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),d=d.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),d=d.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return d}});return b})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(D,B,a){function c(sa,U,ia,ua,wa){var Fa=sa;void 0===U&&(U=wa.defInFormat);void 0===ia&&(ia=wa.defOutFormat);void 0===ua&&(ua=wa.defSwap);if(U!==ia){var Da=U.substring(0,1);var La=U.substring(1,4);var Wa=ia.substring(0,1),Va=ia.substring(1,4);"C"===La.charAt(0)&&(La=h(Fa),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===U.charAt(2)?"LTR":"RTL",U=Da+La);"C"===Va.charAt(0)&&(La=h(Fa),"rtl"===La?Va="RTL":"ltr"===La?(Fa=Fa.split(""),Fa.reverse(),La=h(Fa.join("")),
Va=La.toUpperCase()):Va="L"===ia.charAt(2)?"LTR":"RTL",ia=Wa+Va)}if(U===ia)return sa;Wa=U.substring(0,1);Fa=U.substring(1,4);Da=ia.substring(0,1);Va=ia.substring(1,4);wa.inFormat=U;wa.outFormat=ia;wa.swap=ua;if("L"===Wa&&"VLTR"===ia){if("LTR"===Fa)return wa.dir=u,g(sa,wa);if("RTL"===Fa)return wa.dir=C,g(sa,wa)}if("V"===Wa&&"V"===Da)return wa.dir="RTL"===Fa?C:u,l(sa,wa);if("L"===Wa&&"VRTL"===ia)return wa.dir="LTR"===Fa?u:C,sa=g(sa,wa),l(sa);if("VLTR"===U&&"LLTR"===ia)return wa.dir=u,g(sa,wa);if("V"===
Wa&&"L"===Da&&Fa!==Va)return sa=l(sa),"RTL"===Fa?c(sa,"LLTR","VLTR",ua,wa):c(sa,"LRTL","VRTL",ua,wa);if("VRTL"===U&&"LRTL"===ia)return c(sa,"LRTL","VRTL",ua,wa);if("L"===Wa&&"L"===Da)return U=wa.swap,wa.swap=U.substr(0,1)+"N","RTL"===Fa?(wa.dir=C,sa=g(sa,wa),wa.swap="N"+U.substr(1,2),wa.dir=u,sa=g(sa,wa)):(wa.dir=u,sa=g(sa,wa),wa.swap="N"+U.substr(1,2),sa=c(sa,"VLTR","LRTL",wa.swap,wa)),sa}function h(sa){return(sa=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(sa))?
"z">=sa[0]?"ltr":"rtl":""}function g(sa,U){var ia=sa.split(""),ua=[];e(ia,ua,U);if(0!==U.hiLevel&&U.swap.substr(0,1)!==U.swap.substr(1,2))for(var wa=0;wa<ia.length;wa++)if(1===ua[wa]){var Fa=wa;b:{var Da=void 0;for(var La=ia[wa],Wa=0,Va=G.length-1;Wa<=Va;)if(Da=Math.floor((Wa+Va)/2),La<G[Da][0])Va=Da-1;else if(La>G[Da][0])Wa=Da+1;else{Da=G[Da][1];break b}Da=La}ia[Fa]=Da}f(2,ia,ua,U);f(1,ia,ua,U);y=ua;return ia.join("")}function e(sa,U,ia){var ua=sa.length,wa=ia.dir?aa:X,Fa=null,Da=null,La=null;Fa=
0;Da=Da=null;var Wa=-1,Va=Da=null,Ma=[],eb=[];ia.hiLevel=ia.dir;ia.lastArabic=!1;ia.hasUbatAl=!1;ia.hasUbatB=!1;ia.hasUbatS=!1;for(Da=0;Da<ua;Da++){Va=Da;La=sa[Da].charCodeAt(0);var ib=Y[La>>8];Ma[Va]=ib<Ba?ib:la[ib-Ba][La&255]}for(Va=0;Va<ua;Va++){eb[Va]=Da=b(sa,Ma,eb,Va,ia);Fa=wa[Fa][Da];Da=Fa&240;Fa&=15;U[Va]=La=wa[Fa][A];if(0<Da){if(16===Da)for(Da=Wa;Da<Va;Da++)U[Da]=1;Wa=-1}if(Da=wa[Fa][v])-1===Wa&&(Wa=Va);else if(-1<Wa){for(Da=Wa;Da<Va;Da++)U[Da]=La;Wa=-1}Ma[Va]===va&&(U[Va]=0);ia.hiLevel|=
La}if(ia.hasUbatS)for(sa=0;sa<ua;sa++)if(Ma[sa]===Ea)for(U[sa]=ia.dir,wa=sa-1;0<=wa;wa--)if(Ma[wa]===na)U[wa]=ia.dir;else break}function l(sa,U){var ia=sa.split("");if(U){var ua=[];e(ia,ua,U);y=ua}ia.reverse();z.reverse();return ia.join("")}function r(sa){for(var U=0;U<ba.length;U++)if(sa>=ba[U]&&sa<=S[U])return!0;return!1}function k(sa,U,ia,ua){for(;U*ia<ua&&q(sa[U]);)U+=ia;return U*ia<ua&&r(sa[U])?!0:!1}function f(sa,U,ia,ua){if(!(ua.hiLevel<sa))if(1!==sa||ua.dir!==C||ua.hasUbatB){ua=U.length;for(var wa=
0,Fa,Da,La;wa<ua;){if(ia[wa]>=sa){for(Fa=wa+1;Fa<ua&&ia[Fa]>=sa;)Fa++;for(Da=Fa-1;wa<Da;wa++,Da--)La=U[wa],U[wa]=U[Da],U[Da]=La,La=z[wa],z[wa]=z[Da],z[Da]=La;wa=Fa}wa++}}else U.reverse(),z.reverse()}function b(sa,U,ia,ua,wa){return{UBAT_L:function(){wa.lastArabic=!1;return M},UBAT_R:function(){wa.lastArabic=!1;return da},UBAT_ON:function(){return ka},UBAT_AN:function(){return Z},UBAT_EN:function(){return wa.lastArabic?Z:ea},UBAT_AL:function(){wa.lastArabic=!0;wa.hasUbatAl=!0;return da},UBAT_WS:function(){return ka},
UBAT_CS:function(){var Fa,Da;if(1>ua||ua+1>=U.length||(Fa=ia[ua-1])!==ea&&Fa!==Z||(Da=U[ua+1])!==ea&&Da!==Z)return ka;wa.lastArabic&&(Da=Z);return Da===Fa?Da:ka},UBAT_ES:function(){return(0<ua?ia[ua-1]:va)===ea&&ua+1<U.length&&U[ua+1]===ea?ea:ka},UBAT_ET:function(){if(0<ua&&ia[ua-1]===ea)return ea;if(wa.lastArabic)return ka;for(var Fa=ua+1,Da=U.length;Fa<Da&&U[Fa]===ma;)Fa++;return Fa<Da&&U[Fa]===ea?ea:ka},UBAT_NSM:function(){if("VLTR"===wa.inFormat){for(var Fa=U.length,Da=ua+1;Da<Fa&&U[Da]===ya;)Da++;
if(Da<Fa&&(Fa=sa[ua],Da=U[Da],(1425<=Fa&&2303>=Fa||64286===Fa)&&(Da===da||Da===Ga)))return da}return 1>ua||U[ua-1]===va?ka:ia[ua-1]},UBAT_B:function(){wa.lastArabic=!0;wa.hasUbatB=!0;return wa.dir},UBAT_S:function(){wa.hasUbatS=!0;return ka},UBAT_LRE:function(){wa.lastArabic=!1;return ka},UBAT_RLE:function(){wa.lastArabic=!1;return ka},UBAT_LRO:function(){wa.lastArabic=!1;return ka},UBAT_RLO:function(){wa.lastArabic=!1;return ka},UBAT_PDF:function(){wa.lastArabic=!1;return ka},UBAT_BN:function(){return ka}}[za[U[ua]]]()}
function d(sa,U){for(var ia=0;ia<R.length;ia++)if(sa===R[ia])return U[ia];return sa}function q(sa){return"\u064b"<=sa&&"\u0655">=sa?!0:!1}function m(sa){if("L"===sa)return"LTR";if("R"===sa)return"RTL";if("C"===sa)return"CLR";if("D"===sa)return"CRL"}function n(sa,U){for(var ia=0;ia<H.length;ia++)if(sa===H[ia])return U[ia];return sa}function t(sa,U,ia,ua){for(var wa=0;wa<sa.length;wa++)if(sa[wa]>U||!ia&&sa[wa]===U)sa[wa]+=ua}D.getObject("string",!0,dojox);D=B("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(sa,U,ia){this.sourceToTarget=[];this.targetToSource=[];if(!sa)return"";var ua=this.sourceToTarget,wa=this.targetToSource,Fa=sa.length;z=[];y=[];for(var Da=0;Da<Fa;Da++)ua[Da]=Da,wa[Da]=Da,z[Da]=Da;if(!this.checkParameters(U,ia))return sa;U=this.inputFormat;ia=this.outputFormat;ua=sa;ua=x;Da=m(U.charAt(1));wa=m(ia.charAt(1));var La="I"===U.charAt(0)?"L":U.charAt(0);Fa="I"===ia.charAt(0)?"L":ia.charAt(0);Da=La+
Da;wa=Fa+wa;Fa=U.charAt(2)+ia.charAt(2);ua.defInFormat=Da;ua.defOutFormat=wa;ua.defSwap=Fa;sa=c(sa,Da,wa,Fa,ua);ua=!1;if("R"===ia.charAt(1))ua=!0;else if("C"===ia.charAt(1)||"D"===ia.charAt(1))ua=this.checkContextual(sa);wa=this.sourceToTarget=z;Fa=Array(wa.length);for(Da=0;Da<wa.length;Da++)Fa[wa[Da]]=Da;w=this.targetToSource=Fa;if(U.charAt(3)===ia.charAt(3))ua=sa;else if("S"===ia.charAt(3))if(U=ua,ia=!0,0===sa.length)ua=void 0;else{void 0===U&&(U=!0);void 0===ia&&(ia=!0);sa=String(sa);sa=sa.split("");
var Wa=0;wa=1;ua=sa.length;U||(Wa=sa.length-1,wa=-1,ua=1);Fa=ua;Da=ia;var Va=0;ua=[];for(La=0;Wa*wa<Fa;Wa+=wa)if(r(sa[Wa])||q(sa[Wa])){var Ma;if(Ma="\u0644"===sa[Wa])b:{for(var eb=sa,ib=Wa+wa,lb=wa,rb=Fa;ib*lb<rb&&q(eb[ib]);)ib+=lb;Ma=" ";if(ib*lb<rb)for(Ma=eb[ib],eb=0;eb<H.length;eb++)if(H[eb]===Ma){Ma=!0;break b}Ma=!1}if(Ma){sa[Wa]=0===Va?n(sa[Wa+wa],J):n(sa[Wa+wa],I);Wa+=wa;Va=sa;Ma=Wa;eb=wa;for(ib=Fa;Ma*eb<ib&&q(Va[Ma]);)Ma+=eb;Ma*eb<ib&&(Va[Ma]=" ");Da&&(ua[La]=Wa,La++);Va=0}else{Ma=sa[Wa];if(1===
Va){eb=Wa;if(k(sa,Wa+wa,wa,Fa))b:for(ib=sa[Wa],lb=0;lb<R.length;lb++){if(ib===R[lb]){ib=L[lb];break b}}else ib=d(sa[Wa],P);sa[eb]=ib}else!0===k(sa,Wa+wa,wa,Fa)?sa[Wa]=d(sa[Wa],K):sa[Wa]=d(sa[Wa],O);q(Ma)||(Va=1);b:{for(eb=0;eb<Q.length;eb++)if(Q[eb]===Ma){Ma=!0;break b}Ma=!1}!0===Ma&&(Va=0)}}else Va=0;wa="";for(Fa=0;Fa<sa.length;Fa++){if(Da=ia){b:{for(Da=0;Da<ua.length;Da++)if(ua[Da]===Fa)break b;Da=-1}Da=-1<Da}Da?(t(w,Fa,!U,-1),z.splice(Fa,1)):wa+=sa[Fa]}ua=wa}else if(U=sa,ia=ua,sa=!0,0===U.length)ua=
void 0;else for(void 0===sa&&(sa=!0),void 0===ia&&(ia=!0),U=String(U),ua="",wa=[],wa=U.split(""),Fa=0;Fa<U.length;Fa++)Da=!1,"\ufe70"<=wa[Fa]&&"\ufeff">wa[Fa]?(La=U.charCodeAt(Fa),"\ufef5"<=wa[Fa]&&"\ufefc">=wa[Fa]?(ia?(0<Fa&&sa&&" "===wa[Fa-1]?ua=ua.substring(0,ua.length-1)+"\u0644":(ua+="\u0644",Da=!0),ua+=H[(La-65269)/2]):(ua+=H[(La-65269)/2],ua+="\u0644",Fa+1<U.length&&sa&&" "===wa[Fa+1]?Fa++:Da=!0),Da&&(t(w,Fa,!0,1),z.splice(Fa,0,z[Fa]))):ua+=W[La-65136]):ua+=wa[Fa];this.sourceToTarget=z;this.targetToSource=
w;this.levels=y;return ua},_inputFormatSetter:function(sa){if(!E.test(sa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=sa},_outputFormatSetter:function(sa){if(!E.test(sa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=sa},checkParameters:function(sa,U){sa?this.set("inputFormat",sa):sa=this.inputFormat;U?this.set("outputFormat",U):U=this.outputFormat;return sa===U?!1:!0},checkContextual:function(sa){sa=h(sa);if("ltr"!==
sa&&"rtl"!==sa){try{sa=document.dir.toLowerCase()}catch(U){}"ltr"!==sa&&"rtl"!==sa&&(sa="ltr")}return sa},hasBidiChar:function(sa){return F.test(sa)}});var z=[],w=[],y=[],x={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},A=5,v=6,u=0,C=1,E=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,F=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],J=["\ufef5","\ufef7","\ufef9","\ufefb"],
I=["\ufef6","\ufef8","\ufefa","\ufefc"],R="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),O="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
P="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),L="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
K="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),Q="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),W="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
ba=["\u0621","\u0641"],S=["\u063a","\u064a"],X=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],aa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M=0,da=1,ea=2,Z=3,ka=4,va=5,Ea=6,Ga=7,na=8,ma=11,ya=12,za="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Ba=100;B=M;a=da;var ha=ea,qa=Z,T=ka,Ha=va,Ja=Ea,fa=Ga,Ya=na,
Xa=ma,Ca=ya,Y=[Ba+0,B,B,B,B,Ba+1,Ba+2,Ba+3,a,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,Ba+4,T,T,T,B,T,B,T,B,T,T,T,B,B,T,T,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,B,B,T,T,B,B,T,T,B,B,T,T,T,T,T,T,T,T,T,T,T,
T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,Ba+5,fa,fa,Ba+6,Ba+7],la=[[18,18,18,18,18,18,18,18,18,Ja,Ha,Ja,Ya,Ha,18,18,18,18,18,18,18,18,18,18,18,18,18,18,Ha,Ha,Ha,Ja,Ya,T,T,Xa,Xa,Xa,T,T,T,T,T,10,9,10,9,9,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,9,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,18,18,18,18,18,18,Ha,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,T,Xa,Xa,Xa,Xa,T,T,T,T,B,T,T,18,T,T,Xa,Xa,
ha,ha,T,B,T,T,T,ha,B,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,B,B,B,B,B,B,B,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,B,T,T,T,T,T,T,T,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,a,Ca,a,Ca,Ca,a,Ca,Ca,a,Ca,T,T,T,T,T,T,T,T,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,T,T,T,T,T,a,a,a,a,a,T,T,T,T,T,T,T,T,T,T,T],[qa,qa,qa,qa,T,T,T,T,fa,Xa,Xa,fa,9,fa,T,T,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,fa,T,T,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
qa,qa,qa,qa,qa,qa,qa,qa,qa,qa,Xa,qa,qa,fa,fa,fa,Ca,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Ca,Ca,Ca,Ca,Ca,Ca,Ca,qa,T,Ca,Ca,Ca,Ca,Ca,Ca,fa,fa,Ca,Ca,T,Ca,Ca,Ca,Ca,fa,fa,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,fa,fa,fa,fa,fa,fa],[fa,fa,fa,fa,fa,fa,fa,
fa,fa,fa,fa,fa,fa,fa,T,fa,fa,Ca,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,T,T,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,fa,T,T,T,T,T,T,T,T,T,T,T,T,T,T,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,a,a,T,T,T,T,a,T,T,T,T,T],[Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,18,18,18,B,a,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ya,Ha,13,14,15,16,17,9,Xa,Xa,Xa,Xa,Xa,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,9,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ya,18,18,18,18,18,T,T,T,T,T,18,18,18,18,18,18,ha,B,T,T,ha,ha,ha,ha,ha,ha,10,10,T,T,T,B,ha,ha,ha,ha,ha,ha,ha,ha,
ha,ha,10,10,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,T,T,T,T,T,a,Ca,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,T,a,a,a,a,a,T,a,T,a,a,T,a,a,T,a,a,a,a,a,a,a,a,a,a,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,
fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa],[Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,
Ca,Ca,Ca,Ca,Ca,Ca,Ca,Ca,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Ca,Ca,Ca,Ca,Ca,Ca,Ca,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,9,T,9,T,T,9,T,T,T,T,T,T,T,T,T,Xa,T,T,10,10,T,T,T,T,T,Xa,Xa,T,T,T,T,T,fa,fa,fa,fa,fa,T,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,
fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,T,T,18],[T,T,T,Xa,Xa,Xa,T,T,T,T,T,10,9,10,9,9,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,9,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,T,T,T,T,T,T,T,T,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,
B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,T,T,T,B,B,B,B,B,B,T,T,B,B,B,B,B,B,T,T,B,B,B,B,B,B,T,T,B,B,B,T,T,T,Xa,Xa,T,T,T,Xa,Xa,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];return D})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(e){e&&B.isObject(e)&&(this.size="auto"===
this.size?this.size:c.pt2px(this.size),this.xoffset=c.pt2px(this.xoffset),this.yoffset=c.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(e){this.angle=e;return this},setSize:function(e){this.size=e;return this},setOffset:function(e,l){this.xoffset=e;this.yoffset=l;return this},toJson:function(){var e=c.px2pt(this.size);e=isNaN(e)?void 0:e;var l=c.px2pt(this.xoffset);l=isNaN(l)?void 0:l;var r=c.px2pt(this.yoffset);r=isNaN(r)?void 0:r;return B.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:e,angle:this.angle&&-1*this.angle,xoffset:l,yoffset:r})}});B.setObject("symbol.MarkerSymbol",D,h);return D})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(D,B,a,c,h,g){D=D(null,{declaredClass:"esri.symbol.Symbol",color:new g([0,0,0,1]),type:null,constructor:function(e){e&&B.isObject(e)&&(B.mixin(this,e),this.color&&h.isDefined(this.color[0])&&(this.color=g.toDojoColor(this.color)),
(e=this.type)&&0===e.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[e]))},setColor:function(e){this.color=e;return this},toJson:function(){return{color:g.toJsonColor(this.color)}}});B.setObject("symbol.Symbol",D,c);return D})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(D,B,a,c){var h=D([B],{declaredClass:"esri.Color"});h.toJsonColor=function(g){return g&&[g.r,g.g,g.b,1<g.a?g.a:Math.round(255*g.a)]};h.toDojoColor=function(g){return g&&new h([g[0],g[1],g[2],g[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<a.length;D++)h[a[D]]=B[a[D]];return c.Color=h})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(D,B,a,c,h,g,e,l){var r={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},k={color:[0,0,0,1],style:r.STYLE_SOLID,width:1};D=D(l,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(f,b,d){f?B.isString(f)?(this.style=f,b&&(this.color=b),d&&(this.width=d)):(this.style=e.valueOf(this._styles,f.style)||r.STYLE_SOLID,this.marker=
f.marker):(B.mixin(this,k),this.color=new a(this.color),this.width=h.pt2px(this.width))},setStyle:function(f){this.style=f;return this},setMarker:function(f){this.marker=f},getStroke:function(){return this.style===r.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return e.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?B.clone(this.marker):void 0}))}});B.mixin(D,r);D.defaultProps=k;B.setObject("symbol.SimpleLineSymbol",D,g);g.symbol.defaultSimpleLineSymbol=k;return D})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.symbol.LineSymbol",constructor:function(e){B.isObject(e)?this.width=c.pt2px(this.width):
this.width=12},setWidth:function(e){this.width=e;return this},toJson:function(){var e=c.px2pt(this.width);e=isNaN(e)?void 0:e;return B.mixin(this.inherited("toJson",arguments),{width:e})}});B.setObject("symbol.LineSymbol",D,h);return D})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(D,B,a,c,h,g,e,l){var r={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=
D(l,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(k,f,b){k?B.isString(k)?(this.url=k,f&&(this.width=f),b&&(this.height=b)):(this.width=c.pt2px(null==k.width?r.width:k.width),this.height=c.pt2px(null==k.height?r.height:k.height),f=k.imageData,9>a("ie")||!f||(b=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+f,this.imageData=b)):(B.mixin(this,r),this.width=c.pt2px(this.width),this.height=c.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var k=this.url,f=this.imageData;if(0===k.indexOf("data:")){var b=
k;k=f;f=b.indexOf(";base64,")+8;f=b.substr(f)}!B.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=e.getAbsoluteUrl(k));b=c.px2pt(this.width);b=isNaN(b)?void 0:b;var d=c.px2pt(this.height);d=isNaN(d)?void 0:d;k=g.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:k,imageData:f,contentType:this.contentType,width:b,height:d}));delete k.color;delete k.size;k.imageData||delete k.imageData;return k}});D.defaultProps=r;B.setObject("symbol.PictureMarkerSymbol",
D,h);h.symbol.defaultPictureMarkerSymbol=r;return D})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(D,B,a,c,h,g,e,l){var r={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},k={color:[0,0,0,1],style:r.STYLE_SOLID,width:1,cap:r.CAP_BUTT,join:r.JOIN_MITER,miterLimit:10};D=D(l,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(f,b,d,q,m,n){f?B.isString(f)?(this.style=f,b&&(this.color=b),void 0!==d&&(this.width=d),q&&(this.cap=q),m&&(this.join=m),void 0!==n&&(this.miterLimit=n)):(this.cap=e.valueOf(this._caps,f.cap),this.join=e.valueOf(this._joins,f.join),this.width=h.pt2px(f.width),this.miterLimit=h.pt2px(f.miterLimit)):(B.mixin(this,k),this.color=new a(this.color),this.width=h.pt2px(this.width),this.miterLimit=h.pt2px(this.miterLimit))},setCap:function(f){this.cap=f;return this},
setJoin:function(f){this.join=f;return this},setMiterLimit:function(f){this.miterLimit=f;return this},getStroke:function(){return B.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===r.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var f=h.px2pt(this.miterLimit);f=isNaN(f)?void 0:f;return e.fixJson(B.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:f}))}});B.mixin(D,r);D.defaultProps=k;B.setObject("symbol.CartographicLineSymbol",D,g);g.symbol.defaultCartographicLineSymbol=k;return D})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(D,B,a,c,h,g,e,l,r,k){var f={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},b={style:f.STYLE_SOLID,color:[0,0,0,.25]};D=D(l,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(d,q,m){d?B.isString(d)?(this.style=d,void 0!==q&&(this.outline=q),void 0!==m&&(this.color=m)):this.style=e.valueOf(this._styles,d.style):(B.mixin(this,b),this.outline=new r(this.outline),this.color=new a(this.color))},setStyle:function(d){this.style=d;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var d=this.style;return d===f.STYLE_NULL?null:d===f.STYLE_SOLID?this.color:B.mixin({},h.defaultPattern,{src:k.toUrl("../images/symbol/sfs/"+d+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return e.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});B.mixin(D,f);D.defaultProps=
b;B.setObject("symbol.SimpleFillSymbol",D,g);g.symbol.defaultSimpleFillSymbol=b;return D})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(D,B,a,c,h,g){D=D(h,{declaredClass:"esri.symbol.FillSymbol",constructor:function(e){e&&B.isObject(e)&&e.outline&&(this.outline=new g(e.outline))},setOutline:function(e){this.outline=e;return this},toJson:function(){var e=this.inherited("toJson",arguments);this.outline&&
(e.outline=this.outline.toJson());return e}});B.setObject("symbol.FillSymbol",D,c);return D})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(D,B,a,c,h,g,e,l){var r={xoffset:0,yoffset:0,width:12,height:12};D=D(l,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(k,f,b,d){k?B.isString(k)?(this.url=
k,void 0!==f&&(this.outline=f),void 0!==b&&(this.width=b),void 0!==d&&(this.height=d)):(this.xoffset=c.pt2px(k.xoffset),this.yoffset=c.pt2px(k.yoffset),this.width=c.pt2px(k.width),this.height=c.pt2px(k.height),f=k.imageData,9>a("ie")||!f||(b=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+f,this.imageData=b)):(B.mixin(this,r),this.width=c.pt2px(this.width),this.height=c.pt2px(this.height))},setWidth:function(k){this.width=k;return this},setHeight:function(k){this.height=k;return this},
setOffset:function(k,f){this.xoffset=k;this.yoffset=f;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},setXScale:function(k){this.xscale=k;return this},setYScale:function(k){this.yscale=k;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return B.mixin({},c.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var k=this.url,f=this.imageData;if(0===k.indexOf("data:")){var b=k;k=f;f=b.indexOf(";base64,")+8;f=b.substr(f)}!B.isString(k)||0!==k.indexOf("/")&&0!==k.indexOf("//")&&0!==k.indexOf("./")&&0!==k.indexOf("../")||(k=e.getAbsoluteUrl(k));b=c.px2pt(this.width);b=isNaN(b)?void 0:b;var d=c.px2pt(this.height);d=isNaN(d)?void 0:d;var q=c.px2pt(this.xoffset);q=isNaN(q)?void 0:q;var m=c.px2pt(this.yoffset);
m=isNaN(m)?void 0:m;k=g.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:k,imageData:f,contentType:this.contentType,width:b,height:d,xoffset:q,yoffset:m,xscale:this.xscale,yscale:this.yscale}));k.imageData||delete k.imageData;return k}});D.defaultProps=r;B.setObject("symbol.PictureFillSymbol",D,h);h.symbol.defaultPictureFillSymbol=r;return D})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(D,B,a,c,h,g,e,l,r){var k={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:c.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},f={start:"left",middle:"center",end:"right"},b={left:"start",center:"middle",right:"end",justify:"start"},d={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=document.createElement("canvas");D=D(l,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(m,
n,t){B.mixin(this,k);this.font=new r(this.font);this.color=new e(this.color);m&&(B.isObject(m)?(B.mixin(this,m),this.color&&g.isDefined(this.color[0])&&(this.color=e.toDojoColor(this.color)),this.type="textsymbol",this.font=new r(this.font),this.xoffset=c.pt2px(this.xoffset),this.yoffset=c.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=c.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=e.toDojoColor(this.haloColor))):(this.text=m,n&&(this.font=n),t&&(this.color=
t)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(m){this.font=m;return this},setSize:function(m){this.font.size=m;return this},setAngle:function(m){this.angle=m;return this},setOffset:function(m,n){this.xoffset=m;this.yoffset=n;return this},setHaloColor:function(m){this.haloColor=m;return this},setHaloSize:function(m){this.haloSize=m;return this},setAlign:function(m){this.align=m;this.setHorizontalAlignment(m&&f[m.toLowerCase()]||"center");return this},setHorizontalAlignment:function(m){this.horizontalAlignment=
m;return this},getSVGAlign:function(){var m=this.horizontalAlignment;return m=m&&b[m.toLowerCase()]||"middle"},setVerticalAlignment:function(m){this.verticalAlignment=m;return this},getSVGBaseline:function(){var m=this.verticalAlignment;return m&&d[m.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(m){this.decoration=m;this.font||this.setFont(new r);this.font.setDecoration(m);return this},setRotated:function(m){this.rotated=
m;return this},setKerning:function(m){this.kerning=m;return this},setText:function(m){this.text=m;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var m=q&&q.getContext&&q.getContext("2d");if(m){var n=this.font;m.font=(n.style?n.style:c.defaultFont.style)+" "+(n.weight?n.weight:c.defaultFont.weight)+" "+(n.size?n.size:c.defaultFont.size)+"px "+(n.family?n.family:c.defaultFont.family);return m.measureText(this.text).width}m=this.getHeight();n=
0;var t;for(t=0;t<this.text.length;t++){var z=this.text.charAt(t);n=z==z.toUpperCase()?n+.7*m:n+.5*m}return n},getHeight:function(){return c.normalizedLength(this.font.size)},getShapeDescriptors:function(){var m=this.font;if(m){var n={};m.size&&(n.size=m.size);m.style&&(n.style=m.style);m.variant&&(n.variant=m.variant);m.decoration&&(n.decoration=m.decoration);m.weight&&(n.weight=m.weight);m.family&&(n.family=m.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||m&&m.decoration,rotated:this.rotated,kerning:this.kerning},font:n,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var m=c.px2pt(this.xoffset),n=c.px2pt(this.yoffset),t=c.px2pt(this.haloSize);m=isNaN(m)?void 0:m;n=isNaN(n)?void 0:n;t=isNaN(t)?void 0:t;return g.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:t,haloColor:this.haloColor&&
e.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:m,yoffset:n,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});B.mixin(D,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});D.defaultProps=
k;B.setObject("symbol.TextSymbol",D,h);h.symbol.defaultTextSymbol=k;return D})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(D,B,a,c,h,g){D=D(null,{declaredClass:"esri.symbol.Font",constructor:function(e,l,r,k,f){e?B.isObject(e)?B.mixin(this,e):(this.size=e,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==l&&(this.style=l),void 0!==r&&(this.variant=r),void 0!==k&&(this.weight=k),void 0!==f&&
(this.family=f)):B.mixin(this,c.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&B.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=c.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(e){this.size=this._convert2PxSize(e);return this},_convert2PxSize:function(e){var l;parseFloat(e)==e?l=e:B.isString(e)&&(-1<e.indexOf("pt")?l=c.pt2px(parseFloat(e)):-1<e.indexOf("px")?l=parseFloat(e):-1<e.indexOf("em")?l=
c.pt2px(12*parseFloat(e)):-1<e.indexOf("%")&&(l=c.pt2px(.12*parseFloat(e))));return l},setStyle:function(e){this.style=e;return this},setVariant:function(e){this.variant=e;return this},setWeight:function(e){this.weight=e;return this},setFamily:function(e){this.family=e;return this},setDecoration:function(e){this.decoration=e;return this},toJson:function(){return g.fixJson({size:c.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});B.mixin(D,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});B.setObject("symbol.Font",D,h);return D})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(g){this.messages=[];B.mixin(this,g);g=this.messages;var e,l=g.length;
for(e=0;e<l;e++)g[e]=new h(g[e])},jobId:"",jobStatus:""});B.mixin(D,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});B.setObject("tasks.JobInfo",D,c);return D})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(h){B.mixin(this,h)}});B.mixin(D,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});
B.setObject("tasks.GPMessage",D,c);return D})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(h){h&&B.mixin(this,h)},distance:0,units:null,toJson:function(){var h={};this.distance&&(h.distance=this.distance);this.units&&(h.units=this.units);return h}});B.setObject("tasks.LinearUnit",D,c);return D})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.DataFile",constructor:function(h){h&&B.mixin(this,h)},url:null,itemID:null,toJson:function(){var h={};this.url&&(h.url=this.url);this.itemID&&(h.itemID=this.itemID);return h}});B.setObject("tasks.DataFile",D,c);return D})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.RasterData",constructor:function(h){h&&
B.mixin(this,h)},url:null,format:null,itemID:null,toJson:function(){var h={};this.url&&(h.url=this.url);this.format&&(h.format=this.format);this.itemID&&(h.itemID=this.itemID);return h}});B.setObject("tasks.RasterData",D,c);return D})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.tasks.Date",constructor:function(g){g&&(g.format&&(this.format=g.format),this.date=a.parse(g.date,
{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:a.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});B.setObject("tasks.Date",D,h);return D})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(h){B.mixin(this,h)}});B.setObject("tasks.ParameterValue",
D,c);return D})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(D,B,a,c,h,g,e){D=D(e,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(l,r){r&&r.imageParameters&&r.imageParameters.extent&&(this.initialExtent=this.fullExtent=r.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=B.hitch(this,
this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(l,r,k,f){var b=l.spatialReference.wkid;f(this._url.path+"?"+h.objectToQuery(B.mixin(this._params,{f:"image",bbox:a.toJson(l.toJson()),bboxSR:b,imageSR:b,size:r+","+k})))}});B.setObject("tasks._GPResultImageLayer",D,g);return D})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y){D=D([q,m],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(x,A,v){x=A&&A.imageParameters;var u=B.hitch;if(x){var C=x.layerDefinitions;C&&this.setLayerDefinitions(C);x.layerOption===z.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(x.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=u(this,this._setIsPNG32);this.dpi=x&&x.dpi||96;this.imageFormat=
x&&x.format||"png8";this.imageTransparency=x&&!1===x.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=A&&A.gdbVersion;this._params.gdbVersion=this.gdbVersion;C=x&&x.layerDefinitions;B.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},x?x.toJson():{});C&&(this._params.layerDefs=C);this.getImageUrl=u(this,this.getImageUrl);this._initLayer=u(this,this._initLayer);this._load=u(this,this._load);this.useMapImage=A?A.useMapImage:!1;this._loadCallback=
A&&A.loadCallback;(A=A&&A.resourceInfo)?this._initLayer(A):(void 0===v||!1===v)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(x,A){this.inherited(arguments);x.timeInfo&&(this.timeInfo=new n(x.timeInfo));this.loaded=!0;this.onLoad(this);var v=this._loadCallback;v&&(delete this._loadCallback,v(this))},getImageUrl:function(x,A,v,u){var C=this._url.path+"/export",E=this._params,F=E.token=this._getToken(),G=x.spatialReference.wkid||c.toJson(x.spatialReference.toJson()),
H=this._errorHandler;delete E._ts;B.mixin(E,{bbox:x.xmin+","+x.ymin+","+x.xmax+","+x.ymax,bboxSR:G,imageSR:G,size:A+","+v},this.disableClientCaching?{_ts:(new Date).getTime()}:{});E.layerDefs&&(x=b._serializeLayerDefinitions(E.layerDefs,10.5<=this.version),E=B.mixin({},E),delete E.layerDefs,E.layerDefs=x);x=f.addProxy(f.normalize(C)+"?"+g.objectToQuery(B.mixin({},E,{f:"image"})));x.length>l.defaults.io.postLength||this.useMapImage?this._jsonRequest=k({url:C,content:B.mixin(E,{f:"json"}),callbackParamName:"callback",
load:function(J){J.imageData?J="data:"+(J.contentType||"image")+";base64,"+J.imageData:(J=J.href,F&&(J+=-1===J.indexOf("?")?"?token\x3d"+F:"\x26token\x3d"+F),J=f.addProxy(J));u(J)},error:H}):u(x)},_setIsPNG32:function(){var x=this.imageFormat.toLowerCase(),A=h("ie");this.isPNG32=A&&6===A&&("png32"===x||"png24"===x)&&this.imageTransparency},_setTime:function(x){var A=this.timeInfo;x=this._params.time=x?x.toJson().join(","):null;if(10.02>this.version&&A)if(x)this._params.layerTimeOptions=b._serializeTimeOptions(this.layerTimeOptions);
else{var v=this.layerInfos;if(v){var u=this.layerTimeOptions,C=u?u.slice(0):[],E=[];a.forEach(v,function(F){F.subLayerIds||E.push(F.id)});E.length&&(a.forEach(E,function(F){if(!C[F]){var G=new t;G.useTime=!1;C[F]=G}}),this._params.layerTimeOptions=b._serializeTimeOptions(C,E))}}10.02<=this.version&&A&&!x&&!A.hasLiveData&&(this._params.time="null,null")},setDPI:function(x,A){this.dpi=this._params.dpi=x;A||this.refresh(!0)},setImageFormat:function(x,A){this.imageFormat=this._params.format=x;this._setIsPNG32();
A||this.refresh(!0)},setImageTransparency:function(x,A){this.imageTransparency=this._params.transparent=x;this._setIsPNG32();A||this.refresh(!0)},setVisibleLayers:function(x,A){this.visibleLayers=x;this._params.layers=z.LAYER_OPTION_SHOW+":"+(x.length?x.join():"-1");this._updateDynamicLayers();A||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(x){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();x||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(x,A){this.layerDefinitions=x;this._params.layerDefs=x;this._updateDynamicLayers();A||this.refresh(!0)},setDefaultLayerDefinitions:function(x){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();x||this.refresh(!0)},setDisableClientCaching:function(x){this.disableClientCaching=x},setLayerTimeOptions:function(x,A){this.layerTimeOptions=x;this._params.layerTimeOptions=
b._serializeTimeOptions(x);this._updateDynamicLayers();A||this.refresh(!0)},refresh:function(x){if(!0===x)this.inherited(arguments);else{var A=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=A}},setLayerDrawingOptions:function(x,A){this.layerDrawingOptions=x;this._updateDynamicLayers();A||this.refresh(!0)},setDynamicLayerInfos:function(x,A){x&&0<x.length?(this.dynamicLayerInfos=x,this.visibleLayers=b._getDefaultVisibleLayers(x),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();A||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var x=[],A;a.forEach(this.layerInfos,function(v){A=new w(v.toJson());A.source=new y({mapLayerId:v.id});x.push(A)});return x},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var x=this._map&&d.getScale(this._map);x=this._getDynLayerObjs(x);x=c.toJson(x);this._params.dynamicLayers&&this._params.dynamicLayers.length===x.length&&this._params.dynamicLayers===x||(this._params.dynamicLayers=x,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(x){var A=
this.dynamicLayerInfos,v=[],u=this.visibleLayers,C=x?b._getLayersForScale(x,A):u;a.forEach(A,function(E){if(!E.subLayerIds){var F=E.id;if(-1!==a.indexOf(u,F)&&-1!==a.indexOf(C,F)){var G={id:F,name:E.name};G.source=E.source&&E.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[F]&&(H=this.layerDefinitions[F]);H&&(G.definitionExpression=H);var J;this.layerDrawingOptions&&this.layerDrawingOptions[F]&&(J=this.layerDrawingOptions[F]);J&&(H=J.toJson(),this._fixMarkerColor(H.renderer),G.drawingInfo=
H);var I;this.layerTimeOptions&&this.layerTimeOptions[F]&&(I=this.layerTimeOptions[F]);I&&(G.layerTimeOptions=I.toJson());G.minScale=E.minScale||0;G.maxScale=E.maxScale||0;v.push(G)}}},this);return v},_fixMarkerColor:function(x){a.forEach(this._getAllSimpleMarkerSymbols(x),function(A){if(!A.color){var v=[0,0,0,0],u=A.outline&&A.outline.color;"esriSMSX"!==A.style&&"esriSMSCross"!==A.style||!u||(v=u.slice(0));A.color=v}})},_getAllSimpleMarkerSymbols:function(x){return a.filter(this._getAllSymbols(x),
function(A){return"esriSMS"===A.type})},_getAllSymbols:function(x){var A=[];x&&(A.push(x.symbol),A.push(x.defaultSymbol),a.forEach(x.uniqueValueInfos||x.classBreakInfos,function(v){A.push(v.symbol)}),A=a.filter(A,r.isDefined));return A},_onExtentChangeHandler:function(x,A,v){v&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(x,A,v){this._map=x;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(x,A){this.gdbVersion=
x;this._params.gdbVersion=x;this.onGDBVersionChange();A||this.refresh(!0)},exportMapImage:function(x,A){var v=B.hitch(this,function(){var u=l.defaults.map,C=x&&x.layerDefinitions;x=x?x.toJson(this.normalization):{};C&&(x.layerDefs=C);x=B.mixin({size:u.width+","+u.height},this._params,x,{f:"json"});delete x._ts;x.layerDefs&&(u=b._serializeLayerDefinitions(x.layerDefs,10.5<=this.version),delete x.layerDefs,x.layerDefs=u);this._exportMapImage(this._url.path+"/export",x,A)});if(this.loaded)v();else this.on("load",
v)}});B.setObject("layers.ArcGISDynamicMapServiceLayer",D,e);return D})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,B,a,c,h){function g(b,d,q){return b&&d?b.getWidth()/d*(q||l)*39.37*r.screenDPI:0}function e(b,d,q,m,n){return b.expand(m*d/(39.37*((n?q:k.values[k[q]])||l)*r.screenDPI)/b.getWidth())}var l=6370997*Math.PI/180,r=c.defaults,k=h,f={getUnitValueForSR:function(b){return this.getUnitValue(b)||l},getUnitValue:function(b){if(b)if("object"===
typeof b){var d=b.wkid;var q=b.wkt}else"number"===typeof b?d=b:"string"===typeof b&&(q=b);if(d)var m=k.values[k[d]];else q&&-1!==q.search(/^PROJCS/i)&&(b=/UNIT\[([^\]]+)\]\]$/i.exec(q))&&b[1]&&(m=parseFloat(b[1].split(",")[1]));return m},getScale:function(b,d,q){if(1<arguments.length&&null!=d&&!d.declaredClass){var m=b;var n=d;d=null;var t=f.getUnitValue(q)}else m=d||b.extent,n=b.width,t=f.getUnitValue(m&&m.spatialReference);return g(m,n,t)},getExtentForScale:function(b,d,q){return e(q||b.extent,
b.width,f.getUnitValue(b.spatialReference),d,!0)}};D.mixin(D.getObject("geometry",!0,a),f);a.geometry._getScale=g;a.geometry._getExtentForScale=e;return f})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,B){var a,c={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,
22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,
29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,
102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,
103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,
103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,
103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,
103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=a;a++)c[a]=0;for(a=2056;2065>=a;a++)c[a]=0;for(a=2067;2135>=a;a++)c[a]=0;for(a=2137;2154>=a;a++)c[a]=0;for(a=2161;2170>=a;a++)c[a]=0;for(a=2172;2193>=a;a++)c[a]=0;for(a=2195;2198>=a;a++)c[a]=0;for(a=2200;2203>=a;a++)c[a]=0;for(a=2205;2217>=a;a++)c[a]=0;for(a=2222;2224>=a;a++)c[a]=1;for(a=2225;2250>=a;a++)c[a]=2;for(a=2251;2253>=a;a++)c[a]=1;for(a=2257;2264>=a;a++)c[a]=2;for(a=2274;2279>=a;a++)c[a]=2;for(a=2280;2282>=a;a++)c[a]=
1;for(a=2283;2289>=a;a++)c[a]=2;for(a=2290;2292>=a;a++)c[a]=0;for(a=2308;2313>=a;a++)c[a]=0;for(a=2315;2491>=a;a++)c[a]=0;for(a=2494;2866>=a;a++)c[a]=0;for(a=2867;2869>=a;a++)c[a]=1;for(a=2870;2888>=a;a++)c[a]=2;for(a=2891;2895>=a;a++)c[a]=2;for(a=2896;2898>=a;a++)c[a]=1;for(a=2902;2908>=a;a++)c[a]=2;for(a=2915;2920>=a;a++)c[a]=2;for(a=2921;2923>=a;a++)c[a]=1;for(a=2924;2930>=a;a++)c[a]=2;for(a=2931;2962>=a;a++)c[a]=0;for(a=2964;2968>=a;a++)c[a]=2;for(a=2969;2973>=a;a++)c[a]=0;for(a=2975;2991>=a;a++)c[a]=
0;for(a=2995;3051>=a;a++)c[a]=0;for(a=3054;3079>=a;a++)c[a]=0;for(a=3081;3088>=a;a++)c[a]=0;for(a=3092;3101>=a;a++)c[a]=0;for(a=3106;3138>=a;a++)c[a]=0;for(a=3146;3151>=a;a++)c[a]=0;for(a=3153;3166>=a;a++)c[a]=0;for(a=3168;3172>=a;a++)c[a]=0;for(a=3174;3203>=a;a++)c[a]=0;for(a=3294;3358>=a;a++)c[a]=0;for(a=3367;3403>=a;a++)c[a]=0;for(a=3408;3416>=a;a++)c[a]=0;for(a=3417;3438>=a;a++)c[a]=2;for(a=3441;3446>=a;a++)c[a]=2;for(a=3447;3450>=a;a++)c[a]=0;for(a=3451;3459>=a;a++)c[a]=2;for(a=3460;3478>=a;a++)c[a]=
0;for(a=3554;3559>=a;a++)c[a]=0;for(a=3560;3570>=a;a++)c[a]=2;for(a=3571;3581>=a;a++)c[a]=0;for(a=3594;3597>=a;a++)c[a]=0;for(a=3601;3604>=a;a++)c[a]=0;for(a=3637;3639>=a;a++)c[a]=0;for(a=3665;3667>=a;a++)c[a]=0;for(a=3693;3695>=a;a++)c[a]=0;for(a=3701;3727>=a;a++)c[a]=0;for(a=3728;3739>=a;a++)c[a]=2;for(a=3740;3751>=a;a++)c[a]=0;for(a=3753;3760>=a;a++)c[a]=2;for(a=3761;3773>=a;a++)c[a]=0;for(a=3775;3777>=a;a++)c[a]=0;for(a=3779;3781>=a;a++)c[a]=0;for(a=3783;3785>=a;a++)c[a]=0;for(a=3788;3791>=a;a++)c[a]=
0;for(a=3797;3802>=a;a++)c[a]=0;for(a=3814;3816>=a;a++)c[a]=0;for(a=3825;3829>=a;a++)c[a]=0;for(a=3832;3841>=a;a++)c[a]=0;for(a=3844;3852>=a;a++)c[a]=0;for(a=3873;3885>=a;a++)c[a]=0;for(a=3890;3893>=a;a++)c[a]=0;for(a=3907;3912>=a;a++)c[a]=0;for(a=3942;3950>=a;a++)c[a]=0;for(a=3968;3970>=a;a++)c[a]=0;for(a=3973;3976>=a;a++)c[a]=0;for(a=3986;3989>=a;a++)c[a]=0;for(a=3994;3997>=a;a++)c[a]=0;for(a=4048;4051>=a;a++)c[a]=0;for(a=4056;4063>=a;a++)c[a]=0;for(a=4093;4096>=a;a++)c[a]=0;for(a=4390;4398>=a;a++)c[a]=
0;for(a=4399;4413>=a;a++)c[a]=2;for(a=4418;4433>=a;a++)c[a]=2;for(a=4455;4457>=a;a++)c[a]=2;for(a=4484;4489>=a;a++)c[a]=0;for(a=4491;4554>=a;a++)c[a]=0;for(a=4568;4589>=a;a++)c[a]=0;for(a=4652;4656>=a;a++)c[a]=0;for(a=4766;4800>=a;a++)c[a]=0;for(a=5014;5016>=a;a++)c[a]=0;for(a=5069;5072>=a;a++)c[a]=0;for(a=5105;5130>=a;a++)c[a]=0;for(a=5173;5188>=a;a++)c[a]=0;for(a=5253;5259>=a;a++)c[a]=0;for(a=5269;5275>=a;a++)c[a]=0;for(a=5292;5311>=a;a++)c[a]=0;for(a=5329;5331>=a;a++)c[a]=0;for(a=5343;5349>=a;a++)c[a]=
0;for(a=5355;5357>=a;a++)c[a]=0;for(a=5387;5389>=a;a++)c[a]=0;for(a=5459;5463>=a;a++)c[a]=0;for(a=5479;5482>=a;a++)c[a]=0;for(a=5518;5520>=a;a++)c[a]=0;for(a=5530;5539>=a;a++)c[a]=0;for(a=5550;5552>=a;a++)c[a]=0;for(a=5562;5583>=a;a++)c[a]=0;for(a=5623;5625>=a;a++)c[a]=2;for(a=5631;5639>=a;a++)c[a]=0;for(a=5649;5653>=a;a++)c[a]=0;for(a=5663;5680>=a;a++)c[a]=0;for(a=5682;5685>=a;a++)c[a]=0;for(a=5875;5877>=a;a++)c[a]=0;for(a=5896;5899>=a;a++)c[a]=0;for(a=5921;5940>=a;a++)c[a]=0;for(a=6050;6125>=a;a++)c[a]=
0;for(a=6244;6275>=a;a++)c[a]=0;for(a=6328;6348>=a;a++)c[a]=0;for(a=6350;6356>=a;a++)c[a]=0;for(a=6366;6372>=a;a++)c[a]=0;for(a=6381;6387>=a;a++)c[a]=0;for(a=6393;6404>=a;a++)c[a]=0;for(a=6480;6483>=a;a++)c[a]=0;for(a=6511;6514>=a;a++)c[a]=0;for(a=6579;6581>=a;a++)c[a]=0;for(a=6619;6624>=a;a++)c[a]=0;for(a=6625;6627>=a;a++)c[a]=2;for(a=6628;6632>=a;a++)c[a]=0;for(a=6634;6637>=a;a++)c[a]=0;for(a=6669;6692>=a;a++)c[a]=0;for(a=6707;6709>=a;a++)c[a]=0;for(a=6720;6723>=a;a++)c[a]=0;for(a=6732;6738>=a;a++)c[a]=
0;for(a=6931;6933>=a;a++)c[a]=0;for(a=6956;6959>=a;a++)c[a]=0;for(a=7005;7007>=a;a++)c[a]=0;for(a=7057;7070>=a;a++)c[a]=2;for(a=7074;7082>=a;a++)c[a]=0;for(a=7109;7118>=a;a++)c[a]=0;for(a=7119;7127>=a;a++)c[a]=1;for(a=7374;7376>=a;a++)c[a]=0;for(a=7528;7586>=a;a++)c[a]=0;for(a=7587;7645>=a;a++)c[a]=2;for(a=7692;7696>=a;a++)c[a]=0;for(a=7755;7787>=a;a++)c[a]=0;for(a=7791;7795>=a;a++)c[a]=0;for(a=7799;7801>=a;a++)c[a]=0;for(a=7803;7805>=a;a++)c[a]=0;for(a=7825;7831>=a;a++)c[a]=0;for(a=7845;7859>=a;a++)c[a]=
0;for(a=8013;8032>=a;a++)c[a]=0;for(a=8065;8068>=a;a++)c[a]=1;for(a=8518;8529>=a;a++)c[a]=2;for(a=8533;8536>=a;a++)c[a]=2;for(a=8538;8540>=a;a++)c[a]=2;for(a=8677;8679>=a;a++)c[a]=0;for(a=8836;8840>=a;a++)c[a]=0;for(a=8857;8859>=a;a++)c[a]=0;for(a=8908;8910>=a;a++)c[a]=0;for(a=9154;9159>=a;a++)c[a]=0;for(a=9205;9218>=a;a++)c[a]=0;for(a=9271;9273>=a;a++)c[a]=0;for(a=9295;9297>=a;a++)c[a]=0;for(a=9356;9360>=a;a++)c[a]=0;for(a=9404;9407>=a;a++)c[a]=0;for(a=9476;9482>=a;a++)c[a]=0;for(a=9487;9494>=a;a++)c[a]=
0;for(a=9697;9699>=a;a++)c[a]=0;for(a=20002;20032>=a;a++)c[a]=0;for(a=20062;20092>=a;a++)c[a]=0;for(a=20135;20138>=a;a++)c[a]=0;for(a=20248;20258>=a;a++)c[a]=0;for(a=20348;20358>=a;a++)c[a]=0;for(a=20436;20440>=a;a++)c[a]=0;for(a=20822;20824>=a;a++)c[a]=0;for(a=20904;20932>=a;a++)c[a]=0;for(a=20934;20936>=a;a++)c[a]=0;for(a=21004;21032>=a;a++)c[a]=0;for(a=21035;21037>=a;a++)c[a]=0;for(a=21095;21097>=a;a++)c[a]=0;for(a=21148;21150>=a;a++)c[a]=0;for(a=21207;21264>=a;a++)c[a]=0;for(a=21307;21364>=a;a++)c[a]=
0;for(a=21413;21423>=a;a++)c[a]=0;for(a=21453;21463>=a;a++)c[a]=0;for(a=21473;21483>=a;a++)c[a]=0;for(a=21780;21782>=a;a++)c[a]=0;for(a=21891;21894>=a;a++)c[a]=0;for(a=21896;21899>=a;a++)c[a]=0;for(a=22171;22177>=a;a++)c[a]=0;for(a=22181;22187>=a;a++)c[a]=0;for(a=22191;22197>=a;a++)c[a]=0;for(a=22234;22236>=a;a++)c[a]=0;for(a=22521;22525>=a;a++)c[a]=0;for(a=22991;22994>=a;a++)c[a]=0;for(a=23028;23038>=a;a++)c[a]=0;for(a=23830;23853>=a;a++)c[a]=0;for(a=23866;23872>=a;a++)c[a]=0;for(a=23877;23884>=
a;a++)c[a]=0;for(a=23886;23894>=a;a++)c[a]=0;for(a=23946;23948>=a;a++)c[a]=0;for(a=24311;24313>=a;a++)c[a]=0;for(a=24342;24347>=a;a++)c[a]=0;for(a=24370;24374>=a;a++)c[a]=10;for(a=24375;24381>=a;a++)c[a]=0;for(a=24718;24721>=a;a++)c[a]=0;for(a=24817;24821>=a;a++)c[a]=0;for(a=24877;24882>=a;a++)c[a]=0;for(a=24891;24893>=a;a++)c[a]=0;for(a=25391;25395>=a;a++)c[a]=0;for(a=25828;25838>=a;a++)c[a]=0;for(a=26191;26195>=a;a++)c[a]=0;for(a=26391;26393>=a;a++)c[a]=0;for(a=26701;26722>=a;a++)c[a]=0;for(a=26729;26799>=
a;a++)c[a]=2;for(a=26801;26803>=a;a++)c[a]=2;for(a=26811;26813>=a;a++)c[a]=2;for(a=26847;26870>=a;a++)c[a]=2;for(a=26891;26899>=a;a++)c[a]=0;for(a=26901;26923>=a;a++)c[a]=0;for(a=26929;26946>=a;a++)c[a]=0;for(a=26948;26998>=a;a++)c[a]=0;for(a=27037;27040>=a;a++)c[a]=0;for(a=27205;27232>=a;a++)c[a]=0;for(a=27258;27260>=a;a++)c[a]=0;for(a=27391;27398>=a;a++)c[a]=0;for(a=27561;27564>=a;a++)c[a]=0;for(a=27571;27574>=a;a++)c[a]=0;for(a=27581;27584>=a;a++)c[a]=0;for(a=27591;27594>=a;a++)c[a]=0;for(a=28191;28193>=
a;a++)c[a]=0;for(a=28348;28358>=a;a++)c[a]=0;for(a=28402;28432>=a;a++)c[a]=0;for(a=28462;28492>=a;a++)c[a]=0;for(a=29118;29122>=a;a++)c[a]=0;for(a=29168;29172>=a;a++)c[a]=0;for(a=29177;29185>=a;a++)c[a]=0;for(a=29187;29195>=a;a++)c[a]=0;for(a=29900;29903>=a;a++)c[a]=0;for(a=30161;30179>=a;a++)c[a]=0;for(a=30491;30494>=a;a++)c[a]=0;for(a=30729;30732>=a;a++)c[a]=0;for(a=31251;31259>=a;a++)c[a]=0;for(a=31265;31268>=a;a++)c[a]=0;for(a=31275;31279>=a;a++)c[a]=0;for(a=31281;31297>=a;a++)c[a]=0;for(a=31461;31469>=
a;a++)c[a]=0;for(a=31491;31495>=a;a++)c[a]=0;for(a=31917;31922>=a;a++)c[a]=0;for(a=31965;32E3>=a;a++)c[a]=0;for(a=32001;32003>=a;a++)c[a]=2;for(a=32005;32031>=a;a++)c[a]=2;for(a=32033;32060>=a;a++)c[a]=2;for(a=32064;32067>=a;a++)c[a]=2;for(a=32074;32077>=a;a++)c[a]=2;for(a=32081;32086>=a;a++)c[a]=0;for(a=32107;32130>=a;a++)c[a]=0;for(a=32133;32158>=a;a++)c[a]=0;for(a=32164;32167>=a;a++)c[a]=2;for(a=32180;32199>=a;a++)c[a]=0;for(a=32201;32260>=a;a++)c[a]=0;for(a=32301;32360>=a;a++)c[a]=0;for(a=32601;32662>=
a;a++)c[a]=0;for(a=32664;32667>=a;a++)c[a]=2;for(a=32701;32761>=a;a++)c[a]=0;for(a=53001;53004>=a;a++)c[a]=0;for(a=53008;53019>=a;a++)c[a]=0;for(a=53021;53032>=a;a++)c[a]=0;for(a=53034;53037>=a;a++)c[a]=0;for(a=53042;53046>=a;a++)c[a]=0;for(a=53074;53080>=a;a++)c[a]=0;for(a=54001;54004>=a;a++)c[a]=0;for(a=54008;54019>=a;a++)c[a]=0;for(a=54021;54032>=a;a++)c[a]=0;for(a=54034;54037>=a;a++)c[a]=0;for(a=54042;54046>=a;a++)c[a]=0;for(a=54048;54053>=a;a++)c[a]=0;for(a=54074;54080>=a;a++)c[a]=0;for(a=54098;54101>=
a;a++)c[a]=0;for(a=102001;102040>=a;a++)c[a]=0;for(a=102042;102063>=a;a++)c[a]=0;for(a=102065;102067>=a;a++)c[a]=0;for(a=102070;102117>=a;a++)c[a]=0;for(a=102122;102216>=a;a++)c[a]=0;for(a=102221;102377>=a;a++)c[a]=0;for(a=102382;102388>=a;a++)c[a]=0;for(a=102389;102398>=a;a++)c[a]=2;for(a=102399;102444>=a;a++)c[a]=0;for(a=102445;102447>=a;a++)c[a]=2;for(a=102448;102458>=a;a++)c[a]=0;for(a=102459;102468>=a;a++)c[a]=2;for(a=102469;102499>=a;a++)c[a]=0;for(a=102500;102519>=a;a++)c[a]=1;for(a=102520;102524>=
a;a++)c[a]=0;for(a=102525;102529>=a;a++)c[a]=2;for(a=102530;102588>=a;a++)c[a]=0;for(a=102590;102598>=a;a++)c[a]=0;for(a=102601;102603>=a;a++)c[a]=0;for(a=102605;102628>=a;a++)c[a]=0;for(a=102629;102646>=a;a++)c[a]=2;for(a=102648;102700>=a;a++)c[a]=2;for(a=102701;102703>=a;a++)c[a]=0;for(a=102707;102730>=a;a++)c[a]=2;for(a=102733;102758>=a;a++)c[a]=2;for(a=102767;102900>=a;a++)c[a]=0;for(a=102901;102933>=a;a++)c[a]=2;for(a=102934;102950>=a;a++)c[a]=13;for(a=102951;102960>=a;a++)c[a]=0;for(a=102965;102969>=
a;a++)c[a]=0;for(a=102971;102973>=a;a++)c[a]=0;for(a=102975;102989>=a;a++)c[a]=0;for(a=102990;102992>=a;a++)c[a]=1;for(a=102997;103002>=a;a++)c[a]=0;for(a=103003;103008>=a;a++)c[a]=2;for(a=103009;103011>=a;a++)c[a]=0;for(a=103012;103014>=a;a++)c[a]=2;for(a=103019;103021>=a;a++)c[a]=0;for(a=103022;103024>=a;a++)c[a]=2;for(a=103029;103031>=a;a++)c[a]=0;for(a=103032;103034>=a;a++)c[a]=2;for(a=103065;103068>=a;a++)c[a]=0;for(a=103074;103076>=a;a++)c[a]=0;for(a=103077;103079>=a;a++)c[a]=1;for(a=103080;103082>=
a;a++)c[a]=0;for(a=103083;103085>=a;a++)c[a]=2;for(a=103090;103093>=a;a++)c[a]=0;for(a=103097;103099>=a;a++)c[a]=0;for(a=103100;103102>=a;a++)c[a]=2;for(a=103107;103109>=a;a++)c[a]=0;for(a=103110;103112>=a;a++)c[a]=2;for(a=103113;103116>=a;a++)c[a]=0;for(a=103117;103120>=a;a++)c[a]=2;for(a=103153;103157>=a;a++)c[a]=0;for(a=103158;103162>=a;a++)c[a]=2;for(a=103163;103165>=a;a++)c[a]=0;for(a=103166;103168>=a;a++)c[a]=1;for(a=103169;103171>=a;a++)c[a]=2;for(a=103186;103188>=a;a++)c[a]=0;for(a=103189;103191>=
a;a++)c[a]=2;for(a=103192;103195>=a;a++)c[a]=0;for(a=103196;103199>=a;a++)c[a]=2;for(a=103200;103224>=a;a++)c[a]=0;for(a=103225;103227>=a;a++)c[a]=1;for(a=103232;103237>=a;a++)c[a]=0;for(a=103238;103243>=a;a++)c[a]=2;for(a=103244;103246>=a;a++)c[a]=0;for(a=103247;103249>=a;a++)c[a]=2;for(a=103254;103256>=a;a++)c[a]=0;for(a=103257;103259>=a;a++)c[a]=2;for(a=103264;103266>=a;a++)c[a]=0;for(a=103267;103269>=a;a++)c[a]=2;for(a=103300;103375>=a;a++)c[a]=0;for(a=103381;103383>=a;a++)c[a]=0;for(a=103384;103386>=
a;a++)c[a]=1;for(a=103387;103389>=a;a++)c[a]=0;for(a=103390;103392>=a;a++)c[a]=2;for(a=103397;103399>=a;a++)c[a]=0;for(a=103400;103471>=a;a++)c[a]=2;for(a=103476;103478>=a;a++)c[a]=0;for(a=103479;103481>=a;a++)c[a]=2;for(a=103486;103488>=a;a++)c[a]=0;for(a=103489;103491>=a;a++)c[a]=2;for(a=103492;103495>=a;a++)c[a]=0;for(a=103496;103499>=a;a++)c[a]=2;for(a=103528;103543>=a;a++)c[a]=0;for(a=103544;103548>=a;a++)c[a]=2;for(a=103549;103551>=a;a++)c[a]=0;for(a=103552;103554>=a;a++)c[a]=1;for(a=103555;103557>=
a;a++)c[a]=2;for(a=103558;103560>=a;a++)c[a]=0;for(a=103571;103573>=a;a++)c[a]=0;for(a=103574;103576>=a;a++)c[a]=2;for(a=103577;103580>=a;a++)c[a]=0;for(a=103581;103583>=a;a++)c[a]=2;for(a=103595;103694>=a;a++)c[a]=0;for(a=103696;103699>=a;a++)c[a]=0;for(a=103700;103793>=a;a++)c[a]=2;for(a=103794;103872>=a;a++)c[a]=0;for(a=103900;103971>=a;a++)c[a]=2;return B.WKIDUnitConversion=c})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d){var q=l.defaults.map.zoomDuration;D=D(b,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(m,n){this.useMapTime=n&&n.hasOwnProperty("useMapTime")?!!n.useMapTime:!0;this.extentProcessor=n&&n.extentProcessor;var t=a.hitch;this._exportMapImageHandler=t(this,this._exportMapImageHandler);this._imgSrcFunc=t(this,this._imgSrcFunc);this._divAlphaImageFunc=t(this,this._divAlphaImageFunc);this._tileLoadHandler=
t(this,this._tileLoadHandler);this._tileErrorHandler=t(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(m,n,t){this.inherited(arguments);this._map=m;var z=this._div=c.create("div",null,n),w=e._css.names,y={position:"absolute",width:m.width+"px",height:m.height+"px",overflow:"visible",opacity:this.opacity},x=r("ie"),A=B.connect,v=m.__visibleDelta;8===x&&delete y.opacity;"css-transforms"===m.navigationMode?(this._isChildLayer||(y[w.transform]=e._css.translate(v.x,
v.y),h.set(z,y)),this._left=v.x,this._top=v.y):(y.left="0px",y.top="0px",h.set(z,y),this._left=this._top=0);h.set(z,y);this._onResizeHandler_connect=A(m,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=A(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!m.loaded)var u=B.connect(m,"onLoad",this,function(){B.disconnect(u);u=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=
B.connect(m,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=B.connect(m,"onZoomEnd",this,this.evaluateSuspension));return z},_unsetMap:function(m,n){this._img&&this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);c.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var t=B.disconnect;t(this._onResizeHandler_connect);t(this._opacityChangeHandler_connect);t(this._panEndEvalHandle);t(this._zoomEndEvalHandle);this._panEndEvalHandle=
this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(m,n,t){h.set(this._div,{width:n+"px",height:t+"px"});this._onExtentChangeHandler(m)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();f.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=
null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var m=this._map;this._toggleTime();"css-transforms"===m.navigationMode&&(m=m.__visibleDelta,this._left=m.x,this._top=m.y,this._isChildLayer||h.set(this._div,e._css.names.transform,e._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var m=
this.inherited(arguments);if(m){var n=this._map.extent;this.extentProcessor&&n&&(m=!!this.extentProcessor({layer:this,extent:n,width:this._map.width}).extent)}return m},_enableDrawConnectors:function(){var m=B.connect,n=this._map;n&&(this._onPanHandler_connect=m(n,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=m(n,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===n.navigationMode?this._onScaleHandler_connect=m(n,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=
m(n,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var m=B.disconnect;m(this._onPanHandler_connect);m(this._onExtentChangeHandler_connect);m(this._onZoomHandler_connect);m(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var m=this._map;this.timeInfo&&this.useMapTime&&m&&!this.suspended?(this._timeConnect||(this._timeConnect=B.connect(m,"onTimeExtentChange",
this,this._onTimeExtentChangeHandler)),this._setTime(m.timeExtent)):(B.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(m){this._params&&(this._params.time=m?m.toJson().join(","):null)},_onPanHandler:function(m,n){this._panDx=n.x;this._panDy=n.y;var t=this._dragOrigin,z=this._map.__visibleDelta,w=this._img;w&&("css-transforms"===this._map.navigationMode?(this._left=z.x+n.x,this._top=z.y+n.y,this._isChildLayer||h.set(this._div,e._css.names.transform,e._css.translate(this._left,
this._top))):h.set(w,{left:t.x+n.x+"px",top:t.y+n.y+"px"}))},_onExtentChangeHandler:function(m,n,t){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var z=this._map,w=this._img,y=w&&w.style,x=this._dragOrigin;!n||t||!w||n.x===this._panDx&&n.y===this._panDy||("css-transforms"===z.navigationMode?(n=z.__visibleDelta,this._left=n.x,this._top=n.y,this._isChildLayer||h.set(this._div,e._css.names.transform,e._css.translate(this._left,this._top))):h.set(w,{left:x.x+n.x+"px",top:x.y+
n.y+"px"}));w?(x.x=parseInt(y.left,10),x.y=parseInt(y.top,10)):x.x=x.y=0;"css-transforms"===z.navigationMode&&t&&w&&(h.set(w,e._css.names.transition,"none"),w._multiply=w._multiply?g.multiply(w._matrix,w._multiply):w._matrix);this._fireUpdateStart();if(t=this._img_loading)if(this._clearEventListeners(t),c.destroy(t),this._img_loading=null,t=this._jsonRequest){try{t.cancel()}catch(G){}this._jsonRequest=null}var A=z.width;t=z.height;n=A;var v=0;10<=this.version&&z.wrapAround180&&(m=m._normalize(!0));
this.extentProcessor&&(v=this.extentProcessor({layer:this,extent:m,width:n}),m=v.extent,n=v.width,v=v.marginLeft||0);if(this.isPNG32)w=this._img_loading=c.create("div"),w.id=z.id+"_"+this.id+"_"+(new Date).getTime(),h.set(w,{position:"absolute",left:"0px",top:"0px",width:n+"px",height:t+"px"}),z=w.appendChild(c.create("div")),h.set(z,{opacity:0,width:n+"px",height:t+"px"}),this.getImageUrl(m,n,t,this._divAlphaImageFunc),w=null;else{var u=this._img_loading=c.create("img"),C=e._css.names,E=r("ie"),
F={position:"absolute",width:n+"px",height:t+"px"};u.setAttribute("decoding","sync");8===E&&(F.opacity=this.opacity);null!=v&&0!==v&&(F.marginLeft=v+"px");"css-transforms"===z.navigationMode?(F[C.transform]=e._css.translate(-this._left,-this._top),u._tdx=-this._left,u._tdy=-this._top,F[C.transition]=C.transformName+" "+q+"ms ease",this.extentProcessor&&(F[C.origin]=A/2-v+"px "+t/2+"px")):(F.left="0px",F.top="0px");u.id=z.id+"_"+this.id+"_"+(new Date).getTime();h.set(u,F);u._onload_connect=B.connect(u,
"onload",this,"_onLoadHandler");u._onerror_connect=B.connect(u,"onerror",this,"_onErrorHandler");u._onabort_connect=B.connect(u,"onabort",this,"_onErrorHandler");this._startRect={left:x.x,top:x.y,width:w?parseInt(y.width,10):n,height:w?parseInt(y.height,10):t,marginLeft:w?parseInt(y.marginLeft||"0",10):v,zoom:y&&y.zoom?parseFloat(y.zoom):1};this.getImageUrl(m,n,t,this._imgSrcFunc);u=null}}},_onTimeExtentChangeHandler:function(m){this.suspended||(this._setTime(m),this.refresh(!0))},getImageUrl:function(m,
n,t,z){},_imgSrcFunc:function(m){this._img_loading.src=m},_divAlphaImageFunc:function(m){h.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+m+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(m){m=m.currentTarget;var n=this._map;this._clearEventListeners(m);!n||n.__panning||n.__zooming?c.destroy(m):(this._img&&this._div.removeChild(this._img),this._img=m,n=m.style,this._startRect={left:0,top:0,
width:parseInt(n.width,10),height:parseInt(n.height,10),marginLeft:parseInt(n.marginLeft||"0",10),zoom:1},this._div.appendChild(m),this.suspended||f.show(this._div),this._img_loading=null,m=this._dragOrigin,m.x=m.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(m){m=m.currentTarget;h.set(m,"visibility","hidden");this._clearEventListeners(m);m=Error("Unable to load image: "+m.src);this.onError(m);this._fireUpdateEnd(m)},_clearEventListeners:function(m){B.disconnect(m._onload_connect);
B.disconnect(m._onerror_connect);B.disconnect(m._onabort_connect);m._onload_connect=m._onerror_connect=m._onabort_connect=null},setUseMapTime:function(m,n){this.useMapTime=m;this._toggleTime();n||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(m,n){var t={},z=e._css.names,w=this._img;if(w){h.set(w,z.transition,n?"none":z.transformName+" "+q+"ms ease");w._matrix=m;m=w._multiply?g.multiply(m,w._multiply):m;if(w._tdx||w._tdy)m=g.multiply(m,
{xx:1,xy:0,yx:0,yy:1,dx:w._tdx,dy:w._tdy});t[z.transform]=e._css.matrix(m);h.set(w,t)}},_onZoomHandler:function(m,n,t){m=this._startRect;var z=m.width*n,w=m.height*n,y=m.marginLeft*n,x=this._img,A=r("ie");x&&(A&&8>A?h.set(x,{left:m.left-(z-m.width)*(t.x-m.left)/m.width+"px",top:m.top-(w-m.height)*(t.y-m.top)/m.height+"px",zoom:n*m.zoom}):h.set(x,{left:m.left-(z-m.width)*(t.x-m.left)/m.width+"px",top:m.top-(w-m.height)*(t.y-m.top)/m.height+"px",width:z+"px",height:w+"px"}),null!=y&&0!==y&&h.set(x,
{marginLeft:y+"px"}))},_exportMapImage:function(m,n,t){var z=this._exportMapImageHandler;n.token=this._getToken();k({url:m,content:n,callbackParamName:"callback",load:function(w,y){z(w,y,t)},error:l.defaults.io.errorHandler})},_exportMapImageHandler:function(m,n,t){m=new d(m);this.onMapImageExport(m);t&&t(m)},onMapImageExport:function(){},setOpacity:function(m){if(this.opacity!=m)this.onOpacityChange(this.opacity=m)},onOpacityChange:function(){},_opacityChangeHandler:function(m){var n=8===r("ie")?
this._img:this._div;h.set(n,"opacity",m)}});a.setObject("layers.DynamicMapServiceLayer",D,e);return D})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){var n=D([l],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],
"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(t,z){this._attrs={};t&&c.isString(t)?this._url=d.urlToObject(this.url=d.normalize(t)):(this.url=this._url=null,(z=z||t)&&(z.layerDefinition||z.query)&&(z=null));this.spatialReference=new q(4326);this.initialExtent=new m(-180,-90,180,90,new q(4326));this._map=this._div=null;this.normalization=!0;z&&(z.id&&(this.id=z.id),this.arcgisProps=z.arcgisProps,this.parentLayer=z.parentLayer,!1===z.visible&&
(this.visible=!1),k.isDefined(z.opacity)&&(this.opacity=z.opacity),k.isDefined(z.minScale)&&this.setMinScale(z.minScale),k.isDefined(z.maxScale)&&this.setMaxScale(z.maxScale),this.attributionDataUrl=z.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,k.isDefined(z.showAttribution)&&(this.showAttribution=z.showAttribution),this.className=z.className,this.refreshInterval=z.refreshInterval||0);this._errorHandler=c.hitch(this,this._errorHandler);this._scheduledRefresh=c.hitch(this,
this._scheduledRefresh);this.refresh=c.hitch(this,this.refresh);if(this.managedSuspension){var w=this._setMap;this._setMap=function(y){var x=w.apply(this,arguments);this._fireAttach(y);this.evaluateSuspension();if(this.suspended&&!y.loaded)var A=a.connect(y,"onLoad",this,function(){a.disconnect(A);A=null;this.evaluateSuspension()});return x}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",
hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(t){this.loaded||(this.loadError=t);this.onError(t)},_setMap:function(t,z,w,y){this._map=t;this._lyrZEHandle=a.connect(t,"onZoomEnd",this,this._processMapScale);if(t.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var x=a.connect(t,"onLoad",this,function(){a.disconnect(x);x=null;this._processMapScale()})},_unsetMap:function(t,z){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0;this._fireDetach(t)},_fireAttach:function(t){this.attached=!0;this.onAttach({map:t})},_fireDetach:function(t){this.attached=!1;this.onDetach({map:t})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(t,z){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(t,z),this._map&&
this._map._decr())},_getToken:function(){var t=this._url,z=this.credential;return t&&t.query&&t.query.token||z&&z.token||void 0},_findCredential:function(){this.credential=r.id&&this._url&&r.id.findCredential(this._url.path)},_useSSL:function(){var t=this._url,z=/^http:/i;this.url&&(this.url=this.url.replace(z,"https:"));t&&t.path&&(t.path=t.path.replace(z,"https:"))},refresh:function(t){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(t){this.setScaleRange(t)},
setMaxScale:function(t){this.setScaleRange(null,t)},setScaleRange:function(t,z){var w=k.isDefined(t),y=k.isDefined(z);this.loaded||(this._hasMin=this._hasMin||w,this._hasMax=this._hasMax||y);var x=this.minScale,A=this.maxScale;this.minScale=(w?t:this.minScale)||0;this.maxScale=(y?z:this.maxScale)||0;if(x!==this.minScale||A!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var t=void 0===this._resumedOnce,z=this.className,w=this._attrs,y=this.getNode(),
x;if(t){this._resumedOnce=!0;if(z&&y){var A=y.getAttribute("class")||"";(new RegExp("(^|\\s)"+z+"(\\s|$)","i")).test(A)||y.setAttribute("class",A+((A?" ":"")+z))}if(w&&y)for(x in w)w.hasOwnProperty(x)&&y.setAttribute(x,w[x])}this._refreshRT();this.onResume({firstOccurrence:t});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var t=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();t!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(t){return t?n.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(t,z){if(!(t||this._map&&this._map.loaded))return!1;var w=this._map;t=t||w.getScale();var y=this.minScale,x=this.maxScale,A=!y,v=!x,u;z&&(u=w.width>w.height?w.width:w.height);A||(t<=y?A=!0:z&&(A=Math.abs(y-t)/y<1/u));v||(t>=x?v=!0:z&&(v=Math.abs(x-t)/x<1/u));return A&&v},getAttributionData:function(){var t=this.attributionDataUrl,z=new h(b._dfdCanceller);this.hasAttributionData&&
t?(z._pendingDfd=f({url:t,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),z._pendingDfd.then(function(w){z.callback(w)},function(w){z.errback(w)})):(t=Error("Layer does not have attribution data"),t.log=!!B.isDebug,z.errback(t));return z},getResourceInfo:function(){var t=this.resourceInfo;return c.isString(t)?g.fromJson(t):c.clone(t)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(t,z){var w=this.getNode();if("data-reference"===t&&11>e("ie"))return this;
w&&(null==z?w.removeAttribute(t):w.setAttribute(t,z));this._attrs&&(null==z?delete this._attrs[t]:this._attrs[t]=z);return this},setRefreshInterval:function(t){var z=this.refreshInterval;this.refreshInterval=t;this._toggleRT(!1);t&&this._toggleRT(!0);if(z!==t)this.onRefreshIntervalChange();return this},_toggleRT:function(t){t&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(t){var z=this._refreshTS;z&&(t=this._reCheckTS.test(t)?t.replace(this._reReplaceTS,"$$$1"+z):t+((-1===t.indexOf("?")?"?":"\x26")+"_ts\x3d"+z));return t},setNormalization:function(t){this.normalization=
t},setVisibility:function(t){this.visible!==t&&(this.visible=t,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",t?null:"")},onLoad:function(){},onAttach:function(t){},onDetach:function(t){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});c.setObject("layers.Layer",n,r);return n})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(D,B,a,c,h,g,e){D=D(null,{declaredClass:"esri.layers.MapImage",constructor:function(l){B.mixin(this,l);this.extent=new e(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=
!0;var l=this._node,r=this._layer,k;if(l){if(k=r&&r._div)r.suspended||r._setPos(l,k._left,k._top),(r._active||k).appendChild(l);g.show(l)}}},hide:function(){if(this.visible){this.visible=!1;var l=this._node;l&&(g.hide(l),l.parentNode&&l.parentNode.removeChild(l))}},setOpacity:function(l){var r=this._node;this.opacity=l;r&&a.set(r,"opacity",l)}});B.setObject("layers.MapImage",D,h);return D})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),
function(D,B,a,c,h,g,e,l,r,k){D=D(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(f,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var d=this._params={},q=this._url.query?this._url.query.token:null;q&&(d.token=q)},setInfoTemplates:function(f){this.infoTemplates=f},_load:function(){e({url:this._url.path,content:B.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(f,b){try{this._findCredential();(this.credential&&this.credential.ssl||f&&f._ssl)&&this._useSSL();this.description=f.description;this.copyright=f.copyrightText;this.spatialReference=f.spatialReference&&new l(f.spatialReference);this.initialExtent=f.initialExtent&&new r(f.initialExtent);this.fullExtent=f.fullExtent&&new r(f.fullExtent);this.units=f.units;this.maxRecordCount=f.maxRecordCount;this.maxImageHeight=f.maxImageHeight;
this.maxImageWidth=f.maxImageWidth;this.supportsDynamicLayers=f.supportsDynamicLayers;var d=this.layerInfos=[],q=f.layers,m=this._defaultVisibleLayers=[];a.forEach(q,function(n,t){d[t]=new k(n);n.defaultVisibility&&m.push(n.id)});this.visibleLayers||(this.visibleLayers=m);this.version=f.currentVersion;this.cimVersion=f.cimVersion;this.version||(this.version="capabilities"in f||"tables"in f?10:"supportedImageFormatTypes"in f?9.31:9.3);this.capabilities=f.capabilities;g.isDefined(f.minScale)&&!this._hasMin&&
this.setMinScale(f.minScale);g.isDefined(f.maxScale)&&!this._hasMax&&this.setMaxScale(f.maxScale)}catch(n){this._errorHandler(n)}}});B.setObject("layers.ArcGISMapServiceLayer",D,h);return D})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(g){B.mixin(this,g)},toJson:function(){return h.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});B.setObject("layers.LayerInfo",D,c);return D})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(D,B,a,c,h,g,e){D=D(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(l){null!==l&&(B.mixin(this,l),l.exportOptions&&(this.exportOptions=new e(l.exportOptions)),
this.timeExtent=null,l.timeExtent&&2===l.timeExtent.length&&(this.timeExtent=new h(l.timeExtent)),this.timeReference=new g(l.timeReference))}});B.mixin(D,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});B.setObject("layers.TimeInfo",D,c);return D})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(D,B,a,c){var h=D(null,{declaredClass:"esri.TimeExtent",constructor:function(g){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(g)if(B.isArray(g)){var e=g[0],l=g[1];this.startTime=null===e||"null"===e?null:new Date(e);this.endTime=null===l||"null"===l?null:new Date(l)}else g instanceof Date&&
this._create(g,null)},offset:function(g,e){var l=new h,r=this.startTime,k=this.endTime;r&&(l.startTime=this._getOffsettedDate(r,g,e));k&&(l.endTime=this._getOffsettedDate(k,g,e));return l},intersection:function(g){return this._intersection(this,g)},toJson:function(){var g=[],e=this.startTime;g.push(e?e.getTime():"null");e=this.endTime;g.push(e?e.getTime():"null");return g},_create:function(g,e){this.startTime=g?new Date(g.getTime()):null;this.endTime=e?new Date(e.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(g,e){if(g&&e){var l=g.startTime,r=g.endTime,k=e.startTime,f=e.endTime;l=l?l.getTime():-Infinity;k=k?k.getTime():-Infinity;r=r?r.getTime():Infinity;f=f?f.getTime():Infinity;var b,d;k>=l&&k<=r?b=k:l>=k&&l<=f&&(b=l);r>=k&&r<=
f?d=r:f>=l&&f<=r&&(d=f);if(isNaN(b)||isNaN(d))return null;l=new h;l.startTime=-Infinity===b?null:new Date(b);l.endTime=Infinity===d?null:new Date(d);return l}return null},_getOffsettedDate:function(g,e,l){var r=this._refData;g=new Date(g.getTime());e&&l&&(r=r[l],g[r.setter](g[r.getter]()+e*r.multiplier));return g}});return c.TimeExtent=h})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(h){h&&B.mixin(this,h)}});B.setObject("layers.TimeReference",D,c);return D})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(g){g&&B.mixin(this,g)},toJson:function(){return h.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});
B.setObject("layers.LayerTimeOptions",D,c);return D})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(D,B,a,c,h,g,e,l){B=B(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,
layerTimeOptions:null,toJson:function(r){this.bbox&&D.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var k=this.bbox||this.extent;k=k&&r&&k._normalize(!0);r=this.layerOption;var f=k?k.spatialReference.wkid||c.toJson(k.spatialReference.toJson()):null,b=this.imageSpatialReference;k={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:k?k.xmin+","+k.ymin+","+k.xmax+","+k.ymax:
null,bboxSR:f,layers:r?r+":"+this.layerIds.join(","):null,imageSR:b?b.wkid||c.toJson(b.toJson()):f};k.layerDefs=l._serializeLayerDefinitions(this.layerDefinitions);r=this.timeExtent;k.time=r?r.toJson().join(","):null;k.layerTimeOptions=l._serializeTimeOptions(this.layerTimeOptions);return e.filter(k,function(d){if(null!==d)return!0})}});a.mixin(B,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});a.setObject("layers.ImageParameters",
B,g);return B})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(D,B,a,c,h,g,e,l){D=D(g,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(r){r&&(r.source?r="mapLayer"===r.source.type?new e(r.source):new l(r.source):(r=new e,r.mapLayerId=this.id),this.source=r)},toJson:function(){var r=this.inherited(arguments);
r.source=this.source&&this.source.toJson();return h.fixJson(r)}});B.setObject("layers.DynamicLayerInfo",D,c);return D})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return h.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});B.setObject("layers.LayerMapSource",D,c);return D})},
"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(h){h&&B.mixin(this,h)},toJson:function(){}});B.setObject("layers.LayerSource",D,c);return D})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(D,B,a,c,h,g,e,l,r,k){D=D(g,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(f){if(f&&f.dataSource){switch(f.dataSource.type){case "table":f=new e(f.dataSource);break;case "queryTable":f=new l(f.dataSource);break;case "joinTable":f=new r(f.dataSource);break;case "raster":f=new k(f.dataSource);break;default:f=f.dataSource}this.dataSource=f}},toJson:function(){var f={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return h.fixJson(f)}});
B.setObject("layers.LayerDataSource",D,c);return D})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return h.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});B.setObject("layers.TableDataSource",D,c);return D})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.DataSource",constructor:function(h){h&&B.mixin(this,h)},toJson:function(){}});B.setObject("layers.DataSource",D,c);return D})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(D,B,a,c,h,g,e){D=D(g,{declaredClass:"esri.layers.QueryDataSource",constructor:function(l){l&&(l.oidFields&&B.isString(l.oidFields)&&
(this.oidFields=l.oidFields.split(",")),l.spatialReference&&(this.spatialReference=new e(l.spatialReference)))},toJson:function(){var l={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var r="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;l.geometryType=r}return h.fixJson(l)}});B.setObject("layers.QueryDataSource",D,c);return D})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(D,B,a,c,h,g,e,l,r,k){var f=D(g,{declaredClass:"esri.layers.JoinDataSource",constructor:function(b){b&&
(b.leftTableSource&&(this.leftTableSource=this._createLayerSource(b.leftTableSource)),b.rightTableSource&&(this.rightTableSource=this._createLayerSource(b.rightTableSource)))},_createLayerSource:function(b){if("mapLayer"===b.type)var d=new e(b);else{d={type:"dataLayer"};switch(b.dataSource.type){case "table":var q=new l(b.dataSource);break;case "queryTable":q=new r(b.dataSource);break;case "joinTable":q=new f(b.dataSource);break;case "raster":q=new k(b.dataSource);break;default:q=b.dataSource}d.dataSource=
q;d.toJson=function(){var m={type:"dataLayer",dataSource:q.toJson()};return h.fixJson(m)}}return d},toJson:function(){var b={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var d="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
b.joinType=d;return h.fixJson(b)}});B.setObject("layers.JoinDataSource",f,c);return f})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return h.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});B.setObject("layers.RasterDataSource",D,c);return D})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),
function(D,B,a,c,h,g,e){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);return function(){function l(){this.declaredClass="arcgisonline.sharing.geow.Roles"}l.exceedsRolePrivileges=function(r,k,f){k=k||[];var b;f&&(r=a.__spreadArray(a.__spreadArray([],r),l.extraLevelOnePrivileges));for(b=0;b<k.length;b++)if(f=k[b],-1===r.indexOf(f))return!0;return!1};l.prototype.createRole=function(r,k){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/createRole",
content:{name:r,description:k}},{usePost:!0})};l.prototype.updateRole=function(r,k,f){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+r+"/update",content:{name:k,description:f}},{usePost:!0})};l.prototype.deleteRole=function(r){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+r+"/delete"},{usePost:!0})};l.prototype.setPrivileges=function(r,k){var f=c["default"].restBaseUrl+"portals/self/roles/"+r+"/setPrivileges",b={id:r,privileges:JSON.stringify({privileges:k})};
return h["default"].request({url:f,content:b},{usePost:!0})};l.prototype.getPrivileges=function(r){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+r+"/privileges"})};l.prototype.getAllUsersForRole=function(r){var k=this,f=new g["default"],b=[],d=[],q=1,m,n,t;k.getUsersForRole(1,100,r).then(function(z){if(z&&z.users){d=d.concat(z.users);q=z.nextStart;m=z.total-d.length;n=Math.ceil(m/100);for(t=0;t<n;t++)b.push(k.getUsersForRole(q+100*t,100,r));e["default"](b).then(function(w){w.forEach(function(y){d=
d.concat(y.users)});f.resolve(d)},function(){f.resolve(d)})}},function(){f.resolve(d)});return f};l.prototype.getUsersForRole=function(r,k,f){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/users",content:{start:r,num:k,role:f}})};l.prototype.getAllRoles=function(r){var k=this,f=new g["default"],b=[],d=1,q=[],m,n,t;k.getRoles(d,100,r).then(function(z){if(z&&z.roles){q=q.concat(z.roles);d=z.nextStart;m=z.total-q.length;n=Math.ceil(m/100);for(t=0;t<n;t++)b.push(k.getRoles(d+
100*t,100,r));e["default"](b).then(function(w){w.forEach(function(y){q=q.concat(y.roles)});f.resolve(q)},function(){f.resolve(q)})}},function(){f.resolve(q)});return f};l.prototype.getRoles=function(r,k,f){var b=c["default"].restBaseUrl+"portals/self/roles";r={start:r,num:k,returnPrivileges:null};f&&(r.returnPrivileges=f);return h["default"].request({url:b,content:r})};l.prototype.getRole=function(r){return h["default"].request({url:c["default"].restBaseUrl+"portals/self/roles/"+r})};l.prototype.containsPrivilegesOutsideRole=
function(r,k,f){var b=new g["default"];r={roleResult:this.getPrivileges(r),compareResult:this.getPrivileges(k)};var d=!1,q,m;e["default"](r).then(function(n){q=n.roleResult&&n.roleResult.privileges||[];m=n.compareResult&&n.compareResult.privileges||[];f&&f instanceof Array?q=q.concat(f):f&&f instanceof String&&q.push(f);d=l.exceedsRolePrivileges(q,m);b.resolve(d)},function(){b.resolve(d)});return b};l.extraLevelOnePrivileges=["portal:user:joinNonOrgGroup","portal:user:viewTracks"];return l}()})},
"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays ../../sharing/util dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(D,B,a,c,h,g,e,l,r,k){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);return function(){function f(){}f.createFullName=function(b,d){var q=null===b||void 0===b?void 0:b.fullName;d||(d=r["default"].locale);
k["default"].isDefined(b.firstName)&&k["default"].isDefined(b.lastName)&&(q="ja"===d?b.lastName+" "+b.firstName:b.firstName+" "+b.lastName);return q};f.splitFullName=function(b){var d={first:void 0,last:void 0};b&&(b=b.split(" "),1===b.length?(d.first=b[0],d.last=""):1<b.length&&(d.last=b.splice(b.length-1,1)[0],d.first=b.join(" ")));return d};f.checkUsernames=function(b){var d=new l["default"],q={usernames:[]};h["default"].sendAllResources(c["default"].restBaseUrl+"community/checkUsernames",200,
b,function(m){return{usernames:m.join(",")}}).then(function(m){m.forEach(function(n){return q.usernames=q.usernames.concat(n.usernames)});d.resolve(q)},function(m){d.resolve(m)});return d};f.checkForFavorites=function(b,d,q){var m=new l["default"],n=(null===q||void 0===q?void 0:q.items)||[];b=null===b||void 0===b?void 0:b.favGroupId;var t=n.map(function(z){return z.id});b&&(null===t||void 0===t?0:t.length)?(b='(group:"'+b+'" AND id:('+t.join(" OR ")+"))",d.queryItems({q:b,num:n.length||1},!0).then(function(z){var w=
z.results||[];n.forEach(function(y){y.isFavorite=!!g["default"].find(w,function(x){return y.id===x.id})});m.resolve(q)},function(z){m.resolve(q)})):m.resolve(q);return m};f.createValidOrgUsername=function(b,d,q,m){var n,t=null!==(n=(null===b||void 0===b?void 0:b.length)+(null===d||void 0===d?void 0:d.length))&&void 0!==n?n:0;b=b.substring(0,b.length-(t>m?t%m:0))+d.replace(/-/g,"_");b.length<q&&(d=q-b.length,b&&0<d&&(q=""+(new Date).getTime(),b+=q.substring(q.length-d)));return b};f.stripOrgKeyFromUsername=
function(b,d){if(b){var q=b.lastIndexOf(d);if(-1<q&&q<b.length-1&&q===b.length-d.length-1)return b.substring(0,q)}return b};f.cleanUsername=function(b,d){var q=/[^[a-zA-Z0-9@_\.]]*/g,m=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===b||void 0===b?void 0:b.length)?d?b.replace(m,"_"):b.replace(q,"_"):b};f.cleanUsernameDomain=function(b,d,q){return b&&(d||q)&&(d=b.indexOf("\\"),-1<d&&d<=b.length-2)?b.substring(d+1)+"@"+b.substring(0,d).toUpperCase():b};f.stripUsernameDomain=function(b,d,q){return b&&!d&&q?
b.split("@").shift():b};f.removeSAMLSuffix=function(b,d){var q="_"+d;return b.lastIndexOf(q)===b.length-q.length?b.substring(0,b.lastIndexOf(q)):b};f.addSAMLSuffix=function(b,d){var q=b&&d,m="_"+d,n=q&&-1===b.indexOf(m);q=q&&b.lastIndexOf(m)===b.length-m.length;return n||q?b+m:b};f.isStoryteller=function(b){var d;return"storytellerut"===(null===(d=b.userLicenseTypeId)||void 0===d?void 0:d.toLowerCase())};f.getUserProperties=function(b){var d=new l["default"];(null===b||void 0===b?0:b.username)?e["default"].request({url:c["default"].restBaseUrl+
"community/users/"+b.username+"/properties",content:{f:"json"}}).then(function(q){d.resolve(q.properties)},function(){d.resolve(null)}):d.resolve(null);return d};return f}()})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ./clone ../../sharing/util dojo/promise/all dojo/Deferred esri/lang".split(" "),function(D,B,a,c,h,g,e,l){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);return function(){function r(){}
r.sendAllResources=function(k,f,b,d,q,m){var n=new e["default"];b=c["default"](b);var t=[],z=b.splice(0,f);for(l["default"].isDefined(m)||(m=!0);0<(null===z||void 0===z?void 0:z.length);)t.push(h["default"].request({url:k,content:d(z)},a.__assign({usePost:m},q))),z=b.splice(0,f);g["default"](t).then(function(w){n.resolve(w)},function(w){n.reject(w)});return n};r.sendAllResourcesWithDelay=function(k,f,b,d,q){function m(){setTimeout(function(){y=z.splice(0,f);0<(null===y||void 0===y?void 0:y.length)&&
(h["default"].request({url:k,content:d(y)},{usePost:!0}).then(function(v){x++;w.push(v);x>=t&&n.resolve(w)},function(v){x++;x>=t&&n.reject(v)}),A++,m())},0===A?0:q)}var n=new e["default"],t=Math.ceil(b.length/f),z=c["default"](b),w=[],y,x=0,A=0;m();return n};r.sendAllResourcesSerially=function(k,f,b,d){function q(){w=t.splice(0,f);0<(null===w||void 0===w?void 0:w.length)&&h["default"].request({url:k,content:d(w)},{usePost:!0}).then(function(x){y++;z.push(x);y>=n?m.resolve(z):q()},function(x){y++;
y>=n?m.reject(x):q()})}var m=new e["default"],n=Math.ceil(b.length/f),t=c["default"](b),z=[],w,y=0;q();return m};r.fetchAllResources=function(k,f,b){void 0===f&&(f={});void 0===b&&(b="results");var d=new e["default"],q=[],m=100,n=[],t=1,z,w,y;f.start=t;!f.num||f.num>m?f.num=m:m=f.num;h["default"].request({url:k,content:f}).then(function(x){if(null===x||void 0===x?0:x[b]){n=n.concat(x[b]);t=x.nextStart;z=x.total-n.length;w=Math.ceil(z/m);for(y=0;y<w;y++)f.start=t+y*m,q.push(h["default"].request({url:k,
content:f}));g["default"](q).then(function(A){A.forEach(function(v){n=n.concat(v[b])});d.resolve(n)},function(A){d.reject(A)})}else d.resolve(n)},function(x){d.reject(x)});return d};return r}()})},"arcgisonline/sharing/dijit/SiteHeader":function(){define("require exports tslib ../../agoNav ../../esriGeowConfig ../../pages/utils/signin ../../pages/utils/storage ../util ../geow/Account ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/_base/url dojo/io-query dojo/_base/kernel dojo/sniff dojo/topic esri/config esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SiteHeaderSimple.html".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);return function(){function v(u,
C){this.declaredClass="arcgisonline.sharing.dijit.SiteHeader";this.templateString=A["default"];this.i18n=a.__assign(a.__assign({},x["default"].common),x["default"].siteHeader)}v.prototype.postMixInProperties=function(){this.inherited(arguments);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=h["default"].baseUrl||"./"};v.prototype.postCreate=function(){var u=window.location.pathname.toLowerCase();
this.isSignInPage=-1!==u.indexOf(h["default"].signin);this.isSignUpPage=-1!==u.indexOf(h["default"].signup);this.isJoinPage=-1!==u.indexOf(h["default"].join);this.isSetupPage=-1!==u.indexOf(h["default"].setup);this.isIEPage=-1!==u.indexOf("ie6.html");this.isTroubleshootPage=-1!==u.indexOf("troubleshoot.html");7>t["default"]("ie")&&!this.isIEPage&&(window.location.href="ie6.html");if(u=document.getElementById("page-border"))u.onclick=function(){}};v.prototype.startup=function(){this.inherited(arguments);
w["default"].defaults.io.corsEnabledServers.push("http://"+location.host);w["default"].defaults.io.corsEnabledServers.push("https://"+location.host);w["default"].defaults.io.proxyUrl=h["default"].proxyServer;return this._fetchSelf()};v.prototype._generateGlobalNav=function(u){this._agoNavIsLoaded||(this.agoNav=new c["default"],this.agoNav.init({config:h["default"].self,legacy:this.legacy,relativePath:this.relativePath}),this._agoNavIsLoaded=!0)};v.prototype._logCookieChange=function(u){var C=this.telemetry;
u&&(null===C||void 0===C?0:C.logEvent)&&C.logEvent({category:"cookie",label:"Organization changed",details:"Yes"})};v.prototype._fetchSelf=function(){var u=this,C=new d["default"];r["default"].getSelf(function(E){u._finishStartup(E);C.resolve(E);z["default"].publish("OnFetchSelf",E)},function(E){u._finishStartup();throw E;});return C};v.prototype._finishStartup=function(u){var C;if(u&&!u.code&&!u.message){var E=void 0,F=void 0;u.httpsPort&&(h["default"].httpsPort=u.httpsPort,F=w["default"].defaults.io.corsEnabledServers.pop());
u.httpPort&&(h["default"].httpPort=u.httpPort,E=w["default"].defaults.io.corsEnabledServers.pop());E&&w["default"].defaults.io.corsEnabledServers.push(l["default"].getHttpUrl("http://"+location.host).replace(/:80$/,""));F&&w["default"].defaults.io.corsEnabledServers.push(l["default"].getSecureUrl("http://"+location.host).replace(/:443$/,""));(u.authorizedCrossOriginDomains||[]).forEach(function(I){y["default"].isDefined(I)&&0<I.length&&w["default"].defaults.io.corsEnabledServers.push({host:I,withCredentials:!0})});
g["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(u);this._generateGlobalNav({user:u.user});this.isLoggedIn=l["default"].isLoggedIn();u.isPortal&&l["default"]._cookies&&-1===l["default"]._cookies.arcgis_auth&&delete l["default"]._cookies.arcgis_auth;F=void 0;E=(null===(C=u.user)||void 0===C?void 0:C.culture)||u.culture||n["default"].locale;C=l["default"].getUser();F=m["default"].queryToObject(window.location.search.substring(1));var G=-1<["hi"].indexOf(E);if(u.culture&&!C)u.culture=u.culture.toLowerCase(),
this.updateLocaleCookie(u.culture,u.isPortal,u.allSSL),-1!==u.culture.indexOf("ar")?h["default"].isRightToLeft=!0:h["default"].isRightToLeft=!1,n["default"].locale.toLowerCase()!==u.culture.toLowerCase()&&window.location.reload();else if(!u.culture&&!C)this.hasLocaleCookie()&&(this.removeLocaleCookie(u.isPortal,u.allSSL),window.location.reload());else if(C&&E&&n["default"].locale!==E.toLowerCase()&&!G&&!F.locale&&C.username&&C.username===u.user.username){var H=l["default"].getCookie("esri_auth");
9>t["default"]("ie")&&u.isWebTierAuth&&(F=new Date,H.expires=new Date(F.setSeconds(F.getSeconds()+Number(7200))));!C.culture||C.culture&&C.culture!==E.toLowerCase()?(C.culture=E.toLowerCase(),this.updateLocaleCookie(C.culture.toLowerCase(),u.isPortal,u.allSSL)):C.culture&&C.culture===E.toLowerCase()&&n["default"].locale!==E.toLowerCase()&&this.updateLocaleCookie(E.toLowerCase(),u.isPortal,u.allSSL);window.location.reload()}if(u.isWebTierAuth)if(C&&(C.username=C.username||C.email),(null===C||void 0===
C?0:C.culture)&&C.culture.toLowerCase()!==E.toLowerCase()&&!G){var J=l["default"].getCookie("esri_auth")||{};9>t["default"]("ie")&&(F=new Date,J.expires=new Date(F.setSeconds(F.getSeconds()+Number(7200))));if(!C.culture||C.culture&&C.culture.toLowerCase()!==(null===E||void 0===E?void 0:E.toLowerCase()))C.culture=E.toLowerCase(),J.culture=C.culture,u.allSSL&&(J.allSSL=!0,J.secure=!0),C=a.__assign(a.__assign({},C),J);window.location.reload()}else(null===(J=null===C||void 0===C?void 0:C.culture)||void 0===
J?void 0:J.toLowerCase())!==E.toLowerCase()||n["default"].locale.toLowerCase()===E.toLowerCase()||G||window.location.reload();u.allSSL&&(this.allSSL=h["default"].allSSL=u.allSSL);y["default"].isDefined(h["default"].allSSL)&&h["default"].allSSL&&"http:"===location.protocol&&(window.location.href=l["default"].getSecureUrl(location.href));u.helpBase&&(h["default"].help=u.helpBase,h["default"].helpBase=u.helpBase,J=h["default"].self&&h["default"].self.helpBase||"support.html",l["default"].isPortal()&&
(J=location.protocol+"//"+location.host+u.helpBase,J=this.allSSL||l["default"].usePortalSSL()?l["default"].getSecureUrl(J):l["default"].getHttpUrl(J)));u.helpMap&&u.helpMap.m&&(h["default"].helpMap=u.helpMap.m);u.portalHostname&&(h["default"].portalHostname=u.portalHostname);u.urlKey&&(h["default"].urlKey=u.urlKey);u.staticImagesUrl&&(h["default"].staticImagesUrl=u.staticImagesUrl);J=!1===h["default"].isMultiTenant;J||(E=window.location.host,E===u.portalHostname||-1===E.indexOf(u.customBaseUrl)||
u.access||u.name||"geoanalyticsengine"===this.getClientId()||(window.location.href=window.location.href.replace(E,u.portalHostname)),!C||"account_admin"!==C.role&&"org_admin"!==C.role||!u.id||u.urlKey||this.isSetupPage||(window.location.href=h["default"].baseUrl+"setup.html"));J?("private"!==(null===u||void 0===u?void 0:u.access)||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location.href=""+l["default"].getSecureUrl()+h["default"].signin+
"?returnUrl\x3d"+encodeURIComponent(window.location.href)),!u.isPortal||"singletenant"!==u.portalMode||"7080"!==location.port&&"7443"!==location.port||l["default"].checkForIAA().then(function(I){if(null===I||void 0===I?0:I.hasIAA)if(u.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=l["default"].getHttpUrl(h["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!u.portalHostname.match(/:7080\//)&&80!==h["default"].httpPort&&
443!==h["default"].httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){I=new q["default"](location.href);var R=I.path.indexOf("/home/");R=I.path.substring(R+6);I=y["default"].isDefined(I.query)?"?"+I.query:"";window.location.href=""+l["default"].getHttpUrl("http://"+u.portalHostname)+"/home/"+R+I}})):u.id||!u.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location.href=""+h["default"].baseUrl.replace("http:","https:")+h["default"].signin+
"?returnUrl\x3d"+encodeURIComponent(window.location.href))}};v.prototype.getClientId=function(){try{return e["default"].getLocalStorageItem("portalAppClientId")||e["default"].getSessionStorageItem("portalAppClientId")||h["default"].clientId||"arcgisonline"}catch(u){return h["default"].clientId||"arcgisonline"}};v.prototype.hasLocaleCookie=function(){return!!e["default"].getCookie("arcgisLocale")||!!e["default"].getCookie("esri_locale")};v.prototype.removeLocaleCookie=function(u,C){e["default"].setCookie("arcgisLocale",
null,{expires:-1});e["default"].setCookie("esri_locale",null,{path:"/",domain:u?window.location.hostname:".arcgis.com",secure:!u||C,expires:-1})};v.prototype.updateLocaleCookie=function(u,C,E){e["default"].setCookie("arcgisLocale",u,{sameSite:"Strict"});e["default"].setCookie("esri_locale",u,{path:"/",domain:C?window.location.hostname:".arcgis.com",secure:!C||E})};v.prototype.updateEsriAccessLinks=function(u){var C=this;h["default"].self.user.userType=u;window.require(["arcgisonline/agoNav"],function(E){C.agoNav=
E;E.updateHeaderComponent({config:h["default"].self})})};return v=a.__decorate([k["default"](f["default"],b["default"])],v)}()})},"arcgisonline/agoNav":function(){define("require exports tslib arcgis-components/wrappers/InfoBanner ./esriGeowConfig ./pages/components/ConfirmDialog ./pages/components/StatusBanner ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/a11y ./pages/utils/notifications ./pages/utils/icons ./pages/utils/notebook ./pages/utils/mapViewer ./pages/utils/storage ./pages/utils/organization ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/util dojo/promise/all dojo/debounce dojo/string dojo/topic dojo/query dojo/io-query dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/on esri/arcgis/Portal esri/request esri/IdentityManager esri-global-nav/esri-global-nav preact dojo/i18n!./nls/arcgisonline".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O,P,L,K,Q,W){Object.defineProperty(B,"__esModule",{value:!0});h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);
x=a.__importDefault(x);A=a.__importDefault(A);v=a.__importDefault(v);u=a.__importDefault(u);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);J=a.__importDefault(J);I=a.__importDefault(I);R=a.__importDefault(R);O=a.__importDefault(O);P=a.__importDefault(P);L=a.__importDefault(L);W=a.__importDefault(W);D=function(){function ba(){this.GlobalNavLink={label:void 0,href:void 0,data:void 0,active:void 0,newContext:void 0,init:function(S,X){this.label=
S;var aa=X.href,M=X.data,da=X.active,ea=X.openInNewTab;this.href=aa?"function"===typeof aa?aa():aa:"#";this.data=M||void 0;this.active=da||void 0;this.newContext=ea||void 0;return this}}}ba.prototype.init=function(S){var X=this;this.legacy=S.legacy;v["default"]({orgSettings:this.getOrgSettings(),userProperties:this.getUserProperties()}).then(function(aa){X.orgSettings=aa.orgSettings;X.userProperties=aa.userProperties;X.setup(S)});E["default"].subscribe("account-menu/close",this.closeAccountMenu.bind(this));
E["default"].subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));E["default"].subscribe("top-nav/update",this.updateMenu.bind(this));E["default"].subscribe("mapviewer/user-update",this.updateUserMapViewerPreference.bind(this));E["default"].subscribe("mapviewer/org-update",this.updateOrgMapViewerPreference.bind(this))};ba.prototype.setup=function(S){var X=this,aa,M,da,ea=this.orgSettings;if(ea&&ea.anonymousAccessNotice&&ea.anonymousAccessNotice.enabled&&!t["default"].getCookie("ago_conditions_accepted"))return window.location.href=
h["default"].baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d"+window.location.href;(null===(aa=null===ea||void 0===ea?void 0:ea.informationalBanner)||void 0===aa?0:aa.enabled)&&this.createClassificationBanner(ea.informationalBanner);!S.config.isPortal&&0>=(null===(M=S.config.subscriptionInfo)||void 0===M?void 0:M.availableCredits)&&"suspended"!==S.config.subscriptionInfo.state&&"expired"!==S.config.subscriptionInfo.state&&this.createRestrictedStatusBanner();
this.relativePath=S.relativePath||"./";h["default"].self=S.config;this.customNavStructure=S.customNavStructure;this.isOrgUser=null===(da=h["default"].userInfo)||void 0===da?void 0:da.orgId;this.userIsSignedIn=!(!h["default"].userInfo||!h["default"].userInfo.username&&!h["default"].userInfo.email);this.defaultNavStructure={header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",
href:"../features/plans/pricing.html"},{label:"Map",href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:W["default"].common.search,hide:"search.html"===window.location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:h["default"].baseUrl+"search.html",label:"ArcGIS Online",submitLabel:W["default"].common.search,cancelLabel:W["default"].common.cancel,
queryLabel:W["default"].siteHeader.searchAgo}},account:{label:W["default"].siteHeader.yourProfile,controls:{signin:W["default"].siteHeader.signIn,signout:W["default"].siteHeader.signOut,"switch":W["default"].siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:this.relativePath+"user.html"},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",
href:"http://doc.arcgis.com/en/arcgis-online/"}]}}};this.fixMobileBannerHeight();this.createPortalInstance().then(function(){var Z=G["default"].queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&(null===Z||void 0===Z?0:Z.hideNav)?(document.body.classList.add("is-embedded"),Z=document.querySelector(".esri-header-barrier"),Z.parentNode.removeChild(Z)):(X.navLinks=X.buildNavLinks(X,h["default"]),
X.createGlobalNav(h["default"].userInfo,S.customNavStructure));(Z=window.esri)&&!Z.i18nBundle&&(Z.i18nBundle=W["default"])})};ba.prototype.createRestrictedStatusBanner=function(){var S=this,X,aa=document.createElement("div"),M=W["default"].restrictedOrg,da=M.title,ea=M.you,Z=M.allMembers,ka=M.learnMore;M=M.removeRestrictions;var va=""+h["default"].self.helpBase+(h["default"].self.helpMap.m["120001308"]||""),Ea={};Ea=(null===(X=h["default"].userRole)||void 0===X?0:X.isAdmin())?{strings:{title:da,message:Z,
action:M},onAction:function(Ga){S.openRemoveRestrictionsDialog(null===Ga||void 0===Ga?void 0:Ga.target,va)}}:{strings:{title:da,message:ea,learnMore:ka},link:va};document.body.insertBefore(aa,document.body.firstChild);Q.render(Q.h(e["default"],Ea),aa);this.hasStatusBanner=!0};ba.prototype.openRemoveRestrictionsDialog=function(S,X){var aa=W["default"].restrictedOrg.removeRestrictions,M=z["default"].getBuyLink(h["default"].self),da='\x3ca href\x3d"'+X+'" target\x3d"_blank"\x3e'+W["default"].restrictedOrg.learnMoreLong+
' \x3ccalcite-icon icon\x3d"launch" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\x3c/a\x3e';M='\x3cp class\x3d"leader-half esriItemLinks"\x3e'+W["default"].restrictedOrg.noCredits+" "+(M?C["default"].substitute(W["default"].restrictedOrg.visitEsriStore,{startLink:'\x3ca href\x3d"'+M+'" target\x3d"_blank"\x3e',endLink:"\x3c/a\x3e"}):C["default"].substitute(W["default"].restrictedOrg.contactCS,{startLink:'\x3ca href\x3d"http://www.esri.com/about-esri/offices/"\x3e',endLink:"\x3c/a\x3e"}))+'\x3c/p\x3e\x3cp class\x3d"esriItemLinks"\x3e'+
da+"\x3c/p\x3e";aa={title:aa,description:M,ok:W["default"].common.ok};var ea=document.createElement("div");M=function(){Q.render(null,ea);document.body.removeChild(ea);null===S||void 0===S?void 0:S.focus()};document.body.appendChild(ea);Q.render(Q.h(g["default"],{strings:aa,onOk:M,onCancel:M,autoCloseOnOk:!0,hideCancel:!0,renderHtmlDescription:!0,width:"s"}),ea);window.setTimeout(function(){var Z;null===(Z=ea.querySelector("calcite-modal"))||void 0===Z?void 0:Z.setFocus("close-button")},200)};ba.prototype.closeAccountMenu=
function(){this.updateComponent("header:menu:close",document.getElementById("esri-header-account-menu"))};ba.prototype.updateUserMapViewerPreference=function(S){var X,aa;this.userProperties.mapViewer=S;S=null===(aa=null===(X=h["default"].self)||void 0===X?void 0:X.portalProperties)||void 0===aa?void 0:aa.topNav;this.updateMenu(S||{})};ba.prototype.updateOrgMapViewerPreference=function(S){var X=h["default"].self;X&&(X.portalProperties=X.portalProperties||{},X.portalProperties.mapViewer=S,this.updateMenu(X.portalProperties.topNav||
{}))};ba.prototype.getMapViewerLink=function(S){return S===n["default"].MapViewerType.Classic?this.relativePath+"webmap/viewer.html?useExisting\x3d1":h["default"].newMapViewerUrl};ba.prototype.updateHelpUrl=function(S){this.updateHeaderComponent({config:S})};ba.prototype.updateMenu=function(S){var X=h["default"].self.portalProperties||{};X.topNav=S;h["default"].self.portalProperties=X;this.navLinks=this.buildNavLinks(this,h["default"]);S=this.getNavStructure(h["default"].userInfo,this.customNavStructure);
this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),S.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),S.header.menus)};ba.prototype.createClassificationBanner=function(S){var X=document.createElement("div"),aa=document.createElement("div");document.body.insertBefore(X,document.body.childNodes[0]);document.body.appendChild(aa);new c.InfoBanner({bannerConfig:S,topContainer:X,bottomContainer:aa});
this.hasInfoBanner=!0};ba.prototype.getAppClientId=function(){try{return t["default"].getLocalStorageItem("portalAppClientId")||t["default"].getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(S){return"arcgisonline"}};ba.prototype.createPortalInstance=function(){var S=this,X=new I["default"];(this.portal=h["default"]&&h["default"].portal)?X.resolve(!0):w["default"].getSelf(function(aa){S.portal=new O["default"].Portal({url:h["default"].restBaseUrl.replace("http://","https://"),self:J["default"].clone(aa)});
R["default"].once(S.portal,"load",function(M){S.portal.portalUser=S.portal.getPortalUser();k["default"].isOrgUser=S.isOrgUser;k["default"].portal=S.portal;k["default"].getLicenseInfo().then(function(da){h["default"].userInfo&&(h["default"].userInfo=a.__assign(a.__assign({},h["default"].userInfo),k["default"]));S.portal.portalUser?L["default"].checkAppAccess(S.portal.portalUrl,S.getAppClientId()).always(function(ea){if(ea=!(!ea||!ea.viewOnly))S.portal.user.cookie=S.getUserCookie(),S.portal.user.credential=
S.portal.portalUser.credential,S.portal.user.portal=S.portal,S.portal.user.viewOnly=ea,S.portal.portalUser=new r["default"](S.portal.user);X.resolve(!0)}):X.resolve(!0)})})});return X};ba.prototype.fixMobileBannerHeight=function(){var S;this.hasInfoBanner&&!this.hasStatusBanner||this.hasStatusBanner&&!this.hasInfoBanner?S=56+document.body.childNodes[0].clientHeight:this.hasInfoBanner&&this.hasStatusBanner&&(S=56+document.body.childNodes[0].clientHeight+document.body.childNodes[1].clientHeight);S&&
setTimeout(function(){var X=document.getElementById("esri-header-menus-content-mobile");X&&(X.style.height="calc(var(--esri-vh) - "+S+"px)")},1E3)};ba.prototype.createGlobalNav=function(S,X){var aa,M,da,ea=this.getNavStructure(S,X),Z=((null===(M=null===(aa=h["default"].self)||void 0===aa?void 0:aa.portalProperties)||void 0===M?void 0:M.topNav)||{}).search;aa=this.isOrgUser&&h["default"].self&&h["default"].userInfo.orgId===h["default"].self.id;"members"!==Z||aa||delete ea.header.search;K.createHeader({targetElm:".esri-header-barrier",
menuData:ea});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(S),this.isOrgUser&&(h["default"].self.isPortal||"active"===(null===(da=h["default"].self.subscriptionInfo)||void 0===da?void 0:da.state))&&(h["default"].self.isPortal||(this.defaultNavStructure.header.apps=this._getAppsLoadingJson(),this.updateAppLauncherComponent()),this.createAppLauncher())):this.setupSignInLink();this.addLegacyClasses()};ba.prototype.addLegacyClasses=
function(){if(this.legacy){var S=window.location.pathname.toLowerCase();if(-1!==S.indexOf("index.html")||-1===S.indexOf(".html"))F["default"](".siteHeader").addClass("top-nav"),F["default"](".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),F["default"](".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}};
ba.prototype.getNavStructure=function(S,X){var aa=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(S,this.userCookie):this.getSignedOutNavStructure();return J["default"].mixin(h["default"].self.isPortal?this.modifyStructureForPortal(aa):aa,X||{})};ba.prototype.getSignedOutNavStructure=function(){var S=h["default"].self.isPortal,X=this.showProductLinks()?["overview","pricing","map","scene","help"]:["home_link","gallery","map","scene","groups"].concat(S?["help"]:
[]);this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(X,W["default"].siteHeader)];this.defaultNavStructure.header.brand.href=""+this.relativePath+(S?"index.html":"../features/features.html");return this.defaultNavStructure};ba.prototype.isGeode=function(){return"geoanalyticsengine"===this.getAppClientId()};ba.prototype.getSignedInNavStructure=function(S,X){var aa=this.isGeode(),M={name:S.fullName,id:S.username,group:"",image:this.getUserProfileImage(S.username,S.thumbnail,X.token)},
da=aa?["mySettings","arcgisBlog","help"]:"myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" "),ea=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");this.defaultNavStructure.header.account.user=M;this.defaultNavStructure.header.menus=aa?[[{active:!0,href:this.relativePath+"geoanalyticsengine.html",label:W["default"].siteHeader.subscription}]]:[this.filterAndCreateLinks(ea,
W["default"].siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks(da,W["default"].siteHeader);this.defaultNavStructure.header.brand.href=""+this.relativePath+(h["default"].self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=this._getDefaultNotifications());aa&&delete this.defaultNavStructure.header.search;return this.defaultNavStructure};ba.prototype.modifyStructureForPortal=function(S){S.header.search.dialog.queryLabel=
W["default"].siteHeader.searchAgoEnterprise;return S};ba.prototype.getFooterLinks=function(){var S=this,X,aa,M,da;this.i18n=a.__assign(a.__assign(a.__assign({},W["default"].siteFooter),W["default"].common),{helpLabel:W["default"].supportPage.helpLabel});var ea=h["default"].footerLinks.reduce(function(Z,ka){var va=ka.title.indexOf("${");va=-1<va?S._evalString(ka.title,va):ka.title;return"ArcGIS Marketplace"===ka.title?h["default"].self&&S.userIsSignedIn?Z.concat({label:va,href:h["default"].marketplaceUrl.replace("http://",
"https://")}):Z:"contactUs"===ka.type?Z.concat({label:va,href:S._constructContactUsUrl(ka)}):"reportAbuse"===ka.type?Z.concat({label:va,href:S._constructReportAbuseUrl(ka)}):ka.url?Z.concat({label:va,href:ka.url}):Z},[]);(null===(da=null===(M=null===(aa=null===(X=h["default"].self)||void 0===X?void 0:X.portalProperties)||void 0===aa?void 0:aa.links)||void 0===M?void 0:M.contactUs)||void 0===da?0:da.visible)&&ea.push({label:this.i18n.customContactUs,href:h["default"].self.portalProperties.links.contactUs.url});
return ea};ba.prototype.updateComponent=function(S,X,aa){var M=document.createEvent("CustomEvent");M.initCustomEvent(S,!0,!0,aa);X.dispatchEvent(M)};ba.prototype.updateAppLauncherComponent=function(S){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),this._appsJson(S))};ba.prototype.updateHeaderComponent=function(S){h["default"].self=S.config;this.navLinks=this.buildNavLinks(this,h["default"]);S=this.getNavStructure(h["default"].userInfo,S.customNavStructure);this.updateComponent("header:update:account",
document.querySelector(".esri-header-client").lastChild,S.header.account)};ba.prototype.updateNotificationsComponent=function(S){this.defaultNavStructure.header.notifications.messages=S;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),this._getDefaultNotifications(S));0===S.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))};ba.prototype.updateSearchComponent=function(S,X){this.updateComponent("header:search:update:suggestions",
document.querySelector(".esri-header-inlineSearch"),this._searchJson(S,X))};ba.prototype.createAppLauncher=function(){var S=this;this.portal.token=this.userCookie.token;this.appLauncher=new x["default"](this.portal,this.userProperties);this.appLauncher.getApps({noStrings:!0}).then(function(X){if(X.primary.length||X.secondary.length)S.fixRelativeAppUrls(X.primary),S.fixRelativeAppUrls(X.secondary),S.updateAppLauncherComponent(X),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",
function(aa){S.appLauncher.setApps(JSON.stringify(aa.detail.icons),!0)}),E["default"].subscribe("appLauncher/app/updated",S._restartAppLauncherApp.bind(S)),E["default"].subscribe("appLauncher/app/deleted",S._restartAppLauncherApp.bind(S)),E["default"].subscribe("appLauncher/restart",S._restartAppLauncherApp.bind(S,!0)),E["default"].subscribe("appLauncher-license/refresh",S._refreshLicenseAndRestartAppLauncher.bind(S)),S.addLegacyClasses()})};ba.prototype.fixRelativeAppUrls=function(S){if(-1!==window.location.pathname.indexOf("/home/notebook/")){var X=
window.location.protocol+"//"+window.location.host+A["default"].getHomeAppContext()+"/";(S||[]).forEach(function(aa){aa.url=(aa.url||"").replace("../",X)})}};ba.prototype._restartAppLauncherApp=function(S){var X=this;this.appLauncher&&this.appLauncher.refreshApps(S).then(function(aa){return X.updateAppLauncherComponent(aa)})};ba.prototype._refreshLicenseAndRestartAppLauncher=function(){var S=this;this.appLauncher&&(k["default"].licenses={arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},
arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},this.appLauncher.fetchAndSetupLicenseInfo().then(function(){return S.appLauncher.refreshApps(!0)}).then(function(X){return S.updateAppLauncherComponent(X)}))};
ba.prototype._appsJson=function(S){return a.__assign(a.__assign({},{label:W["default"].appSwitcher.appLauncher,disableDragDrop:!1,loading:!S,text:{title:W["default"].appSwitcher.appLauncher,confirm:W["default"].appSwitcher.gotIt,dragAppsHere:W["default"].appSwitcher.dragAppsHere,intro:W["default"].appSwitcher.dragAndDropIntroText,removed:W["default"].appSwitcher.noLongerAvailable,removedMessage:W["default"].appSwitcher.removedApp,showMore:W["default"].appSwitcher.showMore}}),S)};ba.prototype._getAppsLoadingJson=
function(S){return{label:W["default"].appSwitcher.appLauncher,disableDragDrop:!1,loading:S}};ba.prototype._searchJson=function(S,X){var aa;return null!==(aa=null===X||void 0===X?void 0:X.results)&&void 0!==aa&&aa.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:S,category:"item",data:X.results})]}:{suggestions:[]}};ba.prototype._disabledSearchJson=function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:W["default"].search.error.wildCardSearchError,
secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+q["default"]["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}};ba.prototype._generateSuggestionsSection=function(S){return{hideHR:!0,links:S.data.map(this._generateSuggestionLink.bind(this,S.category))}};ba.prototype._generateSuggestionLink=function(S,X,aa){aa={text:X.title,secondary:this._getSecondaryOwnerText(S,X),href:""+this.relativePath+S+".html?id\x3d"+X.id,iconSize:"group"===S?"28":
"22"};S=X.icon||"group"!==S?{icon:X.icon}:{htmlIcon:this._getGroupIcon(X)};return a.__assign(a.__assign({},aa),S)};ba.prototype._getGroupIcon=function(S){return(new f["default"]({portal:this.portal,group:S,size:"28",letterSize:"1",tooltipClass:"",cssClasses:"org-member-card__group-title esri-header-inlineSearch-suggestion-icon"})).domNode.outerHTML};ba.prototype._getSecondaryOwnerText=function(S,X){var aa=X.owner;return"item"===S?C["default"].substitute(W["default"].siteHeader.itemTypeBy,{itemType:X.type,
owner:aa}):C["default"].substitute(W["default"].siteHeader.groupOwner,{owner:aa})};ba.prototype._generateSearchLink=function(S){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26"+S)};ba.prototype._constructSearchQ=function(S,X){var aa;return""+S+(X&&(null===(aa=h["default"].userInfo)||void 0===aa?0:aa.orgId)?" orgid:"+h["default"].userInfo.orgId:"")};ba.prototype._getSuggestFilters=function(){return(h["default"].self.id?'accountid:"'+h["default"].self.id+
'"':"")+(h["default"].viewQueries.none||"")};ba.prototype.fetchSuggestionResults=function(S){S=S.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return P["default"]({url:h["default"].restBaseUrl.replace("http://","https://")+"search/suggest",content:{suggest:S,filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})};ba.prototype.fetchItemSearchResults=function(S){return P["default"]({url:h["default"].restBaseUrl.replace("http://",
"https://")+"search",content:{q:this._constructSearchQ(S,!0),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ba.prototype.fetchGroupSearchResults=function(S){return P["default"]({url:h["default"].restBaseUrl.replace("http://","https://")+"/community/groups",content:{q:this._constructSearchQ(S,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};ba.prototype.mixinItemIcon=function(S){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=
h["default"].userRole);var X=new l["default"](a.__assign(a.__assign({},S),{portal:this.portal}));return a.__assign(a.__assign({},S),{type:X.displayName,icon:""+h["default"].baseUrl+X.svgIconUrl32})};ba.prototype.mixinGroupIcon=function(S){return a.__assign(a.__assign({},S),{icon:S.thumbnail?this._constructRestUrlWithToken("community/groups/"+S.id+"/info/"+S.thumbnail):null})};ba.prototype._constructRestUrlWithToken=function(S){return""+this.portal.portalUrl+S+(this.userCookie?"?token\x3d"+this.userCookie.token:
"")};ba.prototype._constructSecureBaseUrl=function(S){return""+h["default"].baseUrl.replace("http://","https://")+S};ba.prototype.buildNavLinks=function(S,X){var aa,M,da,ea,Z=!!h["default"].self,ka=window.location.pathname.toLowerCase(),va=Z&&(null===(aa=h["default"].self.portalProperties)||void 0===aa?void 0:aa.topNav)||{};aa=va.gallery;var Ea=va.map,Ga=va.scene;va=va.groups;Z=this.isOrgUser&&Z&&h["default"].userInfo.orgId===h["default"].self.id;var na=h["default"].notebookLandingEnabled?"notebookhome.html":
"notebook.html",ma=n["default"].determineMapViewerSetting(this.userProperties);return{myProfile:{href:this.relativePath+"user.html"},mySettings:{href:this.relativePath+"user.html#settings"},pricing:{href:this.relativePath+"../features/plans/pricing.html"},overview:{href:this.relativePath+"../features/features.html"},ArcGIS:{href:""+this.relativePath+(S.isPublicAccount()?"index.html":"../features/features.html")},groups:{show:!va||"all"===va||"members"===va&&Z,href:this.relativePath+"groups.html",
active:-1<ka.indexOf("groups.html")},myContent:{href:this.relativePath+"content.html",active:-1<ka.indexOf("content.html")},map:{show:k["default"].isLicensed("arcgisWebApps")&&(!Ea||"all"===Ea||"members"===Ea&&Z||"mapCreators"===Ea&&Z&&(null===(M=h["default"].userRole)||void 0===M?void 0:M.canCreateItem())),href:this.getMapViewerLink(ma)},help:{href:S._getHelpUrl.bind(S),openInNewTab:!0},gallery:{show:"noOne"!==aa&&(!aa||"all"===aa||"members"===aa&&Z)&&h["default"].self.id,href:this.relativePath+
"gallery.html",active:-1<ka.indexOf("gallery.html")},home_link:{show:!S.isPublicAccount(),href:this.relativePath+"index.html",active:-1<ka.indexOf("index.html")||0>ka.indexOf(".html")},scene:{show:X.sceneViewerEnabled&&k["default"].isLicensed("arcgisWebApps")&&(!Ga||"all"===Ga||"members"===Ga&&Z||"sceneCreators"===Ga&&Z&&(null===(da=h["default"].userRole)||void 0===da?void 0:da.canCreateItem())),href:this.relativePath+"webscene/viewer.html"},notebook:{show:m["default"].notebookServerConfigured()&&
(null===(ea=h["default"].userRole)||void 0===ea?void 0:ea.canCreateNotebooks()),href:this.relativePath+"notebook/"+na,openInNewTab:!h["default"].notebookLandingEnabled},myAccount:{show:S.canViewOrgUsers()&&S.orgPageRestrictionsDoNotApply(),href:this.relativePath+"organization.html",active:-1<ka.indexOf("organization.html")},marketplace:{show:!S.isPublicAccount(),href:S._getMarketplaceUrl.bind(S)},features:{show:S.isPublicAccount()&&!h["default"].self.isPortal,href:this.relativePath+"../features/features.html"},
esriCommunity:{show:S.showEsriLinks(),href:S._getEsriCommunityUrl.bind(S),openInNewTab:!0},myEsri:{show:S.showEsriLinks(),href:S._getMyEsriUrl.bind(S),openInNewTab:!0},arcgisBlog:{show:S.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:S.showEsriLinks(),href:S._getEsriTrainingUrl.bind(S),openInNewTab:!0},trialDownload:{show:S.subscriptionIsTrial(),href:S._getTrialDownloadUrl.bind(S),openInNewTab:!0}}};ba.prototype.filterAndCreateLinks=function(S,
X){var aa=this,M=[];S.forEach(function(da){var ea=aa.navLinks[da];!ea||"show"in ea&&!ea.show||M.push(aa.createGlobalNavLink(X[da]||da,ea))},this);return M};ba.prototype.createGlobalNavLink=function(S,X){return Object.create(this.GlobalNavLink).init(S,X)};ba.prototype.getUserProfileImage=function(S,X,aa){return X?h["default"].restBaseUrl.replace("http://","https://")+"community/users/"+S+"/info/"+X+"?token\x3d"+aa:this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")};ba.prototype.getUserCookie=
function(){return h["default"].userInfo||null};ba.prototype.getOrgSettings=function(){return A["default"].request({url:h["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}})};ba.prototype.getUserProperties=function(){var S,X=new I["default"];(null===(S=h["default"].userInfo)||void 0===S?0:S.username)?A["default"].request({url:h["default"].restBaseUrl+"community/users/"+h["default"].userInfo.username+"/properties",content:{f:"json"}}).then(function(aa){X.resolve(aa.properties)},function(){X.resolve(null)}):
X.resolve(null);return X};ba.prototype.setupSignInLink=function(){var S;if(this.hideSignInLink())return null===(S=document.querySelector(".esri-header-account-control--signin"))||void 0===S?void 0:S.classList.add("hide");F["default"](".esri-header-account-control--signin").on("click",function(X){X=h["default"].baseUrl+"signin.html?";-1<window.location.href.indexOf("item.html")?window.location.href=X+"useLandingPage\x3dfalse\x26returnUrl\x3d"+window.location.href:window.location.href=X+"useLandingPage\x3dtrue"})};
ba.prototype.setupSignOutAndAccountSwitcherLinks=function(){var S=this,X;h["default"].showAccountSwitcher&&(null===(X=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===X?void 0:X.classList.add("hide"));R["default"](document.querySelector(".esri-header-account-control-logout"),"click",function(aa){S._selectLogOut(aa)});R["default"](document.querySelector(".esri-header-account-control.-switch"),"click",function(){S._openSwitchAccounts()})};ba.prototype.setupSignOutLink=
function(){var S=this,X,aa=t["default"].getCookie("arcgis_auth");aa&&JSON.parse(aa);if(null===(X=this.portal)||void 0===X?0:X.isWebTierAuth)return document.querySelector(".esri-header-account-signin-control.-logout").classList.add("hide");R["default"](document.querySelector(".esri-header-account-signin-control.-logout"),"click",function(M){S._selectLogOut(M)})};ba.prototype.setupAccountSwitcherLink=function(){var S=this,X;if("showAccountSwitcher"in h["default"]&&!h["default"].showAccountSwitcher)return null===
(X=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===X?void 0:X.classList.add("hide");R["default"](document.querySelector(".esri-header-account-signin-control.-switch"),"click",function(aa){S._openSwitchAccounts()})};ba.prototype.setupInlineSearch=function(){var S=this;document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",u["default"](function(X){-1<X.detail.indexOf("*")?S.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),
S._disabledSearchJson()):2<=X.detail.length&&S.fetchSuggestionResults(X.detail).then(function(aa){aa.results=aa.results.map(S.mixinItemIcon.bind(S));b["default"].postToLiveRegion(C["default"].substitute(1===aa.results.length?W["default"].searchPage.contentSearchResultLabel:W["default"].searchPage.contentSearchResultsLabel,{resultcount:aa.results.length,keyword:X.detail}));S.updateSearchComponent(X.detail,aa)})},280))};ba.prototype.setupNotifications=function(S){var X=this;d["default"].fetchNotifications(S,
this.portal).then(this.updateNotificationsComponent.bind(this));document.addEventListener("header:click:notifications:dismiss",function(aa){d["default"].deleteNotifications(S,aa.detail).then(function(M){var da=M.filter(function(ea){return ea.success}).map(function(ea){return ea.notificationId});M=(X.defaultNavStructure.header.notifications.messages||[]).filter(function(ea){return 0>da.indexOf(ea.id)});X.updateNotificationsComponent(M)})})};ba.prototype._getDefaultNotifications=function(S){var X=W["default"].notifications;
return{label:X.label,dismissAllLabel:X.dismissAllLabel,dismissLabel:X.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:X.noNotifications},messages:S||[]}};ba.prototype._evalString=function(S,X){var aa=S.indexOf("}",X),M=S.substring(X+2,aa);return""+S.substring(0,X)+this[M]+S.substring(aa+1,S.length)};
ba.prototype._constructContactUsUrl=function(S){var X=h["default"].portalName||"ArcGIS.com",aa=encodeURIComponent(window.location.href);return"mailto:"+S.email+"?subject\x3dA comment about "+X+"\x26body\x3dI have the following comment about the "+X+" Web site. %0AReferring page: "+aa+" %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"};ba.prototype._constructReportAbuseUrl=function(S){var X=encodeURIComponent(window.location.href);
return"mailto:"+S.email+"?subject\x3dConcerns about an item\x26body\x3dI have concerns about the following. %0AReferring page: "+X+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)"};ba.prototype._selectLogOut=function(S){S.preventDefault();h["default"].self.isPortal?this._standardLogOut():this._agolLogOut()};ba.prototype._agolLogOut=
function(){t["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var S=(h["default"].isDebug?h["default"].baseUrl:h["default"].baseUrl.replace("http://","https://"))+"pages/Account/manage_accounts.html#client_id\x3d"+(this.getAppClientId()+"\x26signout\x3dtrue");window.location.href=S};ba.prototype._standardLogOut=function(){t["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var S=A["default"].getHttpUrl()+"index.html";"private"===h["default"].self.access&&(S=""+A["default"].getSecureUrl()+
h["default"].signin);"public"===h["default"].self.access&&(S=(h["default"].self.allSSL||this.usePortalSSL()?A["default"].getSecureUrl():A["default"].getHttpUrl())+"index.html");y["default"].signout(S)};ba.prototype._openSwitchAccounts=function(){window.open(h["default"].baseUrl+"pages/Account/manage_accounts.html#client_id\x3darcgisonline","_blank").focus()};ba.prototype.relativeToExplicitUrl=function(S){h["default"].cdnServerUrl=H["default"].baseUrl.substring(0,H["default"].baseUrl.indexOf("/js/"));
return h["default"].cdnServerUrl.lastIndexOf("/")===h["default"].cdnServerUrl.length-1?""+h["default"].cdnServerUrl+S:h["default"].cdnServerUrl+"/"+S};ba.prototype._getHelpUrl=function(){var S;return h["default"].self.isPortal?this._getPortalHelpUrl():(null===(S=h["default"].self)||void 0===S?void 0:S.helpBase)||"support.html"};ba.prototype._getPortalHelpUrl=function(){if(-1<h["default"].self.helpBase.indexOf("enterprise.arcgis.com"))return h["default"].self.helpBase+"portal/";var S=h["default"].self.helpBase;
"ArcGISEnterpriseOnKubernetes"!==(h["default"].self||{}).portalDeploymentType&&(S+="portal/");return h["default"].self.allSSL||"https:"===window.location.protocol||this.usePortalSSL()||"7443"===window.location.port?""+A["default"].getSecureUrl(window.location.protocol+"//"+window.location.host)+S:S};ba.prototype._getEsriTrainingUrl=function(){return this.generateEsriLoginHandlerUrl(window.location.protocol+"//www.esri.com/training/arcgis-online-training")};ba.prototype._getMyEsriUrl=function(){return this.generateEsriLoginHandlerUrl(h["default"].myEsriLink)};
ba.prototype._getEsriCommunityUrl=function(){return this.generateEsriLoginHandlerUrl(h["default"].esriCommunityLink)};ba.prototype._getMarketplaceUrl=function(){var S=this.getDevEnviroment();return window.location.protocol+"//marketplace"+(S?S+"ext":"")+".arcgis.com"};ba.prototype._getTrialDownloadUrl=function(){var S,X,aa={"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},M=((null===(S=h["default"].userInfo)||void 0===S?void 0:S.culture)||(null===(X=h["default"].self)||void 0===X?void 0:X.culture)||
H["default"].locale||"en").toLowerCase();S={nl:1}[M]?"en":M in aa?M:M.split("-")[0].toLowerCase();return h["default"].learnArcGIS+"/"+S+"/trial"};ba.prototype.generateEsriLoginHandlerUrl=function(S){var X=this.getDevEnviroment();X="https://accounts"+(X?"dev"===X?"-dev":"-stg":"")+".esri.com/";var aa="\x26authBaseUrl\x3d"+A["default"].getSecureUrl(h["default"].restBaseUrl.replace("/sharing/rest/",""));return X+"LoginHandler/switchuser?username\x3d"+(h["default"].userInfo.username+"\x26redirect_uri\x3d"+
S+aa)};ba.prototype.getDevEnviroment=function(){var S=h["default"].self.portalHostname;return-1!==S.indexOf("dev")?"dev":-1!==S.indexOf("qa")?"qa":null};ba.prototype._getOriginOfUrl=function(S){var X=window.location;S=S?S+":":X.protocol;return S+"//"+X.hostname+(X.port?":"+X.port:"")+"/"};ba.prototype.hideSignInLink=function(){return h["default"].self.isPortal&&"singletenant"===h["default"].self.portalMode&&h["default"].self.isWebTierAuth&&"7443"!==window.location.port};ba.prototype.showProductLinks=
function(){var S=h["default"].self,X=S.access,aa=S.isPortal;return!S.id&&!X&&!aa};ba.prototype.isPublicAccount=function(){var S=h["default"].self,X=S.isPortal;return!S.urlKey&&!X&&!!h["default"].userInfo};ba.prototype.canViewOrgUsers=function(){var S;return null===(S=h["default"].userRole)||void 0===S?void 0:S.canViewOrgUsers()};ba.prototype.orgPageRestrictionsDoNotApply=function(){var S=h["default"].userInfo,X=!S.accountId;S=S.role&&("org_admin"===S.role||"account_admin"===S.role)&&!S.roleId;return!h["default"].restrictOrganizationPageToAdmin||
X||S};ba.prototype.showEsriLinks=function(){var S;return!h["default"].self.isPortal&&"both"===(null===(S=h["default"].userInfo)||void 0===S?void 0:S.userType)};ba.prototype.subscriptionIsTrial=function(){return!h["default"].self.isPortal&&h["default"].self.subscriptionInfo&&("Trial"===h["default"].self.subscriptionInfo.type||"Trial Press"===h["default"].self.subscriptionInfo.type)};ba.prototype.usePortalSSL=function(){var S;return(!1===h["default"].isMultiTenant||A["default"].isPortal())&&(null===
(S=h["default"].self)||void 0===S?void 0:S.portalHostname)&&!h["default"].self.portalHostname.match(/:7080\//)&&80!==h["default"].self.httpPort&&443!==h["default"].self.httpsPort&&"https:"===window.location.protocol};return ba}();B["default"]=D})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(D,B){return function(a){function c(g){if(h[g])return h[g].exports;var e=h[g]={i:g,l:!1,exports:{}};return a[g].call(e.exports,e,e.exports,c),e.l=!0,
e.exports}var h={};return c.m=a,c.c=h,c.d=function(g,e,l){c.o(g,e)||Object.defineProperty(g,e,{enumerable:!0,get:l})},c.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"});Object.defineProperty(g,"__esModule",{value:!0})},c.t=function(g,e){if((1&e&&(g=c(g)),8&e)||4&e&&"object"==typeof g&&g&&g.__esModule)return g;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:g}),2&e&&"string"!=typeof g)for(var r in g)c.d(l,
r,function(k){return g[k]}.bind(null,r));return l},c.n=function(g){var e=g&&g.__esModule?function(){return g["default"]}:function(){return g};return c.d(e,"a",e),e},c.o=function(g,e){return Object.prototype.hasOwnProperty.call(g,e)},c.p="",c(c.s=960)}({0:function(a,c,h){function g(q,m){function n(){this.constructor=q}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(q,m);q.prototype=null===m?Object.create(m):(n.prototype=m.prototype,
new n)}function e(q,m){var n={},t;for(t in q)Object.prototype.hasOwnProperty.call(q,t)&&0>m.indexOf(t)&&(n[t]=q[t]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(t=Object.getOwnPropertySymbols(q);z<t.length;z++)0>m.indexOf(t[z])&&Object.prototype.propertyIsEnumerable.call(q,t[z])&&(n[t[z]]=q[t[z]])}return n}function l(q,m,n,t){var z,w=arguments.length,y=3>w?m:null===t?t=Object.getOwnPropertyDescriptor(m,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=
Reflect.decorate(q,m,n,t);else for(var x=q.length-1;0<=x;x--)(z=q[x])&&(y=(3>w?z(y):3<w?z(m,n,y):z(m,n))||y);return 3<w&&y&&Object.defineProperty(m,n,y),y}function r(q,m,n,t){return new (n||(n=Promise))(function(z,w){function y(v){try{A(t.next(v))}catch(u){w(u)}}function x(v){try{A(t["throw"](v))}catch(u){w(u)}}function A(v){var u;v.done?z(v.value):(u=v.value,u instanceof n?u:new n(function(C){C(u)})).then(y,x)}A((t=t.apply(q,m||[])).next())})}function k(q,m){function n(A){return function(v){return function(u){if(t)throw new TypeError("Generator is already executing.");
for(;x;)try{if(t=1,z&&(w=2&u[0]?z["return"]:u[0]?z["throw"]||((w=z["return"])&&w.call(z),0):z.next)&&!(w=w.call(z,u[1])).done)return w;switch(z=0,w&&(u=[2&u[0],w.value]),u[0]){case 0:case 1:w=u;break;case 4:return x.label++,{value:u[1],done:!1};case 5:x.label++;z=u[1];u=[0];continue;case 7:u=x.ops.pop();x.trys.pop();continue;default:if(!(w=x.trys,(w=0<w.length&&w[w.length-1])||6!==u[0]&&2!==u[0])){x=0;continue}if(3===u[0]&&(!w||u[1]>w[0]&&u[1]<w[3]))x.label=u[1];else if(6===u[0]&&x.label<w[1])x.label=
w[1],w=u;else if(w&&x.label<w[2])x.label=w[2],x.ops.push(u);else{w[2]&&x.ops.pop();x.trys.pop();continue}}u=m.call(q,x)}catch(C){u=[6,C],z=0}finally{t=w=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([A,v])}}var t,z,w,y,x={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return y={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y}function f(q,m){for(var n=0,t=m.length,z=q.length;n<t;n++,z++)q[z]=
m[n];return q}h.d(c,"d",function(){return g});h.d(c,"a",function(){return d});h.d(c,"f",function(){return e});h.d(c,"c",function(){return l});h.d(c,"b",function(){return r});h.d(c,"e",function(){return k});h.d(c,"g",function(){return f});var b=function(q,m){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var z in t)Object.prototype.hasOwnProperty.call(t,z)&&(n[z]=t[z])})(q,m)},d=function(){return(d=Object.assign||function(q){for(var m,
n=1,t=arguments.length;n<t;n++)for(var z in m=arguments[n])Object.prototype.hasOwnProperty.call(m,z)&&(q[z]=m[z]);return q}).apply(this,arguments)};Object.create;Object.create},164:function(a,c){var h=function(){return this}();try{h=h||(new Function("return this"))()}catch(g){"object"==typeof window&&(h=window)}a.exports=h},17:function(a,c){a.exports=D},186:function(a,c){function h(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");}function e(w){if(d===
setTimeout)return setTimeout(w,0);if((d===h||!d)&&setTimeout)return d=setTimeout,setTimeout(w,0);try{return d(w,0)}catch(y){try{return d.call(null,w,0)}catch(x){return d.call(this,w,0)}}}function l(){t&&m&&(t=!1,m.length?n=m.concat(n):z=-1,n.length&&r())}function r(){if(!t){var w=e(l);t=!0;for(var y=n.length;y;){m=n;for(n=[];++z<y;)m&&m[z].run();z=-1;y=n.length}m=null;t=!1;(function(x){if(q===clearTimeout)return clearTimeout(x);if((q===g||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(x);try{q(x)}catch(A){try{return q.call(null,
x)}catch(v){return q.call(this,x)}}})(w)}}function k(w,y){this.fun=w;this.array=y}function f(){}var b=a.exports={};try{var d="function"==typeof setTimeout?setTimeout:h}catch(w){d=h}try{var q="function"==typeof clearTimeout?clearTimeout:g}catch(w){q=g}!0;var m,n=[],t=!1,z=-1;b.nextTick=function(w){var y=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)y[x-1]=arguments[x];n.push(new k(w,y));1!==n.length||t||e(r)};k.prototype.run=function(){this.fun.apply(null,this.array)};
b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=f;b.addListener=f;b.once=f;b.off=f;b.removeListener=f;b.removeAllListeners=f;b.emit=f;b.prependListener=f;b.prependOnceListener=f;b.listeners=function(w){return[]};b.binding=function(w){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(w){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},29:function(a,c,h){(function(g,e){a.exports=function(){function l(){var X=
setTimeout;return function(){return X(r,1)}}function r(){for(var X=0;X<v;X+=2)(0,I[X])(I[X+1]),I[X]=void 0,I[X+1]=void 0;v=0}function k(X,aa){var M=this,da=new this.constructor(b);void 0===da[Q]&&x(da);var ea=M._state;if(ea){var Z=arguments[ea-1];E(function(){return y(ea,da,Z,M._result)})}else z(M,da,X,aa);return da}function f(X){if(X&&"object"==typeof X&&X.constructor===this)return X;var aa=new this(b);return q(aa,X),aa}function b(){}function d(X,aa,M){aa.constructor===X.constructor&&M===k&&aa.constructor.resolve===
f?function(da,ea){1===ea._state?n(da,ea._result):2===ea._state?t(da,ea._result):z(ea,void 0,function(Z){return q(da,Z)},function(Z){return t(da,Z)})}(X,aa):void 0===M?n(X,aa):"function"==typeof M?function(da,ea,Z){E(function(ka){var va=!1,Ea=function(Ga,na,ma,ya){try{Ga.call(na,ma,ya)}catch(za){return za}}(Z,ea,function(Ga){va||(va=!0,ea!==Ga?q(ka,Ga):n(ka,Ga))},function(Ga){va||(va=!0,t(ka,Ga))},ka._label);!va&&Ea&&(va=!0,t(ka,Ea))},da)}(X,aa,M):n(X,aa)}function q(X,aa){if(X===aa)t(X,new TypeError("You cannot resolve a promise with itself"));
else if(da=typeof(M=aa),null===M||"object"!==da&&"function"!==da)n(X,aa);else{M=void 0;try{M=aa.then}catch(ea){return void t(X,ea)}d(X,aa,M)}var M,da}function m(X){X._onerror&&X._onerror(X._result);w(X)}function n(X,aa){void 0===X._state&&(X._result=aa,X._state=1,0!==X._subscribers.length&&E(w,X))}function t(X,aa){void 0===X._state&&(X._state=2,X._result=aa,E(m,X))}function z(X,aa,M,da){var ea=X._subscribers,Z=ea.length;X._onerror=null;ea[Z]=aa;ea[Z+1]=M;ea[Z+2]=da;0===Z&&X._state&&E(w,X)}function w(X){var aa=
X._subscribers,M=X._state;if(0!==aa.length){for(var da=void 0,ea=void 0,Z=X._result,ka=0;ka<aa.length;ka+=3)da=aa[ka],ea=aa[ka+M],da?y(M,da,ea,Z):ea(Z);X._subscribers.length=0}}function y(X,aa,M,da){var ea="function"==typeof M,Z=void 0,ka=void 0,va=!0;if(ea){try{Z=M(da)}catch(Ea){va=!1,ka=Ea}if(aa===Z)return void t(aa,new TypeError("A promises callback cannot return that same promise."))}else Z=da;void 0!==aa._state||(ea&&va?q(aa,Z):!1===va?t(aa,ka):1===X?n(aa,Z):2===X&&t(aa,Z))}function x(X){X[Q]=
W++;X._state=void 0;X._result=void 0;X._subscribers=[]}var A=Array.isArray?Array.isArray:function(X){return"[object Array]"===Object.prototype.toString.call(X)},v=0,u=void 0,C=void 0,E=function(X,aa){I[v]=X;I[v+1]=aa;2===(v+=2)&&(C?C(r):K())},F="undefined"!=typeof window?window:void 0,G=F||{};G=G.MutationObserver||G.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==g&&"[object process]"==={}.toString.call(g),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&
"undefined"!=typeof MessageChannel,I=Array(1E3),R,O,P,L,K=void 0;H?K=function(){return g.nextTick(r)}:G?(O=0,P=new G(r),L=document.createTextNode(""),P.observe(L,{characterData:!0}),K=function(){L.data=O=++O%2}):J?((R=new MessageChannel).port1.onmessage=r,K=function(){return R.port2.postMessage(0)}):K=void 0===F?function(){try{var X=Function("return this")().require("vertx");return void 0!==(u=X.runOnLoop||X.runOnContext)?function(){u(r)}:l()}catch(aa){return l()}}():l();var Q=Math.random().toString(36).substring(2),
W=0,ba=function(){function X(aa,M){this._instanceConstructor=aa;this.promise=new aa(b);this.promise[Q]||x(this.promise);A(M)?(this.length=M.length,this._remaining=M.length,this._result=Array(this.length),0===this.length?n(this.promise,this._result):(this.length=this.length||0,this._enumerate(M),0===this._remaining&&n(this.promise,this._result))):t(this.promise,Error("Array Methods must be provided an Array"))}return X.prototype._enumerate=function(aa){for(var M=0;void 0===this._state&&M<aa.length;M++)this._eachEntry(aa[M],
M)},X.prototype._eachEntry=function(aa,M){var da=this._instanceConstructor,ea=da.resolve;if(ea===f){var Z=ea=void 0,ka=!1;try{ea=aa.then}catch(va){ka=!0,Z=va}ea===k&&void 0!==aa._state?this._settledAt(aa._state,M,aa._result):"function"!=typeof ea?(this._remaining--,this._result[M]=aa):da===S?(da=new da(b),ka?t(da,Z):d(da,aa,ea),this._willSettleAt(da,M)):this._willSettleAt(new da(function(va){return va(aa)}),M)}else this._willSettleAt(ea(aa),M)},X.prototype._settledAt=function(aa,M,da){var ea=this.promise;
void 0===ea._state&&(this._remaining--,2===aa?t(ea,da):this._result[M]=da);0===this._remaining&&n(ea,this._result)},X.prototype._willSettleAt=function(aa,M){var da=this;z(aa,void 0,function(ea){return da._settledAt(1,M,ea)},function(ea){return da._settledAt(2,M,ea)})},X}(),S=function(){function X(aa){this[Q]=W++;this._result=this._state=void 0;this._subscribers=[];if(b!==aa){if("function"!=typeof aa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof X)(function(M,da){try{da(function(ea){q(M,ea)},function(ea){t(M,ea)})}catch(ea){t(M,ea)}})(this,aa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return X.prototype["catch"]=function(aa){return this.then(null,aa)},X.prototype["finally"]=function(aa){var M=this.constructor;return"function"==typeof aa?this.then(function(da){return M.resolve(aa()).then(function(){return da})},function(da){return M.resolve(aa()).then(function(){throw da;
})}):this.then(aa,aa)},X}();return S.prototype.then=k,S.all=function(X){return(new ba(this,X)).promise},S.race=function(X){var aa=this;return A(X)?new aa(function(M,da){for(var ea=X.length,Z=0;Z<ea;Z++)aa.resolve(X[Z]).then(M,da)}):new aa(function(M,da){return da(new TypeError("You must pass an array to race."))})},S.resolve=f,S.reject=function(X){var aa=new this(b);return t(aa,X),aa},S._setScheduler=function(X){C=X},S._setAsap=function(X){E=X},S._asap=E,S.polyfill=function(){var X=void 0;if(void 0!==
e)X=e;else if("undefined"!=typeof self)X=self;else try{X=Function("return this")()}catch(da){throw Error("polyfill failed because global object is unavailable in this environment");}var aa=X.Promise;if(aa){var M=null;try{M=Object.prototype.toString.call(aa.resolve())}catch(da){}if("[object Promise]"===M&&!aa.cast)return}X.Promise=S},S.Promise=S,S}()}).call(this,h(186),h(164))},32:function(a,c,h){function g(I){return I.reduce(function(R,O){return O&&O.relatedItems?R.concat(O.relatedItems.map(function(P){return P})):
R},[])}function e(I,R,O){return I(R,{query:Object(k.a)({f:"json"},O)}).then(function(P){return P.data})}function l(I,R){void 0===R&&(R=100);for(var O=[],P=0;P<Math.ceil(I.length/R);P++)O.push(I.slice(P*R,(P+1)*R));return O.filter(function(L){return 0<L.length})}function r(I){var R=I.itemIds,O=I.request,P=I.groupIds,L=I.portal.restUrl+"/content/itemsgroups";return new f.Promise(function(K,Q){O(L,{method:"get",query:{f:"json",items:R,groups:P}}).then(function(W){K(W.data)},Q)})}h.d(c,"u",function(){return b});
h.d(c,"n",function(){return d});h.d(c,"h",function(){return q});h.d(c,"e",function(){return m});h.d(c,"f",function(){return n});h.d(c,"j",function(){return t});h.d(c,"o",function(){return z});h.d(c,"l",function(){return w});h.d(c,"k",function(){return y});h.d(c,"m",function(){return x});h.d(c,"c",function(){return A});h.d(c,"d",function(){return v});h.d(c,"r",function(){return u});h.d(c,"s",function(){return C});h.d(c,"t",function(){return E});h.d(c,"g",function(){return F});h.d(c,"p",function(){return G});
h.d(c,"q",function(){return H});h.d(c,"v",function(){return e});h.d(c,"a",function(){return l});h.d(c,"i",function(){return r});h.d(c,"b",function(){return J});var k=h(0),f=h(29),b=function(I){return function(R,O){return I({url:R,content:O.query},{usePost:"post"===O.method}).then(function(P){return{data:P}})}},d=function(I,R,O){return e(I,R.restUrl+"/portals/self",{culture:O,"default":!0})},q=function(I,R,O){return e(I,R.restUrl+"/content/items/"+O+"/data")},m=function(I,R,O,P){return e(I,R.restUrl+
"/community/groups",Object(k.a)({q:O},P))},n=function(I,R,O){return e(I,R.restUrl+"/community/groups/"+O+"/categorySchema")},t=function(I,R,O){return e(I,R.restUrl+"/portals/"+(O||R.id)+"/categorySchema")},z=function(I,R){return e(I,R.restUrl+"/portals/"+R.id+"/servers")},w=function(I,R,O,P){return I(R.restUrl+"/portals/"+(O||R.id)+"/collaborationsSummary",P)},y=function(I,R,O,P){return I(R.restUrl+"/portals/"+(O||R.id)+"/collaboratedItems",P)},x=function(I,R,O){return e(I,location.protocol+"//"+
R.portalHostname+"/sharing/rest/portals/"+(O||"self"))},A=function(I,R,O){return I(R.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+R.id+" AND access:public",num:100,start:O||1,sortField:"title",sortOrder:"asc"}}).then(function(P){return P.data.total>P.data.start+P.data.num?A(I,R,P.data.start+P.data.num).then(function(L){return Object(k.a)(Object(k.a)({},L),{data:Object(k.a)(Object(k.a)({},L.data),{results:P.data.results.concat(L.data.results)})})}):P})},v=function(I,R,O,P){return I(R.restUrl+
"/community/users/"+O+"/provisionedListings",{query:{f:"json",num:100,start:P||1}}).then(function(L){var K=f.Promise.all(L.data.provisionedListings.filter(function(W){return W.itemId}).map(function(W){return(new f.Promise(function(ba,S){I(R.restUrl+"/content/items/"+W.itemId,{method:"get",query:{f:"json"}}).then(function(X){ba(X.data)},S)}))["catch"](function(ba){return 0})})),Q=L.data.provisionedListings.map(function(W){return e(I,R.restUrl+"/content/items/"+(W.id||W.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(ba){return ba},
function(ba){})});return L.data.total>L.data.start+L.data.num?v(I,R,O,L.data.start+L.data.num).then(function(W){return f.Promise.all([K].concat(Q)).then(function(ba){return ba[0].results.concat(g(ba.slice(1))).concat(W)})}):f.Promise.all([K].concat(Q)).then(function(W){return W[0].filter(function(ba){return void 0!==ba}).concat(g(W.slice(1)))})})},u=function(I,R,O){return e(I,R.restUrl+"/community/users/"+(O||R.user.username))},C=function(I,R,O){return e(I,R.restUrl+"/content/users/"+(O||R.user.username),
{num:1})},E=function(I,R,O){return e(I,R.restUrl+"/content/groups/"+O)},F=function(I,R,O){return e(I,R.restUrl+"/community/groups",O)},G=function(I,R){return e(I,R.restUrl+"/portals/self/settings")},H=function(I,R){return e(I,R.restUrl+"/portals/self/trustedOrgs",{num:100})},J=function(I,R){return void 0===R&&(R=","),I.map(function(O){return O.id}).join(R)}},695:function(a,c){a.exports=B},960:function(a,c,h){h.r(c);h.d(c,"InfoBanner",function(){return k});var g=h(0),e=h(17);a=h(695);var l=h.n(a),
r=h(32),k=function(){function f(b){var d=this;this.options=b;var q=b.bottomContainer;(this.topContainer=b.topContainer,this.bottomContainer=q,b.bannerConfig)?this.setupBanners(b.bannerConfig):b.request&&b.portal&&b.apiVersion&&(q=4===b.apiVersion?b.request:this.shimmedRequest.bind(this),b=4===b.apiVersion?b.portal:Object(g.a)(Object(g.a)({},b.portal),{restUrl:b.portal.portalUrl.slice(0,-1),credential:b.portal.user&&b.portal.user.credential?b.portal.user.credential:void 0}),Object(r.p)(q,b).then(function(m){d.setupBanners(m.informationalBanner)}))}
return f.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&this.bottomContainer.parentNode.removeChild(this.bottomContainer))},f.prototype.setupBanners=function(b){b&&b.enabled&&(this.topContainer&&
(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",b)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",b)))},f.prototype.createProjector=function(b,d,q,m){var n={key:d,position:q,bannerConfig:m};return this.store=Object(e.createStore)(function(t,z){z.type;z.payload;return Object(g.a)({},n)},n),Object(e.createProjector)(this.store,function(t){return t(l.a,Object(g.a)({},n))},b)},f.prototype.shimmedRequest=
function(b,d){var q=Object(g.a)({},d.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<b.indexOf(this.options.portal.restUrl)&&(q.token=this.options.portal.user.credential.token),this.options.request({url:b,content:d.query},{usePost:"post"===d.method}).then(function(m){return{data:m}})},f}()}})})},"arcgis-components/Component":function(){define(function(){return function(D){function B(c){if(a[c])return a[c].exports;var h=a[c]={i:c,l:!1,exports:{}};
return D[c].call(h.exports,h,h.exports,B),h.l=!0,h.exports}var a={};return B.m=D,B.c=a,B.d=function(c,h,g){B.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:g})},B.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},B.t=function(c,h){if((1&h&&(c=B(c)),8&h)||4&h&&"object"==typeof c&&c&&c.__esModule)return c;var g=Object.create(null);if(B.r(g),Object.defineProperty(g,"default",
{enumerable:!0,value:c}),2&h&&"string"!=typeof c)for(var e in c)B.d(g,e,function(l){return c[l]}.bind(null,e));return g},B.n=function(c){var h=c&&c.__esModule?function(){return c["default"]}:function(){return c};return B.d(h,"a",h),h},B.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},B.p="",B(B.s=790)}({0:function(D,B,a){function c(b,d){function q(){this.constructor=b}if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");
k(b,d);b.prototype=null===d?Object.create(d):(q.prototype=d.prototype,new q)}function h(b,d){var q={},m;for(m in b)Object.prototype.hasOwnProperty.call(b,m)&&0>d.indexOf(m)&&(q[m]=b[m]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(m=Object.getOwnPropertySymbols(b);n<m.length;n++)0>d.indexOf(m[n])&&Object.prototype.propertyIsEnumerable.call(b,m[n])&&(q[m[n]]=b[m[n]])}return q}function g(b,d,q,m){var n,t=arguments.length,z=3>t?d:null===m?m=Object.getOwnPropertyDescriptor(d,
q):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(b,d,q,m);else for(var w=b.length-1;0<=w;w--)(n=b[w])&&(z=(3>t?n(z):3<t?n(d,q,z):n(d,q))||z);return 3<t&&z&&Object.defineProperty(d,q,z),z}function e(b,d,q,m){return new (q||(q=Promise))(function(n,t){function z(x){try{y(m.next(x))}catch(A){t(A)}}function w(x){try{y(m["throw"](x))}catch(A){t(A)}}function y(x){var A;x.done?n(x.value):(A=x.value,A instanceof q?A:new q(function(v){v(A)})).then(z,w)}y((m=m.apply(b,
d||[])).next())})}function l(b,d){function q(y){return function(x){return function(A){if(m)throw new TypeError("Generator is already executing.");for(;w;)try{if(m=1,n&&(t=2&A[0]?n["return"]:A[0]?n["throw"]||((t=n["return"])&&t.call(n),0):n.next)&&!(t=t.call(n,A[1])).done)return t;switch(n=0,t&&(A=[2&A[0],t.value]),A[0]){case 0:case 1:t=A;break;case 4:return w.label++,{value:A[1],done:!1};case 5:w.label++;n=A[1];A=[0];continue;case 7:A=w.ops.pop();w.trys.pop();continue;default:if(!(t=w.trys,(t=0<t.length&&
t[t.length-1])||6!==A[0]&&2!==A[0])){w=0;continue}if(3===A[0]&&(!t||A[1]>t[0]&&A[1]<t[3]))w.label=A[1];else if(6===A[0]&&w.label<t[1])w.label=t[1],t=A;else if(t&&w.label<t[2])w.label=t[2],w.ops.push(A);else{t[2]&&w.ops.pop();w.trys.pop();continue}}A=d.call(b,w)}catch(v){A=[6,v],n=0}finally{m=t=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([y,x])}}var m,n,t,z,w={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return z={next:q(0),"throw":q(1),"return":q(2)},
"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}function r(b,d){for(var q=0,m=d.length,n=b.length;q<m;q++,n++)b[n]=d[q];return b}a.d(B,"d",function(){return c});a.d(B,"a",function(){return f});a.d(B,"f",function(){return h});a.d(B,"c",function(){return g});a.d(B,"b",function(){return e});a.d(B,"e",function(){return l});a.d(B,"g",function(){return r});var k=function(b,d){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,m){q.__proto__=m}||function(q,
m){for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(q[n]=m[n])})(b,d)},f=function(){return(f=Object.assign||function(b){for(var d,q=1,m=arguments.length;q<m;q++)for(var n in d=arguments[q])Object.prototype.hasOwnProperty.call(d,n)&&(b[n]=d[n]);return b}).apply(this,arguments)};Object.create;Object.create},16:function(D,B,a){function c(g){return function l(){for(var r=this,k=[],f=0;f<arguments.length;f++)k[f]=arguments[f];return k.length>=g.length?g.call.apply(g,Object(h.g)([this],k)):function(){for(var b=
[],d=0;d<arguments.length;d++)b[d]=arguments[d];return l.call.apply(l,Object(h.g)(Object(h.g)([r],k),b))}}}a.d(B,"a",function(){return c});var h=a(0)},429:function(D,B,a){!function(c){var h=[],g=function(E,F){var G={};return Object.keys(E).forEach(function(H){G[H]=E[H]}),F&&Object.keys(F).forEach(function(H){G[H]=F[H]}),G},e=function(E,F){return E.vnodeSelector===F.vnodeSelector&&(E.properties&&F.properties?E.properties.key===F.properties.key&&E.properties.bind===F.properties.bind:!E.properties&&
!F.properties)},l=function(E){if("string"!=typeof E)throw Error("Style values must be strings");},r=function(E,F,G,H){var J=E[F];if(""!==J.vnodeSelector){var I=J.properties;if(!(I&&(void 0===I.key?I.bind:I.key)))for(I=0;I<E.length;I++)if(I!==F&&e(E[I],J))throw Error(G.vnodeSelector+" had a "+J.vnodeSelector+" child "+("added"===H?H:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},k=[],f=!1,b=function(E){(E.children||[]).forEach(b);
E.properties&&E.properties.afterRemoved&&E.properties.afterRemoved.apply(E.properties.bind||E.properties,[E.domNode])},d=function(){f=!1;k.forEach(b);k.length=0},q=function(E){k.push(E);f||(f=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(d,{timeout:16}):setTimeout(d,16))},m=function(E){var F=E.domNode;if(E.properties){var G=E.properties.exitAnimation;if(G)return F.style.pointerEvents="none",void G(F,function(){F.parentNode&&(F.parentNode.removeChild(F),q(E))},
E.properties)}F.parentNode&&(F.parentNode.removeChild(F),q(E))},n=function(E,F,G){!function(H,J,I){if(J)for(var R=0;R<J.length;R++)t(J[R],H,void 0,I)}(E,F.children,G);F.text&&(E.textContent=F.text);(function(H,J,I){if(J)for(var R=I.eventHandlerInterceptor,O=Object.keys(J),P=O.length,L=function(Q){var W,ba=O[Q];Q=J[ba];if("className"===ba)throw Error('Property "className" is not supported, use "class".');if("class"===ba)z(H,Q,!0);else if("classes"===ba){var S=Object.keys(Q),X=S.length;for(ba=0;ba<
X;ba++){var aa=S[ba];Q[aa]&&H.classList.add(aa)}}else if("styles"===ba)for(S=Object.keys(Q),X=S.length,ba=0;ba<X;ba++){aa=S[ba];var M=Q[aa];M&&(l(M),I.styleApplyer(H,aa,M))}else"key"!==ba&&null!=Q&&(S=typeof Q,"function"===S?(0===ba.lastIndexOf("on",0)&&(R&&(Q=R(ba,Q,H,J)),"oninput"===ba&&(W=Q,Q=function(da){W.apply(this,[da]);da.target["oninput-value"]=da.target.value})),H[ba]=Q):"http://www.w3.org/2000/svg"===I.namespace?"href"===ba?H.setAttributeNS("http://www.w3.org/1999/xlink",ba,Q):H.setAttribute(ba,
Q):"string"===S&&"value"!==ba&&"innerHTML"!==ba?H.setAttribute(ba,Q):H[ba]=Q)},K=0;K<P;K++)L(K)})(E,F.properties,G);F.properties&&F.properties.afterCreate&&F.properties.afterCreate.apply(F.properties.bind||F.properties,[E,G,F.vnodeSelector,F.properties,F.children])},t=function(E,F,G,H){var J=0,I=E.vnodeSelector,R=F.ownerDocument;if(""===I){var O=E.domNode=R.createTextNode(E.text);void 0!==G?F.insertBefore(O,G):F.appendChild(O)}else{for(var P=0;P<=I.length;++P){var L=I.charAt(P);if(P===I.length||"."===
L||"#"===L)L=I.charAt(J-1),J=I.slice(J,P),"."===L?O.classList.add(J):"#"===L?O.id=J:("svg"===J&&(H=g(H,{namespace:"http://www.w3.org/2000/svg"})),void 0!==H.namespace?O=E.domNode=R.createElementNS(H.namespace,J):(O=E.domNode=E.domNode||R.createElement(J),"input"===J&&E.properties&&void 0!==E.properties.type&&O.setAttribute("type",E.properties.type)),void 0!==G?F.insertBefore(O,G):O.parentNode!==F&&F.appendChild(O)),J=P+1}n(O,E,H)}},z=function(E,F,G){F&&F.split(" ").forEach(function(H){H&&E.classList.toggle(H,
G)})};var w=function(E,F,G){var H=E.domNode,J=!1;if(E===F)return!1;var I=!1;if(""===F.vnodeSelector){if(F.text!==E.text)return E=H.ownerDocument.createTextNode(F.text),H.parentNode.replaceChild(E,H),F.domNode=E,J=!0;F.domNode=H}else 0===F.vnodeSelector.lastIndexOf("svg",0)&&(G=g(G,{namespace:"http://www.w3.org/2000/svg"})),E.text!==F.text&&(I=!0,void 0===F.text?H.removeChild(H.firstChild):H.textContent=F.text),F.domNode=H,I=function(R,O,P,L,K){if(P===L)return!1;L=L||h;for(var Q,W=(P=P||h).length,
ba=L.length,S=Q=0,X=!1;S<ba;){var aa=Q<W?P[Q]:void 0,M=L[S];if(void 0!==aa&&e(aa,M))X=w(aa,M,K)||X,Q++;else{a:{aa=P;var da=M;if(""!==da.vnodeSelector)for(var ea=Q+1;ea<aa.length;ea++)if(e(aa[ea],da)){aa=ea;break a}aa=-1}if(0<=aa){for(;Q<aa;Q++)m(P[Q]),r(P,Q,R,"removed");X=w(P[aa],M,K)||X;Q=aa+1}else t(M,O,Q<W?P[Q].domNode:void 0,K),M.properties&&(aa=M.properties.enterAnimation)&&aa(M.domNode,M.properties),r(L,S,R,"added")}S++}if(W>Q)for(;Q<W;Q++)m(P[Q]),r(P,Q,R,"removed");return X}(F,H,E.children,
F.children,G)||I,I=function(R,O,P,L){if(P){for(var K=!1,Q=Object.keys(P),W=Q.length,ba=0;ba<W;ba++){var S=Q[ba],X=P[S],aa=O[S];if("class"===S)aa!==X&&(z(R,aa,!1),z(R,X,!0));else if("classes"===S){var M=R.classList,da=Object.keys(X),ea=da.length;for(S=0;S<ea;S++){var Z=da[S],ka=!!X[Z];ka!==!!aa[Z]&&(K=!0,ka?M.add(Z):M.remove(Z))}}else if("styles"===S)for(M=Object.keys(X),da=M.length,S=0;S<da;S++)ea=M[S],Z=X[ea],Z!==aa[ea]&&(K=!0,Z?(l(Z),L.styleApplyer(R,ea,Z)):L.styleApplyer(R,ea,""));else(X||"string"!=
typeof aa||(X=""),"value"===S)?(M=R[S],M!==X&&(R["oninput-value"]?M===R["oninput-value"]:X!==aa)&&(R[S]=X,R["oninput-value"]=void 0),X!==aa&&(K=!0)):X!==aa&&(aa=typeof X,"function"===aa&&L.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===L.namespace?"href"===S?R.setAttributeNS("http://www.w3.org/1999/xlink",S,X):R.setAttribute(S,X):"string"===aa&&"innerHTML"!==S?"role"===S&&""===X?R.removeAttribute(S):R.setAttribute(S,X):R[S]!==X&&(R[S]=X),K=!0))}return K}}(H,E.properties,F.properties,G)||
I,F.properties&&F.properties.afterUpdate&&F.properties.afterUpdate.apply(F.properties.bind||F.properties,[H,G,F.vnodeSelector,F.properties,F.children]);return I&&F.properties&&F.properties.updateAnimation&&F.properties.updateAnimation(H,F.properties,E.properties),J};var y=function(E,F){return{getLastRender:function(){return E},update:function(G){if(E.vnodeSelector!==G.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
var H=E;E=G;w(H,G,F)},domNode:E.domNode}},x={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(E,F,G){"-"===F.charAt(0)?E.style.setProperty(F,G):E.style[F]=G}},A={create:function(E,F){return F=g(x,F),t(E,document.createElement("div"),void 0,F),y(E,F)},append:function(E,F,G){return G=g(x,G),t(F,E,void 0,G),y(F,G)},insertBefore:function(E,F,G){return G=g(x,G),t(F,E.parentNode,E,G),y(F,G)},merge:function(E,F,G){return G=g(x,G),F.domNode=E,n(E,F,G),y(F,
G)},replace:function(E,F,G){return G=g(x,G),t(F,E.parentNode,E,G),E.parentNode.removeChild(E),y(F,G)}},v=function(E,F,G){for(var H=0,J=F.length;H<J;H++){var I=F[H];Array.isArray(I)?v(E,I,G):null!=I&&!1!==I&&("string"==typeof I&&(I={vnodeSelector:"",properties:void 0,children:void 0,text:I.toString(),domNode:null}),G.push(I))}};var u=Array.prototype.find?function(E,F){return E.find(F)}:function(E,F){return E.filter(F)[0]};var C=function(E,F){var G=E;return F.forEach(function(H){G=G&&G.children?u(G.children,
function(J){return J.domNode===H}):void 0}),G};c.createCache=function(){var E,F;return{invalidate:function(){E=F=void 0},result:function(G,H){if(E)for(var J=0;J<G.length;J++)E[J]!==G[J]&&(F=void 0);return F||(F=H(),E=G),F}}};c.createMapping=function(E,F,G){var H=[],J=[];return{results:J,map:function(I){for(var R=I.map(E),O=J.slice(),P=0,L=0;L<I.length;L++){var K=I[L],Q=R[L];if(Q===H[P])J[L]=O[P],G(K,O[P],L),P++;else{for(var W=!1,ba=1;ba<H.length+1;ba++){var S=(P+ba)%H.length;if(H[S]===Q){J[L]=O[S];
G(I[L],O[S],L);P=S+1;W=!0;break}}W||(J[L]=F(K,L))}}J.length=I.length;H=R}}};c.createProjector=function(E){var F,G,H=g(x,E),J=H.performanceLogger,I=!0,R=!1,O=[],P=[],L=function(Q,W,ba){H.eventHandlerInterceptor=function(X,aa,M){function da(ea){M("domEvent",ea);for(var Z=aa(),ka=ea.currentTarget,va=Z.domNode,Ea=[];ka&&ka!==va;)Ea.push(ka),ka=ka.parentNode;Ea.reverse();var Ga;Z=C(Z.getLastRender(),Ea);return X.scheduleRender(),Z&&(Ga=Z.properties["on"+ea.type].apply(Z.properties.bind||this,arguments)),
M("domEventProcessed",ea),Ga}return function(ea,Z,ka,va){return da}}(F,function(){return S},J);var S=Q(W,ba(),H);O.push(S);P.push(ba)},K=function(){if(G=void 0,I){I=!1;J("renderStart",void 0);for(var Q=0;Q<O.length;Q++){var W=P[Q]();J("rendered",void 0);O[Q].update(W);J("patched",void 0)}J("renderDone",void 0);I=!0}};return F={renderNow:K,scheduleRender:function(){G||R||(G=requestAnimationFrame(K))},stop:function(){G&&(cancelAnimationFrame(G),G=void 0);R=!0},resume:function(){R=!1;I=!0;F.scheduleRender()},
append:function(Q,W){L(A.append,Q,W)},insertBefore:function(Q,W){L(A.insertBefore,Q,W)},merge:function(Q,W){L(A.merge,Q,W)},replace:function(Q,W){L(A.replace,Q,W)},detach:function(Q){for(var W=0;W<P.length;W++)if(P[W]===Q)return P.splice(W,1),O.splice(W,1)[0];throw Error("renderFunction was not found");}}};c.dom=A;c.h=function(E,F,G){if(Array.isArray(F))G=F,F=void 0;else if(F&&("string"==typeof F||F.vnodeSelector)||G&&("string"==typeof G||G.vnodeSelector))throw Error("h called with invalid arguments");
var H,J;return G&&1===G.length&&"string"==typeof G[0]?H=G[0]:G&&(v(E,G,J=[]),0===J.length&&(J=void 0)),{vnodeSelector:E,properties:F,children:J,text:""===H?void 0:H,domNode:null}};Object.defineProperty(c,"__esModule",{value:!0})}(B)},59:function(D,B,a){function c(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return function(e){return h.reduceRight(function(l,r){return r(l)},e)}}a.d(B,"a",function(){return c})},6:function(D,B,a){function c(b){return 0===Object.keys(b).length&&b.constructor===
Object}function h(b){return null!=b}function g(b,d){return k.apply(null,arguments)}function e(b,d){return f.apply(null,arguments)}a.d(B,"b",function(){return c});a.d(B,"a",function(){return h});a.d(B,"e",function(){return r});a.d(B,"c",function(){return g});a.d(B,"d",function(){return e});var l=a(0);D=a(16);var r=Object(D.a)(function(b,d){var q=Object(l.a)({},d);return delete q[b],q}),k=Object(D.a)(function(b,d){return Object.keys(d).reduce(function(q,m){return q[m]=b(d[m],m,d),q},{})}),f=Object(D.a)(function(b,
d){return Object.keys(d).reduce(function(q,m){return b(d[m],m,d)&&(q[m]=d[m]),q},{})})},790:function(D,B,a){function c(z,w,y,x){var A=new n({key:"root"},w);z&&(A.store=z);var v=Object(b.createProjector)(x);w=Object(f.a)(Object(f.a)({},v),{append:function(u){return v.append(u,function(){return A.render.bind(A)(A.tsx.bind(A))})}});return w.append(y),z&&z.subscribe(function(){return v.scheduleRender()}),w}function h(z,w){return function(y){return function(x,A){return function(v,u){return A(y,Object(f.a)(Object(f.a)(Object(f.a)({},
x),z(u(),x)),w(v,x)))}}}}function g(){for(var z=[],w=0;w<arguments.length;w++)z[w]=arguments[w];return function(y){return function(x,A){var v=y(x,A),u=d.a,C=v.dispatch,E=z.map(function(F){return F({dispatch:function(G){return C(G)},getState:v.getState})});return C=u.apply(void 0,E)(v.dispatch),Object(f.a)(Object(f.a)({},v),{dispatch:C})}}}function e(z){return function(w){return function(y,x){return w(function(A,v){if("@@shunt/SETSTATE"===v.type)return v.payload;var u=y(A,v);return-1===v.type.indexOf("@@component/INIT")&&
z(v,u),u},x)}}}function l(z){return function(w){w.dispatch;var y=w.getState;return function(x){return function(A){var v=x(A);return z(A,y()),v}}}}function r(z){var w=Object(q.d)(function(y){return"function"==typeof y},z);return function(y,x){return void 0===y&&(y={}),Object(q.c)(function(A,v){return A(y[v],x)},w)}}function k(z,w){var y=w,x=[],A={dispatch:function(v){return y=z(y,v),x.forEach(function(u){return u()}),v},subscribe:function(v){return x.push(v),function(){x.splice(x.indexOf(v),1)}},getState:function(){return y}};
return A.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),A}a.r(B);a.d(B,"createProjector",function(){return c});a.d(B,"Component",function(){return m});a.d(B,"RootComponent",function(){return n});a.d(B,"connect",function(){return h});a.d(B,"applyMiddleware",function(){return g});a.d(B,"shunt",function(){return e});a.d(B,"thunk",function(){return t});a.d(B,"addListener",function(){return l});a.d(B,"combineReducers",function(){return r});a.d(B,"createStore",function(){return k});
var f=a(0),b=a(429),d=a(59),q=a(6),m=function(){function z(w){this.childComponents={};this.state={};this.props=w}return z.prototype.componentDidConnect=function(){},z.prototype.componentWillReceiveProps=function(w){},z.prototype.setState=function(w){this.state=Object(f.a)(Object(f.a)({},this.state),w);this.store&&this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"})},z.prototype.tsx=function(w,y,x){var A=Array.prototype.slice.call(arguments).slice(2);if("string"==typeof w)var v=b.h.apply(this,
[w,y,A]);else if(w.prototype&&w.prototype.constructor.name){var u=w;A=Object(f.a)(Object(f.a)({},y),{children:A});var C=this.childComponents[A.key];C?(C.componentWillReceiveProps(A),C.props=A,v=C.render(C.tsx.bind(C))):((C=this.childComponents[A.key]=new u(A)).store=this.store,C.componentDidConnect(),v=C.render(C.tsx.bind(C)))}else v=(u=w)(Object(f.a)(Object(f.a)({},y),{children:A}),this.tsx.bind(this));return"function"==typeof v?v(this.store.dispatch,this.store.getState):v},z}(),n=function(z){function w(y,
x){var A=z.call(this,y)||this;return A.renderRoot=x,A}return Object(f.d)(w,z),w.prototype.render=function(y){var x=this;return y(function(A,v){return x.renderRoot(v)})},w}(m);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var z=/function\s([^(]{1,})\(/.exec(this.toString());return z&&1<z.length?z[1].trim():""},set:function(z){}});var t=function(z){var w=z.dispatch,y=z.getState;return function(x){return function(A){return"function"==
typeof A?A(w,y):x(A)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(D){return function(B){function a(h){if(c[h])return c[h].exports;var g=c[h]={i:h,l:!1,exports:{}};return B[h].call(g.exports,g,g.exports,a),g.l=!0,g.exports}var c={};return a.m=B,a.c=c,a.d=function(h,g,e){a.o(h,g)||Object.defineProperty(h,g,{enumerable:!0,get:e})},a.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,
"__esModule",{value:!0})},a.t=function(h,g){if((1&g&&(h=a(h)),8&g)||4&g&&"object"==typeof h&&h&&h.__esModule)return h;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:h}),2&g&&"string"!=typeof h)for(var l in h)a.d(e,l,function(r){return h[r]}.bind(null,l));return e},a.n=function(h){var g=h&&h.__esModule?function(){return h["default"]}:function(){return h};return a.d(g,"a",g),g},a.o=function(h,g){return Object.prototype.hasOwnProperty.call(h,g)},a.p="",a(a.s=
838)}({0:function(B,a,c){function h(d,q){function m(){this.constructor=d}if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");f(d,q);d.prototype=null===q?Object.create(q):(m.prototype=q.prototype,new m)}function g(d,q){var m={},n;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&0>q.indexOf(n)&&(m[n]=d[n]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(d);t<n.length;t++)0>
q.indexOf(n[t])&&Object.prototype.propertyIsEnumerable.call(d,n[t])&&(m[n[t]]=d[n[t]])}return m}function e(d,q,m,n){var t,z=arguments.length,w=3>z?q:null===n?n=Object.getOwnPropertyDescriptor(q,m):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(d,q,m,n);else for(var y=d.length-1;0<=y;y--)(t=d[y])&&(w=(3>z?t(w):3<z?t(q,m,w):t(q,m))||w);return 3<z&&w&&Object.defineProperty(q,m,w),w}function l(d,q,m,n){return new (m||(m=Promise))(function(t,z){function w(A){try{x(n.next(A))}catch(v){z(v)}}
function y(A){try{x(n["throw"](A))}catch(v){z(v)}}function x(A){var v;A.done?t(A.value):(v=A.value,v instanceof m?v:new m(function(u){u(v)})).then(w,y)}x((n=n.apply(d,q||[])).next())})}function r(d,q){function m(x){return function(A){return function(v){if(n)throw new TypeError("Generator is already executing.");for(;y;)try{if(n=1,t&&(z=2&v[0]?t["return"]:v[0]?t["throw"]||((z=t["return"])&&z.call(t),0):t.next)&&!(z=z.call(t,v[1])).done)return z;switch(t=0,z&&(v=[2&v[0],z.value]),v[0]){case 0:case 1:z=
v;break;case 4:return y.label++,{value:v[1],done:!1};case 5:y.label++;t=v[1];v=[0];continue;case 7:v=y.ops.pop();y.trys.pop();continue;default:if(!(z=y.trys,(z=0<z.length&&z[z.length-1])||6!==v[0]&&2!==v[0])){y=0;continue}if(3===v[0]&&(!z||v[1]>z[0]&&v[1]<z[3]))y.label=v[1];else if(6===v[0]&&y.label<z[1])y.label=z[1],z=v;else if(z&&y.label<z[2])y.label=z[2],y.ops.push(v);else{z[2]&&y.ops.pop();y.trys.pop();continue}}v=q.call(d,y)}catch(u){v=[6,u],t=0}finally{n=z=0}if(5&v[0])throw v[1];return{value:v[0]?
v[1]:void 0,done:!0}}([x,A])}}var n,t,z,w,y={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return w={next:m(0),"throw":m(1),"return":m(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function k(d,q){for(var m=0,n=q.length,t=d.length;m<n;m++,t++)d[t]=q[m];return d}c.d(a,"d",function(){return h});c.d(a,"a",function(){return b});c.d(a,"f",function(){return g});c.d(a,"c",function(){return e});c.d(a,"b",function(){return l});c.d(a,"e",function(){return r});
c.d(a,"g",function(){return k});var f=function(d,q){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,n){m.__proto__=n}||function(m,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(m[t]=n[t])})(d,q)},b=function(){return(b=Object.assign||function(d){for(var q,m=1,n=arguments.length;m<n;m++)for(var t in q=arguments[m])Object.prototype.hasOwnProperty.call(q,t)&&(d[t]=q[t]);return d}).apply(this,arguments)};Object.create;Object.create},17:function(B,a){B.exports=
D},838:function(B,a,c){c.r(a);var h=c(0);B=function(g){function e(l){return g.call(this,l)||this}return Object(h.d)(e,g),e.prototype.render=function(l){var r=this.props.position,k=this.props.bannerConfig;return l("div",{classes:{"info-banner":!0,"info-banner--top":"top"===r,"info-banner--bottom":"bottom"===r},style:"background-color: "+k.bgColor+"; color: "+k.fontColor},l("p",{"class":"info-banner-text"},k.text))},e}(c(17).Component);a["default"]=B}})})},"arcgisonline/pages/components/ConfirmDialog":function(){define(["require",
"exports","preact","preact/hooks"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B["default"]=function(h){var g=h.autoCloseOnOk,e=h.hideCancel,l=h.hideClose,r=h.renderHtmlDescription,k=h.strings,f=h.onOk,b=h.onCancel,d=h.width;d=void 0===d?"m":d;h=h.okColor;h=void 0===h?"blue":h;var q=c.useState(!0),m=q[0],n=q[1];q=c.useState(!1);var t=q[0],z=q[1];q=c.useRef();var w=function(){t||(n(!1),b())};return a.h("calcite-modal",{active:m,"intl-close":k.close,role:"dialog","aria-modal":"true",
ref:q,"data-test":"dialog",disableCloseButton:t||l,disableEscape:t,"aria-label":k.title,oncalciteModalClose:w,width:d,"disable-outside-close":!0},a.h("h3",{slot:"header","class":"font-size-2 trailer-0","data-test":"title"},k.title),t?a.h("calcite-loader",{slot:"content","class":"leader-half trailer-half",active:t,label:"processing-loader",text:k.processing}):a.h("div",{slot:"content","class":"position-relative leader-half trailer-half","data-test":"description"},r?a.h("div",{dangerouslySetInnerHTML:{__html:k.description}}):
k.description),a.h("calcite-button",{slot:"primary",width:"full",color:h,appearance:"solid",disabled:t,onClick:function(){g?(n(!1),f()):(z(!0),f(function(){n(!1)}))},"data-test":"ok"},k.ok),e?null:a.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",color:"blue",onClick:w,"data-test":"cancel",disabled:t},null===k||void 0===k?void 0:k.cancel))}})},"arcgisonline/pages/components/StatusBanner":function(){define(["require","exports","preact"],function(D,B,a){Object.defineProperty(B,
"__esModule",{value:!0});B["default"]=function(c){var h=c.strings,g=c.link,e=c.onAction;c=function(l){if(!l.defaultPrevented&&"status-banner__link"===l.target.id)switch(l.key){case "Enter":null===e||void 0===e?void 0:e(l),l.preventDefault()}};return a.h("div",{"class":"status-banner__danger text-center"},a.h("div",{"class":"status-banner__wrapper leader-half padding-trailer-half"},a.h("calcite-icon",{icon:"exclamation-mark-triangle","class":"status-banner-icon__danger",scale:"s"}),a.h("span",{"class":"status-banner__title margin-left-half margin-right-half"},
a.h("strong",null,h.title)),a.h("span",{"class":"status-banner__message margin-right-half"},h.message),h.learnMore&&g?a.h("a",{"class":"status-banner_link",href:g,target:"_blank",id:"status-banner__link"},h.learnMore," ",a.h("calcite-icon",{icon:"launch",scale:"s","class":"status-banner__link-icon margin-left-half margin-right-half"})):null,h.action&&e?a.h("a",{"class":"status-banner_link",onClick:e,onKeyUp:c,id:"status-banner__link",tabIndex:0},h.action):null))}})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);return function(){function A(u){var C,E,F,G,H,J,I;this.portalUser=null!==(E=null===
(C=this.portal)||void 0===C?void 0:C.getPortalUser())&&void 0!==E?E:null;this.title=null!==(F=this.title)&&void 0!==F?F:"";this.snippet=null!==(G=this.snippet)&&void 0!==G?G:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(J=this.screenshots)||void 0===J?0:J.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?
this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();n["default"].mixin(this,{extent:c["default"].extentToString(this.extent)});n["default"].mixin(this,e["default"].getItemInfo(this));(null===(I=this.portal)||void 0===
I?0:I.isPortal)&&"Web Mapping Application"===this.type&&-1<this.typeKeywords.indexOf("Story Map")&&(this.isRetiredStoryMap=!0)}var v=A;A.prototype.postscript=function(){};A.prototype.getOwnerProfile=function(u,C){var E=this,F=this.owner,G=new q["default"];this.ownerProfile?G.resolve(this.ownerProfile):(this.isOwner?(F=new q["default"],F.resolve(this.portalUser)):F=this.portal.getUserProfile(F),F.then(function(H){E.isOwner||H.orgId===E.portal.id||(C=u=!1);t["default"]({folders:E.isAdmin&&C?H.getFolders():
null,tags:E.isAdmin&&u?H.getTags():null,contentTags:E.isAdmin&&u?H.getContentTags():null}).then(function(J){E.ownerProfile=H;E.itemOwner=H;E._setAdminFlags();G.resolve(H)},function(J){E.ownerProfile=H;E.itemOwner=H;E._setAdminFlags();G.resolve(H)})}));return G};A.prototype.getComments=function(u,C){var E=this,F=new q["default"];this.commentsEnabled&&this.numComments?g["default"].fetchComments(u,C,this.commentsInfo).then(function(G){E.commentsInfo=n["default"].mixin(E.commentsInfo,G.commentsInfo);
E.comments=E.commentsInfo.comments;F.resolve(E.comments)}):F.resolve([]);return F};A.prototype.getRelatedItems=function(u,C){var E=this,F={WMA2Code:1,MobileApp2Code:1},G,H,J=new q["default"];this.relatedItems=this.relatedItems||{};w["default"].isDefined(this.relatedItems[u+"_"+C])?J.resolve(this.relatedItems[u+"_"+C].slice(0)):f["default"].request({url:this.itemUrl+"/relatedItems",content:{relationshipType:u,direction:C}}).then(function(I){G=(null===I||void 0===I?0:I.relatedItems)?I.relatedItems:
null!==I&&void 0!==I?I:[];G=G.map(function(R){return new v(a.__assign(a.__assign({},R),{portal:E.portal}))});H=u in F?(G||[]).shift():G||[];E.relatedItems[u+"_"+C]=H;J.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(I){J.reject(I)});return J};A.prototype.getSourceData=function(){var u=this,C=new q["default"],E="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type||"OGCFeatureServer"===this.type,F="Map Service"===this.type,G=E?"Service2Service":this.isRouteLayer?
"Service2Route":"Service2Data",H="Service2Service"===G||"Service2Route"===G?"reverse":"forward",J;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(G="DataStore2BPService",H="reverse");this.sourceData?C.resolve(this.sourceData):this.getRelatedItems(G,H).then(function(I){J=(null===I||void 0===I?0:I.length)?I.shift():null;E?F&&!u._isView(J)||!J?u.getRelatedItems("Service2Data","forward").then(function(R){R=(null===R||void 0===R?0:R.length)?R.shift():J;C.resolve(R)}):C.resolve(J):C.resolve(J)},
function(I){C.reject(I)});return C};A.prototype._isView=function(u){return u&&l["default"].includes(u.typeKeywords,"View Service")||!1};A.prototype.getResultData=function(){var u=new q["default"],C=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(C,"Service2Service"===C&&"Feed"!==this.type?"forward":"reverse").then(function(E){return u.resolve((null===E||void 0===E?0:E.length)?E:null)});return u};A.prototype.getThumbnail=function(u){var C=this,E=new q["default"];this._fetchingThumbnail?
setTimeout(function(){C.getThumbnail(!1).then(function(F){C._fetchingThumbnail=!1;E.resolve(F)},function(F){C._fetchingThumbnail=!1;E.resolve(void 0)})},50):(this._fetchingThumbnail=!0,h["default"](this,u).then(function(F){C._fetchingThumbnail=!1;F.dataURL?C._updateThumbnail(F).then(function(G){C.set("thumbnailUrl",G);E.resolve(G)},function(G){E.reject()}):(C.set("thumbnailUrl",F),E.resolve(F))},function(F){C._fetchingThumbnail=!1;E.resolve()}));return E};A.prototype.getData=function(){var u=new q["default"];
f["default"].request({url:this.itemDataUrl}).then(function(C){return u.resolve(C)});return u};A.prototype.canBeDeleted=function(){var u=new q["default"];f["default"].request({url:this.userItemUrl+"/canDelete"}).then(function(C){return u.resolve(C)},function(C){return u.resolve(C)});return u};A.prototype.resetTypeKeywordInfo=function(){this.setTypeKeywordFlags();this.set("displayName",this._getDisplayName())};A.prototype.setTypeKeywordFlags=function(){var u,C,E,F=this.typeKeywords;this.isViewOnly=
l["default"].includes(F,"useOnly");this.isOfflineEnabled=l["default"].includes(F,"Offline");this.isHostedService=l["default"].includes(F,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=l["default"].includes(F,"Service Proxy");this.isAppProxy=l["default"].includes(F,"App Proxy");this.isAppCollector=l["default"].includes(["Web Map","Web Scene"],this.type);this.useInCollector=l["default"].includes(F,"Collector");this.disableInCollector=l["default"].includes(F,
"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||l["default"].includes(F,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&l["default"].includes(F,"Map Notes");this.isTable=l["default"].includes(F,"Table");this.hasMetadata=l["default"].includes(F,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&l["default"].includes(F,"providerSDS");this.isBDS=this.portal.isPortal&&l["default"].includes(F,"providerBDS");this.isRegisteredApp=l["default"].includes(F,
"Registered App");this.hasGeocodeReviewTable=l["default"].includes(F,"Involved Lookup");this.isHostedTemplate=l["default"].includes(F,"configurableApp")||l["default"].includes(F,"Configurable")&&l["default"].includes(F,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=l["default"].includes(this.typeKeywords,"Requires Credits");this.typeInfo=n["default"].mixin({},this.getTypeInfo(),{premiumTitle:m["default"].common[(this.requiresCredits?
"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?"portal":"")],premiumLabel:m["default"].common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(u=this.url)||void 0===u?void 0:u.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=l["default"].includes(F,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(C=this.portalUser)||void 0===C?void 0:C.userRole.canDeleteOrgItems())||
!1;this.isLocatorView=this.isServiceProxy&&l["default"].includes(F,"Geocoding filter");this.isRouteLayer=l["default"].includes(F,"Route Layer");this.isSpatiotemporal=l["default"].includes(F,"Spatiotemporal");this.isMarkup=l["default"].includes(F,"Markup");this.isMultiServicesView=l["default"].includes(F,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&l["default"].includes(F,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===
this.type&&l["default"].includes(F,"Location Tracking Service"))&&l["default"].includes(F,"Location Tracking View");this.canShowSocialMediaLinks=k["default"].canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=l["default"].includes(F,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&l["default"].includes(this.typeKeywords,"UtilityNetwork");u=w["default"].isDefined(b["default"].newMapViewerEnabled)&&!0===b["default"].newMapViewerEnabled;C=!b["default"].self.portalProperties||
!w["default"].isDefined(b["default"].self.portalProperties.newMapViewerEnabled)||!0===b["default"].self.portalProperties.newMapViewerEnabled;u&&C&&(this.canOpenInNewMapViewer=this._canOpenInNewMapViewer());this.userItemUrl=null===(E=this.itemUrl)||void 0===E?void 0:E.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};A.prototype.addBlockClasses=function(u){var C=this,E,F,G,H;this.blockedApps||(this.blockedApps=null===(E=this.portal)||void 0===E?void 0:E.blockedApps);
if(null!==(F=this.blockedApps)&&void 0!==F&&F.length){-1<this.blockedApps.indexOf("survey123")&&u.some(function(J){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(J)})&&-1===u.indexOf("survey-blocked")&&u.push("survey-blocked");if(-1<this.blockedApps.indexOf("webappbuilder")){u.some(function(J){return"can-edit-wab"===J})&&-1===u.indexOf("wab-blocked")&&u.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(J){return C.typeKeywords.some(function(I){return I===J})})||-1<(null===
(G=this.url)||void 0===G?void 0:G.indexOf("webappviewer")))E=u.indexOf("has-url"),-1<E&&u.splice(E,1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(u=this.privileges.indexOf("can-configure"),-1<u&&this.privileges.splice(u,1))}"StoryMap"===this.type&&this.origin&&(u=this.privileges.indexOf("can-configure"),-1<u&&this.privileges.splice(u,1))}};A.prototype.removeBlockedTypes=function(u){var C=this,E;if((null===u||void 0===u?0:u.length)||(null===(E=this.blockedApps)||
void 0===E?0:E.length)){(null===u||void 0===u?0:u.length)?this.blockedApps=u:u=this.blockedApps;var F={arcgis360vr:{types:["is-vrExperience"],blockedType:"vrExperience-blocked",openIn:["vrExperienceViewer"]},arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[m["default"].itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},experienceBuilder:{types:["is-published-webExperience",
"is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent","is-hubProject"],blockedType:"hub-blocked",texts:[m["default"].itemLinks.viewInHub,m["default"].itemLinks.openHubInitiative,m["default"].itemLinks.editHubProject],openIn:["hubEventViewer","hubInitiative","hubProject"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[m["default"].itemLinks.dashboardView],openIn:["dashboard"]},
survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",openIn:["surveyViewer"],texts:[m["default"].itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[m["default"].itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(F).forEach(function(G){var H;if(-1<u.indexOf(G)){var J=F[G],I=J.types,R=J.blockedType,O=J.texts;J=J.openIn;"arcgisstorymaps"===
G&&"StoryMap"===C.type&&(C.defaultOpenText=void 0);I&&(C.types.some(function(P){return I.some(function(L){return L===P})})||(null===(H=C.privileges)||void 0===H?0:H.some(function(P){return I.some(function(L){return L===P})})))&&-1===C.types.indexOf(R)&&(C.types=a.__spreadArray(a.__spreadArray([],C.types),[R]));if(null===O||void 0===O?0:O.some(function(P){return P===C.defaultOpenText}))C.defaultOpenText=C.defaultOpenIcon=void 0;J&&J.forEach(function(P){P=C.openIn.indexOf(P);-1<P&&C.openIn.splice(P,
1)})}});-1<u.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")&&(this.defaultOpenText=void 0,this.openIn=[])}};A.prototype.isVelocity=function(){return-1<this.typeKeywords.indexOf("IoTFeatureLayer")};A.prototype._getAdjustedSize=function(){var u=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,C=this.isHostedService&&"Image Service"===this.type&&!l["default"].includes(this.typeKeywords,"Tiled Imagery Layer")&&!l["default"].includes(this.typeKeywords,"Elevation 3D Layer")&&
0<=this.subInfo;return this.size&&(u||C)?this.size-this.subInfo:this.size};A.prototype._canOpenInNewMapViewer=function(){var u,C=this.type,E=e["default"][C],F={"Feature Service":1,"Map Service":1,"Vector Tile Service":1,"Image Service":1,"Imagery Layer":1,KML:1,OGCFeatureServer:1,WFS:1,WMS:1,WMTS:1};return-1<(null===(u=null===E||void 0===E?void 0:E.openIn)||void 0===u?void 0:u.indexOf("mapViewer"))?"Web Map"===C?!0:C in F&&this._canOpenServiceInNewMapViewer()?!0:!1:!1};A.prototype._canOpenServiceInNewMapViewer=
function(){var u=this.type,C=this.typeKeywords,E="Map Service;Vector Tile Service;Imagery Layer;Image Service;Feature Service;KML;WFS;WMS;WMTS;OGCFeatureServer".split(";");return this.isTable||E.includes(u)||C.includes("Hosted Service")};A.prototype._getAdjustedUrl=function(){var u;if(this.url){var C=/^(?:[a-z]+:)?\/\//i.test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var E=void 0;try{E=f["default"].parseUrl(this.url)}catch(F){E=this.url}if("public"!==this.access&&f["default"].isHostedTemplateItem(this.url))return this.url.replace(E.host,
window.location.hostname);if("KML"===this.type)return this.url.includes("/sharing/rest/content/items/")?(null===(u=this.itemDataUrl)||void 0===u?void 0:u.replace(E.host,this.portal.portalHostname),this.url.replace(E.host,this.portal.portalHostname)):this.url}return this.portal.isPortal&&!C&&(u=f["default"].getHomeAppContext(),-1===this.url.indexOf(u))?u+this.url:x.sanitizeServerURL(this.url)}return null};A.prototype._getSourceLabel=function(){var u=this.type,C=this.typeKeywords,E=l["default"].includes(C,
"Service")||"Feature Collection"===u?m["default"].itemProperties.source+" ":"";return"Web Scene"===u?l["default"].includes(C,"ViewingMode-Local")?m["default"].common.localWebScene:m["default"].common.globalWebScene:"Web Mapping Application"===u&&(null===C||void 0===C?0:C.includes("configurableApp"))?m["default"].items.instantApp:E?E+u:u};A.prototype._setAdminFlags=function(){var u,C,E,F,G;this.isOwnedByMyOrg=this.isOwner||(null===(u=this.itemOwner)||void 0===u?void 0:u.orgId)===this.portal.id||this.portalUser&&
(null===(C=this.itemOwner)||void 0===C?void 0:C.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||!1;u=this.isAdminView||(null===(F=null===(E=this.portal)||void 0===E?void 0:E.portalUser)||void 0===F?void 0:F.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?this.isOwner||r["default"].isItemAdmin(this,this.portal)||u:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=
this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(G=this.portalUser)||void 0===G?void 0:G.userRole.canDeleteOrgItems())||!1};A.prototype._setContentStatusTo=function(u){return f["default"].request({url:this.itemUrl+"/setContentStatus",content:{status:u,clearEmptyFields:!u}},{usePost:!0})};A.prototype.setScoreCompleteness=function(u){u=parseInt(u,10);return this.scoreCompleteness=10*Math.ceil(u/10)};A.prototype._updateThumbnail=function(u){var C=this,E=new q["default"],F=this.itemUrl,G;f["default"].request({url:this.userItemUrl+
"/updateThumbnail",content:{data:u.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){f["default"].request({url:F}).then(function(H){G=new v(a.__assign(a.__assign({},H),{portal:C.portal}));E.resolve(G.thumbnailUrl)})});return E};return A=v=a.__decorate([d["default"](y.PortalItem,z["default"])],A)}()})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/buildThumbnailURLFromImageryItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f){function b(q,m,n){var t=new c["default"];q=h["default"](q,m,"4326",null,"800,532",null,"json",null,n||null);k["default"].request({url:q},{addToken:!1}).then(function(z){t.resolve(z)},function(){t.resolve(k["default"].getAbsoluteUrl("images/transparent.gif"))});return t}function d(q){return 2===(null===q||void 0===q?void 0:q.length)&&2===q[0].length&&2===q[1].length?Math.round(1E3*q[0][0])/1E3+","+Math.round(1E3*q[0][1])/1E3+","+Math.round(1E3*q[1][0])/1E3+","+Math.round(1E3*
q[1][1])/1E3:null}Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);B["default"]=function(q,m){var n,t,z,w=new c["default"],y=q.portal,x=y.getPortalUser();x=(null===(n=null===x||void 0===x?void 0:x.credential)||void 0===n?0:n.token)?"?token\x3d"+x.credential.token:"";var A=k["default"].getAbsoluteUrl("images/transparent.gif"),
v=k["default"].getAbsoluteUrl("images/arcgis-transparent-background-div.png"),u=k["default"].getStaticImagesUrl();n=q.itemUrl||q.url;var C=q.itemDataUrl,E=q.serviceInfo||{},F=q.itemData||{},G=q.type.toLowerCase(),H=q.typeKeywords||[],J=q.thumbnail!==A&&(!y.isPortal&&-1===(null===(t=q.thumbnail)||void 0===t?void 0:t.indexOf("thumbnail/ago_downloaded."))||y.isPortal&&-1===(null===(z=q.thumbnail)||void 0===z?void 0:z.indexOf("Utilities/PrintingTools")));t=f["default"].includes(H,"Tiled Imagery");z="image service"===
G&&!t;J=m&&("Feature Service"===q.type&&!J||"Vector Tile Service"===q.type&&!J);var I=Array.isArray(q.extent)?d(q.extent):q.extent||"-180,-90,180,90",R;q||w.resolve(v);if(q.thumbnail&&!J||"Image"===q.type||q.thumbnailUrl&&!J)w.resolve(q.thumbnail&&!q.thumbnail.startsWith("http")?n+"/info/"+q.thumbnail+x:q.thumbnailUrl);else if(q.isAdmin&&("image service"===G&&!t||"map service"===G))"image service"===G?l["default"](q,[800,532]).then(function(P){w.resolve(P.dataURL?P:P.url||v)},function(){return w.resolve(v)}):
q.isHostedService?q.getSourceData().then(function(P){(R=null===P||void 0===P?void 0:P.thumbnailUrl)?(q.thumbnail=R,w.resolve(R)):(q.thumbnail=u+"/desktopapp.png",w.resolve(q.thumbnail))},function(){q.thumbnail=u+"/desktopapp.png";w.resolve(q.thumbnail)}):b(n,I,E).then(function(P){w.resolve(P&&P.href||v)});else if(q.isLocationTrackingService)q.thumbnail=u+"/locationtrackingservice.png",w.resolve(q.thumbnail);else if(q.isAdmin&&"feature service"===G)q.isTable?(q.thumbnail=u+"/desktopapp.png",w.resolve(q.thumbnail)):
e["default"](q,null,F.layers).then(function(P){w.resolve(P)},function(){w.resolve(A)});else if("vector tile service"===G){y=[[-180,-90],[180,90]];if("string"===typeof q.extent){var O=q.extent.split(",");y=[[parseFloat(O[0]),parseFloat(O[1])],[parseFloat(O[2]),parseFloat(O[3])]]}else 0<(null===(O=q.extent)||void 0===O?void 0:O.length)&&(y=q.extent);r["default"]({operationalLayers:[],baseMap:{baseMapLayers:[{id:q.id,type:"VectorTileLayer",layerType:"VectorTileLayer",title:q.title,styleUrl:q.itemUrl+
"/resources/styles/root.json",visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},y,function(P){(P=P.layerIds.map(P.getLayer.bind(P)).shift())?P.takeScreenshot({format:"png",width:800,height:532}).then(function(L){(null===L||void 0===L?0:L.dataURL)?w.resolve(L):w.resolve(A)},function(){w.resolve(A)}):w.resolve(A)},function(){return w.resolve(A)})}else q.isAdmin&&"kml"===G?g["default"](q).then(function(P){return w.resolve(P)}):
"web mapping application"===G?w.resolve(u+"/webapp.png"):"mobile application"===G?w.resolve(u+"/mobileapp.png"):"image"===G?(O=2097134<q.size?k["default"].relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):C,w.resolve(O)):"workforce project"===G?w.resolve(u+"/workforceproject.png"):"hub initiative"===G?w.resolve(u+"/hubinitiative.png"):"hub page"===G?w.resolve(u+"/hubpage.png"):"hub site application"===G?w.resolve(u+"/hubsite.png"):"hub event"===G?w.resolve(u+"/hubevent.png"):
"hub project"===G?w.resolve(u+"/hubproject.png"):"dashboard"===G?(O=f["default"].includes(H,"ArcGIS Dashboards"),w.resolve(""+u+(O?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===G&&(null===y||void 0===y?0:y.isPortal)?w.resolve(u+"/webtool.png"):"web scene"===G||"scene service"===G?w.resolve(u+"/scene.png"):"ortho mapping project"===G?w.resolve(u+"/orthomappingproject.png"):"ortho mapping template"===G?w.resolve(u+"/orthomappingtemplate.png"):"insights theme"===G?w.resolve(u+"/insightstheme.png"):
"insights workbook package"===G?w.resolve(u+"/insightsworkbookpackage.png"):"solution"===G?w.resolve(u+"/solution.png"):"mobile scene package"===G?w.resolve(u+"/mobilescenepackage.png"):"deep learning package"===G?w.resolve(u+"/deeplearningpackage.png"):"big data analytic"===G?w.resolve(u+"/bigdataanalytic.png"):"real time analytic"===G?w.resolve(u+"/realtimeanalytic.png"):"feed"===G?w.resolve(u+"/feed.png"):"excalibur imagery project"===G?w.resolve(u+"/excaliburimageryproject.png"):"notebook"===
G?w.resolve(k["default"].relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===G?w.resolve(u+"/storymap.png"):"survey123 add in"===G?w.resolve(u+"/survey123addin.png"):"mission"===G?w.resolve(u+"/mission.png"):"quickcapture project"===G?w.resolve(u+"/quickcaptureproject.png"):"pro report"===G?w.resolve(u+"/proreport.png"):"pro package"===G?w.resolve(u+"/propackage.png"):"urban model"===G?w.resolve(u+"/urbanmodel.png"):"web experience"===G?w.resolve(u+"/webexperience.png"):
"web experience template"===G?w.resolve(u+"/webexperiencetemplate.png"):"experience builder widget"===G?w.resolve(u+"/experiencebuilderwidget.png"):"experience builder widget package"===G?w.resolve(u+"/experiencebuilderwidgetpackage.png"):"workflow"===G?w.resolve(u+"/workflow.png"):"insights script"===G?w.resolve(u+"/insightsscript.png"):"kernel gateway connection"===G?w.resolve(u+"/kernelgatewayconnection.png"):"hub initiative template"===G?w.resolve(u+"/hubinitiativetemplate.png"):t?w.resolve(u+
"/tiledimagerylayer.png"):z?w.resolve(u+"/imagerylayer.png"):"mission report"===G?w.resolve(u+"/missionreport.png"):"administrative report"===G?w.resolve(u+"/administrativereport.png"):"storymap theme"===G?w.resolve(u+"/storymaptheme.png"):"knowledge graph"===G?w.resolve(u+"/knowledgegraph.png"):"earth configuration"===G?w.resolve(u+"/earthconfiguration.png"):"raster function template"===G?w.resolve(u+"/rasterfunctiontemplate.png"):"link chart"===G?w.resolve(u+"/linkchart.png"):"investigation"===
G?w.resolve(u+"/investigation.png"):"apache parquet"===G?w.resolve(u+"/apacheparquet.png"):"media service"===G?w.resolve(u+"/mediaservice.png"):w.resolve(u+"/desktopapp.png");return w}})},"arcgisonline/map/core/buildExportCall":function(){define([],function(){return function(D,B,a,c,h,g,e,l,r){if(!l&&-1<D.indexOf("/MapServer/")){g=D.indexOf("/MapServer/");var k=D.indexOf("?");-1<k?(l=D.substring(g+11,k),D=D.substring(0,g+10)+D.substring(k)):(l=D.substring(g+11),D=D.substring(0,g+10))}k=-1<D.indexOf("/MapServer");
!k&&r&&(k=r.capabilities?-1<r.capabilities.toLowerCase().indexOf("map"):r.supportedImageFormatTypes);g=D.indexOf("?");if(-1==g)if(k)D+="/export?";else{if("undefined"!==typeof r.currentVersion&&10.1<=r.currentVersion)return D+"/info/thumbnail";D+="/exportImage?"}else if(k)D=D.substring(0,g)+"/export"+D.substring(g,D.length)+"\x26";else{if("undefined"!==typeof r.currentVersion&&10.1<=r.currentVersion)return D=D.substring(0,g)+"/info/thumbnail"+D.substring(g,D.length);D=D.substring(0,g)+"/exportImage"+
D.substring(g,D.length)+"\x26"}D+="size\x3d"+h+"\x26bbox\x3d"+B;null!==a&&0<a.length&&(D+="\x26bboxSR\x3d"+a);null!==c&&0<c.length&&(D+="\x26imageSR\x3d"+c);D=k&&r&&r.supportedImageFormatTypes&&-1<r.supportedImageFormatTypes.indexOf("PNG32")?D+("\x26format\x3dpng32\x26f\x3d"+e):k?D+("\x26format\x3dpng24\x26f\x3d"+e):D+("\x26format\x3djpgpng\x26f\x3d"+e);k?null!==l&&0<l.length&&(D+="\x26layers\x3dshow:"+l):D+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return D}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(D,B,a,c,h,g){var e=window.esriGeowConfig;return function(l,r){var k={};k.baseMap=e.defaultBasemap||e.self.defaultBasemap;k.baseMap.title="basemap";k.operationalLayers=[];var f=l.url;f||"KML"!==l.type||(f=e.restBaseUrl+"content/items/"+l.id+"/data");var b=(new B(e.restBaseUrl)).authority;-1<f.indexOf(b)&&(b=c.getToken())&&(f+="?token\x3d"+b);k.operationalLayers.push({url:f,id:"KML_"+Math.random(),opacity:1,title:l.title,visibility:!0,type:"KML"});var d=new D;f=r;f||("string"==typeof l.extent?
(f=l.extent.split(","),f=[[parseFloat(f[0]),parseFloat(f[1])],[parseFloat(f[2]),parseFloat(f[3])]]):f=l.extent&&0<l.extent.length?l.extent:[[-180,-90],[180,90]]);g(k,f,new h({wkid:4326}),a.hitch(this,function(q){d.resolve(q)}),a.hitch(this,function(q){d.reject(q)}));return d}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(D,B,a,c){var h=window.esriGeowConfig;return function(g,e,
l,r,k){g=B.clone(g);a.forEach(g.baseMap.baseMapLayers,function(f){delete f.resourceInfo});g.mapOptions={showAttribution:!1,extent:{xmin:e[0][0],ymin:e[0][1],xmax:e[1][0],ymax:e[1][1],spatialReference:{wkid:4326}},spatialReference:l};g.exportOptions={dpi:96,outputSize:[600,400]};g.layoutOptions={};e=new c(h.self.helperServices.printTask.url);l={Web_Map_as_JSON:D.stringify(g),Format:"PNG32",Layout_Template:"MAP_ONLY"};e.execute(l).then(B.hitch(this,function(f){if(f){for(var b=!1,d=0;d<f.length;d++)if("Output_File"==
f[d].paramName){r(f[d].value.url);b=!0;break}!b&&k&&k()}else k&&k()}),B.hitch(this,function(f){k&&k()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){return function(m,n,t){var z={};z.baseMap=g.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);z.baseMap.title="basemap";for(var w=z.baseMap.baseMapLayers.length,y=!1===m.itemData?{}:m.itemData,x=0;x<w;x++){var A=z.baseMap.baseMapLayers[x];if(!A.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!k.isHostedService(A.url)&&!k.supportsHttps(A.url)||(A.url=A.url.replace("http:","https:"));A.visibility=!1;z.baseMap.baseMapLayers=
[A];break}}z.operationalLayers=[];var v=new B;w=function(u,C){C?u&&h.forEach(u,function(G){h.forEach(C,function(H,J){H.id===G.id&&(H[J]=G)})}):C=[];var E=function(G,H){for(var J=G&&G.layers||[],I=J.length-1;0<=I;I--){var R=J[I],O=e.id.findCredential(k.urlToObject(m.url).path);O={url:m.url+"/"+R.id+(O?"?token\x3d"+O.token:""),id:(m.id||Math.random())+"_"+R.id,opacity:1,title:(m.title||"title")+"_"+R.id,visibility:!0};for(var P=!1,L=0;L<J.length;L++)if(J[L].id===R.id){P=!0;O.layerDefinition=J[L].layerDefinition;
break}(!J.length||J.length&&P)&&z.operationalLayers.push(O)}var K=function(X){v.resolve(X)},Q=function(X){v.reject(X)},W=[[-180,-90],[180,90]];"string"==typeof m.extent&&""!==m.extent?(I=m.extent.split(","),W=[[parseFloat(I[0]),parseFloat(I[1])],[parseFloat(I[2]),parseFloat(I[3])]]):m.extent&&0<m.extent.length&&(W=m.extent);if(1===z.operationalLayers.length)O=new l(z.operationalLayers[0].url),D(O,"load",g.hitch(this,function(X){X.layer&&(X=X.layer);b({layer:X},n||W).then(g.hitch(this,function(aa,
M){f(aa,M,g.hitch(this,K),g.hitch(this,Q))},z))}));else{I=n||m.extent||W;W=new r(I[0][0],I[0][1],I[1][0],I[1][1]);var ba=function(X,aa){var M=20015077/180,da=e.config.defaults,ea=e.WKIDUnitConversion,Z=X.spatialReference;if(Z){var ka=Z.wkid;var va=Z.wkt}Z=null;ka?Z=ea.values[ea[ka]]:va&&-1!==va.search(/^PROJCS/i)&&(ea=/UNIT\[([^\]]+)\]\]$/i.exec(va))&&ea[1]&&(Z=parseFloat(ea[1].split(",")[1]));return X.getWidth()/aa*(Z||M)*39.37*da.screenDPI}(W,200),S=[];J=[];for(I=0;I<z.operationalLayers.length;I++)O=
z.operationalLayers[I],R=new B,J.push(R),O=new l(O.url),S.push(O),c.connect(O,"onLoad",g.hitch(this,function(X,aa){aa.minScale<=ba&&aa.maxScale>ba?X.resolve(!0):X.resolve(!1)},R));(new a(J)).addCallback(function(X){for(var aa=!1,M=0;M<X.length;M++)if(!0===X[M][1]){aa=!0;break}aa?f(z,n||m.extent,g.hitch(this,K),g.hitch(this,Q)):b({layer:S[S.length-1]},n||m.extent).then(g.hitch(this,function(da,ea){f(da,ea,g.hitch(this,K),g.hitch(this,Q))},z))})}},F=function(G){v.reject(G)};m.serviceInfo&&!m.serviceInfo.error?
E(m.serviceInfo):q(m.url,"",g.hitch(this,E),g.hitch(this,F))};t?y?w(t,y):d(m.id,g.hitch(this,w,t),g.hitch(this,w)):m.id?y?w(null,y):d(m.id,g.hitch(this,w,null),g.hitch(this,w)):w();return v}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O,P,L,K,Q,W,ba,S,X,aa,M,da,ea,Z,ka,va,Ea,Ga,na,ma,ya,za,Ba,ha,qa,T,Ha,Ja){var fa=y.defaults,Ya=!!n("esri-pbf"),Xa=!!n("esri-featurelayer-pbf"),Ca=a(aa,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(Y,la){this._preventInit||this._initFeatureLayer(Y,la)},_initFeatureLayer:function(Y,la){la=la||{};this._tileWidth=la.tileWidth||512;this._tileHeight=la.tileHeight||512;this.i18n=Ja;this._featureReduction=this._featureReduction||la.featureReduction;this._featureReductionEnabled=null!=la.featureReductionEnabled?la.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=la.featureUpdatesCheckEnabled?la.featureUpdatesCheckEnabled:!0;this.showLabels=null!=la.showLabels?
la.showLabels:!0;this._outFields=la.outFields;this._defnExpr=la.definitionExpression;this._loadCallback=la.loadCallback;this._trackIdField=la.trackIdField;this.objectIdField=la.objectIdField;var sa=null!=la.resolution,U=null!=la.maxAllowableOffset;this._maxOffset=this._optMaxOffset=sa||U?sa?la.resolution:la.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=la.quantize?la.quantize:!0;this._optEditable=la.editable;this._optAutoGen=la.autoGeneralize;this.editSummaryCallback=la.editSummaryCallback;
this.userId=la.userId;this.userIsAdmin=la.userIsAdmin;this.useMapTime=la.hasOwnProperty("useMapTime")?!!la.useMapTime:!0;this.source=la.source;this.gdbVersion=la.gdbVersion;this.orderByFields=la.orderByFields;this.maxPointCountForAuto=null!=la.maxPointCountForAuto?la.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=la.maxRecordCountForAuto?la.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=la.maxVertexCountForAuto?la.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=la.generalizeForScale?la.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=la.queryPagination?la.queryPagination:!0;this.multipatchOption=la.multipatchOption;this.subtypeSublayerInfo=la.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();sa=z.isDefined(la.mode)?la.mode:Ca.MODE_ONDEMAND;this._isStream&&(sa=Ca.MODE_STREAM);this.mode=
sa;switch(sa){case Ca.MODE_SNAPSHOT:this.currentMode=Ca.MODE_SNAPSHOT;this._mode=new ma(this);break;case Ca.MODE_ONDEMAND:case Ca.MODE_AUTO:this.currentMode=Ca.MODE_ONDEMAND;this._mode=new ya(this);this.latticeTiling=la.latticeTiling;break;case Ca.MODE_SELECTION:this.currentMode=Ca.MODE_SELECTION;this._mode=new za(this);this._isSelOnly=!0;break;case Ca.MODE_STREAM:this.currentMode=Ca.MODE_STREAM,this._mode=new Ba(this),this._isStream=!0}this._initLayer=h.hitch(this,this._initLayer);this._selectHandler=
h.hitch(this,this._selectHandler);this._editable=!1;if(h.isObject(Y)&&Y.layerDefinition)return this._collection=!0,this.mode=this._isStream?Ca.MODE_STREAM:Ca.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(Y),this;this.source&&(sa={source:this.source.toJson()},this._url.query=h.mixin(this._url.query,{layer:e.toJson(sa)}));this.gdbVersion&&(this._url.query=h.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new P(this.url,{source:this.source,gdbVersion:this.gdbVersion});
sa=this._url.path;this._fserver=!1;-1!==sa.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(U=la.resourceInfo)?this._initLayer(U):w({url:sa,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(Y,la){if(Y||la){this._json=Y;var sa=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||Y&&Y._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=Ca.MODE_SNAPSHOT,this._mode=new ma(this)),this._featureSet=Y.featureSet,this._nextId=Y.nextObjectId,Y=Y.layerDefinition);this.version=Y.currentVersion;this.version||(this.version="capabilities"in Y||"drawingInfo"in Y||"hasAttachments"in Y||"htmlPopupType"in Y||"relationships"in Y||"timeInfo"in Y||"typeIdField"in Y||"types"in Y?10:9.3);this.geometryType=Y.geometryType;Y.bandCount&&Y.fields&&1<Y.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(Y.hasOwnProperty("capabilities")){var U=this.capabilities=Y.capabilities;U&&-1!==U.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);z.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=e.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=z.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Ca.MODE_ONDEMAND||this.mode===Ca.MODE_AUTO,delete this._optAutoGen);U=Y.effectiveMinScale||Y.minScale;var ia=Y.effectiveMaxScale||Y.maxScale;!this._hasMin&&U&&this.setMinScale(U);!this._hasMax&&ia&&this.setMaxScale(ia);this.layerId=Y.id;this.name=sa&&sa.title||Y.name;this.description=
Y.description;this.copyright=Y.copyrightText;this.type=Y.type;this.displayField=Y.displayField;this.defaultDefinitionExpression=Y.definitionExpression||(Y.isView?Y.viewDefinitionQuery:Y.definitionQuery);this.fullExtent=new W(Y.extent);this.initialExtent=new W(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new v(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=Y.defaultVisibility;this.editingInfo=Y.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=Y.hasM||!1;this.hasZ=Y.hasZ||!1;this.indexedFields=Y.indexedFields;this.indexes=Y.indexes;this.maxRecordCount=Y.maxRecordCount;this.canModifyLayer=Y.canModifyLayer;this.supportsStatistics=Y.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:Y.supportsAdvancedQueries;this.supportsCalculate=Y.supportsCalculate;this.supportsASyncCalculate=
Y.supportsASyncCalculate;this.supportsAttachmentsByUploadId=Y.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=Y.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=Y.supportsQuantizationEditMode;this.supportsFieldDescription=Y.supportsFieldDescriptionProperty;this.supportsFormatPBF=Y.supportedQueryFormats?-1!==g.map(Y.supportedQueryFormats.toLowerCase().split(","),h.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
Y.hasLabels;this.canScaleSymbols=Y.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=Y.supportsRollbackOnFailure;this.syncCanReturnChanges=Y.syncCanReturnChanges;this.isDataVersioned=Y.isDataVersioned;this.editFieldsInfo=Y.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=Y.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=Y.relationships;
this.allowGeometryUpdates=z.isDefined(Y.allowGeometryUpdates)?Y.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!Y.allowUpdateWithoutMValues;this.enableZDefaults=!!Y.enableZDefaults;this.zDefault=z.isDefined(Y.zDefault)?Y.zDefault:null;this.advancedQueryCapabilities=Y.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=Y.hasGeometryProperties&&Y.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=Y.useStandardizedQueries;this.tileMaxRecordCount=Y.tileMaxRecordCount;this.standardMaxRecordCount=Y.standardMaxRecordCount;if(U=Y.dateFieldsTimeReference)this.dateFieldsTimeReference=new ea(U);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;ia=Y.fields;this._createFields(ia);if(!this.objectIdField&&(this.objectIdField=Y.objectIdField,!this.objectIdField))for(ia=Y.fields,U=0;U<ia.length;U++){var ua=ia[U];if("esriFieldTypeOID"===ua.type){this.objectIdField=ua.name;break}}if(!z.isDefined(this._nextId)){ia=this.objectIdField;ua=-1;if(this._collection&&ia){var wa=(U=this._featureSet)&&U.features,Fa=wa?wa.length:0;for(U=0;U<Fa;U++){var Da=(Da=wa[U].attributes)&&Da[ia];Da>ua&&(ua=Da)}}this._nextId=ua+1}this.globalIdField=
Y.globalIdField;if(U=this.typeIdField=Y.typeIdField)if(U=!this._getField(U)&&this._getField(U,!0))this.typeIdField=U.name;this.visibilityField=Y.visibilityField;if(ia=Y.defaultSymbol)this.defaultSymbol=G.fromJson(ia);var La=this.types=[],Wa=Y.types;ua=(U=this.editFieldsInfo)&&U.creatorField;wa=U&&U.editorField;Da=ua||wa;Fa=[];if(Wa)for(U=0;U<Wa.length;U++){var Va=new Z(Wa[U]);var Ma=Va.templates;Da&&Ma&&Ma.length&&(Fa=Fa.concat(Ma));La.push(Va)}Wa=Y.templates;Va=this.templates=[];if(Wa)for(U=0;U<
Wa.length;U++)La=new ka(Wa[U]),Da&&Fa.push(La),Va.push(La);for(U=0;U<Fa.length;U++)if(Da=h.getObject("prototype.attributes",!1,Fa[U]))ua&&delete Da[ua],wa&&delete Da[wa];if(U=Y.subtypeField)this.subtypeField=(U=this.getField(U))?U.name:null;this.defaultSubtypeCode=Y.defaultSubtypeCode;this.subtypes=g.map(Y.subtypes,function(tb){return new va(tb)});this._applySTSublayerInfo(sa);if(sa=Y.timeInfo)this.timeInfo=new da(sa),this._startTimeField=sa.startTimeField,this._endTimeField=sa.endTimeField,this._startTimeField&&
this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?sa.trackIdField=this._trackIdField:this._trackIdField=sa.trackIdField;this.hasAttachments=!this._collection&&Y.hasAttachments?!0:!1;this.htmlPopupType=Y.htmlPopupType;sa=Y.drawingInfo;(U=sa&&sa.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=g.map(U,function(tb){return new Ga(tb)}),this._fixLabelExpr());if(!this.renderer)if(sa&&sa.renderer){var eb=sa.renderer;this.setRenderer(I.fromJson(eb,{geometryType:this.geometryType}));"classBreaks"===
eb.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var ib=eb.type;U=[];eb=this.renderer;switch(ib){case "simple":U.push(eb.symbol);break;case "uniqueValue":case "classBreaks":U.push(eb.defaultSymbol),U=U.concat(g.map(eb.infos,function(tb){return tb.symbol}))}U=g.filter(U,z.isDefined);var lb=this._url.path+"/images/",rb=this._getToken();g.forEach(U,function(tb){var Ab=tb.url;Ab&&(-1===Ab.search(/https?:/)&&-1===Ab.indexOf("data:")&&(tb.url=lb+Ab),rb&&-1!==tb.url.search(/https?:/)&&(tb.url+=
"?token\x3d"+rb))})}}else if(ia)Wa=this.types,0<Wa.length?(eb=new J(this.defaultSymbol,this.typeIdField),g.forEach(Wa,function(tb){eb.addValue(tb.id,tb.symbol)})):eb=new H(this.defaultSymbol),this.setRenderer(eb);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":ib=new C;break;case "esriGeometryPolyline":ib=new E;break;case "esriGeometryPolygon":ib=new F;break;default:this.hasXYFootprint()&&(ib=new F)}this.setRenderer(ib?new H(ib):null)}ib=sa&&
sa.transparency||0;!this.hasOwnProperty("opacity")&&0<ib&&(this.opacity=1-ib/100);(n("ie")||7<=n("trident")||n("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=Y.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var sb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==
Ca.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var tb=this._loadCallback;tb&&(delete this._loadCallback,tb(this))};ib=[];this._collection?(sa=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new K(sa)),this._fcAdded=!0):(ib.push(this._forceIdentity()),this._limitPromise&&ib.push(this._limitPromise));ib.push(this._evalArcadeSupport());ib.length?A(ib).then(h.hitch(this,function(){sb.call(this)})):sb.call(this)}},_applySTSublayerInfo:function(Y){Y&&this.subtypeField&&(this.subtypeCode=
Y.subtypeCode,this._applySTSublayerDefinitionExpression(Y),this._filterSubtypes(Y),this._applySTTemplates(Y),this._applySTFieldOverrides(Y))},_applySTSublayerDefinitionExpression:function(Y){var la=[],sa=this.getDefinitionExpression();sa&&la.push(sa);(Y=Y.layerDefinition&&Y.layerDefinition.definitionExpression)&&la.push(Y);1<la.length&&(la=g.map(la,function(U){return"("+U+")"}));this.setDefinitionExpression(la.length?la.join(" AND "):null)},_applySTTemplates:function(Y){if(Y=Y.layerDefinition&&Y.layerDefinition.templates)this.templates=
g.map(Y,function(la){return new ka(la)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=g.filter(this.subtypes,function(Y){return Y.code===this.subtypeCode},this))},_applySTFieldOverrides:function(Y){var la=Y.layerDefinition&&Y.layerDefinition.fieldOverrides;if(la){this.fields=g.filter(this.fields,function(U){return g.some(la,function(ia){return ia.name===U.name})});var sa=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(U){var ia=g.filter(la,function(ua){return ua.name===
U.name})[0];ia.alias&&(U.alias=ia.alias);if(!1===ia.editable||U.name===this.subtypeField)U.editable=!1;sa&&(ia=sa[U.name])&&"inherited"!==ia.type&&(U.domain=na.fromJson(ia.toJson()))},this)}},setShowLabels:function(Y){var la=this.showLabels;this.showLabels=Y;la!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(Y){this.inherited(arguments);var la=this._map;this._ager=!!(Y&&Y.observationAger&&Y.observationRenderer);Y&&"colors"in
Y&&"blurRadius"in Y&&"maxPixelIntensity"in Y?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&la&&(this._heatmapManager=new T(this),this._heatmapManager.initialize(la))):this.renderer&&this.renderer.getRendererInfo?g.some(this.renderer.rendererInfos,function(ia){return ia.renderer&&"colors"in ia.renderer&&"blurRadius"in ia.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&la&&(Y&&(Y.latestObservationRenderer||Y.trackRenderer)?
this._trackManager||(this._trackManager=new qa(this),this._trackManager.initialize(la),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(Y){var sa=[];la=g.filter([Y,Y.observationRenderer,Y.latestObservationRenderer,Y.trackRenderer],z.isDefined);var U=function(ia){return null!=ia&&"function"!=typeof ia&&ia};g.forEach(la,function(ia){var ua=U(ia.attributeField),wa=U(ia.attributeField2);
ia=U(ia.attributeField3);!1!==ua&&sa.push(ua);!1!==wa&&sa.push(wa);!1!==ia&&sa.push(ia)});this._requiredFields=sa}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(Y){Y&&(Y=h.mixin({},Y),null!=Y.clusterSize&&null==Y.clusterRadius&&(Y.clusterRadius=Y.clusterSize),delete Y.clusterSize);this.loaded?this._isFeatureReductionSupported(Y)?this._featureReduction=Y:this._featureReduction=
null:this._featureReduction=Y;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var Y=this._featureReduction;if(Y){Y=h.mixin({},Y);var la=this._clusterManager;if(la=la&&la.aggregationInfo)Y.clusterRadius=la.clusterRadius,Y.infoTemplate=la.infoTemplate}return Y},isFeatureReductionActive:function(){var Y=this._clusterManager;return!!(Y&&Y.isClusteringEnabled()&&Y.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},
enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?
this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(Y){return this._clusterManager?this._clusterManager.getFeaturesInCluster(Y):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(Y){var la,
sa=this._clusterManager?this._clusterManager.getClusterFields():null;Y=Y?Y.toLowerCase():"";g.some(sa,function(U){Y===U.name.toLowerCase()&&(la=U);return!!la});return la},_isFeatureReductionSupported:function(Y){return Y&&"cluster"===Y.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(Y){Y=Y&&Y.declaredClass||"";Y=Y.toLowerCase();return-1<Y.indexOf("simplerenderer")||
-1<Y.indexOf("classbreaksrenderer")||-1<Y.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(Y){this.loaded&&this.getMap()&&(Y=Y||this.getFeatureReduction(),this._evalModeFromFReduction(Y),Y&&this.isFeatureReductionEnabled()?this._canCluster(Y)?this._clusterManager?this._updateClusterManager(Y):(this._clusterManager=this._createClusterManager(Y),this.onFeatureReductionChange()):this._destroyClusterManager():this._destroyClusterManager())},_canCluster:function(Y){var la=this._map;if(!la)return!1;
la=la.spatialReference;return this._isFeatureReductionSupported(Y)&&this._isReductionCompatibleRenderer(this.renderer)&&(la.isWebMercator()||4326===la.wkid)},_createClusterManager:function(Y){Y=new Ha({layer:this,aggregationInfo:Y});this._clusterHandles=[Y.on("renderer-change",h.hitch(this,function(){this.onFeatureReductionRendererChange()}))];Y.initialize(this._map);return Y},_updateClusterManager:function(Y){var la=this._clusterManager;la&&la.setAggregationInfo(Y)},_destroyClusterManager:function(Y){g.forEach(this._clusterHandles,
function(la){la.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(Y),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(Y){this.inherited(arguments);var la=this._getRenderer();this._ager=!!(la&&la.observationAger&&la.observationRenderer);this._trackManager&&
this._trackManager.container&&this._trackManager.container.setRenderer(la&&la.trackRenderer);Y&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(Y){this._clusterManager?this._clusterManager.toggleFeatureVisibility(Y):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(Y){this._hasOnDemandDrillMode()&&(Y=Y||{},null!=Y.maxDrillLevel&&(this._mode.maxDrillLevel=Y.maxDrillLevel),null!=Y.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=Y.maxRecordCountFactor),
null!=Y.enablePBFQuery&&(this._mode.enablePBFQuery=Y.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Ca.MODE_ONDEMAND&&(!this._preSurfaceChangeState||
this._preSurfaceChangeState.currentMode===Ca.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var Y=this.renderer,la=Y.declaredClass?Y.declaredClass.toLowerCase():"";return(-1<la.indexOf("simplerenderer")||-1<la.indexOf("classbreaksrenderer")||-1<la.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(Y)&&this._hasWebGLCompatibleVVs(Y)},_hasWebGLCompatibleSymbols:function(Y){Y=this._getAllSymbolsInRenderer(Y);return!(this._hasSLSWithMarker(Y)||this._hasIncompatibleSMSStyles(Y)||
this._hasGIFMarker(Y))},_hasWebGLCompatibleVVs:function(Y){return!g.some(Y&&Y.visualVariables,function(la){var sa=la.type;return("colorInfo"===sa||"opacityInfo"===sa)&&la.stops&&8<la.stops.length||"sizeInfo"===sa&&(la.field||la.valueExpression&&"$view.scale"!==la.valueExpression||la.expression&&"view.scale"!==la.expression)&&la.stops&&6<la.stops.length?!0:!1})},_hasSLSWithMarker:function(Y){return g.some(Y,function(la){return la&&"simplelinesymbol"===la.type&&!!la.marker})},_hasIncompatibleSMSStyles:function(Y){var la=
void 0===n("ie")&&7==n("trident");return g.some(Y,function(sa){return sa&&"simplemarkersymbol"===sa.type&&("triangle"===sa.style||"path"===sa.style&&la)})},_hasGIFMarker:function(Y){var la=/\.gif$/,sa=/^image\/gif$/;return g.some(Y,function(U){return U&&"picturemarkersymbol"===U.type?la.test(U.url)||sa.test(U.contentType):!1})},_getAllSymbolsInRenderer:function(Y){var la=[];Y&&(la.push(Y.symbol),la.push(Y.defaultSymbol),g.forEach(Y.infos,function(sa){la.push(sa.symbol)}),la=g.filter(la,function(sa){return!!sa}));
return la},_setMap:function(Y){var la=this.inherited(arguments),sa=this._mode,U=this;sa&&Y.loaded&&sa.initialize(Y);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(ia){ia=ia.graphic.attributes;(ia=U._selectedFeatures[ia&&ia[U.objectIdField]])&&ia.attr("data-selected","")});return la},_unsetMap:function(Y){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),
this._trackManager=null);c.disconnect(this._zoomConnect);c.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(Y){!this._needsRefresh&&Y&&Y.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(Y=this._mode)&&Y.refresh())},setFeatureUpdatesCheckEnabled:function(Y){this._featureUpdatesCheckEnabled=
Y},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!h.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var Y=new l;if(!this.supportsLastEditDate)return Y.reject(Error("FeatureLayer does not support supportsLastEditDate")),Y.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=
w({url:this._url.path,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(h.hitch(this,function(la){la=la.editingInfo.lastEditDate;var sa=this.editingInfo.lastEditDate!==la;this.editingInfo.lastEditDate=la;return sa}));this._fetchMetadataPromise.then(function(la){Y.isFulfilled()||Y.resolve(la)}).otherwise(function(la){Y.isFulfilled()||Y.reject(la)});return Y.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},
getOutFields:function(){return g.filter(this._getOutFields(),function(Y){return"*"===Y||!!this._getField(Y)},this)},getField:function(Y){return this._getField(Y,!0)},isOutField:function(Y){Y=this.getField(Y);if(!Y)return!1;var la=this.getOutFields();return-1<g.indexOf(la,"*")||-1<g.indexOf(la,Y.name)},getFieldLabel:function(Y){var la=this.infoTemplate;la=la&&la.getFieldInfo&&la.getFieldInfo(Y);Y=h.isFunction(Y)?null:this.getField(Y);var sa=la||Y,U="";sa&&(U=la&&la.label||Y&&Y.alias||sa.name||sa.fieldName);
return U},getDomain:function(Y,la){var sa,U,ia=la&&la.feature,ua=ia&&this.typeIdField&&ia.attributes&&ia.attributes[this.typeIdField];null!=ua&&g.some(this.types,function(wa){return wa.id==ua?((sa=wa.domains&&wa.domains[Y])&&"inherited"===sa.type&&(sa=this._getLayerDomain(Y),U=!0),!0):!1},this);U||sa||(sa=this._getLayerDomain(Y));return sa},_getLayerDomain:function(Y){this._createFieldsIndex();var la=this._fieldsIndex;if(la)return la=la.caseSensitive,(la=la.get(Y))?la.domain:null;var sa;g.some(this.fields,
function(U){U.name===Y&&(sa=U.domain);return!!sa});return sa},getType:function(Y){return this.getTypeById(Y&&this.typeIdField&&Y.attributes&&Y.attributes[this.typeIdField])},getTypeById:function(Y){var la;g.some(this.types,function(sa){sa.id==Y&&(la=sa);return!!la});return la},getSubtypeByCode:function(Y){var la;g.some(this.subtypes,function(sa){sa.code==Y&&(la=sa);return!!la});return la},setEditable:function(Y){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=
Y,this;var la=this._editable;this._editable=Y;this._updateCaps();if(la!==Y)this.onCapabilitiesChange();return this},getEditCapabilities:function(Y){var la={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return la;var sa=Y&&Y.feature;Y=Y&&Y.userId||this.getUserId();var U=g.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],h.trim),ia=(la=-1<g.indexOf(U,"editing"))&&-1<g.indexOf(U,"create"),ua=la&&-1<g.indexOf(U,"update");U=la&&-1<g.indexOf(U,
"delete");var wa=this.ownershipBasedAccessControlForFeatures,Fa=this.editFieldsInfo,Da=Fa&&Fa.creatorField;Fa=Fa&&Fa.realm;sa=(sa=sa&&sa.attributes)&&Da?sa[Da]:void 0;var La=!!this.userIsAdmin;Da=!wa||La||!(!wa.allowOthersToUpdate&&!wa.allowUpdateToOthers);var Wa=!wa||La||!(!wa.allowOthersToDelete&&!wa.allowDeleteToOthers),Va=!wa||La||!wa.hasOwnProperty("allowAnonymousToUpdate")||wa.allowAnonymousToUpdate;wa=!wa||La||!wa.hasOwnProperty("allowAnonymousToDelete")||wa.allowAnonymousToDelete;Y&&Fa&&(Y=
Y+"@"+Fa);if(La||la&&!(ia||ua||U))ia=ua=U=!0;la={canCreate:ia,canUpdate:ua,canDelete:U,canUpdateGeometry:La||this.allowGeometryUpdates};Y||(la.canUpdate=la.canUpdate&&Va,la.canDelete=la.canDelete&&wa);null===sa?(la.canUpdate=la.canUpdate&&Da,la.canDelete=la.canDelete&&Wa):""!==sa&&sa&&Y.toLowerCase()!==sa.toLowerCase()&&(la.canUpdate=la.canUpdate&&Da,la.canDelete=la.canDelete&&Wa);return la},getUserId:function(){var Y;this.loaded&&(Y=this.credential&&this.credential.userId||this.userId||"");return Y},
setUserIsAdmin:function(Y){this.userIsAdmin=Y},setEditSummaryCallback:function(Y){this.editSummaryCallback=Y},getEditSummary:function(Y,la,sa){sa=z.isDefined(sa)?sa:(new Date).getTime();var U="";sa=this.getEditInfo(Y,la,sa);(la=la&&la.callback||this.editSummaryCallback)&&(sa=la(Y,sa)||"");if(h.isString(sa))U=sa;else{if(sa){Y=sa.action;la=sa.userId;var ia=sa.timeValue,ua=0;Y&&ua++;la&&ua++;z.isDefined(ia)&&ua++;1<ua&&(U=("edit"===Y?"edit":"create")+(la?"User":"")+(z.isDefined(ia)?sa.displayPattern:
""))}U=U&&z.substitute(sa,this.i18n.layers.FeatureLayer[U])}return U},getEditInfo:function(Y,la,sa){if(this.loaded){sa=z.isDefined(sa)?sa:(new Date).getTime();la=la&&la.action||"last";var U=this.editFieldsInfo,ia=U&&U.creatorField,ua=U&&U.creationDateField,wa=U&&U.editorField;U=U&&U.editDateField;wa=(Y=Y&&Y.attributes)&&wa?Y[wa]:void 0;U=Y&&U?Y[U]:null;ia=this._getEditData(Y&&ia?Y[ia]:void 0,Y&&ua?Y[ua]:null,sa);sa=this._getEditData(wa,U,sa);switch(la){case "creation":var Fa=ia;break;case "edit":Fa=
sa;break;case "last":Fa=sa||ia}Fa&&(Fa.action=Fa===sa?"edit":"creation");return Fa}},_getEditData:function(Y,la,sa){if(z.isDefined(la)){var U=sa-la;var ia=0>U?"Full":6E4>U?"Seconds":12E4>U?"Minute":36E5>U?"Minutes":72E5>U?"Hour":864E5>U?"Hours":6048E5>U?"WeekDay":"Full"}if(void 0!==Y||ia){var ua=ua||{};ua.userId=Y;ia&&(Y=r.format,sa=new Date(la),ua.minutes=Math.floor(U/6E4),ua.hours=Math.floor(U/36E5),ua.weekDay=Y(sa,{datePattern:"EEEE",selector:"date"}),ua.formattedDate=Y(sa,{selector:"date"}),ua.formattedTime=
Y(sa,{selector:"time"}),ua.displayPattern=ia,ua.timeValue=la)}return ua},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var Y=g.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],h.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==g.indexOf(Y,"query")||-1!==g.indexOf(Y,"catalog")},setResolution:function(Y){return this.setMaxAllowableOffset(Y)},setMaxAllowableOffset:function(Y){this.isEditable()||(this._optMaxOffset=Y,
this._setMaxOffset(Y,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var Y=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?
this._maxOffset:Y},_setMaxOffset:function(Y,la){if(null==Y)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=Y:delete this._maxOffset,this._quantizationParameters=Y?{mode:"view",originPosition:"upperLeft",tolerance:Y,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&la||(Y=Math.floor(Y)),isNaN(Y)||0===Y?delete this._maxOffset:this._maxOffset=Y,delete this._quantizationParameters);
return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(Y){Y=(Y=Y&&Y.split("-"))&&Y[0]&&Y[0].toLowerCase();return-1!==g.indexOf(this._langsWithDot,Y)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(Y){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=Y)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):
this._setMaxOffset(null)):this._optAutoGen=Y;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Ca.MODE_SNAPSHOT},setGDBVersion:function(Y){this._collection||Y===this.gdbVersion||!Y&&!this.gdbVersion||(this.gdbVersion=Y,this._task.gdbVersion=Y,this._url.query=h.mixin(this._url.query,{gdbVersion:Y}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():
!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(Y){this._defnExpr=Y;this._hasPendingLimitQuery()||((Y=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(Y):this._applyDefnExpr());return this},_applyDefnExpr:function(){var Y=this._mode;Y&&Y.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(Y){Y.then(h.hitch(this,function(la){la&&(la instanceof Error||!la.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},
hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(Y){this._isSnapshotMode()&&(this._timeDefn=Y,(Y=this._mode)&&Y.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(Y,la){this._timeOffset=Y;this._timeOffsetUnits=la;var sa=this._mode;sa&&sa.propertyChangeHandler(0);return this},setUseMapTime:function(Y){this.useMapTime=Y;this._toggleTime(!this.suspended);
(Y=this._mode)&&Y.propertyChangeHandler(0)},selectFeatures:function(Y,la,sa,U){la=la||Ca.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;Y=this._getShallowClone(Y);var ia=this._map,ua=this,wa=x._fixDfd(new l(x._dfdCanceller));Y.outFields=this.getOutFields();Y.returnGeometry=!0;Y.multipatchOption=this.multipatchOption;ia&&(Y.outSpatialReference=new v(ia.spatialReference.toJson()));if(!this._applyQueryFilters(Y,!0)){var Fa={features:[]};this._selectHandler(Fa,la,sa,U,wa);return wa}if(ia=
this._canDoClientSideQuery(Y))wa._pendingDfd=d(this._doQuery(Y,ia)),wa._pendingDfd.then(function(La){Fa={features:La};ua._selectHandler(Fa,la,sa,U,wa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,U,wa,!0),wa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,U,wa,!0),wa;var Da=this;this._ts&&(Y._ts=(new Date).getTime());ia=this._canFetchPBFForQuery(Y);this._enableEditModeQuantization(Y,
ia);(wa._pendingDfd=this._task.execute(Y,null,null,ia?{format:"pbf"}:null)).addCallbacks(function(La){Da._selectHandler(La,la,sa,U,wa)},function(La){Da._hasPartialSelectedFeatures=!0;Da._hasSelectionError=!0;Da._resolve([La],null,U,wa,!0)})}return wa},getSelectedFeatures:function(){var Y=this._selectedFeatures,la=[],sa;for(sa in Y)Y.hasOwnProperty(sa)&&la.push(Y[sa]);return la},clearSelection:function(Y){var la=this._selectedFeatures,sa=this._mode,U;for(U in la)la.hasOwnProperty(U)&&(this._unSelectFeatureIIf(U,
sa),sa._removeFeatureIIf(U));this._selectedFeatures={};this._isSelOnly&&sa._applyTimeFilter(!0);if(!Y)this.onSelectionClear();return this},setSelectionSymbol:function(Y){if(this._selectionSymbol=Y){var la=this._selectedFeatures,sa;for(sa in la)la.hasOwnProperty(sa)&&la[sa].setSymbol(Y)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(Y){Y?(this.labelingInfo=Y,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();
this.onLabelingInfoChange()},_fixLabelExpr:function(){var Y=/\[([^\[\]]+)\]/ig,la,sa=this,U=function(ia,ua){var wa=sa._getField(ua,!0);return"["+(wa&&wa.name||ua)+"]"};g.forEach(this.labelingInfo,function(ia){if(la=ia.labelExpression)ia.labelExpression=la.replace(Y,U)})},_updateRequiredFieldsFromLabelingInfo:function(){var Y=[];g.forEach(this.labelingInfo,function(la){var sa=la.labelExpressionInfo;if(la.labelExpression){var U=/[\[\]]/ig;la=la.labelExpression.match(/\[[^\[\]]+\]/ig);(la=g.map(la,function(ua){return ua.replace(U,
"")}))&&(Y=Y.concat(la))}if(sa){if(sa.value){var ia=/[\{\}]/ig;la=sa.value.match(/\{[^\{\}]+\}/ig);(la=g.map(la,function(ua){return ua.replace(ia,"")}))&&(Y=Y.concat(la))}sa.expression&&(la=g.map(this.fields,function(ua){return ua.name},this),Y=Y.concat(R.extractFieldNames(sa.expression,la)))}},this);Y=g.map(Y,function(la){var sa=this.getField(la);return sa?sa.name:la},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(Y))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],
e:4,f:1}],applyEdits:function(Y,la,sa,U,ia,ua){var wa=ua.assembly,Fa=ua.dfd;this._applyNormalized(Y,wa&&wa[0]);this._applyNormalized(la,wa&&wa[1]);this.onBeforeApplyEdits(Y,la,sa);var Da={},La=this.objectIdField;wa={f:"json"};var Wa=!1;if(this._collection)ua={},ua.addResults=Y?g.map(Y,function(){Wa=!0;return{objectId:this._nextId++,success:!0}},this):null,ua.updateResults=la?g.map(la,function(eb){Wa=!0;var ib=eb.attributes[La];Da[ib]=eb;return{objectId:ib,success:!0}},this):null,ua.deleteResults=
sa?g.map(sa,function(eb){Wa=!0;return{objectId:eb.attributes[La],success:!0}},this):null,Wa?this._editHandler(ua,Y,Da,U,ia,Fa):this._resolve([ua.addResults,ua.updateResults,ua.deleteResults],null,U,Fa);else{Y&&0<Y.length&&(wa.adds=this._convertFeaturesToJson(Y,0,1),Wa=!0);if(la&&0<la.length){for(ua=0;ua<la.length;ua++){var Va=la[ua];Da[Va.attributes[La]]=Va}wa.updates=this._convertFeaturesToJson(la,0,0,1);Wa=!0}if(sa&&0<sa.length){la=[];for(ua=0;ua<sa.length;ua++)la.push(sa[ua].attributes[La]);wa.deletes=
la.join(",");Wa=!0}if(Wa){var Ma=this;return w({url:this._url.path+"/applyEdits",content:h.mixin(wa,this._url.query),callbackParamName:"callback",load:function(eb){Ma._editHandler(eb,Y,Da,U,ia,Fa)},error:function(eb){Ma._resolve([eb],null,ia,Fa,!0)}},{usePost:!0})}this._resolve([],null,U,Fa)}},queryFeatures:function(Y,la,sa,U){return this._query("execute","onQueryFeaturesComplete",Y,la,sa,U)},queryRelatedFeatures:function(Y,la,sa){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",
Y,la,sa)},queryIds:function(Y,la,sa,U){return this._query("executeForIds","onQueryIdsComplete",Y,la,sa,U)},queryCount:function(Y,la,sa,U){return this._query("executeForCount","onQueryCountComplete",Y,la,sa,U)},queryExtent:function(Y,la,sa,U){return this._query("executeForExtent","onQueryExtentComplete",Y,la,sa,U)},queryAttachmentInfos:function(Y,la,sa){var U=this._url.path+"/"+Y+"/attachments",ia=new l(x._dfdCanceller),ua=this;U=u.normalize(U);ia._pendingDfd=w({url:U,content:h.mixin({f:"json"},this._url.query),
callbackParamName:"callback",load:function(wa){wa=wa.attachmentInfos;var Fa;g.forEach(wa,function(Da){Fa=k.objectToQuery({gdbVersion:ua._url.query&&ua._url.query.gdbVersion,layer:ua._url.query&&ua._url.query.layer,token:ua._getToken()});Da.url=U+"/"+Da.id+(Fa?"?"+Fa:"");Da.objectId=Y});ua._resolve([wa],"onQueryAttachmentInfosComplete",la,ia)},error:function(wa){ua._resolve([wa],null,sa,ia,!0)}});return ia},addAttachment:function(Y,la,sa,U){return this._sendAttachment("add",Y,la,sa,U)},updateAttachment:function(Y,
la,sa,U,ia){sa.appendChild(f.create("input",{type:"hidden",name:"attachmentId",value:la}));return this._sendAttachment("update",Y,sa,U,ia)},deleteAttachments:function(Y,la,sa,U){var ia=this._url.path+"/"+Y+"/deleteAttachments",ua=new l(x._dfdCanceller),wa=this;la={f:"json",attachmentIds:la.join(",")};ua._pendingDfd=w({url:ia,content:h.mixin(la,this._url.query),callbackParamName:"callback",load:h.hitch(this,function(Fa){Fa=Fa.deleteAttachmentResults;Fa=g.map(Fa,function(Da){Da=new Ea(Da);Da.attachmentId=
Da.objectId;Da.objectId=Y;return Da});wa._resolve([Fa],"onDeleteAttachmentsComplete",sa,ua)}),error:function(Fa){wa._resolve([Fa],null,U,ua,!0)}},{usePost:!0});return ua},addType:function(Y){var la=this.types;if(la){if(g.some(la,function(sa){return sa.id==Y.id?!0:!1}))return!1;la.push(Y)}else this.types=[Y];return this._typesDirty=!0},deleteType:function(Y){if(this._collection){var la=this.types;if(la){var sa=-1;g.some(la,function(U,ia){return U.id==Y?(sa=ia,!0):!1});if(-1<sa)return this._typesDirty=
!0,la.splice(sa,1)[0]}}},toJson:function(){var Y=this._cloneJson();if(Y){Y=Y.layerDefinition?Y:{layerDefinition:Y};var la=Y.layerDefinition,sa=this._collection;this._updateLayerDefinition(la);var U=null;if(!sa||this._fcAdded)U={geometryType:la.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};Y.featureSet=h.mixin({},Y.featureSet||{},U);if(Y.featureSet.transform){var ia=Y.featureSet.transform;delete Y.featureSet.transform;U=new K(Y.featureSet);U.quantize(ia);Y.featureSet=U.toJson()}sa&&
(Y.nextObjectId=this._nextId,la.capabilities=this.capabilities);return Y}},getLayerDefinition:function(){var Y=this._cloneJson();(Y=Y?Y.layerDefinition||Y:null)&&this._updateLayerDefinition(Y);return Y},getFeatureCollectionLayer:function(Y){var la=new l,sa=this.getLayerDefinition();if(!sa)return la.reject(Error("layerDefinition not available")),la.promise;Y=Y||[];var U=new Ca({layerDefinition:sa,featureSet:{geometryType:sa.geometryType,features:g.map(Y,function(wa){return wa.toJson()})}}),ia=U.on("load",
function(){ia.remove();ua.remove();la.resolve(U)}),ua=U.on("error",function(){U.loaded||(ia.remove(),ua.remove(),la.reject(U.loadError))});return la.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},
onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_cloneJson:function(){var Y=this._json;return h.isString(Y)?e.fromJson(Y):h.clone(Y)},_updateLayerDefinition:function(Y){if(this._collection&&
this._typesDirty){Y.types=g.map(this.types||[],function(ia){return ia.toJson()});var la=this.renderer,sa=this.labelingInfo,U=Y.drawingInfo;!la&&!sa||U||(U=Y.drawingInfo={});U&&la&&-1===la.declaredClass.indexOf("TemporalRenderer")&&(U.renderer=la.toJson());sa&&(U.labelingInfo=g.map(sa,function(ia){return ia.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(Y){return!(Y&&
"cancel"===Y.dojoType)}).always(h.hitch(this,function(Y){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:Y})}))},_evalRefresh:function(Y){(Y.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var Y=new l;setTimeout(h.hitch(this,function(){this._initializeArcadeEngine().always(function(){Y.resolve()})}),0);return Y.promise},_initializeArcadeEngine:function(){var Y=[],la=this.infoTemplate;la&&la.initializeArcadeEngine&&
Y.push(la.initializeArcadeEngine());(la=this.renderer)&&la.initializeArcadeEngine&&Y.push(la.initializeArcadeEngine());var sa=[];g.forEach(this.labelingInfo,function(U){(U=U.labelExpressionInfo)&&U.expression&&sa.push(U.expression)});Y.push(O.initialize(sa));return A(Y)},_isGeometryOperationsUsed:function(){var Y=this.infoTemplate,la=this.renderer,sa=this.labelingInfo;return Y&&Y.hasGeometryOperations&&Y.hasGeometryOperations()||la&&la.hasGeometryOperations&&la.hasGeometryOperations()||g.some(sa,
function(U){return R.hasGeometryOperations(U.labelExpressionInfo&&U.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var Y=new l,la=this,sa=this._url&&this._url.path;var U=sa&&sa.toLowerCase().indexOf("/rest/services");var ia=this.editFieldsInfo;ia=ia&&(ia.creatorField||ia.editorField);(this.userIsAdmin||ia)&&!this._getToken()&&-1<U&&t.id?(U=sa.substring(0,U)+"/rest/info",w({url:U,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ua){if(ua.owningSystemUrl)return t.id.checkSignInStatus(ua.owningSystemUrl+
"/sharing")}).then(function(ua){if(ua)return t.id.getCredential(sa)}).then(function(ua){ua&&la._findCredential()}).always(function(){Y.resolve()})):Y.resolve();return Y.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ma):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(ya):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Ca.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var Y=this.geometryType;
if("esriGeometryPolyline"===Y||"esriGeometryPolygon"===Y||"esriGeometryMultipoint"===Y||this.hasXYFootprint())var la=this.maxRecordCountForAuto;else"esriGeometryPoint"===Y&&(la=this.maxPointCountForAuto);return la},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(Y){this._lastExceedsLimitResult=Y=(Y=Y&&Y.features&&Y.features[0])&&Y.attributes&&Y.attributes.exceedslimit;return!(this.mode!==Ca.MODE_AUTO||this.isEditable()||0!==Y||!(this._isPaginationAllowed()||
this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(Y){this._canUseSnapshotMode(Y)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var Y=Ca.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(Y):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(Y),this._evalSurfaceType(!0)):this.currentMode!==Y&&this._setFetchMode(Ca.MODE_AUTO,Y)},_enableAutoOnDemandMode:function(){var Y=
Ca.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(Y):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(Y):this.currentMode!==Y&&(this._setFetchMode(Ca.MODE_AUTO,Y),this._evalSurfaceType())},_evalModeFromFReduction:function(Y){this.loaded&&(Y&&this.isFeatureReductionEnabled()&&this._canCluster(Y)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var Y=this.currentMode;
Y!==Ca.MODE_SNAPSHOT&&Y!==Ca.MODE_STREAM&&Y!==Ca.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_SNAPSHOT,Ca.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var Y=this._preFReductionState;this._preFReductionState=null;!Y||Y.mode===this.mode&&Y.currentMode===this.currentMode||(this._setFetchMode(Y.mode,Y.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(Y){this._preFReductionState=
this._preFReductionState||{};this._preFReductionState.mode=Ca.MODE_AUTO;this._preFReductionState.currentMode=Y},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ca.MODE_AUTO?Ca.MODE_AUTO:Ca.MODE_ONDEMAND,Ca.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var Y=
this._preSurfaceChangeState;Y&&(this._preSurfaceChangeState=null,this._setFetchMode(Y.mode,Y.currentMode))},_updatePreSurfaceChangeState:function(Y){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Ca.MODE_AUTO;this._preSurfaceChangeState.currentMode=Y},_setFetchMode:function(Y,la,sa){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=Y;this.currentMode=la;sa=sa||this._getModeConstructor(la);this._mode=new sa(this);this.queryPagination=
la===Ca.MODE_ONDEMAND&&-1===sa.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(Y=this.getMap())&&Y.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(Y),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(Y){var la;Y===Ca.MODE_SNAPSHOT?la=ma:Y===Ca.MODE_ONDEMAND&&(la=ya);return la},_hasOnDemandDrillMode:function(){var Y=
this._mode;Y=Y&&Y.declaredClass;return!!(Y&&-1<Y.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var Y=this._queryLimit();Y&&(this._lastExceedsLimitResult=null,this._limitPromise=Y.then(h.hitch(this,function(la){var sa=this.currentMode;this._evalModeFromFLimit(la);return{modeChanged:this.currentMode!==sa}})).always(h.hitch(this,function(la){this._limitPromise=null;return la})));return this._limitPromise},
_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var Y,la,sa=new l(function(){clearTimeout(Y);Y=null;la&&!la.isFulfilled()&&la.cancel();la=null});this._exceedsLimitTimer=Y=setTimeout(h.hitch(this,function(){this._exceedsLimitTimer=null;var U=new L,ia=new Q;ia.statisticType="exceedslimit";ia.maxPointCount=this.maxPointCountForAuto;ia.maxRecordCount=this.maxRecordCountForAuto;ia.maxVertexCount=this.maxVertexCountForAuto;ia.outStatisticFieldName=
"exceedslimit";U.outStatistics=[ia];la=this.queryFeatures(U).promise.then(function(ua){sa.resolve(ua)}).otherwise(function(ua){sa.reject(ua)})}),0);return sa.promise}},_isAutoModeEnabled:function(){return this.mode===Ca.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var Y=this._editable,la=h.trim(this.capabilities||""),sa=g.map(la?la.split(","):[],h.trim),U=g.map(la?la.toLowerCase().split(","):[],h.trim);la=g.indexOf(U,"editing");var ia;U={Create:g.indexOf(U,"create"),Update:g.indexOf(U,
"update"),Delete:g.indexOf(U,"delete")};if(Y&&-1===la)sa.push("Editing");else if(!Y&&-1<la){Y=[la];for(ia in U)-1<U[ia]&&Y.push(U[ia]);Y.sort();for(ia=Y.length-1;0<=ia;ia--)sa.splice(Y[ia],1)}this.capabilities=sa.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(Y){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var la=this._mode;
la&&(la.suspend(),Y&&la.destroy())},onResume:function(Y){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",h.hitch(this,this._evalRefresh));var la=this._map,sa=this._getRenderer();if(Y.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||sa&&(sa.latestObservationRenderer||sa.trackRenderer))&&
(this._trackManager=new qa(this),this._trackManager.initialize(la),this._childLayer=this._trackManager.container),sa&&"colors"in sa&&"blurRadius"in sa&&"maxPixelIntensity"in sa&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new T(this),this._heatmapManager.initialize(la)),this._zoomConnect=c.connect(la,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),sa=this._mode)sa._init||sa.initialize(la),sa.startup()}else this._zoomEndHandler(),this._mode&&
this._mode.resume()},_zoomEndHandler:function(){var Y=this._map;this._updateMaxOffset();this._prevScale=Y.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var Y=this._map;Y&&Y.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(Y=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=Y!=this.getMaxAllowableOffset())):this._setMaxOffset(Y.extent.getWidth()/Y.width,!Y.extent.spatialReference.isWebMercator()))},
_getMaxOffsetForScale:function(){if(this._map){var Y=this._map.getScale(),la=this._calculatedScale,sa=this._calcMaxOffset,U=this._prevScale;return Y>=la&&(null==U||U<la)?sa:Y<la&&(null==U||U>=la)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var Y=this._map;if(Y&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var la=this.generalizeForScale;this._calculatedScale=la=this.maxScale?this.maxScale:this.minScale?
Math.min(la,this.minScale):Math.min(la,X.getScale(Y,this.initialExtent));this._calcMaxOffset=Y.extent.getWidth()/Y.width/Y.getScale()*la}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(Y){var la=this._map;Y&&this.timeInfo&&this.useMapTime&&la?(this._mapTimeExtent=la.timeExtent,this._timeConnect||(this._timeConnect=c.connect(la,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,c.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(Y){this._mapTimeExtent=
Y;(Y=this._mode)&&Y.propertyChangeHandler(0)},_getOffsettedTE:function(Y){var la=this._timeOffset,sa=this._timeOffsetUnits;return Y&&la&&sa?Y.offset(-1*la,sa):Y},_getTimeOverlap:function(Y,la){return Y&&la?Y.intersection(la):Y||la},_getTimeFilter:function(Y){var la=this.getTimeDefinition();if(la){var sa=this._getTimeOverlap(la,null);if(!sa)return[!1]}if(Y){if(Y=sa?this._getTimeOverlap(Y,sa):Y,!Y)return[!1]}else Y=sa;return[!0,Y]},_getAttributeFilter:function(Y){var la=[],sa=this.getDefinitionExpression();
sa&&la.push(sa);Y&&la.push(Y);this.subtypeField&&this.subtypeCode&&la.push(this.subtypeField+" \x3d "+this.subtypeCode);1<la.length&&(la=g.map(la,function(U){return"("+U+")"}));return la.length?la.join(" AND "):null},_applyQueryFilters:function(Y,la){Y.where=this._getAttributeFilter(Y.where);Y.returnGeometry&&null==Y.maxAllowableOffset&&!Y.quantizationParameters&&(Y.maxAllowableOffset=this._maxOffset,Y.quantizationParameters=this._quantizationParameters);la&&this.supportsAdvancedQueries&&(Y.orderByFields=
Y.orderByFields||this.getOrderByFields());if(this.timeInfo){var sa=this._getTimeFilter(Y.timeExtent);if(sa[0])Y.timeExtent=sa[1];else return!1}return!0},_add:function(Y){var la=this._selectionSymbol,sa=Y.attributes,U=this.visibilityField;la&&this._isSelOnly&&Y.setSymbol(la);if(U&&sa&&sa.hasOwnProperty(U))Y[sa[U]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(Y,la){var sa=[],U=this._map,ia;if((this._collection||
!this._isTable&&U)&&!(Y.text||Y.where&&Y.where!==this.getDefinitionExpression()||Y.orderByFields&&Y.orderByFields.length&&(ia=this.getOrderByFields()||[])&&Y.orderByFields.join()!==ia.join()||Y.outStatistics||Y.returnDistinctValues)){ia=this._isSnapshotMode();var ua=this._isSelOnly;U=ia?null:la?this._getExtentOfTiles(U.extent):U.extent;var wa=Y.geometry;if(wa){if(ua||Y.spatialRelationship!==L.SPATIAL_REL_INTERSECTS||"extent"!==wa.type||!ia&&!U.contains(wa))return;sa.push(1)}if(U=Y.objectIds)if(ia)sa.push(2);
else{wa=U.length;var Fa=this._mode,Da=0,La;for(La=0;La<wa;La++)Fa._getFeature(U[La])&&Da++;if(Da===wa)sa.push(2);else return}if(this.timeInfo)if(U=Y.timeExtent,wa=this._mapTimeExtent,ia)U&&sa.push(3);else if(ua){if(U)return}else if(wa)if(-1!==g.indexOf(sa,2))U&&sa.push(3);else if(-1!==g.indexOf(sa,1))U==wa&&sa.push(3);else return;else if(0<sa.length)U&&sa.push(3);else if(U)return;return 0<sa.length?sa:null}},_getAbsMid:function(Y){return D.toAbsMid?D.toAbsMid(Y):B.id.replace(/\/[^\/]*$/ig,"/")+Y},
_doQuery:function(Y,la,sa){var U=[],ia=this.objectIdField,ua=this,wa=new l,Fa=new l,Da=this.graphics;if(-1!==g.indexOf(la,1)){var La=this.spatialIndex||this._map&&this._map.spatialIndex,Wa,Va=Y.geometry._normalize(null,!0);null==La&&fa.autoSpatialIndexing?Wa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(h.hitch(this,h.partial(this._getFromIndex,Va,La)),function(Ma){Fa.resolve(h.hitch(this,h.partial(this._filterByExtent,Da,Va)))}):La&&(Wa=this._getFromIndex(Va,La));Wa?
Wa.then(function(Ma){for(var eb=0;eb<Ma.length;eb++)Ma[eb].results&&(U=U.concat(Ma[eb].results));Fa.resolve(U)}).otherwise(function(Ma){Fa.reject(Ma)}):Fa.resolve(this._filterByExtent(Da,Va))}else Fa.resolve(Da);Fa.then(function(Ma){U=Ma;if(-1!==g.indexOf(la,2)){var eb=Y.objectIds;U=g.filter(U,function(ib){return-1<g.indexOf(eb,ib.attributes[ia])})}-1!==g.indexOf(la,3)&&ua.timeInfo&&(Ma=Y.timeExtent,U=ua._filterByTime(U,Ma.startTime,Ma.endTime).match);sa&&(U=g.map(U,function(ib){return ib.attributes[ia]},
this));wa.resolve(U)});return wa},_getFromIndex:function(Y,la){la=la||this.spatialIndex||this._map.spatialIndex;Y instanceof Array||(Y=[Y]);var sa=this.id;return m(g.map(Y,function(U){return la.intersects(U,sa)}))},_filterByExtent:function(Y,la){for(var sa=[],U=0,ia=Y.length;U<ia;U++){var ua=Y[U],wa=ua.geometry;wa&&(this.normalization&&la.length?(la[0].intersects(wa)||la[1].intersects(wa))&&sa.push(ua):la.intersects(wa)&&sa.push(ua))}return sa},_filterByTime:function(Y,la,sa){var U=this._startTimeField,
ia=this._endTimeField,ua;this._twoTimeFields||(ua=U||ia);var wa=z.isDefined,Fa=[],Da=[],La,Wa=Y.length;la=la?la.getTime():-Infinity;sa=sa?sa.getTime():Infinity;if(ua)for(La=0;La<Wa;La++){var Va=Y[La];var Ma=Va.attributes;U=Ma[ua];U>=la&&U<=sa?Fa.push(Va):Da.push(Va)}else for(La=0;La<Wa;La++)Va=Y[La],Ma=Va.attributes,ua=Ma[U],Ma=Ma[ia],ua=wa(ua)?ua:-Infinity,Ma=wa(Ma)?Ma:Infinity,ua>=la&&ua<=sa||Ma>=la&&Ma<=sa||la>=ua&&sa<=Ma?Fa.push(Va):Da.push(Va);return{match:Fa,noMatch:Da}},_getSizeVariables:function(Y){return Y&&
g.filter(Y.getVisualVariablesForType("sizeInfo",!1),function(la){return!(!la.field&&!la.valueExpression)})},_needClientSideSorting:function(Y){return this._collection?!(!Y||!Y.length):g.some(Y,function(la){return!!la.valueExpression})},_sortFeatures:function(Y){var la=this.renderer,sa=this._getSizeVariables(la);if(Y&&1<Y.length&&this._needClientSideSorting(sa)){var U=sa[0],ia=this;Y.sort(function(ua,wa){ua._layer||(ua._layer=ia);wa._layer||(wa._layer=ia);var Fa=la._getDataValue(ua,U,"sizeInfo"),Da=
la._getDataValue(wa,U,"sizeInfo");return null==Fa?-1:null==Da?1:Da-Fa})}return Y},_resolve:function(Y,la,sa,U,ia){la&&this[la].apply(this,Y);sa&&sa.apply(null,Y);U&&x._resDfd(U,Y,ia)},_getShallowClone:function(Y){var la=new L,sa;for(sa in Y)Y.hasOwnProperty(sa)&&(la[sa]=Y[sa]);return la},_canFetchPBF:function(){return!!(Ya&&Xa&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(Y){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(Y)&&this._isAutoSnapshotMode()||!(Y.quantizationParameters||
!this.isEditable()&&this.supportsQuantizationEditMode)||Y.outStatistics)},_enableEditModeQuantization:function(Y,la){Y&&la&&!Y.quantizationParameters&&(Y.quantizationParameters={mode:"edit"})},_enableCacheHint:function(Y,la){var sa=this.advancedQueryCapabilities;sa&&sa.supportsQueryWithCacheHint?null==Y.cacheHint&&(Y.cacheHint=!0):sa&&sa.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!Y.resultType&&(Y.resultType=la||"coherent")},_isCacheHintSupported:function(){var Y=this.advancedQueryCapabilities;
return Y?!!(Y.supportsQueryWithCacheHint||Y.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(Y){var la=this.advancedQueryCapabilities;return Y&&la?!!(la.supportsQueryWithCacheHint&&Y.cacheHint||la.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===Y.resultType||"tile"===Y.resultType)):!1},_query:function(Y,la,sa,U,ia,ua){var wa=this,Fa=this._map;ua=ua&&ua.snapToTiles;var Da=new l(x._dfdCanceller),La=sa,Wa,Va,Ma;if("executeRelationshipQuery"!==
Y){La=this._getShallowClone(sa);var eb=this.getOutFields();La.outFields||(La.outFields=eb);La.outFields&&La.outFields.length&&(Va=-1<g.indexOf(eb,"*")?!1:!g.every(La.outFields,function(lb){return-1<g.indexOf(eb,lb)}));La.returnGeometry=sa.hasOwnProperty("returnGeometry")?sa.returnGeometry:!sa.outStatistics;La.returnGeometry&&(La.multipatchOption=this.multipatchOption,null!=La.maxAllowableOffset||La.quantizationParameters)&&(sa=null!=La.maxAllowableOffset?La.maxAllowableOffset:La.quantizationParameters.tolerance,
null!=sa&&sa!==this.getMaxAllowableOffset()&&(Ma=!0));Fa&&(Fa=Fa&&Fa.spatialReference,(sa=La.outSpatialReference)?Wa=!sa.equals(Fa):La.outSpatialReference=new v(Fa.toJson()));ua&&(Fa=La.geometry)&&"extent"===Fa.type&&(La.geometry=this._getExtentOfTiles(Fa),Fa!==La.geometry&&this._enableCacheHint(La));if(!this._applyQueryFilters(La,"execute"===Y&&!La.outStatistics)){switch(Y){case "execute":var ib=new K({features:[]});break;case "executeForIds":ib=[];break;case "executeForCount":ib=0;break;case "executeForExtent":ib=
{}}this._resolve([ib],la,U,Da);return Da}if(ua="executeForExtent"!==Y&&!Wa&&!Va&&!Ma&&this._canDoClientSideQuery(La,ua))return Da._pendingDfd=d(this._doQuery(La,ua,"executeForIds"===Y||"executeForCount"===Y)),Da._pendingDfd.then(function(lb){switch(Y){case "execute":ib=new K;ib.features=lb;break;case "executeForIds":ib=lb;break;case "executeForCount":ib=lb.length}wa._resolve([ib],la,U,Da)}),Da}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,ia,Da,
!0),Da;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,ia,Da,!0),Da;this._ts&&(La._ts=(new Date).getTime());ua="execute"===Y&&this._canFetchPBFForQuery(La);this._enableEditModeQuantization(La,ua);(Da._pendingDfd=this._task[Y](La,null,null,ua?{format:"pbf"}:null)).addCallbacks(function(lb){var rb=!!La.outStatistics||Wa||Va||Ma;if("execute"===Y||"executeRelationshipQuery"===Y)if("execute"===Y){var sb=lb.features;var tb=sb.length;for(--tb;0<=
tb;tb--)if(sb[tb]._layer=wa,!rb&&!wa._isTable){var Ab=wa._mode._getFeature(sb[tb].attributes[wa.objectIdField]);Ab&&sb.splice(tb,1,Ab)}}else for(Ab in lb)if(lb.hasOwnProperty(Ab))for(sb=lb[Ab].features,tb=sb.length,--tb;0<=tb;tb--)sb[tb]._layer=wa;wa._resolve([lb],la,U,Da)},function(lb){wa._resolve([lb],null,ia,Da,!0)});return Da},_getExtentOfTiles:function(Y){var la=this._isOnDemandMode()&&this._mode._gridLayer||ha.createFromFeatureLayer({layer:this}),sa=this.getMap();sa=sa&&sa.getTargetExtent(Y);
return la&&sa&&la.getExtentOfIntersectingCells(sa)||Y},_convertFeaturesToJson:function(Y,la,sa,U){var ia=[],ua=this._selectionSymbol,wa=this.visibilityField,Fa,Da=this.objectIdField;this.loaded&&(sa||U)&&(Fa=g.filter(this.fields,function(ib){return!1===ib.editable&&(!U||ib.name!==Da)}));for(sa=0;sa<Y.length;sa++){var La=Y[sa],Wa={},Va=La.geometry,Ma=La.attributes,eb=La.symbol;!Va||U&&this.loaded&&!this.allowGeometryUpdates||(Wa.geometry=Va.toJson());wa?(Wa.attributes=Ma=h.mixin({},Ma),Ma[wa]=La.visible?
1:0):Ma&&(Wa.attributes=h.mixin({},Ma));Wa.attributes&&Fa&&Fa.length&&g.forEach(Fa,function(ib){delete Wa.attributes[ib.name]});eb&&eb!==ua&&(Wa.symbol=eb.toJson());ia.push(Wa)}return la?ia:e.toJson(ia)},_selectHandler:function(Y,la,sa,U,ia){switch(la){case Ca.SELECTION_NEW:this.clearSelection(!0);var ua=!0;break;case Ca.SELECTION_ADD:ua=!0;break;case Ca.SELECTION_SUBTRACT:ua=!1}U=Y.features;var wa=this._mode,Fa=[],Da=this.objectIdField;if(ua)for(ua=0;ua<U.length;ua++){var La=U[ua];var Wa=La.attributes[Da];
La=wa._addFeatureIIf(Wa,La);Fa.push(La);this._selectFeatureIIf(Wa,La,wa)}else for(ua=0;ua<U.length;ua++)La=U[ua],Wa=La.attributes[Da],this._unSelectFeatureIIf(Wa,wa),Wa=wa._removeFeatureIIf(Wa),Fa.push(Wa||La);this._isSelOnly&&wa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===Y.exceededTransferLimit&&(Y.exceededTransferLimit=U.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!Y.exceededTransferLimit;this._resolve([Fa,la,Y.exceededTransferLimit?{queryLimitExceeded:!0}:
null],"onSelectionComplete",sa,ia);if(Y.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(Y,la,sa){var U=this._selectedFeatures,ia=U[Y];ia||(sa._incRefCount(Y),U[Y]=la,this._isTable||(this._setSelectSymbol(la),la.attr("data-selected","")));return ia||la},_unSelectFeatureIIf:function(Y,la){var sa=this._selectedFeatures[Y];sa&&(la._decRefCount(Y),delete this._selectedFeatures[Y],this._isTable||(this._setUnSelectSymbol(sa),sa.attr("data-selected")));return sa},_setSelectSymbol:function(Y){var la=
this._selectionSymbol;la&&!this._isSelOnly&&Y.setSymbol(la)},_setUnSelectSymbol:function(Y){var la=this._selectionSymbol;la&&!this._isSelOnly&&la===Y.symbol&&Y.setSymbol(null,!0)},_getOutFields:function(){var Y=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);Y=g.filter(Y,function(sa,U,ia){return!!sa&&g.indexOf(ia,sa)===U});var la=h.clone(this._outFields);if(la){if(-1!==g.indexOf(la,
"*"))return la;g.forEach(Y,function(sa){-1===g.indexOf(la,sa)&&la.push(sa)});return la}return Y},_checkFields:function(Y){var la=Y||this._getOutFields();g.forEach(la,function(sa){"*"!==sa&&this._getField(sa)},this);Y||this._isTable||this._fserver||this._collection||this._isStream||g.some(this.fields,function(sa){return sa&&"esriFieldTypeGeometry"===sa.type?!0:!1})},_fixFieldCase:function(Y,la,sa){var U=Y&&Y[la],ia;if(U&&!h.isFunction(U)){if(ia=!this._getField(U)&&this._getField(U,!0))U=Y[la]=ia.name;
sa&&sa.push(U)}return U},_fixRendererFields:function(){var Y=this.renderer;this._orderBy=null;this._requiredFields=[];if(Y&&0<this.fields.length){var la=[],sa;Y=g.filter([Y,Y.observationRenderer,Y.latestObservationRenderer,Y.trackRenderer],z.isDefined);var U=[].concat(Y);g.forEach(Y,function(ia){g.forEach(ia.rendererInfos,function(ua){ua.renderer&&U.push(ua.renderer)})});g.forEach(U,function(ia){this._fixFieldCase(ia,"attributeField",la);this._fixFieldCase(ia,"attributeField2",la);this._fixFieldCase(ia,
"attributeField3",la);this._fixFieldCase(ia.rotationInfo,"field",la);(sa=this._fixFieldCase(ia.sizeInfo,"field",la))&&!this._orderBy&&(this._orderBy=[sa+" DESC"]);this._fixFieldCase(ia.sizeInfo,"normalizationField",la);this._fixFieldCase(ia.colorInfo,"field",la);this._fixFieldCase(ia.colorInfo,"normalizationField",la);this._fixFieldCase(ia.field,"field",la);this._fixFieldCase(ia.opacityInfo,"field",la);this._fixFieldCase(ia.opacityInfo,"normalizationField",la);g.forEach(ia.visualVariables,function(wa){sa=
this._fixFieldCase(wa,"field",la);"sizeInfo"===wa.type&&sa&&!this._orderBy&&(this._orderBy=[sa+" DESC"]);this._fixFieldCase(wa,"normalizationField",la)},this);var ua=g.map(this.fields,function(wa){return wa.name},this);ua=g.map(ia.getFieldsUsedInExpressions(ua),function(wa){var Fa=this.getField(wa);return Fa?Fa.name:wa},this);la=la.concat(ua);this._orderBy||!ia.addBreak||h.isFunction(ia.attributeField)||!ia.backgroundFillSymbol&&!this._hasSizeDiff(ia)||(this._orderBy=[ia.attributeField+" DESC"])},
this);this._requiredFields=g.filter(la,z.isDefined)}},_hasSizeDiff:function(Y){var la=Number.MAX_VALUE,sa=-Number.MAX_VALUE,U,ia;g.forEach(Y.infos,function(ua){if(ia=ua.symbol){U=0;switch(ia.type){case "simplemarkersymbol":U=ia.size;break;case "picturemarkersymbol":U=(ia.width+ia.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":U=ia.width;break;case "simplefillsymbol":case "picturefillsymbol":U=ia.outline&&ia.outline.width}U&&(la=Math.min(la,U),sa=Math.max(sa,U))}});return la!==
Number.MAX_VALUE&&sa!==-Number.MAX_VALUE&&1<Math.abs(sa-la)},getOrderByFields:function(){var Y=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&Y?g.filter(Y,function(la){la=la.split(" ")[0];return!!this._getField(la,!0)},this):null},_createFields:function(Y){var la=Y?Y.length:0,sa,U=[];for(sa=0;sa<la;sa++)U.push(new M(Y[sa]));this.fields=U},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var Y=this.fields,la=Y?Y.length:0;if(50<la&&this._canUseFieldsIndex()){var sa=new Map;
for(var U=new Map,ia=0;ia<la;ia++){var ua=Y[ia];sa.set(ua.name,ua);U.set(ua.name.toLowerCase(),ua)}sa={caseSensitive:sa,caseInsensitive:U}}this._fieldsIndex=sa;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var Y=q.Map;return!("function"!==typeof q.Proxy||"function"!==typeof q.Proxy.revocable||"function"!==typeof Y||!Y.prototype||"function"!==typeof Y.prototype.set)},_getField:function(Y,la){var sa=this.fields;if(!sa||0===sa.length)return null;la&&(Y=Y.toLowerCase());this._createFieldsIndex();
var U=this._fieldsIndex;if(U)return U=la?U.caseInsensitive:U.caseSensitive,U.get(Y);var ia;g.some(sa,function(ua){var wa=!1;(wa=la?ua&&ua.name.toLowerCase()===Y?!0:!1:ua&&ua.name===Y?!0:!1)&&(ia=ua);return wa});return ia},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:g.map(g.filter(this.fields,function(Y){return!(!Y||"esriFieldTypeDate"!==Y.type)}),function(Y){return Y.name})});return this._dtOpts},_applyNormalized:function(Y,la){Y&&la&&g.forEach(Y,function(sa,U){sa&&la[U]&&sa.setGeometry(la[U])})},
_editHandler:function(Y,la,sa,U,ia,ua){ia=Y.addResults;var wa=Y.updateResults;Y=Y.deleteResults;var Fa,Da=this.objectIdField,La=this._mode,Wa=this._isTable;var Va=this.editFieldsInfo;var Ma=this.getOutFields()||[];var eb=Va&&Va.creatorField,ib=Va&&Va.creationDateField,lb=Va&&Va.editorField,rb=Va&&Va.editDateField;Va=Va&&Va.realm;-1===g.indexOf(Ma,"*")&&(eb&&-1===g.indexOf(Ma,eb)&&(eb=null),ib&&-1===g.indexOf(Ma,ib)&&(ib=null),lb&&-1===g.indexOf(Ma,lb)&&(lb=null),rb&&-1===g.indexOf(Ma,rb)&&(rb=null));
var sb=ib||rb?(new Date).getTime():null,tb=eb||lb?this.getUserId():void 0;tb&&Va&&(tb=tb+"@"+Va);if(ia){var Ab=this.globalIdField;for(Va=0;Va<ia.length;Va++)if(ia[Va]=new Ea(ia[Va]),!Wa){var Cb=ia[Va];if(Cb.success){var nb=Cb.objectId;Ma=la[Va];(Fa=Ma._graphicsLayer)&&Fa!==this&&Fa.remove(Ma);Fa=Ma.attributes||{};Fa[Da]=nb;nb=Cb.globalId;Ab&&nb&&(Fa[Ab]=nb);eb&&(Fa[eb]=tb);lb&&(Fa[lb]=tb);ib&&(Fa[ib]=sb);rb&&(Fa[rb]=sb);Ma.setAttributes(Fa);La._init&&La.drawFeature(Ma)}}}if(wa)for(Va=0;Va<wa.length;Va++)if(wa[Va]=
new Ea(wa[Va]),!Wa&&(Cb=wa[Va],Cb.success)){nb=Cb.objectId;Ma=sa[nb];if(la=La._getFeature(nb))la.geometry!==Ma.geometry&&Ma.geometry&&la.setGeometry(ba.fromJson(Ma.geometry.toJson())),la.attributes!==Ma.attributes&&Ma.attributes&&la.setAttributes(h.mixin(la.attributes,Ma.attributes)),this._repaint(la,nb);Ma=la||Ma;Fa=Ma.attributes||{};lb&&(Fa[lb]=tb);rb&&(Fa[rb]=sb);Ma.setAttributes(Fa)}if(Y){sa=[];for(Va=0;Va<Y.length;Va++)if(Y[Va]=new Ea(Y[Va]),!Wa&&(Cb=Y[Va],Cb.success&&(nb=Cb.objectId,Ma=La._getFeature(nb))))this._unSelectFeatureIIf(nb,
La)&&sa.push(Ma),Ma._count=0,La._removeFeatureIIf(nb);if(0<sa.length)this.onSelectionComplete(sa,Ca.SELECTION_SUBTRACT)}this._resolve([ia,wa,Y],"onEditsComplete",U,ua)},_sendAttachment:function(Y,la,sa,U,ia){var ua=this;return w({url:this._url.path+"/"+la+"/"+("add"===Y?"addAttachment":"updateAttachment"),form:sa,content:h.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(wa){var Fa="add"===Y?"onAddAttachmentComplete":
"onUpdateAttachmentComplete";wa=new Ea(wa["add"===Y?"addAttachmentResult":"updateAttachmentResult"]);wa.attachmentId=wa.objectId;wa.objectId=la;ua._resolve([wa],Fa,U);return wa}).addErrback(function(wa){ua._resolve([wa],null,ia,null,!0)})},_repaint:function(Y,la,sa){la=z.isDefined(la)?la:Y.attributes[this.objectIdField];la in this._selectedFeatures&&this._selectionSymbol||Y.setSymbol(Y.symbol,sa)},_getKind:function(Y){var la=this._trackManager;return la?la.isLatestObservation(Y)?1:0:0}});h.mixin(Ca,
{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});S._createWrappers(Ca);Object.defineProperty(Ca.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(Y){this._graphicsVal=Y}});Object.defineProperty(Ca.prototype,"name",
{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(Y){this._name=Y;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Ca.prototype,"fields",{get:function(){return this._fields},set:function(Y){Y&&this._canUseFieldsIndex()&&(Y=new Proxy(Y,{set:h.hitch(this,function(la,sa,U){if(sa)if("length"===sa)this._fieldsIndexDirty=!0;else{var ia=Number(sa);"number"!==typeof ia||isNaN(ia)||(this._fieldsIndexDirty=!0)}la[sa]=
U;return!0})}));this._fields=Y;this._fieldsIndexDirty=!0}});h.setObject("layers.FeatureLayer",Ca,t);return Ca})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(D,B,a){var c=D.forEach;return function(h){function g(q,m){f[m]=q;b.progress([q,m]);0===--d&&b.resolve(f)}var e,l;h instanceof Array?l=h:h&&"object"===typeof h&&(e=h);var r=[];if(e){l=[];for(var k in e)Object.hasOwnProperty.call(e,k)&&(r.push(k),l.push(e[k]));var f={}}else l&&(f=[]);if(!l||!l.length)return(new B).resolve(f);
var b=new B;b.promise.always(function(){f=r=null});var d=l.length;c(l,function(q,m){e||r.push(m);a(q,function(n){b.isFulfilled()||g(n,r[m])},function(n){b.isFulfilled()||g(n,r[m])})});return b.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(D,B,a,c,h,g,e){D=D(e,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(l,r){if(l&&!l.declaredClass){var k=l;this.symbol=
(l=k.symbol)&&(l.declaredClass?l:g.fromJson(l,r));this.label=k.label;this.description=k.description}else this.symbol=l},getSymbol:function(l){return this.symbol},toJson:function(){var l=B.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return h.fixJson(l)}});B.setObject("renderer.SimpleRenderer",D,c);return D})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(D,B,a,c,h,g,e,l,r,k){var f=Math.PI;D=D(null,{declaredClass:"esri.renderer.Renderer",constructor:function(b){this._cache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var d=b.rotationType,q=b.rotationExpression;if(d||q)this.rotationInfo={type:d,expression:q}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));
this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=B.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var d=b.minSize,q=b.maxSize;d&&(b.minSize="number"===typeof d?h.pt2px(d):this._readSizeInfo(d));q&&(b.maxSize="number"===typeof q?h.pt2px(q):this._readSizeInfo(q));b.stops&&a.forEach(b.stops,function(m){m.size&&"number"===typeof m.size&&(m.size=h.pt2px(m.size))})}return b},_readColorInfo:function(b){b&&
(a.forEach(b.colors,function(d,q){B.isArray(d)&&(b.colors[q]=e.toDojoColor(d))}),a.forEach(b.stops,function(d,q){d.color&&B.isArray(d.color)&&(b.stops[q].color=e.toDojoColor(d.color))}));return b},_readOpacityInfo:function(b){if(b){var d=B.mixin({},b);d.transparencyValues&&(d.opacityValues=a.map(d.transparencyValues,function(q){return 1-q/100}),delete d.transparencyValues);d.stops&&(d.stops=a.map(d.stops,function(q){q=B.mixin({},q);q.opacity=1-q.transparency/100;delete q.transparency;return q}))}return d},
_readVariables:function(b){b&&(b=a.map(b,function(d){"sizeInfo"===d.type?d=this._readSizeInfo(d):"colorInfo"===d.type?d=this._readColorInfo(d):"transparencyInfo"===d.type&&(d=this._readOpacityInfo(d),d.type="opacityInfo");return d},this));return b},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!B.isFunction(b.expression)&&!b.field){var d=b.expression.match(this.rotationRE);d&&d[1]&&(b.field=d[1])}b.rotationType=
b.type}this._cache.rotationInfo=this._processRotationInfo(b);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(b){b&&!b.rotationType&&(b.rotationType="geographic");return this._createCache(b)},getRotationAngle:function(b,d){var q=this._getVarInfo(d&&d.rotationInfo,"rotationInfo"),m=q.variable;q=this._cache[q.cacheKey];var n="arithmetic"===this._getRotationType(m),t=q&&q.hasExpr,z=null;if(m.field||t)z=this._getDataValue(b,m,null,q),null!=z&&(z=(z+(n?-90:0))*(n?-1:1));return z},
_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},_getDataValue:function(b,d,q,m,n){m||(m=this._getVarInfo(d,q),d=m.variable,m=this._cache[m.cacheKey],"sizeInfo"===q&&(m=m.root));return b._getDataValue(d,m,r,n)},setVisualVariables:function(b){var d=this._cache;a.forEach(this.visualVariables,function(q,m){d.hasOwnProperty(m)&&(d[m]=null)},this);this.visualVariables=b;a.some(b,function(q){return!!q.target})&&b.sort(function(q,m){return q.target===m.target?0:q.target?
1:-1});a.forEach(b,function(q,m){"colorInfo"===q.type?d[m]=this._processColorInfo(q):"opacityInfo"===q.type?d[m]=this._processOpacityInfo(q):"sizeInfo"===q.type?d[m]=this._processSizeInfo(q):"rotationInfo"===q.type&&(d[m]=this._processRotationInfo(q))},this);return this},getVisualVariableValues:function(b){var d=this.visualVariables,q;d&&(q=a.map(d,function(m){switch(m.type){case "sizeInfo":var n=this.getSize(b,{sizeInfo:m});break;case "colorInfo":n=this.getColor(b,{colorInfo:m});break;case "opacityInfo":n=
this.getOpacity(b,{opacityInfo:m});break;case "rotationInfo":n=this.getRotationAngle(b,{rotationInfo:m})}return{variable:m,value:n}},this));return q},getFieldsUsedInExpressions:function(b){var d=[];a.forEach(this._getCacheObjects(),function(q){q.syntaxTree&&(d=d.concat(r.extractFieldNames(q.syntaxTree,b)))});d.sort();return a.filter(d,function(q,m){return 0===m||d[m-1]!==q})},hasGeometryOperations:function(){return a.some(this._getCacheObjects(),function(b){return b.syntaxTree?r.hasGeometryOperations(b.syntaxTree):
!1})},initializeArcadeEngine:function(){var b=[];a.forEach(this._getCacheObjects(),function(d){d.syntaxTree&&b.push(d.syntaxTree)});return k.initialize(b)},hasVisualVariables:function(b,d){return b?!!this.getVisualVariablesForType(b,d):!!(this.getVisualVariablesForType("sizeInfo",d)||this.getVisualVariablesForType("colorInfo",d)||this.getVisualVariablesForType("opacityInfo",d)||this.getVisualVariablesForType("rotationInfo",d))},getVisualVariablesForType:function(b,d){var q=this.visualVariables;if(!d&&
this[b]){"rotationInfo"===b&&(this[b].rotationType=this[b].type);var m=[this[b]]}else q&&(m=a.filter(q,function(n){return n.type===b&&("string"===typeof d?n.target===d:!1===d?!n.target:!0)}))&&0===m.length&&(m=void 0);return m},setSizeInfo:function(b){this.sizeInfo=this.proportionalSymbolInfo=b;this._cache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._createCache(b),minSize:this._createCache(b.minSize),maxSize:this._createCache(b.maxSize)}},_convertExpressionToArcade:function(b){b&&
b.expression&&(b.valueExpression="$view.scale")},_getVarInfo:function(b,d){if(b&&b.type===d){var q=a.indexOf(this.visualVariables,b);b=this.visualVariables[q]}else q=d,b=this[d];return{variable:b,cacheKey:q}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},getSize:function(b,d){var q=this._getVarInfo(d&&d.sizeInfo,"sizeInfo"),m=q.variable;q=this._cache[q.cacheKey];var n=null;if(m){var t=m.minSize;n=m.maxSize;t="object"===typeof t&&t?this._getSize(b,t,q&&q.minSize,d):t;n="object"===
typeof n&&n?this._getSize(b,n,q&&q.maxSize,d):n;n=this._getSize(b,m,q&&q.root,d,[t,n])}return n},_getSize:function(b,d,q,m,n){var t=d.stops,z=0,w=q&&q.hasExpr,y=q&&q.ipData,x=q&&q.isScaleDriven,A="object"===typeof b&&!!b,v="number"===typeof b?b:null;if(d.field||x||w){var u=m&&m.scale;w=n?n[0]:d.minSize;n=n?n[1]:d.maxSize;var C=d.minDataValue,E=d.maxDataValue,F=d.valueUnit||"unknown",G=d.valueRepresentation,H=d.scaleBy,J=m&&m.shape;x?v=u:"number"!==typeof v&&A&&(v=this._getDataValue(b,d,null,q));if(!this._isValidNumber(v))return null;
if(t)w=this._lookupData(v,y),v=w[0],n=w[1],v===n?z=t[v].size:(v=t[v].size,t=t[n].size,z=v+(t-v)*w[2]);else if(null!=w&&null!=n&&null!=C&&null!=E)v<=C?z=w:v>=E?z=n:(t=(v-C)/(E-C),"area"===H&&J?(w=(v="circle"===J)?f*Math.pow(w/2,2):w*w,t=w+t*((v?f*Math.pow(n/2,2):n*n)-w),z=v?2*Math.sqrt(t/f):Math.sqrt(t)):z=w+t*(n-w));else if("unknown"===F)null!=w&&null!=C&&(w&&C?(t=v/C,z="circle"===J?2*Math.sqrt(t*Math.pow(w/2,2)):"square"===J||"diamond"===J||"image"===J?Math.sqrt(t*Math.pow(w,2)):t*w):z=v+(w||C),
z=z<w?w:z,null!=n&&z>n&&(z=n));else{t=(m&&m.resolution?m.resolution:1)*this._meterIn[F];if("area"===G)z=Math.sqrt(v/f)/t,z*=2;else if(z=v/t,"radius"===G||"distance"===G)z*=2;null!=w&&z<w&&(z=w);null!=n&&z>n&&(z=n)}}else z=t&&t[0]&&t[0].size,null==z&&(z=d.minSize);return z=isNaN(z)?0:z},getSizeRangeAtScale:function(b,d){var q=this._getVarInfo(b,"sizeInfo"),m=this._cache[q.cacheKey],n={scale:d};if((b=q.variable)&&d){q=b.minSize;var t=b.maxSize,z=b.stops;z&&z.length?(q=z[0].size,m=z[z.length-1].size):
(q="object"===typeof q&&q?this._getSize({},q,m&&m.minSize,n):q,m="object"===typeof t&&t?this._getSize({},t,m&&m.maxSize,n):t);if(null!=q||null!=m){if(q>m){var w=m;m=q;q=w}w={minSize:q,maxSize:m}}}return w},setColorInfo:function(b){this.colorInfo=b;this._cache.colorInfo=this._processColorInfo(b);return this},_createCache:function(b,d){var q=l.createAttributeCache(b,d);q&&(q.ipData=this._interpolateData(b));return q},_getCacheObjects:function(b){var d;b=b||this._cache;var q=[];for(d in b){var m=b[d];
b.hasOwnProperty(d)&&m&&"object"===typeof m&&(m.hasOwnProperty("idSource")?q.push(m):q=q.concat(this._getCacheObjects(m)))}return q},_processColorInfo:function(b){b&&(a.forEach(b.colors,function(d,q){B.isArray(d)&&(b.colors[q]=new e(d))}),a.forEach(b.stops,function(d,q){d.color&&B.isArray(d.color)&&(b.stops[q].color=new e(d.color))}));return this._createCache(b)},getColor:function(b,d){var q=this._getVarInfo(d&&d.colorInfo,"colorInfo");return this._getColorComponent(b,q.variable,this._cache[q.cacheKey])},
setOpacityInfo:function(b){this.opacityInfo=b;this._cache.opacityInfo=this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._createCache(b)},getOpacity:function(b,d){var q=this._getVarInfo(d&&d.opacityInfo,"opacityInfo");return this._getColorComponent(b,q.variable,this._cache[q.cacheKey],!0)},_getColorComponent:function(b,d,q,m,n){var t="number"===typeof b?b:null,z=q&&q.hasExpr,w=q&&q.ipData,y;d&&d.field||z?("number"!==typeof t&&"object"===typeof b&&b&&(t=this._getDataValue(b,
d,null,q)),this._isValidNumber(t)||(t=null),null!=t&&(y=m?this._getOpacity(t,d,w):this._getColor(t,d,w))):d&&(b=d.stops,m?(y=b&&b[0]&&b[0].opacity,null==y&&(y=d.opacityValues&&d.opacityValues[0])):y=b&&b[0]&&b[0].color||d.colors&&d.colors[0]);n&&(n.data=t,n.value=y);return n||y},_isValidNumber:function(b){return"number"===typeof b&&!isNaN(b)&&Infinity!==b&&-Infinity!==b},_interpolateData:function(b){if(b)if(b.colors||b.opacityValues){var d=(b.colors||b.opacityValues).length,q=b.minDataValue,m=(b.maxDataValue-
q)/(d-1);var n=[];for(b=0;b<d;b++)n[b]=q+b*m}else b.stops&&(n=a.map(b.stops,function(t){return t.value}));return n},_getOpacity:function(b,d,q){b=this._lookupData(b,q);d=d||this.opacityInfo;if(b){q=b[0];var m=b[1];q===m?m=this._getOpacValue(d,q):(q=this._getOpacValue(d,q),d=this._getOpacValue(d,m),m=q+(d-q)*b[2])}return m},_getOpacValue:function(b,d){return b.opacityValues?b.opacityValues[d]:b.stops[d].opacity},_getColor:function(b,d,q){b=this._lookupData(b,q);d=d||this.colorInfo;if(b){var m=b[0];
q=b[1];m=m===q?this._getColorObj(d,m):e.blendColors(this._getColorObj(d,m),this._getColorObj(d,q),b[2])}return m},_getColorObj:function(b,d){return b.colors?b.colors[d]:b.stops[d].color},_lookupData:function(b,d){if(d){var q=0,m=d.length-1;a.some(d,function(t,z){if(b<t)return m=z,!0;q=z;return!1});var n=[q,m,(b-d[q])/(d[m]-d[q])]}return n},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,
"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=B.mixin({},b);this._convertExpressionToArcade(b);var d=b.minSize,q=b.maxSize;d&&(b.minSize="number"===typeof d?h.px2pt(d):this._writeSizeInfo(d));q&&(b.maxSize="number"===typeof q?h.px2pt(q):this._writeSizeInfo(q));if(d=b.legendOptions)if(b.legendOptions=B.mixin({},d),d=d.customValues)b.legendOptions.customValues=d.slice(0);b.stops&&(b.stops=a.map(b.stops,function(m){m=B.mixin({},m);m.size&&"number"===typeof m.size&&(m.size=h.px2pt(m.size));
return m}))}return b},_writeColorInfo:function(b){b&&(b=B.mixin({},b),b.colors&&(b.colors=a.map(b.colors,function(d){return e.toJsonColor(d)})),b.stops&&(b.stops=a.map(b.stops,function(d){d=B.mixin({},d);d.color&&(d.color=e.toJsonColor(d.color));return d})),b.legendOptions&&(b.legendOptions=B.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){if(b){var d=B.mixin({},b);d.opacityValues&&(d.transparencyValues=a.map(d.opacityValues,function(q){return 100*(1-q)}),delete d.opacityValues);
d.stops&&(d.stops=a.map(d.stops,function(q){q=B.mixin({},q);q.transparency=100*(1-q.opacity);delete q.opacity;return q}));d.legendOptions&&(d.legendOptions=B.mixin({},d.legendOptions))}return d},toJson:function(b){var d=this.visualVariables,q=B.clone(this.authoringInfo),m=b&&b.useLegacyRotationProperties,n=(b=(b=this.getVisualVariablesForType("rotationInfo",!1))&&b[0])&&b.field,t;b&&(b===this.rotationInfo||m)&&(t=b.expression||n&&(B.isFunction(n)?n:"["+n+"]"));d&&(d=a.map(d,function(z){"sizeInfo"===
z.type?z=this._writeSizeInfo(z):"colorInfo"===z.type?z=this._writeColorInfo(z):"opacityInfo"===z.type?(z=this._writeOpacityInfo(z),z.type="transparencyInfo"):"rotationInfo"===z.type&&(z=m?null:B.mixin({},z));return z},this),d=a.filter(d,function(z){return null!=z}));q&&a.forEach(q.visualVariables,function(z){"opacityInfo"===z.type&&(z.type="transparencyInfo")});return{rotationType:t&&(this._getRotationType(b)||"geographic"),rotationExpression:t,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:d,authoringInfo:q}}});B.setObject("renderer.Renderer",D,g);return D})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(D,B,a,c,h,g){var e={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(l){return"string"===typeof l?c(l,a.outputTypes.Hex):null},getAttributeIdSource:function(l){if(!l)return null;
var r=l.field,k=l.valueExpression,f=null;if(k)f=k;else if(D.isFunction(r))f=r.toString();else if(r){var b=(k=l.normalizationField)?"field":l.normalizationType;l=parseFloat(l.normalizationTotal);b&&(b=b.toLowerCase(),f=r.toLowerCase()+",norm:"+b,k?f+=","+k.toLowerCase():"percent-of-total"===b&&(r=l,"number"===typeof r&&!isNaN(r)&&Infinity!==r&&-Infinity!==r&&0!==l||(l=null),f+=","+l))}return f},createAttributeCache:function(l,r){if(!l)return null;var k=l.valueExpression,f=g.createSyntaxTree(k),b=e.getAttributeIdSource(l);
return{attributeInfo:l,isNumeric:!r,idSource:b,id:e.getAttributeId(b),hasExpr:!!k,compiledFunc:g.createFunction(f),syntaxTree:f,isScaleDriven:!!l.expression||e.viewScaleRE.test(k),dependsOnView:f?g.dependsOnView(f):!1,dependsOnGeometry:f?g.hasGeometryOperations(f):!1,isJSFunc:D.isFunction(l.field)}}};D.setObject("layers.support.attributeUtils",e,h);return e})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(D){D=D.getObject("dojox.encoding.digests",!0);D.outputTypes=
{Base64:0,Hex:1,String:2,Raw:3};D.addWords=function(B,a){var c=(B&65535)+(a&65535);return(B>>16)+(a>>16)+(c>>16)<<16|c&65535};D.stringToWord=function(B){for(var a=[],c=0,h=8*B.length;c<h;c+=8)a[c>>5]|=(B.charCodeAt(c/8)&255)<<c%32;return a};D.wordToString=function(B){for(var a=[],c=0,h=32*B.length;c<h;c+=8)a.push(String.fromCharCode(B[c>>5]>>>c%32&255));return a.join("")};D.wordToHex=function(B){for(var a=[],c=0,h=4*B.length;c<h;c++)a.push("0123456789abcdef".charAt(B[c>>2]>>c%4*8+4&15)+"0123456789abcdef".charAt(B[c>>
2]>>c%4*8&15));return a.join("")};D.wordToBase64=function(B){for(var a=[],c=0,h=4*B.length;c<h;c+=3)for(var g=(B[c>>2]>>c%4*8&255)<<16|(B[c+1>>2]>>(c+1)%4*8&255)<<8|B[c+2>>2]>>(c+2)%4*8&255,e=0;4>e;e++)8*c+6*e>32*B.length?a.push("\x3d"):a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>6*(3-e)&63));return a.join("")};D.stringToUtf8=function(B){for(var a="",c=-1,h,g;++c<B.length;)h=B.charCodeAt(c),g=c+1<B.length?B.charCodeAt(c+1):0,55296<=h&&56319>=h&&56320<=g&&57343>=
g&&(h=65536+((h&1023)<<10)+(g&1023),c++),127>=h?a+=String.fromCharCode(h):2047>=h?a+=String.fromCharCode(192|h>>>6&31,128|h&63):65535>=h?a+=String.fromCharCode(224|h>>>12&15,128|h>>>6&63,128|h&63):2097151>=h&&(a+=String.fromCharCode(240|h>>>18&7,128|h>>>12&63,128|h>>>6&63,128|h&63));return a};return D})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(D){function B(l,r){return l<<r|l>>>32-r}function a(l,r,k,f,b,d){return D.addWords(B(D.addWords(D.addWords(r,l),D.addWords(f,d)),
b),k)}function c(l,r,k,f,b,d,q){return a(r&k|~r&f,l,r,b,d,q)}function h(l,r,k,f,b,d,q){return a(r&f|k&~f,l,r,b,d,q)}function g(l,r,k,f,b,d,q){return a(k^(r|~f),l,r,b,d,q)}function e(l,r){l[r>>5]|=128<<r%32;l[(r+64>>>9<<4)+14]=r;for(var k=1732584193,f=-271733879,b=-1732584194,d=271733878,q=0;q<l.length;q+=16){var m=k,n=f,t=b,z=d;k=c(k,f,b,d,l[q+0],7,-680876936);d=c(d,k,f,b,l[q+1],12,-389564586);b=c(b,d,k,f,l[q+2],17,606105819);f=c(f,b,d,k,l[q+3],22,-1044525330);k=c(k,f,b,d,l[q+4],7,-176418897);d=c(d,
k,f,b,l[q+5],12,1200080426);b=c(b,d,k,f,l[q+6],17,-1473231341);f=c(f,b,d,k,l[q+7],22,-45705983);k=c(k,f,b,d,l[q+8],7,1770035416);d=c(d,k,f,b,l[q+9],12,-1958414417);b=c(b,d,k,f,l[q+10],17,-42063);f=c(f,b,d,k,l[q+11],22,-1990404162);k=c(k,f,b,d,l[q+12],7,1804603682);d=c(d,k,f,b,l[q+13],12,-40341101);b=c(b,d,k,f,l[q+14],17,-1502002290);f=c(f,b,d,k,l[q+15],22,1236535329);k=h(k,f,b,d,l[q+1],5,-165796510);d=h(d,k,f,b,l[q+6],9,-1069501632);b=h(b,d,k,f,l[q+11],14,643717713);f=h(f,b,d,k,l[q+0],20,-373897302);
k=h(k,f,b,d,l[q+5],5,-701558691);d=h(d,k,f,b,l[q+10],9,38016083);b=h(b,d,k,f,l[q+15],14,-660478335);f=h(f,b,d,k,l[q+4],20,-405537848);k=h(k,f,b,d,l[q+9],5,568446438);d=h(d,k,f,b,l[q+14],9,-1019803690);b=h(b,d,k,f,l[q+3],14,-187363961);f=h(f,b,d,k,l[q+8],20,1163531501);k=h(k,f,b,d,l[q+13],5,-1444681467);d=h(d,k,f,b,l[q+2],9,-51403784);b=h(b,d,k,f,l[q+7],14,1735328473);f=h(f,b,d,k,l[q+12],20,-1926607734);k=a(f^b^d,k,f,l[q+5],4,-378558);d=a(k^f^b,d,k,l[q+8],11,-2022574463);b=a(d^k^f,b,d,l[q+11],16,1839030562);
f=a(b^d^k,f,b,l[q+14],23,-35309556);k=a(f^b^d,k,f,l[q+1],4,-1530992060);d=a(k^f^b,d,k,l[q+4],11,1272893353);b=a(d^k^f,b,d,l[q+7],16,-155497632);f=a(b^d^k,f,b,l[q+10],23,-1094730640);k=a(f^b^d,k,f,l[q+13],4,681279174);d=a(k^f^b,d,k,l[q+0],11,-358537222);b=a(d^k^f,b,d,l[q+3],16,-722521979);f=a(b^d^k,f,b,l[q+6],23,76029189);k=a(f^b^d,k,f,l[q+9],4,-640364487);d=a(k^f^b,d,k,l[q+12],11,-421815835);b=a(d^k^f,b,d,l[q+15],16,530742520);f=a(b^d^k,f,b,l[q+2],23,-995338651);k=g(k,f,b,d,l[q+0],6,-198630844);d=
g(d,k,f,b,l[q+7],10,1126891415);b=g(b,d,k,f,l[q+14],15,-1416354905);f=g(f,b,d,k,l[q+5],21,-57434055);k=g(k,f,b,d,l[q+12],6,1700485571);d=g(d,k,f,b,l[q+3],10,-1894986606);b=g(b,d,k,f,l[q+10],15,-1051523);f=g(f,b,d,k,l[q+1],21,-2054922799);k=g(k,f,b,d,l[q+8],6,1873313359);d=g(d,k,f,b,l[q+15],10,-30611744);b=g(b,d,k,f,l[q+6],15,-1560198380);f=g(f,b,d,k,l[q+13],21,1309151649);k=g(k,f,b,d,l[q+4],6,-145523070);d=g(d,k,f,b,l[q+11],10,-1120210379);b=g(b,d,k,f,l[q+2],15,718787259);f=g(f,b,d,k,l[q+9],21,-343485551);
k=D.addWords(k,m);f=D.addWords(f,n);b=D.addWords(b,t);d=D.addWords(d,z)}return[k,f,b,d]}D.MD5=function(l,r){var k=r||D.outputTypes.Base64,f=e(D.stringToWord(l),8*l.length);switch(k){case D.outputTypes.Raw:return f;case D.outputTypes.Hex:return D.wordToHex(f);case D.outputTypes.String:return D.wordToString(f);default:return D.wordToBase64(f)}};D.MD5._hmac=function(l,r,k){k=k||D.outputTypes.Base64;var f=D.stringToWord(r);16<f.length&&(f=e(f,8*r.length));var b=[];r=[];for(var d=0;16>d;d++)b[d]=f[d]^
909522486,r[d]=f[d]^1549556828;l=e(b.concat(D.stringToWord(l)),512+8*l.length);l=e(r.concat(l),640);switch(k){case D.outputTypes.Raw:return l;case D.outputTypes.Hex:return D.wordToHex(l);case D.outputTypes.String:return D.wordToString(l);default:return D.wordToBase64(l)}};return D.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,B,a,c,h,g,e){function l(b){return b.replace(/[|\\{}()[\]^$+*?.]/g,
"\\$\x26")}var r={vars:{$feature:"any",$view:"any"}},k=/^\$(feature|aggregatedFeatures)\./i,f={_getSyntaxTree:function(b){return"string"===typeof b?f.createSyntaxTree(b):b},createSyntaxTree:function(b){try{var d=b?g.parseScript(b):null}catch(q){d=null}return d},createFunction:function(b,d){d=d||D.clone(r);var q=f._getSyntaxTree(b);try{var m=q?g.compileScript(q,d):null}catch(n){m=null}return m},createExecContext:function(b,d){return{vars:{$feature:b?e.createFromGraphic(b):new e,$view:d&&d.view},spatialReference:d&&
d.sr}},evalSyntaxTree:function(b,d){try{var q=g.executeScript(b,d)}catch(m){q=null}return q},executeFunction:function(b,d){try{var q=b?b(d):null}catch(m){q=null}return q},executeAsyncFunction:function(b,d){try{var q=b?b(d):(new c).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(m){q=(new c).reject(m)}return q},extractFieldNames:function(b,d){var q=f._getSyntaxTree(b);q=g.extractExpectedFieldLiterals(q);var m=[];B.forEach(q,function(t){k.test(t)&&
(t=t.replace(k,""),m.push(t))});var n=B.filter(m,function(t){return-1!==t.indexOf("*")});m=B.filter(m,function(t){return-1===n.indexOf(t)});d&&B.forEach(n,function(t){var z=new RegExp("^"+t.split(/\*+/).map(l).join(".*")+"$","i");B.forEach(d,function(w){z.test(w)&&m.push(w)})});m.sort();return B.filter(m,function(t,z){return 0===z||m[z-1]!==t})},dependsOnView:function(b){return f.hasVariable(b,"$view")},hasGeometryFunctions:function(b){return(b=f._getSyntaxTree(b))?g.scriptTouchesGeometry(b):!1},
hasGeometryOperations:function(b){return(b=f._getSyntaxTree(b))?g.scriptUsesGeometryEngine(b):!1},enableGeometryOperations:function(){return g.enableGeometrySupport()},hasVariable:function(b,d){var q=f._getSyntaxTree(b);return q?g.referencesMember(q,d):!1},hasFunction:function(b,d){var q=f._getSyntaxTree(b);return q?g.referencesFunction(q,d):!1},createFeatureSetFromLayer:function(b,d){d=d||{};var q=g.featureSetUtils();return q?q.constructFeatureSet(b,d.spatialReference,d.outFields,d.returnGeometry,
d.cache):null},createFeatureSetFromLayerUrl:function(b,d){d=d||{};var q=g.featureSetUtils();return q?q.constructFeatureSetFromUrlRaw(b,d.spatialReference,d.outFields,d.returnGeometry,d.cache):null},createFeatureSetCollectionFromMap:function(b,d){var q=g.featureSetUtils();return q?q.createFeatureSetCollectionFromMap(b,b.spatialReference,d&&d.cache):null},createFeatureSetCollectionFromServiceUrl:function(b,d){d=d||{};var q=g.featureSetUtils();return q?q.createFeatureSetCollectionFromService(b,d.spatialReference,
d.cache):null},hasFeatureSetOperations:function(b){return(b=f._getSyntaxTree(b))?g.scriptUsesFeatureSet(b):!1},enableFeatureSetOperations:function(){return g.enableFeatureSetSupport().then(function(){var b=g.featureSetUtils();b&&b.initialiseMetaDataCache()})},enableAsyncOperations:function(){return g.enableAsyncSupport()}};D.setObject("support.expressionUtils",f,h);return f})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils".split(" "),
function(D,B,a,c,h,g,e,l){function r(J,I){if(null===u)throw Error("Async Arcade must be enabled for this script");return e("esri-csp-restrictions")||!1===x?function(R){return u.executeScript(J,R)}:a.compileScript(J,I,!0)}function k(J,I){void 0===I&&(I=[]);return h.parseScript(J,I)}function f(J,I){if(!0===I.useAsync||!0===J.isAsync){if(null===u)throw Error("Async Arcade must be enabled for this script");return u.executeScript(J,I)}return c.executeScript(J,I)}function b(J,I){return c.referencesMember(J,
I)}function d(J,I){void 0===I&&(I=[]);void 0===J.usesGeometry&&g.findScriptDependencies(J,I);return!0===J.usesGeometry}function q(){return E?E:E=l.create(function(J,I){D(["../geometry/geometryEngine","./functions/geomsync"],function(R,O){v=!0;O.setGeometryEngine(R);J(!0)},function(R){I(R)})})}function m(){return null!==F?F:F=a.enableAsyncSupport().then(function(){return l.create(function(J,I){D(["./arcadeAsyncRuntime"],function(R){try{u=R;R=0;for(var O=C;R<O.length;R++){var P=O[R];u.extend(P);a.extend(P,
"async")}C=null;J(!0)}catch(L){I(L)}},I)})})}function n(){return u?!0:!1}function t(){return G?G:G=m().then(function(){return l.create(function(J,I){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(R,O,P,L,K){try{H=R,u.extend([O,P,L,K]),a.extend([O,P,L,K],"async"),A=!0,J(!0)}catch(Q){I(Q)}},I)})})}function z(J,I){void 0===I&&(I=[]);void 0===J.usesFeatureSet&&g.findScriptDependencies(J,I);return!0===
J.usesFeatureSet}function w(J,I){if(I)for(var R=0;R<I.length;R++)if(b(J,I[R]))return!0;return!1}Object.defineProperty(B,"__esModule",{value:!0});B.featureSetUtils=B.scriptTouchesGeometry=B.loadScriptDependencies=B.scriptIsAsync=B.scriptUsesFeatureSet=B.enableFeatureSetSupport=B.isGeometryEnabled=B.isAsyncEnabled=B.isFeatureSetSupportEnabled=B.enableAsyncSupport=B.enableGeometrySupport=B.scriptUsesGeometryEngine=B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.referencesFunction=B.referencesMember=
B.executeScript=B.parseAndExecuteScript=B.scriptCheck=B.validateScript=B.parseScript=B.extend=B.compileScript=void 0;var y="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),x=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(J){return!1}}(),A=!1,v=!1,u=null,C=[];B.compileScript=function(J,I){return!0===I.useAsync||!0===J.isAsync?r(J,I):e("esri-csp-restrictions")?function(R){return c.executeScript(J,
R)}:a.compileScript(J,I)};B.extend=function(J){c.extend(J);a.extend(J,"sync");null===u?C.push(J):(a.extend(J,"async"),u.extend(J))};B.parseScript=k;B.validateScript=function(J,I,R){void 0===R&&(R="");return h.validateScript(J,I,R)};B.scriptCheck=function(J,I,R,O){void 0===O&&(O="");return h.scriptCheck(J,I,R,O)};B.parseAndExecuteScript=function(J,I,R){void 0===R&&(R=[]);J=h.parseScript(J,R);return f(J,I)};B.executeScript=f;B.referencesMember=b;B.referencesFunction=function(J,I){return c.referencesFunction(J,
I)};B.extractFieldLiterals=function(J,I){void 0===I&&(I=!1);return h.extractFieldLiterals(J,I)};B.extractExpectedFieldLiterals=function(J){return h.extractExpectedFieldLiterals(J)};B.scriptUsesGeometryEngine=d;var E=null;B.enableGeometrySupport=q;var F=null;B.enableAsyncSupport=m;B.isFeatureSetSupportEnabled=function(){return A};B.isAsyncEnabled=n;B.isGeometryEnabled=function(){return v};var G=null;B.enableFeatureSetSupport=t;B.scriptUsesFeatureSet=z;B.scriptIsAsync=function(J,I){void 0===I&&(I=[]);
void 0===J.isAsync&&g.findScriptDependencies(J,I);return!0===J.isAsync};B.loadScriptDependencies=function(J,I,R,O){void 0===R&&(R=[]);void 0===O&&(O=!1);return l.create(function(P,L){var K="string"===typeof J?k(J):J,Q=[];K&&(!1===v&&(d(K)||O)&&Q.push(q()),!1===n()&&(!0===K.isAsync||I)&&Q.push(m()),!1===A&&(z(K)||w(K,R))&&Q.push(t()));Q.length?l.all(Q).then(function(){P(!0)},L):P(!0)})};B.scriptTouchesGeometry=function(J){if(d(J))return!0;J=g.findFunctionCalls(J);for(var I=!1,R=0;R<J.length;R++)if(-1<
y.indexOf(J[R])){I=!0;break}return I};var H=null;B.featureSetUtils=function(){return H}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C){function E(ha,qa,T){try{return T(ha,null,qa.arguments)}catch(Ha){throw Ha;}}function F(ha){return ha instanceof Error?z.reject(ha):z.reject(Error(ha))}function G(ha,qa){try{switch(qa.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return O(ha,qa);case "VariableDeclaration":for(var T=[],Ha=0;Ha<qa.declarations.length;Ha++)T.push(G(ha,qa.declarations[Ha]));return T.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return R(ha,qa);case "FunctionDeclaration":var Ja=qa.id.name.toLowerCase(),fa={isAsync:ha.isAsync,spatialReference:ha.spatialReference,console:ha.console,lrucache:ha.lrucache,interceptor:ha.interceptor,services:ha.services,symbols:ha.symbols,mangleMap:ha.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:ha.depthCounter+1,globalScope:ha.globalScope};if(64<fa.depthCounter)throw Error("Exceeded maximum function depth");T="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(Ha=0;Ha<qa.params.length;Ha++){var Ya=qa.params[Ha].name.toLowerCase(),Xa=aa(ha);fa.localScope._SymbolsMap[Ya]=Xa;fa.mangleMap[Ya]=Xa;T+="lscope['"+Xa+"']\x3darguments["+Ha.toString()+"];\n"}!0===ha.isAsync?(T=T+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(R(fa,qa.body)+"\n return lastStatement; "),T=T+"});  }, runtimeCtx),"+(qa.params.length+")")):T+=R(fa,qa.body)+"\n return lastStatement; }, runtimeCtx),"+qa.params.length+")";T+="\n lastStatement \x3d lc.voidOperation; \n";
if(void 0!==ha.globalScope[Ja])var Ca="gscope['"+Ja+"']\x3d"+T;else void 0!==ha.globalScope._SymbolsMap[Ja]?Ca="gscope['"+ha.globalScope._SymbolsMap[Ja]+"']\x3d"+T:(Xa=aa(ha),ha.globalScope._SymbolsMap[Ja]=Xa,ha.mangleMap[Ja]=Xa,Ca="gscope['"+Xa+"']\x3d"+T);return Ca;case "ReturnStatement":var Y=null===qa.argument?"return lc.voidOperation":"return "+G(ha,qa.argument);return Y;case "IfStatement":if("AssignmentExpression"===qa.test.type||"UpdateExpression"===qa.test.type)throw Error(k.nodeErrorMessage(qa.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var la=G(ha,qa.test),sa=M(ha),U="var "+sa+" \x3d "+la+";\n if ("+sa+" \x3d\x3d\x3d true) {\n"+I(ha,qa.consequent)+"\n }\n";U=null!==qa.alternate?U+("else if ("+sa+"\x3d\x3d\x3dfalse)   { \n"+I(ha,qa.alternate)+"}\n"):U+("else if ("+sa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return U+="else { lang.error({type: '"+qa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var ia="AssignmentExpression"===
qa.expression.type?"lastStatement \x3d lc.voidOperation; "+G(ha,qa.expression)+"; \n ":"lastStatement \x3d "+G(ha,qa.expression)+"; ";return ia;case "AssignmentExpression":return J(ha,qa);case "UpdateExpression":return H(ha,qa);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var ua=[];Ja=Ca=0;for(Ha=qa.quasis;Ja<Ha.length;Ja++){var wa=Ha[Ja];ua.push(wa.value?JSON.stringify(wa.value.cooked):JSON.stringify(""));!1===wa.tail&&(ua.push(qa.expressions[Ca]?
"lang.castString(lang.aCheck("+G(ha,qa.expressions[Ca])+", 'TemplateLiteral'))":""),Ca++)}T="(["+ua.join(",")+"]).join('')"}catch(Fb){throw Fb;}return T;case "TemplateElement":return JSON.stringify(qa.value?qa.value.cooked:"");case "ForStatement":T="lastStatement \x3d lc.voidOperation; \n";null!==qa.init&&(T+=G(ha,qa.init)+"; ");var Fa=M(ha),Da=M(ha);T+="var "+Fa+" \x3d true; \n do { ";null!==qa.update&&(T+=" if ("+Fa+"\x3d\x3d\x3dfalse) {\n "+G(ha,qa.update)+"  \n}\n "+Fa+"\x3dfalse; \n");null!==
qa.test&&(T+="var "+Da+" \x3d "+G(ha,qa.test)+"; ",T+="if ("+Da+"\x3d\x3d\x3dfalse) { break; } else if ("+Da+"!\x3d\x3dtrue) { lang.error({type: '"+qa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");T+=G(ha,qa.body);null!==qa.update&&(T+="\n "+G(ha,qa.update));return T+("\n"+Fa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var La=M(ha),Wa=M(ha),Va=M(ha),Ma="var "+La+" \x3d "+G(ha,qa.right)+";\n";"VariableDeclaration"===qa.left.type&&
(Ma+=G(ha,qa.left));var eb="VariableDeclaration"===qa.left.type?qa.left.declarations[0].id.name:qa.left.name;eb=eb.toLowerCase();T="";null!==ha.localScope&&(void 0!==ha.localScope[eb]?T="lscope['"+eb+"']":void 0!==ha.localScope._SymbolsMap[eb]&&(T="lscope['"+ha.localScope._SymbolsMap[eb]+"']"));""===T&&(void 0!==ha.globalScope[eb]?T="gscope['"+eb+"']":void 0!==ha.globalScope._SymbolsMap[eb]&&(T="gscope['"+ha.globalScope._SymbolsMap[eb]+"']"));Ma=Ma+("if ("+La+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(La+") || lc.isString("+La+")) {var ")+(Wa+"\x3d"+La+".length; \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+"; "+Va+"++) {\n");Ma+=T+"\x3d"+Va+";\n";Ma+=G(ha,qa.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";Ma+="else if (lc.isImmutableArray("+La+")) {";Ma=Ma+("var "+Wa+"\x3d"+La+".length(); \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+"; "+Va+"++) {\n");Ma+=T+"\x3d"+Va+";\n";Ma+=G(ha,qa.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";Ma+="else if (( "+
La+" instanceof lang.Dictionary) || ( "+La+" instanceof lang.Feature)) {";Ma=Ma+("var "+Wa+"\x3d"+La+".keys(); \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+".length; "+Va+"++) {\n");Ma+=T+"\x3d"+Wa+"["+Va+"];\n";Ma+=G(ha,qa.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";ha.isAsync&&(Ma+="else if (lc.isFeatureSet("+La+")) {",Ma=Ma+("var "+Wa+"\x3d"+La+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Va+"\x3dlang. graphicToFeature( yield "+Wa+".next(),"+La+"); "+Va+"!\x3dnull; "+
Va+"\x3dlang. graphicToFeature( yield "+Wa+".next(),"+La+")) {\n")+(T+"\x3d"+Va+";\n"),Ma+=G(ha,qa.body),Ma+="\n}\n",Ma+=" lastStatement \x3d lc.voidOperation; \n",Ma+=" \n}\n");return Ma+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return L(ha,qa);case "MemberExpression":try{T=void 0;T=!0===qa.computed?G(ha,qa.property):"'"+qa.property.name+"'";var ib="lang.member("+G(ha,qa.object)+","+T+")"}catch(Fb){throw Fb;}return ib;case "Literal":return null===qa.value||void 0===qa.value?
"null":JSON.stringify(qa.value);case "ThisExpression":throw Error(k.nodeErrorMessage(qa,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==qa.callee.type)throw Error(k.nodeErrorMessage(qa,"RUNTIME","ONLYNODESSUPPORTED"));var lb=qa.callee.name.toLowerCase();T="";null!==ha.localScope&&(void 0!==ha.localScope[lb]?T="lscope['"+lb+"']":void 0!==ha.localScope._SymbolsMap[lb]&&(T="lscope['"+ha.localScope._SymbolsMap[lb]+"']"));""===T&&(void 0!==ha.globalScope[lb]?T="gscope['"+lb+"']":
void 0!==ha.globalScope._SymbolsMap[lb]&&(T="gscope['"+ha.globalScope._SymbolsMap[lb]+"']"));if(""!==T){Ha="[";for(wa=0;wa<qa.arguments.length;wa++)0<wa&&(Ha+=", "),Ha+=G(ha,qa.arguments[wa]);Ha+="]";ua=ha.isAsync?"(yield lang.callfunc("+T+","+Ha+",runtimeCtx) )":"lang.callfunc("+T+","+Ha+",runtimeCtx)"}else throw Error(k.nodeErrorMessage(qa,"RUNTIME","NOTFOUND"));}catch(Fb){throw Fb;}return ua;case "UnaryExpression":try{var rb="lang.unary("+G(ha,qa.argument)+",'"+qa.operator+"')"}catch(Fb){throw Fb;
}return rb;case "BinaryExpression":try{var sb="lang.binary("+G(ha,qa.left)+","+G(ha,qa.right)+",'"+qa.operator+"')"}catch(Fb){throw Fb;}return sb;case "LogicalExpression":try{if("AssignmentExpression"===qa.left.type||"UpdateExpression"===qa.left.type)throw Error(k.nodeErrorMessage(qa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===qa.right.type||"UpdateExpression"===qa.right.type)throw Error(k.nodeErrorMessage(qa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===qa.operator||"||"===qa.operator)var tb="(lang.logicalCheck("+G(ha,qa.left)+") "+qa.operator+" lang.logicalCheck("+G(ha,qa.right)+"))";else throw Error(k.nodeErrorMessage(qa,"RUNTIME","ONLYORORAND"));}catch(Fb){throw Fb;}return tb;case "ConditionalExpression":throw Error(k.nodeErrorMessage(qa,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{T=[];for(Ha=0;Ha<qa.elements.length;Ha++)"Literal"===qa.elements[Ha].type?T.push(G(ha,qa.elements[Ha])):T.push("lang.aCheck("+G(ha,qa.elements[Ha])+
",'ArrayExpression')");var Ab="["+T.join(",")+"]"}catch(Fb){throw Fb;}return Ab;case "ObjectExpression":T="lang.dictionary([";for(Ha=0;Ha<qa.properties.length;Ha++){var Cb=qa.properties[Ha],nb="Identifier"===Cb.key.type?"'"+Cb.key.name+"'":G(ha,Cb.key),yb=G(ha,Cb.value);0<Ha&&(T+=",");T+="lang.strCheck("+nb+",'ObjectExpression'),lang.aCheck("+yb+", 'ObjectExpression')"}return T+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(k.nodeErrorMessage(qa,"RUNTIME","NOTSUPPORTED"));
default:throw Error(k.nodeErrorMessage(qa,"RUNTIME","UNREOGNISED"));}}catch(Fb){throw Fb;}}function H(ha,qa){var T=null,Ha="";if("MemberExpression"===qa.argument.type)return T=G(ha,qa.argument.object),Ha=!0===qa.argument.computed?G(ha,qa.argument.property):"'"+qa.argument.property.name+"'","lang.memberupdate("+T+","+Ha+",'"+qa.operator+"',"+qa.prefix+")";T=qa.argument.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[T])return"lang.update(lscope, '"+T+"','"+qa.operator+"',"+qa.prefix+
")";if(void 0!==ha.localScope._SymbolsMap[T])return"lang.update(lscope, '"+ha.localScope._SymbolsMap[T]+"','"+qa.operator+"',"+qa.prefix+")"}if(void 0!==ha.globalScope[T])return"lang.update(gscope, '"+T+"','"+qa.operator+"',"+qa.prefix+")";if(void 0!==ha.globalScope._SymbolsMap[T])return"lang.update(gscope, '"+ha.globalScope._SymbolsMap[T]+"','"+qa.operator+"',"+qa.prefix+")";throw Error("Variable not recognised");}function J(ha,qa){var T=G(ha,qa.right),Ha=null,Ja="";if("MemberExpression"===qa.left.type)return Ha=
G(ha,qa.left.object),Ja=!0===qa.left.computed?G(ha,qa.left.property):"'"+qa.left.property.name+"'","lang.assignmember("+Ha+","+Ja+",'"+qa.operator+"',"+T+")";Ha=qa.left.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[Ha])return"lscope['"+Ha+"']\x3dlang.assign("+T+",'"+qa.operator+"', lscope['"+Ha+"'])";if(void 0!==ha.localScope._SymbolsMap[Ha])return"lscope['"+ha.localScope._SymbolsMap[Ha]+"']\x3dlang.assign("+T+",'"+qa.operator+"', lscope['"+ha.localScope._SymbolsMap[Ha]+"'])"}if(void 0!==
ha.globalScope[Ha])return"gscope['"+Ha+"']\x3dlang.assign("+T+",'"+qa.operator+"', gscope['"+Ha+"'])";if(void 0!==ha.globalScope._SymbolsMap[Ha])return"gscope['"+ha.globalScope._SymbolsMap[Ha]+"']\x3dlang.assign("+T+",'"+qa.operator+"', gscope['"+ha.globalScope._SymbolsMap[Ha]+"'])";throw Error("Variable not recognised");}function I(ha,qa){return"BlockStatement"===qa.type?G(ha,qa):"ReturnStatement"===qa.type||"BreakStatement"===qa.type||"ContinueStatement"===qa.type?G(ha,qa)+"; ":"UpdateExpression"===
qa.type?"lastStatement \x3d "+G(ha,qa)+"; ":"ExpressionStatement"===qa.type?G(ha,qa):"ObjectExpression"===qa.type?"lastStatement \x3d "+G(ha,qa)+"; ":G(ha,qa)+"; "}function R(ha,qa){for(var T="",Ha=0;Ha<qa.body.length;Ha++)T="ReturnStatement"===qa.body[Ha].type?T+(G(ha,qa.body[Ha])+"; \n"):"BreakStatement"===qa.body[Ha].type?T+(G(ha,qa.body[Ha])+"; \n"):"ContinueStatement"===qa.body[Ha].type?T+(G(ha,qa.body[Ha])+"; \n"):"UpdateExpression"===qa.body[Ha].type?T+("lastStatement \x3d "+G(ha,qa.body[Ha])+
"; \n"):"ObjectExpression"===qa.body[Ha].type?T+("lastStatement \x3d "+G(ha,qa.body[Ha])+"; \n"):T+(G(ha,qa.body[Ha])+" \n");return T}function O(ha,qa){var T=null===qa.init?null:G(ha,qa.init);T===r.voidOperation&&(T=null);var Ha=qa.id.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[Ha])return"lscope['"+Ha+"']\x3d"+T+"; ";if(void 0!==ha.localScope._SymbolsMap[Ha])return"lscope['"+ha.localScope._SymbolsMap[Ha]+"']\x3d"+T+"; ";var Ja=aa(ha);ha.localScope._SymbolsMap[Ha]=Ja;ha.mangleMap[Ha]=
Ja;return"lscope['"+Ja+"']\x3d"+T+"; "}if(void 0!==ha.globalScope[Ha])return"gscope['"+Ha+"']\x3d"+T+"; ";if(void 0!==ha.globalScope._SymbolsMap[Ha])return"gscope['"+ha.globalScope._SymbolsMap[Ha]+"']\x3d"+T+"; ";Ja=aa(ha);ha.globalScope._SymbolsMap[Ha]=Ja;ha.mangleMap[Ha]=Ja;return"gscope['"+Ja+"']\x3d"+T+"; "}function P(ha,qa,T){qa=qa.toLowerCase();switch(qa){case "hasz":return ha=ha.hasZ,void 0===ha?!1:ha;case "hasm":return ha=ha.hasM,void 0===ha?!1:ha;case "spatialreference":return qa=ha.spatialReference._arcadeCacheId,
void 0===qa&&(T=!0,Object.freeze&&Object.isFrozen(ha.spatialReference)&&(T=!1),T&&(va++,qa=ha.spatialReference._arcadeCacheId=va)),ha=new h({wkt:ha.spatialReference.wkt,wkid:ha.spatialReference.wkid}),void 0!==qa&&(ha._arcadeCacheId="SPREF"+qa.toString()),ha}switch(ha.type){case "extent":switch(qa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ha=ha[qa],void 0!==ha?ha:null;case "type":return"Extent"}break;case "polygon":switch(qa){case "rings":return qa=
ha.getCacheValue("_arcadeCacheId"),void 0===qa&&(va++,qa=va,ha.setCacheValue("_arcadeCacheId",qa)),ha=new e(ha.rings,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,qa);case "type":return"Polygon"}break;case "point":switch(qa){case "x":case "y":case "z":case "m":return void 0!==ha[qa]?ha[qa]:null;case "type":return"Point"}break;case "polyline":switch(qa){case "paths":return qa=ha.getCacheValue("_arcadeCacheId"),void 0===qa&&(va++,qa=va,ha.setCacheValue("_arcadeCacheId",qa)),ha=new e(ha.paths,ha.spatialReference,
!0===ha.hasZ,!0===ha.hasM,qa);case "type":return"Polyline"}break;case "multipoint":switch(qa){case "points":return qa=ha.getCacheValue("_arcadeCacheId"),void 0===qa&&(va++,qa=va,ha.setCacheValue("_arcadeCacheId",qa)),ha=new l(ha.points,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,qa,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(T,"RUNTIME","PROPERTYNOTFOUND"));}function L(ha,qa){try{var T=qa.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[T])return"lscope['"+
T+"']";if(void 0!==ha.localScope._SymbolsMap[T])return"lscope['"+ha.localScope._SymbolsMap[T]+"']"}if(void 0!==ha.globalScope[T])return"gscope['"+T+"']";if(void 0!==ha.globalScope._SymbolsMap[T])return"gscope['"+ha.globalScope._SymbolsMap[T]+"']";throw Error(k.nodeErrorMessage(qa,"RUNTIME","VARIABLENOTFOUND"));}catch(Ha){throw Ha;}}function K(ha){return null===ha?"":r.isArray(ha)||r.isImmutableArray(ha)?"Array":r.isDate(ha)?"Date":r.isString(ha)?"String":r.isBoolean(ha)?"Boolean":r.isNumber(ha)?"Number":
ha instanceof c?"Attachment":ha instanceof a?"Portal":ha instanceof h?"Dictionary":ha instanceof g?"Feature":ha instanceof A?"Point":ha instanceof v?"Polygon":ha instanceof u?"Polyline":ha instanceof x?"Multipoint":ha instanceof w?"Extent":r.isFunctionParameter(ha)?"Function":r.isFeatureSet(ha)?"FeatureSet":r.isFeatureSetCollection(ha)?"FeatureSetCollection":ha===r.voidOperation?"":"number"===typeof ha&&isNaN(ha)?"Number":"Unrecognised Type"}function Q(ha,qa,T,Ha){try{if(r.equalityTest(qa[T],Ha))return qa[T+
1];var Ja=qa.length-T;return 1===Ja?qa[T]:2===Ja?null:3===Ja?qa[T+2]:Q(ha,qa,T+2,Ha)}catch(fa){throw fa;}}function W(ha,qa,T,Ha){try{if(!0===Ha)return qa[T+1];if(3===qa.length-T)return qa[T+2];var Ja=qa[T+2];if(!1===r.isBoolean(Ja))throw Error("WHEN needs boolean test conditions");return W(ha,qa,T+2,Ja)}catch(fa){throw fa;}}function ba(ha,qa){var T=ha.length,Ha=Math.floor(T/2);if(0===T)return[];if(1===T)return[ha[0]];var Ja=ba(ha.slice(0,Ha),qa);T=ba(ha.slice(Ha,T),qa);for(Ha=[];0<Ja.length||0<T.length;)if(0<
Ja.length&&0<T.length){var fa=qa(Ja[0],T[0]);isNaN(fa)&&(fa=0);0>=fa?(Ha.push(Ja[0]),Ja=Ja.slice(1)):(Ha.push(T[0]),T=T.slice(1))}else 0<Ja.length?(Ha.push(Ja[0]),Ja=Ja.slice(1)):0<T.length&&(Ha.push(T[0]),T=T.slice(1));return Ha}function S(ha,qa){try{var T=ha.length,Ha=Math.floor(T/2);if(0===T)return z.resolve([]);if(1===T)return z.resolve([ha[0]]);var Ja=[S(ha.slice(0,Ha),qa),S(ha.slice(Ha,T),qa)];return z.all(Ja).then(function(fa){return X(fa[0],fa[1],qa,[])})}catch(fa){return z.reject(fa)}}function X(ha,
qa,T,Ha){return z.create(function(Ja,fa){0<ha.length||0<qa.length?0<ha.length&&0<qa.length?T(ha[0],qa[0]).then(function(Ya){try{isNaN(Ya)&&(Ya=1),0>=Ya?(Ha.push(ha[0]),ha=ha.slice(1)):(Ha.push(qa[0]),qa=qa.slice(1)),X(ha,qa,T,Ha).then(function(Xa){Ja(Xa)},fa)}catch(Xa){fa(Xa)}},fa):0<ha.length?(Ha.push(ha[0]),ha=ha.slice(1),X(ha,qa,T,Ha).then(function(Ya){Ja(Ya)},fa)):0<qa.length&&(Ha.push(qa[0]),qa=qa.slice(1),X(ha,qa,T,Ha).then(function(Ya){Ja(Ya)},fa)):Ja(Ha)})}function aa(ha){ha.symbols.symbolCounter++;
return"_T"+ha.symbols.symbolCounter.toString()}function M(ha){ha.symbols.symbolCounter++;return"_Tvar"+ha.symbols.symbolCounter.toString()}function da(ha,qa,T){var Ha={};ha||(ha={});T||(T={});Ha._SymbolsMap={};Ha.textformatting=1;Ha.infinity=1;Ha.pi=1;for(var Ja in qa)Ha[Ja]=1;for(Ja in T)Ha[Ja]=1;for(Ja in ha)Ha[Ja]=1;return Ha}function ea(ha,qa){for(var T={mode:qa,compiled:!0,functions:{},signatures:[],failDefferred:F,standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:Z},Ha=0;Ha<ha.length;Ha++)ha[Ha].registerFunctions(T);
if("sync"===qa){for(var Ja in T.functions)Ea[Ja]=new r.NativeFunction(T.functions[Ja]),ma.prototype[Ja]=Ea[Ja];for(Ha=0;Ha<T.signatures.length;Ha++)k.addFunctionDeclaration(T.signatures[Ha],"sync")}else{for(Ja in T.functions)Ga[Ja]=new r.NativeFunction(T.functions[Ja]),ya.prototype[Ja]=Ga[Ja];for(Ha=0;Ha<T.signatures.length;Ha++)k.addFunctionDeclaration(T.signatures[Ha],"async")}}function Z(ha,qa){var T=qa.name;if("_SymbolsMap"===T)throw"Illegal";if(0<ha.localStack.length){if("_t"!==T.substr(0,2).toLowerCase()&&
void 0!==ha.localStack[ha.localStack.length-1][T])return ha.localStack[ha.localStack.length-1][T];var Ha=ha.mangleMap[T];if(void 0!==Ha&&void 0!==ha.localStack[ha.localStack.length-1][Ha])return ha.localStack[ha.localStack.length-1][Ha]}if("_t"!==T.substr(0,2).toLowerCase()&&void 0!==ha.globalScope[T]||1===ha.globalScope._SymbolsMap[T])return ha.globalScope[T];T=ha.mangleMap[T];if(void 0!==T)return ha.globalScope[T]}function ka(ha){}Object.defineProperty(B,"__esModule",{value:!0});B.enableAsyncSupport=
B.compileScript=B.referencesFunction=B.referencesMember=B.validateScript=B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.executeScript=B.extend=B.functionHelper=void 0;var va=0,Ea={};b.registerFunctions(Ea,E);t.registerFunctions(Ea,E);m.registerFunctions(Ea,E);d.registerFunctions(Ea,E);n.registerFunctions(Ea,E);Ea["typeof"]=function(ha,qa){return E(ha,qa,function(T,Ha,Ja){r.pcCheck(Ja,1,1);T=K(Ja[0]);if("Unrecognised Type"===T)throw Error("Unrecognised Type");return T})};Ea.iif=function(ha,
qa){try{return E(ha,qa,function(T,Ha,Ja){r.pcCheck(Ja,3,3);if(!1===r.isBoolean(Ja[0]))throw Error("IF Function must have a boolean test condition");return Ja[0]?Ja[1]:Ja[2]})}catch(T){throw T;}};Ea.decode=function(ha,qa){try{return E(ha,qa,function(T,Ha,Ja){if(2>Ja.length)throw Error("Missing Parameters");if(2===Ja.length)return Ja[1];if(0===(Ja.length-1)%2)throw Error("Must have a default value result.");return Q(ha,Ja,1,Ja[0])})}catch(T){throw T;}};Ea.when=function(ha,qa){try{return E(ha,qa,function(T,
Ha,Ja){if(3>Ja.length)throw Error("Missing Parameters");if(0===Ja.length%2)throw Error("Must have a default value result.");T=Ja[0];if(!1===r.isBoolean(T))throw Error("WHEN needs boolean test conditions");return W(ha,Ja,0,T)})}catch(T){throw T;}};Ea.top=function(ha,qa){return E(ha,qa,function(T,Ha,Ja){r.pcCheck(Ja,2,2);if(r.isArray(Ja[0]))return r.toNumber(Ja[1])>=Ja[0].length?Ja[0].slice(0):Ja[0].slice(0,r.toNumber(Ja[1]));if(r.isImmutableArray(Ja[0]))return r.toNumber(Ja[1])>=Ja[0].length()?Ja[0].slice(0):
Ja[0].slice(0,r.toNumber(Ja[1]));throw Error("Top cannot accept this parameter type");})};Ea.first=function(ha,qa){return E(ha,qa,function(T,Ha,Ja){r.pcCheck(Ja,1,1);return r.isArray(Ja[0])?0===Ja[0].length?null:Ja[0][0]:r.isImmutableArray(Ja[0])?0===Ja[0].length()?null:Ja[0].get(0):null})};Ea.sort=function(ha,qa){return E(ha,qa,function(T,Ha,Ja){r.pcCheck(Ja,1,2);Ha=Ja[0];r.isImmutableArray(Ha)&&(Ha=Ha.toArray());if(!1===r.isArray(Ha))throw Error("Illegal Argument");if(1<Ja.length){if(!1===r.isFunctionParameter(Ja[1]))throw Error("Illegal Argument");
var fa=function(la,sa){return Ba.callfunc(Ja[1],[la,sa],T)};return ha.isAsync?S(Ha,fa):Ha=ba(Ha,function(la,sa){return fa(la,sa)})}if(0===Ha.length)return[];for(var Ya={},Xa=0;Xa<Ha.length;Xa++){var Ca=K(Ha[Xa]);""!==Ca&&(Ya[Ca]=!0)}if(!0===Ya.Array||!0===Ya.Dictionary||!0===Ya.Feature||!0===Ya.Point||!0===Ya.Polygon||!0===Ya.Polyline||!0===Ya.Multipoint||!0===Ya.Extent||!0===Ya.Function)return Ha.slice(0);Xa=0;Ca="";for(var Y in Ya)Xa++,Ca=Y;return Ha=1<Xa||"String"===Ca?ba(Ha,function(la,sa){if(null===
la||void 0===la||la===r.voidOperation)return null===sa||void 0===sa||sa===r.voidOperation?0:1;if(null===sa||void 0===sa||sa===r.voidOperation)return-1;var U=r.toString(la),ia=r.toString(sa);return U<ia?-1:U===ia?0:1}):"Number"===Ca?ba(Ha,function(la,sa){return la-sa}):"Boolean"===Ca?ba(Ha,function(la,sa){return la===sa?0:sa?-1:1}):"Date"===Ca?ba(Ha,function(la,sa){return sa-la}):Ha.slice(0)})};var Ga={},na;for(na in Ea)Ga[na]=new r.NativeFunction(Ea[na]);q.registerFunctions(Ea,E);for(na in Ea)Ea[na]=
new r.NativeFunction(Ea[na]);var ma=function(){};ma.prototype=Ea;var ya=function(){};ya.prototype=Ga;B.functionHelper={fixSpatialReference:r.fixSpatialReference,parseArguments:function(ha,qa){for(var T=[],Ha=0;Ha<qa.arguments.length;Ha++)T.push(G(ha,qa.arguments[Ha]));return T},standardFunction:E};B.extend=ea;ea([f],"sync");ea([f],"async");B.executeScript=function(ha,qa){return ha(qa)};B.extractFieldLiterals=function(ha,qa){void 0===qa&&(qa=!1);return k.findFieldLiterals(ha)};B.extractExpectedFieldLiterals=
function(ha){return k.findExpectedFieldLiterals(ha)};B.validateScript=function(ha,qa){return k.validateScript(ha,qa,"sync")};B.referencesMember=function(ha,qa){return k.referencesMember(ha,qa)};B.referencesFunction=function(ha,qa){return k.referencesFunction(ha,qa)};var za=0,Ba={error:function(ha,qa,T){throw Error(k.nodeErrorMessage(ha,qa,T));},__awaiter:function(ha,qa,T,Ha){return z.create(function(Ja,fa){function Ya(Y){try{Ca(Ha.next(Y))}catch(la){fa(la)}}function Xa(Y){try{Ca(Ha["throw"](Y))}catch(la){fa(la)}}
function Ca(Y){Y.done?Ja(Y.value):Y.value&&Y.value.then?Y.value.then(Ya,Xa):(za++,0===za%100?setTimeout(function(){za=0;Ya(Y.value)},0):Ya(Y.value))}Ca((Ha=Ha.apply(ha,qa||[])).next())})},functionDepthchecker:function(ha,qa){return function(){qa.depthCounter++;qa.localStack.push([]);if(64<qa.depthCounter)throw Error("Exceeded maximum function depth");var T=ha.apply(this,arguments);if(z.isPromiseLike(T))return T.then(function(Ha){qa.depthCounter--;--qa.localStack.length;return Ha});qa.depthCounter--;
--qa.localStack.length;return T}},castString:function(ha){return r.toString(ha)},aCheck:function(ha,qa){if(r.isFunctionParameter(ha))throw Error(k.nodeErrorMessage({type:qa},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return ha===r.voidOperation?null:ha},Dictionary:h,Feature:g,dictionary:function(ha){for(var qa={},T=0;T<ha.length;T+=2){if(r.isFunctionParameter(ha[T+1]))throw Error("Illegal Argument");if(!1===r.isString(ha[T]))throw Error("Illegal Argument");qa[ha[T].toString()]=ha[T+1]===r.voidOperation?
null:ha[T+1]}ha=new h(qa);ha.immutable=!1;return ha},strCheck:function(ha){if(!1===r.isString(ha))throw Error("Illegal Argument");return ha},unary:function(ha,qa){if(r.isBoolean(ha)){if("!"===qa)return!ha;if("-"===qa)return-1*r.toNumber(ha);if("+"===qa)return 1*r.toNumber(ha);if("~"===qa)return~r.toNumber(ha);throw Error(k.nodeErrorMessage({type:"UnaryExpression",operator:qa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===qa)return-1*r.toNumber(ha);if("+"===qa)return 1*
r.toNumber(ha);if("~"===qa)return~r.toNumber(ha);throw Error(k.nodeErrorMessage({type:"UnaryExpression",operator:qa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(ha){if(!1===r.isBoolean(ha))throw Error(k.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return ha},logical:function(ha,qa,T){if(r.isBoolean(ha)&&r.isBoolean(qa))switch(T){case "||":return ha||qa;case "\x26\x26":return ha&&qa}throw Error(k.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(ha,qa,T){switch(T){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return r.binaryOperator(r.toNumber(ha),r.toNumber(qa),T);case "\x3d\x3d":return r.equalityTest(ha,qa);case "\x3d":return r.equalityTest(ha,qa);case "!\x3d":return!r.equalityTest(ha,qa);case "\x3c":return r.greaterThanLessThan(ha,qa,T);case "\x3e":return r.greaterThanLessThan(ha,qa,T);case "\x3c\x3d":return r.greaterThanLessThan(ha,
qa,T);case "\x3e\x3d":return r.greaterThanLessThan(ha,qa,T);case "+":return r.isString(ha)||r.isString(qa)?r.toString(ha)+r.toString(qa):r.toNumber(ha)+r.toNumber(qa);case "-":return r.toNumber(ha)-r.toNumber(qa);case "*":return r.toNumber(ha)*r.toNumber(qa);case "/":return r.toNumber(ha)/r.toNumber(qa);case "%":return r.toNumber(ha)%r.toNumber(qa);default:throw Error(k.nodeErrorMessage({type:"BinaryExpression",operator:T,left:ha,right:qa},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(ha,
qa,T){switch(qa){case "\x3d":return ha===r.voidOperation?null:ha;case "/\x3d":return r.toNumber(T)/r.toNumber(ha);case "*\x3d":return r.toNumber(T)*r.toNumber(ha);case "-\x3d":return r.toNumber(T)-r.toNumber(ha);case "+\x3d":return r.isString(T)||r.isString(ha)?r.toString(T)+r.toString(ha):r.toNumber(T)+r.toNumber(ha);case "%\x3d":return r.toNumber(T)%r.toNumber(ha);default:throw Error(k.nodeErrorMessage({type:"AssignmentExpression",operator:qa,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));
}},update:function(ha,qa,T,Ha){var Ja=r.toNumber(ha[qa]);ha[qa]="++"===T?Ja+1:Ja-1;return!1===Ha?Ja:"++"===T?Ja+1:Ja-1},graphicToFeature:function(ha,qa){return null===ha?null:g.createFromGraphicLikeObject(ha.geometry,ha.attributes,qa)},memberupdate:function(ha,qa,T,Ha){if(r.isArray(ha))if(r.isNumber(qa)){0>qa&&(qa=ha.length+qa);if(0>qa||qa>=ha.length)throw Error("Assignment outside of array bounds");var Ja=r.toNumber(ha[qa]);ha[qa]="++"===T?Ja+1:Ja-1}else throw Error("Invalid Parameter");else if(ha instanceof
h){if(!1===r.isString(qa))throw Error("Dictionary accessor must be a string");if(!0===ha.hasField(qa))Ja=r.toNumber(ha.field(qa)),ha.setField(qa,"++"===T?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else if(ha instanceof g){if(!1===r.isString(qa))throw Error("Feature accessor must be a string");if(!0===ha.hasField(qa))Ja=r.toNumber(ha.field(qa)),ha.setField(qa,"++"===T?Ja+1:Ja-1);else throw Error("Invalid Parameter");}else{if(r.isImmutableArray(ha))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===Ha?Ja:"++"===T?Ja+1:Ja-1},assignmember:function(ha,qa,T,Ha){if(r.isArray(ha))if(r.isNumber(qa)){0>qa&&(qa=ha.length+qa);if(0>qa||qa>ha.length)throw Error("Assignment outside of array bounds");if(qa===ha.length&&"\x3d"!==T)throw Error("Invalid Parameter");ha[qa]=this.assign(Ha,T,ha[qa])}else throw Error("Invalid Parameter");else if(ha instanceof h){if(!1===r.isString(qa))throw Error("Dictionary accessor must be a string");if(!0===ha.hasField(qa))ha.setField(qa,this.assign(Ha,T,ha.field(qa)));
else{if("\x3d"!==T)throw Error("Invalid Parameter");ha.setField(qa,this.assign(Ha,T,null))}}else if(ha instanceof g){if(!1===r.isString(qa))throw Error("Feature accessor must be a string");if(!0===ha.hasField(qa))ha.setField(qa,this.assign(Ha,T,ha.field(qa)));else{if("\x3d"!==T)throw Error("Invalid Parameter");ha.setField(qa,this.assign(Ha,T,null))}}else{if(r.isImmutableArray(ha))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(ha,qa){if(null===ha)throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(ha instanceof h||ha instanceof g){if(r.isString(qa))return ha.field(qa);throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(ha instanceof y){if(r.isString(qa))return P(ha,qa,"MemberExpression");throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(r.isArray(ha)){if(r.isNumber(qa)&&isFinite(qa)&&
Math.floor(qa)===qa){0>qa&&(qa=ha.length+qa);if(qa>=ha.length||0>qa)throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha[qa]}throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(r.isString(ha)){if(r.isNumber(qa)&&isFinite(qa)&&Math.floor(qa)===qa){0>qa&&(qa=ha.length+qa);if(qa>=ha.length||0>qa)throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha[qa]}throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(r.isImmutableArray(ha)&&r.isNumber(qa)&&isFinite(qa)&&Math.floor(qa)===qa){0>qa&&(qa=ha.length()+qa);if(qa>=ha.length()||0>qa)throw Error(k.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha.get(qa)}throw Error(k.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(ha,qa,T){return ha instanceof r.NativeFunction?ha.fn(T,{arguments:qa,preparsed:!0}):ha instanceof r.SizzleFunction?ha.fn.apply(this,qa):ha.apply(this,qa)}};B.compileScript=function(ha,qa,T){void 0===qa&&(qa=null);void 0===T&&(T=!1);null===qa&&(qa={vars:{},customfunctions:{}});qa={isAsync:T,globalScope:da(qa.vars,T?Ga:Ea,qa.customfunctions),localScope:null,mangleMap:{},console:ka,lrucache:qa.lrucache,interceptor:qa.interceptor,
services:qa.services,symbols:{symbolCounter:0}};ha=G(qa,ha.body[0].body);""===ha&&(ha="lc.voidOperation; ");qa={lc:r,lang:Ba,mangles:qa.mangleMap,postProcess:function(Ha){Ha instanceof r.ReturnResult&&(Ha=Ha.value);Ha instanceof r.ImplicitResult&&(Ha=Ha.value);Ha===r.voidOperation&&(Ha=null);if(Ha===r.breakResult)throw Error("Cannot return BREAK");if(Ha===r.continueResult)throw Error("Cannot return CONTINUE");if(r.isFunctionParameter(Ha))throw Error("Cannot return FUNCTION");return Ha},prepare:function(Ha,
Ja){var fa=Ha.spatialReference;if(null===fa||void 0===fa)fa=new C({wkid:102100});var Ya=Ha.vars,Xa=Ha.customfunctions,Ca=Ja?new ya:new ma;Ya||(Ya={});Xa||(Xa={});var Y=new h({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Y.immutable=!1;Ca._SymbolsMap={textformatting:1,infinity:1,pi:1};Ca.textformatting=Y;Ca.infinity=Number.POSITIVE_INFINITY;Ca.pi=Math.PI;for(var la in Xa)Ca[la]=Xa[la],Ca._SymbolsMap[la]=1;for(la in Ya)Ca._SymbolsMap[la]=1,Ca[la]=Ya[la]&&
"esri.Graphic"===Ya[la].declaredClass?g.createFromGraphic(Ya[la]):Ya[la];return{localStack:[],isAsync:Ja,mangleMap:this.mangles,spatialReference:fa,globalScope:Ca,abortSignal:void 0===Ha.abortSignal||null===Ha.abortSignal?{aborted:!1}:Ha.abortSignal,localScope:null,services:Ha.services,console:Ha.console?Ha.console:ka,lrucache:Ha.lrucache,interceptor:Ha.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",T?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
ha+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ha+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(qa)};B.enableAsyncSupport=function(){return z.create(function(ha,qa){D(["./functions/geomasync"],function(T){ea([T],"async");ha(!0)},
function(T){qa(T)})})}})},"esri/arcade/ArcadePortal":function(){var D=this&&this.__extends||function(){var B=function(a,c){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var e in g)Object.prototype.hasOwnProperty.call(g,e)&&(h[e]=g[e])};return B(a,c)};return function(a,c){function h(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");B(a,c);a.prototype=
null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();define(["require","exports","./Dictionary"],function(B,a,c){return function(h){function g(e){var l=h.call(this)||this;l.immutable=!1;l.setField("url",e);l.immutable=!0;return l}D(g,h);return g}(c)})},"esri/arcade/Dictionary":function(){define("require exports ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry".split(" "),function(D,B,a,c,h,g){function e(r,k){void 0===k&&(k=!1);if(null===r||void 0===r)return null;
if(c.isNumber(r))return c.toNumber(r);if(c.isBoolean(r))return c.toBoolean(r);if(c.isString(r))return c.toString(r);if(c.isDate(r))return c.toDate(r);if(c.isArray(r)){for(var f=[],b=0;b<r.length;b++)f.push(e(r[b],k));return f}b=new l;b.immutable=!1;for(var d=0,q=Object.keys(r);d<q.length;d++){var m=q[d];f=r[m];void 0!==f&&b.setField(m,e(f,k))}b.immutable=k;return b}var l=function(){function r(k){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=
k instanceof r?k.attributes:void 0===k?{}:null===k?{}:k}r.prototype.field=function(k){var f=k.toLowerCase(),b=this.attributes[k];if(void 0!==b)return b;for(var d in this.attributes)if(d.toLowerCase()===f)return this.attributes[d];throw Error("Field not Found : "+k);};r.prototype.setField=function(k,f){if(this.immutable)throw Error("Dictionary is Immutable");var b=k.toLowerCase();if(void 0===this.attributes[k])for(var d in this.attributes)if(d.toLowerCase()===b){this.attributes[d]=f;return}this.attributes[k]=
f};r.prototype.hasField=function(k){var f=k.toLowerCase();if(void 0!==this.attributes[k])return!0;for(var b in this.attributes)if(b.toLowerCase()===f)return!0;return!1};r.prototype.keys=function(){var k=[],f;for(f in this.attributes)k.push(f);return k=k.sort()};r.prototype.castToText=function(){var k="",f;for(f in this.attributes){""!==k&&(k+=",");var b=this.attributes[f];null==b?k+=JSON.stringify(f)+":null":c.isBoolean(b)||c.isNumber(b)||c.isString(b)?k+=JSON.stringify(f)+":"+JSON.stringify(b):b instanceof
g?k+=JSON.stringify(f)+":"+c.toStringExplicit(b):b instanceof a?k+=JSON.stringify(f)+":"+c.toStringExplicit(b):b instanceof Array?k+=JSON.stringify(f)+":"+c.toStringExplicit(b):b instanceof Date?k+=JSON.stringify(f)+":"+JSON.stringify(b):null!==b&&"object"===typeof b&&void 0!==b.castToText&&(k+=JSON.stringify(f)+":"+b.castToText())}return"{"+k+"}"};r.convertObjectToArcadeDictionary=function(k,f){void 0===f&&(f=!0);var b=new r;b.immutable=!1;for(var d in k){var q=k[d];void 0!==q&&b.setField(d.toString(),
e(q))}b.immutable=f;return b};r.convertJsonToArcade=function(k,f){void 0===f&&(f=!1);return e(k,f)};r.prototype.castAsJson=function(k){void 0===k&&(k=null);var f={};for(d in this.attributes){var b=this.attributes[d];if(void 0!==b){if(null===k||void 0===k?0:k.keyTranslate)var d=k.keyTranslate(d);f[d]=c.castAsJson(b,k)}}return f};r.prototype.castDictionaryValueAsJsonAsync=function(k,f,b,d,q){void 0===d&&(d=null);return c.castAsJsonAsync(b,d,q).then(function(m){return k[f]=m})};r.prototype.castAsJsonAsync=
function(k,f){void 0===k&&(k=null);void 0===f&&(f=null);var b={},d=[];for(m in this.attributes){var q=this.attributes[m];if(null===f||void 0===f?0:f.keyTranslate)var m=f.keyTranslate(m);void 0!==q&&(c.isSimpleType(q)||q instanceof g||q instanceof Date?b[m]=c.castAsJson(q,f):d.push(this.castDictionaryValueAsJsonAsync(b,m,q,k,f)))}return 0<d.length?h.all(d).then(function(){return b}):h.resolve(b)};return r}();return l})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,
B){return function(){function a(c){void 0===c&&(c=[]);this._elements=c}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(c){return this._elements[c]};a.prototype.toArray=function(){for(var c=[],h=0;h<this.length();h++)c.push(this.get(h));return c};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n){function t(Z,ka,va){return""===ka||null===ka||void 0===ka||ka===va||ka===va?Z:Z=Z.split(ka).join(va)}function z(Z){return Z instanceof M||Z instanceof a||Z instanceof da}function w(Z){return y(Z)||A(Z)||C(Z)||x(Z)||null===Z||Z===B.voidOperation||"number"===typeof Z?!0:!1}function y(Z){return"string"===typeof Z||Z instanceof String}function x(Z){return"boolean"===typeof Z}function A(Z){return"number"===typeof Z}function v(Z){return Z instanceof Array}function u(Z){return Z instanceof
c}function C(Z){return Z instanceof Date}function E(Z,ka){if(!1===isNaN(Z)){if(void 0===ka||null===ka||""===ka)return Z.toString();ka=t(ka,"\u2030","");ka=t(ka,"\u00a4","");return m.format(Z,{pattern:ka})}return Z.toString()}function F(Z,ka){var va=q.DateTime.fromJSDate(Z);return void 0===ka||null===ka||""===ka?va.toISO({suppressMilliseconds:!0}):va.toFormat(G(ka),{locale:n.locale,numberingSystem:"latn"})}function G(Z){Z=Z.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var ka="",va=0;for(Z=Z.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);va<
Z.length;va++){var Ea=Z[va];switch(Ea){case "D":ka+="d";break;case "DD":ka+="dd";break;case "DDD":ka+="o";break;case "d":ka+="c";break;case "ddd":ka+="ccc";break;case "dddd":ka+="cccc";break;case "M":ka+="L";break;case "MM":ka+="LL";break;case "MMM":ka+="LLL";break;case "MMMM":ka+="LLLL";break;case "YY":ka+="yy";break;case "Y":case "YYYY":ka+="yyyy";break;case "Q":ka+="q";break;case "Z":ka+="ZZ";break;case "ZZ":ka+="ZZZ";break;case "S":ka+="'S'";break;case "SS":ka+="'SS'";break;case "SSS":ka+="u";
break;case "A":case "a":ka+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ka+=Ea;break;default:ka=2<=Ea.length&&"["===Ea.slice(0,1)&&"]"===Ea.slice(-1)?ka+("'"+Ea.slice(1,-1)+"'"):ka+("'"+Ea+"'")}}return ka}function H(Z,ka,va){switch(va){case "\x3e":return Z>ka;case "\x3c":return Z<ka;case "\x3e\x3d":return Z>=ka;case "\x3c\x3d":return Z<=ka}return!1}function J(Z,ka){if(Z===ka||null===Z&&ka===B.voidOperation||null===ka&&Z===B.voidOperation)return!0;
if(C(Z)&&C(ka))return Z.getTime()===ka.getTime();if(Z instanceof h||Z instanceof g)return Z.equalityTest(ka);if(Z instanceof f&&ka instanceof f){var va=Z.getCacheValue("_arcadeCacheId"),Ea=ka.getCacheValue("_arcadeCacheId");if(void 0!==va&&null!==va)return va===Ea}return void 0!==Z&&void 0!==ka&&null!==Z&&null!==ka&&"object"===typeof Z&&"object"===typeof ka&&(Z._arcadeCacheId===ka._arcadeCacheId&&void 0!==Z._arcadeCacheId&&null!==Z._arcadeCacheId||Z._underlyingGraphic===ka._underlyingGraphic&&void 0!==
Z._underlyingGraphic&&null!==Z._underlyingGraphic)?!0:!1}function I(Z,ka){if(y(Z))return Z;if(null===Z)return"";if(A(Z))return E(Z,ka);if(x(Z))return Z.toString();if(C(Z))return F(Z,ka);if(Z instanceof r)return JSON.stringify(Z.toJson());if(v(Z)){for(var va=[],Ea=0;Ea<Z.length;Ea++)va[Ea]=O(Z[Ea]);return"["+va.join(",")+"]"}if(Z instanceof c){va=[];for(Ea=0;Ea<Z.length();Ea++)va[Ea]=O(Z.get(Ea));return"["+va.join(",")+"]"}return null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():
z(Z)?"object, Function":""}function R(Z,ka){if(y(Z))return Z;if(null===Z)return"";if(A(Z))return E(Z,ka);if(x(Z))return Z.toString();if(C(Z))return F(Z,ka);if(Z instanceof r)return Z instanceof l?'{"xmin":'+Z.xmin.toString()+',"ymin":'+Z.ymin.toString()+","+(Z.hasZ?'"zmin":'+Z.zmin.toString()+",":"")+(Z.hasM?'"mmin":'+Z.mmin.toString()+",":"")+'"xmax":'+Z.xmax.toString()+',"ymax":'+Z.ymax.toString()+","+(Z.hasZ?'"zmax":'+Z.zmax.toString()+",":"")+(Z.hasM?'"mmax":'+Z.mmax.toString()+",":"")+'"spatialReference":'+
Q(Z.spatialReference)+"}":Q(Z.toJson(),function(Ga,na){return Ga.key===na.key?0:"spatialReference"===Ga.key?1:"spatialReference"===na.key||Ga.key<na.key?-1:Ga.key>na.key?1:0});if(v(Z)){for(var va=[],Ea=0;Ea<Z.length;Ea++)va[Ea]=O(Z[Ea]);return"["+va.join(",")+"]"}if(Z instanceof c){va=[];for(Ea=0;Ea<Z.length();Ea++)va[Ea]=O(Z.get(Ea));return"["+va.join(",")+"]"}return null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():z(Z)?"object, Function":""}function O(Z){return null===Z?"null":
x(Z)||A(Z)||y(Z)?JSON.stringify(Z):Z instanceof r||Z instanceof c||Z instanceof Array?R(Z):Z instanceof Date?JSON.stringify(F(Z,"")):null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():"null"}function P(Z,ka){return A(Z)?Z:null===Z||""===Z?0:C(Z)?NaN:x(Z)?Z?1:0:v(Z)||""===Z||void 0===Z?NaN:void 0!==ka&&y(Z)?(ka=t(ka,"\u2030",""),ka=t(ka,"\u00a4",""),m.parse(Z,{pattern:ka})):Z===B.voidOperation?0:Number(Z)}function L(Z){var ka=/ (\d\d)/,va=q.DateTime.fromISO(Z);return va.isValid||ka.test(Z)&&
(Z=Z.replace(ka,"T$1"),va=q.DateTime.fromISO(Z),va.isValid)?va:null}function K(Z,ka){var va;ka.fields.some(function(Ea){Ea.name.toLowerCase()===Z.toLowerCase()&&(va=Ea.domain);return!!va});return va}function Q(Z,ka){ka||(ka={});"function"===typeof ka&&(ka={cmp:ka});var va="boolean"===typeof ka.cycles?ka.cycles:!1,Ea=ka.cmp&&function(na){return function(ma){return function(ya,za){return na({key:ya,value:ma[ya]},{key:za,value:ma[za]})}}}(ka.cmp),Ga=[];return function ya(ma){ma&&ma.toJson&&"function"===
typeof ma.toJson&&(ma=ma.toJson());if(void 0!==ma){if("number"===typeof ma)return isFinite(ma)?""+ma:"null";if("object"!==typeof ma)return JSON.stringify(ma);var za;if(Array.isArray(ma)){var Ba="[";for(za=0;za<ma.length;za++)za&&(Ba+=","),Ba+=ya(ma[za])||"null";return Ba+"]"}if(null===ma)return"null";if(-1!==Ga.indexOf(ma)){if(va)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ha=Ga.push(ma)-1,qa=Object.keys(ma).sort(Ea&&Ea(ma));Ba="";for(za=0;za<
qa.length;za++){var T=qa[za],Ha=ya(ma[T]);Ha&&(Ba&&(Ba+=","),Ba+=JSON.stringify(T)+":"+Ha)}Ga.splice(ha,1);return"{"+Ba+"}"}}(Z)}function W(Z,ka){if(ka instanceof f)Z.push([ka.x,ka.y]);else throw Error("Invalid Argument");}function ba(Z,ka){void 0===ka&&(ka=null);if(null!=Z){if(x(Z)||A(Z)||y(Z))return Z;if(Z instanceof r)return!0===(null===ka||void 0===ka?void 0:ka.keepGeometryType)?Z:Z.toJson();if(Z instanceof c)return Z.toArray().map(function(va){return ba(va,ka)});if(Z instanceof Array)return Z.map(function(va){return ba(va,
ka)});if(Z instanceof Date)return Z;if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJson)return Z.castAsJson(ka)}return null}function S(Z,ka,va,Ea,Ga){return X(Z,ka,va).then(function(na){Ga[Ea]=na})}function X(Z,ka,va){void 0===ka&&(ka=null);void 0===va&&(va=null);Z instanceof c&&(Z=Z.toArray());if(null!=Z){if(w(Z)||Z instanceof r||Z instanceof Date)return e.resolve(ba(Z,va));if(Z instanceof Array){for(var Ea=[],Ga=[],na=0;na<Z.length;na++){var ma=Z[na];null===ma||w(ma)||ma instanceof r||ma instanceof
Date?Ga.push(ba(ma,va)):(Ga.push(null),Ea.push(S(ma,ka,va,Ga.length-1,Ga)))}return 0<Ea.length?e.all(Ea).then(function(){return Ga}):e.resolve(Ga)}if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJsonAsync)return Z.castAsJsonAsync(ka,va)}return e.resolve(null)}Object.defineProperty(B,"__esModule",{value:!0});B.castAsJsonAsync=B.castAsJson=B.binaryOperator=B.tick=B.toStringArray=B.autoCastArrayOfPointsToMultiPoint=B.autoCastArrayOfPointsToPolyline=B.autoCastArrayOfPointsToPolygon=B.autoCastFeatureToGeometry=
B.stableStringify=B.getDomain=B.getDomainCode=B.getDomainValue=B.fixNullGeometry=B.fixSpatialReference=B.toBoolean=B.toDateTime=B.toDate=B.toNumber=B.toStringExplicit=B.toNumberArray=B.toString=B.equalityTest=B.greaterThanLessThan=B.standardiseDateFormat=B.formatDate=B.formatNumber=B.generateUUID=B.absRound=B.pcCheck=B.isDate=B.isImmutableArray=B.isFeatureSetCollection=B.isFeatureSet=B.isArray=B.isInteger=B.isNumber=B.isBoolean=B.isString=B.defaultUndefined=B.isSimpleType=B.isFunctionParameter=B.multiReplace=
B.continueResult=B.breakResult=B.voidOperation=B.SizzleFunction=B.ReturnResult=B.ImplicitResult=B.NativeFunction=B.SizzleFunctionE=B.NativeFunctionE=B.ImplicitResultE=B.ReturnResultE=void 0;D=function(){return function(Z){this.value=Z}}();B.ReturnResultE=D;var aa=function(){return function(Z){this.value=Z}}();B.ImplicitResultE=aa;var M=function(){return function(Z){this.fn=Z}}();B.NativeFunctionE=M;var da=function(){return function(Z,ka){this.paramCount=ka;this.fn=Z}}();B.SizzleFunctionE=da;B.NativeFunction=
M;B.ImplicitResult=aa;B.ReturnResult=D;B.SizzleFunction=da;B.voidOperation={type:"VOID"};B.breakResult={type:"BREAK"};B.continueResult={type:"CONTINUE"};B.multiReplace=t;B.isFunctionParameter=z;B.isSimpleType=w;B.defaultUndefined=function(Z,ka){return void 0===Z?ka:Z};B.isString=y;B.isBoolean=x;B.isNumber=A;B.isInteger=function(Z){return"number"===typeof Z&&isFinite(Z)&&Math.floor(Z)===Z};B.isArray=v;B.isFeatureSet=function(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===
Z.declaredRootClass)};B.isFeatureSetCollection=function(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureSetCollection"===Z.declaredRootClass)};B.isImmutableArray=u;B.isDate=C;B.pcCheck=function(Z,ka,va){if(Z.length<ka||Z.length>va)throw Error("Function called with wrong number of Parameters");};B.absRound=function(Z){return 0>Z?-Math.round(-Z):Math.round(Z)};B.generateUUID=function(){var Z=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ka){var va=
(Z+16*Math.random())%16|0;Z=Math.floor(Z/16);return("x"===ka?va:va&3|8).toString(16)})};B.formatNumber=E;B.formatDate=F;B.standardiseDateFormat=G;B.greaterThanLessThan=function(Z,ka,va){if(null===Z){if(null===ka||ka===B.voidOperation)return H(null,null,va);if(A(ka))return H(0,ka,va);if(y(ka)||x(ka))return H(0,P(ka),va);if(C(ka))return H(0,ka.getTime(),va)}if(Z===B.voidOperation){if(null===ka||ka===B.voidOperation)return H(null,null,va);if(A(ka))return H(0,ka,va);if(y(ka)||x(ka))return H(0,P(ka),va);
if(C(ka))return H(0,ka.getTime(),va)}else if(A(Z)){if(A(ka))return H(Z,ka,va);if(x(ka))return H(Z,P(ka),va);if(null===ka||ka===B.voidOperation)return H(Z,0,va);if(y(ka))return H(Z,P(ka),va);if(C(ka))return H(Z,ka.getTime(),va)}else if(y(Z)){if(y(ka))return H(I(Z),I(ka),va);if(C(ka))return H(P(Z),ka.getTime(),va);if(A(ka))return H(P(Z),ka,va);if(null===ka||ka===B.voidOperation)return H(P(Z),0,va);if(x(ka))return H(P(Z),P(ka),va)}else if(C(Z)){if(C(ka))return H(Z,ka,va);if(null===ka||ka===B.voidOperation)return H(Z.getTime(),
0,va);if(A(ka))return H(Z.getTime(),ka,va);if(x(ka)||y(ka))return H(Z.getTime(),P(ka),va)}else if(x(Z)){if(x(ka))return H(Z,ka,va);if(A(ka))return H(P(Z),P(ka),va);if(C(ka))return H(P(Z),ka.getTime(),va);if(null===ka||ka===B.voidOperation)return H(P(Z),0,va);if(y(ka))return H(P(Z),P(ka),va)}return!J(Z,ka)||"\x3c\x3d"!==va&&"\x3e\x3d"!==va?!1:!0};B.equalityTest=J;B.toString=I;B.toNumberArray=function(Z){var ka=[];if(!1===v(Z))return null;if(Z instanceof c){for(var va=0;va<Z.length();va++)ka[va]=P(Z.get(va));
return ka}for(va=0;va<Z.length;va++)ka[va]=P(Z[va]);return ka};B.toStringExplicit=R;B.toNumber=P;B.toDate=function(Z){return C(Z)?Z:y(Z)&&(Z=L(Z))?Z.toJSDate():null};B.toDateTime=function(Z){return C(Z)?q.DateTime.fromJSDate(Z):y(Z)?L(Z):null};B.toBoolean=function(Z){return x(Z)?Z:y(Z)?(Z=Z.toLowerCase(),"true"===Z?!0:!1):A(Z)?0===Z||isNaN(Z)?!1:!0:!1};B.fixSpatialReference=function(Z,ka){if(null===Z||void 0===Z)return null;if(null===Z.spatialReference||void 0===Z.spatialReference)Z.spatialReference=
ka;return Z};B.fixNullGeometry=function(Z){if(null===Z)return null;if(Z instanceof f)return"NaN"===Z.x||null===Z.x||isNaN(Z.x)?null:Z;if(Z instanceof b){if(0===Z.rings.length)return null;for(var ka=0,va=Z.rings;ka<va.length;ka++){var Ea=va[ka];if(0<Ea.length)return Z}return null}if(Z instanceof d){if(0===Z.paths.length)return null;ka=0;for(va=Z.paths;ka<va.length;ka++)if(Ea=va[ka],0<Ea.length)return Z;return null}return Z instanceof k?0===Z.points.length?null:Z:Z instanceof l?"NaN"===Z.xmin||null===
Z.xmin||isNaN(Z.xmin)?null:Z:null};B.getDomainValue=function(Z,ka){if(!Z||!Z.domain)return ka;var va=null;if("string"===Z.field.type||"esriFieldTypeString"===Z.field.type)ka=I(ka);else{if(null===ka||void 0===ka)return null;if(""===ka)return ka;ka=P(ka)}for(var Ea=0;Ea<Z.domain.codedValues.length;Ea++){var Ga=Z.domain.codedValues[Ea];Ga.code===ka&&(va=Ga)}return null===va?ka:va.name};B.getDomainCode=function(Z,ka){if(!Z||!Z.domain)return ka;var va=null;ka=I(ka);for(var Ea=0;Ea<Z.domain.codedValues.length;Ea++){var Ga=
Z.domain.codedValues[Ea];Ga.name===ka&&(va=Ga)}return null===va?ka:va.code};B.getDomain=function(Z,ka,va,Ea){void 0===va&&(va=null);if(!ka||!ka.fields)return null;for(var Ga=null,na=0;na<ka.fields.length;na++){var ma=ka.fields[na];ma.name.toLowerCase()===Z.toString().toLowerCase()&&(Ga=ma)}if(null===Ga)throw Error("Field not found");var ya,za;Ea||(Ea=va&&ka.typeIdField&&va._field(ka.typeIdField));null!=Ea&&ka.types.some(function(Ba){return Ba.id===Ea?((ya=Ba.domains&&Ba.domains[Ga.name])&&"inherited"===
ya.type&&(ya=K(Ga.name,ka),za=!0),!0):!1});za||ya||(ya=K(Z,ka));return{field:Ga,domain:ya}};B.stableStringify=Q;B.autoCastFeatureToGeometry=function(Z){if(null===Z)return null;for(var ka=[],va=0;va<Z.length;va++){var Ea=Z[va];Ea&&(Ea.declaredClass&&"esri.arcade.Feature"===Ea.declaredClass||"FeatureSetReader"===Ea.type)?ka.push(Ea.geometry()):ka.push(Ea)}return ka};B.autoCastArrayOfPointsToPolygon=function(Z,ka){if(v(Z)||u(Z)){var va=!1,Ea=!1,Ga=[],na=ka;if(v(Z)){for(var ma=0;ma<Z.length;ma++){var ya=
Z[ma];W(Ga,ya)}0<Ga.length&&(na=Z[0].spatialReference,va=Z[0].hasZ,Ea=Z[0].hasM)}else if(Z instanceof g)Ga=Z._elements,0<Ga.length&&(va=Z._hasZ,Ea=Z._hasM,na=Z.get(0).spatialReference);else if(u(Z)){ma=0;for(var za=Z.toArray();ma<za.length;ma++)ya=za[ma],W(Ga,ya);0<Ga.length&&(na=Z.get(0).spatialReference,va=!0===Z.get(0).hasZ,Ea=!0===Z.get(0).hasM)}else throw Error("Invalid Argument");if(0===Ga.length)return null;!1===(new b({rings:[],spatialReference:{wkid:4326}})).isClockwise(Ga)&&(Ga=Ga.slice(0).reverse());
return new b({rings:[Ga],spatialReference:na,hasZ:va,hasM:Ea})}return Z};B.autoCastArrayOfPointsToPolyline=function(Z,ka){if(v(Z)||u(Z)){var va=!1,Ea=!1,Ga=[],na=ka;if(v(Z)){for(var ma=0;ma<Z.length;ma++){var ya=Z[ma];W(Ga,ya)}0<Ga.length&&(na=Z[0].spatialReference,va=!0===Z[0].hasZ,Ea=!0===Z[0].hasM)}else if(Z instanceof g)Ga=Z._elements,0<Ga.length&&(va=Z._hasZ,Ea=Z._hasM,na=Z.get(0).spatialReference);else if(u(Z)){ma=0;for(var za=Z.toArray();ma<za.length;ma++)ya=za[ma],W(Ga,ya);0<Ga.length&&(na=
Z.get(0).spatialReference,va=!0===Z.get(0).hasZ,Ea=!0===Z.get(0).hasM)}return 0===Ga.length?null:new d({paths:[Ga],spatialReference:na,hasZ:va,hasM:Ea})}return Z};B.autoCastArrayOfPointsToMultiPoint=function(Z,ka){if(v(Z)||u(Z)){var va=!1,Ea=!1,Ga=[],na=ka;if(v(Z)){for(var ma=0;ma<Z.length;ma++){var ya=Z[ma];W(Ga,ya)}0<Ga.length&&(na=Z[0].spatialReference,va=!0===Z[0].hasZ,Ea=!0===Z[0].hasM)}else if(Z instanceof g)Ga=Z._elements,0<Ga.length&&(va=Z._hasZ,Ea=Z._hasM,na=Z.get(0).spatialReference);else if(u(Z)){ma=
0;for(var za=Z.toArray();ma<za.length;ma++)ya=za[ma],W(Ga,ya);0<Ga.length&&(na=Z.get(0).spatialReference,va=!0===Z.get(0).hasZ,Ea=!0===Z.get(0).hasM)}return 0===Ga.length?null:new k({points:Ga,spatialReference:na,hasZ:va,hasM:Ea})}return Z};B.toStringArray=function(Z,ka){void 0===ka&&(ka=!1);var va=[];if(null===Z)return va;if(!0===v(Z)){for(var Ea=0;Ea<Z.length;Ea++){var Ga=I(Z[Ea]);""===Ga&&!0!==ka||va.push(Ga)}return va}if(Z instanceof c){for(Ea=0;Ea<Z.length();Ea++)Ga=I(Z.get(Ea)),""===Ga&&!0!==
ka||va.push(Ga);return va}return w(Z)?(Ga=I(Z),""===Ga&&!0!==ka||va.push(Ga),va):[]};var ea=0;B.tick=function(Z){ea++;return 0===ea%100?(ea=0,e.create(function(ka){setTimeout(function(){ka(Z)},0)})):Z};B.binaryOperator=function(Z,ka,va){switch(va){case "\x26":return Z&ka;case "|":return Z|ka;case "^":return Z^ka;case "\x3c\x3c":return Z<<ka;case "\x3e\x3e":return Z>>ka;case "\x3e\x3e\x3e":return Z>>>ka}};B.castAsJson=ba;B.castAsJsonAsync=X})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(D,B){return function(){return function(a,c){this.context=this.definition=null;this.definition=a;this.context=c}}()})},"esri/arcade/ImmutablePathArray":function(){var D=this&&this.__extends||function(){var B=function(a,c){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var e in g)Object.prototype.hasOwnProperty.call(g,e)&&(h[e]=g[e])};return B(a,c)};return function(a,c){function h(){this.constructor=a}if("function"!==typeof c&&
null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");B(a,c);a.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(B,a,c,h){return function(g){function e(l,r,k,f,b){l=g.call(this,l)||this;l._lazyPath=[];l._hasZ=!1;l._hasM=!1;l._hasZ=k;l._hasM=f;l._spRef=r;l._cacheId=b;return l}D(e,g);e.prototype.get=function(l){if(void 0===this._lazyPath[l]){var r=this._elements[l];
if(void 0===r)return;this._lazyPath[l]=new h(r,this._spRef,this._hasZ,this._hasM,this._cacheId,l)}return this._lazyPath[l]};e.prototype.equalityTest=function(l){return l===this?!0:null===l||!1===l instanceof e?!1:l.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()};return e}(c)})},"esri/arcade/ImmutablePointArray":function(){var D=this&&this.__extends||function(){var B=function(a,c){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&
function(h,g){h.__proto__=g}||function(h,g){for(var e in g)Object.prototype.hasOwnProperty.call(g,e)&&(h[e]=g[e])};return B(a,c)};return function(a,c){function h(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");B(a,c);a.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(B,a,c,h){return function(g){function e(l,
r,k,f,b,d){l=g.call(this,l)||this;l._lazyPt=[];l._hasZ=!1;l._hasM=!1;l._spRef=r;l._hasZ=k;l._hasM=f;l._cacheId=b;l._partId=d;return l}D(e,g);e.prototype.get=function(l){if(void 0===this._lazyPt[l]){var r=this._elements[l];if(void 0===r)return;var k=this._hasZ,f=this._hasM,b=null;b=k&&!f?new h(r[0],r[1],r[2],void 0,this._spRef):f&&!k?new h(r[0],r[1],void 0,r[2],this._spRef):k&&f?new h(r[0],r[1],r[2],r[3],this._spRef):new h(r[0],r[1],this._spRef);b.setCacheValue("_arcadeCacheId",this._cacheId.toString()+
"-"+this._partId.toString()+"-"+l.toString());this._lazyPt[l]=b}return this._lazyPt[l]};e.prototype.equalityTest=function(l){return l===this?!0:null===l||!1===l instanceof e?!1:l.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return e}(c)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(D,B,a,c){function h(r,k){var f=new a(k);r(function(b){return l(b).then(f.resolve)},
f.reject);return f.promise}function g(r){if(r){if("function"!==typeof r.forEach){var k=Object.keys(r),f=k.map(function(d){return r[d]});return g(f).then(function(d){var q={};k.forEach(function(m,n){return q[m]=d[n]});return q})}var b=null;return h(function(d,q){var m=[],n=r.length;0===n&&d(m);r.forEach(function(t){var z={promise:t};m.push(z);t.then(function(w){z.value=w})["catch"](function(w){z.error=w}).then(function(){--n;0===n&&(b?q(Error("AbortError")):d(m))})})},function(d){b=d||"Invocation cancellation";
r.forEach(function(q){return q.cancel(d)})})}}function e(r){void 0===r&&(r=void 0);var k=new a;k.resolve(r);return k.promise}function l(r){return r&&"function"===typeof r.then?r:e(r)}Object.defineProperty(B,"__esModule",{value:!0});B.createResolver=B.when=B.isPromiseLike=B.wrapCallback=B.timeout=B.after=B.resolve=B.reject=B.first=B.eachAlwaysValues=B.eachAlways=B.createDeferred=B.create=B.filter=B.all=void 0;B.all=function(r){return c(r)};B.filter=function(r,k){var f=r.slice();return c(r.map(function(b,
d){return k(b,d)})).then(function(b){return f.filter(function(d,q){return b[q]})})};B.create=h;B.createDeferred=function(r){var k=null;r=h(function(f,b){k={resolve:f,reject:b}},r);k.promise=r;k.cancel=function(){k.reject(Error("AbortError"))};return k};B.eachAlways=g;B.eachAlwaysValues=function(r){return g(r).then(function(k){return k.filter(function(f){return!!f.value}).map(function(f){return f.value})})};B.first=function(r){return r&&r.length?h(function(k,f){for(var b=0;b<r.length;b++)r[b].then(k,
f)}):e()};B.reject=function(r){var k=new a;k.reject(r);return k.promise};B.resolve=e;B.after=function(r,k){void 0===k&&(k=void 0);var f=0;return h(function(b){f=setTimeout(function(){b(k)},r)},function(){f&&(clearTimeout(f),f=0)})};B.timeout=function(r,k,f){var b=0,d=new a(r.cancel);r.then(function(q){d.isFulfilled()||(d.resolve(q),b&&(clearTimeout(b),b=0))});r["catch"](function(q){d.isFulfilled()||(d.reject(q),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){d.reject(f||Error("promiseUtils:timeout"))},
k);return d.promise};B.wrapCallback=function(r){var k=!1;return h(function(){r(function(f){k||e(f)})},function(){return k=!0})};B.isPromiseLike=function(r){return r&&"function"===typeof r.then};B.when=l;B.createResolver=function(r){var k,f;r=h(function(d,q){k=d;f=q},r);var b=function(d){k(d)};b.resolve=function(d){return k(d)};b.reject=function(d){return f(d)};b.promise=r;return b}})},"esri/libs/luxon/luxon":function(){define(["exports"],function(D){function B(oa,ta){for(var V=0;V<ta.length;V++){var pa=
ta[V];pa.enumerable=pa.enumerable||!1;pa.configurable=!0;"value"in pa&&(pa.writable=!0);Object.defineProperty(oa,pa.key,pa)}}function a(oa,ta,V){ta&&B(oa.prototype,ta);V&&B(oa,V);return oa}function c(){c=Object.assign||function(oa){for(var ta=1;ta<arguments.length;ta++){var V=arguments[ta],pa;for(pa in V)Object.prototype.hasOwnProperty.call(V,pa)&&(oa[pa]=V[pa])}return oa};return c.apply(this,arguments)}function h(oa,ta){oa.prototype=Object.create(ta.prototype);oa.prototype.constructor=oa;e(oa,ta)}
function g(oa){g=Object.setPrototypeOf?Object.getPrototypeOf:function(ta){return ta.__proto__||Object.getPrototypeOf(ta)};return g(oa)}function e(oa,ta){e=Object.setPrototypeOf||function(V,pa){V.__proto__=pa;return V};return e(oa,ta)}function l(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(oa){return!1}}function r(oa,ta,V){r=
l()?Reflect.construct:function(pa,xa,Ia){var Ra=[null];Ra.push.apply(Ra,xa);pa=new (Function.bind.apply(pa,Ra));Ia&&e(pa,Ia.prototype);return pa};return r.apply(null,arguments)}function k(oa){var ta="function"===typeof Map?new Map:void 0;k=function(V){function pa(){return r(V,arguments,g(this).constructor)}if(null===V||-1===Function.toString.call(V).indexOf("[native code]"))return V;if("function"!==typeof V)throw new TypeError("Super expression must either be null or a function");if("undefined"!==
typeof ta){if(ta.has(V))return ta.get(V);ta.set(V,pa)}pa.prototype=Object.create(V.prototype,{constructor:{value:pa,enumerable:!1,writable:!0,configurable:!0}});return e(pa,V)};return k(oa)}function f(oa,ta){if(oa){if("string"===typeof oa)return b(oa,ta);var V=Object.prototype.toString.call(oa).slice(8,-1);"Object"===V&&oa.constructor&&(V=oa.constructor.name);if("Map"===V||"Set"===V)return Array.from(oa);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return b(oa,ta)}}function b(oa,
ta){if(null==ta||ta>oa.length)ta=oa.length;for(var V=0,pa=Array(ta);V<ta;V++)pa[V]=oa[V];return pa}function d(oa,ta){var V="undefined"!==typeof Symbol&&oa[Symbol.iterator]||oa["@@iterator"];if(V)return(V=V.call(oa)).next.bind(V);if(Array.isArray(oa)||(V=f(oa))||ta&&oa&&"number"===typeof oa.length){V&&(oa=V);var pa=0;return function(){return pa>=oa.length?{done:!0}:{done:!1,value:oa[pa++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function q(oa){return"undefined"===typeof oa}function m(oa){return"number"===typeof oa}function n(oa){return"number"===typeof oa&&0===oa%1}function t(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(oa){return!1}}function z(oa,ta,V){if(0!==oa.length)return oa.reduce(function(pa,xa){var Ia=[ta(xa),xa];return pa?V(pa[0],Ia[0])===pa[0]?pa:Ia:Ia},null)[1]}function w(oa,ta){return ta.reduce(function(V,pa){V[pa]=oa[pa];return V},{})}function y(oa,ta){return Object.prototype.hasOwnProperty.call(oa,
ta)}function x(oa,ta,V){return n(oa)&&oa>=ta&&oa<=V}function A(oa,ta){void 0===ta&&(ta=2);var V=0>oa?"-":"",pa=V?-1*oa:oa;pa=pa.toString().length<ta?("0".repeat(ta)+pa).slice(-ta):pa.toString();return""+V+pa}function v(oa){if(!q(oa)&&null!==oa&&""!==oa)return parseInt(oa,10)}function u(oa){if(!q(oa)&&null!==oa&&""!==oa)return oa=1E3*parseFloat("0."+oa),Math.floor(oa)}function C(oa,ta,V){void 0===V&&(V=!1);ta=Math.pow(10,ta);return(V?Math.trunc:Math.round)(oa*ta)/ta}function E(oa){return 0===oa%4&&
(0!==oa%100||0===oa%400)}function F(oa,ta){var V=ta-1;V=V-12*Math.floor(V/12)+1;return 2===V?E(oa+(ta-V)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][V-1]}function G(oa){var ta=Date.UTC(oa.year,oa.month-1,oa.day,oa.hour,oa.minute,oa.second,oa.millisecond);100>oa.year&&0<=oa.year&&(ta=new Date(ta),ta.setUTCFullYear(ta.getUTCFullYear()-1900));return+ta}function H(oa){var ta=oa-1;ta=(ta+Math.floor(ta/4)-Math.floor(ta/100)+Math.floor(ta/400))%7;return 4===(oa+Math.floor(oa/4)-Math.floor(oa/100)+
Math.floor(oa/400))%7||3===ta?53:52}function J(oa){return 99<oa?oa:60<oa?1900+oa:2E3+oa}function I(oa,ta,V,pa){void 0===pa&&(pa=null);oa=new Date(oa);var xa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};pa&&(xa.timeZone=pa);ta=c({timeZoneName:ta},xa);return(V=(new Intl.DateTimeFormat(V,ta)).formatToParts(oa).find(function(Ia){return"timezonename"===Ia.type.toLowerCase()}))?V.value:null}function R(oa,ta){var V=parseInt(oa,10);Number.isNaN(V)&&(V=0);
var pa=parseInt(ta,10)||0;pa=0>V||Object.is(V,-0)?-pa:pa;return 60*V+pa}function O(oa){var ta=Number(oa);if("boolean"===typeof oa||""===oa||Number.isNaN(ta))throw new Xb("Invalid unit value "+oa);return ta}function P(oa,ta){var V={},pa;for(pa in oa)if(y(oa,pa)){var xa=oa[pa];void 0!==xa&&null!==xa&&(V[ta(pa)]=O(xa))}return V}function L(oa,ta){var V=Math.trunc(Math.abs(oa/60)),pa=Math.trunc(Math.abs(oa%60)),xa=0<=oa?"+":"-";switch(ta){case "short":return""+xa+A(V,2)+":"+A(pa,2);case "narrow":return""+
xa+V+(0<pa?":"+pa:"");case "techie":return""+xa+A(V,2)+A(pa,2);default:throw new RangeError("Value format "+ta+" is out of range for property format");}}function K(oa){return w(oa,["hour","minute","second","millisecond"])}function Q(oa){switch(oa){case "narrow":return[].concat(Pc);case "short":return[].concat(bc);case "long":return[].concat(mc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function W(oa){switch(oa){case "narrow":return[].concat(Wc);
case "short":return[].concat(Ic);case "long":return[].concat(Qc);case "numeric":return"1234567".split("");default:return null}}function ba(oa){switch(oa){case "narrow":return[].concat(oc);case "short":return[].concat(rc);case "long":return[].concat(Wb);default:return null}}function S(oa,ta,V,pa){void 0===V&&(V="always");void 0===pa&&(pa=!1);var xa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute",
"min."],seconds:["second","sec."]},Ia=-1===["hours","minutes","seconds"].indexOf(oa);if("auto"===V&&Ia)switch(V="days"===oa,ta){case 1:return V?"tomorrow":"next "+xa[oa][0];case -1:return V?"yesterday":"last "+xa[oa][0];case 0:return V?"today":"this "+xa[oa][0]}V=Object.is(ta,-0)||0>ta;ta=Math.abs(ta);Ia=1===ta;var Ra=xa[oa];oa=pa?Ia?Ra[1]:Ra[2]||Ra[1]:Ia?xa[oa][0]:oa;return V?ta+" "+oa+" ago":"in "+ta+" "+oa}function X(oa,ta){for(var V="",pa=d(oa),xa;!(xa=pa()).done;)xa=xa.value,V=xa.literal?V+xa.val:
V+ta(xa.val);return V}function aa(oa,ta){var V;if(q(oa)||null===oa)return ta;if(oa instanceof cc)return oa;if("string"===typeof oa){var pa=oa.toLowerCase();return"local"===pa||"system"===pa?ta:"utc"===pa||"gmt"===pa?$b.utcInstance:null!=(V=fc.parseGMTOffset(oa))?$b.instance(V):fc.isValidSpecifier(pa)?fc.create(oa):$b.parseSpecifier(pa)||new Hb(oa)}return m(oa)?$b.instance(oa):"object"===typeof oa&&oa.offset&&"number"===typeof oa.offset?oa:new Hb(oa)}function M(oa,ta){void 0===ta&&(ta={});var V=JSON.stringify([oa,
ta]),pa=Yc[V];pa||(pa=new Intl.DateTimeFormat(oa,ta),Yc[V]=pa);return pa}function da(oa){for(var ta=[],V=1;12>=V;V++){var pa=Tb.utc(2016,V,1);ta.push(oa(pa))}return ta}function ea(oa){for(var ta=[],V=1;7>=V;V++){var pa=Tb.utc(2016,11,13+V);ta.push(oa(pa))}return ta}function Z(oa,ta,V,pa,xa){oa=oa.listingMode(V);return"error"===oa?null:"en"===oa?pa(ta):xa(ta)}function ka(){for(var oa=arguments.length,ta=Array(oa),V=0;V<oa;V++)ta[V]=arguments[V];oa=ta.reduce(function(pa,xa){return pa+xa.source},"");
return RegExp("^"+oa+"$")}function va(){for(var oa=arguments.length,ta=Array(oa),V=0;V<oa;V++)ta[V]=arguments[V];return function(pa){return ta.reduce(function(xa,Ia){var Ra=xa[0],ab=xa[1],gb=Ia(pa,xa[2]),pb=gb[1],ub=gb[2];return[c({},Ra,gb[0]),ab||pb,ub]},[{},null,1]).slice(0,2)}}function Ea(oa){if(null==oa)return[null,null];for(var ta=arguments.length,V=Array(1<ta?ta-1:0),pa=1;pa<ta;pa++)V[pa-1]=arguments[pa];for(ta=0;ta<V.length;ta++){var xa=V[ta];pa=xa[1];if(xa=xa[0].exec(oa))return pa(xa)}return[null,
null]}function Ga(){for(var oa=arguments.length,ta=Array(oa),V=0;V<oa;V++)ta[V]=arguments[V];return function(pa,xa){var Ia={},Ra;for(Ra=0;Ra<ta.length;Ra++)Ia[ta[Ra]]=v(pa[xa+Ra]);return[Ia,null,xa+Ra]}}function na(oa,ta,V){oa=oa[ta];return q(oa)?V:v(oa)}function ma(oa,ta){return[{year:na(oa,ta),month:na(oa,ta+1,1),day:na(oa,ta+2,1)},null,ta+3]}function ya(oa,ta){return[{hours:na(oa,ta,0),minutes:na(oa,ta+1,0),seconds:na(oa,ta+2,0),milliseconds:u(oa[ta+3])},null,ta+4]}function za(oa,ta){var V=!oa[ta]&&
!oa[ta+1],pa=R(oa[ta+1],oa[ta+2]);return[{},V?null:$b.instance(pa),ta+3]}function Ba(oa,ta){return[{},oa[ta]?fc.create(oa[ta]):null,ta+1]}function ha(oa){var ta=oa[2],V=oa[3],pa=oa[4],xa=oa[5],Ia=oa[6],Ra=oa[7],ab=oa[8],gb="-"===oa[0][0],pb=Ra&&"-"===Ra[0],ub=function(Db,xb){void 0===xb&&(xb=!1);return void 0!==Db&&(xb||Db&&gb)?-Db:Db};return[{years:ub(v(oa[1])),months:ub(v(ta)),weeks:ub(v(V)),days:ub(v(pa)),hours:ub(v(xa)),minutes:ub(v(Ia)),seconds:ub(v(Ra),"-0"===Ra),milliseconds:ub(u(ab),pb)}]}
function qa(oa,ta,V,pa,xa,Ia,Ra){ta={year:2===ta.length?J(v(ta)):v(ta),month:bc.indexOf(V)+1,day:v(pa),hour:v(xa),minute:v(Ia)};Ra&&(ta.second=v(Ra));oa&&(ta.weekday=3<oa.length?Qc.indexOf(oa)+1:Ic.indexOf(oa)+1);return ta}function T(oa){var ta=oa[8],V=oa[9],pa=oa[10],xa=oa[11];oa=qa(oa[1],oa[4],oa[3],oa[2],oa[5],oa[6],oa[7]);ta=ta?zb[ta]:V?0:R(pa,xa);return[oa,new $b(ta)]}function Ha(oa){return[qa(oa[1],oa[4],oa[3],oa[2],oa[5],oa[6],oa[7]),$b.utcInstance]}function Ja(oa){return[qa(oa[1],oa[7],oa[2],
oa[3],oa[4],oa[5],oa[6]),$b.utcInstance]}function fa(oa,ta,V){void 0===V&&(V=!1);oa={values:V?ta.values:c({},oa.values,ta.values||{}),loc:oa.loc.clone(ta.loc),conversionAccuracy:ta.conversionAccuracy||oa.conversionAccuracy};return new N(oa)}function Ya(oa,ta,V,pa,xa){oa=oa[xa][V];var Ia=ta[V]/oa;Ia=Math.sign(Ia)!==Math.sign(pa[xa])&&0!==pa[xa]&&1>=Math.abs(Ia)?0>Ia?Math.floor(Ia):Math.ceil(Ia):Math.trunc(Ia);pa[xa]+=Ia;ta[V]-=Ia*oa}function Xa(oa,ta){md.reduce(function(V,pa){if(q(ta[pa]))return V;
V&&Ya(oa,ta,V,ta,pa);return pa},null)}function Ca(oa){if(m(oa))return N.fromMillis(oa);if(N.isDuration(oa))return oa;if("object"===typeof oa)return N.fromObject(oa);throw new Xb("Unknown duration argument "+oa+" of type "+typeof oa);}function Y(oa,ta){var V=function(pa){return pa.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};V=V(ta)-V(oa);return Math.floor(N.fromMillis(V).as("days"))}function la(oa,ta,V){for(var pa={},xa,Ia,Ra=0,ab=[["years",function(xb,Bb){return Bb.year-xb.year}],["quarters",
function(xb,Bb){return Bb.quarter-xb.quarter}],["months",function(xb,Bb){return Bb.month-xb.month+12*(Bb.year-xb.year)}],["weeks",function(xb,Bb){var qc=Y(xb,Bb);return(qc-qc%7)/7}],["days",Y]];Ra<ab.length;Ra++){var gb=ab[Ra],pb=gb[0];gb=gb[1];if(0<=V.indexOf(pb)){var ub;xa=pb;gb=gb(oa,ta);Ia=oa.plus((ub={},ub[pb]=gb,ub));if(Ia>ta){var Db;oa=oa.plus((Db={},Db[pb]=gb-1,Db));--gb}else oa=Ia;pa[pb]=gb}}return[oa,pa,Ia,xa]}function sa(oa,ta,V,pa){var xa=la(oa,ta,V);oa=xa[0];var Ia=xa[1],Ra=xa[2],ab=
xa[3];xa=ta-oa;V=V.filter(function(ub){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(ub)});if(0===V.length){if(Ra<ta){var gb;Ra=oa.plus((gb={},gb[ab]=1,gb))}Ra!==oa&&(Ia[ab]=(Ia[ab]||0)+xa/(Ra-oa))}ta=N.fromObject(Ia,pa);if(0<V.length){var pb;return(pb=N.fromMillis(xa,pa)).shiftTo.apply(pb,V).plus(ta)}return ta}function U(oa,ta){var V=oa.numberingSystem;void 0===ta&&(ta="");return new RegExp(""+Aa[V||"latn"]+ta)}function ia(oa,ta){void 0===ta&&(ta=function(V){return V});return{regex:oa,
deser:function(V){var pa=ta;V=V[0];var xa=parseInt(V,10);if(isNaN(xa)){xa="";for(var Ia=0;Ia<V.length;Ia++){var Ra=V.charCodeAt(Ia);if(-1!==V[Ia].search(Aa.hanidec))xa+=db.indexOf(V[Ia]);else for(pb in Qa){var ab=Qa[pb],gb=ab[0];ab=ab[1];Ra>=gb&&Ra<=ab&&(xa+=Ra-gb)}}var pb=parseInt(xa,10)}else pb=xa;return pa(pb)}}}function ua(oa){return oa.replace(/\./g,"\\.?").replace(qb,fb)}function wa(oa,ta){return null===oa?null:{regex:RegExp(oa.map(ua).join("|")),deser:function(V){var pa=V[0];return oa.findIndex(function(xa){return pa.replace(/\./g,
"").replace(qb," ").toLowerCase()===xa.replace(/\./g,"").replace(qb," ").toLowerCase()})+ta}}}function Fa(oa,ta){return{regex:oa,deser:function(V){return R(V[1],V[2])},groups:ta}}function Da(oa){return{regex:oa,deser:function(ta){return ta[0]}}}function La(oa,ta){var V=U(ta),pa=U(ta,"{2}"),xa=U(ta,"{3}"),Ia=U(ta,"{4}"),Ra=U(ta,"{6}"),ab=U(ta,"{1,2}"),gb=U(ta,"{1,3}"),pb=U(ta,"{1,6}"),ub=U(ta,"{1,9}"),Db=U(ta,"{2,4}"),xb=U(ta,"{4,6}"),Bb=function(nc){return{regex:RegExp(nc.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$\x26")),deser:function(Jd){return Jd[0]},literal:!0}},qc=function(nc){if(oa.literal)return Bb(nc);switch(nc.val){case "G":return wa(ta.eras("short",!1),0);case "GG":return wa(ta.eras("long",!1),0);case "y":return ia(pb);case "yy":return ia(Db,J);case "yyyy":return ia(Ia);case "yyyyy":return ia(xb);case "yyyyyy":return ia(Ra);case "M":return ia(ab);case "MM":return ia(pa);case "MMM":return wa(ta.months("short",!0,!1),1);case "MMMM":return wa(ta.months("long",!0,!1),1);case "L":return ia(ab);case "LL":return ia(pa);
case "LLL":return wa(ta.months("short",!1,!1),1);case "LLLL":return wa(ta.months("long",!1,!1),1);case "d":return ia(ab);case "dd":return ia(pa);case "o":return ia(gb);case "ooo":return ia(xa);case "HH":return ia(pa);case "H":return ia(ab);case "hh":return ia(pa);case "h":return ia(ab);case "mm":return ia(pa);case "m":return ia(ab);case "q":return ia(ab);case "qq":return ia(pa);case "s":return ia(ab);case "ss":return ia(pa);case "S":return ia(gb);case "SSS":return ia(xa);case "u":return Da(ub);case "a":return wa(ta.meridiems(),
0);case "kkkk":return ia(Ia);case "kk":return ia(Db,J);case "W":return ia(ab);case "WW":return ia(pa);case "E":case "c":return ia(V);case "EEE":return wa(ta.weekdays("short",!1,!1),1);case "EEEE":return wa(ta.weekdays("long",!1,!1),1);case "ccc":return wa(ta.weekdays("short",!0,!1),1);case "cccc":return wa(ta.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Fa(new RegExp("([+-]"+ab.source+")(?::("+pa.source+"))?"),2);case "ZZZ":return Fa(new RegExp("([+-]"+ab.source+")("+pa.source+")?"),2);case "z":return Da(/[a-z_+-/]{1,256}?/i);
default:return Bb(nc)}}(oa)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};qc.token=oa;return qc}function Wa(oa){return["^"+oa.map(function(ta){return ta.regex}).reduce(function(ta,V){return ta+"("+V.source+")"},"")+"$",oa]}function Va(oa,ta,V){if(oa=oa.match(ta)){ta={};var pa=1,xa;for(xa in V)if(y(V,xa)){var Ia=V[xa],Ra=Ia.groups?Ia.groups+1:1;!Ia.literal&&Ia.token&&(ta[Ia.token.val[0]]=Ia.deser(oa.slice(pa,pa+Ra)));pa+=Ra}return[oa,ta]}return[oa,{}]}function Ma(oa){var ta=
function(pa){switch(pa){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};var V=q(oa.Z)?q(oa.z)?null:fc.create(oa.z):new $b(oa.Z);q(oa.q)||(oa.M=3*(oa.q-1)+1);q(oa.h)||(12>oa.h&&1===oa.a?oa.h+=12:12===oa.h&&0===
oa.a&&(oa.h=0));0===oa.G&&oa.y&&(oa.y=-oa.y);q(oa.u)||(oa.S=u(oa.u));return[Object.keys(oa).reduce(function(pa,xa){var Ia=ta(xa);Ia&&(pa[Ia]=oa[xa]);return pa},{}),V]}function eb(){vb||(vb=Tb.fromMillis(1555555555555));return vb}function ib(oa,ta){if(oa.literal)return oa;var V=Pb.macroTokenToFormatOpts(oa.val);if(!V)return oa;var pa=Pb.create(ta,V).formatDateTimeParts(eb()).map(function(xa){var Ia=xa.type;xa=xa.value;"literal"===Ia?Ia={literal:!0,val:xa}:(xa=V[Ia],Ia=Eb[Ia],"object"===typeof Ia&&
(Ia=Ia[xa]),Ia=Ia?{literal:!1,val:Ia}:void 0);return Ia});return pa.includes(void 0)?oa:pa}function lb(oa,ta){var V;return(V=Array.prototype).concat.apply(V,oa.map(function(pa){return ib(pa,ta)}))}function rb(oa,ta,V){V=lb(Pb.parseFormat(V),oa);var pa=V.map(function(gb){return La(gb,oa)}),xa=pa.find(function(gb){return gb.invalidReason});if(xa)return{input:ta,tokens:V,invalidReason:xa.invalidReason};xa=Wa(pa);pa=RegExp(xa[0],"i");var Ia=Va(ta,pa,xa[1]);xa=Ia[0];var Ra=(Ia=Ia[1])?Ma(Ia):[null,null],
ab=Ra[0];Ra=Ra[1];if(y(Ia,"a")&&y(Ia,"H"))throw new Vb("Can't include meridiem when specifying 24-hour format");return{input:ta,tokens:V,regex:pa,rawMatches:xa,matches:Ia,result:ab,zone:Ra}}function sb(oa,ta){return new Qb("unit out of range","you specified "+ta+" (of type "+typeof ta+") as a "+oa+", which is invalid")}function tb(oa,ta,V){oa=(new Date(Date.UTC(oa,ta-1,V))).getUTCDay();return 0===oa?7:oa}function Ab(oa,ta){var V=E(oa)?tc:Lb,pa=V.findIndex(function(xa){return xa<ta});return{month:pa+
1,day:ta-V[pa]}}function Cb(oa){var ta=oa.year,V=oa.month,pa=oa.day;var xa=pa+(E(ta)?tc:Lb)[V-1];V=tb(ta,V,pa);xa=Math.floor((xa-V+10)/7);1>xa?(--ta,xa=H(ta)):xa>H(ta)&&(ta+=1,xa=1);return c({weekYear:ta,weekNumber:xa,weekday:V},K(oa))}function nb(oa){var ta=oa.weekYear,V=oa.weekNumber,pa=oa.weekday,xa=tb(ta,1,4),Ia=E(ta)?366:365;V=7*V+pa-xa-3;1>V?(Ia=ta-1,V+=E(Ia)?366:365):V>Ia?(Ia=ta+1,V-=E(ta)?366:365):Ia=ta;ta=Ab(Ia,V);return c({year:Ia,month:ta.month,day:ta.day},K(oa))}function yb(oa){var ta=
oa.year;var V=oa.month;V=oa.day+(E(ta)?tc:Lb)[V-1];return c({year:ta,ordinal:V},K(oa))}function Fb(oa){var ta=oa.year,V=Ab(ta,oa.ordinal);return c({year:ta,month:V.month,day:V.day},K(oa))}function gc(oa){var ta=n(oa.year),V=x(oa.month,1,12),pa=x(oa.day,1,F(oa.year,oa.month));return ta?V?pa?!1:sb("day",oa.day):sb("month",oa.month):sb("year",oa.year)}function Sb(oa){var ta=oa.hour,V=oa.minute,pa=oa.second;oa=oa.millisecond;var xa=x(ta,0,23)||24===ta&&0===V&&0===pa&&0===oa,Ia=x(V,0,59),Ra=x(pa,0,59),
ab=x(oa,0,999);return xa?Ia?Ra?ab?!1:sb("millisecond",oa):sb("second",pa):sb("minute",V):sb("hour",ta)}function Kb(oa){return new Qb("unsupported zone",'the zone "'+oa.name+'" is not supported')}function uc(oa){null===oa.weekData&&(oa.weekData=Cb(oa.c));return oa.weekData}function Ib(oa,ta){var V={ts:oa.ts,zone:oa.zone,c:oa.c,o:oa.o,loc:oa.loc,invalid:oa.invalid};return new Tb(c({},V,ta,{old:V}))}function dc(oa,ta,V){var pa=oa-6E4*ta,xa=V.offset(pa);if(ta===xa)return[pa,ta];pa-=6E4*(xa-ta);ta=V.offset(pa);
return xa===ta?[pa,xa]:[oa-6E4*Math.min(xa,ta),Math.max(xa,ta)]}function hc(oa,ta){var V=new Date(oa+6E4*ta);return{year:V.getUTCFullYear(),month:V.getUTCMonth()+1,day:V.getUTCDate(),hour:V.getUTCHours(),minute:V.getUTCMinutes(),second:V.getUTCSeconds(),millisecond:V.getUTCMilliseconds()}}function Zb(oa,ta,V){return dc(G(oa),ta,V)}function vc(oa,ta){var V=oa.o,pa=oa.c.year+Math.trunc(ta.years),xa=oa.c.month+Math.trunc(ta.months)+3*Math.trunc(ta.quarters);xa=c({},oa.c,{year:pa,month:xa,day:Math.min(oa.c.day,
F(pa,xa))+Math.trunc(ta.days)+7*Math.trunc(ta.weeks)});pa=N.fromObject({years:ta.years-Math.trunc(ta.years),quarters:ta.quarters-Math.trunc(ta.quarters),months:ta.months-Math.trunc(ta.months),weeks:ta.weeks-Math.trunc(ta.weeks),days:ta.days-Math.trunc(ta.days),hours:ta.hours,minutes:ta.minutes,seconds:ta.seconds,milliseconds:ta.milliseconds}).as("milliseconds");xa=G(xa);xa=dc(xa,V,oa.zone);V=xa[0];xa=xa[1];0!==pa&&(V+=pa,xa=oa.zone.offset(V));return{ts:V,o:xa}}function ic(oa,ta,V,pa,xa){var Ia=V.setZone,
Ra=V.zone;return oa&&0!==Object.keys(oa).length?(oa=Tb.fromObject(oa,c({},V,{zone:ta||Ra})),Ia?oa:oa.setZone(Ra)):Tb.invalid(new Qb("unparsable",'the input "'+xa+"\" can't be parsed as "+pa))}function jc(oa,ta,V){void 0===V&&(V=!0);return oa.isValid?Pb.create(Rb.create("en-US"),{allowZ:V,forceSimple:!0}).formatDateTimeFromString(oa,ta):null}function Ac(oa,ta){var V=ta.suppressSeconds,pa=ta.suppressMilliseconds;pa=void 0===pa?!1:pa;var xa=ta.includeOffset,Ia=ta.includePrefix;Ia=void 0===Ia?!1:Ia;var Ra=
ta.includeZone;Ra=void 0===Ra?!1:Ra;var ab=ta.spaceZone,gb=ta.format;gb=void 0===gb?"extended":gb;var pb="basic"===gb?"HHmm":"HH:mm";void 0!==V&&V&&0===oa.second&&0===oa.millisecond||(pb+="basic"===gb?"ss":":ss",pa&&0===oa.millisecond||(pb+=".SSS"));(Ra||xa)&&(void 0===ab?0:ab)&&(pb+=" ");Ra?pb+="z":xa&&(pb+="basic"===gb?"ZZZ":"ZZ");V=jc(oa,pb);Ia&&(V="T"+V);return V}function wc(oa){var ta={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",
minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[oa.toLowerCase()];if(!ta)throw new lc(oa);return ta}function Ec(oa,ta){var V=aa(ta.zone,Jb.defaultZone),pa=Rb.fromObject(ta),xa=Jb.now();if(!q(oa.year)){var Ia=d(Id);for(var Ra;!(Ra=Ia()).done;)Ra=
Ra.value,q(oa[Ra])&&(oa[Ra]=Vc[Ra]);if(Ia=gc(oa)||Sb(oa))return Tb.invalid(Ia);xa=V.offset(xa);Ia=Zb(oa,xa,V);xa=Ia[0];Ia=Ia[1]}return new Tb({ts:xa,zone:V,loc:pa,o:Ia})}function Nc(oa,ta,V){var pa=q(V.round)?!0:V.round,xa=function(pb,ub){pb=C(pb,pa||V.calendary?0:2,!0);return ta.loc.clone(V).relFormatter(V).format(pb,ub)},Ia=function(pb){return V.calendary?ta.hasSame(oa,pb)?0:ta.startOf(pb).diff(oa.startOf(pb),pb).get(pb):ta.diff(oa,pb).get(pb)};if(V.unit)return xa(Ia(V.unit),V.unit);for(var Ra=
d(V.units),ab;!(ab=Ra()).done;){ab=ab.value;var gb=Ia(ab);if(1<=Math.abs(gb))return xa(gb,ab)}return xa(oa>ta?-0:0,V.units[V.units.length-1])}function Fc(oa){var ta={};0<oa.length&&"object"===typeof oa[oa.length-1]?(ta=oa[oa.length-1],oa=Array.from(oa).slice(0,oa.length-1)):oa=Array.from(oa);return[ta,oa]}function kc(oa){if(Tb.isDateTime(oa))return oa;if(oa&&oa.valueOf&&m(oa.valueOf()))return Tb.fromJSDate(oa);if(oa&&"object"===typeof oa)return Tb.fromObject(oa);throw new Xb("Unknown datetime argument: "+
oa+", of type "+typeof oa);}var ac=function(oa){function ta(){return oa.apply(this,arguments)||this}h(ta,oa);return ta}(k(Error)),Gc=function(oa){function ta(V){return oa.call(this,"Invalid DateTime: "+V.toMessage())||this}h(ta,oa);return ta}(ac),ec=function(oa){function ta(V){return oa.call(this,"Invalid Interval: "+V.toMessage())||this}h(ta,oa);return ta}(ac),Oc=function(oa){function ta(V){return oa.call(this,"Invalid Duration: "+V.toMessage())||this}h(ta,oa);return ta}(ac),Vb=function(oa){function ta(){return oa.apply(this,
arguments)||this}h(ta,oa);return ta}(ac),lc=function(oa){function ta(V){return oa.call(this,"Invalid unit "+V)||this}h(ta,oa);return ta}(ac),Xb=function(oa){function ta(){return oa.apply(this,arguments)||this}h(ta,oa);return ta}(ac),Yb=function(oa){function ta(){return oa.call(this,"Zone is an abstract class")||this}h(ta,oa);return ta}(ac),xc={year:"numeric",month:"numeric",day:"numeric"},Mb={year:"numeric",month:"short",day:"numeric"},ja={year:"numeric",month:"short",day:"numeric",weekday:"short"},
Sa={year:"numeric",month:"long",day:"numeric"},Pa={year:"numeric",month:"long",day:"numeric",weekday:"long"},Ka={hour:"numeric",minute:"numeric"},Na={hour:"numeric",minute:"numeric",second:"numeric"},Ua={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ta={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Oa={hour:"numeric",minute:"numeric",hourCycle:"h23"},Za={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},bb={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},cb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},jb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},$a={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},kb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},mb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
ob={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ub={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Hc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},yc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},Gb=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,mc="January February March April May June July August September October November December".split(" "),bc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pc="JFMAMJJASOND".split(""),Qc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Ic="Mon Tue Wed Thu Fri Sat Sun".split(" "),Wc="MTWTFSS".split(""),Sc=["AM","PM"],Wb=["Before Christ","Anno Domini"],
rc=["BC","AD"],oc=["B","A"],Ob={D:xc,DD:Mb,DDD:Sa,DDDD:Pa,t:Ka,tt:Na,ttt:Ua,tttt:Ta,T:Oa,TT:Za,TTT:bb,TTTT:cb,f:jb,ff:kb,fff:Ub,ffff:yc,F:$a,FF:mb,FFF:Hc,FFFF:Bc},Pb=function(){function oa(V,pa){this.opts=pa;this.loc=V;this.systemLoc=null}oa.create=function(V,pa){void 0===pa&&(pa={});return new oa(V,pa)};oa.parseFormat=function(V){for(var pa=null,xa="",Ia=!1,Ra=[],ab=0;ab<V.length;ab++){var gb=V.charAt(ab);"'"===gb?(0<xa.length&&Ra.push({literal:Ia,val:xa}),pa=null,xa="",Ia=!Ia):Ia?xa+=gb:gb===pa?
xa+=gb:(0<xa.length&&Ra.push({literal:!1,val:xa}),pa=xa=gb)}0<xa.length&&Ra.push({literal:Ia,val:xa});return Ra};oa.macroTokenToFormatOpts=function(V){return Ob[V]};var ta=oa.prototype;ta.formatWithSystemDefault=function(V,pa){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(V,c({},this.opts,pa)).format()};ta.formatDateTime=function(V,pa){void 0===pa&&(pa={});return this.loc.dtFormatter(V,c({},this.opts,pa)).format()};ta.formatDateTimeParts=function(V,
pa){void 0===pa&&(pa={});return this.loc.dtFormatter(V,c({},this.opts,pa)).formatToParts()};ta.resolvedOptions=function(V,pa){void 0===pa&&(pa={});return this.loc.dtFormatter(V,c({},this.opts,pa)).resolvedOptions()};ta.num=function(V,pa){void 0===pa&&(pa=0);if(this.opts.forceSimple)return A(V,pa);var xa=c({},this.opts);0<pa&&(xa.padTo=pa);return this.loc.numberFormatter(xa).format(V)};ta.formatDateTimeFromString=function(V,pa){var xa=this,Ia="en"===this.loc.listingMode(),Ra=this.loc.outputCalendar&&
"gregory"!==this.loc.outputCalendar,ab=function(xb,Bb){return xa.loc.extract(V,xb,Bb)},gb=function(xb){return V.isOffsetFixed&&0===V.offset&&xb.allowZ?"Z":V.isValid?V.zone.formatOffset(V.ts,xb.format):""},pb=function(xb,Bb){return Ia?Q(xb)[V.month-1]:ab(Bb?{month:xb}:{month:xb,day:"numeric"},"month")},ub=function(xb,Bb){return Ia?W(xb)[V.weekday-1]:ab(Bb?{weekday:xb}:{weekday:xb,month:"long",day:"numeric"},"weekday")},Db=function(xb){return Ia?ba(xb)[0>V.year?0:1]:ab({era:xb},"era")};return X(oa.parseFormat(pa),
function(xb){switch(xb){case "S":return xa.num(V.millisecond);case "u":case "SSS":return xa.num(V.millisecond,3);case "s":return xa.num(V.second);case "ss":return xa.num(V.second,2);case "m":return xa.num(V.minute);case "mm":return xa.num(V.minute,2);case "h":return xa.num(0===V.hour%12?12:V.hour%12);case "hh":return xa.num(0===V.hour%12?12:V.hour%12,2);case "H":return xa.num(V.hour);case "HH":return xa.num(V.hour,2);case "Z":return gb({format:"narrow",allowZ:xa.opts.allowZ});case "ZZ":return gb({format:"short",
allowZ:xa.opts.allowZ});case "ZZZ":return gb({format:"techie",allowZ:xa.opts.allowZ});case "ZZZZ":return V.zone.offsetName(V.ts,{format:"short",locale:xa.loc.locale});case "ZZZZZ":return V.zone.offsetName(V.ts,{format:"long",locale:xa.loc.locale});case "z":return V.zoneName;case "a":return Ia?Sc[12>V.hour?0:1]:ab({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Ra?ab({day:"numeric"},"day"):xa.num(V.day);case "dd":return Ra?ab({day:"2-digit"},"day"):xa.num(V.day,2);case "c":return xa.num(V.weekday);
case "ccc":return ub("short",!0);case "cccc":return ub("long",!0);case "ccccc":return ub("narrow",!0);case "E":return xa.num(V.weekday);case "EEE":return ub("short",!1);case "EEEE":return ub("long",!1);case "EEEEE":return ub("narrow",!1);case "L":return Ra?ab({month:"numeric",day:"numeric"},"month"):xa.num(V.month);case "LL":return Ra?ab({month:"2-digit",day:"numeric"},"month"):xa.num(V.month,2);case "LLL":return pb("short",!0);case "LLLL":return pb("long",!0);case "LLLLL":return pb("narrow",!0);
case "M":return Ra?ab({month:"numeric"},"month"):xa.num(V.month);case "MM":return Ra?ab({month:"2-digit"},"month"):xa.num(V.month,2);case "MMM":return pb("short",!1);case "MMMM":return pb("long",!1);case "MMMMM":return pb("narrow",!1);case "y":return Ra?ab({year:"numeric"},"year"):xa.num(V.year);case "yy":return Ra?ab({year:"2-digit"},"year"):xa.num(V.year.toString().slice(-2),2);case "yyyy":return Ra?ab({year:"numeric"},"year"):xa.num(V.year,4);case "yyyyyy":return Ra?ab({year:"numeric"},"year"):
xa.num(V.year,6);case "G":return Db("short");case "GG":return Db("long");case "GGGGG":return Db("narrow");case "kk":return xa.num(V.weekYear.toString().slice(-2),2);case "kkkk":return xa.num(V.weekYear,4);case "W":return xa.num(V.weekNumber);case "WW":return xa.num(V.weekNumber,2);case "o":return xa.num(V.ordinal);case "ooo":return xa.num(V.ordinal,3);case "q":return xa.num(V.quarter);case "qq":return xa.num(V.quarter,2);case "X":return xa.num(Math.floor(V.ts/1E3));case "x":return xa.num(V.ts);default:var Bb=
oa.macroTokenToFormatOpts(xb);xb=Bb?xa.formatWithSystemDefault(V,Bb):xb;return xb}})};ta.formatDurationFromString=function(V,pa){var xa=this,Ia=function(gb){switch(gb[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}},Ra=oa.parseFormat(pa),ab=Ra.reduce(function(gb,pb){var ub=pb.val;return pb.literal?gb:gb.concat(ub)},[]);ab=V.shiftTo.apply(V,ab.map(Ia).filter(function(gb){return gb}));
return X(Ra,function(gb){return function(pb){var ub=Ia(pb);return ub?xa.num(gb.get(ub),pb.length):pb}}(ab))};return oa}(),Qb=function(){function oa(ta,V){this.reason=ta;this.explanation=V}oa.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return oa}(),cc=function(){function oa(){}var ta=oa.prototype;ta.offsetName=function(V,pa){throw new Yb;};ta.formatOffset=function(V,pa){throw new Yb;};ta.offset=function(V){throw new Yb;};ta.equals=function(V){throw new Yb;
};a(oa,[{key:"type",get:function(){throw new Yb;}},{key:"name",get:function(){throw new Yb;}},{key:"isUniversal",get:function(){throw new Yb;}},{key:"isValid",get:function(){throw new Yb;}}]);return oa}(),Xc=null,ed=function(oa){function ta(){return oa.apply(this,arguments)||this}h(ta,oa);var V=ta.prototype;V.offsetName=function(pa,xa){return I(pa,xa.format,xa.locale)};V.formatOffset=function(pa,xa){return L(this.offset(pa),xa)};V.offset=function(pa){return-(new Date(pa)).getTimezoneOffset()};V.equals=
function(pa){return"system"===pa.type};a(ta,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Xc&&(Xc=new ta);return Xc}}]);return ta}(cc),Nb=RegExp("^"+Gb.source+"$"),Lc={},id={year:0,month:1,day:2,hour:3,minute:4,second:5},Rc={},fc=function(oa){function ta(pa){var xa=oa.call(this)||this;xa.zoneName=
pa;xa.valid=ta.isValidZone(pa);return xa}h(ta,oa);ta.create=function(pa){Rc[pa]||(Rc[pa]=new ta(pa));return Rc[pa]};ta.resetCache=function(){Rc={};Lc={}};ta.isValidSpecifier=function(pa){return!(!pa||!pa.match(Nb))};ta.isValidZone=function(pa){try{return(new Intl.DateTimeFormat("en-US",{timeZone:pa})).format(),!0}catch(xa){return!1}};ta.parseGMTOffset=function(pa){return pa&&(pa=pa.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(pa[1]):null};var V=ta.prototype;V.offsetName=function(pa,xa){return I(pa,
xa.format,xa.locale,this.name)};V.formatOffset=function(pa,xa){return L(this.offset(pa),xa)};V.offset=function(pa){pa=new Date(pa);if(isNaN(pa))return NaN;var xa=this.name;Lc[xa]||(Lc[xa]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:xa,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));xa=Lc[xa];if(xa.formatToParts){xa=xa.formatToParts(pa);for(var Ia=[],Ra=0;Ra<xa.length;Ra++){var ab=xa[Ra],gb=ab.value;ab=id[ab.type];q(ab)||(Ia[ab]=parseInt(gb,
10))}xa=Ia}else xa=xa.format(pa).replace(/\u200E/g,""),xa=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(xa),xa=[xa[3],xa[1],xa[2],xa[4],xa[5],xa[6]];xa=G({year:xa[0],month:xa[1],day:xa[2],hour:xa[3],minute:xa[4],second:xa[5],millisecond:0});pa=+pa;Ia=pa%1E3;return(xa-(pa-(0<=Ia?Ia:1E3+Ia)))/6E4};V.equals=function(pa){return"iana"===pa.type&&pa.name===this.name};a(ta,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},
{key:"isValid",get:function(){return this.valid}}]);return ta}(cc),ad=null,$b=function(oa){function ta(pa){var xa=oa.call(this)||this;xa.fixed=pa;return xa}h(ta,oa);ta.instance=function(pa){return 0===pa?ta.utcInstance:new ta(pa)};ta.parseSpecifier=function(pa){return pa&&(pa=pa.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new ta(R(pa[1],pa[2])):null};var V=ta.prototype;V.offsetName=function(){return this.name};V.formatOffset=function(pa,xa){return L(this.fixed,xa)};V.offset=function(){return this.fixed};
V.equals=function(pa){return"fixed"===pa.type&&pa.fixed===this.fixed};a(ta,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+L(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===ad&&(ad=new ta(0));return ad}}]);return ta}(cc),Hb=function(oa){function ta(pa){var xa=oa.call(this)||this;xa.zoneName=pa;return xa}h(ta,oa);var V=ta.prototype;V.offsetName=
function(){return null};V.formatOffset=function(){return""};V.offset=function(){return NaN};V.equals=function(){return!1};a(ta,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return ta}(cc),Dc=function(){return Date.now()},Cc="system",fd=null,gd=null,hd=null,Kc,Jb=function(){function oa(){}oa.resetCaches=function(){Rb.resetCache();fc.resetCache()};a(oa,null,[{key:"now",
get:function(){return Dc},set:function(ta){Dc=ta}},{key:"defaultZone",get:function(){return aa(Cc,ed.instance)},set:function(ta){Cc=ta}},{key:"defaultLocale",get:function(){return fd},set:function(ta){fd=ta}},{key:"defaultNumberingSystem",get:function(){return gd},set:function(ta){gd=ta}},{key:"defaultOutputCalendar",get:function(){return hd},set:function(ta){hd=ta}},{key:"throwOnInvalid",get:function(){return Kc},set:function(ta){Kc=ta}}]);return oa}(),nd=["base"],Yc={},Zc={},bd={},Uc=null,Mc=function(){function oa(ta,
V,pa){this.padTo=pa.padTo||0;this.floor=pa.floor||!1;if(!V){V={useGrouping:!1};0<pa.padTo&&(V.minimumIntegerDigits=pa.padTo);pa=V;void 0===pa&&(pa={});V=JSON.stringify([ta,pa]);var xa=Zc[V];xa||(xa=new Intl.NumberFormat(ta,pa),Zc[V]=xa);this.inf=xa}}oa.prototype.format=function(ta){if(this.inf)return this.inf.format(this.floor?Math.floor(ta):ta);ta=this.floor?Math.floor(ta):C(ta,3);return A(ta,this.padTo)};return oa}(),od=function(){function oa(V,pa,xa){this.opts=xa;if(V.zone.isUniversal){var Ia=
V.offset/60*-1;Ia=0<=Ia?"Etc/GMT+"+Ia:"Etc/GMT"+Ia;var Ra=fc.isValidZone(Ia);0!==V.offset&&Ra?this.dt=V:(Ia="UTC",this.dt=xa.timeZoneName?V:0===V.offset?V:Tb.fromMillis(V.ts+6E4*V.offset))}else"system"===V.zone.type?this.dt=V:(this.dt=V,Ia=V.zone.name);V=c({},this.opts);Ia&&(V.timeZone=Ia);this.dtf=M(pa,V)}var ta=oa.prototype;ta.format=function(){return this.dtf.format(this.dt.toJSDate())};ta.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};ta.resolvedOptions=function(){return this.dtf.resolvedOptions()};
return oa}(),pd=function(){function oa(V,pa,xa){this.opts=c({style:"long"},xa);if(!pa&&t()){pa=xa;void 0===pa&&(pa={});xa=pa;xa.base;if(null==xa)xa={};else{var Ia={},Ra=Object.keys(xa),ab;for(ab=0;ab<Ra.length;ab++){var gb=Ra[ab];0<=nd.indexOf(gb)||(Ia[gb]=xa[gb])}xa=Ia}xa=JSON.stringify([V,xa]);Ia=bd[xa];Ia||(Ia=new Intl.RelativeTimeFormat(V,pa),bd[xa]=Ia);this.rtf=Ia}}var ta=oa.prototype;ta.format=function(V,pa){return this.rtf?this.rtf.format(V,pa):S(pa,V,this.opts.numeric,"long"!==this.opts.style)};
ta.formatToParts=function(V,pa){return this.rtf?this.rtf.formatToParts(V,pa):[]};return oa}(),Rb=function(){function oa(V,pa,xa,Ia){var Ra=V.indexOf("-u-");if(-1===Ra)V=[V];else{Ra=V.substring(0,Ra);try{var ab=M(V).resolvedOptions()}catch(gb){ab=M(Ra).resolvedOptions()}V=ab;V=[Ra,V.numberingSystem,V.calendar]}ab=V[1];Ra=V[2];this.locale=V[0];this.numberingSystem=pa||ab||null;this.outputCalendar=xa||Ra||null;pa=this.locale;xa=this.numberingSystem;if((V=this.outputCalendar)||xa)pa+="-u",V&&(pa+="-ca-"+
V),xa&&(pa+="-nu-"+xa);this.intl=pa;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Ia;this.fastNumbersCached=null}oa.fromOpts=function(V){return oa.create(V.locale,V.numberingSystem,V.outputCalendar,V.defaultToEN)};oa.create=function(V,pa,xa,Ia){void 0===Ia&&(Ia=!1);V=V||Jb.defaultLocale;var Ra;(Ra=V)||(Ia?Ia="en-US":(Uc||(Uc=(new Intl.DateTimeFormat).resolvedOptions().locale),Ia=Uc),Ra=Ia);return new oa(Ra,
pa||Jb.defaultNumberingSystem,xa||Jb.defaultOutputCalendar,V)};oa.resetCache=function(){Uc=null;Yc={};Zc={};bd={}};oa.fromObject=function(V){V=void 0===V?{}:V;return oa.create(V.locale,V.numberingSystem,V.outputCalendar)};var ta=oa.prototype;ta.listingMode=function(V){V=this.isEnglish();var pa=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return V&&pa?"en":"intl"};ta.clone=function(V){return V&&0!==Object.getOwnPropertyNames(V).length?
oa.create(V.locale||this.specifiedLocale,V.numberingSystem||this.numberingSystem,V.outputCalendar||this.outputCalendar,V.defaultToEN||!1):this};ta.redefaultToEN=function(V){void 0===V&&(V={});return this.clone(c({},V,{defaultToEN:!0}))};ta.redefaultToSystem=function(V){void 0===V&&(V={});return this.clone(c({},V,{defaultToEN:!1}))};ta.months=function(V,pa,xa){var Ia=this;void 0===pa&&(pa=!1);void 0===xa&&(xa=!0);return Z(this,V,xa,Q,function(){var Ra=pa?{month:V,day:"numeric"}:{month:V},ab=pa?"format":
"standalone";Ia.monthsCache[ab][V]||(Ia.monthsCache[ab][V]=da(function(gb){return Ia.extract(gb,Ra,"month")}));return Ia.monthsCache[ab][V]})};ta.weekdays=function(V,pa,xa){var Ia=this;void 0===pa&&(pa=!1);void 0===xa&&(xa=!0);return Z(this,V,xa,W,function(){var Ra=pa?{weekday:V,year:"numeric",month:"long",day:"numeric"}:{weekday:V},ab=pa?"format":"standalone";Ia.weekdaysCache[ab][V]||(Ia.weekdaysCache[ab][V]=ea(function(gb){return Ia.extract(gb,Ra,"weekday")}));return Ia.weekdaysCache[ab][V]})};
ta.meridiems=function(V){var pa=this;void 0===V&&(V=!0);return Z(this,void 0,V,function(){return Sc},function(){if(!pa.meridiemCache){var xa={hour:"numeric",hourCycle:"h12"};pa.meridiemCache=[Tb.utc(2016,11,13,9),Tb.utc(2016,11,13,19)].map(function(Ia){return pa.extract(Ia,xa,"dayperiod")})}return pa.meridiemCache})};ta.eras=function(V,pa){var xa=this;void 0===pa&&(pa=!0);return Z(this,V,pa,ba,function(){var Ia={era:V};xa.eraCache[V]||(xa.eraCache[V]=[Tb.utc(-40,1,1),Tb.utc(2017,1,1)].map(function(Ra){return xa.extract(Ra,
Ia,"era")}));return xa.eraCache[V]})};ta.extract=function(V,pa,xa){return(V=this.dtFormatter(V,pa).formatToParts().find(function(Ia){return Ia.type.toLowerCase()===xa}))?V.value:null};ta.numberFormatter=function(V){void 0===V&&(V={});return new Mc(this.intl,V.forceSimple||this.fastNumbers,V)};ta.dtFormatter=function(V,pa){void 0===pa&&(pa={});return new od(V,this.intl,pa)};ta.relFormatter=function(V){void 0===V&&(V={});return new pd(this.intl,this.isEnglish(),V)};ta.isEnglish=function(){return"en"===
this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};ta.equals=function(V){return this.locale===V.locale&&this.numberingSystem===V.numberingSystem&&this.outputCalendar===V.outputCalendar};a(oa,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var V=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=V}return this.fastNumbersCached}}]);return oa}(),jd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,cd=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,dd=RegExp(""+cd.source+jd.source+"?"),Tc=RegExp("(?:T"+dd.source+")?"),kd=Ga("weekYear","weekNumber","weekDay"),qd=Ga("year","ordinal"),ld=RegExp(cd.source+" ?(?:"+jd.source+"|("+Gb.source+"))?"),zc=RegExp("(?: "+ld.source+")?"),rd=RegExp("^T?"+cd.source+"$"),hb=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
zb={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},sc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,sd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,td=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,vd=ka(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tc),wd=ka(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Tc),xd=ka(/(\d{4})-?(\d{3})/,Tc),yd=ka(dd),zd=va(ma,ya,za),Ad=va(kd,ya,za),Bd=va(qd,ya,za),Cd=va(ya,za),Dd=va(ya),Ed=ka(/(\d{4})-(\d\d)-(\d\d)/,zc),Fd=ka(ld),Gd=va(ma,ya,za,Ba),Hd=va(ya,za,Ba),pc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,
minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Jc=c({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},pc),$c=c({years:{quarters:4,months:12,
weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},pc),wb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),md=wb.slice(0).reverse(),N=function(){function oa(V){var pa="longterm"===V.conversionAccuracy||
!1;this.values=V.values;this.loc=V.loc||Rb.create();this.conversionAccuracy=pa?"longterm":"casual";this.invalid=V.invalid||null;this.matrix=pa?$c:Jc;this.isLuxonDuration=!0}oa.fromMillis=function(V,pa){return oa.fromObject({milliseconds:V},pa)};oa.fromObject=function(V,pa){void 0===pa&&(pa={});if(null==V||"object"!==typeof V)throw new Xb("Duration.fromObject: argument expected to be an object, got "+(null===V?"null":typeof V));return new oa({values:P(V,oa.normalizeUnit),loc:Rb.fromObject(pa),conversionAccuracy:pa.conversionAccuracy})};
oa.fromISO=function(V,pa){var xa=Ea(V,[hb,ha])[0];return xa?oa.fromObject(xa,pa):oa.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};oa.fromISOTime=function(V,pa){var xa=Ea(V,[rd,Dd])[0];return xa?oa.fromObject(xa,pa):oa.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};oa.invalid=function(V,pa){void 0===pa&&(pa=null);if(!V)throw new Xb("need to specify a reason the Duration is invalid");var xa=V instanceof Qb?V:new Qb(V,pa);if(Jb.throwOnInvalid)throw new Oc(xa);
return new oa({invalid:xa})};oa.normalizeUnit=function(V){var pa={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[V?V.toLowerCase():V];if(!pa)throw new lc(V);return pa};oa.isDuration=function(V){return V&&V.isLuxonDuration||!1};var ta=oa.prototype;ta.toFormat=
function(V,pa){void 0===pa&&(pa={});var xa=c({},pa,{floor:!1!==pa.round&&!1!==pa.floor});return this.isValid?Pb.create(this.loc,xa).formatDurationFromString(this,V):"Invalid Duration"};ta.toObject=function(){return this.isValid?c({},this.values):{}};ta.toISO=function(){if(!this.isValid)return null;var V="P";0!==this.years&&(V+=this.years+"Y");if(0!==this.months||0!==this.quarters)V+=this.months+3*this.quarters+"M";0!==this.weeks&&(V+=this.weeks+"W");0!==this.days&&(V+=this.days+"D");if(0!==this.hours||
0!==this.minutes||0!==this.seconds||0!==this.milliseconds)V+="T";0!==this.hours&&(V+=this.hours+"H");0!==this.minutes&&(V+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)V+=C(this.seconds+this.milliseconds/1E3,3)+"S";"P"===V&&(V+="T0S");return V};ta.toISOTime=function(V){void 0===V&&(V={});if(!this.isValid)return null;var pa=this.toMillis();if(0>pa||864E5<=pa)return null;V=c({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},V);pa=this.shiftTo("hours","minutes",
"seconds","milliseconds");var xa="basic"===V.format?"hhmm":"hh:mm";V.suppressSeconds&&0===pa.seconds&&0===pa.milliseconds||(xa+="basic"===V.format?"ss":":ss",V.suppressMilliseconds&&0===pa.milliseconds||(xa+=".SSS"));pa=pa.toFormat(xa);V.includePrefix&&(pa="T"+pa);return pa};ta.toJSON=function(){return this.toISO()};ta.toString=function(){return this.toISO()};ta.toMillis=function(){return this.as("milliseconds")};ta.valueOf=function(){return this.toMillis()};ta.plus=function(V){if(!this.isValid)return this;
V=Ca(V);for(var pa={},xa=d(wb),Ia;!(Ia=xa()).done;)if(Ia=Ia.value,y(V.values,Ia)||y(this.values,Ia))pa[Ia]=V.get(Ia)+this.get(Ia);return fa(this,{values:pa},!0)};ta.minus=function(V){if(!this.isValid)return this;V=Ca(V);return this.plus(V.negate())};ta.mapUnits=function(V){if(!this.isValid)return this;for(var pa={},xa=0,Ia=Object.keys(this.values);xa<Ia.length;xa++){var Ra=Ia[xa];pa[Ra]=O(V(this.values[Ra],Ra))}return fa(this,{values:pa},!0)};ta.get=function(V){return this[oa.normalizeUnit(V)]};ta.set=
function(V){if(!this.isValid)return this;V=c({},this.values,P(V,oa.normalizeUnit));return fa(this,{values:V})};ta.reconfigure=function(V){var pa=void 0===V?{}:V;V=pa.conversionAccuracy;pa={loc:this.loc.clone({locale:pa.locale,numberingSystem:pa.numberingSystem})};V&&(pa.conversionAccuracy=V);return fa(this,pa)};ta.as=function(V){return this.isValid?this.shiftTo(V).get(V):NaN};ta.normalize=function(){if(!this.isValid)return this;var V=this.toObject();Xa(this.matrix,V);return fa(this,{values:V},!0)};
ta.shiftTo=function(){for(var V=arguments.length,pa=Array(V),xa=0;xa<V;xa++)pa[xa]=arguments[xa];if(!this.isValid||0===pa.length)return this;pa=pa.map(function(qc){return oa.normalizeUnit(qc)});V={};xa={};for(var Ia=this.toObject(),Ra,ab=d(wb),gb;!(gb=ab()).done;)if(gb=gb.value,0<=pa.indexOf(gb)){Ra=gb;var pb=0,ub;for(ub in xa)pb+=this.matrix[ub][gb]*xa[ub],xa[ub]=0;m(Ia[gb])&&(pb+=Ia[gb]);var Db=Math.trunc(pb);V[gb]=Db;xa[gb]=pb-Db;for(var xb in Ia)wb.indexOf(xb)>wb.indexOf(gb)&&Ya(this.matrix,Ia,
xb,V,gb)}else m(Ia[gb])&&(xa[gb]=Ia[gb]);for(var Bb in xa)0!==xa[Bb]&&(V[Ra]+=Bb===Ra?xa[Bb]:xa[Bb]/this.matrix[Ra][Bb]);return fa(this,{values:V},!0).normalize()};ta.negate=function(){if(!this.isValid)return this;for(var V={},pa=0,xa=Object.keys(this.values);pa<xa.length;pa++){var Ia=xa[pa];V[Ia]=-this.values[Ia]}return fa(this,{values:V},!0)};ta.equals=function(V){if(!this.isValid||!V.isValid||!this.loc.equals(V.loc))return!1;for(var pa=d(wb),xa;!(xa=pa()).done;){var Ia=xa.value;xa=this.values[Ia];
Ia=V.values[Ia];xa=void 0===xa||0===xa?void 0===Ia||0===Ia:xa===Ia;if(!xa)return!1}return!0};a(oa,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",
get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===
this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return oa}(),ca=function(){function oa(V){this.s=V.start;this.e=V.end;this.invalid=V.invalid||null;this.isLuxonInterval=!0}oa.invalid=function(V,pa){void 0===pa&&(pa=null);if(!V)throw new Xb("need to specify a reason the Interval is invalid");var xa=V instanceof Qb?V:new Qb(V,pa);if(Jb.throwOnInvalid)throw new ec(xa);
return new oa({invalid:xa})};oa.fromDateTimes=function(V,pa){var xa=kc(V),Ia=kc(pa);var Ra=xa&&xa.isValid?Ia&&Ia.isValid?Ia<xa?ca.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+xa.toISO()+" and end\x3d"+Ia.toISO()):null:ca.invalid("missing or invalid end"):ca.invalid("missing or invalid start");return null==Ra?new oa({start:xa,end:Ia}):Ra};oa.after=function(V,pa){var xa=Ca(pa),Ia=kc(V);return oa.fromDateTimes(Ia,Ia.plus(xa))};oa.before=function(V,
pa){var xa=Ca(pa),Ia=kc(V);return oa.fromDateTimes(Ia.minus(xa),Ia)};oa.fromISO=function(V,pa){var xa=(V||"").split("/",2),Ia=xa[0];xa=xa[1];if(Ia&&xa){try{var Ra=Tb.fromISO(Ia,pa);var ab=Ra.isValid}catch(ub){ab=!1}try{var gb=Tb.fromISO(xa,pa);var pb=gb.isValid}catch(ub){pb=!1}if(ab&&pb)return oa.fromDateTimes(Ra,gb);if(ab){if(gb=N.fromISO(xa,pa),gb.isValid)return oa.after(Ra,gb)}else if(pb&&(Ra=N.fromISO(Ia,pa),Ra.isValid))return oa.before(gb,Ra)}return oa.invalid("unparsable",'the input "'+V+"\" can't be parsed as ISO 8601")};
oa.isInterval=function(V){return V&&V.isLuxonInterval||!1};var ta=oa.prototype;ta.length=function(V){void 0===V&&(V="milliseconds");return this.isValid?this.toDuration.apply(this,[V]).get(V):NaN};ta.count=function(V){void 0===V&&(V="milliseconds");if(!this.isValid)return NaN;var pa=this.start.startOf(V),xa=this.end.startOf(V);return Math.floor(xa.diff(pa,V).get(V))+1};ta.hasSame=function(V){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,V):!1};ta.isEmpty=function(){return this.s.valueOf()===
this.e.valueOf()};ta.isAfter=function(V){return this.isValid?this.s>V:!1};ta.isBefore=function(V){return this.isValid?this.e<=V:!1};ta.contains=function(V){return this.isValid?this.s<=V&&this.e>V:!1};ta.set=function(V){V=void 0===V?{}:V;return this.isValid?oa.fromDateTimes(V.start||this.s,V.end||this.e):this};ta.splitAt=function(){var V=this;if(!this.isValid)return[];for(var pa=arguments.length,xa=Array(pa),Ia=0;Ia<pa;Ia++)xa[Ia]=arguments[Ia];pa=xa.map(kc).filter(function(gb){return V.contains(gb)}).sort();
xa=[];Ia=this.s;for(var Ra=0;Ia<this.e;){var ab=pa[Ra]||this.e;ab=+ab>+this.e?this.e:ab;xa.push(oa.fromDateTimes(Ia,ab));Ia=ab;Ra+=1}return xa};ta.splitBy=function(V){V=Ca(V);if(!this.isValid||!V.isValid||0===V.as("milliseconds"))return[];for(var pa=this.s,xa=1,Ia,Ra=[];pa<this.e;)Ia=this.start.plus(V.mapUnits(function(ab){return ab*xa})),Ia=+Ia>+this.e?this.e:Ia,Ra.push(oa.fromDateTimes(pa,Ia)),pa=Ia,xa+=1;return Ra};ta.divideEqually=function(V){return this.isValid?this.splitBy(this.length()/V).slice(0,
V):[]};ta.overlaps=function(V){return this.e>V.s&&this.s<V.e};ta.abutsStart=function(V){return this.isValid?+this.e===+V.s:!1};ta.abutsEnd=function(V){return this.isValid?+V.e===+this.s:!1};ta.engulfs=function(V){return this.isValid?this.s<=V.s&&this.e>=V.e:!1};ta.equals=function(V){return this.isValid&&V.isValid?this.s.equals(V.s)&&this.e.equals(V.e):!1};ta.intersection=function(V){if(!this.isValid)return this;var pa=this.s>V.s?this.s:V.s;V=this.e<V.e?this.e:V.e;return pa>=V?null:oa.fromDateTimes(pa,
V)};ta.union=function(V){return this.isValid?oa.fromDateTimes(this.s<V.s?this.s:V.s,this.e>V.e?this.e:V.e):this};oa.merge=function(V){var pa=V.sort(function(xa,Ia){return xa.s-Ia.s}).reduce(function(xa,Ia){var Ra=xa[0],ab=xa[1];return ab?ab.overlaps(Ia)||ab.abutsStart(Ia)?[Ra,ab.union(Ia)]:[Ra.concat([ab]),Ia]:[Ra,Ia]},[[],null]);V=pa[0];(pa=pa[1])&&V.push(pa);return V};oa.xor=function(V){var pa,xa=null,Ia=0,Ra=[];V=V.map(function(ab){return[{time:ab.s,type:"s"},{time:ab.e,type:"e"}]});V=(pa=Array.prototype).concat.apply(pa,
V).sort(function(ab,gb){return ab.time-gb.time});for(pa=d(V);!(V=pa()).done;)V=V.value,Ia+="s"===V.type?1:-1,1===Ia?xa=V.time:(xa&&+xa!==+V.time&&Ra.push(oa.fromDateTimes(xa,V.time)),xa=null);return oa.merge(Ra)};ta.difference=function(){for(var V=this,pa=arguments.length,xa=Array(pa),Ia=0;Ia<pa;Ia++)xa[Ia]=arguments[Ia];return oa.xor([this].concat(xa)).map(function(Ra){return V.intersection(Ra)}).filter(function(Ra){return Ra&&!Ra.isEmpty()})};ta.toString=function(){return this.isValid?"["+this.s.toISO()+
" \u2013 "+this.e.toISO()+")":"Invalid Interval"};ta.toISO=function(V){return this.isValid?this.s.toISO(V)+"/"+this.e.toISO(V):"Invalid Interval"};ta.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};ta.toISOTime=function(V){return this.isValid?this.s.toISOTime(V)+"/"+this.e.toISOTime(V):"Invalid Interval"};ta.toFormat=function(V,pa){var xa=(void 0===pa?{}:pa).separator;xa=void 0===xa?" \u2013 ":xa;return this.isValid?""+this.s.toFormat(V)+xa+this.e.toFormat(V):
"Invalid Interval"};ta.toDuration=function(V,pa){return this.isValid?this.e.diff(this.s,V,pa):N.invalid(this.invalidReason)};ta.mapEndpoints=function(V){return oa.fromDateTimes(V(this.s),V(this.e))};a(oa,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",
get:function(){return this.invalid?this.invalid.explanation:null}}]);return oa}(),ra=function(){function oa(){}oa.hasDST=function(ta){void 0===ta&&(ta=Jb.defaultZone);var V=Tb.now().setZone(ta).set({month:12});return!ta.isUniversal&&V.offset!==V.set({month:6}).offset};oa.isValidIANAZone=function(ta){return fc.isValidSpecifier(ta)&&fc.isValidZone(ta)};oa.normalizeZone=function(ta){return aa(ta,Jb.defaultZone)};oa.months=function(ta,V){void 0===ta&&(ta="long");var pa=void 0===V?{}:V,xa=pa.locale,Ia=
pa.numberingSystem,Ra=pa.locObj;pa=pa.outputCalendar;return((void 0===Ra?null:Ra)||Rb.create(void 0===xa?null:xa,void 0===Ia?null:Ia,void 0===pa?"gregory":pa)).months(ta)};oa.monthsFormat=function(ta,V){void 0===ta&&(ta="long");var pa=void 0===V?{}:V,xa=pa.locale,Ia=pa.numberingSystem,Ra=pa.locObj;pa=pa.outputCalendar;return((void 0===Ra?null:Ra)||Rb.create(void 0===xa?null:xa,void 0===Ia?null:Ia,void 0===pa?"gregory":pa)).months(ta,!0)};oa.weekdays=function(ta,V){void 0===ta&&(ta="long");var pa=
void 0===V?{}:V,xa=pa.locale,Ia=pa.numberingSystem;pa=pa.locObj;return((void 0===pa?null:pa)||Rb.create(void 0===xa?null:xa,void 0===Ia?null:Ia,null)).weekdays(ta)};oa.weekdaysFormat=function(ta,V){void 0===ta&&(ta="long");var pa=void 0===V?{}:V,xa=pa.locale,Ia=pa.numberingSystem;pa=pa.locObj;return((void 0===pa?null:pa)||Rb.create(void 0===xa?null:xa,void 0===Ia?null:Ia,null)).weekdays(ta,!0)};oa.meridiems=function(ta){ta=(void 0===ta?{}:ta).locale;return Rb.create(void 0===ta?null:ta).meridiems()};
oa.eras=function(ta,V){void 0===ta&&(ta="short");var pa=(void 0===V?{}:V).locale;return Rb.create(void 0===pa?null:pa,null,"gregory").eras(ta)};oa.features=function(){return{relative:t()}};return oa}(),Aa={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",
laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Qa={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,
2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},db=Aa.hanidec.replace(/[\[|\]]/g,"").split(""),fb="( |"+String.fromCharCode(160)+")",qb=new RegExp(fb,"g"),Eb={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},vb=null,
Lb=[0,31,59,90,120,151,181,212,243,273,304,334],tc=[0,31,60,91,121,152,182,213,244,274,305,335],Vc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Id="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Tb=function(){function oa(V){var pa=
V.zone||Jb.defaultZone,xa=V.invalid||(Number.isNaN(V.ts)?new Qb("invalid input"):null)||(pa.isValid?null:Kb(pa));this.ts=q(V.ts)?Jb.now():V.ts;var Ia=null,Ra=null;xa||(V.old&&V.old.ts===this.ts&&V.old.zone.equals(pa)?(Ra=[V.old.c,V.old.o],Ia=Ra[0],Ra=Ra[1]):(Ra=pa.offset(this.ts),Ia=hc(this.ts,Ra),Ia=(xa=Number.isNaN(Ia.year)?new Qb("invalid input"):null)?null:Ia,Ra=xa?null:Ra));this._zone=pa;this.loc=V.loc||Rb.create();this.invalid=xa;this.weekData=null;this.c=Ia;this.o=Ra;this.isLuxonDateTime=!0}
oa.now=function(){return new oa({})};oa.local=function(){var V=Fc(arguments),pa=V[1];return Ec({year:pa[0],month:pa[1],day:pa[2],hour:pa[3],minute:pa[4],second:pa[5],millisecond:pa[6]},V[0])};oa.utc=function(){var V=Fc(arguments),pa=V[0],xa=V[1];V=xa[0];var Ia=xa[1],Ra=xa[2],ab=xa[3],gb=xa[4],pb=xa[5];xa=xa[6];pa.zone=$b.utcInstance;return Ec({year:V,month:Ia,day:Ra,hour:ab,minute:gb,second:pb,millisecond:xa},pa)};oa.fromJSDate=function(V,pa){void 0===pa&&(pa={});var xa="[object Date]"===Object.prototype.toString.call(V)?
V.valueOf():NaN;if(Number.isNaN(xa))return oa.invalid("invalid input");var Ia=aa(pa.zone,Jb.defaultZone);return Ia.isValid?new oa({ts:xa,zone:Ia,loc:Rb.fromObject(pa)}):oa.invalid(Kb(Ia))};oa.fromMillis=function(V,pa){void 0===pa&&(pa={});if(m(V))return-864E13>V||864E13<V?oa.invalid("Timestamp out of range"):new oa({ts:V,zone:aa(pa.zone,Jb.defaultZone),loc:Rb.fromObject(pa)});throw new Xb("fromMillis requires a numerical input, but received a "+typeof V+" with value "+V);};oa.fromSeconds=function(V,
pa){void 0===pa&&(pa={});if(m(V))return new oa({ts:1E3*V,zone:aa(pa.zone,Jb.defaultZone),loc:Rb.fromObject(pa)});throw new Xb("fromSeconds requires a numerical input");};oa.fromObject=function(V,pa){void 0===pa&&(pa={});V=V||{};var xa=aa(pa.zone,Jb.defaultZone);if(!xa.isValid)return oa.invalid(Kb(xa));var Ia=Jb.now(),Ra=xa.offset(Ia),ab=P(V,wc),gb=!q(ab.ordinal),pb=!q(ab.year),ub=!q(ab.month)||!q(ab.day);pb=pb||ub;var Db=ab.weekYear||ab.weekNumber,xb=Rb.fromObject(pa);if((pb||gb)&&Db)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(ub&&gb)throw new Vb("Can't mix ordinal dates with month/day");ub=Db||ab.weekday&&!pb;Db=hc(Ia,Ra);if(ub){var Bb=Md;Ia=Kd;Db=Cb(Db)}else gb?(Bb=Nd,Ia=Ld,Db=yb(Db)):(Bb=Id,Ia=Vc);var qc=!1;Bb=d(Bb);for(var nc;!(nc=Bb()).done;)nc=nc.value,q(ab[nc])?ab[nc]=qc?Ia[nc]:Db[nc]:qc=!0;ub?(Ia=n(ab.weekYear),Db=x(ab.weekNumber,1,H(ab.weekYear)),qc=x(ab.weekday,1,7),Ia=Ia?Db?qc?!1:sb("weekday",ab.weekday):sb("week",ab.week):sb("weekYear",ab.weekYear)):gb?(Ia=n(ab.year),Db=x(ab.ordinal,1,E(ab.year)?366:365),
Ia=Ia?Db?!1:sb("ordinal",ab.ordinal):sb("year",ab.year)):Ia=gc(ab);if(Ia=Ia||Sb(ab))return oa.invalid(Ia);gb=ub?nb(ab):gb?Fb(ab):ab;Ra=Zb(gb,Ra,xa);xa=new oa({ts:Ra[0],zone:xa,o:Ra[1],loc:xb});return ab.weekday&&pb&&V.weekday!==xa.weekday?oa.invalid("mismatched weekday","you can't specify both a weekday of "+ab.weekday+" and a date of "+xa.toISO()):xa};oa.fromISO=function(V,pa){void 0===pa&&(pa={});var xa=Ea(V,[vd,zd],[wd,Ad],[xd,Bd],[yd,Cd]);return ic(xa[0],xa[1],pa,"ISO 8601",V)};oa.fromRFC2822=
function(V,pa){void 0===pa&&(pa={});var xa=Ea(V.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[sc,T]);return ic(xa[0],xa[1],pa,"RFC 2822",V)};oa.fromHTTP=function(V,pa){void 0===pa&&(pa={});var xa=Ea(V,[sd,Ha],[td,Ha],[ud,Ja]);return ic(xa[0],xa[1],pa,"HTTP",pa)};oa.fromFormat=function(V,pa,xa){void 0===xa&&(xa={});if(q(V)||q(pa))throw new Xb("fromFormat requires an input string and a format");var Ia=xa,Ra=Ia.locale;Ia=Ia.numberingSystem;Ra=Rb.fromOpts({locale:void 0===Ra?null:Ra,
numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});Ra=rb(Ra,V,pa);var ab=[Ra.result,Ra.zone,Ra.invalidReason];Ra=ab[0];Ia=ab[1];return(ab=ab[2])?oa.invalid(ab):ic(Ra,Ia,xa,"format "+pa,V)};oa.fromString=function(V,pa,xa){void 0===xa&&(xa={});return oa.fromFormat(V,pa,xa)};oa.fromSQL=function(V,pa){void 0===pa&&(pa={});var xa=Ea(V,[Ed,Gd],[Fd,Hd]);return ic(xa[0],xa[1],pa,"SQL",V)};oa.invalid=function(V,pa){void 0===pa&&(pa=null);if(!V)throw new Xb("need to specify a reason the DateTime is invalid");
var xa=V instanceof Qb?V:new Qb(V,pa);if(Jb.throwOnInvalid)throw new Gc(xa);return new oa({invalid:xa})};oa.isDateTime=function(V){return V&&V.isLuxonDateTime||!1};var ta=oa.prototype;ta.get=function(V){return this[V]};ta.resolvedLocaleOptions=function(V){void 0===V&&(V={});V=Pb.create(this.loc.clone(V),V).resolvedOptions(this);return{locale:V.locale,numberingSystem:V.numberingSystem,outputCalendar:V.calendar}};ta.toUTC=function(V,pa){void 0===V&&(V=0);void 0===pa&&(pa={});return this.setZone($b.instance(V),
pa)};ta.toLocal=function(){return this.setZone(Jb.defaultZone)};ta.setZone=function(V,pa){var xa=void 0===pa?{}:pa,Ia=xa.keepLocalTime;Ia=void 0===Ia?!1:Ia;xa=xa.keepCalendarTime;xa=void 0===xa?!1:xa;V=aa(V,Jb.defaultZone);if(V.equals(this.zone))return this;if(V.isValid){var Ra=this.ts;if(Ia||xa)Ia=V.offset(this.ts),xa=this.toObject(),Ra=Zb(xa,Ia,V)[0];return Ib(this,{ts:Ra,zone:V})}return oa.invalid(Kb(V))};ta.reconfigure=function(V){V=void 0===V?{}:V;V=this.loc.clone({locale:V.locale,numberingSystem:V.numberingSystem,
outputCalendar:V.outputCalendar});return Ib(this,{loc:V})};ta.setLocale=function(V){return this.reconfigure({locale:V})};ta.set=function(V){if(!this.isValid)return this;V=P(V,wc);var pa=!q(V.weekYear)||!q(V.weekNumber)||!q(V.weekday),xa=!q(V.ordinal),Ia=!q(V.year),Ra=!q(V.month)||!q(V.day),ab=V.weekYear||V.weekNumber;if((Ia||Ra||xa)&&ab)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ra&&xa)throw new Vb("Can't mix ordinal dates with month/day");pa?pa=nb(c({},
Cb(this.c),V)):q(V.ordinal)?(pa=c({},this.toObject(),V),q(V.day)&&(pa.day=Math.min(F(pa.year,pa.month),pa.day))):pa=Fb(c({},yb(this.c),V));V=Zb(pa,this.o,this.zone);return Ib(this,{ts:V[0],o:V[1]})};ta.plus=function(V){if(!this.isValid)return this;V=Ca(V);return Ib(this,vc(this,V))};ta.minus=function(V){if(!this.isValid)return this;V=Ca(V).negate();return Ib(this,vc(this,V))};ta.startOf=function(V){if(!this.isValid)return this;var pa={};V=N.normalizeUnit(V);switch(V){case "years":pa.month=1;case "quarters":case "months":pa.day=
1;case "weeks":case "days":pa.hour=0;case "hours":pa.minute=0;case "minutes":pa.second=0;case "seconds":pa.millisecond=0}"weeks"===V&&(pa.weekday=1);"quarters"===V&&(pa.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(pa)};ta.endOf=function(V){var pa;return this.isValid?this.plus((pa={},pa[V]=1,pa)).startOf(V).minus(1):this};ta.toFormat=function(V,pa){void 0===pa&&(pa={});return this.isValid?Pb.create(this.loc.redefaultToEN(pa)).formatDateTimeFromString(this,V):"Invalid DateTime"};ta.toLocaleString=
function(V,pa){void 0===V&&(V=xc);void 0===pa&&(pa={});return this.isValid?Pb.create(this.loc.clone(pa),V).formatDateTime(this):"Invalid DateTime"};ta.toLocaleParts=function(V){void 0===V&&(V={});return this.isValid?Pb.create(this.loc.clone(V),V).formatDateTimeParts(this):[]};ta.toISO=function(V){void 0===V&&(V={});return this.isValid?this.toISODate(V)+"T"+this.toISOTime(V):null};ta.toISODate=function(V){V=(void 0===V?{}:V).format;V="basic"===(void 0===V?"extended":V)?"yyyyMMdd":"yyyy-MM-dd";9999<
this.year&&(V="+"+V);return jc(this,V)};ta.toISOWeekDate=function(){return jc(this,"kkkk-'W'WW-c")};ta.toISOTime=function(V){var pa=void 0===V?{}:V;V=pa.suppressMilliseconds;var xa=pa.suppressSeconds,Ia=pa.includeOffset,Ra=pa.includePrefix;pa=pa.format;return Ac(this,{suppressSeconds:void 0===xa?!1:xa,suppressMilliseconds:void 0===V?!1:V,includeOffset:void 0===Ia?!0:Ia,includePrefix:void 0===Ra?!1:Ra,format:void 0===pa?"extended":pa})};ta.toRFC2822=function(){return jc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",
!1)};ta.toHTTP=function(){return jc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};ta.toSQLDate=function(){return jc(this,"yyyy-MM-dd")};ta.toSQLTime=function(V){var pa=void 0===V?{}:V;V=pa.includeOffset;pa=pa.includeZone;return Ac(this,{includeOffset:void 0===V?!0:V,includeZone:void 0===pa?!1:pa,spaceZone:!0})};ta.toSQL=function(V){void 0===V&&(V={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(V):null};ta.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};ta.valueOf=
function(){return this.toMillis()};ta.toMillis=function(){return this.isValid?this.ts:NaN};ta.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};ta.toJSON=function(){return this.toISO()};ta.toBSON=function(){return this.toJSDate()};ta.toObject=function(V){void 0===V&&(V={});if(!this.isValid)return{};var pa=c({},this.c);V.includeConfig&&(pa.outputCalendar=this.outputCalendar,pa.numberingSystem=this.loc.numberingSystem,pa.locale=this.loc.locale);return pa};ta.toJSDate=function(){return new Date(this.isValid?
this.ts:NaN)};ta.diff=function(V,pa,xa){void 0===pa&&(pa="milliseconds");void 0===xa&&(xa={});if(!this.isValid||!V.isValid)return N.invalid("created by diffing an invalid DateTime");xa=c({locale:this.locale,numberingSystem:this.numberingSystem},xa);var Ia=(Array.isArray(pa)?pa:[pa]).map(N.normalizeUnit);pa=V.valueOf()>this.valueOf();V=sa(pa?this:V,pa?V:this,Ia,xa);return pa?V.negate():V};ta.diffNow=function(V,pa){void 0===V&&(V="milliseconds");void 0===pa&&(pa={});return this.diff(oa.now(),V,pa)};
ta.until=function(V){return this.isValid?ca.fromDateTimes(this,V):this};ta.hasSame=function(V,pa){if(!this.isValid)return!1;var xa=V.valueOf(),Ia=this.setZone(V.zone,{keepLocalTime:!0});return Ia.startOf(pa)<=xa&&xa<=Ia.endOf(pa)};ta.equals=function(V){return this.isValid&&V.isValid&&this.valueOf()===V.valueOf()&&this.zone.equals(V.zone)&&this.loc.equals(V.loc)};ta.toRelative=function(V){void 0===V&&(V={});if(!this.isValid)return null;var pa=V.base||oa.fromObject({},{zone:this.zone}),xa=V.padding?
this<pa?-V.padding:V.padding:0,Ia="years months days hours minutes seconds".split(" "),Ra=V.unit;Array.isArray(V.unit)&&(Ia=V.unit,Ra=void 0);return Nc(pa,this.plus(xa),c({},V,{numeric:"always",units:Ia,unit:Ra}))};ta.toRelativeCalendar=function(V){void 0===V&&(V={});return this.isValid?Nc(V.base||oa.fromObject({},{zone:this.zone}),this,c({},V,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};oa.min=function(){for(var V=arguments.length,pa=Array(V),xa=0;xa<V;xa++)pa[xa]=arguments[xa];
if(!pa.every(oa.isDateTime))throw new Xb("min requires all arguments be DateTimes");return z(pa,function(Ia){return Ia.valueOf()},Math.min)};oa.max=function(){for(var V=arguments.length,pa=Array(V),xa=0;xa<V;xa++)pa[xa]=arguments[xa];if(!pa.every(oa.isDateTime))throw new Xb("max requires all arguments be DateTimes");return z(pa,function(Ia){return Ia.valueOf()},Math.max)};oa.fromFormatExplain=function(V,pa,xa){void 0===xa&&(xa={});var Ia=xa;xa=Ia.locale;Ia=Ia.numberingSystem;xa=Rb.fromOpts({locale:void 0===
xa?null:xa,numberingSystem:void 0===Ia?null:Ia,defaultToEN:!0});return rb(xa,V,pa)};oa.fromStringExplain=function(V,pa,xa){void 0===xa&&(xa={});return oa.fromFormatExplain(V,pa,xa)};a(oa,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",
get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?
this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?uc(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?uc(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?
uc(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?yb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?ra.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?ra.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?ra.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?ra.weekdays("long",
{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?
!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return E(this.year)}},{key:"daysInMonth",get:function(){return F(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?E(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?H(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return xc}},{key:"DATE_MED",get:function(){return Mb}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return ja}},
{key:"DATE_FULL",get:function(){return Sa}},{key:"DATE_HUGE",get:function(){return Pa}},{key:"TIME_SIMPLE",get:function(){return Ka}},{key:"TIME_WITH_SECONDS",get:function(){return Na}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ua}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Ta}},{key:"TIME_24_SIMPLE",get:function(){return Oa}},{key:"TIME_24_WITH_SECONDS",get:function(){return Za}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return bb}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return cb}},
{key:"DATETIME_SHORT",get:function(){return jb}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return $a}},{key:"DATETIME_MED",get:function(){return kb}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return mb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return ob}},{key:"DATETIME_FULL",get:function(){return Ub}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Hc}},{key:"DATETIME_HUGE",get:function(){return yc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return oa}();
D.DateTime=Tb;D.Duration=N;D.FixedOffsetZone=$b;D.IANAZone=fc;D.Info=ra;D.Interval=ca;D.InvalidZone=Hb;D.Settings=Jb;D.SystemZone=ed;D.VERSION="2.0.2";D.Zone=cc;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/arcade/Attachment":function(){var D=this&&this.__extends||function(){var B=function(a,c){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var e in g)Object.prototype.hasOwnProperty.call(g,e)&&(h[e]=g[e])};return B(a,c)};return function(a,
c){function h(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");B(a,c);a.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}();define(["require","exports","./Dictionary"],function(B,a,c){return function(h){function g(e,l,r,k,f,b){var d=h.call(this)||this;d.attachmentUrl=f;d.immutable=!1;d.setField("id",e);d.setField("name",l);d.setField("contenttype",r);d.setField("size",k);d.setField("exifinfo",
b);d.immutable=!0;return d}D(g,h);return g}(c)})},"esri/arcade/Feature":function(){var D=this&&this.__assign||function(){D=Object.assign||function(B){for(var a,c=1,h=arguments.length;c<h;c++){a=arguments[c];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(B[g]=a[g])}return B};return D.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ./polyfill/promiseUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(B,a,c,h,g,e,l,r,k,f){return function(){function b(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}b.createFromGraphic=function(d){var q=new b;q._geometry=d.geometry?d.geometry:null;q.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;d._sourceLayer?(q._layer=d._sourceLayer,q._datesfixed=!1):d._layer?(q._layer=d._layer,q._datesfixed=!1):d.layer&&
"fields"in d.layer?(q._layer=d.layer,q._datesfixed=!1):d.sourceLayer&&"fields"in d.sourceLayer&&(q._layer=d.sourceLayer,q._datesfixed=!1);return q};b.createFromArcadeFeature=function(d){var q=new b;q._datesfixed=d._datesfixed;q.attributes=d.attributes;q._geometry=d._geometry;d._layer&&(q._layer=d._layer);return q};b.createFromArcadeDictionary=function(d){var q=new b;q.attributes=d.field("attributes");null!==q.attributes?q.attributes instanceof c?(q.attributes=q.attributes.attributes,null===q.attributes&&
(q.attributes={})):q.attributes={}:q.attributes={};q._geometry=d.field("geometry");null!==q._geometry&&(q._geometry instanceof c?q._geometry=b.parseGeometryFromDictionary(q._geometry):q._geometry instanceof l||(q._geometry=null));return q};b.createFromGraphicLikeObject=function(d,q,m){void 0===m&&(m=null);var n=new b;null===q&&(q={});n.attributes=q;n._geometry=d?d:null;n._layer=m;n._layer&&(n._datesfixed=!1);n._adapter=null;return n};b.prototype.repurposeFromGraphicLikeObject=function(d,q,m){void 0===
m&&(m=null);null===q&&(q={});this.attributes=q;this._geometry=d?d:null;this._datesfixed=(this._layer=m)?!1:!0};b.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var d="";!1===this._datesfixed&&this._fixDates();for(var q in this.attributes){""!==d&&(d+=",");var m=this.attributes[q];null==m?d+=JSON.stringify(q)+":null":g.isBoolean(m)||g.isNumber(m)||g.isString(m)?d+=JSON.stringify(q)+":"+JSON.stringify(m):m instanceof l?d+=JSON.stringify(q)+":"+g.toStringExplicit(m):
m instanceof h?d+=JSON.stringify(q)+":"+g.toStringExplicit(m):m instanceof Array?d+=JSON.stringify(q)+":"+g.toStringExplicit(m):m instanceof Date?d+=JSON.stringify(q)+":"+JSON.stringify(m):null!==m&&"object"===typeof m&&void 0!==m.castToText&&(d+=JSON.stringify(q)+":"+m.castToText())}return'{"geometry":'+(null===this.geometry()?"null":g.toStringExplicit(this.geometry()))+',"attributes":{'+d+"}}"};b.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{for(var d=[],q=0;q<this._layer.fields.length;q++){var m=this._layer.fields[q];"date"!==m.type&&"esriFieldTypeDate"!==m.type||d.push(m.name)}this._datefields=d;0<d.length&&this._fixDateFields(d)}this._datesfixed=!0};b.prototype._fixDateFields=function(d){this.attributes=D({},this.attributes);for(var q=0;q<d.length;q++){var m=this.attributes[d[q]];if(null!==m)if(void 0===m)for(var n in this.attributes){if(n.toLowerCase()===d[q].toLowerCase()){m=this.attributes[n];null===m||m instanceof Date||(this.attributes[n]=
new Date(m));break}}else m instanceof Date||(this.attributes[d[q]]=new Date(m))}};b.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof l||(this._geometry=k.fromJson(this._geometry));return this._geometry};b.prototype.field=function(d){if(this._adapter)return this._adapter.field(d);!1===this._datesfixed&&this._fixDates();var q=this.attributes[d];if(void 0!==q)return q;q=d.toLowerCase();for(var m in this.attributes)if(m.toLowerCase()===
q)return this.attributes[m];if(this._hasFieldDefinition(q))return null;throw Error("Field not Found : "+d);};b.prototype._hasFieldDefinition=function(d){if(null===this._layer)return!1;for(var q=0;q<this._layer.fields.length;q++)if(this._layer.fields[q].name.toLowerCase()===d)return!0;return!1};b.prototype._field=function(d){var q;if(this._adapter)return null!==(q=this._adapter.field(d))&&void 0!==q?q:null;!1===this._datesfixed&&this._fixDates();q=d.toLowerCase();d=this.attributes[d];if(void 0!==d)return d;
for(var m in this.attributes)if(m.toLowerCase()===q)return this.attributes[m];return null};b.prototype.setField=function(d,q){if(this.immutable)throw Error("Feature is Immutable");if(!1===g.isSimpleType(q))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(d,q);else{var m=d.toLowerCase();if(void 0===this.attributes[d])for(var n in this.attributes)if(n.toLowerCase()===m){this.attributes[n]=q;return}this.attributes[d]=q}};b.prototype.hasField=function(d){if(this._adapter)return this._adapter.hasField(d);
var q=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(var m in this.attributes)if(m.toLowerCase()===q)return!0;return this._hasFieldDefinition(q)?!0:!1};b.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var d=[],q={},m;for(m in this.attributes)d.push(m),q[m.toLowerCase()]=1;if(null!==this._layer)for(m=0;m<this._layer.fields.length;m++){var n=this._layer.fields[m];1!==q[n.name.toLowerCase()]&&d.push(n.name)}return d=d.sort()};b.parseGeometryFromDictionary=function(d){d=
b.convertDictionaryToJson(d,!0);void 0!==d.hasm&&(d.hasM=d.hasm,delete d.hasm);void 0!==d.hasz&&(d.hasZ=d.hasz,delete d.hasz);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);void 0!==d.rings&&(d.rings=this.fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasZ));void 0!==d.paths&&(d.paths=this.fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));void 0!==d.points&&(d.points=this.fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return k.fromJson(d)};b.fixPathArrays=
function(d,q,m){var n=[];if(d instanceof Array)for(var t=0;t<d.length;t++)n.push(this.fixPointArrays(d[t],q,m));else if(d instanceof h)for(t=0;t<d.length();t++)n.push(this.fixPointArrays(d.get(t),q,m));return n};b.fixPointArrays=function(d,q,m){var n=[];if(d instanceof Array)for(var t=0;t<d.length;t++){var z=d[t];z instanceof r?q&&m?n.push([z.x,z.y,z.z,z.m]):q?n.push([z.x,z.y,z.z]):m?n.push([z.x,z.y,z.m]):n.push([z.x,z.y]):z instanceof h?n.push(z.toArray()):n.push(z)}else if(d instanceof h)for(t=
0;t<d.length();t++)z=d.get(t),z instanceof r?q&&m?n.push([z.x,z.y,z.z,z.m]):q?n.push([z.x,z.y,z.z]):m?n.push([z.x,z.y,z.m]):n.push([z.x,z.y]):z instanceof h?n.push(z.toArray()):n.push(z);return n};b.convertDictionaryToJson=function(d,q){void 0===q&&(q=!1);var m={},n;for(n in d.attributes){var t=d.attributes[n];t instanceof c&&(t=b.convertDictionaryToJson(t));q?m[n.toLowerCase()]=t:m[n]=t}return m};b.parseAttributesFromDictionary=function(d){var q={},m;for(m in d.attributes){var n=d.attributes[m];
if(g.isSimpleType(n))q[m]=n;else throw Error("Illegal Argument");}return q};b.fromJson=function(d){var q=null;null!==d.geometry&&void 0!==d.geometry&&(q=k.fromJson(d.geometry));var m={};if(null!==d.attributes&&void 0!==d.attributes)for(var n in d.attributes){var t=d.attributes[n];if(null===t)m[n]=t;else if(g.isString(t)||g.isNumber(t)||g.isBoolean(t)||g.isDate(t))m[n]=t;else throw Error("Illegal Argument");}return b.createFromGraphicLikeObject(q,m,null)};b.prototype.fullDomain=function(d,q){return null!==
this._layer&&this._layer.fields?g.getDomain(d,this._layer,this,q):null};b.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(d){return{name:d.name,code:d.id}}):[]}:null:null};b.prototype.domainValueLookup=function(d,q,m){if(null===this._layer||!this._layer.fields)return null;m=g.getDomain(d,this._layer,this,m);if(void 0===q)try{q=this.field(d)}catch(n){return null}return g.getDomainValue(m,
q)};b.prototype.gdbVersion=function(){if(null===this._layer)return"";var d=this._layer.gdbVersion;return void 0===d?"":""===d&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":d};b.prototype.domainCodeLookup=function(d,q,m){if(null===this._layer||!this._layer.fields)return null;if(void 0===q){try{q=this.field(d)}catch(n){return null}return q}d=g.getDomain(d,this._layer,this,m);return g.getDomainCode(d,q)};b.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var d=[],q=0,m=this._layer.fields;q<m.length;q++)d.push(f.esriFieldToJson(m[q]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===f.layerGeometryEsriRestConstants[this._layer.geometryType]?"":f.layerGeometryEsriRestConstants[this._layer.geometryType],fields:d}};b.prototype.castAsJson=function(d){void 0===d&&(d=null);var q={attributes:{},geometry:!0===(null===d||void 0===d?void 0:d.keepGeometryType)?this.geometry():this.geometry().toJson()},
m;for(m in this.attributes){var n=this.attributes[m];void 0!==n&&(q.attributes[m]=g.castAsJson(n,d))}return q};b.prototype.castAsJsonAsync=function(d,q){void 0===d&&(d=null);void 0===q&&(q=null);return e.resolve(this.castAsJson(q))};return b}()})},"esri/arcade/featureset/support/shared":function(){var D=this&&this.__assign||function(){D=Object.assign||function(B){for(var a,c=1,h=arguments.length;c<h;c++){a=arguments[c];for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(B[g]=a[g])}return B};
return D.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(B,a,c,h,g){function e(r){var k=null;r.domain&&(k="range"===r.domain.type?{type:"range",range:[r.domain.minValue,r.domain.maxValue]}:{type:"codedValue",codedValues:r.domain.toJson().codedValues});return D(D({name:r.name,type:r.type,alias:r.alias},void 0!==r.length?{length:r.length}:{}),{editable:!0===r.editable,nullable:!0===r.nullable,domain:k})}function l(r){return r instanceof
Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=
void 0;(function(r){r[r.Standardised=0]="Standardised";r[r.StandardisedNoInterval=1]="StandardisedNoInterval";r[r.SqlServer=2]="SqlServer";r[r.Oracle=3]="Oracle";r[r.Postgres=4]="Postgres";r[r.PGDB=5]="PGDB";r[r.FILEGDB=6]="FILEGDB";r[r.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(r){return new g(e(r))};a.esriFieldToJson=e;(function(r){r[r.InFeatureSet=0]="InFeatureSet";r[r.NotInFeatureSet=1]="NotInFeatureSet";r[r.Unknown=
2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(r){return"string"===typeof r||r instanceof String};a.isBoolean=function(r){return"boolean"===typeof r};a.isNumber=function(r){return"number"===typeof r};a.isArray=function(r){return r instanceof Array};a.isDate=l;a.equalityTest=function(r,k){return r===k?!0:l(r)&&l(k)?r.getTime()===k.getTime():!1};a.cloneAttributes=function(r){var k={},f;for(f in r)k[f]=r[f];return k};a.convertSquareUnitsToCode=function(r){if(void 0===r)return null;if("number"===
typeof r)return r;switch(r.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(r){if(null===r)return null;switch(r.type){case "polygon":case "multipoint":case "polyline":return r.getExtent();case "point":return new h({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference});case "extent":return r}return null};a.convertLinearUnitsToCode=function(r){if(void 0===
r)return null;if("number"===typeof r||"number"===typeof r)return r;switch(r.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(r,k){return r===k||"point"===r&&"esriGeometryPoint"===k||"polyline"===r&&"esriGeometryPolyline"===k||"polygon"===r&&"esriGeometryPolygon"===k||"extent"===r&&"esriGeometryEnvelope"===k||"multipoint"===r&&"esriGeometryMultipoint"===k||"point"===
k&&"esriGeometryPoint"===r||"polyline"===k&&"esriGeometryPolyline"===r||"polygon"===k&&"esriGeometryPolygon"===r||"extent"===k&&"esriGeometryEnvelope"===r||"multipoint"===k&&"esriGeometryMultipoint"===r?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(r){return function(k){r.reject(k)}};a.callback=function(r,k){return function(){try{r.apply(null,arguments)}catch(f){k.reject(f)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",
esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",
esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",
esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",
esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(r){switch(r){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(r,k){return c.create(function(f,b){var d=c.resolve(!0);r.reduce(function(q,m,n,t){return q.then(function(z){try{return k(z,m,n,t)}catch(w){return c.reject(w)}},function(z){return c.reject(z)})},
d).then(f,b)})};a.extractServiceUrl=function(r){if(void 0===r)return"";r=r.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");r=r.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return r=r.split("?")[0]};a.stableStringify=function(r,k){k||(k={});"function"===typeof k&&(k={cmp:k});var f="boolean"===typeof k.cycles?k.cycles:!1,b=k.cmp&&function(q){return function(m){return function(n,t){return q({key:n,value:m[n]},{key:t,value:m[t]})}}}(k.cmp),d=[];return function n(m){m&&m.toJson&&"function"===typeof m.toJson&&
(m=m.toJson());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var t;if(Array.isArray(m)){var z="[";for(t=0;t<m.length;t++)t&&(z+=","),z+=n(m[t])||"null";return z+"]"}if(null===m)return"null";if(-1!==d.indexOf(m)){if(f)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var w=d.push(m)-1,y=Object.keys(m).sort(b&&b(m));z="";for(t=0;t<y.length;t++){var x=y[t],A=n(m[x]);A&&(z&&(z+=","),z+=
JSON.stringify(x)+":"+A)}d.splice(w,1);return"{"+z+"}"}}(r)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(D,B,a,c,h,g,e){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(l){if(l&&B.isObject(l)&&(this.name=l.name,this.type=l.type,this.alias=l.alias,this.length=l.length,this.editable=l.editable,this.nullable=l.nullable,this.defaultValue=l.defaultValue,this.description=l.description?
JSON.parse(l.description):null,this.isViewOverride=!!l.isViewOverride,(l=l.domain)&&B.isObject(l)))switch(l.type){case "range":this.domain=new g(l);break;case "codedValue":this.domain=new e(l)}},toJson:function(){return h.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||
void 0})},toJSON:function(){return this.toJson()}});B.setObject("layers.Field",D,c);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,B,a,c,h,g){D=D([g],{declaredClass:"esri.layers.RangeDomain",constructor:function(e){e&&B.isObject(e)&&(this.minValue=e.range[0],this.maxValue=e.range[1])},toJson:function(){var e=this.inherited(arguments);e.range=[this.minValue,this.maxValue];return h.fixJson(e)}});
B.setObject("layers.RangeDomain",D,c);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(g){g&&B.isObject(g)&&(this.name=g.name,this.type=g.type)},toJson:function(){return h.fixJson({name:this.name,type:this.type})}});B.setObject("layers.Domain",D,c);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(D,B,a,c,h,g,e){D=D([e],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(l){l&&B.isObject(l)&&(this.codedValues=l.codedValues)},getName:function(l){var r;a.some(this.codedValues,function(k){k.code==l&&(r=k.name);return!!r});return r},toJson:function(){var l=this.inherited(arguments);l.codedValues=B.clone(this.codedValues);return g.fixJson(l)}});B.setObject("layers.CodedValueDomain",D,h);return D})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(D,
B){function a(x,A){return"0"!==x.min&&A.length<Number(x.min)||"*"!==x.max&&A.length>Number(x.max)?-2:1}function c(x,A,v){if(null!==v.localScope&&void 0!==v.localScope[x.toLowerCase()]){var u=v.localScope[x.toLowerCase()];if("FormulaFunction"===u.type||"any"===u.type)return void 0===u.signature&&(u.signature={min:"0",max:"*"}),a(u.signature,A)}return void 0!==v.globalScope[x.toLowerCase()]&&(u=v.globalScope[x.toLowerCase()],"FormulaFunction"===u.type||"any"===u.type)?(void 0===u.signature&&(u.signature=
{min:"0",max:"*"}),a(u.signature,A)):-1}function h(x,A){if(x)for(var v=0;v<x.length;v++)g(x[v],A)}function g(x,A){if(x&&!1!==A(x))switch(x.type){case "ArrayExpression":h(x.elements,A);break;case "AssignmentExpression":case "BinaryExpression":g(x.left,A);g(x.right,A);break;case "BlockStatement":h(x.body,A);break;case "CallExpression":g(x.callee,A);h(x.arguments,A);break;case "ExpressionStatement":g(x.expression,A);break;case "ForInStatement":g(x.left,A);g(x.right,A);g(x.body,A);break;case "ForStatement":g(x.init,
A);g(x.test,A);g(x.update,A);g(x.body,A);break;case "FunctionDeclaration":g(x.id,A);h(x.params,A);g(x.body,A);break;case "IfStatement":g(x.test,A);g(x.consequent,A);g(x.alternate,A);break;case "LogicalExpression":g(x.left,A);g(x.right,A);break;case "MemberExpression":g(x.object,A);g(x.property,A);break;case "ObjectExpression":h(x.properties,A);break;case "Program":h(x.body,A);break;case "Property":g(x.key,A);g(x.value,A);break;case "ReturnStatement":g(x.argument,A);break;case "UnaryExpression":g(x.argument,
A);break;case "UpdateExpression":g(x.argument,A);break;case "VariableDeclaration":h(x.declarations,A);break;case "VariableDeclarator":g(x.id,A);g(x.init,A);break;case "TemplateLiteral":h(x.expressions,A),h(x.quasis,A)}}function e(x,A){void 0===A&&(A=!0);var v=d(x,"SYNTAX","UNREOGNISED");try{switch(x.type){case "VariableDeclarator":return"Identifier"!==x.id.type?d(x,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==x.init?e(x.init,!1):"";case "VariableDeclaration":for(var u=0;u<x.declarations.length;u++)if(v=
e(x.declarations[u],A),""!==v)return v;return"";case "ForInStatement":v=e(x.left,A);if(""!==v)break;if("VariableDeclaration"===x.left.type){if(1<x.left.declarations.length)return d(x,"SYNTAX","ONLY1VAR");if(null!==x.left.declarations[0].init)return d(x,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==x.left.type)return d(x,"SYNTAX","LEFTNOTVAR");v=e(x.right,A);if(""!==v)break;v=e(x.body,A);if(""!==v)break;return"";case "ForStatement":if(null!==x.test&&(v=e(x.test,A),""!==v))break;if(null!==x.init&&
(v=e(x.init,A),""!==v))break;if(null!==x.update&&(v=e(x.update,A),""!==v))break;if(null!==x.body&&(v=e(x.body,A),""!==v))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":v=e(x.test,A);if(""!==v)break;if(null!==x.consequent&&(v=e(x.consequent,!1),""!==v))break;if(null!==x.alternate&&(v=e(x.alternate,!1),""!==v))break;return"";case "BlockStatement":var C=[];for(u=0;u<x.body.length;u++)"EmptyStatement"!==x.body[u].type&&
C.push(x.body[u]);x.body=C;for(u=0;u<x.body.length;u++)if(v=e(x.body[u],A),""!==v)return v;return"";case "FunctionDeclaration":return!1===A?d(x,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==x.id.type?d(x,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):e(x.body,!1);case "ReturnStatement":return null!==x.argument?e(x.argument,A):"";case "UpdateExpression":return"Identifier"!==x.argument.type&&"MemberExpression"!==x.argument.type?d(x,"SYNTAX","ASSIGNMENTTOVARSONLY"):e(x.argument,A);case "AssignmentExpression":if("Identifier"!==
x.left.type&&"MemberExpression"!==x.left.type)return d(x,"SYNTAX","ASSIGNMENTTOVARSONLY");v=e(x.left,A);if(""!==v)break;switch(x.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return d(x,"SYNTAX","OPERATORNOTRECOGNISED")}return e(x.right,!1);case "ExpressionStatement":return e(x.expression,!1);case "Identifier":v="";break;case "MemberExpression":v=e(x.object,A);if(""!==v)break;return!0===x.computed?e(x.property,A):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==x.callee.type)return d(x,"SYNTAX","ONLYNODESSUPPORTED");v="";for(u=0;u<x.arguments.length;u++)if(v=e(x.arguments[u],A),""!==v)return v;return"";case "UnaryExpression":v=e(x.argument,A);break;case "BinaryExpression":v=e(x.left,A);if(""!==v)break;v=e(x.right,A);if(""!==v)break;switch(x.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return d(x,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":v=e(x.left,A);if(""!==v)break;v=e(x.right);if(""!==v)break;switch(x.operator){case "\x26\x26":case "||":break;default:return d(x,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":v="";for(u=0;u<x.elements.length&&(v=e(x.elements[u],A),""===v);u++);break;case "TemplateLiteral":v="";for(u=0;u<x.quasis.length;u++)if(v=e(x.quasis[u],A),""!==v)return v;for(u=0;u<x.expressions.length&&(v=e(x.expressions[u],
A),""===v);u++);break;case "ObjectExpression":v="";for(u=0;u<x.properties.length;u++){v="";if(null!==x.properties[u].key&&("Literal"!==x.properties[u].key.type&&"Identifier"!==x.properties[u].key.type&&(v=d(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===x.properties[u].key.type)){C=x.properties[u].key;var E="value"in C?C.value:null;"string"===typeof E||E instanceof String||(v=d(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===v&&(v=e(x.properties[u],A));if(""!==v)break}break;case "Property":if("Literal"!==
x.key.type&&"Identifier"!==x.key.type)return d(x,"SYNTAX","ONLYLITERAL");if("Identifier"!==x.key.type&&(v=e(x.key,A),""!==v))break;v=e(x.value,A)}return v}catch(F){throw F;}}function l(x,A){var v=d(x,"SYNTAX","UNREOGNISED"),u=null,C="";try{switch(x.type){case "VariableDeclarator":var E=null===x.init?"":l(x.init,A);if(""!==E)return E;"Identifier"===x.id.type&&(null===A.localScope?A.globalScope[x.id.name.toLowerCase()]={type:"any"}:A.localScope[x.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":u=
k(x.id.name.toLowerCase(),x);C=f(x,A);if(""!==C)return C;if(null!==A.localScope)return d(x,"SYNTAX","GLOBALFUNCTIONSONLY");u.isnative=!1;A.globalScope[x.id.name.toLowerCase()]={type:"FormulaFunction",signature:[u]};return"";case "VariableDeclaration":v="";for(var F=0;F<x.declarations.length&&(v=l(x.declarations[F],A),""===v);F++);break;case "IfStatement":v=l(x.test,A);if(""!==v)break;if("AssignmentExpression"===x.test.type||"UpdateExpression"===x.test.type)return d(x.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==x.consequent&&(v=l(x.consequent,A),""!==v))break;if(null!==x.alternate&&(v=l(x.alternate,A),""!==v))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(F=0;F<x.body.length;F++)if(v=l(x.body[F],A),""!==v)return v;return"";case "ReturnStatement":return null!==x.argument?l(x.argument,A):"";case "ForInStatement":if("VariableDeclaration"===x.left.type){if(1<x.left.declarations.length)return d(x,"SYNTAX","ONLY1VAR");if(null!==x.left.declarations[0].init)return d(x,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==x.left.type)return d(x,"SYNTAX","LEFTNOTVAR");v=l(x.left,A);if(""!==v)break;v=l(x.right,A);if(""!==v)break;v=l(x.body,A);if(""!==v)break;return"";case "ForStatement":if(null!==x.init&&(v=l(x.init,A),""!==v))break;if(null!==x.test&&(v=l(x.test,A),""!==v))break;if(null!==x.body&&(v=l(x.body,A),""!==v))break;if(null!==x.update&&(v=l(x.update,A),""!==v))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
x.argument.type&&"MemberExpression"!==x.argument.type)return d(x,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=!1;if("MemberExpression"===x.argument.type)return l(x.argument,A);null!==A.localScope&&void 0!==A.localScope[x.argument.name.toLowerCase()]&&(G=!0);void 0!==A.globalScope[x.argument.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+x.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==x.left.type&&"MemberExpression"!==x.left.type)return d(x,"SYNTAX","ASSIGNMENTTOVARSONLY");
var H=l(x.right,A);if(""!==H)return H;G=!1;if("MemberExpression"===x.left.type)return H=l(x.left,A),""!==H?H:"";null!==A.localScope&&void 0!==A.localScope[x.left.name.toLowerCase()]&&(G=!0);void 0!==A.globalScope[x.left.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+x.left.name+" has not been declared.":"";case "ExpressionStatement":return l(x.expression,A);case "Identifier":var J=x.name.toLowerCase();if(null!==A.localScope&&void 0!==A.localScope[J])return"";v=void 0!==A.globalScope[J]?"":
d(x,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":v=l(x.object,A);if(""!==v)break;return!0===x.computed?l(x.property,A):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==x.callee.type)return d(x,"SYNTAX","ONLYNODESSUPPORTED");v="";for(F=0;F<x.arguments.length;F++)if(v=l(x.arguments[F],A),""!==v)return v;var I=c(x.callee.name,x.arguments,A);-1===I&&(v=d(x,"SYNTAX","NOTFOUND"));-2===I&&(v=d(x,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":v=
l(x.argument,A);break;case "BinaryExpression":v=l(x.left,A);if(""!==v)break;v=l(x.right,A);if(""!==v)break;return"";case "LogicalExpression":v=l(x.left,A);if(""!==v)break;if("AssignmentExpression"===x.left.type||"UpdateExpression"===x.left.type)return d(x.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");v=l(x.right,A);if(""!==v)break;return"AssignmentExpression"===x.right.type||"UpdateExpression"===x.right.type?d(x.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":v=
"";for(F=0;F<x.elements.length&&(v=l(x.elements[F],A),""===v);F++);break;case "TemplateLiteral":v="";for(F=0;F<x.quasis.length;F++)if(v=l(x.quasis[F],A),""!==v)return v;for(F=0;F<x.expressions.length&&(v=l(x.expressions[F],A),""===v);F++);break;case "ObjectExpression":v="";for(F=0;F<x.properties.length;F++){v="";if(null!==x.properties[F].key&&("Literal"!==x.properties[F].key.type&&"Identifier"!==x.properties[F].key.type&&(v=d(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===x.properties[F].key.type)){var R=
x.properties[F].key,O="value"in R?R.value:null;"string"===typeof O||O instanceof String||(v=d(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===v&&(v=l(x.properties[F],A));if(""!==v)break}break;case "Property":if("Literal"!==x.key.type&&"Identifier"!==x.key.type)return d(x,"SYNTAX","ONLYLITERAL");if("Identifier"!==x.key.type&&(v=l(x.key,A),""!==v))break;v=l(x.value,A)}return v}catch(P){throw P;}}function r(x,A){var v=!1,u=A.toLowerCase();g(x,function(C){if(v)return!1;"Identifier"===C.type&&C.name&&C.name.toLowerCase()===
u&&(v=!0);return!0});return v}function k(x,A){var v=[];if(void 0!==A.params&&null!==A.params)for(var u=0;u<A.params.length;u++)v.push("any");return{name:x,"return":"any",params:v}}function f(x,A){for(var v={globalScope:A.globalScope,localScope:{}},u=0;u<x.params.length;u++)v.localScope[x.params[u].name.toLowerCase()]={type:"any"};return l(x.body,v)}function b(x,A,v,u){var C={};if(void 0===x||null===x)x={};if(void 0===v||null===v)v={};C.infinity={type:"any"};C.textformatting={type:"any"};C.pi={type:"any"};
for(var E in A)"sync"===u&&void 0!==A[E].min?C[E]={type:"FormulaFunction",signature:{min:A[E].min,max:A[E].max}}:"sync"!==u&&void 0!==A[E].fmin&&(C[E]={type:"FormulaFunction",signature:{min:A[E].fmin,max:A[E].fmax}});for(A=0;A<v.length;A++)E=v[A],C[E.name]={type:"FormulaFunction",signature:E};for(E in x)C[E]=x[E],C[E].type="any";return C}function d(x,A,v){var u="";switch(A){case "SYNTAX":u="Syntax Error: ";break;case "RUNTIME":u="Runtime Error: ";break;default:u="Syntax Error: "}try{switch(x.type){case "IfStatement":switch(v){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":u+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":u+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(v){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":u+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":u+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":u+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(v){case "GLOBALFUNCTIONSONLY":u+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":u+=" Function Definition must have an identifier"}break;case "VariableDeclaration":u+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(v){case "FUNCTIONVARIABLEDECLARATOR":u+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":u+=" Variable Definition must have an identifier"}break;case "Identifier":u+=" Identifier Not Found. ";u+=x.name;break;case "ObjectExpression":switch(v){case "OBJECTPROPERTYMUSTBESTRING":u+=
" Property name must be a string"}break;case "ForStatement":switch(v){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":u+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(v){case "ONLY1VAR":u+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":u+=" Can only declare value for use with IN";break;case "LEFTNOVAR":u+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":u+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":u+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(v){case "PROPERTYNOTFOUND":u+="Cannot find member property. ";u+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "OUTOFBOUNDS":u+="Out of Bounds. ";u+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "NOTFOUND":u+="Cannot call member method on null. ";u+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "INVALIDTYPE":u+="Cannot call member property on object of this type. ",
u+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":""}break;case "Property":switch(v){case "ONLYLITERAL":u+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(v){case "WRONGSIGNATURE":u+="Function signature does not match: ";u+="Identifier"===x.callee.type?x.callee.name:"";break;case "ONLYNODESUPPORTED":u+="Functions must be declared.";u+="Identifier"===x.callee.type?x.callee.name:"";break;case "NOTAFUNCTION":u+="Not a Function: ";
u+="Identifier"===x.callee.type?x.callee.name:"";break;case "NOTFOUND":u+="Function Not Found: "+("Identifier"===x.callee.type?x.callee.name:"")}break;case "UnaryExpression":switch(v){case "NOTSUPPORTEDUNARYOPERATOR":u+="Operator "+x.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":u+="Unary operator "+x.operator+" cannot be used with this argument."}case "BinaryExpression":switch(v){case "OPERATORNOTRECOGNISED":u+="Binary Operator not recognised "+
x.operator}break;case "LogicalExpression":switch(v){case "ONLYBOOLEAN":u+="Operator "+x.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":u+="Logical Expression "+x.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(v){case "FUNCTIONCONTEXTILLEGAL":u+=" Cannot Put Function inside Array."}break;default:u+="Expression contains unrecognised code structures."}}catch(C){throw C;}return u}function q(x,A,v){return{line:x.loc.start.line,
character:x.loc.start.column,reason:d(x,A,v)}}function m(x,A,v,u){A={globalScope:A.globalScope,localScope:{}};for(var C=0;C<x.params.length;C++)A.localScope[x.params[C].name.toLowerCase()]={type:"any"};n(x.body,A,v,u,!1)}function n(x,A,v,u,C){void 0===C&&(C=!0);if(null===x)throw Error("Unnexpexted Expression Syntax");var E=null;try{switch(x.type){case "VariableDeclarator":"Identifier"!==x.id.type?u.push(q(x,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(x.id.name.toLowerCase(),null===A.localScope?A.globalScope[x.id.name.toLowerCase()]=
{type:"any"}:A.localScope[x.id.name.toLowerCase()]={type:"any"});null!==x.init&&n(x.init,A,v,u,C);break;case "FunctionDeclaration":!1===C&&u.push(q(x,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==x.id.type&&u.push(q(x,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));E=k("",x);m(x,A,v,u);null!==A.localScope&&u.push(q(x,"SYNTAX","GLOBALFUNCTIONSONLY"));E.isnative=!1;"Identifier"===x.id.type&&(A.globalScope[x.id.name.toLowerCase()]={type:"FormulaFunction",signature:[E]});break;case "VariableDeclaration":for(var F=
0;F<x.declarations.length;F++)n(x.declarations[F],A,v,u,C);break;case "IfStatement":null!==x.test&&(n(x.test,A,v,u,C),"AssignmentExpression"!==x.test.type&&"UpdateExpression"!==x.test.type||u.push(q(x.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==x.consequent&&n(x.consequent,A,v,u,C);null!==x.alternate&&n(x.alternate,A,v,u,C);break;case "EmptyStatement":break;case "BlockStatement":if(null!==x.body)for(F=0;F<x.body.length;F++)n(x.body[F],A,v,u,C);break;case "ReturnStatement":null!==
x.argument&&n(x.argument,A,v,u,C);break;case "ForInStatement":"VariableDeclaration"===x.left.type?(1<x.left.declarations.length&&u.push(q(x,"SYNTAX","ONLY1VAR")),null!==x.left.declarations[0].init&&u.push(q(x,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==x.left.type&&u.push(q(x,"SYNTAX","LEFTNOTVAR"));n(x.left,A,v,u,C);n(x.right,A,v,u,C);n(x.body,A,v,u,C);break;case "ForStatement":null!==x.init&&n(x.init,A,v,u,C);null!==x.test&&n(x.test,A,v,u,C);null!==x.body&&n(x.body,A,v,u,C);null!==x.update&&n(x.update,
A,v,u,C);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==x.argument.type&&"MemberExpression"!==x.argument.type)u.push(q(x,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===x.argument.type){var G=!1;!1===v&&(null!==A.localScope&&void 0!==A.localScope[x.argument.name.toLowerCase()]&&(G=!0),void 0!==A.globalScope[x.argument.name.toLowerCase()]&&(G=!0),!1===G&&u.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,
reason:"Identifier "+x.argument.name+" has not been declared."}))}"MemberExpression"===x.argument.type&&n(x.argument,A,v,u,C)}break;case "AssignmentExpression":"Identifier"!==x.left.type&&"MemberExpression"!==x.left.type&&u.push(q(x,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(x.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:u.push(q(x,"SYNTAX","OPERATORNOTRECOGNISED"))}n(x.right,A,v,u,C);G=!1;"Identifier"===x.left.type&&(null!==A.localScope&&void 0!==
A.localScope[x.left.name.toLowerCase()]&&(G=!0),void 0!==A.globalScope[x.left.name.toLowerCase()]&&(G=!0),!1===v&&!1===G&&u.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,reason:"Identifier "+x.left.name+" has not been declared."}));"MemberExpression"===x.left.type&&n(x.left,A,v,u,C);break;case "ExpressionStatement":n(x.expression,A,v,u,C);break;case "Identifier":var H=x.name.toLowerCase();if(null!==A.localScope&&void 0!==A.localScope[H]||void 0!==A.globalScope[H])break;
!1===v&&u.push(q(x,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":n(x.object,A,v,u,C);!0===x.computed&&n(x.property,A,v,u,C);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==x.callee.type&&u.push(q(x,"SYNTAX","ONLYNODESSUPPORTED"));for(F=0;F<x.arguments.length;F++)n(x.arguments[F],A,v,u,C);if("Identifier"===x.callee.type){var J=c(x.callee.name,x.arguments,A);!1===v&&-1===J&&u.push(q(x,"SYNTAX","NOTFOUND"));-2===J&&u.push(q(x,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":n(x.argument,A,v,u,C);break;case "BinaryExpression":n(x.left,A,v,u,C);n(x.right,A,v,u,C);switch(x.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:u.push(q(x,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(x.operator){case "\x26\x26":case "||":break;default:u.push(q(x,
"SYNTAX","OPERATORNOTRECOGNISED"))}n(x.left,A,v,u,C);"AssignmentExpression"!==x.left.type&&"UpdateExpression"!==x.left.type||u.push(q(x,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));n(x.right,A,v,u,C);"AssignmentExpression"!==x.right.type&&"UpdateExpression"!==x.right.type||u.push(q(x,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(F=0;F<x.elements.length;F++)n(x.elements[F],A,v,u,C);break;case "TemplateLiteral":for(F=0;F<x.quasis.length;F++)n(x.quasis[F],A,v,u,
C);for(F=0;F<x.expressions.length;F++)n(x.expressions[F],A,v,u,C);break;case "ObjectExpression":for(F=0;F<x.properties.length;F++)n(x.properties[F],A,v,u,C);break;case "Property":"Literal"!==x.key.type&&"Identifier"!==x.key.type&&u.push(q(x,"SYNTAX","ONLYLITERAL"));"Literal"===x.key.type&&n(x.key,A,v,u,C);n(x.value,A,v,u,C);break;default:u.push(q(x,"SYNTAX","UNRECOGNISED"))}}catch(I){u.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,reason:"Unnexpected Syntax"})}}function t(x){var A=
[];g(x,function(v){"CallExpression"===v.type&&"Identifier"===v.callee.type&&A.push(v.callee.name.toLowerCase());return!0});return A}Object.defineProperty(B,"__esModule",{value:!0});B.scriptUsesFeatureSet=B.findScriptDependencies=B.findFunctionCalls=B.checkScript=B.extractAllIssues=B.extractAllIssuesInFunction=B.makeError=B.nodeErrorMessage=B.validateLanguage=B.validateScript=B.constructGlobalScope=B.validateFunction=B.extractFunctionDeclaration=B.findExpectedFieldLiterals=B.findFieldLiterals=B.referencesFunction=
B.referencesMember=B.testValidityOfExpression=B.validateLanguageNode=B.walk=B.findFunction=B.checkFunctionSignature=B.addFunctionDeclaration=B.functionDecls=void 0;B.functionDecls={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",
max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},
split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",
max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},
multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",
max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},
haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},
length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},
portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var z in B.functionDecls)B.functionDecls[z].fmin=B.functionDecls[z].min,B.functionDecls[z].fmax=B.functionDecls[z].max;var w="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),
y="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");B.addFunctionDeclaration=function(x,A){var v=B.functionDecls[x.name.toLowerCase()];void 0===v?"sync"===A?B.functionDecls[x.name.toLowerCase()]={min:x.min,max:x.max}:B.functionDecls[x.name.toLowerCase()]=
{fmin:x.min,fmax:x.max}:"sync"===A?(v.min=x.min,v.max=x.max):(v.fmin=x.min,v.fmax=x.max)};B.checkFunctionSignature=a;B.findFunction=c;B.walk=g;B.validateLanguageNode=e;B.testValidityOfExpression=l;B.referencesMember=r;B.referencesFunction=function(x,A){var v=!1,u=A.toLowerCase();g(x,function(C){return v?!1:"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===u?(v=!0,!1):!0});return v};B.findFieldLiterals=function(x){var A=[];g(x,function(v){if("MemberExpression"!==
v.type||"Identifier"!==v.object.type)return!0;!1===v.computed&&v.object&&v.object.name&&v.property&&"Identifier"===v.property.type&&v.property.name?A.push(v.object.name.toLowerCase()+"."+v.property.name.toLowerCase()):v.object&&v.object.name&&v.property&&"Literal"===v.property.type&&"string"===typeof v.property.value&&A.push(v.object.name.toLowerCase()+"."+v.property.value.toString().toLowerCase());return!1});return A};B.findExpectedFieldLiterals=function(x){var A=[];g(x,function(v){if("CallExpression"===
v.type&&"Identifier"===v.callee.type&&"expects"===v.callee.name.toLowerCase()){for(var u="",C=0;C<(v.arguments||[]).length;C++)if(0===C)"Identifier"===v.arguments[C].type&&(u=v.arguments[C].name.toLowerCase());else{var E;if(E=u&&"Literal"===v.arguments[C].type)E=v.arguments[C].value,E="string"===typeof E||E instanceof String;E&&A.push(u+"."+v.arguments[C].value.toLowerCase())}return!1}if("MemberExpression"!==v.type||"Identifier"!==v.object.type)return!0;!1===v.computed&&v.object&&v.object.name&&v.property&&
"Identifier"===v.property.type&&v.property.name?A.push(v.object.name.toLowerCase()+"."+v.property.name.toLowerCase()):v.object&&v.object.name&&v.property&&"Literal"===v.property.type&&"string"===typeof v.property.value&&A.push(v.object.name.toLowerCase()+"."+v.property.value.toString().toLowerCase());return!1});return A};B.extractFunctionDeclaration=k;B.validateFunction=f;B.constructGlobalScope=b;B.validateScript=function(x,A,v,u){void 0===v&&(v="async");void 0===u&&(u=B.functionDecls);A={globalScope:b(A.vars,
u,A.customFunctions,v),localScope:null};return l(x.body[0].body,A)};B.validateLanguage=function(x){return"BlockStatement"!==x.body[0].body.type?"Invalid formula content.":e(x.body[0].body)};B.nodeErrorMessage=d;B.makeError=q;B.extractAllIssuesInFunction=m;B.extractAllIssues=n;B.checkScript=function(x,A,v,u,C){void 0===u&&(u="async");void 0===C&&(C=B.functionDecls);var E=[];if("BlockStatement"!==x.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===A||void 0===A)A={vars:{},
customFunctions:[]};A={globalScope:b(A.vars,C,A.customFunctions,u),localScope:null};try{n(x.body[0].body,A,v,E)}catch(F){}return E};B.findFunctionCalls=t;B.findScriptDependencies=function(x,A){void 0===A&&(A=[]);var v=null;if(void 0===x.usesFeatureSet){null===v&&(v=t(x));x.usesFeatureSet=!1;for(var u=0;u<v.length;u++)-1<w.indexOf(v[u])&&(x.usesFeatureSet=!0,x.isAsync=!0);if(!1===x.usesFeatureSet&&A&&0<A.length){u=0;for(var C=A;u<C.length;u++)if(r(x,C[u])){x.usesFeatureSet=!0;x.isAsync=!0;break}}}if(void 0===
x.usesGeometry)for(x.usesGeometry=!1,null===v&&(v=t(x)),u=0;u<v.length;u++)-1<y.indexOf(v[u])&&(x.usesGeometry=!0)};B.scriptUsesFeatureSet=function(x){x=t(x);for(var A=0;A<x.length;A++)if(-1<w.indexOf(x[A]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../FunctionWrapper ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),function(D,B,a,c,h,g){Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=
function(e){function l(k,f){if(f instanceof a)return e.arcadeCustomFunctionHandler(f);if(f instanceof h.NativeFunction)return function(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];return f.fn(k,{preparsed:!0,arguments:b})};if(f instanceof h.SizzleFunction)return function(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];if(b.length!==f.paramCount)throw Error("Invalid parameters");return f.fn.apply(f,b)};throw Error("Invalid Parameter");}function r(k){if(k instanceof c)return k.toArray();
if(h.isArray(k))return k;throw Error("Invalid Parameter");}e.functions.array=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,1,2);b=h.toNumber(q[0]);if(isNaN(b)||!1===h.isInteger(b))throw Error("Invalid Parameter");q=h.defaultUndefined(q[1],null);b=Array(b);b.fill(q);return b})};e.functions.front=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,1,1);if(h.isImmutableArray(q[0])){if(0>=q[0].length())throw Error("Array is empty");return q[0].get(0)}if(h.isArray(q[0])){if(0>=
q[0].length)throw Error("Array is empty");return q[0][0]}throw Error("Invalid Parameter");})};e.functions.back=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,1,1);if(h.isImmutableArray(q[0])){if(0>=q[0].length())throw Error("Array is empty");return q[0].get(q[0].length()-1)}if(h.isArray(q[0])){if(0>=q[0].length)throw Error("Array is empty");return q[0][q[0].length-1]}throw Error("Invalid Parameter");})};e.functions.push=function(k,f){return e.standardFunction(k,f,function(b,
d,q){h.pcCheck(q,1,2);if(h.isArray(q[0]))return q[0][q[0].length]=q[1],q[0].length;throw Error("Invalid Parameter");})};e.functions.pop=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,1,1);if(h.isArray(q[0])){if(0>=q[0].length)throw Error("Array is empty");b=q[0][q[0].length-1];--q[0].length;return b}throw Error("Invalid Parameter");})};e.functions.erase=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);if(h.isArray(q[0])){b=h.toNumber(q[1]);if(isNaN(b)||
!1===h.isInteger(b))throw Error("Invalid Parameter");q=q[0];if(0>=q.length)throw Error("Array is empty");0>b&&(b=q.length+b);if(0>b)throw Error("Element not found");if(b>=q.length)throw Error("Index is greater than array");q.splice(b,1);return h.voidOperation}throw Error("Invalid Parameter");})};e.functions.insert=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,3,3);if(h.isArray(q[0])){b=h.toNumber(q[1]);if(isNaN(b)||!1===h.isInteger(b))throw Error("Invalid Parameter");d=q[2];
q=q[0];if(b>q.length)throw Error("Index is greater than array");if(0>b&&b<-1*q.length)throw Error("Index is greater than array");if(b===q.length)return q[b]=d,h.voidOperation;q.splice(b,0,d);return h.voidOperation}throw Error("Invalid Parameter");})};e.functions.resize=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,3);if(h.isArray(q[0])){d=h.toNumber(q[1]);if(isNaN(d)||!1===h.isInteger(d))throw Error("Invalid Parameter");if(0>d)throw Error("Size cannot be negative");b=h.defaultUndefined(q[2],
null);q=q[0];if(q.length>=d)return q.length=d,h.voidOperation;var m=q.length;q.length=d;for(d=m;d<q.length;d++)q[d]=b;return h.voidOperation}throw Error("Invalid Parameter");})};e.functions.includes=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);if(h.isArray(q[0])){var m=q[1];b=q[0];return-1<b.findIndex(function(t){return h.equalityTest(t,m)})?!0:!1}if(h.isImmutableArray(q[0])){var n=q[1];b=q[0].toArray();return-1<b.findIndex(function(t){return h.equalityTest(t,n)})?
!0:!1}throw Error("Invalid Parameter");})};e.functions.slice=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,1,3);if(h.isArray(q[0])){b=h.toNumber(h.defaultUndefined(q[1],0));d=h.toNumber(h.defaultUndefined(q[2],q[0].length));if(isNaN(b)||!1===h.isInteger(b))throw Error("Invalid Parameter");if(isNaN(d)||!1===h.isInteger(d))throw Error("Invalid Parameter");var m=q[0];return m.slice(b,d)}if(h.isImmutableArray(q[0])){m=q[0];b=h.toNumber(h.defaultUndefined(q[1],0));d=h.toNumber(h.defaultUndefined(q[2],
m.length()));if(isNaN(b)||!1===h.isInteger(b))throw Error("Invalid Parameter");if(isNaN(d)||!1===h.isInteger(d))throw Error("Invalid Parameter");return m.toArray().slice(b,d)}throw Error("Invalid Parameter");})};e.functions.splice=function(k,f){return e.standardFunction(k,f,function(b,d,q){b=[];for(d=0;d<q.length;d++)h.isArray(q[d])?b.push.apply(b,q[d]):h.isImmutableArray(q[d])?b.push.apply(b,q[d].toArray()):b.push(q[d]);return b})};"sync"===e.mode&&(e.functions.any=function(k,f){return e.standardFunction(k,
f,function(b,d,q){h.pcCheck(q,2,2);b=l(k,q[1]);d=0;for(q=r(q[0]);d<q.length;d++){var m=b(q[d]);if(h.isBoolean(m)&&!0===m)return!0}return!1})},e.functions.all=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);b=l(k,q[1]);d=0;for(q=r(q[0]);d<q.length;d++)if(!0!==b(q[d]))return!1;return!0})},e.functions.none=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);b=l(k,q[1]);d=0;for(q=r(q[0]);d<q.length;d++)if(!0===b(q[d]))return!1;return!0})},e.functions.reduce=
function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,3);var m=l(k,q[1]);b=r(q[0]);return 2===q.length?0===b.length?null:b.reduce(function(n,t){var z=m(n,t);return n=void 0!==z&&z!==h.voidOperation?z:null}):b.reduce(function(n,t){var z=m(n,t);return n=void 0!==z&&z!==h.voidOperation?z:null},q[2])})},e.functions.map=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);b=l(k,q[1]);d=[];var m=0;for(q=r(q[0]);m<q.length;m++){var n=b(q[m]);void 0!==n&&n!==h.voidOperation?
d.push(n):d.push(null)}return d})},e.functions.filter=function(k,f){return e.standardFunction(k,f,function(b,d,q){h.pcCheck(q,2,2);b=l(k,q[1]);d=[];var m=0;for(q=r(q[0]);m<q.length;m++){var n=q[m];!0===b(n)&&d.push(n)}return d})});"async"===e.mode&&(e.functions.any=function(k,f){return e.standardFunctionAsync(k,f,function(b,d,q){h.pcCheck(q,2,2);var m=l(k,q[1]),n=!1;return r(q[0]).reduce(function(t,z,w){return t.then(function(y){0<w&&!0===y&&(n=!0);if(!0===n)return g.resolve(!0);y=m(z);return g.isPromiseLike(y)?
y:g.resolve(y)})},Promise.resolve(!1)).then(function(t){!0===t&&(n=!0);return n})})},e.functions.all=function(k,f){return e.standardFunctionAsync(k,f,function(b,d,q){h.pcCheck(q,2,2);var m=l(k,q[1]),n=!0;return r(q[0]).reduce(function(t,z,w){return t.then(function(y){0<w&&!0!==y&&(n=!1);if(!1===n)return g.resolve(!1);y=m(z);return g.isPromiseLike(y)?y:g.resolve(y)})},Promise.resolve(!0)).then(function(t){!0!==t&&(n=!1);return n})})},e.functions.none=function(k,f){return e.standardFunctionAsync(k,
f,function(b,d,q){h.pcCheck(q,2,2);var m=l(k,q[1]),n=!0;return r(q[0]).reduce(function(t,z,w){return t.then(function(y){0<w&&!0===y&&(n=!1);if(!1===n)return g.resolve(!0);y=m(z);return g.isPromiseLike(y)?y:g.resolve(y)})},Promise.resolve(!1)).then(function(t){!0===t&&(n=!1);return n})})},e.functions.filter=function(k,f){return e.standardFunctionAsync(k,f,function(b,d,q){h.pcCheck(q,2,2);var m=l(k,q[1]),n=r(q[0]),t=[];return n.reduce(function(z,w,y){return z.then(function(x){0<y&&!0===x&&t.push(n[y-
1]);x=m(w);return g.isPromiseLike(x)?x:g.resolve(x)})},Promise.resolve(!1)).then(function(z){!0===z&&0<n.length&&t.push(n[n.length-1]);return t})})},e.functions.reduce=function(k,f){return e.standardFunctionAsync(k,f,function(b,d,q){h.pcCheck(q,2,3);var m=l(k,q[1]);b=r(q[0]);d=null;if(2<q.length)q=h.defaultUndefined(q[2],null),d=b.reduce(function(n,t){return n.then(function(z){if(void 0===z||z===h.voidOperation)z=null;z=m(z,t);return g.isPromiseLike(z)?z:g.resolve(z)})},Promise.resolve(q));else{if(0===
b.length)return null;d=b.reduce(function(n,t,z){return 1>=z?(n=m(n,t),g.isPromiseLike(n)?n:g.resolve(n)):n.then(function(w){if(void 0===w||w===h.voidOperation)w=null;w=m(w,t);return g.isPromiseLike(w)?w:g.resolve(w)})})}return d.then(function(n){return void 0!==n&&n!==h.voidOperation?n:null})})},e.functions.map=function(k,f){return e.standardFunctionAsync(k,f,function(b,d,q){h.pcCheck(q,2,2);var m=l(k,q[1]),n=r(q[0]),t=[];return n.reduce(function(z,w,y){return z.then(function(x){0<y&&(void 0!==x&&
x!==h.voidOperation?t.push(x):t.push(null));x=m(w);return g.isPromiseLike(x)?x:g.resolve(x)})},Promise.resolve()).then(function(z){0<n.length&&(void 0!==z&&z!==h.voidOperation?t.push(z):t.push(null));return t})})})}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,B,a,c,h){function g(f){f=new Date(f.getTime());var b=f.getFullYear(),d=new Date(0);d.setFullYear(b+1,0,4);d.setHours(0,0,0,0);d=e(d);var q=
new Date(0);q.setFullYear(b,0,4);q.setHours(0,0,0,0);q=e(q);return f.getTime()>=d.getTime()?b+1:f.getTime()>=q.getTime()?b:b-1}function e(f){f=new Date(f.getTime());var b=f.getDay();b=(1>b?7:0)+b-1;f.setDate(f.getDate()-b);f.setHours(0,0,0,0);return f}function l(f){return null===f?f:isNaN(f.getTime())?null:f}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;var r=[0,31,59,90,120,151,181,212,243,273,304,334],k=[0,31,60,91,121,152,182,213,244,274,305,335];B.registerFunctions=
function(f,b){f.today=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,0,0);m=new Date;m.setHours(0,0,0,0);return m})};f.now=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,0,0);return new Date})};f.timestamp=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,0,0);m=new Date;return m=new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};f.toutc=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,
1,1);m=a.toDate(t[0]);return null===m?null:new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};f.tolocal=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?null:c.DateTime.utc(m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()).toJSDate()})};f.day=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);
return null===m?NaN:m.getDate()})};f.month=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMonth()})};f.year=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getFullYear()})};f.hour=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getHours()})};f.second=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?
NaN:m.getSeconds()})};f.millisecond=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMilliseconds()})};f.minute=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getMinutes()})};f.week=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,2);m=a.toDate(t[0]);if(null===m)return NaN;t=a.toNumber(a.defaultUndefined(t[1],0));if(0>t||6<t)throw Error("Invalid Parameter");n=m.getDate();var z=m.getMonth(),
w=m.getFullYear();m=m.getDay();n=n+(0!==w%4||0===w%100&&0!==w%400?r:k)[z]-1;z=Math.floor(n/7);return m-t+(0>m-t?7:0)<n-7*z?z+1:z})};f.weekday=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:m.getDay()})};f.isoweekday=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);if(null===m)return NaN;m=m.getDay();0===m&&(m=7);return m})};f.isomonth=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===
m?NaN:m.getMonth()+1})};f.isoweek=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);n=a.toDate(t[0]);if(null===n)return NaN;m=e(n).getTime();n=g(n);t=new Date(0);t.setFullYear(n,0,4);t.setHours(0,0,0,0);n=e(t);m-=n.getTime();return Math.round(m/6048E5)+1})};f.isoyear=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,1,1);m=a.toDate(t[0]);return null===m?NaN:g(m)})};f.date=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,0,7);if(3===t.length)return l(new Date(a.toNumber(t[0]),
a.toNumber(t[1]),a.toNumber(t[2]),0,0,0,0));if(4===t.length)return l(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),0,0,0));if(5===t.length)return l(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),0,0));if(6===t.length)return l(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),0));if(7===t.length)return l(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),
a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),a.toNumber(t[6])));if(2===t.length){m=a.toString(t[1]);if(""===m)return null;m=a.standardiseDateFormat(m);n=void 0;n="X"===m?c.DateTime.fromSeconds(a.toNumber(t[0])):"x"===m?c.DateTime.fromMillis(a.toNumber(t[0])):c.DateTime.fromFormat(a.toString(t[0]),m,{locale:h.locale,numberingSystem:"latn"});return n.isValid?n.toJSDate():null}if(1===t.length){if(a.isString(t[0])){if(""===t[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===
/^[0-9][0-9][0-9][0-9]$/.test(t[0]))return a.toDate(t[0]+"-01-01")}m=a.toNumber(t[0]);return!1===isNaN(m)?l(new Date(m)):a.toDate(t[0])}if(0===t.length)return new Date})};f.datediff=function(d,q){return b(d,q,function(m,n,t){a.pcCheck(t,2,3);m=a.toDateTime(t[0]);n=a.toDateTime(t[1]);if(null===m||null===n)return NaN;switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":return m.diff(n,"days").days;case "months":case "month":return m.diff(n,"months").months;case "minutes":case "minute":case "m":return"M"===
t[2]?m.diff(n,"months").months:m.diff(n,"minutes").minutes;case "seconds":case "second":case "s":return m.diff(n,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return m.diff(n).milliseconds;case "hours":case "hour":case "h":return m.diff(n,"hours").hours;case "years":case "year":case "y":return m.diff(n,"years").years;default:return m.diff(n).milliseconds}})};f.dateadd=function(d,q){return b(d,q,function(m,n,t){var z;a.pcCheck(t,2,3);m=a.toDateTime(t[0]);if(null===m)return null;
n=a.toNumber(t[1]);if(isNaN(n))return m.toJSDate();var w="milliseconds";switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":w="days";n=a.absRound(n);break;case "months":case "month":w="months";n=a.absRound(n);break;case "minutes":case "minute":case "m":w="M"===t[2]?"months":"minutes";break;case "seconds":case "second":case "s":w="seconds";break;case "milliseconds":case "millisecond":case "ms":w="milliseconds";break;case "hours":case "hour":case "h":w="hours";break;case "years":case "year":case "y":w=
"years"}return m.plus((z={},z[w]=n,z)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){function m(n){return n&&(n instanceof c||"object"===typeof n&&"FeatureSetReader"===n.type)}
Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(n,t){n.ringisclockwise=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=[];if(null===A[0])return!1;if(g.isArray(A[0])){var v=0;for(A=A[0];v<A.length;v++)if(x=A[v],x instanceof k)y.push([x.x,x.y]);else throw Error("Invalid Argument");}else if(A[0]instanceof h)y=A[0]._elements;else if(g.isImmutableArray(A[0])){v=0;for(var u=A[0].toArray();v<u.length;v++)if(x=u[v],x instanceof k)y.push([x.x,
x.y]);else throw Error("Invalid Argument");0<y.length&&(A[0].get(0),A[0].get(0))}else throw Error("Invalid Argument");return 3>y.length?!1:(new f({rings:[],spatialReference:{wkid:4326}})).isClockwise(y)})};n.polygon=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=null;if(A[0]instanceof a){if(y=g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference),!1===y instanceof f)throw Error("Illegal Parameter");}else y=A[0]instanceof f?q.fromJson(A[0].toJson()):g.fixSpatialReference(new f(JSON.parse(A[0])),
z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.polyline=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=null;if(A[0]instanceof a){if(y=g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference),!1===y instanceof b)throw Error("Illegal Parameter");}else y=A[0]instanceof b?q.fromJson(A[0].toJson()):
g.fixSpatialReference(new b(JSON.parse(A[0])),z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.point=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=null;if(A[0]instanceof a){if(y=g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference),!1===y instanceof k)throw Error("Illegal Parameter");
}else y=A[0]instanceof k?q.fromJson(A[0].toJson()):g.fixSpatialReference(new k(JSON.parse(A[0])),z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.multipoint=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=null;if(A[0]instanceof a){if(y=g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference),
!1===y instanceof r)throw Error("Illegal Parameter");}else y=A[0]instanceof r?q.fromJson(A[0].toJson()):g.fixSpatialReference(new r(JSON.parse(A[0])),z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.extent=function(z,w){return t(z,w,function(y,x,A){A=g.autoCastFeatureToGeometry(A);g.pcCheck(A,1,1);y=null;A[0]instanceof a?
y=g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference):A[0]instanceof k?(y={xmin:A[0].x,ymin:A[0].y,xmax:A[0].x,ymax:A[0].y,spatialReference:A[0].spatialReference.toJson()},A=A[0],A.hasZ?(y.zmin=A.z,y.zmax=A.z):A.hasM&&(y.mmin=A.m,y.mmax=A.m),y=q.fromJson(y)):y=A[0]instanceof f?q.fromJson(A[0].getExtent().toJson()):A[0]instanceof b?q.fromJson(A[0].getExtent().toJson()):A[0]instanceof r?q.fromJson(A[0].getExtent().toJson()):A[0]instanceof e?q.fromJson(A[0].toJson()):g.fixSpatialReference(new e(JSON.parse(A[0])),
z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.geometry=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,1,1);y=null;if(null===A[0])return null;y=m(A[0])?g.fixSpatialReference(A[0].geometry(),z.spatialReference):A[0]instanceof a?g.fixSpatialReference(c.parseGeometryFromDictionary(A[0]),z.spatialReference):g.fixSpatialReference(q.fromJson(JSON.parse(A[0])),
z.spatialReference);if(null!==y&&!1===y.spatialReference.equals(z.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g.fixNullGeometry(y)})};n.setgeometry=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,2,2);if(m(A[0])){if(!0===A[0].immutable)throw Error("Feature is Immutable");if(A[1]instanceof l||null===A[1])A[0]._geometry=A[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return g.voidOperation})};
n.feature=function(z,w){return t(z,w,function(y,x,A){if(0===A.length)throw Error("Missing Parameters");y=null;if(1===A.length)if(g.isString(A[0]))y=c.fromJson(JSON.parse(A[0]));else if(m(A[0]))y=c.createFromArcadeFeature(A[0]);else if(A[0]instanceof l)y=c.createFromGraphicLikeObject(A[0],null,null);else if(A[0]instanceof a)y=A[0].hasField("geometry")?A[0].field("geometry"):null,x=A[0].hasField("attributes")?A[0].field("attributes"):null,null!==y&&y instanceof a&&(y=c.parseGeometryFromDictionary(y)),
null!==x&&(x=c.parseAttributesFromDictionary(x)),y=c.createFromGraphicLikeObject(y,x,null);else throw Error("Illegal Argument");else{if(2===A.length){x=y=null;if(null!==A[0])if(A[0]instanceof l)y=A[0];else if(y instanceof a)y=c.parseGeometryFromDictionary(A[0]);else throw Error("Illegal Argument");if(null!==A[1])if(A[1]instanceof a)x=c.parseAttributesFromDictionary(A[1]);else throw Error("Illegal Argument");}else{y=null;x={};if(null!==A[0])if(A[0]instanceof l)y=A[0];else if(y instanceof a)y=c.parseGeometryFromDictionary(A[0]);
else throw Error("Illegal Argument");for(var v=1;v<A.length;v+=2){var u=g.toString(A[v]),C=A[v+1];if(null===C||void 0===C||g.isString(C)||isNaN(C)||g.isDate(C)||g.isNumber(C)||g.isBoolean(C)){if(g.isFunctionParameter(C)||!1===g.isSimpleType(C))throw Error("Illegal Argument");x[u]=C===g.voidOperation?null:C}else throw Error("Illegal Argument");}}y=c.createFromGraphicLikeObject(y,x,null)}y._geometry=g.fixSpatialReference(y.geometry(),z.spatialReference);y.immutable=!1;return y})};n.dictionary=function(z,
w){return t(z,w,function(y,x,A){if(0===A.length)return A=new a,A.immutable=!1,A;if(1===A.length&&g.isString(A[0]))try{var v=JSON.parse(A[0]),u=a.convertObjectToArcadeDictionary(v,!1);u.immutable=!1;return u}catch(C){throw Error("Missing Parameters or Illegal Json");}if(0!==A.length%2)throw Error("Missing Parameters");y={};for(x=0;x<A.length;x+=2)if(v=g.toString(A[x]),u=A[x+1],null===u||void 0===u||g.isString(u)||isNaN(u)||g.isDate(u)||g.isNumber(u)||g.isBoolean(u)||g.isArray(u)||g.isImmutableArray(u)){if(g.isFunctionParameter(u))throw Error("Illegal Argument");
y[v]=u===g.voidOperation?null:u}else throw Error("Illegal Argument");A=new a(y);A.immutable=!1;return A})};n.haskey=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,2,2);y=g.toString(A[1]);if(m(A[0])||A[0]instanceof a)return A[0].hasField(y);throw Error("Illegal Argument");})};n.indexof=function(z,w){return t(z,w,function(y,x,A){g.pcCheck(A,2,2);y=A[1];if(g.isArray(A[0])){for(x=0;x<A[0].length;x++)if(g.equalityTest(y,A[0][x]))return x;return-1}if(g.isImmutableArray(A[0])){var v=A[0].length();
for(x=0;x<v;x++)if(g.equalityTest(y,A[0].get(x)))return x;return-1}throw Error("Illegal Argument");})};n.angle=function(z,w){return t(z,w,function(y,x,A){A=g.autoCastFeatureToGeometry(A);g.pcCheck(A,2,3);if(!(A[0]instanceof k))throw Error("Illegal Argument");if(!(A[1]instanceof k))throw Error("Illegal Argument");if(2<A.length&&!(A[2]instanceof k))throw Error("Illegal Argument");return 2===A.length?d.angle2D(A[0],A[1]):d.angleBetween2D(A[0],A[1],A[2])})};n.bearing=function(z,w){return t(z,w,function(y,
x,A){A=g.autoCastFeatureToGeometry(A);g.pcCheck(A,2,3);if(!(A[0]instanceof k))throw Error("Illegal Argument");if(!(A[1]instanceof k))throw Error("Illegal Argument");if(2<A.length&&!(A[2]instanceof k))throw Error("Illegal Argument");return 2===A.length?d.bearing2D(A[0],A[1]):d.bearingBetween2D(A[0],A[1],A[2])})};n.isselfintersecting=function(z,w){return t(z,w,function(y,x,A){A=g.autoCastFeatureToGeometry(A);g.pcCheck(A,1,1);y=A[0];if(y instanceof f)return y.isSelfIntersecting(y);if(y instanceof b)return y=
y.paths,d.pathsSelfIntersecting(y);if(y instanceof r)for(x=y.points,A=0;A<x.length;A++)for(var v=0;v<x.length;v++)if(v!==A){for(var u=!0,C=0;C<x[A].length;C++)if(x[A][C]!==x[v][C]){u=!1;break}if(!0===u)return!0}return g.isArray(y)||g.isImmutableArray(y)?(y=g.autoCastArrayOfPointsToPolyline(y,z.spatialReference),null!==y&&(y=y.paths),d.pathsSelfIntersecting(y)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,B,a){function c(f,b,d){var q=
{x:0,y:0};b&&(q.z=0);d&&(q.m=0);for(var m=0,n=f[0],t=0;t<f.length;t++){var z=f[t];a:if(z.length!==n.length)var w=!1;else{for(w=0;w<z.length;w++)if(z[w]!==n[w]){w=!1;break a}w=!0}if(!1===w){w=h(n,z,b);var y=z,x=b,A=d,v={x:(n[0]+y[0])/2,y:(n[1]+y[1])/2};x&&(v.z=(n[2]+y[2])/2);x&&A?v.m=(n[3]+y[3])/2:A&&(v.m=(n[2]+y[2])/2);n=v;n.x*=w;n.y*=w;q.x+=n.x;q.y+=n.y;b&&(n.z*=w,q.z+=n.z);d&&(n.m*=w,q.m+=n.m);m+=w;n=z}}0<m?(q.x/=m,q.y/=m,b&&(q.z/=m),d&&(q.m/=m)):(q.x=f[0][0],q.y=f[0][1],b&&(q.z=f[0][2]),d&&b?q.m=
f[0][3]:d&&(q.m=f[0][2]));return q}function h(f,b,d){var q=b[0]-f[0];f=b[1]-f[1];return d?(b=b[2]-b[2],Math.sqrt(q*q+f*f+b*b)):Math.sqrt(q*q+f*f)}function g(f,b,d){for(void 0===d&&(d=0);f<d;)f+=b;for(d+=b;f>=d;)f-=b;return f}function e(f,b){return Math.atan2(b.y-f.y,b.x-f.x)}function l(f,b,d){var q=f.x-b.x;f=f.y-b.y;var m=d.x-b.x;b=d.y-b.y;return Math.atan2(q*b-m*f,q*m+f*b)}function r(f,b,d,q,m){var n=f[0];f=f[1];var t=b[0];b=b[1];var z=d[0],w=d[1];d=q[0]-z;z=n-z;var y=t-n;q=q[1]-w;w=f-w;var x=b-
f,A=q*y-d*x;if(0===A)return!1;d=(d*w-q*z)/A;z=(y*w-x*z)/A;return 0<=d&&1>=d&&0<=z&&1>=z?(m&&(m[0]=n+d*(t-n),m[1]=f+d*(b-f)),!0):!1}Object.defineProperty(B,"__esModule",{value:!0});B.pathsSelfIntersecting=B.bearingBetween2D=B.angleBetween2D=B.angleBetweenRad=B.bearing2D=B.angle2D=B.angleRad=B.centroidMultiPoint=B.centroidPolyline=void 0;B.centroidPolyline=function(f){for(var b={x:0,y:0,spatialReference:f.spatialReference.toJson()},d={x:0,y:0,spatialReference:f.spatialReference.toJson()},q=0,m=0,n=
0;n<f.paths.length;n++)if(0!==f.paths[n].length){var t=f.paths[n];var z=!0===f.hasZ;if(1>=t.length)t=0;else{for(var w=0,y=1;y<t.length;y++)w+=h(t[y-1],t[y],z);t=w}0===t?(z=c(f.paths[n],!0===f.hasZ,!0===f.hasM),b.x+=z.x,b.y+=z.y,!0===f.hasZ&&(b.z+=z.z),!0===f.hasM&&(b.m+=z.m),++q):(z=c(f.paths[n],!0===f.hasZ,!0===f.hasM),d.x+=z.x*t,d.y+=z.y*t,!0===f.hasZ&&(d.z+=z.z*t),!0===f.hasM&&(d.m+=z.m*t),m+=t)}return 0<m?(d.x/=m,d.y/=m,!0===f.hasZ&&(d.z/=m),!0===f.hasM&&(d.m/=m),new a(d)):0<q?(b.x/=q,b.y/=q,
!0===f.hasZ&&(d.z/=q),!0===f.hasM&&(b.m/=q),new a(b)):null};B.centroidMultiPoint=function(f){if(0===f.points.length)return null;for(var b=0,d=0,q=0,m=0,n=0;n<f.points.length;n++){var t=f.getPoint(n);!0===t.hasZ&&(q+=t.z);!0===t.hasM&&(m+=t.m);b+=t.x;d+=t.y;m+=t.m}b={x:b/f.points.length,y:d/f.points.length,spatialReference:null};b.spatialReference=f.spatialReference.toJson();!0===f.hasZ&&(b.z=q/f.points.length);!0===f.hasM&&(b.m=m/f.points.length);return new a(b)};B.angleRad=e;B.angle2D=function(f,
b){return g(e(f,b),2*Math.PI)*(180/Math.PI)};B.bearing2D=function(f,b){return g(Math.PI/2-e(f,b),2*Math.PI)*(180/Math.PI)};B.angleBetweenRad=l;B.angleBetween2D=function(f,b,d){return g(l(f,b,d),2*Math.PI)*(180/Math.PI)};B.bearingBetween2D=function(f,b,d){return g(-1*l(f,b,d),2*Math.PI)*(180/Math.PI)};var k=[0,0];B.pathsSelfIntersecting=function(f){for(var b=0;b<f.length;b++){for(var d=f[b],q=0;q<d.length-1;q++)for(var m=d[q],n=d[q+1],t=b+1;t<f.length;t++)for(var z=0;z<f[t].length-1;z++){var w=f[t][z],
y=f[t][z+1],x=r(m,n,w,y,k);if(x&&!(k[0]===m[0]&&k[1]===m[1]||k[0]===w[0]&&k[1]===w[1]||k[0]===n[0]&&k[1]===n[1]||k[0]===y[0]&&k[1]===y[1]))return!0}z=d.length;if(!(3>z))for(q=0;q<=z-2;q++)for(m=d[q],n=d[q+1],t=q+2;t<=z-2;t++)if(w=d[t],y=d[t+1],(x=r(m,n,w,y,k))&&!(k[0]===m[0]&&k[1]===m[1]||k[0]===w[0]&&k[1]===w[1]||k[0]===n[0]&&k[1]===n[1]||k[0]===y[0]&&k[1]===y[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d){function q(n){return 0===a.version.indexOf("4.")?f.fromExtent(n):new f({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=B.setGeometryEngine=void 0;var m=null;B.setGeometryEngine=function(n){m=n};B.registerFunctions=function(n,t){function z(w){h.pcCheck(w,2,2);if(!(w[0]instanceof l&&w[1]instanceof l||w[0]instanceof l&&
null===w[1]||w[1]instanceof l&&null===w[0]||null===w[0]&&null===w[1]))throw Error("Illegal Argument");}n.disjoint=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!0:m.disjoint(v[0],v[1])})};n.intersects=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!1:m.intersects(v[0],v[1])})};n.touches=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);
return null===v[0]||null===v[1]?!1:m.touches(v[0],v[1])})};n.crosses=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!1:m.crosses(v[0],v[1])})};n.within=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!1:m.within(v[0],v[1])})};n.contains=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!1:m.contains(v[0],v[1])})};
n.overlaps=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?!1:m.overlaps(v[0],v[1])})};n.equals=function(w,y){return t(w,y,function(x,A,v){h.pcCheck(v,2,2);return v[0]===v[1]?!0:v[0]instanceof l&&v[1]instanceof l?m.equals(v[0],v[1]):h.isDate(v[0])&&h.isDate(v[1])?v[0].getTime()===v[1].getTime():!1})};n.relate=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,3,3);if(v[0]instanceof l&&v[1]instanceof
l)return m.relate(v[0],v[1],h.toString(v[2]));if(v[0]instanceof l&&null===v[1]||v[1]instanceof l&&null===v[0]||null===v[0]&&null===v[1])return!1;throw Error("Illegal Argument");})};n.intersection=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]||null===v[1]?null:m.intersect(v[0],v[1])})};n.union=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);x=[];if(0===v.length)throw Error("Function called with wrong number of Parameters");
if(1===v.length)if(h.isArray(v[0]))for(v=h.autoCastFeatureToGeometry(v[0]),A=0;A<v.length;A++){if(null!==v[A]){if(!(v[A]instanceof l))throw Error("Illegal Argument");x.push(v[A])}}else if(h.isImmutableArray(v[0]))for(v=h.autoCastFeatureToGeometry(v[0].toArray()),A=0;A<v.length;A++){if(null!==v[A]){if(!(v[A]instanceof l))throw Error("Illegal Argument");x.push(v[A])}}else{if(v[0]instanceof l)return h.fixSpatialReference(c.cloneGeometry(v[0]),w.spatialReference);if(null===v[0])return null;throw Error("Illegal Argument");
}else for(A=0;A<v.length;A++)if(null!==v[A]){if(!(v[A]instanceof l))throw Error("Illegal Argument");x.push(v[A])}return 0===x.length?null:m.union(x)})};n.difference=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null!==v[0]&&null===v[1]?c.cloneGeometry(v[0]):null===v[0]?null:m.difference(v[0],v[1])})};n.symmetricdifference=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);z(v);return null===v[0]&&null===v[1]?null:null===v[0]?c.cloneGeometry(v[1]):
null===v[1]?c.cloneGeometry(v[0]):m.symmetricDifference(v[0],v[1])})};n.clip=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,2);if(!(v[1]instanceof e)&&null!==v[1])throw Error("Illegal Argument");if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");return null===v[1]?null:m.clip(v[0],v[1])})};n.cut=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,2);if(!(v[1]instanceof b)&&null!==v[1])throw Error("Illegal Argument");
if(null===v[0])return[];if(!(v[0]instanceof l))throw Error("Illegal Argument");return null===v[1]?[c.cloneGeometry(v[0])]:m.cut(v[0],v[1])})};n.area=function(w,y){return t(w,y,function(x,A,v){h.pcCheck(v,1,2);v=h.autoCastFeatureToGeometry(v);if(null===v[0])return 0;if(h.isArray(v[0])||h.isImmutableArray(v[0]))return x=h.autoCastArrayOfPointsToPolygon(v[0],w.spatialReference),null===x?0:m.planarArea(x,c.convertSquareUnitsToCode(h.defaultUndefined(v[1],-1)));if(!(v[0]instanceof l))throw Error("Illegal Argument");
return m.planarArea(v[0],c.convertSquareUnitsToCode(h.defaultUndefined(v[1],-1)))})};n.areageodetic=function(w,y){return t(w,y,function(x,A,v){h.pcCheck(v,1,2);v=h.autoCastFeatureToGeometry(v);if(null===v[0])return 0;if(h.isArray(v[0])||h.isImmutableArray(v[0]))return x=h.autoCastArrayOfPointsToPolygon(v[0],w.spatialReference),null===x?0:m.geodesicArea(x,c.convertSquareUnitsToCode(h.defaultUndefined(v[1],-1)));if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.geodesicArea(v[0],c.convertSquareUnitsToCode(h.defaultUndefined(v[1],
-1)))})};n.length=function(w,y){return t(w,y,function(x,A,v){h.pcCheck(v,1,2);v=h.autoCastFeatureToGeometry(v);if(null===v[0])return 0;if(h.isArray(v[0])||h.isImmutableArray(v[0]))return x=h.autoCastArrayOfPointsToPolyline(v[0],w.spatialReference),null===x?0:m.planarLength(x,c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)));if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.planarLength(v[0],c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)))})};n.length3d=function(w,y){return t(w,
y,function(x,A,v){h.pcCheck(v,1,2);v=h.autoCastFeatureToGeometry(v);if(null===v[0])return 0;if(h.isArray(v[0])||h.isImmutableArray(v[0]))return x=h.autoCastArrayOfPointsToPolyline(v[0],w.spatialReference),null===x?0:m.planarLength(x,c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)));if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.planarLength(v[0],c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)))})};n.lengthgeodetic=function(w,y){return t(w,y,function(x,A,v){h.pcCheck(v,
1,2);v=h.autoCastFeatureToGeometry(v);if(null===v[0])return 0;if(h.isArray(v[0])||h.isImmutableArray(v[0]))return x=h.autoCastArrayOfPointsToPolyline(v[0],w.spatialReference),null===x?0:m.geodesicLength(x,c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)));if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.geodesicLength(v[0],c.convertLinearUnitsToCode(h.defaultUndefined(v[1],-1)))})};n.distance=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,
2,3);x=v[0];if(h.isArray(v[0])||h.isImmutableArray(v[0]))x=h.autoCastArrayOfPointsToMultiPoint(v[0],w.spatialReference);A=v[1];if(h.isArray(v[1])||h.isImmutableArray(v[1]))A=h.autoCastArrayOfPointsToMultiPoint(v[1],w.spatialReference);if(!(x instanceof l))throw Error("Illegal Argument");if(!(A instanceof l))throw Error("Illegal Argument");return m.distance(x,A,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1)))})};n.distancegeodetic=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);
h.pcCheck(v,2,3);x=v[0];A=v[1];if(!(x instanceof k))throw Error("Illegal Argument");if(!(A instanceof k))throw Error("Illegal Argument");var u=new b({paths:[],spatialReference:x.spatialReference});u.addPath([x,A]);return m.geodesicLength(u,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1)))})};n.densify=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,3);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");x=h.toNumber(v[1]);
if(isNaN(x))throw Error("Illegal Argument");if(0>=x)throw Error("Illegal Argument");return v[0]instanceof f||v[0]instanceof b?m.densify(v[0],x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1))):v[0]instanceof e?m.densify(q(v[0]),x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1))):v[0]})};n.densifygeodetic=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,3);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");x=h.toNumber(v[1]);
if(isNaN(x))throw Error("Illegal Argument");if(0>=x)throw Error("Illegal Argument");return v[0]instanceof f||v[0]instanceof b?m.geodesicDensify(v[0],x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1))):v[0]instanceof e?m.geodesicDensify(q(v[0]),x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1))):v[0]})};n.generalize=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,4);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");
x=h.toNumber(v[1]);if(isNaN(x))throw Error("Illegal Argument");return m.generalize(v[0],x,h.toBoolean(h.defaultUndefined(v[2],!0)),c.convertLinearUnitsToCode(h.defaultUndefined(v[3],-1)))})};n.buffer=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,3);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");x=h.toNumber(v[1]);if(isNaN(x))throw Error("Illegal Argument");return 0===x?c.cloneGeometry(v[0]):m.buffer(v[0],x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],
-1)))})};n.buffergeodetic=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,3);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");x=h.toNumber(v[1]);if(isNaN(x))throw Error("Illegal Argument");return 0===x?c.cloneGeometry(v[0]):m.geodesicBuffer(v[0],x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1)))})};n.offset=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,6);if(null===v[0])return null;
if(!(v[0]instanceof f||v[0]instanceof b))throw Error("Illegal Argument");x=h.toNumber(v[1]);if(isNaN(x))throw Error("Illegal Argument");A=h.toNumber(h.defaultUndefined(v[4],10));if(isNaN(A))throw Error("Illegal Argument");var u=h.toNumber(h.defaultUndefined(v[5],0));if(isNaN(u))throw Error("Illegal Argument");return m.offset(v[0],x,c.convertLinearUnitsToCode(h.defaultUndefined(v[2],-1)),h.toString(h.defaultUndefined(v[3],"round")).toLowerCase(),A,u)})};n.rotate=function(w,y){return t(w,y,function(x,
A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,2,3);x=v[0];if(null===x)return null;if(!(x instanceof l))throw Error("Illegal Argument");x instanceof e&&(x=f.fromExtent(x));A=h.toNumber(v[1]);if(isNaN(A))throw Error("Illegal Argument");v=h.defaultUndefined(v[2],null);if(null===v)return m.rotate(x,A);if(v instanceof k)return m.rotate(x,A,v);throw Error("Illegal Argument");})};n.centroid=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,1,1);if(null===v[0])return null;
x=v[0];if(h.isArray(v[0])||h.isImmutableArray(v[0]))x=h.autoCastArrayOfPointsToMultiPoint(v[0],w.spatialReference);if(null===x)return null;if(!(x instanceof l))throw Error("Illegal Argument");return x instanceof k?h.fixSpatialReference(c.cloneGeometry(v[0]),w.spatialReference):x instanceof f?x.getCentroid():x instanceof b?g.centroidPolyline(x):x instanceof r?g.centroidMultiPoint(x):x instanceof e?x.getCenter():null})};n.multiparttosinglepart=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);
h.pcCheck(v,1,1);A=[];if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");if(v[0]instanceof k||v[0]instanceof e)return[h.fixSpatialReference(c.cloneGeometry(v[0]),w.spatialReference)];x=m.simplify(v[0]);if(x instanceof f){A=[];var u=[];for(v=0;v<x.rings.length;v++)if(x.isClockwise(x.rings[v])){var C=d.fromJson({rings:[x.rings[v]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJson()});A.push(C)}else u.push({ring:x.rings[v],pt:x.getPoint(v,0)});
for(x=0;x<u.length;x++)for(v=0;v<A.length;v++)if(A[v].contains(u[x].pt)){A[v].addRing(u[x].ring);break}return A}if(x instanceof b){A=[];for(v=0;v<x.paths.length;v++)u=d.fromJson({paths:[x.paths[v]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJson()}),A.push(u);return A}if(v[0]instanceof r){x=h.fixSpatialReference(c.cloneGeometry(v[0]),w.spatialReference);for(v=0;v<x.points.length;v++)A.push(x.getPoint(v));return A}return null})};n.issimple=function(w,y){return t(w,y,function(x,
A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,1,1);if(null===v[0])return!0;if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.isSimple(v[0])})};n.simplify=function(w,y){return t(w,y,function(x,A,v){v=h.autoCastFeatureToGeometry(v);h.pcCheck(v,1,1);if(null===v[0])return null;if(!(v[0]instanceof l))throw Error("Illegal Argument");return m.simplify(v[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,B,a,c){Object.defineProperty(B,
"__esModule",{value:!0});B.cloneGeometry=B.sameGeomType=B.convertLinearUnitsToCode=B.shapeExtent=B.convertSquareUnitsToCode=void 0;B.convertSquareUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h)return h;h=h.toLowerCase();h=h.replace(/\s/g,"");h=h.replace(/-/g,"");switch(h){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};B.shapeExtent=function(h){if(null===h)return null;switch(h.type){case "polygon":case "multipoint":case "polyline":return h.extent;
case "point":return new a({xmin:h.x,ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference});case "extent":return h}return null};B.convertLinearUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h)return h;h=h.toLowerCase();h=h.replace(/\s/g,"");h=h.replace(/-/g,"");switch(h){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};B.sameGeomType=function(h,g){return h===g||"point"===h&&"esriGeometryPoint"===g||"polyline"===h&&"esriGeometryPolyline"===g||"polygon"===h&&"esriGeometryPolygon"===g||"extent"===h&&"esriGeometryEnvelope"===
g||"multipoint"===h&&"esriGeometryMultipoint"===g||"point"===g&&"esriGeometryPoint"===h||"polyline"===g&&"esriGeometryPolyline"===h||"polygon"===g&&"esriGeometryPolygon"===h||"extent"===g&&"esriGeometryEnvelope"===h||"multipoint"===g&&"esriGeometryMultipoint"===h?!0:!1};B.cloneGeometry=function(h){if(null===h)return null;var g=c.fromJson(h.toJson());h.getCacheValue("_geVersion")&&g.setCacheValue("_geVersion",h.getCacheValue("_geVersion"));return g}})},"esri/arcade/functions/maths":function(){define(["require",
"exports","../languageUtils","dojo/number"],function(D,B,a,c){function h(g,e,l){if("undefined"===typeof l||0===+l)return Math[g](e);e=+e;l=+l;if(isNaN(e)||"number"!==typeof l||0!==l%1)return NaN;e=e.toString().split("e");e=Math[g](+(e[0]+"e"+(e[1]?+e[1]-l:-l)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+l:l))}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(g,e){function l(r,k,f){r=a.toNumber(r);return isNaN(r)?r:isNaN(k)||isNaN(f)||
k>f?NaN:r<k?k:r>f?f:r}g.number=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,2);f=d[0];return a.isNumber(f)?f:null===f?0:a.isDate(f)||a.isBoolean(f)?Number(f):a.isArray(f)?NaN:""===f||void 0===f?Number(f):a.isString(f)?void 0!==d[1]?(d=a.multiReplace(d[1],"\u2030",""),d=a.multiReplace(d,"\u00a4",""),c.parse(f,{pattern:d})):Number(f.trim()):Number(f)})};g.abs=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.abs(a.toNumber(d[0]))})};g.acos=function(r,k){return e(r,
k,function(f,b,d){a.pcCheck(d,1,1);return Math.acos(a.toNumber(d[0]))})};g.asin=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.asin(a.toNumber(d[0]))})};g.atan=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.atan(a.toNumber(d[0]))})};g.atan2=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,2,2);return Math.atan2(a.toNumber(d[0]),a.toNumber(d[1]))})};g.ceil=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,2);return 2===d.length?(f=a.toNumber(d[1]),
isNaN(f)&&(f=0),h("ceil",a.toNumber(d[0]),-1*f)):Math.ceil(a.toNumber(d[0]))})};g.round=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,2);return 2===d.length?(f=a.toNumber(d[1]),isNaN(f)&&(f=0),h("round",a.toNumber(d[0]),-1*f)):Math.round(a.toNumber(d[0]))})};g.floor=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,2);return 2===d.length?(f=a.toNumber(d[1]),isNaN(f)&&(f=0),h("floor",a.toNumber(d[0]),-1*f)):Math.floor(a.toNumber(d[0]))})};g.cos=function(r,k){return e(r,k,function(f,
b,d){a.pcCheck(d,1,1);return Math.cos(a.toNumber(d[0]))})};g.isnan=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};g.exp=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.exp(a.toNumber(d[0]))})};g.log=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.log(a.toNumber(d[0]))})};g.pow=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,2,2);return Math.pow(a.toNumber(d[0]),a.toNumber(d[1]))})};g.random=
function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,0,0);return Math.random()})};g.sin=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.sin(a.toNumber(d[0]))})};g.sqrt=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.sqrt(a.toNumber(d[0]))})};g.tan=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return Math.tan(a.toNumber(d[0]))})};g.defaultvalue=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,2,2);return null===d[0]||""===d[0]||
void 0===d[0]?d[1]:d[0]})};g.isempty=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};g["boolean"]=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,1,1);return a.toBoolean(d[0])})};g.constrain=function(r,k){return e(r,k,function(f,b,d){a.pcCheck(d,3,3);f=a.toNumber(d[1]);b=a.toNumber(d[2]);if(a.isArray(d[0])){var q=[],m=0;for(d=d[0];m<d.length;m++)q.push(l(d[m],f,b));return q}if(a.isImmutableArray(d[0])){q=[];for(m=0;m<d[0].length();m++)q.push(l(d[0].get(m),
f,b));return q}return l(d[0],f,b)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(D,B,a,c){function h(g,e,l,r){if(1===r.length){if(a.isArray(r[0]))return c.calculateStat(g,r[0],-1);if(a.isImmutableArray(r[0]))return c.calculateStat(g,r[0].toArray(),-1)}return c.calculateStat(g,r,-1)}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(g,e){g.stdev=function(l,r){return e(l,r,
function(k,f,b){return h("stdev",k,f,b)})};g.variance=function(l,r){return e(l,r,function(k,f,b){return h("variance",k,f,b)})};g.average=function(l,r){return e(l,r,function(k,f,b){return h("mean",k,f,b)})};g.mean=function(l,r){return e(l,r,function(k,f,b){return h("mean",k,f,b)})};g.sum=function(l,r){return e(l,r,function(k,f,b){return h("sum",k,f,b)})};g.min=function(l,r){return e(l,r,function(k,f,b){return h("min",k,f,b)})};g.max=function(l,r){return e(l,r,function(k,f,b){return h("max",k,f,b)})};
g.distinct=function(l,r){return e(l,r,function(k,f,b){return h("distinct",k,f,b)})};g.count=function(l,r){return e(l,r,function(k,f,b){a.pcCheck(b,1,1);if(a.isArray(b[0])||a.isString(b[0]))return b[0].length;if(a.isImmutableArray(b[0]))return b[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,B,a){function c(g){for(var e=0,l=0;l<g.length;l++)e+=g[l];return e/g.length}function h(g){for(var e=
c(g),l=0,r=0;r<g.length;r++)l+=Math.pow(e-g[r],2);return l/g.length}Object.defineProperty(B,"__esModule",{value:!0});B.calculateStat=B.decodeStatType=void 0;B.decodeStatType=function(g){switch(g.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};B.calculateStat=function(g,e,l){void 0===
l&&(l=1E3);switch(g.toLowerCase()){case "distinct":a:{g=l;l=[];for(var r={},k=[],f=0;f<e.length;f++){if(void 0!==e[f]&&null!==e[f]&&e[f]!==a.voidOperation){var b=e[f];if(a.isNumber(b)||a.isString(b))void 0===r[b]&&(l.push(b),r[b]=1);else{for(var d=!1,q=0;q<k.length;q++)!0===a.equalityTest(k[q],b)&&(d=!0);!1===d&&(k.push(b),l.push(b))}}if(l.length>=g&&-1!==g){e=l;break a}}e=l}return e;case "avg":case "mean":return c(a.toNumberArray(e));case "min":return Math.min.apply(Math,a.toNumberArray(e));case "sum":e=
a.toNumberArray(e);for(l=g=0;l<e.length;l++)g+=e[l];return g;case "max":return Math.max.apply(Math,a.toNumberArray(e));case "stdev":case "stddev":return Math.sqrt(h(a.toNumberArray(e)));case "var":case "variance":return h(a.toNumberArray(e));case "count":return e.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n){function t(z,w,y){if(null===z)w.updateUint8Array([0,139]);else if(e.isArray(z)){w.updateUint8Array([61]);if(y.map.has(z))z=y.map.get(z),w.updateIntArray([z^61237541]);else{y.map.set(z,y.currentLength++);for(var x=0;x<z.length;x++){var A=z[x];t(A,w,y)}y.map["delete"](z);y.currentLength--}w.updateUint8Array([199])}else if(e.isImmutableArray(z)){w.updateUint8Array([61]);if(y.map.has(z))z=y.map.get(z),w.updateIntArray([z^61237541]);else{y.map.set(z,y.currentLength++);
x=0;for(var v=z.toArray();x<v.length;x++)A=v[x],t(A,w,y);y.map["delete"](z);y.currentLength--}w.updateUint8Array([199])}else if(e.isDate(z))w.updateIntArray([z.getTime()]),w.updateUint8Array([241]);else if(e.isString(z))w.updateIntArray([z.length]),w.updateWithString(z),w.updateUint8Array([41]);else if(e.isBoolean(z))w.updateUint8Array([!0===z?1:0,113]);else if(e.isNumber(z))w.updateFloatArray([z]),w.updateUint8Array([173]);else{if(z instanceof c)throw Error("Type not supported in Hash");if(z instanceof
a)throw Error("Type not supported in Hash");if(z instanceof h){w.updateUint8Array([223]);if(y.map.has(z))z=y.map.get(z),w.updateIntArray([z^61237541]);else{y.map.set(z,y.currentLength++);x=0;for(v=z.keys();x<v.length;x++)A=v[x],w.updateIntArray([A.length]),w.updateWithString(A),w.updateUint8Array([251]),A=z.field(A),t(A,w,y),w.updateUint8Array([239]);y.map["delete"](z);y.currentLength--}w.updateUint8Array([73])}else{if(z instanceof g)throw Error("Type not supported in Hash");if(z instanceof d)w.updateIntArray([3833836621]),
w.updateIntArray([0]),w.updateFloatArray([z.x]),w.updateIntArray([1]),w.updateFloatArray([z.y]),w.updateIntArray([3765347959]),t(z.spatialReference.wkid,w,y);else if(z instanceof q){w.updateIntArray([1266616829]);for(x=0;x<z.rings.length;x++){v=z.rings[x];var u=[],C=null,E=null;for(A=0;A<v.length;A++){var F=z.getPoint(x,A);if(0===A)C=F;else if(E.x===F.x&&E.y===F.y)continue;E=F;A===v.length-1&&C.x===F.x&&C.y===F.y||u.push(F)}w.updateIntArray([1397116793,u.length]);for(A=0;A<u.length;A++)F=u[A],w.updateIntArray([3962308117,
A]),t(F,w,y),w.updateIntArray([2716288009]);w.updateIntArray([2278822459])}w.updateIntArray([3878477243]);t(z.spatialReference.wkid,w,y)}else if(z instanceof m){w.updateIntArray([4106883559]);for(x=0;x<z.paths.length;x++){v=z.paths[x];w.updateIntArray([1397116793,v.length]);for(A=0;A<v.length;A++)w.updateIntArray([3962308117,A]),t(z.getPoint(x,A),w,y),w.updateIntArray([2716288009]);w.updateIntArray([2278822459])}w.updateIntArray([2568784753]);t(z.spatialReference.wkid,w,y)}else if(z instanceof b){w.updateIntArray([588535921,
z.points.length]);for(A=0;A<z.points.length;A++)x=z.getPoint(A),w.updateIntArray([A]),t(x,w,y);w.updateIntArray([1700171621]);t(z.spatialReference.wkid,w,y)}else if(z instanceof f)w.updateIntArray([3483648373]),w.updateIntArray([0]),w.updateFloatArray([z.xmax]),w.updateIntArray([1]),w.updateFloatArray([z.xmin]),w.updateIntArray([2]),w.updateFloatArray([z.ymax]),w.updateIntArray([3]),w.updateFloatArray([z.ymin]),w.updateIntArray([3622027469]),t(z.spatialReference.wkid,w,y);else if(z instanceof n)w.updateIntArray([14]),
void 0!==z.wkid&&null!==z.wkid&&w.updateIntArray([z.wkid]),z.wkt&&w.updateWithString(z.wkt);else{if(e.isFunctionParameter(z))throw Error("Type not supported in Hash");if(e.isFeatureSet(z))throw Error("Type not supported in Hash");e.isFeatureSetCollection(z);throw Error("Type not supported in Hash");}}}}Object.defineProperty(B,"__esModule",{value:!0});B.registerFunctions=void 0;B.registerFunctions=function(z,w){z.portal=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);return new a(e.toString(u[0]))})};
z.trim=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);return e.toString(u[0]).trim()})};z.tohex=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);A=e.toNumber(u[0]);return isNaN(A)?A:A.toString(16)})};z.upper=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);return e.toString(u[0]).toUpperCase()})};z.proper=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,2);A=1;2===u.length&&"firstword"===e.toString(u[1]).toLowerCase()&&(A=2);v=/\s/;u=e.toString(u[0]);for(var C=
"",E=!0,F=0;F<u.length;F++){var G=u[F];v.test(G)?1===A&&(E=!0):G.toUpperCase()!==G.toLowerCase()&&(E?(G=G.toUpperCase(),E=!1):G=G.toLowerCase());C+=G}return C})};z.lower=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);return e.toString(u[0]).toLowerCase()})};z.guid=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,0,1);if(0<u.length)switch(e.toString(u[0]).toLowerCase()){case "digits":return e.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return e.generateUUID();
case "digits-hyphen-parentheses":return"("+e.generateUUID()+")"}return"{"+e.generateUUID()+"}"})};z.console=function(y,x){return w(y,x,function(A,v,u){0!==u.length&&(1===u.length?y.console(e.toString(u[0])):y.console(e.toString(u)));return e.voidOperation})};z.mid=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,3);A=e.toNumber(u[1]);if(isNaN(A))return"";0>A&&(A=0);if(2===u.length)return e.toString(u[0]).substr(A);v=e.toNumber(u[2]);if(isNaN(v))return"";0>v&&(v=0);return e.toString(u[0]).substr(A,
v)})};z.find=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,3);A=0;if(2<u.length){A=e.toNumber(e.defaultUndefined(u[2],0));if(isNaN(A))return-1;0>A&&(A=0)}return e.toString(u[1]).indexOf(e.toString(u[0]),A)})};z.left=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,2);A=e.toNumber(u[1]);if(isNaN(A))return"";0>A&&(A=0);return e.toString(u[0]).substr(0,A)})};z.right=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,2);A=e.toNumber(u[1]);if(isNaN(A))return"";0>A&&(A=0);return e.toString(u[0]).substr(-1*
A,A)})};z.split=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,4);A=e.toNumber(e.defaultUndefined(u[2],-1));v=e.toBoolean(e.defaultUndefined(u[3],!1));-1===A||null===A||!0===v?u=e.toString(u[0]).split(e.toString(u[1])):(isNaN(A)&&(A=-1),-1>A&&(A=-1),u=e.toString(u[0]).split(e.toString(u[1]),A));if(!1===v)return u;v=[];for(var C=0;C<u.length&&!(-1!==A&&v.length>=A);C++)""!==u[C]&&void 0!==u[C]&&v.push(u[C]);return v})};z.text=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,2);return e.toStringExplicit(u[0],
u[1])})};z.concatenate=function(y,x){return w(y,x,function(A,v,u){A=[];if(1>u.length)return"";if(e.isArray(u[0])){v=e.defaultUndefined(u[2],"");for(var C=0;C<u[0].length;C++)A[C]=e.toStringExplicit(u[0][C],v);return 1<u.length?A.join(u[1]):A.join("")}if(e.isImmutableArray(u[0])){v=e.defaultUndefined(u[2],"");for(C=0;C<u[0].length();C++)A[C]=e.toStringExplicit(u[0].get(C),v);return 1<u.length?A.join(u[1]):A.join("")}for(C=0;C<u.length;C++)A[C]=e.toStringExplicit(u[C]);return A.join("")})};z.reverse=
function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(e.isArray(u[0]))return A=u[0].slice(0),A.reverse(),A;if(e.isImmutableArray(u[0]))return A=u[0].toArray().slice(0),A.reverse(),A;throw Error("Invalid Parameter");})};z.replace=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,3,4);A=e.toString(u[0]);v=e.toString(u[1]);var C=e.toString(u[2]);return(4===u.length?e.toBoolean(u[3]):1)?e.multiReplace(A,v,C):A.replace(v,C)})};z.schema=function(y,x){return w(y,x,function(A,v,u){if(u[0]instanceof
g)return(A=u[0].schema())?h.convertObjectToArcadeDictionary(A):null;throw Error("Invalid Parameter");})};z.subtypes=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(u[0]instanceof g)return(A=u[0].subtypes())?h.convertObjectToArcadeDictionary(A):null;throw Error("Invalid Parameter");})};z.subtypecode=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(u[0]instanceof g){v=u[0].subtypes();if(!v)return null;if(v.subtypeField&&u[0].hasField(v.subtypeField))for(u=u[0].field(v.subtypeField),
A=0,v=v.subtypes;A<v.length;A++){var C=v[A];if(C.code===u)return C.code}return null}throw Error("Invalid Parameter");})};z.subtypename=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(u[0]instanceof g){v=u[0].subtypes();if(!v)return"";if(v.subtypeField&&u[0].hasField(v.subtypeField))for(u=u[0].field(v.subtypeField),A=0,v=v.subtypes;A<v.length;A++){var C=v[A];if(C.code===u)return C.name}return""}throw Error("Invalid Parameter");})};z.gdbversion=function(y,x){return w(y,x,function(A,v,
u){e.pcCheck(u,1,1);if(u[0]instanceof g)return u[0].gdbVersion();throw Error("Invalid Parameter");})};z.domain=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,3);if(u[0]instanceof g)return(A=u[0].fullDomain(e.toString(u[1]),void 0===u[2]?void 0:e.toNumber(u[2])))&&A.domain?"coded-value"===A.domain.type||"codedValue"===A.domain.type?h.convertObjectToArcadeDictionary({type:"codedValue",name:A.domain.name,dataType:l.layerFieldEsriConstants[A.field.type],codedValues:A.domain.codedValues.map(function(C){return{name:C.name,
code:C.code}})}):h.convertObjectToArcadeDictionary({type:"range",name:A.domain.name,dataType:l.layerFieldEsriConstants[A.field.type],min:A.domain.min,max:A.domain.max}):null;throw Error("Invalid Parameter");})};z.domainname=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,4);if(u[0]instanceof g)return u[0].domainValueLookup(e.toString(u[1]),u[2],void 0===u[3]?void 0:e.toNumber(u[3]));throw Error("Invalid Parameter");})};z.domaincode=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,2,
4);if(u[0]instanceof g)return u[0].domainCodeLookup(e.toString(u[1]),u[2],void 0===u[3]?void 0:e.toNumber(u[3]));throw Error("Invalid Parameter");})};z.urlencode=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(null===u[0])return"";if(u[0]instanceof h){A="";v=0;for(var C=u[0].keys();v<C.length;v++){var E=C[v],F=u[0].field(E);""!==A&&(A+="\x26");A=null===F?A+(encodeURIComponent(E)+"\x3d"):A+(encodeURIComponent(E)+"\x3d"+encodeURIComponent(F))}return A}return encodeURIComponent(e.toString(u[0]))})};
z.hash=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);A=new k.XXH(0);t(u[0],A,{map:new Map,currentLength:0});return A.digest()})};z.convertdirection=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,3,3);return r.convertDirection(u[0],u[1],u[2])})};z.fromjson=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,1);if(!1===e.isString(u[0]))throw Error("Invalid Parameter");return h.convertJsonToArcade(JSON.parse(e.toString(u[0])))})};z.expects=function(y,x){return w(y,x,function(A,
v,u){if(1>u.length)throw Error("Function called with wrong number of Parameters");return e.voidOperation})};z.tocharcode=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,2);A=e.toNumber(e.defaultUndefined(u[1],0));v=e.toString(u[0]);if(0===v.length&&1===u.length)return null;if(v.length<=A||0>A)throw Error("Illegal argument");return v.charCodeAt(A)})};z.tocodepoint=function(y,x){return w(y,x,function(A,v,u){e.pcCheck(u,1,2);A=e.toNumber(e.defaultUndefined(u[1],0));v=e.toString(u[0]);if(0===
v.length&&1===u.length)return null;if(v.length<=A||0>A)throw Error("Illegal argument");return v.codePointAt(A)})};z.fromcharcode=function(y,x){return w(y,x,function(A,v,u){if(1>u.length)throw Error("Function called with wrong number of Parameters");A=u.map(function(C){return Math.trunc(e.toNumber(C))}).filter(function(C){return 0<=C&&65535>=C});return 0===A.length?null:String.fromCharCode.apply(null,A)})};z.fromcodepoint=function(y,x){return w(y,x,function(A,v,u){if(1>u.length)throw Error("Function called with wrong number of Parameters");
try{var C=u.map(function(E){return Math.trunc(e.toNumber(E))}).filter(function(E){return 1114111>=E&&E>>>0===E})}catch(E){return null}return 0===C.length?null:String.fromCodePoint.apply(null,C)})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,B,a,c){function h(S){if(!1===c.isString(S))throw Error("Invalid Parameter");return S}function g(S,X){var aa=Math.pow(10,X);return Math.round(S*aa)/aa}function e(S){S=+S;return isFinite(S)?
S-S%1||(0>S?-0:0===S?S:0):S}function l(S){var X=parseFloat(S.toString().replace(e(S).toString(),"0"))*((0<S)-(0>S)||+S);return 0>S?{fraction:X,integer:Math.ceil(S)}:{fraction:X,integer:Math.floor(S)}}function r(S,X){switch(S){case 0:return"SHORT"===X?"N":"North";case 1:return"SHORT"===X?"E":"East";case 2:return"SHORT"===X?"S":"South";case 3:return"SHORT"===X?"W":"West"}}function k(S,X,aa){for(;S.length<aa;)S=X+S;return S}function f(S,X){return S-Math.floor(S/X)*X}function b(S){switch(S){case 6:case 1:return 360;
case 4:return G;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;default:throw Error("Unnexpected evaluations");}}function d(S){switch(S.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function q(S){switch(S.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function m(S,X,aa){var M=null;switch(X){case 1:M=B.preciseMultiply(S,3600);break;case 2:M=S;break;case 5:M=B.preciseMultiply(S,3240);break;case 4:M=B.preciseMultiply(S,H);break;default:throw Error("Unnexpected evaluation");
}switch(aa){case 1:return B.preciseDivide(M,3600);case 2:return M;case 5:return B.preciseDivide(M,3240);case 4:return M/H;default:throw Error("Unnexpected evaluation");}}function n(S){switch(S){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function t(S){switch(c.toNumber(S)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function z(S){switch(S.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function w(S){S=parseFloat(S);if(c.isNumber(S)){if(isNaN(S))throw Error("Invalid conversion");return S}throw Error("Invalid conversion");}function y(S,X,aa){var M=3===aa,da=null,ea=null,Z=0,ka=0;ka=0;if(M){if(2>S.length)throw Error("Conversion Error");ka=1;(ea=t(c.toString(S[S.length-1])))?(da=ea.first,ea=ea.second):(Z=1,da=z(c.toString(S[0])),ea=z(c.toString(S[S.length-1])));if(null===da||null===
ea)throw Error("Invalid Conversion");}switch(X){case 1:case 4:case 5:if(0===S.length)throw Error("Invalid Conversion");return M?Q.createFromAngleMeridianAndDirection(W.createFromAngleAndUnits(w(S[Z]),n(X)),da,ea):Q.createFromAngleAndDirection(W.createFromAngleAndUnits(w(S[Z]),n(X)),aa);case 3:ka=S.length-ka-Z;if(3===ka)return S=W.createFromDegreesMinutesSeconds(w(S[Z]),w(S[Z+1]),w(S[Z+2])),M?Q.createFromAngleMeridianAndDirection(S,da,ea):Q.createFromAngleAndDirection(S,aa);if(1===ka)return S=w(S[Z]),
S=L.number_to_dms(S),S=W.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),M?Q.createFromAngleMeridianAndDirection(S,da,ea):Q.createFromAngleAndDirection(S,aa)}throw Error("Conversion Error");}function x(S){for(var X=[" ","-","/","'",'"',"\\","^","\u00b0",J,"\t","\r","\n","*"],aa="",M=0;M<S.length;M++){var da=S.charAt(M);aa=-1!==X.indexOf(da)?aa+"RRSPLITRRSPLITRR":aa+da}return aa.split("RRSPLITRRSPLITRR").filter(function(ea){return""!==ea})}function A(S,X,aa){for(var M={padding:0,
rounding:0,newpos:X},da=!1;X<S.length;){var ea=S[X];if(ea===aa)da?M.rounding++:M.padding++,X++;else if("."===ea)da=!0,X++;else break}M.newpos=X-1;return M}Object.defineProperty(B,"__esModule",{value:!0});B.convertDirection=B.preciseDivide=B.preciseMultiply=B.preciseMinus=B.preciseAdd=void 0;var v=function(S){return function(X,aa,M){M=M||14;return+S(X,aa).toFixed(M)}},u=function(S,X){return S+X},C=function(S,X){return S-X},E=function(S,X){return S*X},F=function(S,X){return S/X};B.preciseAdd=function(S,
X,aa){return v(u)(S,X,aa)};B.preciseMinus=function(S,X,aa){return v(C)(S,X,aa)};B.preciseMultiply=function(S,X,aa){return v(E)(S,X,aa)};B.preciseDivide=function(S,X,aa){return v(F)(S,X,aa)};var G=2*Math.PI,H=648E3/Math.PI,J=String.fromCharCode(7501),I;(function(S){S[S.north=0]="north";S[S.east=1]="east";S[S.south=2]="south";S[S.west=3]="west"})(I||(I={}));var R;(function(S){S[S.decimal_degrees=1]="decimal_degrees";S[S.seconds=2]="seconds";S[S.degrees_minutes_seconds=3]="degrees_minutes_seconds";S[S.radians=
4]="radians";S[S.gradians=5]="gradians";S[S.truncated_degrees=6]="truncated_degrees";S[S.fractional_degree_minutes=7]="fractional_degree_minutes";S[S.fractional_minute_seconds=8]="fractional_minute_seconds"})(R||(R={}));var O;(function(S){S[S.north_azimuth=1]="north_azimuth";S[S.polar=2]="polar";S[S.quadrant=3]="quadrant";S[S.south_azimuth=4]="south_azimuth"})(O||(O={}));var P;(function(S){S[S.meridian=0]="meridian";S[S.direction=1]="direction"})(P||(P={}));var L=function(){function S(X,aa,M){this.m_degrees=
X;this.m_minutes=aa;this.m_seconds=M}S.prototype.get_field=function(X){switch(X){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};S.seconds_to_DMS=function(X){var aa=l(X).fraction;X=l(X).integer;var M=Math.floor(X/3600);X-=3600*M;var da=Math.floor(X/60);return new S(M,da,X-60*da+aa)};S.number_to_dms=function(X){var aa=l(X).fraction;X=l(X).integer;var M=B.preciseMultiply(l(100*aa).fraction,100);aa=
l(100*aa).integer;return new S(X,aa,M)};S.prototype.format=function(X,aa){var M=g(this.m_seconds,aa),da=this.m_minutes,ea=this.m_degrees;if(2===X||8===X)60<=M&&(M-=60,++da),60<=da&&(da=0,++ea),360<=ea&&(ea=0);else if(7===X)M=0,da=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ea=this.m_degrees,60<=da&&(da=0,++ea),360<=ea&&(ea=0);else if(1===X||6===X)M=B.preciseDivide(this.m_seconds,3600),da=B.preciseDivide(this.m_minutes,60),ea=Math.round(this.m_degrees+da+M),M=da=0;return new S(ea,da,M)};S.DMS_to_seconds=
function(X,aa,M){return 3600*X+60*aa+M};return S}(),K=function(){function S(X,aa,M){this.meridian=X;this.angle=aa;this.direction=M}S.prototype.fetch_azimuth=function(X){return 0===X?this.meridian:this.direction};return S}(),Q=function(){function S(X){this.m_angle=X}S.createFromAngleAndDirection=function(X,aa){return new S(new W(S.convertDirectionFormat(X.extract_angular_units(2),aa,1)))};S.prototype.getAngle=function(X){var aa=this.m_angle.extract_angular_units(2);switch(X){case 1:case 4:case 2:return X=
new W(S.convertDirectionFormat(aa,1,X));case 3:return X=S.seconds_north_azimuth_to_quadrant(aa),X=new W(X.angle)}};S.prototype.getMeridian=function(X){var aa=this.m_angle.extract_angular_units(2);switch(X){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return S.seconds_north_azimuth_to_quadrant(aa).meridian}};S.prototype.getDirection=function(X){var aa=this.m_angle.extract_angular_units(2);switch(X){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return S.seconds_north_azimuth_to_quadrant(aa).direction}};
S.seconds_north_azimuth_to_quadrant=function(X){var aa=324E3>=X||972E3<=X?0:2;return new K(aa,0===aa?Math.min(1296E3-X,X):Math.abs(X-648E3),648E3<X?3:1)};S.createFromAngleMeridianAndDirection=function(X,aa,M){return new S(new W(S.secondsQuadrantToNorthAzimuth(X.extract_angular_units(2),aa,M)))};S.secondsQuadrantToNorthAzimuth=function(X,aa,M){return 0===aa?1===M?X:1296E3-X:1===M?648E3-X:648E3+X};S.convertDirectionFormat=function(X,aa,M){var da=0;switch(aa){case 1:da=X;break;case 2:da=324E3-X;break;
case 3:throw Error("Unnexpected evaluation");case 4:da=X+648E3}X=0;switch(M){case 1:X=da;break;case 2:X=324E3-da;break;case 3:throw Error("Unnexpected evaluation");case 4:X=da-648E3}X%=1296E3;return 0>X?1296E3+X:X};return S}(),W=function(){function S(X){this.m_seconds=X}S.createFromAngleAndUnits=function(X,aa){return new S(m(X,aa,2))};S.prototype.extract_angular_units=function(X){return m(this.m_seconds,2,n(X))};S.createFromDegreesMinutesSeconds=function(X,aa,M){return new S(B.preciseAdd(B.preciseAdd(B.preciseMultiply(X,
3600),B.preciseMultiply(aa,60)),M))};return S}(),ba=function(){function S(X,aa,M,da){this.m_view=X;this.m_angle=aa;this.m_merdian=M;this.m_direction=da;this.m_formatted_dms=this.m_dms=null}S.createFromStringAndBearing=function(X,aa,M){return new S(X,aa.getAngle(M),aa.getMeridian(M),aa.getDirection(M))};S.prototype.fetch_angle=function(){return this.m_angle};S.prototype.fetch_meridian=function(){return this.m_merdian};S.prototype.fetch_direction=function(){return this.m_direction};S.prototype.fetch_m_view=
function(){return this.m_view};S.prototype.fetch_dms=function(){null===this.m_dms&&this.calculate_dms();return this.m_dms};S.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};S.prototype.calculate_dms=function(){var X=null,aa=6,M=0;for(X=0;X<this.m_view.length;X++){var da=this.m_view[X];switch(da){case "m":X=A(this.m_view,X,da);aa=6===aa?7:aa;X=X.newpos;continue;case "s":X=A(this.m_view,X,da),aa=8,M=M<X.rounding?X.rounding:M,X=
X.newpos}}this.m_dms=L.seconds_to_DMS(this.m_angle.extract_angular_units(2));this.m_formatted_dms=L.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(aa,M)};return S}();B.convertDirection=function(S,X,aa){if(!(X instanceof a))throw Error("Invalid Parameter");if(!1===X.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===X.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var M=d(h(X.field("directiontype")));X=q(h(X.field("angletype")));
if(c.isNumber(S)){S=c.toNumber(S);if(3===M)throw Error("Conversion error");3===X?(S=L.number_to_dms(S),X=Q.createFromAngleAndDirection(W.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),M)):X=Q.createFromAngleAndDirection(W.createFromAngleAndUnits(S,n(X)),M)}else if(c.isString(S))X=y(x(S),X,M);else if(c.isArray(S))X=y(S,X,M);else if(c.isImmutableArray(S))X=y(S.toArray(),X,M);else throw Error("Conversion Error");if(!(aa instanceof a))throw Error("Invalid Parameter");if(!1===aa.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");
if(!1===aa.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");M=d(h(aa.field("directiontype")));S=aa.hasField("angleType")?q(h(aa.field("angletype"))):null;var da=h(aa.field("outputType")).toUpperCase().trim();if(!M||!da)throw Error("Conversion error");if(!(S||"TEXT"===da&&aa.hasField("format")))throw Error("Invalid unit");switch(da){case "VALUE":if(3===M||3===S)return aa=X,X=aa.getAngle(M),3===M&&3===S?(S=L.seconds_to_DMS(X.extract_angular_units(2)),M=[r(aa.getMeridian(M),
"SHORT"),S.m_degrees,S.m_minutes,S.m_seconds,r(aa.getDirection(M),"SHORT")]):3===S?(S=L.seconds_to_DMS(X.extract_angular_units(2)),M=[S.m_degrees,S.m_minutes,S.m_seconds]):M=3===M?[r(aa.getMeridian(M),"SHORT"),X.extract_angular_units(S),r(aa.getDirection(M),"SHORT")]:[X.extract_angular_units(S)],M;aa=X;if((X=n(S))&&3!==S)M=aa.getAngle(M).extract_angular_units(X);else throw Error("Conversion Error");return M;case "TEXT":da="";aa.hasField("format")&&(da=c.toString(aa.field("format")));if(null===da||
""===da){aa="";switch(S){case 1:aa=3===M?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:aa=3===M?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:aa="R.RR";break;case 5:aa="GGG.GG"+J;break;default:throw Error("Conversion error");}3===M&&(aa="p "+aa+" b");da=aa}aa=X;S=da;var ea="",Z=null,ka=null;X=ba.createFromStringAndBearing(S,aa,M);da={D:1,d:6,m:7,s:8,R:4,G:5};for(ka=0;ka<S.length;ka++){var va=S[ka];switch(va){case "[":Z=S;va={escaped:"",newpos:ka};for(ka++;ka<Z.length;){var Ea=Z[ka];ka++;if("]"===
Ea)break;va.escaped+=Ea}va.newpos=ka-1;Z=va;ea+=Z.escaped;ka=Z.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":Z=A(S,ka,va);ka=aa.getAngle(M);a:{va=da[va];Ea=Z.padding;var Ga=Z.rounding,na=X,ma=null;switch(va){case 1:case 4:case 5:ma=f(g(ka.extract_angular_units(va),Ga),b(va));ka=k(ma.toFixed(Ga),"0",Ea+Ga+(0<Ga?1:0));break a;case 6:case 7:ma=f(na.fetch_formatted_dms().get_field(va),b(va));ka=k(ma.toFixed(Ga),"0",Ea+Ga+(0<Ga?1:0));break a;case 8:ma=f(g(na.fetch_dms().get_field(va),
Ga),b(va));ka=k(ma.toFixed(Ga),"0",Ea+Ga+(0<Ga?1:0));break a;default:throw Error("Unnexepected evaluation");}}ea+=ka;ka=Z.newpos;continue;case "P":case "p":ea+=r(X.fetch_meridian(),"p"===va?"SHORT":"LONG");continue;case "B":case "b":ea+=r(X.fetch_direction(),"b"===va?"SHORT":"LONG");continue;default:ea+=va}}return ea;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(D,B){function a(h){for(var g=[],e=0,l=h.length;e<l;e++){var r=
h.charCodeAt(e);128>r?g.push(r):2048>r?g.push(192|r>>6,128|r&63):55296>r||57344<=r?g.push(224|r>>12,128|r>>6&63,128|r&63):(e++,r=65536+((r&1023)<<10|h.charCodeAt(e)&1023),g.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63))}return new Uint8Array(g)}Object.defineProperty(B,"__esModule",{value:!0});B.XXH=void 0;var c=function(){function h(g){this.seed=g;this.totallen=0;this.bufs=[];this.init()}h.prototype.init=function(){this.bufs=[];this.totallen=0;return this};h.prototype.updateFloatArray=function(g){for(var e=
[],l=0;l<g.length;l++){var r=g[l];isNaN(r)?e.push("NaN"):Infinity===r?e.push("Infinity"):-Infinity===r?e.push("-Infinity"):0===r?e.push("0"):e.push(r.toString(16))}this.update(a(e.join("")))};h.prototype.updateIntArray=function(g){g=Int32Array.from(g);this.update(new Uint8Array(g.buffer))};h.prototype.updateUint8Array=function(g){this.update(Uint8Array.from(g))};h.prototype.updateWithString=function(g){return this.update(a(g))};h.prototype.update=function(g){this.bufs.push(g);this.totallen+=g.length;
return this};h.prototype.digest=function(){for(var g=new Uint8Array(this.totallen),e=0,l=0,r=this.bufs;l<r.length;l++){var k=r[l];g.set(k,e);e+=k.length}this.init();return this.xxHash32(g,this.seed)};h.prototype.xxHash32=function(g,e){void 0===e&&(e=0);var l=e+374761393&4294967295,r=0;if(16<=g.length){l=[e+2654435761+2246822519&4294967295,e+2246822519&4294967295,e+0&4294967295,e-2654435761&4294967295];var k=g.length-16,f=0;for(r=0;(r&4294967280)<=k;r+=4){var b=r,d=g[b+0]+(g[b+1]<<8);b=g[b+2]+(g[b+
3]<<8);d=l[f]+(2246822519*d+(2246822519*b<<16))&4294967295;d=d<<13|d>>>19;l[f]=2654435761*(d&65535)+(2654435761*(d>>>16)<<16)&4294967295;f=f+1&3}l=(l[0]<<1|l[0]>>>31)+(l[1]<<7|l[1]>>>25)+(l[2]<<12|l[2]>>>20)+(l[3]<<18|l[3]>>>14)&4294967295}l=l+g.length&4294967295;for(f=g.length-4;r<=f;r+=4)b=r,d=g[b+0]+(g[b+1]<<8),b=g[b+2]+(g[b+3]<<8),l=l+(3266489917*d+(3266489917*b<<16))&4294967295,l=l<<17|l>>>15,l=668265263*(l&65535)+(668265263*(l>>>16)<<16)&4294967295;for(;r<g.length;++r)f=g[r],l+=374761393*f,
l=l<<11|l>>>21,l=2654435761*(l&65535)+(2654435761*(l>>>16)<<16)&4294967295;l^=l>>>15;l=(2246822519*(l&65535)&4294967295)+(2246822519*(l>>>16)<<16);l^=l>>>13;l=(3266489917*(l&65535)&4294967295)+(3266489917*(l>>>16)<<16);l^=l>>>16;return 0>l?l+4294967296:l};return h}();B.XXH=c})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C){function E(na,ma){for(var ya=[],za=0;za<ma.arguments.length;za++)ya.push(G(na,ma.arguments[za]));return ya}function F(na,ma,ya){try{return!0===ma.preparsed?ya(na,null,ma.arguments):ya(na,ma,E(na,ma))}catch(za){throw za;}}function G(na,ma){try{switch(ma.type){case "EmptyStatement":return k.voidOperation;case "VariableDeclarator":var ya=null===ma.init?null:G(na,ma.init);ya===k.voidOperation&&(ya=null);if("Identifier"!==ma.id.type)throw Error("Can only assign a regular variable");
var za=ma.id.name.toLowerCase();null!==na.localScope?na.localScope[za]={value:ya,valueset:!0,node:ma.init}:na.globalScope[za]={value:ya,valueset:!0,node:ma.init};return k.voidOperation;case "VariableDeclaration":for(var Ba=0;Ba<ma.declarations.length;Ba++)G(na,ma.declarations[Ba]);return k.voidOperation;case "BlockStatement":a:{var ha=k.voidOperation;for(Ba=0;Ba<ma.body.length;Ba++)if(ha=G(na,ma.body[Ba]),ha instanceof k.ReturnResult||ha===k.breakResult||ha===k.continueResult){var qa=ha;break a}qa=
ha}return qa;case "FunctionDeclaration":var T=ma.id.name.toLowerCase();na.globalScope[T]={valueset:!0,node:null,value:new e(ma,na)};return k.voidOperation;case "ReturnStatement":if(null===ma.argument)var Ha=new k.ReturnResult(k.voidOperation);else{var Ja=G(na,ma.argument);Ha=new k.ReturnResult(Ja)}return Ha;case "IfStatement":if("AssignmentExpression"===ma.test.type||"UpdateExpression"===ma.test.type)throw Error(f.nodeErrorMessage(ma.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var fa=G(na,
ma.test);if(!0===fa)var Ya=G(na,ma.consequent);else if(!1===fa)Ya=null!==ma.alternate?G(na,ma.alternate):k.voidOperation;else throw Error(f.nodeErrorMessage(ma,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ya;case "ExpressionStatement":if("AssignmentExpression"===ma.expression.type||"UpdateExpression"===ma.expression.type)var Xa=G(na,ma.expression);else{var Ca=G(na,ma.expression);Xa=Ca===k.voidOperation?k.voidOperation:new k.ImplicitResult(Ca)}return Xa;case "AssignmentExpression":var Y=
G(na,ma.right);Ba=null;var la="";if("MemberExpression"===ma.left.type){Ba=G(na,ma.left.object);!0===ma.left.computed?la=G(na,ma.left.property):"Identifier"===ma.left.property.type&&(la=ma.left.property.name);if(k.isArray(Ba))if(k.isNumber(la)){0>la&&(la=Ba.length+la);if(0>la||la>Ba.length)throw Error("Assignment outside of array bounds");if(la===Ba.length&&"\x3d"!==ma.operator)throw Error("Invalid Parameter");Ba[la]=J(Y,ma.operator,Ba[la],ma)}else throw Error("Invalid Parameter");else if(Ba instanceof
h){if(!1===k.isString(la))throw Error("Dictionary accessor must be a string");if(!0===Ba.hasField(la))Ba.setField(la,J(Y,ma.operator,Ba.field(la),ma));else{if("\x3d"!==ma.operator)throw Error("Invalid Parameter");Ba.setField(la,J(Y,ma.operator,null,ma))}}else if(Ba instanceof g){if(!1===k.isString(la))throw Error("Feature accessor must be a string");if(!0===Ba.hasField(la))Ba.setField(la,J(Y,ma.operator,Ba.field(la),ma));else{if("\x3d"!==ma.operator)throw Error("Invalid Parameter");Ba.setField(la,
J(Y,ma.operator,null,ma))}}else{if(k.isImmutableArray(Ba))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var sa=k.voidOperation}else if(Ba=ma.left.name.toLowerCase(),null!==na.localScope&&void 0!==na.localScope[Ba])na.localScope[Ba]={value:J(Y,ma.operator,na.localScope[Ba].value,ma),valueset:!0,node:ma.right},sa=k.voidOperation;else if(void 0!==na.globalScope[Ba])na.globalScope[Ba]={value:J(Y,ma.operator,na.globalScope[Ba].value,ma),valueset:!0,node:ma.right},sa=k.voidOperation;
else throw Error("Variable not recognised");return sa;case "UpdateExpression":Ba=null;la="";if("MemberExpression"===ma.argument.type){Ba=G(na,ma.argument.object);!0===ma.argument.computed?la=G(na,ma.argument.property):"Identifier"===ma.argument.property.type&&(la=ma.argument.property.name);if(k.isArray(Ba))if(k.isNumber(la)){0>la&&(la=Ba.length+la);if(0>la||la>=Ba.length)throw Error("Assignment outside of array bounds");var U=k.toNumber(Ba[la]);Ba[la]="++"===ma.operator?U+1:U-1}else throw Error("Invalid Parameter");
else if(Ba instanceof h){if(!1===k.isString(la))throw Error("Dictionary accessor must be a string");if(!0===Ba.hasField(la))U=k.toNumber(Ba.field(la)),Ba.setField(la,"++"===ma.operator?U+1:U-1);else throw Error("Invalid Parameter");}else if(Ba instanceof g){if(!1===k.isString(la))throw Error("Feature accessor must be a string");if(!0===Ba.hasField(la))U=k.toNumber(Ba.field(la)),Ba.setField(la,"++"===ma.operator?U+1:U-1);else throw Error("Invalid Parameter");}else{if(k.isImmutableArray(Ba))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var ia=!1===ma.prefix?U:"++"===ma.operator?U+1:U-1}else{Ba="Identifier"===ma.argument.type?ma.argument.name.toLowerCase():"";if(!Ba)throw Error("Invalid identifier");if(null!==na.localScope&&void 0!==na.localScope[Ba])U=k.toNumber(na.localScope[Ba].value),na.localScope[Ba]={value:"++"===ma.operator?U+1:U-1,valueset:!0,node:ma},ia=!1===ma.prefix?U:"++"===ma.operator?U+1:U-1;else if(void 0!==na.globalScope[Ba])U=k.toNumber(na.globalScope[Ba].value),na.globalScope[Ba]=
{value:"++"===ma.operator?U+1:U-1,valueset:!0,node:ma},ia=!1===ma.prefix?U:"++"===ma.operator?U+1:U-1;else throw Error("Variable not recognised");}return ia;case "BreakStatement":return k.breakResult;case "ContinueStatement":return k.continueResult;case "TemplateElement":return ma.value?ma.value.cooked:"";case "TemplateLiteral":var ua="",wa=0;sa=0;for(Ba=ma.quasis;sa<Ba.length;sa++)if(la=Ba[sa],ua+=la.value?la.value.cooked:"",!1===la.tail){var Fa=ma.expressions[wa]?k.toString(G(na,ma.expressions[wa])):
"";ua+=Fa;wa++}return ua;case "ForStatement":null!==ma.init&&G(na,ma.init);wa={testResult:!0,lastAction:k.voidOperation};do b:{Ba=na;la=ma;Fa=wa;if(null!==la.test){Fa.testResult=G(Ba,la.test);if(!1===Fa.testResult)break b;if(!0!==Fa.testResult)throw Error(f.nodeErrorMessage(la,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Fa.lastAction=G(Ba,la.body);Fa.lastAction===k.breakResult?Fa.testResult=!1:Fa.lastAction instanceof k.ReturnResult?Fa.testResult=!1:null!==la.update&&G(Ba,la.update)}while(!0===
wa.testResult);ua=wa.lastAction instanceof k.ReturnResult?wa.lastAction:k.voidOperation;return ua;case "ForInStatement":return H(na,ma);case "Identifier":return K(na,ma);case "MemberExpression":return R(na,ma);case "Literal":return ma.value;case "CallExpression":return Q(na,ma);case "UnaryExpression":return O(na,ma);case "BinaryExpression":return P(na,ma);case "LogicalExpression":return L(na,ma);case "ArrayExpression":try{for(Ba=[],la=0;la<ma.elements.length;la++){var Da=G(na,ma.elements[la]);if(k.isFunctionParameter(Da))throw Error(f.nodeErrorMessage(ma,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Da===k.voidOperation?Ba.push(null):Ba.push(Da)}}catch(Va){throw Va;}return Ba;case "ObjectExpression":Ba={};for(la=0;la<ma.properties.length;la++){var La=G(na,ma.properties[la]);if(k.isFunctionParameter(La.value))throw Error("Illegal Argument");if(!1===k.isString(La.key))throw Error("Illegal Argument");Ba[La.key.toString()]=La.value===k.voidOperation?null:La.value}var Wa=new h(Ba);Wa.immutable=!1;return Wa;case "Property":return{key:"Identifier"===ma.key.type?
ma.key.name:G(na,ma.key),value:G(na,ma.value)};default:throw Error(f.nodeErrorMessage(ma,"RUNTIME","UNREOGNISED"));}}catch(Va){throw Va;}}function H(na,ma){var ya=G(na,ma.right);"VariableDeclaration"===ma.left.type&&G(na,ma.left);var za=null,Ba="";if("VariableDeclaration"===ma.left.type){var ha=ma.left.declarations[0].id;"Identifier"===ha.type&&(Ba=ha.name)}else"Identifier"===ma.left.type&&(Ba=ma.left.name);if(!Ba)throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDVARIABLE"));Ba=Ba.toLowerCase();
null!==na.localScope&&void 0!==na.localScope[Ba]&&(za=na.localScope[Ba]);null===za&&void 0!==na.globalScope[Ba]&&(za=na.globalScope[Ba]);if(null===za)throw Error(f.nodeErrorMessage(ma,"RUNTIME","VARIABLENOTDECLARED"));if(k.isArray(ya)||k.isString(ya)){ya=ya.length;for(ha=0;ha<ya;ha++){za.value=ha;Ba=G(na,ma.body);if(Ba===k.breakResult)break;if(Ba instanceof k.ReturnResult)return Ba}return k.voidOperation}if(k.isImmutableArray(ya)){for(ha=0;ha<ya.length();ha++){za.value=ha;Ba=G(na,ma.body);if(Ba===
k.breakResult)break;if(Ba instanceof k.ReturnResult)return Ba}return k.voidOperation}if(ya instanceof h||ya instanceof g)for(ya=ya.keys(),ha=0;ha<ya.length;ha++){za.value=ya[ha];Ba=G(na,ma.body);if(Ba===k.breakResult)break;if(Ba instanceof k.ReturnResult)return Ba}else return k.voidOperation}function J(na,ma,ya,za){switch(ma){case "\x3d":return na===k.voidOperation?null:na;case "/\x3d":return k.toNumber(ya)/k.toNumber(na);case "*\x3d":return k.toNumber(ya)*k.toNumber(na);case "-\x3d":return k.toNumber(ya)-
k.toNumber(na);case "+\x3d":return k.isString(ya)||k.isString(na)?k.toString(ya)+k.toString(na):k.toNumber(ya)+k.toNumber(na);case "%\x3d":return k.toNumber(ya)%k.toNumber(na);default:throw Error(f.nodeErrorMessage(za,"RUNTIME","OPERATORNOTRECOGNISED"));}}function I(na,ma,ya){ma=ma.toLowerCase();switch(ma){case "hasz":return na=na.hasZ,void 0===na?!1:na;case "hasm":return na=na.hasM,void 0===na?!1:na;case "spatialreference":return ma=na.spatialReference._arcadeCacheId,void 0===ma&&(ya=!0,Object.freeze&&
Object.isFrozen(na.spatialReference)&&(ya=!1),ya&&(ka++,ma=na.spatialReference._arcadeCacheId=ka)),na=new h({wkt:na.spatialReference.wkt,wkid:na.spatialReference.wkid}),void 0!==ma&&(na._arcadeCacheId="SPREF"+ma.toString()),na}switch(na.type){case "extent":switch(ma){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return na=na[ma],void 0!==na?na:null;case "type":return"Extent"}break;case "polygon":switch(ma){case "rings":return ma=na.getCacheValue("_arcadeCacheId"),
void 0===ma&&(ka++,ma=ka,na.setCacheValue("_arcadeCacheId",ma)),na=new l(na.rings,na.spatialReference,!0===na.hasZ,!0===na.hasM,ma);case "type":return"Polygon"}break;case "point":switch(ma){case "x":case "y":case "z":case "m":return void 0!==na[ma]?na[ma]:null;case "type":return"Point"}break;case "polyline":switch(ma){case "paths":return ma=na.getCacheValue("_arcadeCacheId"),void 0===ma&&(ka++,ma=ka,na.setCacheValue("_arcadeCacheId",ma)),na=new l(na.paths,na.spatialReference,!0===na.hasZ,!0===na.hasM,
ma);case "type":return"Polyline"}break;case "multipoint":switch(ma){case "points":return ma=na.getCacheValue("_arcadeCacheId"),void 0===ma&&(ka++,ma=ka,na.setCacheValue("_arcadeCacheId",ma)),na=new r(na.points,na.spatialReference,!0===na.hasZ,!0===na.hasM,ma,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(ya,"RUNTIME","PROPERTYNOTFOUND"));}function R(na,ma){try{var ya=G(na,ma.object);if(null===ya)throw Error(f.nodeErrorMessage(ma,"RUNTIME","NOTFOUND"));if(!1===ma.computed){if("Identifier"===
ma.property.type){if(ya instanceof h||ya instanceof g)return ya.field(ma.property.name);if(ya instanceof y)return I(ya,ma.property.name,ma)}throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}var za=G(na,ma.property);if(ya instanceof h||ya instanceof g){if(k.isString(za))return ya.field(za);throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}if(ya instanceof y){if(k.isString(za))return I(ya,za,ma);throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}if(k.isArray(ya)){if(k.isNumber(za)&&
isFinite(za)&&Math.floor(za)===za){0>za&&(za=ya.length+za);if(za>=ya.length||0>za)throw Error(f.nodeErrorMessage(ma,"RUNTIME","OUTOFBOUNDS"));return ya[za]}throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}if(k.isString(ya)){if(k.isNumber(za)&&isFinite(za)&&Math.floor(za)===za){0>za&&(za=ya.length+za);if(za>=ya.length||0>za)throw Error(f.nodeErrorMessage(ma,"RUNTIME","OUTOFBOUNDS"));return ya[za]}throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}if(k.isImmutableArray(ya)&&k.isNumber(za)&&
isFinite(za)&&Math.floor(za)===za){0>za&&(za=ya.length()+za);if(za>=ya.length()||0>za)throw Error(f.nodeErrorMessage(ma,"RUNTIME","OUTOFBOUNDS"));return ya.get(za)}throw Error(f.nodeErrorMessage(ma,"RUNTIME","INVALIDTYPE"));}catch(Ba){throw Ba;}}function O(na,ma){try{var ya=G(na,ma.argument);if(k.isBoolean(ya)){if("!"===ma.operator)return!ya;if("-"===ma.operator)return-1*k.toNumber(ya);if("+"===ma.operator)return 1*k.toNumber(ya);if("~"===ma.operator)return~k.toNumber(ya);throw Error(f.nodeErrorMessage(ma,
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ma.operator)return~k.toNumber(ya);if("-"===ma.operator)return-1*k.toNumber(ya);if("+"===ma.operator)return 1*k.toNumber(ya);throw Error(f.nodeErrorMessage(ma,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(za){throw za;}}function P(na,ma){try{var ya=[G(na,ma.left),G(na,ma.right)],za=ya[0],Ba=ya[1];switch(ma.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return k.binaryOperator(k.toNumber(za),k.toNumber(Ba),
ma.operator);case "\x3d\x3d":return k.equalityTest(za,Ba);case "!\x3d":return!k.equalityTest(za,Ba);case "\x3c":return k.greaterThanLessThan(za,Ba,ma.operator);case "\x3e":return k.greaterThanLessThan(za,Ba,ma.operator);case "\x3c\x3d":return k.greaterThanLessThan(za,Ba,ma.operator);case "\x3e\x3d":return k.greaterThanLessThan(za,Ba,ma.operator);case "+":return k.isString(za)||k.isString(Ba)?k.toString(za)+k.toString(Ba):k.toNumber(za)+k.toNumber(Ba);case "-":return k.toNumber(za)-k.toNumber(Ba);
case "*":return k.toNumber(za)*k.toNumber(Ba);case "/":return k.toNumber(za)/k.toNumber(Ba);case "%":return k.toNumber(za)%k.toNumber(Ba);default:throw Error(f.nodeErrorMessage(ma,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(ha){throw ha;}}function L(na,ma){try{if("AssignmentExpression"===ma.left.type||"UpdateExpression"===ma.left.type)throw Error(f.nodeErrorMessage(ma.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ma.right.type||"UpdateExpression"===ma.right.type)throw Error(f.nodeErrorMessage(ma.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ya=G(na,ma.left);if(k.isBoolean(ya))switch(ma.operator){case "||":if(!0===ya)return ya;var za=G(na,ma.right);if(k.isBoolean(za))return za;throw Error(f.nodeErrorMessage(ma,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ya)return ya;za=G(na,ma.right);if(k.isBoolean(za))return za;throw Error(f.nodeErrorMessage(ma,"RUNTIME","ONLYORORAND"));default:throw Error(f.nodeErrorMessage(ma,"RUNTIME","ONLYORORAND"));}throw Error(f.nodeErrorMessage(ma,"RUNTIME",
"ONLYBOOLEAN"));}catch(Ba){throw Ba;}}function K(na,ma){try{var ya=ma.name.toLowerCase();if(null!==na.localScope&&void 0!==na.localScope[ya]){var za=na.localScope[ya];if(!0===za.valueset)return za.value;za.value=G(na,za.node);za.valueset=!0;return za.value}if(void 0!==na.globalScope[ya]){za=na.globalScope[ya];if(!0===za.valueset)return za.value;za.value=G(na,za.node);za.valueset=!0;return za.value}throw Error(f.nodeErrorMessage(ma,"RUNTIME","VARIABLENOTFOUND"));}catch(Ba){throw Ba;}}function Q(na,
ma){try{if("Identifier"!==ma.callee.type)throw Error(f.nodeErrorMessage(ma,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==na.localScope&&void 0!==na.localScope[ma.callee.name.toLowerCase()]){var ya=na.localScope[ma.callee.name.toLowerCase()];if(ya.value instanceof k.NativeFunction)return ya.value.fn(na,ma);if(ya.value instanceof e)return M(na,ma,ya.value.definition);throw Error(f.nodeErrorMessage(ma,"RUNTIME","NOTAFUNCTION"));}if(void 0!==na.globalScope[ma.callee.name.toLowerCase()]){ya=na.globalScope[ma.callee.name.toLowerCase()];
if(ya.value instanceof k.NativeFunction)return ya.value.fn(na,ma);if(ya.value instanceof e)return M(na,ma,ya.value.definition);throw Error(f.nodeErrorMessage(ma,"RUNTIME","NOTAFUNCTION"));}throw Error(f.nodeErrorMessage(ma,"RUNTIME","NOTFOUND"));}catch(za){throw za;}}function W(na){return null==na?"":k.isArray(na)||k.isImmutableArray(na)?"Array":k.isDate(na)?"Date":k.isString(na)?"String":k.isBoolean(na)?"Boolean":k.isNumber(na)?"Number":na instanceof c?"Attachment":na instanceof a?"Portal":na instanceof
h?"Dictionary":na instanceof g?"Feature":na instanceof A?"Point":na instanceof v?"Polygon":na instanceof u?"Polyline":na instanceof x?"Multipoint":na instanceof w?"Extent":k.isFunctionParameter(na)?"Function":k.isFeatureSet(na)?"FeatureSet":k.isFeatureSetCollection(na)?"FeatureSetCollection":na===k.voidOperation?"":"number"===typeof na&&isNaN(na)?"Number":"Unrecognised Type"}function ba(na,ma,ya,za){try{var Ba=G(na,ma.arguments[ya]);if(k.equalityTest(Ba,za))return G(na,ma.arguments[ya+1]);var ha=
ma.arguments.length-ya;return 1===ha?G(na,ma.arguments[ya]):2===ha?null:3===ha?G(na,ma.arguments[ya+2]):ba(na,ma,ya+2,za)}catch(qa){throw qa;}}function S(na,ma,ya,za){try{if(!0===za)return G(na,ma.arguments[ya+1]);if(3===ma.arguments.length-ya)return G(na,ma.arguments[ya+2]);var Ba=G(na,ma.arguments[ya+2]);if(!1===k.isBoolean(Ba))throw Error("WHEN needs boolean test conditions");return S(na,ma,ya+2,Ba)}catch(ha){throw ha;}}function X(na,ma){var ya=na.length,za=Math.floor(ya/2);if(0===ya)return[];
if(1===ya)return[na[0]];var Ba=X(na.slice(0,za),ma);ya=X(na.slice(za,ya),ma);for(za=[];0<Ba.length||0<ya.length;)if(0<Ba.length&&0<ya.length){var ha=ma(Ba[0],ya[0]);isNaN(ha)&&(ha=0);0>=ha?(za.push(Ba[0]),Ba=Ba.slice(1)):(za.push(ya[0]),ya=ya.slice(1))}else 0<Ba.length?(za.push(Ba[0]),Ba=Ba.slice(1)):0<ya.length&&(za.push(ya[0]),ya=ya.slice(1));return za}function aa(na,ma,ya){try{var za=na.body;if(ya.length!==na.params.length)throw Error("Invalid Parameter calls to function.");for(var Ba=0;Ba<ya.length;Ba++)ma.localScope[na.params[Ba].name.toLowerCase()]=
{value:ya[Ba],valueset:!0,node:null};var ha=G(ma,za);if(ha instanceof k.ReturnResult)return ha.value;if(ha===k.breakResult)throw Error("Cannot Break from a Function");if(ha===k.continueResult)throw Error("Cannot Continue from a Function");return ha instanceof k.ImplicitResult?ha.value:ha}catch(qa){throw qa;}}function M(na,ma,ya){return F(na,ma,function(za,Ba,ha){za={spatialReference:na.spatialReference,globalScope:na.globalScope,depthCounter:na.depthCounter+1,console:na.console,lrucache:na.lrucache,
interceptor:na.interceptor,localScope:{}};if(64<za.depthCounter)throw Error("Exceeded maximum function depth");return aa(ya,za,ha)})}function da(na){return function(){var ma={spatialReference:na.context.spatialReference,console:na.context.console,lrucache:na.context.lrucache,interceptor:na.context.interceptor,localScope:{},depthCounter:na.context.depthCounter+1,globalScope:na.context.globalScope};if(64<ma.depthCounter)throw Error("Exceeded maximum function depth");return aa(na.definition,ma,arguments)}}
function ea(na){}function Z(na){for(var ma={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:K,arcadeCustomFunctionHandler:da},ya=0;ya<na.length;ya++)na[ya].registerFunctions(ma);for(var za in ma.functions)va[za]={value:new k.NativeFunction(ma.functions[za]),valueset:!0,node:null},Ga.prototype[za]=va[za];for(ya=0;ya<ma.signatures.length;ya++)f.addFunctionDeclaration(ma.signatures[ya],"async")}Object.defineProperty(B,"__esModule",{value:!0});B.findFunctionCalls=
B.referencesFunction=B.referencesMember=B.validateScript=B.extractExpectedFieldLiterals=B.extractFieldLiterals=B.executeScript=B.extend=B.functionHelper=void 0;var ka=0,va={};d.registerFunctions(va,F);z.registerFunctions(va,F);n.registerFunctions(va,F);q.registerFunctions(va,F);t.registerFunctions(va,F);m.registerFunctions(va,F);va["typeof"]=function(na,ma){return F(na,ma,function(ya,za,Ba){k.pcCheck(Ba,1,1);ya=W(Ba[0]);if("Unrecognised Type"===ya)throw Error("Unrecognised Type");return ya})};va.iif=
function(na,ma){try{k.pcCheck(null===ma.arguments?[]:ma.arguments,3,3);var ya=G(na,ma.arguments[0]);if(!1===k.isBoolean(ya))throw Error("IF Function must have a boolean test condition");var za=G(na,ma.arguments[1]),Ba=G(na,ma.arguments[2]);return!0===ya?za:Ba}catch(ha){throw ha;}};va.decode=function(na,ma){try{if(2>ma.arguments.length)throw Error("Missing Parameters");if(2===ma.arguments.length)return G(na,ma.arguments[1]);if(0===(ma.arguments.length-1)%2)throw Error("Must have a default value result.");
var ya=G(na,ma.arguments[0]);return ba(na,ma,1,ya)}catch(za){throw za;}};va.when=function(na,ma){try{if(3>ma.arguments.length)throw Error("Missing Parameters");if(0===ma.arguments.length%2)throw Error("Must have a default value result.");var ya=G(na,ma.arguments[0]);if(!1===k.isBoolean(ya))throw Error("WHEN needs boolean test conditions");return S(na,ma,0,ya)}catch(za){throw za;}};va.top=function(na,ma){return F(na,ma,function(ya,za,Ba){k.pcCheck(Ba,2,2);if(k.isArray(Ba[0]))return k.toNumber(Ba[1])>=
Ba[0].length?Ba[0].slice(0):Ba[0].slice(0,k.toNumber(Ba[1]));if(k.isImmutableArray(Ba[0]))return k.toNumber(Ba[1])>=Ba[0].length()?Ba[0].slice(0):Ba[0].slice(0,k.toNumber(Ba[1]));throw Error("Top cannot accept this parameter type");})};va.first=function(na,ma){return F(na,ma,function(ya,za,Ba){k.pcCheck(Ba,1,1);return k.isArray(Ba[0])?0===Ba[0].length?null:Ba[0][0]:k.isImmutableArray(Ba[0])?0===Ba[0].length()?null:Ba[0].get(0):null})};va.sort=function(na,ma){return F(na,ma,function(ya,za,Ba){k.pcCheck(Ba,
1,2);ya=Ba[0];k.isImmutableArray(ya)&&(ya=ya.toArray());if(!1===k.isArray(ya))throw Error("Illegal Argument");if(1<Ba.length){if(!1===k.isFunctionParameter(Ba[1]))throw Error("Illegal Argument");var ha=da(Ba[1]);return ya=X(ya,function(Ha,Ja){return ha(Ha,Ja)})}if(0===ya.length)return[];Ba={};for(za=0;za<ya.length;za++){var qa=W(ya[za]);""!==qa&&(Ba[qa]=!0)}if(!0===Ba.Array||!0===Ba.Dictionary||!0===Ba.Feature||!0===Ba.Point||!0===Ba.Polygon||!0===Ba.Polyline||!0===Ba.Multipoint||!0===Ba.Extent||
!0===Ba.Function)return ya.slice(0);za=0;qa="";for(var T in Ba)za++,qa=T;return ya=1<za||"String"===qa?X(ya,function(Ha,Ja){if(null===Ha||void 0===Ha||Ha===k.voidOperation)return null===Ja||void 0===Ja||Ja===k.voidOperation?0:1;if(null===Ja||void 0===Ja||Ja===k.voidOperation)return-1;var fa=k.toString(Ha),Ya=k.toString(Ja);return fa<Ya?-1:fa===Ya?0:1}):"Number"===qa?X(ya,function(Ha,Ja){return Ha-Ja}):"Boolean"===qa?X(ya,function(Ha,Ja){return Ha===Ja?0:Ja?-1:1}):"Date"===qa?X(ya,function(Ha,Ja){return Ja-
Ha}):ya.slice(0)})};for(var Ea in va)va[Ea]={value:new k.NativeFunction(va[Ea]),valueset:!0,node:null};var Ga=function(){};Ga.prototype=va;Ga.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Ga.prototype.pi={value:Math.PI,valueset:!0,node:null};B.functionHelper={fixSpatialReference:k.fixSpatialReference,parseArguments:E,standardFunction:F};B.extend=Z;Z([b]);B.executeScript=function(na,ma){var ya=ma.spatialReference;if(null===ya||void 0===ya)ya=new C({wkid:102100});var za=
ma.vars,Ba=ma.customfunctions,ha=new Ga;za||(za={});Ba||(Ba={});var qa=new h({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});qa.immutable=!1;ha.textformatting={value:qa,valueset:!0,node:null};for(var T in Ba)ha[T]={value:new k.NativeFunction(Ba[T]),"native":!0,valueset:!0,node:null};for(T in za)ha[T]=za[T]&&"esri.Graphic"===za[T].declaredClass?{value:g.createFromGraphic(za[T]),valueset:!0,node:null}:{value:za[T],valueset:!0,node:null};ya=G({spatialReference:ya,
globalScope:ha,localScope:null,console:ma.console?ma.console:ea,lrucache:ma.lrucache,interceptor:ma.interceptor,depthCounter:1},na.body[0].body);ya instanceof k.ReturnResult&&(ya=ya.value);ya instanceof k.ImplicitResult&&(ya=ya.value);ya===k.voidOperation&&(ya=null);if(ya===k.breakResult)throw Error("Cannot return BREAK");if(ya===k.continueResult)throw Error("Cannot return CONTINUE");if(ya instanceof e)throw Error("Cannot return FUNCTION");if(ya instanceof k.NativeFunction)throw Error("Cannot return FUNCTION");
return ya};B.extractFieldLiterals=function(na,ma){void 0===ma&&(ma=!1);return f.findFieldLiterals(na)};B.extractExpectedFieldLiterals=function(na){return f.findExpectedFieldLiterals(na)};B.validateScript=function(na,ma){return f.validateScript(na,ma,"simple")};B.referencesMember=function(na,ma){return f.referencesMember(na,ma)};B.referencesFunction=function(na,ma){return f.referencesFunction(na,ma)};B.findFunctionCalls=function(na){return f.findFunctionCalls(na)}})},"esri/arcade/parser":function(){define(["require",
"exports","./treeAnalysis","./lib/arcade-parser"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B.referencesFunction=B.referencesMember=B.extractExpectedFieldLiterals=B.validateScript=B.extractFieldLiterals=B.scriptCheck=B.parseScript=void 0;B.parseScript=function(h,g){void 0===g&&(g=[]);var e=c.parse("function _() { "+h+"\n}");if(null===e.body||void 0===e.body)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");
if("BlockStatement"!==e.body[0].body.type)throw Error("Invalid formula content.");var l=a.validateLanguage(e);if(""!==l)throw Error(l);a.findScriptDependencies(e,g);return e};B.scriptCheck=function(h,g,e,l,r){var k=[];h="function _() { \n"+h+"\n}";try{var f=c.parse(h,{tolerant:!0,loc:!0,range:!0}),b=f.errors;if(0<b.length)for(var d=0;d<b.length;d++)k.push({line:b[d].lineNumber-2,character:b[d].column,reason:b[d].description});var q=a.checkScript(f,g,e,l,r);for(g=0;g<q.length;g++)q[g].line-=2,q[g].range&&
(q[g].range=[q[g][0]-15,q[g][1]-15]),q[g].loc&&(q[g].loc.start.line-=2,q[g].loc.end.line-=2),k.push(q[g])}catch(n){try{if("Unexpected token }"===n.description){var m=h.split("\n").length;n.lineNumber===m?(n.index=h.length-1,k.push({line:n.lineNumber-4,character:n.column,reason:"Unexpected end of script"})):(n.index=h.length-1,k.push({line:n.lineNumber-2,character:n.column,reason:"Unexpected end of script"}))}else k.push({line:n.lineNumber-2,character:n.column,reason:n.description})}catch(t){}}return k};
B.extractFieldLiterals=function(h,g){void 0===g&&(g=!1);return a.findFieldLiterals(h)};B.validateScript=function(h,g,e){return a.validateScript(h,g,e)};B.extractExpectedFieldLiterals=function(h){return a.findExpectedFieldLiterals(h)};B.referencesMember=function(h,g){return a.referencesMember(h,g)};B.referencesFunction=function(h,g){return a.referencesFunction(h,g)}})},"esri/arcade/lib/arcade-parser":function(){var D=this&&this.__createBinding||(Object.create?function(a,c,h,g){void 0===g&&(g=h);Object.defineProperty(a,
g,{enumerable:!0,get:function(){return c[h]}})}:function(a,c,h,g){void 0===g&&(g=h);a[g]=c[h]}),B=this&&this.__exportStar||function(a,c){for(var h in a)"default"===h||Object.prototype.hasOwnProperty.call(c,h)||D(c,a,h)};define("require exports ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(a,c,h,g,e,l,r,k){Object.defineProperty(c,"__esModule",{value:!0});c.version=c.Syntax=c.tokenize=c.parse=void 0;c.parse=function(f,b,d){var q=null,m=function(w,y){d&&d(w,y);
q&&q.visit(w,y)},n="function"===typeof d?m:void 0,t=!1;if(b){t="boolean"===typeof b.comment&&b.comment;var z="boolean"===typeof b.attachComment&&b.attachComment;if(t||z)q=new h.CommentHandler,q.attach=z,b.comment=!0,n=m}f=new g.Parser(f,b,n);b=f.parseScript();t&&q&&(b.comments=q.comments);f.config.tokens&&(b.tokens=f.tokens);f.config.tolerant&&(b.errors=f.errorHandler.errors);return b};c.tokenize=function(f,b,d){f=new e.Tokenizer(f,b);b=[];var q=void 0;try{for(;;){var m=f.getNextToken();if(!m)break;
d&&(m=d(m));b.push(m)}}catch(n){f.errorHandler.tolerate(n)}f.errorHandler.tolerant&&(q=f.errors());return{tokens:b,errors:q}};Object.defineProperty(c,"Syntax",{enumerable:!0,get:function(){return l.Syntax}});B(r,c);B(k,c);c.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});B.CommentHandler=void 0;D=function(){function c(){this.attach=!1;this.comments=[];this.stack=[];this.leading=
[];this.trailing=[]}c.prototype.insertInnerComments=function(h,g){if(h.type===a.Syntax.BlockStatement&&0===h.body.length){for(var e=[],l=this.leading.length-1;0<=l;--l){var r=this.leading[l];g.end.offset>=r.start&&(e.unshift(r.comment),this.leading.splice(l,1),this.trailing.splice(l,1))}e.length&&(h.innerComments=e)}};c.prototype.findTrailingComments=function(h){var g=[];if(0<this.trailing.length){for(var e=this.trailing.length-1;0<=e;--e){var l=this.trailing[e];l.start>=h.end.offset&&g.unshift(l.comment)}this.trailing.length=
0;return g}(e=this.stack[this.stack.length-1])&&e.node.trailingComments&&(l=e.node.trailingComments[0])&&l.range[0]>=h.end.offset&&(g=e.node.trailingComments,delete e.node.trailingComments);return g};c.prototype.findLeadingComments=function(h){for(var g=[],e;0<this.stack.length;){var l=this.stack[this.stack.length-1];if(l&&l.start>=h.start.offset)e=l.node,this.stack.pop();else break}if(e){for(var r=(e.leadingComments?e.leadingComments.length:0)-1;0<=r;--r)l=e.leadingComments[r],l.range[1]<=h.start.offset&&
(g.unshift(l),e.leadingComments.splice(r,1));e.leadingComments&&0===e.leadingComments.length&&delete e.leadingComments;return g}for(r=this.leading.length-1;0<=r;--r)l=this.leading[r],l.start<=h.start.offset&&(g.unshift(l.comment),this.leading.splice(r,1));return g};c.prototype.visitNode=function(h,g){if(!(h.type===a.Syntax.Program&&0<h.body.length)){this.insertInnerComments(h,g);var e=this.findTrailingComments(g),l=this.findLeadingComments(g);0<l.length&&(h.leadingComments=l);0<e.length&&(h.trailingComments=
e);this.stack.push({node:h,start:g.start.offset})}};c.prototype.visitComment=function(h,g){this.comments.push(h);if(this.attach){var e={comment:{type:h.type,value:h.value,range:[g.start.offset,g.end.offset]},start:g.start.offset};h.loc&&(e.comment.loc=h.loc);this.leading.push(e);this.trailing.push(e)}};c.prototype.visit=function(h,g){"Line"===h.type||"Block"===h.type?this.visitComment(h,g):this.attach&&this.visitNode(h,g)};return c}();B.CommentHandler=D})},"esri/arcade/lib/syntax":function(){define(["require",
"exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Syntax=void 0;B.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},
"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(D,B,a,c,h,g,e,l,r){Object.defineProperty(B,"__esModule",{value:!0});B.Parser=void 0;D=function(){function k(f,b,d){void 0===b&&(b={});this.config={range:"boolean"===typeof b.range&&b.range,loc:"boolean"===typeof b.loc&&b.loc,source:null,tokens:"boolean"===typeof b.tokens&&b.tokens,comment:"boolean"===typeof b.comment&&b.comment,tolerant:"boolean"===
typeof b.tolerant&&b.tolerant,globalReturn:!!b.globalReturn};this.config.loc&&b.source&&null!==b.source&&(this.config.source=String(b.source));this.delegate=d;this.errorHandler=new c.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new e.Scanner(f,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,
"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,
column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}k.prototype.tolerateError=function(f){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var q=b.slice();b=f.replace(/%(\d)/g,function(m,n){a.assert(n<q.length,"Message reference must be in range");return q[n]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,b)};k.prototype.unexpectedTokenError=
function(f,b){var d=b||h.Messages.UnexpectedToken;if(f){b||(d=2===f.type?h.Messages.UnexpectedEOS:3===f.type?h.Messages.UnexpectedIdentifier:6===f.type?h.Messages.UnexpectedNumber:8===f.type?h.Messages.UnexpectedString:10===f.type?h.Messages.UnexpectedTemplate:h.Messages.UnexpectedToken);var q=f.value.toString()}else q="ILLEGAL";d=d.replace("%0",q);return f&&"number"===typeof f.lineNumber?this.errorHandler.createError(f.start,f.lineNumber,f.start-(this.lastMarker.index-this.lastMarker.column)+1,d):
this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,d)};k.prototype.throwUnexpectedToken=function(f,b){throw this.unexpectedTokenError(f,b);};k.prototype.tolerateUnexpectedToken=function(f,b){this.errorHandler.tolerate(this.unexpectedTokenError(f,b))};k.prototype.collectComments=function(){if(this.config.comment){var f=this.scanner.scanComments();if(f&&0<f.length&&this.delegate)for(var b=0;b<f.length;++b){var d=f[b],q=new g.Comment(d.multiLine?"Block":
"Line",this.scanner.source.slice(d.slice[0],d.slice[1]));this.config.range&&(q.range=d.range);this.config.loc&&(q.loc=d.loc);this.delegate(q,{start:{line:d.loc.start.line,column:d.loc.start.column,offset:d.range[0]},end:{line:d.loc.end.line,column:d.loc.end.column,offset:d.range[1]}})}}else this.scanner.scanComments()};k.prototype.peekAhead=function(f){var b=this,d=this.scanner.saveState();f.call(this,function(){b.scanner.scanComments();return b.scanner.lex()});this.scanner.restoreState(d)};k.prototype.getTokenRaw=
function(f){return this.scanner.source.slice(f.start,f.end)};k.prototype.convertToken=function(f){var b={type:r.TokenName[f.type],value:this.getTokenRaw(f)};this.config.range&&(b.range=[f.start,f.end]);this.config.loc&&(b.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===f.type&&(b.regex={pattern:f.pattern,flags:f.flags});return b};k.prototype.nextToken=function(){var f=this.lookahead;this.lastMarker.index=
this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var b=this.scanner.lex();this.hasLineTerminator=f.lineNumber!==b.lineNumber;this.lookahead=b;this.config.tokens&&2!==b.type&&this.tokens.push(this.convertToken(b));
return f};k.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};k.prototype.startNode=function(f,b){void 0===b&&(b=0);var d=f.start-f.lineStart,q=f.lineNumber;0>d&&(d+=b,q--);return{index:f.start,line:q,column:d}};k.prototype.finalize=function(f,b){this.config.range&&(b.range=[f.index,this.lastMarker.index]);this.config.loc&&(b.loc={start:{line:f.line,column:f.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},
this.config.source&&(b.loc.source=this.config.source));this.delegate&&this.delegate(b,{start:{line:f.line,column:f.column,offset:f.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return b};k.prototype.expect=function(f){var b=this.nextToken();7===b.type&&b.value===f||this.throwUnexpectedToken(b)};k.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var f=this.lookahead;7===f.type&&","===f.value?this.nextToken():7===f.type&&";"===
f.value?(this.nextToken(),this.tolerateUnexpectedToken(f)):this.tolerateUnexpectedToken(f,h.Messages.UnexpectedToken)}else this.expect(",")};k.prototype.expectKeyword=function(f){var b=this.nextToken();4===b.type&&b.value.toString().toLowerCase()===f.toLowerCase()||this.throwUnexpectedToken(b)};k.prototype.match=function(f){return 7===this.lookahead.type&&this.lookahead.value===f};k.prototype.matchKeyword=function(f){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===f.toLowerCase()};
k.prototype.matchContextualKeyword=function(f){return 3===this.lookahead.type&&this.lookahead.value===f};k.prototype.matchAssign=function(){return 7!==this.lookahead.type?!1:g.AssignmentOperators.includes(this.lookahead.value)};k.prototype.isolateCoverGrammar=function(f){var b=this.context.isBindingElement,d=this.context.isAssignmentTarget,q=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;
f=f.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=b;this.context.isAssignmentTarget=d;this.context.firstCoverInitializedNameError=q;return f};k.prototype.inheritCoverGrammar=function(f){var b=this.context.isBindingElement,d=this.context.isAssignmentTarget,q=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=
null;f=f.call(this);this.context.isBindingElement=this.context.isBindingElement&&b;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d;this.context.firstCoverInitializedNameError=q||this.context.firstCoverInitializedNameError;return f};k.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,
this.lastMarker.column=this.startMarker.column)};k.prototype.parsePrimaryExpression=function(){var f=this.createNode();switch(this.lookahead.type){case 3:f=this.finalize(f,new g.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var b=this.nextToken();var d=this.getTokenRaw(b);f=this.finalize(f,new g.Literal(b.value,d));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();d=this.getTokenRaw(b);
f=this.finalize(f,new g.Literal("true"===b.value.toString().toLowerCase(),d));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();d=this.getTokenRaw(b);f=this.finalize(f,new g.Literal(null,d));break;case 10:f=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;f=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":f=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":f=
this.inheritCoverGrammar(this.parseObjectInitializer);break;default:f=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;f=this.throwUnexpectedToken(this.nextToken());break;default:f=this.throwUnexpectedToken(this.nextToken())}return f};k.prototype.parseArrayInitializer=function(){var f=this.createNode(),b=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),b.push(null)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),
this.match("]")||this.expect(","));this.expect("]");return this.finalize(f,new g.ArrayExpression(b))};k.prototype.parseObjectPropertyKey=function(){var f=this.createNode(),b=this.nextToken();switch(b.type){case 8:case 6:f=this.finalize(f,new g.Literal(b.value,this.getTokenRaw(b)));break;case 3:case 1:case 5:case 4:f=this.finalize(f,new g.Identifier(b.value));break;default:f=this.throwUnexpectedToken(b)}return f};k.prototype.parseObjectProperty=function(){var f=this.createNode(),b=this.lookahead,d=
!1,q=!1,m=null;if(3===b.type){var n=b.value;this.nextToken();d=this.match("[");m=this.finalize(f,new g.Identifier(n))}else this.match("*")?this.nextToken():(d=this.match("["),m=this.parseObjectPropertyKey());m||this.throwUnexpectedToken(this.lookahead);n=null;this.match(":")?(this.nextToken(),n=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===b.type?(n=this.finalize(f,new g.Identifier(b.value)),q=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(f,new g.Property("init",
m,d,n,!1,q))};k.prototype.parseObjectInitializer=function(){var f=this.createNode();this.expect("{");for(var b=[];!this.match("}");)b.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(f,new g.ObjectExpression(b))};k.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var f=this.createNode(),b=this.nextToken();return this.finalize(f,new g.TemplateElement({raw:b.value,
cooked:b.cooked},b.tail))};k.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var f=this.createNode(),b=this.nextToken();return this.finalize(f,new g.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};k.prototype.parseTemplateLiteral=function(){var f=this.createNode(),b=[],d=[],q=this.parseTemplateHead();for(d.push(q);!q.tail;)b.push(this.parseExpression()),q=this.parseTemplateElement(),d.push(q);return this.finalize(f,new g.TemplateLiteral(d,b))};
k.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var f=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");this.context.isBindingElement=!1;return f};k.prototype.parseArguments=function(){this.expect("(");var f=[];if(!this.match(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);f.push(b);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return f};k.prototype.isIdentifierName=
function(f){return 3===f.type||4===f.type||1===f.type||5===f.type};k.prototype.parseIdentifierName=function(){var f=this.createNode(),b=this.nextToken();this.isIdentifierName(b)||this.throwUnexpectedToken(b);return this.finalize(f,new g.Identifier(b.value))};k.prototype.parseLeftHandSideExpressionAllowCall=function(){var f=this.lookahead,b=this.context.allowIn;this.context.allowIn=!0;for(var d=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=
!1;this.context.isAssignmentTarget=!1;var q=this.parseArguments();d=this.finalize(this.startNode(f),new g.CallExpression(d,q))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),q=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),d=this.finalize(this.startNode(f),new g.ComputedMemberExpression(d,q));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),q=this.parseIdentifierName(),
d=this.finalize(this.startNode(f),new g.StaticMemberExpression(d,q));else break;this.context.allowIn=b;return d};k.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var f=this.startNode(this.lookahead),b=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var d=this.isolateCoverGrammar(this.parseExpression);
this.expect("]");b=this.finalize(f,new g.ComputedMemberExpression(b,d))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),d=this.parseIdentifierName(),b=this.finalize(f,new g.StaticMemberExpression(b,d));else break;return b};k.prototype.parseUpdateExpression=function(){var f=this.lookahead;if(this.match("++")||this.match("--")){f=this.startNode(f);var b=this.nextToken();var d=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||
this.tolerateError(h.Messages.InvalidLHSInAssignment);d=this.finalize(f,new g.UpdateExpression(b.value,d,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else d=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,b=this.nextToken().value,
d=this.finalize(this.startNode(f),new g.UpdateExpression(b,d,!1)));return d};k.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var f=this.startNode(this.lookahead),b=this.nextToken();var d=this.inheritCoverGrammar(this.parseUnaryExpression);d=this.finalize(f,new g.UnaryExpression(b.value,d));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else d=this.parseUpdateExpression();return d};k.prototype.binaryPrecedence=
function(f){var b=f.value;return 7===f.type?this.operatorPrecedence[b]||0:4===f.type?this.context.allowIn&&"in"===b?12:0:0};k.prototype.parseBinaryExpression=function(){var f=this.lookahead,b=this.inheritCoverGrammar(this.parseUnaryExpression),d=this.lookahead,q=this.binaryPrecedence(d);if(0<q){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;f=[f,this.lookahead];var m=this.inheritCoverGrammar(this.parseUnaryExpression);d=[b,d.value,m];for(var n=[q];;){q=this.binaryPrecedence(this.lookahead);
if(0>=q)break;for(;2<d.length&&q<=n[n.length-1];){m=d.pop();var t=d.pop();n.pop();b=d.pop();f.pop();var z=f[f.length-1],w=this.startNode(z,z.lineStart);d.push(this.finalize(w,new g.BinaryExpression(t,b,m)))}d.push(this.nextToken().value);n.push(q);f.push(this.lookahead);d.push(this.inheritCoverGrammar(this.parseUnaryExpression))}q=d.length-1;b=d[q];for(t=f.pop();1<q;){z=f.pop();if(!z)break;w=this.startNode(z,t&&t.lineStart);t=d[q-1];b=this.finalize(w,new g.BinaryExpression(t,d[q-2],b));q-=2;t=z}}return b};
k.prototype.parseAssignmentExpression=function(){var f=this.lookahead,b=f,d=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);b=this.nextToken();b=b.value;var q=this.isolateCoverGrammar(this.parseAssignmentExpression);d=this.finalize(this.startNode(f),new g.AssignmentExpression(b,d,q));this.context.firstCoverInitializedNameError=
null}return d};k.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};k.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var f=this.parseFunctionDeclaration();break;default:f=this.parseStatement()}else f=this.parseStatement();return f};k.prototype.parseBlock=function(){var f=this.createNode();this.expect("{");for(var b=
[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(f,new g.BlockStatement(b))};k.prototype.parseObjectStatement=function(){var f=this.createNode(),b=this.parseObjectInitializer();return this.finalize(f,new g.ExpressionStatement(b))};k.prototype.parseBlockOrObjectStatement=function(){var f="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(b){var d=b();if(3===d.type||8===d.type)d=b(),7===d.type&&
":"===d.value&&(f=!0)});return f?this.parseObjectStatement():this.parseBlock()};k.prototype.parseVariableIdentifier=function(){var f=this.createNode(),b=this.nextToken();3!==b.type&&this.throwUnexpectedToken(b,h.Messages.IdentiferExpected);return this.finalize(f,new g.Identifier(b.value))};k.prototype.parseVariableDeclaration=function(f){var b=this.createNode(),d=this.parseVariableIdentifier(),q=null;this.match("\x3d")?(this.nextToken(),q=this.isolateCoverGrammar(this.parseAssignmentExpression)):
d.type===l.Syntax.Identifier||f.inFor||this.expect("\x3d");return this.finalize(b,new g.VariableDeclarator(d,q))};k.prototype.parseVariableDeclarationList=function(f){for(var b=[this.parseVariableDeclaration(f)];this.match(",");)this.nextToken(),b.push(this.parseVariableDeclaration(f));return b};k.prototype.parseVariableStatement=function(){var f=this.createNode();this.expectKeyword("var");var b=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(f,new g.VariableDeclaration(b,
"var"))};k.prototype.parseEmptyStatement=function(){var f=this.createNode();this.expect(";");return this.finalize(f,new g.EmptyStatement)};k.prototype.parseExpressionStatement=function(){var f=this.createNode(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(f,new g.ExpressionStatement(b))};k.prototype.parseIfClause=function(){var f=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var b=this.parseStatement();this.context.curlyParsing=f;return b};k.prototype.parseIfStatement=
function(){var f=this.createNode(),b=null;this.expectKeyword("if");this.expect("(");var d=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var q=this.finalize(this.createNode(),new g.EmptyStatement)}else this.expect(")"),q=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),b=this.parseIfClause());return this.finalize(f,new g.IfStatement(d,q,b))};k.prototype.parseForStatement=function(){var f=null,b=null,d=null,q=null,m=
null,n=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var t=this.createNode();this.nextToken();var z=this.context.allowIn;this.context.allowIn=!1;var w=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=z;1===w.length&&this.matchKeyword("in")?(w[0].init&&this.tolerateError(h.Messages.ForInOfLoopInitializer,"for-in"),q=this.finalize(t,new g.VariableDeclaration(w,"var")),this.nextToken(),m=this.parseExpression()):
(f=this.finalize(t,new g.VariableDeclaration(w,"var")),this.expect(";"))}else{t=this.context.isBindingElement;w=this.context.isAssignmentTarget;var y=this.context.firstCoverInitializedNameError;z=this.context.allowIn;this.context.allowIn=!1;f=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=z;this.matchKeyword("in")?(this.context.isAssignmentTarget&&f.type!==l.Syntax.AssignmentExpression||this.tolerateError(h.Messages.InvalidLHSInForIn),this.nextToken(),q=f,m=this.parseExpression(),
f=null):(this.context.isBindingElement=t,this.context.isAssignmentTarget=w,this.context.firstCoverInitializedNameError=y,this.expect(";"))}q||(this.match(";")||(b=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(d=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),z=this.finalize(this.createNode(),new g.EmptyStatement)):(this.expect(")"),t=this.context.inIteration,w=this.context.curlyParsing,
this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",z=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=w,this.context.inIteration=t);return q&&m?this.finalize(n,new g.ForInStatement(q,m,z)):this.finalize(n,new g.ForStatement(f,b,d,z))};k.prototype.parseContinueStatement=function(){var f=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(f,new g.ContinueStatement)};k.prototype.parseBreakStatement=function(){var f=
this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(f,new g.BreakStatement)};k.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(h.Messages.IllegalReturn);var f=this.createNode();this.expectKeyword("return");var b=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();
return this.finalize(f,new g.ReturnStatement(b))};k.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var f=this.parseExpressionStatement();break;case 7:f=this.lookahead.value;f="{"===f?this.parseBlockOrObjectStatement():"("===f?this.parseExpressionStatement():";"===f?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":f=this.parseBreakStatement();break;case "continue":f=
this.parseContinueStatement();break;case "for":f=this.parseForStatement();break;case "function":f=this.parseFunctionDeclaration();break;case "if":f=this.parseIfStatement();break;case "return":f=this.parseReturnStatement();break;case "var":f=this.parseVariableStatement();break;default:f=this.parseExpressionStatement()}break;default:f=this.throwUnexpectedToken(this.lookahead)}return f};k.prototype.parseFunctionSourceElements=function(){var f=this.createNode();this.expect("{");var b=this.context.inIteration,
d=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var q=[];2!==this.lookahead.type&&!this.match("}");)q.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=b;this.context.inFunctionBody=d;return this.finalize(f,new g.BlockStatement(q))};k.prototype.parseFormalParameters=function(){var f=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){f.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");
if(this.match(")"))break}this.expect(")");return f};k.prototype.parseFunctionDeclaration=function(){var f=this.createNode();this.expectKeyword("function");var b=this.parseVariableIdentifier(),d=this.parseFormalParameters(),q=this.parseFunctionSourceElements();return this.finalize(f,new g.FunctionDeclaration(b,d,q))};k.prototype.parseScript=function(){for(var f=this.createNode(),b=[];2!==this.lookahead.type;)b.push(this.parseStatementListItem());return this.finalize(f,new g.Program(b))};return k}();
B.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.assert=void 0;B.assert=function(a,c){if(!a)throw Error("ASSERT: "+c);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.ErrorHandler=void 0;var a=function(){function c(){this.errors=[];this.tolerant=!1}c.prototype.recordError=function(h){this.errors.push(h)};c.prototype.tolerate=
function(h){if(this.tolerant)this.recordError(h);else throw h;};c.prototype.constructError=function(h,g){var e=Error(h);try{throw e;}catch(l){Object.create&&Object.defineProperty&&(e=Object.create(l),Object.defineProperty(e,"column",{value:g}))}return e};c.prototype.createError=function(h,g,e,l){e=this.constructError("Line "+g+": "+l,e);e.index=h;e.lineNumber=g;e.description=l;return e};c.prototype.throwError=function(h,g,e,l){throw this.createError(h,g,e,l);};c.prototype.tolerateError=function(h,
g,e,l){h=this.createError(h,g,e,l);if(this.tolerant)this.recordError(h);else throw h;};return c}();B.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Messages=void 0;B.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",
IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},
"esri/arcade/lib/nodes":function(){var D=this&&this.__extends||function(){var B=function(a,c){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var e in g)Object.prototype.hasOwnProperty.call(g,e)&&(h[e]=g[e])};return B(a,c)};return function(a,c){function h(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");B(a,c);a.prototype=null===c?Object.create(c):(h.prototype=
c.prototype,new h)}}();define(["require","exports","./syntax"],function(B,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.VariableDeclarator=a.VariableDeclaration=a.UpdateExpression=a.UpdateOperators=a.UnaryExpression=a.UnaryOperators=a.TemplateLiteral=a.TemplateElement=a.Program=a.ReturnStatement=a.Property=a.ObjectExpression=a.Literal=a.IfStatement=a.Identifier=a.FunctionDeclaration=a.ForStatement=a.ForInStatement=a.ExpressionStatement=a.EmptyStatement=a.ContinueStatement=a.StaticMemberExpression=
a.ComputedMemberExpression=a.CallExpression=a.BreakStatement=a.BlockStatement=a.BinaryExpression=a.BinaryOperators=a.LogicalOperators=a.AssignmentExpression=a.AssignmentOperators=a.ArrayExpression=a.Comment=void 0;B=function(){return function(){}}();var h=function(g){function e(l,r){var k=g.call(this)||this;k.type=l;k.value=r;return k}D(e,g);return e}(B);a.Comment=h;h=function(g){function e(l){var r=g.call(this)||this;r.elements=l;r.type=c.Syntax.ArrayExpression;return r}D(e,g);return e}(B);a.ArrayExpression=
h;a.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");h=function(g){function e(l,r,k){var f=g.call(this)||this;f.operator=l;f.left=r;f.right=k;f.type=c.Syntax.AssignmentExpression;return f}D(e,g);return e}(B);a.AssignmentExpression=h;a.LogicalOperators=["||","\x26\x26"];a.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");h=function(g){function e(l,r,k){var f=g.call(this)||this;f.operator=l;f.left=r;
f.right=k;f.type=a.LogicalOperators.includes(l)?c.Syntax.LogicalExpression:c.Syntax.BinaryExpression;return f}D(e,g);return e}(B);a.BinaryExpression=h;h=function(g){function e(l){var r=g.call(this)||this;r.body=l;r.type=c.Syntax.BlockStatement;return r}D(e,g);return e}(B);a.BlockStatement=h;h=function(g){function e(){var l=null!==g&&g.apply(this,arguments)||this;l.type=c.Syntax.BreakStatement;return l}D(e,g);return e}(B);a.BreakStatement=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.callee=
l;k.args=r;k.type=c.Syntax.CallExpression;k.arguments=r;return k}D(e,g);return e}(B);a.CallExpression=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.object=l;k.property=r;k.type=c.Syntax.MemberExpression;k.computed=!0;return k}D(e,g);return e}(B);a.ComputedMemberExpression=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.object=l;k.property=r;k.type=c.Syntax.MemberExpression;k.computed=!1;return k}D(e,g);return e}(B);a.StaticMemberExpression=h;h=function(g){function e(){var l=
null!==g&&g.apply(this,arguments)||this;l.type=c.Syntax.ContinueStatement;return l}D(e,g);return e}(B);a.ContinueStatement=h;h=function(g){function e(){var l=null!==g&&g.apply(this,arguments)||this;l.type=c.Syntax.EmptyStatement;return l}D(e,g);return e}(B);a.EmptyStatement=h;h=function(g){function e(l){var r=g.call(this)||this;r.expression=l;r.type=c.Syntax.ExpressionStatement;return r}D(e,g);return e}(B);a.ExpressionStatement=h;h=function(g){function e(l,r,k){var f=g.call(this)||this;f.left=l;f.right=
r;f.body=k;f.type=c.Syntax.ForInStatement;f.each=!1;return f}D(e,g);return e}(B);a.ForInStatement=h;h=function(g){function e(l,r,k,f){var b=g.call(this)||this;b.init=l;b.test=r;b.update=k;b.body=f;b.type=c.Syntax.ForStatement;return b}D(e,g);return e}(B);a.ForStatement=h;h=function(g){function e(l,r,k){var f=g.call(this)||this;f.id=l;f.params=r;f.body=k;f.type=c.Syntax.FunctionDeclaration;f.generator=!1;f.expression=!1;f.async=!1;return f}D(e,g);return e}(B);a.FunctionDeclaration=h;h=function(g){function e(l){var r=
g.call(this)||this;r.name=l;r.type=c.Syntax.Identifier;return r}D(e,g);return e}(B);a.Identifier=h;h=function(g){function e(l,r,k){var f=g.call(this)||this;f.test=l;f.consequent=r;f.alternate=k;f.type=c.Syntax.IfStatement;return f}D(e,g);return e}(B);a.IfStatement=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.value=l;k.raw=r;k.type=c.Syntax.Literal;return k}D(e,g);return e}(B);a.Literal=h;h=function(g){function e(l){var r=g.call(this)||this;r.properties=l;r.type=c.Syntax.ObjectExpression;
return r}D(e,g);return e}(B);a.ObjectExpression=h;h=function(g){function e(l,r,k,f,b,d){var q=g.call(this)||this;q.kind=l;q.key=r;q.computed=k;q.value=f;q.method=b;q.shorthand=d;q.type=c.Syntax.Property;return q}D(e,g);return e}(B);a.Property=h;h=function(g){function e(l){var r=g.call(this)||this;r.argument=l;r.type=c.Syntax.ReturnStatement;return r}D(e,g);return e}(B);a.ReturnStatement=h;h=function(g){function e(l){var r=g.call(this)||this;r.body=l;r.type=c.Syntax.Program;return r}D(e,g);return e}(B);
a.Program=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.value=l;k.tail=r;k.type=c.Syntax.TemplateElement;return k}D(e,g);return e}(B);a.TemplateElement=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.quasis=l;k.expressions=r;k.type=c.Syntax.TemplateLiteral;return k}D(e,g);return e}(B);a.TemplateLiteral=h;a.UnaryOperators=["-","+","!","~"];h=function(g){function e(l,r){var k=g.call(this)||this;k.operator=l;k.argument=r;k.type=c.Syntax.UnaryExpression;k.prefix=!0;return k}D(e,
g);return e}(B);a.UnaryExpression=h;a.UpdateOperators=["++","--"];h=function(g){function e(l,r,k){var f=g.call(this)||this;f.operator=l;f.argument=r;f.prefix=k;f.type=c.Syntax.UpdateExpression;return f}D(e,g);return e}(B);a.UpdateExpression=h;h=function(g){function e(l,r){var k=g.call(this)||this;k.declarations=l;k.kind=r;k.type=c.Syntax.VariableDeclaration;return k}D(e,g);return e}(B);a.VariableDeclaration=h;B=function(g){function e(l,r){var k=g.call(this)||this;k.id=l;k.init=r;k.type=c.Syntax.VariableDeclarator;
return k}D(e,g);return e}(B);a.VariableDeclarator=B})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(D,B,a,c,h){Object.defineProperty(B,"__esModule",{value:!0});B.Scanner=void 0;D=function(){function g(e,l){this.source=e;this.errorHandler=l;this.isModule=this.trackComment=!1;this.length=e.length;this.index=0;this.lineNumber=0<e.length?1:0;this.lineStart=0;this.curlyStack=[]}g.prototype.saveState=function(){return{index:this.index,
lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};g.prototype.restoreState=function(e){this.index=e.index;this.lineNumber=e.lineNumber;this.lineStart=e.lineStart;this.curlyStack=e.curlyStack};g.prototype.eof=function(){return this.index>=this.length};g.prototype.throwUnexpectedToken=function(e){void 0===e&&(e=h.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)};g.prototype.tolerateUnexpectedToken=
function(e){void 0===e&&(e=h.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)};g.prototype.skipSingleLineComment=function(e){var l=[],r=0,k=null;this.trackComment&&(l=[],r=this.index-e,k={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{line:0,column:0}});for(;!this.eof();){var f=this.source.charCodeAt(this.index);++this.index;if(c.Character.isLineTerminator(f))return k&&(k.end={line:this.lineNumber,column:this.index-
this.lineStart-1},e={multiLine:!1,slice:[r+e,this.index-1],range:[r,this.index-1],loc:k},l.push(e)),13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,l}k&&(k.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!1,slice:[r+e,this.index],range:[r,this.index],loc:k},l.push(e));return l};g.prototype.skipMultiLineComment=function(){var e=[],l=0,r=null;this.trackComment&&(l=this.index-2,r={start:{line:this.lineNumber,column:this.index-
this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var k=this.source.charCodeAt(this.index);if(c.Character.isLineTerminator(k))13===k&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===k&&47===this.source.charCodeAt(this.index+1))return this.index+=2,r&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},l={multiLine:!0,slice:[l+2,this.index-2],range:[l,this.index],loc:r},e.push(l)),e;++this.index}}r&&
(r.end={line:this.lineNumber,column:this.index-this.lineStart},l={multiLine:!0,slice:[l+2,this.index],range:[l,this.index],loc:r},e.push(l));this.tolerateUnexpectedToken();return e};g.prototype.scanComments=function(){var e=null;this.trackComment&&(e=[]);for(var l=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(c.Character.isWhiteSpace(r))++this.index;else if(c.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,
this.lineStart=this.index,l=!0;else if(47===r)if(r=this.source.charCodeAt(this.index+1),47===r)this.index+=2,r=this.skipSingleLineComment(2),e&&(e=e.concat(r)),l=!0;else if(42===r)this.index+=2,r=this.skipMultiLineComment(),e&&(e=e.concat(r));else break;else if(l&&45===r)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,r=this.skipSingleLineComment(3),e&&(e=e.concat(r));else break;else if(60!==r||this.isModule)break;else if("!--"===this.source.slice(this.index+
1,this.index+4))this.index+=4,r=this.skipSingleLineComment(4),e&&(e=e.concat(r));else break}return e};g.prototype.isKeyword=function(e){e=e.toLowerCase();switch(e.length){case 2:return"if"===e||"in"===e;case 3:return"var"===e||"for"===e;case 4:return"else"===e;case 5:return"break"===e;case 6:return"return"===e;case 8:return"function"===e||"continue"===e;default:return!1}};g.prototype.codePointAt=function(e){var l=this.source.charCodeAt(e);55296<=l&&56319>=l&&(e=this.source.charCodeAt(e+1),56320<=
e&&57343>=e&&(l=1024*(l-55296)+e-56320+65536));return l};g.prototype.scanHexEscape=function(e){e="u"===e?4:2;for(var l=0,r=0;r<e;++r)if(!this.eof()&&c.Character.isHexDigit(this.source.charCodeAt(this.index)))l=16*l+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(l)};g.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],l=0;for("}"===e&&this.throwUnexpectedToken();!this.eof();){e=this.source[this.index++];if(!c.Character.isHexDigit(e.charCodeAt(0)))break;
l=16*l+"0123456789abcdef".indexOf(e.toLowerCase())}(1114111<l||"}"!==e)&&this.throwUnexpectedToken();return c.Character.fromCodePoint(l)};g.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var l=this.source.charCodeAt(this.index);if(92===l||55296<=l&&57343>l)return this.index=e,this.getComplexIdentifier();if(c.Character.isIdentifierPart(l))++this.index;else break}return this.source.slice(e,this.index)};g.prototype.getComplexIdentifier=function(){var e=this.codePointAt(this.index),
l=c.Character.fromCodePoint(e);this.index+=l.length;if(92===e){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var r=this.scanUnicodeCodePointEscape()}else r=this.scanHexEscape("u"),null!==r&&"\\"!==r&&c.Character.isIdentifierStart(r.charCodeAt(0))||this.throwUnexpectedToken();l=r}for(;!this.eof();){e=this.codePointAt(this.index);if(!c.Character.isIdentifierPart(e))break;r=c.Character.fromCodePoint(e);l+=r;this.index+=
r.length;92===e&&(l=l.substr(0,l.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,r=this.scanUnicodeCodePointEscape()):(r=this.scanHexEscape("u"),null!==r&&"\\"!==r&&c.Character.isIdentifierPart(r.charCodeAt(0))||this.throwUnexpectedToken()),l+=r)}return l};g.prototype.octalToDecimal=function(e){var l="0"!==e,r="01234567".indexOf(e);!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(l=
!0,r=8*r+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(e)&&!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+"01234567".indexOf(this.source[this.index++])));return{code:r,octal:l}};g.prototype.scanIdentifier=function(){var e=this.index,l=92===this.source.charCodeAt(e)?this.getComplexIdentifier():this.getIdentifier();var r=1===l.length?3:this.isKeyword(l)?4:"null"===l.toLowerCase()?5:"true"===l.toLowerCase()||"false"===l.toLowerCase()?1:3;if(3!==r&&
e+l.length!==this.index){var k=this.index;this.index=e;this.tolerateUnexpectedToken(h.Messages.InvalidEscapedReservedWord);this.index=k}return{type:r,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanPunctuator=function(){var e=this.index,l=this.source[this.index];switch(l){case "(":case "{":"{"===l&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;
break;default:l=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===l?this.index+=4:(l=l.substr(0,3),"\x3d\x3d\x3d"===l||"!\x3d\x3d"===l||"\x3e\x3e\x3e"===l||"\x3c\x3c\x3d"===l||"\x3e\x3e\x3d"===l||"**\x3d"===l?this.index+=3:(l=l.substr(0,2),"\x26\x26"===l||"||"===l||"\x3d\x3d"===l||"!\x3d"===l||"+\x3d"===l||"-\x3d"===l||"*\x3d"===l||"/\x3d"===l||"++"===l||"--"===l||"\x3c\x3c"===l||"\x3e\x3e"===l||"\x26\x3d"===l||"|\x3d"===l||"^\x3d"===l||"%\x3d"===l||"\x3c\x3d"===l||"\x3e\x3d"===l||"\x3d\x3e"===
l||"**"===l?this.index+=2:(l=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(l)&&++this.index)))}this.index===e&&this.throwUnexpectedToken();return{type:7,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanHexLiteral=function(e){for(var l="";!this.eof()&&c.Character.isHexDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];0===l.length&&this.throwUnexpectedToken();c.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+l,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanBinaryLiteral=function(e){for(var l="";!this.eof();){var r=this.source[this.index];if("0"!==r&&"1"!==r)break;l+=this.source[this.index++]}0===l.length&&this.throwUnexpectedToken();this.eof()||(r=this.source.charCodeAt(this.index),(c.Character.isIdentifierStart(r)||c.Character.isDecimalDigit(r))&&this.throwUnexpectedToken());return{type:6,
value:parseInt(l,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanOctalLiteral=function(e,l){var r="",k=!1;c.Character.isOctalDigit(e.charCodeAt(0))?(k=!0,r="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&c.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];k||0!==r.length||this.throwUnexpectedToken();(c.Character.isIdentifierStart(this.source.charCodeAt(this.index))||c.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&
this.throwUnexpectedToken();return{type:6,value:parseInt(r,8),octal:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}};g.prototype.scanNumericLiteral=function(){var e=this.index,l=this.source[e];a.assert(c.Character.isDecimalDigit(l.charCodeAt(0))||"."===l,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==l){r=this.source[this.index++];l=this.source[this.index];if("0"===r){if("x"===l||"X"===l)return++this.index,this.scanHexLiteral(e);
if("b"===l||"B"===l)return++this.index,this.scanBinaryLiteral(e);if("o"===l||"O"===l)return this.scanOctalLiteral(l,e)}for(;c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];l=this.source[this.index]}if("."===l){for(r+=this.source[this.index++];c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];l=this.source[this.index]}if("e"===l||"E"===l){r+=this.source[this.index++];l=this.source[this.index];if("+"===l||"-"===
l)r+=this.source[this.index++];if(c.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;c.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken()}c.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanStringLiteral=function(){var e=this.index,l=this.source[e];
a.assert("'"===l||'"'===l,"String literal must starts with a quote");++this.index;for(var r=!1,k="";!this.eof();){var f=this.source[this.index++];if(f===l){l="";break}if("\\"===f)if((f=this.source[this.index++])&&c.Character.isLineTerminator(f.charCodeAt(0)))++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(f){case "u":"{"===this.source[this.index]?(++this.index,k+=this.scanUnicodeCodePointEscape()):(f=this.scanHexEscape(f),null===f&&this.throwUnexpectedToken(),
k+=f);break;case "x":f=this.scanHexEscape(f);null===f&&this.throwUnexpectedToken(h.Messages.InvalidHexEscapeSequence);k+=f;break;case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\x0B";break;case "8":case "9":k+=f;this.tolerateUnexpectedToken();break;default:f&&c.Character.isOctalDigit(f.charCodeAt(0))?(f=this.octalToDecimal(f),r=f.octal||r,k+=String.fromCharCode(f.code)):k+=f}else if(c.Character.isLineTerminator(f.charCodeAt(0)))break;
else k+=f}""!==l&&(this.index=e,this.throwUnexpectedToken());return{type:8,value:k,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.scanTemplate=function(){var e="",l=!1,r=this.index,k="`"===this.source[r],f=!1,b=2;for(++this.index;!this.eof();){var d=this.source[this.index++];if("`"===d){b=1;l=f=!0;break}if("$"===d){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;l=!0;break}e+=d}else if("\\"===d)if(d=this.source[this.index++],
c.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(d){case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var q=this.index,m=this.scanHexEscape(d);null!==m?e+=m:(this.index=q,e+=d)}break;case "x":d=this.scanHexEscape(d);null===d&&this.throwUnexpectedToken(h.Messages.InvalidHexEscapeSequence);
e+=d;break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\v";break;default:"0"===d?(c.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(h.Messages.TemplateOctalLiteral),e+="\x00"):c.Character.isOctalDigit(d.charCodeAt(0))?this.throwUnexpectedToken(h.Messages.TemplateOctalLiteral):e+=d}else c.Character.isLineTerminator(d.charCodeAt(0))?(++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=d}l||
this.throwUnexpectedToken();k||this.curlyStack.pop();return{type:10,value:this.source.slice(r+1,this.index-b),cooked:e,head:k,tail:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}};g.prototype.testRegExp=function(e,l){var r=this,k=e;0<=l.indexOf("u")&&(k=k.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(f,b,d){f=parseInt(b||d,16);1114111<f&&r.throwUnexpectedToken(h.Messages.InvalidRegExp);return 65535>=f?String.fromCharCode(f):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"\uffff"));try{RegExp(k)}catch(f){this.throwUnexpectedToken(h.Messages.InvalidRegExp)}try{return new RegExp(e,l)}catch(f){return null}};g.prototype.scanRegExpBody=function(){var e=this.source[this.index];a.assert("/"===e,"Regular expression literal must start with a slash");for(var l=this.source[this.index++],r=!1,k=!1;!this.eof();)if(e=this.source[this.index++],l+=e,"\\"===e)e=this.source[this.index++],c.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(h.Messages.UnterminatedRegExp),
l+=e;else if(c.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(h.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){k=!0;break}"["===e&&(r=!0)}k||this.throwUnexpectedToken(h.Messages.UnterminatedRegExp);return l.substr(1,l.length-2)};g.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var l=this.source[this.index];if(!c.Character.isIdentifierPart(l.charCodeAt(0)))break;++this.index;if("\\"!==l||this.eof())e+=l;else{l=this.source[this.index];
if("u"===l){++this.index;l=this.index;var r=this.scanHexEscape("u");if(null!==r)for(e+=r;l<this.index;++l);else this.index=l,e+="u"}this.tolerateUnexpectedToken()}}return e};g.prototype.scanRegExp=function(){var e=this.index,l=this.scanRegExpBody(),r=this.scanRegExpFlags(),k=this.testRegExp(l,r);return{type:9,value:"",pattern:l,flags:r,regex:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};g.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,
lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return c.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?c.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():c.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=e&&57343>e&&c.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return g}();B.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
c=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
B.Character={fromCodePoint:function(h){return 65536>h?String.fromCharCode(h):String.fromCharCode(55296+(h-65536>>10))+String.fromCharCode(56320+(h-65536&1023))},isWhiteSpace:function(h){return 32===h||9===h||11===h||12===h||160===h||5760<=h&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(h)},isLineTerminator:function(h){return 10===h||13===h||8232===h||8233===h},isIdentifierStart:function(h){return 36===h||95===h||65<=h&&90>=h||97<=h&&122>=h||92===h||
128<=h&&a.test(B.Character.fromCodePoint(h))},isIdentifierPart:function(h){return 36===h||95===h||65<=h&&90>=h||97<=h&&122>=h||48<=h&&57>=h||92===h||128<=h&&c.test(B.Character.fromCodePoint(h))},isDecimalDigit:function(h){return 48<=h&&57>=h},isHexDigit:function(h){return 48<=h&&57>=h||65<=h&&70>=h||97<=h&&102>=h},isOctalDigit:function(h){return 48<=h&&55>=h}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,B){Object.defineProperty(B,"__esModule",{value:!0});B.TokenName=
B.TokenType=void 0;var a=B.TokenType||(B.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";B.TokenName={};B.TokenName[1]="Boolean";B.TokenName[2]="\x3cend\x3e";B.TokenName[3]="Identifier";B.TokenName[4]="Keyword";
B.TokenName[5]="Null";B.TokenName[6]="Numeric";B.TokenName[7]="Punctuator";B.TokenName[8]="String";B.TokenName[9]="RegularExpression";B.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){var D=this&&this.__spreadArray||function(B,a){for(var c=0,h=a.length,g=B.length;c<h;c++,g++)B[g]=a[c];return B};define("require exports ./error-handler ./nodes ./scanner ./token".split(" "),function(B,a,c,h,g,e){Object.defineProperty(a,"__esModule",{value:!0});a.Tokenizer=void 0;var l=function(){function r(){this.values=
[];this.curly=this.paren=-1}r.prototype.beforeFunctionExpression=function(k){return 0<=D(D(D(D(["(","{","[","return",","],h.AssignmentOperators),h.BinaryOperators),h.LogicalOperators),h.UnaryOperators).indexOf(k)};r.prototype.isRegexStart=function(){var k=this.values[this.values.length-1],f=null!==k;switch(k){case "this":case "]":f=!1;break;case ")":k=this.values[this.paren-1];f="if"===k||"while"===k||"for"===k||"with"===k;break;case "}":f=!0,"function"===this.values[this.curly-3]?f=(k=this.values[this.curly-
4])?!this.beforeFunctionExpression(k):!1:"function"===this.values[this.curly-4]&&(f=(k=this.values[this.curly-5])?!this.beforeFunctionExpression(k):!0)}return f};r.prototype.push=function(k){7===k.type||4===k.type?("{"===k.value?this.curly=this.values.length:"("===k.value&&(this.paren=this.values.length),this.values.push(k.value)):this.values.push(null)};return r}();B=function(){function r(k,f){this.errorHandler=new c.ErrorHandler;this.errorHandler.tolerant=f?"boolean"===typeof f.tolerant&&f.tolerant:
!1;this.scanner=new g.Scanner(k,this.errorHandler);this.scanner.trackComment=f?"boolean"===typeof f.comment&&f.comment:!1;this.trackRange=f?"boolean"===typeof f.range&&f.range:!1;this.trackLoc=f?"boolean"===typeof f.loc&&f.loc:!1;this.buffer=[];this.reader=new l}r.prototype.errors=function(){return this.errorHandler.errors};r.prototype.getNextToken=function(){if(0===this.buffer.length){var k=this.scanner.scanComments();if(k)for(var f=0;f<k.length;++f){var b=k[f],d=this.scanner.source.slice(b.slice[0],
b.slice[1]);d={type:b.multiLine?"BlockComment":"LineComment",value:d};this.trackRange&&(d.range=b.range);this.trackLoc&&(d.loc=b.loc);this.buffer.push(d)}if(!this.scanner.eof()){k=null;this.trackLoc&&(k={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});f=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){b=this.scanner.saveState();try{f=this.scanner.scanRegExp()}catch(q){this.scanner.restoreState(b),f=this.scanner.lex()}}else f=
this.scanner.lex();this.reader.push(f);b={type:e.TokenName[f.type],value:this.scanner.source.slice(f.start,f.end)};this.trackRange&&(b.range=[f.start,f.end]);this.trackLoc&&k&&(k.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},b.loc=k);9===f.type&&(b.regex={pattern:f.pattern,flags:f.flags});this.buffer.push(b)}}return this.buffer.shift()};return r}();a.Tokenizer=B})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),
function(D,B,a,c,h,g,e){D=new (D(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(l){var r=[];e.hasGeometryOperations(l)&&r.push(g.enableGeometryOperations());return h(r)}}));B.setObject("arcadeProfiles.visualizationProfile",D,c);return D})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(D,B,a,c,h){var g=/(\/(MapServer|FeatureServer)).*/ig;a={hasGeometryOperations:function(e){return B.some(e,
function(l){return l.hasGeometryOperations?l.hasGeometryOperations():h.hasGeometryOperations(l)})},hasFeatureSetOperations:function(e){return B.some(e,function(l){return l.hasFeatureSetOperations?l.hasFeatureSetOperations():h.hasFeatureSetOperations(l)})},hasVariables:function(e,l){return B.some(e,function(r){return B.some(l,function(k){return r.hasVariable?r.hasVariable(k):h.hasVariable(r,k)})})},isAsync:function(e){return B.some(e,function(l){return l.async})},getServiceUrl:function(e){return g.test(e)?
e.replace(g,"$1"):null}};D.setObject("arcadeProfiles.utils",a,c);return a})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(D,B,a,c,h,g,e,l,r){D=D(l,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(k,f,b,d,q,m){this.values=[];this._symbols={};this.infos=[];k&&!k.declaredClass?(f=k,b=m&&m.geometryType,this.defaultSymbol=
(k=f.defaultSymbol)&&(k.declaredClass?k:e.fromJson(k,m)),this.attributeField=f.field1,this.attributeField2=f.field2,this.attributeField3=f.field3,this.fieldDelimiter=f.fieldDelimiter,this.defaultLabel=f.defaultLabel,this.setValueExpression(f.valueExpression),this.valueExpressionTitle=f.valueExpressionTitle,this.legendOptions=f.legendOptions,f.backgroundFillSymbol&&(this.backgroundFillSymbol=e.fromJson(f.backgroundFillSymbol,b?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===b&&
this.hasVisualVariables("sizeInfo",!1)&&(m={geometryType:"esriGeometryPoint"}),B.forEach(f.uniqueValueInfos,function(n){this._addValueInfo(n,m)},this)):(this.defaultSymbol=k,this.attributeField=f,this.attributeField2=b,this.attributeField3=d,this.fieldDelimiter=q);this._multiple=!!this.attributeField2},addValue:function(k,f){var b=a.isObject(k)?k:{value:k,symbol:f};this._addValueInfo(b)},removeValue:function(k){var f=B.indexOf(this.values,k);-1!==f&&(this.values.splice(f,1),this._hasNullKeyword=this._evalNullKeyword(this.values),
delete this._symbols[k],this.infos.splice(f,1))},getUniqueValueInfo:function(k){var f=this.attributeField,b=k.attributes;if(this.valueExpression)f=this._getDataValue(k,this._uvInfo,null,this._cache.uvInfo),f=this._normalizeNullValue(f);else if(this._multiple){k=this.attributeField2;var d=this.attributeField3,q=[];f&&q.push(this._normalizeNullValue(b[f]));k&&q.push(this._normalizeNullValue(b[k]));d&&q.push(this._normalizeNullValue(b[d]));f=q.join(this.fieldDelimiter||"")}else f=a.isFunction(f)?f(k):
b[f],f=this._normalizeNullValue(f);return this._symbols[f]},setValueExpression:function(k){this.valueExpression=k;this._uvInfo={valueExpression:k};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(k){var f=this.inherited(arguments);this.valueExpression&&(f=f.concat(r.extractFieldNames(this.valueExpression,k)));f.sort();return B.filter(f,function(b,d){return 0===d||f[d-1]!==b})},getSymbol:function(k){return(k=this.getUniqueValueInfo(k))&&k.symbol||this.defaultSymbol},
_addValueInfo:function(k,f){var b=k.value;this.values.push(b);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(k);var d=k.symbol;d&&!d.declaredClass&&(k.symbol=e.fromJson(d,f));this._symbols[b]=k},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(k){return this._hasNullKeyword&&null==k?this._nullCode:k},_evalNullKeyword:function(k){var f=this.fieldDelimiter||"",b=new RegExp("(^|"+f+")("+this._nullCode+")("+f+"|$)");return B.some(k,function(d){return b.test(d)})},toJson:function(){var k=
g.fixJson;var f={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:B.map(this.infos||[],function(b){b=a.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.value+="";return k(b)})};
this.backgroundFillSymbol&&(f.backgroundFillSymbol=this.backgroundFillSymbol.toJson());f=a.mixin(this.inherited(arguments),f);return k(f)}});a.setObject("renderer.UniqueValueRenderer",D,h);return D})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y){var x={createDefaultRenderer:function(A){A=e.createDefaultSymbol(A);return new l(A)},fromJson:function(A,v){switch(A.type||""){case "simple":var u=new l(A,v);break;case "uniqueValue":u=new r(A,null,null,null,null,v);break;case "classBreaks":u=new k(A,null,v);break;case "vectorField":u=new f(A);break;case "scaleDependent":u=this._scaleDependentFromJson(A);break;case "dotDensity":u=A.attributes?x.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(A);
break;case "temporal":u=this._temporalFromJson(A,v);break;case "heatmap":u=this._heatmapFromJson(A);break;case "rasterStretch":u=new z(A);break;case "rasterShadedRelief":u=new w(A);break;case "rasterColormap":u=new y(A);break;default:u=(u=v&&v.geometryType)?x.createDefaultRenderer(u):null}return u},_scaleDependentFromJson:function(A){var v={},u=A.minScale;v.rendererInfos=D.map(A.rendererInfos,function(C){var E=C.maxScale;C={minScale:u,maxScale:E,renderer:C.renderer&&this.fromJson(C.renderer)};u=E;
return C},this);return new d(v)},_dotDensityFromJson:function(A){A.backgroundColor&&B.isArray(A.backgroundColor)&&(A.backgroundColor=g.toDojoColor(A.backgroundColor));0<A.dotSize&&(A.dotSize=c.pt2px(A.dotSize));A.fields&&D.forEach(A.fields,function(v){v&&B.isArray(v.color)&&(v.color=g.toDojoColor(v.color))});A.legendOptions&&(A.legendOptions.backgroundColor&&B.isArray(A.legendOptions.backgroundColor)&&(A.legendOptions.backgroundColor=g.toDojoColor(A.legendOptions.backgroundColor)),A.legendOptions.outline&&
(A.legendOptions.outline=e.fromJson(A.legendOptions.outline)));A.outline&&(A.outline=e.fromJson(A.outline));return new b(A)},_temporalFromJson:function(A,v){var u=v&&v.geometryType;A=A||{};var C=this.fromJson(A.observationRenderer,v);var E=A.latestObservationRenderer?this.fromJson(A.latestObservationRenderer,v):null;u=A.trackRenderer?this.fromJson(A.trackRenderer,u?{geometryType:"esriGeometryPolyline"}:null):null;var F=this._agerFromJson(A.observationAger);return new n(C,E,u,F)},_agerFromJson:function(A){var v;
A=A||{};A.colorRange||A.sizeRange||A.alphaRange?v=this._timeRampFromJson(A):A.agerClassBreakInfos&&(v=this._timeClassBreaksFromJson(A));return v},_timeRampFromJson:function(A){var v,u,C;A.colorRange&&1<A.colorRange.length&&(v=[g.toDojoColor(A.colorRange[0]),g.toDojoColor(A.colorRange[1])]);A.sizeRange&&1<A.sizeRange.length&&(u=[A.sizeRange[0],A.sizeRange[1]]);A.alphaRange&&1<A.alphaRange.length&&(C=[A.alphaRange[0]/255,A.alphaRange[1]/255]);return new m(v,u,C)},_timeClassBreaksFromJson:function(A){var v=
A.agerClassBreakInfos,u=[],C;var E=q.UNIT_DAYS;switch(A.timeUnits){case "esriTimeUnitsSeconds":E=q.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":E=q.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":E=q.UNIT_HOURS;break;case "esriTimeUnitsMinutes":E=q.UNIT_MINUTES;break;case "esriTimeUnitsMonths":E=q.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":E=q.UNIT_WEEKS;break;case "esriTimeUnitsYears":E=q.UNIT_YEARS}for(C=0;C<v.length;C+=1){A=v[C];var F={minAge:0,maxAge:A.oldestAge||Infinity};A.color&&
(F.color=g.toDojoColor(A.color));A.alpha&&(F.alpha=A.alpha/255);F.size=A.size;u[C]=F}return new q(u,E)},_heatmapFromJson:function(A){var v=A.colorStops;v&&v instanceof Array&&D.forEach(v,function(u){u.color=g.toDojoColor(u.color)});return new t(A)}};B.mixin(B.getObject("renderer",!0,h),x);return x})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(D,B,a,c,h,g,e,l,r){D=D(l,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(k,f,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(k&&!k.declaredClass){var d=k;f=b&&b.geometryType;this.attributeField=d.field;this.setValueExpression(d.valueExpression);this.valueExpressionTitle=d.valueExpressionTitle;this.legendOptions=d.legendOptions;this.defaultSymbol=(k=d.defaultSymbol)&&(k.declaredClass?k:e.fromJson(k,b));this.backgroundFillSymbol=(k=d.backgroundFillSymbol)&&
(k.declaredClass?k:e.fromJson(k,f?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],d,this);var q=d.minValue;(k=d.classBreakInfos)&&k[0]&&g.isDefined(k[0].classMaxValue)&&B.forEach(k,function(m){var n=m.classMaxValue;m.minValue=q;q=m.maxValue=n},this);"esriGeometryPolygon"===f&&(this.hasVisualVariables("sizeInfo",!1)||e.isPointSymbol(e.getFirstSupportedSymbol(B.map(k,function(m){return m.symbol}))))&&
(b={geometryType:"esriGeometryPoint"});B.forEach(k,function(m){this._addBreakInfo(m,b)},this)}else this.defaultSymbol=k,this.attributeField=f},addBreak:function(k,f,b){k=a.isObject(k)?k:{minValue:k,maxValue:f,symbol:b};this._addBreakInfo(k)},removeBreak:function(k,f){var b=this.breaks,d,q=b.length,m=this._symbols;for(d=0;d<q;d++){var n=b[d];if(n[0]==k&&n[1]==f){b.splice(d,1);delete m[k+"-"+f];this.infos.splice(d,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(k){var f=
this.attributeField,b=k.attributes,d=this.breaks,q=d.length,m=this.isMaxInclusive;if(this.valueExpression)k=this._getDataValue(k,this._cbInfo,null,this._cache.cbInfo);else if(a.isFunction(f))k=f(k);else if(k=parseFloat(b[f]),f=this.normalizationType,f){var n=parseFloat(this.normalizationTotal);b=parseFloat(b[this.normalizationField]);if("log"===f)k=Math.log(k)*Math.LOG10E;else if("percent-of-total"===f&&!isNaN(n))k=k/n*100;else if("field"===f){if(isNaN(k)||isNaN(b))return-1;k/=b}}if(null!=k&&!isNaN(k)&&
"number"===typeof k)for(b=0;b<q;b++)if(f=d[b],f[0]<=k&&(m?k<=f[1]:k<f[1]))return b;return-1},getBreakInfo:function(k){k=this.getBreakIndex(k);return-1!==k?this.infos[k]:null},getSymbol:function(k){return(k=this.breaks[this.getBreakIndex(k)])?this._symbols[k[0]+"-"+k[1]]:this.defaultSymbol},setMaxInclusive:function(k){this.isMaxInclusive=k},setValueExpression:function(k){this.valueExpression=k;this._cbInfo={valueExpression:k};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(k){var f=
this.inherited(arguments);this.valueExpression&&(f=f.concat(r.extractFieldNames(this.valueExpression,k)));f.sort();return B.filter(f,function(b,d){return 0===d||f[d-1]!==b})},isContinuousRenderer:function(){var k=!1;if(this.infos&&1===this.infos.length){var f=this.attributeField,b=this.normalizationField,d=this.valueExpression;k=this.getVisualVariablesForType("colorInfo",!1)||[];var q=this.getVisualVariablesForType("sizeInfo",!1)||[],m=this.getVisualVariablesForType("opacityInfo",!1)||[];k=k.concat(q).concat(m);
k=B.some(k,function(n){return(n.field===f||n.valueExpression===d)&&n.normalizationField==b})}return k},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"],["manual-interval","esriClassifyManual"]],_copy:function(k,f,b){B.forEach(k,function(d){var q=d.split(":");if(1<q.length){d=q[0];var m=this["_"+d+"Enums"];if("rest"===q[1]){var n="1";var t="0"}else"sdk"===q[1]&&(n="0",t="1")}q=f[d];if(void 0!==q&&(b[d]=q,m&&n)){var z,w=m.length;for(z=0;z<w;z++)if(m[z][n]===q){b[d]=m[z][t];break}}},this)},_addBreakInfo:function(k,f){var b=k.minValue,d=k.maxValue;this.breaks.push([b,d]);this.infos.push(k);var q=k.symbol;
q&&!q.declaredClass&&(k.symbol=e.fromJson(q,f));this._symbols[b+"-"+d]=k.symbol},toJson:function(){var k=this.infos||[],f=g.fixJson,b=k[0]&&k[0].minValue,d=this.backgroundFillSymbol;k=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:d&&d.toJson(),minValue:-Infinity===
b?-Number.MAX_VALUE:b,classBreakInfos:B.map(k,function(q){q=a.mixin({},q);q.symbol=q.symbol&&q.symbol.toJson();q.classMaxValue=Infinity===q.maxValue?Number.MAX_VALUE:q.maxValue;delete q.minValue;delete q.maxValue;return f(q)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,k);k.hasOwnProperty("normalizationType")&&!k.normalizationType&&delete k.normalizationType;k.hasOwnProperty("classificationMethod")&&!k.classificationMethod&&
delete k.classificationMethod;return f(k)}});a.setObject("renderer.ClassBreaksRenderer",D,h);return D})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){var m={STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},n=D(l,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(t){g.isDefined(t)||(t={});t.attributeField=t.attributeField||"Magnitude";
t.rotationInfo=t.rotationInfo||this._getRotationInfo(t);D.safeMixin(this,t);this.setRotationInfo(this.rotationInfo);this.style=this.style||n.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:d.fromJson(this.singleArrowSymbol));this.renderer=new r(this._getDefaultSymbol(),t.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(t){return this.renderer&&
this.renderer.getSymbol(t)},setVisualVariables:function(t){t=c.filter(t,function(z){if("sizeInfo"===z.type)return g.isDefined(this._updateSizeInfo(z))},this);this.inherited(arguments);return this},setSizeInfo:function(t){this._updateSizeInfo(t);this.inherited(arguments);return this},setProportionalSymbolInfo:function(t){this.setSizeInfo(t);return this},setColorInfo:function(t){return this},_updateRenderer:function(t){return g.isDefined(this.renderer)?t===n.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():
t===n.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():t===n.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():t===n.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():t===n.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():t===n.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():t===n.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():t===n.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():t===n.STYLE_SCALAR?this._createSimpleScalarRenderer():t===n.STYLE_WIND_BARBS?
this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(t){return t&&g.isDefined(t.minSize)&&g.isDefined(t.maxSize)&&g.isDefined(t.minDataValue)&&g.isDefined(t.maxDataValue)?(this.style===n.STYLE_WIND_BARBS&&(t.minSize=t.maxSize),t.field=t.field||"Magnitude",t.type="sizeInfo",this.minDataValue=t.minDataValue,this.maxDataValue=t.maxDataValue,t):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([56,
168,0]));var t=[0,1E-6,3.5,7,10.5,14];if(g.isDefined(this.minDataValue)&&g.isDefined(this.maxDataValue)){var z=(this.maxDataValue-this.minDataValue)/5;t=[];var w;var y=this.minDataValue;for(w=0;6>w;w++)t[w]=y,y+=z}this._addBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,
47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,
250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,w){t[w]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var t=
[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,w){t[w]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];c.forEach(t,function(z,w){t[w]*=3.6});this.renderer.defaultSymbol=
this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([177,
177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new f({url:q.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var t=[],z;for(z=0;150>=z;z+=5)t.push(z);var w="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var y=new f({url:q.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=y;for(z=0;z<t.length-1;z++)0===z?this.renderer.addBreak({minValue:t[z],maxValue:t[z+1],symbol:y}):this.renderer.addBreak({minValue:t[z],maxValue:t[z+1],symbol:(new k).setPath(w[z]).setOutline((new b).setWidth(1.5)).setSize(20).setColor(new e([0,0,0,255]))})},_getDefaultSymbol:function(t){return(new k).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new b).setWidth(0)).setSize(20).setColor(t||
new e([0,92,230]))},_getRotationInfo:function(t){var z=t&&t.rotationField||"Direction",w=(t&&t.flowRepresentation||n.FLOW_FROM)===n.FLOW_FROM;!t.style||t.style!==m.STYLE_OCEAN_CURRENT_KN&&t.style!==m.STYLE_OCEAN_CURRENT_M||(w=!w);return{field:function(y){y=y.attributes[z];return w?y:y+180},type:"geographic"}},_addBreaks:function(t,z){if(!g.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(t&&z&&t.length&&z.length&&t.length>=z.length))return Error("AddBreaks: Input arguments break values and colors not valid");
var w;for(w=0;w<z.length;w++)this.renderer.addBreak({minValue:t[w],maxValue:t[w+1],symbol:this._getDefaultSymbol(new e(z[w]))})},toJson:function(){var t=B.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===n.STYLE_SINGLE_ARROW&&(t.singleArrowSymbol=this.renderer.defaultSymbol.toJson());
return g.fixJson(t)}});B.mixin(n,m,{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});B.setObject("renderer.VectorFieldRenderer",n,h);return n})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){D=D(k,{declaredClass:"esri.renderer.DotDensityRenderer",
constructor:function(q){this.dotSize=q.dotSize||3;this.dotValue=q.dotValue;this.fields=q.fields;this.outline=q.outline;this.backgroundColor=q.backgroundColor;this.exactCount=q.exactCount||!0;this.dotShape=q.dotShape||"square";this.legendOptions=q.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(q){this._currentGraphic=
q;if(!this._supportsCanvas)return null;this._map||(this._map=q.getLayer()._map,this._objectIdField=q.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",B.hitch(this,function(t){this._currentMapScale=this._map.getScale();this._currentResolution=t.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][q.attributes[this._objectIdField]]){var m=
this._symbolMap[this._currentMapScale][q.attributes[this._objectIdField]];var n=this._getShapeProperties(q);m.setOffset(n.dx,n.dy);return m}m=this._generateFieldsCount(this.fields,q.attributes,this.dotValue);n=this._getShapeProperties(q);if(!n.width||!n.height)return null;m=new f(this._generateImageSrc(n.width,n.height,m,n.minXY,n.maxXY),this.outline,n.width,n.height);m.setOffset(n.dx,n.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][q.attributes[this._objectIdField]]=
m},_generateFieldsCount:function(q,m,n){var t;for(t=q.length-1;0<=t;t--){var z=m[q[t].name]/n;q[t].numPoints=Math.round(z)}return q},_getShapeProperties:function(q){var m=q.geometry.getExtent();m.contains(this._map.extent)&&(m=this._map.extent);var n=Math.ceil(m.getWidth()/this._currentResolution);var t=Math.ceil(m.getHeight()/this._currentResolution);var z=this._map.toScreen(new d(m.xmin,m.ymin,m.spatialReference));m=this._map.toScreen(new d(m.xmax,m.ymax,m.spatialReference));q=q.getLayer().getNavigationTransform();
return{minXY:z,maxXY:m,dx:(z.x-q.dx)%n,dy:(m.y-q.dy)%t,width:n,height:t}},_generateImageSrc:function(q,m,n,t,z,w){var y=this.dotSize,x;this._canvas?(this._canvas.width=q,this._canvas.height=m):this._canvas=this._initCanvas(q,m);var A=this._canvas.getContext("2d");if(w=w||this.backgroundColor)A.fillStyle=w.toCss(!0),A.fillRect(0,0,q,m),A.fill();for(w=n.length-1;0<=w;w--)for(A.fillStyle=n[w].color.toCss(!0),x=n[w].numPoints-1;0<=x;x--){var v=this._getRandomPoint(q,m,t,z);"square"===this.dotShape?A.fillRect(v.x,
v.y,y,y):"circle"===this.dotShape&&(A.beginPath(),A.arc(v.x,v.y,y/2,0,2*Math.PI,!0));A.fill()}return this._canvas.toDataURL()},_initCanvas:function(q,m){var n=c.create("canvas",{id:"canvas",width:q+"px",height:m+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(n);return n},_getRandomInt:function(q,m){return Math.floor(Math.random()*(m-q+1)+q)},_getRandomPoint:function(q,m,n,t){var z={},w=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&
q*m>this._exactCountMinArea){q=!1;do z.x=this._getRandomInt(n.x,t.x),z.y=this._getRandomInt(t.y,n.y),q=new b(z.x,z.y),q=this._checkPointShapeBounds(q,this.dotSize+w,this._currentGraphic.geometry),!0===q&&(z.x-=n.x,z.y-=t.y);while(!1===q)}else z.x=this._getRandomInt(0,q),z.y=this._getRandomInt(0,m);return z},_checkPointShapeBounds:function(q,m,n){var t=null;t=!1;var z=!0,w=0;do{switch(w){case 1:q.x+=m;break;case 2:q.y+=m;break;case 3:q.x-=m}t=this._map.toMap(q);t=n.contains(t);!1===t&&(z=!1);w+=1}while(3>=
w&&!0===z);return t},setDotSize:function(q){0<q&&(this.dotSize=q)},setDotValue:function(q){0<q&&(this.dotValue=q)},setOutline:function(q){this.outline=q},setBackgroundColor:function(q){this.backgroundColor=q},toJson:function(){var q=B.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:r.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?g.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(m){return l.fixJson({color:r.toJsonColor(m.color),
name:m.name})}),legendOptions:this.legendOptions&&l.fixJson({backgroundColor:r.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return l.fixJson(q)}});B.setObject("renderer.DotDensityRenderer",D,e);return D})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Point"],function(D,B,a,c,h){D=D(h,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});B.setObject("geometry.ScreenPoint",D,c);return D})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(D,B,a,c,h,g,e){D=D(e,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(l){this.setRendererInfos(l&&l.rendererInfos||[])},setRendererInfos:function(l){this.rendererInfos=
l;this._setRangeType();return this},getSymbol:function(l){var r=this.getRendererInfo(l);return r&&r.renderer&&r.renderer.getSymbol(l)},getRendererInfo:function(l){l=l.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(l.getZoom()):this.getRendererInfoByScale(l.getScale())},getRendererInfoByZoom:function(l){var r=this.rendererInfos,k,f=0;do{var b=r[f];l>=b.minZoom&&l<=b.maxZoom&&(k=b);f++}while(!k&&f<r.length);return k},getRendererInfoByScale:function(l){var r=this.rendererInfos,
k,f=0;do{var b=r[f];var d=b.minScale;var q=b.maxScale;var m=!d;var n=!q;!m&&l<=d&&(m=!0);!n&&l>=q&&(n=!0);m&&n&&(k=b);f++}while(!k&&f<r.length);return k},addRendererInfo:function(l){var r=0,k=this.rendererInfos,f=l.hasOwnProperty("minZoom")?"minZoom":"minScale",b=k.length;do{var d=k[r];if(b===r||l[f]<d[f]){k.splice(r,0,l);this._setRangeType();var q=!0}r++}while(!q&&r<b);return this},_setRangeType:function(){var l=this.rendererInfos;if(l=l&&l[0])this.rangeType=l.hasOwnProperty("minZoom")?"zoom":l.hasOwnProperty("minScale")?
"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var l=this.rendererInfos||[],r=l[0]&&l[0].minScale;l=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<r?r:0,rendererInfos:B.map(l,function(k){return g.fixJson({maxScale:0<k.maxScale?k.maxScale:0,renderer:k.renderer&&k.renderer.toJson()})})});return g.fixJson(l)}});a.setObject("renderer.ScaleDependentRenderer",D,h);return D})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(D,B,a,c,h,g,e,l,r,k){var f=D(k,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,d){this.infos=b;this.timeUnits=d||"day";b.sort(function(q,m){return q.minAge<m.minAge?-1:q.minAge>m.minAge?1:0})},getAgedSymbol:function(b,d){var q=d.getLayer(),m=d.attributes,n=e.isDefined;b=l.fromJson(b.toJson());var t=q._map.timeExtent.endTime;if(!t)return b;var z=h.difference(new Date(m[q._startTimeField]),t,this.timeUnits);B.some(this.infos,function(w){if(z>=w.minAge&&z<=w.maxAge){var y=
w.color,x=w.size;w=w.alpha;y&&b.setColor(y);n(x)&&this._setSymbolSize(b,x);n(w)&&b.color&&(b.color.a=w);return!0}},this);return b},toJson:function(){var b={agerClassBreakInfos:[]},d;b.timeUnits=this._getRestUnits(this.timeUnits);for(d=0;d<this.infos.length;d+=1){var q=this.infos[d];var m={};m.oldestAge=Infinity===q.maxAge?null:q.maxAge;m.size=q.size;q.color&&(m.color=r.toJsonColor(q.color));q.alpha&&(m.alpha=Math.round(255*q.alpha));b.agerClassBreakInfos[d]=m}return b},_getRestUnits:function(b){var d=
"esriTimeUnitsDays";switch(b){case f.UNIT_SECONDS:d="esriTimeUnitsSeconds";break;case f.UNIT_MILLISECONDS:d="esriTimeUnitsMilliseconds";break;case f.UNIT_HOURS:d="esriTimeUnitsHours";break;case f.UNIT_MINUTES:d="esriTimeUnitsMinutes";break;case f.UNIT_MONTHS:d="esriTimeUnitsMonths";break;case f.UNIT_WEEKS:d="esriTimeUnitsWeeks";break;case f.UNIT_YEARS:d="esriTimeUnitsYears"}return d}});a.mixin(f,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});a.setObject("renderer.TimeClassBreaksAger",f,g);return f})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(h,g){},_setSymbolSize:function(h,g){switch(h.type){case "simplemarkersymbol":h.setSize(g);break;case "picturemarkersymbol":h.setWidth(g);h.setHeight(g);break;case "simplelinesymbol":case "cartographiclinesymbol":h.setWidth(g);
break;case "simplefillsymbol":case "picturefillsymbol":h.outline&&h.outline.setWidth(g)}}});B.setObject("renderer.SymbolAger",D,c);return D})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(D,B,a,c,h,g,e,l){D=D(l,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(r,k,f){this.colorRange=r;this.sizeRange=k;this.alphaRange=f},getAgedSymbol:function(r,
k){var f=k.getLayer(),b=k.attributes;r=g.fromJson(r.toJson());var d=f._map.timeExtent,q=d.startTime;d=d.endTime;if(!q||!d)return r;q=q.getTime();d=d.getTime();f=new Date(b[f._startTimeField]);f=f.getTime();f<q&&(f=q);q=d===q?1:(f-q)/(d-q);if(f=this.sizeRange)b=f[0],d=f[1],f=Math.abs(d-b)*q,this._setSymbolSize(r,b<d?b+f:b-f);if(f=this.colorRange){d=f[0];var m=f[1],n=Math.round;b=new a;var t=d.r,z=m.r;f=Math.abs(z-t)*q;b.r=n(t<z?t+f:t-f);t=d.g;z=m.g;f=Math.abs(z-t)*q;b.g=n(t<z?t+f:t-f);t=d.b;z=m.b;
f=Math.abs(z-t)*q;b.b=n(t<z?t+f:t-f);d=d.a;m=m.a;f=Math.abs(m-d)*q;b.a=d<m?d+f:d-f;r.setColor(b)}b=r.color;(f=this.alphaRange)&&b&&(d=f[0],m=f[1],f=Math.abs(m-d)*q,b.a=d<m?d+f:d-f);return r},toJson:function(){var r={};this.sizeRange&&(r.sizeRange=this.sizeRange);this.colorRange&&(r.colorRange=[e.toJsonColor(this.colorRange[0]),e.toJsonColor(this.colorRange[1])]);this.alphaRange&&(r.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return r}});B.setObject("renderer.TimeRampAger",
D,h);return D})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(D,B,a,c,h){D=D(h,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(g,e,l,r){this.observationRenderer=g;this.latestObservationRenderer=e;this.trackRenderer=l;this.observationAger=r},getSymbol:function(g){var e=g.getLayer(),l=this.getObservationRenderer(g),r=l&&l.getSymbol(g),k=this.observationAger;e.timeInfo&&e._map.timeExtent&&
l===this.observationRenderer&&k&&r&&(r=k.getAgedSymbol(r,g));return r},getObservationRenderer:function(g){return 0===g.getLayer()._getKind(g)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var g={type:"temporal"};g.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(g.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(g.trackRenderer=this.trackRenderer.toJson());this.observationAger&&
(g.observationAger=this.observationAger.toJson());return g}});B.setObject("renderer.TemporalRenderer",D,c);return D})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(D,B,a,c,h,g,e,l,r,k){D=D([k],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,
colorStops:null,constructor:function(f){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof f&&(f=JSON.parse(f)),B.mixin(this,f),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(f){if(!this._supportsCanvas)return!1;var b=f.attributes.imageData;f=f.attributes.size;
if(!f)return null;var d=this._getContext(f[0],f[1]),q=d.getImageData(0,0,f[0],f[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&q.data instanceof window.CanvasPixelArray)for(var m=q.data,n=m.length;n--;)m[n]=b[n];else q.data.set(b);d.putImageData(q,0,0);return new l(d.canvas.toDataURL(),
f[0],f[1])},setColors:function(f){f&&(f instanceof Array||f.colors)&&(this.gradient=this._generateGradient(f.colors||f),this.colors=f);return this},setColorStops:function(f){f&&(f instanceof Array||f.colorStops)&&(this.gradient=this._generateGradient(f.colorStops||f),this.colorStops=f);return this},setMaxPixelIntensity:function(f){this.maxPixelIntensity=f;return this},setMinPixelIntensity:function(f){this.minPixelIntensity=f;return this},setField:function(f){this.field=f;return this},setFieldOffset:function(f){this.fieldOffset=
f;return this},setBlurRadius:function(f){this.blurRadius=f;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var f=B.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(f.fieldOffset=this.fieldOffset);a.forEach(f.colorStops,function(b){b.color=r.toJsonColor(b.color)});
return e.fixJson(f)},_getContext:function(f,b){this._canvas?(this._canvas.width=f,this._canvas.height=b):this._canvas=this._initCanvas(f,b);return this._canvas.getContext("2d")},_initCanvas:function(f,b){var d=c.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},null);d.width=f;d.height=b;document.body.appendChild(d);return d},_generateGradient:function(f,b){b||(b=512);for(var d=this._colorsToStops(f),q=this._getContext(1,b||512),
m=q.createLinearGradient(0,0,0,b),n=0,t;n<d.length;n++)t=d[n],m.addColorStop(t.ratio,t.color.toCss(!0));q.fillStyle=m;q.fillRect(0,0,1,b);return q.getImageData(0,0,1,b).data},_colorsToStops:function(f){var b=[];if(!f[0])return b;if(null!=f[0].ratio)b=a.map(f,function(z){return{ratio:z.ratio,color:this._toColor(z.color)}},this);else if(null!=f[0].value){var d=Infinity;b=-Infinity;var q=0,m;for(m=0;m<f.length;m++){var n=f[m].value;n<d&&(d=n);n>b&&(b=n)}q=b-d;this.maxPixelIntensity=b;this.minPixelIntensity=
d;b=a.map(f,function(z){var w=z.value;z=this._toColor(z.color);return{value:w,ratio:(w-d)/q,color:z}},this)}else{var t=f.length-1;b=a.map(f,function(z,w){return{color:this._toColor(z),ratio:w/t}},this)}return b},_toColor:function(f){f.toRgba||f.declaredClass||(f=new r(f));return f}});B.setObject("renderer.HeatmapRenderer",D,g);return D})},"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),
function(D,B,a,c,h,g,e,l){var r={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};D=D(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(k){k=k||{};this.stretchType=r.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=
this.min=this.max=null;a.mixin(this,k);this.colorRamp=l.fromJson(k.colorRamp)},toJson:function(){var k={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:a.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:a.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};
return g.fixJson(k)},toRenderingRule:function(k){k=k||{};var f=new e;f.functionName="Stretch";var b=this._convertStretchTypeEnumToIndex(this.stretchType),d={StretchType:b,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};g.isDefined(this.min)&&(d.Min=this.min);g.isDefined(this.min)&&(d.Max=this.max);3===b?(d.NumberOfStandardDeviations=this.numberOfStandardDeviations,f.outputPixelType="U8"):6===b?(d.MinPercent=parseFloat(this.minPercent),
d.MaxPercent=parseFloat(this.maxPercent),f.outputPixelType="U8"):5===b?f.outputPixelType="U8":9===b&&(d.SigmoidStrengthLevel=this.sigmoidStrengthLevel);f.functionArguments=d;f.variableName="Raster";return this.colorRamp?(b=new e,b.functionArguments=k.convertToColormap?{Colormap:l.convertColorRampToColormap(this.colorRamp,256)}:{colorRamp:this.colorRamp.toJson()},b.variableName="Raster",b.functionName="Colormap",b.functionArguments.Raster=f,b):f},_convertStretchTypeEnumToIndex:function(k){var f=0;
k===r.TYPE_STANDARDDEVIATION?f=3:k===r.TYPE_HISTOGRAMEQUALIZATION?f=4:k===r.TYPE_MINMAX?f=5:k===r.TYPE_PERCENTCLIP?f=6:k===r.TYPE_SIGMOID&&(f=9);return f},_convertStretchTypeIndexToEnum:function(k){var f=r.TYPE_NONE;3===k?f=r.TYPE_STANDARDDEVIATION:4===k?f=r.TYPE_HISTOGRAMEQUALIZATION:5===k?f=r.TYPE_MINMAX:6===k?f=r.TYPE_PERCENTCLIP:9===k&&(f=r.TYPE_SIGMOID);return f}});a.mixin(D,r);a.setObject("renderer.StretchRenderer",D,h);return D})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,h){var g=D(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(e){if(B.isObject(e)){this._isRFTJson(e)&&(this._isTemplate=!0,this._templateJson=e);var l=0;this.functionName=e.rasterFunction||e.name;this.functionArguments=B.clone(e.rasterFunctionArguments||e.arguments);B.mixin(this,e);
if(e=this.functionArguments)if(e.Raster=this._toRasterFunction(e.Raster),e.Raster2=this._toRasterFunction(e.Raster2),e.DEM=this._toRasterFunction(e.DEM),e.FillRaster=this._toRasterFunction(e.FillRaster),e.Rasters&&e.Rasters.length)for(l=0;l<e.Rasters.length;l++)e.Rasters[l]=this._toRasterFunction(e.Rasters[l])}},_isRFTJson:function(e){return e.name&&e.arguments&&e["function"]&&e.hasOwnProperty("functionType")},_toRasterFunction:function(e){return e&&(e.rasterFunction||e.functionName)?new g(e):e},
_rfToJson:function(e){e&&"esri.layers.RasterFunction"===e.declaredClass&&(e=e.toJson());return e},toJson:function(){if(this._isTemplate)return this._templateJson;var e=B.clone(this.functionArguments||this.arguments);if(e&&(e.Raster=this._rfToJson(e.Raster),e.Raster2=this._rfToJson(e.Raster2),e.DEM=this._rfToJson(e.DEM),e.FillRaster=this._rfToJson(e.FillRaster),e.Rasters&&e.Rasters.length)){var l,r=[];for(l=0;l<e.Rasters.length;l++)r.push(this._rfToJson(e.Rasters[l]));e.Rasters=r}return h.filter({rasterFunction:this.functionName,
rasterFunctionArguments:e,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(k){if(null!==k&&void 0!==k)return!0})}});B.setObject("layers.RasterFunction",g,c);return g})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),function(D,B,a,c,h,g,e){function l(w){if(null==w||"algorithmic"!==w.type&&!w.fromColor)return w;
var y=w.declaredClass?new c:D.clone(w);y.fromColor=w.toColor;y.toColor=w.fromColor;y.algorithm=w.algorithm;return y}function r(w){if(null==w)return null;if("multipart"===w.type||w.colorRamps&&0<w.colorRamps.length){var y=w.declaredClass?new h:D.clone(w);y.colorRamps=B.map(w.colorRamps.slice().reverse(),function(x){return l(x)});return y}return l(w)}function k(w,y,x){if(!w)return{id:null,isInverted:!1};var A=w.name;A&&(w.fromColor||w.colorRamps)&&(w.name=void 0);var v=f(w,y,x);if(v)return A&&(w.name=
A),{id:v,isInverted:!1};v=f(w,y,x,!0);A&&(w.name=A);return v?{id:v,isInverted:!0}:A&&(v=f(w,y,x))?{id:v,isInverted:!1}:{id:null,isInverted:!1}}function f(w,y,x,A){if(w){A&&(w=r(w));y=y||n;x=x||t;var v=null;A=w.declaredClass;var u,C;if((u="string"===typeof w?w:w.name)&&B.some(x,function(E){if(E.name===u)return v=E.id,!0})&&v)return v;"esri.tasks.AlgorithmicColorRamp"===A?B.some(y,function(E){if(d(w.fromColor.toRgb(),E.fromColor)&&d(w.toColor.toRgb(),E.toColor))return v=E.id,!0},this):"esri.tasks.MultipartColorRamp"===
A&&B.some(y,function(E){if(w.colorRamps&&E.colorRamps&&w.colorRamps.length===E.colorRamps.length&&(C=w.colorRamps,!B.some(E.colorRamps,function(F,G){if(!d(C[G].fromColor.toRgb(),F.fromColor)||!d(C[G].toColor.toRgb(),F.toColor))return!0},this))){if(v)return!0;v=E.id}},this);return v}}function b(w){var y=new c,x=w.algorithm;y.fromColor=g.toDojoColor(w.fromColor);y.toColor=g.toDojoColor(w.toColor);x?"esriCIELabAlgorithm"===x?y.algorithm="cie-lab":"esriHSVAlgorithm"===x?y.algorithm="hsv":"esriLabLChAlgorithm"===
x&&(y.algorithm="lab-lch"):y.algorithm="hsv";return y}function d(w,y){if(!w||!y)return!1;w=w.slice(0,3);y=y.slice(0,3);return!B.some(w,function(x,A){if(x>y[A]+2||x<y[A]-2)return!0})}function q(w,y,x){w=e.toLAB(w);y=e.toLAB(y);return e.toRGB({l:w.l*(1-x)+x*y.l,a:w.a*(1-x)+x*y.a,b:w.b*(1-x)+x*y.b})}var m={},n=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,
254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",
fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,
52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,
56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,
110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,
113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,
124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,
127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,
139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,
142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,
154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,
158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,
170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,
173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,
187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,
190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},
{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,
96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,
204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,
9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,
11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,
12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,
12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,
11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,
9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,
102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,
11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,
249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,
253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,
255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,
10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,
13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,
16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,
17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,
18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,
17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],
toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,
15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,
167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,
203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,
237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,
235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,
153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,
14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",
fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,
245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",
type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,
255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,
255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},
{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,
255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,
27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],
toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],t=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",
id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},
{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",
name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",
type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",
name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",
name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",
name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],
z=new a({data:t});D.mixin(m,{predefinedColorRamps:n,predefinedColorRampNameMap:t,getColorRampName:function(w){w=k(w);return w.id?(w=z.query({id:w.id}),w[0]?w[0].name:null):null},fromJson:function(w){var y=null;if(!w)return y;"multipart"===w.type?(y=new h,y.colorRamps=B.map(w.colorRamps,function(x){return b(x)},this)):"algorithmic"===w.type&&(y=b(w));return y},colorsEqual:d,getColorRampId:k,invertColorRamp:r,convertColorRampToColormap:function(w,y){if(w&&y){var x=w.colorRamps?w.colorRamps.length:1,
A=[],v=[],u,C,E,F,G=0,H=0;for(G=0;G<x;G++)A[G]={},A[G].start=H,A[G].end=H+1/x,H=A[G].end;for(G=0;G<y;G++){var J=(G+.5)/y;B.forEach(A,function(I,R){J>=I.start&&J<I.end&&(F=(J-I.start)/(I.end-I.start),1<A.length?(u=e.getDojoColor(w.colorRamps[R].fromColor),C=e.getDojoColor(w.colorRamps[R].toColor)):(u=e.getDojoColor(w.fromColor),C=e.getDojoColor(w.toColor)),E=q(u,C,F),v.push([G,E.r,E.g,E.b]))},this)}return v}},interpolateLabColor:q});return m})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),
function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var e="esriCIELabAlgorithm";break;case "hsv":e="esriHSVAlgorithm";break;case "lab-lch":e="esriLabLChAlgorithm"}e={type:"algorithmic",algorithm:e};e.fromColor=h.toJsonColor(this.fromColor);e.toColor=h.toJsonColor(this.toColor);return e}});B.setObject("tasks.AlgorithmicColorRamp",
D,c);return D})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.ColorRamp",type:null});B.setObject("tasks.ColorRamp",D,c);return D})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(D,B,a,c,h,g){D=D(g,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",
constructor:function(){this.colorRamps=[]},addColorRamp:function(e){this.colorRamps.push(e)},toJson:function(){return{type:"multipart",colorRamps:a.map(this.colorRamps,function(e){return e.toJson()})}}});B.setObject("tasks.MultipartColorRamp",D,h);return D})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(D,B){var a={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],
[.0557,-.204,1.057]],matrixProduct:function(h,g){var e=[],l,r;if(h[0].length!==g.length)throw"dimensions do not match";var k=h.length,f=h[0].length,b=0;for(l=0;l<k;l++){for(r=b=0;r<f;r++)b+=h[l][r]*g[r];e.push(b)}return e},rgb2xyz:function(h){h=[h.r/255,h.g/255,h.b/255].map(function(g){return.04045>=g?g/12.92:Math.pow((g+.055)/1.055,2.4)});h=this.matrixProduct(this.COEF_RGB2XYZ,h);return{x:100*h[0],y:100*h[1],z:100*h[2]}},xyz2rgb:function(h){h=this.matrixProduct(this.COEF_XYZ2RGB,[h.x/100,h.y/100,
h.z/100]).map(function(g){return Math.min(1,Math.max(.0031308>=g?12.92*g:1.055*Math.pow(g,1/2.4)-.055,0))});return{r:Math.round(255*h[0]),g:Math.round(255*h[1]),b:Math.round(255*h[2])}},xyz2lab:function(h){h=[h.x/95.047,h.y/100,h.z/108.883].map(function(g){return g>Math.pow(6/29,3)?Math.pow(g,1/3):1/3*Math.pow(29/6,2)*g+4/29});return{l:116*h[1]-16,a:500*(h[0]-h[1]),b:200*(h[1]-h[2])}},lab2xyz:function(h){var g=h.l;h=[(g+16)/116+h.a/500,(g+16)/116,(g+16)/116-h.b/200].map(function(e){return e>6/29?
Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)});return{x:95.047*h[0],y:100*h[1],z:108.883*h[2]}},lab2lch:function(h){var g=h.l,e=h.a,l=h.b;h=Math.sqrt(e*e+l*l);e=Math.atan2(l,e);e=0<e?e:e+2*Math.PI;return{l:g,c:h,h:e}},lch2lab:function(h){var g=h.c,e=h.h;return{l:h.l,a:g*Math.cos(e),b:g*Math.sin(e)}},rgb2lab:function(h){return this.xyz2lab(this.rgb2xyz(h))},lab2rgb:function(h){return this.xyz2rgb(this.lab2xyz(h))},rgb2lch:function(h){return this.lab2lch(this.xyz2lab(this.rgb2xyz(h)))},lch2rgb:function(h){return this.xyz2rgb(this.lab2xyz(this.lch2lab(h)))}},
c={rgb2hsv:function(h){var g=h.r,e=h.g;h=h.b;var l=Math.max(g,e,h),r=l-Math.min(g,e,h),k;0===r?k=0:l===g?k=(e-h)/r%6:l===e?k=(h-g)/r+2:l===h&&(k=(g-e)/r+4);0>k&&(k+=6);return{h:60*k,s:100*(0===r?0:r/l),v:100/255*l}},hsv2rgb:function(h){var g=(h.h+360)%360/60,e=h.v/100*255;h=h.s/100*e;var l=h*(1-Math.abs(g%2-1));switch(Math.floor(g)){case 0:g={r:h,g:l,b:0};break;case 1:g={r:l,g:h,b:0};break;case 2:g={r:0,g:h,b:l};break;case 3:g={r:0,g:l,b:h};break;case 4:g={r:l,g:0,b:h};break;case 5:case 6:g={r:h,
g:0,b:l};break;default:g={r:0,g:0,b:0}}g.r=Math.round(g.r+e-h);g.g=Math.round(g.g+e-h);g.b=Math.round(g.b+e-h);return g}};return{toRGB:function(h){var g;void 0!==h.r&&void 0!==h.g&&void 0!==h.b?g=h:void 0!==h.l&&void 0!==h.c&&void 0!==h.h?g=a.lch2rgb(h):void 0!==h.l&&void 0!==h.a&&void 0!==h.b?g=a.lab2rgb(h):void 0!==h.x&&void 0!==h.y&&void 0!==h.z?g=a.xyz2rgb(h):void 0!==h.h&&void 0!==h.s&&void 0!==h.v&&(g=c.hsv2rgb(h));return g},toHSV:function(h){if(void 0!==h.h&&void 0!==h.s&&void 0!==h.v)return h;
h=this.toRGB(h);return c.rgb2hsv(h)},toLAB:function(h){return void 0!==h.l&&void 0!==h.a&&void 0!==h.b?h:a.rgb2lab(this.toRGB(h))},toLCH:function(h){return void 0!==h.l&&void 0!==h.c&&void 0!==h.h?h:a.rgb2lch(this.toRGB(h))},toXYZ:function(h){return void 0!==h.x&&void 0!==h.y&&void 0!==h.z?h:a.rgb2xyz(this.toRGB(h))},getDojoColor:function(h){if(h){if(Array.isArray(h))return D.fromArray(h);if(void 0!==h.r&&void 0!==h.g&&void 0!==h.b)return h}},correctRGBLimits:function(h){var g=[h.r,h.g,h.b];B.forEach(g,
function(e,l){0>g[l]?g[l]=0:255<g[l]&&(g[l]=255);g[l]=Math.floor(g[l])});return{r:g[0],g:g[1],b:g[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(D,B,a,c,h,g,e,l){D=D(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(r){r=r||{};this.hillshadeType=r.hillshadeType||"traditional";this.azimuth=null!=r.azimuth?r.azimuth:
315;this.altitude=null!=r.altitude?r.altitude:45;this.zFactor=r.zFactor||1;this.scalingType=r.scalingType||"none";this.pixelSizePower=null!=r.pixelSizePower?r.pixelSizePower:.664;this.pixelSizeFactor=null!=r.pixelSizeFactor?r.pixelSizeFactor:.024;this.removeEdgeEffect=r.removeEdgeEffect||!1;this.colorRamp=l.fromJson(r.colorRamp)},toJson:function(){var r={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return g.fixJson(r)},toRenderingRule:function(r){}});a.setObject("renderer.ShadedReliefRenderer",D,h);return D})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(D,B,a,c,h,g,e,l,r){D=D(l,{declaredClass:"esri.renderer.ColormapRenderer",
constructor:function(k){this.colormapInfos=k&&k.colormapInfos},toJson:function(){var k=g.fixJson;var f={type:"rasterColormap",colormapInfos:B.map(this.colormapInfos||[],function(b,d){var q={};b.color&&null!==b.color&&3<=b.color.length&&(q.color=b.color,q.value=b.value||d,q.label=(b.label||d)+"");return k(q)})};f=a.mixin(this.inherited(arguments),f);return k(f)}});a.setObject("renderer.ColormapRenderer",D,h);return D})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel",
"../support/expressionUtils"],function(D,B,a,c){D.setObject("renderer.arcadeUtils",c,a);return c})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,B,a,c,h,g,e,l){D=new (D(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(r){var k=[];l.hasGeometryOperations(r)&&k.push(e.enableGeometryOperations());
return h(k)},isAsync:function(r){return!1},parse:function(r){return e.createSyntaxTree(r.expression)},compile:function(r){var k=B.clone(this.defaults.context);return r.syntaxTree?e.createFunction(r.syntaxTree,k):null},getEvalOptions:function(r){var k=r.feature;return{context:{vars:{$feature:k&&r.expression.hasVariable("$feature")?g.createFromGraphicLikeObject(k.geometry,k.attributes,r.layer):null},spatialReference:r.spatialReference}}}}));B.setObject("arcadeProfiles.labelingProfile",D,c);return D})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){var n=r("esri-pbf"),t=B(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(w){this._handleSuccess=
a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,w);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var w=new h(this._canceler);this._fetchDfd=w;this._result=null;this._sendRequest();return w.promise},_canceler:function(w){var y=w._pendingRequest;if(!w.isFulfilled()&&y&&!y.isFulfilled()){y.cancel();var x=y.results&&y.results[1]}w._pendingRequest=null;return x},_sendRequest:function(w){var y=this.query;
this.pagination&&(this._startPage=y.resultOffset=null==w?0:w,y.resultRecordCount=this.pageSize);w=this.requestOptions;this._fetchDfd._pendingRequest=k({url:this.url,content:y,handleAs:"pbf"===y.f?"arraybuffer":"json",callbackParamName:"callback",timeout:w&&w.timeout},w);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(w){this.pagination?(w.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(w.features):this._result=w,this._fetchDfd.progress(w),w.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(w),this._fetchDfd.resolve(w))},_handleError:function(w){this._fetchDfd.reject(w)}}),z=B(q,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(w,y){this._handler=
a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=y&&y.source;this.gdbVersion=y&&y.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(w,y,x,A,v){var u=v.assembly;w=this._encode(a.mixin({},this._url.query,{f:A&&A.format||"json"},w.toJson(u&&u[0])));var C=this._handler,
E=this._errorHandler;this.source&&(A={source:this.source.toJson()},w.layer=g.toJson(A));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);var F="pbf"===w.f;if(F){var G;n||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return w=new h,w.addErrback(function(H){E(H,x,v.dfd)}),w.reject(Error(G)),w}G=this.requestOptions;G=k({url:this._url.path+"/query",content:w,callbackParamName:"callback",handleAs:F?"arraybuffer":"json",timeout:G&&G.timeout},G);w=[G];F&&w.push(z.loadPBFReader());
(new e(w)).then(function(H){v.dfd.isFulfilled()||(H=H[0],H[0]?C(H[1],F,y,x,v.dfd):E(H[1],x,v.dfd))});return G},rawExecute:function(w,y,x){y=y||{};w=this._encode(a.mixin({},this._url.query,{f:y.format||"json"},w.toJson(x.assembly&&x.assembly[0])));this.source&&(w.layer=g.toJson({source:this.source.toJson()}));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);return(new t({url:this._url.path+"/query",query:w,requestOptions:this.requestOptions,pagination:y.pagination,pageSize:y.pageSize})).execute().then(null,
null,function(A){x.dfd.progress(A)}).then(a.hitch(this,function(A){this._successHandler([A],"onRawExecuteComplete",null,x.dfd)})).otherwise(a.hitch(this,function(A){this._errorHandler(A,null,x.dfd)}))},executeRelationshipQuery:function(w,y,x){w=this._encode(a.mixin({},this._url.query,{f:"json"},w.toJson()));var A=this._relationshipQueryHandler,v=this._errorHandler;this.gdbVersion&&(w.gdbVersion=this.gdbVersion);var u=new h(f._dfdCanceller),C=this.requestOptions,E=this._url.path;this.source&&void 0!==
this.source.mapLayerId&&null!==this.source.mapLayerId&&E.endsWith("/dynamicLayer")&&(E=E.slice(0,-13),E=E+"/"+this.source.mapLayerId);u._pendingDfd=k({url:E+"/queryRelatedRecords",content:w,callbackParamName:"callback",timeout:C&&C.timeout,load:function(F,G){A(F,G,y,x,u)},error:function(F){v(F,x,u)}},C);return u},executeForIds:function(w,y,x,A){var v=A.assembly;w=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},w.toJson(v&&v[0])));var u=this._executeForIdsHandler,C=this._errorHandler;
this.source&&(v={source:this.source.toJson()},w.layer=g.toJson(v));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);v=this.requestOptions;return k({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:v&&v.timeout,load:function(E,F){u(E,F,y,x,A.dfd)},error:function(E){C(E,x,A.dfd)}},v)},executeForCount:function(w,y,x,A){var v=A.assembly;w=this._encode(a.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},w.toJson(v&&v[0])));var u=this._countHandler,C=this._errorHandler;
this.source&&(v={source:this.source.toJson()},w.layer=g.toJson(v));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);v=this.requestOptions;return k({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:v&&v.timeout,load:function(E,F){u(E,F,y,x,A.dfd)},error:function(E){C(E,x,A.dfd)}},v)},executeForExtent:function(w,y,x,A){var v=A.assembly;w=this._encode(a.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},w.toJson(v&&v[0])));var u=this._extentHandler,C=
this._errorHandler;this.source&&(v={source:this.source.toJson()},w.layer=g.toJson(v));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);v=this.requestOptions;return k({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:v&&v.timeout,load:function(E,F){u(E,F,y,x,A.dfd)},error:function(E){C(E,x,A.dfd)}},v)},_handler:function(w,y,x,A,v){try{w&&y&&(w=z.pbfDeps.optimizedFeatures.convertToFeatureSet(z.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(w)));var u=new m(w);this._successHandler([u],
"onComplete",x,v)}catch(C){this._errorHandler(C,A,v)}},_relationshipQueryHandler:function(w,y,x,A,v){try{var u=w.geometryType,C=w.spatialReference,E={};c.forEach(w.relatedRecordGroups,function(F){var G={};G.geometryType=u;G.spatialReference=C;G.features=F.relatedRecords;G=new m(G);if(null!=F.objectId)E[F.objectId]=G;else for(var H in F)F.hasOwnProperty(H)&&"relatedRecords"!==H&&(E[F[H]]=G)});this._successHandler([E],"onExecuteRelationshipQueryComplete",x,v)}catch(F){this._errorHandler(F,A,v)}},_executeForIdsHandler:function(w,
y,x,A,v){try{this._successHandler([w.objectIds],"onExecuteForIdsComplete",x,v)}catch(u){this._errorHandler(u,A,v)}},_countHandler:function(w,y,x,A,v){try{var u=w.features,C=w.objectIds;if(C)var E=C.length;else{if(u)throw Error("Unable to perform query. Please check your parameters.");E=w.count}this._successHandler([E],"onExecuteForCountComplete",x,v)}catch(F){this._errorHandler(F,A,v)}},_extentHandler:function(w,y,x,A,v){try{w.extent&&(w.extent=new b(w.extent)),this._successHandler([w],"onExecuteForExtentComplete",
x,v)}catch(u){this._errorHandler(u,A,v)}}});z.loadPBFReader=function(){var w=new h;z.pbfDeps?w.resolve():D(["./support/pbfDeps"],function(y){z.pbfDeps=y;w.isFulfilled()||w.resolve()});return w.promise};d._createWrappers(z);a.setObject("tasks.QueryTask",z,l);return z})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(D,B,a,c,h,g,e,l){var r=D(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=r.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(k){var f={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},b=k&&k.geometry||this.geometry,d=this.objectIds,q=this.outFields,m=this.outSpatialReference,n=this.groupByFieldsForStatistics,t=this.orderByFields,z=this.outStatistics;k=this.distance;b&&(f.geometry=b,f.geometryType=e.getJsonType(b),f.inSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));d&&(f.objectIds=d.join(","));q&&(f.outFields=q.join(","));null!=this.returnCentroid&&(f.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(f.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(f.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(f.maxRecordCountFactor=this.maxRecordCountFactor);n&&(f.groupByFieldsForStatistics=n.join(","));t&&(f.orderByFields=t.join(","));if(z){var w=[];a.forEach(z,function(y){w.push(y.toJson())});f.outStatistics=c.toJson(w)}m?f.outSR=m.wkid||c.toJson(m.toJson()):b&&(f.outSR=b.spatialReference.wkid||c.toJson(b.spatialReference.toJson()));b=
this.timeExtent;f.time=b?b.toJson().join(","):null;(b=this.relationParam)&&this.spatialRelationship===r.SPATIAL_REL_RELATION&&(f.relationParam=b);k&&(f.distance=this.distance,this.hasOwnProperty("units")?f.units=this._units[this.units]||this._units.meters:f.units=this._units.meters);this.hasOwnProperty("start")&&(f.resultOffset=this.start,f.resultRecordCount=10,""===f.where&&(f.where="1\x3d1"));this.hasOwnProperty("num")&&(f.resultRecordCount=this.num);f.resultType=this.resultType;null!=this.cacheHint&&
(f.cacheHint=this.cacheHint);f.pixelSize=this.pixelSize?c.toJson(this.pixelSize.toJson()):null;f.multipatchOption=this.multipatchOption;this.quantizationParameters&&(f.quantizationParameters=c.toJson(this.quantizationParameters));f._ts=this._ts;return f}});B.mixin(r,l);B.setObject("tasks.Query",r,g);return r})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(D,B,a){B={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};D.setObject("tasks._SpatialRelationship",B,a);return B})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json",
"dojo/has","../kernel"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var g={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},e=this.objectIds,l=this.outFields,r=this.outSpatialReference,
k=this.orderByFields;e&&(g.objectIds=e.join(","));l&&(g.outFields=l.join(","));r&&(g.outSR=r.wkid||a.toJson(r.toJson()));k&&(g.orderByFields=k.join(","));g._ts=this._ts;return g}});B.setObject("tasks.RelationshipQuery",D,h);return D})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});B.setObject("tasks.StatisticDefinition",D,c);return D})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I){var R=-1!==b.renderer.toLowerCase().indexOf("svg"),O=-1!==b.renderer.toLowerCase().indexOf("canvas"),P=O?"canvas-2d":b.renderer,L=9>y("ie");e=10===y("ie");var K=void 0===y("ie")&&7==y("trident"),Q=e||K,W=y("esri-touch"),ba=!!y("chrome"),S=n.isWebGLEnabled(),X=R&&y("esri-will-change"),aa=S||O;n=B(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(M,da){var ea=this._connects=[];this._map=M;this._useWillChange=
this._useGlobalTransform="css-transforms"===M.navigationMode&&X;if(aa){var Z=r.create("div",{style:{position:"absolute",overflow:"visible"}},da);this._surface={getEventSource:function(){return Z}};O&&(ea.push(c.connect(Z,"onmousedown",this,this._canvasDownHandler)),ea.push(c.connect(Z,"onmouseup",this,this._canvasUpHandler)),ea.push(c.connect(Z,"onclick",this,this._canvasClickHandler)));S&&(this._webglSurface=new t({map:M,node:Z}))}else Z=(this._surface=b.createSurface(da,M.width,M.height)).getEventSource(),
this._useWillChange&&k.set(Z,"will-change","transform"),k.set(Z=L?Z.parentNode:Z,{overflow:"visible",position:"absolute"});ea.push(c.connect(M,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ea.push(c.connect(M,"onPan",this,"_onPanHandler")),ea.push(c.connect(M,"onPanEnd",this,"_onPanEndHandler")),ea.push(c.connect(M,"onExtentChange",this,"_onExtentChangeHandler")));return Z},_reorderLayer:function(M,da,ea){da=da.getEventSource();aa&&"svg"===M.surfaceType&&(da=da.parentNode);r.place(da,
this._surface.getEventSource(),ea)},_onPanHandler:function(M,da){var ea=this._map.__visibleRect,Z=ea.x+da.x;ea=ea.y+da.y;this._panDx=Z;this._panDy=ea;aa||k.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(Z,ea))},_onPanEndHandler:function(M,da){var ea=this._map.__visibleRect,Z=ea.x;ea=ea.y;this._panDx=Z;this._panDy=ea;aa||k.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(Z,ea))},_onExtentChangeHandler:function(M,da,ea,Z){ea&&(this._panDy=this._panDx=
0,aa||k.set(this._surface.getEventSource(),z._css.names.transform,z._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(M,da,ea){M=this._surface.getEventSource();var Z=this._map,ka;L&&k.set(M=M.parentNode,{width:da+"px",height:ea+"px",clip:"rect(0px "+da+"px "+ea+"px 0px)"});l.set(M,"width",da);l.set(M,"height",ea);this._surface.declaredClass||g.forEach(M.childNodes,function(va){l.set(va,"width",da);l.set(va,"height",ea)});Z.loaded&&
(Z.graphics.suspended||(Z.graphics._resized=!0),g.forEach(Z.graphicsLayerIds,function(va){ka=Z.getLayer(va);ka.suspended||(ka._resized=!0,ka._childLayer&&(ka._childLayer._resized=!0));ka._updateSVGFilters(null,null,da,ea)}),Z.graphics._updateSVGFilters(null,null,da,ea),Z._labels&&Z._labels._updateSVGFilters(null,null,da,ea))},_cleanUp:function(){g.forEach(this._connects,c.disconnect,c);this._map=this._surface=null},_processEvent:function(M){var da=this._map;M.screenPoint=new F(M.pageX-da.position.x,
M.pageY-da.position.y);M.mapPoint=da.toMap(M.screenPoint)},_canvasDownHandler:function(M){this._processEvent(M);this._downPt=M.screenPoint.x+","+M.screenPoint.y},_canvasUpHandler:function(M){this._processEvent(M);this._upPt=M.screenPoint.x+","+M.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(M,da,ea,Z){if(!M.visible||!da)return!1;var ka=da.getTransformedBoundingBox();if(ka){var va=new G(ka[0].x,ka[0].y,ka[2].x,ka[2].y);delete va.spatialReference;return W?va.intersects(ea):va.contains(Z)}return g.some(da.children||
[],function(Ea){ka=Ea.getTransformedBoundingBox();va=new G(ka[0].x,ka[0].y,ka[2].x,ka[2].y);delete va.spatialReference;return W?va.intersects(ea):va.contains(Z)})},_canvasClickHandler:function(M){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(M);var da=this._map,ea=g.map(da.graphicsLayerIds,function(za){return da.getLayer(za)});ea.push(da.graphics);ea.reverse();ea=g.filter(ea,function(za){return za.loaded&&!za.hasWebGLSurface()&&za._mouseEvents&&!za.suspended&&(!w.isDefined(za.opacity)||
0<za.opacity)});var Z=M.screenPoint,ka=this._tolerance,va=Z.x-ka,Ea=Z.y+ka,Ga=Z.x+ka;ka=Z.y-ka;var na=new G(va,ka,Ga,Ea);va=da.toMap(new F(va,Ea));Ga=da.toMap(new F(Ga,ka));Ea=va.spatialReference._getInfo();var ma=new G(G.prototype._normalizeX(va.x,Ea).x,va.y,G.prototype._normalizeX(Ga.x,Ea).x,Ga.y,va.spatialReference),ya;delete na.spatialReference;g.some(ea,function(za){za=g.filter(za.graphics,function(ha){return this._isPrimaryMatch(ha,ha.getDojoShape(),na,Z)||!(!ha._bgShape||!this._isPrimaryMatch(ha,
ha._bgShape,na,Z))},this);za.reverse();if(0<za.length){var Ba;g.some(za,function(ha){return ha.geometry&&ma.intersects(ha.geometry)?(Ba=ha,!0):!1});if(Ba)return ya=Ba,!0}return!1},this);ya&&(ea=ya.getLayer())&&(M.graphic=ya,ea.onClick(M))}}});m=B(m,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:P,webglEnabled:S,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(M,da){M=
M||{};if(h.isString(M)||h.isObject(M)&&(M.layerDefinition||M.query))M=da;this._params=h.mixin({displayOnPan:!0,drawMode:!0,styling:!0},M);var ea=this._params.dataAttributes;"string"===typeof ea&&(ea=[ea]);this.styling=R?this._params.styling:!0;this.dataAttributes=ea;this.infoTemplate=M&&M.infoTemplate;this.graphics=[];this._draw=h.hitch(this,this._draw);this._refresh=h.hitch(this,this._refresh);this._acquireSVGMarker=h.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=h.hitch(this,this._evalSurfaceType);
this._setSurfaceType=h.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(M){this._params.drawMode=M},suspendGraphics:function(M){this._suspendGraphics=M;g.forEach(this.graphics,function(da){da._suspended=M})},setWebGLEnabled:function(M){var da=this.webglEnabled;this.webglEnabled=(M||!1)&&S;da!==this.webglEnabled&&
(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(M){return M&&"webgl"===M.surfaceType?"webgl":P},_evalSurfaceType:function(M){S&&(M?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;var M=this._canUseWebGLSurface()?"webgl":P;this.surfaceType!==M?(this.surfaceType=M,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(h.hitch(this,function(M){this._webglDepsPromise=null;M&&"cancel"===M.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var M=this._map,da=this._div;M&&da&&this._getSurfaceType(da)!==this.surfaceType&&(M._detachGraphicsLayer(this),M._attachGraphicsLayer(this))},_canUseWebGLSurface:function(M){M=M||this._map;return this.webglEnabled&&(!M||M.webglEnabled&&(M.ownsWebGLContext(this)||M.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(M){var da=
new a;!this.webglDeps&&this._canUseWebGLSurface(M)?D(["./support/webglDeps"],h.hitch(this,function(ea){this.webglDeps=ea;da.isFulfilled()||da.resolve()})):da.resolve();return da.promise},_setMap:function(M,da){this.inherited(arguments);this._map=M;this._evalSurfaceType(!0);this._webglChangeMapHandle=M.on("webgl-enabled-change",h.hitch(this,function(){this._evalSurfaceType()}));this._wrap=M.wrapAround180;this._srInfo=M.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())M.acquireWebGLContext(this),
this._div=M._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,M.width,M.height,this);else{if("svg"===this.surfaceType)if(aa){da=b.createSurface(da.getEventSource(),M.width,M.height);var ea=da.getEventSource();k.set(ea,{position:"absolute",overflow:"visible",pointerEvents:"none"});M._gc._useWillChange&&k.set(ea,"will-change","transform");this._div=da.createGroup();k.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=da.createGroup();else da=b.createSurface(da.getEventSource(),
M.width,M.height),k.set(da.rawNode,"position","absolute"),this._div=da.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=h.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(M,da){M.releaseWebGLContext(this);"webgl"===this._div.surfaceType?M._gc._webglSurface.destroyRenderer(this._div):(g.forEach(this.graphics,function(ea){ea._shape=null}),
"svg"===this.surfaceType?aa?(da=this._div.parent,this._div.clear(),da.remove(this._div),r.destroy(this._div.getEventSource()),r.destroy(da.getEventSource())):(this._div.clear(),da.remove(this._div),r.destroy(this._div.getEventSource())):(da=this._div.getParent(),da._parent={},r.destroy(da.rawNode),da.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var M=this.opacity;w.isDefined(M)&&1>M&&this.setOpacity(M,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||A.hide(this._div.getEventSource())},_onExtentChangeHandler:function(M,da,ea,Z){clearTimeout(this._wakeTimer);this._wakeTimer=null;ea?(M=this._map.__visibleRect,da=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(da,M.x,M.y,!0),this._renderProto&&da.surface.pendingRender?this._dirty=!0:this.suspended||A.show(da.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var M=this._div;this._dirty&&(delete this._dirty,this.suspended||A.show(M.getEventSource()));return this._renderProto.apply(M,arguments)},_refresh:function(M){if(!this.hasWebGLSurface()){var da=this.graphics,ea=da.length,
Z,ka=this._draw;for(Z=0;Z<ea;Z++)ka(da[Z],M)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var M={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(M=this._div.getTransform()):M=this._map._gc._getTransform());return M},_onPanHandler:function(M,da){this._panDx=da.x;this._panDy=da.y;var ea=this._map.__visibleRect;this._updateTransform(this._div,ea.x+da.x,ea.y+da.y);K&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(M,da){var ea=this._map.__visibleRect;this._params._child||da.x===this._panDx&&da.y===this._panDy?(this._updateSVGFilters(-ea.x,-ea.y),this._updateSVGMarkers()):this._updateTransform(this._div,ea.x,ea.y,!0);this._refresh(!1);
if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){A.hide(this._div.getEventSource())},_onPanEndHandler:function(){var M=this._map.__visibleRect,da=this._div;this._updateTransform(da,M.x,M.y,!0);this._refresh(!1);this._renderProto&&da.surface.pendingRender?this._dirty=!0:A.show(da.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(M,da,ea,Z){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?M.setTransform(d.translate({x:da,y:ea})):aa&&
k.set(this._div.parent.getEventSource(),z._css.names.transform,z._css.translate(da,ea)),Z&&(this._updateSVGFilters(-da,-ea),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);A.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(M){this.inherited(arguments);M.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(h.hitch(this,function(){this.suspended||
this._map.__zooming||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var M=this._map,da=c.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=da(M,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=da(M,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=da(M,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=da(M,"onPanEnd",this,"_onPanEndHandler"));
this._onZoomStartHandler_connect=da(M,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=da(M,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var M=c.disconnect;M(this._onExtentChangeHandler_connect);M(this._onZoomStartHandler_connect);M(this._onPanHandler_connect);M(this._onPanStartHandler_connect);M(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=
this._onPanEndHandler_connect=null},_updateExtent:function(M){var da=M.geometry;if(!da)M._extent=null;else if(!(M._extent=da.getExtent())){if("esri.geometry.Point"===da.declaredClass){var ea=da.x;var Z=da.y}else if("esri.geometry.Multipoint"===da.declaredClass)ea=da.points[0][0],Z=da.points[0][1];else{M._extent=null;return}M._extent=new G(ea,Z,ea,Z,da.spatialReference)}},_intersects:function(M,da,ea){var Z=M.spatialReference,ka=da.spatialReference,va=Z&&ka&&!Z.equals(ka)&&Z._canProject(ka)&&4326===
ka.wkid;if(this._wrap&&!ea){ea=[];Z=M._getFrameWidth();var Ea=this._srInfo,Ga=M._clip?M._getAvailExtent():M.extent,na,ma=[];var ya=da._partwise;va&&(Ga=M.geographicExtent,Ea=ka._getInfo());M=Ga._getParts(Ea);if(ya&&ya.length)for(da=[],ka=0,va=ya.length;ka<va;ka++)da=da.concat(ya[ka]._getParts(Ea));else da=da._getParts(Ea);ka=0;for(va=da.length;ka<va;ka++){var za=da[ka];Ea=0;for(Ga=M.length;Ea<Ga;Ea++){var Ba=M[Ea];if(Ba.extent.intersects(za.extent))for(ya=0,na=za.frameIds.length;ya<na;ya++)ea.push((Ba.frameIds[0]-
za.frameIds[ya])*Z)}}ka=0;for(va=ea.length;ka<va;ka++)ya=ea[ka],g.indexOf(ea,ya)===ka&&ma.push(ya);return ma.length?ma:null}return(va?M.geographicExtent:M.extent).intersects(da)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(M,da){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ea=M._extent,Z,ka,va=!R||this.styling,Ea=R&&this.dataAttributes,Ga=M.getDojoShape(),
na;if(!M._suspended&&M.visible&&ea&&(Z=this._intersects(this._map,ea,M.geometry._originOnly))&&(ka=va?this._getSymbol(M):this._defaultMarker)){if(M._offsets&&M._offsets.join(",")===Z.join(",")?na=!0:M._offsets=Z,!Ga||da||!na){var ma=M.geometry.type;ea={graphic:M};var ya=M._bgShape,za=va&&!M.symbol?this._getRenderer(M):null,Ba=za&&za.backgroundFillSymbol;if("point"===ma)this._isInvalidShape(ka,Ga)&&this._removeShape(M),M._shape=this._drawPoint(this._div,M.geometry,ka,M.getDojoShape(),Z,za,M),va&&this._symbolizePoint(M.getDojoShape(),
ka,za,M);else if("multipoint"===ma)this._drawMarkers(M,ka,Z,za),va&&this._symbolizeMarkers(M,ka,za);else{var ha;ma=ka;var qa;va&&(ma=(ha="simplemarkersymbol"===ka.type||"picturemarkersymbol"===ka.type||"textsymbol"===ka.type?ka:null)?Ba:ka);if(va&&ma&&-1<ma.type.indexOf("fillsymbol")){var T=this._bgGroup;var Ha=!(!T||!ha)}ya&&!Ha&&this._removeBgShape(M);if(ma){!Ha&&(this._isInvalidShape(ma,M._shape)||M._shape&&M._shape._isCentroidMarker)&&this._removeShape(M,!1);if(qa=this._drawShape(M,Z,T||this._div,
Ha?ya:M.getDojoShape()))qa._isCentroidMarker=!1;va&&this._symbolizeShape(qa,ma,za,ma===Ba,M);M[Ha?"_bgShape":"_shape"]=qa}if(ha){(this._isInvalidShape(ha,M._shape)||M._shape&&!M._shape._isCentroidMarker)&&this._removeShape(M,!1);var Ja=M.geometry.getCentroid();if(qa=Ja&&this._drawPoint(this._div,Ja,ha,M._shape,Z,za,M))qa._isCentroidMarker=!0,this._symbolizePoint(qa,ha,za,M);M._shape=qa}}O||(M._bgShape&&this._initNode(M,M._bgShape,M._bgShape!==ya,ea,Ea),M._shape&&this._initNode(M,M._shape,M._shape!==
Ga,ea,Ea));M._applyDataAttrs();ea.node=M.getNode();this.onGraphicDraw(ea)}}else Ga&&this._removeShape(M)}catch(fa){this._errorHandler(fa,M)}},_initNode:function(M,da,ea,Z,ka){if(da=da&&da.getNode())da.e_graphic=M,this._addDataAttrs(M,ka,da),ea&&(Z.node=da,this.onGraphicNodeAdd(Z))},_removeShape:function(M,da,ea){var Z=M.getDojoShape(),ka=Z&&Z.getNode();Z&&!ea&&(Z.removeShape(),Z.destroy());M._shape=M._offsets=null;!1!==da&&this._removeBgShape(M,ea);if(ka&&(ka.e_graphic=null,!O))this.onGraphicNodeRemove({graphic:M,
node:ka})},_removeBgShape:function(M,da){var ea=M._bgShape,Z=ea&&ea.getNode();ea&&!da&&(ea.removeShape(),ea.destroy());M._bgShape=null;if(Z&&(Z.e_graphic=null,!O))this.onGraphicNodeRemove({graphic:M,node:Z})},_addDataAttrs:function(M,da,ea){var Z=M.attributes,ka,va=da?da.length:0,Ea=this._getRenderer(M);if(ea&&Z){for(ka=0;ka<va;ka++)(ea=da[ka])&&M.attr("data-"+ea,Z[ea]);!this.styling&&Ea&&(Ea.getBreakIndex?(da=Ea.getBreakIndex(M),M.attr("data-class-break",-1!==da?da:null)):Ea.getUniqueValueInfo&&
(da=Ea.getUniqueValueInfo(M),M.attr("data-unique-value",da?da.value:null)))}},_drawShape:function(M,da,ea,Z){M=M.geometry;var ka=M.type,va=this._map,Ea=va.extent,Ga=va.width,na=va.height;va=va.__visibleRect;var ma=[],ya;var za="extent"===ka;if("rect"===ka||za)ma={x:0,y:0,spatialReference:M.spatialReference},ma.x=za?M.xmin:M.x,ma.y=za?M.ymax:M.y,ka=J.toScreenPoint(Ea,Ga,na,ma),ma.x=za?M.xmax:M.x+M.width,ma.y=za?M.ymin:M.y+M.height,M=J.toScreenPoint(Ea,Ga,na,ma),da={x:ka.x-va.x+da[0],y:ka.y-va.y,width:Math.abs(M.x-
ka.x),height:Math.abs(M.y-ka.y)},0===da.width&&(da.width=1),0===da.height&&(da.height=1),Z=this._drawRect(ea,Z,da);else if("polyline"===ka||"polygon"===ka){za=0;for(ya=da.length;za<ya;za++)ma=ma.concat(J._toScreenPath(Ea,Ga,na,M,-va.x+da[za],-va.y));Z=this._drawPath(ea,Z,ma);this._rendererLimits&&("polyline"===ka?this._clipPolyline(Z,M):this._clipPolygon(Z,M))}return Z},_drawRect:function(M,da,ea){return da?da.setShape(ea):M.createRect(ea)},_drawImage:function(M,da,ea){return da?da.setShape(ea):M.createImage(ea)},
_drawCircle:function(M,da,ea){return da?da.setShape(ea):M.createCircle(ea)},_drawPath:function(){return L?function(M,da,ea,Z){ea=Z?ea:ea.join(" ");if(da)return da.setShape(ea);da=M.createObject(Z?b.Path:b.EsriPath,ea);M._overrideSize(da.getEventSource());return da}:function(M,da,ea,Z){ea=Z?ea:ea.join(" ");return da?da.setShape(ea):M.createPath(ea)}}(),_drawText:function(M,da,ea){return da?da.setShape(ea):M.createText(ea)},_evalSDRenderer:function(M){var da=this._map,ea=this.renderer,Z,ka=this._rndForScale;
da&&da.loaded&&ea&&ea.getRendererInfo&&(Z="zoom"===ea.rangeType?ea.getRendererInfoByZoom(da.getZoom()):ea.getRendererInfoByScale(da.getScale()));this._rndForScale=Z&&Z.renderer;M||this._rndForScale==ka||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(M){var da=this._rndForScale||this.renderer;M&&da&&da.getObservationRenderer&&(da=da.getObservationRenderer(M));return da},_getSymbol:function(M){var da=this._getRenderer();return M.symbol||da&&da.getSymbol(M)},_getVariable:function(M,
da,ea){if(M)var Z=(M=M.getVisualVariablesForType(da,ea))&&M[0];return Z},_applyOpacity:function(M,da,ea,Z){da=da.getOpacity(Z,{opacityInfo:ea});null!=da&&(M=new x(M),M.a=da);return M},_symbolizeShape:function(M,da,ea,Z,ka){var va=da.getStroke(),Ea=da.getFill(),Ga=da.type,na=-1!==Ga.indexOf("linesymbol"),ma=-1!==Ga.indexOf("fillsymbol")?null:this._getVariable(ea,"sizeInfo",!1),ya=this._getVariable(ea,"colorInfo",!1),za=this._getVariable(ea,"opacityInfo",!1),Ba=na?"none"!==da.style:da.outline&&"none"!==
da.outline.style,ha=na?null:this._getVariable(ea,"sizeInfo","outline");ma=(ma=Z?ha:ha||ma)?ea.getSize(ka,{sizeInfo:ma,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;Z&&(ya=za=null);if((ya||za)&&"picturefillsymbol"!==Ga)if(na){var qa=va&&va.color;ya&&(qa=ea.getColor(ka,{colorInfo:ya})||qa);qa&&za&&(qa=this._applyOpacity(qa,ea,za,ka))}else if(Ea&&Ea.toCss){var T=Ea;ya&&(T=ea.getColor(ka,{colorInfo:ya})||T);T&&za&&(T=this._applyOpacity(T,ea,za,ka))}M.setStroke(!Ba||null==
ma&&!qa?va:h.mixin({},va,null!=ma?{width:ma}:null,qa&&{color:qa})).setFill(T||Ea);na&&C.applyLineMarker(M,da,qa,this._acquireSVGMarker)},_smsToPath:function(){return L?function(M,da,ea,Z,ka,va,Ea,Ga,na){switch(da){case M.STYLE_SQUARE:return["M",ka+","+Ea,"L",va+","+Ea,va+","+Ga,ka+","+Ga,"X","E"];case M.STYLE_CROSS:return["M",ea+","+Ea,"L",ea+","+Ga,"M",ka+","+Z,"L",va+","+Z,"E"];case M.STYLE_X:return["M",ka+","+Ea,"L",va+","+Ga,"M",ka+","+Ga,"L",va+","+Ea,"E"];case M.STYLE_DIAMOND:return["M",ea+
","+Ea,"L",va+","+Z,ea+","+Ga,ka+","+Z,"X","E"];case M.STYLE_TARGET:return["M",ka+","+Ea,"L",va+","+Ea,va+","+Ga,ka+","+Ga,ka+","+Ea,"M",ka-na+","+Z,"L",ka+","+Z,"M",ea+","+(Ea-na),"L",ea+","+Ea,"M",va+na+","+Z,"L",va+","+Z,"M",ea+","+(Ga+na),"L",ea+","+Ga,"E"]}}:function(M,da,ea,Z,ka,va,Ea,Ga,na){switch(da){case M.STYLE_SQUARE:return["M",ka+","+Ea,va+","+Ea,va+","+Ga,ka+","+Ga,"Z"];case M.STYLE_TRIANGLE:return["M",ea+","+Ea,va+","+Ga,ka+","+Ga,"Z"];case M.STYLE_CROSS:return["M",ea+","+Ea,ea+","+
Ga,"M",ka+","+Z,va+","+Z];case M.STYLE_X:return["M",ka+","+Ea,va+","+Ga,"M",ka+","+Ga,va+","+Ea];case M.STYLE_DIAMOND:return["M",ea+","+Ea,va+","+Z,ea+","+Ga,ka+","+Z,"Z"];case M.STYLE_TARGET:return M=["M",ka+","+Ea,va+","+Ea,va+","+Ga,ka+","+Ga,ka+","+Ea],na&&M.push("M",ka-na+","+Z,ka+","+Z,"M",ea+","+(Ea-na),ea+","+Ea,"M",va+na+","+Z,va+","+Z,"M",ea+","+(Ga+na),ea+","+Ga),M}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",
simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(M,da){var ea=da&&da.shape&&da.shape.type,Z=M&&M.type,ka=M&&M.style;"rect"===ea&&(ea="path");Z&&(ka=this._typeMaps[Z]||ka);this._pathStyles[ka]&&(ka="path");return"shieldlabelsymbol"===Z?!0:!(!ea||!ka||ea===ka)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(M,da,ea,Z,ka,va,Ea){var Ga=ea.type,na=this._map,ma=na.__visibleRect,ya=J.toScreenPoint(na.extent,
na.width,na.height,da).offset(-ma.x+ka[0],-ma.y);ma=ya.x;var za=ya.y;da=[];var Ba=this._getVariable(va,"rotationInfo",!1);Ba=Ba?va.getRotationAngle(Ea,{rotationInfo:Ba}):null;var ha=this._getVariable(va,"sizeInfo",!1);na=null!=Ea.size?Ea.size:ha&&va.getSize(Ea,{sizeInfo:ha,shape:ea.style,resolution:na.getResolutionInMeters(),scale:na.getScale()});Ba&&da.push(d.rotategAt(Ba,ya));if(0!==ea.xoffset||0!==ea.yoffset){var qa=d.translate(ea.xoffset,-ea.yoffset);da.push(qa)}0!==ea.angle&&da.push(d.rotategAt(ea.angle,
ya));if("simplemarkersymbol"===Ga){var T=ea.style;va=Math.round;null!=na?qa&&(null!=qa.dx&&(qa.dx=qa.dx/ea.size*na),null!=qa.dy&&(qa.dy=qa.dy/ea.size*na)):na=ea.size;switch(T){case u.STYLE_SQUARE:case u.STYLE_TRIANGLE:case u.STYLE_CROSS:case u.STYLE_X:case u.STYLE_DIAMOND:ea=isNaN(na)?16:na/2;T=this._drawPath(M,Z,this._smsToPath(u,T,ma,za,va(ma-ea),va(ma+ea),va(za-ea),va(za+ea)));break;case u.STYLE_TARGET:Ea=ea._targetWidth/2;qa=ea._targetHeight/2;T=this._drawPath(M,Z,this._smsToPath(u,T,ma,za,va(ma-
Ea),va(ma+Ea),va(za-qa),va(za+qa),ea._spikeSize));break;case u.STYLE_PATH:T=this._drawPath(M,Z,ea.path,!0);ea=T.getBoundingBox();M=this._getScaleMatrix(ea,na);1===M.xx&&1===M.yy||da.push(d.scaleAt(M.xx,M.yy,ya));da.push(d.translate(-(ea.x+ea.width/2)+ma,-(ea.y+ea.height/2)+za));break;default:ea=isNaN(na)?16:na/2,T=this._drawCircle(M,Z,{cx:ma,cy:za,r:ea})}}else if("shieldlabelsymbol"===Ga)T=ea.width,ya=ea.height,Z=M.createGroup(),T=M.createImage({x:ma-T/2,y:za-ya/2,width:T,height:ya,src:ea.url}),Z.add(T),
null!=ea.font&&(za+=.2*ea.getHeight(),M=M.createText({type:"text",text:ea.text,x:ma,y:za,align:"middle",decoration:ea.decoration,rotated:ea.rotated,kerning:ea.kerning}),M.setFont(ea.font),M.setFill(ea.color),Z.add(M)),T=Z;else if("picturemarkersymbol"===Ga){if(null==na?(T=ea.width,ya=ea.height):(ya=na,T=ea.width/ea.height*ya,qa&&(null!=qa.dx&&(qa.dx=qa.dx/ea.width*T),null!=qa.dy&&(qa.dy=qa.dy/ea.height*ya))),T=this._drawImage(M,Z,{x:ma-T/2,y:za-ya/2,width:T,height:ya,src:ea.url}),R&&(M=T.getNode()))ea=
(ea=this._getVariable(va,"opacityInfo",!1))?va.getOpacity(Ea,{opacityInfo:ea}):null,null!=ea?M.setAttribute("opacity",ea):M.setAttribute("opacity",1)}else if("textsymbol"===Ga){if(va=ea.font){T=null!=na;Ea=va.family&&!this._reArialFont.test(va.family);if(T||Ea||O)va=new va.constructor(va.toJson());T&&va.setSize(na);O&&(va.size+="px");Ea&&va.setFamily(va.family+","+this._fallbackFont)}T=this._drawText(M,Z,{type:"text",text:ea.text,x:ma,y:za,align:ea.getSVGAlign(),decoration:ea.decoration||va&&va.decoration,
rotated:ea.rotated,kerning:ea.kerning});va&&T.setFont(va);R&&(M=T.getNode(),ma=ea.getSVGBaseline(),za=ea.getSVGBaselineShift(),M&&(M.setAttribute("dominant-baseline",ma),za&&M.setAttribute("baseline-shift",za),this._applyHalo(T,ea.haloColor,ea.haloSize)))}T.setTransform(d.multiply(da));T._wrapOffsets=ka;return T},_acquireSVGMarker:function(M,da,ea,Z){M=this._getSVGMarkerId(da,Z);var ka=this._getSVGMarker(M);ka||(ka=C.createSVGMarker(da,M,ea,Z),this._div.getParent().defNode.appendChild(ka),this._lineMarkers[M]=
ka);return ka},_getSVGMarkerId:function(M,da){return"marker_"+this._map.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+da},_getSVGMarker:function(M){return this._lineMarkers[M]},_updateSVGMarkers:function(){if(R&&Q){var M=this._lineMarkers,da;for(da in M){var ea=M[da];ea.setAttribute("id",da+"_temp");ea.setAttribute("id",da)}}},_applyHalo:function(M,da,ea){var Z=da&&ea?this._getHaloId(da,ea):null;M.setFilter(da&&ea?y("webkit")||y("ff")?this._getDilateFilter(da,ea,Z):this._getOffsetFilter(da,ea,Z):null)},_getDilateFilter:function(M,
da,ea){var Z=this._getSVGFilter(ea);Z||(Z=this._createSVGFilter({id:ea},[q.feMorphology({operator:"dilate",radius:da,result:"dilated"}),q.feFlood({"flood-color":M.toCss(!0)}),q.feComposite({in2:"dilated",operator:"in",result:"composite"}),q.feMerge("composite","SourceGraphic")]));return Z},_getOffsetFilter:function(M,da,ea){var Z=this._getSVGFilter(ea);if(!Z){M=M.toCss(!0);Z=this._offsetPrimitives;var ka,va=Z.length,Ea=[],Ga=[];for(ka=0;ka<va;ka++){var na=Z[ka],ma="offset"+na.dir,ya="composite"+na.dir;
Ga.push(ya);Ea.push(q.feOffset({dx:na.dx*da,dy:na.dy*da,"in":"SourceAlpha",result:ma}),q.feFlood({"flood-color":M}),q.feComposite({in2:ma,operator:"in",result:ya}))}Ga.push("SourceGraphic");Ea.push(q.feMerge.apply(q.feMerge,Ga));Z=this._createSVGFilter({id:ea},Ea)}return Z},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(M,da){return"halo_"+
this._map.id+"_"+this.id+"_"+M.r+"_"+M.g+"_"+M.b+"_"+M.a+"_"+da},_getSVGFilter:function(M){return this._svgFilters[M]},_createSVGFilter:function(M,da){var ea=q.createFilter(M,da),Z=this._map,ka=Z.__visibleRect;ea.x=-ka.x;ea.y=-ka.y;ea.width=Z.width;ea.height=Z.height;return this._svgFilters[M.id]=ea},_updateSVGFilters:function(M,da,ea,Z){var ka=this._svgFilters,va,Ea,Ga;for(Ea in ka)if(va=ka[Ea]){if(Ga=f.byId(Ea))null!=M&&Ga.setAttribute("x",M),null!=da&&Ga.setAttribute("y",da),null!=ea&&Ga.setAttribute("width",
ea),null!=Z&&Ga.setAttribute("height",Z);null!=M&&(va.x=M);null!=da&&(va.y=da);null!=ea&&(va.width=ea);null!=Z&&(va.height=Z)}},_getScaleMatrix:function(M,da){var ea=M.width/M.height,Z=1,ka=1;isNaN(da)||(1<ea?(Z=da/M.width,ka=da/ea/M.height):(ka=da/M.height,Z=da*ea/M.width));return{xx:Z,yy:ka}},_symbolizePoint:function(M,da,ea,Z){var ka=da.type,va=da.style;if("shieldlabelsymbol"!==ka&&"picturemarkersymbol"!==ka){var Ea=da.getStroke();da=da.getFill();va=va===u.STYLE_X||va===u.STYLE_CROSS;var Ga=Ea&&
Ea.color,na=va?Ga:da;if(ea){var ma=this._getVariable(ea,"colorInfo",!1),ya=this._getVariable(ea,"opacityInfo",!1);ma&&(na=ea.getColor(Z,{colorInfo:ma})||na);na&&ya&&(na=this._applyOpacity(na,ea,ya,Z));na&&(va?na!==Ga&&(Ea=Ea?h.mixin({},Ea):{},Ea.color=na):na!==da&&(da=na))}"textsymbol"===ka?M.setFill(da):"simplemarkersymbol"===ka&&M.setFill(da).setStroke(Ea)}},_drawMarkers:function(M,da,ea,Z){var ka=M.geometry,va=ka.points,Ea=M.getDojoShape()||this._div.createGroup(),Ga,na=va.length,ma=[],ya=0,za,
Ba=ea?ea.length:0;Ea.children[0]&&this._isInvalidShape(da,Ea.children[0])&&Ea.clear();for(Ga=0;Ga<na;Ga++){var ha=va[Ga];for(za=0;za<Ba;za++)ma[0]=ea[za],this._drawPoint(Ea,{x:ha[0],y:ha[1],spatialReference:ka.spatialReference},da,Ea.children[ya++],ma,Z,M)}da=Ea.children.length;if(na*ea.length<da)for(Ga=da-1;Ga>=na*ea.length;Ga--)Ea.children[Ga].removeShape();M._shape=Ea},_symbolizeMarkers:function(M,da,ea){var Z=M.getDojoShape().children,ka,va=Z.length;for(ka=0;ka<va;ka++)this._symbolizePoint(Z[ka],
da,ea,M)},_errorHandler:function(M,da){da&&(M.message="Unable to draw graphic (geometry:"+(da.geometry?da.geometry.declaredClass:null)+", symbol:"+(da.symbol?da.symbol.declaredClass:null)+"): "+M.message);this.inherited(arguments)},_rendererLimits:function(){if(L){var M=1E5;var da=-1E5;var ea=1E5}else y("chrome")&&6>y("chrome")&&(M=8150,da=-1E4,ea=1E4);if(M)return{clipLimit:M,rangeMin:da,rangeMax:ea,clipBBox:[-M,-M,M,M],clipSegments:[[[-M,-M],[M,-M]],[[M,-M],[M,M]],[[M,M],[-M,M]],[[-M,M],[-M,-M]]]}}(),
_clipPolyline:function(M,da){var ea=this._getCorners(M,da),Z=ea.br,ka=this._rendererLimits,va=ka.rangeMin,Ea=ka.rangeMax,Ga=ka.clipBBox,na=ka.clipSegments;ka=this._isPointWithinRange;var ma=this._isPointWithinBBox,ya=this._getClipperIntersection,za=this._getPlaneIndex;if(!ka(ea.tl,va,Ea)||!ka(Z,va,Ea)){L&&this._createSegments(M);var Ba=[];g.forEach(M.segments,function(ha){ha=ha.args;var qa=ha.length,T=[],Ha;for(Ha=0;Ha<qa;Ha+=2){var Ja=[ha[Ha],ha[Ha+1]],fa=[ha[Ha+2],ha[Ha+3]],Ya=ma(Ja,Ga),Xa=ma(fa,
Ga);if(Ya^Xa){if(Xa=ya([Ja,fa],na))Ya?(Ha?T.push(Xa[1]):T.push(Ja,Xa[1]),Ba.push(T),T=[]):T.push(Xa[1],fa)}else Ya?Ha?T.push(fa):T.push(Ja,fa):(Xa=za(Ja,Ga),Ya=za(fa,Ga),-1!==Xa&&-1!==Ya&&Xa!==Ya&&(Ja=ya([Ja,fa],na,!0),0<Ja.length&&(Ja[Xa]||(Xa=Ja[Xa[0]]?Xa[0]:Xa[1]),Ja[Ya]||(Ya=Ja[Ya[0]]?Ya[0]:Ya[1]),fa=Ja[Xa],Ja=Ja[Ya],fa&&T.push(fa),Ja&&(T.push(Ja),Ba.push(T),T=[]))))}Ba.push(T)});M.setShape(this._getPathStringFromPaths(Ba))}},_clipPolygon:function(M,da){var ea=this._getCorners(M,da),Z=ea.br,ka=
this._rendererLimits,va=ka.clipLimit,Ea=ka.rangeMin,Ga=ka.rangeMax,na=ka.clipBBox,ma=ka.clipSegments;ka=this._isPointWithinRange;var ya=this._isPointWithinBBox,za=this._getClipperIntersection,Ba=this._getPlaneIndex,ha=H._pointLineDistance;ka(ea.tl,Ea,Ga)&&ka(Z,Ea,Ga)||(L&&this._createSegments(M),ea=g.filter(M.segments,function(qa){return qa.args&&qa.args.length}),ea=g.map(ea,function(qa){var T=qa.args,Ha=T.length,Ja=[];qa=[];var fa;for(fa=0;fa<Ha;fa+=2){var Ya=[T[fa],T[fa+1]],Xa=[T[fa+2],T[fa+3]];
if(fa===Ha-2){Ja.push(Ya);break}var Ca=ya(Ya,na),Y=ya(Xa,na);Ja.push(Ya);if(Ca^Y){if(Y=za([Ya,Xa],ma))Ya=Y[1],Ya[Ca?"inOut":"outIn"]=!0,Ja.push(Ya),qa.push([Ca?"INOUT":"OUTIN",Ja.length-1,Y[0]])}else if(!Ca){Ca=Ba(Ya,na);var la=Ba(Xa,na);-1!==Ca&&-1!==la&&Ca!==la&&(Y=za([Ya,Xa],ma,!0),0<Y.length?(Y[Ca]||(Ca=Y[Ca[0]]?Ca[0]:Ca[1]),Y[la]||(la=Y[la[0]]?la[0]:la[1]),Ya=Y[Ca],Xa=Y[la],Ya&&(Ya.outIn=!0,Ja.push(Ya),qa.push(["OUTIN",Ja.length-1,Ca])),Xa&&(Xa.inOut=!0,Ja.push(Xa),qa.push(["INOUT",Ja.length-
1,la]))):h.isArray(Ca)&&h.isArray(la)&&(Y=Ca.concat(la),Y.sort(),"0123"===Y.join("")&&(Y=[],3===Ca[0]+Ca[1]?Y.push([va,-va],[-va,va]):Y.push([-va,-va],[va,va]),Ca=ha(Y[0],[Ya,Xa]),Ya=ha(Y[1],[Ya,Xa]),Ja.push(Ca<Ya?Y[0]:Y[1]))))}}var sa=na[0],U=na[1],ia=na[2],ua=na[3];g.forEach(Ja,function(Da){Da[0]<sa&&(Da[1]>=U&&Da[1]<=ua?Da[0]=sa:(Da[0]=sa,Da[1]=Da[1]<U?U:ua))});g.forEach(Ja,function(Da){Da[1]<U&&(Da[0]>=sa&&Da[0]<=ia?Da[1]=U:(Da[1]=U,Da[0]=Da[0]<sa?sa:ia))});g.forEach(Ja,function(Da){Da[0]>ia&&
(Da[1]>=U&&Da[1]<=ua?Da[0]=ia:(Da[0]=ia,Da[1]=Da[1]<U?U:ua))});g.forEach(Ja,function(Da){Da[1]>ua&&(Da[0]>=sa&&Da[0]<=ia?Da[1]=ua:(Da[1]=ua,Da[0]=Da[0]<sa?sa:ia))});T=0;Ha=qa.length;if(0<Ha){do{Xa=qa[T];fa=qa[(T+1)%Ha];if(Xa[2]===fa[2]&&"INOUT"===Xa[0]&&"OUTIN"===fa[0])if(Ya=Xa[1],fa=fa[1],Ya<fa)for(Ya+=1;Ya<fa;Ya++)Ja[Ya][2]=!0;else if(Ya>fa){for(Ya+=1;Ya<Ja.length;Ya++)Ja[Ya][2]=!0;for(Ya=0;Ya<fa;Ya++)Ja[Ya][2]=!0}T=(T+1)%Ha}while(0!==T)}Ha=Ja[0];T=Ja[Ja.length-1];Ha[2]&&(T[2]=!0,g.some(qa,function(Da){return 1===
Da[1]?(Ja.splice(Ja.length-1,0,h.clone(Ja[1])),!0):!1}));Ja=g.filter(Ja,function(Da){return Da[2]?!1:!0});for(T=0;T<Ja.length-1;T++)Ha=Ja[T],(fa=Ja[T+1])&&Ha[0]===fa[0]&&Ha[1]===fa[1]&&(fa.outIn?Ha.outIn=!0:fa.inOut&&(Ha.inOut=!0),Ja.splice(T+1,1));Ha=Math.abs;qa=[];for(T=0;T<Ja.length-1;T++){Xa=Ja[T];Ya=Xa[0];Xa=Xa[1];Ca=Ha(Ya)===va;Y=Ha(Xa)===va;fa=Ja[T+1];la=fa[0];fa=fa[1];var wa=Ha(la)===va,Fa=Ha(fa)===va;Ca&&Fa?qa.push([T+1,[Ya,fa]]):Y&&wa&&qa.push([T+1,[la,Xa]])}for(T=qa.length-1;0<=T;T--)fa=
qa[T],Ya=Ja[fa[0]-1],Ha=Ja[fa[0]],Ya.outIn||Ya.inOut||Ha.outIn||Ha.inOut||Ja.splice(fa[0],0,fa[1]);Ha=Ja[0];T=Ja[Ja.length-1];Ha[0]===T[0]&&Ha[1]===T[1]||Ja.push(Ha);return Ja}),M.setShape(this._getPathStringFromPaths(ea)))},_getCorners:function(M,da){if(L){var ea=this._map,Z=da.getExtent(),ka=Z.spatialReference,va=ea.toScreen(new E(Z.xmin,Z.ymax,ka));ea=ea.toScreen(new E(Z.xmax,Z.ymin,ka));return{tl:va,br:ea}}va=M.getTransformedBoundingBox();return{tl:va[0],br:va[2]}},_createSegments:function(M){M.shape.path=
M.vmlPath;M.segmented=!1;M._confirmSegmented();var da=M.segments;1<da.length&&(M.segments=g.filter(da,function(ea,Z,ka){Z=ka[Z+1];return"M"===ea.action&&Z&&"L"===Z.action?(ea.args=ea.args.concat(Z.args),!0):!1}))},_getPathStringFromPaths:function(M){L?(M=g.map(M,function(da){return"m "+g.map(da,function(ea,Z){return(1===Z?"l ":"")+ea.join(",")}).join(" ")}),M.push("e")):M=g.map(M,function(da){return"M "+g.map(da,function(ea){return ea.join(",")}).join(" ")});return M.join(" ")},_isPointWithinBBox:function(M,
da){var ea=da[1],Z=da[2],ka=da[3],va=M[0],Ea=M[1];return va>da[0]&&va<Z&&Ea>ea&&Ea<ka?!0:!1},_isPointWithinRange:function(M,da,ea){var Z=M.x;M=M.y;return Z<da||M<da||Z>ea||M>ea?!1:!0},_getClipperIntersection:function(M,da,ea){var Z,ka=H._getLineIntersection2,va=Math.round,Ea={length:0};for(Z=0;4>Z;Z++){var Ga=ka(M,da[Z]);if(Ga)if(Ga[0]=va(Ga[0]),Ga[1]=va(Ga[1]),ea)Ea[Z]=Ga,Ea.length++;else return[Z,Ga]}return ea?Ea:null},_getPlaneIndex:function(M,da){var ea=M[0],Z=M[1],ka=da[0],va=da[1],Ea=da[2],
Ga=da[3];return ea<=ka?Z>=va&&Z<=Ga?3:Z<va?[0,3]:[2,3]:Z<=va?ea>=ka&&ea<=Ea?0:ea<ka?[3,0]:[1,0]:ea>=Ea?Z>=va&&Z<=Ga?1:Z<va?[0,1]:[2,1]:Z>=Ga?ea>=ka&&ea<=Ea?2:ea<ka?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},
setInfoTemplate:function(M){this.infoTemplate=M;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(M,da){if(M._graphicsLayer===this)return M;M._suspended=this._suspendGraphics;da||this.graphics.push(M);M._graphicsLayer=this;M._sourceLayer||(M._layer&&"esri.layers.GraphicsLayer"!==M._layer.declaredClass?M._sourceLayer=M._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(M._sourceLayer=this));M._layer=this;this.hasWebGLSurface()||(this._updateExtent(M),this._draw(M));if(!da)this.onGraphicAdd(M);
return M},remove:function(M,da,ea){if(!da&&!ea){da=this.graphics;var Z;if(-1===(Z=g.indexOf(da,M)))return null;if(!ba||64<=ba)da.splice(Z,1);else{var ka=da.length;if(ka){for(;Z<ka;)da[Z]=da[Z+1],Z++;da.length--}}}this.hasWebGLSurface()||M.getDojoShape()&&this._removeShape(M,null,ea);M._shape=M._graphicsLayer=null;this.onGraphicRemove(M);return M},clear:function(M,da){var ea=this.graphics,Z,ka=!L;for(Z=ea.length-1;0<=Z;Z--)this.remove(ea[Z],null,ka);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();
if(!da)this.onGraphicsClear()},_destroyAllNodes:function(){if(!L&&this._div){var M;this._childLayer&&(M=this._childLayer.getNode())&&M.parentNode&&M.parentNode.removeChild(M);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();M&&this._div.getEventSource().appendChild(M);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var M=this.graphics,da=M.length,ea;for(ea=0;ea<da;ea++)this._removeShape(M[ea],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(M){},
_setIEOpacity:function(M,da){var ea=M&&M.getNode();if(ea){var Z=M.strokeStyle,ka=ea.stroke;Z&&ka&&(ka.opacity=Z.color.a*da);Z=M.fillStyle;ka=ea.fill;Z&&ka&&("tile"===ka.type?k.set(ea,"opacity",da):ka.opacity=Z.a*da)}},setOpacity:function(M,da){if(da||this.opacity!=M){var ea=this._div;ea&&!this.hasWebGLSurface()&&(L?(g.forEach(this.graphics,function(Z){this._setIEOpacity(Z._shape,M);this._setIEOpacity(Z._bgShape,M)},this),ea._esriIeOpacity=M,this._bgGroup._esriIeOpacity=M):"canvas-2d"===this.surfaceType?
k.set(ea.getEventSource(),"opacity",M):ea.getEventSource().setAttribute("opacity",M));this.opacity=M;if(!da)this.onOpacityChange(M)}},setRenderer:function(M){this.renderer=M;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||M})}});B=B([m,I],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=h.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var M=
this.inherited("_setMap",arguments);this.enableMouseEvents();return M},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(M){var da=this._map,ea=M.target,Z;M.screenPoint=new F(M.pageX-da.position.x,M.pageY-da.position.y);for(M.mapPoint=da.toMap(M.screenPoint);ea&&!(Z=ea.e_graphic);)ea=ea.parentNode;if(Z)return M.graphic=Z,M},_onMouseOverHandler:function(M){if(this._processEvent(M))this.onMouseOver(M)},_onMouseMoveHandler:function(M){if(this._processEvent(M))this.onMouseMove(M)},
_onMouseDragHandler:function(M){if(this._processEvent(M))this.onMouseDrag(M)},_onMouseOutHandler:function(M){if(this._processEvent(M))this.onMouseOut(M)},_onMouseDownHandler:function(M){this._downGr=this._downPt=null;this._processEvent(M)&&(c.disconnect(this._onmousemove_connect),c.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=c.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=M.graphic,this._downPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseDown(M))},
_onMouseUpHandler:function(M){this._upGr=this._upPt=null;this._processEvent(M)&&(c.disconnect(this._onmousedrag_connect),c.disconnect(this._onmousemove_connect),this._onmousemove_connect=c.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=M.graphic,this._upPt=M.screenPoint.x+","+M.screenPoint.y,this.onMouseUp(M))},_onClickHandler:function(M){if(this._processEvent(M)){var da=this._downGr,ea=this._upGr;da&&ea&&da===ea&&this._downPt===this._upPt&&(L&&(z._ieGraphic=
M.graphic),this.onClick(M))}},_onDblClickHandler:function(M){if(this._processEvent(M))this.onDblClick(M)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var M=c.connect,da=this._div.getEventSource();O||(this._onmouseover_connect=M(da,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=M(da,
"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=M(da,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=M(da,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=M(da,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=M(da,"onclick",this,"_onClickHandler"),this._ondblclick_connect=M(da,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var M=c.disconnect;M(this._onmouseover_connect);
M(this._onmousemove_connect);M(this._onmousedrag_connect);M(this._onmouseout_connect);M(this._onmousedown_connect);M(this._onmouseup_connect);M(this._onclick_connect);M(this._ondblclick_connect);this._mouseEvents=!1}}});B._GraphicsContainer=n;B._GraphicsLayer=m;h.setObject("layers.GraphicsLayer",B,z);h.setObject("layers._GraphicsContainer",n,z);h.setObject("layers._GraphicsLayer",m,z);return B})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(D,B){D.add("esri-svg",function(){return-1!==
B.renderer.toLowerCase().indexOf("svg")});return D})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(D,B,a,c){var h=!1,g=a("esri-webgl-max-contexts");g=null!=g?g:a("esri-mobile")?8:16;var e={isWebGLSupported:function(){return!!h},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!a("esri-featurelayer-webgl")},createCanvas:function(l,r){var k=document.createElement("canvas");k.style.width=l+"px";k.style.height=r+
"px";return k},createWebGLContext:function(l){var r;B.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(k){try{r=l.getContext?l.getContext(k):null}catch(f){r=null}return!!r});return r},_contextOwners:[],isContextAvailable:function(){return-1===g||0<g&&e._contextOwners.length<g},acquireContext:function(l){return-1!==B.indexOf(e._contextOwners,l)?!0:e.isContextAvailable()?(e._contextOwners.push(l),!0):!1},releaseContext:function(l){l=B.indexOf(e._contextOwners,l);-1!==l&&e._contextOwners.splice(l,
1)}};h=e.createWebGLContext(e.createCanvas());D.setObject("layers.support.webglUtils",e,c);return e})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(D,B,a,c,h){D=D(null,{map:null,node:null,renderers:null,constructor:function(g){B.mixin(this,g);this.renderers=[]},destroy:function(){a.forEach(this.renderers,function(g){g.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(g,
e,l,r){g=new g({surface:this,width:e,height:l,map:this.map,layer:r});this.renderers.push(g);return g},destroyRenderer:function(g){var e=a.indexOf(this.renderers,g);-1<e&&(g.destroy(),this.renderers.splice(e,1))},_createNode:function(){var g=document.createElement("div");g.style.pointerEvents="auto";g.style.position="absolute";return g}});B.setObject("layers.support.WebGLSurface",D,h);return D})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),
function(D,B,a,c,h,g){function e(d){d.removeAttribute("marker-start");d.removeAttribute("marker-end");d.removeAttribute("opacity")}function l(d,q){for(var m in q)d.setAttribute(m,q[m])}function r(d,q,m){q="url(#"+q.getAttribute("id")+")";d.rawNode.setAttribute("marker-"+m,q)}var k=-1!==c.renderer.toLowerCase().indexOf("svg"),f=9===a("ie"),b={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",
refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};a={applyLineMarker:function(d,q,m,n){if(k&&!f){var t=d&&d.rawNode,z=q.marker;m=m||q.color;t&&"none"!==q.style&&m&&z&&"arrow"===z.style&&z.placement?t.getTotalLength&&0===t.getTotalLength()?e(t):(q=-1!==z.placement.indexOf("begin"),z=-1!==z.placement.indexOf("end"),q||z?(t.removeAttribute("stroke-opacity"),
t.setAttribute("opacity",m.a),q?(q=n(d,m,"spear","start"),r(d,q,"start")):t.removeAttribute("marker-start"),z?(m=n(d,m,"spear","end"),r(d,m,"end")):t.removeAttribute("marker-end")):e(t)):t&&e(t)}},createSVGMarker:function(d,q,m,n){m=b[m];var t=B.doc.createElementNS("http://www.w3.org/2000/svg","marker");t.setAttribute("id",q);l(t,b.marker);l(t,m.marker[n]);q=B.doc.createElementNS("http://www.w3.org/2000/svg","path");q.setAttribute("fill",d.toCss());l(q,m.path.common);l(q,m.path[n]);t.appendChild(q);
return t},create2DColorRamp:function(d){var q=d.surface.createGroup(),m=d.colors,n=d.numClasses;d=(d.size||75)/n;for(var t=0;t<n;t++)for(var z=t*d,w=0;w<n;w++){var y=m[t][w];q.createRect({x:w*d,y:z,width:d,height:d}).setFill(y).setStroke(null)}return q},setSymbolFillColor:function(d,q){if(d)switch(q=q?new g(q):null,d.type){case "simplemarkersymbol":"cross"===d.style||"x"===d.style?d.outline&&d.outline.setColor(q):d.setColor(q);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":d.setColor(q)}}};
D.setObject("renderer.utils",a,h);return a})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,B,a,c,h,g,e,l,r,k){var f=function(){return 9>a("ie")?function(d,q,m,n,t,z,w,y,x){var A=[],v=Math.round,u,C=w.length,E;for(u=0;u<C;u++){var F=w[u];var G=y?y(F[0][0],F[0][1],x):F[0];if(1<(E=F.length)){var H=v((G[0]-d)*m+t);var J=v((q-G[1])*n+z);G=y?y(F[1][0],F[1][1],x):
F[1];var I=v((G[0]-d)*m+t);G=v((q-G[1])*n+z);A.push("M",H+","+J,"L",I+","+G);for(I=2;I<E;I++)G=y?y(F[I][0],F[I][1],x):F[I],H=v((G[0]-d)*m+t),J=v((q-G[1])*n+z),A.push(H+","+J)}else H=v((G[0]-d)*m+t),J=v((q-G[1])*n+z),A.push("M",H+","+J)}return A}:function(d,q,m,n,t,z,w,y,x,A){var v=[],u,C,E=Math.round;var F=0;for(u=w?w.length:0;F<u;F++){var G=w[F];v.push("M");var H=0;for(C=G?G.length:0;H<C;H++){var J=y?y(G[H][0],G[H][1],x):G[H];v.push(E((J[0]-d)*m+t)+","+E((q-J[1])*n+z))}A||v.push("Z")}return v}}(),
b={toScreenPoint:function(d,q,m,n,t){var z=d.spatialReference,w=n.spatialReference,y=n.x;n=n.y;z&&w&&!z.equals(w)&&z._canProject(w)&&(z=z.isWebMercator()?h.lngLatToXY(y,n):h.xyToLngLat(y,n,!0),y=z[0],n=z[1]);y=(y-d.xmin)*(q/d.getWidth());n=(d.ymax-n)*(m/d.getHeight());t||(y=Math.round(y),n=Math.round(n));return new g(y,n)},toScreenGeometry:function(d,q,m,n){var t=d.xmin,z=d.ymax,w=q/d.getWidth(),y=m/d.getHeight(),x=D.forEach,A=Math.round;if(n instanceof h)return new h(A((n.x-t)*w),A((z-n.y)*y));if(n instanceof
r){d=new r;var v=d.points;x(n.points,function(G,H){v[H]=[A((G[0]-t)*w),A((z-G[1])*y)]});return d}if(n instanceof k)return new k(A((n.xmin-t)*w),A((z-n.ymin)*y),A((n.xmax-t)*w),A((z-n.ymax)*w));if(n instanceof e){d=new e;var u=d.paths,C;x(n.paths,function(G,H){C=u[H]=[];x(G,function(J,I){C[I]=[A((J[0]-t)*w),A((z-J[1])*y)]})});return d}if(n instanceof l){d=new l;var E=d.rings,F;x(n.rings,function(G,H){F=E[H]=[];x(G,function(J,I){F[I]=[A((J[0]-t)*w),A((z-J[1])*y)]})});return d}},_toScreenPath:function(d,
q,m,n,t,z){var w=n instanceof e,y=d.spatialReference,x=n.spatialReference;if(y&&x&&!y.equals(x)&&y._canProject(x))if(y.isWebMercator())var A=h.lngLatToXY;else{A=h.xyToLngLat;var v=!0}return f(d.xmin,d.ymax,q/d.getWidth(),m/d.getHeight(),t,z,w?n.paths:n.rings,A,v,w)},toMapPoint:function(d,q,m,n){return new h(d.xmin+n.x/(q/d.getWidth()),d.ymax-n.y/(m/d.getHeight()),d.spatialReference)},toMapGeometry:function(d,q,m,n){var t=d.xmin,z=d.ymax,w=d.spatialReference,y=q/d.getWidth(),x=m/d.getHeight(),A=D.forEach;
if(n instanceof h)return new h(t+n.x/y,z-n.y/x,w);if(n instanceof r){d=new r(w);var v=d.points;A(n.points,function(G,H){v[H]=[t+G[0]/y,z-G[1]/x]});return d}if(n instanceof k)return new k(t+n.xmin/y,z-n.ymin/x,t+n.xmax/y,z-n.ymax/x,w);if(n instanceof e){d=new e(w);var u=d.paths,C;A(n.paths,function(G,H){C=u[H]=[];A(G,function(J,I){C[I]=[t+J[0]/y,z-J[1]/x]})});return d}if(n instanceof l){d=new l(w);var E=d.rings,F;A(n.rings,function(G,H){F=E[H]=[];A(G,function(J,I){F[I]=[t+J[0]/y,z-J[1]/x]})});return d}}};
B.mixin(B.getObject("geometry",!0,c),b);return b})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(D,B,a,c,h,g){function e(){B.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}e.prototype={addPlugin:function(l,r){var k=this,f=this._plugins,b=new h;try{D([l],function(d){l in f?b.resolve({id:f[l].declaredId||l.replace(/\//g,".")}):(f[l]=d,g(d.add(k,r),function(){var q={id:d.declaredId||
l.replace(/\//g,".")};k.emit("plugin-add",q);b.resolve(q)},function(q){b.reject(q)}))})}catch(d){b.reject(d)}return b.promise},removePlugin:function(l){if(l in this._plugins){var r=this._plugins[l];r.remove(this);delete this._plugins[l];this.emit("plugin-remove",{id:r.declaredId||l.replace(/\//g,".")})}},_pluginsHandler:function(){var l=this;a.some(arguments,function(r){if(r&&r.plugins&&r.plugins instanceof Array){r=r.plugins;var k;for(k=0;k<r.length;k++){var f=r[k];var b=f instanceof Object?f.id:
f;l.addPlugin(b,f.options)}return!0}})}};return e})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(D,B,a,c,h,g,e,l,r){D=D(null,{declaredClass:"esri.layers.FeatureType",constructor:function(k){if(k&&B.isObject(k)){this.id=k.id;this.name=k.name;var f=k.symbol;f&&(this.symbol=e.fromJson(f));f=k.domains;var b=this.domains={};for(d in f)f.hasOwnProperty(d)&&
(b[d]=r.fromJson(f[d]));if(k=k.templates){var d=this.templates=[];for(f=0;f<k.length;f++)d.push(new l(k[f]))}}},toJson:function(){var k={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},f,b=this.domains,d=this.templates,q=g.fixJson;if(b){var m=k.domains={};for(f in b)b.hasOwnProperty(f)&&(m[f]=b[f]&&b[f].toJson());q(m)}d&&(k.templates=a.map(d,function(n){return n.toJson()}));return q(k)}});B.setObject("layers.FeatureType",D,h);return D})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(D,B,a,c,h,g){D=D(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(e){e&&B.isObject(e)&&(this.name=e.name,this.description=e.description,this.drawingTool=e.drawingTool,this.thumbnail=e.thumbnail,e=e.prototype,this.prototype=new g(e.geometry,null,e.attributes))},toJson:function(){return h.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:h.fixJson(B.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
B.mixin(D,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});B.setObject("layers.FeatureTemplate",D,c);return D})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(D,B,a,c,h,g){B={fromJson:function(e){if(e)switch(e.type){case "range":var l=new c(e);break;case "codedValue":l=new h(e);break;case "inherited":l=
new g(e)}return l}};D.setObject("layers.support.domainUtils",B,a);return B})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(D,B,a,c,h){D=D([h],{declaredClass:"esri.layers.InheritedDomain"});B.setObject("layers.InheritedDomain",D,c);return D})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(D,B,a,c,h,g){D=D(null,
{declaredClass:"esri.layers.FeatureSubtype",constructor:function(e){if(e&&B.isObject(e)){this.code=e.code;this.name=e.name;this.defaultValues=e.defaultValues;e=e.domains;var l=this.domains={},r;for(r in e)e.hasOwnProperty(r)&&(l[r]=g.fromJson(e[r]))}},toJson:function(){var e=h.fixJson,l={code:this.code,name:this.name,defaultValues:e(B.clone(this.defaultValues))},r=this.domains;if(r){var k=l.domains={},f;for(f in r)r.hasOwnProperty(f)&&(k[f]=r[f]&&r[f].toJson());e(k)}return e(l)}});B.setObject("layers.FeatureSubtype",
D,c);return D})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(h){h&&B.isObject(h)&&(this.objectId=h.objectId,this.globalId=h.globalId,this.success=h.success,h.success||(h=h.error,this.error=Error(),this.error.code=h.code,this.error.message=h.description))}});B.setObject("layers.FeatureEditResult",D,c);return D})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(D,B,a,c,h,g,e,l){var r=RegExp("__begin__","ig"),k=RegExp("__end__","ig"),f=/^__begin__/i,b=/__end__$/i;D=D(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(d){d&&(B.mixin(this,d),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=g.valueOf(this._labelPlacementLookup,d.labelPlacement)),d.format&&(this.format=d.format),d.fieldInfos&&(this.fieldInfos=d.fieldInfos),d.symbol&&(this.symbol="esriSHD"===d.symbol.type?new l(d.symbol):new e(d.symbol)),d=this.sizeInfo)&&(d.minSize&&(d.minSize=c.pt2px(d.minSize)),d.maxSize&&(d.maxSize=c.pt2px(d.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var d=this.sizeInfo;d&&(d=B.mixin({},d),d.minSize&&(d.minSize=c.px2pt(d.minSize)),d.maxSize&&(d.maxSize=c.px2pt(d.maxSize)));var q=g.fixJson(this.labelExpressionInfo&&B.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(q);d={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:q,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:d||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return g.fixJson(d)},_processLabelExpressionInfo:function(d){d&&d.value&&(d.expression=this._convertTemplatedStringToArcade(d.value))},_convertTemplatedStringToArcade:function(d){if(d){var q=B.replace(d,function(m,n){return'__begin__$feature["'+n+'"]__end__'});q=f.test(q)?q.replace(f,
""):'"'+q;q=b.test(q)?q.replace(b,""):q+'"';q=q.replace(r,'" + ').replace(k,' + "')}return q}});B.setObject("layers.LabelClass",D,h);return D})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(D,B,a,c,h,g,e,l,r){var k={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=D(l,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:c.defaultFont,constructor:function(f,b,d,q,m){f?B.isString(f)?(this.url=f,b&&(this.color=b),d&&(this.width=d),q&&(this.height=q),void 0!==m&&(this.font=m)):(this.width=c.pt2px(f.width),this.height=c.pt2px(f.height),b=f.imageData,9>a("ie")||!b||(d=this.url,this.url="data:"+(f.contentType||"image")+";base64,"+b,this.imageData=d)):B.mixin(this,k)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(f){this.width=f;return this},
setHeight:function(f){this.height=f;return this},setUrl:function(f){f!==this.url&&(delete this.imageData,delete this.contentType);this.url=f;return this},setFont:function(f){this.font=f;return this},setText:function(f){this.text=f;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var f=this.url,b=this.imageData;if(0===f.indexOf("data:")){var d=f;f=b;b=d.indexOf(";base64,")+8;b=d.substr(b)}f=e.getAbsoluteUrl(f);d=c.px2pt(this.width);d=isNaN(d)?void 0:d;var q=c.px2pt(this.height);q=isNaN(q)?void 0:q;f=g.fixJson(B.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:f,imageData:b,contentType:this.contentType,width:d,height:q}));this.font?(b=new r(this.font),f.font=b.toJson()):f.font=null;delete f.size;f.imageData||delete f.imageData;return f}});
D.defaultProps=k;B.setObject("symbol.ShieldLabelSymbol",D,h);h.symbol.defaultShieldLabelSymbol=k;return D})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(D,B,a,c,h,g,e,l,r){D=D([l],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(k){this.featureLayer=
k;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler);this._handleSuccess=B.hitch(this,this._handleSuccess);this._handleError=B.hitch(this,this._handleError);this._handleProgress=B.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var k=this.featureLayer,f=k.reHostedFS.test(k.url);this.pagination=
k.queryPagination&&null!=k.maxRecordCount;this._cacheHintSupported=k._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();f&&this.pagination&&(this._parallelSnapshot=new r({layer:k,mode:this,queryTask:k._task}));this._isSuspendedAtStartup=k.suspended;this._startup()}},propertyChangeHandler:function(k){this._init&&(k?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);
this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(k){var f=k.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(f,k);this._incRefCount(f)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var k=this.featureLayer;k._collection?(k._fireUpdateStart(),k._refresh(!0),k._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},
hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(k){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(k)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var k=this.featureLayer;k._collection||k.suspended||!k.isQueryable()?this._pendingRefresh=k.suspended:(this._pendingRefresh=!1,k._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?
this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(k){this._hasPartialFeatures=k.hasPartialFeatures;this._hasUpdateError=k.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(k){this._queryErrorHandler(k)},_handleProgress:function(k){k.isError?this.featureLayer._errorHandler(k.error):this._addFeatures(k.features)},_getScaleToTileFactor:function(){var k=this.featureLayer.tileMaxRecordCount,
f=this.featureLayer.maxRecordCount,b=1;null!=k&&null!=f&&(b=Number((k/f).toFixed(2)));return b},_getPageSize:function(k){var f=this.featureLayer.tileMaxRecordCount;f="tile"===k.resultType&&f?f:this.featureLayer.maxRecordCount;k.maxRecordCountFactor&&(f=Math.floor(f*k.maxRecordCountFactor));return f},_sendRequest:function(k){var f=this.featureLayer,b=this._createQueryInfo(),d=b.query;this.pagination&&(this._pageSize=this._getPageSize(d),this._start=d.start=null==k?0:k,d.num=this._pageSize);this._pendingRequest&&
this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=f._task.execute(d,this._drawFeatures,this._queryErrorHandler,b.pbf?{format:"pbf"}:null)},_drawFeatures:function(k){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===k.exceededTransferLimit&&(k.exceededTransferLimit=k.features.length===this.featureLayer.maxRecordCount);var f=this.featureLayer,b=k.exceededTransferLimit,d=b&&!f._collection;k=this._checkMaxLimit(k.features);var q=
k.maxLimitReached;this._addFeatures(k.features);this.pagination&&d&&!q||(this._hasPartialFeatures=!!b,f._fireUpdateEnd(null,b?{queryLimitExceeded:!0}:null));d&&(this.pagination&&!q&&this._sendRequest(this._start+this._pageSize),f.onQueryLimitExceeded())},_queryErrorHandler:function(k){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var f=this.featureLayer;f._errorHandler(k);f._fireUpdateEnd(k)},_checkMaxLimit:function(k){var f=k?k.length:0,b=this.featureLayer.graphics.length+
f,d=b>=this.maxFeatures;if(d){var q=b-this.maxFeatures;q&&k.splice(f-q,q)}return{maxLimitReached:d,featuresDiscarded:b>this.maxFeatures,features:k}},_createQueryInfo:function(){var k=this.featureLayer,f=new e;f.outFields=k.getOutFields();f.where=k._getAttributeFilter()||"1\x3d1";f.returnGeometry=!0;f.outSpatialReference=g.createSpatialReference(this.map.spatialReference.toJson());f.timeExtent=k.getTimeDefinition();f.maxAllowableOffset=k._maxOffset;f.quantizationParameters=k._quantizationParameters;
f.orderByFields=k.supportsAdvancedQueries?k.getOrderByFields():null;f.multipatchOption=k.multipatchOption;k._ts&&(f._ts=(new Date).getTime());this._cacheHintSupported&&k._enableCacheHint(f);var b=this.canFetchPBF(f);k._enableEditModeQuantization(f,b);this._applyMaxRecordCountFactor(f,b);return{query:f,pbf:b}},_applyMaxRecordCountFactor:function(k,f){var b=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(k)&&b&&b.supportsMaxRecordCountFactor&&("tile"!==k.resultType&&
1<this.scaleToTileFactor&&(k.maxRecordCountFactor=this.scaleToTileFactor),f&&1<this.maxRecordCountFactor&&(k.maxRecordCountFactor=this.maxRecordCountFactor),5<k.maxRecordCountFactor&&(k.maxRecordCountFactor=5))},_addFeatures:function(k){var f=this.featureLayer,b=f.objectIdField,d=k.length,q=f._selectedFeatures,m=f.mode===f.constructor.MODE_AUTO;f._fireUpdateStart();f._sortFeatures(k);for(f=0;f<d;f++){var n=k[f];var t=n.attributes[b];var z=this._addFeatureIIf(t,n);this._incRefCount(t);m&&z!==n&&q[t]&&
(z.setGeometry(n.geometry),z.setAttributes(n.attributes))}this._applyTimeFilter(!0)}});B.setObject("layers._SnapshotMode",D,c);return D})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(D,B,a,c,h){var g=!!c("esri-pbf");c=!!c("esri-featurelayer-pbf");D=D(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:g&&c,initialize:function(e){this.map=e;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(e){},
destroy:function(){this._init=this._started=!1},drawFeature:function(e){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(e){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(e){(e=this._featureMap[e])&&e._count++},_decRefCount:function(e){(e=this._featureMap[e])&&e._count--},_getFeature:function(e){return this._featureMap[e]},_addFeatureIIf:function(e,l){var r=
this._featureMap,k=r[e],f=this.featureLayer;k||(r[e]=l,f._add(l),l._count=0);return k||l},_removeFeatureIIf:function(e){var l=this._featureMap[e],r=this.featureLayer;if(l){if(l._count)return;delete this._featureMap[e];r._remove(l)}return l},_registerFeature:function(e,l){var r=this._featureMap,k=r[e];k?(k.attributes=l.attributes,k.geometry=l.geometry):(r[e]=l,l._count=0,l._layer=l._graphicsLayer=l._sourceLayer=this.featureLayer);return k||l},_unregisterFeature:function(e){var l=this._featureMap,r=
l[e];r&&!r._count&&(delete l[e],r._graphicsLayer=null)},_clearIIf:function(){var e=this.featureLayer;var l=e.graphics,r=e._selectedFeatures,k=e.getSelectedFeatures().length,f=e.objectIdField;if(k)for(e=l.length-1;0<=e;e--){k=l[e];var b=k.attributes[f];b in r?k._count=1:(k._count=0,this._removeFeatureIIf(b))}else e.clear(),this._featureMap={}},_cancelPendingRequest:function(e){if(e)try{e.cancel()}catch(l){}},_toggleVisibility:function(e){var l=this.featureLayer,r=l.graphics,k=e?"show":"hide",f,b=r.length;
e=e&&l._ager;for(f=0;f<b;f++){var d=r[f];d[k]();e&&l._repaint(d)}},_applyTimeFilter:function(e){var l=this.featureLayer;if(l.timeInfo&&!l.suspended){e||l._fireUpdateStart();var r=l._trackManager;r&&r.clearTracks();var k=l.getTimeDefinition(),f=l._getOffsettedTE(l._mapTimeExtent);f?(f=l._getTimeOverlap(k,f))?(k=l._filterByTime(l.graphics,f.startTime,f.endTime),r&&r.addFeatures(k.match),a.forEach(k.match,function(b){var d=b._shape;b.visible||(b.show(),(d=b._shape)&&d._moveToFront());l._ager&&d&&l._repaint(b)}),
a.forEach(k.noMatch,function(b){b.visible&&b.hide()})):this._toggleVisibility(!1):(r&&r.addFeatures(l.graphics),this._toggleVisibility(!0));r&&(r.moveLatestToFront(),r.drawTracks());e||l._fireUpdateEnd()}}});B.setObject("layers._RenderMode",D,h);return D})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(D,B,a,c,h,g){D=D(null,{declaredClass:"esri.layers.support.ParallelSnapshot",
layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(e){B.mixin(this,e);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var e=new h;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=e;this._sendRequests();
return e.promise},cancel:function(e){this._cancelPendingRequests(e);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(e){var l=this._queryInfo.query,r=this.queryTask,k=this._requests;e=null==e?1:e;var f=e+this.batchSize-1;f>this._maxPages&&
(f=this._maxPages);if(!(e>f))for(this._startPage=e,this._lastPage=f;e<=f;e++)l.start=(e-1)*this._pageSize,l.num=this._pageSize,k[e]=r.execute(l,null,null,this._queryInfo.pbf?{format:"pbf"}:null),k[e].then(B.hitch(this,this._handleSuccess,e)).otherwise(B.hitch(this,this._handleError,e))},_evalNextBatch:function(e){e===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(e,l){l.exceededTransferLimit||this._cancelLaterRequests(e,!0);var r=this.mode._checkMaxLimit(l.features);
this._fetchDfd.progress({features:r.features,isError:!1});r.maxLimitReached?((r=r.featuresDiscarded||this._hasRejectedRequests())||(r=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(r)):(l.exceededTransferLimit&&this._evalNextBatch(e),this._evalResolution())},_handleError:function(e,l){var r=this._requests;r&&r[e]&&(1===e?this._rejectFetch(l):(this._evalNextBatch(e),this._fetchDfd.progress({error:l,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||
this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(e){var l=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:e,hasUpdateError:l})},_rejectFetch:function(e){this.cancel(!0);this._fetchDfd.reject(e)},_getResult:function(e){return e&&e.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var e=this._requests,l,r=[];for(l in e){var k=e[l];k.isFulfilled()||r.push({pageId:Number(l),
dfd:k})}return r},_getLastSuccessfulRequest:function(){var e=this._getResolvedRequests(),l=-Infinity,r;e=a.filter(e,function(k){return!!this._getResult(k).features.length||1===k.pageId},this);a.forEach(e,function(k){k.pageId>l&&(l=k.pageId,r=k)});return r},_getResolvedRequests:function(){var e=this._requests,l,r=[];for(l in e){var k=e[l];k.isResolved()&&r.push({pageId:Number(l),dfd:k})}return r},_hasRejectedRequests:function(){var e=this._getRejectedRequests(),l=this._getLastSuccessfulRequest(),r=
this._getResult(l);r&&!r.exceededTransferLimit&&(e=a.filter(e,function(k){return k.pageId<=l.pageId}));return!!e.length},_getRejectedRequests:function(){var e=this._requests,l,r=[];for(l in e){var k=e[l];k.isRejected()&&r.push({pageId:Number(l),dfd:k})}return r},_cancelPendingRequests:function(e){this._cancelRequests(this._getPendingRequests(),e)},_cancelLaterRequests:function(e,l){var r=a.filter(this._getPendingRequests(),function(k){return k.pageId>e});this._cancelRequests(r,l)},_cancelRequests:function(e,
l){var r=this.mode,k=this._requests;a.forEach(e,function(f){l&&delete k[f.pageId];r._cancelPendingRequest(f.dfd)})}});B.setObject("layers.support.ParallelSnapshot",D,g);return D})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(D,B,a,c,h,g,e,l,r,k){D=D([r],{declaredClass:"esri.layers._OnDemandMode",constructor:function(f){this.featureLayer=
f;this._featureMap={}},initialize:function(f){this.inherited(arguments);this._cellMap={};this._gridLayer=k.createFromFeatureLayer({layer:this.featureLayer,map:f})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(f){this._init&&2>f&&this._zoomHandler()},destroy:function(){this._disableConnectors();
this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(f){var b=f.geometry,d=[];if(b){d=this._gridLayer.getCellsInExtent("point"===b.type?{xmin:b.x,ymin:b.y,xmax:b.x,ymax:b.y}:b.getExtent(),!1).cells;b=this._cellMap;var q,m=f.attributes[this.featureLayer.objectIdField];for(q=0;q<d.length;q++){var n=d[q];var t=n.latticeID;var z=n.row;var w=n.col;t?n=b[t]=b[t]||n:(b[z]=b[z]||{},n=b[z][w]=b[z][w]||n);n.features=n.features||[];n.features.push(f);this._addFeatureIIf(m,f);this._incRefCount(m)}}},
suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var f=!1,b=this._getCurrentCells(),d;for(d=0;d<b.length;d++)if(b[d].hasPartialFeatures){f=!0;break}return!f},hasUpdateError:function(){var f=!1,b=this._getCurrentCells(),d;for(d=0;d<b.length;d++)if(b[d].hasUpdateError){f=!0;break}return f},canFetchPBF:function(f){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(f)},
_enableConnectors:function(){var f=this.map;this._zoomConnect=B.connect(f,"onZoomEnd",this,this._zoomHandler);this._panConnect=B.connect(f,"onPanEnd",this,this._panHandler);this._resizeConnect=B.connect(f,"onResize",this,this._panHandler)},_disableConnectors:function(){B.disconnect(this._zoomConnect);B.disconnect(this._panConnect);B.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var f=this.featureLayer,b=this.map;!f.suspended&&f.isQueryable()&&(f._fireUpdateStart(),
this._clearIIf(),(f=f._trackManager)&&f.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(f){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var b=this.featureLayer._resized;f=b?f:null;b&&this._gridLayer.setMapState(f,this.map.width,this.map.height);this._sendRequest(f)}},_sendRequest:function(f){this._exceeds=!1;var b=this.featureLayer,d=this.map;f=f||d.extent;d=this._gridLayer.getCellsInExtent(f,b.latticeTiling).cells;
if(!b.isEditable()){var q=this._cellMap;d=c.filter(d,function(z){if(z.lattice){if(q[z.latticeID])return!1}else if(q[z.row]&&q[z.row][z.col])return!1;return!0})}this._pending=this._pending||0;var m;for(m=0;m<d.length;m++){var n=d[m],t=this._createQueryInfo(n);this._pending++;this._ioQueue.push(b._task.execute(t.query,a.hitch(this,this._drawFeatures,n),a.hitch(this,this._queryErrorHandler,n),t.pbf?{format:"pbf"}:null))}this._removeOldCells(f);this._endCheck()},_drawFeatures:function(f,b){this.featureLayer._isImageService&&
10.7>this.featureLayer.version&&void 0===b.exceededTransferLimit&&(b.exceededTransferLimit=b.features.length===this.featureLayer.maxRecordCount);f.hasPartialFeatures=!!b.exceededTransferLimit;f.hasUpdateError=!1;this._exceeds=this._exceeds||b.exceededTransferLimit;this._finalizeIO();var d=this.featureLayer,q=this.map.extent,m=f.extent,n=f.row,t=f.col,z=d.objectIdField,w=b.features,y=this._gridLayer,x=this._cellMap,A=f.latticeID;x=A?x[A]:x[n]&&x[n][t];if(f.resolution==y.resolution&&(A?A===y.getLatticeID(q):
y.intersects(m,q)))if(x)d._sortFeatures(w),this._updateCell(x,w);else for(d._sortFeatures(w),f.features=w,this._addCellToCellMap(f),q=w.length,d=0;d<q;d++)m=w[d],n=m.attributes[z],this._addFeatureIIf(n,m),this._incRefCount(n);else x&&this._removeCell(n,t,A);this._endCheck()},_queryErrorHandler:function(f,b){this._finalizeIO();f.hasPartialFeatures=!0;f.hasUpdateError=!0;this._addCellToCellMap(f);this.featureLayer._errorHandler(b);this._endCheck(b)},_finalizeIO:function(){this._pending--},_endCheck:function(f){if(0===
this._pending){this._processIOQueue();var b=this.featureLayer,d=b._trackManager;d&&(d.clearTracks(),d.addFeatures(b.graphics),b._ager&&c.forEach(b.graphics,function(q){q._shape&&b._repaint(q)}),d.moveLatestToFront(),d.drawTracks());this.featureLayer._fireUpdateEnd(!!f&&Error("FeatureLayer: "+(f.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(f){this._ioQueue=c.filter(this._ioQueue,
function(b){return-1<b.fired?!1:!0});f&&c.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(f){var b=this.featureLayer,d=new l;d.outFields=b.getOutFields();d.where=b._getAttributeFilter();d.returnGeometry=!0;d.geometry=f.extent||f.lattice;b.latticeTiling&&f.extent&&(d.spatialRelationship=l.SPATIAL_REL_CONTAINS);d.timeExtent=b._getOffsettedTE(b._mapTimeExtent);d.maxAllowableOffset=b._maxOffset;d.quantizationParameters=b._quantizationParameters;d.orderByFields=b.supportsAdvancedQueries?
b.getOrderByFields():null;d.multipatchOption=b.multipatchOption;b._ts&&(d._ts=(new Date).getTime());(f=b.advancedQueryCapabilities)&&f.supportsQueryWithResultType&&(d.resultType="tile");f=this.canFetchPBF(d);b._enableEditModeQuantization(d,f);return{query:d,pbf:f}},_getCurrentCells:function(f){var b=[];f=f||this._cellMap;for(var d in f)if(f.hasOwnProperty(d)){var q=f[d];q&&(q.hasOwnProperty("row")||q.hasOwnProperty("latticeID")?b.push(q):"object"===typeof q&&b.push.apply(b,this._getCurrentCells(q)))}return b},
_addCellToCellMap:function(f){var b=this._cellMap;if(f.latticeID)b[f.latticeID]=f;else{var d=f.row,q=f.col;b[d]=b[d]||{};b[d][q]=f}},_removeOldCells:function(f){var b=this._cellMap,d=this._gridLayer,q,m;for(q in b)if(b[q]){var n=b[q],t=n.latticeID,z=0,w=0;if(t)z++,t!==d.getLatticeID(f)&&(this._removeCell(null,null,t),w++);else for(m in n)n[m]&&(z++,d.intersects(n[m].extent,f)||(this._removeCell(q,m),w++));w===z&&delete b[q]}},_updateCell:function(f,b){var d=this.featureLayer,q=d.objectIdField;d=d._selectedFeatures;
var m,n=b.length;f.features=f.features||[];for(m=0;m<n;m++){var t=b[m],z=t.attributes[q],w=this._addFeatureIIf(z,t);w===t?(this._incRefCount(z),f.features.push(w)):z in d||(w.setGeometry(t.geometry),w.setAttributes(t.attributes))}},_removeCell:function(f,b,d){var q=this._cellMap,m=this.featureLayer,n=m.objectIdField,t=d?q[d]:q[f]&&q[f][b];if(t&&(d?delete q[d]:delete q[f][b],f=t.features))for(b=0;b<f.length;b++)d=f[b].attributes[n],this._decRefCount(d),d in m._selectedFeatures||this._removeFeatureIIf(d)}});
a.setObject("layers._OnDemandMode",D,g);return D})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){var b=D(null,{declaredClass:"esri.layers._GridLayout",constructor:function(d,q,m,n){this.origin=d;this.cellWidth=q.width;this.cellHeight=q.height;this.mapWidth=m.width;this.mapHeight=
m.height;this.srInfo=n},setResolution:function(d){this.resolution=(d.xmax-d.xmin)/this.mapWidth;this.srInfo&&(d=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[d,0,d-1])},setMapState:function(d,q,m){this.mapWidth=q;this.mapHeight=m;this.setResolution(d)},getCellCoordinates:function(d){var q=this.resolution,m=this.origin;return{row:Math.floor((m.y-d.y)/(this.cellHeight*q)),col:Math.floor((d.x-m.x)/(this.cellWidth*q))}},normalize:function(d){var q=this._frameStats;
if(q){var m=q[0],n=q[1];q=q[2];d<n?(d%=m,d=d<n?d+m:d):d>q&&(d%=m)}return d},intersects:function(d,q){var m=this.srInfo;return m?a.some(q._getParts(m),function(n){return d.intersects(n.extent)}):d.intersects(q)},getCellExtent:function(d,q){var m=this.resolution,n=this.origin,t=this.cellWidth,z=this.cellHeight;return new e(q*t*m+n.x,n.y-(d+1)*z*m,(q+1)*t*m+n.x,n.y-d*z*m,f.createSpatialReference(n.spatialReference.toJson()))},getLatticeID:function(d){var q=this.getCellCoordinates({x:d.xmin,y:d.ymax}),
m=this.getCellCoordinates({x:d.xmax,y:d.ymin});d=q.row;var n=m.row;q=this.normalize(q.col);m=this.normalize(m.col);return d+"_"+n+"_"+q+"_"+m},sorter:function(d,q){return d<q?-1:1},getCellsInExtent:function(d,q){var m=this.getCellCoordinates({x:d.xmin,y:d.ymax}),n=this.getCellCoordinates({x:d.xmax,y:d.ymin}),t=m.row,z=n.row;m=m.col;n=n.col;var w=[],y,x,A=[],v=[],u=[];for(y=t;y<=z;y++)for(x=m;x<=n;x++){var C=this.normalize(x);d=this.getCellExtent(y,C);a.some(w,function(J){return J.row===y&&J.col===
C})||w.push({row:y,col:C,extent:d,resolution:this.resolution});q&&(A.push(d.xmin,d.xmax),v.push(d.ymin,d.ymax))}m=this.normalize(m);n=this.normalize(n);A.sort(this.sorter);v.sort(this.sorter);x=A.length;for(y=x-1;0<=y;y--)y<x-1&&A[y]===A[y+1]&&A.splice(y,1);x=v.length;for(y=x-1;0<=y;y--)y<x-1&&v[y]===v[y+1]&&v.splice(y,1);if(A.length&&v.length){var E=A[0];var F=A[A.length-1];var G=v[0];var H=v[v.length-1];x=A.length;for(y=0;y<x;y++)u.push([[A[y],H],[A[y],G]]);x=v.length;for(y=0;y<x;y++)u.push([[E,
v[y]],[F,v[y]]]);A=new l({paths:u,spatialReference:this.origin.spatialReference.toJson()});w.push({latticeID:t+"_"+z+"_"+m+"_"+n,lattice:A,resolution:this.resolution})}return{minRow:t,maxRow:z,minCol:m,maxCol:n,topRow:t,bottomRow:z,leftCol:m,rightCol:n,cells:w}},_findCell:function(d,q,m){var n;a.some(d,function(t){t.row===q&&t.col===m&&(n=t);return!!n});return n},getExtentOfIntersectingCells:function(d){var q=this.getCellsInExtent(d),m=q&&q.cells;if(m&&m.length){var n=q.topRow,t=q.leftCol,z=0;a.forEach(m,
function(A){A.row===n&&z++});var w=this._findCell(m,n,t).extent,y=this.srInfo;if(!y||z!==this._frameStats[0]&&t!==q.rightCol){var x=w.xmin;y=x+z*w.getWidth()}else x=y.valid[0],y=y.valid[1];q=this._findCell(m,q.bottomRow,t).extent.ymin;(d=(new e(x,q,y,w.ymax,d.spatialReference))._normalize(!1,!1))&&d.rings&&(d=new r(d),d=k.getDenormalizedExtent(d));return d}}});b.createFromFeatureLayer=function(d){var q=d.layer;d=q.getMap()||d.map;var m=q._srInfo;(q=d&&d.loaded?new b(new g(m?m.valid[0]:d.extent.xmin,
m?m.valid[1]:d.extent.ymax,d.spatialReference),{width:q._tileWidth,height:q._tileHeight},{width:d.width,height:d.height},m):null)&&q.setResolution(d.extent);return q};B.setObject("layers._GridLayout",b,h);return b})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(D,B,a,c,h){D=D([h],{declaredClass:"esri.layers._SelectionMode",constructor:function(g){this.featureLayer=g;this._featureMap={}},propertyChangeHandler:function(g){this._init&&
0===g&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});B.setObject("layers._SelectionMode",D,c);return D})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f){D=D([f],{declaredClass:"esri.layers._StreamMode",constructor:function(b,d){this.featureLayer=b;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=B.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;b.purgeOptions&&b.purgeOptions.age&&"number"===typeof b.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*b.purgeOptions.age));this._drawFeatures=
B.hitch(this,this._drawFeatures);this._queryErrorHandler=B.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(b){this._init&&(0===b?this._applyTimeFilter():3===b&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(b){var d=this.featureLayer,q=d.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));d._joinField&&this._getFeature(b.attributes[q])?this._drawBuffer.updates.push({oid:b.attributes[q],updates:b}):this._drawBuffer.adds.push(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var b=this.featureLayer;b&&(b._relatedUrl||b._keepLatestUrl?(b._fireUpdateStart(),b._refreshing=!0,b.disconnect(),b.clear(),b._relatedQueried=!1,b._keepLatestQueried=!1,
b.connect()):(b._fireUpdateStart(),b.clear(),b._fireUpdateEnd()))},_drawFeatures:function(b,d){var q=this.featureLayer;q._create(b.features||[]);q._fireUpdateEnd(null,d)},_applyTimeFilter:function(b){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var d=this.featureLayer,q=d.objectIdField;b&&a.forEach(b,function(m){m=m.attributes[q];d._unSelectFeatureIIf(m,this);this._decRefCount(m);this._removeFeatureIIf(m)},this)},_addFeatures:function(b){var d=this.featureLayer,q=
d._endTimeField,m=d._startTimeField,n,t=[],z=[],w=[];var y=d._trackManager;var x=d.objectIdField;if(y)for(n in b=y.addFeatures(b),b)b.hasOwnProperty(n)&&(t.push(n),b[n].adds&&(z=z.concat(b[n].adds)),b[n].deletes&&(w=w.concat(b[n].deletes)));else z=b;a.forEach(z,function(A){var v=A.attributes[x];var u=q&&A.attributes[q];!u&&this._maxFeatureAge&&(u=m&&A.attributes[m]?A.attributes[m]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);u&&(u=1E3*Math.ceil(u/1E3),this._featuresByTime[u]?this._featuresByTime[u].push(v):
this._featuresByTime[u]=[v]);this._addFeatureIIf(v,A);this._incRefCount(v)},this);w.length&&this._removeFeatures(w);y&&y.refreshTracks(t)},_updateFeatures:function(b){var d=this.featureLayer,q=[];var m=d._trackManager;var n=d._trackIdField;a.forEach(b,function(t){var z=t.updates;t=this._getFeature(t.oid);var w;if(t){z.geometry&&t.setGeometry(z.geometry);z=z.attributes||{};for(w in z)z.hasOwnProperty(w)&&(t.attributes[w]=z[w]);t.setAttributes(t.attributes);t.visible=this._checkFeatureTimeIntersects(t);
m&&t.attributes[n]?q.push(t.attributes[n]):d._repaint(t,null,!0)}},this);q.length&&m.refreshTracks(q)},_redrawAllTracks:function(){var b=this.featureLayer._trackManager,d;b&&(d=b.trimTracks())&&0<d.length&&(this._removeFeatures(d),b.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var b=this._drawBuffer,d=b.adds.splice(0,b.adds.length),q=b.updates.splice(0,b.updates.length);b=this.featureLayer;if(!b)return!1;b.updating||b._fireUpdateStart();this._addFeatures(d);this._updateFeatures(q);
(d=this._getExpiredFeatures())&&d.length&&(this._removeFeatures(d),b._trackManager&&b._trackManager.removeFeatures(d));b._purge();b._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var b=this._timeoutId,d=this._drawBuffer,q=d.adds;d=d.updates;b&&clearTimeout(b);q.splice(0,q.length);d.splice(0,d.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(b){b=
b||0===b?b:200;0>b&&(b=200);this._refreshRate=b},_checkFeatureTimeIntersects:function(b){var d=this.featureLayer,q=d.getMap();return(q=q?q.timeExtent:null)&&d.timeInfo&&(d.timeInfo.startTimeField||d.timeInfo.endTimeField)?0<d._filterByTime([b],q.startTime,q.endTime).match.length:!0},_fetchArchive:function(b){var d=new c,q=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);q._fireUpdateStart();if(b&&this.map){b=new r(b);var m=new l;var n=this.map;var t=q.getFilter()||
{};var z=t.where||"1\x3d1";var w=t.geometry?k.fromJson(t.geometry):null;t=t.outFields?t.outFields.split(","):["*"];m.geometry=w;m.where=z;m.outFields=t;m.returnGeometry=!0;m.outSpatialReference=new e(n.spatialReference.toJson());this._pendingRequest=b.execute(m).then(function(y){this._pendingRequest=null;var x=this._fixFieldNameCasing(q,y);y.features=x;this._drawFeatures(y);q._fireUpdateEnd();d.resolve()}.bind(this)).otherwise(function(y){this._pendingRequest=null;q._errorHandler(y);q._fireUpdateEnd(y);
d.reject(y)}.bind(this))}else d.resolve();return d.promise},_queryErrorHandler:function(b){var d=this.featureLayer;d._errorHandler(b);d._fireUpdateEnd(b)},_fixFieldNameCasing:function(b,d){var q=d.features||[],m=d.fields;if(!m||!q.length)return q;m=this._mapFieldNameDifferences(b.fields,m);for(var n=[],t,z,w=0,y=d.features.length;w<y;w++)t=q[w],z=this._swizzleResponseAttributes(t.attributes,m),n.push({geometry:t.geometry,attributes:z});return n},_mapFieldNameDifferences:function(b,d){var q=[],m={},
n;var t=0;for(n=d.length;t<n;t++)q.push(d[t].name);t=0;for(n=b.length;t<n;t++){var z=b[t].name,w=this._checkForStreamFieldName(z,q);w&&(m[w]=z)}return m},_checkForStreamFieldName:function(b,d){for(var q=b.toLowerCase(),m,n=0,t=d.length;n<t;n++)if(d[n].toLowerCase()===q){m=d[n];break}return m},_swizzleResponseAttributes:function(b,d){var q={},m;for(m in b)if(b.hasOwnProperty(m)){var n=b[m];d.hasOwnProperty(m)?q[d[m]]=n:q[m]=n}return q},_getExpiredFeatures:function(){var b,d,q=[],m=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return m;var n=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=b=1E3*Math.ceil(Date.now()/1E3);if(n&&n!==b)for(d=this._featuresByTime;n<=b;n+=1E3)d[n]&&(q=q.concat(d[n]),delete d[n]);a.forEach(q,function(t){(t=this._getFeature(t))&&m.push(t)},this);return m}});B.setObject("layers._StreamMode",D,g);return D})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(D,B,a,c,h,g,e,l,r,k){var f=-1!==g.renderer.toLowerCase().indexOf("canvas");D=D(null,{declaredClass:"esri.layers._TrackManager",constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;b=this.layer;this.createTracklineContainer()&&(this._handles=[b.on("visibility-change",B.hitch(this,function(d){this.container.setVisibility(d.visible);this.container.evaluateSuspension()})),b.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var b=this.layer;if("esriGeometryPoint"!==b.geometryType)return null;var d=this.map,q=b._getRenderer();q=q&&q.trackRenderer;var m=this.container=new k._GraphicsLayer({id:b.id+"_tracks",_child:!0,visible:b.visible,minScale:b.minScale,maxScale:b.maxScale});m.loaded=!0;m.onLoad(m);m._setMap(d,b._div);f||(d=m._div.getNode(),b=b._div.getNode(),d&&b&&h.place(d,b,"first"));m.setRenderer(q);return m},addFeatures:function(b){var d=this.trackMap,
q=this.layer,m=q._trackIdField,n=[];a.forEach(b,function(y){var x=y.attributes[m];(d[x]=d[x]||[]).push(y);-1===a.indexOf(n,x)&&n.push(x)});var t=q._startTimeField,z=q.objectIdField,w=function(y,x){var A=y.attributes[t],v=x.attributes[t];return A===v?y.attributes[z]<x.attributes[z]?-1:1:A<v?-1:1};a.forEach(n,function(y){d[y].sort(w)})},trimTracks:function(b){function d(z){for(z=q[z]||[];z.length>m;)n.push(z.shift())}var q=this.trackMap,m=this.layer.maximumTrackPoints||0,n=[],t;if(!m)return n;if(b)a.forEach(b,
function(z){d(z)});else for(t in q)q.hasOwnProperty(t)&&d(t);return n},drawTracks:function(b){function d(y){var x=t[y],A,v;var u=q.trackLineMap[y];m.remove(u);delete q.trackLineMap[y];u=null;if(!x||2>x.length)return!1;u=[];for(A=x.length-1;0<=A;A--)(v=x[A].geometry)&&u.push([v.x,v.y]);x={};x[w]=y;1<u.length&&(u=new l(new r({paths:[u],spatialReference:z}),null,x),m.add(u),q.trackLineMap[y]=u)}var q=this,m=this.container,n;if(m){var t=this.trackMap;var z=this.map.spatialReference;var w=this.layer._trackIdField;
if(b)a.forEach(b,function(y){d(y)});else for(n in t)t.hasOwnProperty(n)&&d(n)}},refreshTracks:function(b){function d(w){var y;q.drawTracks([w]);if(t&&t.latestObservationRenderer){w=m[w]||[];var x=w.length;for(y=0;y<x;y++)n._repaint(w[y],null,!0)}}var q=this,m=this.trackMap,n=this.layer,t=n._getRenderer(),z;if(b)a.forEach(b,function(w){d(w)});else for(z in m)m.hasOwnProperty(z)&&d(z);this.moveLatestToFront()},moveLatestToFront:function(b){a.forEach(this.getLatestObservations(b),function(d){var q=d._shape;
q&&q._moveToFront();this._repaint(d,null,!0)},this.layer)},getLatestObservations:function(b){function d(z){z=n[z];return z[z.length-1]}var q=[],m=this.layer._getRenderer(),n=this.trackMap,t;if(!m.latestObservationRenderer)return q;if(b)a.forEach(b,function(z){q.push(d(z))});else for(t in n)n.hasOwnProperty(t)&&q.push(d(t));return q},clearTracks:function(b){var d=this.getLatestObservations(b),q=this.container,m=this.trackMap,n;if(b)a.forEach(b,function(z){delete this.trackMap[z];q&&(t=this.trackLineMap[z],
q.remove(t),delete this.trackLineMap[z])},this);else{if(q)for(n in m){var t=this.trackLineMap[n];q.remove(t)}this.trackMap={};this.trackLineMap={}}a.forEach(d,function(z){this._repaint(z,null,!0)},this.layer)},isLatestObservation:function(b){var d=this.trackMap[b.attributes[this.layer._trackIdField]];return d?d[d.length-1]===b:!1},destroy:function(){a.forEach(this._handles,function(d){d.remove()});var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});B.setObject("layers._TrackManager",D,e);return D})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){function q(){}function m(n){var t=n.layer;return{geometry:n.geometry,attributes:n.attributes,getLayer:function(){return t}}}
D=D(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(n){this.sourceLayer=n;this._hndls=[]},initialize:function(n){this.map=n;var t=this.sourceLayer,z=t.renderer;t.setDrawMode(!1);this.imageLayer=n._getMapImageLyr();var w=this;this.heatmapRenderer=z instanceof f?z:(z.getRendererInfoByZoom(n.getZoom())||z.getRendererInfoByScale(n.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);h(["../workers/heatmapCalculator"],function(y){w._calculator=new y(B.mixin({width:w.map.width,height:w.map.height},w._getOptions()));w._setupRenderer();
w.heatmapRenderer.getStats=y.calculateStats;w.heatmapRenderer.getHistogramData=y.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(n){var t=n.renderer,z=t instanceof f;this.heatmapRenderer?z?this.heatmapRenderer=t:this._removeRenderer(n):z&&(this.heatmapRenderer=t,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(n){n=n.opacity;var t=this._getImageBySourceId(this.sourceLayer.id);t&&t.setOpacity(n)},_setupRenderer:function(){var n=this._hndls,t=this.sourceLayer,z=this.map,w=this;t._originalDraw=t._draw;t._draw=q;t._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);n.push(t.on("update-end",this.redraw));n.push(t.on("suspend",function(y){(y=w._getImageBySourceId(w.sourceLayer.id))&&y.hide()}));n.push(t.on("resume",
function(y){(y=w._getImageBySourceId(w.sourceLayer.id))&&y.show()}));n.push(a.after(t,"redraw",this.redraw));n.push(z.on("layer-remove",function(y){y.layer==t&&((y=w._getImageBySourceId(w.sourceLayer.id))&&w.imageLayer.removeImage(y),w._removeRenderer({target:t}))}));t._collection&&n.push(t.on("graphic-add",function(y){w._reprojectFeature(y.graphic);w.redraw()}));1!==t.mode&&(n.push(z.on("resize, pan-end",this.redraw)),n.push(z.on("zoom-end",this.redraw)));n.push(t.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();t.graphics&&t.graphics.length&&(t.graphics[0].geometry&&!z.spatialReference.equals(t.graphics[0].geometry.spatialReference)&&c.forEach(t.graphics,function(y){this._reprojectFeature(y)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var n=this;this._drawTimer=setTimeout(function(){clearTimeout(n._drawTimer);n._drawTimer=null;n.sourceLayer._getRenderer().isInstanceOf(f)&&n.recalculateHeatmap()},16)}},_removeRenderer:function(n){var t=
n.target;t._draw=t._originalDraw;delete t._originalDraw;t.setDrawMode(!0);this._removeHandlers();this._hndls=[];var z=this._getImageBySourceId(this.sourceLayer.id);z&&this.imageLayer.removeImage(z);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;t.renderer!=n.renderer&&t.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),t.renderer&&t.renderer.getRendererInfo&&t.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(n){if(n&&n.geometry){var t=n.geometry,z=this.map.spatialReference;z.equals(t.spatialReference)||(t=r.project(t,z),null!=t&&(n.geometry=t))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var n=this.sourceLayer,t=this.map,z=this.heatmapRenderer,w=this.map.extent,y=this.map.width,x=this.map.height,A=this._calculator,v=this,u=function(E){E=v._getScreenPoints(E.features,t,n);E=A.calculateImageData(B.mixin({screenPoints:E,
mapinfo:{extent:[w.xmin,w.ymin,w.xmax,w.ymax],resolution:t.getResolution()},width:y,height:x},v._getOptions()));E=z.getSymbol(m({geometry:t.extent,attributes:{size:[y,x],imageData:E},layer:n}));E=new k({extent:t.extent,href:E.url,opacity:0,sourceId:n.id});v._swapMapImages(E,v._getImageBySourceId(n.id));n.suspended&&E.hide()},C={geometry:t.extent,timeExtent:n.useMapTime?t.timeExtent:void 0,spatialRelationship:b.SPATIAL_REL_INTERSECTS};null!=n._canDoClientSideQuery(C)?n.queryFeatures(C,u):u({features:n.graphics})},
_getScreenPoints:function(n,t,z){var w=[],y=n.length,x=0,A=0,v=new l(t.extent.xmin,t.extent.ymax,t.spatialReference),u=t.toScreen(v),C=u.x;u=u.y;var E=t.getResolution(),F;for((A=t.extent.getCacheValue("_parts"))&&(F=c.map(A,function(H){return z._intersects(t,H.extent)[0]}));y--;)if(A=n[y],A.geometry&&A.visible){var G={x:Math.ceil((A.geometry.x-v.x)/E+C),y:Math.floor((v.y-A.geometry.y)/E-u),attributes:A.attributes};F&&(A=1<F.length&&G.x<-F[0]?F[1]:F[0],G.x+=A);w[x++]=G}return w},_getImageBySourceId:function(n){var t=
this.imageLayer.getImages();t=c.filter(t,function(z){return z.sourceId==n});if(t.length)return t[t.length-1]},_swapMapImages:function(n,t){function z(){w.removeImage(t)}var w=this.imageLayer,y=this.sourceLayer.opacity;w.addImage(n);d.anim(n._node,{opacity:y},null,null,function(){n.opacity=y});null!=t&&d.anim(t._node,{opacity:0},null,null,z)},_removeHandlers:function(){if(null!=this._hndls)for(var n=this._hndls.length;n--;)this._hndls[n].remove()},_getOptions:function(){var n=this.heatmapRenderer;
return{blurRadius:n.blurRadius,gradient:n.gradient,maxPixelIntensity:n.maxPixelIntensity,minPixelIntensity:n.minPixelIntensity,field:n.field,fieldOffset:n.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var n=this.sourceLayer.graphics,t=n.length,z;t--;)z=n[t],z._shape=z._offsets=void 0}});B.setObject("layers.HeatmapManager",D,g);return D})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y){var x=y.layers.clusters,A=y.widgets.popup,v=x.numFeatures,u=Math.pow(2,53)-1;D=D(g,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(C){this._eventHandles=[];this.layer=C.layer;this.setAggregationInfo(C.aggregationInfo)},initialize:function(C){this._initialized=!0;this._map=C;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(C){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(C);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(C){this.aggregationInfo=C?B.mixin({},C):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(C){C=C&&C.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(C):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(C){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(C)},_createContainer:function(){var C=this.layer,E=new n._GraphicsLayer({_child:!0,id:C.id+"_clusters",visible:C.visible,minScale:C.minScale,maxScale:C.maxScale,infoTemplate:this._infoTemplate});E.fields=this._fields;E.setRenderer(this._renderer);E.loaded=!0;E.onLoad(E);E._setMap(this._map,C._div);return C._childLayer=E},_destroyContainer:function(){var C=
this.container;C&&(C.clear(),C._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new z({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var C=this._clusterGenerator;C.loaded?this._awaitClusterGenerator():this._eventHandles.push(C.on("load",B.hitch(this,function(){this._awaitClusterGenerator()})),C.on("load-error",B.hitch(this,function(E){})))},
_destroyClusterGenerator:function(C){this._clusterGenerator&&this._clusterGenerator.destroy(C);this._clusterGenerator=null},_awaitClusterGenerator:function(){var C=this._clusterGenerator;C.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(C.on("start",B.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var C=this.aggregationInfo;this._clusterRadius=C&&C.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var C=this.aggregationInfo||{};C.clusterRadius=this._clusterRadius;this.aggregationInfo=C},_applyRenderer:function(){var C=this.container,E=this._getClusterRendererInfo(),F=this._compareStatInfos(this._statisticInfos,
E.statisticInfos);F&&(this._statisticInfos=E.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(a.map(this._statisticInfos,function(G){return{attributeInfo:G.attributeInfo,statisticType:G.statisticType}})),C&&a.forEach(C.graphics,function(G){this._applyClusterAttributes(G,G.getAggregationInfo())},this)));this._renderer=E.renderer;this._applyFields();this._applyInfoTemplate(!!F&&this._initialized);C&&(C.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(C){var E=this.aggregationInfo,F=E&&E.disablePopup;this.layer.infoTemplate&&!F?(E=E&&E.infoTemplate||this._infoTemplate,C=C||!E?this._createInfoTemplate():this._updateInfoTemplate(E)):C=null;this._infoTemplate=C;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var C=this.aggregationInfo||{};C.infoTemplate=
this._infoTemplate;this.aggregationInfo=C},_getClusterRendererInfo:function(){var C=this.layer&&this.layer.renderer;return C?this._createClusterRenderer(C):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var C=this._createContinuousCountRenderer();this._addSizeByCountVariable(C);return{renderer:C,statisticInfos:[]}},_createContinuousCountRenderer:function(C){var E=new d(null,"cluster_count");E.addBreak({minValue:-u,maxValue:u,symbol:C?new C.constructor(C.toJson()):new q(B.clone(this.defaults.markerSymbol))});
return E},_createClusterRenderer:function(C){if(!this._isSupportedRenderer(C))return this._getDefaultClusterRenderer();var E=[];if(this._isSimpleRenderer(C))var F=this._createContinuousCountRenderer(C.symbol);else{F=new C.constructor(C.toJson());var G=this._getRendererAttributeInfo(C);if(this._isCBRenderer(F)){var H=w.getClusterField(G,"avg");E.push(this._getStatInfo(G,"avg"));F.normalizationType=null;F.normalizationField=null;F.normalizationTotal=null}else this._isUVRenderer(F)&&(H=w.getClusterField(G,
"type"),E.push(this._getStatInfo(G,"type")));F.attributeField=H;F.setValueExpression(null);F.valueExpressionTitle=null;F.setVisualVariables(null);this._setRendererTitle(F,C)}C=this._getSupportedVariables(C);G=this._createClusterVariables(C.allVars,E);F.setVisualVariables(G);C.sizeVars.length||this._isCBSizeRenderer(F)||this._addSizeByCountVariable(F);return{renderer:F,statisticInfos:E}},_isSupportedRenderer:function(C){if(this._isSimpleRenderer(C))return!0;if(this._isCBRenderer(C)){var E=C.normalizationType;
return"function"===typeof C.attributeField||E&&"field"!==E?!1:!0}return this._isUVRenderer(C)?"function"===typeof C.attributeField||C.attributeField2?!1:!0:!1},_isSimpleRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(C){var E=C.infos;if(!this._isCBRenderer(C)||
!E||2>E.length)return!1;var F=Infinity,G=-Infinity;a.forEach(E,function(H){if(H=H.symbol){var J=0;switch(H.type){case "simplemarkersymbol":J=H.size;break;case "picturemarkersymbol":J=(H.width+H.height)/2}F=Math.min(F,J);G=Math.max(G,J)}});return Infinity!==F&&-Infinity!==G&&F!==G},_getRendererAttributeInfo:function(C){var E=C.attributeField,F=E?this.layer.getField(E):null;return{field:E,attributeType:F&&"esriFieldTypeDate"===F.type?"date":null,rotationType:null,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle,
normalizationField:C.normalizationField}},_setRendererTitle:function(C,E){C.legendOptions=B.clone(E.legendOptions);C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=b.getRendererTitle(E,this.layer))},_getSupportedVariables:function(C){var E=C.getVisualVariablesForType("colorInfo",!1)||[],F=C.getVisualVariablesForType("sizeInfo",!1)||[],G=C.getVisualVariablesForType("opacityInfo",!1)||[];C=C.getVisualVariablesForType("rotationInfo",!1)||[];E=a.filter(E,
this._variableFilter);F=a.filter(F,this._variableFilter);G=a.filter(G,this._variableFilter);C=a.filter(C,this._variableFilter);return{sizeVars:F,allVars:E.concat(F).concat(G).concat(C)}},_variableFilter:function(C){return"function"!==typeof C.field&&!m.viewScaleRE.test(C.valueExpression)},_createClusterVariables:function(C,E){return a.map(C,function(F){return this._createVarForAvg(F,E)},this)},_createVarForAvg:function(C,E){var F=B.clone(C),G=this._getVariableAttributeInfo(C);F.field=w.getClusterField(G,
"avg");F.normalizationField=null;F.valueExpression=null;F.valueExpressionTitle=null;G=this._getStatInfo(G,"avg");this._addStatInfo(E,G);this._setVariableTitle(F,C);return F},_getVariableAttributeInfo:function(C){var E="rotationInfo"===C.type,F=E?"angle":null;E=E?C.rotationType:null;var G=C.legendOptions&&C.legendOptions.title,H=C.field,J=H?this.layer.getField(H):null;J&&"esriFieldTypeDate"===J.type&&(F="date");return{field:H,attributeType:F,rotationType:E,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle||
C.valueExpression&&G,normalizationField:C.normalizationField}},_setVariableTitle:function(C,E){C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=b.getVisualVariableTitle(E,this.layer))},_getStatInfo:function(C,E){return{statisticHash:w.getStatisticHash(C,E),attributeInfo:C,statisticType:E}},_addStatInfo:function(C,E){var F=this._findStatInfo(C,E);F?F.attributeInfo.valueExpressionTitle||(F.attributeInfo.valueExpressionTitle=E.attributeInfo.valueExpressionTitle):
C.push(E)},_findStatInfo:function(C,E){var F;a.some(C,function(G){G.statisticHash===E.statisticHash&&(F=G);return!!F});return F},_compareStatInfos:function(C,E){var F=a.filter(C,function(H){return!this._findStatInfo(E,H)},this),G=a.filter(E,function(H){return!this._findStatInfo(C,H)},this);return G.length||F.length?{added:G,removed:F}:null},_addSizeByCountVariable:function(C){var E=this._createSizeByCountVariable();E&&this._addVariable(C,E)},_getSizeByCountVariable:function(C){C=C.getVisualVariablesForType("sizeInfo",
!1)||[];return a.filter(C,function(E){return"cluster_count"===E.field})[0]},_updateSizeByCountVariable:function(){var C=this._renderer,E=this._getSizeByCountVariable(C);if(E){var F=this._createSizeByCountVariable();F&&this._replaceVariable(C,E,F)}},_createSizeByCountVariable:function(){var C=this._clusterGenerator;if(C){var E=C.getCurrentLodStats();if(E){var F=C.getNumFeatures();C=C.clusters;var G=E.min,H=E.max;1===E.count&&G===F||1===C.length&&C[0].count===F?(G=1,H=F):G&&G===H&&(H=2*G);F={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:G,maxDataValue:H,legendOptions:{title:v}}}}return F},_addVariable:function(C,E){var F=C.visualVariables||[];F.push(E);C.setVisualVariables(F)},_replaceVariable:function(C,E,F){var G=C.visualVariables;E=a.indexOf(G,E);-1<E&&G.splice(E,1);G.push(F);C.setVisualVariables(G)},_getFields:function(C){var E=[new t({name:"cluster_count",type:"esriFieldTypeInteger"})];a.forEach(C,function(F){var G=F.statisticType;F=F.attributeInfo;
var H;"avg"===G?H="date"===F.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===G&&(H=F.field?this.layer.getField(F.field).type:"esriFieldTypeString");E.push(new t({name:w.getClusterField(F,G),type:H}))},this);return E},_createInfoTemplate:function(){var C=this._statisticInfos,E=this._renderer,F=[{fieldName:"cluster_count",label:v,visible:!0,format:{digitSeparator:!0,places:0}}],G=[],H=[l.substitute({count:"{cluster_count}"},x.countSummary)],J=this._isUVRenderer(E)?E.infos:[];a.forEach(C,
function(I){var R=I.statisticType,O=I.attributeInfo,P=w.getClusterField(O,R),L=this._getFieldLabel(I);if("avg"===R){var K={fieldName:P,label:L,visible:!0,format:"date"===O.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var Q=this._getFieldSummary(I,P)}else"type"===R&&(Q="expression/"+P,K={fieldName:Q,visible:!0},G.push({name:P,title:L,returnType:"string",expression:this._getExpression(J,P)}),Q=this._getFieldSummary(I,Q));K&&F.push(K);Q&&H.push(Q)},this);return this._createPopupTemplate({fieldInfos:F,
expressionInfos:G,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(C){var E=C.toJson(),F=this._isUVRenderer(this._renderer)?this._renderer.infos:[];a.forEach(this._statisticInfos,function(G){var H=G.statisticType;G=w.getClusterField(G.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(G,E))&&(H.expression=this._getExpression(F,G))},this);return this._createPopupTemplate(E)},_createPopupTemplate:function(C){var E=new f(C),F=E.title;E.setTitle(B.hitch(this,function(G){var H=
this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(H&&H.declaredClass)||E.info.title)return F.call(E,G);G=(G=G.attributes)&&G.cluster_count;return null==G?"":l.substitute({count:G},x.countTitle)}));return E},_findExpressionInfo:function(C,E){var F;a.some(E.expressionInfos,function(G){G.name===C&&(F=G);return!!F});return F},_escapeDoubleQuotes:function(C){return C?C.replace(/"/g,'\\"'):""},_getExpression:function(C,E){return["var uvInfos \x3d ["+this._getObjects(C).join(", ")+"];",'var predominantType \x3d Text($feature["'+
E+'"]);','var label \x3d "'+this._escapeDoubleQuotes(x.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(C){return a.map(C,function(E){return'{"value": "'+String(E.value)+'","label": "'+this._escapeDoubleQuotes(String(E.label))+'"}'},this)},_getFieldLabel:function(C){var E=C.statisticType,F=C.attributeInfo,G=F.field;C=F.normalizationField;
var H="";if("avg"===E)var J=C?x.avgNormFieldLabel:x.avgFieldLabel;else"type"===E&&(J=x.predominantFieldLabel);J&&(E=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(G),C=C&&this.layer.getFieldLabel(C),H=l.substitute({fieldLabel:E||"",normFieldLabel:C||""},J));return H},_getFieldSummary:function(C,E){var F=C.statisticType,G=C.attributeInfo,H=G.field,J=G.normalizationField,I="";if("avg"===F)var R=J?x.avgNormFieldSummary:x.avgFieldSummary;else"type"===F&&(R=x.predominantFieldSummary);
R&&(F=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(H),J=J&&this.layer.getFieldLabel(J),I=l.substitute({fieldLabel:F||"",normFieldLabel:J||"",fieldValue:"{"+E+"}"},R));return I},_removeFromPopup:function(C){var E=this._map.infoWindow,F=E.features;if(F&&F.length){var G=a.filter(F,function(H){return H.getLayer()!==C});G.length<F.length&&(G.length?E.setFeatures(G):(E.clearFeatures(),E.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=
null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(C,E){var F=E.clusterFillSymbol;F&&(F=new F.constructor(F.toJson()));F=new e(C,F);this._map.graphics.add(F);this._clusterBoundary=F},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:A.NLS_browseFeatures,
className:"browseFeatures",callback:B.hitch(this,function(C){C.preventDefault();C=this._map.infoWindow;var E=C.getSelectedFeature(),F=E.getChildGraphics(),G=C.getCurrentAnchor();C.setFeatures(F,{anchor:G});if(F=k.graphicsExtent(F))this._addClusterBoundary(F,C),C.show(this._getPopupLocation(F,G));this._popupClusterGraphic=E})}])[0]},_getPopupLocation:function(C,E){var F=C.getCenter();E=E.toLowerCase();-1<E.indexOf("top")?F.update(F.x,C.ymax):-1<E.indexOf("bottom")?F.update(F.x,C.ymin):-1<E.indexOf("left")?
F.update(C.xmin,F.y):F.update(C.xmax,F.y);return F},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:A.NLS_viewSummary,className:"viewSummary",callback:B.hitch(this,function(C){C.preventDefault();C=this._popupClusterGraphic;var E=this._map.infoWindow;E.setFeatures([C]);E.show(C.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",
B.hitch(this,function(C){(C.mapLevelChange||C.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",B.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var C=[],E=[];a.forEach(this._clusterGenerator.clusters,function(F){var G=new e(F.centroid);G.setAggregationSourceLayer(this.layer);G.setAggregationInfo(F);this._applyClusterAttributes(G,F);1===F.count?(F=this._getSingleGraphic(G),
E.push(F)):C.push(G)},this);this._showSingleGraphics(E);this._addGraphics(C)},_addGraphics:function(C){var E=this.container;E.clear();a.forEach(C,function(F){E.add(F)})},_getSingleGraphic:function(C){var E=this._clusterGenerator.getCell(C.getAggregationInfo().primary).features[0],F=this.layer.renderer;F=F&&F.getSymbol(E);var G=this._getSizeByCountVariable(this._renderer);F&&G&&(C=G?this._renderer.getSize(C,{sizeInfo:G,shape:F.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):
null,E.setSize(C));return E},_showSingleGraphics:function(C){a.forEach(C,this._showSingleGraphic);this._singleGraphics=C},_hideSingleGraphics:function(){a.forEach(this._singleGraphics,function(C){C.setSize(null);this._hideSingleGraphic(C)},this);this._singleGraphics=null},_clearSingleGraphics:function(){a.forEach(this._singleGraphics,function(C){C.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(C){C&&C._resume()},_hideSingleGraphic:function(C){C&&C._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&
(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(C,E){C.setAttributes(E.attributes)},_createLayerEventListeners:function(){var C=this.layer;this._eventHandles.push(C.on("visibility-change",B.hitch(this,function(E){this.container.setVisibility(E.visible)})),C.on("scale-range-change",B.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),C.on("renderer-change",B.hitch(this,function(){this._applyRenderer()})),
C.on("info-template-change",B.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",B.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var C=this._map.infoWindow;this._eventHandles.push(C.on("selection-change",B.hitch(this,function(){this._resetClusterNavPartial();
var E=this._map.infoWindow.getSelectedFeature(),F=E&&E.getLayer();if(F){var G;F===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(G=this._createBrowseFeaturesAction())):F===this.layer&&E._isSuspended()?(this._map.infoWindow.addActions&&(G=this._createViewSummaryAction()),this._popupSingleGraphic=E,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=G?[G]:null}})),C.on("clear-features",B.hitch(this,function(E){this._resetClusterNav();
E.isIntermediate||this._removeClusterBoundary()})),C.on("hide",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),C.on("show",B.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){a.forEach(this._eventHandles,function(C){C.remove()})}});B.setObject("layers.clustering.ClusterManager",D,h);
return D})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(D,B,a,c,h,g,e,l){D=D([g,e],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(r,k){B.mixin(this,k);this.initialize(r,k)},getTitle:function(r){var k;this.info&&(k=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(r,
this._fetchAttributes(r,null,this.getExpressionFieldsInTitle()),!0).title);return k||""},getContent:function(r){return this.info?(new l({template:this,graphic:r,chartTheme:this.chartTheme},c.create("div"))).domNode:""}});B.setObject("dijit.PopupTemplate",D,h);return D})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A){D=D(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(v,u){if(v){B.mixin(this,u);this.info=v;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var C=this._fieldLabels=
{},E=this._fieldsMap={};this.info.fieldInfos&&a.forEach(this.info.fieldInfos,function(F){var G=F.fieldName.toLowerCase(),H=this._isExpressionField(G)?this.getExpressionInfo(G):null;C[G]=H?H.title:F.label;E[G]=F},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return c.fromJson(c.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(v){var u;a.some(this.info&&this.info.fieldInfos,function(C){C.fieldName===v&&(u=C);return!!u});return u},getExpressionInfo:function(v){if(v=this._getExprField(v)){v=v.toLowerCase();var u;a.some(this.info.expressionInfos,function(C){C.name.toLowerCase()===v&&(u=C);return!!u});return u}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var v=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||a.forEach(this.info.fieldInfos,function(u){u.visible&&this._collectExprField(u.fieldName,v)},this);a.forEach(this.info.mediaInfos,function(u){this._collectExprFieldsFromTemplatedString(u.title,v);this._collectExprFieldsFromTemplatedString(u.caption,v);if(u=u.value)this._collectExprFieldsFromTemplatedString(u.linkURL,v),this._collectExprFieldsFromTemplatedString(u.sourceURL,v),a.forEach(u.fields,function(C){this._collectExprField(C,
v)},this),this._collectExprField(u.normalizeField,v),this._collectExprField(u.tooltipField,v)},this);return v},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return a.some(this._getArcadeExpressions(),function(v){return v.hasGeometryOperations()})},hasAsyncExpressions:function(){return a.some(this._getArcadeExpressions(),function(v){return v.async})},initializeArcadeEngine:function(){return y.initialize(this._getArcadeExpressions())},
getComponents:function(v,u){var C=this.info,E={initArcadeEngine:this.initializeArcadeEngine()};C.fieldInfos&&(C=a.filter(C.fieldInfos,function(F){return-1!==F.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<C.length&&(E.relatedInfo=this._getRelatedRecords({graphic:v,fieldsInfo:C}));this._needFullResolutionFeature(v)&&(E.fullResolutionFeature=this._getFullResolutionFeature(v));this._needAggregatedFeaturesLayer(v)&&(E.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(v));return q(E).then(B.hitch(this,
function(F){var G=F.fullResolutionFeature,H=u&&u.evaluateAllExpressions,J=H?null:this.getRequiredExpressionFields();F=(H?this.hasAsyncExpressions():this._hasAsyncExpressions(J))?this._fetchAttributesAsync(v,G,J,F.aggregatedFeaturesLayer):this._fetchAttributes(v,G,J);return q([F]).then(B.hitch(this,function(I){return this._getPopupValues(v,I[0])}))}))},getAttachments:function(v){var u=v.getSourceLayer();v=v.attributes;if(this.info.showAttachments&&u&&u.hasAttachments&&u.objectIdField&&(v=v&&v[u.objectIdField]))return u.queryAttachmentInfos(v)},
_needAggregatedFeaturesLayer:function(v){return v.isAggregate()?a.some(this._getArcadeExpressions(),function(u){return u.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(v){return v.getAggregationSourceLayer().getFeatureCollectionLayer(v.getChildGraphics()).always(function(u){return u instanceof Error?null:u})},_needFullResolutionFeature:function(v){return(v=v.getSourceLayer())?"function"===typeof v.getMaxAllowableOffset&&0<v.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(v){var u=v.getSourceLayer(),C=u.objectIdField;v=(v=v.attributes)&&C&&v[C];if(null==v)return null;var E=new n;E.where=C+"\x3d"+v;E.maxAllowableOffset=0;E.outFields=[C];u._enableCacheHint(E);return u.queryFeatures(E).then(function(F){return F.features&&F.features[0]})},_isExpressionField:function(v){return this._reExprField.test(v)},_getExprField:function(v){return this._isExpressionField(v)?v.replace(this._reExprField,""):null},_collectExprField:function(v,u){var C=
this._getExprField(v);C&&u.push(C);return u},_collectExprFieldsFromTemplatedString:function(v,u){var C=this._getExprFieldsFromTemplatedString(v);C.length&&Array.prototype.push.apply(u,C);return u},_getExprFieldsFromTemplatedString:function(v){v=v?v.match(this._reExprFieldPattern):null;return a.map(v,function(u){return u.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(v){return a.some(v,function(u){u=this._exprCache[u];return!(!u||!u.async)},this)},_compileExpressions:function(v){var u={};a.forEach(v,function(C){var E=C.returnType&&C.returnType.toLowerCase();u[C.name]=new m({expression:C.expression,returnType:"number"===E?"number":"string",profile:y})});return u},_getArcadeExpressions:function(){var v=[],u;for(u in this._exprCache)v.push(this._exprCache[u]);return v},_fetchAttributesAsync:function(v,u,C,E){var F=this._fetchAttributes(v,
u,C,E);v={};for(var G in F)(u=F[G])&&u.then&&(v[G]=u);return q(v).then(B.hitch(this,function(H){for(var J in H){var I=H[J];F[J]=I instanceof Error?null:this._processArcadeResult(I)}return F}))},_processArcadeResult:function(v){"string"===typeof v&&(v=k.encode(v));return v},_fetchAttributes:function(v,u,C,E){var F=B.clone(v.attributes)||{},G=u&&u.geometry,H=this._exprPrefix,J=this._exprCache;C=C||a.map(this.info.expressionInfos,function(I){return I.name});a.forEach(C,function(I){var R=H+I;I=(I=J[I])?
v.evaluateExpression(I,this._getEvalOptions(I,v,G,E)):null;F[R]=this._processArcadeResult(I)},this);return F},_getEvalOptions:function(v,u,C,E){var F=v.hasGeometryOperations(),G=u.getSourceLayer(),H=G&&(G.getMap()||G.parentLayer&&G.parentLayer.getMap());E&&(E._map=H);v=y.getEvalOptions({expression:v,feature:u,layer:G,aggregatedFeaturesLayer:E,map:H,spatialReference:H&&H.spatialReference});u=v.context.vars.$feature;F=!(!F||!C);u&&F&&(u._geometry=C);v.skipCache=F;return v},_getPopupValues:function(v,
u,C){u=u||this._fetchAttributes(v);var E=this.info,F=v.getSourceLayer(),G=B.clone(u),H="",J="",I,R,O=F&&F._getDateOpts&&F._getDateOpts().properties;O=O&&O.slice(0);var P={dateFormat:{properties:O,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(Q in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(Q)){var L=this._relatedInfo[Q],K=this._relatedLayersInfo[Q];L&&(a.forEach(L.relatedFeatures,function(aa){for(R in aa.attributes)if(aa.attributes.hasOwnProperty(R)&&
"esriRelCardinalityOneToOne"===K.relation.cardinality){var M=this._toRelatedFieldName([K.relation.id,R]);u[M]=G[M]=aa.attributes[R]}},this),a.forEach(L.relatedStatsFeatures,function(aa){for(R in aa.attributes)if(aa.attributes.hasOwnProperty(R)){var M=this._toRelatedFieldName([K.relation.id,R]);u[M]=G[M]=aa.attributes[R]}},this))}for(I in G){var Q=this._fieldsMap[I.toLowerCase()];L=this._getLayerFieldInfo(F,I);Q&&L&&(Q.fieldName=L.name);G[I]=this._formatValue(G[I],I,P);O&&Q&&Q.format&&Q.format.dateFormat&&
(Q=a.indexOf(O,I),-1<Q&&O.splice(Q,1))}if(F)for(I in O=F.typeIdField,u)if(u.hasOwnProperty(I)&&-1===I.indexOf(this._relatedFieldPrefix)){var W=u[I];f.isDefined(W)&&(Q=this._getDomainName(F,v,I,W),f.isDefined(Q)?G[I]=Q:I===O&&(Q=this._getTypeName(F,v,W),f.isDefined(Q)&&(G[I]=Q)))}E.title&&(H=this._processFieldsInLinks(this._fixTokens(E.title,F),u),H=B.trim(this._removeEmptyHref(f.substitute(G,H,P)||"")));if(C)return{title:H};E.description&&(J=this._processFieldsInLinks(this._fixTokens(E.description,
F),u),J=B.trim(this._removeEmptyHref(f.substitute(G,J,P)||"")));if(E.fieldInfos){var ba=[];a.forEach(E.fieldInfos,function(aa){(I=aa.fieldName)&&aa.visible&&ba.push([this._fieldLabels[I.toLowerCase()]||I,f.substitute(G,"${"+I+"}",P)||""])},this)}var S;if(E.mediaInfos){var X=[];a.forEach(E.mediaInfos,function(aa){S=0;W=aa.value;switch(aa.type){case "image":var M=W.sourceURL;M=M&&B.trim(this._removeEmptyHref(f.substitute(u,this._fixTokens(M,F))));S=!!M;break;case "piechart":case "linechart":case "columnchart":case "barchart":M=
W.normalizeField;W.fields=a.map(W.fields,function(va){return(da=this._getLayerFieldInfo(F,va))?da.name:va},this);if(M){var da=this._getLayerFieldInfo(F,M);W.normalizeField=da?da.name:M}S=a.some(W.fields,function(va){return f.isDefined(u[va])||-1!==va.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(S){aa=B.clone(aa);W=aa.value;M=aa.title?this._processFieldsInLinks(this._fixTokens(aa.title,F),u):"";var ea=aa.caption?this._processFieldsInLinks(this._fixTokens(aa.caption,
F),u):"";aa.title=M?B.trim(this._removeEmptyHref(f.substitute(G,M,P)||"")):"";aa.caption=ea?B.trim(this._removeEmptyHref(f.substitute(G,ea,P)||"")):"";if("image"===aa.type)W.sourceURL=f.substitute(u,this._fixTokens(W.sourceURL,F)),W.linkURL&&(W.linkURL=B.trim(f.substitute(u,this._fixTokens(W.linkURL,F))||""));else{var Z,ka;a.forEach(W.fields,function(va,Ea){if(-1!==va.indexOf(this._relatedFieldPrefix))ka=this._getRelatedChartInfos(va,W,u,P),ka instanceof Array?W.fields=ka:W.fields[Ea]=ka;else{var Ga=
u[va];Ga=void 0===Ga?null:Ga;Z=u[W.normalizeField]||0;Ga&&Z&&(Ga/=Z);W.fields[Ea]={y:Ga,tooltip:(this._fieldLabels[va.toLowerCase()]||va)+":\x3cbr/\x3e"+this._formatValue(Ga,va,P,!!Z)}}},this)}X.push(aa)}},this)}return{title:H,description:J,hasDescription:!!E.description,fields:ba&&ba.length?ba:null,mediaInfos:X&&X.length?X:null,formatted:G,editSummary:!1!==E.showLastEditInfo&&F&&F.getEditSummary?F.getEditSummary(v):""}},_getRelatedChartInfos:function(v,u,C,E){var F,G;var H=[];var J=this._fromRelatedFieldName(v);
var I=J[0];var R=this._relatedInfo[I];I=this._relatedLayersInfo[I];R&&a.forEach(R.relatedFeatures,function(O){O=O.attributes;var P;for(P in O)if(O.hasOwnProperty(P)&&P===J[1]){var L={};G=O[P];u.normalizeField&&(F=-1!==u.normalizeField.indexOf(this._relatedFieldPrefix)?O[this._fromRelatedFieldName(u.normalizeField)[1]]:C[u.normalizeField]);G&&F&&(G/=F);if(u.tooltipField)if(-1!==u.tooltipField.indexOf(this._relatedFieldPrefix)){var K=this._fromRelatedFieldName(u.tooltipField)[1],Q=f.isDefined(O[K])?
this._formatValue(O[K],u.tooltipField,E,!!F):K;L.tooltip=Q+":\x3cbr/\x3e"+this._formatValue(G,K,E,!!F)}else L.tooltip=(this._fieldLabels[v.toLowerCase()]||v)+":\x3cbr/\x3e"+this._formatValue(G,u.tooltipField,E,!!F);else L.tooltip=G;L.y=G;H.push(L)}},this);return"esriRelCardinalityOneToMany"===I.relation.cardinality||"esriRelCardinalityManyToMany"===I.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(v,u){var C=this;return v.replace(/(\{([^\{\r\n]+)\})/g,function(E,F,G){E=C._getLayerFieldInfo(u,G);return"$"+(E?"{"+
E.name+"}":F)})},_encodeAttributes:function(v,u){var C=B.clone(v)||{},E,F;for(E in C)(F=C[E])&&"string"===typeof F&&(F=u?F:encodeURIComponent(F),F=F.replace(/'/g,"\x26apos;"),C[E]=F);return C},_processFieldsInLinks:function(v,u){var C=this._encodeAttributes(u),E=this._encodeAttributes(u,!0);C=B.hitch(this,this._addValuesToHref,u,C,E);v&&(v=v.replace(this._reHref,C).replace(this._reHrefApos,C));return v},_addValuesToHref:function(v,u,C,E,F,G){G=G&&B.trim(G);return E=f.substitute(G&&0===G.indexOf("${")?
"'"===F?C:v:u,E)},_getLayerFieldInfo:function(v,u){return v&&v.getField?v.getField(u):null},_formatValue:function(v,u,C,E){var F=this._fieldsMap[u.toLowerCase()],G=F&&F.format;u=-1!==a.indexOf(C.dateFormat.properties,u);var H="number"===typeof v&&!u&&(!G||!G.dateFormat);if(!f.isDefined(v)||!F||!f.isDefined(G))return this._applyFormatting(v,H);F=G.hasOwnProperty("places")||G.hasOwnProperty("digitSeparator");var J=G.hasOwnProperty("digitSeparator")?G.digitSeparator:!0;if(F&&!u)var I={formatType:"NumberFormat",
places:f.isDefined(G.places)&&(!E||0<G.places)?Number(G.places):Infinity};else if(G.dateFormat)I=B.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[G.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(v,H);var R=this._applyFormatFunctions(v,I,C);F&&-1<v.constructor.toString().indexOf("Array")&&(R="",a.forEach(v,B.hitch(this,function(O,P){P&&(R+=" ");R+=this._applyFormatFunctions(O,I,C)})));F&&!J&&A.group&&(R=R.replace(new RegExp("\\"+
A.group,"g"),""));u&&(R='\x3cspan class\x3d"esriDateValue"\x3e'+R+"\x3c/span\x3e");return this._applyFormatting(R,H)},_applyFormatFunctions:function(v,u,C){u&&C&&(C.format={myKey:u});v=f.substitute({myKey:v},"${myKey}",C)||"";u&&C&&(C.format=null);return v},_applyFormatting:function(v,u){return u?this._forceLTR(v):this._applyPreWrap(v)},_forceLTR:function(v){var u=l("ie");return u&&10>=u?v:"\x3cspan class\x3d'esriNumericValue'\x3e"+v+"\x3c/span\x3e"},_applyPreWrap:function(v){return"string"===typeof v?
v.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):v},_insertOffset:function(v){v&&(v=f.isDefined(this.utcOffset)?v.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):v);return v},_getDomainName:function(v,u,C,E){return(v=v.getDomain&&v.getDomain(C,{feature:u}))&&v.codedValues?v.getName(E):null},_getTypeName:function(v,u,C){return(v=v.getType&&v.getType(u))&&v.name},_getRelatedRecords:function(v){var u=v.graphic,C;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(v).then(B.hitch(this,function(E){for(C in E)E.hasOwnProperty(C)&&E[C]&&(this._relatedLayersInfo[C].relatedLayerInfo=E[C])})));return this._relatedLayersInfoPromise.then(B.hitch(this,function(){return this._queryRelatedLayers(u)})).then(B.hitch(this,function(E){this._setRelatedRecords(u,E);return E}))},_getRelatedLayersInfo:function(v){var u=v.fieldsInfo,C,E={};var F=v.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});a.forEach(u,function(G){var H;
var J=this._fromRelatedFieldName(G.fieldName);var I=J[0];J=J[1];if(I&&(!this._relatedLayersInfo[I]&&F&&F.relationships&&(a.some(F.relationships,function(O){if(O.id==I)return H=O,!0}),H&&(this._relatedLayersInfo[I]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[I]&&(this._relatedLayersInfo[I].relatedFields.push(J),G.statisticType))){var R=new w;R.statisticType=G.statisticType;R.onStatisticField=J;R.outStatisticFieldName=J;this._relatedLayersInfo[I].outStatistics.push(R)}},
this);for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&this._relatedLayersInfo[C]&&(v=this._relatedLayersInfo[C].relation,v=F.url.replace(/[0-9]+$/,v.relatedTableId),this._relatedLayersInfo[C].relatedLayerUrl=v,E[C]=d({url:v,content:{f:"json"},callbackParamName:"callback"}));return r(E)},_queryRelatedLayers:function(v){var u={},C;for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&(u[C]=this._queryRelatedLayer({graphic:v,relatedInfo:this._relatedLayersInfo[C]}));
return r(u)},_queryRelatedLayer:function(v){var u,C;var E=v.graphic;var F=E.getSourceLayer();var G=F.url.match(/[0-9]+$/g)[0];var H=v.relatedInfo;var J=H.relatedLayerInfo;var I=H.relatedLayerUrl;var R=H.relation;v=a.filter(J.relationships,function(W){return W.relatedTableId===parseInt(G,10)});1===v.length?u=v[0]:1<v.length&&a.some(v,function(W){W.id===R.id&&(u=W);return!!u});if(u){var O=new n;a.some(J.fields,function(W){if(W.name===u.keyField)return C=-1!==a.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],W.type)?"number":"string",!0});if(u.relationshipTableId&&u.keyFieldInRelationshipTable){var P=new e;this._queryRelatedRecords(E,u).then(B.hitch(this,function(W){var ba;(ba=W[E.attributes[F.objectIdField]])?(W=a.map(ba.features,function(S){return S.attributes[J.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics&&(K=new n,K.where=this._chunkWhereInClause(J.objectIdField,W,1E3),K.outFields=O.outFields,K.outStatistics=H.outStatistics),
K&&(Q=new t(I),Q.execute(K).then(B.hitch(this,function(S){var X=[];X.push(ba);X.push(S);P.resolve(X)})))):P.resolve()}))}else{var L="string"===C?u.keyField+"\x3d'"+E.attributes[R.keyField]+"'":u.keyField+"\x3d"+E.attributes[R.keyField];O.where=L;O.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&J.supportsStatistics){var K=new n;K.where=O.where;K.outFields=O.outFields;K.outStatistics=H.outStatistics}var Q=new t(I);L=[];L.push(Q.execute(O));K&&L.push(Q.execute(K))}}return L?
r(L):P?P.promise:void 0},_setRelatedRecords:function(v,u){this._relatedInfo=[];for(var C in u)if(u.hasOwnProperty(C)&&u[C]){var E=u[C];this._relatedInfo[C]={};this._relatedInfo[C].relatedFeatures=E[0].features;f.isDefined(E[1])&&(this._relatedInfo[C].relatedStatsFeatures=E[1].features)}},_handlerErrorResponse:function(v,u){v.reject(u)},_fromRelatedFieldName:function(v){var u=[];-1!==v.indexOf(this._relatedFieldPrefix)&&(v=v.split("/"),u=v.slice(1));return u},_toRelatedFieldName:function(v){var u=
"";v&&0<v.length&&(u=this._relatedFieldPrefix+v[0]+"/"+v[1]);return u},_queryRelatedRecords:function(v,u){var C=v.getSourceLayer(),E=new z;E.outFields=["*"];E.relationshipId=u.id;E.objectIds=[v.attributes[C.objectIdField]];return C.queryRelatedFeatures(E)},_removeEmptyHref:function(v){return v.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(v,u,C){for(var E=0,F=[];E<u.length;)F.push(v+" IN ("+u.slice(E,C+E)+")"),E+=C;return F.join(" OR ")}});return b.PopupInfo=b.PopupInfoTemplate=D})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(D){var B=D.getObject("dojox.html.entities",!0),a=function(h,g){if(g._encCache&&g._encCache.regexp&&g._encCache.mapper&&g.length==g._encCache.length){var e=g._encCache.mapper;var l=g._encCache.regexp}else{e={};l=["["];var r;for(r=0;r<g.length;r++)e[g[r][0]]="\x26"+g[r][1]+";",l.push(g[r][0]);l.push("]");l=new RegExp(l.join(""),"g");g._encCache={mapper:e,regexp:l,length:g.length}}return h=h.replace(l,function(k){return e[k]})},c=function(h,
g){if(g._decCache&&g._decCache.regexp&&g._decCache.mapper&&g.length==g._decCache.length){var e=g._decCache.mapper;var l=g._decCache.regexp}else{e={};l=["("];var r;for(r=0;r<g.length;r++){var k="\x26"+g[r][1]+";";r&&l.push("|");e[k]=g[r][0];l.push(k)}l.push(")");l=new RegExp(l.join(""),"g");g._decCache={mapper:e,regexp:l,length:g.length}}return h=h.replace(l,function(f){return e[f]})};B.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];B.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];B.encode=function(h,g){h&&(g?h=a(h,g):(h=a(h,B.html),h=a(h,B.latin)));return h};B.decode=function(h,g){h&&(g?h=c(h,g):(h=c(h,B.html),h=c(h,B.latin)));return h};return B})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(D,B,a,c,h,g){D=D(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,
syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(e){B.mixin(this,e);this.returnType=this.returnType||"string";this.id=h.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var e=this._traits.geometryOperations;void 0===e&&(e=this._traits.geometryOperations=g.hasGeometryOperations(this.syntaxTree));return e},hasFeatureSetOperations:function(){var e=
this._traits.featureSetOperations;void 0===e&&(e=this._traits.featureSetOperations=g.hasFeatureSetOperations(this.syntaxTree));return e},hasVariable:function(e){var l=this._traits.variables;void 0===l[e]&&(l[e]=g.hasVariable(this.syntaxTree,e));return l[e]},hasFunction:function(e){var l=this._traits.functions;void 0===l[e]&&(l[e]=g.hasFunction(this.syntaxTree,e));return l[e]},evaluate:function(e){this._compile();var l=this._attributeCache.compiledFunc;return this.async?g.executeAsyncFunction(l,e):
g.executeFunction(l,e)},_setSyntaxTree:function(e){this.syntaxTree=e;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return c.ArcadeExpression=D})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,B,a,c,h,g,e,l){D=new (D(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map",
"$aggregatedfeatures"],async:["$layer","$datastore","$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(r){var k=[];l.hasGeometryOperations(r)&&k.push(e.enableGeometryOperations());(l.hasFeatureSetOperations(r)||l.hasVariables(r,this.defaults.globals.featureSet))&&k.push(e.enableFeatureSetOperations());l.isAsync(r)&&k.push(e.enableAsyncOperations());return h(k)},isAsync:function(r){r=[r];return l.hasFeatureSetOperations(r)||
l.hasVariables(r,this.defaults.globals.async)},parse:function(r){return e.createSyntaxTree(r.expression)},compile:function(r){var k=B.clone(this.defaults.context);k.useAsync=r.async;return r.syntaxTree?e.createFunction(r.syntaxTree,k):null},getEvalOptions:function(r){var k=r.expression,f=r.feature,b=r.layer,d=r.aggregatedFeaturesLayer,q=r.map;r=r.spatialReference;f=f&&k.hasVariable("$feature")?g.createFromGraphicLikeObject(f.geometry,f.attributes,b):null;var m,n;if(b){var t={spatialReference:r};k.hasVariable("$layer")&&
(m=b.getMap()?e.createFeatureSetFromLayer(b,t):e.createFeatureSetFromLayerUrl(b.url,t));if(k.hasVariable("$datastore"))var z=(z=l.getServiceUrl(b.url))?e.createFeatureSetCollectionFromServiceUrl(z,t):null;k.hasVariable("$aggregatedfeatures")&&d&&(n=d.getMap()?e.createFeatureSetFromLayer(d,t):null)}k=q&&k.hasVariable("$map")?e.createFeatureSetCollectionFromMap(q):null;return{context:{vars:{$feature:f,$layer:m,$datastore:z,$map:k,$aggregatedfeatures:n},spatialReference:r}}}}));B.setObject("arcadeProfiles.popupProfile",
D,c);return D})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A){var v=0,u=A.widgets.popup,
C=A.widgets.templatePicker;B=B([x,n,t],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new q({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=
c.mixin({},u)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(C.loading);this._contentDfd=this.template.getComponents(this.graphic).then(c.hitch(this,this._handleComponentsSuccess)).otherwise(c.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var E=this._mediaInfos,F=E.length,G=this.domNode,H=this._prevMedia,J=this._nextMedia;if(1<F){var I=0,R=0;h.forEach(E,function(O){"image"===O.type?I++:-1!==O.type.indexOf("chart")&&R++});I&&(k.set(this._imageCount,"innerHTML",I),g.query(".summary .image",
G).removeClass("hidden"));R&&(k.set(this._chartCount,"innerHTML",R),g.query(".summary .chart",G).removeClass("hidden"))}else g.query(".summary",G).addClass("hidden"),f.add(H,"hidden"),f.add(J,"hidden");E=this._mediaPtr;0===E?f.add(H,"hidden"):f.remove(H,"hidden");E===F-1?f.add(J,"hidden"):f.remove(J,"hidden");this._destroyFrame()},_displayMedia:function(){var E=this._mediaInfos[this._mediaPtr],F=E.title,G=E.caption,H=g.query(".mediaSection .hzLine",this.domNode)[0];k.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(F));f[F?"remove":"add"](this._mediaTitle,"hidden");k.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(G));f[G?"remove":"add"](this._mediaCaption,"hidden");f[F&&G?"remove":"add"](H,"hidden");this._rid=null;if("image"===E.type)this._showImage(E);else{var J=this;F=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];G=E.value.theme||this.chartTheme;c.isString(G)&&(G=G.replace(/\./gi,"/"),-1===G.indexOf("/")&&(G="dojox/charting/themes/"+G));G||(G="./Rainbow");
F.push(G);try{var I=this._rid=v++;D(F,function(R,O,P){I===J._rid&&(J._rid=null,J._showChart(E.type,E.value,R,O,P))})}catch(R){}}},_preventNewTab:function(E){return(E=E&&c.trim(E).toLowerCase())&&(0===E.indexOf("mailto:")||0===E.indexOf("tel:"))},_showImage:function(E){f.add(this._mediaFrame,"image");var F=d.get(this._gallery,"height"),G=E.value,H=m.decode(G.linkURL);G=m.decode(G.sourceURL);var J;H&&(J=b.create("a",{href:H,target:this._preventNewTab(H)?"":"_blank"},this._mediaFrame));H=E.refreshInterval?
this._addURLParameter(G,"timestamp",Date.now()):G;b.create("img",{className:"esriPopupMediaImage",src:H},J||this._mediaFrame);var I=g.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=a.connect(I,"onload",this,function(){this._clearImageHandles();this._imageLoaded(I,F);this._initImageRefresh(E)})},_addURLParameter:function(E,F,G){var H=-1===E.indexOf("?")?"?":"\x26";return E+H+F+"\x3d"+G},_initImageRefresh:function(E){if(E.refreshInterval){var F=6E4*E.refreshInterval;this._imageRefreshHandle=
setTimeout(c.hitch(this,function(){this._destroyFrame();this._showImage(E)}),F)}},_clearImageHandles:function(){a.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(E,F,G,H,J){f.remove(this._mediaFrame,"image");G=this._chart=new G(b.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});J&&G.setTheme(J);switch(E){case "piechart":G.addPlot("default",{type:"Pie",labels:!1});G.addSeries("Series A",
F.fields);break;case "linechart":G.addPlot("default",{type:"Markers"});G.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});h.forEach(F.fields,function(I,R){I.x=R+1});G.addSeries("Series A",F.fields);break;case "columnchart":G.addPlot("default",{type:"Columns",gap:3});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});G.addSeries("Series A",F.fields);break;case "barchart":G.addPlot("default",{type:"Bars",
gap:3}),G.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),G.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),G.addSeries("Series A",F.fields)}this._action=new H(G);G.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);k.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(E,F){var G=E.height;G<F&&d.set(E,"marginTop",
Math.round((F-G)/2)+"px")},_attListHandler:function(E,F){if(E===this._attachmentsDfd){this._attachmentsDfd=null;var G="";F instanceof Error||!F||!F.length||h.forEach(F,function(H){G+="\x3cli\x3e";G+="\x3ca href\x3d'"+y.addProxy(H.url)+"' target\x3d'_blank'\x3e"+(H.name||"[No name]")+"\x3c/a\x3e";G+="\x3c/li\x3e"});k.set(this._attachmentsList,"innerHTML",G||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(E,F){var G=y.getURIInfo(E);if(G){var H=E.match(G.pattern),J=H&&
H[2];H=m.decode(H[1]);b.create("a",{target:"_blank",href:H,title:H,innerHTML:this._sanitizer.sanitize(w.substitute({appName:G.appName,hierPart:J},G.label))},F)}else k.set(F,"innerHTML",this._sanitizer.sanitize(E))},_showStatus:function(E){k.set(this._status,"innerHTML",E);f.remove(this._status,"hidden");g.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){k.set(this._status,"innerHTML","");f.add(this._status,"hidden");g.query(".mainSection",this.domNode).removeClass("hidden")},
_handleComponentsSuccess:function(E){if(E){this._hideStatus();var F=this.showTitle?E.title:"",G=E.description,H=E.fields,J=E.mediaInfos,I=this.domNode,R=this._nls,O=this,P=this.template,L=this.graphic;this._prevMedia.title=R.NLS_prevMedia;this._nextMedia.title=R.NLS_nextMedia;k.set(this._title,"innerHTML",this._sanitizer.sanitize(F));F||f.add(this._title,"hidden");if(!E.hasDescription&&H&&(G="",H=h.map(H,function(Q){var W=b.create("tr",{vAlign:"top"});b.create("td",{className:"attrName",innerHTML:this._sanitizer.sanitize(Q[0])},
W);var ba=b.create("td",{className:"attrValue"},W);this._createLinkIfURI(Q[1],ba);return W},this),H.length)){var K=b.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});h.forEach(H,function(Q){K.appendChild(Q)})}K?(this._description.appendChild(K),G=!0):k.set(this._description,"innerHTML",this._sanitizer.sanitize(G));G||f.add(this._description,"hidden");g.query("a",this._description).forEach(function(Q){O._preventNewTab(Q.href)?"_blank"===Q.target&&k.remove(Q,"target"):k.set(Q,
"target","_blank")});F&&G?g.query(".mainSection .hzLine",I).removeClass("hidden"):F||G?g.query(".mainSection .hzLine",I).addClass("hidden"):g.query(".mainSection",I).addClass("hidden");if(F=this._attachmentsDfd=P.getAttachments(L))F.addBoth(c.hitch(this,this._attListHandler,F)),k.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+R.NLS_searching+"...\x3c/li\x3e"),g.query(".attachmentsSection",I).removeClass("hidden");J&&J.length&&(g.query(".mediaSection",I).removeClass("hidden"),r.setSelectable(this._mediaFrame,
!1),this._mediaInfos=J,this._mediaPtr=0,this._updateUI(),this._displayMedia());E.editSummary&&(k.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(E.editSummary)),J&&J.length&&f.remove(this._mediaBreak,"hidden"),f.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(u.NLS_noInfo)},_handleComponentsError:function(E){E&&"cancel"===E.dojoType||this._showStatus(u.NLS_noInfo)}});c.setObject("dijit._PopupRenderer",B,z);return B})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(D,B,a,c,h,g){return D([g,h],{_onMap:function(e){var l=this.constructor._onMap;l&&l.FINAL||(delete this.constructor._onMap,l=this.registerConnectEvents(),l.FINAL=!0);e=e.toLowerCase();if(l[e])var r=this[l[e].method];else e=this._onCamelCase(e),this[e]&&(r=e);return r},on:function(e,l){var r=this._onMap(e),k=e.replace(/\-/g,""),f="on"+k in this.domNode;return r||!f?this.inherited(arguments):this.own(c(this.domNode,k,l))[0]},emit:function(e,l,r){var k,f=e.toLowerCase(),b=this.constructor._onMap||
this.registerConnectEvents();var d=this[this._onMap(f)];l=l||{};l.target||(l.target=this);if(d&&b&&b[f]){this._onObj2Arr(function(){k=Array.prototype.slice.call(arguments)},b[f].argKeys)(l);var q=B.mixin({},arguments);q[2]=k;q[0]=b[f].name.replace(/^on/,"")}return this.inherited(q||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(D,B,a){var c=a.widgets.legend;return{getVisualVariableTitle:function(h,g){var e=h.field,
l=h.normalizationField,r=!1,k=!1,f=!1,b;e=D.isFunction(e)?null:e;l=D.isFunction(l)?null:l;if(h.legendOptions&&h.legendOptions.title)var d=h.legendOptions.title;else if(h.valueExpressionTitle)d=h.valueExpressionTitle;else{if(g.renderer&&g.renderer.authoringInfo&&g.renderer.authoringInfo.visualVariables){var q=g.renderer.authoringInfo.visualVariables;for(b=0;b<q.length;b++){var m=q[b];if("colorInfo"===m.type&&"ratio"===m.style){r=!0;break}else if("colorInfo"===m.type&&"percent"===m.style){k=!0;break}else if("colorInfo"===
m.type&&"percentTotal"===m.style){f=!0;break}}}(r=f&&"showRatioPercentTotal"||k&&"showRatioPercent"||r&&"showRatio"||l&&"showNormField"||e&&"showField"||null)&&(d=B.substitute({field:e&&g.getFieldLabel(e),normField:l&&g.getFieldLabel(l)},"showField"===r?"${field}":c[r]))}return d},getRendererTitle:function(h,g){if(h){if("esri.renderer.ClassBreaksRenderer"===h.declaredClass){var e=h.attributeField;var l=h.normalizationField;var r="percent-of-total"===h.normalizationType}e=D.isFunction(e)?null:e;l=
D.isFunction(l)?null:l;if(h.legendOptions&&h.legendOptions.title)var k=h.legendOptions.title;else h.valueExpressionTitle?k=h.valueExpressionTitle:(r=l&&"showNormField"||(r?"showNormPct":null)||e&&"showField"||null)&&(k=B.substitute({field:e&&g.getFieldLabel(e),normField:l&&g.getFieldLabel(l)},"showField"===r?"${field}":c[r]))}return k}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){D=B(g,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(m){this._update=a.hitch(this,this._update);this._indexFeatures=a.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=m.map;this.layer=m.layer;this.setLod(m.lod);this.setTolerance(m.tolerance);this.setClusterMode(m.clusterMode);this.setClusterRadius(m.clusterRadius);this.setSortEnabled(m.sortEnabled);this.setFilterEnabled(m.filterEnabled);this.setBufferEnabled(m.bufferEnabled);this.setUpdateEnabled(m.updateEnabled);this.setStatisticInfos(m.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",a.hitch(this,this._startup)))},destroy:function(m){this._displayFeatures(!0,
m);c.forEach(this._eventHandles,function(n){n.remove()});f.clearTimeout(this._updateHandle);f.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(m){var n=this.lod;this.lod=m||this.defaults.lod;n!==this.lod&&this.update()},setTolerance:function(m){var n=this.tolerance;this.tolerance=m||this.defaults.tolerance;n!==this.tolerance&&this.update()},setClusterMode:function(m){var n=
this.clusterMode;this.clusterMode=m||this.defaults.clusterMode;this._evalClusterParams();n!==this.clusterMode&&this.update()},setClusterRadius:function(m){var n=this.clusterRadius;this.clusterRadius=null!=m?m:this.defaults.clusterRadius;this._evalClusterParams();n!==this.clusterRadius&&this.update()},setSortEnabled:function(m){var n=this.sortEnabled;this.sortEnabled=null!=m?!!m:this.defaults.sortEnabled;n!==this.sortEnabled&&this.update()},setFilterEnabled:function(m){var n=this.filterEnabled;this.filterEnabled=
null!=m?!!m:this.defaults.filterEnabled;n!==this.filterEnabled&&this.update()},setBufferEnabled:function(m){var n=this.bufferEnabled;this.bufferEnabled=null!=m?!!m:this.defaults.bufferEnabled;n!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(m){var n=this.updateEnabled;(this.updateEnabled=null!=m?!!m:this.defaults.updateEnabled)&&n!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(m){this.statisticInfos=m||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=f.setTimeout(this._update,f.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=f.setTimeout(this._indexFeatures,f.priority.HIGH))},getCell:function(m){return this._cellIndex[m.length][m]},getCluster:function(m){var n;c.some(this.clusters,function(t){-1<c.indexOf(t.geohashes,m)&&(n=t);return!!n});return n},getCellsInCluster:function(m){var n=
[];c.forEach(m&&m.geohashes,function(t){(t=this.getCell(t))&&n.push(t)},this);return n},getFeaturesInCluster:function(m){var n=[];m=this.getCellsInCluster(m);c.forEach(m,function(t){Array.prototype.push.apply(n,t.features)});return n},toggleFeatureVisibility:function(m){this.index()},getCurrentLodStats:function(){var m=this._globalIndex.lodStats;return m&&m[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var m=this._globalIndex.fullExtent;return m&&
Infinity!==m.xmin?new l(m):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",a.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",a.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var m=Error("GeohashAggregation is supported only for points");else{var n=this.map.spatialReference;
n.isWebMercator()||4326===n.wkid||(m=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}m?(this.loadError=m,this.emit("load-error",{error:m})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",a.hitch(this,this.index)),this.layer.on("edits-complete",a.hitch(this,this.index)),this.layer.on("graphics-clear",a.hitch(this,this.index)),
this.layer.on("suspend",a.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",a.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",a.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(m){this._mapLevelChange=!(!m||!m.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var m=
this.map.geographicExtent;if(m){var n=this._getIntersectingCells(m);m=this._getClusters(n.cells,m);this.clusters=m.clusters;this._applyStatInfosToClusters();n=n.profile;m=m.profile;var t=n.total+m.total;n.total=this._getElapsedTime(n.total);m.total=this._getElapsedTime(m.total);var z=this._perfProfile.lastUpdate={};z.cells=n;z.clusters=m;z.total=this._getElapsedTime(t)}}else this.clusters=[],this._perfProfile.lastUpdate=null;n=this._indexUpdated;this._indexUpdated=!1;m=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:m,indexChange:n})}},_displayFeatures:function(m,n){var t=this.layer,z=!m;t.suspendGraphics(z);!1!==n&&(z?t.clearNodes():t.redraw())},_indexFeatures:function(){this._indexHandle=null;var m=this._getTime();this._initializeIndexing();var n=0,t=this._globalIndex.fullExtent;c.forEach(this.layer.graphics,function(y){if(y.visible){var x=y.geometry,A=this._getLngLat(x);if(A){var v=x.getCacheValue("_geohash");void 0===v&&(v=d.pointToGeohash(A),
x.setCacheValue("_geohash",v||null))}v&&(this._addGeohashToIndex(v,y,A),n++,this._updateExtent(t,A))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=n;for(var z=this._globalIndex.lodStats,w=1;w<=this._maxGeohashLength;w++)z[w]=this._getLODStats(w,n);this._perfProfile.lastIndex.total=this._getElapsedTime(m,this._getTime());this._perfProfile.lastIndex.numFeatures=n;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var m=this._cellIndex=[],n=1;n<=this._maxGeohashLength;n++)m[n]={}},_getLngLat:function(m){if(m){var n=m.getLongitude();m=m.getLatitude();m=null!=n&&null!=m?{x:n,y:m}:null}return m},_addGeohashToIndex:function(m,n,t){for(var z=this._cellIndex,w="",y=0;y<this._maxGeohashLength;y++){w+=m[y];var x=z[w.length],A=x[w];A||(A=x[w]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:w,statistics:null});this._updateItem(A,1,t,!0);A.features.push(n)}},_getLODStats:function(m,n){var t=this._cellIndex[m],z=0,w=Infinity,y=-Infinity,x=null,A;for(A in t){var v=t[A];z++;v.count<w&&(w=v.count);v.count>y&&(y=v.count)}0<z&&(x=Number((n/z).toFixed(2)));return{lod:m,count:z,min:Infinity===w?null:w,max:-Infinity===y?null:y,avg:x}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var m=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==m.lod;this.lod=m.lod;this.tolerance=m.tolerance}},_getClusterParams:function(m,n,t){n<t&&(n=t);m=Math.ceil(m*n);n=this._getClosestLODRange(m).max;do t=this._getCellSize(n),(t=m>=this._cellSizeScaleFactor*t||1===t)||(n+=1);while(!t);t=m/this._getCellSize(n);return{lod:n,tolerance:m,multiplier:Number(t.toFixed(2))}},_getClosestLODRange:function(m){for(var n,t=this._maxGeohashLength;1<=
t;t--)if(this._getCellSize(t)>=m){n=t;break}null==n&&(n=1);m=n+1;m>this._maxGeohashLength&&(m=this._maxGeohashLength);return{min:n,max:m}},_getCellSize:function(m){m=d.getCellSizeInMeters(m);return Math.ceil(Math.min(m.width,m.height))},_sorter:function(m,n){var t=m.centroid,z=n.centroid;return m.count>n.count?-1:m.count<n.count?1:t.x>z.x?-1:t.x<z.x?1:0},_getIntersectingCells:function(m){var n=this._getTime();this.bufferEnabled&&(m=m.expand(this._extentScaleFactor));var t=d.getIntersecting(m,this.lod,
this.bufferEnabled?this.tolerance:0);m=this._getTime();var z=[],w=this.tolerance,y=this.sortEnabled;c.forEach(t,function(x){(x=this.getCell(x))&&z.push(x)},this);w&&y&&z.sort(this._sorter);t=this._getTime();return{cells:z,profile:{findCells:this._getElapsedTime(n,m),scanAndSortCells:this._getElapsedTime(m,t),total:t-n}}},_getClusters:function(m,n){var t=this._getTime(),z=[],w={},y={findCells:0};c.forEach(m,function(A,v){var u=this._createCluster(A,w,y);u&&z.push(u)},this);this._markIntersecting(z,
n);this.filterEnabled&&(z=this._getIntersectingClusters(z));var x=this._getTime();return{clusters:z,profile:{findCellsInCluster:this._getElapsedTime(y.findCells),total:x-t}}},_markIntersecting:function(m,n){var t=n.normalize();c.forEach(m,function(z){var w=z.centroid.x,y=z.centroid.y;z.isIntersecting=c.some(t,function(x){return w>=x.xmin&&w<=x.xmax&&y>=x.ymin&&y<=x.ymax})})},_getIntersectingClusters:function(m){return c.filter(m,function(n){return n.isIntersecting})},_createCluster:function(m,n,t){if(!n[m.geohash]){var z=
[{cell:m,distance:0}];if(this.tolerance){var w=this._getTime(),y=d.getNeighborsWithinDistance(m.centroid,this.lod,this.tolerance);t.findCells+=this._getTime()-w;c.forEach(y,function(x){if(x!==m.geohash&&(x=this.getCell(x))){var A=this._calculateDistance(m.centroid,x.centroid);A<=this.tolerance&&z.push({cell:x,distance:A})}},this)}return this._mergeCells(z,n)}},_calculateDistance:function(m,n){return r.getLength(d.geographicToWebMercator(m),d.geographicToWebMercator(n))},_mergeCells:function(m,n){var t=
this._initializeCluster({},m[0].cell.geohash);c.forEach(m,function(z){var w=z.cell,y=w.geohash;z=z.distance;var x=n[y];if(x)if(z<x.distance)this._removeCellFromCluster(y,n);else return;n[y]={cluster:t,distance:z};this._updateItem(t,w.count,w.centroid);t.geohashes.push(y)},this);return t},_removeCellFromCluster:function(m,n){var t=n[m].cluster;delete n[m];var z=c.indexOf(t.geohashes,m);-1<z&&t.geohashes.splice(z,1);this._reevaluateCluster(t)},_reevaluateCluster:function(m){var n=m.geohashes;m=this._initializeCluster(m,
m.primary);c.forEach(n,function(t){var z=this.getCell(t);z&&(this._updateItem(m,z.count,z.centroid),m.geohashes.push(t))},this)},_initializeCluster:function(m,n){m.count=0;m.centroid=new e(null,null);m.geohashes=[];m.primary=n;m.statistics=null;return m},_applyStatInfos:function(m){m=this._getValidStatInfos(m);this._applyStatInfosToIndex(m);this._applyStatInfosToClusters(m)},_getValidStatInfos:function(m){var n=[];c.forEach(m,function(t){var z=t.attributeInfo;t=t.statisticType;var w="angle"===z.attributeType;
if(q.isSupportedStatisticType(t)&&(!w||"avg"===t)){var y="arithmetic"===z.rotationType;n.push({attributeCache:b.createAttributeCache(z,"type"===t),identifier:q.getStatisticId(z,t),statFunctions:q.getStatisticFunctions(t),isAngular:w,isDate:"date"===z.attributeType,isArithmetic:y})}});return n},_applyStatInfosToIndex:function(m){m=m||this._getValidStatInfos(this.statisticInfos);var n=this._cellIndex;if(n)for(var t=1;t<=this._maxGeohashLength;t++){var z=n[t],w;for(w in z)this._applyStatInfosToCell(z[w],
m)}},_applyStatInfosToCell:function(m,n){var t=this._initializeStats(m,n);c.forEach(m.features,function(z){this._calcFeatureStats(z,n,t)},this);this._summarizeStats(m,t,n)},_calcFeatureStats:function(m,n,t){m.attributes&&c.forEach(n,function(z){var w=t[z.identifier],y=z.attributeCache;y=y?m._getDataValue(y.attributeInfo,y,k):null;z.statFunctions.updateCellStat(w,y,z)})},_applyStatInfosToClusters:function(m){m=m||this._getValidStatInfos(this.statisticInfos);var n=this._clusterFieldPrefix;c.forEach(this.clusters,
function(t){var z=this._initializeStats(t,m);c.forEach(this.getCellsInCluster(t),function(w){this._calcCellStats(w,m,z)},this);this._summarizeStats(t,z,m,n);t.attributes[n+"id"]=t.primary},this)},_calcCellStats:function(m,n,t){var z=m.statistics;c.forEach(n,function(w){var y=w.identifier;w.statFunctions.updateClusterStat(t[y],z[y],w)})},_initializeStats:function(m,n){var t=m.statistics={};c.forEach(n,function(z){t[z.identifier]=z.statFunctions.initialize(z)});return t},_summarizeStats:function(m,
n,t,z){var w=m.attributes={};z=z||"";w[z+"count"]=m.count;c.forEach(t,function(y){var x=this._getStatFieldName(y,z);w[x]=y.statFunctions.summarize(n[y.identifier],y)},this)},_getStatFieldName:function(m,n){return(n||"")+m.identifier},_updateItem:function(m,n,t,z){var w=t.y,y=m.centroid,x=m.count;y.x=(x*y.x+n*t.x)/(x+n);y.y=(x*y.y+n*w)/(x+n);m.count+=n;z&&this._updateExtent(m.extent,t)},_updateExtent:function(m,n){var t=n.x,z=n.y;t<m.xmin&&(m.xmin=t);t>m.xmax&&(m.xmax=t);z<m.ymin&&(m.ymin=z);z>m.ymax&&
(m.ymax=z)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(m,n){var t=null!=m&&null!=n?n-m:m;if(null!=t){var z="millisecond";1E3<=t&&(t/=1E3,z="second",60<=t&&(t/=60,z="minute"));z={value:Number(t.toFixed(2)),unit:z}}return z}});a.setObject("layers.clustering.GeohashAggregation",D,h);return D})},"esri/core/timerUtils":function(){define([],function(){function D(g){var e,l=g.length;for(e=0;e<l;e++)g[e]()}var B={LOW:1,HIGH:2},a,c=
{};c[B.LOW]=[];c[B.HIGH]=[];var h=function(){clearTimeout(a);a=null;var g=c[B.HIGH];c[B.HIGH]=[];D(g);g=c[B.LOW];c[B.LOW]=[];D(g)};return{priority:B,callbackQueue:c,setTimeout:function(g,e){var l=[e,c[e].push(g)-1];a||(a=setTimeout(h,0));return l},clearTimeout:function(g){g&&c[g[0]].splice(g[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(D,B,a,c,h,g,e,l,r){function k(J){var I=J.spatialReference;if(!I)return{x:J.x,y:J.y};var R=I.isWebMercator(),O;4326===I.wkid?O={x:J.x,y:J.y}:R&&(O={x:J.getLongitude(),y:J.getLatitude()});return O}function f(J){var I=J.spatialReference,R=!(!I||!I.isWebMercator()),O;I&&4326===I.wkid?O=new e(J.toJson()):R&&(O=r.webMercatorToGeographic(J,!0));return O}function b(J,I){I.x=g.prototype._normalizeX(J.x,l.prototype._info[4326]);I.y=J.y;return I}function d(J){J=G.decimals[J].toString(2);return B.pad(J,
G.bitsPerBase32Char,"0")}function q(J,I){I=I.slice();I.splice(1,0,0);for(var R=I[0],O=I[2],P=0;P<J.length;P++){Number(J[P])?I[0]=I[1]:I[2]=I[1];var L=I[1]=(I[0]+I[2])/2;R=I[0];O=I[2]}return{value:L,min:R,max:O}}function m(J,I,R){var O=[];I=I.slice();I.splice(1,0,0);for(var P=I[0],L=I[2],K=0;K<R;K++)J>=I[1]?(I[0]=I[1],P=1):(I[2]=I[1],P=0),I[1]=(I[0]+I[2])/2,O.push(P),P=I[0],L=I[2];return{value:O.join(""),min:P,max:L}}function n(J){var I=J*G.bitsPerBase32Char;0===I%2?J=I/=2:(J=(I+1)/2,I-=J);return{lon:J,
lat:I}}function t(J){var I=0;J=J.split("").reverse().join("");for(var R=0;R<J.length;R++)I+=Number(J[R])*Math.pow(2,R);return G.base32[I]}function z(J,I){var R={x:J.xmin,y:J.ymax},O={x:J.xmax,y:J.ymin},P={x:J.xmax,y:J.ymax};return{sw:H.pointToGeohash({x:J.xmin,y:J.ymin},I),nw:H.pointToGeohash(R,I),se:H.pointToGeohash(O,I),ne:H.pointToGeohash(P,I)}}function w(J,I,R,O,P){var L=J;do P[L]||(P[L]=!0,O.push(L)),(J=L===I)||(L=F(L,R));while(!J)}function y(J,I,R,O){var P=z(J,I);J=[];w(P.sw,P.nw,"n",J,{});
I=[];w(P.se,P.ne,"n",I,{});for(P=0;P<J.length;P++)w(J[P],I[P],"e",R,O)}function x(J){return c.filter(J,function(I){return 180===I.xmax?!0:!1})[0]}function A(J){return c.filter(J,function(I){return-180===I.xmin?!0:!1})[0]}function v(J,I,R,O){var P=H.geographicToWebMercator(J);J={x:P.x-I,y:P.y-I};I=H.webMercatorToGeographic({x:P.x+I,y:P.y+I},!0);J=H.webMercatorToGeographic(J,!0);return new e(null!=R?R:J.x,J.y,null!=O?O:I.x,I.y)}function u(J,I,R,O){J=z(J,I);var P,L;"min"===O?L=180:"max"===O&&(P=-180);
var K=P;O=L;var Q=H.geohashToCell(J.sw).extent;I=H.geohashToCell(J.ne).extent;J=null!=K?K:Q.xmin;Q=Q.ymin;O=null!=O?O:I.xmax;I=I.ymax;J=v({x:J,y:Q},R,P,L);R=v({x:O,y:I},R,P,L);return new e(J.xmin,J.ymin,R.xmax,R.ymax)}function C(J,I,R){var O=J,P=0;do P++,(J=O===I)||(O=F(O,R));while(!J);return P}function E(J,I){var R=z(J,I),O=C(R.nw,R.ne,"e");return{rows:C(R.nw,R.sw,"s"),cols:O}}function F(J,I){var R=J.length%2,O=J.slice(-1),P=G.decimals[O],L=J.slice(0,-1);-1!=G.borders[I][R].indexOf(O)&&L&&(L=F(L,
I));return L+G.neighbors[I][R][P]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var J={},I=0;32>I;I++)J["0123456789bcdefghjkmnpqrstuvwxyz"[I]]=I;return J}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(J){J=g.lngLatToXY(J.x,J.y);return{x:J[0],y:J[1]}},webMercatorToGeographic:function(J,I){var R=g.xyToLngLat(J.x,J.y,I);return{x:R[0],
y:R[1]}},geohashToCell:function(J){var I;var R=[];for(I=0;I<J.length;I++)R.push(d(J[I]));R=R.join("");I=[];for(var O=[],P=0;P<R.length;P++)0===P%2?I.push(R[P]):O.push(R[P]);I=I.join("");O=O.join("");I=[I,O];R=q(I[0],G.longitudeRange);O=q(I[1],G.latitudeRange);I=R.value;return{point:{x:I,y:O.value},extent:{xmin:R.min,xmax:R.max,ymin:O.min,ymax:O.max},geohash:J}},pointToCell:function(J,I){I=I||G.maxGeohashLength;var R=k(J);if(R){R=b(R,R);var O=n(I);var P=m(R.x,G.longitudeRange,O.lon);var L=m(R.y,G.latitudeRange,
O.lat);O=P.value;var K=L.value;P={xmin:P.min,xmax:P.max,ymin:L.min,ymax:L.max};L=[];for(var Q=Math.ceil((O.length+K.length)/G.bitsPerBase32Char),W=0,ba=0,S=0;S<Q*G.bitsPerBase32Char;S++){var X=0===S%2?O[W++]:K[ba++];null==X&&(X=0);L.push(X)}O=L.join("");K=G.bitsPerBase32Char;L=O.length/K;Q=[];for(W=0;W<L;W++)ba=O.substr(W*K,K),Q.push(t(ba));O=Q.join("");return{point:R,extent:P,geohash:O}}},geohashToPoint:function(J){return H.geohashToCell(J).point},pointToGeohash:function(J,I){var R=H.pointToCell(J,
I);return R&&R.geohash},getCells:function(J){return c.map(J,function(I){return H.geohashToCell(I)})},getCellSize:function(J){var I=G.longitudeRange,R=G.latitudeRange;I=Math.abs(I[1]-I[0]);R=Math.abs(R[1]-R[0]);J=n(J||1);return{width:I/Math.pow(2,J.lon),height:R/Math.pow(2,J.lat)}},getCellSizeInMeters:function(J){J=H.getCellSize(J);var I=r.metersPerDegree;J.width*=I;J.height*=I;return J},getIntersecting:function(J,I,R){I=I||1;R=R||0;var O=[],P=f(J);if(P){R&&(P=H.expandExtent(J,I,R));J=P.normalize();
var L={};c.forEach(J,function(K){y(K,I,O,L)})}return O},countIntersecting:function(J,I,R){I=I||1;R=R||0;var O=0,P=f(J);if(P){R&&(P=H.expandExtent(J,I,R));J=P.normalize();if(2===J.length){O=x(J);P=A(J);R=E(O,I);var L=E(P,I);J=R.rows;R=R.cols+L.cols;O={x:O.xmin,y:O.ymax};P={x:P.xmax,y:P.ymax};O=b(O,{});P=b(P,{});O=H.pointToGeohash(O,I);I=H.pointToGeohash(P,I);O===I&&R--;I={rows:J,cols:R}}else I=E(J[0],I);O=I.cols*I.rows}return O},getChildren:function(J){J=J||"";var I=[],R;for(R in G.decimals)I.push(J+
R);return I},getNeighbors:function(J){var I=F(J,"n"),R=F(J,"s");return[I,F(I,"e"),F(I,"w"),R,F(R,"e"),F(R,"w"),F(J,"e"),F(J,"w")]},getExtentFromDistance:function(J,I){I=I||1E3;var R,O=k(J);O&&(R=v(O,I));return R},expandExtent:function(J,I,R){I=I||1;R=R||0;if(J=f(J)){if(R){J=J.normalize();if(2===J.length){var O=R;R=x(J);J=A(J);R=u(R,I,O,"min");J=u(J,I,O,"max");360<=R.getWidth()+J.getWidth()?(I=-180,J=180):(I=R.xmin,J=J.xmax);return new e(I,R.ymin,J,R.ymax)}return u(J[0],I,R)}return J}},getNeighborsWithinDistance:function(J,
I,R){R=R||1E3;I=I||1;var O=[];if(J=k(J)){R=v(J,R).normalize();var P={};c.forEach(R,function(L){y(L,I,O,P)})}return O}};a.setObject("layers.clustering.geohashUtils",H,h);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(D,B){function a(g){return"number"===typeof g&&!isNaN(g)&&Infinity!==g&&-Infinity!==g}var c={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(g,e){a(e)&&(g.count++,g.sum+=e)},updateClusterStat:function(g,
e){e.count&&(g.count+=e.count,g.sum+=e.sum)},summarize:function(g){return g.sum}},avg:{initialize:function(g){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(g,e,l){a(e)&&(g.count++,l.isAngular?(l.isArithmetic||(e=-1*e+90),g.sum_cosine+=Math.cos(e*Math.PI/180),g.sum_sine+=Math.sin(e*Math.PI/180)):g.sum+=e)},updateClusterStat:function(g,e,l){e.count&&(g.count+=e.count,l.isAngular?(g.sum_cosine+=e.sum_cosine,g.sum_sine+=e.sum_sine):g.sum+=e.sum)},summarize:function(g,
e){if(0<g.count){var l=g.count;e.isAngular?(l=180*Math.atan2(g.sum_sine/l,g.sum_cosine/l)/Math.PI,e.isArithmetic||(l=-1*(l-90)),g.avg=0>l?l+360:l):(g.avg=g.sum/l,e.isDate&&(g.avg=Math.ceil(g.avg)))}return g.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(g,e){if(null==e||""===e||"string"===typeof e&&""===D.trim(e))e=null;var l=g.uvInfos;null==l[e]?l[e]={count:1,value:e}:l[e].count++},updateClusterStat:function(g,e){var l=g.uvInfos,r=e.uvInfos,k;for(k in r){var f=r[k];
null==l[k]?l[k]={count:f.count,value:f.value}:l[k].count+=f.count}},summarize:function(g){g=g.uvInfos;var e,l=-Infinity;for(e in g){var r=g[e];if(r.count>l){l=r.count;var k=r.value}else r.count===l&&(k=null)}return k}}},h={isSupportedStatisticType:function(g){return c.hasOwnProperty(g)},getStatisticFunctions:function(g){return c[g]},getStatisticId:function(g,e){var l=B.getAttributeIdSource(g);l=l&&B.getAttributeId(l)||g.field;return e+"_"+l},getClusterField:function(g,e){return"cluster_"+h.getStatisticId(g,
e)},getStatisticHash:function(g,e){var l=[h.getStatisticId(g,e)];g.attributeType&&l.push(g.attributeType.toLowerCase());g.rotationType&&l.push(g.rotationType.toLowerCase());return l.join("_")}};return h})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(D,B,a,c,h,g,e,l){D=D(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(r){if(r&&(B.mixin(this,r),r.renderer&&(this.renderer=e.fromJson(r.renderer)),r.labelingInfo&&0<r.labelingInfo.length)){this.labelingInfo=[];var k;a.forEach(r.labelingInfo,function(f){k=new l(f);
this.labelingInfo.push(k)},this)}},toJson:function(){var r={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(r.labelingInfo=[],a.forEach(this.labelingInfo,function(k){r.labelingInfo.push(k.toJson())}));return g.fixJson(r)}});B.setObject("layers.LayerDrawingOptions",D,h);return D})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t){return{units:D,SpatialReference:B,Geometry:a,Point:c,ScreenPoint:h,Multipoint:g,Polyline:e,Polygon:l,Extent:r,Rect:k,geodesicUtils:f,jsonUtils:b,mathUtils:d,normalizeUtils:q,scaleUtils:m,screenUtils:n,webMercatorUtils:t}})},"esri/units":function(){define(["dojo/has","./kernel"],function(D,B){var a={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",
FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",
SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};return B.Units=a})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,B,a,c,h,g,e,l,r){function k(b){return new l(parseFloat(b.x),parseFloat(b.y)-parseFloat(b.height),parseFloat(b.x)+parseFloat(b.width),parseFloat(b.y),b.spatialReference)}var f=D(g,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(b,d,q,m,n){h.isObject(b)&&
"extent"===b.type&&(d=b.ymax,q=b.getWidth(),m=b.getHeight(),n=b.spatialReference,b=b.xmin);h.isObject(b)?(h.mixin(this,b),this.spatialReference&&(this.spatialReference=r.createSpatialReference(this.spatialReference))):(this.x=b,this.y=d,this.width=q,this.height=m,this.spatialReference=n);this.verifySR()},getCenter:function(){return new e(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(b,d){return new f(this.x+b,this.y+d,this.width,this.height,this.spatialReference)},
intersects:function(b){return b.x+b.width<=this.x||b.y+b.height<=this.y||b.y>=this.y+this.height||b.x>=this.x+this.width?!1:!0},getExtent:function(){return k(this)},update:function(b,d,q,m,n){this.x=b;this.y=d;this.width=q;this.height=m;this.spatialReference=n;this.clearCache();return this}});B.setObject("geometry.Rect",f,c);c.geometry._rectToExtent=k;c.geometry._extentToRect=function(b){return new f(b)};return f})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(D,B,a,c,h,g,e,l){function r(z){return!!(z&&z.wkid&&t[z.wkid])}function k(z){return r(z)?t[z.wkid]:t[4326]}function f(z){var w=z.spatialReference,y=k(w),x=y.a;y=y.eSq;var A=Math.sqrt(y),v=Math.sin(z.y*n);return new g(x*z.x*n,0<y?x*(1-y)*(v/(1-y*v*v)-1/(2*A)*Math.log((1-A*v)/(1+A*v)))*.5:x*v,w)}function b(z,w,y,x,A){var v=k(A),u=v.a,C=v.b;v=v.f;var E=Math.sin(y);y=Math.cos(y);var F=(1-v)*Math.tan(z);z=1/Math.sqrt(1+F*F);var G=F*z,H=Math.atan2(F,y);F=z*E;var J=F*F,I=1-J;u=I*(u*u-C*C)/(C*C);
var R=1+u/16384*(4096+u*(-768+u*(320-175*u))),O=u/1024*(256+u*(-128+u*(74-47*u)));u=x/(C*R);for(var P=2*Math.PI,L,K,Q,W;1E-12<Math.abs(u-P);)Q=Math.cos(2*H+u),L=Math.sin(u),K=Math.cos(u),W=O*L*(Q+O/4*(K*(-1+2*Q*Q)-O/6*Q*(-3+4*L*L)*(-3+4*Q*Q))),P=u,u=x/(C*R)+W;x=G*L-z*K*y;C=v/16*I*(4+v*(4-3*I));return new g((w+(Math.atan2(L*E,z*K-G*L*y)-(1-C)*v*F*(u+C*L*(Q+C*K*(-1+2*Q*Q)))))/n,Math.atan2(G*K+z*L*y,(1-v)*Math.sqrt(J+x*x))/n,A)}function d(z,w,y,x,A){var v=k(A),u=v.a;A=v.b;var C=v.f,E=x-w,F=Math.atan((1-
C)*Math.tan(z)),G=Math.atan((1-C)*Math.tan(y)),H=Math.sin(F);F=Math.cos(F);var J=Math.sin(G);G=Math.cos(G);var I=E,R=1E3;do{var O=Math.sin(I);var P=Math.cos(I);var L=Math.sqrt(G*O*G*O+(F*J-H*G*P)*(F*J-H*G*P));if(0===L)return 0;P=H*J+F*G*P;var K=Math.atan2(L,P);var Q=F*G*O/L;var W=1-Q*Q;O=P-2*H*J/W;isNaN(O)&&(O=0);var ba=C/16*W*(4+C*(4-3*W));var S=I;I=E+(1-ba)*C*Q*(K+ba*L*(O+ba*P*(-1+2*O*O)))}while(1E-12<Math.abs(I-S)&&0<--R);if(0===R)return A=x-w,{azimuth:Math.atan2(Math.sin(A)*Math.cos(y),Math.cos(z)*
Math.sin(y)-Math.sin(z)*Math.cos(y)*Math.cos(A)),geodesicDistance:Math.acos(Math.sin(z)*Math.sin(y)+Math.cos(z)*Math.cos(y)*Math.cos(x-w))*v.radius};z=W*(u*u-A*A)/(A*A);w=z/1024*(256+z*(-128+z*(74-47*z)));return{azimuth:Math.atan2(G*Math.sin(I),F*J-H*G*Math.cos(I)),geodesicDistance:A*(1+z/16384*(4096+z*(-768+z*(320-175*z))))*(K-w*L*(O+w/4*(P*(-1+2*O*O)-w/6*O*(-3+4*L*L)*(-3+4*O*O)))),reverseAzimuth:Math.atan2(F*Math.sin(I),F*J*Math.cos(I)-H*G)}}function q(z,w){if(!(z instanceof e||z instanceof l))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var y=z.spatialReference,x=k(y).radius/1E4;w<x&&(w=x);x=z instanceof e;var A=[],v;D.forEach(x?z.paths:z.rings,function(u){A.push(v=[]);v.push([u[0][0],u[0][1]]);var C,E;var F=u[0][0]*n;var G=u[0][1]*n;for(C=0;C<u.length-1;C++){var H=u[C+1][0]*n;var J=u[C+1][1]*n;if(F!==H||G!==J){J=d(G,F,J,H,y);H=J.azimuth;J=J.geodesicDistance;var I=J/w;if(1<I){for(E=1;E<=I-1;E++){var R=b(G,F,H,E*w,y);v.push([R.x,R.y])}E=b(G,F,H,(J+Math.floor(I-1)*w)/2,y);v.push([E.x,E.y])}G=b(G,F,H,J,y);v.push([G.x,G.y]);F=G.x*n;
G=G.y*n}}});return x?new e({paths:A,spatialReference:y}):new l({rings:A,spatialReference:y})}var m={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},n=Math.PI/180,t={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};a={isSupported:r,getSpheroidInfo:k,geodesicDensify:q,geodesicLengths:function(z,w){var y=[];D.forEach(z,function(x,A){var v=0,u=x.spatialReference;D.forEach(x.paths,function(C,E){var F=0,G;for(G=1;G<C.length;G++){var H=C[G-1][0]*n;var J=C[G][0]*n;var I=C[G-1][1]*n;var R=C[G][1]*n;if(I!==R||H!==J)H=d(I,H,R,J,u),F+=H.geodesicDistance}v+=F});v/=m[w];y.push(v)});
return y},geodesicAreas:function(z,w){var y=[],x=[];D.forEach(z,function(A,v){var u=.0015696101447650193*k(A.spatialReference).radius;y.push(q(A,u))});D.forEach(y,function(A,v){var u=0,C=A.spatialReference;D.forEach(A.rings,function(E,F){var G=f(new g(E[0][0],E[0][1],C)),H=f(new g(E[E.length-1][0],E[E.length-1][1],C)),J=H.x*G.y-G.x*H.y,I;for(I=0;I<E.length-1;I++)G=f(new g(E[I+1][0],E[I+1][1],C)),H=f(new g(E[I][0],E[I][1],C)),J+=H.x*G.y-G.x*H.y;u+=J});u/=m[w];x.push(u/-2)});return x},_unitsDictionary:m,
_toEqualAreaPoint:f,_directGeodeticSolver:b,_inverseGeodeticSolver:d};B.mixin(B.getObject("geometry",!0,c),a);return a})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){return function(d,q,m,n){var t=
function(z,w){m(w);z.destroy();B.byId("hiddenMapDiv").removeChild(B.byId("hiddenMap"))};b(d,q,l.hitch(this,function(z){f(z,l.hitch(this,t,z),n)}),n)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O){function P(ja){return!(!ja||"BingMapsAerial"!==ja.layerType&&"BingMapsAerial"!==ja.type)}function L(ja){return!(!ja||"BingMapsRoad"!==ja.layerType&&"BingMapsRoad"!==ja.type)}function K(ja){return P(ja)||L(ja)||!(!ja||"BingMapsHybrid"!==ja.layerType&&"BingMapsHybrid"!==ja.type)}function Q(ja){return!(!ja||"OpenStreetMap"!==ja.layerType&&"OpenStreetMap"!==ja.type)}function W(ja){return!!(ja&&ja.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(ja.layerType)||
!ja.layerType&&!ja.type))}function ba(ja){return t({url:Mb.arcgisUrl+"/"+ja.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function S(ja,Sa){var Pa={f:"json"};Sa&&(Pa.token=Sa);return t({url:ja,content:Pa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function X(ja){!ja.layerDefinition||ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.labelingInfo||(ja.showLabels=!1);ja.itemProperties.layerDefinition&&(ja.layerDefinition?
(ja.layerDefinition.drawingInfo||(ja.layerDefinition.drawingInfo=ja.itemProperties.layerDefinition.drawingInfo),n.isDefined(ja.layerDefinition.definitionExpression)||(ja.layerDefinition.definitionExpression=ja.itemProperties.layerDefinition.definitionExpression),n.isDefined(ja.layerDefinition.minScale)||(ja.layerDefinition.minScale=ja.itemProperties.layerDefinition.minScale),n.isDefined(ja.layerDefinition.maxScale)||(ja.layerDefinition.maxScale=ja.itemProperties.layerDefinition.maxScale)):ja.layerDefinition=
ja.itemProperties.layerDefinition);!ja.itemProperties.popupInfo||ja.popupInfo||ja.disablePopup||(ja.popupInfo=ja.itemProperties.popupInfo);n.isDefined(ja.itemProperties.showLabels)&&!n.isDefined(ja.showLabels)&&(ja.showLabels=ja.itemProperties.showLabels);n.isDefined(ja.itemProperties.showLegend)&&!n.isDefined(ja.showLegend)&&(ja.showLegend=ja.itemProperties.showLegend);n.isDefined(ja.itemProperties.refreshInterval)&&!n.isDefined(ja.refreshInterval)&&(ja.refreshInterval=ja.itemProperties.refreshInterval)}
function aa(ja){X(ja);ja.itemProperties.layerDefinition&&ja.layerDefinition&&(!n.isDefined(ja.layerDefinition.maximumTrackPoints)&&n.isDefined(ja.itemProperties.layerDefinition.maximumTrackPoints)&&(ja.layerDefinition.maximumTrackPoints=ja.itemProperties.layerDefinition.maximumTrackPoints),!ja.layerDefinition.definitionGeometry&&ja.itemProperties.layerDefinition.definitionGeometry&&(ja.layerDefinition.definitionGeometry=ja.itemProperties.layerDefinition.definitionGeometry));ja.itemProperties.purgeOptions&&
!ja.purgeOptions&&(ja.purgeOptions=ja.itemProperties.purgeOptions)}function M(ja,Sa){var Pa=new h,Ka=ja.itemData,Na=[],Ua=[];a.forEach(Ka.operationalLayers,function(Oa){if(Oa.itemId&&W(Oa)){var Za=Oa.url.toLowerCase();-1<Za.indexOf("/featureserver")||-1<Za.indexOf("/mapserver/")?(Ua.push(Oa),Na.push(ba(Oa))):-1<Za.indexOf("/mapserver")&&-1===Za.indexOf("/mapserver/")&&(!Oa.layers||!n.isDefined(Oa.minScale)&&!n.isDefined(Oa.maxScale))?(Ua.push(Oa),Na.push(ba(Oa))):-1<Za.indexOf("/imageserver")?(Ua.push(Oa),
Na.push(ba(Oa))):-1<Za.indexOf("/streamserver")&&(Ua.push(Oa),Na.push(ba(Oa)))}});Ka.baseMap&&Ka.baseMap.baseMapLayers&&a.forEach(Ka.baseMap.baseMapLayers,function(Oa){Oa.itemId&&"VectorTileLayer"!==Oa.layerType&&(Ua.push(Oa),Na.push(ba(Oa)))});if(0<Na.length){var Ta={};(new r(Na)).addCallback(function(Oa){a.forEach(Ua,function(Za,bb){var cb=Oa[bb][1];if(cb&&!(cb instanceof Error)&&(Ta[Za.itemId]=cb,W(Za))){var jb=Za.url.toLowerCase();(-1<jb.indexOf("/featureserver")||-1<jb.indexOf("/mapserver/"))&&
cb.layers?a.forEach(cb.layers,function($a){var kb="/featureserver/"+$a.id;(kb=jb.match(kb+"$")==kb)||(kb="/mapserver/"+$a.id,kb=jb.match(kb+"$")==kb);kb&&(Za.itemProperties=$a,X(Za))}):-1<jb.indexOf("/streamserver")?(Za.itemProperties=cb,aa(Za)):-1<jb.indexOf("/mapserver")?(cb.layers&&!Za.layers&&(Za.layers=cb.layers),n.isDefined(cb.minScale)&&!n.isDefined(Za.minScale)&&(Za.minScale=cb.minScale),n.isDefined(cb.maxScale)&&!n.isDefined(Za.maxScale)&&(Za.maxScale=cb.maxScale),n.isDefined(cb.refreshInterval)&&
!n.isDefined(Za.refreshInterval)&&(Za.refreshInterval=cb.refreshInterval),cb.visibleLayers&&!Za.visibleLayers&&(Za.visibleLayers=cb.visibleLayers)):-1<jb.indexOf("/imageserver")&&(n.isDefined(cb.minScale)&&!n.isDefined(Za.minScale)&&(Za.minScale=cb.minScale),n.isDefined(cb.maxScale)&&!n.isDefined(Za.maxScale)&&(Za.maxScale=cb.maxScale),n.isDefined(cb.refreshInterval)&&!n.isDefined(Za.refreshInterval)&&(Za.refreshInterval=cb.refreshInterval),!cb.popupInfo||Za.popupInfo||Za.disablePopup||(Za.popupInfo=
cb.popupInfo),cb.renderingRule&&!Za.renderingRule&&(Za.renderingRule=cb.renderingRule,cb.renderingRule.functionName&&(Za.renderingRule.rasterFunction=cb.renderingRule.functionName)),cb.bandIds&&!Za.bandIds&&(Za.bandIds=cb.bandIds),cb.mosaicRule&&!Za.mosaicRule&&(Za.mosaicRule=cb.mosaicRule),cb.format&&!Za.format&&(Za.format=cb.format),n.isDefined(cb.compressionQuality)&&!n.isDefined(Za.compressionQuality)&&(Za.compressionQuality=cb.compressionQuality),!cb.layerDefinition||!cb.layerDefinition.definitionExpression||
n.isDefined(Za.layerDefinition)&&n.isDefined(Za.layerDefinition.definitionExpression)||(Za.layerDefinition=Za.layerDefinition||{},Za.layerDefinition.definitionExpression=cb.layerDefinition.definitionExpression),cb=B.getObject("layerDefinition.drawingInfo.renderer",!1,cb),null==B.getObject("layerDefinition.drawingInfo.renderer",!1,Za)&&null!=cb&&(Za.layerDefinition=Za.layerDefinition||{},Za.layerDefinition.drawingInfo=Za.layerDefinition.drawingInfo||{},Za.layerDefinition.drawingInfo.renderer=cb))}});
ja.relatedItemsData=Ta;Pa.callback(ja)})}else Pa.callback(ja);return Pa}function da(ja,Sa){var Pa=new h,Ka=ja.itemData,Na=Ka.baseMap.baseMapLayers[0];if(K(Na))if(Na.portalUrl&&d.id)delete Sa.bingMapsKey,d.id.checkSignInStatus(y.urlToObject(Mb.arcgisUrl).path).then(B.hitch(null,function(Ta,Oa,Za,bb,cb){S(Na.portalUrl,cb.token).then(B.hitch(null,Z,Ta,Oa,Za,bb),B.hitch(null,ka,Ta,Oa,Za,bb))},ja,Sa,Ka,Pa),B.hitch(null,function(Ta,Oa,Za,bb,cb){S(Na.portalUrl).then(B.hitch(null,Z,Ta,Oa,Za,bb),B.hitch(null,
ka,Ta,Oa,Za,bb))},ja,Sa,Ka,Pa));else if(Sa.bingMapsKey){var Ua=new ec({bingMapsKey:Sa.bingMapsKey,mapStyle:ec.MAP_STYLE_AERIAL});c.connect(Ua,"onLoad",B.hitch(this,function(){Pa.callback([ja,Sa])}));c.connect(Ua,"onError",function(Ta){delete Sa.bingMapsKey;ja.itemData=va(Ka);Na=ja.itemData.baseMap.baseMapLayers[0];Na.errors=[];Na.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Pa.callback([ja,Sa])})}else ja.itemData=
va(Ka),Na=ja.itemData.baseMap.baseMapLayers[0],Na.errors=[],Na.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Pa.callback([ja,Sa]);else Pa.callback([ja,Sa]);return Pa}function ea(ja){var Sa=new h;ja=ja.itemData;var Pa=ja.baseMap&&ja.baseMap.baseMapLayers;if(ac&&!ac.supported())for(ja=0;ja<Pa.length;ja++){var Ka=Pa[ja];if(!Ka.isReference){if("VectorTileLayer"===Ka.layerType){var Na=Ka.itemId;var Ua=ja}break}}Na?
Fb(Na,!1).addBoth(function(Ta){var Oa=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ta&&Ta.item&&Oa.test(Ta.item.url)&&(Pa[Ua]={id:"FB_"+Ka.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ka?Ka.opacity:1,visibility:"visibility"in Ka?Ka.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Sa.resolve()}):Sa.resolve();return Sa}function Z(ja,Sa,Pa,Ka,Na){Na.bingKey?(Sa.bingMapsKey=Na.bingKey,
Na=new ec({bingMapsKey:Sa.bingMapsKey,mapStyle:ec.MAP_STYLE_AERIAL}),c.connect(Na,"onLoad",B.hitch(this,function(){Ka.callback([ja,Sa])})),c.connect(Na,"onError",function(Ua){delete Sa.bingMapsKey;ja.itemData=va(Pa);Ua=ja.itemData.baseMap.baseMapLayers[0];Ua.errors=[];Ua.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ja,Sa])})):ka(ja,Sa,Pa,Ka)}function ka(ja,Sa,Pa,Ka){delete Sa.bingMapsKey;ja.itemData=
va(Pa);Pa=ja.itemData.baseMap.baseMapLayers[0];Pa.errors=[];Pa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ja,Sa])}function va(ja){P(ja.baseMap.baseMapLayers[0])?ja.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:L(ja.baseMap.baseMapLayers[0])?ja.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",
opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:ja.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return ja}
function Ea(ja,Sa,Pa,Ka){var Na=ja.dynamicLayerInfos||ja.layerInfos,Ua=Sa.layers;if(Ua&&Na)if(Ka.usePopupManager){var Ta;a.forEach(Na,function(kb){var mb=kb.id;if(!kb.subLayerIds)for(kb=0;kb<Ua.length;kb++){var ob=Ua[kb];if(ob.id===mb&&ob.popupInfo&&!ob.disablePopup){Ta||(Ta={});Ta[mb]={infoTemplate:new Pa(ob.popupInfo),layerUrl:ob.layerUrl};break}}});Ta&&ja.setInfoTemplates(Ta)}else{var Oa=[],Za=[],bb=[],cb=[],jb=[],$a=[];a.forEach(Na,function(kb){var mb=kb.id;if(!kb.subLayerIds&&-1!==a.indexOf(ja.visibleLayers,
mb))for(kb=0;kb<Ua.length;kb++){var ob=Ua[kb];if(ob.id===mb){Za.push(mb);Oa.push(ob.popupInfo);bb.push(ob.layerUrl||"");ob.layerDefinition&&ob.layerDefinition.definitionExpression?cb.push(ob.layerDefinition.definitionExpression):cb.push("");jb.push(n.isDefined(ob.minScale)?ob.minScale:null);$a.push(n.isDefined(ob.maxScale)?ob.maxScale:null);break}}});Oa.length&&(ja.__popups=Oa,ja.__popupIds=Za,ja.__popupUrls=bb,ja.__popupWhereClauses=cb,ja.__popupMinScales=jb,ja.__popupMaxScales=$a,ja.__resourceInfo=
Sa.resourceInfo)}}function Ga(ja){if(!ja)return!1;var Sa=(new e(Mb.arcgisUrl)).authority;return-1!==ja.indexOf(".arcgis.com/")||-1!==ja.indexOf(Sa)}function na(ja){return ja?-1!==ja.indexOf("/services.arcgisonline.com/")||-1!==ja.indexOf("/server.arcgisonline.com/"):!1}function ma(ja){"https:"===location.protocol&&(Ga(ja)||na(ja))&&(ja=ja.replace("http:","https:"));return ja}function ya(ja,Sa,Pa){var Ka=[];ja.displayLevels||(Ka=a.map(ja.resourceInfo.tileInfo.lods,function(Ta){return Ta.level}));if(ja.exclusionAreas){var Na=
B.clone(ja.exclusionAreas);Na=a.map(Na,function(Ta){Ta.geometry=new v(Ta.geometry);return Ta})}var Ua=ja.resourceInfo&&"Raster"===ja.resourceInfo.cacheType;Ua?(Ka=ja.layerDefinition&&ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer,Ka=new Nc(ma(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval,multidimensionalDefinition:ja.multidimensionalDefinition,bandIds:ja.bandIds,
renderer:Ka||null})):Ka=new I(ma(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,displayLevels:ja.displayLevels||Ka,id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval,exclusionAreas:Na});Pa.ignorePopups||(Ua&&ja.popupInfo&&!ja.disablePopup?Ka.setInfoTemplate(new Sa(ja.popupInfo)):Ea(Ka,ja,Sa,Pa));return Ka}function za(ja,Sa){if(!ja||!Sa||0===Sa.length)return[];var Pa=","+Sa+",",Ka=[],Na,Ua=",";for(Na=0;Na<ja.length;Na++)if(null!==ja[Na].subLayerIds){if(-1===
Pa.indexOf(","+ja[Na].id+",")||-1<Ua.indexOf(","+ja[Na].id+","))Ua+=ja[Na].subLayerIds.toString()+","}else-1<Pa.indexOf(","+ja[Na].id+",")&&-1===Ua.indexOf(","+ja[Na].id+",")&&Ka.push(ja[Na].id);return Ka}function Ba(ja,Sa,Pa){var Ka=new hc;Ka.format="png24";ja.resourceInfo&&ja.resourceInfo.supportedImageFormatTypes&&-1<ja.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ka.format="png32");Ka=new gc(ma(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,
imageParameters:Ka,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval});var Na=ja.visibleLayers;if(!ja.visibleLayers){var Ua="";a.forEach(Ka.layerInfos,function($a){$a.defaultVisibility&&(Ua+=(0<Ua.length?",":"")+$a.id)});Na=Ua}if(ja.layers&&0<ja.layers.length){var Ta=[],Oa=[],Za,bb=[],cb,jb;a.forEach(ja.layers,function($a){var kb=$a.layerDefinition;kb&&kb.definitionExpression&&(Ta[$a.id]=kb.definitionExpression);if(kb&&kb.source){Za=null;jb=kb.source;if("mapLayer"===jb.type){var mb=
a.filter(ja.resourceInfo.layers,function(ob){return ob.id===jb.mapLayerId});mb.length&&(Za=B.mixin(mb[0],$a))}else Za=B.mixin({},$a);Za&&(Za.source=jb,delete Za.popupInfo,Za=new Ib(Za),ja.visibleLayers&&(mb="string"==typeof ja.visibleLayers?ja.visibleLayers.split(","):ja.visibleLayers,-1<a.indexOf(mb,$a.id)?Za.defaultVisibility=!0:Za.defaultVisibility=!1),Oa.push(Za))}kb&&null!=kb.transparency&&(mb=kb.drawingInfo||{},null==mb.transparency&&(mb.transparency=kb.transparency,kb.drawingInfo=mb));kb&&
kb.source&&kb.drawingInfo&&(cb=new jc(kb.drawingInfo),bb[$a.id]=cb)},this);0<Ta.length&&Ka.setLayerDefinitions(Ta);0<Oa.length?(Ka.setDynamicLayerInfos(Oa,!0),0<bb.length&&Ka.setLayerDrawingOptions(bb,!0)):(Na=za(Ka.layerInfos,Na),Ka.setVisibleLayers(Na))}else Na=za(Ka.layerInfos,Na),Ka.setVisibleLayers(Na);Pa.ignorePopups||Ea(Ka,ja,Sa,Pa);return Ka}function ha(ja,Sa,Pa){var Ka=new Zb;Ka.bandIds=ja.bandIds;null!=ja.format&&(Ka.format=ja.format,null!=ja.compressionQuality&&(Ka.compressionQuality=ja.compressionQuality));
if(ja.renderingRule&&ja.renderingRule.rasterFunction){var Na=new Ec(ja.renderingRule);Ka.renderingRule=Na}ja.mosaicRule&&(Na=new Ac(ja.mosaicRule),Ka.mosaicRule=Na);n.isDefined(ja.noData)&&(Ka.noData=ja.noData);n.isDefined(ja.noDataInterpretation)&&(Ka.noDataInterpretation=ja.noDataInterpretation);n.isDefined(ja.interpolation)&&(Ka.interpolation=ja.interpolation);Na=ja.layerType?"ArcGISImageServiceVectorLayer"===ja.layerType:!1;n.isDefined(ja.layerType)||(Na=ja.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===
ja.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===ja.resourceInfo.serviceDataType));Ka={resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,imageServiceParameters:Ka,minScale:ja.minScale,maxScale:ja.maxScale,refreshInterval:ja.refreshInterval};Ka=Na?new Kb(ma(ja.url),Ka):new Sb(ma(ja.url),Ka);ja.layerDefinition&&(ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer&&(Na=E.fromJson(ja.layerDefinition.drawingInfo.renderer),Ka.setRenderer(Na)),
ja.layerDefinition.definitionExpression&&Ka.setDefinitionExpression(ja.layerDefinition.definitionExpression,!0));Pa.ignorePopups||!ja.popupInfo||ja.disablePopup||Ka.setInfoTemplate(new Sa(ja.popupInfo));return Ka}function qa(ja,Sa,Pa){var Ka=[102113,102100,3857],Na=Pa||new z(Sa[0].layerObject.fullExtent.spatialReference),Ua=new z(ja.resourceInfo.fullExtent.spatialReference);return Na.wkt==Ua.wkt&&(Na.wkid==Ua.wkid||n.isDefined(Na.latestWkid)&&Na.latestWkid==Ua.wkid||n.isDefined(Ua.latestWkid)&&Na.wkid==
Ua.latestWkid||n.isDefined(Na.latestWkid)&&Na.latestWkid==Ua.latestWkid)||Na.wkid&&Ua.wkid&&a.some(Ka,function(Ta){return Ta===Ua.wkid})&&a.some(Ka,function(Ta){return Ta===Na.wkid})?!0:!1}function T(ja,Sa,Pa){if(!Sa[0].layerObject.tileInfo)return!1;ja=ja.resourceInfo.tileInfo;Sa=Sa[0].layerObject.tileInfo;Pa=Pa.width>Pa.height?Pa.width:Pa.height;for(var Ka=!1,Na=!1,Ua=0;Ua<ja.lods.length;Ua++){for(var Ta=ja.lods[Ua].scale/ja.dpi,Oa=0;Oa<Sa.lods.length;Oa++){var Za=Sa.lods[Oa].scale/Sa.dpi;if(Math.abs(Za-
Ta)/Za<1/Pa)if(Ka){Na=!0;break}else Ka=!0}if(Na)break}return Na||Ka&&(1===ja.lods.length||1===Sa.lods.length)?!0:!1}function Ha(ja,Sa,Pa,Ka,Na,Ua){var Ta=Pa._clazz;if(Q(ja))var Oa=new wc({id:ja.id,opacity:ja.opacity,visible:null!==ja.visibility&&void 0!==ja.visibility?ja.visibility:!0});else if(ja&&("WFS"===ja.layerType||"WFS"===ja.type)){var Za={customParameters:ja.wfsInfo.customParameters,geometryType:ja.layerDefinition.geometryType,id:ja.id,labelingInfo:ja.layerDefinition.drawingInfo.labelingInfo,
maxFeatures:ja.wfsInfo.maxFeatures,mode:ja.mode,name:ja.wfsInfo.name,showLabels:!0,swapXY:ja.wfsInfo.swapXY,title:ja.title,url:ja.url,version:ja.wfsInfo.version,visible:ja.visibility,wkid:ja.layerDefinition.spatialReference.wkid};Oa=new Vb;Oa.fromJson(Za,function(){n.isDefined(ja.opacity)&&Oa.setOpacity(ja.opacity);n.isDefined(ja.visibility)&&Oa.setVisibility(ja.visibility);(ja.minScale||ja.maxScale)&&Oa.setScaleRange(ja.minScale,ja.maxScale);Oa.renderer=E.fromJson(ja.layerDefinition.drawingInfo.renderer,
{geometryType:Za.geometryType});!Pa.ignorePopups&&ja.popupInfo&&Oa.setInfoTemplate(new Ta(ja.popupInfo));Oa.emit("fromJsonComplete")})}else if(ja&&("WMS"===ja.layerType||"WMS"===ja.type)){var bb=[],cb=[];a.forEach(ja.layers,function(mb){cb.push(new Xb({name:mb.name,title:mb.title,legendURL:mb.legendURL||mb.legendUrl,queryable:mb.queryable,showPopup:mb.showPopup}));bb.push(mb.name)},this);ja.visibleLayers&&(bb=ja.visibleLayers);Ka=new v(ja.extent[0][0],ja.extent[0][1],ja.extent[1][0],ja.extent[1][1],
new z({wkid:4326}));Ka={customLayerParameters:ja.customLayerParameters,customParameters:ja.customParameters,extent:Ka,layerInfos:cb,version:ja.version,maxWidth:ja.maxWidth,maxHeight:ja.maxHeight,featureInfoFormat:ja.featureInfoFormat,getFeatureInfoURL:ja.featureInfoUrl,getMapURL:ja.mapUrl,spatialReferences:ja.spatialReferences,title:ja.title,copyright:ja.copyright,minScale:ja.minScale||0,maxScale:ja.maxScale||0,format:ja.format};Oa=new lc(ja.url,{id:ja.id,visibleLayers:bb,format:"png",transparent:ja.firstLayer?
!1:!0,opacity:ja.opacity,visible:null!==ja.visibility?ja.visibility:!0,resourceInfo:Ka,refreshInterval:ja.refreshInterval});Oa.spatialReference.wkid=Ka.spatialReferences[0]}else if(ja&&("KML"===ja.layerType||"KML"===ja.type)){var jb=ja.url;if(d.id){var $a=d.id.findCredential(y.urlToObject(Mb.arcgisUrl).path);$a&&(Sa=Mb.arcgisUrl.substring(Mb.arcgisUrl.indexOf("//")+2,Mb.arcgisUrl.indexOf("/",Mb.arcgisUrl.indexOf("//")+3)),Na=Sa.split("."),Na=Na[Na.length-2]+"."+Na[Na.length-1],Ua=jb.indexOf(Na),-1<
Ua&&(jb="https://"+Sa+jb.substring(Ua+Na.length),jb+="?token\x3d"+$a.token))}Oa=new vc(jb,{id:ja.id,visible:null!==ja.visibility?ja.visibility:!0,outSR:Ka,refreshInterval:ja.refreshInterval});c.connect(Oa,"onLoad",function(){(ja.opacity||0===ja.opacity)&&Oa.setOpacity(ja.opacity);n.isDefined(ja.minScale)&&n.isDefined(ja.maxScale)&&Oa.setScaleRange(ja.minScale,ja.maxScale);ja.visibleFolders&&a.forEach(Oa.folders,function(mb){-1<a.indexOf(ja.visibleFolders,mb.id)?Oa.setFolderVisibility(mb,!0):Oa.setFolderVisibility(mb,
!1)},this)})}else if(!ja||"WebTiledLayer"!==ja.layerType&&"WebTiledLayer"!==ja.type)if(!ja||"GeoRSS"!==ja.layerType&&"GeoRSS"!==ja.type)if(ja&&("CSV"===ja.layerType||"CSV"===ja.type)&&ja.url)Ka={layerDefinition:ja.layerDefinition,columnDelimiter:ja.columnDelimiter,id:ja.id?ja.id:null,visible:null!==ja.visibility?ja.visibility:!0,opacity:ja.opacity,refreshInterval:ja.refreshInterval},ja.locationInfo&&(Ka.latitudeFieldName=ja.locationInfo.latitudeFieldName,Ka.longitudeFieldName=ja.locationInfo.longitudeFieldName),
!Pa.ignorePopups&&ja.popupInfo&&(Ka.infoTemplate=new Ta(ja.popupInfo)),Oa=new uc(ja.url,Ka);else if("VectorTileLayer"!==ja.layerType||!ja.styleUrl||ja.resourceInfo&&ja.resourceInfo instanceof Error)if(ja.layerDefinition&&!ja.url)Ka=g.fromJson(g.toJson(ja)),delete Ka.id,delete Ka.opacity,delete Ka.visibility,Oa=new R(Ka,{id:ja.id,opacity:ja.opacity,visible:ja.visibility,outFields:["*"],autoGeneralize:!0}),Pa.ignorePopups||!Ka.popupInfo||Ka.disablePopup||Oa.setInfoTemplate(new Ta(Ka.popupInfo)),Xa(Oa);
else if(K(ja))Pa.bingMapsKey?(Ka=ec.MAP_STYLE_AERIAL_WITH_LABELS,P(ja)?Ka=ec.MAP_STYLE_AERIAL:L(ja)&&(Ka=ec.MAP_STYLE_ROAD),Oa=new ec({bingMapsKey:Pa.bingMapsKey,mapStyle:Ka,opacity:ja.opacity,id:ja.id}),c.connect(Oa,"onError",B.hitch(this,function(mb){mb.errors=mb.errors||[];mb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(mb?mb.layerType||mb.type:"")+"]"})},ja))):(ja.errors=ja.errors||[],ja.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(ja?ja.layerType||ja.type:"")+"]"}));else if(ja.resourceInfo&&(ja.resourceInfo.mapName||""===ja.resourceInfo.mapName))Oa=!0===ja.resourceInfo.singleFusedMapCache&&(ja.baseMapLayer||qa(ja,Sa,Ka)&&T(ja,Na,Ua))?ya(ja,Ta,Pa):Ba(ja,Ta,Pa);else if(ja.resourceInfo&&ja.resourceInfo.pixelSizeX)Oa=!0===ja.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==ja.layerType&&(ja.baseMapLayer||"Raster"===ja.resourceInfo.cacheType||qa(ja,Sa,Ka)&&T(ja,Na,Ua))?ya(ja,Ta,Pa):ha(ja,Ta,Pa);else if(ja.resourceInfo&&
"Feature Layer"===ja.resourceInfo.type){ja.capabilities&&(ja.resourceInfo.capabilities=ja.capabilities);var kb;!1===Pa.editable?kb=!1:Pa.privileges&&-1===a.indexOf(Pa.privileges,"features:user:edit")&&d.id&&d.id.findCredential(ja.url)&&(kb=!1);Oa=new R(ma(ja.url),{resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id,mode:ja.mode===R.MODE_SELECTION?R.MODE_SELECTION:R.MODE_AUTO,editable:kb,outFields:["*"],autoGeneralize:!0,refreshInterval:ja.refreshInterval});Pa.ignorePopups||
!ja.popupInfo||ja.disablePopup||Oa.setInfoTemplate(new Ta(ja.popupInfo));ja.layerDefinition&&(ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.renderer&&(Ka=E.fromJson(ja.layerDefinition.drawingInfo.renderer,{geometryType:Oa.geometryType}),Ka.isMaxInclusive=!0,Oa.setRenderer(Ka)),ja.layerDefinition.drawingInfo&&ja.layerDefinition.drawingInfo.labelingInfo&&(Ka=a.map(ja.layerDefinition.drawingInfo.labelingInfo,function(mb){return new ic(mb)}),Oa.setLabelingInfo(Ka)),ja.layerDefinition.definitionExpression&&
Oa.setDefinitionExpression(ja.layerDefinition.definitionExpression),n.isDefined(ja.layerDefinition.minScale)&&Oa.setMinScale(ja.layerDefinition.minScale),n.isDefined(ja.layerDefinition.maxScale)&&Oa.setMaxScale(ja.layerDefinition.maxScale));Xa(Oa)}else ja.resourceInfo&&ja.resourceInfo.streamUrls&&(Ka={resourceInfo:ja.resourceInfo,opacity:ja.opacity,visible:ja.visibility,id:ja.id},ja.layerDefinition&&(jb=ja.layerDefinition.drawingInfo,ja.layerDefinition.definitionGeometry&&($a=$a||{},$a.geometry=ja.layerDefinition.definitionGeometry),
n.isDefined(ja.layerDefinition.definitionExpression)&&($a=$a||{},$a.where=ja.layerDefinition.definitionExpression),n.isDefined(ja.layerDefinition.maximumTrackPoints)&&(Ka.maximumTrackPoints=ja.layerDefinition.maximumTrackPoints)),$a&&(Ka.filter=$a),ja.purgeOptions&&(Ka.purgeOptions=ja.purgeOptions),Oa=new Fc(ma(ja.url),Ka),jb&&jb.renderer&&(Ka=jb.renderer,Oa.setRenderer(E.fromJson(Ka,{geometryType:ja.resourceInfo.geometryType}))),jb&&jb.labelingInfo&&(Ka=a.map(jb.labelingInfo,function(mb){return new ic(mb)}),
Oa.setLabelingInfo(Ka)),Pa.ignorePopups||!ja.popupInfo||ja.disablePopup||Oa.setInfoTemplate(new Ta(ja.popupInfo)),ja.layerDefinition&&(n.isDefined(ja.layerDefinition.minScale)&&Oa.setMinScale(ja.layerDefinition.minScale),n.isDefined(ja.layerDefinition.maxScale)&&Oa.setMaxScale(ja.layerDefinition.maxScale)),l.once(Oa,"error",function(mb){ja.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Oa=new ac(ja.styleUrl,{id:ja.id,minScale:ja.minScale,maxScale:ja.maxScale,opacity:ja.opacity,
visible:ja.visibility,resourceInfo:ja.resourceInfo});else Oa=new dc(ja.url,{id:ja.id,opacity:ja.opacity,outSpatialReference:Ka,refreshInterval:ja.refreshInterval}),c.connect(Oa,"onLoad",function(){!1===ja.visibility&&Oa.hide();n.isDefined(ja.minScale)&&n.isDefined(ja.maxScale)&&Oa.setScaleRange(ja.minScale,ja.maxScale);var mb=Oa.getFeatureLayers();a.forEach(mb,function(ob){ja.pointSymbol&&"esriGeometryPoint"===ob.geometryType?(ob.renderer.symbol=C.fromJson(ja.pointSymbol),1===mb.length&&(Oa.pointSymbol=
C.fromJson(ja.pointSymbol))):ja.lineSymbol&&"esriGeometryPolyline"===ob.geometryType?(ob.renderer.symbol=C.fromJson(ja.lineSymbol),1===mb.length&&(Oa.polylineSymbol=C.fromJson(ja.lineSymbol))):ja.polygonSymbol&&"esriGeometryPolygon"===ob.geometryType&&(ob.renderer.symbol=C.fromJson(ja.polygonSymbol),1===mb.length&&(Oa.polygonSymbol=C.fromJson(ja.polygonSymbol)))})});else if(Oa=new Oc(ja.templateUrl,{id:ja.id,visible:null!==ja.visibility?ja.visibility:!0,opacity:ja.opacity,copyright:ja.copyright,fullExtent:ja.fullExtent&&
new v(ja.fullExtent),initialExtent:ja.fullExtent&&new v(ja.fullExtent),subDomains:ja.subDomains,tileInfo:ja.tileInfo?new kc(ja.tileInfo):null,refreshInterval:ja.refreshInterval,wmtsInfo:ja.wmtsInfo}),n.isDefined(ja.minScale)||n.isDefined(ja.maxScale))Oa.loaded?Oa.setScaleRange(ja.minScale,ja.maxScale):c.connect(Oa,"onLoad",function(){Oa.setScaleRange(ja.minScale,ja.maxScale)});Oa&&(Oa.arcgisProps={title:ja.title},ja.baseMapLayer&&(ja.isReference?(Oa.attr("data-reference",!0),Oa._basemapGalleryLayerType=
"reference"):Oa._basemapGalleryLayerType="basemap"),Oa instanceof R&&ja.layerDefinition&&ja.layerDefinition.featureReduction&&"cluster"===ja.layerDefinition.featureReduction.type&&(Ka=ja.layerDefinition.featureReduction,Ka.clusterSize&&(Ka.clusterSize=b.pt2px(Ka.clusterSize)),Ka.clusterRadius&&(Ka.clusterRadius=b.pt2px(Ka.clusterRadius)),Ka.popupInfo&&(Ka.infoTemplate=new F(Ka.popupInfo),delete Ka.popupInfo),Oa.setFeatureReduction(Ka)));return Oa}function Ja(ja,Sa,Pa,Ka,Na){a.forEach(ja,function(Oa){Oa.layerObject=
Ha(Oa,ja,Sa,Pa,Ka,Na)});var Ua=a.filter(ja,function(Oa){return!Oa.isReference}),Ta=a.filter(ja,function(Oa){return!!Oa.isReference});return ja=Ua.concat(Ta)}function fa(ja){var Sa=null;ja=ja[0];ja.url&&W(ja)&&ja.resourceInfo.spatialReference&&(Sa=new z,ja.resourceInfo.spatialReference.wkid&&(Sa.wkid=ja.resourceInfo.spatialReference.wkid),ja.resourceInfo.spatialReference.wkt&&(Sa.wkt=ja.resourceInfo.spatialReference.wkt));K(ja)||Q(ja)?Sa=new z({wkid:102100}):ja&&("WMS"===ja.layerType||"WMS"===ja.type)&&
(Sa=new z({wkid:ja.spatialReferences[0]}));return Sa}function Ya(ja,Sa,Pa,Ka,Na,Ua,Ta,Oa){a.forEach(Sa,function(Za){if(W(Za)||Za&&"VectorTileLayer"===Za.layerType)Za.resourceInfo=ja[Za.deferredsPos][1],delete Za.deferredsPos});Ua=Ua||fa(Sa);Sa=Ja(Sa,Pa,Ua,Ta,Oa);Na.callback(Sa);return Na}function Xa(ja){!window.CanvasRenderingContext2D&&ja.renderer&&"esri.renderer.HeatmapRenderer"===ja.renderer.declaredClass&&ja.setRenderer(E.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,
yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ca(ja,Sa,Pa){ja.message=ja.message?ja.message+(" [url:"+Sa+"]"):"[url:"+Sa+"]";Pa.push(ja);q.defaults.io.errorHandler(ja)}function Y(ja,Sa){var Pa=ma(ja);return t({url:Pa,content:{f:"json"},callbackParamName:"callback",error:function(Ka,Na){Ca(Ka,Pa,Sa)}})}function la(ja){var Sa=Mb.arcgisUrl+"/"+ja.itemId+"/data";return t({url:Sa,content:{f:"json"},callbackParamName:"callback",
error:function(Pa,Ka){ja.errors=ja.errors||[];Ca(Pa,Sa,ja.errors)}})}function sa(ja,Sa){return Gc.loadMetadata(ja).otherwise(function(Pa){Ca(Pa,ja,Sa);return Pa})}function U(ja,Sa,Pa){var Ka=new h;if(!(Pa.featureCollection&&Pa.featureCollection.layers||Pa.layers))return ja.errors=ja.errors||[],ja.errors.push({message:"Invalid Feature Collection item data. [item id: "+ja.itemId+"]"}),Ka.errback(),Ka;Pa.layers&&(Pa.featureCollection={layers:Pa.layers},delete Pa.layers,n.isDefined(Pa.showLegend)&&(Pa.featureCollection.showLegend=
Pa.showLegend,delete Pa.showLegend));ia(ja,Pa.featureCollection,Sa).then(function(Na){Pa.featureCollection=Na;ja.featureCollection&&ja.featureCollection.layers?a.forEach(Pa.featureCollection.layers,function(Ua,Ta){var Oa=ja.featureCollection.layers[Ta];Oa.popupInfo||Oa.layerDefinition?Oa.layerDefinition?(n.isDefined(Oa.layerDefinition.minScale)&&n.isDefined(Oa.layerDefinition.maxScale)&&(Oa.layerDefinition.minScale!==Ua.layerDefinition.minScale||Oa.layerDefinition.maxScale!==Ua.layerDefinition.maxScale)&&
(delete Ua.layerDefinition.minScale,delete Ua.layerDefinition.maxScale),Oa.layerDefinition.drawingInfo&&g.toJson(Oa.layerDefinition.drawingInfo)!==g.toJson(Ua.layerDefinition.drawingInfo)&&delete Ua.layerDefinition.drawingInfo,Oa.layerDefinition.showLegend!==Ua.layerDefinition.showLegend&&delete Ua.layerDefinition.showLegend,Oa.layerDefinition=B.mixin(Oa.layerDefinition,Ua.layerDefinition)):Oa.layerDefinition=Ua.layerDefinition:(Oa.popupInfo=Ua.popupInfo,Oa.layerDefinition=Ua.layerDefinition);Oa.featureSet=
Ua.featureSet;Oa.nextObjectId=Ua.nextObjectId}):(ja.featureCollection=ja.featureCollection||{},ja.featureCollection=B.mixin(ja.featureCollection,Pa.featureCollection));Ka.callback(ja)});return Ka}function ia(ja,Sa,Pa){var Ka=new h;D(["./csv"],function(Na){var Ua=[];a.forEach(Sa.layers,function(Ta){Ta.featureSet&&Ta.featureSet.features&&Ta.featureSet.features.length&&Ta.featureSet.features[0].geometry&&Ta.featureSet.features[0].geometry.spatialReference&&(Ta.deferredsPos=Ua.length,Ua.push(Na.projectFeatureCollection(Ta,
Pa,Ta.featureSet.features[0].geometry.spatialReference)))});(new r(Ua)).addCallback(function(){a.forEach(Sa.layers,function(Ta){n.isDefined(Ta.deferredsPos)&&(Ua[Ta.deferredsPos].results&&Ua[Ta.deferredsPos].results.length?Ta=Ua[Ta.deferredsPos].results[0]:(Ta.errors=Ta.errors||[],Ta.errors.push({message:"Errors projecting feature collection. ["+ja.title+" - "+Ta.layerDefinition.name+"]"})),delete Ta.deferredsPos)});Ka.callback(Sa)})});return Ka}function ua(ja,Sa,Pa,Ka,Na){var Ua=new h,Ta=new h,Oa=
[];a.forEach(ja.operationalLayers,function(bb){bb.itemId&&"Feature Collection"==bb.type&&Oa.push(la(bb).then(B.hitch(null,U,bb,Pa)))});if(0===Oa.length)wa(ja,Sa,Pa,Ka,Ta,Na);else{var Za=new r(Oa);Za.addCallback(function(bb){wa(ja,Sa,Pa,Ka,Ta,Na)})}Ta.then(function(bb){Oa=[];a.forEach(bb,function(jb){jb=jb.layerObject;if(jb instanceof R&&!jb.loaded&&!jb.loadError){var $a=new h;l.once(jb,"load, error",function(){$a.callback(jb)});Oa.push($a)}else jb&&"esri.layers.WFSLayer"===jb.declaredClass&&!jb.loadError&&
($a=new h,l.once(jb,"fromJsonComplete, error",function(kb){$a.callback(jb)}),Oa.push($a))});if(Oa.length){var cb=new h;Za=new r(Oa);Za.addCallback(function(){cb.callback(bb)});return cb.promise}return bb}).then(function(bb){var cb=[];a.forEach(bb,function(jb){var $a=jb.layerObject;$a&&($a instanceof R||"esri.layers.StreamLayer"===$a.declaredClass)?$a.loaded&&$a.labelingInfo&&(jb.showLabels||$a._collection?cb.push($a):$a.setShowLabels&&$a.setShowLabels(!1)):$a&&"esri.layers.WFSLayer"===$a.declaredClass&&
$a.loaded&&$a.labelingInfo&&cb.push($a)});cb.length?D(["../layers/LabelLayer"],function(jb){var $a=new jb;a.forEach(cb,function(kb){$a.addFeatureLayer(kb)});bb.push({layerObject:$a});Ua.callback(bb)}):Ua.callback(bb)});return Ua}function wa(ja,Sa,Pa,Ka,Na,Ua){var Ta=[],Oa=[],Za=[];a.forEach(ja.operationalLayers,function(bb,cb){if(bb.featureCollection&&bb.featureCollection.layers){var jb=bb.featureCollection.layers.length;a.forEach(bb.featureCollection.layers,function($a,kb){var mb=!0;bb.visibleLayers&&
-1==a.indexOf(bb.visibleLayers,kb)&&(mb=!1);$a.visibility=(null!=bb.visibility?!!bb.visibility:!0)&&mb;$a.opacity=bb.opacity;$a.id=(bb.id||"operational"+cb)+"_"+kb;bb.title&&($a.title=1!==jb&&$a.layerDefinition.name&&bb.title!==$a.layerDefinition.name?bb.title+" - "+$a.layerDefinition.name:bb.title);null==$a.disablePopup&&($a.disablePopup=bb.disablePopup);Za.push($a)},this)}else Za.push(bb)});a.forEach(ja.baseMap.baseMapLayers,function(bb,cb){bb.baseMapLayer=!0;bb.id=bb.id||"base"+cb;Ta.push(bb)});
a.forEach(Za,function(bb,cb){bb.id=bb.id||"operational"+cb;Ta.push(bb)});a.forEach(Ta,function(bb){if(W(bb)||bb&&"VectorTileLayer"===bb.layerType)bb.deferredsPos=Oa.length,bb.errors=bb.errors||[],bb.url?Oa.push(Y(bb.url,bb.errors)):Oa.push(sa(bb.styleUrl,bb.errors))});0===Oa.length?(Pa=Pa||fa(Ta),Ta=Ja(Ta,Sa,Pa,Ka,Ua),Na.callback(Ta)):(new r(Oa)).addCallback(function(bb){Ya(bb,Ta,Sa,Oa,Na,Pa,Ka,Ua)});return Na}function Fa(ja,Sa,Pa,Ka){var Na=ja.minScale,Ua=ja.maxScale;if(10.1>=Pa.version&&Sa)for(ja=
Sa.length-1;0<=ja;ja--){if(Sa[ja].id==Ka)if(0==Na&&0<Sa[ja].minScale?Na=Sa[ja].minScale:0<Na&&0==Sa[ja].minScale?Na=Pa.minScale:0<Na&&0<Sa[ja].minScale&&(Na=Math.min(Na,Sa[ja].minScale)),Ua=Math.max(Pa.maxScale||0,Sa[ja].maxScale||0),Pa.setScaleRange(Na,Ua),-1<Sa[ja].parentLayerId)Ka=Sa[ja].parentLayerId;else break}else 10.1<Pa.version&&(a.forEach(ja.layerInfos,function(Ta){Ta.id==Ka&&(0==Na&&0<Ta.minScale?Na=Ta.minScale:0<Na&&0==Ta.minScale||0<Na&&0<Ta.minScale&&(Na=Math.min(Na,Ta.minScale)),Ua=
Math.max(Ua||0,Ta.maxScale||0))}),Pa.setScaleRange(Na,Ua))}function Da(ja,Sa,Pa,Ka){var Na=ja.url,Ua=ja.__popupIds,Ta=ja.__popupUrls,Oa=ja.__popupWhereClauses,Za=ja.__popupMinScales,bb=ja.__popupMaxScales,cb=ja.__resourceInfo,jb=[];a.forEach(ja.__popups,function($a,kb){if($a){var mb=[];a.forEach($a.fieldInfos,function(Gb){"shape"!==Gb.fieldName.toLowerCase()&&mb.push(Gb.fieldName)});if(ja.dynamicLayerInfos&&0<ja.dynamicLayerInfos.length){var ob=a.filter(ja.dynamicLayerInfos,function(Gb){return Ua[kb]==
Gb.id})[0].source;var Ub=new R(Na+"/dynamicLayer",{parentLayer:ja,id:ja.id+"_"+Ua[kb],source:ob,outFields:mb,mode:R.MODE_SELECTION,infoTemplate:$a&&new Pa($a),drawMode:!1,visible:ja.visible,autoGeneralize:!0});var Hc=function(Gb,mc){0<Oa[Gb].length&&mc.setDefinitionExpression(Oa[Gb]);if(n.isDefined(Za[Gb])||n.isDefined(bb[Gb]))if(n.isDefined(ja.minScale)||n.isDefined(ja.maxScale)){var bc=ja.minScale,Pc=ja.maxScale;0==bc&&0<Za[Gb]?bc=Za[Gb]:0<bc&&0==Za[Gb]||0<bc&&0<Za[Gb]&&(bc=Math.min(bc,Za[Gb]));
Pc=Math.max(Pc||0,bb[Gb]||0);mc.setScaleRange(bc,Pc)}else mc.setScaleRange(Za[Gb],bb[Gb]);else Fa(ja,Sa||cb.layers,mc,Ua[Gb])};Ub.loaded?Hc(kb,Ub):c.connect(Ub,"onLoad",function(Gb){Hc(kb,Ub)})}else{var yc=null,Bc=Na+"/"+Ua[kb];if(Ta[kb].length)Bc=Ta[kb];else if(Sa)for(ob=0;ob<Sa.length;ob++)if(Sa[ob].id===Ua[kb]){yc=Sa[ob];break}Ub=new R(ma(Bc),{parentLayer:ja,id:ja.id+"_"+Ua[kb],outFields:mb,mode:R.MODE_SELECTION,infoTemplate:$a&&new Pa($a),drawMode:!1,visible:ja.visible,resourceInfo:yc,autoGeneralize:!0});
Ub.loaded?(0<Oa[kb].length&&Ub.setDefinitionExpression(Oa[kb]),Fa(ja,Sa||cb.layers,Ub,Ua[kb])):c.connect(Ub,"onLoad",function(Gb){0<Oa[kb].length&&Ub.setDefinitionExpression(Oa[kb]);Fa(ja,Sa||cb.layers,Gb,Ua[kb])})}jb.push(Ub)}});0<jb.length&&(c.connect(ja,"onVisibilityChange",B.hitch(this,function($a,kb){a.forEach($a,function(mb){kb?mb.show():mb.hide()})},jb)),c.connect(Ka,"onLayerRemove",B.hitch(this,function($a,kb,mb){$a.id===mb.id&&a.forEach(kb,function(ob){Ka.removeLayer(ob)})},ja,jb)));delete ja.__popups;
delete ja.__popupIds;delete ja.__popupUrls;delete ja.__popupWhereClauses;delete ja.__popupMinScales;delete ja.__popupMaxScales;delete ja.__resourceInfo;return jb}function La(ja){return t({url:ma(ja.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Wa(ja,Sa,Pa){var Ka=[];a.forEach(ja,function(Ua){var Ta=Ua.__popups;Ta&&1<Ta.length&&10<=Ua.version&&(Ua.__deferredsPos=Ka.length,Ka.push(La(Ua)))});var Na=[];0<Ka.length?(new r(Ka)).addCallback(function(Ua){a.forEach(ja,
function(Ta){Ta.__popups&&0<Ta.__popups.length&&(Ta.__deferredsPos||0===Ta.__deferredsPos?(Na=Na.concat(Da(Ta,Ua[Ta.__deferredsPos][1].layers,Pa,Sa)),delete Ta.__deferredsPos):Na=Na.concat(Da(Ta,null,Pa,Sa)))});Sa.addLayers(Na)}):(a.forEach(ja,function(Ua){Ua.__popups&&0<Ua.__popups.length&&(Na=Na.concat(Da(Ua,null,Pa,Sa)))}),Sa.addLayers(Na))}function Va(ja){a.forEach(ja,function(Sa){var Pa=Sa.layer;Pa.toJson&&(Sa=Pa.toJson(),Sa.featureSet&&Pa.name&&-1<Pa.name.indexOf("Text")&&a.forEach(Sa.featureSet.features,
function(Ka,Na){if(Ka.attributes.TEXT){var Ua=Pa.graphics[Na];Ua.symbol.setText(Ka.attributes.TEXT);Ka.symbol.horizontalAlignment&&(Ua.symbol.align=Ka.symbol.horizontalAlignment);Ua.setSymbol(Ua.symbol);Ua.setAttributes(Ka.attributes)}},this))})}function Ma(ja){var Sa=6;a.forEach(ja,function(Pa){if(Pa=Pa.renderer)"esri.renderer.SimpleRenderer"===Pa.declaredClass?((Pa=Pa.symbol)&&Pa.xoffset&&(Sa=Math.max(Sa,Math.abs(Pa.xoffset))),Pa&&Pa.yoffset&&(Sa=Math.max(Sa,Math.abs(Pa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
Pa.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Pa.declaredClass||a.forEach(Pa.infos,function(Ka){(Ka=Ka.symbol)&&Ka.xoffset&&(Sa=Math.max(Sa,Math.abs(Ka.xoffset)));Ka&&Ka.yoffset&&(Sa=Math.max(Sa,Math.abs(Ka.yoffset)))})});return Sa}function eb(ja){var Sa=this,Pa=Sa.infoWindow,Ka=ja.graphic;if(Sa.loaded){Pa.hide();Pa.clearFeatures();var Na=[];a.forEach(Sa.graphicsLayerIds,function($a){($a=Sa.getLayer($a))&&$a instanceof R&&$a.loaded&&$a.visible&&($a.clearSelection(),$a.infoTemplate&&!$a.suspended&&
Na.push($a))});a.forEach(Sa.layerIds,function($a){($a=Sa.getLayer($a))&&(-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==$a.declaredClass.indexOf("RasterXLayer"))&&$a.loaded&&$a.visible&&$a.infoTemplate&&Na.push($a)});Ka=Ka&&Ka.getInfoTemplate()?Ka:null;if(Na.length||Ka){var Ua=Ma(Na),Ta=ja.screenPoint,Oa=Sa.toMap(new A(Ta.x-Ua,Ta.y+Ua));Ua=Sa.toMap(new A(Ta.x+Ua,Ta.y-Ua));var Za=new v(Oa.x,Oa.y,Ua.x,Ua.y,Sa.spatialReference),bb=new H;bb.geometry=Za;bb.timeExtent=Sa.timeExtent;var cb=
!0;Oa=a.map(Na,function($a){$a=$a&&$a.isFeatureReductionActive&&$a.isFeatureReductionActive()?$a.getFeatureReductionLayer():$a;if(-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")){bb.geometry=ja.mapPoint;cb=!1;var kb=$a.queryVisibleRasters(bb,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});kb.addCallback(function(){return $a.getVisibleRasters()})}else if(-1!==$a.declaredClass.indexOf("RasterXLayer"))kb=$a.fetchPopupFromTiles({geometry:ja.mapPoint});else if("function"===
typeof $a.selectFeatures)kb=$a.selectFeatures(bb),kb.addCallback(function(){return $a.getSelectedFeatures()});else{kb=new h;var mb=a.filter($a.graphics,function(ob){return ob&&ob.visible&&Za.intersects(ob.geometry)});kb.resolve(mb)}return kb});Ka&&(Ua=new h,Ua.callback([Ka]),Oa.splice(0,0,Ua));if(!a.some(Oa,function($a){return-1===$a.fired})){var jb=Ka?1:0;a.forEach(Na,function($a){jb=-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")?jb+$a.getVisibleRasters().length:-1!==$a.declaredClass.indexOf("RasterXLayer")?
jb+$a.getPopupFromTiles().length:jb+$a.getSelectedFeatures().length});if(!jb)return}Pa.setFeatures(Oa);Pa.show(ja.mapPoint,{closestFirst:cb})}}}function ib(ja,Sa){var Pa=Sa.mapOptions||{};if(!Pa.infoWindow){var Ka=new G({visibleWhenEmpty:!1},k.create("div"));Pa.infoWindow=Ka}n.isDefined(Pa.showInfoWindowOnClick)||Sa.usePopupManager||(Pa.showInfoWindowOnClick=!1);Pa=new w(ja,Pa);c.connect(Pa,"onLayersAddResult",Va);return Pa}function lb(ja,Sa,Pa,Ka,Na,Ua){if(Ka.map){var Ta=Ka.map;var Oa=Ka.clickEventHandle;
var Za=Ka.clickEventListener;var bb=Ka.errors}else{var cb=Pa.itemData;!Na.mapOptions.backgroundColor&&cb.background&&cb.background.color&&null!=cb.background.color[0]&&(Na.mapOptions.backgroundColor=m.toDojoColor(cb.background.color));Ta=ib(Ka,Na);Na.ignorePopups||Na.disableClickBehavior||Na.usePopupManager||(Oa=c.connect(Ta,"onClick",eb),Za=eb)}Ta.addLayers(ja);Na.ignorePopups||Na.usePopupManager||Wa(ja,Ta,Na._clazz);var jb=bb||[];a.forEach(Sa,function($a){$a.errors&&(jb=jb.concat($a.errors))},this);
Ta.loaded?Ua.callback({map:Ta,itemInfo:Pa,errors:jb,clickEventHandle:Oa,clickEventListener:Za}):c.connect(Ta,"onLoad",function(){Ua.callback({map:Ta,itemInfo:Pa,errors:jb,clickEventHandle:Oa,clickEventListener:Za})})}function rb(ja,Sa,Pa,Ka,Na){var Ua=[];a.forEach(Na,function(Za){B.isArray(Za.layerObject)?a.forEach(Za.layerObject,function(bb){Ua.push(bb)}):Ua.push(Za.layerObject)});if(K(Na[0]))var Ta=setInterval(function(){if(Na[0].layerObject&&Na[0].layerObject.loaded)clearInterval(Ta),sb(ja,Sa,
Pa,Ka,Na,Ua);else if(Na[0].errors){clearInterval(Ta);var Za="";Na[0].errors&&Na[0].errors.length&&(Za=" ("+Na[0].errors[0].message+")");Ka.errback(Error(O.arcgis.utils.baseLayerError+Za))}},10);else if(!Ua[0]&&Na[0].baseMapLayer){var Oa="";Na[0].errors&&Na[0].errors.length&&(Oa=" ("+Na[0].errors[0].message+")");Ka.errback(Error(O.arcgis.utils.baseLayerError+Oa))}else sb(ja,Sa,Pa,Ka,Na,Ua)}function sb(ja,Sa,Pa,Ka,Na,Ua){try{var Ta=Pa.mapOptions||{};Pa.mapOptions=Ta;Ua=a.filter(Ua,n.isDefined);if(Sa.map||
Ta.extent)lb(Ua,Na,ja,Sa,Pa,Ka);else{var Oa=Ua[0].spatialReference;if(Ta.center&&(null!=Ta.zoom||Ta.scale)&&(B.isArray(Ta.center)&&(Ta.center=new x(Ta.center)),u.canProject(Ta.center,Oa))){lb(Ua,Na,ja,Sa,Pa,Ka);return}var Za=ja.item;if(Za&&Za.extent&&Za.extent.length){var bb=new v(Za.extent[0][0],Za.extent[0][1],Za.extent[1][0],Za.extent[1][1],new z({wkid:4326}));4326===Oa.wkid?(Ta.extent=bb,lb(Ua,Na,ja,Sa,Pa,Ka)):900913===Oa.wkid||102100===Oa.wkid||102113===Oa.wkid||3857===Oa.wkid?(bb.xmin=Math.max(bb.xmin,
-180),bb.xmax=Math.min(bb.xmax,180),bb.ymin=Math.max(bb.ymin,-89.99),bb.ymax=Math.min(bb.ymax,89.99),Ta.extent=u.geographicToWebMercator(bb),lb(Ua,Na,ja,Sa,Pa,Ka)):Pa.geometryServiceURL||q.defaults.geometryService?(Pa.geometryServiceURL?new J(Pa.geometryServiceURL):q.defaults.geometryService).project([bb],Oa,function(cb){cb=cb[0];Ta.extent=Ta.extent||cb;lb(Ua,Na,ja,Sa,Pa,Ka)},function(){lb(Ua,Na,ja,Sa,Pa,Ka)}):Ka.errback(Error(O.arcgis.utils.geometryServiceError))}else lb(Ua,Na,ja,Sa,Pa,Ka)}}catch(cb){Ka.errback(cb)}}
function tb(ja){var Sa=[];a.forEach(ja.operationalLayers,function(Pa){Pa.featureCollection?Sa.push({featureCollection:Pa.featureCollection,visibility:null!=Pa.visibility?!!Pa.visibility:!0,title:Pa.title}):Pa.layerObject&&Sa.push({layer:Pa.layerObject,visibility:null!=Pa.visibility?!!Pa.visibility:!0,title:Pa.title})});return Sa}function Ab(ja){var Sa=[],Pa=ja.baseMap.baseMapLayers;ja.operationalLayers&&(Pa=Pa.concat(ja.operationalLayers));a.forEach(Pa,function(Ka){var Na={};if(Ka.featureCollection&&
(!Ka||"CSV"!==Ka.layerType&&"CSV"!==Ka.type))!0===Ka.featureCollection.showLegend&&a.forEach(Ka.featureCollection.layers,function(Oa){if(!1!==Oa.showLegend){var Za=Oa.layerObject.renderer;Na={layer:Oa.layerObject,title:Ka.title,defaultSymbol:Za&&Za.defaultSymbol&&Za.defaultLabel?!0:!1};1<Ka.featureCollection.layers.length&&(Na.title+=" - "+Oa.layerDefinition.name);Sa.push(Na)}});else if(Ka.baseMapLayer&&!0===Ka.showLegend&&Ka.layerObject||!Ka.baseMapLayer&&!1!==Ka.showLegend&&Ka.layerObject&&!(Ka.layerObject instanceof
R&&Ka.layerObject.mode===R.MODE_SELECTION)){var Ua=Ka.layerObject.renderer,Ta=Ka.layerObject.declaredClass;Ua=!Ua||Ua&&Ua.defaultSymbol&&Ua.defaultLabel?!0:!1;if(10.1>Ka.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Ta||"esri.layers.ArcGISTiledMapServiceLayer"===Ta)||"esri.layers.ArcGISImageServiceLayer"===Ta)Ua=!0;Na={layer:Ka.layerObject,title:Ka.title,defaultSymbol:Ua};Ka.layers&&(Ta=a.map(a.filter(Ka.layers,function(Oa){return!1===Oa.showLegend}),function(Oa){return Oa.id}),
Ta.length&&(Na.hideLayers=Ta));Sa.push(Na)}});return Sa}function Cb(ja,Sa){function Pa(bb,cb){a.forEach(bb,function(jb,$a){switch(jb){case "../layers/ArcGISDynamicMapServiceLayer":gc=cb[$a];break;case "../layers/ArcGISImageServiceLayer":Sb=cb[$a];break;case "../layers/ArcGISImageServiceVectorLayer":Kb=cb[$a];break;case "../layers/CSVLayer":uc=cb[$a];break;case "../layers/DynamicLayerInfo":Ib=cb[$a];break;case "../layers/GeoRSSLayer":dc=cb[$a];break;case "../layers/ImageParameters":hc=cb[$a];break;
case "../layers/ImageServiceParameters":Zb=cb[$a];break;case "../layers/KMLLayer":vc=cb[$a];break;case "../layers/LabelClass":ic=cb[$a];break;case "../layers/LayerDrawingOptions":jc=cb[$a];break;case "../layers/MosaicRule":Ac=cb[$a];break;case "../layers/OpenStreetMapLayer":wc=cb[$a];break;case "../layers/RasterFunction":Ec=cb[$a];break;case "../layers/RasterXLayer":Nc=cb[$a];break;case "../layers/StreamLayer":Fc=cb[$a];break;case "../layers/TileInfo":kc=cb[$a];break;case "../layers/VectorTileLayer":ac=
cb[$a];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":Gc=cb[$a];break;case "../virtualearth/VETiledLayer":ec=cb[$a];break;case "../layers/WebTiledLayer":Oc=cb[$a];break;case "../layers/WFSLayer":Vb=cb[$a];break;case "../layers/WMSLayer":lc=cb[$a];break;case "../layers/WMSLayerInfo":Xb=cb[$a]}})}var Ka=new h,Na=ja.itemData,Ua=[];Na.baseMap&&Na.baseMap.baseMapLayers&&(Ua=Ua.concat(Na.baseMap.baseMapLayers));Na.operationalLayers&&(Ua=Ua.concat(Na.operationalLayers));Na=a.map(Ua,
function(bb){return bb&&bb.layerType});var Ta=[],Oa=[];Ua=!1;for(var Za=0;Za<Na.length;Za++){switch(Na[Za]){case "ArcGISFeatureLayer":-1===a.indexOf(Ta,"../layers/LabelClass")&&Ta.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===a.indexOf(Ta,"../layers/ArcGISImageServiceLayer")&&(Ta.push("../layers/ArcGISImageServiceLayer"),Oa.push("../layers/ImageServiceParameters"),Oa.push("../layers/MosaicRule"),Oa.push("../layers/RasterFunction"),Ta.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===a.indexOf(Ta,"../layers/ArcGISImageServiceVectorLayer")&&(Ta.push("../layers/ArcGISImageServiceVectorLayer"),Oa.push("../layers/ImageServiceParameters"),Oa.push("../layers/MosaicRule"),Oa.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===a.indexOf(Ta,"../layers/ArcGISDynamicMapServiceLayer")&&(Ta.push("../layers/ArcGISDynamicMapServiceLayer"),Oa.push("../layers/DynamicLayerInfo"),Oa.push("../layers/ImageParameters"),
Oa.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===a.indexOf(Ta,"../layers/StreamLayer")&&Ta.push("../layers/StreamLayer");-1===a.indexOf(Ta,"../layers/LabelClass")&&Ta.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===a.indexOf(Ta,"../virtualearth/VETiledLayer")&&Ta.push("../virtualearth/VETiledLayer");break;case "CSV":-1===a.indexOf(Ta,"../layers/CSVLayer")&&(Ta.push("../layers/CSVLayer"),Oa.push("./csv"));break;case "GeoRSS":-1===
a.indexOf(Ta,"../layers/GeoRSSLayer")&&Ta.push("../layers/GeoRSSLayer");break;case "KML":-1===a.indexOf(Ta,"../layers/KMLLayer")&&Ta.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===a.indexOf(Ta,"../layers/OpenStreetMapLayer")&&Ta.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===a.indexOf(Ta,"../layers/VectorTileLayer")&&Ta.push("../layers/VectorTileLayer");-1===a.indexOf(Oa,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Oa.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");
break;case "WebTiledLayer":-1===a.indexOf(Ta,"../layers/WebTiledLayer")&&(Ta.push("../layers/WebTiledLayer"),Oa.push("../layers/TileInfo"));break;case "WFS":-1===a.indexOf(Ta,"../layers/WFSLayer")&&Ta.push("../layers/WFSLayer");break;case "WMS":-1===a.indexOf(Ta,"../layers/WMSLayer")&&(Ta.push("../layers/WMSLayer"),Oa.push("../layers/WMSLayerInfo"));break;default:Ua=!0}if(Ua)break}Ua&&(Ta=Yb,Oa=xc);Ta.length?D(Ta,function(){Pa(Ta,arguments);Oa.length?D(Oa,function(){Pa(Oa,arguments);Ka.resolve()}):
Ka.resolve()}):Ka.resolve();return Ka}function nb(ja){ja=ja.itemData;var Sa=function(Ka,Na){"GroupLayer"===Ka.layerType?a.forEach(Ka.layers,function(Ua){Ua.visibility=!1===Ka.visibility?!1:Ua.visibility;Ua.opacity=n.isDefined(Ka.opacity)?n.isDefined(Ua.opacity)?Ua.opacity*Ka.opacity:Ka.opacity:Ua.opacity;Sa(Ua,Na)}):Na.push(Ka)},Pa=[];a.forEach(ja.operationalLayers,function(Ka){Sa(Ka,Pa)});ja.operationalLayers=Pa}function yb(ja,Sa,Pa,Ka){nb(Ka);var Na=Ka.itemData;Na.baseMap&&Na.baseMap.baseMapLayers&&
Na.baseMap.baseMapLayers.length&&(Na.baseMap.baseMapLayers[0].firstLayer=!0);var Ua=Sa.layerMixins,Ta=Ua&&Ua.length;if(Ta){var Oa=function(Za){for(var bb=0;bb<Ta;bb++){var cb=Ua[bb];if(cb.mixin)if(cb.hasOwnProperty("id")){if(Za.id===cb.id){B.mixin(Za,cb.mixin);break}}else if(Za.url===cb.url){B.mixin(Za,cb.mixin);break}}};a.forEach(Na.baseMap&&Na.baseMap.baseMapLayers,Oa);a.forEach(Na.operationalLayers,Oa)}Cb(Ka,Sa).then(function(){return ea(Ka,Sa)}).then(function(){return da(Ka,Sa)}).then(function(Za){var bb=
Za[0],cb=Za[1];if(bb.itemData.operationalLayers&&0!==bb.itemData.operationalLayers.length){var jb=new h,$a=bb.itemData.baseMap.baseMapLayers.slice(),kb=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return!mb.isReference});Za={item:bb.item,itemData:{baseMap:{baseMapLayers:kb},background:B.clone(bb.itemData.background)}};bb.itemData.baseMap.baseMapLayers=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return mb.isReference});M(Za,cb).addCallback(function(mb){ua(mb.itemData,cb).addCallback(B.hitch(null,
rb,mb,ja,cb,jb))});jb.then(function(mb){M(bb,cb).addCallback(function(ob){ua(ob.itemData,cb,mb.map.spatialReference,kb,mb.map).addCallback(function(Ub){ob.itemData.baseMap.baseMapLayers=$a;rb(ob,mb,cb,Pa,Ub)})})},B.hitch(Pa,Pa.errback))}else M(bb,cb).addCallback(function(mb){ua(mb.itemData,cb).addCallback(B.hitch(null,rb,mb,ja,cb,Pa))})})}function Fb(ja,Sa){"undefined"===typeof Sa&&(Sa=!0);Mb._arcgisUrl&&0<Mb._arcgisUrl.length&&(Mb.arcgisUrl=Mb._arcgisUrl);var Pa={},Ka=new h;t({url:Mb.arcgisUrl+"/"+
ja,content:{f:"json"},callbackParamName:"callback",load:function(Na){Pa.item=Na;Sa?t({url:Mb.arcgisUrl+"/"+ja+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Ua){Pa.itemData=Ua;Ka.callback(Pa)},error:function(Ua){Ka.errback(Ua)}}):Ka.callback(Pa)},error:function(Na){Ka.errback(Na)}});return Ka}var gc,Sb,Kb,uc,Ib,dc,hc,Zb,vc,ic,jc,Ac,wc,Ec,Nc,Fc,kc,ac,Gc,ec,Oc,Vb,lc,Xb,Yb="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
xc="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var Mb={arcgisUrl:y.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Fb,createMap:function(ja,Sa,Pa){var Ka=new h;Pa=Pa||{};var Na=Pa.infoTemplateClass;Pa._clazz=Na&&(B.isObject(Na)?Na:
B.getObject(Na))||F;B.isString(ja)?Fb(ja).addCallback(B.hitch(null,yb,Sa,Pa,Ka)).addErrback(B.hitch(Ka,Ka.errback)):yb(Sa,Pa,Ka,ja);Ka.addCallback(function(Ua){var Ta=Ua.map;Ta&&(Ta.tables=B.getObject("itemInfo.itemData.tables",!1,Ua)||[])});return Ka},getLayerList:function(ja){return ja&&ja.itemInfo&&ja.itemInfo.itemData?tb(ja.itemInfo.itemData):[]},getLegendLayers:function(ja){return ja&&ja.itemInfo&&ja.itemInfo.itemData?Ab(ja.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:M,_getItemData:ba,
_getBingKey:S,_portalUrlResponse:Z,_portalUrlFailure:ka,_processFSItemProperties:X,_processSSItemProperties:aa,_getLayers:ua,_preBuildLayerObjects:Ya,_buildLayerObjects:Ja,_preCreateMap:rb,_getMapSR:fa,_createMap:lb,_addSelectionLayers:Wa,_createSelectionFeatureLayers:Da,_getServiceInfo:Y,_getFeatureCollectionItem:la,_mergeFeatureCollectionItem:U,_projectFeatureCollection:ia,_getLayersInfo:La,_initLayer:Ha,_loadAsCached:ya,_loadAsDynamic:Ba,_processPopups:Ea,_onLayersAddResult:Va,_sameSpatialReferenceAsBasemap:qa,
_sameTilingSchemeAsBasemap:T,_showPopup:eb,_calculateClickTolerance:Ma,_getVisibleFeatureLayers:za,_updateLayerScaleInfo:Fa,_checkUrl:ma,_isHostedService:Ga,_isAgolService:na,_getLegendLayers:Ab};B.setObject("arcgis.utils",Mb,d);return Mb})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u){var C={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},E={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},F=c.connect,G=c.disconnect,H=d.create,J=m.set,I=h.hitch,R=q.getMarginBox,O=B.deprecated,P=h.mixin,L=0;B=a(A,{declaredClass:"esri.Map",constructor:function(K,Q){Q=Q||{};P(this,{_slider:null,_navDiv:null,_mapParams:P({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},Q)});P(this,{isMapNavigation:null!=Q.isMapNavigation?Q.isMapNavigation:!0,isDoubleClickZoom:null!=Q.isDoubleClickZoom?Q.isDoubleClickZoom:!0,isClickRecenter:null!=Q.isClickRecenter?Q.isClickRecenter:!0,isPan:null!=Q.isPan?Q.isPan:!0,isRubberBandZoom:null!=Q.isRubberBandZoom?Q.isRubberBandZoom:!0,isPinchZoom:null!=Q.isPinchZoom?Q.isPinchZoom:!0,isKeyboardNavigation:null!=Q.isKeyboardNavigation?Q.isKeyboardNavigation:!0,isScrollWheel:null!=
Q.isScrollWheel?Q.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});h.isFunction(z._css)&&(z._css=z._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var W=y("esri-transforms")&&y("esri-transitions");this.navigationMode=this._mapParams.navigationMode||W&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||W||(this.navigationMode="classic");this.fadeOnZoom=x.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=Q&&Q.smartNavigation;if(!(x.isDefined(this.smartNavigation)||!y("mac")||y("esri-touch")||y("esri-pointer")||3.5>=y("ff"))){var ba=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);ba&&x.isDefined(ba[1])&&x.isDefined(ba[3])&&(W=parseInt(ba[1],10),ba=parseInt(ba[3],10),this.smartNavigation=10<W||10===W&&6<=
ba)}this.showAttribution=x.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=F(this,"onLoad",this,"_onLoadInitNavsHandler");var S=H("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(W=h.getObject("esri.dijit.Attribution",!1))this._initAttribution(W,S);else{var X=L++,aa=this;this._rids&&this._rids.push(X);D(["./dijit/Attribution"],function(M){var da=aa._rids?g.indexOf(aa._rids,X):
-1;-1!==da&&(aa._rids.splice(da,1),aa._initAttribution(M,S))})}this._mapParams.logo&&(W={},6===y("ie")&&(W.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+D.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:W,tabIndex:"0",title:"Esri"},S),this._setLogoSize(),this._onMapResizeLogo_connect=F(this,"onResize",this,"_setLogoSize"),this._ogol_connect=F(this._ogol,n,this,"_openLogoLink"));this.navigationManager=new v(this);
Q&&Q.basemap&&(this._onLoadFix=!0,this.setBasemap(Q.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)W=this._getEnclosingResizableWidget(this.container)||window,ba=this.resize,this._rszSignal=l.pausable(W,"resize",ba),this._oriSignal=l.pausable(window,"orientationchange",ba),r.after(W,"resize",ba,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(K){var Q=
t.getEnclosingWidget(K);return Q?Q.resize?Q:this._getEnclosingResizableWidget(K.parentNode):Q},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(b.remove(this._ogol,"logo-med"),b.add(this._ogol,"logo-sm")):(b.remove(this._ogol,"logo-sm"),b.add(this._ogol,"logo-med")))},_initAttribution:function(K,Q){var W=H("span",{"class":"esriAttribution"},Q,"first");J(W,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(F(W,n,function(){b.contains(this,
"esriAttributionOpen")?b.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&b.add(this,"esriAttributionOpen")}));this.attribution=new K({map:this},W)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var K=this._slider;K&&K.destroy&&!K._destroyed&&K.destroy();K=this._navDiv;var Q=this.attribution;K&&d.destroy(K);Q&&Q.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);g.forEach(this._connects,G);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(K){var Q=this.getLevel();return!this.__tileInfo||!(Q===this.getMinZoom()&&0>K||Q===this.getMaxZoom()&&0<K)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var K=-1!==this._getSliderClass(!0).indexOf("Horizontal");K=[K?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",K?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",K?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(g.some(K,function(ba){return!h.getObject(ba,!1)})){K=g.map(K,function(ba){return ba.replace(/\./g,"/")});var Q=L++,W=this;this._rids&&
this._rids.push(Q);D(K,function(){var ba=W._rids?g.indexOf(W._rids,Q):-1;-1!==ba&&(W._rids.splice(ba,1),W._createSlider.apply(W,arguments))})}else K=g.map(K,function(ba){return h.getObject(ba,!1)}),this._createSlider.apply(this,K)}G(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var K,Q=b.add,W=this.id;this._navDiv=H("div",{id:W+"_navdiv"},this.root);Q(this._navDiv,"navDiv");var ba=this.width/2,S=this.height/2;for(K in C){var X=C[K];var aa=H("div",{id:W+"_pan_"+K},this._navDiv);
Q(aa,"fixedPan "+X);if("up"===K||"down"===K){var M=parseInt(R(aa).w,10)/2;J(aa,{left:ba-M+"px",zIndex:30})}else M=parseInt(R(aa).h,10)/2,J(aa,{top:S-M+"px",zIndex:30});this._connects.push(F(aa,"onclick",I(this,this[X])))}this._onMapResizeNavHandler_connect=F(this,"onResize",this,"_onMapResizeNavHandler");for(K in E)X=E[K],aa=H("div",{id:W+"_pan_"+K,style:{zIndex:30}},this._navDiv),Q(aa,"fixedPan "+X),this._connects.push(F(aa,"onclick",I(this,this[X])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(K,
Q,W){K=this.id;Q/=2;W/=2;var ba=k.byId,S;for(S in C){var X=ba(K+"_pan_"+S);if("up"===S||"down"===S){var aa=parseInt(R(X).w,10)/2;J(X,"left",Q-aa+"px")}else aa=parseInt(R(X).h,10)/2,J(X,"top",W-aa+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var K=this._slider=H("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),Q=H("div",{"class":"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},K),W=H("div",{"class":"esriSimpleSliderDecrementButton",
tabIndex:"0",role:"button"},K);this._addZoomButtonTooltips(Q,W);this._incButton=Q;this._decButton=W;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var ba=u.widgets.zoomSlider;this._addZoomButtonIcon(Q,"+",ba.zoomIn);this._addZoomButtonIcon(W,"\x26minus;",ba.zoomOut);8>y("ie")&&b.add(W,"dj_ie67Fix");this._connects.push(F(Q,n,this,this._simpleSliderChangeHandler));this._connects.push(F(W,n,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(F(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>y("ie")&&k.setSelectable(K,!1);this.root.appendChild(K);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(K){e.stop(K);K=-1!==K.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:K?1:-1})},_simpleSliderZoomHandler:function(K,Q,W,ba){var S;K=this._incButton;Q=this._decButton;-1<ba&&ba===this.getMaxZoom()?S=K:-1<ba&&ba===this.getMinZoom()&&(S=Q);S?(b.add(S,"esriSimpleSliderDisabledButton"),b.remove(S===K?
Q:K,"esriSimpleSliderDisabledButton")):(b.remove(K,"esriSimpleSliderDisabledButton"),b.remove(Q,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(K){K=K?"Large":"Simple";var Q=this._mapParams.sliderOrientation,W=this._mapParams.sliderPosition||"";Q=Q&&"horizontal"===Q.toLowerCase()?"esri"+K+"SliderHorizontal":"esri"+K+"SliderVertical";if(W)switch(W.toLowerCase()){case "top-left":W="esri"+K+"SliderTL";break;case "top-right":W="esri"+K+"SliderTR";break;case "bottom-left":W="esri"+K+"SliderBL";
break;case "bottom-right":W="esri"+K+"SliderBR"}return"esri"+K+"Slider "+Q+" "+W},_addZoomButtonIcon:function(K,Q,W){d.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:Q},K);d.create("span",{"class":"esriIconFallbackText",innerHTML:W},K)},_addZoomButtonTooltips:function(K,Q){var W=u.widgets.zoomSlider;f.set(K,"title",W.zoomIn);f.set(Q,"title",W.zoomOut)},_createSlider:function(K,Q,W){if(this._mapParams.slider){var ba=H("div",{id:this.id+"_zoom_slider"},this.root),S=w.defaults.map,
X=this._getSliderClass(!0),aa=-1!==X.indexOf("Horizontal"),M=this.getNumLevels();if(0<M){var da,ea,Z=this._mapParams.sliderLabels,ka=!!Z,va=!1!==Z;if(va){var Ea=aa?"bottomDecoration":"rightDecoration";if(!Z)for(Z=[],S=0;S<M;S++)Z[S]="";g.forEach([{"class":"esriLargeSliderTicks",container:Ea,count:M,dijitClass:Q},{"class":ka&&"esriLargeSliderLabels",container:Ea,count:M,labels:Z,dijitClass:W}],function(na){var ma=H("div"),ya=na.dijitClass;delete na.dijitClass;ba.appendChild(ma);ya===Q?da=new ya(na,
ma):ea=new ya(na,ma)})}K=this._slider=new K({id:ba.id,"class":X,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:M,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},ba);K.startup();va&&(da.startup(),ea.startup());this._slider_connect=F(K,"onChange",this,"_onSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(F(K._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{K=this._slider=
new K({id:ba.id,"class":X,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:S.sliderChangeImmediate,style:"height:50px; z-index:30;"},ba);W=K.domNode.firstChild.childNodes;for(S=1;3>=S;S++)J(W[S],"visibility","hidden");K.startup();this._slider_connect=F(K,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}S=K.incrementButton;W=K.decrementButton;aa?this._addZoomButtonTooltips(S,W):this._addZoomButtonTooltips(W,
S);S.style.outline="none";W.style.outline="none";K.sliderHandle.style.outline="none";K._onKeyPress=function(){};if(aa=K._movable){var Ga=aa.onMouseDown;aa.onMouseDown=function(na){9>y("ie")&&1!==na.button||Ga.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);this._slider_connect=F(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=F(this._slider._movable,"onMoveStop",this,
"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(K){this._extentUtil({targetLevel:K})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(K){this.setLevel(K)},_updateSliderValue:function(K,Q){G(this._slider_connect);var W=this._slider,ba=W._onChangeActive;W._onChangeActive=!1;W.set("value",K);W._onChangeActive=ba;this._slider_connect=F(W,"onChange",this,Q)},_onExtentChangeSliderHandler:function(K,Q,W,ba){G(this._slidermovestop_connect);
this._updateSliderValue(ba.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(K){this._extentUtil({numLevels:0<K?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(K){window.open(w.defaults.map.logoLink,"_blank");e.stop(K)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=
!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(K){if(this.isMapNavigation&&this["is"+K])this.navigationManager["enable"+K]();else this.navigationManager["disable"+K]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(O(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(O(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(J(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(K){K.graphic||(K.graphic=this.syncHitTestForWebGL(K))}});return z.Map=B})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O,P,L,K,Q,W,ba,S,X,aa,M,da,ea,Z,ka,va){function Ea(U,ia){var ua=U.lods;ua.sort(function(La,Wa){return La.scale>Wa.scale?-1:La.scale<Wa.scale?1:0});var wa=[];ua=l.filter(ua,function(La){if(-1===qa(wa,La.scale))return wa.push(La.scale),!0});var Fa=ia.lods=[],Da;l.forEach(ua,function(La,Wa){Da=Fa[Wa]=new M(La);Da.level=Wa});ia.tileInfo=new aa(T(U,{lods:Fa}))}var Ga,na=ba.toMapPoint,ma=ba.toScreenPoint,ya=h.connect,za=h.disconnect,
Ba=e.hitch,ha=n.set,qa=l.indexOf,T=e.mixin,Ha=0,Ja=x.defaults.map,fa=Ja.layerNamePrefix,Ya=Ja.graphicsLayerNamePrefix,Xa=new RegExp("^"+fa+"(\\d+)$"),Ca=new RegExp("^"+Ya+"(\\d+)$"),Y=function(){},la=0,sa=ka.isWebGLEnabled();c=c([u,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:sa,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(U,ia){ia=ia||{};this.registerConnectEvents();T(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var ua=this.container=f.byId(U),wa=this.id=b.get(ua,"id")||z.getUniqueId(this.declaredClass);d.add(ua,"map");
var Fa=m.getContentBox(ua),Da=d.add,La=q.create;this.position=new P(0,0);this._reposition();var Wa=this.width=0<Fa.w?Fa.w:Ja.width,Va=this.height=0<Fa.h?Fa.h:Ja.height,Ma=this.root=La("div",{id:wa+"_root",style:{width:Wa+"px",height:Va+"px",direction:"ltr"}});Da(Ma,"esriMapContainer");Fa=this.__container=La("div",{id:wa+"_container"},Ma);ha(Fa,"position","absolute");Da(Fa,"esriMapContainer");ua.appendChild(Ma);ua=this._params=T({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,
showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},ia);this.setWebGLEnabled(null!=ua.webglEnabled?ua.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ua.maxWebGLContexts?ua.maxWebGLContexts:-1;this.wrapAround180=ua.wrapAround180;this.optimizePanAnimation=ua.optimizePanAnimation;this.setBackgroundColor(ua.backgroundColor);v.isDefined(ua.resizeDelay)&&(this.resizeDelay=ua.resizeDelay);ua.lods&&(Ea({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ua.lods},ua),this.__tileInfo=ua.tileInfo);this.extent=ua.extent;this._extentUtil({mapCenter:ua.center,targetLevel:ua.zoom,targetScale:ua.scale});this.__visibleRect=new K(0,0,Wa,Va);this.__visibleDelta=new K(0,0,Wa,Va);wa=this._layersDiv=La("div",{id:wa+"_layers"});Da(wa,"esriMapLayers");Fa.appendChild(wa);this._zoomAnimDiv=La("div",{style:{position:"absolute"}});ua.infoWindow?this.infoWindow=ua.infoWindow:(Da=this.infoWindow=
new va(ua.popupOptions,La("div")),Da.startup(),Da._ootb=!0,ha(Da.domNode,"zIndex",40));if(ua.showLabels){var eb=this;D(["./layers/LabelLayer"],function(ib){Ga=ib;eb._createLabelLayer()});this.on("load",function(){eb._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ua.showInfoWindowOnClick});this._zoomStartHandler=Ba(this,this._zoomStartHandler);this._zoomingHandler=Ba(this,this._zoomingHandler);this._zoomEndHandler=Ba(this,this._zoomEndHandler);this._panningHandler=
Ba(this,this._panningHandler);this._panEndHandler=Ba(this,this._panEndHandler);this._endTranslate=Ba(this,this._endTranslate);this._timedResize=Ba(this,this._timedResize);this._execResize=Ba(this,this._execResize);this._processLabelLayers=Ba(this,this._processLabelLayers);this._updateLabelLayers=Ba(this,this._updateLabelLayers);this.resize=Ba(this,this.resize);k.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(U){return D.toAbsMid?D.toAbsMid(U):B.id.replace(/\/[^\/]*$/ig,"/")+U},_cleanUp:function(){var U=
this.infoWindow;U&&(U._ootb&&U.destroy?U.destroy():U.unsetMap(this),delete this.infoWindow);za(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");q.destroy(this.root);this.root=null},_addLayer:function(U,ia,ua){if(U.id){var wa=U.id.match(U instanceof X?Ca:Xa);wa&&wa[1]&&(wa=Number(wa[1]),Ha<=wa&&(Ha=wa+1))}var Fa=U.id||(U instanceof X?Ya:fa)+Ha++;U.id=Fa;this._layers[Fa]=U;U._isRefLayer="top"===ua;ua=!v.isDefined(ua)||0>ua||ua>ia.length||"top"===ua?ia.length:ua;var Da;if(!U._isRefLayer)for(;(Da=
this.getLayer(ia[ua-1]))&&Da._isRefLayer;)ua--;if(wa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===ua&&(ia===this.layerIds||ia===this.graphicsLayerIds))this._firstLayerId=Fa;ia.splice(ua,0,Fa);var La=Ba(this,this._addLayerHandler),Wa=this;ua=this._connects;Da=function(){U.loaded?Wa._onLoadFix?(Wa._onLoadFix=!1,setTimeout(function(){La(U)},0)):La(U):(Wa["_"+Fa+"_addtoken_load"]=ya(U,"onLoad",Wa,"_addLayerHandler"),Wa["_"+Fa+"_addtoken_err"]=ya(U,"onError",Wa,function(Va){La(U,Va,ia)}))};
this.loaded||wa||U.loaded&&-1===qa(this.graphicsLayerIds,Fa)?Da():ua.push(ya(this,"onLoad",Da));return U},_forgetLayer:function(U){U=U.id;za(this["_"+U+"_addtoken_load"]);za(this["_"+U+"_addtoken_err"]);var ia=this._layerAddPromises[U];ia&&(delete this._layerAddPromises[U],ia.cancel())},_addLayerHandler:function(U,ia,ua){ia?this._attachLayerToMap(U,ia,ua):U._prepareToAttach?(this._layerAddPromises[U.id]=U._prepareToAttach(this)).always(e.hitch(this,function(wa){wa&&"cancel"===wa.dojoType||this._attachLayerToMap(U,
null,ua)})):U.declaredClass&&(-1<U.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<U.declaredClass.toLowerCase().indexOf("rasterxlayer")&&U.useWebGL)&&!this.isWebGLContextAvailable()?(ia=Error("Too many WebGL contexts. Unable to add the layer: ",U.url),this._attachLayerToMap(U,ia,this.layerIds)):this._attachLayerToMap(U,ia,ua)},_attachLayerToMap:function(U,ia,ua){var wa=this.id,Fa=U.id,Da=qa(U instanceof X?this.graphicsLayerIds:this.layerIds,Fa),La=Da,Wa=!1,Va=this._params;this._forgetLayer(U);
if(ia)delete this._layers[Fa],-1!==Da&&(ua.splice(Da,1),this.onLayerAddResult(U,ia));else{-1===Da&&(Da=qa(this._internalLayerIds,Fa),La=20+Da,Wa=!0);if(Fa===this._firstLayerId){ia=U.spatialReference;ua=this.extent&&this.extent.spatialReference;!ua||ua.equals(ia)||!U.tileInfo&&U.url||(ua=null);ua=this.spatialReference=ua||ia;this.wrapAround180=this.wrapAround180&&ua&&ua._isWrappable()?!0:!1;U.tileInfo&&(this.__tileInfo?(ia=this.__tileInfo.lods,this.__tileInfo=T({},U.tileInfo),this.__tileInfo.lods=
ia):(Ea(T({},U.tileInfo),Va),this.__tileInfo=Va.tileInfo));if(this.wrapAround180){ia=this.__tileInfo;ua=ua._getInfo();if(!ia||Math.abs(ua.origin[0]-ia.origin.x)>ua.dx)this.wrapAround180=!1;this.wrapAround180&&ia&&F._addFrameInfo(ia,ua)}Va.units=U.units;if((ia=this.__tileInfo&&this.__tileInfo.lods)&&ia.length){ua=Va.minScale;Da=Va.maxScale;var Ma=-1,eb=-1,ib=!1,lb=!1,rb;for(rb=0;rb<ia.length;rb++)0<ua&&!ib&&ua>=ia[rb].scale&&(Ma=ia[rb].level,ib=!0),0<Da&&!lb&&Da>=ia[rb].scale&&(eb=0<rb?ia[rb-1].level:
-1,lb=!0);-1===Va.minZoom&&(Va.minZoom=0===ua?ia[0].level:Ma);-1===Va.maxZoom&&(Va.maxZoom=0===Da?ia[ia.length-1].level:eb);for(rb=0;rb<ia.length;rb++)Va.minZoom===ia[rb].level&&(Va.minScale=ia[rb].scale,this._minResolution=ia[rb].resolution),Va.maxZoom===ia[rb].level&&(Va.maxScale=ia[rb].scale,this._maxResolution=ia[rb].resolution)}else Va.minZoom=Va.maxZoom=Va.zoom=-1}U instanceof X?(this._gc||(this._gc=new X._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=wa+"_gc"),this._attachGraphicsLayer(U).id=
wa+"_"+Fa):(La=U._setMap(this,this._layersDiv,La,this.__LOD),La.id=wa+"_"+Fa,this._layerDivs[Fa]=La,this._reorderLayers(this.layerIds),Wa||-1===U.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(U));Fa===this._firstLayerId&&(this.graphics=new X({id:wa+"_graphics",displayOnPan:Va.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(U===this.graphics){ua=this._layers[this._firstLayerId];wa=Va.zoom;La=Va.scale;ia=Va.center;ua=ua.initialExtent||ua.fullExtent;this._firstLayerId=
null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&ua&&(ia&&(ia=this._convertGeometry(ua,ia)),ia&&(ua=ua.centerAt(ia),ia=null));if(ia=this.extent||ua&&new L(ua.toJson()))-1<wa?ia=this.__getExtentForLevel(wa,null,ia).extent:0<La&&(ia=W.getExtentForScale(this,La,ia));if(!ia)return;Va=this._fixExtent(ia,Va.fitExtent);this.extent=Va.extent;this.__LOD=Va.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Wa||
(this.onLayerAdd(U),this.onLayerAddResult(U));za(this[Fa+"_addLayerHandler_connect"])}},_convertGeometry:function(U,ia){var ua=U&&U.spatialReference,wa=ia&&ia.spatialReference;ua&&wa&&!ua.equals(wa)&&(ua._canProject(wa)?ua.isWebMercator()?ia=S.geographicToWebMercator(ia):4326===ua.wkid&&(ia=S.webMercatorToGeographic(ia,!0)):ia=null);return ia},_attachGraphicsLayer:function(U){var ia=U.id;U=U._setMap(this,this._gc._surface);this._layerDivs[ia]=U;this._reorderLayers(this.graphicsLayerIds);return U},
_detachGraphicsLayer:function(U){U.loaded&&U.getMap()&&U._unsetMap(this,this._gc._surface)},_reorderLayers:function(U){var ia=this.onLayerReorder,ua=q.place,wa=this._layerDivs,Fa=this._layers,Da=this._gc?this._gc._surface.getEventSource():null;if(U===this.graphicsLayerIds)l.forEach(U,function(eb,ib){var lb=wa[eb],rb=Fa[eb];lb&&(this._gc._reorderLayer(rb,lb,ib),ia(rb,ib))},this);else{var La=this.graphics,Wa=La?La.id:null,Va=this._layersDiv,Ma;l.forEach(U,function(eb,ib){Ma=wa[eb];eb!==Wa&&Ma&&(ua(Ma,
Va,ib),ia(Fa[eb],ib))});this._mapImageLyr&&this._placeMapImageLyr();Da&&(Da=9>t("ie")?Da.parentNode:Da,ua(Da,Da.parentNode,"last"))}this.onLayersReordered([].concat(U))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(U){var ia=parseFloat(U.left),ua=parseFloat(U.top);U=new L(ia,ua-parseFloat(U.height),ia+parseFloat(U.width),ua,this.spatialReference);ia=this.extent.getWidth()/U.getWidth();this.__zoom(U,ia,this._zoomAnimDiv.anchor)},
_zoomEndHandler:function(){var U=this._zoomAnimDiv,ia=U.extent,ua=this.extent.getWidth()/ia.getWidth(),wa=U.anchor,Fa=U.newLod,Da=U.levelChange;U.extent=U.anchor=U.levelChange=U.startingExtent=U.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(ia,ua,wa,Fa,Da)},_panningHandler:function(U){if(isNaN(parseFloat(U.left))||isNaN(parseFloat(U.top))){var ia=Math.round,ua=this._panAnim.node;U.left=-1*(this._delta.x-ia(this.width/2))+"px";U.top=-1*(this._delta.y-ia(this.height/2))+"px";n.set(ua,"left",
U.left);n.set(ua,"top",U.top)}U=new P(parseFloat(U.left),parseFloat(U.top));ia=this.toMap(U);this.onPan(this.extent.offset(this.extent.xmin-ia.x,this.extent.ymax-ia.y),U)},_panEndHandler:function(U){this.__panning=!1;var ia=Math.round;U=new P(-ia(parseFloat(U.style.left)),-ia(parseFloat(U.style.top)));ia=U.x;var ua=U.y,wa=this.__visibleRect,Fa=this.__visibleDelta;wa.x+=-ia;wa.y+=-ua;Fa.x+=-ia;Fa.y+=-ua;ha(this._zoomAnimDiv,{left:"0px",top:"0px"});wa=this.extent;Fa=this._ratioW;var Da=this._ratioH;
wa=new L(wa.xmin+ia/Fa,wa.ymin-ua/Da,wa.xmax+ia/Fa,wa.ymax-ua/Da,this.spatialReference);U.setX(-U.x);U.setY(-U.y);this._delta=this._panAnim=null;this._updateExtent(wa);this.onPanEnd(wa,U);this._fireExtChg([wa,U,!1,this.__LOD])},_fixExtent:function(U,ia){for(var ua=this._reshapeExtent(U),wa=1.25;!0===ia&&(ua.extent.getWidth()<U.getWidth()||ua.extent.getHeight()<U.getHeight())&&0<ua.lod.level&&3>=wa;)ua=this._reshapeExtent(U.expand(wa)),wa+=.25;return ua},_getFrameWidth:function(){var U=-1,ia=this.spatialReference._getInfo();
this.__LOD?(ia=this.__LOD._frameInfo)&&(U=ia[3]):ia&&(U=Math.round(2*ia.valid[1]/(this.extent.getWidth()/this.width)));return U},_fixAspectRatio:function(U){var ia=U.getWidth(),ua=U.getHeight(),wa=ia/ua,Fa=this.width/this.height,Da=0,La=0;this.width>this.height?ia>ua?Fa>wa?Da=ua*Fa-ia:La=ia/Fa-ua:Da=ua*Fa-ia:this.width<this.height?ia<ua?Fa>wa?Da=ua*Fa-ia:La=ia/Fa-ua:La=ia/Fa-ua:ia<ua?Da=ua-ia:ia>ua&&(La=ia/Fa-ua);Da&&(U.xmin-=Da/2,U.xmax+=Da/2);La&&(U.ymin-=La/2,U.ymax+=La/2);return U},_reshapeExtent:function(U){U=
this._fixAspectRatio(U);return this._getAdjustedExtent(U)},_getAdjustedExtent:function(U){if(this.__tileInfo)return F.getCandidateTileInfo(this,this.__tileInfo,U);var ia=W.getScale(this,U),ua=this.getMinScale(),wa=this.getMaxScale();!ua||ia<=ua?!wa||ia>=wa||(U=W.getExtentForScale(this,wa,U)):U=W.getExtentForScale(this,ua,U);return{extent:U}},_onBingLayerAdd:function(U){this["__"+U.id+"_vis_connect"]=h.connect(U,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(U.visible)},_onBingLayerRemove:function(U){h.disconnect(this["__"+
U.id+"_vis_connect"]);delete this["__"+U.id+"_vis_connect"];var ia=l.some(this.layerIds,function(ua){return(U=this._layers[ua])&&U.visible&&-1!==U.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(ia)},_toggleBingLogo:function(U){U&&!this._bingLogo?(U={left:this._mapParams&&this._mapParams.nav?"25px":""},6===t("ie")&&(U.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+D.toUrl("./images/map/bing-logo-lg.png")+"')"),U=this._bingLogo=
q.create("div",{style:U},this.root),d.add(U,"bingLogo-lg")):!U&&this._bingLogo&&(q.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(U,ia){var ua=this._zoomAnim,wa=this._panAnim;if(ua&&ua._active)ua.stop(),ua._fire("onEnd",[ua.node]);else if(wa&&wa._active){wa.stop();this._panAnim=null;wa=wa.curve.getValue(wa._getStep());ua=Math.round(parseFloat(wa.left));wa=Math.round(parseFloat(wa.top));var Fa=this.navigationManager._dragOrigin;this.__pan(ua,wa);Fa&&(Fa.x-=ua,Fa.y-=wa);return}this.__panning=
!0;this.onPanStart(this.extent,new P(U,ia))},__pan:function(U,ia){var ua=this.extent,wa=this._ratioW,Fa=this._ratioH;this.onPan(new L(ua.xmin-U/wa,ua.ymin+ia/Fa,ua.xmax-U/wa,ua.ymax+ia/Fa,this.spatialReference),new P(U,ia))},__panEnd:function(U,ia){var ua=this.__visibleRect,wa=this.__visibleDelta;ua.x+=U;ua.y+=ia;wa.x+=U;wa.y+=ia;ua=new P(U,ia);wa=this.extent;var Fa=this._ratioW,Da=this._ratioH;wa=new L(wa.xmin-U/Fa,wa.ymin+ia/Da,wa.xmax-U/Fa,wa.ymax+ia/Da,this.spatialReference);this.__panning=!1;
this._updateExtent(wa);this.onPanEnd(wa,ua);this._fireExtChg([wa,ua,!1,this.__LOD])},__zoomStart:function(U,ia){this.__zooming=!0;this.onZoomStart(U,1,ia,this.__LOD?this.__LOD.level:null)},__zoom:function(U,ia,ua){this.onZoom(U,ia,ua)},__zoomEnd:function(U,ia,ua,wa,Fa){ha(this._layersDiv,{left:"0px",top:"0px"});this._delta=new P(0,0);this.__visibleRect.x=this.__visibleRect.y=0;U=new L(U);this.__LOD=wa;this._ratioW=this.width/U.getWidth();this._ratioH=this.height/U.getHeight();var Da=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(U,Fa);this.onZoomEnd(U,ia,ua,wa?wa.level:null);this._fireExtChg([U,Da,Fa,wa])},_extentUtil:function(U,ia,ua,wa,Fa){var Da=new g,La=this.width,Wa=this.height;if(U){var Va=U.numLevels;var Ma=U.targetLevel;var eb=v.isDefined(Ma);var ib=U.factor;var lb=U.mapAnchor;var rb=U.screenAnchor;var sb=U.mapCenter;var tb=U.levelOrFactor;var Ab=U.targetScale;var Cb=v.isDefined(Ab)&&0<Ab}if(ia){var nb=ia.dx;var yb=ia.dy;sb=ia.mapCenter}e.isArray(sb)&&(sb=new O(sb));var Fb=
this._panAnim;ia=(U=this._stopAnim())?U.divExtent:this.extent;var gc=this.__tileInfo,Sb=this._params;if(!this.loaded){if(ua)ia&&(ua=this._convertGeometry(ia,ua)),ua&&(this.extent=ua,Sb.zoom=Sb.scale=-1,Sb.center=null);else if(sb||eb||Cb){if(sb)if(ia){if(sb=this._convertGeometry(ia,sb))this.extent=ia.centerAt(sb),Sb.center=null}else Sb.center=sb;eb&&-1<Ma?(Sb.zoom=Ma,Sb.scale=-1):Cb&&(Sb.scale=Ab,Sb.zoom=-1)}Da.resolve();return Da}if(sb&&(sb=this._convertGeometry(this,sb),!sb)||lb&&(lb=this._convertGeometry(this,
lb),!lb)||ua&&(ua=this._convertGeometry(this,ua),!ua))return Da.reject(),Da;Fb&&lb&&rb&&(lb=na(this.extent,La,Wa,rb));U&&lb&&rb&&(lb=na(U.divExtent,La,Wa,rb));if(eb)if(gc)Va=this.getMinZoom(),eb=this.getMaxZoom(),Ma<Va?Ma=Va:Ma>eb&&(Ma=eb),Va=Ma-(U?U.level:this.getLevel());else{Va=0<Ma?-1:1;var Kb=tb?Ma:null}if(!ua)if(v.isDefined(Va))gc?(La=U?U.level:this.getLevel(),La=this.__getExtentForLevel(La+Va,sb,ia).extent):(La=(U?U.end:this.extent).expand(Kb||(0<Va?.5*Va:2*-Va)),Kb&&sb&&(La=La.centerAt(sb))),
La&&(sb?ua=La:(nb=lb||ia.getCenter(),Wa=La.getWidth(),yb=La.getHeight(),La=nb.x>=ia.xmin&&nb.x<=ia.xmax?(nb.x-ia.xmin)/ia.getWidth():.5,ua=nb.y>=ia.ymin&&nb.y<=ia.ymax?(nb.y-ia.ymin)/ia.getHeight():.5,La=nb.x-La*Wa,nb=nb.y-ua*yb,ua=new L(La,nb,La+Wa,nb+yb,this.spatialReference)));else if(Cb)ua=W.getExtentForScale(this,Ab,ia);else if(v.isDefined(ib))ua=ia.expand(ib);else if(nb||yb)U?(ua=U.end,lb=ua.getCenter(),Kb=ma(ua,La,Wa,lb),Kb.x+=nb,Kb.y+=yb,Kb=na(ua,La,Wa,Kb),ua=ua.offset(Kb.x-lb.x,Kb.y-lb.y)):
(nb=new P(La/2+nb,Wa/2+yb),nb=na(ia,La,Wa,nb),Wa=ia.getWidth(),yb=ia.getHeight(),La=nb.x-Wa/2,nb=nb.y-yb/2,ua=new L(La,nb,La+Wa,nb+yb,this.spatialReference));ua||(sb?(ia=U?U.end:ia,Wa=ia.getWidth(),yb=ia.getHeight(),La=sb.x-Wa/2,nb=sb.y-yb/2,ua=new L(La,nb,La+Wa,nb+yb,this.spatialReference)):U&&(ua=U.end));ua?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,Y),this._extentDfd.reject()),this._extentDfd=Da,this.__setExtent(ua,null,rb,wa,U,Fa)):Da.reject();return Da},__setExtent:function(U,
ia,ua,wa,Fa,Da){try{if(this._firstLayerId)this.extent=U;else{var La=!0,Wa=this.spatialReference,Va=Fa?Fa.divExtent:this.extent,Ma=this._fixExtent(U,wa||!1);U=Ma.extent;var eb=U.getWidth(),ib=U.getHeight(),lb=Math.round;if(Va){var rb=lb(1E6*Va.getWidth()),sb=lb(1E6*eb),tb=lb(1E6*Va.getHeight()),Ab=lb(1E6*ib);La=rb!==sb||tb!==Ab}var Cb,nb=Fa&&Fa.rect,yb=Fa&&Fa.divExtent;if(Ja.zoomDuration&&La&&Va){yb=yb||new L(Va);nb=nb||{left:Va.xmin,top:Va.ymax,width:Va.getWidth(),height:Va.getHeight()};var Fb={left:U.xmin,
top:U.ymax,width:eb,height:ib};var gc=new O(U.xmin,U.ymax,Wa),Sb=new O(U.xmin,U.ymin,Wa),Kb=new O(this.extent.xmin,this.extent.ymax,Wa),uc=new O(this.extent.xmin,this.extent.ymin,Wa);(Cb=Q.getLineIntersection(Kb,gc,uc,Sb,Wa))||Fa||(La=!1)}this._ratioW=this.width/eb;this._ratioH=this.height/ib;var Ib=this._zoomAnimDiv;if(La)if(ha(this._layersDiv,{left:"0px",top:"0px"}),ia=new P(0,0),this.__visibleRect.x=this.__visibleRect.y=0,nb&&Fb){this._delta=ia;Ib.id="_zAD";Ib.startingExtent=yb;Ib.extent=U;Ib.levelChange=
La;Ib.newLod=Ma.lod;Ib.anchor=ua?ua:!Cb&&Fa?Fa.anchor:ma(this.extent,this.width,this.height,Cb);var dc=this.extent.getWidth()/U.getWidth();Ja.zoomAnimationThrottled&&1024<(1>dc?1/dc:dc)?(this.__zoomStart(yb,Ib.anchor),this.__zoom(yb,1,Ib.anchor),this._fireOnScale(1,Ib.anchor,!0),this.__zoomEnd(U,dc,Ib.anchor,Ma.lod,La)):(this._zoomAnim=C.resize({node:Ib,start:nb,end:Fb,duration:Ja.zoomDuration,rate:Ja.zoomRate,beforeBegin:Fa?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(dc,Ib.anchor,Da))}else this._updateExtent(U,La,Da),this._fireExtChg([this.extent,ia,La,this.__LOD=Ma.lod]);else if(!this.__panning)if(!1===this.loaded||Da)this._updateExtent(U,La,Da),this._fireExtChg([this.extent,ia,La,this.__LOD=Ma.lod]);else{this.__panning=!0;nb=(new K(0,0,this.width,this.height,this.spatialReference)).getCenter();nb.x=lb(nb.x);nb.y=lb(nb.y);var hc=this._delta=this.toScreen(U.getCenter()),Zb=Math.abs(nb.x-hc.x),vc=Math.abs(nb.y-hc.y);this.optimizePanAnimation&&
(Zb>2*this.width||vc>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(U,!1,Da),this.onPanEnd(this.extent,new P(0,0)),this._fireExtChg([this.extent,new P(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new P(0,0)),this._panAnim=C.slideTo({node:Ib,left:nb.x-hc.x,top:nb.y-hc.y,duration:Ja.panDuration,rate:Ja.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(ic){}},_fireOnScale:function(U,ia,ua){if("css-transforms"===this.navigationMode){var wa=this.__visibleDelta;this.onScale(w.scaleAt(U,{x:-1*(this.width/2-(ia.x-wa.x)),y:-1*(this.height/2-(ia.y-wa.y))}),ua)}},_stopAnim:function(){var U=this._zoomAnim,ia=this._panAnim;if(U&&U._active){U.stop();ia=U.curve.getValue(U._getStep());var ua=parseFloat(ia.left),wa=parseFloat(ia.top);U=U.node;return{anchor:U.anchor,start:U.startingExtent,end:U.extent,level:U.newLod&&U.newLod.level,
rect:ia,divExtent:new L(ua,wa-parseFloat(ia.height),ua+parseFloat(ia.width),wa,this.spatialReference)}}ia&&ia._active&&(ia.stop(),ia._fire("onEnd",[ia.node]))},__getExtentForLevel:function(U,ia,ua){var wa=this.__tileInfo;wa=wa&&wa.lods;U=v.isDefined(U)?U:0;ua=ua||this.extent;ia=ia||ua&&ua.getCenter();if(wa){if(ia){ua=this.getMinZoom();var Fa=this.getMaxZoom();U>Fa&&(U=Fa);U<ua&&(U=ua);U=wa[U];wa=this.width*U.resolution/2;ua=this.height*U.resolution/2;return{extent:new L(ia.x-wa,ia.y-ua,ia.x+wa,ia.y+
ua,ia.spatialReference),lod:U}}}else return ua?{extent:ua.expand(!U||1>U?1:U).centerAt(ia)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var U=--this._jobs;U?0>U&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(U,ia){this[U]&&this[U].apply(this,ia)},_updateExtent:function(U,ia,ua){this.extent=U;U=this.spatialReference;this._viewInfo={view:new R({viewingMode:"map",
scale:this.getScale()}),sr:U,version:ia?++la:la};(ia||ua)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var U=this.spatialReference;U&&(U.isWebMercator()?this.geographicExtent=S.webMercatorToGeographic(this._getAvailExtent(),!0):4326===U.wkid&&(this.geographicExtent=new L(this._getAvailExtent().toJson())))},_fireExtChg:function(U){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",U);if(U=this._extentDfd)delete this._extentDfd,
U.resolve()},attr:function(U,ia){var ua=this.container;ua&&(null==ia?ua.removeAttribute(U):ua.setAttribute(U,ia));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(U,ia,ua){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(U){ha(this.__container,"cursor",this.cursor=U)},setMapCursor:function(U){this.setCursor(this._cursor=U)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(U){U&&!U.declaredClass&&(U=new J(U));this.backgroundColor=U||null;var ia="";U&&(ia=9>t("ie")?U.toHex():"rgba("+U.toRgba().join(",")+")");n.set(this.root,{backgroundColor:ia})},setInfoWindow:function(U){var ia=this.infoWindow;
ia&&ia.unsetMap(this);this.infoWindow=U;this.loaded&&U&&U.setMap(this)},setInfoWindowOnClick:function(U){this._params.showInfoWindowOnClick=U;this.popupManager&&this.popupManager.set("enabled",U)},getInfoWindowAnchor:function(U){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(U)||"upperright"},toScreen:function(U,ia){return ma(this.extent,this.width,this.height,U,ia)},toMap:function(U){return na(this.extent,this.width,this.height,U)},addLayer:function(U,ia){U&&!this.getLayer(U.id)&&
this._addLayer(U,U instanceof X?this.graphicsLayerIds:this.layerIds,ia);return U},addLayers:function(U){var ia=[],ua=U.length,wa,Fa=U.length;var Da=h.connect(this,"onLayerAddResult",function(La,Wa){-1!==l.indexOf(U,La)&&(ua--,ia.push({layer:La,success:!Wa,error:Wa}),ua||(h.disconnect(Da),this.onLayersAddResult(ia)))});for(wa=0;wa<Fa;wa++)this.addLayer(U[wa]);return this},removeLayer:function(U,ia){var ua=U.id,wa=U instanceof X?this.graphicsLayerIds:this.layerIds,Fa=qa(wa,ua);0<=Fa&&(this._forgetLayer(U),
wa.splice(Fa,1),this.loaded||this._firstLayerId!==ua||(this._firstLayerId=null),U instanceof X?this._detachGraphicsLayer(U):U.loaded&&(U.getMap()&&U._unsetMap(this,this._layersDiv),-1!==U.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(U)),delete this._layers[ua],delete this._layerDivs[ua],ia||this._reorderLayers(wa),this.onLayerRemove(U))},removeAllLayers:function(){var U=this.layerIds,ia;for(ia=U.length-1;0<=ia;ia--)this.removeLayer(this._layers[U[ia]],1);U=this.graphicsLayerIds;
for(ia=U.length-1;0<=ia;ia--)this.removeLayer(this._layers[U[ia]],1);this.onLayersRemoved()},reorderLayer:function(U,ia){e.isString(U)&&(a.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),U=this.getLayer(U));var ua=U.id,wa=U instanceof X?this.graphicsLayerIds:this.layerIds;0>ia?ia=0:ia>=wa.length&&(ia=wa.length-1);var Fa=qa(wa,ua);-1!==Fa&&Fa!==ia&&(wa.splice(Fa,1),wa.splice(ia,0,ua),
this._reorderLayers(wa))},getLayer:function(U){return this._layers[U]},setWebGLEnabled:function(U){var ia=this.webglEnabled;this.webglEnabled=(U||!1)&&sa;if(ia!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ka.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(U){return-1!==l.indexOf(this._webglContextOwners,U)},acquireWebGLContext:function(U){return-1!==
l.indexOf(this._webglContextOwners,U)?!0:this.isWebGLContextAvailable()?(ka.acquireContext(U),this._webglContextOwners.push(U),!0):!1},releaseWebGLContext:function(U){var ia=l.indexOf(this._webglContextOwners,U);-1!==ia&&this._webglContextOwners.splice(ia,1);ka.releaseContext(U)},releaseAllWebGLContexts:function(){var U=this._webglContextOwners.slice(0);l.forEach(U,function(ia){this.releaseWebGLContext(ia)},this)},syncHitTestForWebGL:function(U){var ia,ua=U.screenPoint;U=this.graphicsLayerIds.slice(0).reverse();
l.some(U,function(wa){wa=this.getLayer(wa);wa.loaded&&!wa.suspended&&wa.hasWebGLSurface()&&(ia=wa._div.syncHitTest(ua.x,ua.y));return!!ia},this);return ia},setExtent:function(U,ia){U=new L(U.toJson());var ua=U.getWidth(),wa=U.getHeight();return 0===ua&&0===wa?this.centerAt(new O({x:U.xmin,y:U.ymin,spatialReference:U.spatialReference&&U.spatialReference.toJson()})):this._extentUtil(null,null,U,ia)},getTargetExtent:function(U){if(U)return U=new L(U.toJson()),0!==U.getWidth()&&0!==U.getHeight()&&(U=
(U=this._convertGeometry(this,U))&&this._fixExtent(U).extent),U},centerAt:function(U){return this._extentUtil(null,{mapCenter:U})},centerAndZoom:function(U,ia){return this._extentUtil({targetLevel:ia,mapCenter:U,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:W.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*W.getUnitValueForSR(this.spatialReference)},
getResolutionForPopup:function(){var U=this.getResolution(),ia=this.getResolutionInMeters(),ua=ia/16;return 10>=ua?0:U/ia*ua},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(U){return this._extentUtil({targetScale:U})},getLayersVisibleAtScale:function(U){var ia=[];(U=
U||this.getScale())&&l.forEach(this.layerIds.concat(this.graphicsLayerIds),function(ua){ua=this.getLayer(ua);ua.isVisibleAtScale(U)&&ia.push(ua)},this);return ia},getNumLevels:function(){var U=this.getMinZoom(),ia=this.getMaxZoom();return U===ia&&0>U?0:ia-U+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(U){if(-1<U)return this._extentUtil({targetLevel:U})},getZoom:function(){return this.getLevel()},setZoom:function(U){return this.setLevel(U)},getMinZoom:function(){return this._params.minZoom},
getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(U){if(e.isObject(U)){var ia=U;U=ia.title}else ia=A&&A[U];if(ia){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var ua=[],wa=0;l.forEach(ia.baseMapLayers||ia.layers,function(Da){var La={id:Da.id,displayLevels:Da.displayLevels,opacity:v.isDefined(Da.opacity)?Da.opacity:null,visible:v.isDefined(Da.visibility)?Da.visibility:null};if(La=this._createBaseLayerInstance(Da,La,U))ua.push(La),Da.isReference||
wa++},this);ua.length&&wa&&(this._basemapDfd=I(ua).otherwise(Ba(this,function(Da){this._basemapPending=!1;Da&&"cancel"===Da.dojoType&&l.forEach(ua,function(La){La.cancel()});throw Da;})).then(function(Da){var La=[],Wa=[];l.forEach(Da,function(Va){Va&&(Va.layerInfo&&La.push(Va.layerInfo),Va.layer&&Wa.push(Va.layer))});return{basemapName:U,infos:La,layers:Wa}}).then(Ba(this,this._waitForBaseLayers)).then(Ba(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{ia=
[];for(var Fa in A)ia.push(Fa)}},_createBaseLayerInstance:function(U,ia,ua){var wa=new g;if(U.type)switch(U.type){case "OpenStreetMap":wa.resolve({layerInfo:U,layer:new Z(ia)});break;case "VectorTile":D(["./layers/VectorTileLayer"],function(Da){Fa=G.normalize(U.url);wa.promise.isFulfilled()||wa.resolve({layerInfo:U,layer:new Da(Fa,ia)})});break;default:return null}else{var Fa=G.normalize(U.url);wa.resolve({layerInfo:U,layer:new da(Fa,ia)})}return wa.promise},_waitForBaseLayers:function(U){var ia=
new g(E._dfdCanceller);ia.promise.otherwise(function(wa){if(wa&&"cancel"===wa.dojoType){for(var Fa in ia._layerEvents)wa=ia._layerEvents[Fa],h.disconnect(wa[0]),h.disconnect(wa[1]);delete ia._layerEvents}});if(!this.loaded)return ia.resolve(U),ia.promise;var ua=function(wa){ia._pendingLayers--;wa=l.indexOf(U.layers,this);-1<wa&&(wa=ia._layerEvents[wa])&&(h.disconnect(wa[0]),h.disconnect(wa[1]));0>=ia._pendingLayers&&(delete ia._layerEvents,ia.isFulfilled()||ia.resolve(U))};ia._pendingLayers=0;ia._layerEvents=
{};l.forEach(U.layers,function(wa,Fa){wa&&ia._pendingLayers++});l.forEach(U.layers,function(wa,Fa){wa&&(wa.loaded?ua(wa):ia._layerEvents[Fa]=[h.connect(wa,"onLoad",wa,ua),h.connect(wa,"onError",wa,ua)])});return ia.promise},_setBasemap:function(U){var ia=U.layers,ua=U.infos,wa=0,Fa=!0;this._basemapPending=!1;this.loaded&&(l.forEach(ia,function(La,Wa){La.loaded&&(ua[Wa].isReference||wa++)}),Fa=wa);if(Fa){if(Fa=this._getBasemapLayerIds()){var Da={basemapName:this._basemap,infos:A&&A[this._basemap]&&
A[this._basemap].baseMapLayers};Da.basemapName||(l.forEach(Fa,function(La){if(this.getLayer(La)instanceof Z)return Da.basemapName="osm",Da.infos=A&&A.osm&&A.osm.baseMapLayers,!1},this),Da.basemapName||(Da=null))}this._removeBasemap(Fa);this._basemap=U.basemapName;this.basemapLayerIds=this._addBasemapLayers(ia,ua);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:U,previous:Da})}},_getBasemapLayerIds:function(){var U=[];l.forEach(this.layerIds,function(ia){ia=this.getLayer(ia);
ia._basemapGalleryLayerType&&U.push(ia.id)},this);return U},_addBasemapLayers:function(U,ia){var ua=[],wa=[],Fa=0;l.forEach(U,function(Da,La){ia[La].isReference?ua.push(Da):(Da._basemapGalleryLayerType="basemap",wa.push(Da.id),this.addLayer(Da,Fa++))},this);ua.length&&l.forEach(ua,function(Da){Da.attr("data-reference",!0);Da._basemapGalleryLayerType="reference";wa.push(Da.id);this.addLayer(Da,"top")},this);return wa},_removeBasemap:function(U){l.forEach(U,function(ia){(ia=this.getLayer(ia))&&this.removeLayer(ia)},
this)},getBasemap:function(){return this._basemap||""},translate:function(U,ia){U=U||0;ia=ia||0;if(!this._txTimer){this._tx=this._ty=0;var ua=this.toScreen(this.extent.getCenter());this.__panStart(ua.x,ua.y)}this._tx+=U;this._ty+=ia;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var U=this._tx,ia=this._ty;this._tx=this._ty=0;this.__panEnd(U,ia)},setTimeExtent:function(U){U=
(this.timeExtent=U)?new U.constructor(U.toJson()):null;this.onTimeExtentChange(U)},setTimeSlider:function(U){this.timeSlider&&(za(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);U&&(this.timeSlider=U,this.setTimeExtent(U.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=ya(U,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(U){if(this.visible!==U){this.visible=U;U||(this._display=this.container.style.display);this.container.style.display=
U?this._display:"none";if(this.autoResize){var ia=U?"resume":"pause";this._rszSignal[ia]();this._oriSignal[ia]()}U&&this.resize()}return this},resize:function(U){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===U?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();
this.autoResize&&this._startResizeTimer()},_resize:function(){var U=this.width,ia=this.height,ua=n.get(this.container,"display"),wa=m.getContentBox(this.container);if(!("none"===ua||0>=wa.w||0>=wa.h||U===wa.w&&ia===wa.h)){if(ua=this._zoomAnim||this._panAnim)ua.stop(),ua._fire("onEnd",[ua.node]);ha(this.root,{width:(this.width=wa.w)+"px",height:(this.height=wa.h)+"px"});wa=this.width;ua=this.height;this.attribution&&this.attribution.domNode&&n.set(this.attribution.domNode,"maxWidth",Math.floor(wa*
this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wa,ua);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wa,ua);var Fa=new K(this.extent);U=(new K(Fa.x,Fa.y,wa/U*Fa.width,ua/ia*Fa.height,this.spatialReference)).getExtent();this.onResize(U,wa,ua);this._extentUtil(null,null,U,null,!0)}},reposition:function(){var U=this.position,ia=U.x,ua=U.y;this._reposition();U=this.position;if(ia!==U.x||ua!==U.y)this.onReposition(U.x,
U.y)},_reposition:function(){var U=m.position(this.container,!0),ia=m.getPadBorderExtents(this.container);this.position.update(U.x+ia.l,U.y+ia.t)},_setClipRect:function(){delete this._clip;var U=7>=t("ie")||void 0===t("ie")&&7<=t("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var ia=this.width,ua=this.height,wa=this._getFrameWidth(),Fa=ia-wa;0<Fa&&(U=Fa/2,U="rect(0px,"+(U+wa)+"px,"+ua+"px,"+U+"px)",ua=this.extent.getWidth(),ia=wa/ia*ua,this._clip=[(ua-ia)/2,ia])}ha(this.__container,
"clip",U)},_getAvailExtent:function(){var U=this.extent,ia=this._clip;if(ia){if(!U._clip){var ua=new K(U);ua.width=ia[1];ua.x+=ia[0];U._clip=ua.getExtent()}return U._clip}return U},_fixedPan:function(U,ia){return this._extentUtil(null,{dx:U,dy:ia})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*
this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(U){U=U||{};if("esri.SnappingManager"===U.declaredClass)this.snappingManager=U;else{var ia=Ha++,ua=this;this._rids&&this._rids.push(ia);D(["./SnappingManager"],function(wa){var Fa=
ua._rids?l.indexOf(ua._rids,ia):-1;-1!==Fa&&(ua._rids.splice(Fa,1),ua.snappingManager=new wa(e.mixin({map:ua},U)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&Ga&&this.loaded&&(this._labels=new Ga({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==
this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),l.forEach(this.graphicsLayerIds,function(U){U=this.getLayer(U);"function"===typeof U.applyEdits?this._labels.addFeatureLayer(U):"esri.layers.WFSLayer"===U.declaredClass&&this._labels.addFeatureLayer(U)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ea,this._mapImageLyr._setMap(this,
this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var U=this.layerIds,ia=this._layerDivs,ua=!1,wa,Fa,Da=U.length-1;0<=Da;Da--)if(wa=U[Da],Fa=this.getLayer(wa),wa=ia[wa],Fa&&wa&&!Fa._isReference){q.place(this._mapImageLyr._div,wa,"after");ua=!0;break}ua||q.place(this._mapImageLyr._div,this._layersDiv,"first")}});return y._CoreMap=c})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(D,B,a,c){D={streets:{title:c.basemaps.streets,
thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:c.basemaps.satellite,thumbnailUrl:D.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:c.basemaps.hybrid,thumbnailUrl:D.toUrl("./images/basemap/hybrid.jpg"),
itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:c.basemaps.terrain,thumbnailUrl:D.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:c.basemaps.topo,thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:c.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:c.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},
oceans:{title:c.basemaps.oceans,thumbnailUrl:D.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:c.basemaps["national-geographic"],thumbnailUrl:D.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:c.basemaps.osm,thumbnailUrl:D.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:c.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
type:"VectorTile"}]},"gray-vector":{title:c.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:c.basemaps.streets,thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",
type:"VectorTile"}]},"topo-vector":{title:c.basemaps.topo,thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:c.basemaps["streets-night-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-night.jpg"),
itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:c.basemaps["streets-relief-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},
"streets-navigation-vector":{title:c.basemaps["streets-navigation-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};return a.basemaps=D})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(D,B,a,c,h,g,e,l,r){l={animateRange:function(k){var f=k.range;return new B.Animation(a.mixin({curve:new B._Line(f.start,f.end)},k))},resize:function(k){var f=k.node=c.byId(k.node),b=k.start,d=k.end;b||(b=h.getMarginBox(f),f=h.getPadBorderExtents(f),b=k.start={left:b.l+f.l,top:b.t+f.t,width:b.w-f.w,height:b.h-f.h});d||(d=k.anchor?k.anchor:{x:b.left,y:b.top},f=k.size,d=k.end={left:b.left-(f.width-b.width)*(d.x-b.left)/b.width,top:b.top-(f.height-b.height)*(d.y-b.top)/b.height,width:f.width,
height:f.height});return B.animateProperty(a.mixin({properties:{left:{start:b.left,end:d.left},top:{start:b.top,end:d.top},width:{start:b.width,end:d.width},height:{start:b.height,end:d.height}}},k))},slideTo:function(k){var f=k.node=c.byId(k.node),b=g.getComputedStyle,d=null,q=null,m=function(){return function(){var n="absolute"==f.style.position?"absolute":"relative";d="absolute"==n?f.offsetTop:parseInt(b(f).top)||0;q="absolute"==n?f.offsetLeft:parseInt(b(f).left)||0;"absolute"!=n&&"relative"!=
n&&(n=h.position(f,!0),d=n.y,q=n.x,f.style.position="absolute",f.style.top=d+"px",f.style.left=q+"px")}}();m();k=B.animateProperty(a.mixin({properties:{top:{start:d,end:k.top||0},left:{start:q,end:k.left||0}}},k));D.connect(k,"beforeBegin",k,m);return k},flash:function(k){k=a.mixin({end:"#f00",duration:500,count:1},k);k.duration/=2*k.count;var f=c.byId(k.node),b=k.start;b||(b=g.getComputedStyle(f).backgroundColor);var d=k.end,q=[],m=k.count;f={node:f,duration:k.duration};for(k=0;k<m;k++)q.push(B.animateProperty(a.mixin({properties:{backgroundColor:{start:b,
end:d}}},f))),q.push(B.animateProperty(a.mixin({properties:{backgroundColor:{start:d,end:b}}},f)));return e.chain(q)}};a.mixin(a.getObject("fx",!0,r),l);return l})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){a.isAsync||k(0,function(){f(["./fx/Toggler"])});a=a.fx={};k={_fire:function(q,m){this[q]&&this[q].apply(this,m||[]);return this}};var b=function(q){this._index=
-1;this._animations=q||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;c.forEach(this._animations,function(m){m&&("undefined"!=typeof m.duration&&(this.duration+=m.duration),m.delay&&(this.duration+=m.delay))},this)};b.prototype=new B;D.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=
this._animations[++this._index],this._onAnimateCtx=h.after(this._current,"onAnimate",D.hitch(this,"_onAnimate"),!0),this._onEndCtx=h.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(q,m){this._current||(this._current=this._animations[this._index=0]);if(!m&&"playing"==this._current.status())return this;var n=h.after(this._current,"beforeBegin",D.hitch(this,function(){this._fire("beforeBegin")}),!0),t=h.after(this._current,"onBegin",D.hitch(this,function(w){this._fire("onBegin",
arguments)}),!0),z=h.after(this._current,"onPlay",D.hitch(this,function(w){this._fire("onPlay",arguments);n.remove();t.remove();z.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=h.after(this._current,"onAnimate",D.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=h.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var q=h.after(this._current,
"onPause",D.hitch(this,function(m){this._fire("onPause",arguments);q.remove()}),!0);this._current.pause()}return this},gotoPercent:function(q,m){this.pause();var n=this.duration*q;this._current=null;c.some(this._animations,function(t,z){if(n<=t.duration)return this._current=t,this._index=z,!0;n-=t.duration;return!1},this);this._current&&this._current.gotoPercent(n/this._current.duration);m&&this.play();return this},stop:function(q){if(this._current){if(q){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);
this._current=this._animations[this._index]}var m=h.after(this._current,"onStop",D.hitch(this,function(n){this._fire("onStop",arguments);m.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});D.extend(b,k);a.chain=function(q){return new b(D.isArray(q)?q:Array.prototype.slice.call(q,0))};var d=function(q){this._animations=
q||[];this._connects=[];this.duration=this._finished=0;c.forEach(q,function(n){var t=n.duration;n.delay&&(t+=n.delay);this.duration<t&&(this.duration=t);this._connects.push(h.after(n,"onEnd",D.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new g.Animation({curve:[0,1],duration:this.duration});var m=this;c.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(n){m._connects.push(h.after(m._pseudoAnimation,n,function(){m._fire(n,arguments)},!0))})};D.extend(d,
{_doAction:function(q,m){c.forEach(this._animations,function(n){n[q].apply(n,m)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(q,m){var n=this._pseudoAnimation;n[q].apply(n,m)},play:function(q,m){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(q,m){var n=this.duration*q;c.forEach(this._animations,
function(t){t.gotoPercent(t.duration<n?1:n/t.duration,m)});this._call("gotoPercent",arguments);return this},stop:function(q){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();c.forEach(this._connects,function(q){q.remove()})}});D.extend(d,k);a.combine=function(q){return new d(D.isArray(q)?q:Array.prototype.slice.call(q,0))};a.wipeIn=function(q){var m=q.node=e.byId(q.node),n=m.style,t;q=
g.animateProperty(D.mixin({properties:{height:{start:function(){t=n.overflow;n.overflow="hidden";if("hidden"==n.visibility||"none"==n.display)return n.height="1px",n.display="",n.visibility="",1;var w=l.get(m,"height");return Math.max(w,1)},end:function(){return m.scrollHeight}}}},q));var z=function(){n.height="auto";n.overflow=t};h.after(q,"onStop",z,!0);h.after(q,"onEnd",z,!0);return q};a.wipeOut=function(q){var m=(q.node=e.byId(q.node)).style,n;q=g.animateProperty(D.mixin({properties:{height:{end:1}}},
q));h.after(q,"beforeBegin",function(){n=m.overflow;m.overflow="hidden";m.display=""},!0);var t=function(){m.overflow=n;m.height="auto";m.display="none"};h.after(q,"onStop",t,!0);h.after(q,"onEnd",t,!0);return q};a.slideTo=function(q){var m=null,n=null,t=function(z){return function(){var w=l.getComputedStyle(z),y=w.position;m="absolute"==y?z.offsetTop:parseInt(w.top)||0;n="absolute"==y?z.offsetLeft:parseInt(w.left)||0;"absolute"!=y&&"relative"!=y&&(w=r.position(z,!0),m=w.y,n=w.x,z.style.position=
"absolute",z.style.top=m+"px",z.style.left=n+"px")}}(q.node=e.byId(q.node));t();q=g.animateProperty(D.mixin({properties:{top:q.top||0,left:q.left||0}},q));h.after(q,"beforeBegin",t,!0);return q};return a})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(D,B,a,c,h,g,e,l,r){D=D(null,{declaredClass:"esri.layers.TileInfo",constructor:function(k){B.mixin(this,k);this.width=
this.cols;this.height=this.rows;this._levelToLOD={};k=this.spatialReference;var f=this.origin;k&&(k=this.spatialReference=new e(k.toJson?k.toJson():k));f&&(this.origin=new l(f.toJson?f.toJson():f),!f.spatialReference&&k&&this.origin.setSpatialReference(new e(k.toJson())));this.lods=a.map(this.lods,function(q){return new r(q)});a.forEach(this.lods,function(q){this._levelToLOD[q.level]=q},this);k=!1;f=this.spatialReference;var b=this.origin;if(f&&b){var d=f._getInfo();d&&(k=f._isWrappable()&&Math.abs(d.origin[0]-
b.x)<=d.dx)}this.isWrappable=k;this._initializeUpsampleLevels()},toJson:function(){return g.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(k){return k.toJson()})})},lodAt:function(k){return this._levelToLOD&&this._levelToLOD[k]||null},updateTileInfo:function(k){var f=this.lodAt(k.level),
b=f.resolution*this.width;f=f.resolution*this.height;k.id=k.level+"/"+k.row+"/"+k.col;k.extent||(k.extent=[0,0,0,0]);k.extent[0]=this.origin.x+k.col*b;k.extent[1]=this.origin.y-(k.row+1)*f;k.extent[2]=k.extent[0]+b;k.extent[3]=k.extent[1]+f},upsampleTile:function(k){var f=this._upsampleLevels[k.level];if(!f||-1===f.parentLevel)return!1;k.level=f.parentLevel;k.row=Math.floor(k.row/f.factor+.001);k.col=Math.floor(k.col/f.factor+.001);this.updateTileInfo(k);return!0},_initializeUpsampleLevels:function(){var k=
this.lods;this._upsampleLevels=[];for(var f=null,b=0;b<k.length;b++){var d=k[b];this._upsampleLevels[d.level]={parentLevel:f?f.level:-1,factor:f?f.resolution/d.resolution:0};f=d}}});B.setObject("layers.TileInfo",D,h);return D})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,B,a,c,h){D=D(null,{declaredClass:"esri.layers.LOD",constructor:function(g){B.mixin(this,g)},toJson:function(){return h.fixJson({level:this.level,levelValue:this.levelValue,
resolution:this.resolution,scale:this.scale})}});B.setObject("layers.LOD",D,c);return D})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){B=B([f,b],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(n,t){t&&(t.roundrobin&&(D.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),t.tileServers=t.roundrobin),this._setTileServers(t.tileServers),
this._loadCallback=t.loadCallback);this._params=a.mixin({},this._url.query);this._initLayer=a.hitch(this,this._initLayer);var z=t&&t.resourceInfo;z?this._initLayer(z):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(n){if(n&&0<n.length){this.tileServers=n;var t,z=n.length;for(t=0;t<z;t++)n[t]=r.urlToObject(n[t]).path}},_initLayer:function(n,t){this.inherited(arguments);this.resourceInfo=
h.toJson(n);this.tileInfo=new d(n.tileInfo);!1!==this.resampling&&(n.capabilities&&-1<n.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new m(this)):this.resampling=!!n.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new k(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;n.timeInfo&&(this.timeInfo=new q(n.timeInfo));n.mensurationCapabilities&&(this.mensurationCapabilities=
n.mensurationCapabilities);var z=this._url.path,w=this._loadCallback,y=r.getProtocolForWebResource(!0),x=z.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);x=x&&x[2];if(!this.tileServers)if(n.tileServers)this._setTileServers(n.tileServers);else{var A=-1!==z.search(/^https?:\/\/server\.arcgisonline\.com/i),v=-1!==z.search(/^https?:\/\/services\.arcgisonline\.com/i);(A||v)&&this._setTileServers([z,z.replace(A?/server\.arcgisonline/i:
/services\.arcgisonline/i,A?"services.arcgisonline":"server.arcgisonline")])}if(x){x=x.toLowerCase();for(z=0;z<this._agolAttrs.length;z++)if(A=this._agolAttrs[z],A.toLowerCase()===x){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||y+"//static.arcgis.com/attribution/"+A;break}for(z=0;z<this._referenceLayers.length;z++)if(A=this._referenceLayers[z],A.toLowerCase()===x){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);w&&(delete this._loadCallback,w(this))},getTileUrl:function(n,
t,z){var w=this.tileServers,y=this._getToken(),x=this._url.query;n=(w?w[t%w.length]:this._url.path)+"/tile/"+n+"/"+t+"/"+z;n=r.upgradeToHTTPS(n);this.resampling&&!this.tileMap&&(n+="?blankTile\x3dfalse");x&&(n=this.resampling&&!this.tileMap?n+("\x26"+e.objectToQuery(x)):n+("?"+e.objectToQuery(x)));!y||x&&x.token||(n+=(-1===n.indexOf("?")?"?":"\x26")+"token\x3d"+y);n=this.addTimestampToURL(n);return r.addProxy(n)}});a.setObject("layers.ArcGISTiledMapServiceLayer",B,l);return B})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x){D=D(x,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(A,v){B.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=v?v.displayLevels:null)?this._displayLevels[0]:0;this.resampling=v?v.resampling:void 0;this._resamplingTolerance=v?v.resamplingTolerance:null;this.exclusionAreas=v?v.exclusionAreas:null;var u=a.hitch;this._addImage=u(this,this._addImage);this._tileLoadHandler=u(this,this._tileLoadHandler);
this._tileErrorHandler=u(this,this._tileErrorHandler);this._popTile=u(this,this._popTile);this._cleanUpRemovedImages=u(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=u(this,this._fireOnUpdateEvent);this._transitionEnd=u(this,this._transitionEnd);this._tileMapCallback=u(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var A=this.tileInfo,v=A.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=A.width;this._tileH=
A.height;var u=this.scales=[],C=this._displayLevels,E=-Infinity,F=Infinity,G=this.fullExtent,H=new z(G.xmin,G.ymax);G=new z(G.xmax,G.ymin);var J=t.getContainingTileCoords,I,R=v.length;for(I=0;I<R;I++){var O=v[I];var P=J(A,H,O);O.startTileRow=0>P.row?0:P.row;O.startTileCol=0>P.col?0:P.col;P=J(A,G,O);O.endTileRow=P.row;O.endTileCol=P.col;C&&-1===c.indexOf(C,O.level)||(u[I]=O.scale,E=O.scale>E?O.scale:E,F=O.scale<F?O.scale:F)}-Infinity===E||this._hasMin||this.setMinScale(E);Infinity===F||this._hasMax||
this.setMaxScale(F);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=m("ie")&&7>m("ie")&&(this.isPNG32||"Mixed"===A.format)},isVisibleAtScale:function(A){return A?x.prototype._isMapAtVisibleScale.call(this,A,!0):!1},_isMapAtVisibleScale:function(A){var v=this.inherited(arguments,[A,!0]);if(v){var u=this._map;v=this.scales;var C=u.getScale(),E=!1,F=u.width>u.height?u.width:u.height;for(u=0;u<v.length;u++)if(Math.abs(v[u]-C)/v[u]<1/F){E=!0;break}v=E}return v},_setMap:function(A,v,u,C){this.inherited(arguments);
this._map=A;var E=this._div=g.create("div",null,v),F=A.__visibleDelta,G=B.connect,H=d._css.names,J={position:"absolute",width:A.width+"px",height:A.height+"px",overflow:"visible"},I=q.defaults.map.zoomDuration;"css-transforms"===A.navigationMode?(J[H.transform]=d._css.translate(-F.x,-F.y),r.set(E,J),delete J[H.transform],J[H.transition]=H.transformName+" "+I+"ms ease",r.set(this._active=g.create("div",null,E),J),this._active._remove=0,this._passives=[]):(J.left=-F.x+"px",J.top=-F.y+"px",r.set(E,J));
this._onResizeHandler_connect=G(A,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=G(this,"onOpacityChange",this,"_opacityChangeHandler");F=this.tileInfo;G=F.spatialReference;H=G._getInfo();(this._wrap=A.wrapAround180&&G._isWrappable()&&Math.abs(H.origin[0]-F.origin.x)<=H.dx)&&t._addFrameInfo(F,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!A.loaded)var R=B.connect(A,"onLoad",this,function(){B.disconnect(R);R=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return E},_unsetMap:function(A,v){this.suspended||this._suspendImpl();g.destroy(this._div);this._map=this._div=null;var u=B.disconnect;u(this._onResizeHandler_connect);u(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){n.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var A=this._tiles,v=this._tileIds,u=this._loadingList,
C,E,F=B.disconnect,G=g.destroy;u&&0<u.count&&(u.forEach(function(J){if(C=A[J])F(C._onload_connect),F(C._onerror_connect),F(C._onabort_connect),C._onload_connect=C._onerror_connect=C._onabort_connect=null}),u.clear(),this._fireUpdateEnd());this._removeList.clear();for(u=v.length-1;0<=u;u--)(C=(E=v[u])&&A[E])&&G(C);if("css-transforms"===this._map.navigationMode){v=this._active;E=this._passives;this._noDom=0;for(u=E.length-1;0<=u;u--){var H=E[u];H._endHandle&&F(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;E.splice(u,1);G(H)}v._matrix=v._multiply=null;v._marked=v._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new f;this._loadingList=new f;n.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var A=this._map,v=B.connect;if("css-transforms"===A.navigationMode){if(this._onScaleHandler_connect=v(A,"onScale",this,this._onScaleHandler),m("esri-mobile")){this._standby=[];var u=this,C=function(){u._noDom=1};this._onPanStartHandler_connect=v(A,"onPanStart",C);this._onZoomStartHandler_connect=v(A,"onZoomStart",C)}}else this._onZoomHandler_connect=v(A,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=v(A,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=v(A,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var A=B.disconnect;A(this._onPanHandler_connect);A(this._onZoomHandler_connect);A(this._onScaleHandler_connect);A(this._onExtentChangeHandler_connect);A(this._onPanStartHandler_connect);A(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(A,v,u){A={width:v+"px",height:u+"px"};v=r.set;v(this._div,A);if("css-transforms"===this._map.navigationMode)for(this._active&&v(this._active,A),u=this._passives.length-1;0<=u;u--)v(this._passives[u],A)},_onExtentChangeHandler:function(A,v,u,C){v=this._map;var E=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!v._isPanningOrZooming()){if("css-transforms"===v.navigationMode){if(u)for(C=this._passives.length-1;0<=C;C--){var F=this._passives[C];r.set(F,
d._css.names.transition,"none");F._marked?(this._passives.splice(C,1),F.parentNode&&F.parentNode.removeChild(F),g.destroy(F)):0<F.childNodes.length&&(F._multiply=F._multiply?b.multiply(F._matrix,F._multiply):F._matrix)}this._noDom=0;if(E&&E.length)for(C=E.length-1;0<=C;C--)F=E[C],r.set(F,"visibility","inherit"),this._popTile(F),E.splice(C,1)}this._fireUpdateStart();this._rrIndex=0;C=t.getCandidateTileInfo(v,this.tileInfo,A);A=v.__visibleDelta;if(!this._ct||C.lod.level!==this._ct.lod.level||u){F=C&&
this._ct&&C.lod.level!==this._ct.lod.level;this._ct=C;var G=this._tiles,H=this._tileIds,J=this._tileBounds,I=this._removeList,R=H.length;this._cleanUpRemovedImages();for(C=0;C<R;C++){E=H[C];var O=G[E];J[E]=H[C]=null;"css-transforms"===v.navigationMode&&F&&O.parentNode&&v.fadeOnZoom&&(O._fadeOut=F,O.parentNode._remove++);I.add(O)}u&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}C=A.x;u=A.y;"css-transforms"===v.navigationMode?(E={},E[d._css.names.transform]=d._css.translate(C,u),r.set(this._div,
E)):r.set(this._div,{left:C+"px",top:u+"px"});this.__coords_dx=C;this.__coords_dy=u;this._updateImages(new w(0,0,A.width,A.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;u=this._tileW;G=this._tileH;A=new w(-A.x,-A.y,A.width,A.height);for(C=this._tileIds.length-1;0<=C;C--)(E=this._tileIds[C])?(F=this._tiles[E],H=l.getMarginBox(F),H=new w(H.l,H.t,u,G),"css-transforms"===v.navigationMode&&(H.x=F._left,H.y=F._top),A.intersects(H)?
this._tileBounds[E]=H:(this._loadingList.contains(E)&&this._popTile(F),g.destroy(F),this._tileIds.splice(C,1),delete this._tileBounds[E],delete this._tiles[E])):(this._tileIds.splice(C,1),delete this._tileBounds[E],delete this._tiles[E])}},_onPanHandler:function(A,v){var u=this._map,C=u.__visibleDelta.offset(v.x,v.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===u.navigationMode?(u={},u[d._css.names.transform]=d._css.translate(C.x,C.y),r.set(this._div,u),m("esri-mobile")||this._updateImages({x:-C.x,
y:-C.y,width:C.width,height:C.height})):(r.set(this._div,{left:C.x+"px",top:C.y+"px"}),this._updateImages({x:-C.x,y:-C.y,width:C.width,height:C.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(A,v){var u,C={},E=d._css.names,F=this._map,G=q.defaults.map.zoomDuration;for(u=this._passives.length-1;0<=u;u--){var H=this._passives[u];0===H.childNodes.length?(this._passives.splice(u,1),g.destroy(H)):("none"===H.style[E.transition]&&r.set(H,E.transition,
E.transformName+" "+G+"ms ease"),r.set(H,E.transition,v?"none":E.transformName+" "+G+"ms ease"),H._matrix=A,C[E.transform]=d._css.matrix(H._multiply?b.multiply(A,H._multiply):A),r.set(H,C))}this._active&&0===this._active.childNodes.length||(r.set(this._active,E.transition,v?"none":E.transformName+" "+G+"ms ease"),this._active._matrix=A,C[E.transform]=d._css.matrix(this._active._matrix),r.set(this._active,C),this._passives.push(this._active),C={position:"absolute",width:F.width+"px",height:F.height+
"px",overflow:"visible"},C[E.transition]=E.transformName+" "+G+"ms ease",r.set(this._active=g.create("div",null,this._div),C),this._active._remove=0,F.fadeOnZoom&&g.place(this._active,this._div,"first"))},_onZoomHandler:function(A,v,u){A=l.getMarginBox(this._div);u=u.offset(-A.l,-A.t);this._previousScale&&1!==v||(this._previousScale=1);var C,E=this._tileW*v,F=this._tileH*v,G=this._tileBounds,H=this._tiles,J=this._previousScale,I=this._multiple,R=r.set,O,P;if((A=m("ie"))&&8>A)c.forEach(this._tileIds,
function(ba){P="";C=G[ba];O=H[ba].style.margin.split(" ");c.forEach(O,function(S){""!==P&&(P+=" ");S=parseFloat(S);P+=S/J*v+"px"});R(H[ba],{left:C.x-(E-C.width)*(u.x-C.x)/C.width+"px",top:C.y-(F-C.height)*(u.y-C.y)/C.height+"px",margin:1!==I&&-1===P.indexOf("NaN")?P:"",zoom:v})});else{var L=E*I,K=F*I,Q,W;c.forEach(this._tileIds,function(ba){P="";C=G[ba];Q=C.x-(E-C.width)*(u.x-C.x)/C.width;W=C.y-(F-C.height)*(u.y-C.y)/C.height;O=H[ba].style.margin.split(" ");c.forEach(O,function(S){""!==P&&(P+=" ");
S=parseFloat(S);P+=S/J*v+"px"});R(H[ba],{left:Q+"px",top:W+"px",margin:1!==I&&-1===P.indexOf("NaN")?P:"",width:L+"px",height:K+"px"})})}this._previousScale=v},_updateImages:function(A){if(this._ct){var v=this._tileW,u=this._tileH,C=this._ct;var E=C.lod;C=C.tile;var F=C.offsets,G=C.coords,H=G.row;G=G.col;var J=E.level,I=this.opacity,R=this._tileIds,O=this._loadingList,P=this._addImage,L=this._map.id,K=this.id,Q=A.x,W=A.y,ba=E.startTileRow,S=E.endTileRow,X=E.startTileCol,aa=E.endTileCol,M=c.indexOf,
da=F.x-this.__coords_dx,ea=F.y-this.__coords_dy;var Z=v-da+-A.x;var ka=u-ea+-A.y;var va=Math.ceil;Z=0<Z?Z%v:v-Math.abs(Z)%v;ka=0<ka?ka%u:u-Math.abs(ka)%u;Q=0<Q?Math.floor((Q+da)/v):va((Q-(v-da))/v);W=0<W?Math.floor((W+ea)/u):va((W-(u-ea))/u);ea=Q+va((A.width-Z)/v);A=W+va((A.height-ka)/u);if(this._wrap){var Ea=E._frameInfo;var Ga=Ea[0];var na=Ea[1];Ea=Ea[2]}for(ka=Q;ka<=ea;ka++)for(Q=W;Q<=A;Q++)va=H+Q,Z=G+ka,this._wrap&&(Z<na?(Z%=Ga,Z=Z<na?Z+Ga:Z):Z>Ea&&(Z%=Ga)),!this._isExcluded(J,va,Z)&&va>=ba&&
va<=S&&Z>=X&&Z<=aa&&(E=L+"_"+K+"_tile_"+J+"_"+Q+"_"+ka,-1===M(R,E)&&(O.add(E),R.push(E),P(J,Q,va,ka,Z,E,v,u,I,C,F)))}},_cleanUpRemovedImages:function(){var A=this._removeList,v=g.destroy,u,C=d._css.names;A.forEach(function(F){F._fadeOut||(F.style.filter="",F.style.zoom=1,v(F))});if("css-transforms"===this._map.navigationMode)for(u=this._passives.length-1;0<=u;u--){var E=this._passives[u];0===E.childNodes.length?(this._passives.splice(u,1),v(E)):this._map.fadeOnZoom&&!E._marked&&E._remove===E.childNodes.length&&
(E._marked=1,2048>d._css.getScaleFromMatrix(r.get(E,C.transform))?(r.set(E,C.transition,"opacity 0.65s"),r.set(E,"opacity",0),B.disconnect(E._endHandle),E._endHandle=B.connect(E,C.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:E}))}A.clear()},_transitionEnd:function(A){var v=A.target;"opacity"===A.propertyName&&(B.disconnect(v._endHandle),v._endHandle=null,A=c.indexOf(this._passives,v),-1<A&&this._passives.splice(A,1),v.parentNode&&v.parentNode.removeChild(v),g.destroy(v))},
_addImage:function(A,v,u,C,E,F,G,H,J,I,R){if(this._patchIE)I=this._tiles[F]=g.create("div"),I.id=F,e.add(I,"layerTile"),r.set(I,{left:G*C-R.x+"px",top:H*v-R.y+"px",width:G+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(A,u,E)+"', sizingMethod\x3d'scale')"}),1>J&&r.set(I,"opacity",J),A=I.appendChild(g.create("div")),r.set(A,{opacity:0,width:G+"px",height:H+"px"}),this._div.appendChild(I),I=null,this._loadingList.remove(F),this._fireOnUpdateEvent();
else{I=this._tiles[F]=g.create("img");var O=B.connect;I.id=F;I._uid=A+"_"+u+"_"+E;I.alt="";e.add(I,"layerTile");C=G*C-R.x;R=H*v-R.y;v=this._map;var P=d._css.names;G={width:G+"px",height:H+"px",visibility:"hidden"};"css-transforms"===v.navigationMode?(G[P.transform]=d._css.translate(C,R),r.set(I,G),I._left=C,I._top=R):(G.left=C+"px",G.top=R+"px",r.set(I,G));1>J&&r.set(I,"opacity",J);I._onload_connect=O(I,"onload",this,"_tileLoadHandler");I._onerror_connect=O(I,"onerror",a.hitch(this,"_tileErrorHandler",
u,E));I._onabort_connect=O(I,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(A,u,E,F,this._tileMapCallback);else if(F=this.getTileUrl(A,u,E,I))this._failedRequests&&this._failedRequests[F]?(r.set(I,this._failedRequests[F].css),I.src=this._failedRequests[F].src,this._multiple=parseInt(this._failedRequests[F].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,I.src=F);"css-transforms"===v.navigationMode?this._active.appendChild(I):
this._div.appendChild(I);I=null}},_tileMapCallback:function(A,v){if(!this.suspended){var u=this._tiles[v.id]||k.byId(v.id);var C=v.level+"_"+v.row+"_"+v.col;u&&u._uid===C?(this._multiple=2*(v.level-A.level)||1,this.isResampling=1!==this._multiple,C=this.tileMap.style(A,v),r.set(u,C),u.src=this.getTileUrl(A.level,A.row,A.col)):this._popTile(v)}},getTileUrl:function(A,v,u){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(A){var v=B.disconnect;v(A._onload_connect);v(A._onerror_connect);v(A._onabort_connect);A._onload_connect=A._onerror_connect=A._onabort_connect=null;this._loadingList.remove(A.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(A){A=A.currentTarget;this._noDom?this._standby.push(A):(r.set(A,"visibility","inherit"),this._popTile(A))},_tileAbortHandler:function(A){A=A.currentTarget;this.onError(Error("Unable to load tile: "+A.src));r.set(A,"visibility","hidden");this._popTile(A)},
_tileErrorHandler:function(A,v,u){u=u.currentTarget;var C=!0;if(this.tileMap||!this.resampling)C=!1;else{var E=new h(u.src);E=E.path.split("/");E=parseInt(E[E.length-3]);var F=this._ct.lod.level-E+1;this._multiple=Math.pow(2,F);if(E===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)C=!1}C?(this.isResampling=!0,this._resample(u,A,v)):(this.onError(Error("Unable to load tile: "+u.src)),r.set(u,"visibility","hidden"),
this._popTile(u))},_resample:function(A,v,u){var C=(new h(A.src)).path.split("/"),E=this._multiple,F=parseInt(C[C.length-3])-1,G=parseInt(v/E),H=parseInt(u/E);C=u%E;var J=v%E;G=this.getTileUrl(F,G,H);v=this.getTileUrl(F+Math.log(E)/Math.LN2,v,u);E={width:this._tileW*E+"px",height:this._tileH*E+"px",margin:"-"+this._tileW*J+"px 0 0 -"+(this._tileH*C+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[v]={src:G,css:E};r.set(A,E);m("chrome")&&A.setAttribute("src",null);A.src=
G},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(A){if(this.opacity!=A)this.onOpacityChange(this.opacity=A)},onOpacityChange:function(){},_opacityChangeHandler:function(A){var v=r.set,u,C;if("css-transforms"===this._map.navigationMode){if(this._active){var E=this._active.childNodes;for(u=E.length-1;0<=u;u--)v(E[u],"opacity",A)}for(u=this._passives.length-
1;0<=u;u--)for(E=this._passives[u].childNodes,C=E.length-1;0<=C;C--)v(E[C],"opacity",A)}else for(E=this._div.childNodes,u=E.length-1;0<=u;u--)v(E[u],"opacity",A)},setExclusionAreas:function(A){this.exclusionAreas=A;if(this.loaded&&this._map&&this._map.loaded){var v=this._map.spatialReference,u=this.tileInfo,C=u.origin,E=u.lods,F=E[0].level,G=E[E.length-1].level,H,J,I;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var R=0;for(H=A.length;R<H;R++){var O=A[R];if((I=O.geometry)&&
"extent"===I.type&&I.xmin<=I.xmax&&I.ymin<=I.ymax){if(!v.equals(I.spatialReference))if(v._canProject(I.spatialReference)){if(v.isWebMercator()){var P=z.lngLatToXY(I.xmin,I.ymin);I=z.lngLatToXY(I.xmax,I.ymax)}else P=z.xyToLngLat(I.xmin,I.ymin,!0),I=z.xyToLngLat(I.xmax,I.ymax,!0);I=new y(P[0],P[1],I[0],I[1],v)}else continue;var L=-1;if(O.minZoom&&-1!==O.minZoom)L=O.minZoom;else if(O.minScale&&-1!==O.minScale){var K=0;for(J=E.length;K<J;K++)if(E[K].scale<=O.minScale){L=E[K].level;break}}L=Math.max(L,
F);P=-1;if(O.maxZoom&&-1!==O.maxZoom)P=O.maxZoom;else if(O.maxScale&&-1!==O.maxScale)for(K=0,J=E.length;K<J;K++)if(E[K].scale<O.maxScale){P=E[K-1].level;break}else if(E[K].scale===O.maxScale){P=E[K].level;break}P=-1===P?G:Math.min(P,G);for(O=L;O<=P;O++){K=0;for(J=E.length;K<J;K++)if(E[K].level===O){var Q=E[K];break}Q&&(this._exclusionsPerZoom[O]||(this._exclusionsPerZoom[O]=[]),K=1/Q.resolution/u.rows,J=1/Q.resolution/u.cols,this._exclusionsPerZoom[O].push({rowFrom:Math.floor((C.y-I.ymax)*K),rowTo:Math.ceil((C.y-
I.ymin)*K),colFrom:Math.floor((I.xmin-C.x)*J),colTo:Math.ceil((I.xmax-C.x)*J)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(A,v,u){var C;if(!this._exclusionsPerZoom)return!1;var E=this._exclusionsPerZoom[A];if(!E)return!1;var F=0;for(C=E.length;F<C;F++)if(A=E[F],v>=A.rowFrom&&v<A.rowTo&&u>=A.colFrom&&u<A.colTo)return!0;return!1}});a.setObject("layers.TiledMapServiceLayer",D,d);return D})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(D,B,a){a.ArrayList=function(c){var h=[];c&&(h=h.concat(c));this.count=h.length;this.add=function(g){h.push(g);this.count=h.length};this.addRange=function(g){if(g.getIterator)for(g=g.getIterator();!g.atEnd();)this.add(g.get());else for(var e=0;e<g.length;e++)h.push(g[e]);this.count=h.length};this.clear=function(){h.splice(0,h.length);this.count=0};this.clone=function(){return new a.ArrayList(h)};this.contains=function(g){for(var e=0;e<h.length;e++)if(h[e]==g)return!0;
return!1};this.forEach=function(g,e){D.forEach(h,g,e)};this.getIterator=function(){return new a.Iterator(h)};this.indexOf=function(g){for(var e=0;e<h.length;e++)if(h[e]==g)return e;return-1};this.insert=function(g,e){h.splice(g,0,e);this.count=h.length};this.item=function(g){return h[g]};this.remove=function(g){g=this.indexOf(g);0<=g&&h.splice(g,1);this.count=h.length};this.removeAt=function(g){h.splice(g,1);this.count=h.length};this.reverse=function(){h.reverse()};this.sort=function(g){g?h.sort(g):
h.sort()};this.setByIndex=function(g,e){h[g]=e;this.count=h.length};this.toArray=function(){return[].concat(h)};this.toString=function(g){return h.join(g||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(D,B,a){D=B.getObject("dojox.collections",!0);D.DictionaryEntry=function(c,h){this.key=c;this.value=h;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};D.Iterator=
function(c){var h=0;this.element=c[h]||null;this.atEnd=function(){return h>=c.length};this.get=function(){return this.atEnd()?null:this.element=c[h++]};this.map=function(g,e){return a.map(c,g,e)};this.reset=function(){h=0;this.element=c[h]}};D.DictionaryIterator=function(c){var h=[],g={},e;for(e in c)g[e]||h.push(c[e]);var l=0;this.element=h[l]||null;this.atEnd=function(){return l>=h.length};this.get=function(){return this.atEnd()?null:this.element=h[l++]};this.map=function(r,k){return a.map(h,r,
k)};this.reset=function(){l=0;this.element=h[l]}};return D})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(D,B,a,c,h,g,e){return D(null,{declaredClass:"esri.layers.TileMap",constructor:function(l){this.layer=l;this._tileMaps={}},getTile:function(l,r,k,f,b){l={id:f,level:l,row:r,col:k};r=this._getResamplingBudget();0<r?this._process({tile:l,requestedTile:l,callback:b,resamplingBudget:r}):
(b||this.callback).call(this,l,l)},statusOf:function(l,r,k){var f=this._getResamplingBudget();l={level:l,row:r,col:k};if(0===f)return 1;for(;0<=f;){r=this._tileToTileMap(l);if(!this._tileMaps[r.uid])return-1;r=this._tileMaps[r.uid];if(!r.promise.isFulfilled())return-1;if(this._isTileAvailable(l,r))return 1;l=this._parentTile(l);if(!l)break;f--}return 0},style:function(l,r){if(l.level!==r.level||l.row!==r.row||l.col!==r.col){var k=this.layer.tileInfo,f=k.lods,b=k.cols;k=k.rows;for(var d,q,m=f.length-
1;!d||!q;)d||f[m].level!==l.level||(d=f[m]),q||f[m].level!==r.level||(q=f[m]),m--;d=Math.round(d.resolution/q.resolution);q=r.col%d*-1*b;f=r.row%d*-1*k;d={width:b*d+"px",height:k*d+"px",margin:f+"px 0 0 "+q+"px","will-change":"transform"};q=0===q?0:-1*q;f=0===f?0:-1*f;d.clip="rect("+f+"px,"+(q+b)+"px,"+(f+k)+"px,"+q+"px)";return d}},_process:function(l){var r=l.tile,k=this._tileToTileMap(r),f=this._parentTile(r);this._getTileMap(k).then(B.hitch(this,function(b){k=b;this._isTileAvailable(r,k)?(l.callback||
this.callback).call(this,r,l.requestedTile):0<l.resamplingBudget&&f?(l.resamplingBudget--,l.tile=f,this._process(l)):(l.callback||this.callback).call(this,l.requestedTile,l.requestedTile)}),B.hitch(this,function(){(l.callback||this.callback).call(this,l.requestedTile,l.requestedTile)}))},_getTileMap:function(l){var r,k,f=null;if(this._tileMaps[l.uid]){l=this._tileMaps[l.uid];var b=l.promise}else{this._tileMaps[l.uid]=l;var d=new c;g({url:this._getTileMapUrl(l.level,l.row,l.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(q){B.mixin(l,q);if(l.data&&0<l.data.length){k=l.data.length;if(1===k)f=l.data[0];else for(f=l.data[0],r=1;r<k;r++)if(l.data[r]!==f){f=null;break}null!==f&&(delete l.data,l.value=f);null==l.valid&&(l.valid=!0)}d.resolve(l)},error:function(q){q&&422===q.code?(B.mixin(l,{location:{top:l.row,left:l.col,width:8,height:8},valid:!0,value:0}),d.resolve(l)):d.reject()}});b=l.promise=d.promise}return b},_parentTile:function(l){var r=this.layer.tileInfo.lods,
k,f,b=null;a.some(r,function(d,q){return l.level===d.level?(k=d,f=q,!0):!1});0<f&&(r=r[f-1],b={id:l.id,level:r.level,row:Math.floor(l.row*k.resolution/r.resolution+.01),col:Math.floor(l.col*k.resolution/r.resolution+.01)});return b},_tileToTileMap:function(l){var r=8*Math.floor(l.row/8),k=8*Math.floor(l.col/8);return{uid:l.level+"_"+r+"_"+k,level:l.level,row:r,col:k}},_isTileAvailable:function(l,r){if(r.valid)if(void 0!==r.value)var k=r.value;else{k=r.location.left;var f=r.location.top;k=(l.row-f)*
r.location.width+(l.col-k);k=k<r.data.length?r.data[k]:0}else k=0;return k},_getTileMapUrl:function(l,r,k){var f=this.layer,b=f.tileServers,d=f._getToken(),q=f._url.query;l=(b?b[r%b.length]:f._url.path)+"/tilemap/"+l+"/"+r+"/"+k+"/8/8";q&&(l+="?"+h.objectToQuery(q));!d||q&&q.token||(l+=(-1===l.indexOf("?")?"?":"\x26")+"token\x3d"+d);return l=f.addTimestampToURL(l)},_getResamplingBudget:function(){var l=this.layer,r=0;l.resampling&&(r=l._resamplingTolerance,null===r||void 0===r)&&(r=l.tileInfo.lods.length);
return r}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){var q=D([d],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(m){this.inherited(arguments,[null,m]);this._mapImages=[];var n=a.hitch;this._panStart=
n(this,this._panStart);this._pan=n(this,this._pan);this._extentChange=n(this,this._extentChange);this._zoom=n(this,this._zoom);this._zoomStart=n(this,this._zoomStart);this._scale=n(this,this._scale);this._resize=n(this,this._resize);B.connect(this,"onSuspend",this,this._onSuspend);B.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(m){var n=this._mapImages.push(m);--n;m._idx=n;m._layer=this;this._div&&this._createImage(m,n)},removeImage:function(m){if(m){var n=
m._idx,t=this._mapImages;if(t[n]===m){delete t[n];if(n=m._node)this._clearEvents(n),n.e_idx=n.e_bl=n.e_tr=n.e_l=n.e_t=n.e_w=n.e_h=null,n.parentNode&&(n.parentNode.removeChild(n),h.destroy(n));m._node=m._idx=m._layer=null}}},removeAllImages:function(){var m=this._mapImages,n,t=m.length;for(n=0;n<t;n++){var z=m[n];z&&this.removeImage(z)}this._mapImages=[]},getImages:function(){var m=this._mapImages,n=[],t,z=m.length;for(t=0;t<z;t++)m[t]&&n.push(m[t]);return n},setOpacity:function(m){this.opacity!=m&&
(this._opacityChanged(this.opacity=m),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(m){var n=this._div;if(n)if(!r("ie")||8<r("ie"))g.set(n,"opacity",m);else{var t=n.childNodes;var z=t.length;for(n=0;n<z;n++)g.set(t[n],"opacity",m)}},_createImage:function(m,n){var t=h.create("img");g.set(t,{position:"absolute"});1>m.opacity?g.set(t,"opacity",m.opacity):8>=r("ie")&&g.set(t,"opacity",this.opacity);!m.rotation||9>r("ie")||g.set(t,e._css.names.transform,e._css.rotate(360-
m.rotation));m._node=t;t.e_idx=n;t.e_layer=this;t.e_load=B.connect(t,"onload",q.prototype._imageLoaded);t.e_error=B.connect(t,"onerror",q.prototype._imageError);t.e_abort=B.connect(t,"onabort",q.prototype._imageError);t.src=m.href},_imageLoaded:function(m,n){var t=n||m.target||m.currentTarget,z=t.e_layer,w=z._mapImages[t.e_idx],y=z._map;y&&(y.__zooming||y.__panning||!z._sr)?z._standby.push(t):(z._clearEvents(t),w&&w._node===t&&y&&z._attach(w))},_imageError:function(m){m=m.target||m.currentTarget;
var n=m.e_layer,t=n._mapImages[m.e_idx];n._clearEvents(m);t&&(t._node=null)},_clearEvents:function(m){var n=B.disconnect;n(m.e_load);n(m.e_error);n(m.e_abort);m.e_load=m.e_error=m.e_abort=m.e_layer=null},_attach:function(m){var n=m.extent,t=n.spatialReference,z=this._sr,w=this._div,y=m._node,x=new f({x:n.xmin,y:n.ymin,spatialReference:t});n=new f({x:n.xmax,y:n.ymax,spatialReference:t});z.equals(t)||(z.isWebMercator()&&4326===t.wkid?(x=b.geographicToWebMercator(x),n=b.geographicToWebMercator(n)):t.isWebMercator()&&
4326===z.wkid&&(x=b.webMercatorToGeographic(x),n=b.webMercatorToGeographic(n)));y.e_bl=x;y.e_tr=n;m.visible&&(this._setPos(y,w._left,w._top),(this._active||w).appendChild(y))},_setPos:function(m,n,t){var z=m.e_bl,w=m.e_tr,y=this._map;z=y.toScreen(z);w=y.toScreen(w);n=z.x-n;t=w.y-t;var x=Math.abs(w.x-z.x);z=Math.abs(z.y-w.y);w={width:x+"px",height:z+"px"};var A=this._mapImages[m.e_idx];"css-transforms"===y.navigationMode?w[e._css.names.transform]=e._css.translate(n,t)+(A.rotation?" "+e._css.rotate(360-
A.rotation):""):(w.left=n+"px",w.top=t+"px");g.set(m,w);m.e_l=n;m.e_t=t;m.e_w=x;m.e_h=z},managedSuspension:!0,_setMap:function(m,n){this.inherited(arguments);var t=this._div=h.create("div",null,n),z=e._css.names,w={position:"absolute"},y=m.__visibleDelta;if(!r("ie")||8<r("ie"))w.opacity=this.opacity;"css-transforms"===m.navigationMode?(w[z.transform]=e._css.translate(y.x,y.y),g.set(t,w),t._left=y.x,t._top=y.y,w={position:"absolute",width:m.width+"px",height:m.height+"px",overflow:"visible"},this._active=
h.create("div",null,t),g.set(this._active,w),this._passive=h.create("div",null,t),g.set(this._passive,w)):(t._left=0,t._top=0,g.set(t,w));this._standby=[];z=this._mapImages;y=z.length;for(w=0;w<y;w++){var x=z[w];x._node||this._createImage(x,x._idx)}k.hide(t);return t},_unsetMap:function(m,n){this._disconnect();var t=this._div;if(t){var z=this._mapImages,w,y=z.length;for(w=0;w<y;w++){var x=z[w];if(x){var A=x._node;A&&(this._clearEvents(A),A.e_idx=A.e_bl=A.e_tr=A.e_l=A.e_t=A.e_w=A.e_h=null);x._node=
null}}n.removeChild(t);h.destroy(t)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();k.hide(this._div)},_onResume:function(m){m.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());m=this._map;var n=this._div,t=m.__visibleDelta;"css-transforms"===m.navigationMode&&(n._left=t.x,n._top=t.y,g.set(n,e._css.names.transform,e._css.translate(n._left,n._top)));this._redraw("css-transforms"===
m.navigationMode);this._connect(m);k.show(n)},_connect:function(m){if(!this._connections){var n=B.connect,t="css-transforms"===m.navigationMode;this._connections=[n(m,"onPanStart",this._panStart),n(m,"onPan",this._pan),n(m,"onExtentChange",this._extentChange),t&&n(m,"onZoomStart",this._zoomStart),t?n(m,"onScale",this._scale):n(m,"onZoom",this._zoom),t&&n(m,"onResize",this._resize)];t&&this._resize(m.extent,m.width,m.height)}},_disconnect:function(){this._connections&&(c.forEach(this._connections,
B.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(m,n){var t=this._div;t._left=this._panL+n.x;t._top=this._panT+n.y;"css-transforms"===this._map.navigationMode?g.set(t,e._css.names.transform,e._css.translate(t._left,t._top)):g.set(t,{left:t._left+"px",top:t._top+"px"})},_extentChange:function(m,n,t){t?this._redraw("css-transforms"===this._map.navigationMode):n&&this._pan(m,n);this._processStandbyList()},_processStandbyList:function(){var m,
n=this._standby;if(n&&n.length)for(m=n.length-1;0<=m;m--)this._imageLoaded(null,n[m]),n.splice(m,1)},_redraw:function(m){if(m){m=this._passive;var n=e._css.names;g.set(m,n.transition,"none");this._moveImages(m,this._active);g.set(m,n.transform,"none")}m=this._active||this._div;n=this._div._left;var t=this._div._top,z,w=m.childNodes.length;for(z=0;z<w;z++){var y=m.childNodes[z];this._setPos(y,n,t)}},_zoom:function(m,n,t){m=this._div;var z=m._left,w=m._top,y,x=m.childNodes.length;for(y=0;y<x;y++){var A=
m.childNodes[y];var v=A.e_w*n,u=A.e_h*n,C=(t.x-z-A.e_l)*(v-A.e_w)/A.e_w,E=(t.y-w-A.e_t)*(u-A.e_h)/A.e_h;C=isNaN(C)?0:C;E=isNaN(E)?0:E;g.set(A,{left:A.e_l-C+"px",top:A.e_t-E+"px",width:v+"px",height:u+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(m,n){var t=m.childNodes;var z=t.length;if(0<z)for(--z;0<=z;z--)n.appendChild(t[z])},_scale:function(m,n){var t=e._css.names,z=this._passive;g.set(z,t.transition,n?"none":t.transformName+" "+l.defaults.map.zoomDuration+
"ms ease");({})[t.transform]=e._css.matrix(m);g.set(z,t.transform,e._css.matrix(m))},_resize:function(m,n,t){g.set(this._active,{width:n+"px",height:t+"px"});g.set(this._passive,{width:n+"px",height:t+"px"})}});a.setObject("layers.MapImageLayer",q,e);return q})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(D,B,a,c,h,g,e,l,r){D=D(l,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(k){this.spatialReference=new g({wkid:102100});this.tileInfo=new r({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new e({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new e({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=k&&k.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=k?k.displayLevels:null;this.copyright=k&&k.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(k=
k&&k.loadCallback)&&k(this)},getTileUrl:function(k,f,b){k=this.tileServers[f%this.serversLength]+"/"+k+"/"+b+"/"+f+".png";k=h.normalize(k);k=this.addTimestampToURL(k);return h.addProxy(k)}});B.setObject("layers.OpenStreetMapLayer",D,c);return D})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E){D=D([u,C,l],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(F,G){this.initialize();B.mixin(this,F);this.domNode=k.byId(G);var H=this._nls=B.mixin({},E.widgets.popup),J=this.domNode;b.add(J,"esriPopup");(this._isRTL=
!q.isBodyLtr())&&m.set(J,"direction","rtl");f.set(J,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+H.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+H.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+H.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
H.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+H.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+H.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+H.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=h.query(".sizer",J);H=h.query(".titlePane",J)[0];this._title=h.query(".title",H)[0];this._prevFeatureButton=h.query(".prev",H)[0];this._nextFeatureButton=h.query(".next",H)[0];this._maxButton=h.query(".maximize",H)[0];this._spinner=h.query(".spinner",H)[0];this._contentPane=h.query(".contentPane",J)[0];this._positioner=h.query(".esriPopupWrapper",J)[0];this._pointer=h.query(".pointer",J)[0];this._outerPointer=h.query(".outerPointer",J)[0];this._actionList=h.query(".actionsPane .actionList",
J)[0];this._contentUpdateHandles={};this._eventConnections=[c.connect(h.query(".close",H)[0],"onclick",this,this.hide),c.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),c.connect(this._nextFeatureButton,"onclick",this,this.selectNext),c.connect(this._maxButton,"onclick",this,this._toggleSize),c.connect(h.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),c.connect(this,"onClearFeatures",this,this._featuresCleared),c.connect(this,"onSelectionChange",this,this._featureSelected),
c.connect(this,"onDfdComplete",this,this._updateUI)];g("esri-touch")&&(J=w.setScrollable(this._contentPane),this._eventConnections.push(J[0],J[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(F){this.inherited(arguments);d.place(this.domNode,F.root);this.highlight&&this.enableHighlight(F);this._maxHeight=m.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(F){this.popupWindow&&
(z.isDefined(F)&&""!==F||(F="\x26nbsp;"),this.destroyDijits(this._title),this.place(F,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(F){this.popupWindow&&(z.isDefined(F)&&""!==F||(F="\x26nbsp;"),this._destroyContent(),this.place(F,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(F,G){if(this.popupWindow)if(this._delayHide=!1,F){var H=this.map;if(F.spatialReference){this.location=F;var J=H.toScreen(F)}else this.location=
H.toMap(F),J=F;var I=H._getFrameWidth();if(-1!==I&&(J.x%=I,0>J.x&&(J.x+=I),H.width>I))for(H=(H.width-I)/2;J.x<H;)J.x+=I;this._maximized?this.restore():this._setPosition(J);G&&G.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(F,G){this.popupWindow&&(this._sizers.style({width:F+"px"}),m.set(this._contentPane,"maxHeight",G+"px"),this._maxHeight=G,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(F){return a.map(F,function(G){var H=d.create("a",{href:"javascript:void(0);",className:"action "+
G.className,title:G.title,innerHTML:G.title},this._actionList);c.connect(H,"onclick",G.callback);return{action:G,node:H}},this)},removeActions:function(F){a.forEach(F,function(G){d.destroy(G.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var F=this.map;if(F&&!this._maximized&&this.popupWindow){this._maximized=!0;var G=this._maxButton;b.remove(G,"maximize");b.add(G,"restore");f.set(G,"title",this._nls.NLS_restore);G=this.marginLeft;var H=this.marginTop,J=F.width-2*G;
F=F.height-2*H;m.set(this.domNode,{left:this._isRTL?null:G+"px",right:this._isRTL?G+"px":null,top:H+"px",bottom:null});m.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=m.get(this._sizers[0],"width");this._savedHeight=m.get(this._contentPane,"maxHeight");this._sizers.style({width:J+"px"});m.set(this._contentPane,{maxHeight:F-65+"px",height:F-65+"px"});this._showPointer("");this._unfollowMap();b.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var F=this._maxButton;b.remove(F,"restore");b.add(F,"maximize");f.set(F,"title",this._nls.NLS_maximize);m.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();b.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();a.forEach(this._eventConnections,c.disconnect);d.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(F,G){this._transientAnchor=
G&&G.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(F){F||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(F){var G=this.highlight,H=this.map;this.highlight=F;if(H&&F!==G)if(F){if(this.enableHighlight(H),F=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,F),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(F){var G=this.pagingControls,H=this.map;this.pagingControls=F;
H&&F!==G&&this._updatePagingControls()},_pagingInfoSetter:function(F){var G=this.pagingInfo,H=this.map;this.pagingInfo=F;H&&F!==G&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(F){var G=this.popupWindow,H=this.map;this.popupWindow=F;H&&F!==G&&(F?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(F){var G=this.anchor;this.anchor=F;this.map&&F!==G&&this.reposition()},_startupContent:function(){var F=this._contentPane;
this.startupDijits(F);a.forEach(this._getPopupRendererDijits(F),function(G){if(!this._contentUpdateHandles[G.id]){var H=G.on("content-update",B.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[G.id]=H}},this)},_destroyContent:function(){var F=this._contentPane;a.forEach(this._getPopupRendererDijits(F),function(G){var H=this._contentUpdateHandles[G.id];H&&(H.remove(),delete this._contentUpdateHandles[G.id])},this);this.destroyDijits(F)},_getPopupRendererDijits:function(F){F=this.getDijits(F);
return F=a.filter(F,function(G){return G&&G.set&&/_PopupRenderer/.test(G.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var F=this.selectedIndex;if(0<=F){var G=this.features[F].getContent();if(!this.titleInBody&&G&&B.isString(G.id)){var H=n.byId(G.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(G);this.updateHighlight(this.map,this.features[F]);this.showHighlight()}},_toggleVisibility:function(F){this._setVisibility(F);this.isShowing=F},_setVisibility:function(F){b.toggle(this.domNode,"esriPopupVisible",F);b.toggle(this.domNode,"esriPopupHidden",!F)},_waitAndHide:function(F){var G=this;this._delayHide=!0;setTimeout(function(){G._delayHide&&(G._delayHide=!1,G.hide())},F)},_followMap:function(){this._unfollowMap();var F=this.map;this._handles=[c.connect(F,
"onPanStart",this,this._onPanStart),c.connect(F,"onPan",this,this._onPan),c.connect(F,"onZoomStart",this,this._onZoomStart),c.connect(F,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var F=this._handles;F&&(a.forEach(F,c.disconnect),this._handles=null)},_onPanStart:function(){var F=this.domNode.style;this._panOrigin={left:F.left,top:F.top,right:F.right,bottom:F.bottom}},_onPan:function(F,G){var H=this._panOrigin,J=G.x,I=G.y,R=H.left,O=H.top,P=H.right;H=H.bottom;R&&(R=parseFloat(R)+
J+"px");O&&(O=parseFloat(O)+I+"px");P&&(P=parseFloat(P)-J+"px");H&&(H=parseFloat(H)-I+"px");m.set(this.domNode,{left:R,top:O,right:P,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(F,G,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(F){var G=
F.x,H=F.y;F=this.offsetX||0;var J=this.offsetY||0,I=0,R=0,O=this.map,P=O.position.x,L=O.position.y,K=O.width,Q=O.height;O="Left";var W="bottom",ba="right",S="top",X=q.getContentBox(this._positioner),aa=X.w/2,M=X.h/2,da=m.get(this._sizers[0],"height")+this._maxHeight+m.get(this._sizers[2],"height"),ea=da/2,Z=0,ka=0,va=K,Ea=Q,Ga=G,na=H,ma=this._getTargetAnchor().toLowerCase();if("auto"===ma){if(ma=e.getBox)ma=ma(),Z=Math.max(ma.l,P),va=Math.min(ma.l+ma.w,P+K),ka=Math.max(ma.t,L),Ea=Math.min(ma.t+ma.h,
L+Q),Ga+=P,na+=L;P=na-ka>=da;L=Ea-na>=da;K=va-Ga>=X.w;X=Ga-Z>=X.w;na-ka>ea&&Ea-na>=ea&&(K?(W="",O="Left",S="",ba="right"):X&&(W="",O="Right",S="",ba="left"));O&&W&&Ga-Z>aa&&va-Ga>=aa&&(P?(O="",W="bottom",ba="",S="top"):L&&(O="",W="top",ba="",S="bottom"));O&&W&&(K&&P?(O="Left",W="bottom",ba="right",S="top"):K&&L?(O="Left",W="top",ba="right",S="bottom"):X&&L?(O="Right",W="top",ba="left",S="bottom"):X&&P&&(O="Right",W="bottom",ba="left",S="top"));this._anchor=S&&ba?S+"-"+ba:S||ba}else W=O="",-1!==ma.indexOf("top")?
W="bottom":-1!==ma.indexOf("bottom")&&(W="top"),-1!==ma.indexOf("left")?O="Right":-1!==ma.indexOf("right")&&(O="Left"),this._anchor=this._getTargetAnchor();ba=W+O;switch(ba){case "top":case "bottom":R=14;break;case "Left":case "Right":I=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":R=14,I=-16}m.set(this.domNode,{left:G+"px",top:H+"px",right:null,bottom:null});G={left:null,right:null,top:null,bottom:null};O?G[O.toLowerCase()]=I+F+"px":G.left=-aa+"px";W?G[W]=R+J+"px":
G.top=-M+"px";m.set(this._positioner,G);this._showPointer(ba)},_showPointer:function(F){b.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));b.remove(this._outerPointer,["right","left","hidden"]);"Right"===F||"Left"===F?(F=F.toLowerCase(),b.add(this._outerPointer,F)):b.add(this._pointer,F)},_setPagerCallbacks:function(F,G,H){if(this.pagingControls&&(F!==this||this._pagerScope&&this._pagerScope!==this)&&F!==this._pagerScope){this._pagerScope=F;F===
this&&(G=this.selectPrevious,H=this.selectNext);var J=this._eventConnections;c.disconnect(J[1]);c.disconnect(J[2]);G&&(J[1]=c.connect(this._prevFeatureButton,"onclick",F,G));H&&(J[2]=c.connect(this._nextFeatureButton,"onclick",F,H))}},_getLocation:function(F){var G=F&&F.geometry;if(G)switch(G.type){case "point":var H=G;if(F.isAggregate()){F=F.getChildGraphics();var J=F[0];F=(J=J.geometry&&J.geometry.spatialReference)&&new A({points:a.map(F,function(I){I=I.geometry;return[I.x,I.y]}),spatialReference:J.toJson()});
J=v.getDenormalizedExtent(F)}break;case "multipoint":H=G.getPoint(0);J=v.getDenormalizedExtent(G);break;case "polyline":case "polygon":H=G.getPoint(0,0),J=v.getDenormalizedExtent(G)}return[H,J]},_zoomToFeature:function(F){F.preventDefault();var G=this.features,H=this.selectedIndex;F=this.map;if(G)if(H=this._getLocation(G[H]),G=H[0],H=H[1],G||(G=this.location),H&&H.intersects(this.location)||(this.location=G),H&&H.getWidth()&&H.getHeight())F.setExtent(H,!0);else{var J=F.getNumLevels();H=F.getLevel();
var I=F.getMaxZoom(),R=this.zoomFactor||1;0<J?H!==I&&(J=H+R,J>I&&(J=I),F.navigationManager._wheelZoom({value:J-H,mapPoint:G},!0)):F.navigationManager._wheelZoom({value:1/Math.pow(2,R)*2,mapPoint:G},!0)}},_updatePagingControls:function(){var F=this._prevFeatureButton,G=this._nextFeatureButton,H=this.selectedIndex,J=this.features?this.features.length:0;this.pagingControls&&1<J?(0===H?b.add(F,"hidden"):b.remove(F,"hidden"),H===J-1?b.add(G,"hidden"):b.remove(G,"hidden")):(b.add(F,"hidden"),b.add(G,"hidden"))},
_updatePagingInfo:function(){var F=this.features?this.features.length:0,G=this._nls,H="\x26nbsp;";this.pagingInfo&&1<F&&G.NLS_pagingInfo&&(H=z.substitute({index:this.selectedIndex+1,total:F},G.NLS_pagingInfo));F&&(G=this.getSelectedFeature(),F=G.getInfoTemplate(),G=G.getTitle(),F&&!/esri\.InfoTemplate/.test(F.declaredClass)&&this.titleInBody||!G||(H=G+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var F=this.features,G=this.deferreds,H=F?F.length:0,J=this._spinner,
I=this._actionList,R=this._nls;this._updatePagingControls();this._updatePagingInfo();H?b.remove(I,"hidden"):b.add(I,"hidden");G&&G.length?F?b.remove(J,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+R.NLS_searching+"...\x3c/div\x3e"):b.add(J,"hidden");H||G&&G.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+R.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});B.setObject("dijit.Popup",D,t);return D})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){D=D(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var b=B.hitch;this.__set_title=b(this,this.__set_title);this.__err_title=b(this,this.__err_title);this.__set_content=b(this,this.__set_content);this.__err_content=b(this,this.__err_content)},
setMap:function(b){this.map=b},unsetMap:function(b){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(b,d){k.isDefined(b)?B.isObject(b)?g.place(b,d,"only"):d.innerHTML=b:d.innerHTML=""},startupDijits:function(b){this._processDijits(b)},destroyDijits:function(b){this._processDijits(b,!0)},getDijits:function(b){var d=[];b&&1===b.children.length&&(b=b.children[0])&&(d=(d=l.byNode(b))?
[d]:l.findWidgets(b));return d},_processDijits:function(b,d){var q=this.getDijits(b);a.forEach(q,function(m){if(d){if(m._started&&!m._destroyed)try{m.destroyRecursive?m.destroyRecursive():m.destroy&&m.destroy()}catch(n){}}else if(!m._started)try{m.startup()}catch(n){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var b=this.map;this.__handles=[c.connect(b,"onPan",this,this.__onMapPan),c.connect(b,"onZoomStart",this,this.__onMapZmStart),c.connect(b,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var b=this.__handles;b&&(a.forEach(b,c.disconnect,c),this.__handles=null)},__onMapPan:function(b,d){this.move(d,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new f(this.coords));this.hide(null,!0)},__onMapExtChg:function(b,d,q){b=this.map;var m=this.mapCoords;m?this.show(m,null,!0):(d=q?b.toScreen(this.__mcoords):this.coords.offset(d&&d.x||0,d&&d.y||0),this.show(d,null,!0))},__setValue:function(b,d){this[b].innerHTML="";var q="_dfd"+
b,m=this[q];m&&-1===m.fired&&(m.cancel(),this[q]=null);k.isDefined(d)&&(d instanceof h?(this[q]=d,d.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,d))},__set_title:function(b){this._dfd_title=null;this.__render("_title",b)},__err_title:function(b){this._dfd_title=null},__set_content:function(b){this._dfd_content=null;this.__render("_content",b)},__err_content:function(b){this._dfd_content=null},__render:function(b,d){var q=this[b];this.place(d,q);this.isShowing&&(this.startupDijits(q),
"_title"===b&&this._adjustContentArea&&this._adjustContentArea())}});return r.InfoWindowBase=D})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z){function w(y){return"sizeInfo"===y.type}D=D(z,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",B.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",B.hitch(this,this._processFeatures));this.on("set-features",B.hitch(this,this._processFeatures));this.on("selection-change",B.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(y){if(y&&y.length){this.clearFeatures(!0);var x,A;y[0]instanceof h?A=y:x=y;x?this._updateFeatures(null,x):(this.deferreds=A,A=A.slice(0),a.forEach(A,function(v){v.addBoth(B.hitch(this,
this._updateFeatures,v))},this))}},clearFeatures:function(y){this.features=this.deferreds=this._marked=null;this.count=0;var x=this.selectedIndex;this.selectedIndex=-1;if(-1<x)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!y})},getSelectedFeature:function(){var y=this.features;if(y)return y[this.selectedIndex]},select:function(y){0>y||y>=this.count||(this.selectedIndex=y,this.onSelectionChange())},enableHighlight:function(y){this._highlighted=y.graphics.add(new l(new r(0,0,y.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(y);this.markerSymbol||(y=this.markerSymbol=new d,y.setStyle(d.STYLE_TARGET),y._setDim(16,16,0),y.setOutline(new m(q.STYLE_SOLID,new c([0,255,255]),2,m.CAP_ROUND,m.JOIN_ROUND)),y.setColor(new c([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new q(q.STYLE_SOLID,new c([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new n(n.STYLE_NULL,new q(q.STYLE_SOLID,new c([0,255,255]),2),new c([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new n(n.STYLE_SOLID,new q(q.STYLE_SOLID,new c([0,255,255]),1.33),null))},disableHighlight:function(y){var x=this._highlighted;x&&(x.hide(),y.graphics.remove(x),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var y=this.features&&this.features[this.selectedIndex];this._highlighted&&y&&y.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(y,x){var A=x.geometry,v=this._highlighted;if(A&&v){v.hide();!v._graphicsLayer&&y&&y.graphics.add(v);v.setGeometry(k.fromJson(A.toJson()));switch(A.type){case "point":case "multipoint":var u=x.getLayer(),C=x.symbol||u&&u._getSymbol(x);if(u&&C){var E;A=C.xoffset||0;var F=C.yoffset||0,G=C.angle||0;switch(C.type){case "simplemarkersymbol":var H=E=C.size||0;break;case "picturemarkersymbol":H=C.width||0;E=C.height||0;break;case "textsymbol":H=E=C.font&&C.font.size||0}var J=x.symbol?
null:u._getRenderer(x);(u=this._getSizeInfo(J))?C=u=J.getSize(x,{sizeInfo:u,shape:C.style,resolution:y&&y.getResolutionInMeters&&y.getResolutionInMeters()}):null!=x.size?C=u=x.size:(C=H,u=E);J=this.markerSymbol;C&&u&&(A&&(A=A/H*C),F&&(F=F/E*u),J._setDim(C+4,u+4,0));J.setOffset(A,F);J.setAngle(G)}break;case "polyline":J=this.lineSymbol;break;case "polygon":J=this.fillSymbol}v.setSymbol(J)}else v&&v.hide()},showClosestFirst:function(y){var x=this.features;if(x&&x.length){if(1<x.length){var A,v=Infinity,
u=-1,C,E=f.getLength,F=y.spatialReference;y=y.normalize();for(A=x.length-1;0<=A;A--)if(C=x[A].geometry){var G=C.spatialReference;var H=0;try{var J="point"===C.type?C:C.getExtent().getCenter();J=J.normalize();F&&G&&!F.equals(G)&&F._canProject(G)&&(J=F.isWebMercator()?b.geographicToWebMercator(J):b.webMercatorToGeographic(J));H=E(y,J)}catch(I){}0<H&&H<v&&(v=H,u=A)}0<u&&(x.splice(0,0,x.splice(u,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=y)},_trackMapLevelChange:function(y){this._untrackMapLevelChange();
this._mapLevelChangeHandle=y.on("extent-change",B.hitch(this,function(x){x.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(y){y=a.indexOf(this.deferreds,y);if(-1!==y)return this.deferreds.splice(y,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(y){var x=this._marked;x&&(this._marked=null,this.showClosestFirst(x));this.onDfdComplete(y)},
_updateFeatures:function(y,x){if(y){if(this.deferreds){var A=this._unbind(y);if(A)if(x&&x instanceof Error){if(this._fireComplete(x),2===A)this.onSetFeatures()}else if(x&&x.length)if(this.features){var v=a.filter(x,function(u){return-1===a.indexOf(this.features,u)},this);this.features=this.features.concat(v);this.count=this.features.length;this._fireComplete();if(2===A)this.onSetFeatures()}else{this.features=x;this.count=x.length;this.selectedIndex=0;this._fireComplete();if(2===A)this.onSetFeatures();
this.select(0)}else if(this._fireComplete(),2===A)this.onSetFeatures()}}else this.features=x,this.count=x.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(y){return y?y.sizeInfo||a.filter(y.visualVariables,w)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(y){y.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(y){(y=y.getLayer())&&!this._featureLayers[y.id]&&
(1===y.currentMode||0===y.currentMode&&6===y.mode)&&y.objectIdField&&y.hasXYFootprint&&y.queryFeatures&&(this._featureLayers[y.id]=y,y=y.on("update-end",B.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(y))},this)},_fLyrUpdateEndHandler:function(y){if(!y.error){var x=this,A=y.target,v=A.getSelectedFeatures(),u=0===A.currentMode&&6===A.mode,C={},E=[];a.forEach(this.features,function(F){if(F.getLayer()===A){var G=F.attributes[A.objectIdField];C[G]=F;E.push(G)}});E.length&&(y=new t,
y.objectIds=E,A.queryFeatures(y,function(F){a.forEach(F.features,function(G){var H=C[G.attributes[A.objectIdField]],J=!1;H.geometry!==G.geometry||A.hasWebGLSurface()?(H.setGeometry(G.geometry),J=!0):u&&v&&-1!==a.indexOf(v,G)&&(J=!0);J&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(G.geometry)},x)}))}},_checkFeatureResolution:function(){var y=this.getSelectedFeature(),x=this.map;if(y&&x){var A=y.getLayer();if(A){var v=y.getResolution();2===A.currentMode&&y.geometry&&
v&&v>x.getResolution()&&(x=x.getResolutionForPopup(),(A=this._refetchFeature(y,x,A))&&A.then(B.hitch(this,this._updateFeatureResolution,y,x)))}}},_refetchFeature:function(y,x,A){if(y=this._createQueryForCustomResolution(y,x,A))return A.queryFeatures(y).then(function(v){return v&&v.features[0]})},_createQueryForCustomResolution:function(y,x,A){A=A.objectIdField;var v=y.attributes;v=v&&A&&v[A];if(null==v)return null;var u=new t;u.objectIds=[v];u.maxAllowableOffset=x;u.outFields=[A];u.outSpatialReference=
y.geometry.spatialReference;return u},_updateFeatureResolution:function(y,x,A){y.getResolution()!==x&&(y.setResolution(x),y.setGeometry(A.geometry),this._highlighted&&y===this.getSelectedFeature()&&this._highlighted.setGeometry(y.geometry))}});return e.PopupBase=D})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(D){return{add:function(B,a){B.popupManager||(B.popupManager=new D(a),B.popupManager.setMap(B))},remove:function(B){var a=B.popupManager;a&&(a.unsetMap(),B.popupManager=
void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){var n;l=l(q,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(t){this._mapClickHandler=k.hitch(this,this._mapClickHandler)},
setMap:function(t){if(this.map)if(t!==this.map)this.unsetMap();else return;this.map=t;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(t){var z;if(t&&(z=t.getLayer())&&(t=z.id,this._featureLayersCache[t])){var w=t.lastIndexOf("_");-1<w&&(t=t.substring(0,w),z=this.map.getLayer(t))}return z},_enabledSetter:function(t){this.enabled=t;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&
(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(t){var z=this.map.infoWindow,w=t.graphic;z&&this.map.loaded&&(z.clearFeatures&&z.setFeatures?this._showPopup(t):w&&w.getInfoTemplate()&&this._showInfoWindow(w,t.mapPoint))},_showPopup:function(t){var z=this.map,w=z.infoWindow,y=this,x=[],A=[z.graphics].concat(e.map(z.graphicsLayerIds,z.getLayer,z));e.forEach(A,function(C){var E=
C.getFeatureReduction&&C.getFeatureReduction();C&&C.loaded&&C.infoTemplate&&!C.suspended&&(!E||!y._isReductionEnabled(C)||E.infoTemplate&&!E.disablePopup)&&x.push(C)});var v=[];e.forEach(z.layerIds,function(C){(C=z.getLayer(C))&&C.loaded&&!C.suspended&&(y._isImageServiceLayer(C)&&C.infoTemplate?x.push(C):"esri.layers.WMSLayer"===C.declaredClass&&C.getFeatureInfoURL?x.push(C):"esri.layers.ArcGISDynamicMapServiceLayer"!==C.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==C.declaredClass||!C.infoTemplates||
v.push(C))});var u=z.getResolutionForPopup();this._getSubLayerFeatureLayers(v,u).then(function(C){x=x.concat(C);C=t.graphic&&t.graphic.getParentGraphic()||t.graphic;var E=null;C&&C.getInfoTemplate()&&!y._isImageServiceLayer(C.getLayer())&&(E=C);if(x.length||E){var F=y._calculateClickTolerance(x),G=t.screenPoint;C=z.toMap(new B(G.x-F,G.y+F));F=z.toMap(new B(G.x+F,G.y-F));var H=new D(C.x,C.y,F.x,F.y,z.spatialReference);if(H=H.intersects(z.extent)){var J=new h,I=!!E,R=!0;C=e.map(x,function(O){J.timeExtent=
O.useMapTime?z.timeExtent:null;var P=y._isReductionEnabled(O);O=P?O.getFeatureReductionLayer():O;var L=y._featureLayersCache[O.id];if(y._isImageServiceLayer(O)){J.geometry=t.mapPoint;R=!1;var K={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};y._isTiledImageServiceLayer(O)?K=O.fetchPopupFromTiles(J):(K=O.queryVisibleRasters(J,K),K.addCallback(function(){var W=O.getVisibleRasters();I=I||0<W.length;return W}))}else if("esri.layers.WMSLayer"===O.declaredClass){K=new r;var Q=O._getPopupGraphic(z,
t.screenPoint);Q?(K.resolve([Q]),I=!0):K.resolve([])}else L||"function"===typeof O.queryFeatures&&(0===O.currentMode||1===O.currentMode)?(J.geometry=H,K=O.queryFeatures(J),K.addCallback(function(W){var ba=[];e.forEach(W.features,function(S){S.visible&&(ba.push(S),L&&S.setResolution(u))});I=I||0<ba.length;return ba})):(K=new r,Q=e.filter(O.graphics,function(W){return W&&W.visible&&H.intersects(W.geometry)}),P&&y._isParentLayer(O,E)&&(P=y._findGraphicById(Q,E,"cluster_id"))&&(E=P),I=I||0<Q.length,K.resolve(Q));
return K});E&&(F=new r,F.resolve([E]),C.unshift(F));e.some(C,function(O){return!O.isFulfilled()})||I?(w.setFeatures(C),w.show(t.mapPoint,{closestFirst:R})):(w.hide(),w.clearFeatures())}}})},_getSubLayerFeatureLayers:function(t,z,w){z=z||null;var y=w||new r,x=[];w=t.length;var A=this.map.getScale(),v=!1,u=this,C=0;a:for(;C<w;C++){var E=t[C],F=E.dynamicLayerInfos||E.layerInfos;if(F){var G=null;E._params&&(E._params.layers||E._params.dynamicLayers)&&(G=E.visibleLayers);G=c._getVisibleLayers(F,G);for(var H=
c._getLayersForScale(A,F),J=F.length,I=0;I<J;I++){var R=F[I],O=R.id,P=E.infoTemplates[O];if(!R.subLayerIds&&P&&P.infoTemplate&&-1<e.indexOf(G,O)&&-1<e.indexOf(H,O)){if(!n){v=!0;break a}var L=E.id+"_"+O,K=this._featureLayersCache[L];K&&K.loadError||(K||((K=P.layerUrl)||(K=R.source?this._getLayerUrl(E.url,"/dynamicLayer"):this._getLayerUrl(E.url,O)),K=new n(K,{parentLayer:E,id:L,drawMode:!1,mode:n.MODE_SELECTION,outFields:this._getOutFields(P.infoTemplate),resourceInfo:P.resourceInfo,source:R.source}),
this._featureLayersCache[L]=K),K.setDefinitionExpression(E.layerDefinitions&&E.layerDefinitions[O]),K.setGDBVersion(E.gdbVersion),K.setInfoTemplate(P.infoTemplate),K.setMaxAllowableOffset(z),K.setUseMapTime(!!E.useMapTime),E.layerDrawingOptions&&E.layerDrawingOptions[O]&&E.layerDrawingOptions[O].renderer&&K.setRenderer(E.layerDrawingOptions[O].renderer),x.push(K))}}}}if(v){var Q=new r;m(["./layers/FeatureLayer"],function(ba){n=ba;Q.resolve()});Q.then(function(){u._getSubLayerFeatureLayers(t,z,y)})}else{var W=
[];e.forEach(x,function(ba){if(!ba.loaded){var S=new r;b.once(ba,"load, error",function(){S.resolve()});W.push(S.promise)}});W.length?d(W).then(function(){x=e.filter(x,function(ba){return!ba.loadError&&ba.isVisibleAtScale(A)});y.resolve(x)}):(x=e.filter(x,function(ba){return ba.isVisibleAtScale(A)}),y.resolve(x))}return y.promise},_getLayerUrl:function(t,z){var w=t.indexOf("?");return-1===w?t+"/"+z:t.substring(0,w)+"/"+z+t.substring(w)},_getOutFields:function(t){var z=t.info&&t.info.fieldInfos;if(z&&
z.length&&"esri.dijit.PopupTemplate"===t.declaredClass){var w=[];e.forEach(z,function(y){var x=y.fieldName&&y.fieldName.toLowerCase();x&&"shape"!==x&&0!==x.indexOf("relationships/")&&w.push(y.fieldName)})}else w=["*"];return w},_calculateClickTolerance:function(t){var z=f("esri-touch")?9:6,w,y;e.forEach(t,function(x){if(w=x.renderer)"esri.renderer.SimpleRenderer"===w.declaredClass?((y=w.symbol)&&y.xoffset&&(z=Math.max(z,Math.abs(y.xoffset))),y&&y.yoffset&&(z=Math.max(z,Math.abs(y.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
w.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==w.declaredClass||e.forEach(w.infos,function(A){(y=A.symbol)&&y.xoffset&&(z=Math.max(z,Math.abs(y.xoffset)));y&&y.yoffset&&(z=Math.max(z,Math.abs(y.yoffset)))})});return z},_showInfoWindow:function(t,z){var w=this.map.infoWindow,y=t.geometry;y=y&&"point"===y.type?y:z;var x=t.getContent();w.setTitle(t.getTitle());if(x&&k.isString(x.id)){var A=g.byId(x.id);A&&A.set&&/_PopupRenderer/.test(A.declaredClass)&&A.set("showTitle",!1)}w.setContent(x);w.show(y)},
_findGraphicById:function(t,z,w){var y,x=(z=z.attributes)&&z[w];e.some(t,function(A){var v=A.attributes;v&&v[w]===x&&(y=A);return!!y});return y},_isParentLayer:function(t,z){var w=z&&z.getLayer();return t&&w===t},_isReductionEnabled:function(t){return t&&t.isFeatureReductionActive&&t.isFeatureReductionActive()},_isImageServiceLayer:function(t){return"esri.layers.ArcGISImageServiceLayer"===t.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===t.declaredClass||"esri.layers.RasterXLayer"===
t.declaredClass},_isTiledImageServiceLayer:function(t){return"esri.layers.RasterXLayer"===t.declaredClass}});return a.PopupManager=l})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v){var u=c.connect,C=c.disconnect,E=q("chrome"),F=q("safari"),G=[e.NUMPAD_PLUS,61,187,e.NUMPAD_MINUS,173,189,e.UP_ARROW,e.NUMPAD_8,e.RIGHT_ARROW,e.NUMPAD_6,e.DOWN_ARROW,e.NUMPAD_2,e.LEFT_ARROW,e.NUMPAD_4,e.PAGE_UP,e.NUMPAD_9,e.PAGE_DOWN,e.NUMPAD_3,e.END,e.NUMPAD_1,e.HOME,e.NUMPAD_7];D=D(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,J){this.map=H;B.mixin(this,J);var I=H.__container;q("esri-pointer")?(this.pointerEvents=
new b(I,{map:H}),this.eventModel="pointer"):q("esri-touch")?(q("ios")||(this.mouseEvents=new k(I,{map:H})),this.touchEvents=new f(I,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new k(I,{map:H}),this.eventModel="mouse");this._zoomRect=new t(null,new v(d.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=B.hitch(this,this._adjustPinch);this._adjustPinchEnd=B.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var J=this.mouseEvents;g.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new w(0,0),B.mixin(this._dragOrigin,H.screenPoint),C(this._panStartHandle),C(this._panHandle),C(this._panEndHandle),this._panStartHandle=u(J,"onMouseDragStart",this,this._panStart),this._panHandle=u(J,"onMouseDrag",this,this._pan),this._panEndHandle=u(J,"onMouseUp",this,this._panEnd),E||F)&&(H.preventDefault(),l.curNode&&l.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){C(this._panStartHandle);C(this._panHandle);C(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var J=this.map;J.__panning&&(J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),J.resetMapCursor())},_zoomInit:function(H){var J=this.map,I=this.pointerEvents||this.mouseEvents;(g.isLeft(H)||H.pointerType)&&J.isRubberBandZoom&&H.shiftKey&&(J.setCursor("crosshair"),this._dragOrigin=
B.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=u(I,"onSwipeMove",this,this._zoom),this._zoomEndHandle=u(I,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=u(I,"onMouseDrag",this,this._zoom),this._zoomEndHandle=u(I,"onMouseUp",this,this._zoomEnd)),E&&H.preventDefault())},_zoom:function(H){var J=this.map,I=this._normalizeRect(H).offset(J.__visibleRect.x,J.__visibleRect.y);H=J.graphics;var R=this._zoomRect;R.geometry||J.setCursor("crosshair");
R.geometry&&H.remove(R,!0);var O=J.toMap(new w(I.x,I.y));I=J.toMap(new w(I.x+I.width,I.y+I.height));I=new x(O.x,O.y,I.x-O.x,O.y-I.y,J.spatialReference);I._originOnly=!0;R.setGeometry(I);H.add(R,!0)},_zoomEnd:function(H){var J=this._zoomRect,I=this.map,R=I.extent,O=I.spatialReference;C(this._zoomHandle);C(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(I._canZoom(this._zoomDir)&&J.getDojoShape()){I.graphics.remove(J);J.geometry=null;H=this._normalizeRect(H);H.x+=I.__visibleRect.x;
H.y+=I.__visibleRect.y;if(-1===this._zoomDir){var P=R.getWidth();H=(P*I.width/H.width-P)/2;O=new y(R.xmin-H,R.ymin-H,R.xmax+H,R.ymax+H,O)}else R=I.toMap({x:H.x,y:H.y+H.height}),H=I.toMap({x:H.x+H.width,y:H.y}),O=new y(R.x,R.y,H.x,H.y,O);I._extentUtil(null,null,O)}J.getDojoShape()&&I.graphics.remove(J,!0);this._zoomDir=0;I.resetMapCursor()},_wheelZoom:function(H,J){var I=this.map;if(!J){if(I.smartNavigation&&!H.shiftKey&&!I._isPanningOrZooming()){I.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}var R=H.timeStamp;if(!m.isDefined(R)||0>=R)R=(new Date).getTime();if(100>(this._mwts?R-this._mwts:R))return;this._mwts=R}I._canZoom(H.value)&&I._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var J=this.map;if(H.shiftKey&&!J._isPanningOrZooming())this._setScrollWheelPan(!1),J.enableScrollWheelZoom(),this._wheelZoom(H);else{var I=0,R=0;q("ff")?H.axis===H.HORIZONTAL_AXIS?I=-H.detail:R=-H.detail:(I=H.wheelDeltaX,R=H.wheelDeltaY);
J.translate(I,R)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);C(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=u(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var J=H.keyCode,I=this.map;if(-1!==a.indexOf(G,J)){if(J===e.NUMPAD_PLUS||61===J||187===J)I._extentUtil({numLevels:1});else if(J===e.NUMPAD_MINUS||173===J||189===J)I._extentUtil({numLevels:-1});else{I.__panning||I.__panStart(0,0);switch(J){case e.UP_ARROW:case e.NUMPAD_8:this._keyDy+=10;break;
case e.RIGHT_ARROW:case e.NUMPAD_6:this._keyDx-=10;break;case e.DOWN_ARROW:case e.NUMPAD_2:this._keyDy-=10;break;case e.LEFT_ARROW:case e.NUMPAD_4:this._keyDx+=10;break;case e.PAGE_UP:case e.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case e.PAGE_DOWN:case e.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case e.END:case e.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case e.HOME:case e.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}I.__pan(this._keyDx,this._keyDy)}h.stop(H)}},_keyEnd:function(H){var J=
this.map;J.__panning&&H.keyCode!==e.SHIFT&&(J.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var J=this.map;J=J._zoomAnim||J._panAnim;if(H.shiftKey)return!1;J&&J._active&&(J.stop(),J._fire("onEnd",[J.node]));this._dragOrigin=new w(0,0);B.mixin(this._dragOrigin,H.screenPoint);C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=u(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=u(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var J=this.map;J.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,J.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(J.setCursor("move"),J.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var J=this.map;J.__panning&&(J.resetMapCursor(),J.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var J=this.map,I=J._zoomAnim||J._panAnim;I&&I._active?(I.stop(),I._fire("onEnd",[I.node])):J.__panning&&(H.screenPoint=new w(this._panX,this._panY),H.mapPoint=J.toMap(H.screenPoint),this._swipeEnd(H));C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=u(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=u(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var J=this.map;
if(H.screenPoints){this.currLength=A.getLength(H.screenPoints[0],H.screenPoints[1]);if(J.__zooming){var I=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(J.extent,I,this._dragOrigin);J.__zoom(this._zoomStartExtent,I,this._dragOrigin)}else this._dragOrigin=new w((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,J.__zoomStart(J.extent,this._dragOrigin);this._pinchScale=I;J._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var J=this.currLength/this._length,I=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor);if(H.__tileInfo){var R=z.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),O=H.__getExtentForLevel(R.lod.level,this._zoomAnimAnchor),
P=H.getMinZoom(),L=H.getMaxZoom(),K=O.extent;O=O.lod;var Q=I/K.getWidth(),W=R.lod.level;1>J?Q>J&&W--:Q<J&&W++;W<P?W=P:W>L&&(W=L);W!==R.lod.level&&(O=H.__getExtentForLevel(W,this._zoomAnimAnchor),K=O.extent,O=O.lod);this._zoomEndExtent=K;this._zoomEndLod=O;H._zoomAnim=n.animateRange({range:{start:I/this._zoomStartExtent.getWidth(),end:Q},duration:d.defaults.map.zoomDuration,rate:d.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var J=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(J,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,J=H.extent.getWidth()/this._zoomEndExtent.getWidth(),I=this.__scaleExtent(H.extent,1/J,this._zoomAnimAnchor),R=this._dragOrigin,
O=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(I,J,R,O,!0)},__scaleExtent:function(H,J,I){I=I||H.getCenter();J=H.expand(J);var R=H.xmin-(J.getWidth()-H.getWidth())*(I.x-H.xmin)/H.getWidth();I=H.ymax-(J.getHeight()-H.getHeight())*(I.y-H.ymax)/H.getHeight();return new y(R,I-J.getHeight(),R+J.getWidth(),I,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var J=this._dragOrigin.x,I=this._dragOrigin.y;
H=new x((H.x<J?H.x:J)-this.map.__visibleRect.x,(H.y<I?H.y:I)-this.map.__visibleRect.y,Math.abs(H.x-J),Math.abs(H.y-I));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=u(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=u(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=u(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=u(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){C(this._panInitHandle);this._panInitHandle=null;C(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?u(this.pointerEvents,"onSwipeStart",this,this._zoomInit):u(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){C(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=u(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){C(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=u(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){C(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=u(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=u(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=u(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=u(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
u(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=u(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){C(this._dblClickHandle);C(this._zoomOutHandle);this._dblTapHandle&&C(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=u(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){C(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=u(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){C(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=u(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
u(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){C(this._keyHandle);C(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,J=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<J.length;H++)C(J[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return r.MapNavigationManager=D})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,
B,a,c,h,g,e,l,r,k){var f=h.connect,b=h.disconnect;D=D([l],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==c("mac")?1:3,wheelDivisor:2>c("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(d,q){this.node=d;a.mixin(this,q);var m=function(n){g.stop(n);return!1};c("mozilla")&&B.style(d,"MozUserSelect","none");this._handles=[f(d,"onselectstart",m),f(d,"ondragstart",m),f(d,"onmouseenter",this,this._onMouseEnterHandler),f(d,
"onmouseleave",this,this._onMouseLeaveHandler),f(d,"onmousedown",this,this._onMouseDownHandler),f(d,"onclick",this,this._onClickHandler),f(d,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=f(d,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=f(d,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(m=this.map)?m.isScrollWheelZoom||
m.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(d,q){if(!this._preventClick||"onClick"!==d&&"onDblClick"!==d){if(this[d])this[d](q);if(this.map&&this.map[d])this.map[d](q)}},_processEvent:function(d){d=g.fix(d,d.target);var q=this.map,m=q&&q.position;m&&("DOMMouseScroll"===d.type&&3>c("ff")?d.screenPoint=new k(window.scrollX+d.screenX-m.x,window.scrollY+d.screenY-m.y):d.screenPoint=new k(d.pageX-m.x,d.pageY-m.y),d.mapPoint=q.extent?q.toMap(d.screenPoint):new r);
d.numPoints=0;return d},_onMouseEnterHandler:function(d){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=f(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=f(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(d))},_onMouseLeaveHandler:function(d){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(d))},_onMouseMoveHandler:function(d){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(d))},_onMouseDownHandler:function(d){b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=f(document,"onmousemove",this,this._onMouseDragHandler);this._startX=d.pageX;this._startY=d.pageY;this._fire("onMouseDown",this._processEvent(d))},_onMouseUpHandler:function(d){var q=this.node;q.releaseCapture&&q.releaseCapture();
b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=f(q,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(d))},_onMouseDragHandler:function(d){b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=f(document,"onmousemove",this,this._onMouseDraggingHandler);b(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=f(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=f(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(d))},_onMouseDraggingHandler:function(d){g.stop(d);this._fire("onMouseDrag",this._processEvent(d))},_onDragMouseUpHandler:function(d){var q=this.node;q.releaseCapture&&q.releaseCapture();this._dragEnd=!0;b(this._docLeaveConnect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
f(q,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=f(q,"onmouseup",this,this._onMouseUpHandler);d=this._processEvent(d);this._fire("onMouseDragEnd",d);this._fire("onMouseUp",d)},_onDocMouseOut:function(d){var q=9>c("ie")?d.toElement:d.relatedTarget,m=q&&q.nodeName.toLowerCase();(!q||(c("chrome")||c("safari"))&&"html"===m)&&this._onDragMouseUpHandler(d)},_onClickHandler:function(d){d=this._processEvent(d);if(d.pageX===this._startX&&d.pageY===this._startY){clearTimeout(this._clickTimer);
var q={},m="movementX"in d,n;for(n in d)"mozInputSource"===n||"mozPressure"===n||m&&("webkitMovementX"===n||"webkitMovementY"===n)||(q[n]=d[n]);this._clickEvent=q;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>c("ie")&&(this._clickEvent.graphic=e._ieGraphic,delete e._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(d){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(d))},
_onMouseWheelHandler:function(d){var q=this.map;(q?q.isScrollWheelZoom||q.isScrollWheelPan:this.preventPageScroll)&&g.stop(d);q=c("ff")||c("mozilla")?-d.detail/this.mozWheelDivisor:d.wheelDelta/this.wheelDivisor;var m=Math.abs(q);m=m<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;d.value=0>q?-m:m;this._fire("onMouseWheel",this._processEvent(d))},_onKeyDownHandler:function(d){this._fire("onKeyDown",d)},_onKeyUpHandler:function(d){this._fire("onKeyUp",d)},enableMouseWheel:function(d){b(this._scrollHandle);
this._scrollHandle=f(this.node,c("ff")||c("mozilla")?d?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(d){this.doubleClickDuration=d?0:this._initialDuration},preventClickEvents:function(d){this._preventClick=d},destroy:function(){var d=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
q;for(q=0;q<d.length;q++)b(d[q]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return e.MouseEvents=D})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(D,B,a,c,h,g,e,l,r){D=D([e],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(k,f){this.node=k;a.mixin(this,f);B.setSelectable(k,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);this._fireClickEvent=a.hitch(this,this._fireClickEvent);k.addEventListener("touchstart",
this._touchStart,!1);k.addEventListener("touchmove",this._touchMove,!1);k.addEventListener("touchend",this._touchEnd,!1);k.addEventListener("touchcancel",this._touchCancel,!1);this.map&&c("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),k.addEventListener("mouseover",this._mouseOver,!1),k.addEventListener("mouseout",
this._mouseOut,!1),k.addEventListener("mousedown",this._mouseDown,!1),k.addEventListener("mouseup",this._mouseUp,!1),k.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(k){var f=this._touches,b,d=k.changedTouches.length,q,m,n=(new Date).getTime();this._touchStartTS=n;if(!(c("android")&&c("safari")&&1===k.targetTouches.length&&k.touches.length===k.targetTouches.length&&k.targetTouches.length===
k.changedTouches.length&&0===k.changedTouches[0].identifier&&f[k.changedTouches[0].identifier])){this._addTouch(k);for(b=0;b<d;b++){var t=k.changedTouches[b];var z=f[t.identifier]={};z.startX=t.pageX;z.startY=t.pageY;z.startTS=n;-1===this._touchIds.indexOf(t.identifier)&&this._touchIds.push(t.identifier)}this._swipeActive&&(q=this._nodeTouches[0]);this._pinchActive&&(m=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(k,
q))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(k,[q,m]))):2===this._numTouches?this._swipeActive&&(q&&(z=f[this._touchIds[0]],z.startX=q.pageX,z.startY=q.pageY,z.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(k,q))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(k,q))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(k,[q,m])))}},_touchMove:function(k){k.preventDefault();
this._updateTouch(k);var f=this._touches,b,d=k.changedTouches.length,q;if(!(c("android")&&c("safari")&&1===k.targetTouches.length&&k.touches.length===k.targetTouches.length&&k.targetTouches.length===k.changedTouches.length&&0===k.changedTouches[0].identifier&&f[k.changedTouches[0].identifier]&&1<this._touchIds.length)){for(b=0;b<d;b++){var m=k.changedTouches[b];if(q=f[m.identifier]){var n=Math.abs(m.pageX-q.startX);m=Math.abs(m.pageY-q.startY);!q.moved&&(n>=this.tapRadius||m>=this.tapRadius)&&(q.moved=
q.absMoved=!0);var t=t?t:q.moved}}1===this._numTouches?(f=k.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(k,f)):t&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(k,f)))):2===this._numTouches&&(b=this._nodeTouches[0],d=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(k,[b,d])):t&&(t=f[b.identifier],q=f[d.identifier],f=Math.abs(t.startX-q.startX),t=Math.abs(t.startY-q.startY),q=Math.abs(b.pageX-d.pageX),
n=Math.abs(b.pageY-d.pageY),Math.abs(Math.sqrt(q*q+n*n)-Math.sqrt(f*f+t*t))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(k,[b,d])))))}},_touchEnd:function(k){this._removeTouch(k);var f=this._touches,b=k.changedTouches,d,q=b.length,m,n,t=(new Date).getTime(),z=this._touchIds;for(d=0;d<q;d++)if(n=f[b[d].identifier])n.absMoved&&(m=!0),n.pageX=b[d].pageX,n.pageY=b[d].pageY,n.endTS=t;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(k,b[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(k,b));else{if(!m){q=Infinity;m=-Infinity;t=Infinity;var w=-Infinity,y=this.tapStartTolerance,x=[],A=!0;for(d=0;d<z.length;d++)n=f[z[d]],x.push(n),n.startTS<q&&(q=n.startTS),n.startTS>m&&(m=n.startTS),n.endTS<t&&(t=n.endTS),n.endTS>w&&(w=n.endTS),delete f[z[d]];1===x.length&&b[0]&&(f=Math.abs(b[0].pageY-x[0].startY),Math.abs(b[0].pageX-x[0].startX)>=
this.tapRadius||f>=this.tapRadius)&&(A=!1);A&&Math.abs(m-q)<=y&&Math.abs(w-t)<=y&&this._basicTap(k,x)}}else 1===this._numTouches&&this._pinchActive&&(d=this._nodeTouches[0],n=f[d.identifier],n.startX=d.pageX,n.startY=d.pageY,this._pinchActive=n.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(k,[b[0],d])))},_touchCancel:function(k){this._numTouches&&this._touchEnd(k)},_basicTap:function(k,f){var b=(new Date).getTime(),d=this;k=this._processTouchEvent(k,f);this._taps.push({touchInfos:f,ts:b,
event:k});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",k);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var q=d;d=null;clearTimeout(q._tapTimer);q._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(k){var f=this._taps,b=f[0],d=f[1],q=b.touchInfos,m=d&&d.touchInfos;f.length&&(k||(this._taps=[]),b&&d?q.length===m.length?d.ts-b.ts<=this.doubleTapDuration?(1===q.length?
(k=Math.abs(q[0].startX-m[0].startX),q=Math.abs(q[0].startY-m[0].startY),q=k<=this.doubleTapRadius&&q<=this.doubleTapRadius):q=!0,q?this._processedDoubleTap(f):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(b||d))},_processedTap:function(k){var f=k.event;this._fire("onProcessedTap",f);1===k.touchInfos.length?this._fire("onTap",this._fixEvent(f)):2===k.touchInfos.length&&this._fire("onTwoFingerTap",f)},_processedDoubleTap:function(k){var f=1===k[1].touchInfos.length;
if(f){var b=[this._fixEvent(k[0].event),this._fixEvent(k[1].event)];b[1].relatedEvents=b}k=[k[0].event,k[1].event];k[1].relatedEvents=k;this._fire("onProcessedDoubleTap",k[1]);f&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_addTouch:function(k){var f=k.changedTouches,b=this._nodeTouches,d;this._numTouches+=f.length;for(k=0;k<f.length;k++){var q=b.length;var m=!1;for(d=0;d<q&&!(m=b[d].identifier===f[k].identifier);d++);m?this._numTouches--:b.push(f[k])}for(k=b.length-1;0<=k;k--)h.isDescendant(b[k].target,
document.body)||(b.splice(k,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(k){var f=[],b=[],d=k.changedTouches,q=this._nodeTouches;this._numTouches-=d.length;0>this._numTouches&&(this._numTouches=0);for(k=0;k<d.length;k++)f.push(d[k].identifier);for(k=q.length-1;0<=k;k--)-1!==f.indexOf(q[k].identifier)&&b.push(q.splice(k,1)[0]);return b},_updateTouch:function(k){var f=[],b=k.changedTouches,d=this._nodeTouches;for(k=0;k<b.length;k++)f.push(b[k].identifier);for(k=
0;k<d.length;k++){var q=f.indexOf(d[k].identifier);-1!==q&&d.splice(k,1,b[q])}},_mouseOver:function(k){this._fire("onMouseOver",this._processMouseEvent(k))},_mouseOut:function(k){this._fire("onMouseOut",this._processMouseEvent(k))},_mouseDown:function(k){this._fire("onMouseDown",this._processMouseEvent(k))},_mouseUp:function(k){this._fire("onMouseUp",this._processMouseEvent(k))},_mouseClick:function(k){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(k)):(this._clickEvent=k,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(k,f){"onDblClick"===k&&clearTimeout(this._clickTimer);if("onDblClick"===k&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var b=this;setTimeout(function(){b.mouseEvents.preventClickEvents(!1)},350)}if(this[k])this[k](f);if(this.map&&
this.map[k])this.map[k](f)},_fixEvent:function(k){var f={},b;for(b in k)f[b]=k[b];this.map&&(f.screenPoint=f.screenPoints[0],f.mapPoint=f.mapPoints[0]);return f},_processTouchEvent:function(k,f){var b=this.map,d=b&&b.position,q=0;if(d&&f)if(a.isArray(f)){var m;k.screenPoints=[];k.mapPoints=[];for(m=0;m<f.length;m++)if(f[m]){var n=new r(f[m].pageX-d.x,f[m].pageY-d.y);k.screenPoints.push(n);k.mapPoints.push(b.extent?b.toMap(n):new l)}else q++}else k.screenPoint=new r(f.pageX-d.x,f.pageY-d.y),k.mapPoint=
b.extent?b.toMap(k.screenPoint):new l;k.numPoints=f?a.isArray(f)?f.length-q:1:0;return k},_processMouseEvent:function(k){var f=this.map,b=f&&f.position;b&&(k.screenPoint=new r(k.pageX-b.x,k.pageY-b.y),k.mapPoint=f.extent?f.toMap(k.screenPoint):new l);return k},setImmediateTap:function(k){this._immediate=k},destroy:function(){var k=this.node;k.removeEventListener("touchstart",this._touchStart,!1);k.removeEventListener("touchmove",this._touchMove,!1);k.removeEventListener("touchend",this._touchEnd,
!1);k.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(k.removeEventListener("mouseover",this._mouseOver,!1),k.removeEventListener("mouseout",this._mouseOut,!1),k.removeEventListener("mousedown",this._mouseDown,!1),k.removeEventListener("mouseup",this._mouseUp,!1),k.removeEventListener("click",this._mouseClick,!1));B.setSelectable(k,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return g.TouchEvents=D})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,B,a,c,h,g,e,l){D=D([g],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==c("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(r,
k){this.node=r;B.mixin(this,k);void 0!==r.style.msTouchAction?r.style.msTouchAction="none":void 0!==r.style.touchAction&&(r.style.touchAction="none");var f=navigator.msPointerEnabled,b=function(d){d.preventDefault()};r.addEventListener("selectstart",b,!1);r.addEventListener("dragstart",b,!1);this._pointerDown=B.hitch(this,this._pointerDown);this._pointerMove=B.hitch(this,this._pointerMove);this._pointerUp=B.hitch(this,this._pointerUp);this._pointerCancel=B.hitch(this,this._pointerCancel);r.addEventListener(f?
"MSPointerDown":"pointerdown",this._pointerDown,!1);r.addEventListener(f?"MSPointerMove":"pointermove",this._pointerMove,!1);r.addEventListener(f?"MSPointerUp":"pointerup",this._pointerUp,!1);r.addEventListener(f?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=B.hitch(this,this._mouseOver),this._mouseOut=B.hitch(this,this._mouseOut),this._mouseLeave=B.hitch(this,this._mouseLeave),this._mouseDown=B.hitch(this,this._mouseDown),this._mouseUp=B.hitch(this,this._mouseUp),
this._mouseClick=B.hitch(this,this._mouseClick),this._mouseWheel=B.hitch(this,this._mouseWheel),this._mouseMove=B.hitch(this,this._mouseMove),this._mouseEnter=B.hitch(this,this._mouseEnter),this._onKeyDown=B.hitch(this,this._onKeyDown),this._onKeyUp=B.hitch(this,this._onKeyUp),r.addEventListener("mouseover",this._mouseOver,!1),r.addEventListener("mouseout",this._mouseOut,!1),r.addEventListener("mouseleave",this._mouseLeave,!1),r.addEventListener("mousedown",this._mouseDown,!1),r.addEventListener("mouseup",
this._mouseUp,!1),r.addEventListener("click",this._mouseClick,!1),r.addEventListener("mousewheel",this._mouseWheel,!1),r.addEventListener("mousemove",this._mouseMove,!1),r.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(r){if(-1<a.indexOf(this._touchIds,r.pointerId))this._pointerUp(r);else{var k=this._touches,f=r.target,b=r.pointerId,d=this._touchIds,q=(new Date).getTime();var m=k[b]=
{};m.pointerId=b;m.startX=m.pageX=r.pageX;m.startY=m.pageY=r.pageY;m.startTS=q;d.push(b);this._numTouches++;f.setPointerCapture?f.setPointerCapture(b):f.msSetPointerCapture&&f.msSetPointerCapture(b);f=k[d[0]];k=k[d[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(f&&(f.startX=f.pageX,f.startY=f.pageY,f.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,f))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,f))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,[f,k]))))}},_pointerMove:function(r){var k=this._touches,f=this._touchIds,b;if((b=k[r.pointerId])&&(b.pageX!==r.pageX||b.pageY!==r.pageY)){b.pageX=r.pageX;b.pageY=r.pageY;var d=Math.abs(b.pageX-b.startX);var q=Math.abs(b.pageY-b.startY);!b.moved&&(d>=this.tapRadius||q>=this.tapRadius)&&(b.moved=b.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(r,r)):b.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(r,r)));else if(2===this._numTouches)if(b=k[f[0]],k=k[f[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(r,[b,k]));else if(b.moved||k.moved){f=Math.abs(b.startX-k.startX);d=Math.abs(b.startY-k.startY);q=Math.abs(b.pageX-k.pageX);var m=Math.abs(b.pageY-k.pageY);Math.abs(Math.sqrt(q*q+m*m)-Math.sqrt(f*f+d*d))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(r,[b,k])))}}},
_pointerUp:function(r){var k=this._touches,f,b=this.node,d=r.target,q=r.pointerId,m=this._touchIds,n=m.slice(0),t=a.map(n,function(x){return k[x]}),z=(new Date).getTime();if(f=k[q])if(f.pageX=r.pageX,f.pageY=r.pageY,f.endTS=z,this._numTouches--,d.releasePointerCapture?d.releasePointerCapture(q):d.msReleasePointerCapture&&d.msReleasePointerCapture(q),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(r,r));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,r));else{if(!f.absMoved){d=Infinity;q=-Infinity;m=Infinity;z=-Infinity;var w=this.tapStartTolerance,y;for(y=0;y<n.length;y++)f=t[y],f.startTS<d&&(d=f.startTS),f.startTS>q&&(q=f.startTS),f.endTS<m&&(m=f.endTS),f.endTS>z&&(z=f.endTS);Math.abs(q-d)<=w&&Math.abs(z-m)<=w&&this._basicTap(r,t)}}else 1===this._numTouches&&this._pinchActive&&(m.splice(a.indexOf(m,r.pointerId),1),delete k[r.pointerId],f=k[m[0]],
f.startX=f.pageX,f.startY=f.pageY,f.moved=!1,document.msElementsFromPoint&&(n=document.msElementsFromPoint(f.pageX,f.pageY),a.some(n,function(x){return x===b})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(r,[r,f])))},_pointerCancel:function(r){this._numTouches&&this._pointerUp(r)},_basicTap:function(r,k){var f=(new Date).getTime(),b=this,d=this._immediate;r=this._processTouchEvent(r,k);this._taps.push({touchInfos:k,
ts:f,event:r});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",r);clearTimeout(this._tapTimer);f=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var q=b;b=null;clearTimeout(q._tapTimer);q._analyzeTap(d)},d?0:f)},_analyzeTap:function(r){var k=this._taps,f=k[0],b=k[1],d=f.touchInfos,q=b&&b.touchInfos;k.length&&(r||(this._taps=[]),f&&b?d.length===q.length?b.ts-f.ts<=this.doubleTapDuration?(1===d.length?(r=Math.abs(d[0].startX-
q[0].startX),d=Math.abs(d[0].startY-q[0].startY),d=r<=this.doubleTapRadius&&d<=this.doubleTapRadius):d=!0,d?this._processedDoubleTap(k):this._processedTap(b)):this._processedTap(b):this._processedTap(b):this._processedTap(f||b))},_processedTap:function(r){var k=r.event;this._fire("onProcessedTap",k);1===r.touchInfos.length?this._fire("onTap",this._fixEvent(k)):2===r.touchInfos.length&&this._fire("onTwoFingerTap",k)},_processedDoubleTap:function(r){var k=1===r[1].touchInfos.length;if(k){var f=[this._fixEvent(r[0].event),
this._fixEvent(r[1].event)];f[1].relatedEvents=f}r=[r[0].event,r[1].event];r[1].relatedEvents=r;this._fire("onProcessedDoubleTap",r[1]);k&&(this._fire("onDoubleTap",f[1]),this._fire("onDblClick",f[1]))},_mouseOver:function(r){this._fire("onMouseOver",this._processMouseEvent(r))},_mouseMove:function(r){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(r)):this._fire("onMouseMove",this._processMouseEvent(r))},_mouseOut:function(r){this._fire("onMouseOut",this._processMouseEvent(r))},_mouseLeave:function(r){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(r))},_mouseDown:function(r){this._downX=r.pageX;this._downY=r.pageY;this._fire("onMouseDown",this._processMouseEvent(r));0===r.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(r)))},_mouseUp:function(r){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(r)));this._fire("onMouseUp",this._processMouseEvent(r))},
_mouseClick:function(r){Math.abs(r.pageX-this._downX)<=this.clickRadius&&Math.abs(r.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(r))},_mouseWheel:function(r){var k=this.map;(k?k.isScrollWheelZoom||k.isScrollWheelPan:this.preventPageScroll)&&r.preventDefault();k=r.wheelDelta?r.wheelDelta/this.wheelDivisor:-r.detail/this.mozWheelDivisor;var f=Math.abs(k);f=f<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;r.value=0>k?-f:f;this._fire("onMouseWheel",this._processMouseEvent(r))},
_mouseEnter:function(r){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(r))},_onKeyDown:function(r){this._fire("onKeyDown",r)},_onKeyUp:function(r){this._fire("onKeyUp",r)},_fire:function(r,k){if(this[r])this[r](k);if(this.map&&this.map[r])this.map[r](k)},_fixEvent:function(r){var k=
{},f;for(f in r)k[f]=r[f];k.preventDefault=function(){r.preventDefault()};k.stopPropagation=function(){r.stopPropagation()};this.map&&(k.screenPoint=k.screenPoints[0],k.mapPoint=k.mapPoints[0]);return k},_processTouchEvent:function(r,k){var f=this.map,b=f&&f.position,d=0;if(b&&k)if(B.isArray(k)){var q;r.screenPoints=[];r.mapPoints=[];for(q=0;q<k.length;q++)if(k[q]){var m=new l(k[q].pageX-b.x,k[q].pageY-b.y);r.screenPoints.push(m);r.mapPoints.push(f.extent?f.toMap(m):new e)}else d++}else r.screenPoint=
new l(k.pageX-b.x,k.pageY-b.y),r.mapPoint=f.extent?f.toMap(r.screenPoint):new e;r.numPoints=k?B.isArray(k)?k.length-d:1:0;return r},_processMouseEvent:function(r){var k=this.map,f=k&&k.position;f&&(r.screenPoint=new l(r.pageX-f.x,r.pageY-f.y),r.mapPoint=k.extent?k.toMap(r.screenPoint):new e);return r},setImmediateTap:function(r){this._immediate=r},destroy:function(){var r=this.node;r.removeEventListener("MSPointerDown",this._pointerDown,!1);r.removeEventListener("MSPointerMove",this._pointerMove,
!1);r.removeEventListener("MSPointerUp",this._pointerUp,!1);r.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(r.removeEventListener("mouseover",this._mouseOver,!1),r.removeEventListener("mousemove",this._mouseMove,!1),r.removeEventListener("mouseout",this._mouseOut,!1),r.removeEventListener("mouseleave",this._mouseLeave,!1),r.removeEventListener("mousedown",this._mouseDown,!1),r.removeEventListener("mouseup",this._mouseUp,!1),r.removeEventListener("click",this._mouseClick,
!1),r.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return h.PointerEvents=D})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){D=D(k,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(n){n=B.hitch;this._projectHandler=n(this,this._projectHandler);this._simplifyHandler=n(this,this._simplifyHandler);this._bufferHandler=n(this,this._bufferHandler);this._areasAndLengthsHandler=n(this,this._areasAndLengthsHandler);this._lengthsHandler=
n(this,this._lengthsHandler);this._labelPointsHandler=n(this,this._labelPointsHandler);this._relationHandler=n(this,this._relationHandler);this._convexHullHandler=n(this,this._convexHullHandler);this._unionHandler=n(this,this._unionHandler);this._autoCompleteHandler=n(this,this._autoCompleteHandler);this._reshapeHandler=n(this,this._reshapeHandler);this._cutHandler=n(this,this._cutHandler);this._intersectHandler=n(this,this._intersectHandler);this._differenceHandler=n(this,this._differenceHandler);
this._trimExtendHandler=n(this,this._trimExtendHandler);this._densifyHandler=n(this,this._densifyHandler);this._generalizeHandler=n(this,this._densifyHandler);this._offsetHandler=n(this,this._offsetHandler);this._distanceHandler=n(this,this._distanceHandler);this._toGeoCoordinateHandler=n(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=n(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(n){var t=[],z,w=n.length;for(z=0;z<w;z++)t.push(n[z].toJson());
return{geometryType:m.getJsonType(n[0]),geometries:t}},_decodeGeometries:function(n,t,z){var w=m.getGeometryType(t);n=n.geometries;var y=[],x={spatialReference:z.toJson()},A=B.mixin;a.forEach(n,function(v,u){y[u]=new w(A(v,x))});return y},_toProjectGeometry:function(n){var t=n.spatialReference.toJson();return n instanceof f?new d({rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]],spatialReference:t}):new b({paths:[[].concat(n.points)],spatialReference:t})},
_fromProjectedGeometry:function(n,t,z){return"esriGeometryEnvelope"===t?(n=n.rings[0],new f(n[0][0],n[0][1],n[2][0],n[2][1],z)):new q({points:n.paths[0],spatialReference:z.toJson()})},project:function(n,t,z,w){var y=B.mixin({},this._url.query,{f:"json"});if(n.geometries){w=z;z=t;t=n.outSR;var x=n.geometries[0];y=B.mixin(y,n.toJson())}else x=n[0],y=B.mixin(y,{outSR:t.wkid||c.toJson(t.toJson()),inSR:x.spatialReference.wkid||c.toJson(x.spatialReference.toJson()),geometries:c.toJson(this._encodeGeometries(n))});
var A=m.getJsonType(x),v=this._projectHandler,u=this._errorHandler,C=new h(r._dfdCanceller);C._pendingDfd=l({url:this._url.path+"/project",content:y,callbackParamName:"callback",load:function(E,F){v(E,F,A,t,z,w,C)},error:function(E){u(E,w,C)}});return C},_projectHandler:function(n,t,z,w,y,x,A){try{var v=this._decodeGeometries(n,z,w);this._successHandler([v],"onProjectComplete",y,A)}catch(u){this._errorHandler(u,x,A)}},onProjectComplete:function(){},simplify:function(n,t,z){var w=n[0].spatialReference,
y=B.mixin({},this._url.query,{f:"json",sr:w.wkid?w.wkid:c.toJson(w.toJson()),geometries:c.toJson(this._encodeGeometries(n))}),x=m.getJsonType(n[0]),A=this._simplifyHandler,v=this._errorHandler,u=new h(r._dfdCanceller);u._pendingDfd=l({url:this._url.path+"/simplify",content:y,callbackParamName:"callback",load:function(C,E){A(C,E,x,w,t,z,u)},error:function(C){v(C,z,u)}});return u},_simplifyHandler:function(n,t,z,w,y,x,A){try{var v=this._decodeGeometries(n,z,w);this._successHandler([v],"onSimplifyComplete",
y,A)}catch(u){this._errorHandler(u,x,A)}},onSimplifyComplete:function(){},convexHull:function(n,t,z){var w=n[0].spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(w.toJson()),geometries:c.toJson(this._encodeGeometries(n))});var y=this._convexHullHandler,x=this._errorHandler,A=new h(r._dfdCanceller);A._pendingDfd=l({url:this._url.path+"/convexHull",content:n,callbackParamName:"callback",load:function(v,u){y(v,u,w,t,z,A)},error:function(v){x(v,z,A)}});return A},_convexHullHandler:function(n,
t,z,w,y,x){try{var A=m.fromJson(n.geometry).setSpatialReference(z);this._successHandler([A],"onConvexHullComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onConvexHullComplete:function(){},union:function(n,t,z){var w=n[0].spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(w.toJson()),geometries:c.toJson(this._encodeGeometries(n))});var y=this._unionHandler,x=this._errorHandler,A=new h(r._dfdCanceller);A._pendingDfd=l({url:this._url.path+"/union",content:n,callbackParamName:"callback",
load:function(v,u){y(v,u,w,t,z,A)},error:function(v){x(v,z,A)}});return A},_unionHandler:function(n,t,z,w,y,x){try{var A=m.fromJson(n.geometry).setSpatialReference(z);this._successHandler([A],"onUnionComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onUnionComplete:function(){},autoComplete:function(n,t,z,w){var y=n[0].spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),polygons:c.toJson(this._encodeGeometries(n).geometries),polylines:c.toJson(this._encodeGeometries(t).geometries)});
var x=this._autoCompleteHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/autoComplete",content:n,callbackParamName:"callback",load:function(u,C){x(u,C,y,z,w,v)},error:function(u){A(u,w,v)}});return v},_autoCompleteHandler:function(n,t,z,w,y,x){try{var A=n.geometries;n=[];var v,u=A.length;for(v=0;v<u;v++)n[v]=new d({spatialReference:z,rings:A[v].rings});this._successHandler([n],"onAutoCompleteComplete",w,x)}catch(C){this._errorHandler(C,y,x)}},onAutoCompleteComplete:function(){},
reshape:function(n,t,z,w){var y=n.spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),target:c.toJson({geometryType:m.getJsonType(n),geometry:n.toJson()}),reshaper:c.toJson(t.toJson())});var x=this._reshapeHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/reshape",content:n,callbackParamName:"callback",load:function(u,C){x(u,C,y,z,w,v)},error:function(u){A(u,w,v)}});return v},_reshapeHandler:function(n,t,z,w,y,x){try{var A=m.fromJson(n.geometry).setSpatialReference(z);
this._successHandler([A],"onReshapeComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onReshapeComplete:function(){},cut:function(n,t,z,w){var y=n[0].spatialReference,x=a.map(n,function(C){return C.toJson()});n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),target:c.toJson({geometryType:m.getJsonType(n[0]),geometries:x}),cutter:c.toJson(t.toJson())});var A=this._cutHandler,v=this._errorHandler,u=new h(r._dfdCanceller);u._pendingDfd=l({url:this._url.path+"/cut",content:n,callbackParamName:"callback",
load:function(C,E){A(C,E,y,z,w,u)},error:function(C){v(C,w,u)}});return u},_cutHandler:function(n,t,z,w,y,x){try{var A=n.geometries,v={};v.cutIndexes=n.cutIndexes;v.geometries=[];a.forEach(A,function(u){v.geometries.push(m.fromJson(u).setSpatialReference(z))});this._successHandler([v],"onCutComplete",w,x)}catch(u){this._errorHandler(u,y,x)}},onCutComplete:function(){},intersect:function(n,t,z,w){var y=n[0].spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),geometries:c.toJson(this._encodeGeometries(n)),
geometry:c.toJson({geometryType:m.getJsonType(t),geometry:t.toJson()})});var x=this._intersectHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/intersect",content:n,callbackParamName:"callback",load:function(u,C){x(u,C,y,z,w,v)},error:function(u){A(u,w,v)}});return v},_intersectHandler:function(n,t,z,w,y,x){try{var A=[];a.forEach(n.geometries,function(v){A.push(m.fromJson(v).setSpatialReference(z))});this._successHandler([A],"onIntersectComplete",w,x)}catch(v){this._errorHandler(v,
y,x)}},onIntersectComplete:function(){},difference:function(n,t,z,w){var y=n[0].spatialReference;n=B.mixin({},this._url.query,{f:"json",sr:c.toJson(y.toJson()),geometries:c.toJson(this._encodeGeometries(n)),geometry:c.toJson({geometryType:m.getJsonType(t),geometry:t.toJson()})});var x=this._differenceHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/difference",content:n,callbackParamName:"callback",load:function(u,C){x(u,C,y,z,w,v)},error:function(u){A(u,
w,v)}});return v},_differenceHandler:function(n,t,z,w,y,x){try{var A=[];a.forEach(n.geometries,function(v){A.push(m.fromJson(v).setSpatialReference(z))});this._successHandler([A],"onDifferenceComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onDifferenceComplete:function(){},buffer:function(n,t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.outSpatialReference||n.geometries[0].spatialReference,x=this._bufferHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+
"/buffer",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_bufferHandler:function(n,t,z,w,y,x){try{var A=n.geometries;n=[];var v,u=A.length;for(v=0;v<u;v++)n[v]=new d({spatialReference:z,rings:A[v].rings});this._successHandler([n],"onBufferComplete",w,x)}catch(C){this._errorHandler(C,y,x)}},onBufferComplete:function(){},areasAndLengths:function(n,t,z){n=B.mixin({},this._url.query,{f:"json"},n.toJson());var w=this._areasAndLengthsHandler,
y=this._errorHandler,x=new h(r._dfdCanceller);x._pendingDfd=l({url:this._url.path+"/areasAndLengths",content:n,callbackParamName:"callback",load:function(A,v){w(A,v,t,z,x)},error:function(A){y(A,z,x)}});return x},_areasAndLengthsHandler:function(n,t,z,w,y){try{this._successHandler([n],"onAreasAndLengthsComplete",z,y)}catch(x){this._errorHandler(x,w,y)}},onAreasAndLengthsComplete:function(){},lengths:function(n,t,z){n=B.mixin({},this._url.query,{f:"json"},n.toJson());var w=this._lengthsHandler,y=this._errorHandler,
x=new h(r._dfdCanceller);x._pendingDfd=l({url:this._url.path+"/lengths",content:n,callbackParamName:"callback",load:function(A,v){w(A,v,t,z,x)},error:function(A){y(A,z,x)}});return x},_lengthsHandler:function(n,t,z,w,y){try{this._successHandler([n],"onLengthsComplete",z,y)}catch(x){this._errorHandler(x,w,y)}},onLengthsComplete:function(){},labelPoints:function(n,t,z){var w=a.map(n,function(u){return u.toJson()}),y=n[0].spatialReference;w=B.mixin({},this._url.query,{f:"json",sr:y.wkid?y.wkid:c.toJson(y.toJson()),
polygons:c.toJson(w)});var x=this._labelPointsHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/labelPoints",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,n,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_labelPointsHandler:function(n,t,z,w,y,x,A){try{var v=[];a.forEach(n.labelPoints,function(u){v.push(m.fromJson(u).setSpatialReference(w))});this._successHandler([v],"onLabelPointsComplete",y,A)}catch(u){this._errorHandler(u,x,A)}},onLabelPointsComplete:function(){},
relation:function(n,t,z){n=B.mixin({},this._url.query,{f:"json"},n.toJson());var w=this._relationHandler,y=this._errorHandler,x=new h(r._dfdCanceller);x._pendingDfd=l({url:this._url.path+"/relation",content:n,callbackParamName:"callback",load:function(A,v){w(A,v,t,z,x)},error:function(A){y(A,z,x)}});return x},_relationHandler:function(n,t,z,w,y){try{this._successHandler([n.relations],"onRelationComplete",z,y)}catch(x){this._errorHandler(x,w,y)}},onRelationComplete:function(){},trimExtend:function(n,
t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.sr,x=this._trimExtendHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/trimExtend",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_trimExtendHandler:function(n,t,z,w,y,x){try{var A=n.geometries;n=[];var v,u=A.length;for(v=0;v<u;v++)n[v]=new b({spatialReference:z,paths:A[v].paths});this._successHandler([n],"onTrimExtendComplete",
w,x)}catch(C){this._errorHandler(C,y,x)}},onTrimExtendComplete:function(){},densify:function(n,t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.geometries[0].spatialReference,x=this._densifyHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/densify",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_densifyHandler:function(n,t,z,w,y,x){try{var A=[];a.forEach(n.geometries,function(v){A.push(m.fromJson(v).setSpatialReference(z))});
this._successHandler([A],"onDensifyComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onDensifyComplete:function(){},generalize:function(n,t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.geometries[0].spatialReference,x=this._generalizeHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/generalize",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_generalizeHandler:function(n,
t,z,w,y,x){try{var A=[];a.forEach(n.geometries,function(v){A.push(m.fromJson(v).setSpatialReference(z))});this._successHandler([A],"onGeneralizeComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onGeneralizeComplete:function(){},offset:function(n,t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.geometries[0].spatialReference,x=this._offsetHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=l({url:this._url.path+"/offset",content:w,callbackParamName:"callback",load:function(u,
C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_offsetHandler:function(n,t,z,w,y,x){try{var A=[];a.forEach(n.geometries,function(v){A.push(m.fromJson(v).setSpatialReference(z))});this._successHandler([A],"onOffsetComplete",w,x)}catch(v){this._errorHandler(v,y,x)}},onOffsetComplete:function(){},distance:function(n,t,z){var w=B.mixin({},this._url.query,{f:"json"},n.toJson()),y=n.geometry1.spatialReference,x=this._distanceHandler,A=this._errorHandler,v=new h(r._dfdCanceller);v._pendingDfd=
l({url:this._url.path+"/distance",content:w,callbackParamName:"callback",load:function(u,C){x(u,C,y,t,z,v)},error:function(u){A(u,z,v)}});return v},_distanceHandler:function(n,t,z,w,y,x){try{n=n&&n.distance,this._successHandler([n],"onDistanceComplete",w,x)}catch(A){this._errorHandler(A,y,x)}},onDistanceComplete:function(){},toGeoCoordinateString:function(n,t,z){var w={};B.isObject(n.sr)?w.sr=n.sr.wkid||c.toJson(n.sr.toJson()):w.sr=n.sr;w.coordinates=c.toJson(n.coordinates);w.conversionType=n.conversionType||
"MGRS";w.conversionMode=n.conversionMode;w.numOfDigits=n.numOfDigits;w.rounding=n.rounding;w.addSpaces=n.addSpaces;n=B.mixin({},this._url.query,{f:"json"},w);var y=this._toGeoCoordinateHandler,x=this._errorHandler,A=new h(r._dfdCanceller);A._pendingDfd=l({url:this._url.path+"/toGeoCoordinateString",content:n,callbackParamName:"callback",load:function(v,u){y(v,u,t,z,A)},error:function(v){x(v,z,A)}});return A},_toGeoCoordinateHandler:function(n,t,z,w,y){try{this._successHandler([n.strings],"onToGeoCoordinateStringComplete",
z,y)}catch(x){this._errorHandler(x,w,y)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(n,t,z){var w={};B.isObject(n.sr)?w.sr=n.sr.wkid||c.toJson(n.sr.toJson()):w.sr=n.sr;w.strings=c.toJson(n.strings);w.conversionType=n.conversionType||"MGRS";w.conversionMode=n.conversionMode;n=B.mixin({},this._url.query,{f:"json"},w);var y=this._fromGeoCoordinateHandler,x=this._errorHandler,A=new h(r._dfdCanceller);A._pendingDfd=l({url:this._url.path+"/fromGeoCoordinateString",content:n,
callbackParamName:"callback",load:function(v,u){y(v,u,t,z,A)},error:function(v){x(v,z,A)}});return A},_fromGeoCoordinateHandler:function(n,t,z,w,y){try{this._successHandler([n.coordinates],"onToGeoCoordinateStringComplete",z,y)}catch(x){this._errorHandler(x,w,y)}},onFromGeoCoordinateStringComplete:function(){}});B.mixin(D,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});B.setObject("tasks.GeometryService",D,e);return D})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(D,B,a,c,h,g){var e=window.esriGeowConfig;return function(l,r,k,f,b){for(var d=600,q=400,m=function(n){return f&&(n=B(l.extent,n),f[0].scale<n)?!1:!0};!m(d)&&!(d*=2,q*=2,1600<=d););m=new c;m.layout="MAP_ONLY";m.format="png32";m.preserveScale=!1;m.showAttribution=!1;m.showLabels=!1;m.exportOptions={width:d,height:q,dpi:96};b||(b=new h(e.self.helperServices.printTask.url,{}));d=new g;d.map=l;d.template=m;a.config.defaults.io.timeout=12E4;b.execute(d,D.hitch(this,function(n){a.config.defaults.io.timeout=
6E4;return r(n.url)}),D.hitch(this,function(n){a.config.defaults.io.timeout=6E4;if(k)return k(n)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,B){return function(a,c){var h=20015077/180,g=a.spatialReference;if(g){var e=g.wkid;var l=g.wkt}g=null;e?g=B.values[B[e]]:l&&-1!==l.search(/^PROJCS/i)&&(e=/UNIT\[([^\]]+)\]\]$/i.exec(l))&&e[1]&&(g=parseFloat(e[1].split(",")[1]));return a.getWidth()/c*(g||h)*39.37*D.defaults.screenDPI}})},
"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,showAttribution:null,showLabels:!0});B.setObject("tasks.PrintTemplate",D,c);return D})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u){D=D(w,{declaredClass:"esri.tasks.PrintTask",constructor:function(C,E){this.url=C;this.printGp=new t(this.url);this._handler=B.hitch(this,this._handler);E&&E.async&&(this.async=!0);this._colorEvaluator=u("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(C,E,F){if(!this._loadGpServerMetadata)return this._execute(C,E,F);var G=new h(k._dfdCanceller),H=this._url.path,J=H.lastIndexOf("/GPServer/");
0<J&&(H=H.slice(0,J+9));G._pendingDfd=b({url:H,callbackParamName:"callback",content:B.mixin({},this._url.query,{f:"json"})}).then(B.hitch(this,function(I){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===I.executionType;this._cimVersion=I.cimVersion;this._is11xService=!!this._cimVersion;G._pendingDfd=this._execute(C);return G._pendingDfd})).then(B.hitch(this,function(I){this._successHandler([I],null,E,G)})).otherwise(function(I){F&&F(I);G.errback(I)});return G},_handler:function(C,
E,F,G,H){try{if(this.async)"esriJobSucceeded"===C.jobStatus?this.printGp.getResultData(C.jobId,"Output_File",B.hitch(this,function(I){J=I.value;this._successHandler([J],"onComplete",F,H)})):this._errorHandler(Error(C.jobStatus),G,H);else{var J=C[0].value;this._successHandler([J],"onComplete",F,H)}}catch(I){this._errorHandler(I,G,H)}},_execute:function(C,E,F){var G=this._handler,H=this._errorHandler,J=C.template||new z;J.hasOwnProperty("showLabels")||(J.showLabels=!0);var I=J.exportOptions,R;I&&(R=
{outputSize:[I.width,I.height],dpi:I.dpi});I=J.layoutOptions;var O=[];if(I){this.legendAll=!1;I.legendLayers?a.forEach(I.legendLayers,function(da){var ea={};ea.id=da.layerId;da.subLayerIds&&(ea.subLayerIds=da.subLayerIds);O.push(ea)}):this.legendAll=!0;if("Miles"===I.scalebarUnit||"Kilometers"===I.scalebarUnit){var P="esriKilometers";var L="esriMiles"}else if("Meters"===I.scalebarUnit||"Feet"===I.scalebarUnit)P="esriMeters",L="esriFeet";var K={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
K={titleText:I.titleText,authorText:I.authorText,copyrightText:I.copyrightText,customTextElements:I.customTextElements,scaleBarOptions:{metricUnit:P,metricLabel:K[P],nonMetricUnit:L,nonMetricLabel:K[L]},legendOptions:{operationalLayers:O}}}P=this._getPrintDefinition(C.map,J);C.outSpatialReference&&(P.mapOptions.spatialReference=C.outSpatialReference.toJson());C.template&&l.isDefined(C.template.showAttribution)&&(P.mapOptions.showAttribution=C.template.showAttribution);B.mixin(P,{exportOptions:R,layoutOptions:K});
this.allLayerslegend&&B.mixin(P.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(P.operationalLayers){R=P.operationalLayers;var Q=function(da){return l.fixJson(B.mixin(da,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},W=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),ba=/[\u0600-\u06FF]/,S=function(da){var ea=da.text,Z=(da=da.font)&&da.family&&da.family.toLowerCase();ea&&da&&("arial"===Z||"arial unicode ms"===
Z)&&(da.family=W.test(ea)?"Arial Unicode MS":"Arial","normal"!==da.style&&ba.test(ea)&&(da.family="Arial Unicode MS"))};for(K=0;K<R.length;K++)if(R[K].featureCollection&&R[K].featureCollection.layers)for(L=0;L<R[K].featureCollection.layers.length;L++){var X=R[K].featureCollection.layers[L];if(X.layerDefinition&&X.layerDefinition.drawingInfo&&X.layerDefinition.drawingInfo.renderer&&X.layerDefinition.drawingInfo.renderer.symbol){var aa=X.layerDefinition.drawingInfo.renderer;"esriCLS"===aa.symbol.type?
aa.symbol=Q(aa.symbol):"esriTS"===aa.symbol.type?S(aa.symbol):aa.symbol.outline&&"esriCLS"===aa.symbol.outline.type&&(aa.symbol.outline=Q(aa.symbol.outline))}if(X.featureSet&&X.featureSet.features)for(I=0;I<X.featureSet.features.length;I++)aa=X.featureSet.features[I],aa.symbol&&("esriCLS"===aa.symbol.type?aa.symbol=Q(aa.symbol):"esriTS"===aa.symbol.type?S(aa.symbol):aa.symbol.outline&&"esriCLS"===aa.symbol.outline.type&&(aa.symbol.outline=Q(aa.symbol.outline)))}}J={Web_Map_as_JSON:c.toJson(l.fixJson(P)),
Format:J.format,Layout_Template:J.layout};C.extraParameters&&(J=B.mixin(J,C.extraParameters));var M=new h(k._dfdCanceller);C=function(da,ea){G(da,ea,E,F,M)};P=function(da){H(da,F,M)};M._pendingDfd=this.async?this.printGp.submitJob(J,C,null,P):this.printGp.execute(J,C,P);return M},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",
features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",
drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(C){if(!(8>=g("ie")||!C.path&&"image/svg+xml"!==C.contentType)){var E=v.createSurface(x.create("div"),1024,1024);var F="image/svg+xml"===C.contentType?E.createObject(v.Image,{src:"data:image/svg+xml;base64,"+C.imageData,width:A.pt2px(C.width),height:A.pt2px(C.height),x:0,y:0}):E.createObject(v.Path,C.path).setFill(C.color).setStroke(C.outline);"pendingRender"in E&&E._render(!0);var G=
E.rawNode.getContext("2d"),H=Math.ceil(F.getBoundingBox().width),J=Math.ceil(F.getBoundingBox().height);F=G.getImageData(F.getBoundingBox().x,F.getBoundingBox().y,H,J);G.canvas.width=H;G.canvas.height=J;G.putImageData(F,0,0);G=G.canvas.toDataURL("image/png");C={type:"esriPMS",imageData:G.substr(22,G.length),angle:C.angle,contentType:"image/png",height:C.size?C.size:A.px2pt(J),width:C.size?H/J*C.size:A.px2pt(H),xoffset:C.xoffset,yoffset:C.yoffset};E.destroy();return C}},_convertSvgRenderer:function(C){"simple"===
C.type&&C.symbol&&(C.symbol.path||"image/svg+xml"===C.symbol.contentType)?C.symbol=this._convertSvgSymbol(C.symbol):"uniqueValue"===C.type?(C.defaultSymbol&&(C.defaultSymbol.path||"image/svg+xml"===C.defaultSymbol.contentType)&&(C.defaultSymbol=this._convertSvgSymbol(C.defaultSymbol)),C.uniqueValueInfos&&a.forEach(C.uniqueValueInfos,function(E){if(E.symbol.path||"image/svg+xml"===E.symbol.contentType)E.symbol=this._convertSvgSymbol(E.symbol)},this)):"classBreaks"===C.type&&(C.defaultSymbol&&(C.defaultSymbol.path||
"image/svg+xml"===C.defaultSymbol.contentType)&&(C.defaultSymbol=this._convertSvgSymbol(C.defaultSymbol)),C.classBreakInfos&&a.forEach(C.classBreakInfos,function(E){if(E.symbol.path||"image/svg+xml"===E.symbol.contentType)E.symbol=this._convertSvgSymbol(E.symbol)},this))},_createFeatureCollection:function(C,E,F,G){var H=this._createPolygonLayer(),J=this._createPolylineLayer(),I=this._createPointLayer(),R=this._createMultipointLayer(),O=this._createPointLayer();O.layerDefinition.name="textLayer";delete O.layerDefinition.drawingInfo;
if("esri.layers.FeatureLayer"===C.declaredClass||"esri.layers.StreamLayer"===C.declaredClass)H.layerDefinition.name=J.layerDefinition.name=I.layerDefinition.name=R.layerDefinition.name=B.getObject("arcgisProps.title",!1,C)||C.name||C.id;var P=C.renderer&&"esri.renderer.SimpleRenderer"===C.renderer.declaredClass;if(!C.renderer||C.renderer.valueExpression||B.isFunction(C.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete J.layerDefinition.drawingInfo,delete I.layerDefinition.drawingInfo,
delete R.layerDefinition.drawingInfo;else{var L=C.renderer.toJson({useLegacyRotationProperties:!0});if("temporal"===L.type){L={latestObservationRenderer:L.latestObservationRenderer,trackLinesRenderer:L.trackRenderer,observationAger:L.observationAger,renderer:L.observationRenderer};var K={};C._trackIdField&&(K.trackIdField=C._trackIdField);C._startTimeField&&(K.startTimeField=C._startTimeField);C._endTimeField&&(K.endTimeField=C._endTimeField);H.layerDefinition.drawingInfo=L;H.layerDefinition.timeInfo=
K;J.layerDefinition.drawingInfo=L;J.layerDefinition.timeInfo=K;I.layerDefinition.drawingInfo=L;I.layerDefinition.timeInfo=K;R.layerDefinition.drawingInfo=L;R.layerDefinition.timeInfo=K}else H.layerDefinition.drawingInfo.renderer=L,J.layerDefinition.drawingInfo.renderer=L,I.layerDefinition.drawingInfo.renderer=L,R.layerDefinition.drawingInfo.renderer=L}L=C.fields;L||!C.renderer||C.renderer.valueExpression||B.isFunction(C.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===C.renderer.declaredClass?
(L=[{name:C.renderer.attributeField,type:"esriFieldTypeDouble"}],C.renderer.normalizationField&&L.push({name:C.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===C.renderer.declaredClass&&(L=[{name:C.renderer.attributeField,type:"esriFieldTypeString"}],C.renderer.attributeField2&&L.push({name:C.renderer.attributeField2,type:"esriFieldTypeString"}),C.renderer.attributeField3&&L.push({name:C.renderer.attributeField3,type:"esriFieldTypeString"})));L&&(H.layerDefinition.fields=
L,J.layerDefinition.fields=L,I.layerDefinition.fields=L,R.layerDefinition.fields=L);L=C.graphics;C.isFeatureReductionActive&&C.isFeatureReductionActive()&&(L=C.getSingleGraphics());K=L.length;var Q;for(Q=0;Q<K;Q++){var W=L[Q];if(!1!==W.visible&&W.geometry){var ba=W.toJson();ba.symbol&&ba.symbol.outline&&ba.symbol.outline.color&&ba.symbol.outline.color[3]&&!this._is11xService&&(ba.symbol.outline.color[3]=255);if(C.renderer&&!ba.symbol&&(B.isFunction(C.renderer.attributeField)||C.renderer.valueExpression||
this._isFeatureCollectionRequired(C.renderer,C)||"esri.renderer.DotDensityRenderer"===C.renderer.declaredClass||F)){F=F||C.renderer;var S=null;try{S=F.getSymbol(W)}catch(X){}if(!S)continue;ba.symbol=S.toJson();this._isFeatureCollectionRequired(F,C)&&this._applyVisualVariables(ba.symbol,{renderer:F,graphic:W,symbol:S,mapResolution:E&&E.getResolutionInMeters(),mapScale:E&&E.getScale()})}ba.symbol&&(ba.symbol.path||"image/svg+xml"===ba.symbol.contentType?ba.symbol=this._convertSvgSymbol(ba.symbol):ba.symbol.text&&
delete ba.attributes);switch(W.geometry.type){case "polygon":H.featureSet.features.push(ba);break;case "polyline":J.featureSet.features.push(ba);break;case "point":ba.symbol&&ba.symbol.text?O.featureSet.features.push(ba):I.featureSet.features.push(ba);break;case "multipoint":R.featureSet.features.push(ba);break;case "extent":ba.geometry=q.fromExtent(W.geometry).toJson(),H.featureSet.features.push(ba)}}}E=[];0<H.featureSet.features.length&&E.push(H);0<J.featureSet.features.length&&E.push(J);0<R.featureSet.features.length&&
E.push(R);0<I.featureSet.features.length&&E.push(I);0<O.featureSet.features.length&&E.push(O);if(!E.length)return null;a.forEach(E,function(X){var aa=a.every(X.featureSet.features,function(M){return M.symbol});if(P||aa)G&&G.forceFeatureAttributes||a.forEach(X.featureSet.features,function(M){delete M.attributes}),G.forceFeatureAttributes||delete X.layerDefinition.fields;aa&&delete X.layerDefinition.drawingInfo});a.forEach(E,function(X){X.layerDefinition.drawingInfo&&X.layerDefinition.drawingInfo.renderer&&
this._convertSvgRenderer(X.layerDefinition.drawingInfo.renderer)},this);return{id:C.id,opacity:C.opacity,minScale:C.minScale||0,maxScale:C.maxScale||0,featureCollection:{layers:E}}},_getPrintDefinition:function(C,E){var F={operationalLayers:this._createOperationalLayers(C,E)},G=this._vtlExtent||C.extent,H=C.spatialReference;this._vtlExtent=null;C.spatialReference._isWrappable()&&(G=G._normalize(!0),H=G.spatialReference);G={mapOptions:{showAttribution:C.showAttribution,extent:G.toJson(),spatialReference:H.toJson()}};
E.preserveScale&&B.mixin(G.mapOptions,{scale:E.outScale||C.getScale()});C.timeExtent&&B.mixin(G.mapOptions,{time:[C.timeExtent.startTime.getTime(),C.timeExtent.endTime.getTime()]});H={};B.mixin(H,G,F);return H},_createOperationalLayers:function(C,E){var F,G=[],H=0;E.preserveScale&&(H=E.outScale||C.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var J=a.map(C.layerIds,C.getLayer,C);C._mapImageLyr&&J.push(C._mapImageLyr);for(F=0;F<J.length;F++){var I=J[F];if(I.loaded&&I.visible&&
(!H||I.isVisibleAtScale(H))){var R=I.declaredClass;var O={id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0};O=B.mixin(O,this._getUrlAndToken(I));I.getNode()&&y.get(I.getNode(),"data-reference")&&(O._isRefLayer=!0);switch(R){case "esri.layers.ArcGISDynamicMapServiceLayer":var P=[];R=!!I._params.layers;if(I._params.dynamicLayers)R=E.outScale?I._getDynLayerObjs(E.outScale):c.fromJson(I._params.dynamicLayers),a.forEach(R,function(ba){P.push({id:ba.id,
name:ba.name,layerDefinition:ba});delete ba.id;delete ba.name;delete ba.maxScale;delete ba.minScale}),0===P.length&&(O.visibleLayers=[-1]);else if(I.supportsDynamicLayers){if(R||I.layerDefinitions||I.layerTimeOptions){var L=I.createDynamicLayerInfosFromLayerInfos(),K=null;R&&(K=I.visibleLayers);K=r._getVisibleLayers(L,K);var Q=r._getLayersForScale(E.outScale||C.getScale(),L);a.forEach(L,function(ba){if(!ba.subLayerIds){var S=ba.id;-1<a.indexOf(K,S)&&-1<a.indexOf(Q,S)&&(ba={source:ba.source.toJson()},
I.layerDefinitions&&I.layerDefinitions[S]&&(ba.definitionExpression=I.layerDefinitions[S]),I.layerTimeOptions&&I.layerTimeOptions[S]&&(ba.layerTimeOptions=I.layerTimeOptions[S].toJson()),P.push({id:S,layerDefinition:ba}))}});0===P.length&&(O.visibleLayers=[-1])}}else a.forEach(I.layerInfos,function(ba){var S={id:ba.id,layerDefinition:{}};I.layerDefinitions&&I.layerDefinitions[ba.id]&&(S.layerDefinition.definitionExpression=I.layerDefinitions[ba.id]);I.layerTimeOptions&&I.layerTimeOptions[ba.id]&&
(S.layerDefinition.layerTimeOptions=I.layerTimeOptions[ba.id].toJson());(S.layerDefinition.definitionExpression||S.layerDefinition.layerTimeOptions)&&P.push(S)}),R&&(O.visibleLayers=I.visibleLayers.length?I.visibleLayers:[-1]);P.length&&(O.layers=P);G.push(O);this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":O=B.mixin(O,{url:I.url,bandIds:I.bandIds,compressionQuality:I.compressionQuality,format:I.format,interpolation:I.interpolation});
I.mosaicRule&&B.mixin(O,{mosaicRule:I.mosaicRule.toJson()});if(I.renderingRule||I.renderer)this._is11xService?(I.renderingRule&&(O.renderingRule=I.renderingRule.toJson()),I.renderer&&(O.layerDefinition=O.layerDefinition||{},O.layerDefinition.drawingInfo=O.layerDefinition.drawingInfo||{},O.layerDefinition.drawingInfo.renderer=I.renderer.toJson())):(R=I.getExportImageRenderingRule())&&B.mixin(O,{renderingRule:R.toJson()});G.push(O);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.RasterXLayer":this._is11xService&&
(O=B.mixin(O,{url:I.url,bandIds:I.bandIds,interpolation:I.interpolation}),I.renderer&&(O.layerDefinition=O.layerDefinition||{},O.layerDefinition.drawingInfo=O.layerDefinition.drawingInfo||{},O.layerDefinition.drawingInfo.renderer=I.renderer.toJson()),G.push(O),this.allLayerslegend&&this.allLayerslegend.push({id:I.id}));break;case "esri.layers.WMSLayer":O=B.mixin(O,{url:I.url,title:I.title,type:"wms",version:I.version,transparentBackground:I.imageTransparency,visibleLayers:I.visibleLayers});G.push(O);
this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.virtualearth.VETiledLayer":R=I.mapStyle;"roadOnDemand"===R?R="Road":"aerialWithLabelsOnDemand"===R&&(R="Hybrid");O=B.mixin(O,{visibility:I.visible,type:"BingMaps"+R,culture:I.culture,key:I.bingMapsKey});G.push(O);break;case "esri.layers.OpenStreetMapLayer":O=B.mixin(O,{credits:I.copyright,type:"OpenStreetMap",url:d.getAbsoluteUrl(I.tileServers[0])});G.push(O);break;case "esri.layers.WMTSLayer":O=
B.mixin(O,{url:I.url,type:"wmts",layer:I._identifier,style:I._style,format:I.format,tileMatrixSet:I._tileMatrixSetId});G.push(O);break;case "esri.layers.MapImageLayer":R=I.getImages();a.forEach(R,function(ba,S){ba.visible&&ba.href&&(O={id:I.id+"_image"+S,type:"image",title:I.id,minScale:I.minScale||0,maxScale:I.maxScale||0,opacity:I.opacity*ba.opacity,extent:ba.extent.toJson()},"data:image/png;base64,"===ba.href.substr(0,22)?O.imageData=ba.href.substr(22):O.url=ba.href,G.push(O))});break;case "esri.layers.VectorTileLayer":delete O.url;
delete O.token;if(this._is11xService&&I.currentStyleInfo.serviceUrl&&I.currentStyleInfo.styleUrl&&(R=e.id&&e.id.findCredential(I.currentStyleInfo.styleUrl),L=e.id&&e.id.findCredential(I.currentStyleInfo.serviceUrl),!R&&!L||"2.1.0"!==this._cimVersion)){O.type="VectorTileLayer";O.styleUrl=I.currentStyleInfo.styleUrl;R&&(O.token=R.token);L&&L.token!==O.token&&(O.additionalTokens=[{url:I.currentStyleInfo.serviceUrl,token:L.token}]);G.push(O);break}O.type="image";R=this._vtlExtent||C.extent.offset(0,0);
var W=E.exportOptions&&E.exportOptions.dpi||96;L={format:"png",pixelRatio:W/96};"MAP_ONLY"!==E.layout||!E.preserveScale||E.outScale&&E.outScale!==C.getScale()||96!==W||!E.exportOptions||E.exportOptions.width%2===C.width%2&&E.exportOptions.height%2===C.height%2||(L.area={x:0,y:0,width:C.width,height:C.height},E.exportOptions.width%2!==C.width%2&&--L.area.width,E.exportOptions.height%2!==C.height%2&&--L.area.height,this._vtlExtent||(W=C.toMap({x:L.area.width,y:L.area.height}),R.update(R.xmin,W.y,W.x,
R.ymax,R.spatialReference),this._vtlExtent=R));O.extent=R._normalize(!0).toJson();R=I.takeScreenshot(L);R.isResolved()&&R.then(function(ba){"data:image/png;base64,"===ba.dataURL.substr(0,22)&&(O.imageData=ba.dataURL.substr(22))});O.imageData&&G.push(O);break;case "esri.layers.WebTiledLayer":R=I.url.replace(/\$\{/g,"{");O=B.mixin(O,{type:"WebTiledLayer",urlTemplate:R,credits:I.copyright});I.subDomains&&0<I.subDomains.length&&(O.subDomains=I.subDomains);I._wmtsInfo&&(O.wmtsInfo=I._wmtsInfo);delete O.url;
G.push(O);break;default:if(I.getTileUrl||I.getImageUrl)O=B.mixin(O,{url:I.url}),G.push(O)}}}J=a.map(C.graphicsLayerIds,C.getLayer,C);for(F=0;F<J.length;F++)I=J[F],I.isFeatureReductionActive&&I.isFeatureReductionActive()&&(I.getSingleGraphics().length?J.splice(++F,0,I.getFeatureReductionLayer()):J[F]=I.getFeatureReductionLayer());for(F=0;F<J.length;F++)if(I=J[F],I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H)))switch(R=I.declaredClass,R){case "esri.layers.CSVLayer":if(this._is11xService){O={id:I.id,
url:I.url,title:I.title,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:I.latitudeFieldName,longitudeFieldName:I.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:I.renderer&&I.renderer.toJson()}}};G.push(O);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===R&&!E.showLabels||I.renderer&&"esri.renderer.HeatmapRenderer"===I.renderer.declaredClass)continue;
R=null;I.url&&I.renderer&&("esri.renderer.ScaleDependentRenderer"===I.renderer.declaredClass?"scale"===I.renderer.rangeType?R=I.renderer.getRendererInfoByScale(C.getScale())&&I.renderer.getRendererInfoByScale(C.getScale()).renderer:"zoom"===I.renderer.rangeType&&(R=I.renderer.getRendererInfoByZoom(C.getZoom())&&I.renderer.getRendererInfoByZoom(C.getZoom()).renderer):R=I.renderer);L=R&&"esri.layers.CSVLayer"!==I.declaredClass&&!this._isFeatureCollectionRequired(R,I)&&!R.valueExpression;W=I.isFeatureReductionActive&&
I.isFeatureReductionActive();if(R&&!W&&"esri.renderer.DotDensityRenderer"!==R.declaredClass&&"esri.layers.StreamLayer"!==I.declaredClass&&(this._is11xService||L)&&("esri.renderer.SimpleRenderer"===R.declaredClass||"esri.renderer.TemporalRenderer"===R.declaredClass||null==R.attributeField||B.isString(R.attributeField)&&I._getField(R.attributeField,!0)))if(O={id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,layerDefinition:{drawingInfo:{renderer:R.toJson({useLegacyRotationProperties:!this._is11xService})}}},
O=B.mixin(O,this._getUrlAndToken(I)),"esri.renderer.TemporalRenderer"===R.declaredClass&&(L=O.layerDefinition.drawingInfo,L.latestObservationRenderer=L.renderer.latestObservationRenderer,L.trackLinesRenderer=L.renderer.trackRenderer,L.observationAger=L.renderer.observationAger,L.renderer=L.renderer.observationRenderer,I._trackIdField&&(O.layerDefinition.timeInfo={trackIdField:I._trackIdField})),this._convertSvgRenderer(O.layerDefinition.drawingInfo.renderer),this._is11xService||1>I.opacity||"esri.renderer.TemporalRenderer"===
R.declaredClass||this._updateLayerOpacity(O))if(I._params.source&&(R=I._params.source.toJson(),B.mixin(O.layerDefinition,{source:R})),I.getDefinitionExpression()&&B.mixin(O.layerDefinition,{definitionExpression:I.getDefinitionExpression()}),2!==I.mode)0<I.getSelectedFeatures().length&&(R=a.map(I.getSelectedFeatures(),function(ba){return ba.attributes[I.objectIdField]}),0<R.length&&I.getSelectionSymbol()&&B.mixin(O,{selectionObjectIds:R,selectionSymbol:I.getSelectionSymbol().toJson()}));else{R=a.map(I.getSelectedFeatures(),
function(ba){return ba.attributes[I.objectIdField]});if(0===R.length||!I._params.drawMode)break;B.mixin(O.layerDefinition,{objectIds:R});R=null;I.getSelectionSymbol()&&(R=new m(I.getSelectionSymbol()));B.mixin(O.layerDefinition.drawingInfo,{renderer:R&&R.toJson()})}else O=this._createFeatureCollection(I,C,null,E);else O=R&&(R.valueExpression||this._isFeatureCollectionRequired(R,I)||"esri.renderer.DotDensityRenderer"===R.declaredClass)?this._createFeatureCollection(I,C,R,E):this._createFeatureCollection(I,
C,null,E);if(!O)continue;G.push(O);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":O=this._createFeatureCollection(I,C,null,E);if(!O)continue;G.push(O);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":O={id:I.id,title:B.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||
0,visibility:I.visible,symbolTileSize:I.symbolTileSize,layerDefinition:{drawingInfo:{renderer:I.renderer.toJson({useLegacyRotationProperties:!this._is11xService})}}},O=B.mixin(O,this._getUrlAndToken(I)),I.mosaicRule&&B.mixin(O,{mosaicRule:I.mosaicRule.toJson()}),G.push(O),this.allLayerslegend&&this.allLayerslegend.push({id:I.id})}H&&a.forEach(G,function(ba){ba.minScale=0;ba.maxScale=0});C.graphics&&0<C.graphics.graphics.length&&(O=this._createFeatureCollection(C.graphics,C,null,E))&&G.push(O);C._labels&&
E.showLabels&&(O=this._createFeatureCollection(C._labels,C,null,E))&&G.push(O);a.forEach(G,function(ba,S,X){ba._isRefLayer&&(delete ba._isRefLayer,X.splice(S,1),X.push(ba))});return G},_getUrlAndToken:function(C){return{token:C._getToken(),url:C._url?C._url.path:null}},_updateLayerOpacity:function(C){var E=this._colorEvaluator(C);E=a.filter(E,function(J){return B.isArray(J)&&4===J.length});var F=!0;if(E.length){var G=E[0][3],H;for(H=1;H<E.length;H++)if(G!==E[H][3]){F=!1;break}if(F)for(C.opacity=G/
255,H=0;H<E.length;H++)E[H][3]=255}return F},_isFeatureCollectionRequired:function(C,E){if(E&&E.isFeatureReductionActive&&E.isFeatureReductionActive())return!0;var F=!1,G=this._getVariable(C,"rotationInfo",!1);G&&(F=(F=G.field)&&B.isFunction(F)||G.valueExpression);return C.hasVisualVariables("sizeInfo")||C.hasVisualVariables("colorInfo")||C.hasVisualVariables("opacityInfo")||F},_getVariable:function(C,E,F){if(C)var G=(C=C.getVisualVariablesForType(E,F))&&C[0];return G},_applyVisualVariables:function(C,
E){var F=E.renderer,G=E.graphic,H=E.symbol,J=E.mapResolution,I=E.mapScale,R=H.type;if("textsymbol"!==R&&"shieldlabelsymbol"!==R){var O=this._getVariable(F,"sizeInfo",!1),P=this._getVariable(F,"colorInfo",!1),L=this._getVariable(F,"opacityInfo",!1),K=this._getVariable(F,"rotationInfo",!1);H instanceof n&&(O=this._getVariable(F,"sizeInfo","outline")||O);J=O?F.getSize(G,{sizeInfo:O,shape:"simplemarkersymbol"===R?H.style:null,resolution:J,scale:I}):G.size;null!=J&&("simplemarkersymbol"===R?C.size=A.px2pt(J):
"picturemarkersymbol"===R?(I=H.width/H.height*J,C.width=A.px2pt(I),C.height=A.px2pt(J),0!==H.xoffset&&(C.xoffset=A.px2pt(H.xoffset/H.width*I)),0!==H.yoffset&&(C.yoffset=A.px2pt(H.yoffset/H.height*J))):"simplelinesymbol"===R?C.width=A.px2pt(J):C.outline&&(C.outline.width=A.px2pt(J)));P&&(!(H=F.getColor(G,{colorInfo:P}))||"simplemarkersymbol"!==R&&"simplelinesymbol"!==R&&"simplefillsymbol"!==R||(C.color=f.toJsonColor(H)));L&&(R=F.getOpacity(G,{opacityInfo:L}),null!=R&&C.color&&(C.color[3]=Math.round(255*
R)));K&&(F=F.getRotationAngle(G,{rotationInfo:K}))&&(C.angle=-F)}}});B.setObject("tasks.PrintTask",D,e);return D})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){function q(P,L,K,Q,W,ba,S,X,aa,M){var da=L.length,ea=0;if(M){var Z=M.l/W;ea=M.i}else Z=L[0]/W;for(;ba<S;){if(ba+Z>S){var ka={l:(ba+Z-S)*W,
i:ea};Z=S-ba}ea%2||(P.beginPath(),P.arc(K,Q,W,ba,ba+Z,X),aa&&P.stroke());ba+=Z;++ea;Z=L[ea%da]/W}return ka}function m(P,L,K,Q){var W=0,ba=0,S=0;if(Q){var X=Q.l;S=Q.i}else X=L[0];for(;1>ba;)ba=d.tAtLength(P,X),1==ba&&(W=d.computeLength(P),W={l:X-W,i:S}),P=d.splitBezierAtT(P,ba),S%2||K.push(P[0]),P=P[1],++S,X=L[S%L.length];return W}function n(P,L,K,Q){var W=[L.last.x,L.last.y].concat(K),ba=!(P instanceof Array);K=4===K.length?"quadraticCurveTo":"bezierCurveTo";var S=[];L=m(W,L.canvasDash,S,Q);for(Q=
0;Q<S.length;++Q)W=S[Q],ba?(P.moveTo(W[0],W[1]),P[K].apply(P,W.slice(2))):(P.push("moveTo",[W[0],W[1]]),P.push(K,W.slice(2)));return L}function t(P,L,K,Q,W,ba,S){var X=0,aa=0,M=0,da=d.distance(K,Q,W,ba),ea=0;L=L.canvasDash;var Z=K,ka=Q,va=!(P instanceof Array);S?(M=S.l,ea=S.i):M+=L[0];for(;.01<Math.abs(1-aa);){M>da&&(X={l:M-da,i:ea},M=da);aa=M/da;S=K+(W-K)*aa;var Ea=Q+(ba-Q)*aa;ea++%2||(va?(P.moveTo(Z,ka),P.lineTo(S,Ea)):(P.push("moveTo",[Z,ka]),P.push("lineTo",[S,Ea])));Z=S;ka=Ea;M+=L[ea%L.length]}return X}
var z=D.canvas={},w=null,y=f.multiplyPoint,x=Math.PI,A=2*x,v=x/2;b=B.extend;if(h.global.CanvasRenderingContext2D){h=h.doc.createElement("canvas").getContext("2d");var u="function"==typeof h.setLineDash,C="function"==typeof h.fillText}var E={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};z.Shape=c("dojox.gfx.canvas.Shape",l.Shape,{_render:function(P){P.save();
this._renderTransform(P);this._renderClip(P);this._renderShape(P);this._renderFill(P,!0);this._renderStroke(P,!0);P.restore()},_renderClip:function(P){this.canvasClip&&(this.canvasClip.render(P),P.clip())},_renderTransform:function(P){if("canvasTransform"in this){var L=this.canvasTransform;P.translate(L.dx,L.dy);P.rotate(L.angle2);P.scale(L.sx,L.sy);P.rotate(L.angle1)}},_renderShape:function(P){},_renderFill:function(P,L){if("canvasFill"in this){var K=this.fillStyle;if("canvasFillImage"in this){var Q=
K.width,W=K.height,ba=this.canvasFillImage.width,S=this.canvasFillImage.height,X=Math.min(Q==ba?1:Q/ba,W==S?1:W/S),aa=(Q-X*ba)/2,M=(W-X*S)/2;w.width=Q;w.height=W;var da=w.getContext("2d");da.clearRect(0,0,Q,W);da.drawImage(this.canvasFillImage,0,0,ba,S,aa,M,X*ba,X*S);this.canvasFill=P.createPattern(w,"repeat");delete this.canvasFillImage}P.fillStyle=this.canvasFill;L&&("pattern"!==K.type||0===K.x&&0===K.y||P.translate(K.x,K.y),P.fill())}else P.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(P,
L){var K=this.strokeStyle;K?(P.strokeStyle=K.color.toString(),P.lineWidth=K.width,P.lineCap=K.cap,"number"==typeof K.join?(P.lineJoin="miter",P.miterLimit=K.join):P.lineJoin=K.join,this.canvasDash?u?(P.setLineDash(this.canvasDash),L&&P.stroke()):this._renderDashedStroke(P,L):L&&P.stroke()):L||(P.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(P,L){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(P){this.inherited(arguments);
var L=P?"width"in P?"rect":"cx"in P?"ellipse":"points"in P?"polyline":"d"in P?"path":null:null;if(P&&!L)return this;this.canvasClip=P?F(L,P):null;this.parent&&this.parent._makeDirty();return this}});var F=function(P,L){switch(P){case "ellipse":return{canvasEllipse:I({shape:L}),render:function(K){return z.Ellipse.prototype._renderShape.call(this,K)}};case "rect":return{shape:B.delegate(L,{r:0}),render:function(K){return z.Rect.prototype._renderShape.call(this,K)}};case "path":return{canvasPath:G(L),
render:function(K){this.canvasPath._renderShape(K)}};case "polyline":return{canvasPolyline:L.points,render:function(K){return z.Polyline.prototype._renderShape.call(this,K)}}}return null},G=function(P){var L=new dojox.gfx.canvas.Path;L.canvasPath=[];L._setPath(P.d);return L},H=function(P,L,K){var Q=P.prototype[L];P.prototype[L]=K?function(){this.parent&&this.parent._makeDirty();Q.apply(this,arguments);K.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return Q.apply(this,arguments)}};
H(z.Shape,"setTransform",function(){this.matrix?this.canvasTransform=D.decompose(this.matrix):delete this.canvasTransform});H(z.Shape,"setFill",function(){var P=this.fillStyle;if(P){if("object"==typeof P&&"type"in P){var L=this.surface.rawNode.getContext("2d");switch(P.type){case "linear":case "radial":var K="linear"==P.type?L.createLinearGradient(P.x1,P.y1,P.x2,P.y2):L.createRadialGradient(P.cx,P.cy,0,P.cx,P.cy,P.r);a.forEach(P.colors,function(Q){K.addColorStop(Q.offset,D.normalizeColor(Q.color).toString())});
break;case "pattern":w||(w=document.createElement("canvas")),L=new Image,this.surface.downloadImage(L,P.src),this.canvasFillImage=L}}else K=P.toString();this.canvasFill=K}else delete this.canvasFill});H(z.Shape,"setStroke",function(){var P=this.strokeStyle;if(P){var L=this.strokeStyle.style.toLowerCase();L in E&&(L=E[L]);if(L instanceof Array){this.canvasDash=L=L.slice();var K;for(K=0;K<L.length;++K)L[K]*=P.width;if("butt"!=P.cap){for(K=0;K<L.length;K+=2)L[K]-=P.width,1>L[K]&&(L[K]=1);for(K=1;K<L.length;K+=
2)L[K]+=P.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!u&&!!this.canvasDash});H(z.Shape,"setShape");z.Group=c("dojox.gfx.canvas.Group",z.Shape,{constructor:function(){l.Container._init.call(this)},_render:function(P){P.save();this._renderTransform(P);this._renderClip(P);for(var L=0;L<this.children.length;++L)this.children[L]._render(P);P.restore()},destroy:function(){l.Container.clear.call(this,!0);z.Shape.prototype.destroy.apply(this,arguments)}});z.Rect=c("dojox.gfx.canvas.Rect",
[z.Shape,l.Rect],{_renderShape:function(P){var L=this.shape,K=Math.min(L.r,L.height/2,L.width/2),Q=L.x,W=Q+L.width,ba=L.y;L=ba+L.height;var S=Q+K,X=W-K,aa=ba+K,M=L-K;P.beginPath();P.moveTo(S,ba);K?(P.arc(X,aa,K,-v,0,!1),P.arc(X,M,K,0,v,!1),P.arc(S,M,K,v,x,!1),P.arc(S,aa,K,x,x+v,!1)):(P.lineTo(X,ba),P.lineTo(W,M),P.lineTo(S,L),P.lineTo(Q,aa));P.closePath()},_renderDashedStroke:function(P,L){var K=this.shape,Q=Math.min(K.r,K.height/2,K.width/2),W=K.x,ba=W+K.width,S=K.y,X=S+K.height,aa=W+Q,M=ba-Q,da=
S+Q,ea=X-Q;Q?(P.beginPath(),K=t(P,this,aa,S,M,S),L&&P.stroke(),K=q(P,this.canvasDash,M,da,Q,-v,0,!1,L,K),P.beginPath(),K=t(P,this,ba,da,ba,ea,K),L&&P.stroke(),K=q(P,this.canvasDash,M,ea,Q,0,v,!1,L,K),P.beginPath(),K=t(P,this,M,X,aa,X,K),L&&P.stroke(),K=q(P,this.canvasDash,aa,ea,Q,v,x,!1,L,K),P.beginPath(),K=t(P,this,W,ea,W,da,K),L&&P.stroke(),q(P,this.canvasDash,aa,da,Q,x,x+v,!1,L,K)):(P.beginPath(),K=t(P,this,aa,S,M,S),K=t(P,this,M,S,ba,ea,K),K=t(P,this,ba,ea,aa,X,K),t(P,this,aa,X,W,da,K),L&&P.stroke())}});
var J=[];(function(){var P=k.curvePI4;J.push(P.s,P.c1,P.c2,P.e);for(var L=45;360>L;L+=45){var K=f.rotateg(L);J.push(y(K,P.c1),y(K,P.c2),y(K,P.e))}})();var I=function(P){var L=[],K=P.shape,Q=f.normalize([f.translate(K.cx,K.cy),f.scale(K.rx,K.ry)]);var W=y(Q,J[0]);L.push([W.x,W.y]);for(K=1;K<J.length;K+=3){var ba=y(Q,J[K]);var S=y(Q,J[K+1]);W=y(Q,J[K+2]);L.push([ba.x,ba.y,S.x,S.y,W.x,W.y])}if(P._needsDash){W=[];ba=L[0];for(K=1;K<L.length;++K)S=[],m(ba.concat(L[K]),P.canvasDash,S),ba=[L[K][4],L[K][5]],
W.push(S);P._dashedPoints=W}return L};z.Ellipse=c("dojox.gfx.canvas.Ellipse",[z.Shape,l.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=I(this);return this},setStroke:function(){this.inherited(arguments);u||(this.canvasEllipse=I(this));return this},_renderShape:function(P){var L=this.canvasEllipse,K;P.beginPath();P.moveTo.apply(P,L[0]);for(K=1;K<L.length;++K)P.bezierCurveTo.apply(P,L[K]);P.closePath()},_renderDashedStroke:function(P,L){var K=this._dashedPoints;P.beginPath();
for(var Q=0;Q<K.length;++Q)for(var W=K[Q],ba=0;ba<W.length;++ba){var S=W[ba];P.moveTo(S[0],S[1]);P.bezierCurveTo(S[2],S[3],S[4],S[5],S[6],S[7])}L&&P.stroke()}});z.Circle=c("dojox.gfx.canvas.Circle",[z.Shape,l.Circle],{_renderShape:function(P){var L=this.shape;P.beginPath();P.arc(L.cx,L.cy,L.r,0,A,1)},_renderDashedStroke:function(P,L){var K=this.shape,Q=0,W=this.canvasDash.length;for(i=0;Q<A;){var ba=this.canvasDash[i%W]/K.r;i%2||(P.beginPath(),P.arc(K.cx,K.cy,K.r,Q,Q+ba,0),L&&P.stroke());Q+=ba;++i}}});
z.Line=c("dojox.gfx.canvas.Line",[z.Shape,l.Line],{_renderShape:function(P){var L=this.shape;P.beginPath();P.moveTo(L.x1,L.y1);P.lineTo(L.x2,L.y2)},_renderDashedStroke:function(P,L){var K=this.shape;P.beginPath();t(P,this,K.x1,K.y1,K.x2,K.y2);L&&P.stroke()}});z.Polyline=c("dojox.gfx.canvas.Polyline",[z.Shape,l.Polyline],{setShape:function(){this.inherited(arguments);var P=this.shape.points,L=P[0],K;this.bbox=null;this._normalizePoints();if(P.length)if("number"==typeof L)L=P;else for(L=[],K=0;K<P.length;++K){var Q=
P[K];L.push(Q.x,Q.y)}else L=[];this.canvasPolyline=L;return this},_renderShape:function(P){var L=this.canvasPolyline;if(L.length){P.beginPath();P.moveTo(L[0],L[1]);for(var K=2;K<L.length;K+=2)P.lineTo(L[K],L[K+1])}},_renderDashedStroke:function(P,L){var K=this.canvasPolyline,Q=0;P.beginPath();for(var W=0;W<K.length;W+=2)Q=t(P,this,K[W],K[W+1],K[W+2],K[W+3],Q);L&&P.stroke()}});z.Image=c("dojox.gfx.canvas.Image",[z.Shape,l.Image],{setShape:function(){this.inherited(arguments);var P=new Image;this.surface.downloadImage(P,
this.shape.src);this.canvasImage=P;return this},_renderShape:function(P){var L=this.shape;P.drawImage(this.canvasImage,L.x,L.y,L.width,L.height)}});z.Text=c("dojox.gfx.canvas.Text",[z.Shape,l.Text],{_setFont:function(){this.fontStyle?this.canvasFont=D.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var P=this.shape,L=0;if(P.text){var K=this.surface.rawNode.getContext("2d");K.save();this._renderTransform(K);this._renderFill(K,!1);this._renderStroke(K,!1);this.canvasFont&&
(K.font=this.canvasFont);L=K.measureText(P.text).width;K.restore()}return L},_render:function(P){P.save();this._renderTransform(P);this._renderFill(P,!1);this._renderStroke(P,!1);this._renderShape(P);P.restore()},_renderShape:function(P){var L=this.shape;L.text&&(P.textAlign="middle"===L.align?"center":L.align,this.canvasFont&&(P.font=this.canvasFont),this.canvasFill&&P.fillText(L.text,L.x,L.y),this.strokeStyle&&(P.beginPath(),P.strokeText(L.text,L.x,L.y),P.closePath()))}});H(z.Text,"setFont");C||
z.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var R={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};z.Path=c("dojox.gfx.canvas.Path",[z.Shape,r.Path],{constructor:function(){this.lastControl=
{}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);u||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(P){var L=B.clone(this.last);this[R[P.action]](this.canvasPath,P.action,P.args,this._needsDash?this._dashedPath:null);this.last=L;this.inherited(arguments)},_renderShape:function(P){var L=this.canvasPath;
P.beginPath();for(var K=0;K<L.length;K+=2)P[L[K]].apply(P,L[K+1])},_renderDashedStroke:u?function(){}:function(P,L){var K=this._dashedPath;P.beginPath();for(var Q=0;Q<K.length;Q+=2)P[K[Q]].apply(P,K[Q+1]);L&&P.stroke()},_moveToA:function(P,L,K,Q){P.push("moveTo",[K[0],K[1]]);Q&&Q.push("moveTo",[K[0],K[1]]);for(L=2;L<K.length;L+=2)P.push("lineTo",[K[L],K[L+1]]),Q&&(this._dashResidue=t(Q,this,K[L-2],K[L-1],K[L],K[L+1],this._dashResidue));this.last.x=K[K.length-2];this.last.y=K[K.length-1];this.lastControl=
{}},_moveToR:function(P,L,K,Q){L="x"in this.last?[this.last.x+=K[0],this.last.y+=K[1]]:[this.last.x=K[0],this.last.y=K[1]];P.push("moveTo",L);Q&&Q.push("moveTo",L);for(L=2;L<K.length;L+=2)P.push("lineTo",[this.last.x+=K[L],this.last.y+=K[L+1]]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(P,L,K,Q){for(L=0;L<K.length;L+=2)Q&&(this._dashResidue=t(Q,this,this.last.x,this.last.y,K[L],K[L+1],this._dashResidue)),
P.push("lineTo",[K[L],K[L+1]]);this.last.x=K[K.length-2];this.last.y=K[K.length-1];this.lastControl={}},_lineToR:function(P,L,K,Q){for(L=0;L<K.length;L+=2)P.push("lineTo",[this.last.x+=K[L],this.last.y+=K[L+1]]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(P,L,K,Q){for(L=0;L<K.length;++L)P.push("lineTo",[K[L],this.last.y]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],K[L],this.last.y,
this._dashResidue));this.last.x=K[K.length-1];this.lastControl={}},_hLineToR:function(P,L,K,Q){for(L=0;L<K.length;++L)P.push("lineTo",[this.last.x+=K[L],this.last.y]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(P,L,K,Q){for(L=0;L<K.length;++L)P.push("lineTo",[this.last.x,K[L]]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],this.last.x,K[L],this._dashResidue));this.last.y=K[K.length-
1];this.lastControl={}},_vLineToR:function(P,L,K,Q){for(L=0;L<K.length;++L)P.push("lineTo",[this.last.x,this.last.y+=K[L]]),Q&&(this._dashResidue=t(Q,this,Q[Q.length-1][0],Q[Q.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(P,L,K,Q){for(L=0;L<K.length;L+=6)P.push("bezierCurveTo",K.slice(L,L+6)),Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.last.x=K[K.length-2];this.last.y=K[K.length-1];this.lastControl.x=K[K.length-4];this.lastControl.y=
K[K.length-3];this.lastControl.type="C"},_curveToR:function(P,L,K,Q){for(L=0;L<K.length;L+=6)P.push("bezierCurveTo",[this.last.x+K[L],this.last.y+K[L+1],this.lastControl.x=this.last.x+K[L+2],this.lastControl.y=this.last.y+K[L+3],this.last.x+K[L+4],this.last.y+K[L+5]]),Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue)),this.last.x+=K[L+4],this.last.y+=K[L+5];this.lastControl.type="C"},_smoothCurveToA:function(P,L,K,Q){for(L=0;L<K.length;L+=4){var W="C"==this.lastControl.type;P.push("bezierCurveTo",
[W?2*this.last.x-this.lastControl.x:this.last.x,W?2*this.last.y-this.lastControl.y:this.last.y,K[L],K[L+1],K[L+2],K[L+3]]);Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.lastControl.x=K[L];this.lastControl.y=K[L+1];this.lastControl.type="C"}this.last.x=K[K.length-2];this.last.y=K[K.length-1]},_smoothCurveToR:function(P,L,K,Q){for(L=0;L<K.length;L+=4){var W="C"==this.lastControl.type;P.push("bezierCurveTo",[W?2*this.last.x-this.lastControl.x:this.last.x,W?2*this.last.y-this.lastControl.y:
this.last.y,this.last.x+K[L],this.last.y+K[L+1],this.last.x+K[L+2],this.last.y+K[L+3]]);Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.lastControl.x=this.last.x+K[L];this.lastControl.y=this.last.y+K[L+1];this.lastControl.type="C";this.last.x+=K[L+2];this.last.y+=K[L+3]}},_qCurveToA:function(P,L,K,Q){for(L=0;L<K.length;L+=4)P.push("quadraticCurveTo",K.slice(L,L+4));Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.last.x=K[K.length-2];this.last.y=K[K.length-
1];this.lastControl.x=K[K.length-4];this.lastControl.y=K[K.length-3];this.lastControl.type="Q"},_qCurveToR:function(P,L,K,Q){for(L=0;L<K.length;L+=4)P.push("quadraticCurveTo",[this.lastControl.x=this.last.x+K[L],this.lastControl.y=this.last.y+K[L+1],this.last.x+K[L+2],this.last.y+K[L+3]]),Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue)),this.last.x+=K[L+2],this.last.y+=K[L+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(P,L,K,Q){for(L=0;L<K.length;L+=2){var W="Q"==this.lastControl.type;
P.push("quadraticCurveTo",[this.lastControl.x=W?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=W?2*this.last.y-this.lastControl.y:this.last.y,K[L],K[L+1]]);Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=K[K.length-2];this.last.y=K[K.length-1]},_qSmoothCurveToR:function(P,L,K,Q){for(L=0;L<K.length;L+=2){var W="Q"==this.lastControl.type;P.push("quadraticCurveTo",[this.lastControl.x=W?2*this.last.x-this.lastControl.x:this.last.x,
this.lastControl.y=W?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+K[L],this.last.y+K[L+1]]);Q&&(this._dashResidue=n(Q,this,P[P.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=K[L];this.last.y+=K[L+1]}},_arcTo:function(P,L,K,Q){L="a"==L;for(var W=0;W<K.length;W+=7){var ba=K[W+5],S=K[W+6];L&&(ba+=this.last.x,S+=this.last.y);var X=k.arcAsBezier(this.last,K[W],K[W+1],K[W+2],K[W+3]?1:0,K[W+4]?1:0,ba,S);a.forEach(X,function(aa){P.push("bezierCurveTo",aa)});Q&&(this._dashResidue=
n(Q,this,p,this._dashResidue));this.last.x=ba;this.last.y=S}this.lastControl={}},_closePath:function(P,L,K,Q){P.push("closePath",[]);Q&&(this._dashResidue=t(Q,this,this.last.x,this.last.y,Q[1][0],Q[1][1],this._dashResidue));this.lastControl={}}});a.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(P){H(z.Path,P)});z.TextPath=c("dojox.gfx.canvas.TextPath",[z.Shape,r.TextPath],{_renderShape:function(P){},_setText:function(){},_setFont:function(){}});
z.Surface=c("dojox.gfx.canvas.Surface",l.Surface,{constructor:function(){l.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){l.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(P,L){this.width=D.normalizedLength(P);this.height=D.normalizedLength(L);if(!this.rawNode)return this;var K=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,K=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,K=!0);K&&
this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(P){!this.rawNode||!P&&this.pendingImageCount||(P=this.rawNode.getContext("2d"),P.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(P),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender))},render:function(P){P.save();for(var L=0;L<this.children.length;++L)this.children[L]._render(P);P.restore()},makeDirty:function(){this.pendingImagesCount||
"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(B.hitch(this,this._render),0))},downloadImage:function(P,L){var K=B.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);P.onload=K;P.onerror=K;P.onabort=K;P.src=L},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},
on:function(){}});z.createSurface=function(P,L,K){if(!L&&!K){var Q=g.position(P);L=L||Q.w;K=K||Q.h}"number"==typeof L&&(L+="px");"number"==typeof K&&(K+="px");Q=new z.Surface;P=e.byId(P);var W=P.ownerDocument.createElement("canvas");W.width=D.normalizedLength(L);W.height=D.normalizedLength(K);P.appendChild(W);Q.rawNode=W;Q._parent=P;return Q.surface=Q};var O=l.Container;c={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();
return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(P){this._makeDirty();return O.add.apply(this,arguments)},remove:function(P,L){this._makeDirty();return O.remove.apply(this,arguments)},clear:function(){this._makeDirty();return O.clear.apply(this,arguments)},getBoundingBox:O.getBoundingBox,_moveChildToFront:function(P){this._makeDirty();return O._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(P){this._makeDirty();return O._moveChildToBack.apply(this,
arguments)}};r={createObject:function(P,L){var K=new P;K.surface=this.surface;K.setShape(L);this.add(K);return K}};b(z.Group,c);b(z.Group,l.Creator);b(z.Group,r);b(z.Surface,c);b(z.Surface,l.Creator);b(z.Surface,r);z.fixTarget=function(P,L){return!0};return z})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(D,B,a){function c(k){var f=Math.cos(k);k=Math.sin(k);var b={x:f+4/3*(1-f),y:k-4/3*f*(1-f)/k};return{s:{x:f,y:-k},c1:{x:b.x,y:-b.y},c2:b,e:{x:f,y:k}}}var h=
2*Math.PI,g=Math.PI/4,e=Math.PI/8,l=g+e,r=c(e);return D.arc={unitArcAsBezier:c,curvePI4:r,arcAsBezier:function(k,f,b,d,q,m,n,t){q=!!q;m=!!m;var z=a._degToRad(d);d=f*f;var w=b*b,y=a.multiplyPoint(a.rotate(-z),{x:(k.x-n)/2,y:(k.y-t)/2}),x=y.x*y.x,A=y.y*y.y;d=Math.sqrt((d*w-d*A-w*x)/(d*A+w*x));isNaN(d)&&(d=0);d={x:d*f*y.y/b,y:-d*b*y.x/f};q==m&&(d={x:-d.x,y:-d.y});d=a.multiplyPoint([a.translate((k.x+n)/2,(k.y+t)/2),a.rotate(z)],d);f=a.normalize([a.translate(d.x,d.y),a.rotate(z),a.scale(f,b)]);d=a.invert(f);
k=a.multiplyPoint(d,k);t=a.multiplyPoint(d,n,t);n=Math.atan2(k.y,k.x);d=n-Math.atan2(t.y,t.x);m&&(d=-d);0>d?d+=h:d>h&&(d-=h);b=e;t=r;b=m?b:-b;k=[];for(q=d;0<q;q-=g)q<l&&(b=q/2,t=c(b),b=m?b:-b,q=0),y=a.normalize([f,a.rotate(n+b)]),m?(d=a.multiplyPoint(y,t.c1),z=a.multiplyPoint(y,t.c2),y=a.multiplyPoint(y,t.e)):(d=a.multiplyPoint(y,t.c2),z=a.multiplyPoint(y,t.c1),y=a.multiplyPoint(y,t.s)),k.push([d.x,d.y,z.x,z.y,y.x,y.y]),n+=2*b;return k}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang",
"./matrix"],function(D,B,a){function c(r,k){return Math.abs(r-k)<=1E-6*(Math.abs(r)+Math.abs(k))}function h(r,k,f,b){if(!isFinite(r))return f;if(!isFinite(f))return r;k=Math.abs(k);b=Math.abs(b);return(k*r+b*f)/(k+b)}function g(r){r=a.normalize(r);var k=-r.xx-r.yy,f=r.xx*r.yy-r.xy*r.yx,b=Math.sqrt(k*k-4*f);k=-(k+(0>k?-b:b))/2;f/=k;b=r.xy/(k-r.xx);var d=1,q=r.xy/(f-r.xx),m=1;c(k,f)&&(b=1,q=d=0,m=1);isFinite(b)||(b=1,d=(k-r.xx)/r.xy,isFinite(d)||(b=(k-r.yy)/r.yx,d=1,isFinite(b)||(b=1,d=r.yx/(k-r.yy))));
isFinite(q)||(q=1,m=(f-r.xx)/r.xy,isFinite(m)||(q=(f-r.yy)/r.yx,m=1,isFinite(q)||(q=1,m=r.yx/(f-r.yy))));r=Math.sqrt(b*b+d*d);var n=Math.sqrt(q*q+m*m);isFinite(b/=r)||(b=0);isFinite(d/=r)||(d=0);isFinite(q/=n)||(q=0);isFinite(m/=n)||(m=0);return{value1:k,value2:f,vector1:{x:b,y:d},vector2:{x:q,y:m}}}function e(r,k){var f=0>r.xx*r.yy||0<r.xy*r.yx?-1:1,b=k.angle1=(Math.atan2(r.yx,r.yy)+Math.atan2(-f*r.xy,f*r.xx))/2;f=Math.cos(b);b=Math.sin(b);k.sx=h(r.xx/f,f,-r.xy/b,b);k.sy=h(r.yy/f,f,r.yx/b,b);return k}
function l(r,k){var f=0>r.xx*r.yy||0<r.xy*r.yx?-1:1,b=k.angle2=(Math.atan2(f*r.yx,f*r.xx)+Math.atan2(-r.xy,r.yy))/2;f=Math.cos(b);b=Math.sin(b);k.sx=h(r.xx/f,f,r.yx/b,b);k.sy=h(r.yy/f,f,-r.xy/b,b);return k}return D.decompose=function(r){var k=a.normalize(r);r={dx:k.dx,dy:k.dy,sx:1,sy:1,angle1:0,angle2:0};if(c(k.xy,0)&&c(k.yx,0))return B.mixin(r,{sx:k.xx,sy:k.yy});if(c(k.xx*k.yx,-k.xy*k.yy))return e(k,r);if(c(k.xx*k.xy,-k.yx*k.yy))return l(k,r);var f=new a.Matrix2D(k);var b=B.mixin(f,{dx:0,dy:0,xy:f.yx,
yx:f.xy});f=g([k,b]);b=g([b,k]);f=new a.Matrix2D({xx:f.vector1.x,xy:f.vector2.x,yx:f.vector1.y,yy:f.vector2.y});b=new a.Matrix2D({xx:b.vector1.x,xy:b.vector1.y,yx:b.vector2.x,yy:b.vector2.y});k=new a.Matrix2D([a.invert(f),k,a.invert(b)]);e(b,r);k.xx*=r.sx;k.yy*=r.sy;l(f,r);k.xx*=r.sx;k.yy*=r.sy;return B.mixin(r,{sx:k.xx,sy:k.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(D){D=D.bezierutils={};D.tAtLength=function(e,l){var r=0,k=6==e.length,f=0,b=0,d=k?c:g,q=function(m,n){for(var t=
0,z=0;z<m.length-2;z+=2)t+=a(m[z],m[z+1],m[z+2],m[z+3]);z=k?a(e[0],e[1],e[4],e[5]):a(e[0],e[1],e[6],e[7]);t-z>n||f+t>l+n?(++b,t=d(m,.5),q(t[0],n),Math.abs(f-l)<=n||q(t[1],n)):(f+=t,r+=1/(1<<b))};l&&q(e,.5);return r};var B=D.computeLength=function(e){for(var l=6==e.length,r=0,k=0;k<e.length-2;k+=2)r+=a(e[k],e[k+1],e[k+2],e[k+3]);k=l?a(e[0],e[1],e[4],e[5]):a(e[0],e[1],e[6],e[7]);return.1<r-k?(e=l?c(e,.5):h(e,.5),r=B(e[0],l),r+=B(e[1],l)):r},a=D.distance=function(e,l,r,k){return Math.sqrt((r-e)*(r-e)+
(k-l)*(k-l))},c=function(e,l){var r=1-l,k=r*r,f=l*l,b=e[0],d=e[1],q=e[2],m=e[3],n=e[4],t=e[5],z=k*b+2*r*l*q+f*n;k=k*d+2*r*l*m+f*t;return[[b,d,r*b+l*q,r*d+l*m,z,k],[z,k,r*q+l*n,r*m+l*t,n,t]]},h=function(e,l){var r=1-l,k=r*r,f=k*r,b=l*l,d=b*l,q=e[0],m=e[1],n=e[2],t=e[3],z=e[4],w=e[5],y=e[6],x=e[7],A=f*q+3*k*l*n+3*r*b*z+d*y;f=f*m+3*k*l*t+3*r*b*w+d*x;return[[q,m,r*q+l*n,r*m+l*t,k*q+2*r*l*n+b*z,k*m+2*r*l*t+b*w,A,f],[A,f,k*n+2*r*l*z+b*y,k*t+2*r*l*w+b*x,r*z+l*y,r*w+l*x,y,x]]},g=D.splitBezierAtT=function(e,
l){return 6==e.length?c(e,l):h(e,l)};return D})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(D,B,a){B.getObject("json",!0,a);a.json._slice=function(c,h,g,e){var l=c.length,r=[];g=g||l;h=0>h?Math.max(0,h+l):Math.min(l,h);for(g=0>g?Math.max(0,g+l):Math.min(l,g);h<g;h+=e)r.push(c[h]);return r};a.json._find=function(c,h){function g(r){h&&(!0!==h||r instanceof Array?r[h]&&e.push(r[h]):e.push(r));for(var k in r){var f=r[k];h?f&&"object"==
typeof f&&g(f):e.push(f)}}var e=[];if(h instanceof Array){if(1==h.length)return c[h[0]];for(var l=0;l<h.length;l++)e.push(c[h[l]])}else g(c);return e};a.json._distinctFilter=function(c,h){for(var g=[],e={},l=0,r=c.length;l<r;++l){var k=c[l];h(k,l,c)&&("object"==typeof k&&k?k.__included||(k.__included=!0,g.push(k)):e[k+typeof k]||(e[k+typeof k]=!0,g.push(k)))}l=0;for(r=g.length;l<r;++l)g[l]&&delete g[l].__included;return g};return a.json.query=function(c,h){function g(b,d,q,m,n,t,z,w){return l[w].match(/[\*\?]/)||
"~"==z?"/^"+l[w].substring(1,l[w].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==z?"$/i":"$/")+".test("+d+")":b}var e=0,l=[];c=c.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(b){e+="["==b?1:"]"==b?-1:0;return"]"==b&&0<e?"`]":'"'==b.charAt(0)||"'"==b.charAt(0)?"`"+(l.push(b)-1):b});var r="";c.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});c=c.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,
function(b){return"."==b.charAt(0)?b:"@"==b?"$obj":(b.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+b}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(b,d,q){return(d=b.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?(q="",b.match(/^\./)&&(r="dojox.json._find("+r,q=",true)"),r=(d[1].match(/=/)?"dojo.map":d[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+r,q+",function($obj){return "+d[2]+"})"):(d=b.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+
d[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(m,n,t){return"var av\x3d "+t.replace(/\$obj/,"a")+",bv\x3d "+t.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==n?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==n?-1:1)+";}\n"})+"return 0;})":(d=b.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(r="dojox.json._slice("+r,","+(d[1]||0)+","+(d[2]||0)+","+(d[3]||1)+")"):b.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(r="dojox.json._find("+r,("."==b.charAt(1)?",'"+q+"'":b.match(/,/)?
","+b:"")+")"):b}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,g).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(b,d,q,m,n,t,z,w){return g(b,m,n,t,z,w,q,d)});c=r+("$"==c.charAt(0)?"":"$")+c.replace(/`([0-9]+|\])/g,function(b,d){return"]"==d?"]":l[d]});for(var k=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+c+"}"),f=0;f<arguments.length-1;f++)arguments[f]=arguments[f+1];return h?k.apply(this,
arguments):k}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,extraParameters:null});B.setObject("tasks.PrintParameters",D,c);return D})},"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,B,a,c){D=D(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,
subLayerIds:null});B.setObject("tasks.LegendLayer",D,c);return D})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){return function(b,d,q,m){var n=B.byId("hiddenMapDiv");B.byId("hiddenMapDiv")||(n=e.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",
width:"200px",height:"130px"}},document.body));e.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},n);n={item:{}};n.item.extent=d;n.itemData=b;f.arcgisUrl=k.restBaseUrl+"content/items";f.createMap(n,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(t){var z=function(v){var u=new h;v._heatmapManager?c.after(v._heatmapManager,"recalculateHeatmap",function(){u.resolve()}):u.resolve();return u},w=function(v){var u=new h;if(v.updating){"esri.layers.VectorTileLayer"===
v.declaredClass&&setTimeout(function(){C&&(C.remove(),u.resolve())},1E4);var C=D(v,"update-end",function(){C.remove();u.resolve()})}else u.resolve();return u},y=function(v){var u=new h;"esri.layers.VectorTileLayer"===v.declaredClass&&setTimeout(function(){C&&(C.remove(),u.resolve())},5E3);var C=D(v,"update-start",function(){C.remove();w(v).then(function(){u.resolve()})});return u},x=function(v){var u=new h,C=setInterval(l.hitch(this,function(E,F){E.graphics&&E.graphics.length?(clearInterval(C),u.resolve()):
10<F[0]?(clearInterval(C),u.resolve()):F[0]+=1},v,[0]),500);return u},A=[];r.forEach(t.map.graphicsLayerIds,function(v){v=t.map.getLayer(v);v.renderer&&"heatmap"===v.renderer.type?A.push(z(v)):"esri.layers.WFSLayer"===v.declaredClass?A.push(x(v)):v.updating&&A.push(w(v))});r.forEach(t.map.layerIds,function(v){v=t.map.getLayer(v);v.updating?A.push(w(v)):"esri.layers.VectorTileLayer"===v.declaredClass&&A.push(y(v))});A.length?g(A).then(function(v){setTimeout(function(){q(t.map)},1E3)}):q(t.map)},function(t){m&&
m(t)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),function(D,B,a,c,h,g,e){return function(l,r,k){function f(){b.resolve(r)}var b=new D;if(!(l.layer instanceof B)||l.layer instanceof a)return b.resolve(r),b;var d=l.layer;l.layers&&(d=l.layers[0]);d.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){d.statisticsPlugin.getSuggestedScaleRange().then(function(q){if(q.center){var m=
g(q.center,1280,q.minScale);if(0<q.relaxedMinScale)for(var n=e(m,200),t=800;n>q.relaxedMinScale&&!(m=g(q.center,t,q.minScale),n=e(m,200),t-=200,0>=t););h(m,new c({wkid:4326}),function(z){r=[[z[0].xmin,z[0].ymin],[z[0].xmax,z[0].ymax]];f()},f)}else f()},f)},f);return b}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A){D=D([q],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(v,u){u=u||{};u.mode&&u.mode!==q.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=q.MODE_STREAM,this._mode=new m(this));this.purgeOptions=new A(this,u.purgeOptions||{});this.purgeInterval=u.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=h.hitch(this,this._attemptReconnect);this._purge=h.hitch(this,this._purge);this._processServiceJson=h.hitch(this,this._processServiceJson);if(h.isObject(v)&&v.layerDefinition)this._initFeatureLayer(v,u);else{var C=this;b({url:v,content:h.mixin({f:"json"}),callbackParamName:"callback"}).then(function(E){C._processServiceJson(E,u)},function(E){C._errorHandler(E)})}},_processServiceJson:function(v,
u){var C=this;v.relatedFeatures&&v.relatedFeatures.featuresUrl&&v.relatedFeatures.joinField?(this._relatedUrl=v.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=v.relatedFeatures.joinField,b({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(E){E=E.fields||[];var F=a.map(v.fields,function(G){return G.name.toLowerCase()});a.forEach(E,function(G){-1===a.indexOf(F,G.name.toLowerCase())&&v.fields.push(G)});u.resourceInfo=v;C._initFeatureLayer(C._url,u)},
function(E){C.onError({error:E})})):(u.resourceInfo=v,this._initFeatureLayer(this._url,u))},_initLayer:function(v,u){this.inherited(arguments);if(v){var C;if(v.layerDefinition)this.purgeOptions=new A(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||v.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var E=this._getWebsocketConnectionInfo(v),F=E.urls;F&&F.length?(this._socketUrls=F,this.socketUrl=F[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=E.token,F.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=F.length)):(this.socketUrl=void 0,E="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(E+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(E)))}if(this._params.filter)try{this._filter=
C=this._makeFilter(this._params.filter)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){C=C||{};C.geometry=this._params.geometryDefinition;C.outFields=this._outFields;C.where=this._defnExpr;try{this._filter=C=this._makeFilter(C)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=v.keepLatestArchive?v.keepLatestArchive.featuresUrl:null;v.relatedFeatures&&v.relatedFeatures.featuresUrl&&v.relatedFeatures.joinField&&(this._relatedUrl=v.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=v.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(v){var u=this.inherited(arguments),C=this._getRenderer();this.timeInfo&&(this._trackIdField||C&&(C.latestObservationRenderer||C.trackRenderer))&&(this._trackManager=new n(this),this._trackManager.initialize(v));this.socketUrl&&!this._connected&&this._map&&this.connect();return u},_unsetMap:function(v,
u){a.forEach(this._connects,B.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(v){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(v){this.setFilter({where:v})},getDefinitionExpression:function(){if(this._filter)var v=this._filter.where;return v},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(v){this.inherited(arguments)},setGeometryDefinition:function(v){this.setFilter({geometry:v})},getGeometryDefinition:function(){if(this._filter)var v=this._filter.geometry;return v},connect:function(v){var u=new g,C={},E=this._filter,F,G,H=this.socketUrl,J;try{this._connected||this._connecting?u.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(C.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(C.outSR=this._map.spatialReference.wkid);if(E)for(G in E)null!==E[G]&&(F="geometry"===G?JSON.stringify(E[G]):E[G],C[G]=F);H+="?"+l.objectToQuery(C);J=this._createConnection(H,v);u.resolve(J)}.bind(this)).otherwise(function(I){u.reject(I)}))}catch(I){v&&(v(I,!1),u.reject(I)),this.onConnectionError({error:I})}return u.promise},disconnect:function(v){var u=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",C=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:C,message:u});v&&v(null,!0)},setFilter:function(v){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
v.outFields){var u=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:u});return!1}var C=this._makeFilter(v)}catch(E){return u=Error(E),this.onFilterChange({filter:this.getFilter(),error:u}),!1}if(this.socket)v={filter:C},this.socket.send(JSON.stringify(v));else r.once(this,"connect",function(E){this.setFilter(C)});return!0},getFilter:function(){var v=this._filter,u={},C=["geometry","outFields","where"];v&&a.forEach(C,function(E){var F=
v[E];F&&("geometry"===E?F=t.fromJson(F):"outFields"===E&&(F=F.split(",")),u[E]=F)});return u},setMaximumTrackPoints:function(v){if(!v&&0!==v)return!1;this.maximumTrackPoints=v;this._mode.propertyChangeHandler(3)},getUniqueValues:function(v){var u={},C=[];var E=this._getField(v,!0);if(!E)return C;v=E.name;a.forEach(this.graphics||[],function(F){F=(F.attributes||{})[v];void 0===F||u[F]||(u[F]=1,C.push(F))});C.sort(function(F,G){return F<G?-1:F>G?1:0});return C},getLatestObservations:function(){var v=
[];return v=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(v){var u=this.purgeInterval;this.purgeInterval=v;this._togglePurgeT();v&&this._togglePurgeT(!0);if(u!==v)this.onPurgeIntervalChange();return this},_togglePurgeT:function(v){if(v&&this.purgeInterval){var u=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){u.updating||u.suspended||(u._mode._flushDrawBuffer(),u._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(v,u){var C=this,E=new WebSocket(v);E.onopen=function(){C.socket=E;C._connected=!0;C._connecting=!1;C._reconnecting=!1;C._reconnectAttempts=0;C._bind();C.onConnect();u&&u(null,!0)};E.onclose=
function(F){var G=!0,H=C._connected,J=null;if(C._connected||C._reconnecting){if(F.code){var I="Connection failed: ";if(1001===F.code)I+=F.reason||"Service is going away.",G=!1;else if(4400===F.code)I+=F.reason||"Invalid url parameters. Check filter properties.",G=!1;else if(4404===F.code)I+="Service not found",G=!1;else if(4401===F.code||4403===F.code)I+="Not authorized",G=!1}G&&(C._reconnectAttempts+=1,C._reconnectAttempts>C.maxReconnectAttempts&&(I="Maximum reconnect attempts exceeded",G=!1,H=!0));
C._connected=!1;H&&(I&&(J=Error(I)),C.onDisconnect({error:J,willReconnect:G}));G?C._attemptReconnect():C.socket=null}else C.socket||(J=Error("Could not make connection to service"),C.onConnectionError({error:J})),C.socket=null,C._connected=!1};E.onerror=function(F){};return E},_getKeepLatestFeatures:function(){var v=new g;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){v.resolve()}.bind(this)).otherwise(function(u){v.reject(u)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):v.resolve();return v.promise},_getRelatedFeatures:function(){var v=new g;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){v.resolve()}.bind(this)).otherwise(function(u){v.reject(u)}).always(function(){this._relatedQueried=!0}.bind(this)):v.resolve();return v.promise},_purge:function(){var v,u=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(v=0;v<this.graphics.length-
this.purgeOptions.displayCount;v++){var C=this.graphics[v];u.push(C)}0<u.length&&(this._mode._removeFeatures(u),this._trackManager&&this._trackManager.removeFeatures(u))},_bind:function(){var v=this;this.socket.onmessage=function(u){v._onMessage(JSON.parse(u.data))}},_onMessage:function(v){var u=this;this.onMessage(v);var C={create:function(E){u._create(E)},update:function(E){u._update(E)},"delete":function(E){u._delete(E)}};if(v.type)C[v.type](v.feature);else v.hasOwnProperty("filter")?u._handleFilterMessage(v):
this._create(v)},_create:function(v){function u(F){if(!C._featureHasOID(F,E)){if(!F.geometry)return!1;F.attributes=F.attributes||{};F.attributes[E]=C._nextId++}F=F.declaredClass?F:new d(F);C._mode.drawFeature(F)}var C=this,E=C.objectIdField;v.length?v.forEach(function(F){F&&u(F)}):v&&u(v)},_delete:function(v){var u=this,C=v[u.objectIdField]||v.attributes[u.objectIdField],E=!1;this.graphics.forEach(function(F){F.attributes[u.objectIdField]==C&&(E=F)});E&&this.remove(E)},_update:function(v){var u=this,
C=!1;this.graphics.forEach(function(E){E.attributes[u.objectIdField]==v.attributes[u.objectIdField]&&(C=E)});C&&(v.attributes&&C.setAttributes(v.attributes),v.geometry&&C.setGeometry(t.fromJson(v.geometry)))},_makeFilter:function(v){var u=null;v=v||{};if(void 0!==v.geometry)if(u=u||{},null===v.geometry)u.geometry=null;else{var C="string"===typeof v.geometry?t.fromJson(JSON.parse(v.geometry)):v.geometry.declaredClass?v.geometry:t.fromJson(v.geometry);if(!C||"point"===C.type)throw"Query object contains invalid geometry";
"extent"!==C.type&&(C=C.getExtent());if(!C||0===C.getHeight()&&0===C.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";u.spatialRel="esriSpatialRelIntersects";u.geometryType="esriGeometryEnvelope";u.geometry=C.toJson()}void 0!==v.where&&(u=u||{},u.where=v.where);if(void 0!==v.outFields&&(u=u||{},v="string"===typeof v.outFields?"*"===v.outFields?null:v.outFields.replace(/,\s+/g,",").split(","):null===v.outFields?null:v.outFields,v=this._makeOutFields(v))){if(v.errors&&
0<v.errors.length)throw"Invalid filter outFields. "+v.errors.join(",");u.outFields=v.fields?v.fields.join(","):null}return u},_makeOutFields:function(v){var u=this,C=[],E=[],F={fields:null};if(!v||0===v.length)return F;a.forEach(v,function(G){if("*"===G)return F;var H=u._getField(G,!0);H?C.push(H.name):E.push("Field named "+G+" not found in schema.")});v=u._getOutFields();a.forEach(v,function(G){u._getField(G)&&-1===a.indexOf(C,G)&&C.push(G)});F.fields=C;F.errors=E;return F},_handleFilterMessage:function(v){v.error?
(v=Error(v.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:v})):(v=v.filter,v.geometry&&"string"===typeof v.geometry&&(v.geometry=JSON.parse(v.geometry)),this._filter=v,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(v){var u={urls:[]},C,E=[],F=[],G;v.streamUrls&&a.forEach(v.streamUrls,function(I){"ws"===I.transport&&(C=I.urls,u.token=I.token)});if(!C)return u;a.forEach(C,function(I){0===I.lastIndexOf("wss",0)?F.push(I):E.push(I)});v="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?F:0===E.length?F:E;if(1<v.length)for(G=0;G<v.length-1;G++){var H=G+Math.floor(Math.random()*(v.length-G));var J=v[H];v[H]=v[G];v[G]=J}u.urls=v;return u},_attemptReconnect:function(){var v=this;this._reconnectTimeoutId=null;v._connected=!1;if(!v._socketUrls)return!1;if(!v._collection&&!v._reconnecting&&v.socket&&v.credential)return v._reconnecting=!0,v._getServiceConnectionMetadata(v._attemptReconnect),!1;v._reconnecting=!0;v.socket=null;if(v._reconnectAttempts>
v.maxReconnectAttempts)return v._reconnecting=!1;v.socketUrl=v._socketUrls[v._reconnectAttempts>v._socketUrls.length-1?v._reconnectAttempts%v._socketUrls.length:v._reconnectAttempts];v.socketUrl+="/"+v.socketDirection;var u=v._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){v.onAttemptReconnect({count:v._reconnectAttempts,url:v.socketUrl});v.connect()},1E3*v._reconnectAttempts+u)},_getServiceConnectionMetadata:function(v){var u=this,C=u._url.path;v="function"===typeof v?
v:null;b({url:C,content:h.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(E){E=u._getWebsocketConnectionInfo(E);u._websocketToken=E.token;v&&v()},function(E){u.onError(Error(E))})},_setDefaultRenderer:function(){var v=this.geometryType,u=new c([5,112,176,.8]),C=new c([255,255,255]);C=new w(w.STYLE_SOLID,C,1);if("esriGeometryPoint"===v||"esriGeometryMultipoint"===v)var E=new y(y.STYLE_CIRCLE,10,C,u);else if("esriGeometryPolyline"===v)E=new w(w.STYLE_SOLID,u,2);else if("esriGeometryPolygon"===
v||"esriGeometryEnvelope"===v)u=new c([5,112,176,.2]),C=new c([5,112,176,.8]),C=new w(w.STYLE_SOLID,C,1),E=new z(z.STYLE_SOLID,C,u);E&&this.setRenderer(new x(E))},_makeObjectIdField:function(){var v=1,u,C=[];if(!this.objectIdField){var E=this.fields.length;for(u=0;u<E;u++)C.push(this.fields[u].name.toLowerCase());for(;-1!==a.indexOf(C,"objectid_"+v);)v+=1;this.objectIdField="objectid_"+v;this.fields.push({name:"objectid_"+v,type:"esriFieldTypeOID",alias:"objectid_"+v,nullable:!1})}},_featureHasOID:function(v,
u){return v.attributes&&(v.attributes[u]||0===v.attributes[u])},_randomIntFromInterval:function(v,u){return Math.floor(Math.random()*(u-v+1)+v)}});h.setObject("layers.StreamLayer",D,f);return D})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(D,B,a,c,h,g,e,l,r){D=D([r],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(k){this.inherited(arguments);
var f=k.getMap().spatialReference;this.isWebMercator=f.isWebMercator();this.canWrap=f._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(k){this.inherited(arguments)},addFeatures:function(k,f){function b(y,x){var A,v;n[y]||(n[y]=[]);var u=n[y];if(0<w){x.length>w&&x.splice(0,x.length-w);var C=x.length+u.length;C>w&&(A=u.splice(0,C-w))}C=x.length;for(v=0;v<C;v+=1)u.push(x[v]);return{deletes:A,adds:x}}var d={},q={},m;if(f)return this.inherited(arguments),
d;var n=this.trackMap;var t=this.layer;var z=t._trackIdField;var w=t.maximumTrackPoints||0;a.forEach(k,function(y){var x=y.attributes[z];y.visible&&(q[x]||(q[x]=[]),q[x].push(y))});for(m in q)q.hasOwnProperty(m)&&(t=b(m,q[m]),d[m]=t);return d},removeFeatures:function(k){var f=[],b=this.layer.objectIdField,d=this.layer._trackIdField;k&&(a.forEach(k,function(q){var m;var n=q.attributes[d];var t=q.attributes[b];if(m=this.trackMap[n])for(q=0;q<m.length;q+=1){var z=m[q];if(z.attributes[b]===t){this.trackMap[n].splice(q,
1);-1===a.indexOf(n)&&f.push(n);break}}},this),0<k.length&&this.refreshTracks(f))},drawTracks:function(k){function f(z){var w=m[z],y=w&&1<w.length,x=b.trackLineMap[z];x&&!y&&(d.remove(x),delete b.trackLineMap[z],x=null);if(!y)return!1;y=[];for(var A=[],v,u=w.length,C=0;C<u;C++)if(v=w[C].geometry){v=v.normalize();var E=v.x,F=0,G=!1;H&&b.canWrap&&(F=E-H.x,Math.abs(F)>b.wrapThreshold&&(G=!0));G?(A.push([b.getWrappedX(E),v.y]),y.push(A.slice(0)),A=[[E,v.y]]):A.push([E,v.y]);var H=new e(E,v.y,n)}1<A.length&&
y.push(A);w={};w[t]=z;if(y.length)if(x){for(var J=x.geometry;J.paths.length;)J.removePath(J.paths.length-1);y.forEach(function(I){J.addPath(I)});x.setGeometry(J)}else x=new g(new l({paths:y,spatialReference:n}),null,w),d.add(x),b.trackLineMap[z]=x}var b=this,d=this.container,q;if(d){var m=this.trackMap;var n=this.map.spatialReference;var t=this.layer._trackIdField;if(k)a.forEach(k,function(z){f(z)});else for(q in m)m.hasOwnProperty(q)&&f(q)}},refreshTracks:function(k){function f(m){var n;m=b[m]||
[];var t=m.length;for(n=0;n<t;n++)d._repaint(m[n],null,!0)}var b=this.trackMap,d=this.layer,q;this.drawTracks(k);if(k)a.forEach(k,function(m){f(m)});else for(q in b)b.hasOwnProperty(q)&&f(q)},getLatestObservations:function(){var k,f=this.trackMap,b=[];for(k in f)if(f.hasOwnProperty(k)){var d=f[k];b.push(d[d.length-1])}return b},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(k){var f=this.isWebMercator,b=f?2.0037508342788905E7:180;f=f?-2.0037508342788905E7:
-180;return(0<k?f:b)-((0<k?b:f)-k)}});B.setObject("layers._StreamTrackManager",D,h);return D})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(D,B,a,c,h){D=D([a],{declaredClass:"esri.layers.PurgeOptions",constructor:function(g,e){this.parent=g;for(var l in e)this[l]=e[l]},_displayCountSetter:function(g){this.displayCount=g;this.parent.refresh()}});B.setObject("layers.PurgeOptions",D,h);return D})},"arcgisonline/map/core/projectExtent":function(){define(["arcgisonline/map/utils/contains",
"esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(D,B,a,c,h){function g(e,l){if(e&&l.xmin>l.xmax){var r=e.valid[1]-l.xmin,k=l.xmax-e.valid[0];r>k?l.xmax=e.valid[1]+k:l.xmin=e.valid[0]-r}}return function(e,l,r,k,f,b){var d=[102113,102100,3857],q=e.spatialReference.wkid;if(q===l.wkid)return r([e],null);if(4326==q&&D(d,l.wkid))return e.ymin=Math.max(e.ymin,-89.99),e.ymax=Math.min(e.ymax,89.99),e=a.geographicToWebMercator(e),f=e.spatialReference._getInfo(),
g(f,e),e.spatialReference.wkid=l.wkid,r([e],null);if(D(d,q)&&4326==l.wkid)return e=a.webMercatorToGeographic(e),f=e.spatialReference._getInfo(),g(f,e),r([e],null);b||(b=new h(window.esriGeowConfig.self.helperServices.geometry.url));if(f&&f.wrapAround180&&"extent"===e.type){var m=e;e=c.fromExtent(e)}b.project([e],l,function(n,t){if(!(n&&0<n.length&&n[0]&&"extent"==n[0].type)||isNaN(n[0].xmin)||isNaN(n[0].ymin)||isNaN(n[0].xmax)||isNaN(n[0].ymax)){if(n&&0<n.length&&n[0]&&"point"==n[0].type&&!isNaN(n[0].x)&&
!isNaN(n[0].y))return r(n,t);if(m&&"polygon"===n[0].type){if(1===n[0].rings.length)n[0]=new B(n[0].getExtent());else{var z=(new c(n[0].spatialReference.toJson())).addRing(n[0].rings[0]).getExtent(),w=(new c(n[0].spatialReference.toJson())).addRing(n[0].rings[1]).getExtent();n[0]=w;n[0].xmin=w.xmin-z.getWidth();n[0].ymin=Math.min(w.ymin,z.ymin);n[0].ymax=Math.max(w.ymax,z.ymax)}return r(n,t)}if(k)return k()}else return r(n,t)},k)}})},"arcgisonline/map/utils/contains":function(){define([],function(){return function(D,
B){for(var a=D.length;a--;)if(D[a]===B)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["esri/geometry/Extent","arcgisonline/map/core/getExtentForScale"],function(D,B){return function(a,c,h){a=new D(a.x-1,a.y-.5,a.x+1,a.y+.5,a.spatialReference);return B(a,c,h)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,B){return function(a,c,h){var g=20015077/180,e=a.spatialReference;if(e){var l=e.wkid;var r=
e.wkt}e=null;l?e=B.values[B[l]]:r&&-1!==r.search(/^PROJCS/i)&&(l=/UNIT\[([^\]]+)\]\]$/i.exec(r))&&l[1]&&(e=parseFloat(l[1].split(",")[1]));return a.expand(h*c/(39.37*(e||g)*D.defaults.screenDPI)/a.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(D,B,a){return function(c,h,g){a.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+c+"/data"},{disableIdentityLookup:!0}).then(B.hitch(this,function(e){if(e&&
(e.wfsInfo||e.wmtsInfo))var l=e;else if(e&&e.layers)l=e.layers;else if(g){g();return}h&&h(l)}),B.hitch(this,function(e){g&&g(e)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(D,B,a,c,h,g,e,l,r,k,f){var b=window.esriGeowConfig;return function z(q,
m,n,t){var w=function(u,C){clearTimeout(A);a.publish("ServiceAnswerReceived",[]);var E=u.fullExtent;E||(E=u.extent);!E||E.spatialReference&&(E.spatialReference.wkid||E.spatialReference.wkt)||(u.fullExtent=null,E=u.extent=null);(b.allSSL||"https:"==location.protocol)&&u.tileServers&&u.tileServers.length&&B.forEach(u.tileServers,function(F,G){if(r.isHostedService(F)||r.supportsHttps(F))u.tileServers[G]=F.replace("http:","https:")});E?n&&n(u,q,C):u.spatialReference&&(u.spatialReference.wkid||u.spatialReference.wkt)?
(E=new l(-180,-90,180,90,new e({wkid:4326})),k(E,new e(u.spatialReference),D.hitch(this,function(F){u.fullExtent=F[0];u.extent=F[0];n&&n(u,q,C)}),D.hitch(this,function(F,G){t&&(F.details=[],F.details.push("Missing extent and could not project GCS into service spatial reference."),t(F,G))}))):n&&n(u,q,C)},y=function(u,C){clearTimeout(A);a.publish("ServiceAnswerReceived",[]);t&&t(u,C)},x=!1,A=setTimeout(function(){clearTimeout(A);A=null;var u=q.toLowerCase();if(-1===u.indexOf("/arcgis/rest/")&&-1<u.indexOf("/arcgis/"))return q=
q.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),z(q,m,n,t);h.id.isBusy()?x=!0:m?(f.prototype.statics.getInstance().show({title:h.i18nBundle.generalDlg.waitDlgTitle,message:m}),A=setTimeout(function(){clearTimeout(A);A=null;h.id.isBusy()?x=!0:y("Request timed out.",{args:{url:q}})},45E3)):y("Request timed out.",{args:{url:q}})},1E4),v=q+(-1<q.indexOf("?")?"\x26f\x3djson":"?f\x3djson");g({url:v,callbackParamName:"callback",load:function(u,C){if(A||x)clearTimeout(A),u?u.error&&
""!==u.error?y(u.error,C):w(u,C):y("Request error.",{args:{url:q}})},error:function(u){if(A||x)clearTimeout(A),u&&u.message&&-1<u.message.indexOf("Aborted the Sign-In process")?a.publish("ServiceAnswerReceived",[]):y(u,{args:{url:q}})}})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromImageryItem":function(){define("require exports tslib esri/IdentityManager esri/request esri/urlUtils".split(" "),function(D,B,a,c,h,g){function e(b,d){return new Promise(function(q,m){return window.require(["esri/layers/ArcGISImageServiceLayer",
"esri/layers/MosaicRule","esri/layers/RasterFunction","esri/renderers/jsonUtils"],function(n,t,z,w){var y;n=new n(b);n.onError(function(){return m(Error("failed to generate thumbnail for service "+b))});var x=d.layerProperties;x&&((null===(y=x.bandIds)||void 0===y?0:y.length)&&n.setBandIds(x.bandIds,!0),x.mosaicRule&&n.setMosaicRule(new t(x.mosaicRule),!0),x.renderingRule&&n.setRenderingRule(new z(x.renderingRule),!0),x.renderer&&n.setRenderer(w.fromJson(x.renderer),!0));n.getImageUrl(d.extent||d.serviceInfo.extent,
d.size[0],d.size[1],function(A){if(!d.returnDataURL)return q({url:A});h["default"]({url:A,content:{},handleAs:"arraybuffer"}).then(function(v){var u=r(v);if(u)return k(v,u);m(Error("failed to generate thumbnail for service "+b))})})})})}function l(b,d){var q,m,n;return a.__awaiter(this,void 0,void 0,function(){var t,z,w,y,x,A,v,u,C,E,F,G,H,J,I,R,O,P,L,K,Q,W;return a.__generator(this,function(ba){switch(ba.label){case 0:return t=d.serviceInfo,z=d.size,w=d.query,y=d.layerProperties,x=d.returnDataURL,
A=null!==(q=d.extent)&&void 0!==q?q:t.extent,v=A.xmin,u=A.ymin,C=A.xmax,E=A.ymax,F=A.spatialReference,G=v+","+u+","+C+","+E,H=F?F.wkid||F.wkt:null,J=t.serviceDataType,I=t.bandCount,R=2===I&&(null===J||void 0===J?0:J.includes("Vector"))?{rasterFunction:"VectorFieldRenderer",rasterFunctionArguments:{MagnitudeBandID:0,DirectionBandID:1,IsUVComponents:"esriImageServiceDataTypeVector-UV"===J,ReferenceSystem:1,MassFlowAngleRepresentation:0,SymbolTileSize:30,SymbolTileSizeUnits:100,CalculationMethod:"Vector Average",
SymbologyName:"Single Arrow",MinimumMagnitude:1,MaximumMagnitude:-1,MinimumSymbolSize:40,MaximumSymbolSize:80},outputPixelType:"U8",variableName:"Raster"}:null===y||void 0===y?void 0:y.renderingRule,O=(null===y||void 0===y?void 0:y.mosaicRule)&&JSON.stringify(y.mosaicRule),P=x?"image":"json",L=x?"arraybuffer":"json",[4,h["default"]({url:b+"/exportImage",content:a.__assign({bbox:G,bboxSR:H,size:z.join(","),bandIds:null===(m=null===y||void 0===y?void 0:y.bandIds)||void 0===m?void 0:m.join(","),mosaicRule:O,
renderingRule:R&&JSON.stringify(R),f:P},w),handleAs:L})];case 1:K=ba.sent();if(x){Q=r(K);if(!Q)throw Error("failed to generate thumbnail for service "+b);return[2,k(K,Q)]}(W=(null===(n=c["default"].findCredential(b))||void 0===n?void 0:n.token)||(null===w||void 0===w?void 0:w.token))&&(null===K||void 0===K?0:K.href)&&(K.href+="?token\x3d"+W);return[2,{url:null===K||void 0===K?void 0:K.href}]}})})}function r(b){if(!b||10>b.byteLength)return null;b=new Uint8Array(b,0,4);return 255===b[0]&&216===b[1]?
"jpeg":137===b[0]&&80===b[1]&&78===b[2]&&71===b[3]?"png":null}function k(b,d){var q=new Blob([b],{type:"image/"+d}),m=new FileReader;m.readAsDataURL(q);return new Promise(function(n){m.onloadend=function(){n({dataURL:m.result})}})}function f(b){var d,q;"string"===typeof b.extent?(b=b.extent.split(",").map(function(m){return parseFloat(m)}),4===b.length&&(q=[[b[0],b[1]],[b[2],b[3]]])):0<(null===(d=b.extent)||void 0===d?void 0:d.length)&&(q=b.extent);return(null===q||void 0===q?0:q.length)?{xmin:q[0][0],
ymin:q[0][1],xmax:q[1][0],ymax:q[1][1],spatialReference:{wkid:4326}}:null}Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);B["default"]=function(b,d,q){var m,n,t,z,w,y;void 0===q&&(q=!0);return a.__awaiter(this,void 0,void 0,function(){var x,A,v,u,C,E,F,G,H,J,I,R,O,P,L,K,Q,W,ba;return a.__generator(this,function(S){switch(S.label){case 0:return x=g["default"].urlToObject(b.url),A=x.path,v=x.query,(u=b.serviceInfo)&&Object.keys(u).length?
[3,2]:[4,h["default"]({url:A,content:a.__assign({f:"json"},v)})];case 1:u=S.sent(),S.label=2;case 2:if(null===u||void 0===u||!u.bandCount)throw Error("failed to access service info for service: "+A);if(C=null===(m=u.capabilities)||void 0===m?void 0:m.toLowerCase().includes("tilesonly"))throw Error("unsupported thumbnail request for tiled imagery");if(null===(n=b.itemData)||void 0===n)return[3,3];F=n;return[3,5];case 3:return[4,b.getData()];case 4:F=S.sent(),S.label=5;case 5:E=null!==(t=F)&&void 0!==
t?t:{};G=E.bandIds;H=E.mosaicRule;J=E.renderingRule;I=null===(w=null===(z=E.layerDefinition)||void 0===z?void 0:z.drawingInfo)||void 0===w?void 0:w.renderer;if((R=(null===G||void 0===G?void 0:G.length)||H||J||I)||b.isHostedService||!(10.1<=u.currentVersion))return[3,7];O=A+"/info/thumbnail";return[4,h["default"]({url:O,content:a.__assign({},v),handleAs:"arraybuffer"})];case 6:P=S.sent();if(L=r(P)){if(q)return[2,k(P,L)];Q=(K=(null===(y=c["default"].findCredential(A))||void 0===y?void 0:y.token)||(null===
v||void 0===v?void 0:v.token))?O+"?token\x3d"+K:O;return[2,{url:Q}]}S.label=7;case 7:return W=f(b),ba=R?{bandIds:G,mosaicRule:H,renderingRule:J,renderer:I}:null,I?[2,e(A,{serviceInfo:u,extent:W,size:d,layerProperties:ba,query:v,returnDataURL:q})]:[2,l(A,{serviceInfo:u,extent:W,size:d,layerProperties:ba,query:v,returnDataURL:q})]}})})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),
function(D,B,a,c,h,g,e,l){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);return function(){function r(){}r.fetchComments=function(k,f,b){var d=this,q=new e["default"],m=b.item,n=(null===m||void 0===m?void 0:m.itemUrl)+"/comments",t,z=(null===b||void 0===b?void 0:b.parentId)||"none";k=k||(null===b||void 0===b?void 0:b.nextStart)||b.start;var w=b.sortField,y=b.sortOrder;f=f||b.overrideNum||b.num;var x=b.comments;if(-1===k)q.resolve(x);
else{var A={parentId:z,sortField:w,sortOrder:y,start:k,num:f};h["default"].request({url:n,content:A}).then(function(v){return d._toPortalComments(m,v)}).then(function(v){t=l["default"].mixin(b,v,{num:b.num,comments:[].concat(b.comments||[]).concat(v.comments)});A=v;return A.comments}).then(function(v){return d._getOwnerProfiles(v)}).then(function(v){A.comments=A.comments.map(function(u,C){u.ownerProfile=v[C];return u});q.resolve({commentsInfo:t,comments:t.comments})})}return q};r._toPortalComments=
function(k,f){var b=new e["default"],d=k.portal;f.comments=f.comments.map(function(q){return new c["default"](a.__assign(a.__assign({},q),{item:k,portal:d}))});b.resolve(f);return b};r._getOwnerProfiles=function(k){k=k.map(function(f){return f.portal.getUserProfile(f.owner)});return g["default"](k)};return r}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(D,B,a,c,h,g,e,l,r){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);return function(){function k(f){this.owner=f.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=c["default"].linkify(unescape(f.comment))}k.prototype.postscript=function(){};k.prototype.getReplies=function(f,b){var d=this,q=new g["default"],
m=window.require("arcgisonline/pages/portal/CommentsUtil");this.numReplies?m.fetchComments(f,b,this.repliesInfo).then(function(n){d.repliesInfo=e["default"].mixin(d.repliesInfo,n.commentsInfo);d.replies=d.repliesInfo.comments;q.resolve(d.replies)}):q.resolve([]);return q};return k=a.__decorate([h["default"](r["default"].PortalComment,l["default"])],k)}()})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),
function(D,B,a,c,h,g,e){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},"Feature Service":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro","is-mapService"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service","is-mapImage"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer",
"sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:g["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",
hasServiceInfo:!0},"Feature Collection":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},"Route Layer":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],
classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop","is-service"],classification:"layer"},Tool:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},
"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",
hasServiceInfo:!0},"GeoBIM Project":{defaultOpenText:g["default"].itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"GeoBIM Application":{defaultOpenText:g["default"].itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"Knowledge Graph":{types:["is-service"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:g["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],
classification:"app"},"Real Time Analytic":{defaultOpenText:g["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],
types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},OGCFeatureServer:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer"},WMTS:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],
types:["is-2d","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:g["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},
"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Media Service":{defaultOpenText:g["default"].itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburMediaViewer"],types:["is-excaliburMedia"],classification:"layer"},"Web Map":{defaultOpenText:g["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer",
"createPresentation","openPresentation"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:g["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:g["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:g["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:g["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Page":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:g["default"].itemLinks.viewInHub,
defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:g["default"].itemLinks.getApp,defaultOpenIcon:"launch",
openIn:["appViewer","downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:g["default"].itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",
hasItemData:!0},Workflow:{defaultOpenText:g["default"].itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},Form:{defaultOpenText:g["default"].itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:g["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:g["default"].itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:g["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:g["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:g["default"].itemLinks.openOrthoMaker,
defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:g["default"].itemLinks.openMission,defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:g["default"].itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"Hub Project":{defaultOpenText:g["default"].itemLinks.openHubInitiative,
defaultOpenIcon:"launch",openIn:["hubProject"],types:["is-hubProject"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},Solution:{classification:"solution",hasItemData:!0},"GeoAI Studio Project":{defaultOpenText:g["default"].itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:g["default"].itemLinks.openNotebook,
defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:g["default"].itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:g["default"].itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],
classification:"app"},"Web Experience":{defaultOpenText:g["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],classification:"app"},"Web Experience Template":{defaultOpenText:g["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],classification:"app"},"360 VR Experience":{defaultOpenText:g["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["vrExperienceViewer"],types:["is-vrExperience",
"is-file","is-update"],classification:"app"},CSV:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file",
"is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:g["default"].itemLinks.openArcMap,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Image Collection":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:g["default"].itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:g["default"].itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:g["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},Layer:{defaultOpenText:g["default"].itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},
"Pro Layer":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},
Dashboard:{defaultOpenText:g["default"].itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:g["default"].itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:g["default"].itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:g["default"].itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:g["default"].itemLinks.openPro,
defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Map Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],
classification:"file"},"Mobile Scene Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Pro Project":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro"],classification:"file"},"Insights Workbook Package":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Apache Parquet":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Rule Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Workflow Manager Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish"],classification:"file"},"Export Package":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Desktop Application Template":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Project Template":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:g["default"].itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],classification:"file"},
PDF:{defaultOpenText:g["default"].itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Earth Configuration":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:g["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},
"Microsoft Word":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},netCDF:{defaultOpenText:g["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file"],classification:"file"},"Link Chart":{defaultOpenText:g["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-linkChart","is-pro"],classification:"app"},filePath:"js/arcgisonline/img/item-types/",computeFileName:function(l){var r,k,f="Web Mapping Application"===l.type&&(null===(r=l.typeKeywords)||void 0===r?void 0:r.includes("configurableApp"));r=null===(k=null===l||void 0===l?void 0:l.iconUrl)||void 0===k?void 0:k.split("/").pop();"featureshosted16.png"===r&&(r="features16.png");
l.isUtilityNetwork&&(r="utilitynetwork16.png");f&&(r="instantapps16.png");"Data Store"===l.type&&(r="datastore16.png");return r},computeSvgIconUrl:function(l,r,k){return l?""+this.filePath+l.replace("16.png",k+".svg"):r.iconUrl},getSvgIconUrl:function(l,r){var k=this.computeFileName(l);return this.computeSvgIconUrl(k,l,r)},getItemInfo:function(l){var r,k,f,b,d,q=this[l.displayName]?l.displayName:l.type,m=!!l.origin,n=this[l.type],t="Web Mapping Application"===l.type&&(null===(r=l.typeKeywords)||void 0===
r?void 0:r.includes("configurableApp"));"GeoJson"===l.type&&(l.type="GeoJSON");r=this.computeFileName(l);l.svgIconUrl16=this.computeSvgIconUrl(r,l,"16");l.svgIconUrl32=this.computeSvgIconUrl(r,l,"32");this[l.displayName]&&(n=this[l.displayName]);n=a.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},n);"Feature Collection"===l.type&&h["default"].includes(l.typeKeywords,"Table")&&(n.types=h["default"].filterOut(n.types,["is-data"]));if("Feature Service"===l.type){r=
["is-data","is-layer"];if(h["default"].includes(l.typeKeywords,"Multipatch")||h["default"].includes(l.typeKeywords,"HasOnlyMultipatchGeometries"))r=a.__spreadArray(a.__spreadArray([],r),["is-scene-2"]);n.types=h["default"].filterOut(n.types,r);h["default"].includes(l.typeKeywords,"EditExtensionIndoorsSpaces")&&(n.displayName="Indoors Spaces Feature Layer")}l.isUtilityNetwork&&(n.displayName=l.displayName+" ("+g["default"].itemProperties.utilityNetwork+((l.canUpdate||l.canDelete)&&l.isHostedService?
", "+g["default"].viewsWidget.hostedData:"")+")");"Application"!==l.type||l.url||(n.openIn=[],n.defaultOpenText=null);r="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");c["default"].couldHaveArcGISDesktop()&&-1<r.indexOf(q)&&(n.defaultOpenText=h["default"].includes(l.types,"is-desktopPro")?g["default"].itemLinks.openArcMap:g["default"].itemLinks.openDesktop,n.defaultOpenIcon="launch");"Layer"===
l.type&&h["default"].includes(l.typeKeywords,"lyrx")&&(n=a.__assign(a.__assign({},n),this["Pro Layer"]));"Layer Package"===l.type&&h["default"].includes(l.typeKeywords,"lpkx")&&(n=a.__assign(a.__assign({},n),this["Pro Layer Package"]));"Map Package"===l.type&&h["default"].includes(l.typeKeywords,"mpkx")&&(n=a.__assign(a.__assign({},n),this["Pro Map Package"]));"Compact Tile Package"===l.type&&(l.type="Tile Package");"Dashboard"===l.type&&c["default"]._isOperationsViewSupportedBrowser(!0)&&(n.types.push("is-browser"),
l.isSupportedBrowser=!0);n.types=h["default"].concatUnique(n.types,"public"===l.access?["is-public"]:["is-not-public"]);c["default"].couldHaveArcGISDesktop()||(n.types=n.types.filter(function(w){return"is-desktop"!==w&&"is-desktopPro"!==w}));q=null===(f=null===(k=l.portalUser)||void 0===k?void 0:k.userRole)||void 0===f?void 0:f.canUpdateOrgItems();if("StoryMap"===l.type){k=h["default"].includes(l.typeKeywords,"storymapcollection");f=h["default"].includes(l.typeKeywords,"smstatusdraft");r=l.isOwner||
l.canUpdate&&(l.isAdmin||q);var z=!r||!f||m;n.types.push(k?"is-storymap-collection":"is-storymap-item");z&&(n.openIn=["storyMapViewer"],n.defaultOpenText=g["default"].itemLinks[k?"viewStorymapCollection":"viewStorymap"],n.defaultOpenIcon="launch");r&&!m&&(n.types.push("is-editable-storymap"),n.openIn=n.openIn||[],n.openIn.push("configureStoryMap"),z||(n.defaultOpenText=g["default"].itemLinks[k?"editStorymapCollection":"editStorymap"],n.defaultOpenIcon="launch"));f||n.types.push("is-published-storymap")}"StoryMap Theme"===
l.type&&(f=h["default"].includes(l.typeKeywords,"smstatusdraft"),l.isOwner||l.canUpdate&&(l.isAdmin||q))&&(n.openIn=["configureStoryMapTheme"],n.types.push("is-editable-storymap-theme"),f||n.types.push("is-published-storymap-theme"));"Web Experience"===l.type&&(h["default"].includes(l.typeKeywords,"status: Published")||h["default"].includes(l.typeKeywords,"status: Changed"))&&n.types.push("is-published-webExperience");"Web Experience Template"===l.type&&(h["default"].includes(l.typeKeywords,"status: Published")||
h["default"].includes(l.typeKeywords,"status: Changed"))&&n.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===l.type&&(h["default"].includes(l.typeKeywords,"configurableApp")&&(l.isOwner||l.isAdmin||q)&&n.types.push("can-configure"),l.url=e.redirectExternalAppURL(l,l.url));"Web Map"===l.type&&(m=l.portalUser,k=l.isOwner||l.isAdmin,(null===(b=null===m||void 0===m?void 0:m.userRole)||void 0===b?0:b.canCreateItem())&&(null===m||void 0===m?0:m.isOrgUser)&&k&&(n.openIn.push("fieldMaps"),
n.types.push("is-fieldMaps")));"Image Service"!==l.type||h["default"].includes(l.typeKeywords,"Managed Image Collection")||(n.types=n.types.filter(function(w){return"is-imageManagement"!==w}));l.canOpenInNewMapViewer&&(n.defaultOpenText="modern"===l.portal.defaultMapViewer?g["default"].itemLinks.openMapViewerBeta:g["default"].itemLinks.openMapViewer,n.types.push("can-openInNewMapViewer"));"KML"===l.type&&l.name&&!l.url&&n.types.push("is-download");-1<l.type.indexOf("GeoBIM")&&(null===(d=l.portal)||
void 0===d||!d.canCreateGeoBIM)&&(n={privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"});t&&(n.displayName=g["default"].items.instantApp);return n}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports","tslib","../utils/arrays"],function(D,B,a,c){Object.defineProperty(B,"__esModule",{value:!0});B.redirectExternalAppURL=B.sanitizeServerURL=void 0;c=a.__importDefault(c);B.sanitizeServerURL=function(h){h=h||"";var g=h.split("/"),e=g.indexOf("FeatureServer");
0<e&&(h=e-1,g.splice(h,1,g[h].replace(/:/g,"")),h=g.join("/"));return h};B.redirectExternalAppURL=function(h,g,e){var l=["Web Mapping Application","Dashboard"],r=c["default"].find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},{org:".maps.arcgis.com",www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(k){return-1<(null===g||void 0===g?void 0:g.indexOf(k.org))});if(!h.portalUser&&"self"!==h.contentOrigin&&"public"===h.access&&(e||-1<l.indexOf(h.type))&&g){if(0===
g.indexOf("/apps/"))return"https://"+h.portal.portalHostname+g;if(r)return h=g.split(r.org),"https://"+r.www+h[h.length-1]}return g}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/solution.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);return function(){function v(){}
v.getBadges=function(u,C,E){var F,G,H,J=[],I={i18n:f["default"],hideText:C?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};C=C?"":"Labeled";var R=u.groupDesignations&&u.groupDesignations.split(", "),O=null===(F=u.portal)||void 0===F?void 0:F.isPortal;"org_authoritative"===u.contentStatus&&(I.tooltipLabel=f["default"].badges["authoritativeTooltip"+C],J.push(l["default"].substitute(b["default"],I)));"public_authoritative"===u.contentStatus&&(u.verified||O)&&(I.tooltipLabel=l["default"].substitute(f["default"].badges["publicAuthoritativeTooltip"+
C],{name:O?u.portal.name:u.verified.name}),J.push(l["default"].substitute(b["default"],I)));"Solution"===u.type&&-1<u.typeKeywords.indexOf("ArcGIS Solution")&&(I.tooltipLabel=f["default"].badges["solutionTooltip"+C],J.push(l["default"].substitute(q["default"],I)));"deprecated"===u.contentStatus&&(I.tooltipLabel=f["default"].badges["deprecatedTooltip"+C],J.push(l["default"].substitute(d["default"],I)));-1<(null===(G=u.typeKeywords)||void 0===G?void 0:G.indexOf("Public Data Collection"))&&E&&(I.tooltipLabel=
f["default"].badges["publicDataCollectionTooltip"+C],J.push(l["default"].substitute(y["default"],I)));u.isRetired&&(I.tooltipLabel=f["default"].badges["retiredTooltip"+C],J.push(l["default"].substitute(w["default"],I)));u.isRetiredStoryMap&&(I.tooltipLabel=f["default"].badges["retiredStoryMapTooltip"+C],J.push(l["default"].substitute(w["default"],I)));R&&-1<R.indexOf("livingatlas")&&(I.tooltipLabel=f["default"].badges["livingAtlasTooltip"+C],J.push(l["default"].substitute(m["default"],I)));R&&-1<
R.indexOf("opendata")&&J.push(l["default"].substitute(t["default"],I));u.isPremium&&(E=(null===(H=u.portal)||void 0===H?0:H.user)?u.portal.user.orgId?"org":"public":"anon",I.tooltipLabel=f["default"].badges[E+(u.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+C],J.push(l["default"].substitute(u.requiresCredits?z["default"]:x["default"],I)));u.listed&&!O&&J.push(l["default"].substitute(n["default"],I));u.origin&&J.push(l["default"].substitute(A["default"],I));return J.join("")};v.getContentStatusBadges=
function(u){var C,E={i18n:f["default"],hideText:"",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"},F=null===(C=u.portal)||void 0===C?void 0:C.isPortal;switch(u.contentStatus){case "org_authoritative":return E.tooltipLabel=f["default"].badges.authoritativeTooltip,l["default"].substitute(b["default"],E);case "public_authoritative":if(u.verified||F)return E.tooltipLabel=l["default"].substitute(f["default"].badges.publicAuthoritativeTooltip,{name:F?u.portal.name:u.verified.name}),l["default"].substitute(b["default"],
E);break;case "deprecated":return E.tooltipLabel=f["default"].badges.deprecatedTooltip,l["default"].substitute(d["default"],E)}};v.isItemAdmin=function(u,C){var E,F=!1;F=u.owner;var G=null!==C&&void 0!==C?C:u.portal,H=-1<(null===(E=u.itemControl)||void 0===E?void 0:E.indexOf("admin"));E=["esri_livingatlas","esri_demographics","esri_boundaries"];return F=G.isPortal&&!u.isOwner&&H&&-1<F.indexOf("esri_")&&!c["default"].includes(E,F)?!1:!!H};v.canShareItem=function(u,C){var E,F,G=C||{},H=G.userRole,J=
G.canShare,I=G.canShareOthers&&u.isOwnedByMyOrg,R=(null===H||void 0===H?void 0:H.canPurchaseMarketplace())||(null===H||void 0===H?void 0:H.canTrialMarketplace()),O=u.access||"private",P=u.isAdmin||u.isOwner||G.isOrgAdmin&&u.isOwnedByMyOrg||I,L="public"===O&&"AppBuilder Extension"!==u.type&&"AppBuilder Widget Package"!==u.type;O="org"===O&&(null===(E=u.ownerProfile)||void 0===E?void 0:E.orgId)===C.orgId;E="licenseByUser"===(null===(F=u.listingProperties)||void 0===F?void 0:F.licenseBy);F="Native Application Installer"!==
u.type&&"API Key"!==u.type&&!g["default"].isProApp(u)&&!E;R=R&&u.listed;G=((null===H||void 0===H?void 0:H.canShareItemToGroup())||!G.isOrgUser)&&(L||O);return F&&(J&&(P||R||G)||I)};v.canDeleteItem=function(u,C){var E=C||{},F=E.userRole;E=u.isAdmin||u.isOwner||E.isOrgAdmin&&u.isOwnedByMyOrg;F=(null===F||void 0===F?void 0:F.isCustom())&&F.canDeleteOrgItems();return!!(E||u.isOwnedByMyOrg&&F)};v.getProtectedItems=function(u){var C=new r["default"],E=[],F=[],G=[];u.forEach(function(H){H["protected"]?E.push(H):
H.portal.isPortal?G.push(H):F.push(H)});u=G.map(function(H){return H.canBeDeleted().then(function(J){J&&!J.success?(H.error=J,E.push(H)):F.push(H)})});k["default"](u).then(function(){C.resolve({protectedItems:E,unprotectedItems:F})});return C};v.deleteItemsByOwner=function(u,C){var E=new r["default"],F=e["default"].restBaseUrl+"content/users/"+u;if(1===C.length){var G=C[0];F=""+F+(G.folderId&&"/"!==G.folderId?"/"+G.folderId:"")+"/items/"+G.id+"/delete";g["default"].request({url:F,content:""},{usePost:!0}).then(function(H){return E.resolve([H])},
function(H){return E.resolve([H])})}else 1<C.length&&(F+="/deleteItems",G={items:C.map(function(H){return H.id}).join(",")},g["default"].request({url:F,content:G},{usePost:!0}).then(function(H){return E.resolve(H.results)},function(H){return E.resolve([H])}));return E};v.deleteItems=function(u){var C=this,E=new r["default"],F={},G=[],H=[],J=[];u.forEach(function(R){var O;"Deep Learning Package"===(null===R||void 0===R?void 0:R.type)?G.push(h["default"].uninstallDeepLearningPackage(R).then(function(P){var L;
"uninstallFail"===(null===P||void 0===P?void 0:P.messageCode)?H.push(P):F[R.owner]=[R].concat(null!==(L=F[R.owner])&&void 0!==L?L:[])})):F[R.owner]=[R].concat(null!==(O=F[R.owner])&&void 0!==O?O:[])});var I=Object.keys(F).map(function(R){return C.deleteItemsByOwner(R,F[R])});k["default"](G).then(function(){return k["default"](I)}).then(function(R){R.forEach(function(O){O.forEach(function(P){P.success?J.push(P):H.push(P)})});E.resolve({removed:J,errors:H})});return E};v.getContentStatus=function(u){if(u.contentStatus&&
-1<u.contentStatus.indexOf("authoritative")){var C=u.portal;return"public"===u.access&&(null===C||void 0===C?0:C.isVerified)?"public_authoritative":"org_authoritative"}return u.contentStatus};v.shouldOpenToItemURLInNewTab=function(u){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(u.type)};v.shouldOpenInNewTab=function(u){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(u.type)};return v}()})},
"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig","esri/lang"],function(D,B,a,c,h){c=a.__importDefault(c);h=a.__importDefault(h);return function(){function g(){}g.canShowSocialMediaLinks=function(e){var l=e.isPortal,r=h["default"].isDefined(e.canSharePublic)?!!e.canSharePublic:!0,k=!!e.portalProperties&&h["default"].isDefined(e.portalProperties.showSocialMediaLinks);e=k&&!0===e.portalProperties.showSocialMediaLinks;return c["default"].showSocialMediaLinks&&
!0===c["default"].showSocialMediaLinks&&(l?r&&e:r&&(!k||e))};g.canShowSocialMediaLinksOnItems=function(e){var l=e.portalUser,r=!!l&&!l.orgId,k=!!l&&!!l.orgId;l=!l||r||k&&(l.userRole.canShareItemToPublic()||l.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(e)&&l};g.canShowSocialMediaLinksOnGroups=function(e){var l=e.portalUser,r=!!l&&!l.orgId,k=!!l&&!!l.orgId;l=!l||r||k&&l.userRole.canShareGroupToPublic();return this.canShowSocialMediaLinks(e)&&l};return g}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../utils/mapViewer ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);return function(){function z(w){var y;w=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();b["default"].mixin(this,{thumbnailUrl:this.thumbnailUrl||
l["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:l["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});b["default"].mixin(this,h["default"]);this.token=null===(y=this.credential)||void 0===y?void 0:y.token;this.id=this.username;this.orgUrl=w.urlKey&&w.customBaseUrl?w.urlKey+"."+w.customBaseUrl:w.portalUrl;this.accountId=this.orgId;this.computeFlags()}z.prototype.postscript=function(){};z.prototype.setRole=function(w){return this.userRole=
new r["default"]({portalUser:this,viewOnly:w})};z.prototype.getDefaultMapViewer=function(){var w=this,y=new d["default"];this.defaultMapViewer?y.resolve(this.defaultMapViewer):this.getProperties().then(function(x){var A,v=w.portal;w.defaultMapViewer=e.determineUserMapViewer({isSignedIn:!0,isViewingOrg:!!v.id,properties:x})||e.determineOrgMapViewer({mapViewer:null===(A=v.portalProperties)||void 0===A?void 0:A.mapViewer,created:v.created,subscriptionInfo:v.subscriptionInfo,isPortal:v.isPortal});y.resolve(w.defaultMapViewer)});
return y};z.prototype.getProperties=function(){var w=this,y=this.portal.url+"community/users/"+this.username+"/properties",x=new d["default"];this.userProperties?x.resolve(this.userProperties):l["default"].request({url:y}).then(function(A){w.userProperties=(null===A||void 0===A?void 0:A.properties)||null;x.resolve(w.userProperties)},function(A){x.reject(A)});return x};z.prototype.computeFlags=function(){var w,y=this.portal.supportsHostedServices||!1,x=(null===(w=this.portal.helperServices)||void 0===
w?void 0:w.rasterAnalytics)&&t["default"].isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToGroup()||this.userRole.canShareOthersItemsToOrg()||
this.portal.canSharePublic&&this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=
this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=x&&this.userRole.canPublishImageCollection()?!0:!1;this.canUserPublish=y&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};
z.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};z.prototype.getTags=function(){var w=this,y=new d["default"];this.tags&&this.tags.length?y.resolve(this.tags):this.inherited(arguments).then(function(x){w.set("tags",x);y.resolve(w.tags)},function(x){w.set("tags",[]);y.resolve([])});return y};z.prototype.getContentTags=function(){var w=this,y,x=new d["default"];(null===(y=this.contentTags)||
void 0===y?0:y.length)?x.resolve(this.contentTags):l["default"].loadUserTags(this.username).then(function(A){w.set("contentTags",A);x.resolve(w.contentTags)},function(A){w.set("contentTags",[]);x.resolve([])});return x};z.prototype.getCurrentFolder=function(){if(!t["default"].isDefined(this.currentFolder)){var w=l["default"].getCookie("ESRI_Content"),y=w&&"/"!==w.folderId?w.folderId:this.username;this.set("currentFolder",{id:y,isAll:null===w||void 0===w?void 0:w.isAll,isHome:"/"!==y&&y&&y!==this.username?
!1:!0})}return this.currentFolder};z.prototype.setCurrentFolder=function(w){var y=l["default"].getCookie("ESRI_Content")||{},x=(null===w||void 0===w?void 0:w.id)||w||this.username,A="all"===x;w={folderId:x===this.username||A?"/":x,isAll:A,isHome:(null===w||void 0===w?0:w.isHome)||"/"===x||!x||x===this.username?!0:!1};b["default"].mixin(y,w);f["default"]("ESRI_Content",JSON.stringify(y),{path:"/",sameSite:"Strict"});this.set("currentFolder",b["default"].mixin(w,{id:x}))};z.prototype.getFolders=function(){var w=
this,y=new d["default"];l["default"].request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(x){w.set("folders",x);y.resolve(x.slice(0))});return y};z.prototype.createFolder=function(w){var y=this,x=new d["default"],A=this.userContentUrl+"/createFolder";w={folderName:w.replace(/ /g,"_"),title:w};l["default"].request({url:A,content:w},{usePost:!0}).then(function(v){y.folders.push(v.folder);y.folders.shift();y.set("folders",y._toFolders({folders:y.folders}));
m["default"].publish("folders/refresh");x.resolve(v.folder)},function(v){x.reject(v)});return x};z.prototype.updateFolder=function(w,y){var x=this,A=new d["default"];l["default"].request({url:this.userContentUrl+"/"+w+"/updateFolder",content:{newTitle:y}},{usePost:!0}).then(function(){return x.getFolders()},function(v){A.reject(v)}).then(function(v){A.resolve(v);m["default"].publish("folders/refresh")},function(v){A.reject(v)});return A};z.prototype.deleteFolder=function(w){var y=this,x=new d["default"];
l["default"].request({url:this.userContentUrl+"/"+w+"/delete"},{usePost:!0}).then(function(A){var v,u=null===(v=null===A||void 0===A?void 0:A.folder)||void 0===v?void 0:v.id;y.folders=y.folders.filter(function(C){return(null===C||void 0===C?void 0:C.id)!==u});y.folders.shift();y.set("folders",y._toFolders({folders:y.folders}));x.resolve(A.folder)},function(A){x.reject(A)});return x};z.prototype.deleteItems=function(w){var y=new d["default"],x=this.userContentUrl+"/deleteItems";w={items:w.map(function(A){return A.id})};
l["default"].request({url:x,content:w},{usePost:!0}).then(function(){y.resolve(!0)},function(A){y.reject(A)});return y};z.prototype._toFolders=function(w){var y=this;w=(null===w||void 0===w?void 0:w.folders)||[];w=w.sort(function(x,A){return x.title.localeCompare(A.title)});g["default"].find(w,function(x){return x.id===y.username})||w.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return w};z.prototype.getGroups=function(){var w=this,y=this.portal.url+"community/users/"+
this.username,x=new d["default"];this.userGroups?x.resolve(this.adminGroups||this.userGroups):l["default"].request({url:y}).then(function(A){w.userGroups=(null===A||void 0===A?0:A.groups)?w._toGroup(A.groups):[];x.resolve(w.userGroups)},function(A){x.reject(A)});return x};z.prototype.getSharedOwnershipGroups=function(){var w=this,y=new d["default"];this.ownershipGroups&&y.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){y.resolve(0<w.ownershipGroups.length?
w.ownershipGroups:null)});return y};z.prototype._toGroup=function(w){var y=this;this.ownershipGroups=[];return(null!==w&&void 0!==w?w:[]).map(function(x){var A=new c["default"](b["default"].mixin(x,{portal:y.portal}));y._isSharedOwnershipGroup(x)&&y.ownershipGroups.push(x);return b["default"].mixin(x,{portalGroup:A})})};z.prototype._isSharedOwnershipGroup=function(w){var y=w.capabilities&&w.capabilities.join(",")||"";return(w.owner===this.username||!w.isViewOnly||w.userMembership&&"admin"===w.userMembership.memberType)&&
-1<y.toLowerCase().indexOf("updateitemcontrol")};return z=a.__decorate([k["default"](n["default"].PortalUser,q["default"])],z)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(D,
B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);return function(){function z(w){var y,x,A,v,u,C,E;this.portalUser=null!==(x=null===(y=this.portal)||void 0===y?void 0:y.getPortalUser())&&void 0!==x?x:null;this.groupContentUrl=this.url.replace("/community/",
"/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=l["default"].canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(A=this.userMembership)||void 0===A?void 0:A.memberType);this.isManager="admin"===(null===(v=this.userMembership)||void 0===v?void 0:v.memberType);this.isMember="member"===(null===(u=this.userMembership)||void 0===u?void 0:u.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&h["default"].includes(["owner",
"admin","member"],this.userMembership.memberType);this.isSharedOwnership=h["default"].includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(C=this.title)&&void 0!==C?C:"";this.snippet=null!==(E=this.snippet)&&void 0!==E?E:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+f["default"].getToken():"./images/group-no-image.png";this.portal.isPortal&&!this.membershipAccess&&(this.membershipAccess=
"org")}z.prototype.postscript=function(){};z.prototype.getOwnerProfile=function(w,y){var x=this,A=this.owner,v=new q["default"];this.ownerProfile?v.resolve(this.ownerProfile):(this.isOwner?(A=new q["default"],A.resolve(this.portalUser)):A=this.portal.getUserProfile(A),A.then(function(u){x.isAdmin=x.isOwner||x._isGroupAdmin(u);d["default"]({folders:x.isAdmin&&y?u.getFolders():null,tags:x.isAdmin&&w?u.getTags():null,contentTags:x.isAdmin&&w?u.getContentTags():null}).then(function(){x.set("ownerProfile",
u);v.resolve(u)})}));return v};z.prototype._isOpenDataSetter=function(w){this.isOpenData=w;this.computeIsOpenDataEnabled()};z.prototype._providerSetter=function(w){this.provider=w;this.computeIsBackedByEnterpriseGroup()};z.prototype._providerGroupNameSetter=function(w){this.providerGroupName=w;this.computeIsBackedByEnterpriseGroup()};z.prototype.leave=function(){var w=this,y=new q["default"];f["default"].request({url:this.url+"/leave"},{usePost:!0}).then(function(x){w.set("isMember",!1);y.resolve(x)});
return y};z.prototype.join=function(){var w=this,y=new q["default"];f["default"].request({url:this.url+"/join"},{usePost:!0}).then(function(x){w.autoJoin&&(w.set("belongsToGroup",!0),w.set("isMember",!0));y.resolve(x)},function(x){y.reject(x)});return y};z.prototype.getApplications=function(){var w=this,y=new q["default"];f["default"].request({url:this.url+"/applications"}).then(function(x){w.set("applications",x.applications);y.resolve(x.applications)},function(x){y.reject(x)});return y};z.prototype.groupContent=
function(w,y){var x=this;void 0===w&&(w={});var A=w.q;A=void 0===A?"":A;var v=w.sortField;v=void 0===v?"modified":v;var u=w.sortOrder;u=void 0===u?"desc":u;var C=w.num;C=void 0===C?12:C;var E=w.start;E=void 0===E?1:E;var F=this.portalUser,G=this.portal,H=new q["default"];f["default"].request({url:""+this.groupContentUrl+(y?"/search":"")+"?"+("string"===typeof w?w:"sortField\x3d"+v+"\x26sortOrder\x3d"+u+"\x26num\x3d"+C+"\x26start\x3d"+E+(A?"\x26q\x3d":"")+A)}).then(function(J){return k.getAllItemsGroups({response:J,
portalUser:F,url:G.url})}).then(function(J){return x.toPortalItems(J)}).then(function(J){return H.resolve(J)},function(J){H.reject(J)});return H};z.prototype.search=function(w){var y=this,x=new q["default"],A=this.portal.portalUrl+"search";w=a.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},w||{});f["default"].request({url:A,content:w}).then(function(v){return y.toPortalItems(v)}).then(function(v){return x.resolve(v)},function(v){x.reject(v)});return x};z.prototype.toPortalItems=
function(w){var y=this,x=new q["default"];w.results&&(w.items=w.results,delete w.results);var A=w.items.map(function(v){return new c["default"](a.__assign(a.__assign({},v),{portal:y.portal}))}).map(function(v){return r["default"].setVerifiedInfo(v)});d["default"](A).then(function(v){w.items=v;x.resolve(w)},function(v){return 0});return x};z.prototype.groupMembers=function(w){var y=this;w=w||{};var x=new q["default"],A=m["default"].clone(w);w=this.url+"/userlist";A=a.__assign(a.__assign({},{sortField:"joined",
sortOrder:"desc",num:25,start:1}),A);f["default"].request({url:w,content:A}).then(function(v){return y.toMembers(v)}).then(function(v){return x.resolve(v)},function(v){x.reject(v)});return x};z.prototype.toMembers=function(w){var y=this,x=new q["default"],A=window.require("arcgisonline/pages/portal/PortalUser");w.users=w.users.map(function(v){return new A(a.__assign(a.__assign({},v),{portal:y.portal}))});x.resolve(w);return x};z.prototype.allGroupMembers=function(w){var y=this;w=w||{};var x=new q["default"],
A=m["default"].clone(w);w=this.url+"/userlist";A=a.__assign(a.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),A);e["default"].fetchAllResources(w,A,"users").then(function(v){return y.toMembers({total:v.length,users:v})}).then(function(v){return x.resolve(v)},function(v){x.reject(v)});return x};z.prototype.itemCount=function(){var w=new q["default"];this.search({num:1}).then(function(y){return w.resolve(y&&y.total||0)});return w};z.prototype._isGroupAdmin=function(w){var y,x;w=w||
this.portal.portalUser||{};var A=w.username,v=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||void 0;y=this._getAdmins();y=h["default"].includes(y,A);A=w.orgId||v?w.orgId===v:!1;v=w.isOrgAdmin&&A;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&A&&w.userRole.canUpdateOrgGroups();return y||v||w};z.prototype.isGroupOwnerOrgMember=function(){return this.portal.portalUser?this.orgId&&this.portal.portalUser.orgId===this.orgId:!1};z.prototype._getAdmins=function(){var w,y;return(null!==
(y=null===(w=this.members)||void 0===w?void 0:w.users)&&void 0!==y?y:[]).filter(function(x){return"admin"===x.memberType}).map(function(x){return x.username})};z.prototype._canRemoveContent=function(w){var y,x=w||this.portal.portalUser||{},A=(null===(y=this.groupOwner)||void 0===y?void 0:y.username)||{};w=this._isGroupAdmin(w);x=x.username===A;return w||x};z.prototype._canAssignToThisGroup=function(w){var y,x;w=w||this.portal.portalUser||{};var A=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||
void 0;A=w.orgId||A?w.orgId===A:!1;y=w.isOrgAdmin&&A;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&A&&w.userRole.canAssignUsersToOrgGroups();return(y||w)&&!this.isOwner};z.prototype._canChangeOwner=function(w){var y,x;w=w||this.portal.portalUser||{};var A=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};A=w.orgId||A?w.orgId===A:!1;y=w.isOrgAdmin&&A;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&A&&w.userRole.canReassignOrgGroups();return!(!y&&!w)};z.prototype._canManageMembershipRequests=
function(w){var y;w=w||this.portal.portalUser||{};var x=w.username,A=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=this._getAdmins();A=w.orgId||A?w.orgId===A:!1;x=h["default"].includes(y,x);w=w.isOrgAdmin&&A;return!!(this.isOwner||x||w)};z.prototype._canInviteOthers=function(w){var y,x,A=w||this.portal.portalUser||{};w=A.username;var v=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=this._getAdmins();var u=A.orgId||v?A.orgId===v:!1;v=A.isOrgAdmin&&u;A=(null===(x=A.userRole)||
void 0===x?void 0:x.isCustom())&&u&&A.userRole.canAssignUsersToOrgGroups();x=h["default"].includes(y,w);return!!(this.isOwner||x||v||A)};z.prototype._canJoinGroup=function(w){var y,x,A;w=w||this.portal.portalUser||{};var v=(null===(y=this.groupOwner)||void 0===y?void 0:y.orgId)||{};y=w.orgId||v?w.orgId===v:!1;v=!this.isInvitationOnly;var u=!this.belongsToGroup,C=null===(x=w.userRole)||void 0===x?void 0:x.canJoinOrgGroup();x=!w.orgId||(null===(A=w.userRole)||void 0===A?void 0:A.canJoinNonOrgGroup());
return u&&v?y?C:C||x:!1};z.prototype._canDeleteGroup=function(w,y){var x,A,v=w||this.portal.portalUser||{},u=v.username,C=(null===(x=this.groupOwner)||void 0===x?void 0:x.orgId)||{};x=this._getAdmins();u=h["default"].includes(x,u);v=(v.orgId||C?v.orgId===C:!1)&&(null===(A=v.userRole)||void 0===A?void 0:A.canDeleteOrgGroups());return y&&y.isAdminView?y.canDelete:!!(this.isOwner||u||v)};z.prototype.getCategories=function(){var w=this,y=new q["default"],x,A,v,u;f["default"].request({url:this.url+"/categorySchema"}).then(function(C){x=
C.categorySchema||[];w.categorySchema=[];x.forEach(function(E){w._isReferencingCategorySet(E)?(A=-1<E.source.indexOf("portal.regions"),v=-1<E.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):w.categorySchema.push(E)});A||v?g["default"](w.portal,"LivingAtlas",A).then(function(E){u=(null===E||void 0===E?0:E.length)?E.shift():{};w.categorySchema=m["default"].mixin(u.categorySchema,{isLivingAtlas:!0});y.resolve(w.categorySchema)}):y.resolve(w.categorySchema)},function(C){y.reject(C)});return y};
z.prototype.allowExternalMembers=function(){return"org"!==this.membershipAccess};z.prototype._isReferencingCategorySet=function(w){var y,x;return-1<(null===(y=w.source)||void 0===y?void 0:y.indexOf("portal.regions"))||-1<(null===(x=w.source)||void 0===x?void 0:x.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};z.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&!0===this.isOpenData};z.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup=
"enterprise"===this.provider&&!!this.providerGroupName};return z=a.__decorate([b["default"](t.PortalGroup,n["default"])],z)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(D,B,a,c,h,g,e,l,r,k){function f(w){var y=new e["default"];h["default"].request({url:w.portalUrl+"portals/self",content:{culture:r["default"].locale,
"default":!0}}).then(function(x){y.resolve(null===x||void 0===x?void 0:x.contentCategorySetsGroupQuery)});return y}function b(w,y){var x=new e["default"],A=window.require("arcgisonline/pages/portal/PortalGroup");y?w.queryGroups(y,!0).then(function(v){(v=v.total?v.results.shift():null)?x.resolve(new A(k["default"].mixin(v,{portal:w}))):x.reject(!1)}):x.reject(!1);return x}function d(w,y,x,A){var v=new e["default"];A?y?q(w,A,y).then(function(u){return m(w,x,[u])}).then(function(u){return v.resolve(u)}):
A.groupContent().then(function(u){return v.resolve(u.items)}).then(function(u){return m(w,x,u)}).then(function(u){return v.resolve(u)}):v.reject(!1);return v}function q(w,y,x){var A=new e["default"],v;y.search({q:"group:"+y.id+' typekeywords:"'+x+'"',num:1}).then(function(u){v=u.total?u.items.shift():{};A.resolve(new c["default"](k["default"].mixin(v,{portal:w})))});return A}function m(w,y,x){var A=new e["default"];x=k["default"].isArray(x)?x:[x];y=y&&!w.isPortal;x=x.map(function(v){return n(w,y,
v)});g["default"](x).then(function(v){A.resolve(v)});return A}function n(w,y,x){var A=new e["default"],v=[z(x)];y&&v.push(t(w));g["default"](v).then(function(u){x.set("categorySchema",u);A.resolve(x)});return A}function t(w){var y=new e["default"],x={title:"Region",description:"Living Atlas Regions",displayName:l["default"].common.regions};w.getRegions().then(function(A){A=(A||[]).map(function(v){return k["default"].mixin(v,{displayName:v.localizedName,name:v.region})});x=k["default"].mixin(x,{categories:A});
y.resolve(x)});return y}function z(w){var y=new e["default"];w.getData().then(function(x){x=null===x||void 0===x?void 0:x.categorySchema;x=(null===x||void 0===x?0:x.length)?x.shift():{};y.resolve(k["default"].mixin(x,{displayName:l["default"].GroupWidget.categories}))});return y}c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);return function(w,y,x){var A=new e["default"];f(w).then(function(v){return b(w,
v)}).then(function(v){return d(w,y,x,v)}).then(function(v){return A.resolve(v)},function(){return A.resolve(null)});return A}})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(D,B,a,c,h){c=a.__importDefault(c);h=a.__importDefault(h);return function(){function g(){}g.getVerifiedInfo=function(e){var l,r,k,f=new h["default"],b=g.orgHash,d=null!==(l=e.orgId)&&void 0!==l?l:null===(r=e.portal)||void 0===r?void 0:r.id;l=null===
(k=e.portal)||void 0===k?void 0:k.isPortal;if(e.contentStatus&&"public_authoritative"===e.contentStatus&&d&&!l)if(b[d])f.resolve(g.orgHash[d]);else{var q=location.protocol+"//"+e.portal.portalHostname+"/sharing/rest/portals/"+d;c["default"].request({url:q}).then(function(m){return g.getOrgProps(q).then(function(n){n&&(m.localizedOrgProperties=n);return m})}).then(function(m){var n,t,z=(m.allSSL?"https://":"http://")+(m.urlKey||"")+"."+m.customBaseUrl+"/",w=m.thumbnail?z+"sharing/rest/portals/self/resources/"+
m.thumbnail:"./images/group-no-image.png";b[m.id]={name:m.name,description:null===(t=null===(n=m.localizedOrgProperties)||void 0===n?void 0:n["default"])||void 0===t?void 0:t.description,url:z+"home/",thumbnail:w};f.resolve(b[m.id])},function(m){return 0})}else f.resolve(!1);return f};g.getOrgProps=function(e){var l=new h["default"];c["default"].request({url:e+"/resources/localizedOrgProperties",content:{start:1,num:100}}).then(function(r){r&&!r.code?l.resolve(r):l.resolve(!1)},function(){l.resolve(!1)});
return l};g.setVerifiedInfo=function(e){var l=new h["default"];g.getVerifiedInfo(e).then(function(r){e.verified=r;l.resolve(e)});return l};g.orgHash={};return g}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(D,B,a,c,h,g,e){function l(b){var d=b.response,q=b.url,m=b.portalUser;b=b.contentUser;var n=[];m&&(n=n.concat(m.userGroups||[]));b&&(n=n.concat(b.groups||[]));if(d.results&&
0<(null===n||void 0===n?void 0:n.length)){var t=d.results.map(function(z){return z.id}).join(",");m=n.map(function(z){return z.id});m=h["default"].batch(m,100).map(function(z){return r(q,z,t)});return g["default"].eachAlwaysValues(m).then(function(z){z=k(z);return f(d,z)})}m=new c["default"];m.resolve(d);return m}function r(b,d,q){if(!q||0===d.length)return q=new c["default"],q.resolve({}),q;b+="content/itemsgroups";d=d.join(",");return e["default"].request({url:b,content:{items:q,groups:d}})}function k(b){return b.reduce(function(d,
q){q&&Object.keys(q).forEach(function(m){m&&q[m]&&(d[m]=q[m])});return d},{})}function f(b,d){if(d){var q={};b.results.forEach(function(m){return q[m.id]=m});Object.keys(d).forEach(function(m){var n=d[m];if(n&&n.items){m=d[m];var t=m.groupId,z=m.groupTitle,w=m.groupThumbnail;m.items.forEach(function(y){y=q[y.itemId];y.groupData=y.groupData||[];y.sharedGroups=y.sharedGroups||0;0!==y.groupData.length&&h["default"].find(y.groupData,function(x){return x.id===t})||(y.groupData.push({groupId:t,groupTitle:z,
groupThumbnail:w}),y.sharedGroups+=1)})}})}return b}Object.defineProperty(B,"__esModule",{value:!0});B.parseItemsGroups=B.collateItemsGroupsResponse=B.fetchItemsGroupsPage=B.getAllItemsGroups=B.getItemGroups=void 0;c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);B.getItemGroups=function(b){var d=b.url,q=b.portalUser,m=b.contentUser;b={results:[b.item]};var n=new c["default"];l({response:b,url:d,portalUser:q,contentUser:m}).then(function(t){n.resolve(null===
t||void 0===t?void 0:t.results[0])});return n};B.getAllItemsGroups=l;B.fetchItemsGroupsPage=r;B.collateItemsGroupsResponse=k;B.parseItemsGroups=f})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(D,B,a,c,h){c=a.__importDefault(c);h=a.__importDefault(h);return{isPromise:function(g){return g&&"function"===typeof g.then},resolve:function(g){var e=new c["default"];e.resolve(g);return e.promise},reject:function(g){var e=new c["default"];
e.reject(g);return e.promise},when:function(g){return this.isPromise(g)?g:this.resolve(g)},create:function(g,e,l){var r=this,k=new c["default"](l);g(function(f){return r.when(f).then(k.resolve,k.reject)});return k.promise},all:h["default"],filter:function(g,e){var l=g.slice();return this.all(g.map(function(r,k){return e(r,k)})).then(function(r){return l.filter(function(k,f){return r[f]})})},eachAlways:function(g){if(g){if("function"!==typeof g.forEach){var e=Object.keys(g),l=e.map(function(r){return g[r]});
return this.eachAlways(l).then(function(r){var k={};e.forEach(function(f,b){k[f]=r[b]});return k})}return this.create(function(r){var k=[],f=g.length;0===f&&r(k);g.forEach(function(b){var d={promise:b};k.push(d);b.then(function(q){d.value=q})["catch"](function(q){d.error=q}).then(function(){--f;0===f&&r(k)})})},function(r){g.forEach(function(k){k.cancel(r)})})}},eachAlwaysValues:function(g){return this.eachAlways(g).then(function(e){return e.filter(function(l){return l.value}).map(function(l){return l.value})})},
after:function(g,e){var l=this,r=0;return this.create(function(k){r=window.setTimeout(function(){l.resolve(e)},g)},function(){r&&(clearTimeout(r),r=0)})},timeout:function(g,e,l){var r=0,k=new c["default"](g.cancel);g.then(function(f){k.isFulfilled()||(k.resolve(f),r&&(clearTimeout(r),r=0))});g["catch"](function(f){k.isFulfilled()||(k.reject(f),r&&(clearTimeout(r),r=0))});r=window.setTimeout(function(){k.reject(l||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within "+
e+"ms"))},e);return k.promise}}})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(D,B,a,c,h,g){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);return{_licensesAPI:new h["default"],licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},
opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},getLicenseInfo:function(){var e=this,l=new g["default"],r=this.licenses||{};this._getSubscriptionInfo().then(function(){return e._getProvisionedListings()}).then(function(){return l.resolve(r)});return l},_getSubscriptionInfo:function(){var e=
this,l=new g["default"],r=this.licenses||{};this.portal.user&&this.isOrgUser?c["default"].getSubscriptionInfo().then(function(k){var f;e.orgCapabilities=null!==(f=null===k||void 0===k?void 0:k.orgCapabilities)&&void 0!==f?f:[];e.orgCapabilities.forEach(function(b){return e._addCapabilityInfo(b)});l.resolve(r)}):l.resolve(r);return l},_addCapabilityInfo:function(e){var l,r,k=this.licenses||{},f=(null===(l=e.id)||void 0===l?void 0:l.toLowerCase())||null;e&&(l=null!==(r=k[f])&&void 0!==r?r:{},k[f]=a.__assign(a.__assign(a.__assign({},
l),e),{title:e.id,valid:!0}))},_getProvisionedListings:function(){var e=this,l=new g["default"],r=this.portal.user,k={returnAppClientIds:!0,returnAllProvisions:!0},f=this.licenses||{};r&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(r.username,k).then(function(b){e.provisionedListings=null!==b&&void 0!==b?b:[];e.provisionedListings.forEach(function(d){return e._addListingInfo(d)});l.resolve(f)},function(){l.resolve([])}):(Object.keys(f).forEach(function(b){f[b].isCapability||(f[b].valid=
!0)}),l.resolve(f));return l},_addListingInfo:function(e){var l,r=this.licenses||{},k=(null===(l=e.clientId)||void 0===l?void 0:l.toLowerCase())||null;k&&(r[k]=a.__assign(a.__assign({},r[k]||{}),{valid:!0,itemId:e.itemId,clientId:e.clientId}))},isLicensed:function(e){var l,r,k;e=null!==(l=null===e||void 0===e?void 0:e.toLowerCase())&&void 0!==l?l:"";l=this.licenses||{};return null!==(k=null===(r=null===l||void 0===l?void 0:l[e])||void 0===r?void 0:r.valid)&&void 0!==k?k:!1}}})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);return function(){function q(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=l["default"].restBaseUrl+
"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=l["default"].restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}q.terminateUserSession=function(m,n,t){var z=d["default"].getSecureUrl(l["default"].restBaseUrl);return d["default"].request({url:z+"content/listings/"+m+"/terminateUserSession",content:{username:n,sessionId:t}},{usePost:!0})};q.prototype.provisionUserEntitlements=function(m,n,t){return r["default"].sendAllResourcesSerially(l["default"].restBaseUrl+
"content/listings/"+m+"/provisionUserEntitlements",25,n.users,function(z){return{userEntitlements:JSON.stringify({users:z,entitlements:n.entitlements}),suppressCustomerEmail:!t}})};q.prototype.retrieveProvisionedUserEntitlement=function(m,n){var t=h["default"].substitute(this._userEntitlementUrl,{itemId:m,username:n});return d["default"].request({url:t})};q.prototype.retrieveProvisionedUserEntitlements=function(m,n,t){m=h["default"].substitute(this._userEntitlementsUrl,{itemId:m});return d["default"].request({url:m,
content:{start:n?n:1,num:t?t:10}})};q.prototype.retrieveSessionInformation=function(m,n){var t=h["default"].substitute(this._userSessionsUrl,{itemId:m,username:n});return d["default"].request({url:t})};q.prototype.provisionUserAppBundle=function(m,n,t){var z=new c["default"],w=new c["default"];t?w.resolve():this.getAppBundles(!0).then(function(y){y=y.appBundles.filter(function(x){return x.appBundleItemId===m})[0];y.maxUsers-y.assigned>=n.length?w.resolve():z.reject()});w.then(function(){r["default"].sendAllResourcesWithDelay(l["default"].restBaseUrl+
"content/listings/"+m+"/provisionUserAppBundle",25,n,function(y){return{users:JSON.stringify(y),revoke:t}},500).then(function(y){z.resolve(y)},function(y){z.reject(y)})});return z};q.prototype.updateUserLicenseType=function(m,n){var t=new c["default"];r["default"].sendAllResourcesSerially(l["default"].restBaseUrl+"portals/self/updateUserLicenseType",25,m,function(z){return{users:JSON.stringify(z),userLicenseType:n}}).then(function(z){t.resolve(z)},function(){t.reject()});return t};q.prototype.getUserCounts=
function(m){return d["default"].request({url:l["default"].restBaseUrl+"portals/self/users/counts?type\x3d"+m})};q.prototype.getUserLicenseType=function(m){var n=this,t=new c["default"],z;b["default"].getBlockedAppsWithInfo().then(function(w){z=w;return d["default"].request({url:l["default"].restBaseUrl+"/community/users/"+m+"/userLicenseType"})}).then(function(w){w.apps.forEach(function(y){y.isAppBundle?y.apps.forEach(function(x){x.blocked=b["default"].isBlocked(z,x)}):y.blocked=b["default"].isBlocked(z,
y)});n.addFieldMapsMobileToUserType(w);t.resolve(w)},function(){t.resolve()});return t};q.prototype.getUserAppBundles=function(m){return r["default"].fetchAllResources(l["default"].restBaseUrl+"/community/users/"+m+"/appBundles",{num:10},"appBundles")};q.prototype.getUserProvisionedListings=function(m,n,t){var z=n||{},w=new c["default"],y;t?b["default"].getBlockedAppsWithInfo().then(function(x){w.resolve(x)}):w.resolve([]);return w.then(function(x){y=x;return r["default"].fetchAllResources(l["default"].restBaseUrl+
"/community/users/"+m+"/provisionedListings",z,"provisionedListings")}).then(function(x){k["default"].licensesConfig&&x.forEach(function(A){var v=k["default"].licensesConfig.apps.filter(function(u){return u.title===A.title})[0];v&&v.label&&(A.title=v.label);A.blocked=b["default"].isBlocked(y,A)});return x})};q.prototype.getUserEntitlements=function(m,n){return d["default"].request({url:l["default"].restBaseUrl+"/content/listings/"+m+"/userEntitlements/"+n})};q.prototype.getLicenseTypes=function(m){var n=
this,t=new c["default"],z;b["default"].getBlockedAppsWithInfo().then(function(w){z=w;return r["default"].fetchAllResources(l["default"].restBaseUrl+"portals/self/userLicenseTypes",{num:10},"userLicenseTypes")}).then(function(w){(null===z||void 0===z?0:z.length)&&w.forEach(function(y){y.apps.forEach(function(x){x.isAppBundle?x.apps.forEach(function(A){A.blocked=z.some(function(v){var u;return v.itemid&&v.itemid===A.id||v.title===A.title||(null===(u=v.related)||void 0===u?void 0:u.some(function(C){return C.itemid&&
C.itemid===A.id||C.title===A.title}))})}):x.blocked=z.some(function(A){var v;return A.itemid&&A.itemid===x.id||A.title===x.title||(null===(v=A.related)||void 0===v?void 0:v.some(function(u){return u.itemid&&u.itemid===x.id||u.title===x.title}))})})});n.getUserCounts("userLicenseType").then(function(y){w.forEach(function(A){var v=y.results.filter(function(u){return u.key===A.id})[0];A.assigned=v?v.count:0;n.addFieldMapsMobileToUserType(A)});var x=w.filter(function(A){return m||0!==A.assigned||0!==
A.maxUsers});r["default"].sortListByStrProp(x,"name");t.resolve({userLicenseTypes:x})})});return t};q.prototype.getAppBundles=function(m){var n=this,t=new c["default"],z;b["default"].getBlockedAppsWithInfo().then(function(w){z=w;return d["default"].request({url:l["default"].restBaseUrl+"portals/self/appBundles"})}).then(function(w){w.appBundles.forEach(function(y){"Field Apps"===y.name&&y.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]});
y.apps.forEach(function(x){x.blocked=z.some(function(A){var v;return A.itemid&&A.itemid===x.id||A.title===x.title||(null===(v=A.related)||void 0===v?void 0:v.some(function(u){return u.itemid&&u.itemid===x.id||u.title===x.title}))})})});n.getUserCounts("appBundle").then(function(y){w.appBundles.forEach(function(x){var A=y.results.filter(function(v){return v.key===x.appBundleItemId})[0];x.assigned=A?A.count:0});w.appBundles=w.appBundles.filter(function(x){return 0!==x.maxUsers||0!==x.assigned});r["default"].sortListByStrProp(w.appBundles,
"name");m?t.resolve(w):f["default"].eachAlways(w.appBundles.map(function(x){return n.getUsersForAppBundle(x.appBundleItemId)})).then(function(x){x.forEach(function(A,v){w.appBundles[v].usernames=A.value.results.map(function(u){return u.username})});f["default"].eachAlways(w.appBundles.map(function(A){return n.getAppBundleListing(A.appBundleItemId)})).then(function(A){w.appBundles.forEach(function(v,u){v.allowedLevels=A[u].value.allowedUserLevels?A[u].value.allowedUserLevels.split(",").map(function(C){return C.trim()}):
[]});t.resolve(w)})})})});return t};q.prototype.getAppBundleListing=function(m){return d["default"].request({url:d["default"].getSecureUrl(l["default"].restBaseUrl)+"content/listings/"+m})};q.prototype.getUsersForAppBundle=function(m){return d["default"].request({url:l["default"].restBaseUrl+"portals/self/users/search",content:{q:"appbundle: "+m}})};q.prototype.getLicensedEntitlements=function(){var m=this,n=new c["default"],t;k["default"].initLicensesConfig(l["default"].portal).then(function(){return b["default"].getBlockedAppsWithInfo()}).then(function(z){t=
z;return m.retrieveProductListings()}).then(function(){m._retrieveUserEntitlements().then(function(){var z;m._hasNegativeLicenses();var w=[];if(m._hasProListing()){var y={};m.appUserCounts.forEach(function(u){u.key!==m._proListing.listing.itemId||y[u.secondaryKey]||(y[u.secondaryKey]={num:0})});var x=!(m._proListing.provision.orgEntitlements&&m._proListing.provision.orgEntitlements.entitlements),A=[];var v=x?y:m._proListing.provision.orgEntitlements.entitlements;x||Object.keys(y).forEach(function(u){v[u]||
(v[u]=y[u],A.push(u))});Object.keys(v).forEach(function(u){var C;x||(x=-1!==A.indexOf(u));var E=(null===(C=m.appUserCounts.filter(function(I){return I.key===m._proListing.listing.itemId&&I.secondaryKey===u})[0])||void 0===C?void 0:C.count)||0;C=v[u].num;var F=C-E,G=m.proEntitlements.filter(function(I){return-1!==I.entitlements.indexOf(u)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(u),J=m._isLicenseExpired(m._proListing.provision.endDate,x,C,E);E={title:q.getProEntitlementTitle(u),
key:u,total:C,used:E,remaining:F,status:h["default"].substitute(q.i18n.licensesUsed,{used:E,total:C}),isPro:!0,proEntitlements:m.proEntitlements,allowedLevels:["2"],itemId:m._proListing.listing.itemId,usernames:G.map(function(I){return I.username}),extNotSupported:q.getExtNotSupported(u),expiration:m._proListing.provision.endDate,isExpired:J,isExtension:H,trial:m._proListing.provision.trial,isEsriApp:!0};w.push(E)})}null===(z=m._productListings)||void 0===z?void 0:z.forEach(function(u){var C,E=u.listing,
F=E.itemId,G={},H=!(u.provision.orgEntitlements&&u.provision.orgEntitlements.entitlements),J=E.title,I=m.appUserCounts.filter(function(P){return P.key===F})[0];I&&(G[I.secondaryKey]={num:0});v=H?G:u.provision.orgEntitlements.entitlements;G&&Object.keys(G).length&&Object.keys(G).forEach(function(P){v[P]||(v[P]=G[P])});var R=[],O="esri"===E.owner||"esri_apps"===E.owner;!O&&v&&Object.keys(v).length&&(R=Object.keys(v),I=R[0],v=(C={},C[I]=v[I],C));Object.keys(v).forEach(function(P){var L,K,Q,W=!0;if(k["default"].licensesConfig){var ba=
-1<(null===(L=u.listing.typeKeywords)||void 0===L?void 0:L.indexOf("User License Type Extension"));L=ba?k["default"].licensesConfig.userTypeExtensions:k["default"].licensesConfig.apps;if(L=null===L||void 0===L?void 0:L.filter(function(X){return X.entitlement===P})[0])ba||(J=L.label||L.title),"false"===L.supportsKubernetes&&(W=!1)}ba=(null===(K=m.appUserCounts.filter(function(X){return X.key===F&&X.secondaryKey===P})[0])||void 0===K?void 0:K.count)||0;K={drone2MapAdvN:"ArcGIS Drone2Map Advanced",drone2MapStdN:"ArcGIS Drone2Map Standard"};
K[P]&&(J=K[P]);K=v[P].num;L=K-ba;var S=m._isLicenseExpired(u.provision.endDate,H,K,ba);W={title:J,key:P,total:K,used:ba,remaining:L,status:h["default"].substitute(q.i18n.licensesUsed,{used:ba,total:K}),icon:E.icon,properties:E.properties,itemId:F,type:E.type,allowedLevels:E.allowedUserLevels?E.allowedUserLevels.split(",").map(function(X){return X.trim()}):[],usernames:m.productEntitlements[F]?m.productEntitlements[F].map(function(X){return X.username}):[],expiration:u.provision.endDate,isExpired:S,
trial:u.provision.trial,requiredListings:E.requiredListings,dependentListings:E.dependentListings,owner:E.owner,isBusinessAnalyst:k["default"].isBusinessAnalyst(P),isDrone2Map:k["default"].isDrone2Map(P),blocked:t.some(function(X){var aa;return X.itemid&&X.itemid===F||X.title===J||(null===(aa=X.related)||void 0===aa?void 0:aa.some(function(M){return M.itemid&&M.itemid===F||M.title===J}))}),entitlementKeys:R,isEsriApp:O,supportsKubernetes:W};"ArcGIS for Power BI"===W.title&&(null===(Q=k["default"].licensesConfig)||
void 0===Q?0:Q.hidePowerBI)||w.push(W)})});r["default"].sortListByStrProp(w,"title");n.resolve(w)})});return n};q.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};q.prototype.getDisconnectSettingForListing=function(m){m=d["default"].getSecureUrl(l["default"].restBaseUrl)+"content/listings/"+m+"/disconnectSettings";return d["default"].request({url:m})};q.prototype.updateDisconnectSettingForListing=function(m,n,t){m=d["default"].getSecureUrl(l["default"].restBaseUrl)+
"content/listings/"+m+"/setDisconnectSettings";var z=new c["default"];n={canDisconnect:n};e["default"].isDefined(t)&&(n.maxDisconnectTime=t);d["default"].request({url:m,content:n},{usePost:!0}).then(function(w){w&&w.code&&w.messageCode?z.resolve({error:!0,messageCode:w.messageCode}):z.resolve(w)},function(w){var y={error:!0,messageCode:void 0};w&&w.messageCode&&(y.messageCode=w.messageCode);z.resolve(y)});return z};q.getExtNotSupported=function(m){return this._extNotSupported[m]};q.getProEntitlementTitle=
function(m){switch(m){case "desktopBasicN":return q.i18n.licenseTypes.agsProLabel+" "+q.i18n.licenseTypes.basicLabel;case "desktopStdN":return q.i18n.licenseTypes.agsProLabel+" "+q.i18n.licenseTypes.standardLabel;case "desktopAdvN":return q.i18n.licenseTypes.agsProLabel+" "+q.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return q.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return q.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return q.i18n.licenseTypes.networkAnalyst;case "geostatAnalystN":return q.i18n.licenseTypes.geostatisticalAnalyst;
case "dataReviewerN":return q.i18n.licenseTypes.dataReviewer;case "workflowMgrN":return q.i18n.licenseTypes.workflowManager;case "dataInteropN":return q.i18n.licenseTypes.dataInterop;case "defenseN":return q.i18n.licenseTypes.defenseMapping;case "FMVN":return q.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return q.i18n.licenseTypes.businessBasic;case "businessStdN":return q.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return q.i18n.licenseTypes.roadsHighways;case "publisherN":return q.i18n.licenseTypes.publisher;
case "productionMapN":return q.i18n.licenseTypes.productionMapping;case "schematicsN":return q.i18n.licenseTypes.schematics;case "trackingN":return q.i18n.licenseTypes.tracking;case "aviationN":return q.i18n.licenseTypes.aviation;case "airportsN":return q.i18n.licenseTypes.airports;case "maritimeN":return q.i18n.licenseTypes.maritime;case "bathymetryN":return q.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return q.i18n.licenseTypes.streetMapNA;case "smpEuropeN":return q.i18n.licenseTypes.streetMapEU;
case "smpAsiaPacificN":return q.i18n.licenseTypes.streetMapAPAC;case "smpMidEAfricaN":return q.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return q.i18n.licenseTypes.streetMapLA;case "smpJapanN":return q.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return q.i18n.licenseTypes.locationRef;case "imageAnalystN":return q.i18n.licenseTypes.imageAnalyst;case "locateXTN":return q.i18n.licenseTypes.locateXT;case "indoorsN":return q.i18n.licenseTypes.indoors;default:return""}};q.prototype._hasNegativeLicenses=
function(){var m=this,n={},t=!1,z=!1;this._proListing&&(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(n=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=a.__assign({},n),this.proEntitlements.forEach(function(w){w.entitlements.forEach(function(y){m._remainingProEntitlements[y]||(m._remainingProEntitlements[y]=0);--m._remainingProEntitlements[y];0>m._remainingProEntitlements[y]&&
(t=!0)})}));this._productListings&&0<this._productListings.length&&(this._remainingProductEntitlements={},this._productListings.forEach(function(w){n={};var y=w.listing.itemId;w.provision.orgEntitlements&&w.provision.orgEntitlements.entitlements&&(n=m._convertOrgEntitlementsToPurchaseMap(w.provision.orgEntitlements.entitlements));m._remainingProductEntitlements[y]=a.__assign({},n);m.productEntitlements[y]&&m.productEntitlements[y].forEach(function(x){x.entitlements.forEach(function(A){m._remainingProductEntitlements[y]||
(m._remainingProductEntitlements[y]={});m._remainingProductEntitlements[y][A]||(m._remainingProductEntitlements[y][A]=0);--m._remainingProductEntitlements[y][A];0>m._remainingProductEntitlements[y][A]&&(z=!0)})})}));return t||z};q.prototype._convertOrgEntitlementsToPurchaseMap=function(m){var n={};if(m)for(var t in m)m[t]&&e["default"].isDefined(m[t].num)?n[t]=m[t].num:n[t]=m[t];return n};q.prototype._hasProListing=function(){var m=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&
!r["default"].isEmptyObject(this._proListing.provision.orgEntitlements)||this.appUserCounts.some(function(n){var t;return n.key===(null===(t=m._proListing.listing)||void 0===t?void 0:t.itemId)})))};q.prototype._isLicenseExpired=function(m,n,t,z){var w=e["default"].isDefined(m),y=-1===m;m=m<Date.now();return w&&!y&&m||n||0===t&&0<z};q.prototype.retrieveProductListings=function(){var m=this,n=new c["default"];d["default"].findLicenseByUserProducts().then(function(t){t&&t.pro&&(m._proListing=a.__assign({},
t.pro));t&&t.products&&(m._productListings=a.__spreadArray([],t.products));n.resolve()},function(){m._proListing=void 0;m._productListings=void 0;n.resolve()});return n};q.prototype.retrieveUserEntitlementsForListing=function(m){m=h["default"].substitute(this._userEntitlementsUrl,{itemId:m});return r["default"].fetchAllResources(m,{},"userEntitlements")};q.prototype.getAppUserCounts=function(){var m=this;return r["default"].fetchAllResources(l["default"].restBaseUrl+"portals/self/users/counts?type\x3dapp").then(function(n){m.appUserCounts=
n})};q.prototype._retrieveUserEntitlements=function(){var m=new c["default"];this.getAppUserCounts().then(function(){m.resolve()},function(){m.resolve()});return m};q.prototype.addFieldMapsMobileToUserType=function(m){m.apps.forEach(function(n){n.isAppBundle&&"Field Apps"===n.title&&n.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]})})};q.prototype._retrieveProUserEntitlements=function(){var m=h["default"].substitute(this._userEntitlementsUrl,
{itemId:this._proListing.listing.itemId});return r["default"].fetchAllResources(m,{},"userEntitlements")};q.prototype._retrieveProductUserEntitlements=function(){var m=this,n={};this._productListings.forEach(function(t){t=t.listing.itemId;var z=h["default"].substitute(m._userEntitlementsUrl,{itemId:t});n[t]=r["default"].fetchAllResources(z,{},"userEntitlements")});return n};q.prototype.getUserLicensedItems=function(m){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,
function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d["default"].request({url:l["default"].restBaseUrl+"community/users/"+m,content:{returnUserLicensedItems:!0}})];case 1:return n=t.sent(),[2,(null===n||void 0===n?void 0:n.userLicensedItems)||[]];case 2:return t.sent(),[2,[]];case 3:return[2]}})})};q.i18n=a.__assign({},g["default"].manageLicenses);q._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),
desktopStdN:["maritimeN"],desktopAdvN:[]};return q}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(D,B,a,c,h,g,e){Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);var l,r,k,f,b,d,q=function(){var z=new c["default"];if(e["default"].self.isPortal)return z.resolve([]),
z;if(k)return k;if((null===r||void 0===r?0:r.blockedApps)&&3E3>=Date.now()-r.timestamp)return z.resolve(r.blockedApps),k=void 0,z;k=z;g["default"].request({url:e["default"].restBaseUrl+"portals/self/signinSettings"}).then(function(w){r={blockedApps:null===w||void 0===w?void 0:w.blockedApps,timestamp:Date.now()};z.resolve(null===w||void 0===w?void 0:w.blockedApps);k=void 0},function(){z.resolve([]);k=void 0});return z},m=function(){var z=new c["default"];if(d)return z.resolve(d),z;if(f)return f;f=
z;g["default"].request({url:e["default"].restBaseUrl+"search",content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:e["default"].blockedAppsConfigItemQuery}}).then(function(w){f=void 0;d=w;z.resolve(w)},function(){f=void 0;z.resolve(void 0)});return z},n=function(z){var w=new c["default"];if(!z)return w.resolve(void 0),w;if(b)return b;b=w;g["default"].request({url:e["default"].restBaseUrl+"content/items/"+z+"/data"}).then(function(y){b=void 0;l=(null===y||void 0===y?void 0:y.blockedApps)||[];
w.resolve(l)},function(){b=void 0;w.resolve(l)});return w},t=function(){var z=new c["default"];if(e["default"].self.isPortal)return z.resolve([]),z;if(l)return z.resolve(l),z;m().then(function(w){var y,x;if(w)return w=null===(x=null===(y=w.results)||void 0===y?void 0:y[0])||void 0===x?void 0:x.id,n(w);z.resolve(l)}).then(function(w){z.resolve(w)});return z};B["default"]={updateBlockedApps:function(z){z=a.__assign({blockedApps:z.length?JSON.stringify(z):""},!z.length&&{clearEmptyFields:!0});return g["default"].request({url:e["default"].restBaseUrl+
"portals/self/setSigninSettings",content:z},{usePost:!0})},getBlockedApps:q,getBlockableApps:t,getBlockedAppsWithInfo:function(){var z=new c["default"];if(e["default"].self.isPortal)return z.resolve([]),z;h["default"]({blockable:t(),clientIds:q()}).then(function(w){var y=w.blockable,x=w.clientIds;(null===y||void 0===y?0:y.length)&&x||z.resolve([]);z.resolve((y||[]).filter(function(A){return-1<(null===x||void 0===x?void 0:x.indexOf(A.clientid))}))},function(){z.resolve([])});return z},isBlocked:function(z,
w){return z.some(function(y){var x;return y.itemid&&(y.itemid===w.id||y.itemid===w.itemId)||y.title===w.title||(null===(x=y.related)||void 0===x?void 0:x.some(function(A){return A.itemid&&(A.itemid===w.id||A.itemid===w.itemId)||A.title===w.title}))})},extractClientIds:function(z){var w=[];z.forEach(function(y){var x,A;w.push(y.clientid);null===(A=null===(x=y.related)||void 0===x?void 0:x.forEach)||void 0===A?void 0:A.call(x,function(v){w.push(v.clientid)})});return w}}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin dojo/i18n!../../nls/arcgisonline dojo/json esri/lang".split(" "),
function(D,B,a,c,h,g,e,l,r){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);return function(k){function f(b){var d=k.call(this)||this;d.declaredClass="arcgisonline.sharing.dijit.Role";d.id=null;d.baseRole=null;d.name=null;d.description=null;d.privileges=[];d.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,
deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,
publishServerServices:!1,publishServerGPServices:!1,publishKnowledgeGraph:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,invitePartneredCollaborationMembers:!1,addExternalMembersToGroup:!1,createItem:!1,reassignItems:!1,receiveItems:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,
manageVersions:!1,editIndoorsSpaces:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};b=b||{};var q=b.portalUser;q?(d.id=q.roleId?q.roleId:q.role,d.baseRole=q.role,d.setPrivileges(q.privileges)):
(d.id=b.id,d.baseRole=b.role,d.name=b.name,d.description=b.description,b.privileges&&d.setPrivileges(b.privileges));b.viewOnly&&d.setViewOnly();return d}a.__extends(f,k);f.prototype.setViewOnly=function(){var b=this;this.baseRole="org_user";this.id=this.SYSTEM_ROLES.VIEWER;var d=this._buildPrivilegesArray().filter(function(q){return h["default"].includes(b.SYSTEM_ROLES.PRIVILEGES[b.id],q)});this.setPrivileges(d)};f.prototype.isViewer=function(){return r["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};
f.prototype.isDataEditor=function(){return r["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.DATA_EDITOR};f.prototype.isFacilitator=function(){return r["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.FACILITATOR};f.prototype.isUser=function(){return r["default"].isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};f.prototype.isPublisher=function(){return r["default"].isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};f.prototype.isAdmin=
function(){return r["default"].isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};f.prototype.isBasedOnUser=function(){return this.isUser()||r["default"].isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===this.baseRole)};f.prototype.isBasedOnPublisher=function(){return this.isPublisher()||r["default"].isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};f.prototype.isBasedOnAdmin=function(){return this.isAdmin()||
r["default"].isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};f.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&r["default"].isDefined(this.id)&&0<this.id.length};f.prototype.isBuiltIn=function(){var b=this.isUser()||this.isPublisher()||this.isAdmin(),d=this.isViewer()||this.isDataEditor()||this.isFacilitator();return b||d};f.prototype.canInviteUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?
void 0:b.portal.admin.inviteUsers};f.prototype.canDisableUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.disableUsers};f.prototype.canViewUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.viewUsers};f.prototype.canGetCoordinators=function(){return this.canViewUsers()||this.canViewOrgUsers()};f.prototype.canUpdateUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateUsers};
f.prototype.canDeleteUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteUsers};f.prototype.canChangeUserRoles=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.changeUserRoles};f.prototype.canViewOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.viewGroups};f.prototype.canUpdateOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateGroups};
f.prototype.canDeleteOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteGroups};f.prototype.canReassignOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.reassignGroups};f.prototype.canAssignUsersToOrgGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.assignToGroups};f.prototype.canManageEnterpriseGroups=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.portal.admin.manageEnterpriseGroups};f.prototype.canViewOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.viewItems};f.prototype.canUpdateOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateItems};f.prototype.canDeleteOrgItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.deleteItems};f.prototype.canReassignOrgItems=function(){var b;return null===
(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.reassignItems};f.prototype.canReassignOwnItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.reassignItems};f.prototype.canReceiveUserItems=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.receiveItems};f.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};
f.prototype.canManageLicenses=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageLicenses};f.prototype.canShareOthersItemsToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.shareToGroup};f.prototype.canShareOthersItemsToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.shareToOrg};f.prototype.canShareOthersItemsToPublic=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.portal.admin.shareToPublic};f.prototype.canCreateUpdateCapableGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.createUpdateCapableGroup};f.prototype.canUpdateItemCategories=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.updateItemCategorySchema};f.prototype.canManageCollaborations=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageCollaborations};f.prototype.canManageSecurity=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageSecurity};f.prototype.canManageWebsite=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageWebsite};f.prototype.canManageRoles=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageRoles};f.prototype.canManageServers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageServers};f.prototype.canManageUtilityServices=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageUtilityServices};f.prototype.canManageCredits=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.admin.manageCredits};f.prototype.canCreateGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.createGroup};f.prototype.canJoinOrgGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.joinGroup};f.prototype.canJoinNonOrgGroup=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.joinNonOrgGroup};f.prototype.canManageCollaborationGroupMembers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.invitePartneredCollaborationMembers};f.prototype.canAddExternalMembersToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.addExternalMembersToGroup};f.prototype.canPublishFeatures=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.portal.publisher.publishFeatures};f.prototype.canPublishTiles=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishTiles};f.prototype.canPublishScenes=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishScenes};f.prototype.canPublishTiledImagery=function(){var b,d;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishTiledImagery)&&!(null===(d=c["default"].self)||
void 0===d?0:d.isPortal)&&this._hasImageEntitlement()};f.prototype.canPublishDynamicImagery=function(){var b,d;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishDynamicImagery)&&((null===(d=c["default"].self)||void 0===d?void 0:d.isPortal)||this._hasImageEntitlement())};f.prototype.canPublishServerServices=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishServerServices};f.prototype.canPublishServerGPServices=function(){var b;
return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishServerGPServices};f.prototype.canPublishKnowledgeGraphServices=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.publishKnowledgeGraph};f.prototype.canPublishVectorTiles=function(){return!0};f.prototype.canPublishImageCollection=function(){var b=c["default"].self&&c["default"].self.isPortal,d=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return b?this.canPublishDynamicImagery():
d};f.prototype.canCreateItem=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.createItem};f.prototype.canShareItemToGroup=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToGroup};f.prototype.canShareItemToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToOrg};f.prototype.canShareItemToPublic=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareToPublic};
f.prototype.canShareGroupToOrg=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareGroupToOrg};f.prototype.canShareGroupToPublic=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.shareGroupToPublic};f.prototype.canViewOrgUsers=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewOrgUsers};f.prototype.canViewOrgUserContent=function(){var b;return null===(b=this.privilegeObj)||void 0===b?
void 0:b.portal.user.viewOrgItems};f.prototype.canViewOrgUserGroups=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewOrgGroups};f.prototype.canViewTracks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.user.viewTracks};f.prototype.canEditFeatures=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.edit};f.prototype.canEditFeaturesFullControl=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.features.user.fullEdit};f.prototype.canManageVersions=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.manageVersions};f.prototype.canEditIndoorsSpaces=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.features.user.editIndoorsSpaces};f.prototype.canManageOpenData=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.opendata.user.openDataAdmin};f.prototype.canDesignateOpenDataGroups=function(){var b;
return null===(b=this.privilegeObj)||void 0===b?void 0:b.opendata.user.designateGroup};f.prototype.canUseGeocode=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.geocode};f.prototype.canUseNetworkAnalysis=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.networkanalysis};f.prototype.canUseSpatialAnalysis=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.spatialanalysis};f.prototype.canUseGeoenrichment=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.geoenrichment};f.prototype.canUseDemographics=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.demographics};f.prototype.canUseFeatureReport=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.user.featurereport};f.prototype.canUseGeoanalytics=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.geoanalytics};
f.prototype.canUseRasterAnalysis=function(){var b;return(null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.rasteranalysis)&&this.canPublishImageCollection()};f.prototype.canPurchaseMarketplace=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.purchase};f.prototype.canManageMarketplace=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.manage};f.prototype.canTrialMarketplace=function(){var b;return null===
(b=this.privilegeObj)||void 0===b?void 0:b.marketplace.admin.startTrial};f.prototype.canCreateNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.createNotebooks};f.prototype.canScheduleNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.scheduleNotebooks};f.prototype.canPublishNotebooks=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.publishNotebooks};f.prototype.canCreateAdvancedNotebooks=
function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.premium.publisher.createAdvancedNotebooks};f.prototype.canBulkPublishFromDataStores=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.bulkPublishFromDataStores};f.prototype.canEnumerateDataStores=function(){var b;return null===(b=this.privilegeObj)||void 0===b?void 0:b.portal.publisher.enumerateDataStores};f.prototype.canRegisterDataStores=function(){var b;return null===(b=this.privilegeObj)||
void 0===b?void 0:b.portal.publisher.registerDataStores};f.prototype.setPrivileges=function(b){this.privileges=b;this._initPrivilegesObject();r["default"].isDefined(b)&&this._readPrivileges(b)};f.prototype.stringify=function(){return l["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})};f.prototype.stringifyRole=function(){return l["default"].stringify({id:this.id,name:this.name,description:this.description})};f.prototype.stringifyPrivileges=
function(){return l["default"].stringify({privileges:this._buildPrivilegesArray()})};f.prototype.stringifyPretty=function(){return l["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")};f.prototype.summarize=function(){var b=[],d=c["default"].self&&c["default"].self.isPortal,q=c["default"].self&&c["default"].self.portalProperties&&c["default"].self.portalProperties.openData&&!0===c["default"].self.portalProperties.openData.enabled,
m=this.privilegeObj;m.portal.user.viewOrgUsers&&b.push(d?e["default"].customRoles.users.canViewOrgUsersSumPortal:e["default"].customRoles.users.canViewOrgUsersSum);m.portal.user.createGroup&&b.push(e["default"].customRoles.groups.canCreateSum);m.portal.user.joinGroup&&b.push(d?e["default"].customRoles.groups.canJoinIntSumPortal:e["default"].customRoles.groups.canJoinIntSum);m.portal.user.joinNonOrgGroup&&b.push(e["default"].customRoles.groups.canJoinExt);m.portal.user.viewOrgGroups&&b.push(d?e["default"].customRoles.groups.canViewOrgGroupsPortal:
e["default"].customRoles.groups.canViewOrgGroups);!d&&m.portal.user.invitePartneredCollaborationMembers&&b.push(e["default"].customRoles.groups.canInvitePartnered);!d&&m.portal.user.addExternalMembersToGroup&&b.push(e["default"].customRoles.groups.canAddExternal);m.portal.user.createItem&&b.push(e["default"].customRoles.items.canCreateSum);m.portal.publisher.publishFeatures&&b.push(e["default"].customRoles.items.canPublishFeatures);m.portal.publisher.publishTiles&&b.push(e["default"].customRoles.items.canPublishTiles);
m.portal.publisher.publishScenes&&b.push(e["default"].customRoles.items.canPublishScenes);m.portal.publisher.publishTiledImagery&&b.push(e["default"].customRoles.items.canPublishTiledImagery);m.portal.publisher.publishDynamicImagery&&b.push(e["default"].customRoles.items.canPublishDynamicImagery);d&&m.portal.publisher.publishServerServices&&b.push(e["default"].customRoles.items.canPublishServerServices);d&&m.portal.publisher.registerDataStores&&b.push(e["default"].customRoles.items.canRegisterDataStore);
m.portal.user.viewOrgItems&&b.push(d?e["default"].customRoles.items.canViewOrgItemsPortal:e["default"].customRoles.items.canViewOrgItems);m.portal.user.viewTracks&&b.push(e["default"].customRoles.items.canViewTracks);m.portal.user.reassignItems&&b.push(e["default"].customRoles.items.canReassignOwnItems);m.portal.user.receiveItems&&b.push(e["default"].customRoles.items.canReceiveReassignment);m.portal.user.shareToGroup&&b.push(e["default"].customRoles.itemSharing.canShareGroupsSum);m.portal.user.shareToOrg&&
b.push(d?e["default"].customRoles.itemSharing.canShareOrgSumPortal:e["default"].customRoles.itemSharing.canShareOrgSum);m.portal.user.shareToPublic&&b.push(e["default"].customRoles.itemSharing.canSharePublicSum);m.portal.user.shareGroupToOrg&&b.push(d?e["default"].customRoles.groupSharing.canShareOrgPortal:e["default"].customRoles.groupSharing.canShareOrg);m.portal.user.shareGroupToPublic&&b.push(e["default"].customRoles.groupSharing.canSharePublic);q&&m.opendata.user.openDataAdmin&&b.push(e["default"].customRoles.openData.canAdmin);
m.premium.user.geocode&&b.push(e["default"].customRoles.geoservices.canUseGeocoding);m.premium.user.networkanalysis&&b.push(e["default"].customRoles.geoservices.canUseNA);m.premium.user.spatialanalysis&&b.push(e["default"].customRoles.geoservices.canUseSA);m.premium.user.geoenrichment&&b.push(e["default"].customRoles.geoservices.canUseGeoenrichment);m.premium.user.demographics&&b.push(e["default"].customRoles.geoservices.canUseDemographics);m.premium.user.featurereport&&b.push(e["default"].customRoles.geoservices.canUseFeatureReport);
d&&(m.premium.publisher.geoanalytics&&b.push(e["default"].customRoles.geoservices.canUseGeoanalytics),m.premium.publisher.rasteranalysis&&b.push(e["default"].customRoles.geoservices.canUseRasterAnalysis));m.features.user.edit&&b.push(e["default"].customRoles.features.canEditSum);m.features.user.fullEdit&&b.push(e["default"].customRoles.features.canManageSum);m.features.user.manageVersions&&b.push(e["default"].customRoles.versioning.canManage);q&&m.opendata.user.designateGroup&&b.push(e["default"].customRoles.openData.canDesignate);
m.portal.admin.viewUsers&&b.push(d?e["default"].customRoles.userAdmin.canViewSumPortal:e["default"].customRoles.userAdmin.canViewSum);m.portal.admin.updateUsers&&b.push(d?e["default"].customRoles.userAdmin.canUpdateSumPortal:e["default"].customRoles.userAdmin.canUpdateSum);m.portal.admin.deleteUsers&&b.push(d?e["default"].customRoles.userAdmin.canDeleteSumPortal:e["default"].customRoles.userAdmin.canDeleteSum);m.portal.admin.inviteUsers&&b.push(d?e["default"].customRoles.userAdmin.canAddSum:e["default"].customRoles.userAdmin.canInviteSum);
m.portal.admin.disableUsers&&b.push(d?e["default"].customRoles.userAdmin.canDisableSumPortal:e["default"].customRoles.userAdmin.canDisableSum);m.portal.admin.changeUserRoles&&b.push(d?e["default"].customRoles.userAdmin.canChangeRolesSumPortal:e["default"].customRoles.userAdmin.canChangeRolesSum);m.portal.admin.manageLicenses&&b.push(d?e["default"].customRoles.userAdmin.canManageLicensesSumPortal:e["default"].customRoles.userAdmin.canManageLicensesSum);m.portal.admin.viewGroups&&b.push(d?e["default"].customRoles.groupAdmin.canViewSumPortal:
e["default"].customRoles.groupAdmin.canViewSum);m.portal.admin.updateGroups&&b.push(d?e["default"].customRoles.groupAdmin.canUpdateSumPortal:e["default"].customRoles.groupAdmin.canUpdateSum);m.portal.admin.deleteGroups&&b.push(d?e["default"].customRoles.groupAdmin.canDeleteSumPortal:e["default"].customRoles.groupAdmin.canDeleteSum);m.portal.admin.reassignGroups&&b.push(d?e["default"].customRoles.groupAdmin.canReassignSumPortal:e["default"].customRoles.groupAdmin.canReassignSum);m.portal.admin.assignToGroups&&
b.push(d?e["default"].customRoles.groupAdmin.canAssignSumPortal:e["default"].customRoles.groupAdmin.canAssignSum);m.portal.admin.manageEnterpriseGroups&&b.push(e["default"].customRoles.groupAdmin.canLink);m.portal.admin.createUpdateCapableGroup&&b.push(e["default"].customRoles.groupAdmin.canCreateUpdateCapable);m.portal.admin.viewItems&&b.push(d?e["default"].customRoles.itemAdmin.canViewSumPortal:e["default"].customRoles.itemAdmin.canViewSum);m.portal.admin.updateItems&&b.push(d?e["default"].customRoles.itemAdmin.canUpdateSumPortal:
e["default"].customRoles.itemAdmin.canUpdateSum);m.portal.admin.deleteItems&&b.push(d?e["default"].customRoles.itemAdmin.canDeleteSumPortal:e["default"].customRoles.itemAdmin.canDeleteSum);m.portal.admin.reassignItems&&b.push(d?e["default"].customRoles.itemAdmin.canReassignSumPortal:e["default"].customRoles.itemAdmin.canReassignSum);m.portal.admin.updateItemCategorySchema&&b.push(e["default"].customRoles.itemAdmin.canManageItemCategories);m.portal.admin.manageCollaborations&&b.push(d?e["default"].customRoles.settingsAdmin.canManageCollabPortalSum:
e["default"].customRoles.settingsAdmin.canManageCollabSum);m.portal.admin.manageSecurity&&b.push(d?e["default"].customRoles.settingsAdmin.canManageSecurityPortalSum:e["default"].customRoles.settingsAdmin.canManageSecuritySum);m.portal.admin.manageWebsite&&b.push(d?e["default"].customRoles.settingsAdmin.canManageWebsitePortalSum:e["default"].customRoles.settingsAdmin.canManageWebsiteSum);m.portal.admin.manageRoles&&b.push(d?e["default"].customRoles.settingsAdmin.canManageRolesPortalSum:e["default"].customRoles.settingsAdmin.canManageRolesSum);
m.portal.admin.manageServers&&b.push(e["default"].customRoles.settingsAdmin.canManageServersSum);m.portal.admin.manageUtilityServices&&b.push(d?e["default"].customRoles.settingsAdmin.canManageUtilityServicesPortalSum:e["default"].customRoles.settingsAdmin.canManageUtilityServicesSum);m.portal.admin.manageCredits&&b.push(e["default"].customRoles.settingsAdmin.canManageCreditsSum);d&&m.portal.publisher.publishServerGPServices&&b.push(e["default"].customRoles.items.canPublishServerGPServices);d&&m.portal.publisher.publishKnowledgeGraph&&
b.push(e["default"].customRoles.items.canPublishKnowledgeGraph);m.portal.admin.shareToGroup&&b.push(e["default"].customRoles.itemAdmin.canShareToGroupSum);m.portal.admin.shareToOrg&&b.push(d?e["default"].customRoles.itemAdmin.canShareToOrgSumPortal:e["default"].customRoles.itemAdmin.canShareToOrgSum);m.portal.admin.shareToPublic&&b.push(e["default"].customRoles.itemAdmin.canShareToPublicSum);d||(m.marketplace.admin.manage&&b.push(e["default"].customRoles.marketplace.canAdminSum),m.marketplace.admin.purchase&&
b.push(e["default"].customRoles.marketplace.canPurchaseSum),m.marketplace.admin.startTrial&&b.push(e["default"].customRoles.marketplace.canTrialSum));m.premium.publisher.createAdvancedNotebooks&&b.push(e["default"].customRoles.geoservices.canUseAdvancedNotebooks);m.premium.publisher.createNotebooks&&b.push(e["default"].customRoles.items.canCreateNotebooks);m.premium.publisher.publishNotebooks&&b.push(e["default"].customRoles.items.canPublishNotebooks);m.premium.publisher.scheduleNotebooks&&b.push(e["default"].customRoles.itemAdmin.canScheduleNotebooks);
return b};f.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};f.prototype._readPrivileges=function(b){var d=this;r["default"].isDefined(b)&&b instanceof Array&&b.forEach(function(q){d._readPrivilege(q)})};f.prototype._readPrivilege=function(b){this._applyEffectToAction(!0,b)};f.prototype._hasImageEntitlement=function(){var b,d,q;return!(null===(q=null===(d=null===(b=c["default"].self)||void 0===b?void 0:b.communitySelf)||void 0===d?void 0:d.userLicensedItems)||void 0===q||!q.some(function(m){var n;
return null===(n=m.entitlements)||void 0===n?void 0:n.some(function(t){return"image"===t.toLowerCase()})}))};f.prototype._applyEffectToAction=function(b,d){switch(d){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=b;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=b;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=b;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=b;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=
b;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=b;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=b;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=b;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=b;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=b;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=
b;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=b;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=b;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=b;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=b;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=b;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=
b;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=b;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=b;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=b;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=b;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=b;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=
b;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=b;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=b;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=b;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=b;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=b;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=
b;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=b;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=b;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=b;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=b;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=
b;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=b;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=b;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=b;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=b;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=
b;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=b;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=b;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=b;break;case "portal:user:invitePartneredCollaborationMembers":this.privilegeObj.portal.user.invitePartneredCollaborationMembers=b;break;case "portal:user:addExternalMembersToGroup":this.privilegeObj.portal.user.addExternalMembersToGroup=b;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=
b;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=b;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=b;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=b;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=b;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=b;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=
b;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=b;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=b;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=b;break;case "portal:user:reassignItems":this.privilegeObj.portal.user.reassignItems=b;break;case "portal:user:receiveItems":this.privilegeObj.portal.user.receiveItems=b;break;case "features:user:edit":this.privilegeObj.features.user.edit=b;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=
b;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "features:user:editIndoorsSpaces":this.privilegeObj.features.user.editIndoorsSpaces;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=b;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=b;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=b;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=
b;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=b;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=b;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=b;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=b;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=b;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=
b;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=b;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=b;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=b;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=b;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=b;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=
b;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=b}};f.prototype._applyToAll=function(b){this.privilegeObj.portal.admin.inviteUsers=b;this.privilegeObj.portal.admin.disableUsers=b;this.privilegeObj.portal.admin.viewUsers=b;this.privilegeObj.portal.admin.updateUsers=b;this.privilegeObj.portal.admin.deleteUsers=b;this.privilegeObj.portal.admin.changeUserRoles=b;this.privilegeObj.portal.admin.viewGroups=b;this.privilegeObj.portal.admin.updateGroups=
b;this.privilegeObj.portal.admin.deleteGroups=b;this.privilegeObj.portal.admin.reassignGroups=b;this.privilegeObj.portal.admin.assignToGroups=b;this.privilegeObj.portal.admin.manageEnterpriseGroups=b;this.privilegeObj.portal.admin.viewItems=b;this.privilegeObj.portal.admin.updateItems=b;this.privilegeObj.portal.admin.deleteItems=b;this.privilegeObj.portal.admin.reassignItems=b;this.privilegeObj.portal.admin.manageLicenses=b;this.privilegeObj.portal.admin.shareToGroup=b;this.privilegeObj.portal.admin.shareToOrg=
b;this.privilegeObj.portal.admin.shareToPublic=b;this.privilegeObj.portal.admin.createUpdateCapableGroup=b;this.privilegeObj.portal.admin.updateItemCategorySchema=b;this.privilegeObj.portal.admin.manageCollaborations=b;this.privilegeObj.portal.admin.manageSecurity=b;this.privilegeObj.portal.admin.manageWebsite=b;this.privilegeObj.portal.admin.manageRoles=b;this.privilegeObj.portal.admin.manageServers=b;this.privilegeObj.portal.admin.manageUtilityServices=b;this.privilegeObj.portal.admin.manageCredits=
b;this.privilegeObj.portal.publisher.publishFeatures=b;this.privilegeObj.portal.publisher.publishTiles=b;this.privilegeObj.portal.publisher.publishScenes=b;this.privilegeObj.portal.publisher.publishServerServices=b;this.privilegeObj.portal.publisher.publishServerGPServices=b;this.privilegeObj.portal.user.createGroup=b;this.privilegeObj.portal.user.joinGroup=b;this.privilegeObj.portal.user.joinNonOrgGroup=b;this.privilegeObj.portal.user.invitePartneredCollaborationMembers=b;this.privilegeObj.portal.user.addExternalMembersToGroup=
b;this.privilegeObj.portal.user.createItem=b;this.privilegeObj.portal.user.shareToGroup=b;this.privilegeObj.portal.user.shareToOrg=b;this.privilegeObj.portal.user.shareToPublic=b;this.privilegeObj.portal.user.shareGroupToOrg=b;this.privilegeObj.portal.user.shareGroupToPublic=b;this.privilegeObj.portal.user.viewOrgUsers=b;this.privilegeObj.portal.user.viewOrgItems=b;this.privilegeObj.portal.user.viewOrgGroups=b;this.privilegeObj.portal.user.viewTracks=b;this.privilegeObj.features.user.edit=b;this.privilegeObj.opendata.user.openDataAdmin=
b;this.privilegeObj.opendata.user.designateGroup=b;this.privilegeObj.premium.user.geocode=b;this.privilegeObj.premium.user.networkanalysis=b;this.privilegeObj.premium.user.spatialanalysis=b;this.privilegeObj.premium.user.geoenrichment=b;this.privilegeObj.premium.user.demographics=b;this.privilegeObj.premium.user.featurereport=b;this.privilegeObj.premium.publisher.geoanalytics=b;this.privilegeObj.premium.publisher.rasteranalysis=b;this.privilegeObj.marketplace.admin.purchase=b;this.privilegeObj.marketplace.admin.manage=
b;this.privilegeObj.marketplace.admin.startTrial=b;this.privilegeObj.premium.publisher.createNotebooks=b;this.privilegeObj.premium.publisher.scheduleNotebooks=b;this.privilegeObj.premium.publisher.publishNotebooks=b;this.privilegeObj.premium.publisher.createAdvancedNotebooks=b};f.prototype._buildPrivilegesArray=function(){var b=[];!0===this.privilegeObj.portal.admin.inviteUsers&&b.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&b.push("portal:admin:disableUsers");
!0===this.privilegeObj.portal.admin.viewUsers&&b.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&b.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&b.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&b.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&b.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&b.push("portal:admin:updateGroups");
!0===this.privilegeObj.portal.admin.deleteGroups&&b.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&b.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&b.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&b.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&b.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&
b.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&b.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&b.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&b.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToGroup&&b.push("portal:admin:shareToGroup");!0===this.privilegeObj.portal.admin.shareToOrg&&b.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&
b.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&b.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&b.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&b.push("portal:admin:manageCollaborations");!0===this.privilegeObj.portal.admin.manageSecurity&&b.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&b.push("portal:admin:manageWebsite");
!0===this.privilegeObj.portal.admin.manageRoles&&b.push("portal:admin:manageRoles");!0===this.privilegeObj.portal.admin.manageServers&&b.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&b.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&b.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.publisher.publishFeatures&&b.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&
b.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&b.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&b.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&b.push("portal:publisher:publishDynamicImagery");!0===this.privilegeObj.portal.publisher.publishServerServices&&b.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&
b.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&b.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&b.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&b.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.user.createGroup&&b.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&
b.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&b.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.invitePartneredCollaborationMembers&&b.push("portal:user:invitePartneredCollaborationMembers");!0===this.privilegeObj.portal.user.addExternalMembersToGroup&&b.push("portal:user:addExternalMembersToGroup");!0===this.privilegeObj.portal.user.createItem&&b.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&b.push("portal:user:shareToGroup");
!0===this.privilegeObj.portal.user.shareToOrg&&b.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&b.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&b.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&b.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&b.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&b.push("portal:user:viewOrgItems");
!0===this.privilegeObj.portal.user.viewOrgGroups&&b.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&b.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&b.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&b.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&b.push("features:user:manageVersions");!0===this.privilegeObj.features.user.editIndoorsSpaces&&b.push("features:user:editIndoorsSpaces");
!0===this.privilegeObj.opendata.user.openDataAdmin&&b.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&b.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&b.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&b.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&b.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&b.push("premium:user:geoenrichment");
!0===this.privilegeObj.premium.user.demographics&&b.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&b.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&b.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&b.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.marketplace.admin.purchase&&b.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&
b.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&b.push("marketplace:admin:startTrial");!0===this.privilegeObj.premium.publisher.createNotebooks&&b.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&b.push("premium:publisher:scheduleNotebooks");!0===this.privilegeObj.premium.publisher.publishNotebooks&&b.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&
b.push("premium:publisher:createAdvancedNotebooks");return b};return f}(g["default"])})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports","tslib"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});B.LevelAwareInfo=void 0;D="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");var c=a.__spreadArray(["features:user:edit"],
D);B.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB",FACILITATOR:"iCCCCCCCCCCCCCCC",PRIVILEGES:{iAAAAAAAAAAAAAAA:D,iBBBBBBBBBBBBBBB:c,iCCCCCCCCCCCCCCC:a.__spreadArray("portal:admin:createUpdateCapableGroup portal:user:invitePartneredCollaborationMembers portal:user:addExternalMembersToGroup portal:publisher:publishFeatures portal:publisher:publishTiles portal:publisher:publishServerServices portal:user:createGroup portal:user:createItem portal:user:joinNonOrgGroup portal:user:shareGroupToOrg portal:user:shareGroupToPublic portal:user:shareToGroup portal:user:shareToOrg portal:user:shareToPublic portal:user:viewOrgUsers portal:user:viewOrgItems portal:user:viewOrgGroups premium:user:geoenrichment premium:user:spatialanalysis premium:publisher:geoanalytics premium:publisher:rasteranalysis portal:publisher:bulkPublishFromDataStores portal:publisher:enumerateDataStores portal:publisher:registerDataStores".split(" "),
c)}},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};a=function(){return function(){this.SYSTEM_ROLES=B.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=B.LevelAwareInfo.LICENSE_LEVELS}}();B["default"]=a})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../utils/formatters ../../utils/strings ../../../tsutils/declareDecorator".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);return function(){function b(d,q){this.templateString=c["default"];this.hide=r["default"].hide;this.show=r["default"].show;this.firstChar=r["default"].firstChar;this.stripHTML=r["default"].stripHTML;this.empty=r["default"].empty;this.cssClasses="";this.size="50";this.letterSize="4";this.tooltipClass=
"tooltip";this.tooltipId="";this._viewBoxSize="65"}b.prototype.postMixInProperties=function(){var d;this.inherited(arguments);this._group=new e["default"](a.__assign(a.__assign({},this.group),{portal:this.portal}));this._group.fillColor=this._group.id?"#"+this._group.id.substr(this._group.id.length-6):k["default"].stringToHex(this._group.title);this._group.useLetter=!(null===(d=this._group.title.charAt(0))||void 0===d||!d.match(/^\w+$/));this._group.useLetter&&(this._viewBoxSize=this.size);this.tooltipId=
"group-icon-"+(this._group.id||Date.now())};b.prototype.postCreate=function(){var d=this;this._img.addEventListener("error",function(){l["default"].hideNode(d._img);d._svg.classList.remove("hide")})};return b=a.__decorate([f["default"](g["default"],h["default"])],b)}()})},"arcgisonline/pages/utils/a11y":function(){define(["require","exports"],function(D,B){function a(h){var g,e,l,r=null!==(g=null===h||void 0===h?void 0:h.parent)&&void 0!==g?g:document.body;g=null!==(e=null===h||void 0===h?void 0:
h.id)&&void 0!==e?e:"a11y-live-region";h=null!==(l=null===h||void 0===h?void 0:h.mode)&&void 0!==l?l:"polite";l=r.querySelector("#"+g);l||(l=document.createElement("div"),l.id=g,l.classList.add("screen-readers-only"),l.setAttribute("role","alert"),l.setAttribute("aria-live",h),l.setAttribute("aria-atomic","true"),l.textContent="",r.appendChild(l));return l}function c(h,g){var e=document.body.querySelector("#"+(g?g:"a11y-live-region"));e&&(e.textContent=h)}Object.defineProperty(B,"__esModule",{value:!0});
B.postToLiveRegion=B.setupLiveRegion=void 0;B.setupLiveRegion=a;B.postToLiveRegion=c;B["default"]={setupLiveRegion:a,postToLiveRegion:c}})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string dojo/date/locale dojo/_base/kernel ../../esriGeowConfig ../../sharing/util dojo/i18n!../../nls/arcgisonline".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b){function d(q){return f["default"].request({url:k["default"].restBaseUrl+
"community/users/"+q.username+"/notifications/"+q.id+"/delete"},{usePost:!0})}c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);return{fetchNotifications:function(q,m){var n=q.username||q.email;return n?f["default"].request({url:k["default"].restBaseUrl+"community/users/"+n+"/notifications"}).then(function(t){return(t.notifications||[]).map(function(z){var w=
z.received,y=z.id,x=r["default"].locale?r["default"].locale.substring(0,2):"en";z&&z.received&&z.id?(w={date:"en"===x?c["default"](w).fromNow():l["default"].format(new Date(w),{formatLength:"medium"}),id:y,text:""},"webapp_not_copied"===z.type&&m.isPortal&&(z.type="webapp_not_copied_portal"),b["default"].notifications.types[z.type]&&(z.data.baseUrl=k["default"].baseUrl,w.text=e["default"].substitute(b["default"].notifications.types[z.type],z.data)),"message_received"===z.type&&z.data&&z.data.message&&
(w.text=z.data.message),z=w.text&&w):z=null;return z}).filter(function(z){return z})}):(n=new g["default"],n.resolve([]),n)},deleteNotifications:function(q,m){var n=m.map(function(t){return{username:q.username,id:t}}).map(d);return h["default"](n)}}})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig esri/lang esri/request ../../sharing/util dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string dojo/dom-construct dojo/dom-class dojo/dom-attr arcgisonline/pages/pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);return function(){function w(){}w.notebookServerConfigured=function(){var y,x;if(c["default"].self&&c["default"].self.isPortal)return c["default"].notebookServerEnabled&&
c["default"].self.supportsHostedNotebooks?!0:!1;var A=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(y=c["default"].self.subscriptionInfo)||void 0===y?void 0:y.type);return c["default"].notebookServerEnabled&&(!A||-1!==((null===(x=c["default"].self)||void 0===x?void 0:x.allowedBetaFeatures)||[]).indexOf("notebooks"))};w.closeNotebook=function(y,x){var A=x.split("/"),v=A[A.length-3],u=A[A.length-1];v&&u&&w.notebookRequest(y+"/admin/system/containers/"+v+"/notebooks",
"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){var E;if(null===(E=C.selectedNotebooks)||void 0===E?0:E.length)C=C.selectedNotebooks.filter(function(F){return F.FileName===u}),C.length&&w.closeNotebookRequest(y,v,C[0].id)})};w.closeNotebookRequest=function(y,x,A){return w.notebookRequest(y+"/admin/system/containers/"+x+"/notebooks/"+A+"/closeNotebook","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookServer=function(){var y=new l["default"];(c["default"].portal||
c["default"].self).isPortal?c["default"].userInfo?c["default"].portal.getFederatedServers().then(function(x){h["default"].isDefined(x)&&h["default"].isDefined(x.servers)&&h["default"].isDefined(x.servers.length)?(x=x.servers.filter(function(A){return"ARCGIS_NOTEBOOK_SERVER"===A.serverType&&"NotebookServer"===A.serverFunction}),x.length?(x=x[0],x.adminContext="/admin",y.resolve(x)):y.resolve(null)):y.resolve(null)},function(x){y.resolve(null)}):y.resolve(null):e["default"].request({url:c["default"].restBaseUrl+
"/portals/self/urls"}).then(function(x){var A,v;(x=null===(v=null===(A=null===x||void 0===x?void 0:x.urls)||void 0===A?void 0:A.notebooks)||void 0===v?void 0:v.https)?y.resolve({url:"https://"+x,adminContext:""}):y.resolve(null)},function(x){y.resolve(null)});return y};w.notebooksBetaFormatter=function(y){return y};w.buildSelfSignedErrorMessage=function(y,x,A){y.messageHTML="\n      \x3ch4\x3e\n        "+(A?z["default"].notebookViewer.openNotebookServerCertificateError:z["default"].notebookViewer.openNotebookCertificateError)+
"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        "+z["default"].notebookViewer.openNotebookCertificateErrorDescription+"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          "+z["default"].notebookViewer.openNotebookCertificateErrorStep1+'\n          \x3ca href\x3d"'+(x.url+x.adminContext)+'" target\x3d"_blank" \x3e\n            '+(x.url+x.adminContext)+"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e"+z["default"].notebookViewer.openNotebookCertificateErrorStep2+"\x3c/li\x3e\n        \x3cli\x3e"+
z["default"].notebookViewer.openNotebookCertificateErrorStep3+"\x3c/li\x3e\n      \x3c/ol\x3e"};w.getNotebookServerMachines=function(y){var x=new l["default"],A=[],v={useJsonFormatParam:!0,useCredentials:!0};w.notebookRequest(y+"/admin/machines/","GET",null,v).then(function(u){u=(null===u||void 0===u?void 0:u.machines)||[];u.length?(u.forEach(function(C){var E=new l["default"];k["default"]({hardware:w.getNotebookServerMachineHardware(y,C,v),health:w.getNotebookServerMachineHealth(y,C,v)}).then(function(F){E.resolve({machineName:C.machineName,
hardware:F.hardware,health:F.health})});A.push(E)}),k["default"](A).then(function(C){x.resolve(C)})):x.resolve([])});return x};w.getNotebookServerMachineHardware=function(y,x,A){var v=new l["default"];w.notebookRequest(y+"/admin/machines/"+x.machineName+"/hardware","GET",null,A).then(function(u){v.resolve(u)},function(u){v.resolve({error:u})});return v};w.getNotebookServerMachineHealth=function(y,x,A){var v=new l["default"];w.notebookRequest(y+"/admin/machines/"+x.machineName+"/status","GET",null,
A).then(function(u){v.resolve(u)},function(u){v.resolve({error:u})});return v};w.getNotebookServerOS=function(y){var x=new l["default"],A={useJsonFormatParam:!0,useCredentials:!0};w.notebookRequest(y+"/admin/machines/","GET",null,A).then(function(v){((null===v||void 0===v?void 0:v.machines)||[]).length?w.notebookRequest(y+"/admin/machines/"+v.machines[0].machineName+"/hardware","GET",null,A).then(function(u){u=-1!==(u.os||"").toLowerCase().indexOf("windows")?"windows":"linux";x.resolve(u)},function(u){x.reject(u)}):
x.reject()});return x};w.getNotebookRuntimes=function(y){var x=new l["default"];w.getNotebookServer().then(function(A){null!==A?w.getNotebookRuntimesBase(A.url).then(function(v){y?x.resolve({runtimes:v.runtimes,server:A}):x.resolve(v.runtimes)},function(v){x.reject(v)}):x.reject()});return x};w.getNotebookRuntimesBase=function(y){return w.notebookRequest(y+"/admin/notebooks/runtimes","GET",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookRuntimeInfo=function(y,x){var A=this,v=new l["default"];
y&&x?this.getNotebookRuntimes(!0).then(function(u){var C=u.runtimes.filter(function(E){return E.name.toLowerCase()===y.toLowerCase()&&E.version.toLowerCase()===x.toLowerCase()});1!==C.length?v.reject():A.notebookRequest(u.server.url+"/admin/notebooks/runtimes/"+C[0].id+"/manifest","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(E){v.resolve(E)},function(E){v.reject(E)})},function(u){v.reject(u)}):v.reject();return v};w.startNotebookServerPoller=function(){return window.setInterval(function(){w.getNotebookServerInfo()},
6E5)};w.getNotebookServerInfo=function(){var y=new l["default"];w.getNotebookServer().then(function(x){null!==x?w.pingNotebookServer(x.url).then(function(A){y.resolve(A)},function(A){y.reject(A)}):y.reject()});return y};w.pingNotebookServer=function(y){var x=new l["default"];w.notebookRequest(y+"/rest/info","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(A){x.resolve(A)},function(A){x.reject(A)});return x};w.getSampleNotebooksGroup=function(){var y=new l["default"],x=c["default"].self&&
c["default"].self.isPortal?"esri sample notebooks":"arcgis sample notebooks";e["default"].request({url:c["default"].restBaseUrl+"community/groups",content:{q:"title:("+x+') AND owner:"esri_notebook"'}}).then(function(A){A=(A.results||[]).filter(function(v){return(v.title||"").toLowerCase()===x});1===A.length?y.resolve({id:A[0].id}):y.resolve({id:null})},function(A){y.resolve({id:null})});return y};w.getSampleNotebooksUrl=function(){var y=new l["default"];w.getSampleNotebooksGroup().then(function(x){x.id&&
y.resolve(c["default"].baseUrl+"group.html?id\x3d"+x.id+"#content")});return y};w.getSampleNotebooks=function(){var y=new l["default"];w.getSampleNotebooksGroup().then(function(x){x.id?e["default"].request({url:c["default"].restBaseUrl+"content/groups/"+x.id}).then(function(A){y.resolve({items:(A.items||[]).filter(function(v){return"notebook"===(v.type||"").toLowerCase()})})},function(A){y.resolve({items:[]})}):y.resolve({items:[]})});return y};w.getAllNotebooks=function(y){var x=new l["default"];
w.notebookRequest(y+"/admin/notebooks","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(A){x.resolve(A)},function(A){x.reject({error:A})});return x};w.getNotebookServerDirectories=function(y){var x=new l["default"];w.notebookRequest(y+"/admin/system/directories","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(A){x.resolve(A)},function(A){x.resolve({error:A})});return x};w.deleteDataDirectory=function(y,x){var A=new l["default"];w.notebookRequest(y+"/admin/system/directories/"+
x+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){A.resolve(v)},function(v){A.resolve({error:v})});return A};w.deleteNotebookRuntime=function(y,x){var A=new l["default"];w.notebookRequest(y+"/admin/notebooks/runtimes/"+x+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){A.resolve(v)},function(v){A.resolve({error:v})});return A};w.getAllContainers=function(y){var x=new l["default"],A={allUsers:c["default"].userRole.isAdmin()};
w.notebookRequest(y+"/admin/system/containers","GET",A,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){x.resolve(v)},function(v){x.resolve({error:v})});return x};w.terminateContainer=function(y,x){var A=new l["default"];w.notebookRequest(y+"/admin/system/containers/"+x+"/terminateContainer","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){A.resolve(v)},function(v){A.resolve({error:v})});return A};w.getNotebookServerLogs=function(y,x){var A=new l["default"];w.notebookRequest(y+
"/admin/logs/query","GET",x,{useJsonFormatParam:!0,useCredentials:!0}).then(function(v){A.resolve(v)},function(v){A.resolve({error:v})});return A};w.deleteNotebookServerLogs=function(y){var x=new l["default"];w.notebookRequest(y+"/admin/logs/clean","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(A){x.resolve(A)},function(A){x.reject({error:A})});return x};w.createNotebookRuntimeProperties=function(y,x,A){void 0===A&&(A=null);A=A||x.value;y=y.filter(function(v){return v.id===A})[0];
return JSON.stringify({notebookRuntimeName:y.name,notebookRuntimeVersion:y.version})};w.formatNotebookRuntimeVersion=function(y){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[y]||y};w.showRuntimeInfo=function(y,x,A){var v=A.target;"runtime-button"===(null===v||void 0===v?void 0:v.name)&&(v.disabled=!0);A.stopPropagation();A.preventDefault();y=y||m["default"].get(A.currentTarget,"data-runtime-name");x=x||m["default"].get(A.currentTarget,"data-runtime-version");
var u=y+(x?" - "+w.formatNotebookRuntimeVersion(x):""),C=n["default"].createSpecifiedDialog(t["default"]);q["default"].add(C._dialog.domNode,"notebook__runtime-info-dialog");w.getNotebookRuntimeInfo(y,x).then(function(E){E=w.buildRuntimeInfoTable(E,u);C.show({title:u,content:E})},function(E){C.show({title:z["default"].generalDlg.errorDlgTitle,message:z["default"].notebookViewer.tabContent.info.runtimeInfoError})});f["default"].once(C,"hide",function(){C.destroyRecursive();"runtime-button"===(null===
v||void 0===v?void 0:v.name)&&(v.disabled=!1)})};w.buildRuntimeInfoTable=function(y,x){var A=d["default"].create("div",null);if((y.libraries||[]).length){d["default"].create("p",{innerHTML:b["default"].substitute(z["default"].notebookViewer.tabContent.info.runtimeMessage,[x])},A);var v=d["default"].create("table",{"class":"table"},A),u=d["default"].create("thead",null,v);u=d["default"].create("tr",null,u);d["default"].create("th",{innerHTML:z["default"].notebookViewer.tabContent.info.name},u);d["default"].create("th",
{innerHTML:z["default"].notebookViewer.tabContent.info.version},u);var C=d["default"].create("tbody",null,v);y.libraries.forEach(function(E){var F=d["default"].create("tr",null,C);d["default"].create("td",{innerHTML:E.name},F);d["default"].create("td",{innerHTML:E.version},F)})}else d["default"].create("p",{innerHTML:b["default"].substitute(z["default"].notebookViewer.tabContent.info.runtimeMessageNoManifest,[x])},A);return A.outerHTML};w.getContainerLogs=function(y,x){return w.notebookRequest(y+
"/admin/system/containers/"+x+"/logs","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getContainerInformation=function(y,x){var A=new l["default"],v={useJsonFormatParam:!0,useCredentials:!0};k["default"]({containerInfo:w.notebookRequest(y+"/admin/system/containers/"+x,"GET",null,v),containerStats:w.notebookRequest(y+"/admin/system/containers/"+x+"/statistics","GET",null,v)}).then(function(u){A.resolve(u)},function(u){A.reject(u)});return A};w.createRuntimeSelect=function(y,x,A,v){void 0===
v&&(v=!1);y=y||[];y.sort(function(E,F){return F.esriProvidedRuntime-E.esriProvidedRuntime});var u=c["default"].userRole.canCreateAdvancedNotebooks();u||(y=y.filter(function(E){return!E.requiresAdvancedPrivileges}));var C={esriProvided:0,custom:0};y.forEach(function(E){var F={value:v?w.createNotebookRuntimeProperties(y,null,E.id):E.id,innerHTML:E.name+(E.version?" - "+w.formatNotebookRuntimeVersion(E.version):"")};w.formatNotebookRuntimeVersion(x)!==w.formatNotebookRuntimeVersion(E.version)&&E.esriProvidedRuntime||
(E.esriProvidedRuntime?(C.esriProvided++,u?E.requiresAdvancedPrivileges&&!E.supportsGPU&&(F.selected=""):F.selected=""):C.custom++,d["default"].create("option",F,A))});return C};w.showNotebookPreview=function(y,x,A){var v=new l["default"];x=c["default"].restBaseUrl+"content/items/"+x+"/resources/"+A;e["default"].request({url:x,content:{"request.preventCache":+new Date}},{useProxy:e["default"].shouldUseProxy(x)}).then(function(u){if(u.html){var C=y.contentWindow.document;C.open();C.write(u.html);C.close();
v.resolve({success:!0})}else v.resolve({success:!1,error:u.error})},function(u){v.resolve({success:!1,error:u})});return v};w.canScheduleNotebooks=function(y,x){var A=new l["default"],v="Notebook"===(null===x||void 0===x?void 0:x.type),u=w.notebookServerConfigured();v&&u&&w.getNotebookRuntimes().then(function(C){var E,F,G,H=null===(E=x.properties)||void 0===E?void 0:E.notebookRuntimeName,J=w.formatNotebookRuntimeVersion(null===(F=x.properties)||void 0===F?void 0:F.notebookRuntimeVersion);C=(C||[]).some(function(I){return H===
I.name&&J===w.formatNotebookRuntimeVersion(I.version)&&"1.0"!==J&&"2.0"!==J});(null===(G=null===y||void 0===y?void 0:y.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===x||void 0===x?0:x.isOwner)&&C&&document.body.classList.add("can-schedule-notebooks");A.resolve(!0)},function(C){A.resolve(!1)});return A};w.getNotebooksInContainer=function(y,x){return w.notebookRequest(x+"/admin/system/containers/"+y+"/notebooks","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};w.getNotebookDataAccessUrl=
function(y){return e["default"].request({url:c["default"].restBaseUrl+"content/users/"+y+"/generateDirectAccessUrl",content:{storeType:"notebookWorkspace"}},{usePost:!0})};w.getParametersJson=function(y){return new Promise(function(x,A){e["default"].request({url:y}).then(function(v){v=a.__spreadArray(a.__spreadArray([],v.inputs.map(function(u){u.direction="input";return u})),v.outputs.map(function(u){u.direction="output";return u}));v.forEach(function(u,C){u.idx=C});x({initialized:!0,parameters:v})},
function(v){404===v.code?x({initialized:!1,parameters:[]}):A(v)})})};w.checkIfWebToolsPublished=function(y){var x=c["default"].restBaseUrl+"/content/items/"+y+"/relatedItems?relationshipType\x3dNotebook2WebTool";return new Promise(function(A,v){e["default"].request({url:x}).then(function(u){u.error&&v(u.error.message);return 0<u.total?A(u.relatedItems[0]):A(null)},function(u){v(u)})})};w.publishAsWebtool=function(y,x){return w.notebookRequest(y+"/admin/services/createService","POST",x,{useJsonFormatParam:!0,
useCredentials:!0})};w.getOpenNotebookToken=function(){return g["default"]({url:e["default"].getSecureUrl(c["default"].restBaseUrl+"oauth2/platformSelf"),content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0}).then(function(y){return y.token},function(){return""})};w.notebookRequest=function(y,x,A,v){v=v||{};var u={},C={"X-Requested-With":null},E=c["default"].userInfo?
c["default"].userInfo.credential.token:null;if(null===A||void 0===A?0:A.token)E=A.token,delete A.token;v.useJsonFormatParam&&(u.f="json");"GET"===x&&(u=a.__assign(a.__assign({},u),A));v.bypassCustomHeaders||(C["X-Esri-Authorization"]="Bearer "+E,v.useJsonBody&&(C["Content-Type"]="application/json"));v.contentType&&(C["Content-Type"]=v.contentType);u={data:v.useJsonBody?A?JSON.stringify(A):null:A,method:x,handleAs:"json",headers:Object.keys(C).length?C:null,query:Object.keys(u).length?u:null,preventCache:!1===
v.preventCache?!1:!0,withCredentials:v.bypassCustomHeaders?!1:!0};C={url:y};"multipart/form-data"===v.contentType?C.form=A:C.content=A;return v.useProxy?e["default"].request(C,{usePost:"POST"===x,useProxy:v.useProxy}):r["default"](y,u)};return w}()})},"arcgisonline/sharing/geow/Account":function(){define("require exports tslib dijit/registry dojo/_base/kernel dojo/Deferred dojo/json dojo/promise/all dojo/on dojo/request/iframe dojo/sniff dojo/data/util/sorter dojo/when dojo/_base/url esri/config esri/lang esri/request esri/IdentityManager ../../pages/utils/promises ../../pages/utils/signin ../../pages/utils/storage ../../pages/utils/enterprise ../../esriGeowConfig ../util ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);
v=a.__importDefault(v);u=a.__importDefault(u);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);return function(){function G(){}G.loadMapSettings=function(H){this.getSelf(function(J){var I;if(J){J.allSSL&&(v["default"].allSSL=J.allSSL);n["default"].isDefined(v["default"].allSSL)&&v["default"].allSSL&&"http:"===location.protocol&&(window.location=u["default"].getSecureUrl(location.href));J.basemapGalleryGroupQuery&&(v["default"].basemapGalleryGroupQuery=J.basemapGalleryGroupQuery);
J.templatesGroupQuery&&(v["default"].templatesGroupQuery=J.templatesGroupQuery);J.defaultBasemap&&(v["default"].defaultBasemap=J.defaultBasemap);J.defaultExtent&&(v["default"].defaultExtent=J.defaultExtent);J.symbolSetsGroupQuery&&(v["default"].symbolSetsGroupQuery=J.symbolSetsGroupQuery);J.staticImagesUrl&&(v["default"].staticImagesUrl=J.staticImagesUrl);J.layerTemplatesGroupQuery&&(v["default"].layerTemplatesGroupQuery=J.layerTemplatesGroupQuery);J.colorSetsGroupQuery&&(v["default"].colorSetsGroupQuery=
J.colorSetsGroupQuery);J.helpBase&&(v["default"].help=J.helpBase,v["default"].helpBase=J.helpBase);J.helpMap&&J.helpMap.m&&(v["default"].helpMap=J.helpMap.m);J.urlKey&&(v["default"].urlKey=J.urlKey);var R=void 0;if(J.authorizedCrossOriginDomains&&0<J.authorizedCrossOriginDomains.length)for(R=0;R<J.authorizedCrossOriginDomains.length;R++){var O=J.authorizedCrossOriginDomains[R];n["default"].isDefined(O)&&0<O.length&&m["default"].defaults.io.corsEnabledServers.push({host:O,withCredentials:!0})}y["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(J);
J.isPortal&&-1===(null===(I=u["default"]._cookies)||void 0===I?void 0:I.arcgis_auth)&&delete u["default"]._cookies.arcgis_auth;I=!1===v["default"].isMultiTenant;O=(R=u["default"].getUser())?!0:!1;var P=window.location.pathname.toLowerCase(),L=-1!==P.indexOf(v["default"].signin),K=-1!==P.indexOf("troubleshoot.html");P=-1!==P.indexOf("setup.html");I||!R||"account_admin"!==R.role&&"org_admin"!==R.role||!J.id||J.urlKey||P||(window.location.href=v["default"].baseUrl+"setup.html");I?(!J.access||"private"!==
J.access||O||L||K||(window.location.href=""+u["default"].getSecureUrl()+v["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href)),J.isPortal&&"singletenant"===J.portalMode&&("7080"===location.port||"7443"===location.port)&&u["default"].checkForIAA().then(function(Q){if(null===Q||void 0===Q?0:Q.hasIAA)if(J.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=u["default"].getHttpUrl(v["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),
!J.portalHostname.match(/:7080\//)&&80!==v["default"].self.httpPort&&443!==v["default"].self.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){Q=new q["default"](location.href);var W=Q.path.indexOf("/home/");W=Q.path.substring(W+6);Q=n["default"].isDefined(Q.query)?"?"+Q.query:"";window.location.href=""+u["default"].getHttpUrl("http://"+J.portalHostname)+"/home/"+W+Q}})):J.id||!J.urlKey||O||L||K||(window.location.href=""+v["default"].baseUrl.replace("http:","https:")+
v["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href))}H&&H(J)})};G.getSelf=function(H,J,I){var R=this;if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,H,J),75);else{var O=v["default"].restBaseUrl+"/portals/helpmap?culture\x3d"+h["default"].locale,P=v["default"].restBaseUrl+"portals/self?culture\x3d"+h["default"].locale;I&&(O+="\x26token\x3d"+I,P+="\x26token\x3d"+I);var L=v["default"].restBaseUrl+"/community/self";L=(I=z["default"].findCredential(v["default"].restBaseUrl))?
{url:L,content:{returnUserLicensedItems:!0,token:I.token}}:null;O=(null===v["default"]||void 0===v["default"]?void 0:v["default"].self)||w["default"].eachAlways({helpMapResult:u["default"]._requestWithAppHandlers({url:O}),selfResult:u["default"]._requestWithAppHandlers({url:P}),communitySelfResult:I?u["default"]._requestWithAppHandlers(L):w["default"].resolve(null)}).then(function(K){var Q,W,ba;if(null===(Q=K.selfResult)||void 0===Q?0:Q.error)throw K.selfResult.error;var S=K.selfResult.value;if(null===
(W=K.helpMapResult)||void 0===W?0:W.value)S.helpMap=K.helpMapResult.value.helpMap;if(null===(ba=K.communitySelfResult)||void 0===ba?0:ba.value)S.communitySelf=K.communitySelfResult.value;return S.user?z["default"].checkAppAccess(v["default"].restBaseUrl,R.getAppClientId()).always(function(X){return R.setupAfterSelf(S,!(null===X||void 0===X||!X.viewOnly)).then(function(aa){R._isRequestingSelf=!1;10>=f["default"]("ie")&&R.throwawayIEPostFix();return aa})}):R.setupAfterSelf(S).then(function(X){R._isRequestingSelf=
!1;10>=f["default"]("ie")&&R.throwawayIEPostFix();return X})},function(K){throw K;});this._isRequestingSelf=!v["default"].self;return d["default"](O,H,J)}};G.getAppClientId=function(){var H=-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline";try{return x["default"].getLocalStorageItem("portalAppClientId")||x["default"].getSessionStorageItem("portalAppClientId")||H}catch(J){return H}};G.setupAfterSelf=function(H,J){var I=this,R=new g["default"];H.isPortal?this.getPortalAppSettings().then(function(O){v["default"].self=
H;if(O&&!O.code&&(null===O||void 0===O?0:O.portalConfigProperties)){var P=A["default"].copyPortalConfigProperties(O.portalConfigProperties,v["default"]);Object.keys(P).forEach(function(L){v["default"][L]=P[L]})}I.setupUserRole(H,J);R.resolve(H)},function(){v["default"].self=H;I.setupUserRole(H,J);R.resolve(H)}):(v["default"].self=H,this.setupUserRole(H,J),R.resolve(H));return R};G.getPortalAppSettings=function(){return u["default"].request({url:v["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}})};
G.setupUserRole=function(H,J){var I,R;v["default"].userInfo=H.user&&a.__assign(a.__assign({},v["default"].userInfo),H.user);if(null===(I=v["default"].userInfo)||void 0===I?0:I.orgId)v["default"].userInfo.accountId=v["default"].userInfo.orgId;if(null===(R=H.user)||void 0===R?0:R.role)v["default"].userRole=new C["default"]({id:H.user.roleId?H.user.roleId:H.user.role,role:H.user.role,privileges:H.user.privileges?H.user.privileges:void 0,viewOnly:J}),J&&(v["default"].self.user.role=v["default"].userInfo.role=
H.user.role=v["default"].userRole.baseRole,v["default"].self.user.roleId=v["default"].userInfo.roleId=H.user.roleId=v["default"].userRole.id,v["default"].self.user.privileges=v["default"].userInfo.privileges=H.user.privileges=v["default"].userRole.privileges,v["default"].self.user.level=v["default"].userInfo.level=H.user.level="1");this.normalizeOrgIdAndRole()};G.normalizeOrgIdAndRole=function(){n["default"].isDefined(v["default"].self.user)&&(n["default"].isDefined(v["default"].self.user.orgId)&&
(v["default"].self.user.accountId=v["default"].self.user.orgId),n["default"].isDefined(v["default"].self.user.role)&&(v["default"].self.user.role=u["default"].normalizeOrgRole(v["default"].self.user.role)));n["default"].isDefined(v["default"].userInfo)&&(n["default"].isDefined(v["default"].userInfo.orgId)&&(v["default"].userInfo.accountId=v["default"].userInfo.orgId),n["default"].isDefined(v["default"].userInfo.role)&&(v["default"].userInfo.role=u["default"].normalizeOrgRole(v["default"].userInfo.role)))};
G.throwawayIEPostFix=function(){var H=document.createElement("form");H.encoding="multipart/form-data";H.method="POST";var J=document.createElement("input");J.type="hidden";J.name="f";J.value="json";H.appendChild(J);J=document.createElement("input");J.type="hidden";J.name="q";J.value="*";H.appendChild(J);J=document.createElement("input");J.type="hidden";J.name="callback.html";J.value="textarea";H.appendChild(J);k["default"].post(v["default"].restBaseUrl+"community/users",{form:H,handleAs:"json"}).then(function(){}).otherwise(function(){})};
G.updateAccount=function(H,J,I){var R;if(null!==u["default"].getUser()){var O="";H.defaultBasemap&&(O=e["default"].stringify(H.defaultBasemap));var P=0<(null===(R=H.metadataFormats)||void 0===R?void 0:R.length)?H.metadataFormats.join(","):"",L=!!v["default"].userRole,K=v["default"].userRole.isAdmin(),Q=v["default"].self&&(v["default"].self.canListApps||v["default"].self.canListData),W=L&&(K||v["default"].userRole.canManageCredits());R=L&&(K||v["default"].userRole.canManageSecurity());var ba=L&&(K||
v["default"].userRole.canManageWebsite());Q=Q&&L&&(K||v["default"].userRole.canManageMarketplace());L=L&&(K||v["default"].userRole.canManageUtilityServices());K=ba||R||L||W;W={clearEmptyFields:!0};ba&&(W.name=H.name,W.description=H.description,W.culture=H.culture,W.cultureFormat=H.cultureFormat,W.region=H.region,W.featuredItemsGroupQuery=H.featuredItemsGroupQuery,W.thumbnail=H.thumbnail,W.basemapGalleryGroupQuery=H.basemapGalleryGroupQuery,W.defaultBasemap=O,W.defaultExtent=H.defaultExtent?e["default"].stringify(H.defaultExtent):
"",W.featuredGroups=e["default"].stringify(H.featuredGroups),W.homePageFeaturedContent=H.homePageFeaturedContent,W.homePageFeaturedContentCount=H.homePageFeaturedContentCount,W.rotatorPanels=e["default"].stringify(H.rotatorPanels),W.showHomePageDescription=H.showHomePageDescription,W.templatesGroupQuery=H.templatesGroupQuery,W.analysisLayersGroupQuery=H.analysisLayersGroupQuery,W.galleryTemplatesGroupQuery=H.galleryTemplatesGroupQuery,W.stylesGroupQuery=H.stylesGroupQuery,W.bingKey=H.bingKey,W.canShareBingPublic=
H.canShareBingPublic,W.backgroundImage=H.backgroundImage,W.units=H.units,W.metadataEditable=H.metadataEditable,W.metadataFormats=P,W.useVectorBasemaps=H.useVectorBasemaps);L&&H.helperServices&&(W.geocodeService=e["default"].stringify(H.helperServices.geocode),W.printServiceTask=e["default"].stringify(H.helperServices.printTask),W.geometryService=e["default"].stringify(H.helperServices.geometry),W.routeServiceLayer=e["default"].stringify(H.helperServices.route),n["default"].isDefined(H.helperServices.asyncRoute)&&
(W.asyncRouteService=e["default"].stringify(H.helperServices.asyncRoute)),n["default"].isDefined(H.helperServices.closestFacility)&&(W.closestFacilityService=e["default"].stringify(H.helperServices.closestFacility)),n["default"].isDefined(H.helperServices.asyncClosestFacility)&&(W.asyncClosestFacilityService=e["default"].stringify(H.helperServices.asyncClosestFacility)),n["default"].isDefined(H.helperServices.serviceArea)&&(W.serviceAreaService=e["default"].stringify(H.helperServices.serviceArea)),
n["default"].isDefined(H.helperServices.asyncServiceArea)&&(W.asyncServiceAreaService=e["default"].stringify(H.helperServices.asyncServiceArea)),n["default"].isDefined(H.helperServices.syncVRP)&&(W.syncVRPService=e["default"].stringify(H.helperServices.syncVRP)),n["default"].isDefined(H.helperServices.asyncVRP)&&(W.asyncVRPService=e["default"].stringify(H.helperServices.asyncVRP)),n["default"].isDefined(H.helperServices.asyncLocationAllocation)&&(W.asyncLocationAllocationService=e["default"].stringify(H.helperServices.asyncLocationAllocation)),
n["default"].isDefined(H.helperServices.routingUtilities)&&(W.routingUtilitiesService=e["default"].stringify(H.helperServices.routingUtilities)),n["default"].isDefined(H.helperServices.traffic)&&(W.trafficService=e["default"].stringify(H.helperServices.traffic)),n["default"].isDefined(H.helperServices.asyncODCostMatrix)&&(W.asyncODCostMatrixService=e["default"].stringify(H.helperServices.asyncODCostMatrix)),u["default"].isPortal()&&(n["default"].isDefined(H.helperServices.analysis)&&(W.analysisService=
e["default"].stringify(H.helperServices.analysis)),n["default"].isDefined(H.helperServices.asyncGeocode)&&(W.asyncGeocodeService=e["default"].stringify(H.helperServices.asyncGeocode)),n["default"].isDefined(H.helperServices.geoenrichment)&&(W.geoenrichmentService=e["default"].stringify(H.helperServices.geoenrichment)),n["default"].isDefined(H.helperServices.hydrology)&&(W.hydrologyService=e["default"].stringify(H.helperServices.hydrology)),n["default"].isDefined(H.helperServices.orthomappingElevation)&&
(W.orthomappingElevationService=e["default"].stringify(H.helperServices.orthomappingElevation)),n["default"].isDefined(H.helperServices.elevation)&&(W.elevationService=e["default"].stringify(H.helperServices.elevation)),n["default"].isDefined(H.helperServices.elevationSync)&&(W.elevationSyncService=e["default"].stringify(H.helperServices.elevationSync)),n["default"].isDefined(H.helperServices.defaultElevationLayers)&&(W.elevation3DService=e["default"].stringify(H.helperServices.defaultElevationLayers))));
Q&&(W.orgUrl=H.orgUrl,W.orgEmail=H.orgEmail,W.orgPhone=H.orgPhone);R&&(W.access=H.access,W.allSSL=H.allSSL,W.commentsEnabled=H.commentsEnabled,W.canSharePublic=H.canSharePublic,W.canSearchPublic=H.canSearchPublic,W.urlKey=H.urlKey,W.canSignInIDP=H.canSignInIDP,W.canSignInArcGIS=H.canSignInArcGIS,W.useStandardizedQuery=H.useStandardizedQuery,W.mfaEnabled=H.mfaEnabled,W.mfaAdmins=e["default"].stringify(H.mfaAdmins),W.authorizedCrossOriginDomains=e["default"].stringify(H.authorizedCrossOriginDomains),
W.allowedOrigins=H.allowedOrigins,W.allowedRedirectUris=e["default"].stringify(H.allowedRedirectUris),W.updateUserProfileDisabled=H.updateUserProfileDisabled,W.eueiEnabled=H.eueiEnabled,W.contacts=e["default"].stringify(H.contacts||[]));K&&(W.portalProperties=e["default"].stringify(H.portalProperties));H=Object.keys(W);1===H.length&&"clearEmptyFields"===H[0]?null===J||void 0===J?void 0:J():(H=u["default"].getSecureUrl(v["default"].restBaseUrl)+"portals/self/update",u["default"].request({url:H,content:W},
{usePost:!0}).then(J.bind(this),I.bind(this)))}};G.checkUsernames=function(H,J,I){var R="";0<(null===H||void 0===H?void 0:H.length)&&(R=H.join(","));u["default"].request({url:v["default"].restBaseUrl+"community/checkUsernames",content:{usernames:R}},{usePost:!0}).then(J,I)};G.getPendingAccountUsers=function(H,J,I){if(null!==u["default"].getUser()){var R=1,O=10;H=n["default"].isDefined(J.sortField)?J.sortField:void 0;var P=n["default"].isDefined(J.sortOrder)?J.sortOrder:void 0,L=n["default"].isDefined(J.type)?
J.type:void 0;n["default"].isDefined(J.start)&&(R=J.start);n["default"].isDefined(J.num)&&(O=J.num);J=v["default"].restBaseUrl+"portals/self/invitations?start\x3d"+R+"\x26num\x3d"+O;H&&(J+="\x26sortField\x3d"+H);P&&(J+="\x26sortOrder\x3d"+P);L&&(J+="\x26type\x3d"+L);u["default"].request({url:J}).then(I.bind(this))}};G.getInvitation=function(H,J,I){null!==u["default"].getUser()&&u["default"].request({url:v["default"].restBaseUrl+"community/invitations/"+H}).then(J.bind(this),I)};G.acceptInvitation=
function(H,J,I){null!==u["default"].getUser()&&u["default"].request({url:v["default"].restBaseUrl+"community/invitations/"+H+"/accept",content:{invitationId:H}},{usePost:!0}).then(J.bind(this),I.bind(this))};G.updateUserRole=function(H,J,I,R){var O=null,P=u["default"].getUser();if(null!==P){O=P.accountId;var L=P.username||P.email;if(null!==O)if(L===H&&"account_admin"===P.role&&"account_admin"!==J){var K=new E["default"];r["default"].once(K._dialog,"hide",function(){K._dialog.destroyRecursive();K.destroyRecursive()});
K.onOkClick=function(){c["default"].byId("general-dialog").hide();I(null)};K.show(F["default"].common.errors.accountAdmin)}else u["default"].request({url:v["default"].restBaseUrl+"portals/self/updateUserRole",content:{user:H,role:J}},{usePost:!0}).then(I.bind(this),R.bind(this))}};G.deleteUser=function(H,J,I){null!==u["default"].getUser()&&u["default"].request({url:v["default"].restBaseUrl+"community/users/"+H+"/delete",content:{}},{usePost:!0}).then(J.bind(this),I.bind(this))};G.caseInsensitiveComparator=
function(H,J){H&&(H=H.toLowerCase());J&&(J=J.toLowerCase());return b["default"].basicComparator(H,J)};G.lastLoginComparator=function(H,J){var I,R=0===H||-1===H?void 0:H,O=0===J||-1===J?void 0:J,P=-1;(null===(I=v["default"].self)||void 0===I?0:I.isPortal)||!1===v["default"].isMultiTenant?P=b["default"].basicComparator(R,O):R===O?P=H===J?0:H<J?-1:1:R&&O&&H>J?P=1:R&&!O?P=1:!R&&O&&(P=-1);return P};G.getSupportedLanguages=function(H,J){return t["default"]({url:v["default"].restBaseUrl+"portals/languages",
content:{f:"json"},load:H,callbackParamName:"callback",error:J})};G.getSupportedRegions=function(H,J){return t["default"]({url:v["default"].restBaseUrl+"portals/regions",content:{f:"json",culture:h["default"].locale},load:H,callbackParamName:"callback",error:J})};G.getSupportedLanguagesAndRegions=function(){var H=new g["default"];l["default"]({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(J){H.resolve({languages:J.languages,regions:J.regions})},
function(J){H.resolve(J)});return H};G.displayedPortalNonSSLNotice=!1;return G}()})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig ./storage esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),function(D,B,a,c,h,g,e,l,r){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);return function(){function k(){}k.getPortalUrl=function(){var f,
b=c["default"].restBaseUrl.substring(0,c["default"].restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(f=c["default"].self)||void 0===f?0:f.portalHostname)b="https://"+c["default"].self.portalHostname;return b};k.setupOAuthInfo=function(f){var b={appId:k.getClientId(),portalUrl:k.getPortalUrl(),locale:l["default"].locale,popup:!1};f&&(b.forceLogin=f);f=new e["default"](b);k.esriId.registerOAuthInfos([f]);k.esriId.useSignInPage=!1};k.checkSignInStatus=function(){var f=new r["default"];
k.setupOAuthInfo(!1);var b=k.getPortalUrl()+"/sharing";k.esriId.checkSignInStatus(b).then(function(d){d&&(c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo||{}),{username:d.userId,token:d.token,credential:d}));f.resolve(d)},function(){f.resolve(null)});return f};k.getCredential=function(f,b){var d=new r["default"];k.setupOAuthInfo(f);var q=k.getPortalUrl()+"/sharing";k.esriId.getCredential(q,b).then(function(m){d.resolve(m)},function(){d.resolve(null)});return d};k.isValidReturnUrl=
function(f,b){return f?this.isValidPortalReturnUrl(b):this.isValidOnlineReturnUrl(b)};k.isValidOnlineReturnUrl=function(f){var b=decodeURI(f),d=k.getHostName(window.location.href);f=this.getHostName(b);var q=0===b.indexOf("http://")||0===b.indexOf("https://"),m=q&&f?f.lastIndexOf(".arcgis.com"):-1,n=q&&f?f.lastIndexOf(".esri.com"):-1,t=q&&f?f.lastIndexOf(d):-1;b=-1<b.indexOf("/sharing/proxy");m=-1<m&&m+11-1===f.length-1;n=-1<n&&n+9-1===f.length-1;d=-1<t&&t+d.length-1===f.length-1;return q&&f&&(m||
n||d)&&!b};k.isValidPortalReturnUrl=function(f){f=decodeURI(f);var b=k.getDomainName(window.location.hostname),d=k.getDomainName(this.getHostName(f));return(0===f.indexOf("http://")||0===f.indexOf("https://"))&&d&&d===b};k.getHostName=function(f){f=f.match(/:\/\/(.[^/:]+)/i);return null!==f&&1<f.length&&"string"===typeof f[1]&&0<f[1].length?f[1]:null};k.getDomainName=function(f){return f.substring(f.lastIndexOf(".",f.lastIndexOf(".")-1)+1)};k.getClientId=function(){try{return h["default"].getLocalStorageItem("portalAppClientId")||
h["default"].getSessionStorageItem("portalAppClientId")||"arcgisonline"}catch(f){return"arcgisonline"}};k.checkForOrgUserOnOnlineBaseHostAndRedirect=function(f){var b=c["default"].isDebug,d=f.isPortal,q=f.user,m=f.urlKey,n=f.customBaseUrl;q=null===q||void 0===q?void 0:q.orgId;f=window.location.host===f.portalHostname;var t=!!m,z="arcgisonline"===k.getClientId();!b&&!d&&q&&f&&t&&z&&(window.location.href=window.location.href.replace(window.location.host,m+"."+n))};k.esriId=g["default"];return k}()})},
"arcgisonline/pages/utils/enterprise":function(){define(["require","exports","tslib"],function(D,B,a){Object.defineProperty(B,"__esModule",{value:!0});var c="extentService footerLinks gcsBasemapService httpsDomains longTokenExpiration restrictOrganizationPageToAdmin searchArcGISOnlineEnabled showCreateDashboard showInAppLauncher sceneViewerEnabled surveyUrl tokenExpiration webAppBuilderEnabled configurePortalAGOEnv portalAGOConfigEnabled portalLivingAtlasConfigEnabled showSocialMediaLinks".split(" ");
B["default"]={copyPortalConfigProperties:function(h,g){if(!h)return g;var e=a.__assign({},g);c.forEach(function(l){void 0!==h[l]&&(e[l]=h[l])});return e}}})},"arcgisonline/sharing/geow/Geow":function(){define("require exports tslib ../../esriGeowConfig ../../telemetry ../../map/utils/deleteMapStorageNoFeedback ../util ./Community ../../pages/utils/storage dojo/Deferred dojo/dom-construct dojo/io-query dojo/topic dojo/_base/window esri/IdentityManager".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,
q,m){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);return function(){function n(){}n.generatetoken=function(t,z,w){var y=c["default"].restBaseUrl.replace("http:","https:")+"generatetoken",x=document.domain,A=x.split(".");1<A.length&&(x=A[A.length-2]+"."+A[A.length-1]);t.referer=
x;this._tokenExpiration=t.expiration;e["default"].postJson(t,y,z,w)};n.signup=function(t,z,w){var y=c["default"].restBaseUrl+"community/signup",x=document.domain,A=x.split(".");1<A.length&&(x=A[A.length-2]+"."+A[A.length-1]);t.referer=x;e["default"].postJson(t,y,z,w)};n.signin=function(t,z,w){this.generatetoken(t,n.signInHandler(t.username,z,w),w)};n.signInHandler=function(t,z,w,y,x){var A=new Date,v=new Date(A.setMinutes(A.getMinutes()+(this._tokenExpiration||120)));e["default"].getJson(e["default"].useSSL(c["default"].restBaseUrl+
"community/users/"+t+"?token\x3d"+y.token),function(u){u.culture&&(u.culture=u.culture.toLowerCase());var C={email:u.username,username:u.username,privacy:u.privacy,token:y.token,ssl:y.ssl,culture:u.culture,region:u.region,expires:v.getTime()};u.orgId&&u.role&&(C.accountId=u.orgId,C.role=u.role);c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo),C);if(u.preferredView&&null!==u.preferredView)e["default"].userPreferences({contentMode:u.preferredView},c["default"].contentModeCookieName);
else{var E=e["default"].userPreferences(null,c["default"].contentModeCookieName);if(null===E||void 0===E?0:E.contentMode){var F=f["default"].create,G=F("form",{method:"POST"},q["default"].body());F("input",{type:"hidden",name:"preferredView",value:E.contentMode},G);F("input",{type:"hidden",name:"clearEmptyFields",value:"false"},G);l["default"].updateProfile(G,function(){})}}C=a.__assign(a.__assign({},C),u);z&&z(C,x);d["default"].publish("onSignIn",[C])},w)};n.signInHandler2=function(t,z,w){z=c["default"].restBaseUrl+
"community/users/"+t.username+"?token\x3d"+t.token;w=new Date;var y=Number(t.expires_in),x=new Date(w.setSeconds(w.getSeconds()+Number(y))),A=t&&!!t.ssl;return e["default"].getJson(e["default"].useSSL(z)).then(n._hasSecurityQuestion.bind(n)).then(function(v){var u,C={email:v.username,username:v.username,privacy:v.privacy,token:t.token,culture:(null===(u=v.culture)||void 0===u?void 0:u.toLowerCase())||"",region:v.region,expires:x&&x.getTime()||null,persistent:t.persist?!0:void 0,allSSL:A};v.orgId&&
v.role&&(C.accountId=v.orgId,C.role=v.role);c["default"].userInfo=a.__assign(a.__assign({},c["default"].userInfo),C);v.preferredView&&e["default"].userPreferences({contentMode:v.preferredView},c["default"].contentModeCookieName);C=a.__assign(a.__assign({},C),v);d["default"].publish("onSignIn",[C]);return C})};n._hasSecurityQuestion=function(t){var z=new k["default"];t.validateUserProfile=!0;!t||t.idpUsername||"arcgisonly"!==t.userType&&"both"!==t.userType||!t.validateUserProfile?z.resolve(t):z=e["default"].request({url:c["default"].restBaseUrl+
"community/users/"+t.username+"/forgotPassword",content:{}}).then(function(w){w&&"enterprise"!==w.provider&&-1===w.securityQuestionIdx&&(t.noSecurityQuestion=!0);return t});return z};n.signout=function(t){var z,w,y=null===(z=c["default"].userInfo)||void 0===z?void 0:z.token;z=0===window.location.href.indexOf("http://");c["default"].userInfo=null;c["default"].userPreferences=null;m["default"].destroyCredentials();r["default"].removeSessionStorageItem("portalAppClientId");r["default"].removeLocalStorageItem("portalAppClientId");
g["default"]().then(function(){d["default"].publish("onSignOut",[])});var x;t&&(x={client_id:"arcgisonline",redirect_uri:t});y&&c["default"].self&&z&&(c["default"].self.isPortal||"enterprise"===(null===(w=c["default"].self.user)||void 0===w?void 0:w.provider))&&(x=a.__assign(a.__assign({},x||{}),{token:y}));t=t||window.location.href;t=e["default"].getSecureUrl(c["default"].restBaseUrl+"oauth2/signout");window.location.href=""+t+(x?"?"+b["default"].objectToQuery(x):"")};n.getSharedCookie=function(){var t=
m["default"],z={};t&&(t=(t._getAllCookies("esri_auth")||[]).map(function(w){return JSON.parse(w)}).filter(function(w){return!w.portalApp}),z=(null===t||void 0===t?0:t.length)?t.shift():{});return z};n._logCookieChange=function(t,z){var w=h["default"].init({config:t});!this._cookieChangeLogged&&(null===w||void 0===w?0:w.logEvent)&&(this._cookieChangeLogged=!0,w.logEvent({category:"cookie",label:"Organization changed",details:z?"Yes":"No"}))};n.setCookies=function(t,z){t.isPortal||c["default"].isDebug||
!t.urlKey||-1!==window.location.hostname.toLowerCase().indexOf(t.urlKey.toLowerCase())||z&&"arcgisonline"!==z||(window.location.href=window.location.href.replace(window.location.hostname,t.urlKey+"."+t.customBaseUrl))};return n}()})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(D,B,a,c,h){Object.defineProperty(B,"__esModule",{value:!0});c=a.__importDefault(c);h=a.__importDefault(h);D=function(){function g(){}g.init=
function(e,l){var r;if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(c["default"].telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==JSON.stringify("{}")){var k=new h["default"]({disabled:!(c["default"].usageTrackingEnabled&&!e.disabled&&!e.config.isPortal),portal:e.config,amazon:this._getAmazonCredentials(e)});"logPageView"in e&&!0!==e.logPageView||k.logPageView(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:
r.href);return this._instance=k}};g._getAmazonCredentials=function(e){var l=this._getEnvironment(e.config.portalHostname);return{userPoolID:this._envCredentials[l].userPoolID,app:{name:e.name||"Arcgis Online",id:this._envCredentials[l].appId,version:e.config.currentVersion||"5.2"}}};g._getEnvironment=function(e){e=e.replace("www.","");return"arcgis.com"===e&&"production"||"qaext.arcgis.com"===e&&"qa"||"dev"};return g}();B["default"]=D})},"telemetry/telemetry.dojo.min":function(){define(function(){function D(X,
aa){var M=new XMLHttpRequest;M.addEventListener("load",function(){aa(M.responseText)});M.open(X.method,X.url);Object.keys(X.headers).forEach(function(da){M.setRequestHeader(da,X.headers[da])});M.send(X.body)}function B(X,aa){var M=x.get(E);if(M&&Date.now()/1E3<M.Expiration)return aa(M);a(X,function(da){x.set(E,da);aa(da)})}function a(X,aa){var M=C({},F);M.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";M.body=JSON.stringify({IdentityPoolId:X});D(M,function(da){c(JSON.parse(da),aa)})}function c(X,
aa){var M=C({},F);M.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";M.body=JSON.stringify({IdentityId:X.IdentityId});D(M,function(da){da=JSON.parse(da);aa(da.Credentials)})}function h(){var X=void 0,aa=x.get(H);var M=((!aa||Date.now()>aa.expiration)&&(X=!0,aa={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),aa.expiration=Date.now()+G,x.set(H,aa),X&&(aa["new"]=!0),aa);aa=x.get(J);X=(aa||(aa=g()+g()+"-"+g()+"-"+g()+
"-"+g()+"-"+g()+g()+g(),x.set(J,aa)),aa);return{session:M,id:X}}function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function e(X,aa){var M={host:aa.uri.host,"content-type":X.config.defaultContentType,accept:X.config.defaultAcceptType,"x-amz-date":r(aa.signDate)};aa.request.method=aa.request.method.toUpperCase();aa.request.body?aa.payload=aa.request.body:aa.request.data&&X.payloadSerializer?aa.payload=X.payloadSerializer(aa.request.data):delete M["content-type"];aa.request.headers=
k(M,Object.keys(aa.request.headers||{}).reduce(function(da,ea){return da[ea.toLowerCase()]=aa.request.headers[ea],da},{}));aa.sortedHeaderKeys=Object.keys(aa.request.headers).sort();aa.request.headers["content-type"]&&(aa.request.headers["content-type"]=aa.request.headers["content-type"].split(";")[0]);"object"===A(aa.request.params)&&k(aa.uri.queryParams,aa.request.params)}function l(X,aa){aa.signedHeaders=aa.sortedHeaderKeys.map(function(M){return M.toLowerCase()}).join(";");aa.canonicalRequest=
String(aa.request.method).toUpperCase()+"\n"+encodeURI(aa.uri.path)+"\n"+Object.keys(aa.uri.queryParams).sort().map(function(M){return encodeURIComponent(M)+"\x3d"+encodeURIComponent(aa.uri.queryParams[M])}).join("\x26")+"\n"+aa.sortedHeaderKeys.map(function(M){return M.toLocaleLowerCase()+":"+aa.request.headers[M]}).join("\n")+"\n\n"+aa.signedHeaders+"\n"+X.hasher.hash(aa.payload?aa.payload:"")}function r(X,aa){var M=X.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return aa?M.substr(0,
8):M}function k(X){return[].slice.call(arguments,1).forEach(function(aa){aa&&"object"===(void 0===aa?"undefined":A(aa))&&Object.keys(aa).forEach(function(M){var da=aa[M];void 0!==da&&(null!==da&&"object"===(void 0===da?"undefined":A(da))?(X[M]=Array.isArray(da)?[]:{},k(X[M],da)):X[M]=da)})}),X}function f(X){var aa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},M=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},da=h().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),
session:{id:da.id,startTimestamp:da.startTimestamp},attributes:C({referrer:document.referrer,hostname:window.location.hostname,path:X||window.location.pathname,pageUrl:X||window.location.pathname,pageName:document.title,previousPageUrl:aa.pageUrl,previousPageName:aa.pageName},b(M)),metrics:d(M)}}function b(X){var aa=C({},X);return delete aa.workflow,P.forEach(function(M){return delete aa[M]}),Object.keys(aa).forEach(function(M){aa[M]="json"===M?aa[M]?JSON.stringify(aa[M]):"null":void 0!==aa[M]?aa[M].toString():
"null"}),aa}function d(X){var aa={};return P.forEach(function(M){X[M]&&(aa[M]=X[M])}),aa}function q(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},aa=arguments[1];return(new O({region:"us-east-1",service:"mobileanalytics",accessKeyId:X.AccessKeyId,secretAccessKey:X.SecretKey,sessionToken:X.SessionToken})).sign(aa)}function m(X,aa,M){var da=h();X=Array.isArray(X)?X:[X];var ea=n(X);B(aa,function(Z){try{ea.headers=q(Z,ea),ea.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:da.id,
app_title:M.name,app_version_name:M.version||"unknown"},services:{mobile_analytics:{app_id:M.id}}})}catch(ka){return}D(ea,function(ka){})})}function n(X){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:L,method:"POST",body:JSON.stringify({events:X})}}function t(X){window.ga&&window.ga(function(){X(window.ga.getAll())})}function z(X,aa){return y({hitType:"pageview",page:X||window.location.pathname},aa,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==
arguments[3]?arguments[3]:{})}function w(X){return y({hitType:"event",eventCategory:X.category||"none",eventAction:X.action,eventLabel:X.label},X,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function y(X,aa,M,da){return Object.keys(M).forEach(function(ea){X["dimension"+M[ea]]=aa[ea]}),Object.keys(da).forEach(function(ea){X["metric"+da[ea]]=aa[ea]}),X}var x={storage:{},memory:!0,get:function(X){var aa=void 0;try{aa=window.localStorage&&
window.localStorage.getItem(X)||this.storage[X]}catch(M){aa=this.storage[X]}if(aa)try{return JSON.parse(aa)}catch(M){}},set:function(X,aa){aa=JSON.stringify(aa);try{window.localStorage.setItem(X,aa)}catch(M){this.memory||(this.memory=!0),this.storage[X]=aa}},"delete":function(X){try{window.localStorage.removeItem(X)}catch(aa){this.memory||(this.memory=!0),delete this.storage[X]}}},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==
typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},v=function(X,aa){if(!(X instanceof aa))throw new TypeError("Cannot call a class as a function");},u=function(){function X(aa,M){for(var da=0;da<M.length;da++){var ea=M[da];ea.enumerable=ea.enumerable||!1;ea.configurable=!0;"value"in ea&&(ea.writable=!0);Object.defineProperty(aa,ea.key,ea)}}return function(aa,M,da){return M&&X(aa.prototype,M),da&&X(aa,da),aa}}(),C=Object.assign||function(X){for(var aa=1;aa<arguments.length;aa++){var M=
arguments[aa],da;for(da in M)Object.prototype.hasOwnProperty.call(M,da)&&(X[da]=M[da])}return X},E="TELEMETRY_COGNITO_CREDENTIALS",F={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",headers:{"Content-type":"application/x-amz-json-1.1"}},G=18E5,H="TELEMETRY_SESSION",J="TELEMETRY_CLIENT_ID",I=function(X,aa){var M={},da=M.lib={},ea=function(){},Z=da.Base={extend:function(za){ea.prototype=this;var Ba=new ea;return za&&Ba.mixIn(za),Ba.hasOwnProperty("init")||(Ba.init=function(){Ba.$super.init.apply(this,
arguments)}),Ba.init.prototype=Ba,Ba.$super=this,Ba},create:function(){var za=this.extend();return za.init.apply(za,arguments),za},init:function(){},mixIn:function(za){for(var Ba in za)za.hasOwnProperty(Ba)&&(this[Ba]=za[Ba]);za.hasOwnProperty("toString")&&(this.toString=za.toString)},clone:function(){return this.init.prototype.extend(this)}},ka=da.WordArray=Z.extend({init:function(za,Ba){za=this.words=za||[];this.sigBytes=void 0!=Ba?Ba:4*za.length},toString:function(za){return(za||Ea).stringify(this)},
concat:function(za){var Ba=this.words,ha=za.words,qa=this.sigBytes;if(za=za.sigBytes,this.clamp(),qa%4)for(var T=0;T<za;T++)Ba[qa+T>>>2]|=(ha[T>>>2]>>>24-T%4*8&255)<<24-(qa+T)%4*8;else if(65535<ha.length)for(T=0;T<za;T+=4)Ba[qa+T>>>2]=ha[T>>>2];else Ba.push.apply(Ba,ha);return this.sigBytes+=za,this},clamp:function(){var za=this.words,Ba=this.sigBytes;za[Ba>>>2]&=4294967295<<32-Ba%4*8;za.length=X.ceil(Ba/4)},clone:function(){var za=Z.clone.call(this);return za.words=this.words.slice(0),za},random:function(za){for(var Ba=
[],ha=0;ha<za;ha+=4)Ba.push(4294967296*X.random()|0);return new ka.init(Ba,za)}}),va=M.enc={},Ea=va.Hex={stringify:function(za){var Ba=za.words;za=za.sigBytes;for(var ha=[],qa=0;qa<za;qa++){var T=Ba[qa>>>2]>>>24-qa%4*8&255;ha.push((T>>>4).toString(16));ha.push((15&T).toString(16))}return ha.join("")},parse:function(za){for(var Ba=za.length,ha=[],qa=0;qa<Ba;qa+=2)ha[qa>>>3]|=parseInt(za.substr(qa,2),16)<<24-qa%8*4;return new ka.init(ha,Ba/2)}},Ga=va.Latin1={stringify:function(za){var Ba=za.words;za=
za.sigBytes;for(var ha=[],qa=0;qa<za;qa++)ha.push(String.fromCharCode(Ba[qa>>>2]>>>24-qa%4*8&255));return ha.join("")},parse:function(za){for(var Ba=za.length,ha=[],qa=0;qa<Ba;qa++)ha[qa>>>2]|=(255&za.charCodeAt(qa))<<24-qa%4*8;return new ka.init(ha,Ba)}},na=va.Utf8={stringify:function(za){try{return decodeURIComponent(escape(Ga.stringify(za)))}catch(Ba){throw Error("Malformed UTF-8 data");}},parse:function(za){return Ga.parse(unescape(encodeURIComponent(za)))}},ma=da.BufferedBlockAlgorithm=Z.extend({reset:function(){this._data=
new ka.init;this._nDataBytes=0},_append:function(za){"string"==typeof za&&(za=na.parse(za));this._data.concat(za);this._nDataBytes+=za.sigBytes},_process:function(za){var Ba=this._data,ha=Ba.words,qa=Ba.sigBytes,T=this.blockSize,Ha=qa/(4*T);Ha=za?X.ceil(Ha):X.max((0|Ha)-this._minBufferSize,0);if(za=Ha*T,qa=X.min(4*za,qa),za){for(var Ja=0;Ja<za;Ja+=T)this._doProcessBlock(ha,Ja);Ja=ha.splice(0,za);Ba.sigBytes-=qa}return new ka.init(Ja,qa)},clone:function(){var za=Z.clone.call(this);return za._data=
this._data.clone(),za},_minBufferSize:0});da.Hasher=ma.extend({cfg:Z.extend(),init:function(za){this.cfg=this.cfg.extend(za);this.reset()},reset:function(){ma.reset.call(this);this._doReset()},update:function(za){return this._append(za),this._process(),this},finalize:function(za){return za&&this._append(za),this._doFinalize()},blockSize:16,_createHelper:function(za){return function(Ba,ha){return(new za.init(ha)).finalize(Ba)}},_createHmacHelper:function(za){return function(Ba,ha){return(new ya.HMAC.init(za,
ha)).finalize(Ba)}}});var ya=M.algo={};return M}(Math);!function(X){var aa=I.lib,M=aa.WordArray,da=aa.Hasher;aa=I.algo;for(var ea=[],Z=[],ka=function(za){return 4294967296*(za-(0|za))|0},va=2,Ea=0;64>Ea;){a:{var Ga=va;for(var na=X.sqrt(Ga),ma=2;ma<=na;ma++)if(!(Ga%ma)){Ga=!1;break a}Ga=!0}Ga&&(8>Ea&&(ea[Ea]=ka(X.pow(va,.5))),Z[Ea]=ka(X.pow(va,1/3)),Ea++);va++}var ya=[];aa=aa.SHA256=da.extend({_doReset:function(){this._hash=new M.init(ea.slice(0))},_doProcessBlock:function(za,Ba){for(var ha=this._hash.words,
qa=ha[0],T=ha[1],Ha=ha[2],Ja=ha[3],fa=ha[4],Ya=ha[5],Xa=ha[6],Ca=ha[7],Y=0;64>Y;Y++){if(16>Y)ya[Y]=0|za[Ba+Y];else{var la=ya[Y-15],sa=ya[Y-2];ya[Y]=((la<<25|la>>>7)^(la<<14|la>>>18)^la>>>3)+ya[Y-7]+((sa<<15|sa>>>17)^(sa<<13|sa>>>19)^sa>>>10)+ya[Y-16]}la=Ca+((fa<<26|fa>>>6)^(fa<<21|fa>>>11)^(fa<<7|fa>>>25))+(fa&Ya^~fa&Xa)+Z[Y]+ya[Y];sa=((qa<<30|qa>>>2)^(qa<<19|qa>>>13)^(qa<<10|qa>>>22))+(qa&T^qa&Ha^T&Ha);Ca=Xa;Xa=Ya;Ya=fa;fa=Ja+la|0;Ja=Ha;Ha=T;T=qa;qa=la+sa|0}ha[0]=ha[0]+qa|0;ha[1]=ha[1]+T|0;ha[2]=
ha[2]+Ha|0;ha[3]=ha[3]+Ja|0;ha[4]=ha[4]+fa|0;ha[5]=ha[5]+Ya|0;ha[6]=ha[6]+Xa|0;ha[7]=ha[7]+Ca|0},_doFinalize:function(){var za=this._data,Ba=za.words,ha=8*this._nDataBytes,qa=8*za.sigBytes;return Ba[qa>>>5]|=128<<24-qa%32,Ba[14+(qa+64>>>9<<4)]=X.floor(ha/4294967296),Ba[15+(qa+64>>>9<<4)]=ha,za.sigBytes=4*Ba.length,this._process(),this._hash},clone:function(){var za=da.clone.call(this);return za._hash=this._hash.clone(),za}});I.SHA256=da._createHelper(aa);I.HmacSHA256=da._createHmacHelper(aa)}(Math);
(function(){var X=I.enc.Utf8;I.algo.HMAC=I.lib.Base.extend({init:function(aa,M){aa=this._hasher=new aa.init;"string"==typeof M&&(M=X.parse(M));var da=aa.blockSize,ea=4*da;M.sigBytes>ea&&(M=aa.finalize(M));M.clamp();for(var Z=this._oKey=M.clone(),ka=this._iKey=M.clone(),va=Z.words,Ea=ka.words,Ga=0;Ga<da;Ga++)va[Ga]^=1549556828,Ea[Ga]^=909522486;Z.sigBytes=ka.sigBytes=ea;this.reset()},reset:function(){var aa=this._hasher;aa.reset();aa.update(this._iKey)},update:function(aa){return this._hasher.update(aa),
this},finalize:function(aa){var M=this._hasher;return aa=M.finalize(aa),M.reset(),M.finalize(this._oKey.clone().concat(aa))}})})();var R={region:"eu-west-1",service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(X){return JSON.stringify(X)}},uriParserFactory:function(){function X(M){return/^\??(.*)$/.exec(M)[1].split("\x26").reduce(function(da,ea){return ea=/^(.+)=(.*)$/.exec(ea),ea&&(da[ea[1]]=ea[2]),da},
{})}var aa=document?document.createElement("a"):{};return function(M){return aa.href=M,{protocol:aa.protocol,host:aa.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==aa.pathname.charAt(0)?"/":"")+aa.pathname,queryParams:X(aa.search)}}},hasherFactory:function(){return{hash:function(X,aa){aa=k({hexOutput:!0,textInput:!0},aa);var M=I.SHA256(X);return aa.hexOutput?M.toString(I.enc.Hex):M},hmac:function(X,aa,M){M=k({hexOutput:!0,textInput:!0},M);X=I.HmacSHA256(aa,X,{asBytes:!0});return M.hexOutput?
X.toString(I.enc.Hex):X}}}},O=function(){function X(aa){v(this,X);this.config=k({},R,aa);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=this.config.uriParserFactory();this.hasher=this.config.hasherFactory();aa=this.config.accessKeyId;if(void 0===aa||!aa)throw Error("AwsSigner requires AWS AccessKeyID");aa=this.config.secretAccessKey;if(void 0===aa||!aa)throw Error("AwsSigner requires AWS SecretAccessKey");}return u(X,[{key:"sign",value:function(aa,
M){var da={request:k({},aa),signDate:M||new Date,uri:this.uriParser(aa.url)};e(this,da);l(this,da);da.credentialScope=[r(da.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");da.stringToSign="AWS4-HMAC-SHA256\n"+r(da.signDate)+"\n"+da.credentialScope+"\n"+this.hasher.hash(da.canonicalRequest);var ea=this.hasher.hmac,Z=ea(ea(ea(ea("AWS4"+this.config.secretAccessKey,r(da.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,{hexOutput:!1,
textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});da.signature=ea(Z,da.stringToSign,{textInput:!1});da.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+da.credentialScope+", SignedHeaders\x3d"+da.signedHeaders+", Signature\x3d"+da.signature;return{Accept:da.request.headers.accept,Authorization:da.authorization,"Content-Type":da.request.headers["content-type"],"x-amz-date":da.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),
X}(),P=["size","duration","position","number","count"],L="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",K=function(){function X(aa){v(this,X);this.name="amazon";C(this,aa);h().session["new"]&&!aa.test&&this.logEvent({eventType:"_session.start"})}return u(X,[{key:"logPageView",value:function(aa,M){var da=f(aa,this.previousPage,M);m(da,this.userPoolID,this.app);this.previousPage=da.attributes}},{key:"logEvent",value:function(aa){var M=h().session;aa={eventType:aa.eventType||"other",
timestamp:(new Date).toISOString(),session:{id:M.id,startTimestamp:M.startTimestamp},attributes:C({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},b(aa)),metrics:d(aa)};m(aa,this.userPoolID,this.app)}}]),X}(),Q=function(){function X(){var aa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};v(this,X);this.name="google";C(this,aa)}return u(X,[{key:"logPageView",value:function(aa,M){var da=z(aa,M,this.dimensions,this.metrics);t(function(ea){ea.forEach(function(Z){Z.send(da)})})}},
{key:"logEvent",value:function(aa){var M=w(aa,this.dimensions,this.metrics);t(function(da){da.forEach(function(ea){ea.send(M)})})}}]),X}(),W=function(X){if(X)return I.SHA256(X).toString(I.enc.Hex)},ba="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),S=function(){var X=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},aa=X.portal||{};return!X.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===aa.eueiEnabled||!1!==aa.eueiEnabled)&&(!(!aa.eueiEnabled||!aa.user||aa.user.orgId!==aa.id)||!(!aa.user||aa.user.orgId||"US"!==aa.ipCntryCode)||!aa.user&&"US"===aa.ipCntryCode||!(0<Object.keys(aa).length))};return function(){function X(aa){v(this,X);try{(this.trackers=[],this.workflows={},this.test=aa.test,this.debug=aa.debug,this.disabled=!S(aa),aa.portal&&aa.portal.user)?
this.setUser(aa.portal.user,(aa.portal.subscriptionInfo||{}).type):aa.user&&this.setUser(aa.user),this.disabled||this._initTrackers(aa)}catch(M){this.disabled=!0}}return u(X,[{key:"_initTrackers",value:function(aa){if(aa.amazon){var M=new K(aa.amazon);this.trackers.push(M)}aa.google&&(aa=new Q(aa.google),this.trackers.push(aa))}},{key:"setUser",value:function(){var aa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";this.user=
aa="string"==typeof aa?{username:aa}:aa;this.user.accountType=M;var da=void 0;if(aa.email&&aa.email.split){var ea=aa.email.split("@")[1];da=0<ba.filter(function(Z){return ea===Z}).length}(da||-1<["In House","Demo and Marketing"].indexOf(M))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(aa){var M=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(da){try{da.logPageView(aa,
M)}catch(ea){}}),!0):M}},{key:"logEvent",value:function(){var aa=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?aa:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(M){try{M.logEvent(aa)}catch(da){}}),!0)}},{key:"logError",value:function(){var aa=C({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(aa)}},{key:"startWorkflow",value:function(aa){var M=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{},da={name:aa,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(da);M=C({name:aa,step:"start"},M);return this._logWorkflow(M),da}},{key:"stepWorkflow",value:function(aa,M){var da=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};da=C({name:aa,step:M,details:"string"==typeof options?da:da.details},da);this._logWorkflow(da)}},{key:"endWorkflow",value:function(aa){var M=C({name:aa,step:"finish"},1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(M)}},{key:"cancelWorkflow",value:function(aa){var M=C({name:aa,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(M)}},{key:"getWorkflow",value:function(aa){if(aa=x.get("TELEMETRY-WORKFLOW:"+aa)){if(18E5>Date.now()-aa.start)return aa;this._deleteWorkflow(aa)}}},{key:"_saveWorkflow",value:function(aa){x.set("TELEMETRY-WORKFLOW:"+aa.name,aa)}},{key:"_deleteWorkflow",value:function(aa){x["delete"]("TELEMETRY-WORKFLOW:"+
aa.name)}},{key:"_logWorkflow",value:function(){var aa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};aa=this.preProcess(aa);var M=this.getWorkflow(aa.name);M||(this.startWorkflow(aa.name),M=this.getWorkflow(aa.name));M.steps.push(aa.step);M.duration=(Date.now()-M.start)/1E3;-1<["cancel","finish"].indexOf(aa.step)?this._deleteWorkflow(M):this._saveWorkflow(M);aa=C(aa,{eventType:"workflow",category:aa.name,action:aa.step,label:aa.details,duration:M.duration,workflowId:M.workflowId});this.logEvent(aa)}},
{key:"preProcess",value:function(){var aa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M={};return this.user&&(M={user:W(this.user.username),orgId:W(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),C({},aa,M)}}]),X}()})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["dojo/Deferred"],function(D){return function(){var B=new D;sessionStorage.removeItem("Esri_webmap");
B.resolve(!0);return B}})},"arcgisonline/sharing/geow/Community":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/topic dojo/data/ItemFileReadStore dojo/i18n!../../nls/arcgisonline".split(" "),function(D,B,a,c,h,g,e,l,r){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);return function(){function k(){}k.getProfile=function(f,b,d){if(null===f)return e["default"].publish("globalMessage",
[{message:k.i18n.noUser,type:"error",duration:0}]),null;h["default"].getJson(c["default"].restBaseUrl+"community/users/"+f,b)};k.getProfileThumbnailUrl=function(f,b){if(null!==f.thumbnail){var d=h["default"].getToken();d=null===d||0===d.length?"":"?token\x3d"+d;if(b){var q=c["default"].restBaseUrl;c["default"].useDefaultIdentityStore&&(q=!1!==c["default"].useSSL?h["default"].getSecureUrl(q):q);return q+"community/users/"+f.username+"/info/"+f.thumbnail+d}return c["default"].restBaseUrl+"community/users/"+
f.username+"/info/"+f.thumbnail+d}return null};k.updateProfile=function(f,b,d){d=h["default"].getUser();null===d&&e["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);d=d.username||d.email;d=h["default"].getSecureUrl(c["default"].restBaseUrl)+"community/users/"+d+"/update";h["default"].postForm(f,d,b)};k.updateProfileByUser=function(f,b,d){null!==h["default"].getUser()&&(d=h["default"].getSecureUrl(c["default"].restBaseUrl)+"community/users/"+f.username.value+
"/update",h["default"].postForm(f,d,b))};k.getUserGroups=function(f,b){var d=h["default"].getUser();(d=d&&(d.username||d.email))?d=k.getUserGroupsByUser(d,f,b):(d=new g["default"],d.resolve());return d};k.getUserGroupsByUser=function(f,b,d){f=c["default"].restBaseUrl+"community/users/"+f;var q=new g["default"];h["default"].request({url:f}).then(function(m){q.resolve(m);b&&b(m)},function(m){q.reject(m);d&&d(m)});return q};k.getGroup=function(f,b,d){h["default"].getJson(c["default"].restBaseUrl+"community/groups/"+
f,b,d)};k.createGroup=function(f,b,d){null!==h["default"].getUser()&&h["default"].postForm(f,c["default"].restBaseUrl+"community/createGroup",b,d)};k.updateGroup=function(f,b,d,q){null!==h["default"].getUser()&&h["default"].postForm(b,c["default"].restBaseUrl+"community/groups/"+f+"/update",d,q)};k.deleteGroup=function(f,b,d){null!==h["default"].getUser()&&h["default"].postJson("",c["default"].restBaseUrl+"community/groups/"+f.id+"/delete",b,d)};k.reassignGroup=function(f,b,d,q){null!==h["default"].getUser()&&
h["default"].postJson({targetUsername:b},c["default"].restBaseUrl+"community/groups/"+f.id+"/reassign",d,q)};k.leaveGroup=function(f,b,d){h["default"].postJson("",c["default"].restBaseUrl+"community/groups/"+f.id+"/leave",b,d)};k.inviteToGroup=function(f,b,d){null!==h["default"].getUser()&&h["default"].globalMessage("TODO: not implemented in rest","error",0)};k.searchGroups=function(f,b,d){h["default"].getJson(c["default"].restBaseUrl+"community/groups?q\x3d"+f,b)};k.searchToStore=function(f){var b=
[];(f.results||[]).forEach(function(d,q){var m={id:q,title:k._getGroupTitleLink(d),owner:d.owner,description:d.description,imageUrl:d.imageUrl,tags:d.keywords,created:d.created};b[q]=m});return new l["default"]({data:{identifier:"id",label:"item",items:b},url:void 0})};k._getGroupTitleLink=function(f){var b=encodeURIComponent(f.title);return'\x3ca href\x3d"group.html?owner\x3d'+f.owner+"\x26title\x3d"+b+'" class\x3d"esriGroupTitle" alt\x3d"'+k.i18n.viewGroupDetails+'" title\x3d"'+k.i18n.viewGroupDetails+
"\x3e"+f.title+"\x3c/a\x3e"};k.getNotificationsCount=function(){var f=h["default"].getUser();if(null!==f){var b;h["default"].getJson(c["default"].restBaseUrl+"community/users/"+(f.username||f.email)+"/notifications").then(function(d){b=((null===d||void 0===d?void 0:d.notifications)||[]).filter(function(q){return q&&"message_received"!==q.type});e["default"].publish("onNotificationCount",[b.length])})}};k.deleteNotifictation=function(f){var b=h["default"].getUser();null!==b&&h["default"].postJson("",
c["default"].restBaseUrl+"community/users/"+(b.username||b.email)+"/notifications/"+f+"/delete",function(d,q){e["default"].publish("onNotificationDelete",[""])}.bind(this))};k.updateUserSecure=function(f,b,d,q){q=c["default"].restBaseUrl;c["default"].useDefaultIdentityStore&&(q=!1!==c["default"].useSSL?h["default"].getSecureUrl(q):q);h["default"].postForm(b,q+"community/users/"+f+"/update",d)};k.getProvisionedListings=function(f,b,d){return h["default"].request({url:c["default"].restBaseUrl+"community/users/"+
f+"/provisionedListings",content:{start:b||1,num:d||100}})};k.i18n=a.__assign(a.__assign({},r["default"].common),r["default"].community);return k}()})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/portal/LicenseInfo ../../../pages/utils/storage ../../util dojo/_base/lang dojo/Deferred dojo/promise/all dojo/sniff esri/request dojo/i18n!../../../nls/arcgisonline".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);return function(){function m(n,t){this._browserIsEdge=!1;this.appIconPath="/css/images/app-icons/";this.basePath="js/arcgisonline/sharing/dijit";this._portal=n;this._portalUser=this._portal.portalUser||this._portal.user;
this._self=c["default"].self||n;this._userProperties=t;this.userToken=n.token;c["default"].userInfo&&c["default"].userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=l["default"].relativeToExplicitUrl(""+this.basePath+this.appIconPath);this.appSwitcherInConfig=c["default"].appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1}m.prototype.getApps=function(n){var t=this;n&&n.noStrings||!q["default"]||(this.i18n=a.__assign({},q["default"].appSwitcher),this._clearText=q["default"].configAGOLUtilServices.clear);
return this.queryItems().then(function(z){t.appSwitcherConfig=z.results[0];return t.refreshApps()})};m.prototype.refreshApps=function(n){var t=this;return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,n).then(function(z){return(new k["default"]).resolve({provisionedListings:z.provisionedListings,willQueryForItems:z.willQueryForItems})}).then(function(z){return t._init(z.provisionedListings,z.willQueryForItems)})};m.prototype.setApps=function(n){if("string"===typeof n)try{n=JSON.parse(n)}catch(z){return(new k["default"]).resolve({success:!1})}if(this._appArraysAreValid(n.primaryApps,
n.secondaryApps)){var t=n.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(n.primaryApps,t.targetUid,t.isNew&&"isNew",t.targetValue||!1),this.populateDataIdAttributes(n.secondaryApps))}return(new k["default"]).resolve({success:!1})};m.prototype._appArraysAreValid=function(n,t){return n&&t&&Array.isArray(n)&&Array.isArray(t)?n.length+t.length>=this._minNumberOfAppsToSave:!1};m.prototype.fetchAndSetupLicenseInfo=function(){var n=this,t=new k["default"];g["default"].isOrgUser=
this._portalUser&&this._portalUser.orgId;g["default"].portal=this._portal;g["default"].portal.user=g["default"].portal.user||this._portalUser;return g["default"].getLicenseInfo().then(function(){n._portalUser&&(c["default"].userInfo=r["default"].mixin(n._portalUser,g["default"]));return t.resolve(!0)})};m.prototype.queryItems=function(n,t){return this.portalQueryItems(c["default"].appSwitcherConfigItemQuery,1)};m.prototype._queryItemsAndInitApps=function(n,t,z,w){var y=this,x;n.itemDataUrl=this.formatUrlWithToken(this._portal.portalUrl+
"content/items/"+n.id+"/data");this._browserInUse=this._getBrowserInUse();this.__changedApp=t&&z?t:null;var A=!this._cookieForQueryingItemsExists(),v=new k["default"];if(null===(x=this._portalUser)||void 0===x?0:x.orgId)return f["default"]({config:d["default"]({url:n.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(w),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(function(u){var C;y.userProperties=u.preferences.properties||{};
y.userApps=u.config.appSwitcher;y._self.isPortal||y.userApps.apps.unshift(y._getAgoApp());y.approvedApps=(null===(C=u.customOrgApps.approvedApps)||void 0===C?void 0:C.filter(function(E){return!E.hideForNonPrivilegedMember}))||[];y.userProperties.appLauncher||(A=!1,y.__displayIntro=!0);return v.resolve({provisionedListings:u.marketplace,willQueryForItems:A})})};m.prototype._filterBlockedApps=function(n){var t=this;return n.filter(function(z){var w;return!(null===(w=t._blockedApps)||void 0===w?0:w.some(function(y){return z.itemId&&
z.itemId===y.itemid||z.title&&z.title===y.title}))})};m.prototype._mapAppTitles=function(n){var t=this._self.isPortal,z={"Map Viewer Beta":{value:"Map Viewer"},"Operations Dashboard for ArcGIS":{value:"ArcGIS Dashboards Classic",isPortal:!0},"Workforce for ArcGIS":{value:"ArcGIS Workforce",isPortal:!0}};n.forEach(function(w){Object.keys(z).forEach(function(y){var x=z[y];x.isPortal&&!t||w.uid!==y||(w.uid=x.value)})})};m.prototype._init=function(n,t,z,w){var y=this;return this._getBlockedApps().then(function(){return y._getLicensedApps(n,
t)}).then(function(x){y._appDictionary=x[1];var A=new k["default"];y.userProperties.appLauncher&&(y.userProperties.appLauncher.primary&&y._mapAppTitles(y.userProperties.appLauncher.primary),y.userProperties.appLauncher.secondary&&y._mapAppTitles(y.userProperties.appLauncher.secondary));if(y.userProperties.appLauncher&&y.userProperties.appLauncher.primary&&y.userProperties.appLauncher.secondary)return y._queryAppItemsForChanges(y.approvedApps,t).then(function(){y._newAppDictionary=r["default"].clone(y._appDictionary);
y.primaryApps=y.userProperties.appLauncher.primary.reduce(y._populateAppIdentifiers.bind(y),[]);y.secondaryApps=y.userProperties.appLauncher.secondary.reduce(y._populateAppIdentifiers.bind(y),[]);y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=y._filterBlockedApps(y.secondaryApps);for(var v in y._newAppDictionary)y._newAppDictionary[v].canAccess&&(y._newAppDictionary[v].isNew=!0,y._appDictionary[v]=y._newAppDictionary[v],y.primaryApps.push(y._newAppDictionary[v]));y._minNumberOfAppsToSave=
y.primaryApps.concat(y.secondaryApps).filter(function(u){return u.canAccess}).length;return A.resolve(y._getResponseObject())});y.primaryApps=x[0].slice().sort(function(v,u){return v.label<u.label?-1:1});y.primaryApps=y._filterBlockedApps(y.primaryApps);y.secondaryApps=[];y._minNumberOfAppsToSave=y.primaryApps.filter(function(v){return v.canAccess}).length;return A.resolve(y._getResponseObject())})};m.prototype._getResponseObject=function(){var n=this.i18n?{text:this.getAppLauncherStrings()}:{};return a.__assign(a.__assign({},
n),{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:b["default"]("highcontrast"),displayIntro:this.__displayIntro})};m.prototype.getAppLauncherStrings=function(){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,showMore:this.i18n.showMore}};m.prototype._getBlockedApps=function(){var n=this;return f["default"]({blockedApps:h["default"].getBlockedApps(),
blockableApps:h["default"].getBlockableApps()}).then(function(t){if(!t.blockableApps||!t.blockableApps.length)return[];var z=t.blockableApps||[];t=t.blockedApps||[];n._blockedApps=[];t.forEach(function(w){var y=z.filter(function(x){return x.clientid===w})[0];y&&n._blockedApps.push(y)})})};m.prototype._getLicensedApps=function(n,t){for(var z=this,w,y,x={},A={},v=this._getAppExceptions(),u=this._getExcludedProvisionedListings(),C=[],E=new k["default"],F=this.userApps.apps.length,G=function(I){var R=
H.userApps.apps[I];I=R.itemId||R.title;var O=!0,P=null===(w=H._blockedApps)||void 0===w?void 0:w.some(function(L){return R.itemId&&R.itemId===L.itemid||R.title&&R.title===L.title});x[I]=1;A[I]=R;if(P||l["default"].isArcGISEnterpriseOnKubernetes()&&!1===R.supportsKubernetes||v[R.title]&&!v[R.title].hasAccess(R.title))return"continue";if(!(R.privileges&&0!==R.privileges.length||R.isLicensed)||H._portalUser.userLicenseTypeId&&"storytellerut"===H._portalUser.userLicenseTypeId.toLowerCase()&&R.label&&
"storymaps"===R.label.toLowerCase())return A[I].canAccess=!0,C.push(H._modifySystemAppForView(R,I)),"continue";if(0<(null===(y=R.privileges)||void 0===y?void 0:y.length)&&H._portalUser.privileges){for(P=0;P<R.privileges.length;P++)if(0>H._portalUser.privileges.indexOf(R.privileges[P])){O=!1;break}if(!R.isLicensed&&O)return A[I].canAccess=!0,C.push(H._modifySystemAppForView(R,I)),"continue"}if(R.isLicensed&&O)for(O=0;O<n.length;O++)if(I===n[O].itemId||I===n[O].title){A[I].canAccess=!0;C.push(H._modifySystemAppForView(R,
I));break}},H=this,J=0;J<F;J++)G(J);n.forEach(function(I){"Web Mapping Application"===I.type&&!u[I.clientId]&&!x[I.itemId]&&I.url&&I.title&&!x[I.title]&&0>I.typeKeywords.indexOf("hideFromAppSwitcher")&&(I=z._modifyPartnerAppForView(I),A[I.itemId]=I,C.push(I))});return E.resolve([this.approvedApps.map(function(I){var R=a.__assign(a.__assign({},I.appProperties),{itemId:I.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!t});A[I.itemId]=R;return z._modifyWebAppForView(R)}).concat(C),A])};m.prototype._getApprovedApps=
function(n){return this.requestWithAuth(c["default"].restBaseUrl.replace("http://","https://")+"portals/"+this._portalUser.orgId+"/approvedApps",{f:"json",returnAllApps:n})};m.prototype._populateAppIdentifiers=function(n,t,z){var w=this;(z=Object.keys(this._appDictionary).map(function(y){return w._appDictionary[y]}).filter(function(y){return y.itemId===t.uid||y.title===t.uid}).shift())&&!this._appDictionary[t.uid]&&(t.uid=z.itemId||z.title);if(null===z||void 0===z?0:z.hasBeenPopulated)return n;z?
((t.hasChanged||z.hasChanged||!z.canAccess&&!z.ignoreNoAccess)&&this._isAdmin()&&(t.hasChanged||t.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[t.uid].hasChanged=!0,this._appDictionary[t.uid].ignoreNoAccess=t.ignoreNoAccess),t.isNew&&(this._appDictionary[t.uid].isNew=!0),delete this._newAppDictionary[t.uid]):(z=t,z.canAccess=!1,z.itemId=t.uid,this._appDictionary[t.uid]=z);this._appDictionary[t.uid].hasBeenPopulated=!0;n.push(z);return n};m.prototype.populateDataIdAttributes=function(n,
t,z,w){var y=this;return n.map(function(x,A){var v=y._appDictionary[x],u={label:v.label,uid:x};v.isNew&&(u.isNew=!0);v.hasChanged&&!v.ignoreNoAccess&&(u.hasChanged=!0);t&&x===t&&(n[A-1]===x&&(y.__duplicateValueIndex=A),w?(y._appDictionary[x][z]=w,u[z]=w):(delete y._appDictionary[x][z],delete u[z]));v.canAccess&&v.ignoreNoAccess&&delete u.ignoreNoAccess;return u})};m.prototype._getImgSrcForWebMappingApp=function(n){return n.icon?c["default"].restBaseUrl+"portals/self/resources/"+n.icon+"?token\x3d"+
this.userToken:"https://"+this._self.portalHostname+"/sharing/rest/content/items/"+n.itemId+"/resources/"+n.appSwitcher.image+"?token\x3d"+this.userToken};m.prototype._modifySystemAppForView=function(n,t){var z;n.image?n.image=""+this.imgDir+n.image:n.placeHolderIcon=this.imgDir+"svg-app-icon.svg";0===(null===(z=n.url)||void 0===z?void 0:z.indexOf("../"))&&(n.url=location.protocol+"//"+(this._portal.urlKey?this._portal.urlKey+"."+this._portal.customBaseUrl:this._self.portalHostname)+n.url.substring(2,
n.url.length));delete n.isLicensed;delete n.privileges;n.itemId=t;return n};m.prototype._modifyWebAppForView=function(n){var t,z;(null===(t=n.appSwitcher)||void 0===t?0:t.image)||n.icon?n.image=this._getImgSrcForWebMappingApp(n):n.placeHolderIcon=this.imgDir+"svg-app-circle.svg";n.abbr=(null===(z=n.appSwitcher)||void 0===z?void 0:z.abbr)||n.abbreviation;delete n.abbreviation;delete n.appSwitcher;delete n.approvedApp;delete n.webMappingApp;return n};m.prototype._modifyPartnerAppForView=function(n){var t,
z,w;n.appSwitcher=null===(t=n.properties)||void 0===t?void 0:t.appSwitcher;t=(null===(z=n.appSwitcher)||void 0===z?void 0:z.image)||n.icon;return{abbr:(null===(w=n.appSwitcher)||void 0===w?void 0:w.abbr)||n.abbreviation,itemId:n.itemId,canAccess:!0,webMappingApp:!0,image:t?this._getImgSrcForWebMappingApp(n):null,label:n.title||n.label,url:n.url,placeHolderIcon:n.placeHolderIcon||this.imgDir+"svg-app-circle.svg"}};m.prototype._saveAppOrderToUserProperties=function(n,t){this.userProperties.appLauncher||
(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(n)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(t))return this.userProperties.appLauncher.primary=n,this.userProperties.appLauncher.secondary=t,this._updateUserProperties(this.userProperties)};m.prototype._getUserProperties=function(){var n=new k["default"];return this._userProperties?(this._userProperties.properties||(this._userProperties={properties:this._userProperties}),
n.resolve(this._userProperties)):this.requestWithAuth(c["default"].restBaseUrl+"community/users/"+this._portalUser.username+"/properties",{f:"json"})};m.prototype._getMarketPlaceProvisionedListings=function(n){var t,z=new k["default"];return!n&&(null===(t=c["default"].userInfo)||void 0===t?0:t.provisionedListings)?(z.resolve(c["default"].userInfo.provisionedListings),z):this.fetchAllResources(this._portal.portalUrl+"community/users/"+this._portalUser.username+"/provisionedListings",{returnAppClientIds:!0,
returnAllProvisions:!0},"provisionedListings")};m.prototype._updateUserProperties=function(n){var t=c["default"].restBaseUrl+"community/users/"+this._portalUser.username+"/setProperties",z=this._portalUser?{token:this.userToken}:{};n=a.__assign({f:"json",properties:JSON.stringify(n)},z);return d["default"]({url:t,content:n},{usePost:!0})};m.prototype._getExcludedProvisionedListings=function(){var n={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,
survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(n.arcgisonline=1);return n};m.prototype._getAppExceptions=function(){var n=this;return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},
"ArcGIS Experience Builder":{hasAccess:function(t){return n._isInPortalConfig(t)}},"ArcGIS StoryMaps":{hasAccess:function(t){return n._isInPortalConfig(t)}},"ArcGIS QuickCapture Web Designer":{hasAccess:function(t){return n._isInPortalConfig(t)&&n._hasLicense("arcgisWebApps")}},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(t){return c["default"].showCreateDashboard&&
n._isInPortalConfig(t)&&n._hasLicense("dashboards")}},"ArcGIS Solutions":{hasAccess:function(){return!n._self.isPortal||c["default"].solutionsEnabled}},"ArcGIS Workforce":{hasAccess:function(t){return!n._self.isPortal||n._isInPortalConfig(t)}},"Map Viewer":{hasAccess:function(t){return n._userHasAccessToMapViewer()&&n._isInPortalConfig("ArcGIS Map Viewer")}},"Map Viewer Classic":{hasAccess:function(t){return n._hasLicense("arcgisWebApps")&&n._isInPortalConfig("ArcGIS Map Viewer Classic")}},"Operations Dashboard for ArcGIS":{hasAccess:function(){return n._hasLicense("opsdashboard")&&
n._isInPortalConfig("ArcGIS Dashboards Classic")}},"ArcGIS Dashboards Classic":{hasAccess:function(t){return n._hasLicense("opsdashboard")&&n._isInPortalConfig(t)}},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Scene Viewer":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}};
m.prototype._hasAccessToNotebooks=function(n){return this._notebookServerConfigured()&&this._isInPortalConfig(n)&&this._canCreateNotebooks()};m.prototype._notebookServerConfigured=function(){return this._self.isPortal?c["default"].notebookServerEnabled&&this._self.supportsHostedNotebooks:c["default"].notebookServerEnabled};m.prototype._canCreateNotebooks=function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(n){return"premium:publisher:createNotebooks"===
n}):!1};m.prototype._isInPortalConfig=function(n){return!this._self.isPortal||c["default"].showInAppLauncher&&-1!==c["default"].showInAppLauncher.indexOf(n)};m.prototype._userHasAccessToMapViewer=function(){var n=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return c["default"].newMapViewerEnabled&&!n&&this._hasLicense("arcgisWebApps")};m.prototype._userHasAccessToOpenData=function(){var n;return(null===(n=this._self)||void 0===n?0:n.portalProperties)&&
(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?!1:this._hasLicense("HubforArcGIS")};m.prototype._userHasAccessToAnalyticsForIoT=function(){var n=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],t=(this._portalUser.privileges||[]).some(function(w){return-1<n.indexOf(w)}),z=this._hasLicense("velocity");return t&&z};m.prototype._userHasAccessToSites=function(n){return this._isInPortalConfig(n)&&
this._hasLicense("HubforArcGIS")};m.prototype._userHasAccessToCollectorWeb=function(n){return this._isInPortalConfig(n)};m.prototype._userHasAccessToOrthoMaker=function(){var n,t;return(null===(t=null===(n=this._self)||void 0===n?void 0:n.helperServices)||void 0===t?void 0:t.rasterAnalytics)&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")};m.prototype._userHasAccessToTrackViewer=function(){var n,t;return(null===(t=null===(n=this._self)||void 0===n?void 0:n.helperServices)||
void 0===t?void 0:t.locationTracking)&&c["default"].trackViewerEnabled&&this._isInPortalConfig("Track Viewer")};m.prototype._hasLicense=function(n){var t;return(null===(t=c["default"].userInfo)||void 0===t?0:t.isLicensed)?c["default"].userInfo.isLicensed(n):!0};m.prototype._getAgoApp=function(){return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?""+c["default"].baseUrl+this.userProperties.landingPage.url:this._portalUser.isOrgAdmin?"organization.html":
"index.html"}};m.prototype._getOriginOfUrl=function(n){n=window.location;return n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")};m.prototype._getNewAppIconFromAppIdAndProperties=function(n,t){if(!this._appDictionary[n]){var z=a.__assign(a.__assign({},JSON.parse(t)),{itemId:n,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0});return this._appDictionary[n]=z}};m.prototype._queryAppItemsForChanges=function(n,t){var z=this,w=new k["default"],y=c["default"].restBaseUrl+"search?";if(!t||!n||!n.length)return w.resolve({success:!0});
y=y+"f\x3djson\x26num\x3d100\x26q\x3d id:("+(n.map(function(x){return'"'+x.itemId+'"'}).join(" OR ")+")");return this.requestWithAuth(y,{f:"json"}).then(function(x){var A;0<(null===(A=x.results)||void 0===A?void 0:A.length)&&x.results.forEach(function(v){var u=z._appDictionary[v.id];u.canAccess=1;u.hasChanged=u.url!==v.url?v.url:0});return w.resolve({success:!0})})};m.prototype._getAppsFromLocalStorage=function(){if(!this.__localStorageIsAvailable)return!1;var n=localStorage.getItem("APSW-primary"),
t=localStorage.getItem("APSW-secondary");return n?{primaryApps:n,secondaryApps:t}:!1};m.prototype._saveAppsToLocalStorage=function(n,t){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(n)),localStorage.setItem("APSW-secondary",JSON.stringify(t)))};m.prototype._cookieForQueryingItemsExists=function(){var n=e["default"].getCookie("APSW-query",!0);if((null===n||void 0===n?void 0:n.expires)>(new Date).setHours((new Date).getHours()))return!0;n={expires:(new Date).setHours((new Date).getHours()+
5)};e["default"].setCookie("APSW-query",n,{path:"/",domain:document.domain,sameSite:"Strict"},!0);return!1};m.prototype.requestWithAuth=function(n,t){t=this.userToken?a.__assign(a.__assign({},t),{token:this.userToken}):t;return d["default"]({url:n,content:t})};m.prototype.fetchAllResources=function(n,t,z){var w=new k["default"],y=1,x=[],A,v,u,C,E={f:"json",token:this.userToken};t=t?a.__assign(a.__assign({},t),E):E;z=z||"results";t.start=y;t.num||(t.num=100);d["default"]({url:n,content:t}).then(function(F){if(F&&
F[z]){x=x.concat(F[z]);y=F.nextStart;A=F.total-x.length;v=Math.ceil(A/100);u=[];for(C=0;C<v;C++)t.start=y+100*C,u.push(l["default"].request({url:n,content:t}));f["default"](u).then(function(G){G.forEach(function(H){x=x.concat(H[z])});w.resolve(x)},function(G){w.reject(G)})}else w.resolve(x)},function(F){w.reject(F)});return w};m.prototype._isAdmin=function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)};m.prototype.portalQueryItems=function(n,
t){var z={num:t||10,start:0,sortField:"title",sortOrder:"asc",f:"json",q:n},w="";w=this._portal.urlKey?"https://"+this._portal.urlKey+"."+this._portal.customBaseUrl+"/sharing/rest/search":this._portal.url+"search";return this.requestWithAuth(w,z)};m.prototype.useSSL=function(n,t){if(this._self.isPortal){var z=this.getLocation(t);if(-1<this._self.portalHostname.toLowerCase().indexOf(z.hostname.toLowerCase())&&z.port&&"80"!==z.port&&"443"!==z.port){var w=z.pathname;w=0===w.indexOf("/")?w:"/"+w;return this._self.allSSL||
-1<n.indexOf("https:")?"https://"+z.hostname+(this._self.httpsPort&&"443"!==this._self.httpsPort?":"+this._self.httpsPort:"")+w+z.search:"http://"+z.hostname+(this._self.httpPort&&"80"!==this._self.httpPort?":"+this._self.httpPort:"")+w+z.search}}return-1!==n.indexOf("https:")||this._self.allSSL?t.replace("http:","https:"):t};m.prototype.getLocation=function(n){var t=document.createElement("a");t.href=n;return{protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,
hash:t.hash,host:t.host}};m.prototype.formatUrlWithToken=function(n){var t=this.userToken;return-1!==n.indexOf("null")?null:this.useSSL(window.location.protocol,t?""+n+(-1!==n.indexOf("?")?"\x26":"?")+"token\x3d"+t:n)};m.prototype._checkIfLocalStorageIsAvailable=function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage","1"),localStorage.removeItem("testLocalStorage"),!0}catch(n){return!1}};m.prototype._getBrowserInUse=function(){return 10>=b["default"]("ie")||
6<b["default"]("trident")?"ie11":b["default"]("edge")?"edge":null};return m}()})},"dojo/debounce":function(){define([],function(){return function(D,B){var a;return function(){a&&clearTimeout(a);var c=this,h=arguments;a=setTimeout(function(){D.apply(c,h)},B)}}})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);return function(){function y(x,A){this.templateString=t["default"];this.isTroubleshootPage=
this.isSignInPage=!1}y.prototype.postMixInProperties=function(){this.i18n=z["default"].mixin({},q["default"].common);z["default"].mixin(this.i18n,q["default"].siteFooter);z["default"].mixin(this.i18n,q["default"].supportPage.helpLabel)};y.prototype.postCreate=function(){var x=window.location.pathname.toLowerCase();this.isSignInPage=-1!==x.indexOf(c["default"].signin);this.isTroubleshootPage=-1!==x.indexOf("troubleshoot.html");this.addEventListeners()};y.prototype.startup=function(){this._loadLinks()};
y.prototype.refresh=function(){d["default"].destroy(this.id+"_links");d["default"].create("span",{id:this.id+"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()};y.prototype.addEventListeners=function(){this.own(n["default"].subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};y.prototype.handleContactUsLinkUpdate=function(x){var A=b["default"].byId(this.id+"_links"),v=window.location.href,u=!1,C=null;-1<v.indexOf("viewer.html")&&!g["default"].isMobile()&&
-1===v.indexOf("returnUrl")&&(u=!0);C=u?d["default"].create("span",{innerHTML:"\x26nbsp;. "}):d["default"].create("span",{innerHTML:""});w["default"].isDefined(x)||(x={visible:!1,url:""});(v=b["default"].byId(this.id+"_customContactUs"))?(h["default"].showHide(v,x.visible),v.href=x.url):(v=d["default"].create("a",{href:x.url,innerHTML:this.i18n.customContactUs,id:this.id+"_customContactUs","class":x.visible?"footer__contact-us":"footer__contact-us hide"}),x=b["default"].byId(this.id+"_contactEsri"),
w["default"].isDefined(x)?(d["default"].place(v,x,"after"),d["default"].place(C,x,"after")):(0<c["default"].footerLinks.length&&d["default"].place(C,A,"last"),d["default"].place(v,A,"last")))};y.prototype._getTitle=function(x){return-1<(null===x||void 0===x?void 0:x.indexOf("${"))&&-1<x.indexOf("}")?m["default"].substitute(x,{i18n:this.i18n}):x};y.prototype._loadLinks=function(){var x=this;l["default"].getSelf(function(A){var v,u,C,E=e["default"].getUser(),F=A.isPortal,G=b["default"].byId(x.id+"_links"),
H=window.location.href,J=!1,I=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-14));-1<H.indexOf("viewer.html")&&!g["default"].isMobile()&&-1===H.indexOf("returnUrl")&&(J=!0);(c["default"].footerLinks||[]).forEach(function(O){var P="${i18n.legal}"===(null===O||void 0===O?void 0:O.title),L=!!(P&&w["default"].isDefined(E)&&w["default"].isDefined(E.accountId)),K="${i18n.help}"===(null===O||void 0===O?void 0:O.title)||"support.html"===(null===O||void 0===O?void 0:O.url),Q=!(K&&!w["default"].isDefined(E)&&
w["default"].isDefined(A.access)&&"public"===A.access&&(F||!F&&w["default"].isDefined(A.customBaseUrl)));L=!P&&!K||P&&!L||K&&!Q;I&&L&&d["default"].place(I,G,"last");P=x._getTitle(O.title);if(O.url){-1===O.url.indexOf("http")&&-1===O.url.indexOf("mailto:")&&J&&(O.url="support.html"===O.url?A.helpBase||c["default"].baseUrl+O.url:c["default"].baseUrl+O.url);if("${i18n.help}"===O.title||"support.html"===O.url)O.url=A.helpBase;O=d["default"].create("a",{href:O.url,target:"_blank",innerHTML:P});L&&d["default"].place(O,
G,"last")}else F&&"contactUs"===O.type?(L=c["default"].portalName||"ArcGIS.com",K=escape(H),O="mailto:"+O.email,O=d["default"].create("a",{id:x.id+"_contactEsri",href:O+('?subject\x3d"A comment about '+L+'"\x26body\x3d"I have the following comment about the ')+(L+" Web site. %0AReferring page: "+K+' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),innerHTML:P}),d["default"].place(O,G,"last")):"reportAbuse"===
O.type&&(K=escape(H),O="mailto:"+O.email+'?subject\x3d"Concerns about an item"',O=d["default"].create("a",{href:O+('\x26body\x3d"I have concerns about the following. %0AReferring page: '+K+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),innerHTML:P}),d["default"].place(O,G,"last"));I=J?d["default"].create("span",
{innerHTML:"\x26nbsp;. "}):d["default"].create("span",{innerHTML:""})});var R=null!==(C=null===(u=null===(v=A.portalProperties)||void 0===v?void 0:v.links)||void 0===u?void 0:u.contactUs)&&void 0!==C?C:{visible:!1,url:""};(v=b["default"].byId(x.id+"_customContactUs"))?(h["default"].showHide(v,R.visible),v.href=R.url):(v=d["default"].create("a",{href:R.url,innerHTML:x.i18n.customContactUs,id:x.id+"_customContactUs","class":R.visible?"footer__contact-us":"footer__contact-us hide"}),R=b["default"].byId(x.id+
"_contactEsri"),w["default"].isDefined(R)?(d["default"].place(v,R,"after"),d["default"].place(I,R,"after")):(0<c["default"].footerLinks.length&&d["default"].place(I,G,"last"),d["default"].place(v,G,"last")))})};return y=a.__decorate([r["default"](f["default"],k["default"])],y)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),
function(D,B,a,c,h,g,e,l){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);return function(){function r(){this.templateString=l["default"]}return r=a.__decorate([h["default"](e["default"],g["default"],c["default"])],r)}()})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ./dialog/GeneralDlg ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang esri/request".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E,F,G,H,J,I){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);
v=a.__importDefault(v);u=a.__importDefault(u);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);J=a.__importDefault(J);I=a.__importDefault(I);return function(){function R(O,P){this.templateString=F["default"];this.widgetsInTemplate=!0;this.i18n=a.__assign(a.__assign(a.__assign({},v["default"].common),v["default"].signUpInternalWidget),{securityQuestions:v["default"].securityQuestions,passwordTooWeak:v["default"].myOrganization.inviteMembers.passwordTooWeak,
usernameTooShort:v["default"].organizationInvite.step2Create.invalid.usernameTooShort,usernameTooLong:v["default"].organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:v["default"].organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:v["default"].organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl=c["default"].baseUrl.replace("https:","http:")+"index.html";this.orgRedirectUrl=c["default"].baseUrl.replace("https:","http:")+
"organization.html";this.isValidUsername=!1;this.accountMode="arcgis"}R.prototype.postCreate=function(){this.inherited(arguments);this.fetchPasswordPolicy()};R.prototype.startup=function(){var O=this;this.inherited(arguments);k["default"].getSelf(function(P){O._portal=new e["default"]({url:c["default"].restBaseUrl,self:C["default"].clone(P)});O._portal.on("load",function(){O.setupPasswordStrength()});H["default"].defaults.io.corsEnabledServers.push(c["default"].DEPLOY_ROOT);H["default"].defaults.io.corsEnabledServers.push("http://"+
location.host);H["default"].defaults.io.corsEnabledServers.push("https://"+location.host);H["default"].defaults.io.proxyUrl=c["default"].proxyUrl;C["default"].mixin(O,u["default"].queryToObject(window.location.search.slice(1)));O._svcUrl=c["default"].restBaseUrl+(c["default"].restBaseUrl.lastIndexOf("/")===c["default"].restBaseUrl.length-1?"":"/");O._communityUri=O._svcUrl+"community/";w["default"].set("pagetitle","innerHTML",O.i18n.signUpInternalTitle);O.setupQuestions();O.loadConnections();O.checkInvitation();
setTimeout(function(){O._firstname.focus()},50);G["default"].subscribe("registerUser",O.registerUser.bind(O));O.adjustNameRows()})};R.prototype.loadConnections=function(){this.own(E["default"](this._firstname,"change",this.validFirstName.bind(this)),E["default"](this._lastname,"change",this.validLastName.bind(this)),E["default"](this._email,"change",this.validEmail.bind(this)),E["default"](this._confirmEmail,"change",this.validConfirmEmail.bind(this)),E["default"](this._username,"change",this.usernameChange.bind(this)),
E["default"](this._pwd,"change",this.validPassword.bind(this)),E["default"](this._pwd,"keyup",this.validPassword.bind(this)),E["default"](this._verifyPwd,"change",this.validVerifyPassword.bind(this)),E["default"](this._identityQuestion,"change",this.identityQuestionChange.bind(this)),E["default"](this._identityAnswer,"change",this.validIdentityAnswer.bind(this)),E["default"](this._form,"submit",this.initiateSignUp.bind(this)),E["default"](this._cancelBtn,"click",this.cancel.bind(this)))};R.prototype.adjustNameRows=
function(){"ja"===x["default"].locale&&y["default"].place("first-name-block","last-name-block","after")};R.prototype.checkInvitation=function(){var O=this;this.invitation&&this.fetchInvitation().then(function(P){O.invitationOrgName=P.account.name},this.fetchInvitationError.bind(this))};R.prototype.setupPasswordStrength=function(){this._strengthMeter=new g["default"]({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};
R.prototype.setupQuestions=function(){var O=this;this.identityQuestions=[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,
name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(P){y["default"].create("option",{value:P.id,innerHTML:P.name},O._identityQuestion)})};R.prototype.fetchPasswordPolicy=function(){var O=this,P=q["default"].getSecureUrl(c["default"].restBaseUrl)+"portals/self/securityPolicy/passwordPolicy";q["default"].request({url:P}).then(function(L){O._passwordPolicy=
!L||L.code||L.messageCode?null:L})};R.prototype.registerUser=function(O){var P=this;O=A["default"].trim(this._firstname.value);var L=A["default"].trim(this._lastname.value),K=A["default"].trim(this._email.value),Q=q["default"].stripHTML(A["default"].trim(this._username.value)),W=A["default"].trim(this._pwd.value),ba=A["default"].trim(this._identityAnswer.value),S={fullname:"ja"===x["default"].locale?L+" "+O:O+" "+L,firstname:O,lastname:L,email:K,username:Q,password:W,securityQuestionIdx:this._identityQuestionID,
securityAnswer:ba,invitationId:void 0,provider:void 0};this.invitation&&(S.invitationId=this.invitation,S.provider=this.accountMode);this.signUp(S).then(function(X){null!=X.error&&""!==X.error?(l["default"].disableNode(P._createAccountBtn,!1),w["default"].set(P._createAccountBtn,"innerHTML",P.i18n.createAcc),X.error.messageCode&&"COM_1054"===X.error.messageCode?h["default"].createSpecifiedDialog(f["default"]).show({title:P.i18n.errorTitle,message:P.i18n.error.maxUsers}):P.handleError(X)):P.invitation?
b["default"].signInHandler(S.username,P.acceptInvitation.bind(P,S),P.signInError.bind(P),X):b["default"].signInHandler(S.username,P.signIn.bind(P),P.signInError.bind(P),X)},this.signUpError.bind(this))};R.prototype.signUp=function(O){O=a.__assign({},O);var P=c["default"].restBaseUrl+"community/signup",L=document.domain,K=L.split(".");1<K.length&&(L=K[K.length-2]+"."+K[K.length-1]);O.referer=L;O.f="json";return I["default"]({url:P,content:O,headers:{"X-Esri-Auth-Client-Id":"arcgisonline","X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,
"")}},{disableIdentityLookup:!0,usePost:!0})};R.prototype.signIn=function(){c["default"].self=null;k["default"].getSelf(this.routeUser.bind(this))};R.prototype.routeUser=function(O){var P=q["default"].getUser(),L=new d["default"]({portalUser:O.user||{}}),K=u["default"].queryToObject(window.location.search.slice(1)).returnUrl;if(!O||O.code||O.message)null!==K?window.location=K:(P=q["default"].getHttpUrl()+"user.html?newUser\x3dtrue",window.location=q["default"].getSecureUrl(P));else{O=O.allSSL;var Q=
q["default"].usePortalSSL();this.redirectUrl=q["default"].getHttpUrl()+"index.html";this.orgRedirectUrl=q["default"].getHttpUrl()+"organization.html";K?(Q=-1<K.indexOf("https:"),window.location=O||Q?q["default"].getSecureUrl(K):K):"account_admin"===P.role&&(!c["default"].self.restrictOrganizationPageToAdmin&&L.canViewOrgUsers()||c["default"].self.restrictOrganizationPageToAdmin&&L.isAdmin())?window.location=O||Q?q["default"].getSecureUrl(this.orgRedirectUrl):this.orgRedirectUrl:window.location=O||
Q?q["default"].getSecureUrl(this.redirectUrl):this.redirectUrl}};R.prototype.acceptInvitation=function(O){var P=this;k["default"].acceptInvitation(this.invitation,function(){P.signIn()},this.acceptFail.bind(this))};R.prototype.initiateSignUp=function(O){var P=this;O&&O.preventDefault();this.validates().then(function(L){L&&(l["default"].disableNode(P._createAccountBtn,!0),w["default"].set(P._createAccountBtn,"innerHTML",P.i18n.creatingAcc),P.registerUser(!0))})};R.prototype.cancel=function(){var O=
""+c["default"].baseUrl.replace("http:","https:")+c["default"].signin;this.invitation&&(O+="?invitation\x3d"+this.invitation);window.location.href=O};R.prototype.fetchInvitationError=function(O){if((null===O||void 0===O?0:O.code)&&O.message&&403===O.code){O="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e";var P=h["default"].createSpecifiedDialog(f["default"]);P.onOkClick=function(){P.hide();window.location.href=""+c["default"].baseUrl.replace("http:",
"https:")+c["default"].signin};P.show({title:this.i18n.notice,message:O})}else(null===O||void 0===O?0:O.code)&&O.message&&400===O.code?(O="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",P=h["default"].createSpecifiedDialog(f["default"]),P.onOkClick=function(){P.hide();window.location.href=""+q["default"].getSecureUrl()+c["default"].signin},P.show({title:this.i18n.notice,message:O})):(null===O||void 0===O?void 0:O.id)===this.invitation?this.invitationOrgName=
O.account.name:this.invitation=null};R.prototype.acceptFail=function(){var O=this,P=h["default"].createSpecifiedDialog(f["default"]);P.onOkClick=function(){P.hide();l["default"].disableNode(O._createAccountBtn,!1);w["default"].set(O._createAccountBtn,"innerHTML",O.i18n.createAcc)};P.show({title:this.i18n.unableToJoin,message:this.i18n.problemJoining})};R.prototype.usernameChange=function(){var O=q["default"].stripHTML(A["default"].trim(this._username.value)),P=this.handleCheckUsername.bind(this);
k["default"].checkUsernames([q["default"].stripHTML(O)],P,P)};R.prototype.identityQuestionChange=function(){var O=this._identityQuestion.value;this._identityQuestionID=O?parseInt(O,10):void 0;this.validIdentityQuestion()};R.prototype.handleCheckUsername=function(O){this.isValidUsername=!1;var P=q["default"].stripHTML(A["default"].trim(this._username.value));!O||O.code||O.message?O.messageCode&&"DB_0006"===O.messageCode?this.showErrorMessage(this.i18n.error.restrictedCharacters):P?this.showErrorMessage(this.i18n.error.checkingUsername):
this.isValidUsername=!0:0<(null===O||void 0===O?void 0:O.usernames.length)&&P===O.usernames[0].suggested&&(this.isValidUsername=!0);this.validUsername()};R.prototype.signUpError=function(O){l["default"].disableNode(this._createAccountBtn,!1);w["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var P=this.i18n.unableCreateAccount,L=this.i18n.contactAdmin;-1<O.message.indexOf("already registered")&&(L=this.i18n.error.emailInUse);-1<O.message.indexOf("Username '")&&-1<O.message.indexOf("' not available.")&&
(L=this.i18n.error.usernameInValid);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+P+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+L+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};R.prototype.signInError=function(){l["default"].disableNode(this._createAccountBtn,!1);w["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+this.i18n.unableSignAuto+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+
this.i18n.pleaseTrySignManually+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};R.prototype.showErrorMessage=function(O){h["default"].createSpecifiedDialog(f["default"]).show({title:this.i18n.errorTitle,message:O})};R.prototype.usernameContainsAlphaNumeric=function(O){var P=/^[a-zA-Z0-9@_\.]+$/g;return O&&!!P.test(O)};R.prototype.usernameValidStartEnd=function(O){var P=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-\.]+[a-zA-Z0-9_])?$/g;return O&&P.test(O)};R.prototype.validFirstName=function(){var O=A["default"].trim(this._firstname.value);
r["default"].clearState([this._firstname,this._firstnameError]);if(J["default"].isDefined(O)&&""!==O)return r["default"].setValidState(this._firstname),!0;r["default"].setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);return!1};R.prototype.validLastName=function(){var O=A["default"].trim(this._lastname.value);r["default"].clearState([this._lastname,this._lastnameError]);if(J["default"].isDefined(O)&&""!==O)return r["default"].setValidState(this._lastname),!0;r["default"].setInvalidState(this._lastname,
this._lastnameError,this.i18n.error.lastNameReqd);return!1};R.prototype.validEmail=function(){var O=A["default"].trim(this._email.value);r["default"].clearState([this._email,this._emailError]);if(J["default"].isDefined(O)&&0!==O.length&&q["default"].isValidEmailAddress(O))return r["default"].setValidState(this._email),!0;r["default"].setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};R.prototype.validConfirmEmail=function(){var O=A["default"].trim(this._email.value),
P=A["default"].trim(this._confirmEmail.value);r["default"].clearState([this._confirmEmail,this._confirmEmailError]);if(J["default"].isDefined(P)&&0!==P.length&&q["default"].isValidEmailAddress(P)){if(O!==P)return r["default"].setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailNoMatch),!1;r["default"].setValidState(this._confirmEmail);return!0}r["default"].setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};R.prototype.validUsername=
function(){var O=q["default"].stripHTML(A["default"].trim(this._username.value));r["default"].clearState([this._username,this._usernameError]);if(J["default"].isDefined(O)&&""!==O){if(6>O.length)return r["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),!1;if(128<O.length)return r["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this.usernameContainsAlphaNumeric(O)){if(this.usernameValidStartEnd(O)){if(this.isValidUsername)return r["default"].setValidState(this._username),
!0;O=A["default"].substitute(this.i18n.error.usernameInUse,{username:O,linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+q["default"].getSecureUrl(c["default"].baseUrl)+c["default"].signin+window.location.search+'"\x3e',linkEnd:"\x3c/a\x3e\x3c/span\x3e"});r["default"].setInvalidState(this._username,this._usernameError,O);return!1}r["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return r["default"].setInvalidState(this._username,this._usernameError,
this.i18n.usernameInvalidChars),!1}else return r["default"].setInvalidState(this._username,this._usernameError,this.i18n.error.userReqd),!1};R.prototype.validPassword=function(){var O=this,P=q["default"].stripHTML(A["default"].trim(this._username.value)),L=A["default"].trim(this._pwd.value);r["default"].clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(L).then(function(K){if(J["default"].isDefined(L)&&""!==L){if(O._passwordPolicy){if(!K.isValidStrength)return r["default"].setInvalidState(O._pwd,
O._pwdError,O.i18n.passwordTooWeak),!1;if(K.isValid){if(P.toLowerCase()===L.toLowerCase())return r["default"].setInvalidState(O._pwd,O._pwdError,O.i18n.passwordNotToPolicy),!1;r["default"].setValidState(O._pwd);return!0}if(!1===K.longEnough)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordLength,{num:O._passwordPolicy.minLength})),!1;if(!1===K.enoughLetter)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordLetter,
{num:O._passwordPolicy.minLetter})),!1;if(!1===K.enoughUpper)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordUpper,{num:O._passwordPolicy.minUpper})),!1;if(!1===K.enoughLower)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordLower,{num:O._passwordPolicy.minLower})),!1;if(!1===K.enoughDigit)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordDigit,{num:O._passwordPolicy.minDigit})),
!1;if(!1===K.enoughOther)return r["default"].setInvalidState(O._pwd,O._pwdError,A["default"].substitute(O.i18n.error.passwordOther,{num:O._passwordPolicy.minOther})),!1;r["default"].setValidState(O._pwd);return!0}if(K.isValidStrength){if(8>L.length||28<L.length)return r["default"].setInvalidState(O._pwd,O._pwdError,O.i18n.error.invalidPassword),!1;if(P.toLowerCase()===L.toLowerCase())return r["default"].setInvalidState(O._pwd,O._pwdError,O.i18n.passwordNotToPolicy),!1;r["default"].setValidState(O._pwd);
return!0}r["default"].setInvalidState(O._pwd,O._pwdError,O.i18n.passwordTooWeak);return!1}r["default"].setInvalidState(O._pwd,O._pwdError,O.i18n.error.passReqd);return!1})};R.prototype.validVerifyPassword=function(){var O=A["default"].trim(this._pwd.value),P=A["default"].trim(this._verifyPwd.value);r["default"].clearState([this._verifyPwd,this._verifyPwdError]);if(O!==P)return r["default"].setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;r["default"].setValidState(this._verifyPwd);
return!0};R.prototype.validIdentityQuestion=function(){r["default"].clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return r["default"].setInvalidState(this._identityQuestion,this._identityQuestionError,this.i18n.error.questionSelection),!1;r["default"].setValidState(this._identityQuestion);return!0};R.prototype.validIdentityAnswer=function(){var O=A["default"].trim(this._identityAnswer.value);r["default"].clearState([this._identityAnswer,
this._identityAnswerError]);if(J["default"].isDefined(O)&&""!==O){if(60<O.length)return r["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;r["default"].setValidState(this._identityAnswer);return!0}r["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};R.prototype.validates=function(){var O=this,P=[this.validFirstName(),this.validLastName(),this.validEmail(),this.validConfirmEmail(),
this.validUsername(),this.validVerifyPassword(),this.validIdentityQuestion(),this.validIdentityAnswer()].every(function(L){return!0===L});return this.validPassword().then(function(L){(P=P&&L)||r["default"].focusFirstInvalidInput(O._form.domNode);return P})};R.prototype.fetchInvitation=function(){return q["default"].request({url:this._communityUri+"invitations/"+this.invitation})};R.prototype.handleError=function(O){var P,L;O=O.error||O||{};O.code=O.code||0;O=this.i18n.errors[O.code]||O;O.details=
(null===(P=O.details)||void 0===P?0:P.length)?O.details.filter(function(K){return null!==K}):null;if(null===(L=O.details)||void 0===L?0:L.length)O.details=O.details.join("\x3cbr /\x3e"),O.message=O.message?O.message+"\x3cbr\x3e"+O.details:O.details;O=a.__assign(a.__assign({},this.i18n.errors.error),O);this.showErrorMessage(O.message);return!0};return R=a.__decorate([m["default"](t["default"],n["default"],z["default"])],R)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);return function(){function d(q,m){this.templateString=c["default"];this.i18n=h["default"];this.icons=r["default"]}d.prototype.postCreate=function(){var q,m,n;this.inherited(arguments);var t=null!==(m=null===(q=this.portal.helpMap)||void 0===q?void 0:q.m)&&void 0!==
m?m:{};q=this.portal.helpBase+(null!==(n=t["120001688"])&&void 0!==n?n:"");this._moreInfo.href=q};d.prototype.update=function(q){var m=this,n,t=new g["default"];(null===(n=this._previousResult)||void 0===n?void 0:n.password)===q?t.resolve(this._previousResult):q?f["default"].checkPasswordStrength(q).then(function(z){var w=z.strength;m._strengthLabel.className="password-strength__label--"+w;m._strengthLabel.textContent=m.i18n.passwordStrengthMeter["score"+w];m._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--"+
w;var y=Object.keys(z).every(function(x){var A=z[x];return"strength"===x?1<A:!1!==A});y?k["default"].hideNode(m._moreInfo):k["default"].showNode(m._moreInfo);m._previousResult=a.__assign({password:q,isValidStrength:1<w,isValid:y},z);t.resolve(m._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:q,
isValid:!1,isValidStrength:!1},t.resolve(this._previousResult));return t};return d=a.__decorate([b["default"](l["default"],e["default"])],d)}()})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/clone ../utils/enterprise ../utils/promises ../utils/verified ../components/ManageBlockedApps/blocked-apps-service ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/io-query dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request esri/IdentityManager ../utils/itemsgroups ../utils/mapViewer".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);v=a.__importDefault(v);
return function(){function E(F){this.blockedApps=[];this.blockedAppsTimestamp=-1;this.userProfiles=new g["default"]({portal:this})}E.prototype.postscript=function(){};E.prototype._getSelf=function(F){var G=this,H,J=new q["default"],I=F+"portals/helpmap",R=F+"community/self",O=null===(H=v["default"].findCredential(F))||void 0===H?void 0:H.token;r["default"].eachAlways({selfResult:this.inherited(arguments),helpMapResult:this._hasHelpMap?r["default"].resolve(null):y["default"].PortalUtil.request(I,{culture:t["default"].locale}),
communitySelfResult:O?y["default"].PortalUtil.request(R,{returnUserLicensedItems:!0,token:O}):r["default"].resolve(null)}).then(function(P){var L,K,Q,W,ba,S;if(null===(L=P.selfResult)||void 0===L?0:L.error)J.reject(P.selfResult.error);else{var X={};if(null===(K=P.selfResult)||void 0===K?0:K.value)if(X=a.__assign(a.__assign({},X),P.selfResult.value),!G._hasHelpMap&&(null===(Q=P.helpMapResult)||void 0===Q?0:Q.value)&&(X=a.__assign(a.__assign({},X),P.helpMapResult.value)),null===(W=P.communitySelfResult)||
void 0===W?0:W.value)X=a.__assign(a.__assign({},X),{communitySelf:P.communitySelfResult.value}),G.canCreateGeoBIM=null===(S=null===(ba=G.communitySelf)||void 0===ba?void 0:ba.userLicensedItems)||void 0===S?void 0:S.find(function(aa){var M;return-1<(null===(M=null===aa||void 0===aa?void 0:aa.entitlements)||void 0===M?void 0:M.indexOf("geobim"))});G._hasHelpMap=G._hasHelpMap||!!X.helpMap;c["default"].self=a.__assign(a.__assign({},c["default"].self||{}),e["default"](X));X.isPortal?G.getPortalAppSettings().then(function(aa){if(aa&&
!aa.code&&aa.portalConfigProperties){var M=l["default"].copyPortalConfigProperties(aa.portalConfigProperties,c["default"]);Object.keys(M).forEach(function(da){c["default"][da]=M[da]})}J.resolve(X)},function(){J.resolve(X)}):J.resolve(X)}});return J};E.prototype.getPortalUser=function(){return this.portalUser};E.prototype.getEnvironment=function(){var F=this.customBaseUrl;F=null===F||void 0===F?void 0:F.split(".")[0].replace("maps","");return-1<(null===F||void 0===F?void 0:F.indexOf("dev"))?"dev":
-1<(null===F||void 0===F?void 0:F.indexOf("qa"))?"qa":""};E.prototype.getPortalAppSettings=function(){return b["default"].request({url:c["default"].restBaseUrl+"portals/self/settings"})};E.prototype.getDefaultMapViewer=function(){var F=this,G=new q["default"],H=this.portalUser,J=this.portalProperties,I=C.determineOrgMapViewer({mapViewer:null===J||void 0===J?void 0:J.mapViewer,created:this.created,subscriptionInfo:this.subscriptionInfo,isPortal:this.isPortal});this.defaultMapViewer?G.resolve(this.defaultMapViewer):
H?H.getDefaultMapViewer().then(function(R){F.defaultMapViewer=H.isOrgUser?R||I:R||I||C.MapViewerType.Classic;G.resolve(F.defaultMapViewer)}):(this.defaultMapViewer=I||C.MapViewerType.Modern,G.resolve(this.defaultMapViewer));return G};E.prototype.queryItems=function(F,G,H,J){var I=this,R,O=new q["default"],P=null!==(R=null===F||void 0===F?void 0:F.q)&&void 0!==R?R:F;R=null===P||void 0===P?void 0:P.match(/ownerfolder:([^\s]+)/);var L=(null===R||void 0===R?0:R.length)?R[0].split(":")[1]:null,K=this.url,
Q=this.portalUser;R=K+"search";F?(F.categories&&(R=R+"?categories\x3d"+F.categories,delete F.categories),"object"===typeof F&&"bbox"in F&&(F.sortField="bbox",F.srSort="true",F.spatialFilter="true",P=m["default"].queryToObject(document.URL.replace(/^[^\?]*\?/,"")),F.srsConfig="srsConfig"in P?P.srsConfig:"offset:.5,scale:2"),J&&(F.filter=J),this._queryPortal(R,y["default"].PortalUtil.formatQueryParams({},F,G),y["default"].PortalItem).then(function(W){return u.getAllItemsGroups({response:W,contentUser:H,
portalUser:Q,url:K})}).then(function(W){return I.toPortalItems(L,I.isAdminView,W)}).then(function(W){return I.addHighlights(W)}).then(function(W){return O.resolve(z["default"].mixin(W,{total:W.total,nextStart:W.nextQueryParams.start,start:W.queryParams.start}))})):O.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return y["default"].PortalResult(O)};E.prototype.getUserProfile=function(F){var G=new q["default"];this.userProfiles.find(F).then(function(H){return G.resolve(H)});return G};
E.prototype.getFederatedServers=function(){var F=new q["default"],G=this.getPortalUser(),H=this.url+"portals/self/servers/";G?b["default"].request({url:H}).then(function(J){b["default"].setFederatedServers((null===J||void 0===J?void 0:J.servers)||[]);F.resolve(J&&J.servers?J:null)}):F.resolve(null);return F};E.prototype.getHostedFederatedServers=function(){var F=new q["default"],G;this.getFederatedServers().then(function(H){var J;G=(null!==(J=null===H||void 0===H?void 0:H.servers)&&void 0!==J?J:[]).filter(function(I){return I.isHosted});
F.resolve(G[0])});return F};E.prototype.getFederatedServerByFunction=function(F){var G=new q["default"],H;this.getFederatedServers().then(function(J){var I;H=(null!==(I=null===J||void 0===J?void 0:J.servers)&&void 0!==I?I:[]).filter(function(R){var O;return-1<(null===(O=R.serverFunction)||void 0===O?void 0:O.indexOf(F))});G.resolve(H.shift())});return G};E.prototype.getManagedServers=function(){var F=new q["default"],G,H;this.getHostedFederatedServers().then(function(J){J?(G=J.adminUrl+"/admin/data/findItems",
b["default"].request({url:G,content:{managed:!0}},{useProxy:b["default"].shouldUseProxy(G)}).then(function(I){var R;H=(null!==(R=null===I||void 0===I?void 0:I.items)&&void 0!==R?R:I||[]).filter(function(O){var P;return"arcgis data store"===(null===(P=null===O||void 0===O?void 0:O.provider)||void 0===P?void 0:P.toLowerCase())});F.resolve(H)},function(){return F.resolve(null)})):F.resolve(null)});return F};E.prototype.getIsBackedBySDS=function(){var F=this,G,H,J,I,R,O,P,L=new q["default"],K=this.getPortalUser(),
Q=null!==(G=null===K||void 0===K?void 0:K.userRole)&&void 0!==G?G:{},W;x["default"].isDefined(this.isBackedBySDS)?L.resolve(this.isBackedBySDS):(G=(null===(H=Q.isAdmin)||void 0===H?void 0:H.call(Q))||(null===(J=Q.canManageSecurity)||void 0===J?void 0:J.call(Q))||(null===(I=Q.canManageServers)||void 0===I?void 0:I.call(Q))||(null===(R=Q.canUpdateOrgItems)||void 0===R?void 0:R.call(Q))||(null===(O=Q.canDeleteOrgItems)||void 0===O?void 0:O.call(Q)),this.isPortal&&K&&(G||(null===(P=Q.isBasedOnPublisher)||
void 0===P?0:P.call(Q)))?this.getManagedServers().then(function(ba){var S;W=null!==(S=null===ba||void 0===ba?void 0:ba[0])&&void 0!==S?S:null;F.isBackedBySDS=W?!0:!1;L.resolve(F.isBackedBySDS)}):(this.isBackedBySDS=!0,L.resolve(!0)));return L};E.prototype.getOrgIsVerified=function(F){var G,H=new q["default"];return!F&&x["default"].isDefined(this.isVerified)?(H.resolve(this.isVerified),H):this.queryItems({q:"(orgid: "+(F||(null===(G=this.portalUser)||void 0===G?void 0:G.orgId))+" AND contentstatus: public_authoritative)",
num:1}).then(function(J){return!!J.total})};E.prototype.getCategories=function(){var F=new q["default"];b["default"].request({url:this.url+"portals/"+this.id+"/categorySchema"}).then(function(G){return F.resolve(G.categorySchema)},function(G){return F.reject(G)});return F};E.prototype.getRegions=function(){var F,G,H=new q["default"],J=(null===(F=this.portalUser)||void 0===F?void 0:F.culture)||(null===(G=this.portal)||void 0===G?void 0:G.culture)||t["default"].locale||"en",I;b["default"].request({url:this.portalUrl+
"portals/regions",content:{culture:J}}).then(function(R){R&&R.length&&(I=R.sort(function(O,P){return"WO"===O.region?-1:O.localizedName.localeCompare(P.localizedName)}));H.resolve(I)});return H};E.prototype.getMemberDefaults=function(){var F=this,G=new q["default"];b["default"].request({url:this.url+"portals/self/userDefaultSettings"}).then(function(H){F.userDefaults=H;G.resolve()},function(){G.resolve()});return G};E.prototype.getHomePageConfig=function(){var F=this,G=new q["default"];b["default"].request({url:this.url+
"portals/self/resources/home.page.json"}).then(function(H){F.homePageConfig=H;G.resolve()},function(){G.resolve()});return G};E.prototype.toPortalItems=function(F,G,H){var J=this,I={},R=new q["default"];F&&"root"!==F&&z["default"].mixin(I,{folderId:F,ownerFolder:F});G&&(I.isAdminView=!0);this.getBlockedApps().then(function(){var O=H.results.map(function(P){var L=new h["default"](z["default"].mixin(P,I,{portal:J}));L.groupData=P.groupData;L.removeBlockedTypes(J.blockedApps);return k["default"].setVerifiedInfo(L)});
w["default"](O).then(function(P){H.items=P;R.resolve(H)},function(P){return 0})});return R};E.prototype.addHighlights=function(F){var G=new q["default"];if(!c["default"].deepLayerSearchEnabled)return G.resolve(F),G;var H=F.items.reduce(function(J,I){J[I.id]=I;return J},{});(F.highlights||[]).forEach(function(J){var I=H[J.id];if(I.sublayers){var R=Object.keys(J).filter(function(O){return"id"!==O&&O.includes("sublayers.")}).reduce(function(O,P){O[P.replace("sublayers.","")]=J[P].map(function(L){return L.replace("\x3cem\x3e",
"").replace("\x3c/em\x3e","")});return O},{});I.highlights=J;I.sublayers=I.sublayers.map(function(O){O.matched=Object.keys(O).some(function(P){var L;return null===(L=R[P])||void 0===L?void 0:L.some(function(K){return O[P].includes(K)})});return O})}});G.resolve(F);return G};E.prototype.formatThumbnailUrl=function(F){return y["default"].PortalUtil.formatUrl(this.portalUrl+"portals/self/resources/"+F)};E.prototype.getLocalizedOrgProperties=function(){var F=this,G,H,J=new q["default"],I=c["default"].restBaseUrl+
"portals/self/resources",R=null===(H=null===(G=this.portalUser)||void 0===G?void 0:G.credential)||void 0===H?void 0:H.token;G={f:"json"};R&&(G.token=R);A["default"]({url:I+"/localizedOrgProperties",content:G},{disableIdentityLookup:!0}).then(function(O){O&&!O.code?(F.localizedOrgProperties=O,F.localizedOrgProperties["default"]||(F.localizedOrgProperties["default"]={name:F.name,description:null})):F.createLocalizedOrgPropertiesDefault();J.resolve(F.localizedOrgProperties)},function(){F.createLocalizedOrgPropertiesDefault();
J.resolve(F.localizedOrgProperties)});return J};E.prototype.isTrialOrg=function(){var F,G=null===(F=this.subscriptionInfo)||void 0===F?void 0:F.type;return"Trial"===G||"Trial Press"===G||"Trial Developer"===G||"Developer Subscription"===G};E.prototype.canHavePartnerCollab=function(){var F="Organizational Plan;Community;In House;ConnectED;ELA;Education Site License;Education;HUP Online Entitlement;Demo and Marketing".split(";");return this.subscriptionInfo&&-1<F.indexOf(this.subscriptionInfo.type)};
E.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===this.portalDeploymentType};E.prototype.getGeoAnalyticsPlan=function(){var F;return null===(F=this.subscriptionInfo)||void 0===F?void 0:F.subType};E.prototype.getGeoAnalyticsBillingType=function(){var F;return null===(F=this.subscriptionInfo)||void 0===F?void 0:F.billingType};E.prototype.getRemainingCoreHours=function(){return this.availableCredits||0};E.prototype.getContentCategoryLimit=function(){var F=this,G=new q["default"];
if(this.isPortal||!this.id)return this.maxCategoriesPerItem=20,G.resolve(),G;b["default"].request({url:this.url+"portals/self/limits",content:{limitsType:"content",limitName:"MaxCategories"}}).then(function(H){F.maxCategoriesPerItem=(null===H||void 0===H?void 0:H.limitValue)||20;G.resolve()},function(){G.resolve()});return G};E.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={"default":{name:this.name,description:null}}};E.prototype.getBlockedApps=function(){var F=
this,G,H=new q["default"];if(null===(G=this.portalUser)||void 0===G||!G.orgId)return H.resolve(),H;f["default"].getBlockedApps().then(function(J){F.blockedApps=J;H.resolve()});return H};return E=a.__decorate([d["default"](y["default"].Portal,n["default"])],E)}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),function(D,
B,a,c,h,g,e,l,r,k){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);return function(){function f(b){this.NO_THUMBNAIL_PATH=h["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}f.prototype.find=function(b){var d=this,q=this.users,m="string"===typeof b?{username:b}:b,n=m&&m.username;m="deletedUser"===n;var t={username:m?l["default"].common.deletedUser:
n,thumbnailUrl:this.NO_THUMBNAIL_PATH},z=new e["default"];"fetching"===q[n]?setTimeout(function(){d.find(b).then(function(w){z.resolve(w)})},50):q[n]?z.resolve(q[n]):m?(q[n]=r["default"].mixin({},{isDeleted:!0},t),z.resolve(q[n])):(q[n]="fetching",this.getUserProfile(n).then(function(w){q[n]=w;z.resolve(q[n])},function(){q[n]=r["default"].mixin({},t);z.resolve(q[n])}));return z};f.prototype.getUserProfile=function(b){var d=this,q=new e["default"],m;h["default"].request({url:this.portal.portalUrl+
"community/users/"+b}).then(function(n){m=new c["default"](r["default"].mixin(n,{portal:d.portal}));q.resolve(m)});return q};return f=a.__decorate([g["default"](k["default"])],f)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(D,B){return function(){function a(){}a.clearState=function(c){null===c||void 0===c?void 0:c.forEach(function(h){var g,e,l;null===h||void 0===h?void 0:h.removeAttribute("aria-live");null===(g=null===h||void 0===h?void 0:h.classList)||
void 0===g?void 0:g.remove("input-success");null===(e=null===h||void 0===h?void 0:h.classList)||void 0===e?void 0:e.remove("input-error");null===(l=null===h||void 0===h?void 0:h.classList)||void 0===l?void 0:l.remove("is-active")})};a.setValidState=function(c){var h;null===(h=null===c||void 0===c?void 0:c.classList)||void 0===h?void 0:h.add("input-success")};a.setInvalidState=function(c,h,g,e){var l,r,k;null===(l=null===c||void 0===c?void 0:c.classList)||void 0===l?void 0:l.add("input-error");null===
(r=null===h||void 0===h?void 0:h.classList)||void 0===r?void 0:r.add("is-active");h&&g&&(null===h||void 0===h?void 0:h.setAttribute("aria-live","polite"),h.innerHTML=g);e&&(null===(k=null===c||void 0===c?void 0:c.focus)||void 0===k?void 0:k.call(c))};a.focusFirstInvalidInput=function(c){var h;c=null!==(h=null===c||void 0===c?void 0:c.querySelector(".input-error"))&&void 0!==h?h:void 0;(null===c||void 0===c?0:c.focus)&&c.focus()};a.toggleError=function(c,h,g,e){g?a.setInvalidState(c,h,e):a.clearState([c,
h])};return a}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase","../util","../../esriGeowConfig"],function(D,B,a,c){var h=D([B],{helpBaseUrl:null,helpTopics:null,_isSingleTenant:!1,postCreate:function(){this._isSingleTenant=void 0!==c.isMultiTenant&&null!==c.isMultiTenant&&!1===c.isMultiTenant;this.helpBaseUrl=c.self.helpBase;this._load()},_load:function(){c.self.helpMap&&c.self.helpMap.m?(this.helpTopics=c.self.helpMap.m,this.onLoad(this.helpBaseUrl,
this.helpTopics)):a.request({url:c.restBaseUrl+"portals/helpmap"}).then(function(g){!g||g.code||g.message||(this.helpBaseUrl=g.helpBase,this.helpTopics=g.helpMap&&g.helpMap.m||{},this.onLoad(this.helpBaseUrl,this.helpTopics))}.bind(this))},onLoad:function(g,e){},isLoaded:function(){return this.helpBaseUrl&&this.helpTopics},getHelpUrl:function(g){return this.isLoaded()?this.helpBaseUrl+this.helpTopics[g]:"#"}});h.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=
new h);return this._instance}};return h})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m){B=B("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(n,
t){c.mixin(this,n);var z=this,w=z.transition,y=z._transitions={};z._idMap={};var x=z.transitionParams=eval("({ "+z.transitionParams+" })");t=z._domNode=e.byId(t);z._domNodeContentBox=k.getContentBox(t);z.id=t.id||(new Date).getTime();"static"==f.get(t,"position")&&f.set(t,"position","relative");y[w]=c.getObject(w);y[w]||(this._transitionWarn(w,"dojox.widget.rotator.swap"),y[z.transition="dojox.widget.rotator.swap"]=c.getObject("dojox.widget.rotator.swap"));x.duration||(x.duration=500);h.forEach(z.panes,
function(A){r.create("div",A,t)});z.panes=[];m("\x3e *",t).forEach(function(A,v){z._initializePane(A,v)});z._controlSub=b.subscribe(z.id+"/rotator/control",c.hitch(z,this.control))},insert:function(n,t){var z=this.panes;null==t&&(t=z.length);t<z.length?(z=z[t],r.place(n,z.node,"before")):r.place(n,this._domNode,"last");this._initializePane(n,t)},remove:function(n){function t(A){var v=w.splice(A,1)[0];v&&(v.id&&(z._idMap[v.id]=void 0),z._domNode.removeChild(v.node));z.idx>A&&z.idx--}var z=this,w=this.panes;
if("number"===typeof n)var y=n;else{for(var x=0;x<w.length;x++)if(w[x].node===n){y=x;break}if(null==y)return}if(y===this.idx&&(n=this.go(this.idx-1)))return n.then(function(){t(y)});t(y)},destroy:function(){h.forEach([this._controlSub,this.wfe],function(n){n&&n.remove()});r.destroy(this._domNode);this.panes=[]},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(n){var t=this,z=t.idx,w=t.panes,y=w.length,x=t._idMap[n];t._resetWaitForEvent();n=null!=
x?x:n||0;n=n<y?0>n?y-1:n:0;if(n==z||t.anim)return null;var A=w[z],v=w[n];f.set(A.node,"zIndex",2);f.set(v.node,"zIndex",1);var u={current:A,next:v,rotator:t};if(z=t.anim=t._transitions[v.trans](c.mixin({rotatorBox:t._domNodeContentBox},u,v.params))){var C=new a,E=v.waitForEvent,F=D.after(z,"onEnd",function(){f.set(A.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});F.remove();t.anim=null;t.idx=n;if(A.onAfterOut)A.onAfterOut(u);if(v.onAfterIn)v.onAfterIn(u);t.onUpdate("onAfterTransition");E||
(t._resetWaitForEvent(),C.callback())},!0);t.wfe=E?b.subscribe(E,function(){t._resetWaitForEvent();C.callback(!0)}):null;t.onUpdate("onBeforeTransition");if(A.onBeforeOut)A.onBeforeOut(u);if(v.onBeforeIn)v.onBeforeIn(u);z.play();return C}},onUpdate:function(n,t){b.publish(this.id+"/rotator/update",n,this,t||{})},_initializePane:function(n,t){var z={node:n,idx:t,params:c.mixin({},this.transitionParams,eval("({ "+(l.get(n,"transitionParams")||"")+" })"))},w=z.trans=l.get(n,"transition")||this.transition,
y=this._transitions,x=this.panes,A={left:0,top:0,position:"absolute",display:"none"};h.forEach(["id","title","duration","waitForEvent"],function(v){z[v]=l.get(n,v)});z.id&&(this._idMap[z.id]=t);y[w]||(y[w]=c.getObject(w))||this._transitionWarn(w,z.trans=this.transition);if(null==this.idx||l.get(n,"selected"))null!=this.idx&&f.set(x[this.idx].node,"display","none"),this.idx=t,A.display="";f.set(n,A);m("\x3e script[type^\x3d'dojo/method']",n).orphan().forEach(function(v){var u=l.get(v,"event");u&&(z[u]=
q._functionFromScript(v))});x.splice(t,0,z)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(n){var t=c._toArray(arguments),z=this;t.shift();z._resetWaitForEvent();z[n]&&((t=z[n].apply(z,t))&&t.addCallback(function(){z.onUpdate(n)}),z.onManualChange(n))},resize:function(n,t){var z=this._domNodeContentBox={w:n,h:t};k.setContentSize(this._domNode,z);h.forEach(this.panes,function(w){k.setContentSize(w.node,z)})},onManualChange:function(){},_transitionWarn:function(n,
t){}});c.setObject("dojox.widget.rotator.swap",function(n){return new g.Animation({play:function(){f.set(n.current.node,"display","none");f.set(n.next.node,"display","");this._fire("onEnd")}})});return B})},"dojo/fx/easing":function(){define(["../_base/lang"],function(D){var B={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},
cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(Math.PI/
2*a)+1},sineOut:function(a){return Math.sin(Math.PI/2*a)},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=
2;return 1>a?-.5*(Math.sqrt(1-Math.pow(a,2))-1):.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){--a;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;--a;return-1*Math.pow(2,10*a)*Math.sin(2*(a-.075)*Math.PI/.3)},elasticOut:function(a){return 0==a||1==a?a:
Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var c=.3*1.5,h=c/4;if(1>a)return--a,-.5*Math.pow(2,10*a)*Math.sin(2*(a-h)*Math.PI/c);--a;return.5*Math.pow(2,-10*a)*Math.sin(2*(a-h)*Math.PI/c)+1},bounceIn:function(a){return 1-B.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*Math.pow(a,2):a<2/2.75?7.5625*Math.pow(a-1.5/2.75,2)+.75:a<2.5/2.75?7.5625*Math.pow(a-2.25/2.75,2)+.9375:7.5625*Math.pow(a-2.625/2.75,2)+.984375},
bounceInOut:function(a){return.5>a?B.bounceIn(2*a)/2:B.bounceOut(2*a-1)/2+.5}};D.setObject("dojo.fx.easing",B);return B})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),function(D,B,a,c,h,g){return D("dojox.widget.AutoRotator",g,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,cycles:-1,random:!1,reverse:!1,constructor:function(){var e=this;e.cycles-0==e.cycles&&0<e.cycles?e.cycles++:
e.cycles=e.cycles?-1:0;e._signals=[c(e._domNode,h.enter,function(){if(e.suspendOnHover&&!e.anim&&!e.wfe){var l=e._endTime,r=e._now();e._suspended=!0;e._resetTimer();e._resumeDuration=l>r?l-r:.01}}),c(e._domNode,h.leave,function(){e.suspendOnHover&&!e.anim&&(e._suspended=!1,e.playing&&!e.wfe&&e.play(!0))})];e.autoStart&&1<e.panes.length?e.play():e.pause()},destroy:function(){B.forEach(this._signals,function(e){e.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},
play:function(e,l){this.playing=!0;this._resetTimer();!0!==e&&0<this.cycles&&this.cycles--;if(0==this.cycles)this.pause();else if(!this._suspended)if(this.onUpdate("play"),l)this._cycle();else{var r=(this._resumeDuration||0)-0;r=(0<r?r:this.panes[this.idx].duration||this.duration)-0;this._resumeDuration=0;this._endTime=this._now()+r;this._timer=setTimeout(a.hitch(this,"_cycle",!1),r)}},pause:function(){this.playing=this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},
_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(e){var l=this;e=l.idx;if(l.random){do var r=Math.floor(Math.random()*l.panes.length+1);while(r==e)}else r=e+(l.reverse?-1:1);(e=l.go(r))&&e.addCallback(function(k){l.onUpdate("cycle");l.playing&&l.play(!1,k)})},onManualChange:function(e){this.cycles=-1;"play"!=e&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());this.playing&&this.play()}})})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),
function(D,B,a,c,h,g,e){return D("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",constructor:function(l,r){B.mixin(this,l);var k=this.rotator;if(k){for(;r.firstChild;)r.removeChild(r.firstChild);var f=this._domNode=a.create("ul",null,r),b=function(d,q,m){a.create("li",{className:q,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+d+"\x3c/span\x3e\x3c/a\x3e",onclick:function(n){c.stop(n);k&&k.control.apply(k,m)}},f)};h.forEach(this.commands.split(","),function(d,
q){switch(d){case "prev":b("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":b("Play","dojoxRotatorPlay dojoxRotatorIcon",["play"]);b("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=a.create("li",{className:"dojoxRotatorInfo",innerHTML:this._buildInfo(k)},f);break;case "next":b("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(var m=0;m<k.panes.length;m++)b("#"==d?m+1:k.panes[m].title||"Tab "+(m+1),
("#"==d?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(m==k.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+m,["go",m])}},this);e("li:first-child",f).addClass("dojoxRotatorFirst");e("li:last-child",f).addClass("dojoxRotatorLast");this._togglePlay();this._con=g.connect(k,"onUpdate",this,"_onUpdate")}},destroy:function(){g.disconnect(this._con);a.destroy(this._domNode)},_togglePlay:function(l){l=this.rotator.playing;e(".dojoxRotatorPlay",this._domNode).style("display",l?"none":"");e(".dojoxRotatorPause",
this._domNode).style("display",l?"":"none")},_buildInfo:function(l){return"\x3cspan\x3e"+(l.idx+1)+" / "+l.panes.length+"\x3c/span\x3e"},_onUpdate:function(l){var r=this.rotator;switch(l){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=this._buildInfo(r)),l=function(k){r.idx<k.length&&a.addClass(k[r.idx],"dojoxRotatorSelected")},l(e(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),l(e(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},
"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(D,B,a,c){function h(e,l){var r=e.next.node;a.set(r,{display:"",opacity:0});e.node=e.current.node;return c[l]([B.fadeOut(e),B.fadeIn(D.mixin(e,{node:r}))])}var g={fade:function(e){return h(e,"chain")},crossFade:function(e){return h(e,"combine")}};D.mixin(D.getObject("dojox.widget.rotator"),g);return g})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q){c=B("dijit.layout._StackButton",q,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(m){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});B=B("dijit.layout.StackController",[f,b,d],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:c,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(m){return k.byId(this.id+
"_"+m)},postCreate:function(){this.inherited(arguments);this.own(l.subscribe(this.containerId+"-startup",g.hitch(this,"onStartup")),l.subscribe(this.containerId+"-addChild",g.hitch(this,"onAddChild")),l.subscribe(this.containerId+"-removeChild",g.hitch(this,"onRemoveChild")),l.subscribe(this.containerId+"-selectChild",g.hitch(this,"onSelectChild")),l.subscribe(this.containerId+"-containerKeyDown",g.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(e(this.containerNode,"click",
g.hitch(this,function(m){var n=k.getEnclosingWidget(m.target);if(n!=this.containerNode&&!n.disabled&&n.page)for(m=m.target;m!==this.containerNode;m=m.parentNode)if(a.contains(m,this.buttonWidgetCloseClass)){this.onCloseButtonClick(n.page);break}else if(m==n.domNode){this.onButtonClick(n.page);break}})))},onStartup:function(m){this.textDir=m.textDir;D.forEach(m.children,this.onAddChild,this);if(m.selected)this.onSelectChild(m.selected);var n=k.byId(this.containerId).containerNode,t=g.hitch(this,"pane2button");
m={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var z=function(y,x){return e(n,"attrmodified-"+y,function(A){var v=t(A.detail&&A.detail.widget&&A.detail.widget.id);v&&v.set(x,A.detail.newValue)})},w;for(w in m)this.own(z(w,m[w]))},destroy:function(m){this.destroyDescendants(m);this.inherited(arguments)},onAddChild:function(m,n){var t=new (g.isString(this.buttonWidget)?g.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+m.id,name:this.id+"_"+m.id,label:m.title,disabled:m.disabled,ownerDocument:this.ownerDocument,dir:m.dir,lang:m.lang,textDir:m.textDir||this.textDir,showLabel:m.showTitle,iconClass:m.iconClass,closeButton:m.closable,title:m.tooltip,page:m});this.addChild(t,n);m.controlButton=t;if(!this._currentChild)this.onSelectChild(m);t=m._wrapper.getAttribute("aria-labelledby")?m._wrapper.getAttribute("aria-labelledby")+" "+t.id:t.id;m._wrapper.removeAttribute("aria-label");m._wrapper.setAttribute("aria-labelledby",
t)},onRemoveChild:function(m){this._currentChild===m&&(this._currentChild=null);var n=this.pane2button(m.id);n&&(this.removeChild(n),n.destroy());delete m.controlButton},onSelectChild:function(m){if(m){if(this._currentChild){var n=this.pane2button(this._currentChild.id);n.set("checked",!1);n.focusNode.setAttribute("tabIndex","-1")}n=this.pane2button(m.id);n.set("checked",!0);this._currentChild=m;n.focusNode.setAttribute("tabIndex","0");k.byId(this.containerId)}},onButtonClick:function(m){var n=this.pane2button(m.id);
r.focus(n.focusNode);this._currentChild&&this._currentChild.id===m.id&&n.set("checked",!0);k.byId(this.containerId).selectChild(m)},onCloseButtonClick:function(m){k.byId(this.containerId).closeChild(m);this._currentChild&&(m=this.pane2button(this._currentChild.id))&&r.focus(m.focusNode||m.domNode)},adjacent:function(m){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(m=!m);var n=this.getChildren(),t=D.indexOf(n,this.pane2button(this._currentChild.id)),z=n[t];do{t=(t+
(m?1:n.length-1))%n.length;var w=n[t]}while(w.disabled&&w!=z);return w},onkeydown:function(m,n){if(!this.disabled&&!m.altKey){var t=null;if(m.ctrlKey||!m._djpage){switch(m.keyCode){case h.LEFT_ARROW:case h.UP_ARROW:m._djpage||(t=!1);break;case h.PAGE_UP:m.ctrlKey&&(t=!1);break;case h.RIGHT_ARROW:case h.DOWN_ARROW:m._djpage||(t=!0);break;case h.PAGE_DOWN:m.ctrlKey&&(t=!0);break;case h.HOME:for(var z=this.getChildren(),w=0;w<z.length;w++){var y=z[w];if(!y.disabled){this.onButtonClick(y.page);break}}m.stopPropagation();
m.preventDefault();break;case h.END:z=this.getChildren();for(w=z.length-1;0<=w;w--)if(y=z[w],!y.disabled){this.onButtonClick(y.page);break}m.stopPropagation();m.preventDefault();break;case h.DELETE:case 87:this._currentChild.closable&&(m.keyCode==h.DELETE||m.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),m.stopPropagation(),m.preventDefault());break;case h.TAB:m.ctrlKey&&(this.onButtonClick(this.adjacent(!m.shiftKey).page),m.stopPropagation(),m.preventDefault())}null!==t&&(this.onButtonClick(this.adjacent(t).page),
m.stopPropagation(),m.preventDefault())}}},onContainerKeyDown:function(m){m.e._djpage=m.page;this.onkeydown(m.e)}});B.StackButton=c;return B})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(D,B,a){D.provide("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.declare("arcgisonline.sharing.dijit.TextMenu",[B._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",
href:"#",iconClass:null}],labelNode:null,triggerNode:null,menu:null,handlers:[],constructor:function(c){D.mixin(this,c)},postCreate:function(){this.menu=(new B.Menu({})).placeAt(D.body());D.addClass(this.menu.domNode,"esriTextMenu");B.popup.moveOffScreen(this.menu.domNode);null!==this.textMenuItems&&this._renderItems(this.textMenuItems);D.style(this.triggerNode,"cursor","hand");D.style(this.triggerNode,"cursor","pointer");this.handlers.push(D.connect(this.triggerNode,"onclick",this,this.show));D.connect(this.menu,
"onMouseLeave",D.hitch(this,function(){this.hide()}))},show:function(c){c.preventDefault();B.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:D.hitch(this,this.hide),onCancel:D.hitch(this,this.hide)});this.menu.focus()},hide:function(){B.popup.close(this.menu)},destroy:function(){this.hide();D.forEach(this.handlers,function(c){D.disconnect(c)});D.forEach(D.query(".esriTextMenuItem"),function(c){B.byNode(c).destroy()},this);this.menu.destroy();this.inherited(arguments)},
_renderItems:function(c){D.forEach(c,function(h){h=new B.MenuItem(h);D.addClass(h.domNode,"esriTextMenuItem");this.menu.addChild(h)},this)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(D){return D._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(D,B,
a,c){var h=B("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(g){if(this._hash[g.id])throw Error("Tried to register widget with id\x3d\x3d"+g.id+" but that id is already registered");this._hash[g.id]=g;this.length++},remove:function(g){this._hash[g]&&(delete this._hash[g],this.length--)},forEach:function(g,e){e=e||a.global;var l=0,r;for(r in this._hash)g.call(e,this._hash[r],l++,this._hash);return this},filter:function(g,e){e=e||a.global;var l=new h,r=0,k;for(k in this._hash){var f=
this._hash[k];g.call(e,f,r++,this._hash)&&l.add(f)}return l},byId:function(g){return this._hash[g]},byClass:function(g){var e=new h,l;for(l in this._hash){var r=this._hash[l];r.declaredClass==g&&e.add(r)}return e},toArray:function(){var g=[],e;for(e in this._hash)g.push(this._hash[e]);return g},map:function(g,e){return D.map(this.toArray(),g,e)},every:function(g,e){e=e||a.global;var l=0,r;for(r in this._hash)if(!g.call(e,this._hash[r],l++,this._hash))return!1;return!0},some:function(g,e){e=e||a.global;
var l=0,r;for(r in this._hash)if(g.call(e,this._hash[r],l++,this._hash))return!0;return!1}});D.forEach("forEach filter byClass map every some".split(" "),function(g){c[g]=h.prototype[g]});return h})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(D,B,a,c,h,g,e,l){g.focus=function(r){if(r){var k="node"in r?r.node:r,f=r.bookmark;r=r.openedForWindow;var b=f?f.isCollapsed:!1;if(k){var d="iframe"==
k.tagName.toLowerCase()?k.contentWindow:k;if(d&&d.focus)try{d.focus()}catch(q){}g._onFocusNode(k)}if(f&&h.withGlobal(r||h.global,l.isCollapsed)&&!b){r&&r.focus();try{h.withGlobal(r||h.global,l.moveToBookmark,null,[f])}catch(q){}}}};g.watch("curNode",function(r,k,f){l._curFocus=f;l._prevFocus=k;f&&c.publish("focusNode",f)});g.watch("activeStack",function(r,k,f){l._activeStack=f});g.on("widget-blur",function(r,k){c.publish("widgetBlur",r,k)});g.on("widget-focus",function(r,k){c.publish("widgetFocus",
r,k)});a.mixin(l,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return l.getBookmark().isCollapsed},getBookmark:function(){return(h.global==window?e:new e.SelectionManager(h.global)).getBookmark()},moveToBookmark:function(r){return(h.global==window?e:new e.SelectionManager(h.global)).moveToBookmark(r)},getFocus:function(r,k){var f=!g.curNode||r&&B.isDescendant(g.curNode,r.domNode)?l._prevFocus:g.curNode;return{node:f,bookmark:f&&f==g.curNode&&h.withGlobal(k||h.global,l.getBookmark),openedForWindow:k}},
_activeStack:[],registerIframe:function(r){return g.registerIframe(r)},unregisterIframe:function(r){r&&r.remove()},registerWin:function(r,k){return g.registerWin(r,k)},unregisterWin:function(r){r&&r.remove()}});return l})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(D,B,a,c,h){var g={getViewport:function(){return a.getBox()}};g.placeOnScreen=c.at;g.placeOnScreenAroundElement=function(e,l,r,k){if(B.isArray(r))var f=r;else{f=
[];for(var b in r)f.push({aroundCorner:b,corner:r[b]})}return c.around(e,l,f,!0,k)};g.placeOnScreenAroundNode=g.placeOnScreenAroundElement;g.placeOnScreenAroundRectangle=g.placeOnScreenAroundElement;g.getPopupAroundAlignment=function(e,l){var r={};D.forEach(e,function(k){var f=l;switch(k){case "after":r[l?"BR":"BL"]=l?"BL":"BR";break;case "before":r[l?"BL":"BR"]=l?"BR":"BL";break;case "below-alt":f=!f;case "below":r[f?"BL":"BR"]=f?"TL":"TR";r[f?"BR":"BL"]=f?"TR":"TL";break;case "above-alt":f=!f;default:r[f?
"TL":"TR"]=f?"BL":"BR",r[f?"TR":"TL"]=f?"BR":"BL"}});return r};B.mixin(h,g);return h})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(D,B,a){var c=a._createWrapper;a._createWrapper=function(g){g.declaredClass||(g={_popupWrapper:g.parentNode&&D.contains(g.parentNode,"dijitPopup")?g.parentNode:null,domNode:g,destroy:function(){},ownerDocument:g.ownerDocument,ownerDocumentBody:B.body(g.ownerDocument)});return c.call(this,g)};var h=
a.open;a.open=function(g){if(g.orient&&"string"!=typeof g.orient&&!("length"in g.orient)){var e=[],l;for(l in g.orient)e.push({aroundCorner:l,corner:g.orient[l]});g.orient=e}return h.call(this,g)};return a})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(D,B){B.scrollIntoView=function(a,c){D.scrollIntoView(a,c)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr",
"dojo/_base/lang","../main","../hccss"],function(D,B,a){B.mixin(a,{hasWaiRole:function(c,h){var g=this.getWaiRole(c);return h?-1<g.indexOf(h):0<g.length},getWaiRole:function(c){return B.trim((D.get(c,"role")||"").replace("wairole:",""))},setWaiRole:function(c,h){D.set(c,"role",h)},removeWaiRole:function(c,h){var g=D.get(c,"role");g&&(h?(g=B.trim((" "+g+" ").replace(" "+h+" "," ")),D.set(c,"role",g)):c.removeAttribute("role"))},hasWaiState:function(c,h){return c.hasAttribute?c.hasAttribute("aria-"+
h):!!c.getAttribute("aria-"+h)},getWaiState:function(c,h){return c.getAttribute("aria-"+h)||""},setWaiState:function(c,h,g){c.setAttribute("aria-"+h,g)},removeWaiState:function(c,h){c.removeAttribute("aria-"+h)}});return a})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(D,B){B.getDocumentWindow=function(a){return D.get(a)}})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),
function(D,B,a,c,h){return D("dijit.form.ComboButton",c,{templateString:h,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(g){g.keyCode==B[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(a.focus(this._popupStateNode),g.stopPropagation(),g.preventDefault())},_onArrowKeyDown:function(g){g.keyCode==
B[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(a.focus(this.titleNode),g.stopPropagation(),g.preventDefault())},focus:function(g){this.disabled||a.focus("start"==g?this.titleNode:this._popupStateNode)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(D,B,a){return D("dijit.form.RadioButton",[B,a],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(D,B,a,c,h,g){return B("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var e=[];h("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(c.hitch(this,function(l){l.name==this.name&&l.form==this.focusNode.form&&(l=g.getEnclosingWidget(l))&&e.push(l)}));return e},_setCheckedAttr:function(e){this.inherited(arguments);this._created&&e&&D.forEach(this._getRelatedWidgets(),c.hitch(this,function(l){l!=this&&l.checked&&l.set("checked",!1)}))},_getSubmitValue:function(e){return null==
e?"on":e},_onClick:function(e){if(this.checked||this.disabled)return e.stopPropagation(),e.preventDefault(),!1;if(this.readOnly)return e.stopPropagation(),e.preventDefault(),D.forEach(this._getRelatedWidgets(),c.hitch(this,function(k){a.set(this.focusNode||this.domNode,"checked",k.checked)})),!1;var l=!1,r;D.some(this._getRelatedWidgets(),function(k){return k.checked?(r=k,!0):!1});this.checked=!0;r&&(r.checked=!1);if(!1===this.onClick(e)||e.defaultPrevented)l=!0;this.checked=!1;r&&(r.checked=!0);
l?e.preventDefault():this.set("checked",!0);return!l}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(D,B,a,c,h,g,e){return D("dijit.PopupMenuItem",e,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var l=c("*",this.srcNodeRef);this.inherited(arguments,[l[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(l,r){var k=this.popup;
h.open(a.delegate(l,{popup:this.popup,around:this.domNode}));r&&k.focus&&k.focus()},_closePopup:function(){h.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var l=c("[widgetId]",this.dropDownContainer)[0];this.popup=g.byNode(l)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&
B.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(l){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(l),delete this.popup);this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],
function(D,B,a){D.provide("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.dijit.views");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dojo.NodeList-fx");D.require("dijit.layout.ContentPane");D.require("arcgisonline.sharing.util");D.require("dijit.form.Button");D.requireLocalization("arcgisonline","arcgisonline");D.require("arcgisonline.sharing.geow.QueryReadStore");D.declare("arcgisonline.sharing.dijit.Gallery",[B._Widget,B._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},D.create("div",{id:this.id+"_popup"},D.body())),this._galleryFadeIn=D.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=D.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=D.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),D.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(D.connect(this,"onContentChange",this,this._layoutPageControls),D.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(c,h){var g=this.tooltip.domNode,e;esriGeowConfig.isRightToLeft||(e=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(e=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});e=B.placeOnScreenAroundNode(g,c,e);this.tooltip.set("content",this._buildItemDetailsLayout(h,e,c));if(this.showThumbnailInDetails){var l="none"==D.style(g,"display");l&&D.style(g,{visibility:"hidden",display:"block"});var r=D.contentBox(g),k=D.coords(g);l&&D.style(g,{visibility:"",display:"none"});"TR"==e.aroundCorner?(D.style(g,"top",k.t-r.t+"px"),D.style(g,"left",k.l+r.l+"px")):"TL"==e.aroundCorner&&(D.style(g,"top",k.t-r.t+"px"),D.style(g,"left",k.l-r.l+"px"))}this._highlightNode(h);
this.tooltip.show()},node_onMouseEnter:function(c){var h=c.currentTarget,g=this._getItemByNode(h);this.onNodeMouseEnter(c,g);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(D.hitch(this,function(){this._showTooltip(h,g)}),this.showDelay)))},node_onMouseLeave:function(c){this._timer&&(clearTimeout(this._timer),this._timer=null);var h=this._getItemByNode(c.currentTarget);
this.onNodeMouseLeave(c,h)},tooltip_onMouseLeave:function(c){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(c){c=D.byId("galleryNode_"+c.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):D.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&D.addClass(c,this.nodeHighlightClass);this._lastFocusedNode=c},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):D.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&D.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(c){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=D.hitch(this,function(h){D.empty(this.flowContainer);0<h.length?(this.maxNodes&&(h=h.splice(0,this.maxNodes)),D.forEach(h,D.hitch(this,function(g,e){g.id||(g.id=e);this.flowContainer.appendChild(this._buildNodeLayout(g,
e<this.largeNodes))})),D.create("br",{style:{clear:"both"}},this.flowContainer),h=D.query("."+this.nodeClass,this.domNode),h.connect("onmouseenter",this,this.node_onMouseEnter),h.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&D.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):D.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},c);this._galleryFadeOutTotal.play()},clear:function(c){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();D.empty(this.flowContainer);D.empty(this._pages);D.create("span",{innerHTML:c,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(c,h){var g=D.create("div",{id:"galleryNode_"+c.id,"class":this.nodeClass});D.addClass(g,h?"large":
"small");var e=arcgisonline.sharing.util,l=e.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==c.type&&(l=e.getStaticImagesUrl()+"/webapp.png");l="Mobile Application"==c.type?e.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===c.type||"Scene Service"===c.type?e.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===c.type?e.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===c.type?e.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===c.type?e.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===c.type?e.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===c.type?e.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?e.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===c.type?e.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===c.type?e.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===c.type?e.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
e.getStaticImagesUrl()+"/desktopapp.png";e.getGalleryMainLinkInfo(c);e=D.create("a",{href:"#"},g);D.connect(e,"onclick",this,this.onNodeClick,c);D.create("img",{"class":this.thumbClass,alt:c.snippet||"",src:c.thumbnail?this._getThumbailUrl(c):l},e);this.showNodeLabels&&(l=D.create("div",{"class":"galleryLabelContainer"},g),e=c.title||"",D.create("span",{innerHTML:e,alt:e,title:e},l));return g},_buildItemDetailsLayout:function(c,h,g){return arcgisonline.sharing.dijit.views.item.medium(c,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==h.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(c){for(;!D.hasClass(c,this.nodeClass);)c=c.parentNode;c=c.id.substr(c.id.indexOf("_")+1);for(var h=0;h<this.items.length;h++)if(this.items[h].id==c)return this.items[h];return null},_getThumbailUrl:function(c){var h=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/info/"+c.thumbnail+(h?"?token\x3d"+h:"")},_layoutPageControls:function(){D.empty(this._pages);
if(1!==this.pageCount){for(var c=1;c<=this.pageCount;c++){var h=D.create("span",{innerHTML:c},D.create("a",{onclick:D.hitch(this,this.goToPage,c)},this._pages));c==this.currentPage&&D.addClass(h,"currentPage")}1==this.currentPage?D.style(this._prev.domNode,"visibility","hidden"):D.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?D.style(this._next.domNode,"visibility","hidden"):D.style(this._next.domNode,"visbility","")}},nextPage:function(c){this.currentPage<this.pageCount&&
(!c.keyCode||13===c.keyCode||32===c.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(c){1<this.currentPage&&(!c.keyCode||13===c.keyCode||32===c.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(c){0<this.pageCount&&!isNaN(c)&&0<c&&(this._suspendTooltip=!0,this._loadRange((c-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=c,this.onPageChange(this.currentPage,-1))},_loadRange:function(c,h){var g=D.clone(this.items);this._loadItems(g.splice(c,h))},_setItemsAttr:function(c){this.items=
this.includeNode?D.filter(c,this.includeNode):c;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(c,h){},onContentChange:function(c){},onNodeClick:function(c,h){},onNodeMouseEnter:function(c,h){},onNodeMouseLeave:function(c,h){}});D.declare("arcgisonline.sharing.dijit._GalleryContentPane",B.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);D.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});D.style(this.domNode,esriGeowConfig.isRightToLeft||-1<D.indexOf(["ar","he"],D.locale)?"right":"left","-1000px");this.fadeIn=D.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=D.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:D.hitch(this,"_afterFade")})},_afterFade:function(){D.style(this.domNode,
{top:"-1000px"});D.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(c){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):D.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):D.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(D,B,a){D.provide("arcgisonline.sharing.dijit.views");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("arcgisonline.pages.organization.widgets.ProfilePopup");D.require("arcgisonline.pages.portal.Portal");D.require("arcgisonline.pages.utils.arrays");D.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);D.mixin(this._i18n,{source:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});D.mixin(this._i18n,{visitOrganization:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(c,h,g){var e=D.create,l=e("div",{"class":this.detailClass+" small"}),r=this._util.getGalleryMainLinkInfo(c);h&&(h=e("div",{"class":this.thumbContainerClass},l),D.addClass(l,g),e("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},e("a",{href:r.href||"#",target:r.target,alt:r.tip,title:r.tip},h)));e("a",{href:"#",innerHTML:c.title},e("span",{"class":this.titleClass},l));g=this._util.getSnippet(c.snippet,c.description);e("span",{"class":this.snippetClass,innerHTML:g},l);c=arcgisonline.sharing.geow.Content.changeTypename(c)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+c.owner+"\x3c/span\x3e ("+this._util.toFullDateString(c.modified)+")";e("span",{innerHTML:c},l);return l},mediumFormat:function(c,h){return this.medium(h,!0,"left")},itemLinkInfo:function(c){var h=this._util.getGalleryMainLinkInfo(c);c=this._util.getItemDetailsLinkInfo(c);return{openLink:h,detailLink:c}},medium:function(c,h){var g=D.create,e=g("div",{"class":this.detailClass+" medium"});if(h.unshareHandler){var l=
g("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},e);g("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},l);D.connect(l,"onclick",D.partial(h.unshareHandler,c.id,e))}var r=this.itemLinkInfo(c);l=r.openLink;r=r.detailLink;if(h.showThumb){var k=g("div",{"class":this.thumbContainerClass},e);D.addClass(e,
h.align||"left");if(c.thumbnail&&0<c.thumbnail.length){var f=g("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},g("a",{href:l.href||"#",target:l.target,alt:l.tip,title:l.tip},k));l.onclick&&D.connect(f,"onclick",l.onclick)}else f=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),f="Web Mapping Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===c.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===c.type||"Scene Service"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",f=g("img",{src:f,"class":this.thumbClass},g("a",{href:l.href||"#",target:l.target,alt:l.tip,title:l.tip},k)),l.onclick&&D.connect(f,"onclick",l.onclick);g("br",null,k);k=g("span",{"class":"esriItemLinks"},k);f=this._util.getItemOpenLinkObjects(c);if(0<f.length){var b=g("span",{innerHTML:l.label},g("a",{href:l.href||"#",target:l.target,alt:l.tip,title:l.tip,style:{marginRight:0}},k));l.onclick&&D.connect(b,"onclick",l.onclick);h.hideOpenMenu||
(g("span",{innerHTML:"\x26nbsp;"},k),l=g("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},k),new arcgisonline.sharing.dijit.TextMenu({triggerNode:l,labelNode:b,textMenuItems:f}));g("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},k)}null!==r&&g("span",{innerHTML:r.label},g("a",{href:r.link||"#",alt:r.tip,title:r.tip,target:r.target?
r.target:""},k))}l=g("div",{"class":"itemTextContainer"},e);g("a",{href:r.link,innerHTML:c.title,alt:r.tip,title:r.tip},g("span",{"class":this.titleClass},l));r=this._util.getSnippet(c.snippet,c.description);g("span",{"class":this.snippetClass,innerHTML:r||""},l);r=g("div",null,l);(k=this._getTypeIcon(c))&&g("span",{innerHTML:k},r);k="";k=arcgisonline.sharing.geow.Content.changeTypename(c)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;f=-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==
c.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";b="GeoJson"===c.type?"GeoJSON":c.type;b=-1<b.toLowerCase().indexOf("add in")?b.replace(/(add in)/ig,"Add-In"):b;g("span",{title:f+b,innerHTML:k,"class":"dim"},r);k=g("span",{"class":"esriItemAuthor"},r);k=g("a",{innerHTML:c.owner,"class":"linkNoHref",owner:c.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},k);h.showProfilePopup?(this._bindProfilePopup(k),
D.attr(k,{"class":"linkNoHref",owner:c.owner})):D.attr(k,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+c.owner);g("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(c.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},r);(k=arcgisonline.sharing.geow.Content._getPremiumItemNode(c))&&D.place(k,D.create("div",{className:"dim esriPremiumContent"},r,"last"));r=D.create("span",{"class":"dojoxRating dijitInline"});
9>D.isIE&&D.style(r,"zoom",0);k=D.create("ul",null,r);f=Math.round(c.avgRating);for(b=1;b<=f;b++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},k);for(;5>f;f++)D.create("li",{"class":"dojoxRatingStar dijitInline Hover"},k);k=this._getMsgRatings(c);g=g("span",{innerHTML:k,"class":"dim"},l);D.place(r,g,"first");return e},map:function(c,h){var g=D.create;h=h||g("div",{"class":this.detailClass+" medium"});if("public_authoritative"===c.contentStatus&&!c.orgSelf)if(esriGeowConfig.self.id&&
c.orgId===esriGeowConfig.self.id)c.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+c.orgId+"?f\x3djson",callbackParamName:"callback",load:function(b,d){c.orgSelf=b;arcgisonline.sharing.dijit.views.item.map(c,h)},error:function(b,d){c.orgSelf={};arcgisonline.sharing.dijit.views.item.map(c,h)}}),h;var e=g("div",{"class":"itemTextContainer"},h),l=this._util.getSnippet(c.snippet,c.description);g("span",{"class":this.snippetClass,
innerHTML:l?this._util.htmlEncode(l):""},e);l=g("span",null,e);var r=this._getTypeIcon(c,!0);r&&g("span",{innerHTML:r},l);r="";r=c.url&&-1<D.indexOf(c.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(c)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(c,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(c,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var k=-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==c.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",f="GeoJson"===c.type?"GeoJSON":c.type;f=-1<f.toLowerCase().indexOf("add in")?f.replace(/(add in)/ig,"Add-In"):f;g("span",{title:k+f,innerHTML:r,"class":"dim"},l);r=g("span",{"class":"esriItemAuthor"},
l);"public_authoritative"===c.contentStatus&&c.orgSelf&&c.orgSelf.name?(r=g("a",{innerHTML:c.orgSelf.name,"class":"linkNoHref",owner:c.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},r),D.connect(r,"onclick",this,function(b){arcgisonline.map.storage.saveMapInCookie(null,!1);c.orgSelf.urlKey?b=location.protocol+"//"+c.orgSelf.urlKey+"."+c.orgSelf.customBaseUrl+"/home/index.html":(b=location.protocol+
"//"+c.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(b=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(b)})):(r=g("a",{innerHTML:c.owner,"class":"linkNoHref",owner:c.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},r),this._bindProfilePopup(r));D.attr(r,{"class":"linkNoHref",owner:c.owner});g("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(c.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},l);(r=arcgisonline.sharing.geow.Content._getPremiumItemNode(c))&&D.place(r,D.create("div",{className:"dim esriPremiumContent"},l,"last"));l=D.create("span",{"class":"dojoxRating dijitInline"});9>D.isIE&&D.style(l,"zoom",0);r=D.create("ul",null,l);k=Math.round(c.avgRating);for(f=1;f<=k;f++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},r);for(;5>k;k++)D.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},r);r=this._getMsgRatings(c);g=g("span",{innerHTML:r,"class":"dim"},e);D.place(l,g,"first");return h},_bindProfilePopup:function(c){this.popup&&this.popup.close();D.connect(c,"onclick",this,function(h){var g=D.attr(h.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:g,opener:h.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(c){var h=
"";h=1===c.numRatings?h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:D.number.format(c.numRatings,{pattern:"#,###,###,##0"})}):h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:D.number.format(c.numRatings,{pattern:"#,###,###,##0"})});h=1===c.numComments?h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:D.number.format(c.numComments,{pattern:"#,###,###,##0"})}):h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:D.number.format(c.numComments,{pattern:"#,###,###,##0"})});var g=c.type;g=g?arcgisonline.pages.item._Info[g]||null:null;h=!g||"file"!==g.classification||arcgisonline.pages.utils.arrays.includes(g.types,"is-views")||arcgisonline.pages.utils.arrays.includes(g.types,"is-pdf")?1===c.numViews?h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):1===c.numViews?h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})}):h+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:D.number.format(c.numViews,{pattern:"#,###,###,##0"})});return h=arcgisonline.sharing.dijit.views.item.i18n().startBracket+h+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(c){var h=this._util.getToken();h=h?"?token\x3d"+h:"";if(c.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/info/"+c.thumbnail+h;h=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return h="Web Mapping Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==c.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===c.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==c.type||"Scene Service"===c.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(c,h){var g=arcgisonline.sharing.geow.Content._getItemIconUrl(c,!0),e=(-1<D.indexOf(c.typeKeywords,"ArcGIS Server")||"Feature Collection"==
c.type?this.i18n().source+" ":"")+("GeoJson"===c.type?"GeoJSON":c.type),l="";g&&("Web Scene"===e&&(e=-1<D.indexOf(c.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),l='\x3cimg src\x3d"'+g+'" alt\x3d"'+e+'" title\x3d"'+e+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return l}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(c){var h=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+c.id+"/info/"+c.thumbnail+(h?"?token\x3d"+h:"")},small:function(c,h,g){var e=D.create,l=e("div",{"class":this.detailClass});D.addClass(l,
"small");var r={target:"",href:"#"};h&&(h=e("div",{"class":this.thumbContainerClass},l),D.addClass(l,g||"left"),c.thumbnail&&0<c.thumbnail.length?e("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},h):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},h));e("a",{href:r.href,target:r.target,innerHTML:c.title,alt:r.tip,title:r.tip},e("span",{"class":this.titleClass},l));g=this._util.getSnippet(c.snippet,c.description);e("span",{"class":this.snippetClass,
innerHTML:g},l);g=e("span",null,null);e("span",{innerHTML:"owned by ","class":"dim"},g);g=e("span",{"class":"esriItemAuthor"},g);e("a",{innerHTML:c.owner,href:""},g);return l},medium:function(c,h){var g=D.create,e=g("div",{"class":this.detailClass+" medium"}),l=esriGeowConfig.baseUrl+"group.html?id\x3d"+c.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(h.showThumb){var r=g("div",{"class":this.thumbContainerClass},e);D.addClass(e,h.align||"left");if(h.groupsUser){var k=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(c.owner,D.hitch(this,function(d,q,m){q.code||q.message?g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):"public"===d.access||q.orgId&&q.orgId===k.accountId?c.thumbnail&&0<c.thumbnail.length?g("img",{src:this._getThumbnailUrl(c),
"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r))},c))}else c.thumbnail&&0<c.thumbnail.length?g("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)):g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},g("a",{href:l||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},r)),g("br",null,r),D.place(this._util.getGroupLinks(c),r)}var f=g("div",{"class":"itemTextContainer"},e);g("a",{href:l,innerHTML:c.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},g("span",{"class":this.titleClass},f));var b=this._util.getSnippet(c.snippet,
c.description);g("span",{"class":this.snippetClass,innerHTML:b||""},f);f=g("span",null,f);g("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},f);b=g("span",{"class":"esriItemAuthor"},f);b=g("a",{innerHTML:c.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},b);h.showProfilePopup?(this._bindProfilePopup(b),D.attr(b,{"class":"linkNoHref",owner:c.owner})):D.attr(b,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+c.owner);b=c.created;g("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(b),"class":"dim"},f);return e}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(c){var h=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+c.username+"/info/"+c.thumbnail+(h?"?token\x3d"+h:"")},medium:function(c,h){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var g=arcgisonline.sharing.util.getUser(),e=D.create,l=e("div",{"class":this.detailClass});D.addClass(l,"medium");e("div",{"class":this.titleClass,innerHTML:c.fullName||c.username},l);if(g&&g.accountId&&c.accountId&&c.role&&g.accountId==c.accountId){var r="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===c.role?r+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===c.role?r+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===c.role&&(r+=arcgisonline.sharing.dijit.views.profile.i18n().user);e("span",{innerHTML:r},e("strong",{},l))}h.showThumb&&(r=e("div",{"class":this.thumbContainerClass},l),D.addClass(l,h.align||"left"),c.thumbnail&&0<c.thumbnail.length?e("img",{src:this._getThumbnailUrl(c),"class":this.thumbClass},r):e("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},r));r=e("div",{"class":this.snippetClass},
e("span",{"class":"esriItemLinks"},l));var k=this._util.removeHTMLTags(c.description),f=g&&g.accountId&&c.orgId&&g.accountId===c.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;k=0<k.length?c.description:f;k=this._util.linkifyText(k);8>D.isIE&&(k="\x3cpre class\x3d'esriProfileDesc'\x3e"+k+"\x3c/pre\x3e");e("span",{innerHTML:k,style:"white-space:pre-wrap;"},r,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return l;
r=e("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},l);k=e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},r,"last");D.connect(k,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,D.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+c.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");k=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var b=(f=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();g&&(g.username===c.username?e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},r,"last"):g.accountId&&g.role&&c.orgId&&c.role&&(k||f&&b)&&g.accountId===c.orgId&&e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+c.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},r,"last"));e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
c.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},r,"last");e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+c.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},r,"last");e("div",{style:{clear:"both",width:"100%"}},l);return l}}})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/GroupIcon arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d,q,m,n,t,z,w,y,x,A,v,u,C,E){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);n=a.__importDefault(n);t=a.__importDefault(t);z=a.__importDefault(z);w=a.__importDefault(w);y=a.__importDefault(y);x=a.__importDefault(x);A=a.__importDefault(A);v=
a.__importDefault(v);u=a.__importDefault(u);C=a.__importDefault(C);E=a.__importDefault(E);return function(){function F(G,H){this.templateString=e["default"];this.i18n=l["default"];this.icons=d["default"];this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}F.prototype.postCreate=function(){var G;this.inherited(arguments);this.telemetry=C["default"].init(this.portal,!0);this.dialog=new b["default"]({"class":"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});
this.currentUser=A["default"].getUser();this.isSelf=(null===(G=this.currentUser)||void 0===G?void 0:G.username)===this.username;this.addEventListeners()};F.prototype.open=function(){this.logEvent("open");this.render()};F.prototype.close=function(){this.loaded&&(f["default"].close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};F.prototype.handleDialogKeydown=function(G){var H=this;if(G.keyCode===h["default"].TAB)if(G.stopPropagation(),this.lastFocusItem!==G.target||G.shiftKey)G.shiftKey&&
this.firstFocusItem===G.target&&(G.preventDefault(),this.opener.focus(),this.close());else{G.preventDefault();var J=t["default"].getFocusableElements(document.body);J.forEach(function(I,R){I===H.opener&&J[R+1].focus()});this.close()}};F.prototype.render=function(){var G=this;this.getUser(this.username).then(function(H){var J,I,R=null===(J=G.currentUser)||void 0===J?void 0:J.userRole;J=H.orgId&&H.orgId===(null===(I=G.currentUser)||void 0===I?void 0:I.orgId);I=(null===R||void 0===R?void 0:R.isAdmin())&&
J;G.canUpdateProfile=G.isSelf||I||(null===R||void 0===R?void 0:R.canUpdateUsers())&&J;H.fullName||(H.fullName=n["default"].createFullName(H));R=H.username;I=H.fullName;J=H.groups;var O=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new w["default"]({member:new x["default"](a.__assign(a.__assign({},H),{portal:G.portal})),cssClasses:"member-thumb--small margin-right-half flex-0"},G.domNode.querySelector(".js-member-thumb"));G.fullNameEl.textContent=I;G.usernameEl.textContent=R;O&&(O=m["default"].escapeNewlines(m["default"].addHyperlinks(m["default"].restoreNewlines(O))));
G.bioEl.innerHTML=m["default"].insertHTMLLineBreaks(O);O||q["default"].hideNode(G.bioContainer);J?G.renderGroups(J):G.getUserGroups(R).then(function(P){G.renderGroups(P.results)});G.user=H;G.getUserItems(R).then(function(P){P.total&&(G.itemCountEl.textContent=G.itemTotal=P.total,q["default"].showNode(G.itemsSection));G.showContent();G.checkIfHideProfileLink()},function(){G.showContent();G.checkIfHideProfileLink()})})};F.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||
q["default"].hideNode(this.viewProfileBtn)};F.prototype.renderGroups=function(G){var H=this;if(G&&G.length){if(G.slice(0,5).forEach(function(I){I=new y["default"]({group:I,portal:H.portal,size:"32",letterSize:"1",cssClasses:"org-member-card__group-tile"});H.groupIcons.appendChild(I.domNode)}),5<G.length){var J=document.createElement("div");J.className="org-member-card__more-tile link-darker-gray flex-center";J.textContent="+"+(G.length-5);this.groupIcons.appendChild(J)}}else q["default"].hideNode(this.groupsSection)};
F.prototype.getUserItems=function(G){var H;return A["default"].request({url:v["default"].restBaseUrl+"search",content:{q:'owner:"'+G+'" '+((null===(H=null===v["default"]||void 0===v["default"]?void 0:v["default"].viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};F.prototype.getUserGroups=function(G){return A["default"].request({url:v["default"].restBaseUrl+"community/groups",content:{q:'(owner:"'+G+'")'}})};F.prototype.showContent=function(){var G=this;
this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&!this.bioEl.innerHTML&&q["default"].hideNode(this.bottomSection);this.loader.classList.remove("is-active");q["default"].showNode(this.content);this.loaded=!0;f["default"].open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){G.opener.focus();G.close()}});var H=t["default"].getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];
this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){q["default"].showHide(G.bioToggle,G.bioEl.scrollHeight>G.bioEl.clientHeight)},100)};F.prototype.getUser=function(G){return A["default"].request({url:v["default"].restBaseUrl+"community/users/"+G})};F.prototype.addEventListeners=function(){var G=this;this.own(g["default"](this.closeIcon,"click",
function(){f["default"].close(G.dialog)}),g["default"](this.domNode,"click",function(H){H.stopPropagation()}),g["default"](document.body,"click",function(){G.close()}),g["default"](this.groupsSection,"click",function(){G.logEvent("view all groups");z["default"].goToPage("groups",G.user)}),g["default"](this.itemsSection,"click",function(){G.logEvent("view all content");z["default"].goToPage("content",G.user)}),g["default"](this.viewProfileBtn,"click",function(){G.logEvent("view profile");window.open(v["default"].baseUrl+
"user.html"+(G.isSelf?"":"?user\x3d"+G.username),"_blank")}),g["default"](this.bioToggle,"click",function(){return G.handleBioToggleClick()}))};F.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};F.prototype.logEvent=function(G){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:G})};return F=a.__decorate([E["default"](k["default"],r["default"],u["default"],c["default"])],F)}()})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(D,B,a,c,h,g,e,l,r,k,f,b,d){D=D("dijit.TooltipDialog",[l,f,k,r],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:b,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",h.hitch(this,"_onKey")))},orient:function(q,m,n){q={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[m+"-"+n];B.replace(this.domNode,q,this._currentOrientClass||"");this._currentOrientClass=q},focus:function(){this._getFocusItems();
e.focus(this._firstFocusItem)},onOpen:function(q){this.orient(this.domNode,q.aroundCorner,q.corner);var m=q.aroundNodePos;"M"==q.corner.charAt(0)&&"M"==q.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-q.y+"px",this.connectorNode.style.left=""):"M"==q.corner.charAt(1)&&"M"==q.aroundCorner.charAt(1)&&(this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-q.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(q){if(q.keyCode==
c.ESCAPE)this.defer("onCancel"),q.stopPropagation(),q.preventDefault();else if(q.keyCode==c.TAB){var m=q.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(q.stopPropagation(),q.preventDefault()):m==this._firstFocusItem&&q.shiftKey?(e.focus(this._lastFocusItem),q.stopPropagation(),q.preventDefault()):m!=this._lastFocusItem||q.shiftKey?q.stopPropagation():(e.focus(this._firstFocusItem),q.stopPropagation(),q.preventDefault())}}});a("dojo-bidi")&&D.extend({_setTitleAttr:function(q){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,q):q;this._set("title",q)},_setTextDirAttr:function(q){this._created&&this.textDir==q||(this._set("textDir",q),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return D})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(D,B,a,c){c=a.__importDefault(c);return function(){function h(){}h.getFocusableElements=function(g){g=g.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');
for(var e=[],l=0;l<g.length;l++){var r=g[l];null===r.offsetParent||c["default"].canBeDisabled(r)&&r.disabled||e.push(r)}return e};h.trapFocus=function(g){function e(r){var k=l(),f=k[0];k=k[k.length-1];if("Tab"===r.key||9===r.keyCode)r.shiftKey?document.activeElement===f&&(k.focus(),r.preventDefault()):document.activeElement===k&&(f.focus(),r.preventDefault())}var l=this.getFocusableElements.bind(this,g);g.addEventListener("keydown",e);return e};h.untrapFocus=function(g,e){g.removeEventListener("keydown",
e)};return h}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),function(D,B,a,c,h,g,e,l,r,k,f,b,d){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);
k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);return function(){function q(m,n){this.icons=k["default"];this.templateString=h["default"];this.hide=l["default"].hide;this.show=l["default"].show;this.cssClasses="";this.showTooltip=!1}q.prototype.postMixInProperties=function(){var m,n,t;this.inherited(arguments);if(this.member.thumbnailUrl&&this.member.thumbnailUrl!==this.member.defaultThumbnailUrl){var z=(null===(n=null===(m=d["default"].userInfo)||void 0===
m?void 0:m.credential)||void 0===n?void 0:n.token)||(null===(t=d["default"].userInfo)||void 0===t?void 0:t.token);z&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+=(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+z);this.member.initials="";this.member.backgroundColor="#FFFFFF"}else this.showInitials()};q.prototype.postCreate=function(){var m=this;this.inherited(arguments);this.showTooltip&&(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));
this.own(c["default"](this.img,"error",function(){return m.showInitials()}))};q.prototype.showInitials=function(){if(this.member.fullName.trim()){var m=this.member.fullName.split(" ");this.member.initials=m[0].substring(0,1)+(m[1]?m[1].substring(0,1):"")}else this.member.username&&(this.member.initials=this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=
this.member.backgroundColor);f["default"].hideNode(this.img);f["default"].showNode(this.initials)};q.prototype._getMemberFillColor=function(m){var n=m.id?m.id.substr(m.id.length-6):"";r["default"].isValidHex(n)||(n=r["default"].stringToHex(m.username));m=r["default"].hexToRgb(n);return"rgba("+m.r+","+m.g+","+m.b+", 0.2)"};return q=a.__decorate([b["default"](e["default"],g["default"])],q)}()})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(D,
B,a,c,h){D=D.NodeList;B.extend(D,{_anim:function(g,e,l){l=l||{};var r=h.combine(this.map(function(k){k={node:k};B.mixin(k,l);return g[e](k)}));return l.auto?r.play()&&this:r},wipeIn:function(g){return this._anim(h,"wipeIn",g)},wipeOut:function(g){return this._anim(h,"wipeOut",g)},slideTo:function(g){return this._anim(h,"slideTo",g)},fadeIn:function(g){return this._anim(c,"fadeIn",g)},fadeOut:function(g){return this._anim(c,"fadeOut",g)},animateProperty:function(g){return this._anim(c,"animateProperty",
g)},anim:function(g,e,l,r,k){var f=h.combine(this.map(function(b){return c.animateProperty({node:b,properties:g,duration:e||350,easing:l})}));r&&a.after(f,"onEnd",r,!0);return f.play(k||0)}});return D})},"arcgisonline/sharing/geow/QueryReadStore":function(){define(["dojo","dijit","dojox","dojo/require!dojox/data/QueryReadStore,arcgisonline/sharing/geow/Content"],function(D,B,a){D.provide("arcgisonline.sharing.geow.QueryReadStore");D.require("dojox.data.QueryReadStore");D.require("arcgisonline.sharing.geow.Content");
D.declare("arcgisonline.sharing.geow.QueryReadStore",a.data.QueryReadStore,{_fetchItems:function(c,h,g){var e=c.serverQuery||c.query||{};e.start=c.start||0;e.start++;c.count&&(e.num=c.count);arcgisonline.sharing.geow.Content.search(this.url,e,D.hitch(this,function(l){var r=l.total||-1;D.publish("gridCount",[l.total]);this.onResultCount(l.total);this._total=l.total;this._items=[];D.forEach(l.results,function(f,b){var d=f.tags||f.keywords||[],q=void 0==f.imageUrl?arcgisonline.sharing.geow.Content._getItemImageUrl(f):
f.imageUrl,m=f.uploaded||f.created,n=void 0==f.extent?arcgisonline.sharing.geow.Community._getGroupTitleLink(f):f.title,t=f.item||"",z="";f.snippet&&0<f.snippet.length&&"null"!=f.snippet?z=150<f.snippet.length?f.snippet.substring(0,150)+"...":f.snippet:f.description&&0<f.description.length&&"null"!=f.description&&(z=150<f.description.length?f.description.substring(0,150)+"...":f.description);d={id:f.id||"",owner:f.owner,title:n,description:f.description,snippet:z,snippetFull:f.snippet,tags:d.join?
d.join(","):d,imageUrl:q,thumbnail:f.thumbnail,isInvitationOnly:f.isInvitationOnly,created:m,modified:f.modified,itemType:f.itemType||"",typeKeywords:f.typeKeywords||"",type:f.type||"",extent:f.extent||"",item:t,numComments:f.numComments,numRatings:f.numRatings,avgRating:f.avgRating,numViews:f.numViews};this._items.push({i:d,r:this})},this);this._itemsByIdentity={};this._identifier="id";for(i=0;i<this._items.length;++i){l=this._items[i].i;var k=l.id;this._itemsByIdentity[k]||(this._itemsByIdentity[k]=
l)}r=-1===r?this._items.length:r;h(this._items,c,r);this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=D.mixin({},e)}))},onResultCount:function(c){}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(D,B){return D.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,
doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(a){D.mixin(this,a)},getValue:function(a,c,h){this._assertIsItem(a);if(!D.isString(c))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(a,c)&&h?h:a.i[c]},getValues:function(a,c){this._assertIsItem(a);var h=[];this.hasAttribute(a,c)&&h.push(a.i[c]);return h},getAttributes:function(a){this._assertIsItem(a);
var c=[],h;for(h in a.i)c.push(h);return c},hasAttribute:function(a,c){return this.isItem(a)&&"undefined"!=typeof a.i[c]},containsValue:function(a,c,h){a=this.getValues(a,c);c=a.length;for(var g=0;g<c;g++)if(a[g]==h)return!0;return!1},isItem:function(a){return a?"undefined"!=typeof a.r&&a.r==this:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(a){a=a||{};a.store||(a.store=this);var c=this;this._fetchItems(a,function(h,g,e){var l=g.abort||
null,r=!1,k=g.start?g.start:0;0==c.doClientPaging&&(k=0);var f=g.count?k+g.count:h.length;g.abort=function(){r=!0;l&&l.call(g)};var b=g.scope||D.global;g.store||(g.store=c);g.onBegin&&g.onBegin.call(b,e,g);g.sort&&c.doClientSorting&&h.sort(D.data.util.sorter.createSortFunction(g.sort,c));if(g.onItem)for(e=k;e<h.length&&e<f;++e){var d=h[e];r||g.onItem.call(b,d,g)}g.onComplete&&!r&&(e=null,g.onItem||(e=h.slice(k,f)),g.onComplete.call(b,e,g))},function(h,g){g.onError&&g.onError.call(g.scope||D.global,
h,g)});return a},getFeatures:function(){return this._features},close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(a,c,h,g){a=this._filterResponse(a);a.label&&(this._labelAttr=a.label);g=a.numRows||-1;this._items=[];D.forEach(a.items,function(k){this._items.push({i:k,r:this})},this);a=a.identifier;this._itemsByIdentity={};if(a){this._identifier=
a;var e;for(e=0;e<this._items.length;++e){var l=this._items[e].i,r=l[a];if(this._itemsByIdentity[r])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+a+"].  Value collided: ["+r+"]");this._itemsByIdentity[r]=l}}else for(this._identifier=Number,e=0;e<this._items.length;++e)this._items[e].n=e;g=this._numRows=-1===g?this._items.length:g;h(this._items,c,g);this._numRows=g},_fetchItems:function(a,c,h){var g=a.serverQuery||
a.query||{};this.doClientPaging||(g.start=a.start||0,a.count&&(g.count=a.count));if(!this.doClientSorting&&a.sort){var e=[];D.forEach(a.sort,function(r){r&&r.attribute&&e.push((r.descending?"-":"")+r.attribute)});g.sort=e.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&D.toJson(g)==D.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,c(this._items,a,this._numRows);else{var l=("post"==this.requestMethod.toLowerCase()?D.xhrPost:D.xhrGet)({url:this.url,
handleAs:"json-comment-optional",content:g,failOk:!0});a.abort=function(){l.cancel()};l.addCallback(D.hitch(this,function(r){this._xhrFetchHandler(r,a,c,h)}));l.addErrback(function(r){h(r,a)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=D.mixin({},g)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this._className+
": Invalid attribute argument ('"+a+"').");},fetchItemByIdentity:function(a){if(this._itemsByIdentity){var c=this._itemsByIdentity[a.identity];if(void 0!==c){a.onItem&&a.onItem.call(a.scope?a.scope:D.global,{i:c,r:this});return}}this._fetchItems({serverQuery:{id:a.identity}},function(h,g){var e=a.scope?a.scope:D.global;try{var l=null;h&&1==h.length&&(l=h[0]);a.onItem&&a.onItem.call(e,l)}catch(r){a.onError&&a.onError.call(e,r)}},function(h,g){var e=a.scope?a.scope:D.global;a.onError&&a.onError.call(e,
h)})},getIdentity:function(a){var c=null;return c=this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(a){return[this._identifier]}})})},"arcgisonline/sharing/geow/Content":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ../util dojo/dom-construct dojo/io-query dojo/_base/lang dojo/data/ItemFileReadStore dojo/data/ItemFileWriteStore dojo/topic esri/arcgis/Portal esri/config dojo/i18n!../../nls/arcgisonline".split(" "),function(D,
B,a,c,h,g,e,l,r,k,f,b,d,q,m){c=a.__importDefault(c);h=a.__importDefault(h);g=a.__importDefault(g);e=a.__importDefault(e);l=a.__importDefault(l);r=a.__importDefault(r);k=a.__importDefault(k);f=a.__importDefault(f);b=a.__importDefault(b);d=a.__importDefault(d);q=a.__importDefault(q);m=a.__importDefault(m);return function(){function n(){}n.getUserInfo=function(t,z){var w=g["default"].getUser();null!==w&&g["default"].getJson(c["default"].restBaseUrl+"content/users/"+(w.username||w.email),t,z)};n.getUserItems=
function(t,z,w){var y=g["default"].getUser();null!==y&&(y=c["default"].restBaseUrl+"content/users/"+(y.username||y.email),null!==t&&""!==t&&(y=y+"/"+t),g["default"].getJson(y,z,w))};n.getUserItemsByUser=function(t,z,w,y){null!==g["default"].getUser()&&(t=c["default"].restBaseUrl+"content/users/"+t,null!=z&&""!==z&&(t=t+"/"+z),g["default"].getJson(t,w,y))};n.getUserServers=function(t){void 0!==n._userServers&&t(n._userServers);g["default"].getJson(c["default"].serversRestBaseUrl,function(z){t(n._userServers=
z.servers)},function(){t(null)})};n.addItem=function(t,z,w,y){var x=g["default"].getUser();if(null!==x){x=c["default"].restBaseUrl+"content/users/"+(x.username||x.email);null!==t&&(x=x+"/"+t);x+="/addItem";t=!1;for(var A=0;A<z.childNodes.length;A++){var v=z.childNodes[A];if("async"===v.name&&"true"===v.value){t=!0;break}}t?g["default"].postForm(z,x,n.addItemAsyncHandler.bind(n,w,y),y):g["default"].postForm(z,x,w,y)}};n.addItemByUser=function(t,z,w,y,x){if(null!==g["default"].getUser()){t=c["default"].restBaseUrl+
"content/users/"+t;null!=z&&(t=t+"/"+z);t+="/addItem";z=!1;for(var A=0;A<w.childNodes.length;A++){var v=w.childNodes[A];if("async"===v.name&&"true"===v.value){z=!0;break}}z?g["default"].postForm(w,t,n.addItemByUserAsyncHandler.bind(n,y,x),x):g["default"].postForm(w,t,y,x)}};n.addItemAsyncHandler=function(t,z,w,y){(null===w||void 0===w?0:w.success)&&!0===w.success?n.itemStatus(w,n.itemStatusHandler.bind(n,0,w,t,z),z):z(w,y)};n.addItemByUserAsyncHandler=function(t,z,w,y){(null===w||void 0===w?0:w.success)&&
!0===w.success?n.itemStatus(w,n.itemStatusByUserHandler.bind(n,0,w,t,z),z):z(w,y)};n.deleteService=function(t,z){this.getUserServers(function(w){if((null===w||void 0===w?0:w.length)&&-1<t.indexOf(""+c["default"].featuresRestBaseUrl+w[0].id+"/")){w=""+c["default"].serversRestBaseUrl+w[0].id+"/arcgis/admin/services/";w+=t.substr(t.indexOf(z)).replace("/",".")+"/delete";q["default"].defaults.io.proxyUrl=c["default"].proxyServer;var y=function(){q["default"].defaults.io.proxyUrl=null};g["default"].postJson("",
w,y,y)}})};n.publishService=function(t,z,w,y){t=g["default"].getUser();null!==t&&g["default"].postJson(z.params,c["default"].restBaseUrl+"content/users/"+(t.username||t.email)+"/publish",function(x){var A;x=x.services[0];x.success=x.success||0<(null===(A=x.serviceurl)||void 0===A?void 0:A.length);x.success&&(x.id=x.serviceItemId);w(x)},function(){w({success:!1})})};n.itemStatus=function(t,z,w){var y,x=g["default"].getUser();if(null!==x){var A=x.username||x.email;x=t.folder;A=c["default"].restBaseUrl+
"content/users/"+(t.overrideUser||A);0<(null===x||void 0===x?void 0:x.length)&&"/"!==x&&(A+="/"+x);A=A+"/items/"+t.id+"/status";t.jobid&&(A+="?jobid\x3d"+t.jobid);"image service"===(null===(y=t.type)||void 0===y?void 0:y.toLowerCase())&&(A+="\x26jobType\x3dPublishImageService");g["default"].getJson(A,z,w)}};n.itemStatusByUser=function(t,z,w){if(null!==g["default"].getUser()){var y=t.folder,x=c["default"].restBaseUrl+"content/users/"+t.owner;0<(null===y||void 0===y?void 0:y.length)&&"/"!==y&&(x+="/"+
y);x=x+"/items/"+t.id+"/status";g["default"].getJson(x,z,w)}};n.itemStatusHandler=function(t,z,w,y,x,A){(null===x||void 0===x?0:x.status)&&"processing"===x.status?(t++,setTimeout(function(){n.itemStatus(z,n.itemStatusHandler.bind(n,t,z,w,y),y)},Math.min(1E3*Math.pow(2,t),6E4))):(x=a.__assign(a.__assign({},x),z),w(x,A))};n.itemStatusByUserHandler=function(t,z,w,y,x,A){(null===x||void 0===x?0:x.status)&&"processing"===x.status?(t++,setTimeout(function(){n.itemStatusByUser(z,n.itemStatusByUserHandler.bind(n,
t,z,w,y),y)},Math.min(1E3*Math.pow(2,t),6E4))):(x=a.__assign(a.__assign({},x),z),w(x,A))};n.deleteItems=function(t,z,w){var y=g["default"].getUser();if(null!==y){y=y.username||y.email;if(1===t.length)return t=t[0],y=c["default"].restBaseUrl+"content/users/"+y,null!=t.folderId&&""!==t.folderId&&"/"!==t.folderId&&(y+="/"+t.folderId),y=y+"/items/"+t.id+"/delete",g["default"].postJson("",y,z,w);if(1<t.length){var x="",A="";t.forEach(function(v){x+=""+A+v.id;A=","});t={items:x};y=c["default"].restBaseUrl+
"content/users/"+y+"/deleteItems";return g["default"].postJson(t,y,z,w)}}};n.deleteItemsByUser=function(t,z,w,y){if(null!==g["default"].getUser()){if(1===z.length)return z=z[0],t=c["default"].restBaseUrl+"content/users/"+t,null!==z.folderId&&""!==z.folderId&&"/"!==z.folderId&&(t+="/"+z.folderId),t=t+"/items/"+z.id+"/delete",g["default"].postJson("",t,w,y);if(1<z.length){var x="",A="";z.forEach(function(v){x+=""+A+v.id;A=","},this);z={items:x};t=c["default"].restBaseUrl+"content/users/"+t+"/deleteItems";
return g["default"].postJson(z,t,w,y)}}};n.getApplicationCode=function(t,z,w){var y=null,x="WMA2Code";r["default"].isObject(t)?(y=t.id,"Mobile Application"===t.type&&(x="MobileApp2Code")):y=t;g["default"].getJson(c["default"].restBaseUrl+"content/items/"+y+"/relatedItems?relationshipType\x3d"+x,z,w)};n.addApplicationCodeRelate=function(t,z,w,y){var x=g["default"].getUser();if(null===x)b["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]);else{var A=null,v="WMA2Code";
r["default"].isObject(t)?(A=t.id,"Mobile Application"===t.type&&(v="MobileApp2Code")):A=t;g["default"].postJson({relationshipType:v,originItemId:A,desinationItemId:z},c["default"].restBaseUrl+"content/users/"+(x.username||x.email)+"/addRelationship?relationshipType\x3d"+v+"\x26originItem\x3d"+A+"\x26destinationItemId\x3d"+z,w,y)}};n.getComments=function(t,z,w,y){g["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/comments",w,y)};n.addComment=function(t,z,w,y){null===g["default"].getUser()?
b["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):g["default"].postJson({comment:z},c["default"].restBaseUrl+"content/items/"+t+"/addComment",w,y)};n.deleteComment=function(t,z,w,y){null===g["default"].getUser()?b["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):g["default"].postJson({},c["default"].restBaseUrl+"content/items/"+t+"/comments/"+z+"/delete",w,y)};n.addRating=function(t,z,w,y){null===g["default"].getUser()?
b["default"].publish("globalMessage",[{message:this.i18n.mustLogIn,type:"error",duration:0}]):g["default"].postJson({rating:z},c["default"].restBaseUrl+"content/items/"+t+"/addRating",w,y)};n.getRating=function(t,z,w){null!=g["default"].getUser()&&g["default"].postJson({},c["default"].restBaseUrl+"content/items/"+t+"/rating",z,w)};n.deleteItem=function(t,z,w){var y=g["default"].getUser();if(null!==y){y=y.username||y.email;y=c["default"].restBaseUrl+"content/users/"+(t.owner||y);var x=t.ownerFolder||
t.folderId;x&&"/"!==x&&(y=y+"/"+x);y=y+"/items/"+t.id+"/delete";g["default"].postJson("",y,z,w)}};n.deleteItemByUser=function(t,z,w){if(null!==g["default"].getUser()){var y=c["default"].restBaseUrl+"content/users/"+t.owner;null!=t.folderId&&(y=y+"/"+t.folderId);y=y+"/items/"+t.id+"/delete";g["default"].postJson("",y,z,w)}};n.updateItem=function(t,z,w,y){var x=g["default"].getUser();null!==x&&(x=x.username||x.email,x=c["default"].restBaseUrl+"content/users/"+(t.owner||x),null!=t.folderId&&(x=x+"/"+
t.folderId),x=x+"/items/"+t.id+"/update",g["default"].postForm(z,x,w,y))};n.updateItemByUser=function(t,z,w,y){if(null!==g["default"].getUser()){var x=c["default"].restBaseUrl+"content/users/"+t.owner;null!==t.folderId&&(x=x+"/"+t.folderId);x=x+"/items/"+t.id+"/update";g["default"].postForm(z,x,w,y)}};n.updateItemJson=function(t,z,w,y){var x=g["default"].getUser();null!==x&&(x=x.username||x.email,x=c["default"].restBaseUrl+"content/users/"+(t.overrideUser||x),null!==t.folderId&&(x=x+"/"+t.folderId),
x=x+"/items/"+t.id+"/update",g["default"].postJson(z,x,w,y))};n.updateItemJsonByUser=function(t,z,w,y){null!==g["default"].getUser()&&(t=c["default"].restBaseUrl+"content/users/"+t,null!==z.folderId&&(t=t+"/"+z.folderId),t=t+"/items/"+z.id+"/update",g["default"].postJson(w,t,y))};n.filterErrors=function(t){t=null===t||void 0===t?void 0:t.results;if(null===t||void 0===t?0:t.length)if(t=t.filter(function(z){return z.error}),null===t||void 0===t?0:t.length)return g["default"].checkError(t[0].error),
t;return!1};n.shareItems=function(t,z,w){var y=g["default"].getUser();y&&(y=y.username||y.email,g["default"].postJson(t,c["default"].restBaseUrl+"content/users/"+(t.owner||y)+"/shareItems",function(x){var A=n.filterErrors(x);A?w(A):z(x)},w))};n.shareItemsByUser=function(t,z,w,y){null!==g["default"].getUser()&&g["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+t+"/shareItems",w,y)};n.shareItem=function(t,z,w,y){var x=g["default"].getUser();null!==x&&(x=c["default"].restBaseUrl+"content/users/"+
(x.username||x.email),null!=t.folderId&&(x=x+"/"+t.folderId),x=x+"/items/"+t.id+"/share",g["default"].postJson(z,x,w,y))};n.shareItemByID=function(t,z,w,y){null!==g["default"].getUser()&&g["default"].postJson(z,c["default"].restBaseUrl+"content/items/"+t.id+"/share",w,y)};n.unshareItems=function(t,z,w){var y=g["default"].getUser();null!==y&&(y=y.username||y.email,g["default"].postJson(t,c["default"].restBaseUrl+"content/users/"+(t.owner||y)+"/unshareItems",function(x){var A=n.filterErrors(x);A?w(A):
z(x)},w))};n.unshareItemsByUser=function(t,z,w,y){null!==g["default"].getUser()&&g["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+t+"/unshareItems",w,y)};n.unshareItem=function(t,z,w,y){var x=g["default"].getUser();null!==x&&(x=c["default"].restBaseUrl+"content/users/"+(x.username||x.email),null!=t.folderId&&(x=x+"/"+t.folderId),x=x+"/items/"+t.id+"/unshare",g["default"].postJson(z,x,w,y))};n.unshareItemByID=function(t,z,w,y){null!==g["default"].getUser()&&g["default"].postJson(z,
c["default"].restBaseUrl+"content/items/"+t.id+"/unshare",w,y)};n.moveItems=function(t,z,w,y){var x=g["default"].getUser();if(null!==x){var A="",v="";(t||[]).forEach(function(u){A+=""+v+u.id;v=","});z.items=A;g["default"].postJson(z,c["default"].restBaseUrl+"content/users/"+(x.username||x.email)+"/moveItems",w,y)}};n.moveItemsByUser=function(t,z,w,y,x){if(null!==g["default"].getUser()){var A="",v="";(z||[]).forEach(function(u){A+=""+v+u.id;v=","});w.items=A;g["default"].postJson(w,c["default"].restBaseUrl+
"content/users/"+t+"/moveItems",y,x)}};n.reassignItem=function(t,z,w,y,x){if(null!==g["default"].getUser()){var A=c["default"].restBaseUrl+"content/users/"+t.owner;null!==t.folderId&&(A=A+"/"+t.folderId);A=A+"/items/"+t.id+"/reassign";g["default"].postJson({targetUsername:z,targetFolderName:w},A,y,x)}};n.moveItem=function(t,z,w,y){var x=g["default"].getUser();null!==x&&(x=c["default"].restBaseUrl+"content/users/"+(x.username||x.email),null!=t.folderId&&(x=x+"/"+t.folderId),x=x+"/items/"+t.id+"/move",
g["default"].postJson(z,x,w,y))};n.moveItemByUser=function(t,z,w,y){if(null!==g["default"].getUser()){var x=c["default"].restBaseUrl+"content/users/"+t.owner;null!=t.folderId&&(x=x+"/"+t.folderId);x=x+"/items/"+t.id+"/move";g["default"].postJson(z,x,w,y)}};n.search=function(t,z,w,y){var x,A;if(t){y="";if(0>t.indexOf("community/groups")){var v=g["default"].userPreferences(null,"contentModePrefs"),u=l["default"].queryToObject(window.location.search.slice(1));"all"===(null===(x=u.content)||void 0===
x?void 0:x.toLowerCase())?v.contentMode="GIS":"web"===(null===(A=u.content)||void 0===A?void 0:A.toLowerCase())&&(v.contentMode="Web");y=(null===v||void 0===v?0:v.contentMode)&&"GIS"===v.contentMode?c["default"].viewQueries.gis:y+c["default"].viewQueries.web;y+=c["default"].viewQueries.none}z.q+=y;g["default"].getJsonWithContent(t,z,w)}};n.getFeaturedItems=function(t,z,w){g["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward",
z)};n.getUserItem=function(t,z,w){w=g["default"].getUser();null!==w&&(w=c["default"].restBaseUrl+"content/users/"+(w.username||w.email),null!=t.folderId&&(w=w+"/"+t.folderId),w=w+"/items/"+t.id,g["default"].getJson(w,z))};n.getItem=function(t,z,w){g["default"].getJson(c["default"].restBaseUrl+"content/items/"+t,z,w)};n.getItemData=function(t,z,w){g["default"].getJson(c["default"].restBaseUrl+"content/items/"+t+"/data",z,w)};n.getItemFolder=function(t,z){var w=g["default"].getUser();if(null!==w){var y=
w.username||w.email;g["default"].getJson(c["default"].restBaseUrl+"content/users/"+y,function(x){for(var A=null,v=0;v<x.items.length;v++)if(x.items[v].id===t){A="";break}if(null!==A)z(A);else{var u=function(C){for(var E=C.currentFolder.id,F=0;F<C.items.length;F++)if(C.items[F].id===t){A=E;z(A);break}};x.folders.forEach(function(C){g["default"].getJson(c["default"].restBaseUrl+"content/users/"+y+"/"+C.folderName,u)})}})}};n.itemsToStore=function(t){var z,w=(null===(z=t.currentFolder)||void 0===z?void 0:
z.id)||"",y=[];(t.items||[]).forEach(function(x,A){var v,u;x.folderId=w;x.imageUrl=n._getItemIconUrl(x);x.selected=!1;x.item=x.name||x.url||x.title;0<(null===(v=x.snippet)||void 0===v?void 0:v.length)&&"null"!==x.snippet?x.snippet=x.snippet:0<(null===(u=x.description)||void 0===u?void 0:u.length)&&"null"!==x.description?(v=g["default"].removeHTMLTags(x.description),x.snippet=150<v.length?v.substring(0,150)+"...":v):x.snippet="";delete x.listingProperties;delete x.properties;y[A]=x});return new f["default"]({data:{identifier:"id",
label:"item",items:y},url:void 0})};n.searchToStore=function(t){var z=[];(t.items||t.results||[]).forEach(function(w,y){var x,A=w.id,v=w.owner,u=w.title,C=w.description,E=w.created,F=w.modified,G=(null===(x=w.tags)||void 0===x?void 0:x.join(","))||[];x=n._getItemImageUrl(w);z[y]={id:A,owner:v,title:u,description:C,tags:G,imageUrl:x,created:E,modified:F}});return new k["default"]({data:{identifier:"id",label:"item",items:z},url:void 0})};n._getPremiumItemNode=function(t){var z,w,y=(new d["default"].PortalItem(a.__assign(a.__assign({},
t),{portal:{isPortal:null===(z=c["default"].self)||void 0===z?void 0:z.isPortal}}))).getTypeInfo();z=(null===(w=c["default"].self)||void 0===w?0:w.isPortal)?"portal":"";t=h["default"].includes(t.typeKeywords,"Requires Credits");return y.isPremiumContent?(t=e["default"].create("div",{className:"esri-premium-content",title:t?this.i18n["premiumcontentcreditstitle"+z]:this.i18n["premiumcontenttitle"+z],innerHTML:t?this.i18n.premiumcontent:this.i18n.subscriptioncontent}),e["default"].create("img",{className:"esri-premium-icon",
src:y.premiumIconUrl},t,"first"),t):!1};n._getItemIconUrl=function(t){var z;return(new d["default"].PortalItem(a.__assign(a.__assign({},t),{portal:{isPortal:null===(z=c["default"].self)||void 0===z?void 0:z.isPortal}}))).iconUrl};n._getItemImageUrl=function(t,z){var w,y=(null===(w=t.type)||void 0===w?void 0:w.toLowerCase())||"";return g["default"].relativeToExplicitUrl("geocoding service"===y||"network analysis service"===y||"geoprocessing service"===y||"geodata service"===y||"geometry service"===
y||"workflow manager service"===y?z?"images/tool_16x16.png":"images/tool_32x32.png":"wms"===y||"kml"===y||"globe service"===y||"map service"===y||"image service"===y||"feature service"===y||"scene service"===y||"stream service"===y?z?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"===y||"mobile application"===y||"web map"===y?z?"images/map_16x16.png":"images/map_32x32.png":"layer"===y||"layer package"===y||"tile package"===y||"vector tile package"===y||"scene package"===
y||"image collection"===y||"explorer layer"===y||"cad drawing"===y?z?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"===y||"desktop add in"===y||"geoprocessing package"===y||"locator package"===y?z?"images/tool-download_16x16.png":"images/tool-download_32x32.png":"map document"===y||"globe document"===y||"scene document"===y?z?"images/map-download_16x16.png":"images/map-download_32x32.png":"task file"===y?z?"images/taskfile16.png":"images/taskfile32.png":z?"images/noimage_16.png":
"images/noimage.gif")};n.changeTypename=function(t,z,w){var y,x,A=new d["default"].PortalItem(a.__assign(a.__assign({},t),{portal:{isPortal:null===(y=c["default"].self)||void 0===y?void 0:y.isPortal}}));y=A.getTypeInfo();A=-1<(null===(x=t.type)||void 0===x?void 0:x.toLowerCase().indexOf("add in"))?A.displayName:A.type;x=h["default"].includes(t.typeKeywords,"Hosted Service");var v=h["default"].includes(t.typeKeywords,"View Service"),u=h["default"].includes(t.typeKeywords,"ArcGIS Server"),C="Feature Service"===
t.type;t="Feature Collection"===t.type;y=y.displayName;w&&(y=x?y+(" ("+(v?this.i18n.viewsWidget.hostedView:C?this.i18n.viewsWidget.hostedData:this.i18n.viewsWidget.hostedService)+")"):y+(" ("+this.i18n.viewsWidget.locatorView+")"));w=u||t?this.i18n.source+" ":"";return z?'\x3cspan title\x3d"'+w+A+'"\x3e'+y+"\x3c/span\x3e":y};n.getFavorites=function(){var t,z={};return g["default"].request({url:c["default"].restBaseUrl+"content/groups/"+c["default"].self.user.favGroupId}).then(function(w){t=w.items||
[];t.forEach(function(y){z[y.id]=!0});return z})};n.addToFavorites=function(t){var z,w,y=g["default"].getUser().favGroupId,x=c["default"].restBaseUrl+"content/items/"+t.id+"/share",A=t.access&&"public"===t.access||(null===(z=t.sharing)||void 0===z?void 0:z.access)&&"public"===t.sharing.access;z=t.access&&"org"===t.access||(null===(w=t.sharing)||void 0===w?void 0:w.access)&&"org"===t.sharing.access;return g["default"].request({url:x,content:{f:"json",everyone:A||!1,org:z||!1,groups:[y],items:[t.id]}},
{usePost:!0})};n.removeFromFavorites=function(t){var z=g["default"].getUser().favGroupId;return g["default"].request({url:c["default"].restBaseUrl+"content/items/"+t.id+"/unshare",content:{f:"json",everyone:!1,org:!1,groups:[z],items:[t.id]}},{usePost:!0})};n.i18n=a.__assign(a.__assign({},m["default"].common),{source:m["default"].itemProperties.source,viewsWidget:m["default"].viewsWidget});return n}()})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang ../_base/declare ../_base/array ../_base/json ../_base/kernel ./ItemFileReadStore ../date/stamp".split(" "),
function(D,B,a,c,h,g,e){return B("dojo.data.ItemFileWriteStore",g,{constructor:function(l){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};this._datatypeMap.Date.serialize||(this._datatypeMap.Date.serialize=function(r){return e.toISOString(r,{zulu:!0})});l&&!1===l.referenceIntegrity&&(this.referenceIntegrity=!1);this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(l){if(!l)throw Error("assertion failed in ItemFileWriteStore");
},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(l,r){this._assert(!this._saveInProgress);this._loadFinished||this._forceLoad();if("object"!=typeof l&&"undefined"!=typeof l)throw Error("newItem() was passed something other than an object");var k=null,f=this._getIdentifierAttribute();if(f===Number)k=this._arrayOfAllItems.length;else{k=l[f];if("undefined"===typeof k)throw Error("newItem() was not passed an identity for the new item");if(D.isArray(k))throw Error("newItem() was not passed an single-valued identity");
}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[k]);this._assert("undefined"===typeof this._pending._newItems[k]);this._assert("undefined"===typeof this._pending._deletedItems[k]);var b={};b[this._storeRefPropName]=this;b[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[k]=b,b[f]=[k]);this._arrayOfAllItems.push(b);f=null;if(r&&r.parent&&r.attribute){f={item:r.parent,attribute:r.attribute,oldValue:void 0};var d=this.getValues(r.parent,
r.attribute);if(d&&0<d.length){var q=d.slice(0,d.length);f.oldValue=1===d.length?d[0]:d.slice(0,d.length);q.push(b);this._setValueOrValues(r.parent,r.attribute,q,!1);f.newValue=this.getValues(r.parent,r.attribute)}else this._setValueOrValues(r.parent,r.attribute,b,!1),f.newValue=b}else b[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(b);this._pending._newItems[k]=b;for(var m in l){if(m===this._storeRefPropName||m===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");
k=l[m];D.isArray(k)||(k=[k]);b[m]=k;if(this.referenceIntegrity)for(d=0;d<k.length;d++)q=k[d],this.isItem(q)&&this._addReferenceToMap(q,b,m)}this.onNew(b,f);return b},_removeArrayElement:function(l,r){var k=a.indexOf(l,r);return-1!=k?(l.splice(k,1),!0):!1},deleteItem:function(l){this._assert(!this._saveInProgress);this._assertIsItem(l);var r=l[this._itemNumPropName],k=this.getIdentity(l);if(this.referenceIntegrity){var f=this.getAttributes(l);l[this._reverseRefMap]&&(l["backup_"+this._reverseRefMap]=
D.clone(l[this._reverseRefMap]));a.forEach(f,function(t){a.forEach(this.getValues(l,t),function(z){this.isItem(z)&&(l["backupRefs_"+this._reverseRefMap]||(l["backupRefs_"+this._reverseRefMap]=[]),l["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(z),attr:t}),this._removeReferenceFromMap(z,l,t))},this)},this);if(f=l[this._reverseRefMap])for(var b in f){var d=null;if(d=this._itemsByIdentity?this._itemsByIdentity[b]:this._arrayOfAllItems[b])for(var q in f[b]){var m=this.getValues(d,q)||[],
n=a.filter(m,function(t){return!(this.isItem(t)&&this.getIdentity(t)==k)},this);this._removeReferenceFromMap(l,d,q);n.length<m.length&&this._setValueOrValues(d,q,n,!0)}}}this._arrayOfAllItems[r]=null;l[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[k];this._pending._deletedItems[k]=l;l[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,l);this.onDelete(l);return!0},setValue:function(l,r,k){return this._setValueOrValues(l,r,k,!0)},setValues:function(l,
r,k){return this._setValueOrValues(l,r,k,!0)},unsetAttribute:function(l,r){return this._setValueOrValues(l,r,[],!0)},_setValueOrValues:function(l,r,k,f){this._assert(!this._saveInProgress);this._assertIsItem(l);this._assert(D.isString(r));this._assert("undefined"!==typeof k);var b=this._getIdentifierAttribute();if(r==b)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");b=this._getValueOrValues(l,r);var d=this.getIdentity(l);if(!this._pending._modifiedItems[d]){var q=
{};for(m in l)q[m]=m===this._storeRefPropName||m===this._itemNumPropName||m===this._rootItemPropName?l[m]:m===this._reverseRefMap?D.clone(l[m]):l[m].slice(0,l[m].length);this._pending._modifiedItems[d]=q}d=!1;if(D.isArray(k)&&0===k.length){if(d=delete l[r],k=void 0,this.referenceIntegrity&&b){var m=b;D.isArray(m)||(m=[m]);for(var n=0;n<m.length;n++)q=m[n],this.isItem(q)&&this._removeReferenceFromMap(q,l,r)}}else{d=D.isArray(k)?k.slice(0,k.length):[k];if(this.referenceIntegrity)if(b){m=b;D.isArray(m)||
(m=[m]);var t={};a.forEach(m,function(z){this.isItem(z)&&(z=this.getIdentity(z),t[z.toString()]=!0)},this);a.forEach(d,function(z){if(this.isItem(z)){var w=this.getIdentity(z);t[w.toString()]?delete t[w.toString()]:this._addReferenceToMap(z,l,r)}},this);for(n in t)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[n]:this._arrayOfAllItems[n],l,r)}else for(n=0;n<d.length;n++)q=d[n],this.isItem(q)&&this._addReferenceToMap(q,l,r);l[r]=d;d=!0}if(f)this.onSet(l,r,b,k);return d},_addReferenceToMap:function(l,
r,k){r=this.getIdentity(r);var f=l[this._reverseRefMap];f||(f=l[this._reverseRefMap]={});(l=f[r])||(l=f[r]={});l[k]=!0},_removeReferenceFromMap:function(l,r,k){r=this.getIdentity(r);var f=l[this._reverseRefMap],b;if(f){for(b in f)b==r&&(delete f[b][k],this._isEmpty(f[b])&&delete f[b]);this._isEmpty(f)&&delete l[this._reverseRefMap]}},_dumpReferenceMap:function(){var l;for(l=0;l<this._arrayOfAllItems.length;l++);},_getValueOrValues:function(l,r){var k=void 0;this.hasAttribute(l,r)&&(k=this.getValues(l,
r),k=1==k.length?k[0]:k);return k},_flatten:function(l){if(this.isItem(l))return{_reference:this.getIdentity(l)};if("object"===typeof l)for(var r in this._datatypeMap){var k=this._datatypeMap[r];if(D.isObject(k)&&!D.isFunction(k)){if(l instanceof k.type){if(!k.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+r+"]");return{_type:r,_value:k.serialize(l)}}}else if(l instanceof k)return{_type:r,_value:l.toString()}}return l},_getNewFileContentString:function(){var l=
{},r=this._getIdentifierAttribute();r!==Number&&(l.identifier=r);this._labelAttr&&(l.label=this._labelAttr);l.items=[];for(r=0;r<this._arrayOfAllItems.length;++r){var k=this._arrayOfAllItems[r];if(null!==k){var f={},b;for(b in k)if(b!==this._storeRefPropName&&b!==this._itemNumPropName&&b!==this._reverseRefMap&&b!==this._rootItemPropName){var d=this.getValues(k,b);if(1==d.length)f[b]=this._flatten(d[0]);else for(var q=[],m=0;m<d.length;++m)q.push(this._flatten(d[m])),f[b]=q}l.items.push(f)}}return c.toJson(l,
!0)},_isEmpty:function(l){var r=!0;if(D.isObject(l))for(var k in l){r=!1;break}else D.isArray(l)&&0<l.length&&(r=!1);return r},save:function(l){this._assert(!this._saveInProgress);this._saveInProgress=!0;var r=this,k=function(){r._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};r._saveInProgress=!1;l&&l.onComplete&&l.onComplete.call(l.scope||h.global)},f=function(d){r._saveInProgress=!1;l&&l.onError&&l.onError.call(l.scope||h.global,d)};if(this._saveEverything){var b=this._getNewFileContentString();
this._saveEverything(k,f,b)}this._saveCustom&&this._saveCustom(k,f);this._saveEverything||this._saveCustom||k()},revert:function(){this._assert(!this._saveInProgress);for(var l in this._pending._modifiedItems){var r=this._pending._modifiedItems[l],k=null;k=this._itemsByIdentity?this._itemsByIdentity[l]:this._arrayOfAllItems[l];r[this._storeRefPropName]=this;for(var f in k)delete k[f];D.mixin(k,r)}for(l in this._pending._deletedItems){var b=this._pending._deletedItems[l];b[this._storeRefPropName]=
this;r=b[this._itemNumPropName];b["backup_"+this._reverseRefMap]&&(b[this._reverseRefMap]=b["backup_"+this._reverseRefMap],delete b["backup_"+this._reverseRefMap]);this._arrayOfAllItems[r]=b;this._itemsByIdentity&&(this._itemsByIdentity[l]=b);b[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(b)}for(l in this._pending._deletedItems)b=this._pending._deletedItems[l],b["backupRefs_"+this._reverseRefMap]&&(a.forEach(b["backupRefs_"+this._reverseRefMap],function(d){this._addReferenceToMap(this._itemsByIdentity?
this._itemsByIdentity[d.id]:this._arrayOfAllItems[d.id],b,d.attr)},this),delete b["backupRefs_"+this._reverseRefMap]);for(l in this._pending._newItems)r=this._pending._newItems[l],r[this._storeRefPropName]=null,this._arrayOfAllItems[r[this._itemNumPropName]]=null,r[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,r),this._itemsByIdentity&&delete this._itemsByIdentity[l];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(l){return l?
(l=this.getIdentity(l),(new Boolean(this._pending._newItems[l]||this._pending._modifiedItems[l]||this._pending._deletedItems[l])).valueOf()):!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(l,r,k,f){},onNew:function(l,r){},onDelete:function(l){},close:function(l){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");
this.inherited(arguments)}}})})},"dojo/dnd/AutoSource":function(){define(["../_base/declare","./Source"],function(D,B){return D("dojo.dnd.AutoSource",B,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(D,B,a){return D("dojo.dnd.Target",a,{constructor:function(){this.isSource=!1;B.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],
function(D,B,a,c){return B("dojo.fx.Toggler",null,{node:null,showFunc:a.fadeIn,hideFunc:a.fadeOut,showDuration:200,hideDuration:200,constructor:function(h){D.mixin(this,h);this.node=h.node;this._showArgs=D.mixin({},h);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=D.mixin({},h);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);c.after(this.showAnim,
"beforeBegin",D.hitch(this.hideAnim,"stop",!0),!0);c.after(this.hideAnim,"beforeBegin",D.hitch(this.showAnim,"stop",!0),!0)},show:function(h){return this.showAnim.play(h||0)},hide:function(h){return this.hideAnim.play(h||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(D,B,a,c,h,g){return D("dijit.MenuSeparator",[a,c,h],{templateString:g,buildRendering:function(){this.inherited(arguments);
B.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"xstyle/core/load-css":function(){define([],function(){function D(g){if(c.createStyleSheet){var e=c.createStyleSheet();e.cssText=g;return e.owningElement}e=c.createElement("style");e.setAttribute("type","text/css");e.appendChild(c.createTextNode(g));h.appendChild(e);return e}function B(g,e,l){var r=a[g];if(r)return k=D(r),e(k);var k=c.createElement("link");k.type="text/css";k.rel="stylesheet";k.href=g;var f=!l||!1!==l.wait;g=
(g=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+g[1];if(null===k.onload&&!(536>g))k.onload=function(){k.onload=null;k.onerror=null;f&&e(k)},k.onerror=function(){f&&e(k)};else if(f)var b=setInterval(function(){k.style&&(clearInterval(b),e(k))},15);(h||c.getElementsByTagName("head")[0]).appendChild(k);f||e(k)}var a="undefined"==typeof _css_cache?{}:_css_cache,c=document,h=c.head;B.insertCss=D;return B})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/Alert/Alert.html":'\x3cdiv class\x3d"alert alert-${modifier} alert-fixed alert-fade-in-down leader-1 trailer-1 ${cssClasses}"\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cdiv class\x3d"flex-0 margin-right-half margin-left-0 text-${modifier}" aria-label\x3d"${iconAltText}"\x3e\r\n      ${!icon}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 flex-center-self margin-right-half margin-left-0 alert__text-container" role\x3d"status"\x3e\r\n      ${!text}\r\n      \x3cdiv data-dojo-attach-point\x3d"_listContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"alert-close btn-link btn-link-black js-alert-close" aria-label\x3d"${i18n.common.close}"\x3e\r\n      ${!icons.x.32}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog" aria-labelledby\x3d"general-dialog-${id} general-dialog-content"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link btn-link--inherit text-left text-ellipsis flex-1 js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/solution.html":'\x3cspan class\x3d"badge badge--solution ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\r\n    \x3cpath fill\x3d"#312b43" d\x3d"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/\x3e\r\n    \x3cpath class\x3d"cls-1" d\x3d"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.solution}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cg fill\x3d"#196FA6"\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n      \x3c/g\x3e\r\n    \x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv class\x3d"${cssClasses:empty} ${tooltipClass:empty}" aria-label\x3d"${_group.title}"\x3e\r\n  \x3cimg src\x3d"${_group.thumbnailUrl}" alt\x3d"" class\x3d"${_group.thumbnail:hide}" data-dojo-attach-point\x3d"_img"\x3e\r\n  \x3csvg data-dojo-attach-point\x3d"_svg" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 ${_viewBoxSize} ${_viewBoxSize}" class\x3d"${_group.thumbnail:show}" \x3e\r\n    \x3cpath fill\x3d"${_group.fillColor}" d\x3d"M0 0h65v65H0z" /\x3e\r\n    \x3cpath fill\x3d"#ccc" d\x3d"M0 0h65v65H0z" fill-opacity\x3d"0.8" /\x3e\r\n    \x3cpath class\x3d"${_group.useLetter:show}" fill\x3d"#FFF" d\x3d"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"\r\n    /\x3e\r\n    \x3ctext class\x3d"${_group.useLetter:hide} font-size-${letterSize}" x\x3d"50%" y\x3d"50%" fill\x3d"white" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-default-text" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-ie-text" y\x3d"70%" x\x3d"55%" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n  \x3c/svg\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteHeaderSimple.html":'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"avenir-bold font-size-1 profile-popup__full-name" data-dojo-attach-point\x3d"fullNameEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"usernameEl"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"member-thumb ${cssClasses}" style\x3d"background:${member.backgroundColor};"\x3e\r\n    \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n    \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n      ${member.initials}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(D){D(['dojo/i18n!*preload*arcgisonline/nls/base*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/base",["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,esri/utils,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],function(D,
B,a){D.provide("arcgisonline.base");D.require("esri.main");D.require("esri.utils");D.require("arcgisonline.init");D.require("arcgisonline.sharing.dijit.SiteHeader");D.require("arcgisonline.sharing.dijit.SiteFooter");D.require("arcgisonline.sharing.dijit.SiteFooterMap");D.require("arcgisonline.sharing.dijit.SignUpInternal");D.require("dijit.form.Form");D.require("arcgisonline.sharing.geow.Account");D.require("arcgisonline.sharing.dijit.HelpManager");D.require("dojo.date.locale");D.require("dojox.widget.Rotator");
D.require("dojox.widget.AutoRotator");D.require("dojox.widget.rotator.Controller");D.require("dojox.widget.rotator.Fade");D.require("dijit.layout.StackController");D.require("dojo.cookie");D.require("dojo.json");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("dojo.topic");D.require("dijit._base");D.require("dijit.form.DropDownButton");D.require("dijit.form.ComboButton");D.require("dijit.form.ToggleButton");D.require("dijit.form.RadioButton");D.require("dijit.PopupMenuItem");
D.require("dijit._Contained");D.require("dijit._Container");D.require("dijit._WidgetBase");D.require("dijit.main");D.require("dojo.Stateful");D.require("dojo.date.locale");D.require("esri.utils");D.require("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.views");D.require("dojo.parser");D.require("dijit._base");D.require("dojo.dnd.AutoSource");D.require("dojo.dnd.Target");D.require("dojo.fx.Toggler");D.require("dijit.TooltipDialog");
D.require("dijit.MenuSeparator");D.requireLocalization("arcgisonline","arcgisonline")});